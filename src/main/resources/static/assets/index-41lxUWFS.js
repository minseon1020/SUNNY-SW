function vk(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const u=Object.getOwnPropertyDescriptor(i,r);u&&Object.defineProperty(t,r,u.get?u:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}})();function Pu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function KR(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var nb={exports:{}},Rg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wT;function QR(){if(wT)return Rg;wT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,u){var f=null;if(u!==void 0&&(f=""+u),r.key!==void 0&&(f=""+r.key),"key"in r){u={};for(var a in r)a!=="key"&&(u[a]=r[a])}else u=r;return r=u.ref,{$$typeof:t,type:i,key:f,ref:r!==void 0?r:null,props:u}}return Rg.Fragment=e,Rg.jsx=n,Rg.jsxs=n,Rg}var ST;function JR(){return ST||(ST=1,nb.exports=QR()),nb.exports}var vt=JR(),ib={exports:{}},Gn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TT;function t3(){if(TT)return Gn;TT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),O=Symbol.iterator;function I(ft){return ft===null||typeof ft!="object"?null:(ft=O&&ft[O]||ft["@@iterator"],typeof ft=="function"?ft:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,H={};function K(ft,St,jt){this.props=ft,this.context=St,this.refs=H,this.updater=jt||F}K.prototype.isReactComponent={},K.prototype.setState=function(ft,St){if(typeof ft!="object"&&typeof ft!="function"&&ft!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ft,St,"setState")},K.prototype.forceUpdate=function(ft){this.updater.enqueueForceUpdate(this,ft,"forceUpdate")};function W(){}W.prototype=K.prototype;function X(ft,St,jt){this.props=ft,this.context=St,this.refs=H,this.updater=jt||F}var tt=X.prototype=new W;tt.constructor=X,q(tt,K.prototype),tt.isPureReactComponent=!0;var Q=Array.isArray;function at(){}var ht={H:null,A:null,T:null,S:null},ot=Object.prototype.hasOwnProperty;function ct(ft,St,jt){var Yt=jt.ref;return{$$typeof:t,type:ft,key:St,ref:Yt!==void 0?Yt:null,props:jt}}function xt(ft,St){return ct(ft.type,St,ft.props)}function wt(ft){return typeof ft=="object"&&ft!==null&&ft.$$typeof===t}function Ct(ft){var St={"=":"=0",":":"=2"};return"$"+ft.replace(/[=:]/g,function(jt){return St[jt]})}var re=/\/+/g;function ve(ft,St){return typeof ft=="object"&&ft!==null&&ft.key!=null?Ct(""+ft.key):St.toString(36)}function Ee(ft){switch(ft.status){case"fulfilled":return ft.value;case"rejected":throw ft.reason;default:switch(typeof ft.status=="string"?ft.then(at,at):(ft.status="pending",ft.then(function(St){ft.status==="pending"&&(ft.status="fulfilled",ft.value=St)},function(St){ft.status==="pending"&&(ft.status="rejected",ft.reason=St)})),ft.status){case"fulfilled":return ft.value;case"rejected":throw ft.reason}}throw ft}function Nt(ft,St,jt,Yt,le){var ce=typeof ft;(ce==="undefined"||ce==="boolean")&&(ft=null);var Oe=!1;if(ft===null)Oe=!0;else switch(ce){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(ft.$$typeof){case t:case e:Oe=!0;break;case x:return Oe=ft._init,Nt(Oe(ft._payload),St,jt,Yt,le)}}if(Oe)return le=le(ft),Oe=Yt===""?"."+ve(ft,0):Yt,Q(le)?(jt="",Oe!=null&&(jt=Oe.replace(re,"$&/")+"/"),Nt(le,St,jt,"",function(Le){return Le})):le!=null&&(wt(le)&&(le=xt(le,jt+(le.key==null||ft&&ft.key===le.key?"":(""+le.key).replace(re,"$&/")+"/")+Oe)),St.push(le)),1;Oe=0;var Ie=Yt===""?".":Yt+":";if(Q(ft))for(var Gt=0;Gt<ft.length;Gt++)Yt=ft[Gt],ce=Ie+ve(Yt,Gt),Oe+=Nt(Yt,St,jt,ce,le);else if(Gt=I(ft),typeof Gt=="function")for(ft=Gt.call(ft),Gt=0;!(Yt=ft.next()).done;)Yt=Yt.value,ce=Ie+ve(Yt,Gt++),Oe+=Nt(Yt,St,jt,ce,le);else if(ce==="object"){if(typeof ft.then=="function")return Nt(Ee(ft),St,jt,Yt,le);throw St=String(ft),Error("Objects are not valid as a React child (found: "+(St==="[object Object]"?"object with keys {"+Object.keys(ft).join(", ")+"}":St)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function Pt(ft,St,jt){if(ft==null)return ft;var Yt=[],le=0;return Nt(ft,Yt,"","",function(ce){return St.call(jt,ce,le++)}),Yt}function Bt(ft){if(ft._status===-1){var St=ft._result;St=St(),St.then(function(jt){(ft._status===0||ft._status===-1)&&(ft._status=1,ft._result=jt)},function(jt){(ft._status===0||ft._status===-1)&&(ft._status=2,ft._result=jt)}),ft._status===-1&&(ft._status=0,ft._result=St)}if(ft._status===1)return ft._result.default;throw ft._result}var Ft=typeof reportError=="function"?reportError:function(ft){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var St=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ft=="object"&&ft!==null&&typeof ft.message=="string"?String(ft.message):String(ft),error:ft});if(!window.dispatchEvent(St))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ft);return}console.error(ft)},$t={map:Pt,forEach:function(ft,St,jt){Pt(ft,function(){St.apply(this,arguments)},jt)},count:function(ft){var St=0;return Pt(ft,function(){St++}),St},toArray:function(ft){return Pt(ft,function(St){return St})||[]},only:function(ft){if(!wt(ft))throw Error("React.Children.only expected to receive a single React element child.");return ft}};return Gn.Activity=A,Gn.Children=$t,Gn.Component=K,Gn.Fragment=n,Gn.Profiler=r,Gn.PureComponent=X,Gn.StrictMode=i,Gn.Suspense=y,Gn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ht,Gn.__COMPILER_RUNTIME={__proto__:null,c:function(ft){return ht.H.useMemoCache(ft)}},Gn.cache=function(ft){return function(){return ft.apply(null,arguments)}},Gn.cacheSignal=function(){return null},Gn.cloneElement=function(ft,St,jt){if(ft==null)throw Error("The argument must be a React element, but you passed "+ft+".");var Yt=q({},ft.props),le=ft.key;if(St!=null)for(ce in St.key!==void 0&&(le=""+St.key),St)!ot.call(St,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&St.ref===void 0||(Yt[ce]=St[ce]);var ce=arguments.length-2;if(ce===1)Yt.children=jt;else if(1<ce){for(var Oe=Array(ce),Ie=0;Ie<ce;Ie++)Oe[Ie]=arguments[Ie+2];Yt.children=Oe}return ct(ft.type,le,Yt)},Gn.createContext=function(ft){return ft={$$typeof:f,_currentValue:ft,_currentValue2:ft,_threadCount:0,Provider:null,Consumer:null},ft.Provider=ft,ft.Consumer={$$typeof:u,_context:ft},ft},Gn.createElement=function(ft,St,jt){var Yt,le={},ce=null;if(St!=null)for(Yt in St.key!==void 0&&(ce=""+St.key),St)ot.call(St,Yt)&&Yt!=="key"&&Yt!=="__self"&&Yt!=="__source"&&(le[Yt]=St[Yt]);var Oe=arguments.length-2;if(Oe===1)le.children=jt;else if(1<Oe){for(var Ie=Array(Oe),Gt=0;Gt<Oe;Gt++)Ie[Gt]=arguments[Gt+2];le.children=Ie}if(ft&&ft.defaultProps)for(Yt in Oe=ft.defaultProps,Oe)le[Yt]===void 0&&(le[Yt]=Oe[Yt]);return ct(ft,ce,le)},Gn.createRef=function(){return{current:null}},Gn.forwardRef=function(ft){return{$$typeof:a,render:ft}},Gn.isValidElement=wt,Gn.lazy=function(ft){return{$$typeof:x,_payload:{_status:-1,_result:ft},_init:Bt}},Gn.memo=function(ft,St){return{$$typeof:_,type:ft,compare:St===void 0?null:St}},Gn.startTransition=function(ft){var St=ht.T,jt={};ht.T=jt;try{var Yt=ft(),le=ht.S;le!==null&&le(jt,Yt),typeof Yt=="object"&&Yt!==null&&typeof Yt.then=="function"&&Yt.then(at,Ft)}catch(ce){Ft(ce)}finally{St!==null&&jt.types!==null&&(St.types=jt.types),ht.T=St}},Gn.unstable_useCacheRefresh=function(){return ht.H.useCacheRefresh()},Gn.use=function(ft){return ht.H.use(ft)},Gn.useActionState=function(ft,St,jt){return ht.H.useActionState(ft,St,jt)},Gn.useCallback=function(ft,St){return ht.H.useCallback(ft,St)},Gn.useContext=function(ft){return ht.H.useContext(ft)},Gn.useDebugValue=function(){},Gn.useDeferredValue=function(ft,St){return ht.H.useDeferredValue(ft,St)},Gn.useEffect=function(ft,St){return ht.H.useEffect(ft,St)},Gn.useEffectEvent=function(ft){return ht.H.useEffectEvent(ft)},Gn.useId=function(){return ht.H.useId()},Gn.useImperativeHandle=function(ft,St,jt){return ht.H.useImperativeHandle(ft,St,jt)},Gn.useInsertionEffect=function(ft,St){return ht.H.useInsertionEffect(ft,St)},Gn.useLayoutEffect=function(ft,St){return ht.H.useLayoutEffect(ft,St)},Gn.useMemo=function(ft,St){return ht.H.useMemo(ft,St)},Gn.useOptimistic=function(ft,St){return ht.H.useOptimistic(ft,St)},Gn.useReducer=function(ft,St,jt){return ht.H.useReducer(ft,St,jt)},Gn.useRef=function(ft){return ht.H.useRef(ft)},Gn.useState=function(ft){return ht.H.useState(ft)},Gn.useSyncExternalStore=function(ft,St,jt){return ht.H.useSyncExternalStore(ft,St,jt)},Gn.useTransition=function(){return ht.H.useTransition()},Gn.version="19.2.0",Gn}var MT;function Om(){return MT||(MT=1,ib.exports=t3()),ib.exports}var G=Om();const my=Pu(G),e3=vk({__proto__:null,default:my},[G]);var rb={exports:{}},Bg={},ab={exports:{}},sb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AT;function n3(){return AT||(AT=1,(function(t){function e(Nt,Pt){var Bt=Nt.length;Nt.push(Pt);t:for(;0<Bt;){var Ft=Bt-1>>>1,$t=Nt[Ft];if(0<r($t,Pt))Nt[Ft]=Pt,Nt[Bt]=$t,Bt=Ft;else break t}}function n(Nt){return Nt.length===0?null:Nt[0]}function i(Nt){if(Nt.length===0)return null;var Pt=Nt[0],Bt=Nt.pop();if(Bt!==Pt){Nt[0]=Bt;t:for(var Ft=0,$t=Nt.length,ft=$t>>>1;Ft<ft;){var St=2*(Ft+1)-1,jt=Nt[St],Yt=St+1,le=Nt[Yt];if(0>r(jt,Bt))Yt<$t&&0>r(le,jt)?(Nt[Ft]=le,Nt[Yt]=Bt,Ft=Yt):(Nt[Ft]=jt,Nt[St]=Bt,Ft=St);else if(Yt<$t&&0>r(le,Bt))Nt[Ft]=le,Nt[Yt]=Bt,Ft=Yt;else break t}}return Pt}function r(Nt,Pt){var Bt=Nt.sortIndex-Pt.sortIndex;return Bt!==0?Bt:Nt.id-Pt.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var f=Date,a=f.now();t.unstable_now=function(){return f.now()-a}}var y=[],_=[],x=1,A=null,O=3,I=!1,F=!1,q=!1,H=!1,K=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function tt(Nt){for(var Pt=n(_);Pt!==null;){if(Pt.callback===null)i(_);else if(Pt.startTime<=Nt)i(_),Pt.sortIndex=Pt.expirationTime,e(y,Pt);else break;Pt=n(_)}}function Q(Nt){if(q=!1,tt(Nt),!F)if(n(y)!==null)F=!0,at||(at=!0,Ct());else{var Pt=n(_);Pt!==null&&Ee(Q,Pt.startTime-Nt)}}var at=!1,ht=-1,ot=5,ct=-1;function xt(){return H?!0:!(t.unstable_now()-ct<ot)}function wt(){if(H=!1,at){var Nt=t.unstable_now();ct=Nt;var Pt=!0;try{t:{F=!1,q&&(q=!1,W(ht),ht=-1),I=!0;var Bt=O;try{e:{for(tt(Nt),A=n(y);A!==null&&!(A.expirationTime>Nt&&xt());){var Ft=A.callback;if(typeof Ft=="function"){A.callback=null,O=A.priorityLevel;var $t=Ft(A.expirationTime<=Nt);if(Nt=t.unstable_now(),typeof $t=="function"){A.callback=$t,tt(Nt),Pt=!0;break e}A===n(y)&&i(y),tt(Nt)}else i(y);A=n(y)}if(A!==null)Pt=!0;else{var ft=n(_);ft!==null&&Ee(Q,ft.startTime-Nt),Pt=!1}}break t}finally{A=null,O=Bt,I=!1}Pt=void 0}}finally{Pt?Ct():at=!1}}}var Ct;if(typeof X=="function")Ct=function(){X(wt)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ve=re.port2;re.port1.onmessage=wt,Ct=function(){ve.postMessage(null)}}else Ct=function(){K(wt,0)};function Ee(Nt,Pt){ht=K(function(){Nt(t.unstable_now())},Pt)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Nt){Nt.callback=null},t.unstable_forceFrameRate=function(Nt){0>Nt||125<Nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ot=0<Nt?Math.floor(1e3/Nt):5},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_next=function(Nt){switch(O){case 1:case 2:case 3:var Pt=3;break;default:Pt=O}var Bt=O;O=Pt;try{return Nt()}finally{O=Bt}},t.unstable_requestPaint=function(){H=!0},t.unstable_runWithPriority=function(Nt,Pt){switch(Nt){case 1:case 2:case 3:case 4:case 5:break;default:Nt=3}var Bt=O;O=Nt;try{return Pt()}finally{O=Bt}},t.unstable_scheduleCallback=function(Nt,Pt,Bt){var Ft=t.unstable_now();switch(typeof Bt=="object"&&Bt!==null?(Bt=Bt.delay,Bt=typeof Bt=="number"&&0<Bt?Ft+Bt:Ft):Bt=Ft,Nt){case 1:var $t=-1;break;case 2:$t=250;break;case 5:$t=1073741823;break;case 4:$t=1e4;break;default:$t=5e3}return $t=Bt+$t,Nt={id:x++,callback:Pt,priorityLevel:Nt,startTime:Bt,expirationTime:$t,sortIndex:-1},Bt>Ft?(Nt.sortIndex=Bt,e(_,Nt),n(y)===null&&Nt===n(_)&&(q?(W(ht),ht=-1):q=!0,Ee(Q,Bt-Ft))):(Nt.sortIndex=$t,e(y,Nt),F||I||(F=!0,at||(at=!0,Ct()))),Nt},t.unstable_shouldYield=xt,t.unstable_wrapCallback=function(Nt){var Pt=O;return function(){var Bt=O;O=Pt;try{return Nt.apply(this,arguments)}finally{O=Bt}}}})(sb)),sb}var ET;function i3(){return ET||(ET=1,ab.exports=n3()),ab.exports}var ob={exports:{}},bo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CT;function r3(){if(CT)return bo;CT=1;var t=Om();function e(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)_+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(y,_,x){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:A==null?null:""+A,children:y,containerInfo:_,implementation:x}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return bo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bo.createPortal=function(y,_){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(y,_,null,x)},bo.flushSync=function(y){var _=f.T,x=i.p;try{if(f.T=null,i.p=2,y)return y()}finally{f.T=_,i.p=x,i.d.f()}},bo.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(y,_))},bo.prefetchDNS=function(y){typeof y=="string"&&i.d.D(y)},bo.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var x=_.as,A=a(x,_.crossOrigin),O=typeof _.integrity=="string"?_.integrity:void 0,I=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;x==="style"?i.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:O,fetchPriority:I}):x==="script"&&i.d.X(y,{crossOrigin:A,integrity:O,fetchPriority:I,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},bo.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var x=a(_.as,_.crossOrigin);i.d.M(y,{crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(y)},bo.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var x=_.as,A=a(x,_.crossOrigin);i.d.L(y,x,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},bo.preloadModule=function(y,_){if(typeof y=="string")if(_){var x=a(_.as,_.crossOrigin);i.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(y)},bo.requestFormReset=function(y){i.d.r(y)},bo.unstable_batchedUpdates=function(y,_){return y(_)},bo.useFormState=function(y,_,x){return f.H.useFormState(y,_,x)},bo.useFormStatus=function(){return f.H.useHostTransitionStatus()},bo.version="19.2.0",bo}var PT;function xk(){if(PT)return ob.exports;PT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ob.exports=r3(),ob.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kT;function a3(){if(kT)return Bg;kT=1;var t=i3(),e=Om(),n=xk();function i(o){var h="https://react.dev/errors/"+o;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+o+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function u(o){var h=o,g=o;if(o.alternate)for(;h.return;)h=h.return;else{o=h;do h=o,(h.flags&4098)!==0&&(g=h.return),o=h.return;while(o)}return h.tag===3?g:null}function f(o){if(o.tag===13){var h=o.memoizedState;if(h===null&&(o=o.alternate,o!==null&&(h=o.memoizedState)),h!==null)return h.dehydrated}return null}function a(o){if(o.tag===31){var h=o.memoizedState;if(h===null&&(o=o.alternate,o!==null&&(h=o.memoizedState)),h!==null)return h.dehydrated}return null}function y(o){if(u(o)!==o)throw Error(i(188))}function _(o){var h=o.alternate;if(!h){if(h=u(o),h===null)throw Error(i(188));return h!==o?null:o}for(var g=o,S=h;;){var z=g.return;if(z===null)break;var N=z.alternate;if(N===null){if(S=z.return,S!==null){g=S;continue}break}if(z.child===N.child){for(N=z.child;N;){if(N===g)return y(z),o;if(N===S)return y(z),h;N=N.sibling}throw Error(i(188))}if(g.return!==S.return)g=z,S=N;else{for(var rt=!1,_t=z.child;_t;){if(_t===g){rt=!0,g=z,S=N;break}if(_t===S){rt=!0,S=z,g=N;break}_t=_t.sibling}if(!rt){for(_t=N.child;_t;){if(_t===g){rt=!0,g=N,S=z;break}if(_t===S){rt=!0,S=N,g=z;break}_t=_t.sibling}if(!rt)throw Error(i(189))}}if(g.alternate!==S)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?o:h}function x(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o;for(o=o.child;o!==null;){if(h=x(o),h!==null)return h;o=o.sibling}return null}var A=Object.assign,O=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),X=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),at=Symbol.for("react.suspense_list"),ht=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),ct=Symbol.for("react.activity"),xt=Symbol.for("react.memo_cache_sentinel"),wt=Symbol.iterator;function Ct(o){return o===null||typeof o!="object"?null:(o=wt&&o[wt]||o["@@iterator"],typeof o=="function"?o:null)}var re=Symbol.for("react.client.reference");function ve(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===re?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case q:return"Fragment";case K:return"Profiler";case H:return"StrictMode";case Q:return"Suspense";case at:return"SuspenseList";case ct:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case F:return"Portal";case X:return o.displayName||"Context";case W:return(o._context.displayName||"Context")+".Consumer";case tt:var h=o.render;return o=o.displayName,o||(o=h.displayName||h.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ht:return h=o.displayName||null,h!==null?h:ve(o.type)||"Memo";case ot:h=o._payload,o=o._init;try{return ve(o(h))}catch{}}return null}var Ee=Array.isArray,Nt=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Bt={pending:!1,data:null,method:null,action:null},Ft=[],$t=-1;function ft(o){return{current:o}}function St(o){0>$t||(o.current=Ft[$t],Ft[$t]=null,$t--)}function jt(o,h){$t++,Ft[$t]=o.current,o.current=h}var Yt=ft(null),le=ft(null),ce=ft(null),Oe=ft(null);function Ie(o,h){switch(jt(ce,h),jt(le,o),jt(Yt,null),h.nodeType){case 9:case 11:o=(o=h.documentElement)&&(o=o.namespaceURI)?Re(o):0;break;default:if(o=h.tagName,h=h.namespaceURI)h=Re(h),o=pn(h,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}St(Yt),jt(Yt,o)}function Gt(){St(Yt),St(le),St(ce)}function Le(o){o.memoizedState!==null&&jt(Oe,o);var h=Yt.current,g=pn(h,o.type);h!==g&&(jt(le,o),jt(Yt,g))}function Pe(o){le.current===o&&(St(Yt),St(le)),Oe.current===o&&(St(Oe),Dg._currentValue=Bt)}var ge,nn;function qe(o){if(ge===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);ge=h&&h[1]||"",nn=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ge+o+nn}var an=!1;function Ke(o,h){if(!o||an)return"";an=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(xe){var ye=xe}Reflect.construct(o,[],De)}else{try{De.call()}catch(xe){ye=xe}o.call(De.prototype)}}else{try{throw Error()}catch(xe){ye=xe}(De=o())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(xe){if(xe&&ye&&typeof xe.stack=="string")return[xe.stack,ye.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=S.DetermineComponentFrameRoot(),rt=N[0],_t=N[1];if(rt&&_t){var qt=rt.split(`
`),pe=_t.split(`
`);for(z=S=0;S<qt.length&&!qt[S].includes("DetermineComponentFrameRoot");)S++;for(;z<pe.length&&!pe[z].includes("DetermineComponentFrameRoot");)z++;if(S===qt.length||z===pe.length)for(S=qt.length-1,z=pe.length-1;1<=S&&0<=z&&qt[S]!==pe[z];)z--;for(;1<=S&&0<=z;S--,z--)if(qt[S]!==pe[z]){if(S!==1||z!==1)do if(S--,z--,0>z||qt[S]!==pe[z]){var Me=`
`+qt[S].replace(" at new "," at ");return o.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",o.displayName)),Me}while(1<=S&&0<=z);break}}}finally{an=!1,Error.prepareStackTrace=g}return(g=o?o.displayName||o.name:"")?qe(g):""}function On(o,h){switch(o.tag){case 26:case 27:case 5:return qe(o.type);case 16:return qe("Lazy");case 13:return o.child!==h&&h!==null?qe("Suspense Fallback"):qe("Suspense");case 19:return qe("SuspenseList");case 0:case 15:return Ke(o.type,!1);case 11:return Ke(o.type.render,!1);case 1:return Ke(o.type,!0);case 31:return qe("Activity");default:return""}}function rn(o){try{var h="",g=null;do h+=On(o,g),g=o,o=o.return;while(o);return h}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var In=Object.prototype.hasOwnProperty,me=t.unstable_scheduleCallback,ki=t.unstable_cancelCallback,Li=t.unstable_shouldYield,Yn=t.unstable_requestPaint,cn=t.unstable_now,Zi=t.unstable_getCurrentPriorityLevel,si=t.unstable_ImmediatePriority,Ii=t.unstable_UserBlockingPriority,jr=t.unstable_NormalPriority,Ws=t.unstable_LowPriority,Wa=t.unstable_IdlePriority,_a=t.log,Be=t.unstable_setDisableYieldValue,hr=null,Un=null;function va(o){if(typeof _a=="function"&&Be(o),Un&&typeof Un.setStrictMode=="function")try{Un.setStrictMode(hr,o)}catch{}}var fr=Math.clz32?Math.clz32:wn,Fe=Math.log,Dn=Math.LN2;function wn(o){return o>>>=0,o===0?32:31-(Fe(o)/Dn|0)|0}var Mr=256,za=262144,bn=4194304;function xa(o){var h=o&42;if(h!==0)return h;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function kt(o,h,g){var S=o.pendingLanes;if(S===0)return 0;var z=0,N=o.suspendedLanes,rt=o.pingedLanes;o=o.warmLanes;var _t=S&134217727;return _t!==0?(S=_t&~N,S!==0?z=xa(S):(rt&=_t,rt!==0?z=xa(rt):g||(g=_t&~o,g!==0&&(z=xa(g))))):(_t=S&~N,_t!==0?z=xa(_t):rt!==0?z=xa(rt):g||(g=S&~o,g!==0&&(z=xa(g)))),z===0?0:h!==0&&h!==z&&(h&N)===0&&(N=z&-z,g=h&-h,N>=g||N===32&&(g&4194048)!==0)?h:z}function lt(o,h){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&h)===0}function dt(o,h){switch(o){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bt(){var o=bn;return bn<<=1,(bn&62914560)===0&&(bn=4194304),o}function Dt(o){for(var h=[],g=0;31>g;g++)h.push(o);return h}function zt(o,h){o.pendingLanes|=h,h!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function te(o,h,g,S,z,N){var rt=o.pendingLanes;o.pendingLanes=g,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=g,o.entangledLanes&=g,o.errorRecoveryDisabledLanes&=g,o.shellSuspendCounter=0;var _t=o.entanglements,qt=o.expirationTimes,pe=o.hiddenUpdates;for(g=rt&~g;0<g;){var Me=31-fr(g),De=1<<Me;_t[Me]=0,qt[Me]=-1;var ye=pe[Me];if(ye!==null)for(pe[Me]=null,Me=0;Me<ye.length;Me++){var xe=ye[Me];xe!==null&&(xe.lane&=-536870913)}g&=~De}S!==0&&Zt(o,S,0),N!==0&&z===0&&o.tag!==0&&(o.suspendedLanes|=N&~(rt&~h))}function Zt(o,h,g){o.pendingLanes|=h,o.suspendedLanes&=~h;var S=31-fr(h);o.entangledLanes|=h,o.entanglements[S]=o.entanglements[S]|1073741824|g&261930}function Ut(o,h){var g=o.entangledLanes|=h;for(o=o.entanglements;g;){var S=31-fr(g),z=1<<S;z&h|o[S]&h&&(o[S]|=h),g&=~z}}function Xt(o,h){var g=h&-h;return g=(g&42)!==0?1:_e(g),(g&(o.suspendedLanes|h))!==0?0:g}function _e(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ie(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Te(){var o=Pt.p;return o!==0?o:(o=window.event,o===void 0?32:mT(o.type))}function hn(o,h){var g=Pt.p;try{return Pt.p=o,h()}finally{Pt.p=g}}var dn=Math.random().toString(36).slice(2),He="__reactFiber$"+dn,tn="__reactProps$"+dn,_n="__reactContainer$"+dn,Vn="__reactEvents$"+dn,pi="__reactListeners$"+dn,Kn="__reactHandles$"+dn,Hn="__reactResources$"+dn,xr="__reactMarker$"+dn;function Ti(o){delete o[He],delete o[tn],delete o[Vn],delete o[pi],delete o[Kn]}function Ri(o){var h=o[He];if(h)return h;for(var g=o.parentNode;g;){if(h=g[_n]||g[He]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(o=Ha(o);o!==null;){if(g=o[He])return g;o=Ha(o)}return h}o=g,g=o.parentNode}return null}function nr(o){if(o=o[He]||o[_n]){var h=o.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return o}return null}function Ar(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o.stateNode;throw Error(i(33))}function wl(o){var h=o[Hn];return h||(h=o[Hn]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Ki(o){o[xr]=!0}var Sl=new Set,Xh={};function Qn(o,h){Ys(o,h),Ys(o+"Capture",h)}function Ys(o,h){for(Xh[o]=h,o=0;o<h.length;o++)Sl.add(h[o])}var tl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fr={},ba={};function Ou(o){return In.call(ba,o)?!0:In.call(Fr,o)?!1:tl.test(o)?ba[o]=!0:(Fr[o]=!0,!1)}function Pn(o,h,g){if(Ou(h))if(g===null)o.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":o.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){o.removeAttribute(h);return}}o.setAttribute(h,""+g)}}function Rn(o,h,g){if(g===null)o.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttribute(h,""+g)}}function wa(o,h,g,S){if(S===null)o.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(g);return}o.setAttributeNS(h,g,""+S)}}function ir(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function mi(o){var h=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function ni(o,h,g){var S=Object.getOwnPropertyDescriptor(o.constructor.prototype,h);if(!o.hasOwnProperty(h)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var z=S.get,N=S.set;return Object.defineProperty(o,h,{configurable:!0,get:function(){return z.call(this)},set:function(rt){g=""+rt,N.call(this,rt)}}),Object.defineProperty(o,h,{enumerable:S.enumerable}),{getValue:function(){return g},setValue:function(rt){g=""+rt},stopTracking:function(){o._valueTracker=null,delete o[h]}}}}function Tn(o){if(!o._valueTracker){var h=mi(o)?"checked":"value";o._valueTracker=ni(o,h,""+o[h])}}function zn(o){if(!o)return!1;var h=o._valueTracker;if(!h)return!0;var g=h.getValue(),S="";return o&&(S=mi(o)?o.checked?"true":"false":o.value),o=S,o!==g?(h.setValue(o),!0):!1}function Co(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Sa=/[\n"\\]/g;function Vi(o){return o.replace(Sa,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Xs(o,h,g,S,z,N,rt,_t){o.name="",rt!=null&&typeof rt!="function"&&typeof rt!="symbol"&&typeof rt!="boolean"?o.type=rt:o.removeAttribute("type"),h!=null?rt==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+ir(h)):o.value!==""+ir(h)&&(o.value=""+ir(h)):rt!=="submit"&&rt!=="reset"||o.removeAttribute("value"),h!=null?As(o,rt,ir(h)):g!=null?As(o,rt,ir(g)):S!=null&&o.removeAttribute("value"),z==null&&N!=null&&(o.defaultChecked=!!N),z!=null&&(o.checked=z&&typeof z!="function"&&typeof z!="symbol"),_t!=null&&typeof _t!="function"&&typeof _t!="symbol"&&typeof _t!="boolean"?o.name=""+ir(_t):o.removeAttribute("name")}function Jl(o,h,g,S,z,N,rt,_t){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.type=N),h!=null||g!=null){if(!(N!=="submit"&&N!=="reset"||h!=null)){Tn(o);return}g=g!=null?""+ir(g):"",h=h!=null?""+ir(h):g,_t||h===o.value||(o.value=h),o.defaultValue=h}S=S??z,S=typeof S!="function"&&typeof S!="symbol"&&!!S,o.checked=_t?o.checked:!!S,o.defaultChecked=!!S,rt!=null&&typeof rt!="function"&&typeof rt!="symbol"&&typeof rt!="boolean"&&(o.name=rt),Tn(o)}function As(o,h,g){h==="number"&&Co(o.ownerDocument)===o||o.defaultValue===""+g||(o.defaultValue=""+g)}function Ai(o,h,g,S){if(o=o.options,h){h={};for(var z=0;z<g.length;z++)h["$"+g[z]]=!0;for(g=0;g<o.length;g++)z=h.hasOwnProperty("$"+o[g].value),o[g].selected!==z&&(o[g].selected=z),z&&S&&(o[g].defaultSelected=!0)}else{for(g=""+ir(g),h=null,z=0;z<o.length;z++){if(o[z].value===g){o[z].selected=!0,S&&(o[z].defaultSelected=!0);return}h!==null||o[z].disabled||(h=o[z])}h!==null&&(h.selected=!0)}}function Es(o,h,g){if(h!=null&&(h=""+ir(h),h!==o.value&&(o.value=h),g==null)){o.defaultValue!==h&&(o.defaultValue=h);return}o.defaultValue=g!=null?""+ir(g):""}function Ya(o,h,g,S){if(h==null){if(S!=null){if(g!=null)throw Error(i(92));if(Ee(S)){if(1<S.length)throw Error(i(93));S=S[0]}g=S}g==null&&(g=""),h=g}g=ir(h),o.defaultValue=g,S=o.textContent,S===g&&S!==""&&S!==null&&(o.value=S),Tn(o)}function ds(o,h){if(h){var g=o.firstChild;if(g&&g===o.lastChild&&g.nodeType===3){g.nodeValue=h;return}}o.textContent=h}var Tl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ml(o,h,g){var S=h.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?S?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="":S?o.setProperty(h,g):typeof g!="number"||g===0||Tl.has(h)?h==="float"?o.cssFloat=g:o[h]=(""+g).trim():o[h]=g+"px"}function pc(o,h,g){if(h!=null&&typeof h!="object")throw Error(i(62));if(o=o.style,g!=null){for(var S in g)!g.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?o.setProperty(S,""):S==="float"?o.cssFloat="":o[S]="");for(var z in h)S=h[z],h.hasOwnProperty(z)&&g[z]!==S&&Ml(o,z,S)}else for(var N in h)h.hasOwnProperty(N)&&Ml(o,N,h[N])}function Al(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function eu(o){return mc.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Xa(){}var Du=null;function el(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var El=null,Mn=null;function Ka(o){var h=nr(o);if(h&&(o=h.stateNode)){var g=o[tn]||null;t:switch(o=h.stateNode,h.type){case"input":if(Xs(o,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),h=g.name,g.type==="radio"&&h!=null){for(g=o;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Vi(""+h)+'"][type="radio"]'),h=0;h<g.length;h++){var S=g[h];if(S!==o&&S.form===o.form){var z=S[tn]||null;if(!z)throw Error(i(90));Xs(S,z.value,z.defaultValue,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name)}}for(h=0;h<g.length;h++)S=g[h],S.form===o.form&&zn(S)}break t;case"textarea":Es(o,g.value,g.defaultValue);break t;case"select":h=g.value,h!=null&&Ai(o,!!g.multiple,h,!1)}}}var gi=!1;function Po(o,h,g){if(gi)return o(h,g);gi=!0;try{var S=o(h);return S}finally{if(gi=!1,(El!==null||Mn!==null)&&(gd(),El&&(h=El,o=Mn,Mn=El=null,Ka(h),o)))for(h=0;h<o.length;h++)Ka(o[h])}}function Ks(o,h){var g=o.stateNode;if(g===null)return null;var S=g[tn]||null;if(S===null)return null;g=S[h];t:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(o=o.type,S=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!S;break t;default:o=!1}if(o)return null;if(g&&typeof g!="function")throw Error(i(231,h,typeof g));return g}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nl=!1;if(rr)try{var La={};Object.defineProperty(La,"passive",{get:function(){nl=!0}}),window.addEventListener("test",La,La),window.removeEventListener("test",La,La)}catch{nl=!1}var Ia=null,Qs=null,$i=null;function Ta(){if($i)return $i;var o,h=Qs,g=h.length,S,z="value"in Ia?Ia.value:Ia.textContent,N=z.length;for(o=0;o<g&&h[o]===z[o];o++);var rt=g-o;for(S=1;S<=rt&&h[g-S]===z[N-S];S++);return $i=z.slice(o,1<S?1-S:void 0)}function Bn(o){var h=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&h===13&&(o=13)):o=h,o===10&&(o=13),32<=o||o===13?o:0}function il(){return!0}function Ra(){return!1}function Oi(o){function h(g,S,z,N,rt){this._reactName=g,this._targetInst=z,this.type=S,this.nativeEvent=N,this.target=rt,this.currentTarget=null;for(var _t in o)o.hasOwnProperty(_t)&&(g=o[_t],this[_t]=g?g(N):N[_t]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?il:Ra,this.isPropagationStopped=Ra,this}return A(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),h}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cl=Oi(Cs),ko=A({},Cs,{view:0,detail:0}),Jn=Oi(ko),zu,ra,Ps,Pl=A({},ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vc,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ps&&(Ps&&o.type==="mousemove"?(zu=o.screenX-Ps.screenX,ra=o.screenY-Ps.screenY):ra=zu=0,Ps=o),zu)},movementY:function(o){return"movementY"in o?o.movementY:ra}}),Lu=Oi(Pl),gc=A({},Pl,{dataTransfer:0}),Kh=Oi(gc),kl=A({},ko,{relatedTarget:0}),Gc=Oi(kl),Hf=A({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Wc=Oi(Hf),Zf=A({},Cs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Js=Oi(Zf),Gf=A({},Cs,{data:0}),Iu=Oi(Gf),ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rl(o){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(o):(o=_c[o])?!!h[o]:!1}function vc(){return rl}var Yc=A({},ko,{key:function(o){if(o.key){var h=ks[o.key]||o.key;if(h!=="Unidentified")return h}return o.type==="keypress"?(o=Bn(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?yc[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vc,charCode:function(o){return o.type==="keypress"?Bn(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Bn(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),xc=Oi(Yc),Ol=A({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xc=Oi(Ol),to=A({},ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vc}),nu=Oi(to),Kc=A({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),bc=Oi(Kc),ti=A({},Pl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),yi=Oi(ti),Wf=A({},Cs,{newState:0,oldState:0}),Nn=Oi(Wf),Ur=[9,13,27,32],Di=rr&&"CompositionEvent"in window,_i=null;rr&&"documentMode"in document&&(_i=document.documentMode);var Ru=rr&&"TextEvent"in window&&!_i,Bu=rr&&(!Di||_i&&8<_i&&11>=_i),iu=" ",Nu=!1;function ju(o,h){switch(o){case"keyup":return Ur.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fu(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Oo=!1;function Qa(o,h){switch(o){case"compositionend":return Fu(h);case"keypress":return h.which!==32?null:(Nu=!0,iu);case"textInput":return o=h.data,o===iu&&Nu?null:o;default:return null}}function eo(o,h){if(Oo)return o==="compositionend"||!Di&&ju(o,h)?(o=Ta(),$i=Qs=Ia=null,Oo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Bu&&h.locale!=="ko"?null:h.data;default:return null}}var Uu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ba(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h==="input"?!!Uu[o.type]:h==="textarea"}function Qh(o,h,g,S){El?Mn?Mn.push(S):Mn=[S]:El=S,h=yt(h,"onChange"),0<h.length&&(g=new Cl("onChange","change",null,g,S),o.push({event:g,listeners:h}))}var ps=null,Vu=null;function ru(o){k(o,0)}function al(o){var h=Ar(o);if(zn(h))return o}function Dl(o,h){if(o==="change")return h}var Qc=!1;if(rr){var Os;if(rr){var no="oninput"in document;if(!no){var $u=document.createElement("div");$u.setAttribute("oninput","return;"),no=typeof $u.oninput=="function"}Os=no}else Os=!1;Qc=Os&&(!document.documentMode||9<document.documentMode)}function zl(){ps&&(ps.detachEvent("onpropertychange",Jc),Vu=ps=null)}function Jc(o){if(o.propertyName==="value"&&al(Vu)){var h=[];Qh(h,Vu,o,el(o)),Po(ru,h)}}function ui(o,h,g){o==="focusin"?(zl(),ps=h,Vu=g,ps.attachEvent("onpropertychange",Jc)):o==="focusout"&&zl()}function Ll(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return al(Vu)}function Er(o,h){if(o==="click")return al(h)}function au(o,h){if(o==="input"||o==="change")return al(h)}function Ja(o,h){return o===h&&(o!==0||1/o===1/h)||o!==o&&h!==h}var Cr=typeof Object.is=="function"?Object.is:Ja;function ms(o,h){if(Cr(o,h))return!0;if(typeof o!="object"||o===null||typeof h!="object"||h===null)return!1;var g=Object.keys(o),S=Object.keys(h);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var z=g[S];if(!In.call(h,z)||!Cr(o[z],h[z]))return!1}return!0}function sl(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function io(o,h){var g=sl(o);o=0;for(var S;g;){if(g.nodeType===3){if(S=o+g.textContent.length,o<=h&&S>=h)return{node:g,offset:h-o};o=S}t:{for(;g;){if(g.nextSibling){g=g.nextSibling;break t}g=g.parentNode}g=void 0}g=sl(g)}}function qu(o,h){return o&&h?o===h?!0:o&&o.nodeType===3?!1:h&&h.nodeType===3?qu(o,h.parentNode):"contains"in o?o.contains(h):o.compareDocumentPosition?!!(o.compareDocumentPosition(h)&16):!1:!1}function su(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var h=Co(o.document);h instanceof o.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)o=h.contentWindow;else break;h=Co(o.document)}return h}function Do(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h&&(h==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||h==="textarea"||o.contentEditable==="true")}var Hu=rr&&"documentMode"in document&&11>=document.documentMode,zo=null,ts=null,Lo=null,Vr=!1;function ou(o,h,g){var S=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Vr||zo==null||zo!==Co(S)||(S=zo,"selectionStart"in S&&Do(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Lo&&ms(Lo,S)||(Lo=S,S=yt(ts,"onSelect"),0<S.length&&(h=new Cl("onSelect","select",null,h,g),o.push({event:h,listeners:S}),h.target=zo)))}function Io(o,h){var g={};return g[o.toLowerCase()]=h.toLowerCase(),g["Webkit"+o]="webkit"+h,g["Moz"+o]="moz"+h,g}var Il={animationend:Io("Animation","AnimationEnd"),animationiteration:Io("Animation","AnimationIteration"),animationstart:Io("Animation","AnimationStart"),transitionrun:Io("Transition","TransitionRun"),transitionstart:Io("Transition","TransitionStart"),transitioncancel:Io("Transition","TransitionCancel"),transitionend:Io("Transition","TransitionEnd")},Zu={},Ro={};rr&&(Ro=document.createElement("div").style,"AnimationEvent"in window||(delete Il.animationend.animation,delete Il.animationiteration.animation,delete Il.animationstart.animation),"TransitionEvent"in window||delete Il.transitionend.transition);function Wr(o){if(Zu[o])return Zu[o];if(!Il[o])return o;var h=Il[o],g;for(g in h)if(h.hasOwnProperty(g)&&g in Ro)return Zu[o]=h[g];return o}var aa=Wr("animationend"),ro=Wr("animationiteration"),ol=Wr("animationstart"),Bo=Wr("transitionrun"),ao=Wr("transitionstart"),Yf=Wr("transitioncancel"),ll=Wr("transitionend"),th=new Map,Ds="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ds.push("scrollEnd");function Yr(o,h){th.set(o,h),Qn(h,[o])}var es=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Ze=[],Xr=0,zs=0;function so(){for(var o=Xr,h=zs=Xr=0;h<o;){var g=Ze[h];Ze[h++]=null;var S=Ze[h];Ze[h++]=null;var z=Ze[h];Ze[h++]=null;var N=Ze[h];if(Ze[h++]=null,S!==null&&z!==null){var rt=S.pending;rt===null?z.next=z:(z.next=rt.next,rt.next=z),S.pending=z}N!==0&&ul(g,z,N)}}function No(o,h,g,S){Ze[Xr++]=o,Ze[Xr++]=h,Ze[Xr++]=g,Ze[Xr++]=S,zs|=S,o.lanes|=S,o=o.alternate,o!==null&&(o.lanes|=S)}function Ye(o,h,g,S){return No(o,h,g,S),Gu(o)}function gs(o,h){return No(o,null,null,h),Gu(o)}function ul(o,h,g){o.lanes|=g;var S=o.alternate;S!==null&&(S.lanes|=g);for(var z=!1,N=o.return;N!==null;)N.childLanes|=g,S=N.alternate,S!==null&&(S.childLanes|=g),N.tag===22&&(o=N.stateNode,o===null||o._visibility&1||(z=!0)),o=N,N=N.return;return o.tag===3?(N=o.stateNode,z&&h!==null&&(z=31-fr(g),o=N.hiddenUpdates,S=o[z],S===null?o[z]=[h]:S.push(h),h.lane=g|536870912),N):null}function Gu(o){if(50<ph)throw ph=0,mf=null,Error(i(185));for(var h=o.return;h!==null;)o=h,h=o.return;return o.tag===3?o.stateNode:null}var jo={};function Jh(o,h,g,S){this.tag=o,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ma(o,h,g,S){return new Jh(o,h,g,S)}function Wu(o){return o=o.prototype,!(!o||!o.isReactComponent)}function oo(o,h){var g=o.alternate;return g===null?(g=Ma(o.tag,h,o.key,o.mode),g.elementType=o.elementType,g.type=o.type,g.stateNode=o.stateNode,g.alternate=o,o.alternate=g):(g.pendingProps=h,g.type=o.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=o.flags&65011712,g.childLanes=o.childLanes,g.lanes=o.lanes,g.child=o.child,g.memoizedProps=o.memoizedProps,g.memoizedState=o.memoizedState,g.updateQueue=o.updateQueue,h=o.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=o.sibling,g.index=o.index,g.ref=o.ref,g.refCleanup=o.refCleanup,g}function Yu(o,h){o.flags&=65011714;var g=o.alternate;return g===null?(o.childLanes=0,o.lanes=h,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=g.childLanes,o.lanes=g.lanes,o.child=g.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=g.memoizedProps,o.memoizedState=g.memoizedState,o.updateQueue=g.updateQueue,o.type=g.type,h=g.dependencies,o.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),o}function Rl(o,h,g,S,z,N){var rt=0;if(S=o,typeof o=="function")Wu(o)&&(rt=1);else if(typeof o=="string")rt=as(o,g,Yt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case ct:return o=Ma(31,g,h,z),o.elementType=ct,o.lanes=N,o;case q:return Fo(g.children,z,N,h);case H:rt=8,z|=24;break;case K:return o=Ma(12,g,h,z|2),o.elementType=K,o.lanes=N,o;case Q:return o=Ma(13,g,h,z),o.elementType=Q,o.lanes=N,o;case at:return o=Ma(19,g,h,z),o.elementType=at,o.lanes=N,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case X:rt=10;break t;case W:rt=9;break t;case tt:rt=11;break t;case ht:rt=14;break t;case ot:rt=16,S=null;break t}rt=29,g=Error(i(130,o===null?"null":typeof o,"")),S=null}return h=Ma(rt,g,h,z),h.elementType=o,h.type=S,h.lanes=N,h}function Fo(o,h,g,S){return o=Ma(7,o,S,h),o.lanes=g,o}function lu(o,h,g){return o=Ma(6,o,null,h),o.lanes=g,o}function sa(o){var h=Ma(18,null,null,0);return h.stateNode=o,h}function lo(o,h,g){return h=Ma(4,o.children!==null?o.children:[],o.key,h),h.lanes=g,h.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},h}var p=new WeakMap;function w(o,h){if(typeof o=="object"&&o!==null){var g=p.get(o);return g!==void 0?g:(h={value:o,source:h,stack:rn(h)},p.set(o,h),h)}return{value:o,source:h,stack:rn(h)}}var D=[],V=0,nt=null,mt=0,Lt=[],ae=0,fe=null,Ce=1,Qe="";function yn(o,h){D[V++]=mt,D[V++]=nt,nt=o,mt=h}function $n(o,h,g){Lt[ae++]=Ce,Lt[ae++]=Qe,Lt[ae++]=fe,fe=o;var S=Ce;o=Qe;var z=32-fr(S)-1;S&=~(1<<z),g+=1;var N=32-fr(h)+z;if(30<N){var rt=z-z%5;N=(S&(1<<rt)-1).toString(32),S>>=rt,z-=rt,Ce=1<<32-fr(h)+z|g<<z|S,Qe=N+o}else Ce=1<<N|g<<z|S,Qe=o}function ci(o){o.return!==null&&(yn(o,1),$n(o,1,0))}function Qi(o){for(;o===nt;)nt=D[--V],D[V]=null,mt=D[--V],D[V]=null;for(;o===fe;)fe=Lt[--ae],Lt[ae]=null,Qe=Lt[--ae],Lt[ae]=null,Ce=Lt[--ae],Lt[ae]=null}function Je(o,h){Lt[ae++]=Ce,Lt[ae++]=Qe,Lt[ae++]=fe,Ce=h.id,Qe=h.overflow,fe=o}var Ge=null,ri=null,Xn=!1,uo=null,oi=!1,uu=Error(i(519));function Pr(o){var h=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Uo(w(h,o)),uu}function wc(o){var h=o.stateNode,g=o.type,S=o.memoizedProps;switch(h[He]=o,h[tn]=S,g){case"dialog":R("cancel",h),R("close",h);break;case"iframe":case"object":case"embed":R("load",h);break;case"video":case"audio":for(g=0;g<T.length;g++)R(T[g],h);break;case"source":R("error",h);break;case"img":case"image":case"link":R("error",h),R("load",h);break;case"details":R("toggle",h);break;case"input":R("invalid",h),Jl(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":R("invalid",h);break;case"textarea":R("invalid",h),Ya(h,S.value,S.defaultValue,S.children)}g=S.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||h.textContent===""+g||S.suppressHydrationWarning===!0||ee(h.textContent,g)?(S.popover!=null&&(R("beforetoggle",h),R("toggle",h)),S.onScroll!=null&&R("scroll",h),S.onScrollEnd!=null&&R("scrollend",h),S.onClick!=null&&(h.onclick=Xa),h=!0):h=!1,h||Pr(o,!0)}function zi(o){for(Ge=o.return;Ge;)switch(Ge.tag){case 5:case 31:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:Ge=Ge.return}}function hi(o){if(o!==Ge)return!1;if(!Xn)return zi(o),Xn=!0,!1;var h=o.tag,g;if((g=h!==3&&h!==27)&&((g=h===5)&&(g=o.type,g=!(g!=="form"&&g!=="button")||un(o.type,o.memoizedProps)),g=!g),g&&ri&&Pr(o),zi(o),h===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));ri=Zn(o)}else if(h===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));ri=Zn(o)}else h===27?(h=ri,lr(o.type)?(o=Lr,Lr=null,ri=o):ri=h):ri=Ge?ur(o.stateNode.nextSibling):null;return!0}function vi(){ri=Ge=null,Xn=!1}function cl(){var o=uo;return o!==null&&(mo===null?mo=o:mo.push.apply(mo,o),uo=null),o}function Uo(o){uo===null?uo=[o]:uo.push(o)}var Vo=ft(null),Na=null,Ls=null;function hl(o,h,g){jt(Vo,h._currentValue),h._currentValue=g}function ys(o){o._currentValue=Vo.current,St(Vo)}function eh(o,h,g){for(;o!==null;){var S=o.alternate;if((o.childLanes&h)!==h?(o.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),o===g)break;o=o.return}}function nh(o,h,g,S){var z=o.child;for(z!==null&&(z.return=o);z!==null;){var N=z.dependencies;if(N!==null){var rt=z.child;N=N.firstContext;t:for(;N!==null;){var _t=N;N=z;for(var qt=0;qt<h.length;qt++)if(_t.context===h[qt]){N.lanes|=g,_t=N.alternate,_t!==null&&(_t.lanes|=g),eh(N.return,g,o),S||(rt=null);break t}N=_t.next}}else if(z.tag===18){if(rt=z.return,rt===null)throw Error(i(341));rt.lanes|=g,N=rt.alternate,N!==null&&(N.lanes|=g),eh(rt,g,o),rt=null}else rt=z.child;if(rt!==null)rt.return=z;else for(rt=z;rt!==null;){if(rt===o){rt=null;break}if(z=rt.sibling,z!==null){z.return=rt.return,rt=z;break}rt=rt.return}z=rt}}function ei(o,h,g,S){o=null;for(var z=h,N=!1;z!==null;){if(!N){if((z.flags&524288)!==0)N=!0;else if((z.flags&262144)!==0)break}if(z.tag===10){var rt=z.alternate;if(rt===null)throw Error(i(387));if(rt=rt.memoizedProps,rt!==null){var _t=z.type;Cr(z.pendingProps.value,rt.value)||(o!==null?o.push(_t):o=[_t])}}else if(z===Oe.current){if(rt=z.alternate,rt===null)throw Error(i(387));rt.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(o!==null?o.push(Dg):o=[Dg])}z=z.return}o!==null&&nh(h,o,g,S),h.flags|=262144}function E(o){for(o=o.firstContext;o!==null;){if(!Cr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function l(o){Na=o,Ls=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function m(o){return M(Na,o)}function b(o,h){return Na===null&&l(o),M(o,h)}function M(o,h){var g=h._currentValue;if(h={context:h,memoizedValue:g,next:null},Ls===null){if(o===null)throw Error(i(308));Ls=h,o.dependencies={lanes:0,firstContext:h},o.flags|=524288}else Ls=Ls.next=h;return g}var C=typeof AbortController<"u"?AbortController:function(){var o=[],h=this.signal={aborted:!1,addEventListener:function(g,S){o.push(S)}};this.abort=function(){h.aborted=!0,o.forEach(function(g){return g()})}},B=t.unstable_scheduleCallback,j=t.unstable_NormalPriority,$={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Y(){return{controller:new C,data:new Map,refCount:0}}function et(o){o.refCount--,o.refCount===0&&B(j,function(){o.controller.abort()})}var it=null,pt=0,At=0,Mt=null;function Ot(o,h){if(it===null){var g=it=[];pt=0,At=Ad(),Mt={status:"pending",value:void 0,then:function(S){g.push(S)}}}return pt++,h.then(Tt,Tt),h}function Tt(){if(--pt===0&&it!==null){Mt!==null&&(Mt.status="fulfilled");var o=it;it=null,At=0,Mt=null;for(var h=0;h<o.length;h++)(0,o[h])()}}function Wt(o,h){var g=[],S={status:"pending",value:null,reason:null,then:function(z){g.push(z)}};return o.then(function(){S.status="fulfilled",S.value=h;for(var z=0;z<g.length;z++)(0,g[z])(h)},function(z){for(S.status="rejected",S.reason=z,z=0;z<g.length;z++)(0,g[z])(void 0)}),S}var oe=Nt.S;Nt.S=function(o,h){I_=cn(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&Ot(o,h),oe!==null&&oe(o,h)};var Rt=ft(null);function Kt(){var o=Rt.current;return o!==null?o:Hi.pooledCache}function ue(o,h){h===null?jt(Rt,Rt.current):jt(Rt,h.pool)}function de(){var o=Kt();return o===null?null:{parent:$._currentValue,pool:o}}var be=Error(i(460)),ze=Error(i(474)),Ae=Error(i(542)),Ne={then:function(){}};function sn(o){return o=o.status,o==="fulfilled"||o==="rejected"}function qn(o,h,g){switch(g=o[g],g===void 0?o.push(h):g!==h&&(h.then(Xa,Xa),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,Mi(o),o;default:if(typeof h.status=="string")h.then(Xa,Xa);else{if(o=Hi,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=h,o.status="pending",o.then(function(S){if(h.status==="pending"){var z=h;z.status="fulfilled",z.value=S}},function(S){if(h.status==="pending"){var z=h;z.status="rejected",z.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,Mi(o),o}throw fn=h,be}}function Ve(o){try{var h=o._init;return h(o._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(fn=g,be):g}}var fn=null;function on(){if(fn===null)throw Error(i(459));var o=fn;return fn=null,o}function Mi(o){if(o===be||o===Ae)throw Error(i(483))}var Ln=null,Cn=0;function Fn(o){var h=Cn;return Cn+=1,Ln===null&&(Ln=[]),qn(Ln,o,h)}function Gi(o,h){h=h.props.ref,o.ref=h!==void 0?h:null}function Ei(o,h){throw h.$$typeof===O?Error(i(525)):(o=Object.prototype.toString.call(h),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":o)))}function oa(o){function h(se,Qt){if(o){var he=se.deletions;he===null?(se.deletions=[Qt],se.flags|=16):he.push(Qt)}}function g(se,Qt){if(!o)return null;for(;Qt!==null;)h(se,Qt),Qt=Qt.sibling;return null}function S(se){for(var Qt=new Map;se!==null;)se.key!==null?Qt.set(se.key,se):Qt.set(se.index,se),se=se.sibling;return Qt}function z(se,Qt){return se=oo(se,Qt),se.index=0,se.sibling=null,se}function N(se,Qt,he){return se.index=he,o?(he=se.alternate,he!==null?(he=he.index,he<Qt?(se.flags|=67108866,Qt):he):(se.flags|=67108866,Qt)):(se.flags|=1048576,Qt)}function rt(se){return o&&se.alternate===null&&(se.flags|=67108866),se}function _t(se,Qt,he,ke){return Qt===null||Qt.tag!==6?(Qt=lu(he,se.mode,ke),Qt.return=se,Qt):(Qt=z(Qt,he),Qt.return=se,Qt)}function qt(se,Qt,he,ke){var Sn=he.type;return Sn===q?Me(se,Qt,he.props.children,ke,he.key):Qt!==null&&(Qt.elementType===Sn||typeof Sn=="object"&&Sn!==null&&Sn.$$typeof===ot&&Ve(Sn)===Qt.type)?(Qt=z(Qt,he.props),Gi(Qt,he),Qt.return=se,Qt):(Qt=Rl(he.type,he.key,he.props,null,se.mode,ke),Gi(Qt,he),Qt.return=se,Qt)}function pe(se,Qt,he,ke){return Qt===null||Qt.tag!==4||Qt.stateNode.containerInfo!==he.containerInfo||Qt.stateNode.implementation!==he.implementation?(Qt=lo(he,se.mode,ke),Qt.return=se,Qt):(Qt=z(Qt,he.children||[]),Qt.return=se,Qt)}function Me(se,Qt,he,ke,Sn){return Qt===null||Qt.tag!==7?(Qt=Fo(he,se.mode,ke,Sn),Qt.return=se,Qt):(Qt=z(Qt,he),Qt.return=se,Qt)}function De(se,Qt,he){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number"||typeof Qt=="bigint")return Qt=lu(""+Qt,se.mode,he),Qt.return=se,Qt;if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case I:return he=Rl(Qt.type,Qt.key,Qt.props,null,se.mode,he),Gi(he,Qt),he.return=se,he;case F:return Qt=lo(Qt,se.mode,he),Qt.return=se,Qt;case ot:return Qt=Ve(Qt),De(se,Qt,he)}if(Ee(Qt)||Ct(Qt))return Qt=Fo(Qt,se.mode,he,null),Qt.return=se,Qt;if(typeof Qt.then=="function")return De(se,Fn(Qt),he);if(Qt.$$typeof===X)return De(se,b(se,Qt),he);Ei(se,Qt)}return null}function ye(se,Qt,he,ke){var Sn=Qt!==null?Qt.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Sn!==null?null:_t(se,Qt,""+he,ke);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case I:return he.key===Sn?qt(se,Qt,he,ke):null;case F:return he.key===Sn?pe(se,Qt,he,ke):null;case ot:return he=Ve(he),ye(se,Qt,he,ke)}if(Ee(he)||Ct(he))return Sn!==null?null:Me(se,Qt,he,ke,null);if(typeof he.then=="function")return ye(se,Qt,Fn(he),ke);if(he.$$typeof===X)return ye(se,Qt,b(se,he),ke);Ei(se,he)}return null}function xe(se,Qt,he,ke,Sn){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return se=se.get(he)||null,_t(Qt,se,""+ke,Sn);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case I:return se=se.get(ke.key===null?he:ke.key)||null,qt(Qt,se,ke,Sn);case F:return se=se.get(ke.key===null?he:ke.key)||null,pe(Qt,se,ke,Sn);case ot:return ke=Ve(ke),xe(se,Qt,he,ke,Sn)}if(Ee(ke)||Ct(ke))return se=se.get(he)||null,Me(Qt,se,ke,Sn,null);if(typeof ke.then=="function")return xe(se,Qt,he,Fn(ke),Sn);if(ke.$$typeof===X)return xe(se,Qt,he,b(Qt,ke),Sn);Ei(Qt,ke)}return null}function gn(se,Qt,he,ke){for(var Sn=null,Ni=null,vn=Qt,ii=Qt=0,wi=null;vn!==null&&ii<he.length;ii++){vn.index>ii?(wi=vn,vn=null):wi=vn.sibling;var ji=ye(se,vn,he[ii],ke);if(ji===null){vn===null&&(vn=wi);break}o&&vn&&ji.alternate===null&&h(se,vn),Qt=N(ji,Qt,ii),Ni===null?Sn=ji:Ni.sibling=ji,Ni=ji,vn=wi}if(ii===he.length)return g(se,vn),Xn&&yn(se,ii),Sn;if(vn===null){for(;ii<he.length;ii++)vn=De(se,he[ii],ke),vn!==null&&(Qt=N(vn,Qt,ii),Ni===null?Sn=vn:Ni.sibling=vn,Ni=vn);return Xn&&yn(se,ii),Sn}for(vn=S(vn);ii<he.length;ii++)wi=xe(vn,se,ii,he[ii],ke),wi!==null&&(o&&wi.alternate!==null&&vn.delete(wi.key===null?ii:wi.key),Qt=N(wi,Qt,ii),Ni===null?Sn=wi:Ni.sibling=wi,Ni=wi);return o&&vn.forEach(function(Mf){return h(se,Mf)}),Xn&&yn(se,ii),Sn}function kn(se,Qt,he,ke){if(he==null)throw Error(i(151));for(var Sn=null,Ni=null,vn=Qt,ii=Qt=0,wi=null,ji=he.next();vn!==null&&!ji.done;ii++,ji=he.next()){vn.index>ii?(wi=vn,vn=null):wi=vn.sibling;var Mf=ye(se,vn,ji.value,ke);if(Mf===null){vn===null&&(vn=wi);break}o&&vn&&Mf.alternate===null&&h(se,vn),Qt=N(Mf,Qt,ii),Ni===null?Sn=Mf:Ni.sibling=Mf,Ni=Mf,vn=wi}if(ji.done)return g(se,vn),Xn&&yn(se,ii),Sn;if(vn===null){for(;!ji.done;ii++,ji=he.next())ji=De(se,ji.value,ke),ji!==null&&(Qt=N(ji,Qt,ii),Ni===null?Sn=ji:Ni.sibling=ji,Ni=ji);return Xn&&yn(se,ii),Sn}for(vn=S(vn);!ji.done;ii++,ji=he.next())ji=xe(vn,se,ii,ji.value,ke),ji!==null&&(o&&ji.alternate!==null&&vn.delete(ji.key===null?ii:ji.key),Qt=N(ji,Qt,ii),Ni===null?Sn=ji:Ni.sibling=ji,Ni=ji);return o&&vn.forEach(function(XR){return h(se,XR)}),Xn&&yn(se,ii),Sn}function cr(se,Qt,he,ke){if(typeof he=="object"&&he!==null&&he.type===q&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case I:t:{for(var Sn=he.key;Qt!==null;){if(Qt.key===Sn){if(Sn=he.type,Sn===q){if(Qt.tag===7){g(se,Qt.sibling),ke=z(Qt,he.props.children),ke.return=se,se=ke;break t}}else if(Qt.elementType===Sn||typeof Sn=="object"&&Sn!==null&&Sn.$$typeof===ot&&Ve(Sn)===Qt.type){g(se,Qt.sibling),ke=z(Qt,he.props),Gi(ke,he),ke.return=se,se=ke;break t}g(se,Qt);break}else h(se,Qt);Qt=Qt.sibling}he.type===q?(ke=Fo(he.props.children,se.mode,ke,he.key),ke.return=se,se=ke):(ke=Rl(he.type,he.key,he.props,null,se.mode,ke),Gi(ke,he),ke.return=se,se=ke)}return rt(se);case F:t:{for(Sn=he.key;Qt!==null;){if(Qt.key===Sn)if(Qt.tag===4&&Qt.stateNode.containerInfo===he.containerInfo&&Qt.stateNode.implementation===he.implementation){g(se,Qt.sibling),ke=z(Qt,he.children||[]),ke.return=se,se=ke;break t}else{g(se,Qt);break}else h(se,Qt);Qt=Qt.sibling}ke=lo(he,se.mode,ke),ke.return=se,se=ke}return rt(se);case ot:return he=Ve(he),cr(se,Qt,he,ke)}if(Ee(he))return gn(se,Qt,he,ke);if(Ct(he)){if(Sn=Ct(he),typeof Sn!="function")throw Error(i(150));return he=Sn.call(he),kn(se,Qt,he,ke)}if(typeof he.then=="function")return cr(se,Qt,Fn(he),ke);if(he.$$typeof===X)return cr(se,Qt,b(se,he),ke);Ei(se,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,Qt!==null&&Qt.tag===6?(g(se,Qt.sibling),ke=z(Qt,he),ke.return=se,se=ke):(g(se,Qt),ke=lu(he,se.mode,ke),ke.return=se,se=ke),rt(se)):g(se,Qt)}return function(se,Qt,he,ke){try{Cn=0;var Sn=cr(se,Qt,he,ke);return Ln=null,Sn}catch(vn){if(vn===be||vn===Ae)throw vn;var Ni=Ma(29,vn,null,se.mode);return Ni.lanes=ke,Ni.return=se,Ni}finally{}}}var Ji=oa(!0),br=oa(!1),$r=!1;function Bi(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function co(o,h){o=o.updateQueue,h.updateQueue===o&&(h.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Aa(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ns(o,h,g){var S=o.updateQueue;if(S===null)return null;if(S=S.shared,(Ci&2)!==0){var z=S.pending;return z===null?h.next=h:(h.next=z.next,z.next=h),S.pending=h,h=Gu(o),ul(o,null,g),h}return No(o,S,h,g),Gu(o)}function $o(o,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194048)!==0)){var S=h.lanes;S&=o.pendingLanes,g|=S,h.lanes=g,Ut(o,g)}}function cu(o,h){var g=o.updateQueue,S=o.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var z=null,N=null;if(g=g.firstBaseUpdate,g!==null){do{var rt={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};N===null?z=N=rt:N=N.next=rt,g=g.next}while(g!==null);N===null?z=N=h:N=N.next=h}else z=N=h;g={baseState:S.baseState,firstBaseUpdate:z,lastBaseUpdate:N,shared:S.shared,callbacks:S.callbacks},o.updateQueue=g;return}o=g.lastBaseUpdate,o===null?g.firstBaseUpdate=h:o.next=h,g.lastBaseUpdate=h}var la=!1;function kr(){if(la){var o=Mt;if(o!==null)throw o}}function Kr(o,h,g,S){la=!1;var z=o.updateQueue;$r=!1;var N=z.firstBaseUpdate,rt=z.lastBaseUpdate,_t=z.shared.pending;if(_t!==null){z.shared.pending=null;var qt=_t,pe=qt.next;qt.next=null,rt===null?N=pe:rt.next=pe,rt=qt;var Me=o.alternate;Me!==null&&(Me=Me.updateQueue,_t=Me.lastBaseUpdate,_t!==rt&&(_t===null?Me.firstBaseUpdate=pe:_t.next=pe,Me.lastBaseUpdate=qt))}if(N!==null){var De=z.baseState;rt=0,Me=pe=qt=null,_t=N;do{var ye=_t.lane&-536870913,xe=ye!==_t.lane;if(xe?(li&ye)===ye:(S&ye)===ye){ye!==0&&ye===At&&(la=!0),Me!==null&&(Me=Me.next={lane:0,tag:_t.tag,payload:_t.payload,callback:null,next:null});t:{var gn=o,kn=_t;ye=h;var cr=g;switch(kn.tag){case 1:if(gn=kn.payload,typeof gn=="function"){De=gn.call(cr,De,ye);break t}De=gn;break t;case 3:gn.flags=gn.flags&-65537|128;case 0:if(gn=kn.payload,ye=typeof gn=="function"?gn.call(cr,De,ye):gn,ye==null)break t;De=A({},De,ye);break t;case 2:$r=!0}}ye=_t.callback,ye!==null&&(o.flags|=64,xe&&(o.flags|=8192),xe=z.callbacks,xe===null?z.callbacks=[ye]:xe.push(ye))}else xe={lane:ye,tag:_t.tag,payload:_t.payload,callback:_t.callback,next:null},Me===null?(pe=Me=xe,qt=De):Me=Me.next=xe,rt|=ye;if(_t=_t.next,_t===null){if(_t=z.shared.pending,_t===null)break;xe=_t,_t=xe.next,xe.next=null,z.lastBaseUpdate=xe,z.shared.pending=null}}while(!0);Me===null&&(qt=De),z.baseState=qt,z.firstBaseUpdate=pe,z.lastBaseUpdate=Me,N===null&&(z.shared.lanes=0),ic|=rt,o.lanes=rt,o.memoizedState=De}}function hu(o,h){if(typeof o!="function")throw Error(i(191,o));o.call(h)}function dr(o,h){var g=o.callbacks;if(g!==null)for(o.callbacks=null,o=0;o<g.length;o++)hu(g[o],h)}var ar=ft(null),Ea=ft(0);function pr(o,h){o=po,jt(Ea,o),jt(ar,h),po=o|h.baseLanes}function Bl(){jt(Ea,po),jt(ar,ar.current)}function Sc(){po=Ea.current,St(ar),St(Ea)}var _s=ft(null),Is=null;function fu(o){var h=o.alternate;jt(xi,xi.current&1),jt(_s,o),Is===null&&(h===null||ar.current!==null||h.memoizedState!==null)&&(Is=o)}function ih(o){jt(xi,xi.current),jt(_s,o),Is===null&&(Is=o)}function qo(o){o.tag===22?(jt(xi,xi.current),jt(_s,o),Is===null&&(Is=o)):vs()}function vs(){jt(xi,xi.current),jt(_s,_s.current)}function wr(o){St(_s),Is===o&&(Is=null),St(xi)}var xi=ft(0);function Rs(o){for(var h=o;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||qa(g)||Pa(g)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Ho=0,An=null,Wi=null,Qr=null,mr=!1,Tc=!1,Mc=!1,du=0,Nl=0,Xu=null,Zm=0;function Or(){throw Error(i(321))}function Gm(o,h){if(h===null)return!1;for(var g=0;g<h.length&&g<o.length;g++)if(!Cr(o[g],h[g]))return!1;return!0}function lp(o,h,g,S,z,N){return Ho=N,An=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Nt.H=o===null||o.memoizedState===null?bp:ag,Mc=!1,N=g(S,z),Mc=!1,Tc&&(N=up(h,g,S,z)),i_(o),N}function i_(o){Nt.H=nd;var h=Wi!==null&&Wi.next!==null;if(Ho=0,Qr=Wi=An=null,mr=!1,Nl=0,Xu=null,h)throw Error(i(300));o===null||ca||(o=o.dependencies,o!==null&&E(o)&&(ca=!0))}function up(o,h,g,S){An=o;var z=0;do{if(Tc&&(Xu=null),Nl=0,Tc=!1,25<=z)throw Error(i(301));if(z+=1,Qr=Wi=null,o.updateQueue!=null){var N=o.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Nt.H=wp,N=h(g,S)}while(Tc);return N}function Nx(){var o=Nt.H,h=o.useState()[0];return h=typeof h.then=="function"?Ec(h):h,o=o.useState()[0],(Wi!==null?Wi.memoizedState:null)!==o&&(An.flags|=1024),h}function Xf(){var o=du!==0;return du=0,o}function cp(o,h,g){h.updateQueue=o.updateQueue,h.flags&=-2053,o.lanes&=~g}function hp(o){if(mr){for(o=o.memoizedState;o!==null;){var h=o.queue;h!==null&&(h.pending=null),o=o.next}mr=!1}Ho=0,Qr=Wi=An=null,Tc=!1,Nl=du=0,Xu=null}function ua(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qr===null?An.memoizedState=Qr=o:Qr=Qr.next=o,Qr}function Jr(){if(Wi===null){var o=An.alternate;o=o!==null?o.memoizedState:null}else o=Wi.next;var h=Qr===null?An.memoizedState:Qr.next;if(h!==null)Qr=h,Wi=o;else{if(o===null)throw An.alternate===null?Error(i(467)):Error(i(310));Wi=o,o={memoizedState:Wi.memoizedState,baseState:Wi.baseState,baseQueue:Wi.baseQueue,queue:Wi.queue,next:null},Qr===null?An.memoizedState=Qr=o:Qr=Qr.next=o}return Qr}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ec(o){var h=Nl;return Nl+=1,Xu===null&&(Xu=[]),o=qn(Xu,o,h),h=An,(Qr===null?h.memoizedState:Qr.next)===null&&(h=h.alternate,Nt.H=h===null||h.memoizedState===null?bp:ag),o}function rh(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ec(o);if(o.$$typeof===X)return m(o)}throw Error(i(438,String(o)))}function fp(o){var h=null,g=An.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var S=An.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(z){return z.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=Ac(),An.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(o),S=0;S<o;S++)g[S]=xt;return h.index++,g}function pu(o,h){return typeof h=="function"?h(o):h}function dp(o){var h=Jr();return ja(h,Wi,o)}function ja(o,h,g){var S=o.queue;if(S===null)throw Error(i(311));S.lastRenderedReducer=g;var z=o.baseQueue,N=S.pending;if(N!==null){if(z!==null){var rt=z.next;z.next=N.next,N.next=rt}h.baseQueue=z=N,S.pending=null}if(N=o.baseState,z===null)o.memoizedState=N;else{h=z.next;var _t=rt=null,qt=null,pe=h,Me=!1;do{var De=pe.lane&-536870913;if(De!==pe.lane?(li&De)===De:(Ho&De)===De){var ye=pe.revertLane;if(ye===0)qt!==null&&(qt=qt.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),De===At&&(Me=!0);else if((Ho&ye)===ye){pe=pe.next,ye===At&&(Me=!0);continue}else De={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},qt===null?(_t=qt=De,rt=N):qt=qt.next=De,An.lanes|=ye,ic|=ye;De=pe.action,Mc&&g(N,De),N=pe.hasEagerState?pe.eagerState:g(N,De)}else ye={lane:De,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},qt===null?(_t=qt=ye,rt=N):qt=qt.next=ye,An.lanes|=De,ic|=De;pe=pe.next}while(pe!==null&&pe!==h);if(qt===null?rt=N:qt.next=_t,!Cr(N,o.memoizedState)&&(ca=!0,Me&&(g=Mt,g!==null)))throw g;o.memoizedState=N,o.baseState=rt,o.baseQueue=qt,S.lastRenderedState=N}return z===null&&(S.lanes=0),[o.memoizedState,S.dispatch]}function Cc(o){var h=Jr(),g=h.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=o;var S=g.dispatch,z=g.pending,N=h.memoizedState;if(z!==null){g.pending=null;var rt=z=z.next;do N=o(N,rt.action),rt=rt.next;while(rt!==z);Cr(N,h.memoizedState)||(ca=!0),h.memoizedState=N,h.baseQueue===null&&(h.baseState=N),g.lastRenderedState=N}return[N,S]}function pp(o,h,g){var S=An,z=Jr(),N=Xn;if(N){if(g===void 0)throw Error(i(407));g=g()}else g=h();var rt=!Cr((Wi||z).memoizedState,g);if(rt&&(z.memoizedState=g,ca=!0),z=z.queue,Ku(r_.bind(null,S,z,o),[o]),z.getSnapshot!==h||rt||Qr!==null&&Qr.memoizedState.tag&1){if(S.flags|=2048,nf(9,{destroy:void 0},tf.bind(null,S,z,g,h),null),Hi===null)throw Error(i(349));N||(Ho&127)!==0||Wm(S,h,g)}return g}function Wm(o,h,g){o.flags|=16384,o={getSnapshot:h,value:g},h=An.updateQueue,h===null?(h=Ac(),An.updateQueue=h,h.stores=[o]):(g=h.stores,g===null?h.stores=[o]:g.push(o))}function tf(o,h,g,S){h.value=g,h.getSnapshot=S,Kf(h)&&a_(o)}function r_(o,h,g){return g(function(){Kf(h)&&a_(o)})}function Kf(o){var h=o.getSnapshot;o=o.value;try{var g=h();return!Cr(o,g)}catch{return!0}}function a_(o){var h=gs(o,2);h!==null&&Us(h,o,2)}function mp(o){var h=ua();if(typeof o=="function"){var g=o;if(o=g(),Mc){va(!0);try{g()}finally{va(!1)}}}return h.memoizedState=h.baseState=o,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pu,lastRenderedState:o},h}function Ym(o,h,g,S){return o.baseState=g,ja(o,Wi,typeof S=="function"?S:pu)}function s_(o,h,g,S,z){if(xp(o))throw Error(i(485));if(o=h.action,o!==null){var N={payload:z,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(rt){N.listeners.push(rt)}};Nt.T!==null?g(!0):N.isTransition=!1,S(N),g=h.pending,g===null?(N.next=h.pending=N,o_(h,N)):(N.next=g.next,h.pending=g.next=N)}}function o_(o,h){var g=h.action,S=h.payload,z=o.state;if(h.isTransition){var N=Nt.T,rt={};Nt.T=rt;try{var _t=g(z,S),qt=Nt.S;qt!==null&&qt(rt,_t),gp(o,h,_t)}catch(pe){Qf(o,h,pe)}finally{N!==null&&rt.types!==null&&(N.types=rt.types),Nt.T=N}}else try{N=g(z,S),gp(o,h,N)}catch(pe){Qf(o,h,pe)}}function gp(o,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){Xm(o,h,S)},function(S){return Qf(o,h,S)}):Xm(o,h,g)}function Xm(o,h,g){h.status="fulfilled",h.value=g,ef(h),o.state=g,h=o.pending,h!==null&&(g=h.next,g===h?o.pending=null:(g=g.next,h.next=g,o_(o,g)))}function Qf(o,h,g){var S=o.pending;if(o.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=g,ef(h),h=h.next;while(h!==S)}o.action=null}function ef(o){o=o.listeners;for(var h=0;h<o.length;h++)(0,o[h])()}function ho(o,h){return h}function Km(o,h){if(Xn){var g=Hi.formState;if(g!==null){t:{var S=An;if(Xn){if(ri){e:{for(var z=ri,N=oi;z.nodeType!==8;){if(!N){z=null;break e}if(z=ur(z.nextSibling),z===null){z=null;break e}}N=z.data,z=N==="F!"||N==="F"?z:null}if(z){ri=ur(z.nextSibling),S=z.data==="F!";break t}}Pr(S)}S=!1}S&&(h=g[0])}}return g=ua(),g.memoizedState=g.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:h},g.queue=S,g=_p.bind(null,An,S),S.dispatch=g,S=mp(!1),N=vp.bind(null,An,!1,S.queue),S=ua(),z={state:h,dispatch:null,action:o,pending:null},S.queue=z,g=s_.bind(null,An,z,N,g),z.dispatch=g,S.memoizedState=o,[h,g,!1]}function l_(o){var h=Jr();return Qm(h,Wi,o)}function Qm(o,h,g){if(h=ja(o,h,ho)[0],o=dp(pu)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=Ec(h)}catch(rt){throw rt===be?Ae:rt}else S=h;h=Jr();var z=h.queue,N=z.dispatch;return g!==h.memoizedState&&(An.flags|=2048,nf(9,{destroy:void 0},jx.bind(null,z,g),null)),[S,N,o]}function jx(o,h){o.action=h}function u_(o){var h=Jr(),g=Wi;if(g!==null)return Qm(h,g,o);Jr(),h=h.memoizedState,g=Jr();var S=g.queue.dispatch;return g.memoizedState=o,[h,S,!1]}function nf(o,h,g,S){return o={tag:o,create:g,deps:S,inst:h,next:null},h=An.updateQueue,h===null&&(h=Ac(),An.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=o.next=o:(S=g.next,g.next=o,o.next=S,h.lastEffect=o),o}function c_(){return Jr().memoizedState}function rf(o,h,g,S){var z=ua();An.flags|=o,z.memoizedState=nf(1|h,{destroy:void 0},g,S===void 0?null:S)}function ah(o,h,g,S){var z=Jr();S=S===void 0?null:S;var N=z.memoizedState.inst;Wi!==null&&S!==null&&Gm(S,Wi.memoizedState.deps)?z.memoizedState=nf(h,N,g,S):(An.flags|=o,z.memoizedState=nf(1|h,N,g,S))}function Jm(o,h){rf(8390656,8,o,h)}function Ku(o,h){ah(2048,8,o,h)}function Jf(o){An.flags|=4;var h=An.updateQueue;if(h===null)h=Ac(),An.updateQueue=h,h.events=[o];else{var g=h.events;g===null?h.events=[o]:g.push(o)}}function h_(o){var h=Jr().memoizedState;return Jf({ref:h,nextImpl:o}),function(){if((Ci&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}function f_(o,h){return ah(4,2,o,h)}function d_(o,h){return ah(4,4,o,h)}function p_(o,h){if(typeof h=="function"){o=o();var g=h(o);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return o=o(),h.current=o,function(){h.current=null}}function m_(o,h,g){g=g!=null?g.concat([o]):null,ah(4,4,p_.bind(null,h,o),g)}function tg(){}function g_(o,h){var g=Jr();h=h===void 0?null:h;var S=g.memoizedState;return h!==null&&Gm(h,S[1])?S[0]:(g.memoizedState=[o,h],o)}function yp(o,h){var g=Jr();h=h===void 0?null:h;var S=g.memoizedState;if(h!==null&&Gm(h,S[1]))return S[0];if(S=o(),Mc){va(!0);try{o()}finally{va(!1)}}return g.memoizedState=[S,h],S}function eg(o,h,g){return g===void 0||(Ho&1073741824)!==0&&(li&261930)===0?o.memoizedState=h:(o.memoizedState=g,o=Gp(),An.lanes|=o,ic|=o,g)}function sh(o,h,g,S){return Cr(g,h)?g:ar.current!==null?(o=eg(o,g,S),Cr(o,h)||(ca=!0),o):(Ho&42)===0||(Ho&1073741824)!==0&&(li&261930)===0?(ca=!0,o.memoizedState=g):(o=Gp(),An.lanes|=o,ic|=o,h)}function y_(o,h,g,S,z){var N=Pt.p;Pt.p=N!==0&&8>N?N:8;var rt=Nt.T,_t={};Nt.T=_t,vp(o,!1,h,g);try{var qt=z(),pe=Nt.S;if(pe!==null&&pe(_t,qt),qt!==null&&typeof qt=="object"&&typeof qt.then=="function"){var Me=Wt(qt,S);oh(o,h,Me,go(o))}else oh(o,h,S,go(o))}catch(De){oh(o,h,{then:function(){},status:"rejected",reason:De},go())}finally{Pt.p=N,rt!==null&&_t.types!==null&&(rt.types=_t.types),Nt.T=rt}}function Dr(){}function af(o,h,g,S){if(o.tag!==5)throw Error(i(476));var z=ng(o).queue;y_(o,z,h,Bt,g===null?Dr:function(){return td(o),g(S)})}function ng(o){var h=o.memoizedState;if(h!==null)return h;h={memoizedState:Bt,baseState:Bt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pu,lastRenderedState:Bt},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pu,lastRenderedState:g},next:null},o.memoizedState=h,o=o.alternate,o!==null&&(o.memoizedState=h),h}function td(o){var h=ng(o);h.next===null&&(h=o.alternate.memoizedState),oh(o,h.next.queue,{},go())}function sf(){return m(Dg)}function of(){return Jr().memoizedState}function ig(){return Jr().memoizedState}function __(o){for(var h=o.return;h!==null;){switch(h.tag){case 24:case 3:var g=go();o=Aa(g);var S=ns(h,o,g);S!==null&&(Us(S,h,g),$o(S,h,g)),h={cache:Y()},o.payload=h;return}h=h.return}}function ed(o,h,g){var S=go();g={lane:S,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},xp(o)?rg(h,g):(g=Ye(o,h,g,S),g!==null&&(Us(g,o,S),lf(g,h,S)))}function _p(o,h,g){var S=go();oh(o,h,g,S)}function oh(o,h,g,S){var z={lane:S,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(xp(o))rg(h,z);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=h.lastRenderedReducer,N!==null))try{var rt=h.lastRenderedState,_t=N(rt,g);if(z.hasEagerState=!0,z.eagerState=_t,Cr(_t,rt))return No(o,h,z,0),Hi===null&&so(),!1}catch{}finally{}if(g=Ye(o,h,z,S),g!==null)return Us(g,o,S),lf(g,h,S),!0}return!1}function vp(o,h,g,S){if(S={lane:2,revertLane:Ad(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},xp(o)){if(h)throw Error(i(479))}else h=Ye(o,g,S,2),h!==null&&Us(h,o,2)}function xp(o){var h=o.alternate;return o===An||h!==null&&h===An}function rg(o,h){Tc=mr=!0;var g=o.pending;g===null?h.next=h:(h.next=g.next,g.next=h),o.pending=h}function lf(o,h,g){if((g&4194048)!==0){var S=h.lanes;S&=o.pendingLanes,g|=S,h.lanes=g,Ut(o,g)}}var nd={readContext:m,use:rh,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useLayoutEffect:Or,useInsertionEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useSyncExternalStore:Or,useId:Or,useHostTransitionStatus:Or,useFormState:Or,useActionState:Or,useOptimistic:Or,useMemoCache:Or,useCacheRefresh:Or};nd.useEffectEvent=Or;var bp={readContext:m,use:rh,useCallback:function(o,h){return ua().memoizedState=[o,h===void 0?null:h],o},useContext:m,useEffect:Jm,useImperativeHandle:function(o,h,g){g=g!=null?g.concat([o]):null,rf(4194308,4,p_.bind(null,h,o),g)},useLayoutEffect:function(o,h){return rf(4194308,4,o,h)},useInsertionEffect:function(o,h){rf(4,2,o,h)},useMemo:function(o,h){var g=ua();h=h===void 0?null:h;var S=o();if(Mc){va(!0);try{o()}finally{va(!1)}}return g.memoizedState=[S,h],S},useReducer:function(o,h,g){var S=ua();if(g!==void 0){var z=g(h);if(Mc){va(!0);try{g(h)}finally{va(!1)}}}else z=h;return S.memoizedState=S.baseState=z,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:z},S.queue=o,o=o.dispatch=ed.bind(null,An,o),[S.memoizedState,o]},useRef:function(o){var h=ua();return o={current:o},h.memoizedState=o},useState:function(o){o=mp(o);var h=o.queue,g=_p.bind(null,An,h);return h.dispatch=g,[o.memoizedState,g]},useDebugValue:tg,useDeferredValue:function(o,h){var g=ua();return eg(g,o,h)},useTransition:function(){var o=mp(!1);return o=y_.bind(null,An,o.queue,!0,!1),ua().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,h,g){var S=An,z=ua();if(Xn){if(g===void 0)throw Error(i(407));g=g()}else{if(g=h(),Hi===null)throw Error(i(349));(li&127)!==0||Wm(S,h,g)}z.memoizedState=g;var N={value:g,getSnapshot:h};return z.queue=N,Jm(r_.bind(null,S,N,o),[o]),S.flags|=2048,nf(9,{destroy:void 0},tf.bind(null,S,N,g,h),null),g},useId:function(){var o=ua(),h=Hi.identifierPrefix;if(Xn){var g=Qe,S=Ce;g=(S&~(1<<32-fr(S)-1)).toString(32)+g,h="_"+h+"R_"+g,g=du++,0<g&&(h+="H"+g.toString(32)),h+="_"}else g=Zm++,h="_"+h+"r_"+g.toString(32)+"_";return o.memoizedState=h},useHostTransitionStatus:sf,useFormState:Km,useActionState:Km,useOptimistic:function(o){var h=ua();h.memoizedState=h.baseState=o;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=vp.bind(null,An,!0,g),g.dispatch=h,[o,h]},useMemoCache:fp,useCacheRefresh:function(){return ua().memoizedState=__.bind(null,An)},useEffectEvent:function(o){var h=ua(),g={impl:o};return h.memoizedState=g,function(){if((Ci&2)!==0)throw Error(i(440));return g.impl.apply(void 0,arguments)}}},ag={readContext:m,use:rh,useCallback:g_,useContext:m,useEffect:Ku,useImperativeHandle:m_,useInsertionEffect:f_,useLayoutEffect:d_,useMemo:yp,useReducer:dp,useRef:c_,useState:function(){return dp(pu)},useDebugValue:tg,useDeferredValue:function(o,h){var g=Jr();return sh(g,Wi.memoizedState,o,h)},useTransition:function(){var o=dp(pu)[0],h=Jr().memoizedState;return[typeof o=="boolean"?o:Ec(o),h]},useSyncExternalStore:pp,useId:of,useHostTransitionStatus:sf,useFormState:l_,useActionState:l_,useOptimistic:function(o,h){var g=Jr();return Ym(g,Wi,o,h)},useMemoCache:fp,useCacheRefresh:ig};ag.useEffectEvent=h_;var wp={readContext:m,use:rh,useCallback:g_,useContext:m,useEffect:Ku,useImperativeHandle:m_,useInsertionEffect:f_,useLayoutEffect:d_,useMemo:yp,useReducer:Cc,useRef:c_,useState:function(){return Cc(pu)},useDebugValue:tg,useDeferredValue:function(o,h){var g=Jr();return Wi===null?eg(g,o,h):sh(g,Wi.memoizedState,o,h)},useTransition:function(){var o=Cc(pu)[0],h=Jr().memoizedState;return[typeof o=="boolean"?o:Ec(o),h]},useSyncExternalStore:pp,useId:of,useHostTransitionStatus:sf,useFormState:u_,useActionState:u_,useOptimistic:function(o,h){var g=Jr();return Wi!==null?Ym(g,Wi,o,h):(g.baseState=o,[o,g.queue.dispatch])},useMemoCache:fp,useCacheRefresh:ig};wp.useEffectEvent=h_;function id(o,h,g,S){h=o.memoizedState,g=g(S,h),g=g==null?h:A({},h,g),o.memoizedState=g,o.lanes===0&&(o.updateQueue.baseState=g)}var rd={enqueueSetState:function(o,h,g){o=o._reactInternals;var S=go(),z=Aa(S);z.payload=h,g!=null&&(z.callback=g),h=ns(o,z,S),h!==null&&(Us(h,o,S),$o(h,o,S))},enqueueReplaceState:function(o,h,g){o=o._reactInternals;var S=go(),z=Aa(S);z.tag=1,z.payload=h,g!=null&&(z.callback=g),h=ns(o,z,S),h!==null&&(Us(h,o,S),$o(h,o,S))},enqueueForceUpdate:function(o,h){o=o._reactInternals;var g=go(),S=Aa(g);S.tag=2,h!=null&&(S.callback=h),h=ns(o,S,g),h!==null&&(Us(h,o,g),$o(h,o,g))}};function sg(o,h,g,S,z,N,rt){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(S,N,rt):h.prototype&&h.prototype.isPureReactComponent?!ms(g,S)||!ms(z,N):!0}function og(o,h,g,S){o=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,S),h.state!==o&&rd.enqueueReplaceState(h,h.state,null)}function lh(o,h){var g=h;if("ref"in h){g={};for(var S in h)S!=="ref"&&(g[S]=h[S])}if(o=o.defaultProps){g===h&&(g=A({},g));for(var z in o)g[z]===void 0&&(g[z]=o[z])}return g}function v_(o){es(o)}function x_(o){console.error(o)}function b_(o){es(o)}function Sp(o,h){try{var g=o.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function Qu(o,h,g){try{var S=o.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function lg(o,h,g){return g=Aa(g),g.tag=3,g.payload={element:null},g.callback=function(){Sp(o,h)},g}function ug(o){return o=Aa(o),o.tag=3,o}function uh(o,h,g,S){var z=g.type.getDerivedStateFromError;if(typeof z=="function"){var N=S.value;o.payload=function(){return z(N)},o.callback=function(){Qu(h,g,S)}}var rt=g.stateNode;rt!==null&&typeof rt.componentDidCatch=="function"&&(o.callback=function(){Qu(h,g,S),typeof z!="function"&&(_u===null?_u=new Set([this]):_u.add(this));var _t=S.stack;this.componentDidCatch(S.value,{componentStack:_t!==null?_t:""})})}function Fx(o,h,g,S,z){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=g.alternate,h!==null&&ei(h,g,z,!0),g=_s.current,g!==null){switch(g.tag){case 31:case 13:return Is===null?yd():g.alternate===null&&zr===0&&(zr=3),g.flags&=-257,g.flags|=65536,g.lanes=z,S===Ne?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([S]):h.add(S),fa(o,S,z)),!1;case 22:return g.flags|=65536,S===Ne?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([S]):g.add(S)),fa(o,S,z)),!1}throw Error(i(435,g.tag))}return fa(o,S,z),yd(),!1}if(Xn)return h=_s.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=z,S!==uu&&(o=Error(i(422),{cause:S}),Uo(w(o,g)))):(S!==uu&&(h=Error(i(423),{cause:S}),Uo(w(h,g))),o=o.current.alternate,o.flags|=65536,z&=-z,o.lanes|=z,S=w(S,g),z=lg(o.stateNode,S,z),cu(o,z),zr!==4&&(zr=2)),!1;var N=Error(i(520),{cause:S});if(N=w(N,g),md===null?md=[N]:md.push(N),zr!==4&&(zr=2),h===null)return!0;S=w(S,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,o=z&-z,g.lanes|=o,o=lg(g.stateNode,S,o),cu(g,o),!1;case 1:if(h=g.type,N=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(_u===null||!_u.has(N))))return g.flags|=65536,z&=-z,g.lanes|=z,z=ug(z),uh(z,o,g,S),cu(g,z),!1}g=g.return}while(g!==null);return!1}var cg=Error(i(461)),ca=!1;function Fa(o,h,g,S){h.child=o===null?br(h,null,g,S):Ji(h,o.child,g,S)}function hg(o,h,g,S,z){g=g.render;var N=h.ref;if("ref"in S){var rt={};for(var _t in S)_t!=="ref"&&(rt[_t]=S[_t])}else rt=S;return l(h),S=lp(o,h,g,rt,N,z),_t=Xf(),o!==null&&!ca?(cp(o,h,z),mu(o,h,z)):(Xn&&_t&&ci(h),h.flags|=1,Fa(o,h,S,z),h.child)}function w_(o,h,g,S,z){if(o===null){var N=g.type;return typeof N=="function"&&!Wu(N)&&N.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=N,S_(o,h,N,S,z)):(o=Rl(g.type,null,S,h,h.mode,z),o.ref=h.ref,o.return=h,h.child=o)}if(N=o.child,!kp(o,z)){var rt=N.memoizedProps;if(g=g.compare,g=g!==null?g:ms,g(rt,S)&&o.ref===h.ref)return mu(o,h,z)}return h.flags|=1,o=oo(N,S),o.ref=h.ref,o.return=h,h.child=o}function S_(o,h,g,S,z){if(o!==null){var N=o.memoizedProps;if(ms(N,S)&&o.ref===h.ref)if(ca=!1,h.pendingProps=S=N,kp(o,z))(o.flags&131072)!==0&&(ca=!0);else return h.lanes=o.lanes,mu(o,h,z)}return Ep(o,h,g,S,z)}function T_(o,h,g,S){var z=S.children,N=o!==null?o.memoizedState:null;if(o===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((h.flags&128)!==0){if(N=N!==null?N.baseLanes|g:g,o!==null){for(S=h.child=o.child,z=0;S!==null;)z=z|S.lanes|S.childLanes,S=S.sibling;S=z&~N}else S=0,h.child=null;return Tp(o,h,N,g,S)}if((g&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},o!==null&&ue(h,N!==null?N.cachePool:null),N!==null?pr(h,N):Bl(),qo(h);else return S=h.lanes=536870912,Tp(o,h,N!==null?N.baseLanes|g:g,g,S)}else N!==null?(ue(h,N.cachePool),pr(h,N),vs(),h.memoizedState=null):(o!==null&&ue(h,null),Bl(),vs());return Fa(o,h,z,g),h.child}function ad(o,h){return o!==null&&o.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function Tp(o,h,g,S,z){var N=Kt();return N=N===null?null:{parent:$._currentValue,pool:N},h.memoizedState={baseLanes:g,cachePool:N},o!==null&&ue(h,null),Bl(),qo(h),o!==null&&ei(o,h,S,!0),h.childLanes=z,null}function Pc(o,h){return h=Pp({mode:h.mode,children:h.children},o.mode),h.ref=o.ref,o.child=h,h.return=o,h}function Mp(o,h,g){return Ji(h,o.child,null,g),o=Pc(h,h.pendingProps),o.flags|=2,wr(h),h.memoizedState=null,o}function Ux(o,h,g){var S=h.pendingProps,z=(h.flags&128)!==0;if(h.flags&=-129,o===null){if(Xn){if(S.mode==="hidden")return o=Pc(h,S),h.lanes=536870912,ad(null,o);if(ih(h),(o=ri)?(o=$a(o,oi),o=o!==null&&o.data==="&"?o:null,o!==null&&(h.memoizedState={dehydrated:o,treeContext:fe!==null?{id:Ce,overflow:Qe}:null,retryLane:536870912,hydrationErrors:null},g=sa(o),g.return=h,h.child=g,Ge=h,ri=null)):o=null,o===null)throw Pr(h);return h.lanes=536870912,null}return Pc(h,S)}var N=o.memoizedState;if(N!==null){var rt=N.dehydrated;if(ih(h),z)if(h.flags&256)h.flags&=-257,h=Mp(o,h,g);else if(h.memoizedState!==null)h.child=o.child,h.flags|=128,h=null;else throw Error(i(558));else if(ca||ei(o,h,g,!1),z=(g&o.childLanes)!==0,ca||z){if(S=Hi,S!==null&&(rt=Xt(S,g),rt!==0&&rt!==N.retryLane))throw N.retryLane=rt,gs(o,rt),Us(S,o,rt),cg;yd(),h=Mp(o,h,g)}else o=N.treeContext,ri=ur(rt.nextSibling),Ge=h,Xn=!0,uo=null,oi=!1,o!==null&&Je(h,o),h=Pc(h,S),h.flags|=4096;return h}return o=oo(o.child,{mode:S.mode,children:S.children}),o.ref=h.ref,h.child=o,o.return=h,o}function Ap(o,h){var g=h.ref;if(g===null)o!==null&&o.ref!==null&&(h.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(o===null||o.ref!==g)&&(h.flags|=4194816)}}function Ep(o,h,g,S,z){return l(h),g=lp(o,h,g,S,void 0,z),S=Xf(),o!==null&&!ca?(cp(o,h,z),mu(o,h,z)):(Xn&&S&&ci(h),h.flags|=1,Fa(o,h,g,z),h.child)}function M_(o,h,g,S,z,N){return l(h),h.updateQueue=null,g=up(h,S,g,z),i_(o),S=Xf(),o!==null&&!ca?(cp(o,h,N),mu(o,h,N)):(Xn&&S&&ci(h),h.flags|=1,Fa(o,h,g,N),h.child)}function A_(o,h,g,S,z){if(l(h),h.stateNode===null){var N=jo,rt=g.contextType;typeof rt=="object"&&rt!==null&&(N=m(rt)),N=new g(S,N),h.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=rd,h.stateNode=N,N._reactInternals=h,N=h.stateNode,N.props=S,N.state=h.memoizedState,N.refs={},Bi(h),rt=g.contextType,N.context=typeof rt=="object"&&rt!==null?m(rt):jo,N.state=h.memoizedState,rt=g.getDerivedStateFromProps,typeof rt=="function"&&(id(h,g,rt,S),N.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(rt=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),rt!==N.state&&rd.enqueueReplaceState(N,N.state,null),Kr(h,S,N,z),kr(),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(o===null){N=h.stateNode;var _t=h.memoizedProps,qt=lh(g,_t);N.props=qt;var pe=N.context,Me=g.contextType;rt=jo,typeof Me=="object"&&Me!==null&&(rt=m(Me));var De=g.getDerivedStateFromProps;Me=typeof De=="function"||typeof N.getSnapshotBeforeUpdate=="function",_t=h.pendingProps!==_t,Me||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(_t||pe!==rt)&&og(h,N,S,rt),$r=!1;var ye=h.memoizedState;N.state=ye,Kr(h,S,N,z),kr(),pe=h.memoizedState,_t||ye!==pe||$r?(typeof De=="function"&&(id(h,g,De,S),pe=h.memoizedState),(qt=$r||sg(h,g,qt,S,ye,pe,rt))?(Me||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(h.flags|=4194308)):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=pe),N.props=S,N.state=pe,N.context=rt,S=qt):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{N=h.stateNode,co(o,h),rt=h.memoizedProps,Me=lh(g,rt),N.props=Me,De=h.pendingProps,ye=N.context,pe=g.contextType,qt=jo,typeof pe=="object"&&pe!==null&&(qt=m(pe)),_t=g.getDerivedStateFromProps,(pe=typeof _t=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(rt!==De||ye!==qt)&&og(h,N,S,qt),$r=!1,ye=h.memoizedState,N.state=ye,Kr(h,S,N,z),kr();var xe=h.memoizedState;rt!==De||ye!==xe||$r||o!==null&&o.dependencies!==null&&E(o.dependencies)?(typeof _t=="function"&&(id(h,g,_t,S),xe=h.memoizedState),(Me=$r||sg(h,g,Me,S,ye,xe,qt)||o!==null&&o.dependencies!==null&&E(o.dependencies))?(pe||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(S,xe,qt),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(S,xe,qt)),typeof N.componentDidUpdate=="function"&&(h.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof N.componentDidUpdate!="function"||rt===o.memoizedProps&&ye===o.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||rt===o.memoizedProps&&ye===o.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=xe),N.props=S,N.state=xe,N.context=qt,S=Me):(typeof N.componentDidUpdate!="function"||rt===o.memoizedProps&&ye===o.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||rt===o.memoizedProps&&ye===o.memoizedState||(h.flags|=1024),S=!1)}return N=S,Ap(o,h),S=(h.flags&128)!==0,N||S?(N=h.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:N.render(),h.flags|=1,o!==null&&S?(h.child=Ji(h,o.child,null,z),h.child=Ji(h,null,g,z)):Fa(o,h,g,z),h.memoizedState=N.state,o=h.child):o=mu(o,h,z),o}function uf(o,h,g,S){return vi(),h.flags|=256,Fa(o,h,g,S),h.child}var Cp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fg(o){return{baseLanes:o,cachePool:de()}}function dg(o,h,g){return o=o!==null?o.childLanes&~g:0,h&&(o|=xs),o}function E_(o,h,g){var S=h.pendingProps,z=!1,N=(h.flags&128)!==0,rt;if((rt=N)||(rt=o!==null&&o.memoizedState===null?!1:(xi.current&2)!==0),rt&&(z=!0,h.flags&=-129),rt=(h.flags&32)!==0,h.flags&=-33,o===null){if(Xn){if(z?fu(h):vs(),(o=ri)?(o=$a(o,oi),o=o!==null&&o.data!=="&"?o:null,o!==null&&(h.memoizedState={dehydrated:o,treeContext:fe!==null?{id:Ce,overflow:Qe}:null,retryLane:536870912,hydrationErrors:null},g=sa(o),g.return=h,h.child=g,Ge=h,ri=null)):o=null,o===null)throw Pr(h);return Pa(o)?h.lanes=32:h.lanes=536870912,null}var _t=S.children;return S=S.fallback,z?(vs(),z=h.mode,_t=Pp({mode:"hidden",children:_t},z),S=Fo(S,z,g,null),_t.return=h,S.return=h,_t.sibling=S,h.child=_t,S=h.child,S.memoizedState=fg(g),S.childLanes=dg(o,rt,g),h.memoizedState=Cp,ad(null,S)):(fu(h),pg(h,_t))}var qt=o.memoizedState;if(qt!==null&&(_t=qt.dehydrated,_t!==null)){if(N)h.flags&256?(fu(h),h.flags&=-257,h=mg(o,h,g)):h.memoizedState!==null?(vs(),h.child=o.child,h.flags|=128,h=null):(vs(),_t=S.fallback,z=h.mode,S=Pp({mode:"visible",children:S.children},z),_t=Fo(_t,z,g,null),_t.flags|=2,S.return=h,_t.return=h,S.sibling=_t,h.child=S,Ji(h,o.child,null,g),S=h.child,S.memoizedState=fg(g),S.childLanes=dg(o,rt,g),h.memoizedState=Cp,h=ad(null,S));else if(fu(h),Pa(_t)){if(rt=_t.nextSibling&&_t.nextSibling.dataset,rt)var pe=rt.dgst;rt=pe,S=Error(i(419)),S.stack="",S.digest=rt,Uo({value:S,source:null,stack:null}),h=mg(o,h,g)}else if(ca||ei(o,h,g,!1),rt=(g&o.childLanes)!==0,ca||rt){if(rt=Hi,rt!==null&&(S=Xt(rt,g),S!==0&&S!==qt.retryLane))throw qt.retryLane=S,gs(o,S),Us(rt,o,S),cg;qa(_t)||yd(),h=mg(o,h,g)}else qa(_t)?(h.flags|=192,h.child=o.child,h=null):(o=qt.treeContext,ri=ur(_t.nextSibling),Ge=h,Xn=!0,uo=null,oi=!1,o!==null&&Je(h,o),h=pg(h,S.children),h.flags|=4096);return h}return z?(vs(),_t=S.fallback,z=h.mode,qt=o.child,pe=qt.sibling,S=oo(qt,{mode:"hidden",children:S.children}),S.subtreeFlags=qt.subtreeFlags&65011712,pe!==null?_t=oo(pe,_t):(_t=Fo(_t,z,g,null),_t.flags|=2),_t.return=h,S.return=h,S.sibling=_t,h.child=S,ad(null,S),S=h.child,_t=o.child.memoizedState,_t===null?_t=fg(g):(z=_t.cachePool,z!==null?(qt=$._currentValue,z=z.parent!==qt?{parent:qt,pool:qt}:z):z=de(),_t={baseLanes:_t.baseLanes|g,cachePool:z}),S.memoizedState=_t,S.childLanes=dg(o,rt,g),h.memoizedState=Cp,ad(o.child,S)):(fu(h),g=o.child,o=g.sibling,g=oo(g,{mode:"visible",children:S.children}),g.return=h,g.sibling=null,o!==null&&(rt=h.deletions,rt===null?(h.deletions=[o],h.flags|=16):rt.push(o)),h.child=g,h.memoizedState=null,g)}function pg(o,h){return h=Pp({mode:"visible",children:h},o.mode),h.return=o,o.child=h}function Pp(o,h){return o=Ma(22,o,null,h),o.lanes=0,o}function mg(o,h,g){return Ji(h,o.child,null,g),o=pg(h,h.pendingProps.children),o.flags|=2,h.memoizedState=null,o}function gg(o,h,g){o.lanes|=h;var S=o.alternate;S!==null&&(S.lanes|=h),eh(o.return,h,g)}function sd(o,h,g,S,z,N){var rt=o.memoizedState;rt===null?o.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:z,treeForkCount:N}:(rt.isBackwards=h,rt.rendering=null,rt.renderingStartTime=0,rt.last=S,rt.tail=g,rt.tailMode=z,rt.treeForkCount=N)}function yg(o,h,g){var S=h.pendingProps,z=S.revealOrder,N=S.tail;S=S.children;var rt=xi.current,_t=(rt&2)!==0;if(_t?(rt=rt&1|2,h.flags|=128):rt&=1,jt(xi,rt),Fa(o,h,S,g),S=Xn?mt:0,!_t&&o!==null&&(o.flags&128)!==0)t:for(o=h.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&gg(o,g,h);else if(o.tag===19)gg(o,g,h);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===h)break t;for(;o.sibling===null;){if(o.return===null||o.return===h)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(z){case"forwards":for(g=h.child,z=null;g!==null;)o=g.alternate,o!==null&&Rs(o)===null&&(z=g),g=g.sibling;g=z,g===null?(z=h.child,h.child=null):(z=g.sibling,g.sibling=null),sd(h,!1,z,g,N,S);break;case"backwards":case"unstable_legacy-backwards":for(g=null,z=h.child,h.child=null;z!==null;){if(o=z.alternate,o!==null&&Rs(o)===null){h.child=z;break}o=z.sibling,z.sibling=g,g=z,z=o}sd(h,!0,g,null,N,S);break;case"together":sd(h,!1,null,null,void 0,S);break;default:h.memoizedState=null}return h.child}function mu(o,h,g){if(o!==null&&(h.dependencies=o.dependencies),ic|=h.lanes,(g&h.childLanes)===0)if(o!==null){if(ei(o,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(o!==null&&h.child!==o.child)throw Error(i(153));if(h.child!==null){for(o=h.child,g=oo(o,o.pendingProps),h.child=g,g.return=h;o.sibling!==null;)o=o.sibling,g=g.sibling=oo(o,o.pendingProps),g.return=h;g.sibling=null}return h.child}function kp(o,h){return(o.lanes&h)!==0?!0:(o=o.dependencies,!!(o!==null&&E(o)))}function Vx(o,h,g){switch(h.tag){case 3:Ie(h,h.stateNode.containerInfo),hl(h,$,o.memoizedState.cache),vi();break;case 27:case 5:Le(h);break;case 4:Ie(h,h.stateNode.containerInfo);break;case 10:hl(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,ih(h),null;break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(fu(h),h.flags|=128,null):(g&h.child.childLanes)!==0?E_(o,h,g):(fu(h),o=mu(o,h,g),o!==null?o.sibling:null);fu(h);break;case 19:var z=(o.flags&128)!==0;if(S=(g&h.childLanes)!==0,S||(ei(o,h,g,!1),S=(g&h.childLanes)!==0),z){if(S)return yg(o,h,g);h.flags|=128}if(z=h.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),jt(xi,xi.current),S)break;return null;case 22:return h.lanes=0,T_(o,h,g,h.pendingProps);case 24:hl(h,$,o.memoizedState.cache)}return mu(o,h,g)}function od(o,h,g){if(o!==null)if(o.memoizedProps!==h.pendingProps)ca=!0;else{if(!kp(o,g)&&(h.flags&128)===0)return ca=!1,Vx(o,h,g);ca=(o.flags&131072)!==0}else ca=!1,Xn&&(h.flags&1048576)!==0&&$n(h,mt,h.index);switch(h.lanes=0,h.tag){case 16:t:{var S=h.pendingProps;if(o=Ve(h.elementType),h.type=o,typeof o=="function")Wu(o)?(S=lh(o,S),h.tag=1,h=A_(null,h,o,S,g)):(h.tag=0,h=Ep(null,h,o,S,g));else{if(o!=null){var z=o.$$typeof;if(z===tt){h.tag=11,h=hg(null,h,o,S,g);break t}else if(z===ht){h.tag=14,h=w_(null,h,o,S,g);break t}}throw h=ve(o)||o,Error(i(306,h,""))}}return h;case 0:return Ep(o,h,h.type,h.pendingProps,g);case 1:return S=h.type,z=lh(S,h.pendingProps),A_(o,h,S,z,g);case 3:t:{if(Ie(h,h.stateNode.containerInfo),o===null)throw Error(i(387));S=h.pendingProps;var N=h.memoizedState;z=N.element,co(o,h),Kr(h,S,null,g);var rt=h.memoizedState;if(S=rt.cache,hl(h,$,S),S!==N.cache&&nh(h,[$],g,!0),kr(),S=rt.element,N.isDehydrated)if(N={element:S,isDehydrated:!1,cache:rt.cache},h.updateQueue.baseState=N,h.memoizedState=N,h.flags&256){h=uf(o,h,S,g);break t}else if(S!==z){z=w(Error(i(424)),h),Uo(z),h=uf(o,h,S,g);break t}else{switch(o=h.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(ri=ur(o.firstChild),Ge=h,Xn=!0,uo=null,oi=!0,g=br(h,null,S,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(vi(),S===z){h=mu(o,h,g);break t}Fa(o,h,S,g)}h=h.child}return h;case 26:return Ap(o,h),o===null?(g=Y_(h.type,null,h.pendingProps,null))?h.memoizedState=g:Xn||(g=h.type,o=h.pendingProps,S=$e(ce.current).createElement(g),S[He]=h,S[tn]=o,je(S,g,o),Ki(S),h.stateNode=S):h.memoizedState=Y_(h.type,o.memoizedProps,h.pendingProps,o.memoizedState),null;case 27:return Le(h),o===null&&Xn&&(S=h.stateNode=ka(h.type,h.pendingProps,ce.current),Ge=h,oi=!0,z=ri,lr(h.type)?(Lr=z,ri=ur(S.firstChild)):ri=z),Fa(o,h,h.pendingProps.children,g),Ap(o,h),o===null&&(h.flags|=4194304),h.child;case 5:return o===null&&Xn&&((z=S=ri)&&(S=ea(S,h.type,h.pendingProps,oi),S!==null?(h.stateNode=S,Ge=h,ri=ur(S.firstChild),oi=!1,z=!0):z=!1),z||Pr(h)),Le(h),z=h.type,N=h.pendingProps,rt=o!==null?o.memoizedProps:null,S=N.children,un(z,N)?S=null:rt!==null&&un(z,rt)&&(h.flags|=32),h.memoizedState!==null&&(z=lp(o,h,Nx,null,null,g),Dg._currentValue=z),Ap(o,h),Fa(o,h,S,g),h.child;case 6:return o===null&&Xn&&((o=g=ri)&&(g=na(g,h.pendingProps,oi),g!==null?(h.stateNode=g,Ge=h,ri=null,o=!0):o=!1),o||Pr(h)),null;case 13:return E_(o,h,g);case 4:return Ie(h,h.stateNode.containerInfo),S=h.pendingProps,o===null?h.child=Ji(h,null,S,g):Fa(o,h,S,g),h.child;case 11:return hg(o,h,h.type,h.pendingProps,g);case 7:return Fa(o,h,h.pendingProps,g),h.child;case 8:return Fa(o,h,h.pendingProps.children,g),h.child;case 12:return Fa(o,h,h.pendingProps.children,g),h.child;case 10:return S=h.pendingProps,hl(h,h.type,S.value),Fa(o,h,S.children,g),h.child;case 9:return z=h.type._context,S=h.pendingProps.children,l(h),z=m(z),S=S(z),h.flags|=1,Fa(o,h,S,g),h.child;case 14:return w_(o,h,h.type,h.pendingProps,g);case 15:return S_(o,h,h.type,h.pendingProps,g);case 19:return yg(o,h,g);case 31:return Ux(o,h,g);case 22:return T_(o,h,g,h.pendingProps);case 24:return l(h),S=m($),o===null?(z=Kt(),z===null&&(z=Hi,N=Y(),z.pooledCache=N,N.refCount++,N!==null&&(z.pooledCacheLanes|=g),z=N),h.memoizedState={parent:S,cache:z},Bi(h),hl(h,$,z)):((o.lanes&g)!==0&&(co(o,h),Kr(h,null,null,g),kr()),z=o.memoizedState,N=h.memoizedState,z.parent!==S?(z={parent:S,cache:S},h.memoizedState=z,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=z),hl(h,$,S)):(S=N.cache,hl(h,$,S),S!==z.cache&&nh(h,[$],g,!0))),Fa(o,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(i(156,h.tag))}function Ju(o){o.flags|=4}function Op(o,h,g,S,z){if((h=(o.mode&32)!==0)&&(h=!1),h){if(o.flags|=16777216,(z&335544128)===z)if(o.stateNode.complete)o.flags|=8192;else if(B_())o.flags|=8192;else throw fn=Ne,ze}else o.flags&=-16777217}function C_(o,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!xo(h))if(B_())o.flags|=8192;else throw fn=Ne,ze}function Dp(o,h){h!==null&&(o.flags|=4),o.flags&16384&&(h=o.tag!==22?bt():536870912,o.lanes|=h,fh|=h)}function ld(o,h){if(!Xn)switch(o.tailMode){case"hidden":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?o.tail=null:g.sibling=null;break;case"collapsed":g=o.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h||o.tail===null?o.tail=null:o.tail.sibling=null:S.sibling=null}}function sr(o){var h=o.alternate!==null&&o.alternate.child===o.child,g=0,S=0;if(h)for(var z=o.child;z!==null;)g|=z.lanes|z.childLanes,S|=z.subtreeFlags&65011712,S|=z.flags&65011712,z.return=o,z=z.sibling;else for(z=o.child;z!==null;)g|=z.lanes|z.childLanes,S|=z.subtreeFlags,S|=z.flags,z.return=o,z=z.sibling;return o.subtreeFlags|=S,o.childLanes=g,h}function $x(o,h,g){var S=h.pendingProps;switch(Qi(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(h),null;case 1:return sr(h),null;case 3:return g=h.stateNode,S=null,o!==null&&(S=o.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),ys($),Gt(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(hi(h)?Ju(h):o===null||o.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,cl())),sr(h),null;case 26:var z=h.type,N=h.memoizedState;return o===null?(Ju(h),N!==null?(sr(h),C_(h,N)):(sr(h),Op(h,z,null,S,g))):N?N!==o.memoizedState?(Ju(h),sr(h),C_(h,N)):(sr(h),h.flags&=-16777217):(o=o.memoizedProps,o!==S&&Ju(h),sr(h),Op(h,z,o,S,g)),null;case 27:if(Pe(h),g=ce.current,z=h.type,o!==null&&h.stateNode!=null)o.memoizedProps!==S&&Ju(h);else{if(!S){if(h.stateNode===null)throw Error(i(166));return sr(h),null}o=Yt.current,hi(h)?wc(h):(o=ka(z,S,g),h.stateNode=o,Ju(h))}return sr(h),null;case 5:if(Pe(h),z=h.type,o!==null&&h.stateNode!=null)o.memoizedProps!==S&&Ju(h);else{if(!S){if(h.stateNode===null)throw Error(i(166));return sr(h),null}if(N=Yt.current,hi(h))wc(h);else{var rt=$e(ce.current);switch(N){case 1:N=rt.createElementNS("http://www.w3.org/2000/svg",z);break;case 2:N=rt.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;default:switch(z){case"svg":N=rt.createElementNS("http://www.w3.org/2000/svg",z);break;case"math":N=rt.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;case"script":N=rt.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof S.is=="string"?rt.createElement("select",{is:S.is}):rt.createElement("select"),S.multiple?N.multiple=!0:S.size&&(N.size=S.size);break;default:N=typeof S.is=="string"?rt.createElement(z,{is:S.is}):rt.createElement(z)}}N[He]=h,N[tn]=S;t:for(rt=h.child;rt!==null;){if(rt.tag===5||rt.tag===6)N.appendChild(rt.stateNode);else if(rt.tag!==4&&rt.tag!==27&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===h)break t;for(;rt.sibling===null;){if(rt.return===null||rt.return===h)break t;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}h.stateNode=N;t:switch(je(N,z,S),z){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break t;case"img":S=!0;break t;default:S=!1}S&&Ju(h)}}return sr(h),Op(h,h.type,o===null?null:o.memoizedProps,h.pendingProps,g),null;case 6:if(o&&h.stateNode!=null)o.memoizedProps!==S&&Ju(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(i(166));if(o=ce.current,hi(h)){if(o=h.stateNode,g=h.memoizedProps,S=null,z=Ge,z!==null)switch(z.tag){case 27:case 5:S=z.memoizedProps}o[He]=h,o=!!(o.nodeValue===g||S!==null&&S.suppressHydrationWarning===!0||ee(o.nodeValue,g)),o||Pr(h,!0)}else o=$e(o).createTextNode(S),o[He]=h,h.stateNode=o}return sr(h),null;case 31:if(g=h.memoizedState,o===null||o.memoizedState!==null){if(S=hi(h),g!==null){if(o===null){if(!S)throw Error(i(318));if(o=h.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[He]=h}else vi(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;sr(h),o=!1}else g=cl(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=g),o=!0;if(!o)return h.flags&256?(wr(h),h):(wr(h),null);if((h.flags&128)!==0)throw Error(i(558))}return sr(h),null;case 13:if(S=h.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(z=hi(h),S!==null&&S.dehydrated!==null){if(o===null){if(!z)throw Error(i(318));if(z=h.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(i(317));z[He]=h}else vi(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;sr(h),z=!1}else z=cl(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=z),z=!0;if(!z)return h.flags&256?(wr(h),h):(wr(h),null)}return wr(h),(h.flags&128)!==0?(h.lanes=g,h):(g=S!==null,o=o!==null&&o.memoizedState!==null,g&&(S=h.child,z=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(z=S.alternate.memoizedState.cachePool.pool),N=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(N=S.memoizedState.cachePool.pool),N!==z&&(S.flags|=2048)),g!==o&&g&&(h.child.flags|=8192),Dp(h,h.updateQueue),sr(h),null);case 4:return Gt(),o===null&&J(h.stateNode.containerInfo),sr(h),null;case 10:return ys(h.type),sr(h),null;case 19:if(St(xi),S=h.memoizedState,S===null)return sr(h),null;if(z=(h.flags&128)!==0,N=S.rendering,N===null)if(z)ld(S,!1);else{if(zr!==0||o!==null&&(o.flags&128)!==0)for(o=h.child;o!==null;){if(N=Rs(o),N!==null){for(h.flags|=128,ld(S,!1),o=N.updateQueue,h.updateQueue=o,Dp(h,o),h.subtreeFlags=0,o=g,g=h.child;g!==null;)Yu(g,o),g=g.sibling;return jt(xi,xi.current&1|2),Xn&&yn(h,S.treeForkCount),h.child}o=o.sibling}S.tail!==null&&cn()>$p&&(h.flags|=128,z=!0,ld(S,!1),h.lanes=4194304)}else{if(!z)if(o=Rs(N),o!==null){if(h.flags|=128,z=!0,o=o.updateQueue,h.updateQueue=o,Dp(h,o),ld(S,!0),S.tail===null&&S.tailMode==="hidden"&&!N.alternate&&!Xn)return sr(h),null}else 2*cn()-S.renderingStartTime>$p&&g!==536870912&&(h.flags|=128,z=!0,ld(S,!1),h.lanes=4194304);S.isBackwards?(N.sibling=h.child,h.child=N):(o=S.last,o!==null?o.sibling=N:h.child=N,S.last=N)}return S.tail!==null?(o=S.tail,S.rendering=o,S.tail=o.sibling,S.renderingStartTime=cn(),o.sibling=null,g=xi.current,jt(xi,z?g&1|2:g&1),Xn&&yn(h,S.treeForkCount),o):(sr(h),null);case 22:case 23:return wr(h),Sc(),S=h.memoizedState!==null,o!==null?o.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(g&536870912)!==0&&(h.flags&128)===0&&(sr(h),h.subtreeFlags&6&&(h.flags|=8192)):sr(h),g=h.updateQueue,g!==null&&Dp(h,g.retryQueue),g=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==g&&(h.flags|=2048),o!==null&&St(Rt),null;case 24:return g=null,o!==null&&(g=o.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),ys($),sr(h),null;case 25:return null;case 30:return null}throw Error(i(156,h.tag))}function qx(o,h){switch(Qi(h),h.tag){case 1:return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 3:return ys($),Gt(),o=h.flags,(o&65536)!==0&&(o&128)===0?(h.flags=o&-65537|128,h):null;case 26:case 27:case 5:return Pe(h),null;case 31:if(h.memoizedState!==null){if(wr(h),h.alternate===null)throw Error(i(340));vi()}return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 13:if(wr(h),o=h.memoizedState,o!==null&&o.dehydrated!==null){if(h.alternate===null)throw Error(i(340));vi()}return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 19:return St(xi),null;case 4:return Gt(),null;case 10:return ys(h.type),null;case 22:case 23:return wr(h),Sc(),o!==null&&St(Rt),o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 24:return ys($),null;case 25:return null;default:return null}}function cf(o,h){switch(Qi(h),h.tag){case 3:ys($),Gt();break;case 26:case 27:case 5:Pe(h);break;case 4:Gt();break;case 31:h.memoizedState!==null&&wr(h);break;case 13:wr(h);break;case 19:St(xi);break;case 10:ys(h.type);break;case 22:case 23:wr(h),Sc(),o!==null&&St(Rt);break;case 24:ys($)}}function gr(o,h){try{var g=h.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var z=S.next;g=z;do{if((g.tag&o)===o){S=void 0;var N=g.create,rt=g.inst;S=N(),rt.destroy=S}g=g.next}while(g!==z)}}catch(_t){bi(h,h.return,_t)}}function tc(o,h,g){try{var S=h.updateQueue,z=S!==null?S.lastEffect:null;if(z!==null){var N=z.next;S=N;do{if((S.tag&o)===o){var rt=S.inst,_t=rt.destroy;if(_t!==void 0){rt.destroy=void 0,z=h;var qt=g,pe=_t;try{pe()}catch(Me){bi(z,qt,Me)}}}S=S.next}while(S!==N)}}catch(Me){bi(h,h.return,Me)}}function _g(o){var h=o.updateQueue;if(h!==null){var g=o.stateNode;try{dr(h,g)}catch(S){bi(o,o.return,S)}}}function vg(o,h,g){g.props=lh(o.type,o.memoizedProps),g.state=o.memoizedState;try{g.componentWillUnmount()}catch(S){bi(o,h,S)}}function fi(o,h){try{var g=o.ref;if(g!==null){switch(o.tag){case 26:case 27:case 5:var S=o.stateNode;break;case 30:S=o.stateNode;break;default:S=o.stateNode}typeof g=="function"?o.refCleanup=g(S):g.current=S}}catch(z){bi(o,h,z)}}function fl(o,h){var g=o.ref,S=o.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(z){bi(o,h,z)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(z){bi(o,h,z)}else g.current=null}function xg(o){var h=o.type,g=o.memoizedProps,S=o.stateNode;try{t:switch(h){case"button":case"input":case"select":case"textarea":g.autoFocus&&S.focus();break t;case"img":g.src?S.src=g.src:g.srcSet&&(S.srcset=g.srcSet)}}catch(z){bi(o,o.return,z)}}function zp(o,h,g){try{var S=o.stateNode;ln(S,o.type,g,h),S[tn]=h}catch(z){bi(o,o.return,z)}}function gu(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&lr(o.type)||o.tag===4}function kc(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||gu(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&lr(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Lp(o,h,g){var S=o.tag;if(S===5||S===6)o=o.stateNode,h?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(o,h):(h=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,h.appendChild(o),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=Xa));else if(S!==4&&(S===27&&lr(o.type)&&(g=o.stateNode,h=null),o=o.child,o!==null))for(Lp(o,h,g),o=o.sibling;o!==null;)Lp(o,h,g),o=o.sibling}function Ip(o,h,g){var S=o.tag;if(S===5||S===6)o=o.stateNode,h?g.insertBefore(o,h):g.appendChild(o);else if(S!==4&&(S===27&&lr(o.type)&&(g=o.stateNode),o=o.child,o!==null))for(Ip(o,h,g),o=o.sibling;o!==null;)Ip(o,h,g),o=o.sibling}function P_(o){var h=o.stateNode,g=o.memoizedProps;try{for(var S=o.type,z=h.attributes;z.length;)h.removeAttributeNode(z[0]);je(h,S,g),h[He]=o,h[tn]=g}catch(N){bi(o,o.return,N)}}var ec=!1,ha=!1,bg=!1,k_=typeof WeakSet=="function"?WeakSet:Set,Ua=null;function Hx(o,h){if(o=o.containerInfo,Ue=nv,o=su(o),Do(o)){if("selectionStart"in o)var g={start:o.selectionStart,end:o.selectionEnd};else t:{g=(g=o.ownerDocument)&&g.defaultView||window;var S=g.getSelection&&g.getSelection();if(S&&S.rangeCount!==0){g=S.anchorNode;var z=S.anchorOffset,N=S.focusNode;S=S.focusOffset;try{g.nodeType,N.nodeType}catch{g=null;break t}var rt=0,_t=-1,qt=-1,pe=0,Me=0,De=o,ye=null;e:for(;;){for(var xe;De!==g||z!==0&&De.nodeType!==3||(_t=rt+z),De!==N||S!==0&&De.nodeType!==3||(qt=rt+S),De.nodeType===3&&(rt+=De.nodeValue.length),(xe=De.firstChild)!==null;)ye=De,De=xe;for(;;){if(De===o)break e;if(ye===g&&++pe===z&&(_t=rt),ye===N&&++Me===S&&(qt=rt),(xe=De.nextSibling)!==null)break;De=ye,ye=De.parentNode}De=xe}g=_t===-1||qt===-1?null:{start:_t,end:qt}}else g=null}g=g||{start:0,end:0}}else g=null;for(en={focusedElem:o,selectionRange:g},nv=!1,Ua=h;Ua!==null;)if(h=Ua,o=h.child,(h.subtreeFlags&1028)!==0&&o!==null)o.return=h,Ua=o;else for(;Ua!==null;){switch(h=Ua,N=h.alternate,o=h.flags,h.tag){case 0:if((o&4)!==0&&(o=h.updateQueue,o=o!==null?o.events:null,o!==null))for(g=0;g<o.length;g++)z=o[g],z.ref.impl=z.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&N!==null){o=void 0,g=h,z=N.memoizedProps,N=N.memoizedState,S=g.stateNode;try{var gn=lh(g.type,z);o=S.getSnapshotBeforeUpdate(gn,N),S.__reactInternalSnapshotBeforeUpdate=o}catch(kn){bi(g,g.return,kn)}}break;case 3:if((o&1024)!==0){if(o=h.stateNode.containerInfo,g=o.nodeType,g===9)Va(o);else if(g===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Va(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=h.sibling,o!==null){o.return=h.return,Ua=o;break}Ua=h.return}}function O_(o,h,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:Zo(o,g),S&4&&gr(5,g);break;case 1:if(Zo(o,g),S&4)if(o=g.stateNode,h===null)try{o.componentDidMount()}catch(rt){bi(g,g.return,rt)}else{var z=lh(g.type,h.memoizedProps);h=h.memoizedState;try{o.componentDidUpdate(z,h,o.__reactInternalSnapshotBeforeUpdate)}catch(rt){bi(g,g.return,rt)}}S&64&&_g(g),S&512&&fi(g,g.return);break;case 3:if(Zo(o,g),S&64&&(o=g.updateQueue,o!==null)){if(h=null,g.child!==null)switch(g.child.tag){case 27:case 5:h=g.child.stateNode;break;case 1:h=g.child.stateNode}try{dr(o,h)}catch(rt){bi(g,g.return,rt)}}break;case 27:h===null&&S&4&&P_(g);case 26:case 5:Zo(o,g),h===null&&S&4&&xg(g),S&512&&fi(g,g.return);break;case 12:Zo(o,g);break;case 31:Zo(o,g),S&4&&D_(o,g);break;case 13:Zo(o,g),S&4&&z_(o,g),S&64&&(o=g.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(g=q_.bind(null,g),$s(o,g))));break;case 22:if(S=g.memoizedState!==null||ec,!S){h=h!==null&&h.memoizedState!==null||ha,z=ec;var N=ha;ec=S,(ha=h)&&!N?fo(o,g,(g.subtreeFlags&8772)!==0):Zo(o,g),ec=z,ha=N}break;case 30:break;default:Zo(o,g)}}function ud(o){var h=o.alternate;h!==null&&(o.alternate=null,ud(h)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(h=o.stateNode,h!==null&&Ti(h)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var qi=null,Bs=!1;function jl(o,h,g){for(g=g.child;g!==null;)Rp(o,h,g),g=g.sibling}function Rp(o,h,g){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(hr,g)}catch{}switch(g.tag){case 26:ha||fl(g,h),jl(o,h,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:ha||fl(g,h);var S=qi,z=Bs;lr(g.type)&&(qi=g.stateNode,Bs=!1),jl(o,h,g),_r(g.stateNode),qi=S,Bs=z;break;case 5:ha||fl(g,h);case 6:if(S=qi,z=Bs,qi=null,jl(o,h,g),qi=S,Bs=z,qi!==null)if(Bs)try{(qi.nodeType===9?qi.body:qi.nodeName==="HTML"?qi.ownerDocument.body:qi).removeChild(g.stateNode)}catch(N){bi(g,h,N)}else try{qi.removeChild(g.stateNode)}catch(N){bi(g,h,N)}break;case 18:qi!==null&&(Bs?(o=qi,Ca(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,g.stateNode),lm(o)):Ca(qi,g.stateNode));break;case 4:S=qi,z=Bs,qi=g.stateNode.containerInfo,Bs=!0,jl(o,h,g),qi=S,Bs=z;break;case 0:case 11:case 14:case 15:tc(2,g,h),ha||tc(4,g,h),jl(o,h,g);break;case 1:ha||(fl(g,h),S=g.stateNode,typeof S.componentWillUnmount=="function"&&vg(g,h,S)),jl(o,h,g);break;case 21:jl(o,h,g);break;case 22:ha=(S=ha)||g.memoizedState!==null,jl(o,h,g),ha=S;break;default:jl(o,h,g)}}function D_(o,h){if(h.memoizedState===null&&(o=h.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{lm(o)}catch(g){bi(h,h.return,g)}}}function z_(o,h){if(h.memoizedState===null&&(o=h.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{lm(o)}catch(g){bi(h,h.return,g)}}function Zx(o){switch(o.tag){case 31:case 13:case 19:var h=o.stateNode;return h===null&&(h=o.stateNode=new k_),h;case 22:return o=o.stateNode,h=o._retryCache,h===null&&(h=o._retryCache=new k_),h;default:throw Error(i(435,o.tag))}}function cd(o,h){var g=Zx(o);h.forEach(function(S){if(!g.has(S)){g.add(S);var z=H_.bind(null,o,S);S.then(z,z)}})}function Ns(o,h){var g=h.deletions;if(g!==null)for(var S=0;S<g.length;S++){var z=g[S],N=o,rt=h,_t=rt;t:for(;_t!==null;){switch(_t.tag){case 27:if(lr(_t.type)){qi=_t.stateNode,Bs=!1;break t}break;case 5:qi=_t.stateNode,Bs=!1;break t;case 3:case 4:qi=_t.stateNode.containerInfo,Bs=!0;break t}_t=_t.return}if(qi===null)throw Error(i(160));Rp(N,rt,z),qi=null,Bs=!1,N=z.alternate,N!==null&&(N.return=null),z.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)Bp(h,o),h=h.sibling}var yr=null;function Bp(o,h){var g=o.alternate,S=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ns(h,o),js(o),S&4&&(tc(3,o,o.return),gr(3,o),tc(5,o,o.return));break;case 1:Ns(h,o),js(o),S&512&&(ha||g===null||fl(g,g.return)),S&64&&ec&&(o=o.updateQueue,o!==null&&(S=o.callbacks,S!==null&&(g=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:var z=yr;if(Ns(h,o),js(o),S&512&&(ha||g===null||fl(g,g.return)),S&4){var N=g!==null?g.memoizedState:null;if(S=o.memoizedState,g===null)if(S===null)if(o.stateNode===null){t:{S=o.type,g=o.memoizedProps,z=z.ownerDocument||z;e:switch(S){case"title":N=z.getElementsByTagName("title")[0],(!N||N[xr]||N[He]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=z.createElement(S),z.head.insertBefore(N,z.querySelector("head > title"))),je(N,S,g),N[He]=o,Ki(N),S=N;break t;case"link":var rt=Q_("link","href",z).get(S+(g.href||""));if(rt){for(var _t=0;_t<rt.length;_t++)if(N=rt[_t],N.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&N.getAttribute("rel")===(g.rel==null?null:g.rel)&&N.getAttribute("title")===(g.title==null?null:g.title)&&N.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){rt.splice(_t,1);break e}}N=z.createElement(S),je(N,S,g),z.head.appendChild(N);break;case"meta":if(rt=Q_("meta","content",z).get(S+(g.content||""))){for(_t=0;_t<rt.length;_t++)if(N=rt[_t],N.getAttribute("content")===(g.content==null?null:""+g.content)&&N.getAttribute("name")===(g.name==null?null:g.name)&&N.getAttribute("property")===(g.property==null?null:g.property)&&N.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&N.getAttribute("charset")===(g.charSet==null?null:g.charSet)){rt.splice(_t,1);break e}}N=z.createElement(S),je(N,S,g),z.head.appendChild(N);break;default:throw Error(i(468,S))}N[He]=o,Ki(N),S=N}o.stateNode=S}else J_(z,o.type,o.stateNode);else o.stateNode=K_(z,S,o.memoizedProps);else N!==S?(N===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):N.count--,S===null?J_(z,o.type,o.stateNode):K_(z,S,o.memoizedProps)):S===null&&o.stateNode!==null&&zp(o,o.memoizedProps,g.memoizedProps)}break;case 27:Ns(h,o),js(o),S&512&&(ha||g===null||fl(g,g.return)),g!==null&&S&4&&zp(o,o.memoizedProps,g.memoizedProps);break;case 5:if(Ns(h,o),js(o),S&512&&(ha||g===null||fl(g,g.return)),o.flags&32){z=o.stateNode;try{ds(z,"")}catch(gn){bi(o,o.return,gn)}}S&4&&o.stateNode!=null&&(z=o.memoizedProps,zp(o,z,g!==null?g.memoizedProps:z)),S&1024&&(bg=!0);break;case 6:if(Ns(h,o),js(o),S&4){if(o.stateNode===null)throw Error(i(162));S=o.memoizedProps,g=o.stateNode;try{g.nodeValue=S}catch(gn){bi(o,o.return,gn)}}break;case 3:if(om=null,z=yr,yr=_o(h.containerInfo),Ns(h,o),yr=z,js(o),S&4&&g!==null&&g.memoizedState.isDehydrated)try{lm(h.containerInfo)}catch(gn){bi(o,o.return,gn)}bg&&(bg=!1,nc(o));break;case 4:S=yr,yr=_o(o.stateNode.containerInfo),Ns(h,o),js(o),yr=S;break;case 12:Ns(h,o),js(o);break;case 31:Ns(h,o),js(o),S&4&&(S=o.updateQueue,S!==null&&(o.updateQueue=null,cd(o,S)));break;case 13:Ns(h,o),js(o),o.child.flags&8192&&o.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Vp=cn()),S&4&&(S=o.updateQueue,S!==null&&(o.updateQueue=null,cd(o,S)));break;case 22:z=o.memoizedState!==null;var qt=g!==null&&g.memoizedState!==null,pe=ec,Me=ha;if(ec=pe||z,ha=Me||qt,Ns(h,o),ha=Me,ec=pe,js(o),S&8192)t:for(h=o.stateNode,h._visibility=z?h._visibility&-2:h._visibility|1,z&&(g===null||qt||ec||ha||Fl(o)),g=null,h=o;;){if(h.tag===5||h.tag===26){if(g===null){qt=g=h;try{if(N=qt.stateNode,z)rt=N.style,typeof rt.setProperty=="function"?rt.setProperty("display","none","important"):rt.display="none";else{_t=qt.stateNode;var De=qt.memoizedProps.style,ye=De!=null&&De.hasOwnProperty("display")?De.display:null;_t.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(gn){bi(qt,qt.return,gn)}}}else if(h.tag===6){if(g===null){qt=h;try{qt.stateNode.nodeValue=z?"":qt.memoizedProps}catch(gn){bi(qt,qt.return,gn)}}}else if(h.tag===18){if(g===null){qt=h;try{var xe=qt.stateNode;z?is(xe,!0):is(qt.stateNode,!1)}catch(gn){bi(qt,qt.return,gn)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===o)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break t;for(;h.sibling===null;){if(h.return===null||h.return===o)break t;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=o.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,cd(o,g))));break;case 19:Ns(h,o),js(o),S&4&&(S=o.updateQueue,S!==null&&(o.updateQueue=null,cd(o,S)));break;case 30:break;case 21:break;default:Ns(h,o),js(o)}}function js(o){var h=o.flags;if(h&2){try{for(var g,S=o.return;S!==null;){if(gu(S)){g=S;break}S=S.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var z=g.stateNode,N=kc(o);Ip(o,N,z);break;case 5:var rt=g.stateNode;g.flags&32&&(ds(rt,""),g.flags&=-33);var _t=kc(o);Ip(o,_t,rt);break;case 3:case 4:var qt=g.stateNode.containerInfo,pe=kc(o);Lp(o,pe,qt);break;default:throw Error(i(161))}}catch(Me){bi(o,o.return,Me)}o.flags&=-3}h&4096&&(o.flags&=-4097)}function nc(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var h=o;nc(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),o=o.sibling}}function Zo(o,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)O_(o,h.alternate,h),h=h.sibling}function Fl(o){for(o=o.child;o!==null;){var h=o;switch(h.tag){case 0:case 11:case 14:case 15:tc(4,h,h.return),Fl(h);break;case 1:fl(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&vg(h,h.return,g),Fl(h);break;case 27:_r(h.stateNode);case 26:case 5:fl(h,h.return),Fl(h);break;case 22:h.memoizedState===null&&Fl(h);break;case 30:Fl(h);break;default:Fl(h)}o=o.sibling}}function fo(o,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,z=o,N=h,rt=N.flags;switch(N.tag){case 0:case 11:case 15:fo(z,N,g),gr(4,N);break;case 1:if(fo(z,N,g),S=N,z=S.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(pe){bi(S,S.return,pe)}if(S=N,z=S.updateQueue,z!==null){var _t=S.stateNode;try{var qt=z.shared.hiddenCallbacks;if(qt!==null)for(z.shared.hiddenCallbacks=null,z=0;z<qt.length;z++)hu(qt[z],_t)}catch(pe){bi(S,S.return,pe)}}g&&rt&64&&_g(N),fi(N,N.return);break;case 27:P_(N);case 26:case 5:fo(z,N,g),g&&S===null&&rt&4&&xg(N),fi(N,N.return);break;case 12:fo(z,N,g);break;case 31:fo(z,N,g),g&&rt&4&&D_(z,N);break;case 13:fo(z,N,g),g&&rt&4&&z_(z,N);break;case 22:N.memoizedState===null&&fo(z,N,g),fi(N,N.return);break;case 30:break;default:fo(z,N,g)}h=h.sibling}}function hf(o,h){var g=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),o=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(o=h.memoizedState.cachePool.pool),o!==g&&(o!=null&&o.refCount++,g!=null&&et(g))}function ff(o,h){o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&et(o))}function Ul(o,h,g,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)wg(o,h,g,S),h=h.sibling}function wg(o,h,g,S){var z=h.flags;switch(h.tag){case 0:case 11:case 15:Ul(o,h,g,S),z&2048&&gr(9,h);break;case 1:Ul(o,h,g,S);break;case 3:Ul(o,h,g,S),z&2048&&(o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&et(o)));break;case 12:if(z&2048){Ul(o,h,g,S),o=h.stateNode;try{var N=h.memoizedProps,rt=N.id,_t=N.onPostCommit;typeof _t=="function"&&_t(rt,h.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(qt){bi(h,h.return,qt)}}else Ul(o,h,g,S);break;case 31:Ul(o,h,g,S);break;case 13:Ul(o,h,g,S);break;case 23:break;case 22:N=h.stateNode,rt=h.alternate,h.memoizedState!==null?N._visibility&2?Ul(o,h,g,S):hd(o,h):N._visibility&2?Ul(o,h,g,S):(N._visibility|=2,ch(o,h,g,S,(h.subtreeFlags&10256)!==0||!1)),z&2048&&hf(rt,h);break;case 24:Ul(o,h,g,S),z&2048&&ff(h.alternate,h);break;default:Ul(o,h,g,S)}}function ch(o,h,g,S,z){for(z=z&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var N=o,rt=h,_t=g,qt=S,pe=rt.flags;switch(rt.tag){case 0:case 11:case 15:ch(N,rt,_t,qt,z),gr(8,rt);break;case 23:break;case 22:var Me=rt.stateNode;rt.memoizedState!==null?Me._visibility&2?ch(N,rt,_t,qt,z):hd(N,rt):(Me._visibility|=2,ch(N,rt,_t,qt,z)),z&&pe&2048&&hf(rt.alternate,rt);break;case 24:ch(N,rt,_t,qt,z),z&&pe&2048&&ff(rt.alternate,rt);break;default:ch(N,rt,_t,qt,z)}h=h.sibling}}function hd(o,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=o,S=h,z=S.flags;switch(S.tag){case 22:hd(g,S),z&2048&&hf(S.alternate,S);break;case 24:hd(g,S),z&2048&&ff(S.alternate,S);break;default:hd(g,S)}h=h.sibling}}var df=8192;function hh(o,h,g){if(o.subtreeFlags&df)for(o=o.child;o!==null;)Np(o,h,g),o=o.sibling}function Np(o,h,g){switch(o.tag){case 26:hh(o,h,g),o.flags&df&&o.memoizedState!==null&&yh(g,yr,o.memoizedState,o.memoizedProps);break;case 5:hh(o,h,g);break;case 3:case 4:var S=yr;yr=_o(o.stateNode.containerInfo),hh(o,h,g),yr=S;break;case 22:o.memoizedState===null&&(S=o.alternate,S!==null&&S.memoizedState!==null?(S=df,df=16777216,hh(o,h,g),df=S):hh(o,h,g));break;default:hh(o,h,g)}}function jp(o){var h=o.alternate;if(h!==null&&(o=h.child,o!==null)){h.child=null;do h=o.sibling,o.sibling=null,o=h;while(o!==null)}}function fd(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];Ua=S,pf(S,o)}jp(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)L_(o),o=o.sibling}function L_(o){switch(o.tag){case 0:case 11:case 15:fd(o),o.flags&2048&&tc(9,o,o.return);break;case 3:fd(o);break;case 12:fd(o);break;case 22:var h=o.stateNode;o.memoizedState!==null&&h._visibility&2&&(o.return===null||o.return.tag!==13)?(h._visibility&=-3,dd(o)):fd(o);break;default:fd(o)}}function dd(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];Ua=S,pf(S,o)}jp(o)}for(o=o.child;o!==null;){switch(h=o,h.tag){case 0:case 11:case 15:tc(8,h,h.return),dd(h);break;case 22:g=h.stateNode,g._visibility&2&&(g._visibility&=-3,dd(h));break;default:dd(h)}o=o.sibling}}function pf(o,h){for(;Ua!==null;){var g=Ua;switch(g.tag){case 0:case 11:case 15:tc(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:et(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,Ua=S;else t:for(g=o;Ua!==null;){S=Ua;var z=S.sibling,N=S.return;if(ud(S),S===g){Ua=null;break t}if(z!==null){z.return=N,Ua=z;break t}Ua=N}}}var yu={getCacheForType:function(o){var h=m($),g=h.data.get(o);return g===void 0&&(g=o(),h.data.set(o,g)),g},cacheSignal:function(){return m($).controller.signal}},Oc=typeof WeakMap=="function"?WeakMap:Map,Ci=0,Hi=null,ai=null,li=0,Pi=0,Fs=null,Dc=!1,zc=!1,pd=!1,po=0,zr=0,ic=0,rc=0,Fp=0,xs=0,fh=0,md=null,mo=null,Up=!1,Vp=0,I_=0,$p=1/0,qp=null,_u=null,or=0,ac=null,dh=null,vu=0,Hp=0,Zp=null,Sg=null,ph=0,mf=null;function go(){return(Ci&2)!==0&&li!==0?li&-li:Nt.T!==null?Ad():Te()}function Gp(){if(xs===0)if((li&536870912)===0||Xn){var o=za;za<<=1,(za&3932160)===0&&(za=262144),xs=o}else xs=536870912;return o=_s.current,o!==null&&(o.flags|=32),xs}function Us(o,h,g){(o===Hi&&(Pi===2||Pi===9)||o.cancelPendingCommit!==null)&&(mh(o,0),sc(o,li,xs,!1)),zt(o,g),((Ci&2)===0||o!==Hi)&&(o===Hi&&((Ci&2)===0&&(rc|=g),zr===4&&sc(o,li,xs,!1)),dl(o))}function yo(o,h,g){if((Ci&6)!==0)throw Error(i(327));var S=!g&&(h&127)===0&&(h&o.expiredLanes)===0||lt(o,h),z=S?j_(o,h):Yp(o,h,!0),N=S;do{if(z===0){zc&&!S&&sc(o,h,0,!1);break}else{if(g=o.current.alternate,N&&!R_(g)){z=Yp(o,h,!1),N=!1;continue}if(z===2){if(N=h,o.errorRecoveryDisabledLanes&N)var rt=0;else rt=o.pendingLanes&-536870913,rt=rt!==0?rt:rt&536870912?536870912:0;if(rt!==0){h=rt;t:{var _t=o;z=md;var qt=_t.current.memoizedState.isDehydrated;if(qt&&(mh(_t,rt).flags|=256),rt=Yp(_t,rt,!1),rt!==2){if(pd&&!qt){_t.errorRecoveryDisabledLanes|=N,rc|=N,z=4;break t}N=mo,mo=z,N!==null&&(mo===null?mo=N:mo.push.apply(mo,N))}z=rt}if(N=!1,z!==2)continue}}if(z===1){mh(o,0),sc(o,h,0,!0);break}t:{switch(S=o,N=z,N){case 0:case 1:throw Error(i(345));case 4:if((h&4194048)!==h)break;case 6:sc(S,h,xs,!Dc);break t;case 2:mo=null;break;case 3:case 5:break;default:throw Error(i(329))}if((h&62914560)===h&&(z=Vp+300-cn(),10<z)){if(sc(S,h,xs,!Dc),kt(S,0,!0)!==0)break t;vu=h,S.timeoutHandle=Xi(gf.bind(null,S,g,mo,qp,Up,h,xs,rc,fh,Dc,N,"Throttled",-0,0),z);break t}gf(S,g,mo,qp,Up,h,xs,rc,fh,Dc,N,null,-0,0)}}break}while(!0);dl(o)}function gf(o,h,g,S,z,N,rt,_t,qt,pe,Me,De,ye,xe){if(o.timeoutHandle=-1,De=h.subtreeFlags,De&8192||(De&16785408)===16785408){De={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xa},Np(h,N,De);var gn=(N&62914560)===N?Vp-cn():(N&4194048)===N?I_-cn():0;if(gn=_h(De,gn),gn!==null){vu=N,o.cancelPendingCommit=gn(Eg.bind(null,o,h,N,g,S,z,rt,_t,qt,Me,De,null,ye,xe)),sc(o,N,rt,!pe);return}}Eg(o,h,N,g,S,z,rt,_t,qt)}function R_(o){for(var h=o;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var z=g[S],N=z.getSnapshot;z=z.value;try{if(!Cr(N(),z))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function sc(o,h,g,S){h&=~Fp,h&=~rc,o.suspendedLanes|=h,o.pingedLanes&=~h,S&&(o.warmLanes|=h),S=o.expirationTimes;for(var z=h;0<z;){var N=31-fr(z),rt=1<<N;S[N]=-1,z&=~rt}g!==0&&Zt(o,g,h)}function gd(){return(Ci&6)===0?(yf(0),!1):!0}function Wp(){if(ai!==null){if(Pi===0)var o=ai.return;else o=ai,Ls=Na=null,hp(o),Ln=null,Cn=0,o=ai;for(;o!==null;)cf(o.alternate,o),o=o.return;ai=null}}function mh(o,h){var g=o.timeoutHandle;g!==-1&&(o.timeoutHandle=-1,ta(g)),g=o.cancelPendingCommit,g!==null&&(o.cancelPendingCommit=null,g()),vu=0,Wp(),Hi=o,ai=g=oo(o.current,null),li=h,Pi=0,Fs=null,Dc=!1,zc=lt(o,h),pd=!1,fh=xs=Fp=rc=ic=zr=0,mo=md=null,Up=!1,(h&8)!==0&&(h|=h&32);var S=o.entangledLanes;if(S!==0)for(o=o.entanglements,S&=h;0<S;){var z=31-fr(S),N=1<<z;h|=o[z],S&=~N}return po=h,so(),g}function Tg(o,h){An=null,Nt.H=nd,h===be||h===Ae?(h=on(),Pi=3):h===ze?(h=on(),Pi=4):Pi=h===cg?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Fs=h,ai===null&&(zr=1,Sp(o,w(h,o.current)))}function B_(){var o=_s.current;return o===null?!0:(li&4194048)===li?Is===null:(li&62914560)===li||(li&536870912)!==0?o===Is:!1}function Mg(){var o=Nt.H;return Nt.H=nd,o===null?nd:o}function oc(){var o=Nt.A;return Nt.A=yu,o}function yd(){zr=4,Dc||(li&4194048)!==li&&_s.current!==null||(zc=!0),(ic&134217727)===0&&(rc&134217727)===0||Hi===null||sc(Hi,li,xs,!1)}function Yp(o,h,g){var S=Ci;Ci|=2;var z=Mg(),N=oc();(Hi!==o||li!==h)&&(qp=null,mh(o,h)),h=!1;var rt=zr;t:do try{if(Pi!==0&&ai!==null){var _t=ai,qt=Fs;switch(Pi){case 8:Wp(),rt=6;break t;case 3:case 2:case 9:case 6:_s.current===null&&(h=!0);var pe=Pi;if(Pi=0,Fs=null,Vl(o,_t,qt,pe),g&&zc){rt=0;break t}break;default:pe=Pi,Pi=0,Fs=null,Vl(o,_t,qt,pe)}}N_(),rt=zr;break}catch(Me){Tg(o,Me)}while(!0);return h&&o.shellSuspendCounter++,Ls=Na=null,Ci=S,Nt.H=z,Nt.A=N,ai===null&&(Hi=null,li=0,so()),rt}function N_(){for(;ai!==null;)F_(ai)}function j_(o,h){var g=Ci;Ci|=2;var S=Mg(),z=oc();Hi!==o||li!==h?(qp=null,$p=cn()+500,mh(o,h)):zc=lt(o,h);t:do try{if(Pi!==0&&ai!==null){h=ai;var N=Fs;e:switch(Pi){case 1:Pi=0,Fs=null,Vl(o,h,N,1);break;case 2:case 9:if(sn(N)){Pi=0,Fs=null,Ag(h);break}h=function(){Pi!==2&&Pi!==9||Hi!==o||(Pi=7),dl(o)},N.then(h,h);break t;case 3:Pi=7;break t;case 4:Pi=5;break t;case 7:sn(N)?(Pi=0,Fs=null,Ag(h)):(Pi=0,Fs=null,Vl(o,h,N,7));break;case 5:var rt=null;switch(ai.tag){case 26:rt=ai.memoizedState;case 5:case 27:var _t=ai;if(rt?xo(rt):_t.stateNode.complete){Pi=0,Fs=null;var qt=_t.sibling;if(qt!==null)ai=qt;else{var pe=_t.return;pe!==null?(ai=pe,_d(pe)):ai=null}break e}}Pi=0,Fs=null,Vl(o,h,N,5);break;case 6:Pi=0,Fs=null,Vl(o,h,N,6);break;case 8:Wp(),zr=6;break t;default:throw Error(i(462))}}Gx();break}catch(Me){Tg(o,Me)}while(!0);return Ls=Na=null,Nt.H=S,Nt.A=z,Ci=g,ai!==null?0:(Hi=null,li=0,so(),zr)}function Gx(){for(;ai!==null&&!Li();)F_(ai)}function F_(o){var h=od(o.alternate,o,po);o.memoizedProps=o.pendingProps,h===null?_d(o):ai=h}function Ag(o){var h=o,g=h.alternate;switch(h.tag){case 15:case 0:h=M_(g,h,h.pendingProps,h.type,void 0,li);break;case 11:h=M_(g,h,h.pendingProps,h.type.render,h.ref,li);break;case 5:hp(h);default:cf(g,h),h=ai=Yu(h,po),h=od(g,h,po)}o.memoizedProps=o.pendingProps,h===null?_d(o):ai=h}function Vl(o,h,g,S){Ls=Na=null,hp(h),Ln=null,Cn=0;var z=h.return;try{if(Fx(o,z,h,g,li)){zr=1,Sp(o,w(g,o.current)),ai=null;return}}catch(N){if(z!==null)throw ai=z,N;zr=1,Sp(o,w(g,o.current)),ai=null;return}h.flags&32768?(Xn||S===1?o=!0:zc||(li&536870912)!==0?o=!1:(Dc=o=!0,(S===2||S===9||S===3||S===6)&&(S=_s.current,S!==null&&S.tag===13&&(S.flags|=16384))),vd(h,o)):_d(h)}function _d(o){var h=o;do{if((h.flags&32768)!==0){vd(h,Dc);return}o=h.return;var g=$x(h.alternate,h,po);if(g!==null){ai=g;return}if(h=h.sibling,h!==null){ai=h;return}ai=h=o}while(h!==null);zr===0&&(zr=5)}function vd(o,h){do{var g=qx(o.alternate,o);if(g!==null){g.flags&=32767,ai=g;return}if(g=o.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(o=o.sibling,o!==null)){ai=o;return}ai=o=g}while(o!==null);zr=6,ai=null}function Eg(o,h,g,S,z,N,rt,_t,qt){o.cancelPendingCommit=null;do Xp();while(or!==0);if((Ci&6)!==0)throw Error(i(327));if(h!==null){if(h===o.current)throw Error(i(177));if(N=h.lanes|h.childLanes,N|=zs,te(o,g,N,rt,_t,qt),o===Hi&&(ai=Hi=null,li=0),dh=h,ac=o,vu=g,Hp=N,Zp=z,Sg=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Cg(jr,function(){return V_(),null})):(o.callbackNode=null,o.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=Nt.T,Nt.T=null,z=Pt.p,Pt.p=2,rt=Ci,Ci|=4;try{Hx(o,h,g)}finally{Ci=rt,Pt.p=z,Nt.T=S}}or=1,xd(),bd(),wd()}}function xd(){if(or===1){or=0;var o=ac,h=dh,g=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||g){g=Nt.T,Nt.T=null;var S=Pt.p;Pt.p=2;var z=Ci;Ci|=4;try{Bp(h,o);var N=en,rt=su(o.containerInfo),_t=N.focusedElem,qt=N.selectionRange;if(rt!==_t&&_t&&_t.ownerDocument&&qu(_t.ownerDocument.documentElement,_t)){if(qt!==null&&Do(_t)){var pe=qt.start,Me=qt.end;if(Me===void 0&&(Me=pe),"selectionStart"in _t)_t.selectionStart=pe,_t.selectionEnd=Math.min(Me,_t.value.length);else{var De=_t.ownerDocument||document,ye=De&&De.defaultView||window;if(ye.getSelection){var xe=ye.getSelection(),gn=_t.textContent.length,kn=Math.min(qt.start,gn),cr=qt.end===void 0?kn:Math.min(qt.end,gn);!xe.extend&&kn>cr&&(rt=cr,cr=kn,kn=rt);var se=io(_t,kn),Qt=io(_t,cr);if(se&&Qt&&(xe.rangeCount!==1||xe.anchorNode!==se.node||xe.anchorOffset!==se.offset||xe.focusNode!==Qt.node||xe.focusOffset!==Qt.offset)){var he=De.createRange();he.setStart(se.node,se.offset),xe.removeAllRanges(),kn>cr?(xe.addRange(he),xe.extend(Qt.node,Qt.offset)):(he.setEnd(Qt.node,Qt.offset),xe.addRange(he))}}}}for(De=[],xe=_t;xe=xe.parentNode;)xe.nodeType===1&&De.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof _t.focus=="function"&&_t.focus(),_t=0;_t<De.length;_t++){var ke=De[_t];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}nv=!!Ue,en=Ue=null}finally{Ci=z,Pt.p=S,Nt.T=g}}o.current=h,or=2}}function bd(){if(or===2){or=0;var o=ac,h=dh,g=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||g){g=Nt.T,Nt.T=null;var S=Pt.p;Pt.p=2;var z=Ci;Ci|=4;try{O_(o,h.alternate,h)}finally{Ci=z,Pt.p=S,Nt.T=g}}or=3}}function wd(){if(or===4||or===3){or=0,Yn();var o=ac,h=dh,g=vu,S=Sg;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?or=5:(or=0,dh=ac=null,U_(o,o.pendingLanes));var z=o.pendingLanes;if(z===0&&(_u=null),ie(g),h=h.stateNode,Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(hr,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=Nt.T,z=Pt.p,Pt.p=2,Nt.T=null;try{for(var N=o.onRecoverableError,rt=0;rt<S.length;rt++){var _t=S[rt];N(_t.value,{componentStack:_t.stack})}}finally{Nt.T=h,Pt.p=z}}(vu&3)!==0&&Xp(),dl(o),z=o.pendingLanes,(g&261930)!==0&&(z&42)!==0?o===mf?ph++:(ph=0,mf=o):ph=0,yf(0)}}function U_(o,h){(o.pooledCacheLanes&=h)===0&&(h=o.pooledCache,h!=null&&(o.pooledCache=null,et(h)))}function Xp(){return xd(),bd(),wd(),V_()}function V_(){if(or!==5)return!1;var o=ac,h=Hp;Hp=0;var g=ie(vu),S=Nt.T,z=Pt.p;try{Pt.p=32>g?32:g,Nt.T=null,g=Zp,Zp=null;var N=ac,rt=vu;if(or=0,dh=ac=null,vu=0,(Ci&6)!==0)throw Error(i(331));var _t=Ci;if(Ci|=4,L_(N.current),wg(N,N.current,rt,g),Ci=_t,yf(0,!1),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(hr,N)}catch{}return!0}finally{Pt.p=z,Nt.T=S,U_(o,h)}}function $_(o,h,g){h=w(g,h),h=lg(o.stateNode,h,2),o=ns(o,h,2),o!==null&&(zt(o,2),dl(o))}function bi(o,h,g){if(o.tag===3)$_(o,o,g);else for(;h!==null;){if(h.tag===3){$_(h,o,g);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(_u===null||!_u.has(S))){o=w(g,o),g=ug(2),S=ns(h,g,2),S!==null&&(uh(g,S,h,o),zt(S,2),dl(S));break}}h=h.return}}function fa(o,h,g){var S=o.pingCache;if(S===null){S=o.pingCache=new Oc;var z=new Set;S.set(h,z)}else z=S.get(h),z===void 0&&(z=new Set,S.set(h,z));z.has(g)||(pd=!0,z.add(g),o=Lc.bind(null,o,h,g),h.then(o,o))}function Lc(o,h,g){var S=o.pingCache;S!==null&&S.delete(h),o.pingedLanes|=o.suspendedLanes&g,o.warmLanes&=~g,Hi===o&&(li&g)===g&&(zr===4||zr===3&&(li&62914560)===li&&300>cn()-Vp?(Ci&2)===0&&mh(o,0):Fp|=g,fh===li&&(fh=0)),dl(o)}function Kp(o,h){h===0&&(h=bt()),o=gs(o,h),o!==null&&(zt(o,h),dl(o))}function q_(o){var h=o.memoizedState,g=0;h!==null&&(g=h.retryLane),Kp(o,g)}function H_(o,h){var g=0;switch(o.tag){case 31:case 13:var S=o.stateNode,z=o.memoizedState;z!==null&&(g=z.retryLane);break;case 19:S=o.stateNode;break;case 22:S=o.stateNode._retryCache;break;default:throw Error(i(314))}S!==null&&S.delete(h),Kp(o,g)}function Cg(o,h){return me(o,h)}var Qp=null,gh=null,Jp=!1,tm=!1,em=!1,xu=0;function dl(o){o!==gh&&o.next===null&&(gh===null?Qp=gh=o:gh=gh.next=o),tm=!0,Jp||(Jp=!0,Md())}function yf(o,h){if(!em&&tm){em=!0;do for(var g=!1,S=Qp;S!==null;){if(o!==0){var z=S.pendingLanes;if(z===0)var N=0;else{var rt=S.suspendedLanes,_t=S.pingedLanes;N=(1<<31-fr(42|o)+1)-1,N&=z&~(rt&~_t),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(g=!0,Td(S,N))}else N=li,N=kt(S,S===Hi?N:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(N&3)===0||lt(S,N)||(g=!0,Td(S,N));S=S.next}while(g);em=!1}}function Sd(){nm()}function nm(){tm=Jp=!1;var o=0;xu!==0&&Yi()&&(o=xu);for(var h=cn(),g=null,S=Qp;S!==null;){var z=S.next,N=Pg(S,h);N===0?(S.next=null,g===null?Qp=z:g.next=z,z===null&&(gh=g)):(g=S,(o!==0||(N&3)!==0)&&(tm=!0)),S=z}or!==0&&or!==5||yf(o),xu!==0&&(xu=0)}function Pg(o,h){for(var g=o.suspendedLanes,S=o.pingedLanes,z=o.expirationTimes,N=o.pendingLanes&-62914561;0<N;){var rt=31-fr(N),_t=1<<rt,qt=z[rt];qt===-1?((_t&g)===0||(_t&S)!==0)&&(z[rt]=dt(_t,h)):qt<=h&&(o.expiredLanes|=_t),N&=~_t}if(h=Hi,g=li,g=kt(o,o===h?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),S=o.callbackNode,g===0||o===h&&(Pi===2||Pi===9)||o.cancelPendingCommit!==null)return S!==null&&S!==null&&ki(S),o.callbackNode=null,o.callbackPriority=0;if((g&3)===0||lt(o,g)){if(h=g&-g,h===o.callbackPriority)return h;switch(S!==null&&ki(S),ie(g)){case 2:case 8:g=Ii;break;case 32:g=jr;break;case 268435456:g=Wa;break;default:g=jr}return S=im.bind(null,o),g=me(g,S),o.callbackPriority=h,o.callbackNode=g,h}return S!==null&&S!==null&&ki(S),o.callbackPriority=2,o.callbackNode=null,2}function im(o,h){if(or!==0&&or!==5)return o.callbackNode=null,o.callbackPriority=0,null;var g=o.callbackNode;if(Xp()&&o.callbackNode!==g)return null;var S=li;return S=kt(o,o===Hi?S:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),S===0?null:(yo(o,S,h),Pg(o,cn()),o.callbackNode!=null&&o.callbackNode===g?im.bind(null,o):null)}function Td(o,h){if(Xp())return null;yo(o,h,!0)}function Md(){bs(function(){(Ci&6)!==0?me(si,Sd):nm()})}function Ad(){if(xu===0){var o=At;o===0&&(o=Mr,Mr<<=1,(Mr&261888)===0&&(Mr=256)),xu=o}return xu}function rm(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:eu(""+o)}function am(o,h){var g=h.ownerDocument.createElement("input");return g.name=h.name,g.value=h.value,o.id&&g.setAttribute("form",o.id),h.parentNode.insertBefore(g,h),o=new FormData(o),g.parentNode.removeChild(g),o}function Wx(o,h,g,S,z){if(h==="submit"&&g&&g.stateNode===z){var N=rm((z[tn]||null).action),rt=S.submitter;rt&&(h=(h=rt[tn]||null)?rm(h.formAction):rt.getAttribute("formAction"),h!==null&&(N=h,rt=null));var _t=new Cl("action","action",null,S,z);o.push({event:_t,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(xu!==0){var qt=rt?am(z,rt):new FormData(z);af(g,{pending:!0,data:qt,method:z.method,action:N},null,qt)}}else typeof N=="function"&&(_t.preventDefault(),qt=rt?am(z,rt):new FormData(z),af(g,{pending:!0,data:qt,method:z.method,action:N},N,qt))},currentTarget:z}]})}}for(var c=0;c<Ds.length;c++){var s=Ds[c],d=s.toLowerCase(),v=s[0].toUpperCase()+s.slice(1);Yr(d,"on"+v)}Yr(aa,"onAnimationEnd"),Yr(ro,"onAnimationIteration"),Yr(ol,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(Bo,"onTransitionRun"),Yr(ao,"onTransitionStart"),Yr(Yf,"onTransitionCancel"),Yr(ll,"onTransitionEnd"),Ys("onMouseEnter",["mouseout","mouseover"]),Ys("onMouseLeave",["mouseout","mouseover"]),Ys("onPointerEnter",["pointerout","pointerover"]),Ys("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var T="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(T));function k(o,h){h=(h&4)!==0;for(var g=0;g<o.length;g++){var S=o[g],z=S.event;S=S.listeners;t:{var N=void 0;if(h)for(var rt=S.length-1;0<=rt;rt--){var _t=S[rt],qt=_t.instance,pe=_t.currentTarget;if(_t=_t.listener,qt!==N&&z.isPropagationStopped())break t;N=_t,z.currentTarget=pe;try{N(z)}catch(Me){es(Me)}z.currentTarget=null,N=qt}else for(rt=0;rt<S.length;rt++){if(_t=S[rt],qt=_t.instance,pe=_t.currentTarget,_t=_t.listener,qt!==N&&z.isPropagationStopped())break t;N=_t,z.currentTarget=pe;try{N(z)}catch(Me){es(Me)}z.currentTarget=null,N=qt}}}}function R(o,h){var g=h[Vn];g===void 0&&(g=h[Vn]=new Set);var S=o+"__bubble";g.has(S)||(st(h,o,2,!1),g.add(S))}function U(o,h,g){var S=0;h&&(S|=4),st(g,o,S,h)}var Z="_reactListening"+Math.random().toString(36).slice(2);function J(o){if(!o[Z]){o[Z]=!0,Sl.forEach(function(g){g!=="selectionchange"&&(P.has(g)||U(g,!1,o),U(g,!0,o))});var h=o.nodeType===9?o:o.ownerDocument;h===null||h[Z]||(h[Z]=!0,U("selectionchange",!1,h))}}function st(o,h,g,S){switch(mT(h)){case 2:var z=qR;break;case 8:z=HR;break;default:z=Kx}g=z.bind(null,h,g,o),z=void 0,!nl||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(z=!0),S?z!==void 0?o.addEventListener(h,g,{capture:!0,passive:z}):o.addEventListener(h,g,!0):z!==void 0?o.addEventListener(h,g,{passive:z}):o.addEventListener(h,g,!1)}function ut(o,h,g,S,z){var N=S;if((h&1)===0&&(h&2)===0&&S!==null)t:for(;;){if(S===null)return;var rt=S.tag;if(rt===3||rt===4){var _t=S.stateNode.containerInfo;if(_t===z)break;if(rt===4)for(rt=S.return;rt!==null;){var qt=rt.tag;if((qt===3||qt===4)&&rt.stateNode.containerInfo===z)return;rt=rt.return}for(;_t!==null;){if(rt=Ri(_t),rt===null)return;if(qt=rt.tag,qt===5||qt===6||qt===26||qt===27){S=N=rt;continue t}_t=_t.parentNode}}S=S.return}Po(function(){var pe=N,Me=el(g),De=[];t:{var ye=th.get(o);if(ye!==void 0){var xe=Cl,gn=o;switch(o){case"keypress":if(Bn(g)===0)break t;case"keydown":case"keyup":xe=xc;break;case"focusin":gn="focus",xe=Gc;break;case"focusout":gn="blur",xe=Gc;break;case"beforeblur":case"afterblur":xe=Gc;break;case"click":if(g.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=Lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=nu;break;case aa:case ro:case ol:xe=Wc;break;case ll:xe=bc;break;case"scroll":case"scrollend":xe=Jn;break;case"wheel":xe=yi;break;case"copy":case"cut":case"paste":xe=Js;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=Xc;break;case"toggle":case"beforetoggle":xe=Nn}var kn=(h&4)!==0,cr=!kn&&(o==="scroll"||o==="scrollend"),se=kn?ye!==null?ye+"Capture":null:ye;kn=[];for(var Qt=pe,he;Qt!==null;){var ke=Qt;if(he=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||he===null||se===null||(ke=Ks(Qt,se),ke!=null&&kn.push(gt(Qt,ke,he))),cr)break;Qt=Qt.return}0<kn.length&&(ye=new xe(ye,gn,null,g,Me),De.push({event:ye,listeners:kn}))}}if((h&7)===0){t:{if(ye=o==="mouseover"||o==="pointerover",xe=o==="mouseout"||o==="pointerout",ye&&g!==Du&&(gn=g.relatedTarget||g.fromElement)&&(Ri(gn)||gn[_n]))break t;if((xe||ye)&&(ye=Me.window===Me?Me:(ye=Me.ownerDocument)?ye.defaultView||ye.parentWindow:window,xe?(gn=g.relatedTarget||g.toElement,xe=pe,gn=gn?Ri(gn):null,gn!==null&&(cr=u(gn),kn=gn.tag,gn!==cr||kn!==5&&kn!==27&&kn!==6)&&(gn=null)):(xe=null,gn=pe),xe!==gn)){if(kn=Lu,ke="onMouseLeave",se="onMouseEnter",Qt="mouse",(o==="pointerout"||o==="pointerover")&&(kn=Xc,ke="onPointerLeave",se="onPointerEnter",Qt="pointer"),cr=xe==null?ye:Ar(xe),he=gn==null?ye:Ar(gn),ye=new kn(ke,Qt+"leave",xe,g,Me),ye.target=cr,ye.relatedTarget=he,ke=null,Ri(Me)===pe&&(kn=new kn(se,Qt+"enter",gn,g,Me),kn.target=he,kn.relatedTarget=cr,ke=kn),cr=ke,xe&&gn)e:{for(kn=Et,se=xe,Qt=gn,he=0,ke=se;ke;ke=kn(ke))he++;ke=0;for(var Sn=Qt;Sn;Sn=kn(Sn))ke++;for(;0<he-ke;)se=kn(se),he--;for(;0<ke-he;)Qt=kn(Qt),ke--;for(;he--;){if(se===Qt||Qt!==null&&se===Qt.alternate){kn=se;break e}se=kn(se),Qt=kn(Qt)}kn=null}else kn=null;xe!==null&&It(De,ye,xe,kn,!1),gn!==null&&cr!==null&&It(De,cr,gn,kn,!0)}}t:{if(ye=pe?Ar(pe):window,xe=ye.nodeName&&ye.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ye.type==="file")var Ni=Dl;else if(Ba(ye))if(Qc)Ni=au;else{Ni=Ll;var vn=ui}else xe=ye.nodeName,!xe||xe.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?pe&&Al(pe.elementType)&&(Ni=Dl):Ni=Er;if(Ni&&(Ni=Ni(o,pe))){Qh(De,Ni,g,Me);break t}vn&&vn(o,ye,pe),o==="focusout"&&pe&&ye.type==="number"&&pe.memoizedProps.value!=null&&As(ye,"number",ye.value)}switch(vn=pe?Ar(pe):window,o){case"focusin":(Ba(vn)||vn.contentEditable==="true")&&(zo=vn,ts=pe,Lo=null);break;case"focusout":Lo=ts=zo=null;break;case"mousedown":Vr=!0;break;case"contextmenu":case"mouseup":case"dragend":Vr=!1,ou(De,g,Me);break;case"selectionchange":if(Hu)break;case"keydown":case"keyup":ou(De,g,Me)}var ii;if(Di)t:{switch(o){case"compositionstart":var wi="onCompositionStart";break t;case"compositionend":wi="onCompositionEnd";break t;case"compositionupdate":wi="onCompositionUpdate";break t}wi=void 0}else Oo?ju(o,g)&&(wi="onCompositionEnd"):o==="keydown"&&g.keyCode===229&&(wi="onCompositionStart");wi&&(Bu&&g.locale!=="ko"&&(Oo||wi!=="onCompositionStart"?wi==="onCompositionEnd"&&Oo&&(ii=Ta()):(Ia=Me,Qs="value"in Ia?Ia.value:Ia.textContent,Oo=!0)),vn=yt(pe,wi),0<vn.length&&(wi=new Iu(wi,o,null,g,Me),De.push({event:wi,listeners:vn}),ii?wi.data=ii:(ii=Fu(g),ii!==null&&(wi.data=ii)))),(ii=Ru?Qa(o,g):eo(o,g))&&(wi=yt(pe,"onBeforeInput"),0<wi.length&&(vn=new Iu("onBeforeInput","beforeinput",null,g,Me),De.push({event:vn,listeners:wi}),vn.data=ii)),Wx(De,o,pe,g,Me)}k(De,h)})}function gt(o,h,g){return{instance:o,listener:h,currentTarget:g}}function yt(o,h){for(var g=h+"Capture",S=[];o!==null;){var z=o,N=z.stateNode;if(z=z.tag,z!==5&&z!==26&&z!==27||N===null||(z=Ks(o,g),z!=null&&S.unshift(gt(o,z,N)),z=Ks(o,h),z!=null&&S.push(gt(o,z,N))),o.tag===3)return S;o=o.return}return[]}function Et(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function It(o,h,g,S,z){for(var N=h._reactName,rt=[];g!==null&&g!==S;){var _t=g,qt=_t.alternate,pe=_t.stateNode;if(_t=_t.tag,qt!==null&&qt===S)break;_t!==5&&_t!==26&&_t!==27||pe===null||(qt=pe,z?(pe=Ks(g,N),pe!=null&&rt.unshift(gt(g,pe,qt))):z||(pe=Ks(g,N),pe!=null&&rt.push(gt(g,pe,qt)))),g=g.return}rt.length!==0&&o.push({event:h,listeners:rt})}var Vt=/\r\n?/g,Jt=/\u0000|\uFFFD/g;function Ht(o){return(typeof o=="string"?o:""+o).replace(Vt,`
`).replace(Jt,"")}function ee(o,h){return h=Ht(h),Ht(o)===h}function ne(o,h,g,S,z,N){switch(g){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||ds(o,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&ds(o,""+S);break;case"className":Rn(o,"class",S);break;case"tabIndex":Rn(o,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(o,g,S);break;case"style":pc(o,S,N);break;case"data":if(h!=="object"){Rn(o,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||g!=="href")){o.removeAttribute(g);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){o.removeAttribute(g);break}S=eu(""+S),o.setAttribute(g,S);break;case"action":case"formAction":if(typeof S=="function"){o.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(g==="formAction"?(h!=="input"&&ne(o,h,"name",z.name,z,null),ne(o,h,"formEncType",z.formEncType,z,null),ne(o,h,"formMethod",z.formMethod,z,null),ne(o,h,"formTarget",z.formTarget,z,null)):(ne(o,h,"encType",z.encType,z,null),ne(o,h,"method",z.method,z,null),ne(o,h,"target",z.target,z,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){o.removeAttribute(g);break}S=eu(""+S),o.setAttribute(g,S);break;case"onClick":S!=null&&(o.onclick=Xa);break;case"onScroll":S!=null&&R("scroll",o);break;case"onScrollEnd":S!=null&&R("scrollend",o);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(i(61));if(g=S.__html,g!=null){if(z.children!=null)throw Error(i(60));o.innerHTML=g}}break;case"multiple":o.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":o.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){o.removeAttribute("xlink:href");break}g=eu(""+S),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?o.setAttribute(g,""+S):o.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?o.setAttribute(g,""):o.removeAttribute(g);break;case"capture":case"download":S===!0?o.setAttribute(g,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?o.setAttribute(g,S):o.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?o.setAttribute(g,S):o.removeAttribute(g);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?o.removeAttribute(g):o.setAttribute(g,S);break;case"popover":R("beforetoggle",o),R("toggle",o),Pn(o,"popover",S);break;case"xlinkActuate":wa(o,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":wa(o,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":wa(o,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":wa(o,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":wa(o,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":wa(o,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":wa(o,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":wa(o,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":wa(o,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Pn(o,"is",S);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=tu.get(g)||g,Pn(o,g,S))}}function Se(o,h,g,S,z,N){switch(g){case"style":pc(o,S,N);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(i(61));if(g=S.__html,g!=null){if(z.children!=null)throw Error(i(60));o.innerHTML=g}}break;case"children":typeof S=="string"?ds(o,S):(typeof S=="number"||typeof S=="bigint")&&ds(o,""+S);break;case"onScroll":S!=null&&R("scroll",o);break;case"onScrollEnd":S!=null&&R("scrollend",o);break;case"onClick":S!=null&&(o.onclick=Xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xh.hasOwnProperty(g))t:{if(g[0]==="o"&&g[1]==="n"&&(z=g.endsWith("Capture"),h=g.slice(2,z?g.length-7:void 0),N=o[tn]||null,N=N!=null?N[g]:null,typeof N=="function"&&o.removeEventListener(h,N,z),typeof S=="function")){typeof N!="function"&&N!==null&&(g in o?o[g]=null:o.hasAttribute(g)&&o.removeAttribute(g)),o.addEventListener(h,S,z);break t}g in o?o[g]=S:S===!0?o.setAttribute(g,""):Pn(o,g,S)}}}function je(o,h,g){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":R("error",o),R("load",o);var S=!1,z=!1,N;for(N in g)if(g.hasOwnProperty(N)){var rt=g[N];if(rt!=null)switch(N){case"src":S=!0;break;case"srcSet":z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:ne(o,h,N,rt,g,null)}}z&&ne(o,h,"srcSet",g.srcSet,g,null),S&&ne(o,h,"src",g.src,g,null);return;case"input":R("invalid",o);var _t=N=rt=z=null,qt=null,pe=null;for(S in g)if(g.hasOwnProperty(S)){var Me=g[S];if(Me!=null)switch(S){case"name":z=Me;break;case"type":rt=Me;break;case"checked":qt=Me;break;case"defaultChecked":pe=Me;break;case"value":N=Me;break;case"defaultValue":_t=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(i(137,h));break;default:ne(o,h,S,Me,g,null)}}Jl(o,N,_t,qt,pe,rt,z,!1);return;case"select":R("invalid",o),S=rt=N=null;for(z in g)if(g.hasOwnProperty(z)&&(_t=g[z],_t!=null))switch(z){case"value":N=_t;break;case"defaultValue":rt=_t;break;case"multiple":S=_t;default:ne(o,h,z,_t,g,null)}h=N,g=rt,o.multiple=!!S,h!=null?Ai(o,!!S,h,!1):g!=null&&Ai(o,!!S,g,!0);return;case"textarea":R("invalid",o),N=z=S=null;for(rt in g)if(g.hasOwnProperty(rt)&&(_t=g[rt],_t!=null))switch(rt){case"value":S=_t;break;case"defaultValue":z=_t;break;case"children":N=_t;break;case"dangerouslySetInnerHTML":if(_t!=null)throw Error(i(91));break;default:ne(o,h,rt,_t,g,null)}Ya(o,S,z,N);return;case"option":for(qt in g)if(g.hasOwnProperty(qt)&&(S=g[qt],S!=null))switch(qt){case"selected":o.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:ne(o,h,qt,S,g,null)}return;case"dialog":R("beforetoggle",o),R("toggle",o),R("cancel",o),R("close",o);break;case"iframe":case"object":R("load",o);break;case"video":case"audio":for(S=0;S<T.length;S++)R(T[S],o);break;case"image":R("error",o),R("load",o);break;case"details":R("toggle",o);break;case"embed":case"source":case"link":R("error",o),R("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in g)if(g.hasOwnProperty(pe)&&(S=g[pe],S!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:ne(o,h,pe,S,g,null)}return;default:if(Al(h)){for(Me in g)g.hasOwnProperty(Me)&&(S=g[Me],S!==void 0&&Se(o,h,Me,S,g,void 0));return}}for(_t in g)g.hasOwnProperty(_t)&&(S=g[_t],S!=null&&ne(o,h,_t,S,g,null))}function ln(o,h,g,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var z=null,N=null,rt=null,_t=null,qt=null,pe=null,Me=null;for(xe in g){var De=g[xe];if(g.hasOwnProperty(xe)&&De!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":qt=De;default:S.hasOwnProperty(xe)||ne(o,h,xe,null,S,De)}}for(var ye in S){var xe=S[ye];if(De=g[ye],S.hasOwnProperty(ye)&&(xe!=null||De!=null))switch(ye){case"type":N=xe;break;case"name":z=xe;break;case"checked":pe=xe;break;case"defaultChecked":Me=xe;break;case"value":rt=xe;break;case"defaultValue":_t=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,h));break;default:xe!==De&&ne(o,h,ye,xe,S,De)}}Xs(o,rt,_t,qt,pe,Me,N,z);return;case"select":xe=rt=_t=ye=null;for(N in g)if(qt=g[N],g.hasOwnProperty(N)&&qt!=null)switch(N){case"value":break;case"multiple":xe=qt;default:S.hasOwnProperty(N)||ne(o,h,N,null,S,qt)}for(z in S)if(N=S[z],qt=g[z],S.hasOwnProperty(z)&&(N!=null||qt!=null))switch(z){case"value":ye=N;break;case"defaultValue":_t=N;break;case"multiple":rt=N;default:N!==qt&&ne(o,h,z,N,S,qt)}h=_t,g=rt,S=xe,ye!=null?Ai(o,!!g,ye,!1):!!S!=!!g&&(h!=null?Ai(o,!!g,h,!0):Ai(o,!!g,g?[]:"",!1));return;case"textarea":xe=ye=null;for(_t in g)if(z=g[_t],g.hasOwnProperty(_t)&&z!=null&&!S.hasOwnProperty(_t))switch(_t){case"value":break;case"children":break;default:ne(o,h,_t,null,S,z)}for(rt in S)if(z=S[rt],N=g[rt],S.hasOwnProperty(rt)&&(z!=null||N!=null))switch(rt){case"value":ye=z;break;case"defaultValue":xe=z;break;case"children":break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(91));break;default:z!==N&&ne(o,h,rt,z,S,N)}Es(o,ye,xe);return;case"option":for(var gn in g)if(ye=g[gn],g.hasOwnProperty(gn)&&ye!=null&&!S.hasOwnProperty(gn))switch(gn){case"selected":o.selected=!1;break;default:ne(o,h,gn,null,S,ye)}for(qt in S)if(ye=S[qt],xe=g[qt],S.hasOwnProperty(qt)&&ye!==xe&&(ye!=null||xe!=null))switch(qt){case"selected":o.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:ne(o,h,qt,ye,S,xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kn in g)ye=g[kn],g.hasOwnProperty(kn)&&ye!=null&&!S.hasOwnProperty(kn)&&ne(o,h,kn,null,S,ye);for(pe in S)if(ye=S[pe],xe=g[pe],S.hasOwnProperty(pe)&&ye!==xe&&(ye!=null||xe!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(i(137,h));break;default:ne(o,h,pe,ye,S,xe)}return;default:if(Al(h)){for(var cr in g)ye=g[cr],g.hasOwnProperty(cr)&&ye!==void 0&&!S.hasOwnProperty(cr)&&Se(o,h,cr,void 0,S,ye);for(Me in S)ye=S[Me],xe=g[Me],!S.hasOwnProperty(Me)||ye===xe||ye===void 0&&xe===void 0||Se(o,h,Me,ye,S,xe);return}}for(var se in g)ye=g[se],g.hasOwnProperty(se)&&ye!=null&&!S.hasOwnProperty(se)&&ne(o,h,se,null,S,ye);for(De in S)ye=S[De],xe=g[De],!S.hasOwnProperty(De)||ye===xe||ye==null&&xe==null||ne(o,h,De,ye,S,xe)}function Xe(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function We(){if(typeof performance.getEntriesByType=="function"){for(var o=0,h=0,g=performance.getEntriesByType("resource"),S=0;S<g.length;S++){var z=g[S],N=z.transferSize,rt=z.initiatorType,_t=z.duration;if(N&&_t&&Xe(rt)){for(rt=0,_t=z.responseEnd,S+=1;S<g.length;S++){var qt=g[S],pe=qt.startTime;if(pe>_t)break;var Me=qt.transferSize,De=qt.initiatorType;Me&&Xe(De)&&(qt=qt.responseEnd,rt+=Me*(qt<_t?1:(_t-pe)/(qt-pe)))}if(--S,h+=8*(N+rt)/(z.duration/1e3),o++,10<o)break}}if(0<o)return h/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Ue=null,en=null;function $e(o){return o.nodeType===9?o:o.ownerDocument}function Re(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pn(o,h){if(o===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&h==="foreignObject"?0:o}function un(o,h){return o==="textarea"||o==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var jn=null;function Yi(){var o=window.event;return o&&o.type==="popstate"?o===jn?!1:(jn=o,!0):(jn=null,!1)}var Xi=typeof setTimeout=="function"?setTimeout:void 0,ta=typeof clearTimeout=="function"?clearTimeout:void 0,Vs=typeof Promise=="function"?Promise:void 0,bs=typeof queueMicrotask=="function"?queueMicrotask:typeof Vs<"u"?function(o){return Vs.resolve(null).then(o).catch(qr)}:Xi;function qr(o){setTimeout(function(){throw o})}function lr(o){return o==="head"}function Ca(o,h){var g=h,S=0;do{var z=g.nextSibling;if(o.removeChild(g),z&&z.nodeType===8)if(g=z.data,g==="/$"||g==="/&"){if(S===0){o.removeChild(z),lm(h);return}S--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")S++;else if(g==="html")_r(o.ownerDocument.documentElement);else if(g==="head"){g=o.ownerDocument.head,_r(g);for(var N=g.firstChild;N;){var rt=N.nextSibling,_t=N.nodeName;N[xr]||_t==="SCRIPT"||_t==="STYLE"||_t==="LINK"&&N.rel.toLowerCase()==="stylesheet"||g.removeChild(N),N=rt}}else g==="body"&&_r(o.ownerDocument.body);g=z}while(g);lm(h)}function is(o,h){var g=o;o=0;do{var S=g.nextSibling;if(g.nodeType===1?h?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(h?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),S&&S.nodeType===8)if(g=S.data,g==="/$"){if(o===0)break;o--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||o++;g=S}while(g)}function Va(o){var h=o.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var g=h;switch(h=h.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":Va(g),Ti(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}o.removeChild(g)}}function ea(o,h,g,S){for(;o.nodeType===1;){var z=g;if(o.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(S){if(!o[xr])switch(h){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(N=o.getAttribute("rel"),N==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(N!==z.rel||o.getAttribute("href")!==(z.href==null||z.href===""?null:z.href)||o.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin)||o.getAttribute("title")!==(z.title==null?null:z.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(N=o.getAttribute("src"),(N!==(z.src==null?null:z.src)||o.getAttribute("type")!==(z.type==null?null:z.type)||o.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin))&&N&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(h==="input"&&o.type==="hidden"){var N=z.name==null?null:""+z.name;if(z.type==="hidden"&&o.getAttribute("name")===N)return o}else return o;if(o=ur(o.nextSibling),o===null)break}return null}function na(o,h,g){if(h==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!g||(o=ur(o.nextSibling),o===null))return null;return o}function $a(o,h){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=ur(o.nextSibling),o===null))return null;return o}function qa(o){return o.data==="$?"||o.data==="$~"}function Pa(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function $s(o,h){var g=o.ownerDocument;if(o.data==="$~")o._reactRetry=h;else if(o.data!=="$?"||g.readyState!=="loading")h();else{var S=function(){h(),g.removeEventListener("DOMContentLoaded",S)};g.addEventListener("DOMContentLoaded",S),o._reactRetry=S}}function ur(o){for(;o!=null;o=o.nextSibling){var h=o.nodeType;if(h===1||h===3)break;if(h===8){if(h=o.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return o}var Lr=null;function Zn(o){o=o.nextSibling;for(var h=0;o;){if(o.nodeType===8){var g=o.data;if(g==="/$"||g==="/&"){if(h===0)return ur(o.nextSibling);h--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||h++}o=o.nextSibling}return null}function Ha(o){o=o.previousSibling;for(var h=0;o;){if(o.nodeType===8){var g=o.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(h===0)return o;h--}else g!=="/$"&&g!=="/&"||h++}o=o.previousSibling}return null}function ka(o,h,g){switch(h=$e(g),o){case"html":if(o=h.documentElement,!o)throw Error(i(452));return o;case"head":if(o=h.head,!o)throw Error(i(453));return o;case"body":if(o=h.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function _r(o){for(var h=o.attributes;h.length;)o.removeAttributeNode(h[0]);Ti(o)}var Ir=new Map,pl=new Set;function _o(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var rs=Pt.d;Pt.d={f:ml,r:Go,D:Ed,C:Z_,L:kg,m:Og,X:G_,S:lc,M:W_};function ml(){var o=rs.f(),h=gd();return o||h}function Go(o){var h=nr(o);h!==null&&h.tag===5&&h.type==="form"?td(h):rs.r(o)}var da=typeof document>"u"?null:document;function bu(o,h,g){var S=da;if(S&&typeof h=="string"&&h){var z=Vi(h);z='link[rel="'+o+'"][href="'+z+'"]',typeof g=="string"&&(z+='[crossorigin="'+g+'"]'),pl.has(z)||(pl.add(z),o={rel:o,crossOrigin:g,href:h},S.querySelector(z)===null&&(h=S.createElement("link"),je(h,"link",o),Ki(h),S.head.appendChild(h)))}}function Ed(o){rs.D(o),bu("dns-prefetch",o,null)}function Z_(o,h){rs.C(o,h),bu("preconnect",o,h)}function kg(o,h,g){rs.L(o,h,g);var S=da;if(S&&o&&h){var z='link[rel="preload"][as="'+Vi(h)+'"]';h==="image"&&g&&g.imageSrcSet?(z+='[imagesrcset="'+Vi(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(z+='[imagesizes="'+Vi(g.imageSizes)+'"]')):z+='[href="'+Vi(o)+'"]';var N=z;switch(h){case"style":N=_f(o);break;case"script":N=vf(o)}Ir.has(N)||(o=A({rel:"preload",href:h==="image"&&g&&g.imageSrcSet?void 0:o,as:h},g),Ir.set(N,o),S.querySelector(z)!==null||h==="style"&&S.querySelector(Cd(N))||h==="script"&&S.querySelector(Pd(N))||(h=S.createElement("link"),je(h,"link",o),Ki(h),S.head.appendChild(h)))}}function Og(o,h){rs.m(o,h);var g=da;if(g&&o){var S=h&&typeof h.as=="string"?h.as:"script",z='link[rel="modulepreload"][as="'+Vi(S)+'"][href="'+Vi(o)+'"]',N=z;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=vf(o)}if(!Ir.has(N)&&(o=A({rel:"modulepreload",href:o},h),Ir.set(N,o),g.querySelector(z)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Pd(N)))return}S=g.createElement("link"),je(S,"link",o),Ki(S),g.head.appendChild(S)}}}function lc(o,h,g){rs.S(o,h,g);var S=da;if(S&&o){var z=wl(S).hoistableStyles,N=_f(o);h=h||"default";var rt=z.get(N);if(!rt){var _t={loading:0,preload:null};if(rt=S.querySelector(Cd(N)))_t.loading=5;else{o=A({rel:"stylesheet",href:o,"data-precedence":h},g),(g=Ir.get(N))&&xf(o,g);var qt=rt=S.createElement("link");Ki(qt),je(qt,"link",o),qt._p=new Promise(function(pe,Me){qt.onload=pe,qt.onerror=Me}),qt.addEventListener("load",function(){_t.loading|=1}),qt.addEventListener("error",function(){_t.loading|=2}),_t.loading|=4,vo(rt,h,S)}rt={type:"stylesheet",instance:rt,count:1,state:_t},z.set(N,rt)}}}function G_(o,h){rs.X(o,h);var g=da;if(g&&o){var S=wl(g).hoistableScripts,z=vf(o),N=S.get(z);N||(N=g.querySelector(Pd(z)),N||(o=A({src:o,async:!0},h),(h=Ir.get(z))&&sm(o,h),N=g.createElement("script"),Ki(N),je(N,"link",o),g.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},S.set(z,N))}}function W_(o,h){rs.M(o,h);var g=da;if(g&&o){var S=wl(g).hoistableScripts,z=vf(o),N=S.get(z);N||(N=g.querySelector(Pd(z)),N||(o=A({src:o,async:!0,type:"module"},h),(h=Ir.get(z))&&sm(o,h),N=g.createElement("script"),Ki(N),je(N,"link",o),g.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},S.set(z,N))}}function Y_(o,h,g,S){var z=(z=ce.current)?_o(z):null;if(!z)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(h=_f(g.href),g=wl(z).hoistableStyles,S=g.get(h),S||(S={type:"style",instance:null,count:0,state:null},g.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){o=_f(g.href);var N=wl(z).hoistableStyles,rt=N.get(o);if(rt||(z=z.ownerDocument||z,rt={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(o,rt),(N=z.querySelector(Cd(o)))&&!N._p&&(rt.instance=N,rt.state.loading=5),Ir.has(o)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Ir.set(o,g),N||Yx(z,o,g,rt.state))),h&&S===null)throw Error(i(528,""));return rt}if(h&&S!==null)throw Error(i(529,""));return null;case"script":return h=g.async,g=g.src,typeof g=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=vf(g),g=wl(z).hoistableScripts,S=g.get(h),S||(S={type:"script",instance:null,count:0,state:null},g.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function _f(o){return'href="'+Vi(o)+'"'}function Cd(o){return'link[rel="stylesheet"]['+o+"]"}function X_(o){return A({},o,{"data-precedence":o.precedence,precedence:null})}function Yx(o,h,g,S){o.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=o.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),je(h,"link",g),Ki(h),o.head.appendChild(h))}function vf(o){return'[src="'+Vi(o)+'"]'}function Pd(o){return"script[async]"+o}function K_(o,h,g){if(h.count++,h.instance===null)switch(h.type){case"style":var S=o.querySelector('style[data-href~="'+Vi(g.href)+'"]');if(S)return h.instance=S,Ki(S),S;var z=A({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return S=(o.ownerDocument||o).createElement("style"),Ki(S),je(S,"style",z),vo(S,g.precedence,o),h.instance=S;case"stylesheet":z=_f(g.href);var N=o.querySelector(Cd(z));if(N)return h.state.loading|=4,h.instance=N,Ki(N),N;S=X_(g),(z=Ir.get(z))&&xf(S,z),N=(o.ownerDocument||o).createElement("link"),Ki(N);var rt=N;return rt._p=new Promise(function(_t,qt){rt.onload=_t,rt.onerror=qt}),je(N,"link",S),h.state.loading|=4,vo(N,g.precedence,o),h.instance=N;case"script":return N=vf(g.src),(z=o.querySelector(Pd(N)))?(h.instance=z,Ki(z),z):(S=g,(z=Ir.get(N))&&(S=A({},g),sm(S,z)),o=o.ownerDocument||o,z=o.createElement("script"),Ki(z),je(z,"link",S),o.head.appendChild(z),h.instance=z);case"void":return null;default:throw Error(i(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,vo(S,g.precedence,o));return h.instance}function vo(o,h,g){for(var S=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),z=S.length?S[S.length-1]:null,N=z,rt=0;rt<S.length;rt++){var _t=S[rt];if(_t.dataset.precedence===h)N=_t;else if(N!==z)break}N?N.parentNode.insertBefore(o,N.nextSibling):(h=g.nodeType===9?g.head:g,h.insertBefore(o,h.firstChild))}function xf(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.title==null&&(o.title=h.title)}function sm(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.integrity==null&&(o.integrity=h.integrity)}var om=null;function Q_(o,h,g){if(om===null){var S=new Map,z=om=new Map;z.set(g,S)}else z=om,S=z.get(g),S||(S=new Map,z.set(g,S));if(S.has(o))return S;for(S.set(o,null),g=g.getElementsByTagName(o),z=0;z<g.length;z++){var N=g[z];if(!(N[xr]||N[He]||o==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var rt=N.getAttribute(h)||"";rt=o+rt;var _t=S.get(rt);_t?_t.push(N):S.set(rt,[N])}}return S}function J_(o,h,g){o=o.ownerDocument||o,o.head.insertBefore(g,h==="title"?o.querySelector("head > title"):null)}function as(o,h,g){if(g===1||h.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return o=h.disabled,typeof h.precedence=="string"&&o==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function xo(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function yh(o,h,g,S){if(g.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var z=_f(S.href),N=h.querySelector(Cd(z));if(N){h=N._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(o.count++,o=Yo.bind(o),h.then(o,o)),g.state.loading|=4,g.instance=N,Ki(N);return}N=h.ownerDocument||h,S=X_(S),(z=Ir.get(z))&&xf(S,z),N=N.createElement("link"),Ki(N);var rt=N;rt._p=new Promise(function(_t,qt){rt.onload=_t,rt.onerror=qt}),je(N,"link",S),g.instance=N}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(g,h),(h=g.state.preload)&&(g.state.loading&3)===0&&(o.count++,g=Yo.bind(o),h.addEventListener("load",g),h.addEventListener("error",g))}}var Wo=0;function _h(o,h){return o.stylesheets&&o.count===0&&ev(o,o.stylesheets),0<o.count||0<o.imgCount?function(g){var S=setTimeout(function(){if(o.stylesheets&&ev(o,o.stylesheets),o.unsuspend){var N=o.unsuspend;o.unsuspend=null,N()}},6e4+h);0<o.imgBytes&&Wo===0&&(Wo=62500*We());var z=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&ev(o,o.stylesheets),o.unsuspend)){var N=o.unsuspend;o.unsuspend=null,N()}},(o.imgBytes>Wo?50:800)+h);return o.unsuspend=g,function(){o.unsuspend=null,clearTimeout(S),clearTimeout(z)}}:null}function Yo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ev(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var tv=null;function ev(o,h){o.stylesheets=null,o.unsuspend!==null&&(o.count++,tv=new Map,h.forEach(VR,o),tv=null,Yo.call(o))}function VR(o,h){if(!(h.state.loading&4)){var g=tv.get(o);if(g)var S=g.get(null);else{g=new Map,tv.set(o,g);for(var z=o.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<z.length;N++){var rt=z[N];(rt.nodeName==="LINK"||rt.getAttribute("media")!=="not all")&&(g.set(rt.dataset.precedence,rt),S=rt)}S&&g.set(null,S)}z=h.instance,rt=z.getAttribute("data-precedence"),N=g.get(rt)||S,N===S&&g.set(null,z),g.set(rt,z),this.count++,S=Yo.bind(this),z.addEventListener("load",S),z.addEventListener("error",S),N?N.parentNode.insertBefore(z,N.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(z,o.firstChild)),h.state.loading|=4}}var Dg={$$typeof:X,Provider:null,Consumer:null,_currentValue:Bt,_currentValue2:Bt,_threadCount:0};function $R(o,h,g,S,z,N,rt,_t,qt){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.hiddenUpdates=Dt(null),this.identifierPrefix=S,this.onUncaughtError=z,this.onCaughtError=N,this.onRecoverableError=rt,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=qt,this.incompleteTransitions=new Map}function uT(o,h,g,S,z,N,rt,_t,qt,pe,Me,De){return o=new $R(o,h,g,rt,qt,pe,Me,De,_t),h=1,N===!0&&(h|=24),N=Ma(3,null,null,h),o.current=N,N.stateNode=o,h=Y(),h.refCount++,o.pooledCache=h,h.refCount++,N.memoizedState={element:S,isDehydrated:g,cache:h},Bi(N),o}function cT(o){return o?(o=jo,o):jo}function hT(o,h,g,S,z,N){z=cT(z),S.context===null?S.context=z:S.pendingContext=z,S=Aa(h),S.payload={element:g},N=N===void 0?null:N,N!==null&&(S.callback=N),g=ns(o,S,h),g!==null&&(Us(g,o,h),$o(g,o,h))}function fT(o,h){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var g=o.retryLane;o.retryLane=g!==0&&g<h?g:h}}function Xx(o,h){fT(o,h),(o=o.alternate)&&fT(o,h)}function dT(o){if(o.tag===13||o.tag===31){var h=gs(o,67108864);h!==null&&Us(h,o,67108864),Xx(o,67108864)}}function pT(o){if(o.tag===13||o.tag===31){var h=go();h=_e(h);var g=gs(o,h);g!==null&&Us(g,o,h),Xx(o,h)}}var nv=!0;function qR(o,h,g,S){var z=Nt.T;Nt.T=null;var N=Pt.p;try{Pt.p=2,Kx(o,h,g,S)}finally{Pt.p=N,Nt.T=z}}function HR(o,h,g,S){var z=Nt.T;Nt.T=null;var N=Pt.p;try{Pt.p=8,Kx(o,h,g,S)}finally{Pt.p=N,Nt.T=z}}function Kx(o,h,g,S){if(nv){var z=Qx(S);if(z===null)ut(o,h,S,iv,g),gT(o,S);else if(GR(z,o,h,g,S))S.stopPropagation();else if(gT(o,S),h&4&&-1<ZR.indexOf(o)){for(;z!==null;){var N=nr(z);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var rt=xa(N.pendingLanes);if(rt!==0){var _t=N;for(_t.pendingLanes|=2,_t.entangledLanes|=2;rt;){var qt=1<<31-fr(rt);_t.entanglements[1]|=qt,rt&=~qt}dl(N),(Ci&6)===0&&($p=cn()+500,yf(0))}}break;case 31:case 13:_t=gs(N,2),_t!==null&&Us(_t,N,2),gd(),Xx(N,2)}if(N=Qx(S),N===null&&ut(o,h,S,iv,g),N===z)break;z=N}z!==null&&S.stopPropagation()}else ut(o,h,S,null,g)}}function Qx(o){return o=el(o),Jx(o)}var iv=null;function Jx(o){if(iv=null,o=Ri(o),o!==null){var h=u(o);if(h===null)o=null;else{var g=h.tag;if(g===13){if(o=f(h),o!==null)return o;o=null}else if(g===31){if(o=a(h),o!==null)return o;o=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;o=null}else h!==o&&(o=null)}}return iv=o,null}function mT(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zi()){case si:return 2;case Ii:return 8;case jr:case Ws:return 32;case Wa:return 268435456;default:return 32}default:return 32}}var tb=!1,bf=null,wf=null,Sf=null,zg=new Map,Lg=new Map,Tf=[],ZR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gT(o,h){switch(o){case"focusin":case"focusout":bf=null;break;case"dragenter":case"dragleave":wf=null;break;case"mouseover":case"mouseout":Sf=null;break;case"pointerover":case"pointerout":zg.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lg.delete(h.pointerId)}}function Ig(o,h,g,S,z,N){return o===null||o.nativeEvent!==N?(o={blockedOn:h,domEventName:g,eventSystemFlags:S,nativeEvent:N,targetContainers:[z]},h!==null&&(h=nr(h),h!==null&&dT(h)),o):(o.eventSystemFlags|=S,h=o.targetContainers,z!==null&&h.indexOf(z)===-1&&h.push(z),o)}function GR(o,h,g,S,z){switch(h){case"focusin":return bf=Ig(bf,o,h,g,S,z),!0;case"dragenter":return wf=Ig(wf,o,h,g,S,z),!0;case"mouseover":return Sf=Ig(Sf,o,h,g,S,z),!0;case"pointerover":var N=z.pointerId;return zg.set(N,Ig(zg.get(N)||null,o,h,g,S,z)),!0;case"gotpointercapture":return N=z.pointerId,Lg.set(N,Ig(Lg.get(N)||null,o,h,g,S,z)),!0}return!1}function yT(o){var h=Ri(o.target);if(h!==null){var g=u(h);if(g!==null){if(h=g.tag,h===13){if(h=f(g),h!==null){o.blockedOn=h,hn(o.priority,function(){pT(g)});return}}else if(h===31){if(h=a(g),h!==null){o.blockedOn=h,hn(o.priority,function(){pT(g)});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){o.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}o.blockedOn=null}function rv(o){if(o.blockedOn!==null)return!1;for(var h=o.targetContainers;0<h.length;){var g=Qx(o.nativeEvent);if(g===null){g=o.nativeEvent;var S=new g.constructor(g.type,g);Du=S,g.target.dispatchEvent(S),Du=null}else return h=nr(g),h!==null&&dT(h),o.blockedOn=g,!1;h.shift()}return!0}function _T(o,h,g){rv(o)&&g.delete(h)}function WR(){tb=!1,bf!==null&&rv(bf)&&(bf=null),wf!==null&&rv(wf)&&(wf=null),Sf!==null&&rv(Sf)&&(Sf=null),zg.forEach(_T),Lg.forEach(_T)}function av(o,h){o.blockedOn===h&&(o.blockedOn=null,tb||(tb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,WR)))}var sv=null;function vT(o){sv!==o&&(sv=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){sv===o&&(sv=null);for(var h=0;h<o.length;h+=3){var g=o[h],S=o[h+1],z=o[h+2];if(typeof S!="function"){if(Jx(S||g)===null)continue;break}var N=nr(g);N!==null&&(o.splice(h,3),h-=3,af(N,{pending:!0,data:z,method:g.method,action:S},S,z))}}))}function lm(o){function h(qt){return av(qt,o)}bf!==null&&av(bf,o),wf!==null&&av(wf,o),Sf!==null&&av(Sf,o),zg.forEach(h),Lg.forEach(h);for(var g=0;g<Tf.length;g++){var S=Tf[g];S.blockedOn===o&&(S.blockedOn=null)}for(;0<Tf.length&&(g=Tf[0],g.blockedOn===null);)yT(g),g.blockedOn===null&&Tf.shift();if(g=(o.ownerDocument||o).$$reactFormReplay,g!=null)for(S=0;S<g.length;S+=3){var z=g[S],N=g[S+1],rt=z[tn]||null;if(typeof N=="function")rt||vT(g);else if(rt){var _t=null;if(N&&N.hasAttribute("formAction")){if(z=N,rt=N[tn]||null)_t=rt.formAction;else if(Jx(z)!==null)continue}else _t=rt.action;typeof _t=="function"?g[S+1]=_t:(g.splice(S,3),S-=3),vT(g)}}}function xT(){function o(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(rt){return z=rt})},focusReset:"manual",scroll:"manual"})}function h(){z!==null&&(z(),z=null),S||setTimeout(g,20)}function g(){if(!S&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,z=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(g,100),function(){S=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),z!==null&&(z(),z=null)}}}function eb(o){this._internalRoot=o}ov.prototype.render=eb.prototype.render=function(o){var h=this._internalRoot;if(h===null)throw Error(i(409));var g=h.current,S=go();hT(g,S,o,h,null,null)},ov.prototype.unmount=eb.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var h=o.containerInfo;hT(o.current,2,null,o,null,null),gd(),h[_n]=null}};function ov(o){this._internalRoot=o}ov.prototype.unstable_scheduleHydration=function(o){if(o){var h=Te();o={blockedOn:null,target:o,priority:h};for(var g=0;g<Tf.length&&h!==0&&h<Tf[g].priority;g++);Tf.splice(g,0,o),g===0&&yT(o)}};var bT=e.version;if(bT!=="19.2.0")throw Error(i(527,bT,"19.2.0"));Pt.findDOMNode=function(o){var h=o._reactInternals;if(h===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=_(h),o=o!==null?x(o):null,o=o===null?null:o.stateNode,o};var YR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Nt,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lv.isDisabled&&lv.supportsFiber)try{hr=lv.inject(YR),Un=lv}catch{}}return Bg.createRoot=function(o,h){if(!r(o))throw Error(i(299));var g=!1,S="",z=v_,N=x_,rt=b_;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(z=h.onUncaughtError),h.onCaughtError!==void 0&&(N=h.onCaughtError),h.onRecoverableError!==void 0&&(rt=h.onRecoverableError)),h=uT(o,1,!1,null,null,g,S,null,z,N,rt,xT),o[_n]=h.current,J(o),new eb(h)},Bg.hydrateRoot=function(o,h,g){if(!r(o))throw Error(i(299));var S=!1,z="",N=v_,rt=x_,_t=b_,qt=null;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(z=g.identifierPrefix),g.onUncaughtError!==void 0&&(N=g.onUncaughtError),g.onCaughtError!==void 0&&(rt=g.onCaughtError),g.onRecoverableError!==void 0&&(_t=g.onRecoverableError),g.formState!==void 0&&(qt=g.formState)),h=uT(o,1,!0,h,g??null,S,z,qt,N,rt,_t,xT),h.context=cT(null),g=h.current,S=go(),S=_e(S),z=Aa(S),z.callback=null,ns(g,z,S),g=S,h.current.lanes=g,zt(h,g),dl(h),o[_n]=h.current,J(o),new ov(h)},Bg.version="19.2.0",Bg}var OT;function s3(){if(OT)return rb.exports;OT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rb.exports=a3(),rb.exports}var o3=s3();/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var DT="popstate";function l3(t={}){function e(i,r){let{pathname:u,search:f,hash:a}=i.location;return aw("",{pathname:u,search:f,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:gy(r)}return c3(e,n,null,t)}function ia(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Uc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function u3(){return Math.random().toString(36).substring(2,10)}function zT(t,e){return{usr:t.state,key:t.key,idx:e}}function aw(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Dm(e):e,state:n,key:e&&e.key||i||u3()}}function gy({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Dm(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function c3(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:u=!1}=i,f=r.history,a="POP",y=null,_=x();_==null&&(_=0,f.replaceState({...f.state,idx:_},""));function x(){return(f.state||{idx:null}).idx}function A(){a="POP";let H=x(),K=H==null?null:H-_;_=H,y&&y({action:a,location:q.location,delta:K})}function O(H,K){a="PUSH";let W=aw(q.location,H,K);_=x()+1;let X=zT(W,_),tt=q.createHref(W);try{f.pushState(X,"",tt)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;r.location.assign(tt)}u&&y&&y({action:a,location:q.location,delta:1})}function I(H,K){a="REPLACE";let W=aw(q.location,H,K);_=x();let X=zT(W,_),tt=q.createHref(W);f.replaceState(X,"",tt),u&&y&&y({action:a,location:q.location,delta:0})}function F(H){return h3(H)}let q={get action(){return a},get location(){return t(r,f)},listen(H){if(y)throw new Error("A history only accepts one active listener");return r.addEventListener(DT,A),y=H,()=>{r.removeEventListener(DT,A),y=null}},createHref(H){return e(r,H)},createURL:F,encodeLocation(H){let K=F(H);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:O,replace:I,go(H){return f.go(H)}};return q}function h3(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ia(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:gy(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function bk(t,e,n="/"){return f3(t,e,n,!1)}function f3(t,e,n,i){let r=typeof e=="string"?Dm(e):e,u=zh(r.pathname||"/",n);if(u==null)return null;let f=wk(t);d3(f);let a=null;for(let y=0;a==null&&y<f.length;++y){let _=T3(u);a=w3(f[y],_,i)}return a}function wk(t,e=[],n=[],i="",r=!1){let u=(f,a,y=r,_)=>{let x={relativePath:_===void 0?f.path||"":_,caseSensitive:f.caseSensitive===!0,childrenIndex:a,route:f};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(i)&&y)return;ia(x.relativePath.startsWith(i),`Absolute route path "${x.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(i.length)}let A=kh([i,x.relativePath]),O=n.concat(x);f.children&&f.children.length>0&&(ia(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${A}".`),wk(f.children,e,O,A,y)),!(f.path==null&&!f.index)&&e.push({path:A,score:x3(A,f.index),routesMeta:O})};return t.forEach((f,a)=>{if(f.path===""||!f.path?.includes("?"))u(f,a);else for(let y of Sk(f.path))u(f,a,!0,y)}),e}function Sk(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return r?[u,""]:[u];let f=Sk(i.join("/")),a=[];return a.push(...f.map(y=>y===""?u:[u,y].join("/"))),r&&a.push(...f),a.map(y=>t.startsWith("/")&&y===""?"/":y)}function d3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:b3(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var p3=/^:[\w-]+$/,m3=3,g3=2,y3=1,_3=10,v3=-2,LT=t=>t==="*";function x3(t,e){let n=t.split("/"),i=n.length;return n.some(LT)&&(i+=v3),e&&(i+=g3),n.filter(r=>!LT(r)).reduce((r,u)=>r+(p3.test(u)?m3:u===""?y3:_3),i)}function b3(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function w3(t,e,n=!1){let{routesMeta:i}=t,r={},u="/",f=[];for(let a=0;a<i.length;++a){let y=i[a],_=a===i.length-1,x=u==="/"?e:e.slice(u.length)||"/",A=Kv({path:y.relativePath,caseSensitive:y.caseSensitive,end:_},x),O=y.route;if(!A&&_&&n&&!i[i.length-1].route.index&&(A=Kv({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},x)),!A)return null;Object.assign(r,A.params),f.push({params:r,pathname:kh([u,A.pathname]),pathnameBase:C3(kh([u,A.pathnameBase])),route:O}),A.pathnameBase!=="/"&&(u=kh([u,A.pathnameBase]))}return f}function Kv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=S3(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let u=r[0],f=u.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((_,{paramName:x,isOptional:A},O)=>{if(x==="*"){let F=a[O]||"";f=u.slice(0,u.length-F.length).replace(/(.)\/+$/,"$1")}const I=a[O];return A&&!I?_[x]=void 0:_[x]=(I||"").replace(/%2F/g,"/"),_},{}),pathname:u,pathnameBase:f,pattern:t}}function S3(t,e=!1,n=!0){Uc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,a,y)=>(i.push({paramName:a,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function T3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uc(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function zh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function M3(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Dm(t):t;return{pathname:n?n.startsWith("/")?n:A3(n,e):e,search:P3(i),hash:k3(r)}}function A3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function lb(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function E3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Tk(t){let e=E3(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Mk(t,e,n,i=!1){let r;typeof t=="string"?r=Dm(t):(r={...t},ia(!r.pathname||!r.pathname.includes("?"),lb("?","pathname","search",r)),ia(!r.pathname||!r.pathname.includes("#"),lb("#","pathname","hash",r)),ia(!r.search||!r.search.includes("#"),lb("#","search","hash",r)));let u=t===""||r.pathname==="",f=u?"/":r.pathname,a;if(f==null)a=n;else{let A=e.length-1;if(!i&&f.startsWith("..")){let O=f.split("/");for(;O[0]==="..";)O.shift(),A-=1;r.pathname=O.join("/")}a=A>=0?e[A]:"/"}let y=M3(r,a),_=f&&f!=="/"&&f.endsWith("/"),x=(u||f===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(_||x)&&(y.pathname+="/"),y}var kh=t=>t.join("/").replace(/\/\/+/g,"/"),C3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),P3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,k3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function O3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ak=["POST","PUT","PATCH","DELETE"];new Set(Ak);var D3=["GET",...Ak];new Set(D3);var zm=G.createContext(null);zm.displayName="DataRouter";var Z0=G.createContext(null);Z0.displayName="DataRouterState";G.createContext(!1);var Ek=G.createContext({isTransitioning:!1});Ek.displayName="ViewTransition";var z3=G.createContext(new Map);z3.displayName="Fetchers";var L3=G.createContext(null);L3.displayName="Await";var Zc=G.createContext(null);Zc.displayName="Navigation";var Iy=G.createContext(null);Iy.displayName="Location";var Fh=G.createContext({outlet:null,matches:[],isDataRoute:!1});Fh.displayName="Route";var hS=G.createContext(null);hS.displayName="RouteError";function I3(t,{relative:e}={}){ia(Ry(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=G.useContext(Zc),{hash:r,pathname:u,search:f}=By(t,{relative:e}),a=u;return n!=="/"&&(a=u==="/"?n:kh([n,u])),i.createHref({pathname:a,search:f,hash:r})}function Ry(){return G.useContext(Iy)!=null}function ip(){return ia(Ry(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(Iy).location}var Ck="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Pk(t){G.useContext(Zc).static||G.useLayoutEffect(t)}function R3(){let{isDataRoute:t}=G.useContext(Fh);return t?Y3():B3()}function B3(){ia(Ry(),"useNavigate() may be used only in the context of a <Router> component.");let t=G.useContext(zm),{basename:e,navigator:n}=G.useContext(Zc),{matches:i}=G.useContext(Fh),{pathname:r}=ip(),u=JSON.stringify(Tk(i)),f=G.useRef(!1);return Pk(()=>{f.current=!0}),G.useCallback((y,_={})=>{if(Uc(f.current,Ck),!f.current)return;if(typeof y=="number"){n.go(y);return}let x=Mk(y,JSON.parse(u),r,_.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:kh([e,x.pathname])),(_.replace?n.replace:n.push)(x,_.state,_)},[e,n,u,r,t])}G.createContext(null);function By(t,{relative:e}={}){let{matches:n}=G.useContext(Fh),{pathname:i}=ip(),r=JSON.stringify(Tk(n));return G.useMemo(()=>Mk(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function N3(t,e){return kk(t,e)}function kk(t,e,n,i,r){ia(Ry(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=G.useContext(Zc),{matches:f}=G.useContext(Fh),a=f[f.length-1],y=a?a.params:{},_=a?a.pathname:"/",x=a?a.pathnameBase:"/",A=a&&a.route;{let W=A&&A.path||"";Ok(_,!A||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let O=ip(),I;if(e){let W=typeof e=="string"?Dm(e):e;ia(x==="/"||W.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${W.pathname}" was given in the \`location\` prop.`),I=W}else I=O;let F=I.pathname||"/",q=F;if(x!=="/"){let W=x.replace(/^\//,"").split("/");q="/"+F.replace(/^\//,"").split("/").slice(W.length).join("/")}let H=bk(t,{pathname:q});Uc(A||H!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Uc(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=$3(H&&H.map(W=>Object.assign({},W,{params:Object.assign({},y,W.params),pathname:kh([x,u.encodeLocation?u.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?x:kh([x,u.encodeLocation?u.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),f,n,i,r);return e&&K?G.createElement(Iy.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},K):K}function j3(){let t=W3(),e=O3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",t),f=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:u},"ErrorBoundary")," or"," ",G.createElement("code",{style:u},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:r},n):null,f)}var F3=G.createElement(j3,null),U3=class extends G.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?G.createElement(Fh.Provider,{value:this.props.routeContext},G.createElement(hS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function V3({routeContext:t,match:e,children:n}){let i=G.useContext(zm);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(Fh.Provider,{value:t},n)}function $3(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let u=t,f=n?.errors;if(f!=null){let _=u.findIndex(x=>x.route.id&&f?.[x.route.id]!==void 0);ia(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,_+1))}let a=!1,y=-1;if(n)for(let _=0;_<u.length;_++){let x=u[_];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(y=_),x.route.id){let{loaderData:A,errors:O}=n,I=x.route.loader&&!A.hasOwnProperty(x.route.id)&&(!O||O[x.route.id]===void 0);if(x.route.lazy||I){a=!0,y>=0?u=u.slice(0,y+1):u=[u[0]];break}}}return u.reduceRight((_,x,A)=>{let O,I=!1,F=null,q=null;n&&(O=f&&x.route.id?f[x.route.id]:void 0,F=x.route.errorElement||F3,a&&(y<0&&A===0?(Ok("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,q=null):y===A&&(I=!0,q=x.route.hydrateFallbackElement||null)));let H=e.concat(u.slice(0,A+1)),K=()=>{let W;return O?W=F:I?W=q:x.route.Component?W=G.createElement(x.route.Component,null):x.route.element?W=x.route.element:W=_,G.createElement(V3,{match:x,routeContext:{outlet:_,matches:H,isDataRoute:n!=null},children:W})};return n&&(x.route.ErrorBoundary||x.route.errorElement||A===0)?G.createElement(U3,{location:n.location,revalidation:n.revalidation,component:F,error:O,children:K(),routeContext:{outlet:null,matches:H,isDataRoute:!0},unstable_onError:i}):K()},null)}function fS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q3(t){let e=G.useContext(zm);return ia(e,fS(t)),e}function H3(t){let e=G.useContext(Z0);return ia(e,fS(t)),e}function Z3(t){let e=G.useContext(Fh);return ia(e,fS(t)),e}function dS(t){let e=Z3(t),n=e.matches[e.matches.length-1];return ia(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function G3(){return dS("useRouteId")}function W3(){let t=G.useContext(hS),e=H3("useRouteError"),n=dS("useRouteError");return t!==void 0?t:e.errors?.[n]}function Y3(){let{router:t}=q3("useNavigate"),e=dS("useNavigate"),n=G.useRef(!1);return Pk(()=>{n.current=!0}),G.useCallback(async(r,u={})=>{Uc(n.current,Ck),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...u}))},[t,e])}var IT={};function Ok(t,e,n){!e&&!IT[t]&&(IT[t]=!0,Uc(!1,n))}G.memo(X3);function X3({routes:t,future:e,state:n,unstable_onError:i}){return kk(t,void 0,n,i,e)}function pm(t){ia(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function K3({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:u=!1}){ia(!Ry(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),a=G.useMemo(()=>({basename:f,navigator:r,static:u,future:{}}),[f,r,u]);typeof n=="string"&&(n=Dm(n));let{pathname:y="/",search:_="",hash:x="",state:A=null,key:O="default"}=n,I=G.useMemo(()=>{let F=zh(y,f);return F==null?null:{location:{pathname:F,search:_,hash:x,state:A,key:O},navigationType:i}},[f,y,_,x,A,O,i]);return Uc(I!=null,`<Router basename="${f}"> is not able to match the URL "${y}${_}${x}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:G.createElement(Zc.Provider,{value:a},G.createElement(Iy.Provider,{children:e,value:I}))}function Q3({children:t,location:e}){return N3(sw(t),e)}function sw(t,e=[]){let n=[];return G.Children.forEach(t,(i,r)=>{if(!G.isValidElement(i))return;let u=[...e,r];if(i.type===G.Fragment){n.push.apply(n,sw(i.props.children,u));return}ia(i.type===pm,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ia(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=sw(i.props.children,u)),n.push(f)}),n}var Fv="get",Uv="application/x-www-form-urlencoded";function G0(t){return t!=null&&typeof t.tagName=="string"}function J3(t){return G0(t)&&t.tagName.toLowerCase()==="button"}function tB(t){return G0(t)&&t.tagName.toLowerCase()==="form"}function eB(t){return G0(t)&&t.tagName.toLowerCase()==="input"}function nB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iB(t,e){return t.button===0&&(!e||e==="_self")&&!nB(t)}var uv=null;function rB(){if(uv===null)try{new FormData(document.createElement("form"),0),uv=!1}catch{uv=!0}return uv}var aB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ub(t){return t!=null&&!aB.has(t)?(Uc(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Uv}"`),null):t}function sB(t,e){let n,i,r,u,f;if(tB(t)){let a=t.getAttribute("action");i=a?zh(a,e):null,n=t.getAttribute("method")||Fv,r=ub(t.getAttribute("enctype"))||Uv,u=new FormData(t)}else if(J3(t)||eB(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=t.getAttribute("formaction")||a.getAttribute("action");if(i=y?zh(y,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Fv,r=ub(t.getAttribute("formenctype"))||ub(a.getAttribute("enctype"))||Uv,u=new FormData(a,t),!rB()){let{name:_,type:x,value:A}=t;if(x==="image"){let O=_?`${_}.`:"";u.append(`${O}x`,"0"),u.append(`${O}y`,"0")}else _&&u.append(_,A)}}else{if(G0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fv,i=null,r=Uv,f=t}return u&&r==="text/plain"&&(f=u,u=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pS(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function oB(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&zh(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function lB(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uB(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function cB(t,e,n){let i=await Promise.all(t.map(async r=>{let u=e.routes[r.route.id];if(u){let f=await lB(u,n);return f.links?f.links():[]}return[]}));return pB(i.flat(1).filter(uB).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function RT(t,e,n,i,r,u){let f=(y,_)=>n[_]?y.route.id!==n[_].route.id:!0,a=(y,_)=>n[_].pathname!==y.pathname||n[_].route.path?.endsWith("*")&&n[_].params["*"]!==y.params["*"];return u==="assets"?e.filter((y,_)=>f(y,_)||a(y,_)):u==="data"?e.filter((y,_)=>{let x=i.routes[y.route.id];if(!x||!x.hasLoader)return!1;if(f(y,_)||a(y,_))return!0;if(y.route.shouldRevalidate){let A=y.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function hB(t,e,{includeHydrateFallback:n}={}){return fB(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let u=[r.module];return r.clientActionModule&&(u=u.concat(r.clientActionModule)),r.clientLoaderModule&&(u=u.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(u=u.concat(r.hydrateFallbackModule)),r.imports&&(u=u.concat(r.imports)),u}).flat(1))}function fB(t){return[...new Set(t)]}function dB(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function pB(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let u=JSON.stringify(dB(r));return n.has(u)||(n.add(u),i.push({key:u,link:r})),i},[])}function Dk(){let t=G.useContext(zm);return pS(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function mB(){let t=G.useContext(Z0);return pS(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var mS=G.createContext(void 0);mS.displayName="FrameworkContext";function zk(){let t=G.useContext(mS);return pS(t,"You must render this element inside a <HydratedRouter> element"),t}function gB(t,e){let n=G.useContext(mS),[i,r]=G.useState(!1),[u,f]=G.useState(!1),{onFocus:a,onBlur:y,onMouseEnter:_,onMouseLeave:x,onTouchStart:A}=e,O=G.useRef(null);G.useEffect(()=>{if(t==="render"&&f(!0),t==="viewport"){let q=K=>{K.forEach(W=>{f(W.isIntersecting)})},H=new IntersectionObserver(q,{threshold:.5});return O.current&&H.observe(O.current),()=>{H.disconnect()}}},[t]),G.useEffect(()=>{if(i){let q=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(q)}}},[i]);let I=()=>{r(!0)},F=()=>{r(!1),f(!1)};return n?t!=="intent"?[u,O,{}]:[u,O,{onFocus:Ng(a,I),onBlur:Ng(y,F),onMouseEnter:Ng(_,I),onMouseLeave:Ng(x,F),onTouchStart:Ng(A,I)}]:[!1,O,{}]}function Ng(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function yB({page:t,...e}){let{router:n}=Dk(),i=G.useMemo(()=>bk(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?G.createElement(vB,{page:t,matches:i,...e}):null}function _B(t){let{manifest:e,routeModules:n}=zk(),[i,r]=G.useState([]);return G.useEffect(()=>{let u=!1;return cB(t,e,n).then(f=>{u||r(f)}),()=>{u=!0}},[t,e,n]),i}function vB({page:t,matches:e,...n}){let i=ip(),{manifest:r,routeModules:u}=zk(),{basename:f}=Dk(),{loaderData:a,matches:y}=mB(),_=G.useMemo(()=>RT(t,e,y,r,i,"data"),[t,e,y,r,i]),x=G.useMemo(()=>RT(t,e,y,r,i,"assets"),[t,e,y,r,i]),A=G.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let F=new Set,q=!1;if(e.forEach(K=>{let W=r.routes[K.route.id];!W||!W.hasLoader||(!_.some(X=>X.route.id===K.route.id)&&K.route.id in a&&u[K.route.id]?.shouldRevalidate||W.hasClientLoader?q=!0:F.add(K.route.id))}),F.size===0)return[];let H=oB(t,f,"data");return q&&F.size>0&&H.searchParams.set("_routes",e.filter(K=>F.has(K.route.id)).map(K=>K.route.id).join(",")),[H.pathname+H.search]},[f,a,i,r,_,e,t,u]),O=G.useMemo(()=>hB(x,r),[x,r]),I=_B(x);return G.createElement(G.Fragment,null,A.map(F=>G.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...n})),O.map(F=>G.createElement("link",{key:F,rel:"modulepreload",href:F,...n})),I.map(({key:F,link:q})=>G.createElement("link",{key:F,nonce:n.nonce,...q})))}function xB(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Lk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Lk&&(window.__reactRouterVersion="7.9.5")}catch{}function bB({basename:t,children:e,window:n}){let i=G.useRef();i.current==null&&(i.current=l3({window:n,v5Compat:!0}));let r=i.current,[u,f]=G.useState({action:r.action,location:r.location}),a=G.useCallback(y=>{G.startTransition(()=>f(y))},[f]);return G.useLayoutEffect(()=>r.listen(a),[r,a]),G.createElement(K3,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:r})}var Ik=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Af=G.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:u,replace:f,state:a,target:y,to:_,preventScrollReset:x,viewTransition:A,...O},I){let{basename:F}=G.useContext(Zc),q=typeof _=="string"&&Ik.test(_),H,K=!1;if(typeof _=="string"&&q&&(H=_,Lk))try{let ct=new URL(window.location.href),xt=_.startsWith("//")?new URL(ct.protocol+_):new URL(_),wt=zh(xt.pathname,F);xt.origin===ct.origin&&wt!=null?_=wt+xt.search+xt.hash:K=!0}catch{Uc(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=I3(_,{relative:r}),[X,tt,Q]=gB(i,O),at=MB(_,{replace:f,state:a,target:y,preventScrollReset:x,relative:r,viewTransition:A});function ht(ct){e&&e(ct),ct.defaultPrevented||at(ct)}let ot=G.createElement("a",{...O,...Q,href:H||W,onClick:K||u?e:ht,ref:xB(I,tt),target:y,"data-discover":!q&&n==="render"?"true":void 0});return X&&!q?G.createElement(G.Fragment,null,ot,G.createElement(yB,{page:W})):ot});Af.displayName="Link";var wB=G.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:u,to:f,viewTransition:a,children:y,..._},x){let A=By(f,{relative:_.relative}),O=ip(),I=G.useContext(Z0),{navigator:F,basename:q}=G.useContext(Zc),H=I!=null&&kB(A)&&a===!0,K=F.encodeLocation?F.encodeLocation(A).pathname:A.pathname,W=O.pathname,X=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(W=W.toLowerCase(),X=X?X.toLowerCase():null,K=K.toLowerCase()),X&&q&&(X=zh(X,q)||X);const tt=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let Q=W===K||!r&&W.startsWith(K)&&W.charAt(tt)==="/",at=X!=null&&(X===K||!r&&X.startsWith(K)&&X.charAt(K.length)==="/"),ht={isActive:Q,isPending:at,isTransitioning:H},ot=Q?e:void 0,ct;typeof i=="function"?ct=i(ht):ct=[i,Q?"active":null,at?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let xt=typeof u=="function"?u(ht):u;return G.createElement(Af,{..._,"aria-current":ot,className:ct,ref:x,style:xt,to:f,viewTransition:a},typeof y=="function"?y(ht):y)});wB.displayName="NavLink";var SB=G.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:u,method:f=Fv,action:a,onSubmit:y,relative:_,preventScrollReset:x,viewTransition:A,...O},I)=>{let F=CB(),q=PB(a,{relative:_}),H=f.toLowerCase()==="get"?"get":"post",K=typeof a=="string"&&Ik.test(a),W=X=>{if(y&&y(X),X.defaultPrevented)return;X.preventDefault();let tt=X.nativeEvent.submitter,Q=tt?.getAttribute("formmethod")||f;F(tt||X.currentTarget,{fetcherKey:e,method:Q,navigate:n,replace:r,state:u,relative:_,preventScrollReset:x,viewTransition:A})};return G.createElement("form",{ref:I,method:H,action:q,onSubmit:i?y:W,...O,"data-discover":!K&&t==="render"?"true":void 0})});SB.displayName="Form";function TB(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rk(t){let e=G.useContext(zm);return ia(e,TB(t)),e}function MB(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:u,viewTransition:f}={}){let a=R3(),y=ip(),_=By(t,{relative:u});return G.useCallback(x=>{if(iB(x,e)){x.preventDefault();let A=n!==void 0?n:gy(y)===gy(_);a(t,{replace:A,state:i,preventScrollReset:r,relative:u,viewTransition:f})}},[y,a,_,n,i,e,t,r,u,f])}var AB=0,EB=()=>`__${String(++AB)}__`;function CB(){let{router:t}=Rk("useSubmit"),{basename:e}=G.useContext(Zc),n=G3();return G.useCallback(async(i,r={})=>{let{action:u,method:f,encType:a,formData:y,body:_}=sB(i,e);if(r.navigate===!1){let x=r.fetcherKey||EB();await t.fetch(x,n,r.action||u,{preventScrollReset:r.preventScrollReset,formData:y,body:_,formMethod:r.method||f,formEncType:r.encType||a,flushSync:r.flushSync})}else await t.navigate(r.action||u,{preventScrollReset:r.preventScrollReset,formData:y,body:_,formMethod:r.method||f,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function PB(t,{relative:e}={}){let{basename:n}=G.useContext(Zc),i=G.useContext(Fh);ia(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),u={...By(t||".",{relative:e})},f=ip();if(t==null){u.search=f.search;let a=new URLSearchParams(u.search),y=a.getAll("index");if(y.some(x=>x==="")){a.delete("index"),y.filter(A=>A).forEach(A=>a.append("index",A));let x=a.toString();u.search=x?`?${x}`:""}}return(!t||t===".")&&r.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:kh([n,u.pathname])),gy(u)}function kB(t,{relative:e}={}){let n=G.useContext(Ek);ia(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Rk("useViewTransitionState"),r=By(t,{relative:e});if(!n.isTransitioning)return!1;let u=zh(n.currentLocation.pathname,i)||n.currentLocation.pathname,f=zh(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Kv(r.pathname,f)!=null||Kv(r.pathname,u)!=null}var Ny=xk();const OB=""+new URL("sun-A5krhKHx.png",import.meta.url).href;function DB(){const[t,e]=G.useState(null);G.useEffect(()=>{const r=()=>e(null);return document.addEventListener("click",r),()=>document.removeEventListener("click",r)},[]);const n=(r,u)=>{u.stopPropagation(),e(t===r?null:r)},i=r=>u=>{e(null)};return vt.jsxs("header",{className:"header",children:[vt.jsxs("div",{className:"header-left",children:[vt.jsx("img",{src:OB,alt:" ",className:"logo"}),vt.jsxs("div",{className:"site-info",children:[vt.jsx("h2",{children:"NSE"}),vt.jsx("p",{children:"Nationwide Sunny Energy"})]})]}),vt.jsx("nav",{className:"nav",children:vt.jsxs("ul",{children:[vt.jsxs("li",{className:"dropdown nav-item",onClick:r=>n("main",r),children:[vt.jsx("span",{className:"dropdown-title",children:""}),t==="main"&&vt.jsx("div",{className:"dropdown-area",children:vt.jsx("div",{className:"dropdown-menu",children:vt.jsxs("ul",{children:[vt.jsx("li",{children:vt.jsx(Af,{to:"/",onClick:i(),children:""})}),vt.jsx("li",{children:vt.jsx(Af,{to:"/scenario",onClick:i(),children:"  "})})]})})})]}),vt.jsxs("li",{className:"dropdown nav-item",onClick:r=>n("status",r),children:[vt.jsx("span",{className:"dropdown-title",children:" "}),t==="status"&&vt.jsx("div",{className:"dropdown-area",children:vt.jsx("div",{className:"dropdown-menu",children:vt.jsxs("ul",{children:[vt.jsx("li",{children:vt.jsx(Af,{to:"/energy-usage",onClick:i(),children:"  "})}),vt.jsx("li",{children:vt.jsx(Af,{to:"/gas-emission",onClick:i(),children:"  "})})]})})})]}),vt.jsxs("li",{className:"dropdown nav-item",onClick:r=>n("stat",r),children:[vt.jsx("span",{className:"dropdown-title",children:" "}),t==="stat"&&vt.jsx("div",{className:"dropdown-area",children:vt.jsx("div",{className:"dropdown-menu",children:vt.jsxs("ul",{children:[vt.jsx("li",{children:vt.jsx(Af,{to:"/usage-stats",onClick:i(),children:"  "})}),vt.jsx("li",{children:vt.jsx(Af,{to:"/gas-stats",onClick:i(),children:"  "})})]})})})]})]})})]})}function zB(){return vt.jsx("footer",{className:"footer",children:vt.jsx("p",{children:" 2025   .   ."})})}function LB(t,e){const n=G.useRef(e);G.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const IB=1;function RB(t){return Object.freeze({__version:IB,map:t})}function BB(t,e){return Object.freeze({...t,...e})}const W0=G.createContext(null);function Y0(){const t=G.use(W0);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function NB(t){function e(n,i){const{instance:r,context:u}=t(n).current;G.useImperativeHandle(i,()=>r);const{children:f}=n;return f==null?null:my.createElement(W0,{value:u},f)}return G.forwardRef(e)}function jB(t){function e(n,i){const{instance:r}=t(n).current;return G.useImperativeHandle(i,()=>r),null}return G.forwardRef(e)}function Bk(t,e){const n=G.useRef(void 0);G.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function gS(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var ny={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var FB=ny.exports,BT;function UB(){return BT||(BT=1,(function(t,e){(function(n,i){i(e)})(FB,(function(n){var i="1.9.4";function r(p){var w,D,V,nt;for(D=1,V=arguments.length;D<V;D++){nt=arguments[D];for(w in nt)p[w]=nt[w]}return p}var u=Object.create||(function(){function p(){}return function(w){return p.prototype=w,new p}})();function f(p,w){var D=Array.prototype.slice;if(p.bind)return p.bind.apply(p,D.call(arguments,1));var V=D.call(arguments,2);return function(){return p.apply(w,V.length?V.concat(D.call(arguments)):arguments)}}var a=0;function y(p){return"_leaflet_id"in p||(p._leaflet_id=++a),p._leaflet_id}function _(p,w,D){var V,nt,mt,Lt;return Lt=function(){V=!1,nt&&(mt.apply(D,nt),nt=!1)},mt=function(){V?nt=arguments:(p.apply(D,arguments),setTimeout(Lt,w),V=!0)},mt}function x(p,w,D){var V=w[1],nt=w[0],mt=V-nt;return p===V&&D?p:((p-nt)%mt+mt)%mt+nt}function A(){return!1}function O(p,w){if(w===!1)return p;var D=Math.pow(10,w===void 0?6:w);return Math.round(p*D)/D}function I(p){return p.trim?p.trim():p.replace(/^\s+|\s+$/g,"")}function F(p){return I(p).split(/\s+/)}function q(p,w){Object.prototype.hasOwnProperty.call(p,"options")||(p.options=p.options?u(p.options):{});for(var D in w)p.options[D]=w[D];return p.options}function H(p,w,D){var V=[];for(var nt in p)V.push(encodeURIComponent(D?nt.toUpperCase():nt)+"="+encodeURIComponent(p[nt]));return(!w||w.indexOf("?")===-1?"?":"&")+V.join("&")}var K=/\{ *([\w_ -]+) *\}/g;function W(p,w){return p.replace(K,function(D,V){var nt=w[V];if(nt===void 0)throw new Error("No value provided for variable "+D);return typeof nt=="function"&&(nt=nt(w)),nt})}var X=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"};function tt(p,w){for(var D=0;D<p.length;D++)if(p[D]===w)return D;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function at(p){return window["webkit"+p]||window["moz"+p]||window["ms"+p]}var ht=0;function ot(p){var w=+new Date,D=Math.max(0,16-(w-ht));return ht=w+D,window.setTimeout(p,D)}var ct=window.requestAnimationFrame||at("RequestAnimationFrame")||ot,xt=window.cancelAnimationFrame||at("CancelAnimationFrame")||at("CancelRequestAnimationFrame")||function(p){window.clearTimeout(p)};function wt(p,w,D){if(D&&ct===ot)p.call(w);else return ct.call(window,f(p,w))}function Ct(p){p&&xt.call(window,p)}var re={__proto__:null,extend:r,create:u,bind:f,get lastId(){return a},stamp:y,throttle:_,wrapNum:x,falseFn:A,formatNum:O,trim:I,splitWords:F,setOptions:q,getParamString:H,template:W,isArray:X,indexOf:tt,emptyImageUrl:Q,requestFn:ct,cancelFn:xt,requestAnimFrame:wt,cancelAnimFrame:Ct};function ve(){}ve.extend=function(p){var w=function(){q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},D=w.__super__=this.prototype,V=u(D);V.constructor=w,w.prototype=V;for(var nt in this)Object.prototype.hasOwnProperty.call(this,nt)&&nt!=="prototype"&&nt!=="__super__"&&(w[nt]=this[nt]);return p.statics&&r(w,p.statics),p.includes&&(Ee(p.includes),r.apply(null,[V].concat(p.includes))),r(V,p),delete V.statics,delete V.includes,V.options&&(V.options=D.options?u(D.options):{},r(V.options,p.options)),V._initHooks=[],V.callInitHooks=function(){if(!this._initHooksCalled){D.callInitHooks&&D.callInitHooks.call(this),this._initHooksCalled=!0;for(var mt=0,Lt=V._initHooks.length;mt<Lt;mt++)V._initHooks[mt].call(this)}},w},ve.include=function(p){var w=this.prototype.options;return r(this.prototype,p),p.options&&(this.prototype.options=w,this.mergeOptions(p.options)),this},ve.mergeOptions=function(p){return r(this.prototype.options,p),this},ve.addInitHook=function(p){var w=Array.prototype.slice.call(arguments,1),D=typeof p=="function"?p:function(){this[p].apply(this,w)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(D),this};function Ee(p){if(!(typeof L>"u"||!L||!L.Mixin)){p=X(p)?p:[p];for(var w=0;w<p.length;w++)p[w]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Nt={on:function(p,w,D){if(typeof p=="object")for(var V in p)this._on(V,p[V],w);else{p=F(p);for(var nt=0,mt=p.length;nt<mt;nt++)this._on(p[nt],w,D)}return this},off:function(p,w,D){if(!arguments.length)delete this._events;else if(typeof p=="object")for(var V in p)this._off(V,p[V],w);else{p=F(p);for(var nt=arguments.length===1,mt=0,Lt=p.length;mt<Lt;mt++)nt?this._off(p[mt]):this._off(p[mt],w,D)}return this},_on:function(p,w,D,V){if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}if(this._listens(p,w,D)===!1){D===this&&(D=void 0);var nt={fn:w,ctx:D};V&&(nt.once=!0),this._events=this._events||{},this._events[p]=this._events[p]||[],this._events[p].push(nt)}},_off:function(p,w,D){var V,nt,mt;if(this._events&&(V=this._events[p],!!V)){if(arguments.length===1){if(this._firingCount)for(nt=0,mt=V.length;nt<mt;nt++)V[nt].fn=A;delete this._events[p];return}if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}var Lt=this._listens(p,w,D);if(Lt!==!1){var ae=V[Lt];this._firingCount&&(ae.fn=A,this._events[p]=V=V.slice()),V.splice(Lt,1)}}},fire:function(p,w,D){if(!this.listens(p,D))return this;var V=r({},w,{type:p,target:this,sourceTarget:w&&w.sourceTarget||this});if(this._events){var nt=this._events[p];if(nt){this._firingCount=this._firingCount+1||1;for(var mt=0,Lt=nt.length;mt<Lt;mt++){var ae=nt[mt],fe=ae.fn;ae.once&&this.off(p,fe,ae.ctx),fe.call(ae.ctx||this,V)}this._firingCount--}}return D&&this._propagateEvent(V),this},listens:function(p,w,D,V){typeof p!="string"&&console.warn('"string" type argument expected');var nt=w;typeof w!="function"&&(V=!!w,nt=void 0,D=void 0);var mt=this._events&&this._events[p];if(mt&&mt.length&&this._listens(p,nt,D)!==!1)return!0;if(V){for(var Lt in this._eventParents)if(this._eventParents[Lt].listens(p,w,D,V))return!0}return!1},_listens:function(p,w,D){if(!this._events)return!1;var V=this._events[p]||[];if(!w)return!!V.length;D===this&&(D=void 0);for(var nt=0,mt=V.length;nt<mt;nt++)if(V[nt].fn===w&&V[nt].ctx===D)return nt;return!1},once:function(p,w,D){if(typeof p=="object")for(var V in p)this._on(V,p[V],w,!0);else{p=F(p);for(var nt=0,mt=p.length;nt<mt;nt++)this._on(p[nt],w,D,!0)}return this},addEventParent:function(p){return this._eventParents=this._eventParents||{},this._eventParents[y(p)]=p,this},removeEventParent:function(p){return this._eventParents&&delete this._eventParents[y(p)],this},_propagateEvent:function(p){for(var w in this._eventParents)this._eventParents[w].fire(p.type,r({layer:p.target,propagatedFrom:p.target},p),!0)}};Nt.addEventListener=Nt.on,Nt.removeEventListener=Nt.clearAllEventListeners=Nt.off,Nt.addOneTimeEventListener=Nt.once,Nt.fireEvent=Nt.fire,Nt.hasEventListeners=Nt.listens;var Pt=ve.extend(Nt);function Bt(p,w,D){this.x=D?Math.round(p):p,this.y=D?Math.round(w):w}var Ft=Math.trunc||function(p){return p>0?Math.floor(p):Math.ceil(p)};Bt.prototype={clone:function(){return new Bt(this.x,this.y)},add:function(p){return this.clone()._add($t(p))},_add:function(p){return this.x+=p.x,this.y+=p.y,this},subtract:function(p){return this.clone()._subtract($t(p))},_subtract:function(p){return this.x-=p.x,this.y-=p.y,this},divideBy:function(p){return this.clone()._divideBy(p)},_divideBy:function(p){return this.x/=p,this.y/=p,this},multiplyBy:function(p){return this.clone()._multiplyBy(p)},_multiplyBy:function(p){return this.x*=p,this.y*=p,this},scaleBy:function(p){return new Bt(this.x*p.x,this.y*p.y)},unscaleBy:function(p){return new Bt(this.x/p.x,this.y/p.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ft(this.x),this.y=Ft(this.y),this},distanceTo:function(p){p=$t(p);var w=p.x-this.x,D=p.y-this.y;return Math.sqrt(w*w+D*D)},equals:function(p){return p=$t(p),p.x===this.x&&p.y===this.y},contains:function(p){return p=$t(p),Math.abs(p.x)<=Math.abs(this.x)&&Math.abs(p.y)<=Math.abs(this.y)},toString:function(){return"Point("+O(this.x)+", "+O(this.y)+")"}};function $t(p,w,D){return p instanceof Bt?p:X(p)?new Bt(p[0],p[1]):p==null?p:typeof p=="object"&&"x"in p&&"y"in p?new Bt(p.x,p.y):new Bt(p,w,D)}function ft(p,w){if(p)for(var D=w?[p,w]:p,V=0,nt=D.length;V<nt;V++)this.extend(D[V])}ft.prototype={extend:function(p){var w,D;if(!p)return this;if(p instanceof Bt||typeof p[0]=="number"||"x"in p)w=D=$t(p);else if(p=St(p),w=p.min,D=p.max,!w||!D)return this;return!this.min&&!this.max?(this.min=w.clone(),this.max=D.clone()):(this.min.x=Math.min(w.x,this.min.x),this.max.x=Math.max(D.x,this.max.x),this.min.y=Math.min(w.y,this.min.y),this.max.y=Math.max(D.y,this.max.y)),this},getCenter:function(p){return $t((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,p)},getBottomLeft:function(){return $t(this.min.x,this.max.y)},getTopRight:function(){return $t(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(p){var w,D;return typeof p[0]=="number"||p instanceof Bt?p=$t(p):p=St(p),p instanceof ft?(w=p.min,D=p.max):w=D=p,w.x>=this.min.x&&D.x<=this.max.x&&w.y>=this.min.y&&D.y<=this.max.y},intersects:function(p){p=St(p);var w=this.min,D=this.max,V=p.min,nt=p.max,mt=nt.x>=w.x&&V.x<=D.x,Lt=nt.y>=w.y&&V.y<=D.y;return mt&&Lt},overlaps:function(p){p=St(p);var w=this.min,D=this.max,V=p.min,nt=p.max,mt=nt.x>w.x&&V.x<D.x,Lt=nt.y>w.y&&V.y<D.y;return mt&&Lt},isValid:function(){return!!(this.min&&this.max)},pad:function(p){var w=this.min,D=this.max,V=Math.abs(w.x-D.x)*p,nt=Math.abs(w.y-D.y)*p;return St($t(w.x-V,w.y-nt),$t(D.x+V,D.y+nt))},equals:function(p){return p?(p=St(p),this.min.equals(p.getTopLeft())&&this.max.equals(p.getBottomRight())):!1}};function St(p,w){return!p||p instanceof ft?p:new ft(p,w)}function jt(p,w){if(p)for(var D=w?[p,w]:p,V=0,nt=D.length;V<nt;V++)this.extend(D[V])}jt.prototype={extend:function(p){var w=this._southWest,D=this._northEast,V,nt;if(p instanceof le)V=p,nt=p;else if(p instanceof jt){if(V=p._southWest,nt=p._northEast,!V||!nt)return this}else return p?this.extend(ce(p)||Yt(p)):this;return!w&&!D?(this._southWest=new le(V.lat,V.lng),this._northEast=new le(nt.lat,nt.lng)):(w.lat=Math.min(V.lat,w.lat),w.lng=Math.min(V.lng,w.lng),D.lat=Math.max(nt.lat,D.lat),D.lng=Math.max(nt.lng,D.lng)),this},pad:function(p){var w=this._southWest,D=this._northEast,V=Math.abs(w.lat-D.lat)*p,nt=Math.abs(w.lng-D.lng)*p;return new jt(new le(w.lat-V,w.lng-nt),new le(D.lat+V,D.lng+nt))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(p){typeof p[0]=="number"||p instanceof le||"lat"in p?p=ce(p):p=Yt(p);var w=this._southWest,D=this._northEast,V,nt;return p instanceof jt?(V=p.getSouthWest(),nt=p.getNorthEast()):V=nt=p,V.lat>=w.lat&&nt.lat<=D.lat&&V.lng>=w.lng&&nt.lng<=D.lng},intersects:function(p){p=Yt(p);var w=this._southWest,D=this._northEast,V=p.getSouthWest(),nt=p.getNorthEast(),mt=nt.lat>=w.lat&&V.lat<=D.lat,Lt=nt.lng>=w.lng&&V.lng<=D.lng;return mt&&Lt},overlaps:function(p){p=Yt(p);var w=this._southWest,D=this._northEast,V=p.getSouthWest(),nt=p.getNorthEast(),mt=nt.lat>w.lat&&V.lat<D.lat,Lt=nt.lng>w.lng&&V.lng<D.lng;return mt&&Lt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(p,w){return p?(p=Yt(p),this._southWest.equals(p.getSouthWest(),w)&&this._northEast.equals(p.getNorthEast(),w)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Yt(p,w){return p instanceof jt?p:new jt(p,w)}function le(p,w,D){if(isNaN(p)||isNaN(w))throw new Error("Invalid LatLng object: ("+p+", "+w+")");this.lat=+p,this.lng=+w,D!==void 0&&(this.alt=+D)}le.prototype={equals:function(p,w){if(!p)return!1;p=ce(p);var D=Math.max(Math.abs(this.lat-p.lat),Math.abs(this.lng-p.lng));return D<=(w===void 0?1e-9:w)},toString:function(p){return"LatLng("+O(this.lat,p)+", "+O(this.lng,p)+")"},distanceTo:function(p){return Ie.distance(this,ce(p))},wrap:function(){return Ie.wrapLatLng(this)},toBounds:function(p){var w=180*p/40075017,D=w/Math.cos(Math.PI/180*this.lat);return Yt([this.lat-w,this.lng-D],[this.lat+w,this.lng+D])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function ce(p,w,D){return p instanceof le?p:X(p)&&typeof p[0]!="object"?p.length===3?new le(p[0],p[1],p[2]):p.length===2?new le(p[0],p[1]):null:p==null?p:typeof p=="object"&&"lat"in p?new le(p.lat,"lng"in p?p.lng:p.lon,p.alt):w===void 0?null:new le(p,w,D)}var Oe={latLngToPoint:function(p,w){var D=this.projection.project(p),V=this.scale(w);return this.transformation._transform(D,V)},pointToLatLng:function(p,w){var D=this.scale(w),V=this.transformation.untransform(p,D);return this.projection.unproject(V)},project:function(p){return this.projection.project(p)},unproject:function(p){return this.projection.unproject(p)},scale:function(p){return 256*Math.pow(2,p)},zoom:function(p){return Math.log(p/256)/Math.LN2},getProjectedBounds:function(p){if(this.infinite)return null;var w=this.projection.bounds,D=this.scale(p),V=this.transformation.transform(w.min,D),nt=this.transformation.transform(w.max,D);return new ft(V,nt)},infinite:!1,wrapLatLng:function(p){var w=this.wrapLng?x(p.lng,this.wrapLng,!0):p.lng,D=this.wrapLat?x(p.lat,this.wrapLat,!0):p.lat,V=p.alt;return new le(D,w,V)},wrapLatLngBounds:function(p){var w=p.getCenter(),D=this.wrapLatLng(w),V=w.lat-D.lat,nt=w.lng-D.lng;if(V===0&&nt===0)return p;var mt=p.getSouthWest(),Lt=p.getNorthEast(),ae=new le(mt.lat-V,mt.lng-nt),fe=new le(Lt.lat-V,Lt.lng-nt);return new jt(ae,fe)}},Ie=r({},Oe,{wrapLng:[-180,180],R:6371e3,distance:function(p,w){var D=Math.PI/180,V=p.lat*D,nt=w.lat*D,mt=Math.sin((w.lat-p.lat)*D/2),Lt=Math.sin((w.lng-p.lng)*D/2),ae=mt*mt+Math.cos(V)*Math.cos(nt)*Lt*Lt,fe=2*Math.atan2(Math.sqrt(ae),Math.sqrt(1-ae));return this.R*fe}}),Gt=6378137,Le={R:Gt,MAX_LATITUDE:85.0511287798,project:function(p){var w=Math.PI/180,D=this.MAX_LATITUDE,V=Math.max(Math.min(D,p.lat),-D),nt=Math.sin(V*w);return new Bt(this.R*p.lng*w,this.R*Math.log((1+nt)/(1-nt))/2)},unproject:function(p){var w=180/Math.PI;return new le((2*Math.atan(Math.exp(p.y/this.R))-Math.PI/2)*w,p.x*w/this.R)},bounds:(function(){var p=Gt*Math.PI;return new ft([-p,-p],[p,p])})()};function Pe(p,w,D,V){if(X(p)){this._a=p[0],this._b=p[1],this._c=p[2],this._d=p[3];return}this._a=p,this._b=w,this._c=D,this._d=V}Pe.prototype={transform:function(p,w){return this._transform(p.clone(),w)},_transform:function(p,w){return w=w||1,p.x=w*(this._a*p.x+this._b),p.y=w*(this._c*p.y+this._d),p},untransform:function(p,w){return w=w||1,new Bt((p.x/w-this._b)/this._a,(p.y/w-this._d)/this._c)}};function ge(p,w,D,V){return new Pe(p,w,D,V)}var nn=r({},Ie,{code:"EPSG:3857",projection:Le,transformation:(function(){var p=.5/(Math.PI*Le.R);return ge(p,.5,-p,.5)})()}),qe=r({},nn,{code:"EPSG:900913"});function an(p){return document.createElementNS("http://www.w3.org/2000/svg",p)}function Ke(p,w){var D="",V,nt,mt,Lt,ae,fe;for(V=0,mt=p.length;V<mt;V++){for(ae=p[V],nt=0,Lt=ae.length;nt<Lt;nt++)fe=ae[nt],D+=(nt?"L":"M")+fe.x+" "+fe.y;D+=w?ie.svg?"z":"x":""}return D||"M0 0"}var On=document.documentElement.style,rn="ActiveXObject"in window,In=rn&&!document.addEventListener,me="msLaunchUri"in navigator&&!("documentMode"in document),ki=_e("webkit"),Li=_e("android"),Yn=_e("android 2")||_e("android 3"),cn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Zi=Li&&_e("Google")&&cn<537&&!("AudioNode"in window),si=!!window.opera,Ii=!me&&_e("chrome"),jr=_e("gecko")&&!ki&&!si&&!rn,Ws=!Ii&&_e("safari"),Wa=_e("phantom"),_a="OTransition"in On,Be=navigator.platform.indexOf("Win")===0,hr=rn&&"transition"in On,Un="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Yn,va="MozPerspective"in On,fr=!window.L_DISABLE_3D&&(hr||Un||va)&&!_a&&!Wa,Fe=typeof orientation<"u"||_e("mobile"),Dn=Fe&&ki,wn=Fe&&Un,Mr=!window.PointerEvent&&window.MSPointerEvent,za=!!(window.PointerEvent||Mr),bn="ontouchstart"in window||!!window.TouchEvent,xa=!window.L_NO_TOUCH&&(bn||za),kt=Fe&&si,lt=Fe&&jr,dt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,bt=(function(){var p=!1;try{var w=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("testPassiveEventSupport",A,w),window.removeEventListener("testPassiveEventSupport",A,w)}catch{}return p})(),Dt=(function(){return!!document.createElement("canvas").getContext})(),zt=!!(document.createElementNS&&an("svg").createSVGRect),te=!!zt&&(function(){var p=document.createElement("div");return p.innerHTML="<svg/>",(p.firstChild&&p.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Zt=!zt&&(function(){try{var p=document.createElement("div");p.innerHTML='<v:shape adj="1"/>';var w=p.firstChild;return w.style.behavior="url(#default#VML)",w&&typeof w.adj=="object"}catch{return!1}})(),Ut=navigator.platform.indexOf("Mac")===0,Xt=navigator.platform.indexOf("Linux")===0;function _e(p){return navigator.userAgent.toLowerCase().indexOf(p)>=0}var ie={ie:rn,ielt9:In,edge:me,webkit:ki,android:Li,android23:Yn,androidStock:Zi,opera:si,chrome:Ii,gecko:jr,safari:Ws,phantom:Wa,opera12:_a,win:Be,ie3d:hr,webkit3d:Un,gecko3d:va,any3d:fr,mobile:Fe,mobileWebkit:Dn,mobileWebkit3d:wn,msPointer:Mr,pointer:za,touch:xa,touchNative:bn,mobileOpera:kt,mobileGecko:lt,retina:dt,passiveEvents:bt,canvas:Dt,svg:zt,vml:Zt,inlineSvg:te,mac:Ut,linux:Xt},Te=ie.msPointer?"MSPointerDown":"pointerdown",hn=ie.msPointer?"MSPointerMove":"pointermove",dn=ie.msPointer?"MSPointerUp":"pointerup",He=ie.msPointer?"MSPointerCancel":"pointercancel",tn={touchstart:Te,touchmove:hn,touchend:dn,touchcancel:He},_n={touchstart:wl,touchmove:Ar,touchend:Ar,touchcancel:Ar},Vn={},pi=!1;function Kn(p,w,D){return w==="touchstart"&&nr(),_n[w]?(D=_n[w].bind(this,D),p.addEventListener(tn[w],D,!1),D):(console.warn("wrong event specified:",w),A)}function Hn(p,w,D){if(!tn[w]){console.warn("wrong event specified:",w);return}p.removeEventListener(tn[w],D,!1)}function xr(p){Vn[p.pointerId]=p}function Ti(p){Vn[p.pointerId]&&(Vn[p.pointerId]=p)}function Ri(p){delete Vn[p.pointerId]}function nr(){pi||(document.addEventListener(Te,xr,!0),document.addEventListener(hn,Ti,!0),document.addEventListener(dn,Ri,!0),document.addEventListener(He,Ri,!0),pi=!0)}function Ar(p,w){if(w.pointerType!==(w.MSPOINTER_TYPE_MOUSE||"mouse")){w.touches=[];for(var D in Vn)w.touches.push(Vn[D]);w.changedTouches=[w],p(w)}}function wl(p,w){w.MSPOINTER_TYPE_TOUCH&&w.pointerType===w.MSPOINTER_TYPE_TOUCH&&$i(w),Ar(p,w)}function Ki(p){var w={},D,V;for(V in p)D=p[V],w[V]=D&&D.bind?D.bind(p):D;return p=w,w.type="dblclick",w.detail=2,w.isTrusted=!1,w._simulated=!0,w}var Sl=200;function Xh(p,w){p.addEventListener("dblclick",w);var D=0,V;function nt(mt){if(mt.detail!==1){V=mt.detail;return}if(!(mt.pointerType==="mouse"||mt.sourceCapabilities&&!mt.sourceCapabilities.firesTouchEvents)){var Lt=Bn(mt);if(!(Lt.some(function(fe){return fe instanceof HTMLLabelElement&&fe.attributes.for})&&!Lt.some(function(fe){return fe instanceof HTMLInputElement||fe instanceof HTMLSelectElement}))){var ae=Date.now();ae-D<=Sl?(V++,V===2&&w(Ki(mt))):V=1,D=ae}}}return p.addEventListener("click",nt),{dblclick:w,simDblclick:nt}}function Qn(p,w){p.removeEventListener("dblclick",w.dblclick),p.removeEventListener("click",w.simDblclick)}var Ys=Jl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),tl=Jl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Fr=tl==="webkitTransition"||tl==="OTransition"?tl+"End":"transitionend";function ba(p){return typeof p=="string"?document.getElementById(p):p}function Ou(p,w){var D=p.style[w]||p.currentStyle&&p.currentStyle[w];if((!D||D==="auto")&&document.defaultView){var V=document.defaultView.getComputedStyle(p,null);D=V?V[w]:null}return D==="auto"?null:D}function Pn(p,w,D){var V=document.createElement(p);return V.className=w||"",D&&D.appendChild(V),V}function Rn(p){var w=p.parentNode;w&&w.removeChild(p)}function wa(p){for(;p.firstChild;)p.removeChild(p.firstChild)}function ir(p){var w=p.parentNode;w&&w.lastChild!==p&&w.appendChild(p)}function mi(p){var w=p.parentNode;w&&w.firstChild!==p&&w.insertBefore(p,w.firstChild)}function ni(p,w){if(p.classList!==void 0)return p.classList.contains(w);var D=Sa(p);return D.length>0&&new RegExp("(^|\\s)"+w+"(\\s|$)").test(D)}function Tn(p,w){if(p.classList!==void 0)for(var D=F(w),V=0,nt=D.length;V<nt;V++)p.classList.add(D[V]);else if(!ni(p,w)){var mt=Sa(p);Co(p,(mt?mt+" ":"")+w)}}function zn(p,w){p.classList!==void 0?p.classList.remove(w):Co(p,I((" "+Sa(p)+" ").replace(" "+w+" "," ")))}function Co(p,w){p.className.baseVal===void 0?p.className=w:p.className.baseVal=w}function Sa(p){return p.correspondingElement&&(p=p.correspondingElement),p.className.baseVal===void 0?p.className:p.className.baseVal}function Vi(p,w){"opacity"in p.style?p.style.opacity=w:"filter"in p.style&&Xs(p,w)}function Xs(p,w){var D=!1,V="DXImageTransform.Microsoft.Alpha";try{D=p.filters.item(V)}catch{if(w===1)return}w=Math.round(w*100),D?(D.Enabled=w!==100,D.Opacity=w):p.style.filter+=" progid:"+V+"(opacity="+w+")"}function Jl(p){for(var w=document.documentElement.style,D=0;D<p.length;D++)if(p[D]in w)return p[D];return!1}function As(p,w,D){var V=w||new Bt(0,0);p.style[Ys]=(ie.ie3d?"translate("+V.x+"px,"+V.y+"px)":"translate3d("+V.x+"px,"+V.y+"px,0)")+(D?" scale("+D+")":"")}function Ai(p,w){p._leaflet_pos=w,ie.any3d?As(p,w):(p.style.left=w.x+"px",p.style.top=w.y+"px")}function Es(p){return p._leaflet_pos||new Bt(0,0)}var Ya,ds,Tl;if("onselectstart"in document)Ya=function(){Mn(window,"selectstart",$i)},ds=function(){gi(window,"selectstart",$i)};else{var Ml=Jl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ya=function(){if(Ml){var p=document.documentElement.style;Tl=p[Ml],p[Ml]="none"}},ds=function(){Ml&&(document.documentElement.style[Ml]=Tl,Tl=void 0)}}function pc(){Mn(window,"dragstart",$i)}function Al(){gi(window,"dragstart",$i)}var tu,mc;function eu(p){for(;p.tabIndex===-1;)p=p.parentNode;p.style&&(Xa(),tu=p,mc=p.style.outlineStyle,p.style.outlineStyle="none",Mn(window,"keydown",Xa))}function Xa(){tu&&(tu.style.outlineStyle=mc,tu=void 0,mc=void 0,gi(window,"keydown",Xa))}function Du(p){do p=p.parentNode;while((!p.offsetWidth||!p.offsetHeight)&&p!==document.body);return p}function el(p){var w=p.getBoundingClientRect();return{x:w.width/p.offsetWidth||1,y:w.height/p.offsetHeight||1,boundingClientRect:w}}var El={__proto__:null,TRANSFORM:Ys,TRANSITION:tl,TRANSITION_END:Fr,get:ba,getStyle:Ou,create:Pn,remove:Rn,empty:wa,toFront:ir,toBack:mi,hasClass:ni,addClass:Tn,removeClass:zn,setClass:Co,getClass:Sa,setOpacity:Vi,testProp:Jl,setTransform:As,setPosition:Ai,getPosition:Es,get disableTextSelection(){return Ya},get enableTextSelection(){return ds},disableImageDrag:pc,enableImageDrag:Al,preventOutline:eu,restoreOutline:Xa,getSizedParentNode:Du,getScale:el};function Mn(p,w,D,V){if(w&&typeof w=="object")for(var nt in w)rr(p,nt,w[nt],D);else{w=F(w);for(var mt=0,Lt=w.length;mt<Lt;mt++)rr(p,w[mt],D,V)}return this}var Ka="_leaflet_events";function gi(p,w,D,V){if(arguments.length===1)Po(p),delete p[Ka];else if(w&&typeof w=="object")for(var nt in w)nl(p,nt,w[nt],D);else if(w=F(w),arguments.length===2)Po(p,function(ae){return tt(w,ae)!==-1});else for(var mt=0,Lt=w.length;mt<Lt;mt++)nl(p,w[mt],D,V);return this}function Po(p,w){for(var D in p[Ka]){var V=D.split(/\d/)[0];(!w||w(V))&&nl(p,V,null,null,D)}}var Ks={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function rr(p,w,D,V){var nt=w+y(D)+(V?"_"+y(V):"");if(p[Ka]&&p[Ka][nt])return this;var mt=function(ae){return D.call(V||p,ae||window.event)},Lt=mt;!ie.touchNative&&ie.pointer&&w.indexOf("touch")===0?mt=Kn(p,w,mt):ie.touch&&w==="dblclick"?mt=Xh(p,mt):"addEventListener"in p?w==="touchstart"||w==="touchmove"||w==="wheel"||w==="mousewheel"?p.addEventListener(Ks[w]||w,mt,ie.passiveEvents?{passive:!1}:!1):w==="mouseenter"||w==="mouseleave"?(mt=function(ae){ae=ae||window.event,Cs(p,ae)&&Lt(ae)},p.addEventListener(Ks[w],mt,!1)):p.addEventListener(w,Lt,!1):p.attachEvent("on"+w,mt),p[Ka]=p[Ka]||{},p[Ka][nt]=mt}function nl(p,w,D,V,nt){nt=nt||w+y(D)+(V?"_"+y(V):"");var mt=p[Ka]&&p[Ka][nt];if(!mt)return this;!ie.touchNative&&ie.pointer&&w.indexOf("touch")===0?Hn(p,w,mt):ie.touch&&w==="dblclick"?Qn(p,mt):"removeEventListener"in p?p.removeEventListener(Ks[w]||w,mt,!1):p.detachEvent("on"+w,mt),p[Ka][nt]=null}function La(p){return p.stopPropagation?p.stopPropagation():p.originalEvent?p.originalEvent._stopped=!0:p.cancelBubble=!0,this}function Ia(p){return rr(p,"wheel",La),this}function Qs(p){return Mn(p,"mousedown touchstart dblclick contextmenu",La),p._leaflet_disable_click=!0,this}function $i(p){return p.preventDefault?p.preventDefault():p.returnValue=!1,this}function Ta(p){return $i(p),La(p),this}function Bn(p){if(p.composedPath)return p.composedPath();for(var w=[],D=p.target;D;)w.push(D),D=D.parentNode;return w}function il(p,w){if(!w)return new Bt(p.clientX,p.clientY);var D=el(w),V=D.boundingClientRect;return new Bt((p.clientX-V.left)/D.x-w.clientLeft,(p.clientY-V.top)/D.y-w.clientTop)}var Ra=ie.linux&&ie.chrome?window.devicePixelRatio:ie.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Oi(p){return ie.edge?p.wheelDeltaY/2:p.deltaY&&p.deltaMode===0?-p.deltaY/Ra:p.deltaY&&p.deltaMode===1?-p.deltaY*20:p.deltaY&&p.deltaMode===2?-p.deltaY*60:p.deltaX||p.deltaZ?0:p.wheelDelta?(p.wheelDeltaY||p.wheelDelta)/2:p.detail&&Math.abs(p.detail)<32765?-p.detail*20:p.detail?p.detail/-32765*60:0}function Cs(p,w){var D=w.relatedTarget;if(!D)return!0;try{for(;D&&D!==p;)D=D.parentNode}catch{return!1}return D!==p}var Cl={__proto__:null,on:Mn,off:gi,stopPropagation:La,disableScrollPropagation:Ia,disableClickPropagation:Qs,preventDefault:$i,stop:Ta,getPropagationPath:Bn,getMousePosition:il,getWheelDelta:Oi,isExternalTarget:Cs,addListener:Mn,removeListener:gi},ko=Pt.extend({run:function(p,w,D,V){this.stop(),this._el=p,this._inProgress=!0,this._duration=D||.25,this._easeOutPower=1/Math.max(V||.5,.2),this._startPos=Es(p),this._offset=w.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=wt(this._animate,this),this._step()},_step:function(p){var w=+new Date-this._startTime,D=this._duration*1e3;w<D?this._runFrame(this._easeOut(w/D),p):(this._runFrame(1),this._complete())},_runFrame:function(p,w){var D=this._startPos.add(this._offset.multiplyBy(p));w&&D._round(),Ai(this._el,D),this.fire("step")},_complete:function(){Ct(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(p){return 1-Math.pow(1-p,this._easeOutPower)}}),Jn=Pt.extend({options:{crs:nn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(p,w){w=q(this,w),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(p),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),w.maxBounds&&this.setMaxBounds(w.maxBounds),w.zoom!==void 0&&(this._zoom=this._limitZoom(w.zoom)),w.center&&w.zoom!==void 0&&this.setView(ce(w.center),w.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=tl&&ie.any3d&&!ie.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Mn(this._proxy,Fr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(p,w,D){if(w=w===void 0?this._zoom:this._limitZoom(w),p=this._limitCenter(ce(p),w,this.options.maxBounds),D=D||{},this._stop(),this._loaded&&!D.reset&&D!==!0){D.animate!==void 0&&(D.zoom=r({animate:D.animate},D.zoom),D.pan=r({animate:D.animate,duration:D.duration},D.pan));var V=this._zoom!==w?this._tryAnimatedZoom&&this._tryAnimatedZoom(p,w,D.zoom):this._tryAnimatedPan(p,D.pan);if(V)return clearTimeout(this._sizeTimer),this}return this._resetView(p,w,D.pan&&D.pan.noMoveStart),this},setZoom:function(p,w){return this._loaded?this.setView(this.getCenter(),p,{zoom:w}):(this._zoom=p,this)},zoomIn:function(p,w){return p=p||(ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+p,w)},zoomOut:function(p,w){return p=p||(ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-p,w)},setZoomAround:function(p,w,D){var V=this.getZoomScale(w),nt=this.getSize().divideBy(2),mt=p instanceof Bt?p:this.latLngToContainerPoint(p),Lt=mt.subtract(nt).multiplyBy(1-1/V),ae=this.containerPointToLatLng(nt.add(Lt));return this.setView(ae,w,{zoom:D})},_getBoundsCenterZoom:function(p,w){w=w||{},p=p.getBounds?p.getBounds():Yt(p);var D=$t(w.paddingTopLeft||w.padding||[0,0]),V=$t(w.paddingBottomRight||w.padding||[0,0]),nt=this.getBoundsZoom(p,!1,D.add(V));if(nt=typeof w.maxZoom=="number"?Math.min(w.maxZoom,nt):nt,nt===1/0)return{center:p.getCenter(),zoom:nt};var mt=V.subtract(D).divideBy(2),Lt=this.project(p.getSouthWest(),nt),ae=this.project(p.getNorthEast(),nt),fe=this.unproject(Lt.add(ae).divideBy(2).add(mt),nt);return{center:fe,zoom:nt}},fitBounds:function(p,w){if(p=Yt(p),!p.isValid())throw new Error("Bounds are not valid.");var D=this._getBoundsCenterZoom(p,w);return this.setView(D.center,D.zoom,w)},fitWorld:function(p){return this.fitBounds([[-90,-180],[90,180]],p)},panTo:function(p,w){return this.setView(p,this._zoom,{pan:w})},panBy:function(p,w){if(p=$t(p).round(),w=w||{},!p.x&&!p.y)return this.fire("moveend");if(w.animate!==!0&&!this.getSize().contains(p))return this._resetView(this.unproject(this.project(this.getCenter()).add(p)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ko,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),w.noMoveStart||this.fire("movestart"),w.animate!==!1){Tn(this._mapPane,"leaflet-pan-anim");var D=this._getMapPanePos().subtract(p).round();this._panAnim.run(this._mapPane,D,w.duration||.25,w.easeLinearity)}else this._rawPanBy(p),this.fire("move").fire("moveend");return this},flyTo:function(p,w,D){if(D=D||{},D.animate===!1||!ie.any3d)return this.setView(p,w,D);this._stop();var V=this.project(this.getCenter()),nt=this.project(p),mt=this.getSize(),Lt=this._zoom;p=ce(p),w=w===void 0?Lt:w;var ae=Math.max(mt.x,mt.y),fe=ae*this.getZoomScale(Lt,w),Ce=nt.distanceTo(V)||1,Qe=1.42,yn=Qe*Qe;function $n(zi){var hi=zi?-1:1,vi=zi?fe:ae,cl=fe*fe-ae*ae+hi*yn*yn*Ce*Ce,Uo=2*vi*yn*Ce,Vo=cl/Uo,Na=Math.sqrt(Vo*Vo+1)-Vo,Ls=Na<1e-9?-18:Math.log(Na);return Ls}function ci(zi){return(Math.exp(zi)-Math.exp(-zi))/2}function Qi(zi){return(Math.exp(zi)+Math.exp(-zi))/2}function Je(zi){return ci(zi)/Qi(zi)}var Ge=$n(0);function ri(zi){return ae*(Qi(Ge)/Qi(Ge+Qe*zi))}function Xn(zi){return ae*(Qi(Ge)*Je(Ge+Qe*zi)-ci(Ge))/yn}function uo(zi){return 1-Math.pow(1-zi,1.5)}var oi=Date.now(),uu=($n(1)-Ge)/Qe,Pr=D.duration?1e3*D.duration:1e3*uu*.8;function wc(){var zi=(Date.now()-oi)/Pr,hi=uo(zi)*uu;zi<=1?(this._flyToFrame=wt(wc,this),this._move(this.unproject(V.add(nt.subtract(V).multiplyBy(Xn(hi)/Ce)),Lt),this.getScaleZoom(ae/ri(hi),Lt),{flyTo:!0})):this._move(p,w)._moveEnd(!0)}return this._moveStart(!0,D.noMoveStart),wc.call(this),this},flyToBounds:function(p,w){var D=this._getBoundsCenterZoom(p,w);return this.flyTo(D.center,D.zoom,w)},setMaxBounds:function(p){return p=Yt(p),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),p.isValid()?(this.options.maxBounds=p,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(p){var w=this.options.minZoom;return this.options.minZoom=p,this._loaded&&w!==p&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(p):this},setMaxZoom:function(p){var w=this.options.maxZoom;return this.options.maxZoom=p,this._loaded&&w!==p&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(p):this},panInsideBounds:function(p,w){this._enforcingBounds=!0;var D=this.getCenter(),V=this._limitCenter(D,this._zoom,Yt(p));return D.equals(V)||this.panTo(V,w),this._enforcingBounds=!1,this},panInside:function(p,w){w=w||{};var D=$t(w.paddingTopLeft||w.padding||[0,0]),V=$t(w.paddingBottomRight||w.padding||[0,0]),nt=this.project(this.getCenter()),mt=this.project(p),Lt=this.getPixelBounds(),ae=St([Lt.min.add(D),Lt.max.subtract(V)]),fe=ae.getSize();if(!ae.contains(mt)){this._enforcingBounds=!0;var Ce=mt.subtract(ae.getCenter()),Qe=ae.extend(mt).getSize().subtract(fe);nt.x+=Ce.x<0?-Qe.x:Qe.x,nt.y+=Ce.y<0?-Qe.y:Qe.y,this.panTo(this.unproject(nt),w),this._enforcingBounds=!1}return this},invalidateSize:function(p){if(!this._loaded)return this;p=r({animate:!1,pan:!0},p===!0?{animate:!0}:p);var w=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var D=this.getSize(),V=w.divideBy(2).round(),nt=D.divideBy(2).round(),mt=V.subtract(nt);return!mt.x&&!mt.y?this:(p.animate&&p.pan?this.panBy(mt):(p.pan&&this._rawPanBy(mt),this.fire("move"),p.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:w,newSize:D}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(p){if(p=this._locateOptions=r({timeout:1e4,watch:!1},p),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var w=f(this._handleGeolocationResponse,this),D=f(this._handleGeolocationError,this);return p.watch?this._locationWatchId=navigator.geolocation.watchPosition(w,D,p):navigator.geolocation.getCurrentPosition(w,D,p),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(p){if(this._container._leaflet_id){var w=p.code,D=p.message||(w===1?"permission denied":w===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:w,message:"Geolocation error: "+D+"."})}},_handleGeolocationResponse:function(p){if(this._container._leaflet_id){var w=p.coords.latitude,D=p.coords.longitude,V=new le(w,D),nt=V.toBounds(p.coords.accuracy*2),mt=this._locateOptions;if(mt.setView){var Lt=this.getBoundsZoom(nt);this.setView(V,mt.maxZoom?Math.min(Lt,mt.maxZoom):Lt)}var ae={latlng:V,bounds:nt,timestamp:p.timestamp};for(var fe in p.coords)typeof p.coords[fe]=="number"&&(ae[fe]=p.coords[fe]);this.fire("locationfound",ae)}},addHandler:function(p,w){if(!w)return this;var D=this[p]=new w(this);return this._handlers.push(D),this.options[p]&&D.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Rn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ct(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var p;for(p in this._layers)this._layers[p].remove();for(p in this._panes)Rn(this._panes[p]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(p,w){var D="leaflet-pane"+(p?" leaflet-"+p.replace("Pane","")+"-pane":""),V=Pn("div",D,w||this._mapPane);return p&&(this._panes[p]=V),V},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var p=this.getPixelBounds(),w=this.unproject(p.getBottomLeft()),D=this.unproject(p.getTopRight());return new jt(w,D)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(p,w,D){p=Yt(p),D=$t(D||[0,0]);var V=this.getZoom()||0,nt=this.getMinZoom(),mt=this.getMaxZoom(),Lt=p.getNorthWest(),ae=p.getSouthEast(),fe=this.getSize().subtract(D),Ce=St(this.project(ae,V),this.project(Lt,V)).getSize(),Qe=ie.any3d?this.options.zoomSnap:1,yn=fe.x/Ce.x,$n=fe.y/Ce.y,ci=w?Math.max(yn,$n):Math.min(yn,$n);return V=this.getScaleZoom(ci,V),Qe&&(V=Math.round(V/(Qe/100))*(Qe/100),V=w?Math.ceil(V/Qe)*Qe:Math.floor(V/Qe)*Qe),Math.max(nt,Math.min(mt,V))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Bt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(p,w){var D=this._getTopLeftPoint(p,w);return new ft(D,D.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(p){return this.options.crs.getProjectedBounds(p===void 0?this.getZoom():p)},getPane:function(p){return typeof p=="string"?this._panes[p]:p},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(p,w){var D=this.options.crs;return w=w===void 0?this._zoom:w,D.scale(p)/D.scale(w)},getScaleZoom:function(p,w){var D=this.options.crs;w=w===void 0?this._zoom:w;var V=D.zoom(p*D.scale(w));return isNaN(V)?1/0:V},project:function(p,w){return w=w===void 0?this._zoom:w,this.options.crs.latLngToPoint(ce(p),w)},unproject:function(p,w){return w=w===void 0?this._zoom:w,this.options.crs.pointToLatLng($t(p),w)},layerPointToLatLng:function(p){var w=$t(p).add(this.getPixelOrigin());return this.unproject(w)},latLngToLayerPoint:function(p){var w=this.project(ce(p))._round();return w._subtract(this.getPixelOrigin())},wrapLatLng:function(p){return this.options.crs.wrapLatLng(ce(p))},wrapLatLngBounds:function(p){return this.options.crs.wrapLatLngBounds(Yt(p))},distance:function(p,w){return this.options.crs.distance(ce(p),ce(w))},containerPointToLayerPoint:function(p){return $t(p).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(p){return $t(p).add(this._getMapPanePos())},containerPointToLatLng:function(p){var w=this.containerPointToLayerPoint($t(p));return this.layerPointToLatLng(w)},latLngToContainerPoint:function(p){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(p)))},mouseEventToContainerPoint:function(p){return il(p,this._container)},mouseEventToLayerPoint:function(p){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(p))},mouseEventToLatLng:function(p){return this.layerPointToLatLng(this.mouseEventToLayerPoint(p))},_initContainer:function(p){var w=this._container=ba(p);if(w){if(w._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Mn(w,"scroll",this._onScroll,this),this._containerId=y(w)},_initLayout:function(){var p=this._container;this._fadeAnimated=this.options.fadeAnimation&&ie.any3d,Tn(p,"leaflet-container"+(ie.touch?" leaflet-touch":"")+(ie.retina?" leaflet-retina":"")+(ie.ielt9?" leaflet-oldie":"")+(ie.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var w=Ou(p,"position");w!=="absolute"&&w!=="relative"&&w!=="fixed"&&w!=="sticky"&&(p.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var p=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ai(this._mapPane,new Bt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Tn(p.markerPane,"leaflet-zoom-hide"),Tn(p.shadowPane,"leaflet-zoom-hide"))},_resetView:function(p,w,D){Ai(this._mapPane,new Bt(0,0));var V=!this._loaded;this._loaded=!0,w=this._limitZoom(w),this.fire("viewprereset");var nt=this._zoom!==w;this._moveStart(nt,D)._move(p,w)._moveEnd(nt),this.fire("viewreset"),V&&this.fire("load")},_moveStart:function(p,w){return p&&this.fire("zoomstart"),w||this.fire("movestart"),this},_move:function(p,w,D,V){w===void 0&&(w=this._zoom);var nt=this._zoom!==w;return this._zoom=w,this._lastCenter=p,this._pixelOrigin=this._getNewPixelOrigin(p),V?D&&D.pinch&&this.fire("zoom",D):((nt||D&&D.pinch)&&this.fire("zoom",D),this.fire("move",D)),this},_moveEnd:function(p){return p&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ct(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(p){Ai(this._mapPane,this._getMapPanePos().subtract(p))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(p){this._targets={},this._targets[y(this._container)]=this;var w=p?gi:Mn;w(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&w(window,"resize",this._onResize,this),ie.any3d&&this.options.transform3DLimit&&(p?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ct(this._resizeRequest),this._resizeRequest=wt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var p=this._getMapPanePos();Math.max(Math.abs(p.x),Math.abs(p.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(p,w){for(var D=[],V,nt=w==="mouseout"||w==="mouseover",mt=p.target||p.srcElement,Lt=!1;mt;){if(V=this._targets[y(mt)],V&&(w==="click"||w==="preclick")&&this._draggableMoved(V)){Lt=!0;break}if(V&&V.listens(w,!0)&&(nt&&!Cs(mt,p)||(D.push(V),nt))||mt===this._container)break;mt=mt.parentNode}return!D.length&&!Lt&&!nt&&this.listens(w,!0)&&(D=[this]),D},_isClickDisabled:function(p){for(;p&&p!==this._container;){if(p._leaflet_disable_click)return!0;p=p.parentNode}},_handleDOMEvent:function(p){var w=p.target||p.srcElement;if(!(!this._loaded||w._leaflet_disable_events||p.type==="click"&&this._isClickDisabled(w))){var D=p.type;D==="mousedown"&&eu(w),this._fireDOMEvent(p,D)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(p,w,D){if(p.type==="click"){var V=r({},p);V.type="preclick",this._fireDOMEvent(V,V.type,D)}var nt=this._findEventTargets(p,w);if(D){for(var mt=[],Lt=0;Lt<D.length;Lt++)D[Lt].listens(w,!0)&&mt.push(D[Lt]);nt=mt.concat(nt)}if(nt.length){w==="contextmenu"&&$i(p);var ae=nt[0],fe={originalEvent:p};if(p.type!=="keypress"&&p.type!=="keydown"&&p.type!=="keyup"){var Ce=ae.getLatLng&&(!ae._radius||ae._radius<=10);fe.containerPoint=Ce?this.latLngToContainerPoint(ae.getLatLng()):this.mouseEventToContainerPoint(p),fe.layerPoint=this.containerPointToLayerPoint(fe.containerPoint),fe.latlng=Ce?ae.getLatLng():this.layerPointToLatLng(fe.layerPoint)}for(Lt=0;Lt<nt.length;Lt++)if(nt[Lt].fire(w,fe,!0),fe.originalEvent._stopped||nt[Lt].options.bubblingMouseEvents===!1&&tt(this._mouseEvents,w)!==-1)return}},_draggableMoved:function(p){return p=p.dragging&&p.dragging.enabled()?p:this,p.dragging&&p.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var p=0,w=this._handlers.length;p<w;p++)this._handlers[p].disable()},whenReady:function(p,w){return this._loaded?p.call(w||this,{target:this}):this.on("load",p,w),this},_getMapPanePos:function(){return Es(this._mapPane)||new Bt(0,0)},_moved:function(){var p=this._getMapPanePos();return p&&!p.equals([0,0])},_getTopLeftPoint:function(p,w){var D=p&&w!==void 0?this._getNewPixelOrigin(p,w):this.getPixelOrigin();return D.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(p,w){var D=this.getSize()._divideBy(2);return this.project(p,w)._subtract(D)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(p,w,D){var V=this._getNewPixelOrigin(D,w);return this.project(p,w)._subtract(V)},_latLngBoundsToNewLayerBounds:function(p,w,D){var V=this._getNewPixelOrigin(D,w);return St([this.project(p.getSouthWest(),w)._subtract(V),this.project(p.getNorthWest(),w)._subtract(V),this.project(p.getSouthEast(),w)._subtract(V),this.project(p.getNorthEast(),w)._subtract(V)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(p){return this.latLngToLayerPoint(p).subtract(this._getCenterLayerPoint())},_limitCenter:function(p,w,D){if(!D)return p;var V=this.project(p,w),nt=this.getSize().divideBy(2),mt=new ft(V.subtract(nt),V.add(nt)),Lt=this._getBoundsOffset(mt,D,w);return Math.abs(Lt.x)<=1&&Math.abs(Lt.y)<=1?p:this.unproject(V.add(Lt),w)},_limitOffset:function(p,w){if(!w)return p;var D=this.getPixelBounds(),V=new ft(D.min.add(p),D.max.add(p));return p.add(this._getBoundsOffset(V,w))},_getBoundsOffset:function(p,w,D){var V=St(this.project(w.getNorthEast(),D),this.project(w.getSouthWest(),D)),nt=V.min.subtract(p.min),mt=V.max.subtract(p.max),Lt=this._rebound(nt.x,-mt.x),ae=this._rebound(nt.y,-mt.y);return new Bt(Lt,ae)},_rebound:function(p,w){return p+w>0?Math.round(p-w)/2:Math.max(0,Math.ceil(p))-Math.max(0,Math.floor(w))},_limitZoom:function(p){var w=this.getMinZoom(),D=this.getMaxZoom(),V=ie.any3d?this.options.zoomSnap:1;return V&&(p=Math.round(p/V)*V),Math.max(w,Math.min(D,p))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(p,w){var D=this._getCenterOffset(p)._trunc();return(w&&w.animate)!==!0&&!this.getSize().contains(D)?!1:(this.panBy(D,w),!0)},_createAnimProxy:function(){var p=this._proxy=Pn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(p),this.on("zoomanim",function(w){var D=Ys,V=this._proxy.style[D];As(this._proxy,this.project(w.center,w.zoom),this.getZoomScale(w.zoom,1)),V===this._proxy.style[D]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Rn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var p=this.getCenter(),w=this.getZoom();As(this._proxy,this.project(p,w),this.getZoomScale(w,1))},_catchTransitionEnd:function(p){this._animatingZoom&&p.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(p,w,D){if(this._animatingZoom)return!0;if(D=D||{},!this._zoomAnimated||D.animate===!1||this._nothingToAnimate()||Math.abs(w-this._zoom)>this.options.zoomAnimationThreshold)return!1;var V=this.getZoomScale(w),nt=this._getCenterOffset(p)._divideBy(1-1/V);return D.animate!==!0&&!this.getSize().contains(nt)?!1:(wt(function(){this._moveStart(!0,D.noMoveStart||!1)._animateZoom(p,w,!0)},this),!0)},_animateZoom:function(p,w,D,V){this._mapPane&&(D&&(this._animatingZoom=!0,this._animateToCenter=p,this._animateToZoom=w,Tn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:p,zoom:w,noUpdate:V}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function zu(p,w){return new Jn(p,w)}var ra=ve.extend({options:{position:"topright"},initialize:function(p){q(this,p)},getPosition:function(){return this.options.position},setPosition:function(p){var w=this._map;return w&&w.removeControl(this),this.options.position=p,w&&w.addControl(this),this},getContainer:function(){return this._container},addTo:function(p){this.remove(),this._map=p;var w=this._container=this.onAdd(p),D=this.getPosition(),V=p._controlCorners[D];return Tn(w,"leaflet-control"),D.indexOf("bottom")!==-1?V.insertBefore(w,V.firstChild):V.appendChild(w),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Rn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(p){this._map&&p&&p.screenX>0&&p.screenY>0&&this._map.getContainer().focus()}}),Ps=function(p){return new ra(p)};Jn.include({addControl:function(p){return p.addTo(this),this},removeControl:function(p){return p.remove(),this},_initControlPos:function(){var p=this._controlCorners={},w="leaflet-",D=this._controlContainer=Pn("div",w+"control-container",this._container);function V(nt,mt){var Lt=w+nt+" "+w+mt;p[nt+mt]=Pn("div",Lt,D)}V("top","left"),V("top","right"),V("bottom","left"),V("bottom","right")},_clearControlPos:function(){for(var p in this._controlCorners)Rn(this._controlCorners[p]);Rn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Pl=ra.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(p,w,D,V){return D<V?-1:V<D?1:0}},initialize:function(p,w,D){q(this,D),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var V in p)this._addLayer(p[V],V);for(V in w)this._addLayer(w[V],V,!0)},onAdd:function(p){this._initLayout(),this._update(),this._map=p,p.on("zoomend",this._checkDisabledLayers,this);for(var w=0;w<this._layers.length;w++)this._layers[w].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(p){return ra.prototype.addTo.call(this,p),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(p,w){return this._addLayer(p,w),this._map?this._update():this},addOverlay:function(p,w){return this._addLayer(p,w,!0),this._map?this._update():this},removeLayer:function(p){p.off("add remove",this._onLayerChange,this);var w=this._getLayer(y(p));return w&&this._layers.splice(this._layers.indexOf(w),1),this._map?this._update():this},expand:function(){Tn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var p=this._map.getSize().y-(this._container.offsetTop+50);return p<this._section.clientHeight?(Tn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=p+"px"):zn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var p="leaflet-control-layers",w=this._container=Pn("div",p),D=this.options.collapsed;w.setAttribute("aria-haspopup",!0),Qs(w),Ia(w);var V=this._section=Pn("section",p+"-list");D&&(this._map.on("click",this.collapse,this),Mn(w,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var nt=this._layersLink=Pn("a",p+"-toggle",w);nt.href="#",nt.title="Layers",nt.setAttribute("role","button"),Mn(nt,{keydown:function(mt){mt.keyCode===13&&this._expandSafely()},click:function(mt){$i(mt),this._expandSafely()}},this),D||this.expand(),this._baseLayersList=Pn("div",p+"-base",V),this._separator=Pn("div",p+"-separator",V),this._overlaysList=Pn("div",p+"-overlays",V),w.appendChild(V)},_getLayer:function(p){for(var w=0;w<this._layers.length;w++)if(this._layers[w]&&y(this._layers[w].layer)===p)return this._layers[w]},_addLayer:function(p,w,D){this._map&&p.on("add remove",this._onLayerChange,this),this._layers.push({layer:p,name:w,overlay:D}),this.options.sortLayers&&this._layers.sort(f(function(V,nt){return this.options.sortFunction(V.layer,nt.layer,V.name,nt.name)},this)),this.options.autoZIndex&&p.setZIndex&&(this._lastZIndex++,p.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;wa(this._baseLayersList),wa(this._overlaysList),this._layerControlInputs=[];var p,w,D,V,nt=0;for(D=0;D<this._layers.length;D++)V=this._layers[D],this._addItem(V),w=w||V.overlay,p=p||!V.overlay,nt+=V.overlay?0:1;return this.options.hideSingleBase&&(p=p&&nt>1,this._baseLayersList.style.display=p?"":"none"),this._separator.style.display=w&&p?"":"none",this},_onLayerChange:function(p){this._handlingClick||this._update();var w=this._getLayer(y(p.target)),D=w.overlay?p.type==="add"?"overlayadd":"overlayremove":p.type==="add"?"baselayerchange":null;D&&this._map.fire(D,w)},_createRadioElement:function(p,w){var D='<input type="radio" class="leaflet-control-layers-selector" name="'+p+'"'+(w?' checked="checked"':"")+"/>",V=document.createElement("div");return V.innerHTML=D,V.firstChild},_addItem:function(p){var w=document.createElement("label"),D=this._map.hasLayer(p.layer),V;p.overlay?(V=document.createElement("input"),V.type="checkbox",V.className="leaflet-control-layers-selector",V.defaultChecked=D):V=this._createRadioElement("leaflet-base-layers_"+y(this),D),this._layerControlInputs.push(V),V.layerId=y(p.layer),Mn(V,"click",this._onInputClick,this);var nt=document.createElement("span");nt.innerHTML=" "+p.name;var mt=document.createElement("span");w.appendChild(mt),mt.appendChild(V),mt.appendChild(nt);var Lt=p.overlay?this._overlaysList:this._baseLayersList;return Lt.appendChild(w),this._checkDisabledLayers(),w},_onInputClick:function(){if(!this._preventClick){var p=this._layerControlInputs,w,D,V=[],nt=[];this._handlingClick=!0;for(var mt=p.length-1;mt>=0;mt--)w=p[mt],D=this._getLayer(w.layerId).layer,w.checked?V.push(D):w.checked||nt.push(D);for(mt=0;mt<nt.length;mt++)this._map.hasLayer(nt[mt])&&this._map.removeLayer(nt[mt]);for(mt=0;mt<V.length;mt++)this._map.hasLayer(V[mt])||this._map.addLayer(V[mt]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var p=this._layerControlInputs,w,D,V=this._map.getZoom(),nt=p.length-1;nt>=0;nt--)w=p[nt],D=this._getLayer(w.layerId).layer,w.disabled=D.options.minZoom!==void 0&&V<D.options.minZoom||D.options.maxZoom!==void 0&&V>D.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var p=this._section;this._preventClick=!0,Mn(p,"click",$i),this.expand();var w=this;setTimeout(function(){gi(p,"click",$i),w._preventClick=!1})}}),Lu=function(p,w,D){return new Pl(p,w,D)},gc=ra.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(p){var w="leaflet-control-zoom",D=Pn("div",w+" leaflet-bar"),V=this.options;return this._zoomInButton=this._createButton(V.zoomInText,V.zoomInTitle,w+"-in",D,this._zoomIn),this._zoomOutButton=this._createButton(V.zoomOutText,V.zoomOutTitle,w+"-out",D,this._zoomOut),this._updateDisabled(),p.on("zoomend zoomlevelschange",this._updateDisabled,this),D},onRemove:function(p){p.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(p){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(p.shiftKey?3:1))},_zoomOut:function(p){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(p.shiftKey?3:1))},_createButton:function(p,w,D,V,nt){var mt=Pn("a",D,V);return mt.innerHTML=p,mt.href="#",mt.title=w,mt.setAttribute("role","button"),mt.setAttribute("aria-label",w),Qs(mt),Mn(mt,"click",Ta),Mn(mt,"click",nt,this),Mn(mt,"click",this._refocusOnMap,this),mt},_updateDisabled:function(){var p=this._map,w="leaflet-disabled";zn(this._zoomInButton,w),zn(this._zoomOutButton,w),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||p._zoom===p.getMinZoom())&&(Tn(this._zoomOutButton,w),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||p._zoom===p.getMaxZoom())&&(Tn(this._zoomInButton,w),this._zoomInButton.setAttribute("aria-disabled","true"))}});Jn.mergeOptions({zoomControl:!0}),Jn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new gc,this.addControl(this.zoomControl))});var Kh=function(p){return new gc(p)},kl=ra.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(p){var w="leaflet-control-scale",D=Pn("div",w),V=this.options;return this._addScales(V,w+"-line",D),p.on(V.updateWhenIdle?"moveend":"move",this._update,this),p.whenReady(this._update,this),D},onRemove:function(p){p.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(p,w,D){p.metric&&(this._mScale=Pn("div",w,D)),p.imperial&&(this._iScale=Pn("div",w,D))},_update:function(){var p=this._map,w=p.getSize().y/2,D=p.distance(p.containerPointToLatLng([0,w]),p.containerPointToLatLng([this.options.maxWidth,w]));this._updateScales(D)},_updateScales:function(p){this.options.metric&&p&&this._updateMetric(p),this.options.imperial&&p&&this._updateImperial(p)},_updateMetric:function(p){var w=this._getRoundNum(p),D=w<1e3?w+" m":w/1e3+" km";this._updateScale(this._mScale,D,w/p)},_updateImperial:function(p){var w=p*3.2808399,D,V,nt;w>5280?(D=w/5280,V=this._getRoundNum(D),this._updateScale(this._iScale,V+" mi",V/D)):(nt=this._getRoundNum(w),this._updateScale(this._iScale,nt+" ft",nt/w))},_updateScale:function(p,w,D){p.style.width=Math.round(this.options.maxWidth*D)+"px",p.innerHTML=w},_getRoundNum:function(p){var w=Math.pow(10,(Math.floor(p)+"").length-1),D=p/w;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:1,w*D}}),Gc=function(p){return new kl(p)},Hf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Wc=ra.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ie.inlineSvg?Hf+" ":"")+"Leaflet</a>"},initialize:function(p){q(this,p),this._attributions={}},onAdd:function(p){p.attributionControl=this,this._container=Pn("div","leaflet-control-attribution"),Qs(this._container);for(var w in p._layers)p._layers[w].getAttribution&&this.addAttribution(p._layers[w].getAttribution());return this._update(),p.on("layeradd",this._addAttribution,this),this._container},onRemove:function(p){p.off("layeradd",this._addAttribution,this)},_addAttribution:function(p){p.layer.getAttribution&&(this.addAttribution(p.layer.getAttribution()),p.layer.once("remove",function(){this.removeAttribution(p.layer.getAttribution())},this))},setPrefix:function(p){return this.options.prefix=p,this._update(),this},addAttribution:function(p){return p?(this._attributions[p]||(this._attributions[p]=0),this._attributions[p]++,this._update(),this):this},removeAttribution:function(p){return p?(this._attributions[p]&&(this._attributions[p]--,this._update()),this):this},_update:function(){if(this._map){var p=[];for(var w in this._attributions)this._attributions[w]&&p.push(w);var D=[];this.options.prefix&&D.push(this.options.prefix),p.length&&D.push(p.join(", ")),this._container.innerHTML=D.join(' <span aria-hidden="true">|</span> ')}}});Jn.mergeOptions({attributionControl:!0}),Jn.addInitHook(function(){this.options.attributionControl&&new Wc().addTo(this)});var Zf=function(p){return new Wc(p)};ra.Layers=Pl,ra.Zoom=gc,ra.Scale=kl,ra.Attribution=Wc,Ps.layers=Lu,Ps.zoom=Kh,Ps.scale=Gc,Ps.attribution=Zf;var Js=ve.extend({initialize:function(p){this._map=p},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Js.addTo=function(p,w){return p.addHandler(w,this),this};var Gf={Events:Nt},Iu=ie.touch?"touchstart mousedown":"mousedown",ks=Pt.extend({options:{clickTolerance:3},initialize:function(p,w,D,V){q(this,V),this._element=p,this._dragStartTarget=w||p,this._preventOutline=D},enable:function(){this._enabled||(Mn(this._dragStartTarget,Iu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ks._dragging===this&&this.finishDrag(!0),gi(this._dragStartTarget,Iu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(p){if(this._enabled&&(this._moved=!1,!ni(this._element,"leaflet-zoom-anim"))){if(p.touches&&p.touches.length!==1){ks._dragging===this&&this.finishDrag();return}if(!(ks._dragging||p.shiftKey||p.which!==1&&p.button!==1&&!p.touches)&&(ks._dragging=this,this._preventOutline&&eu(this._element),pc(),Ya(),!this._moving)){this.fire("down");var w=p.touches?p.touches[0]:p,D=Du(this._element);this._startPoint=new Bt(w.clientX,w.clientY),this._startPos=Es(this._element),this._parentScale=el(D);var V=p.type==="mousedown";Mn(document,V?"mousemove":"touchmove",this._onMove,this),Mn(document,V?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(p){if(this._enabled){if(p.touches&&p.touches.length>1){this._moved=!0;return}var w=p.touches&&p.touches.length===1?p.touches[0]:p,D=new Bt(w.clientX,w.clientY)._subtract(this._startPoint);!D.x&&!D.y||Math.abs(D.x)+Math.abs(D.y)<this.options.clickTolerance||(D.x/=this._parentScale.x,D.y/=this._parentScale.y,$i(p),this._moved||(this.fire("dragstart"),this._moved=!0,Tn(document.body,"leaflet-dragging"),this._lastTarget=p.target||p.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Tn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(D),this._moving=!0,this._lastEvent=p,this._updatePosition())}},_updatePosition:function(){var p={originalEvent:this._lastEvent};this.fire("predrag",p),Ai(this._element,this._newPos),this.fire("drag",p)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(p){zn(document.body,"leaflet-dragging"),this._lastTarget&&(zn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),gi(document,"mousemove touchmove",this._onMove,this),gi(document,"mouseup touchend touchcancel",this._onUp,this),Al(),ds();var w=this._moved&&this._moving;this._moving=!1,ks._dragging=!1,w&&this.fire("dragend",{noInertia:p,distance:this._newPos.distanceTo(this._startPos)})}});function yc(p,w,D){var V,nt=[1,4,2,8],mt,Lt,ae,fe,Ce,Qe,yn,$n;for(mt=0,Qe=p.length;mt<Qe;mt++)p[mt]._code=yi(p[mt],w);for(ae=0;ae<4;ae++){for(yn=nt[ae],V=[],mt=0,Qe=p.length,Lt=Qe-1;mt<Qe;Lt=mt++)fe=p[mt],Ce=p[Lt],fe._code&yn?Ce._code&yn||($n=ti(Ce,fe,yn,w,D),$n._code=yi($n,w),V.push($n)):(Ce._code&yn&&($n=ti(Ce,fe,yn,w,D),$n._code=yi($n,w),V.push($n)),V.push(fe));p=V}return p}function _c(p,w){var D,V,nt,mt,Lt,ae,fe,Ce,Qe;if(!p||p.length===0)throw new Error("latlngs not passed");Ur(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var yn=ce([0,0]),$n=Yt(p),ci=$n.getNorthWest().distanceTo($n.getSouthWest())*$n.getNorthEast().distanceTo($n.getNorthWest());ci<1700&&(yn=rl(p));var Qi=p.length,Je=[];for(D=0;D<Qi;D++){var Ge=ce(p[D]);Je.push(w.project(ce([Ge.lat-yn.lat,Ge.lng-yn.lng])))}for(ae=fe=Ce=0,D=0,V=Qi-1;D<Qi;V=D++)nt=Je[D],mt=Je[V],Lt=nt.y*mt.x-mt.y*nt.x,fe+=(nt.x+mt.x)*Lt,Ce+=(nt.y+mt.y)*Lt,ae+=Lt*3;ae===0?Qe=Je[0]:Qe=[fe/ae,Ce/ae];var ri=w.unproject($t(Qe));return ce([ri.lat+yn.lat,ri.lng+yn.lng])}function rl(p){for(var w=0,D=0,V=0,nt=0;nt<p.length;nt++){var mt=ce(p[nt]);w+=mt.lat,D+=mt.lng,V++}return ce([w/V,D/V])}var vc={__proto__:null,clipPolygon:yc,polygonCenter:_c,centroid:rl};function Yc(p,w){if(!w||!p.length)return p.slice();var D=w*w;return p=nu(p,D),p=Xc(p,D),p}function xc(p,w,D){return Math.sqrt(Nn(p,w,D,!0))}function Ol(p,w,D){return Nn(p,w,D)}function Xc(p,w){var D=p.length,V=typeof Uint8Array<"u"?Uint8Array:Array,nt=new V(D);nt[0]=nt[D-1]=1,to(p,nt,w,0,D-1);var mt,Lt=[];for(mt=0;mt<D;mt++)nt[mt]&&Lt.push(p[mt]);return Lt}function to(p,w,D,V,nt){var mt=0,Lt,ae,fe;for(ae=V+1;ae<=nt-1;ae++)fe=Nn(p[ae],p[V],p[nt],!0),fe>mt&&(Lt=ae,mt=fe);mt>D&&(w[Lt]=1,to(p,w,D,V,Lt),to(p,w,D,Lt,nt))}function nu(p,w){for(var D=[p[0]],V=1,nt=0,mt=p.length;V<mt;V++)Wf(p[V],p[nt])>w&&(D.push(p[V]),nt=V);return nt<mt-1&&D.push(p[mt-1]),D}var Kc;function bc(p,w,D,V,nt){var mt=V?Kc:yi(p,D),Lt=yi(w,D),ae,fe,Ce;for(Kc=Lt;;){if(!(mt|Lt))return[p,w];if(mt&Lt)return!1;ae=mt||Lt,fe=ti(p,w,ae,D,nt),Ce=yi(fe,D),ae===mt?(p=fe,mt=Ce):(w=fe,Lt=Ce)}}function ti(p,w,D,V,nt){var mt=w.x-p.x,Lt=w.y-p.y,ae=V.min,fe=V.max,Ce,Qe;return D&8?(Ce=p.x+mt*(fe.y-p.y)/Lt,Qe=fe.y):D&4?(Ce=p.x+mt*(ae.y-p.y)/Lt,Qe=ae.y):D&2?(Ce=fe.x,Qe=p.y+Lt*(fe.x-p.x)/mt):D&1&&(Ce=ae.x,Qe=p.y+Lt*(ae.x-p.x)/mt),new Bt(Ce,Qe,nt)}function yi(p,w){var D=0;return p.x<w.min.x?D|=1:p.x>w.max.x&&(D|=2),p.y<w.min.y?D|=4:p.y>w.max.y&&(D|=8),D}function Wf(p,w){var D=w.x-p.x,V=w.y-p.y;return D*D+V*V}function Nn(p,w,D,V){var nt=w.x,mt=w.y,Lt=D.x-nt,ae=D.y-mt,fe=Lt*Lt+ae*ae,Ce;return fe>0&&(Ce=((p.x-nt)*Lt+(p.y-mt)*ae)/fe,Ce>1?(nt=D.x,mt=D.y):Ce>0&&(nt+=Lt*Ce,mt+=ae*Ce)),Lt=p.x-nt,ae=p.y-mt,V?Lt*Lt+ae*ae:new Bt(nt,mt)}function Ur(p){return!X(p[0])||typeof p[0][0]!="object"&&typeof p[0][0]<"u"}function Di(p){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ur(p)}function _i(p,w){var D,V,nt,mt,Lt,ae,fe,Ce;if(!p||p.length===0)throw new Error("latlngs not passed");Ur(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var Qe=ce([0,0]),yn=Yt(p),$n=yn.getNorthWest().distanceTo(yn.getSouthWest())*yn.getNorthEast().distanceTo(yn.getNorthWest());$n<1700&&(Qe=rl(p));var ci=p.length,Qi=[];for(D=0;D<ci;D++){var Je=ce(p[D]);Qi.push(w.project(ce([Je.lat-Qe.lat,Je.lng-Qe.lng])))}for(D=0,V=0;D<ci-1;D++)V+=Qi[D].distanceTo(Qi[D+1])/2;if(V===0)Ce=Qi[0];else for(D=0,mt=0;D<ci-1;D++)if(Lt=Qi[D],ae=Qi[D+1],nt=Lt.distanceTo(ae),mt+=nt,mt>V){fe=(mt-V)/nt,Ce=[ae.x-fe*(ae.x-Lt.x),ae.y-fe*(ae.y-Lt.y)];break}var Ge=w.unproject($t(Ce));return ce([Ge.lat+Qe.lat,Ge.lng+Qe.lng])}var Ru={__proto__:null,simplify:Yc,pointToSegmentDistance:xc,closestPointOnSegment:Ol,clipSegment:bc,_getEdgeIntersection:ti,_getBitCode:yi,_sqClosestPointOnSegment:Nn,isFlat:Ur,_flat:Di,polylineCenter:_i},Bu={project:function(p){return new Bt(p.lng,p.lat)},unproject:function(p){return new le(p.y,p.x)},bounds:new ft([-180,-90],[180,90])},iu={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ft([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(p){var w=Math.PI/180,D=this.R,V=p.lat*w,nt=this.R_MINOR/D,mt=Math.sqrt(1-nt*nt),Lt=mt*Math.sin(V),ae=Math.tan(Math.PI/4-V/2)/Math.pow((1-Lt)/(1+Lt),mt/2);return V=-D*Math.log(Math.max(ae,1e-10)),new Bt(p.lng*w*D,V)},unproject:function(p){for(var w=180/Math.PI,D=this.R,V=this.R_MINOR/D,nt=Math.sqrt(1-V*V),mt=Math.exp(-p.y/D),Lt=Math.PI/2-2*Math.atan(mt),ae=0,fe=.1,Ce;ae<15&&Math.abs(fe)>1e-7;ae++)Ce=nt*Math.sin(Lt),Ce=Math.pow((1-Ce)/(1+Ce),nt/2),fe=Math.PI/2-2*Math.atan(mt*Ce)-Lt,Lt+=fe;return new le(Lt*w,p.x*w/D)}},Nu={__proto__:null,LonLat:Bu,Mercator:iu,SphericalMercator:Le},ju=r({},Ie,{code:"EPSG:3395",projection:iu,transformation:(function(){var p=.5/(Math.PI*iu.R);return ge(p,.5,-p,.5)})()}),Fu=r({},Ie,{code:"EPSG:4326",projection:Bu,transformation:ge(1/180,1,-1/180,.5)}),Oo=r({},Oe,{projection:Bu,transformation:ge(1,0,-1,0),scale:function(p){return Math.pow(2,p)},zoom:function(p){return Math.log(p)/Math.LN2},distance:function(p,w){var D=w.lng-p.lng,V=w.lat-p.lat;return Math.sqrt(D*D+V*V)},infinite:!0});Oe.Earth=Ie,Oe.EPSG3395=ju,Oe.EPSG3857=nn,Oe.EPSG900913=qe,Oe.EPSG4326=Fu,Oe.Simple=Oo;var Qa=Pt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(p){return p.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(p){return p&&p.removeLayer(this),this},getPane:function(p){return this._map.getPane(p?this.options[p]||p:this.options.pane)},addInteractiveTarget:function(p){return this._map._targets[y(p)]=this,this},removeInteractiveTarget:function(p){return delete this._map._targets[y(p)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(p){var w=p.target;if(w.hasLayer(this)){if(this._map=w,this._zoomAnimated=w._zoomAnimated,this.getEvents){var D=this.getEvents();w.on(D,this),this.once("remove",function(){w.off(D,this)},this)}this.onAdd(w),this.fire("add"),w.fire("layeradd",{layer:this})}}});Jn.include({addLayer:function(p){if(!p._layerAdd)throw new Error("The provided object is not a Layer.");var w=y(p);return this._layers[w]?this:(this._layers[w]=p,p._mapToAdd=this,p.beforeAdd&&p.beforeAdd(this),this.whenReady(p._layerAdd,p),this)},removeLayer:function(p){var w=y(p);return this._layers[w]?(this._loaded&&p.onRemove(this),delete this._layers[w],this._loaded&&(this.fire("layerremove",{layer:p}),p.fire("remove")),p._map=p._mapToAdd=null,this):this},hasLayer:function(p){return y(p)in this._layers},eachLayer:function(p,w){for(var D in this._layers)p.call(w,this._layers[D]);return this},_addLayers:function(p){p=p?X(p)?p:[p]:[];for(var w=0,D=p.length;w<D;w++)this.addLayer(p[w])},_addZoomLimit:function(p){(!isNaN(p.options.maxZoom)||!isNaN(p.options.minZoom))&&(this._zoomBoundLayers[y(p)]=p,this._updateZoomLevels())},_removeZoomLimit:function(p){var w=y(p);this._zoomBoundLayers[w]&&(delete this._zoomBoundLayers[w],this._updateZoomLevels())},_updateZoomLevels:function(){var p=1/0,w=-1/0,D=this._getZoomSpan();for(var V in this._zoomBoundLayers){var nt=this._zoomBoundLayers[V].options;p=nt.minZoom===void 0?p:Math.min(p,nt.minZoom),w=nt.maxZoom===void 0?w:Math.max(w,nt.maxZoom)}this._layersMaxZoom=w===-1/0?void 0:w,this._layersMinZoom=p===1/0?void 0:p,D!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var eo=Qa.extend({initialize:function(p,w){q(this,w),this._layers={};var D,V;if(p)for(D=0,V=p.length;D<V;D++)this.addLayer(p[D])},addLayer:function(p){var w=this.getLayerId(p);return this._layers[w]=p,this._map&&this._map.addLayer(p),this},removeLayer:function(p){var w=p in this._layers?p:this.getLayerId(p);return this._map&&this._layers[w]&&this._map.removeLayer(this._layers[w]),delete this._layers[w],this},hasLayer:function(p){var w=typeof p=="number"?p:this.getLayerId(p);return w in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(p){var w=Array.prototype.slice.call(arguments,1),D,V;for(D in this._layers)V=this._layers[D],V[p]&&V[p].apply(V,w);return this},onAdd:function(p){this.eachLayer(p.addLayer,p)},onRemove:function(p){this.eachLayer(p.removeLayer,p)},eachLayer:function(p,w){for(var D in this._layers)p.call(w,this._layers[D]);return this},getLayer:function(p){return this._layers[p]},getLayers:function(){var p=[];return this.eachLayer(p.push,p),p},setZIndex:function(p){return this.invoke("setZIndex",p)},getLayerId:function(p){return y(p)}}),Uu=function(p,w){return new eo(p,w)},Ba=eo.extend({addLayer:function(p){return this.hasLayer(p)?this:(p.addEventParent(this),eo.prototype.addLayer.call(this,p),this.fire("layeradd",{layer:p}))},removeLayer:function(p){return this.hasLayer(p)?(p in this._layers&&(p=this._layers[p]),p.removeEventParent(this),eo.prototype.removeLayer.call(this,p),this.fire("layerremove",{layer:p})):this},setStyle:function(p){return this.invoke("setStyle",p)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var p=new jt;for(var w in this._layers){var D=this._layers[w];p.extend(D.getBounds?D.getBounds():D.getLatLng())}return p}}),Qh=function(p,w){return new Ba(p,w)},ps=ve.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(p){q(this,p)},createIcon:function(p){return this._createIcon("icon",p)},createShadow:function(p){return this._createIcon("shadow",p)},_createIcon:function(p,w){var D=this._getIconUrl(p);if(!D){if(p==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var V=this._createImg(D,w&&w.tagName==="IMG"?w:null);return this._setIconStyles(V,p),(this.options.crossOrigin||this.options.crossOrigin==="")&&(V.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),V},_setIconStyles:function(p,w){var D=this.options,V=D[w+"Size"];typeof V=="number"&&(V=[V,V]);var nt=$t(V),mt=$t(w==="shadow"&&D.shadowAnchor||D.iconAnchor||nt&&nt.divideBy(2,!0));p.className="leaflet-marker-"+w+" "+(D.className||""),mt&&(p.style.marginLeft=-mt.x+"px",p.style.marginTop=-mt.y+"px"),nt&&(p.style.width=nt.x+"px",p.style.height=nt.y+"px")},_createImg:function(p,w){return w=w||document.createElement("img"),w.src=p,w},_getIconUrl:function(p){return ie.retina&&this.options[p+"RetinaUrl"]||this.options[p+"Url"]}});function Vu(p){return new ps(p)}var ru=ps.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(p){return typeof ru.imagePath!="string"&&(ru.imagePath=this._detectIconPath()),(this.options.imagePath||ru.imagePath)+ps.prototype._getIconUrl.call(this,p)},_stripUrl:function(p){var w=function(D,V,nt){var mt=V.exec(D);return mt&&mt[nt]};return p=w(p,/^url\((['"])?(.+)\1\)$/,2),p&&w(p,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var p=Pn("div","leaflet-default-icon-path",document.body),w=Ou(p,"background-image")||Ou(p,"backgroundImage");if(document.body.removeChild(p),w=this._stripUrl(w),w)return w;var D=document.querySelector('link[href$="leaflet.css"]');return D?D.href.substring(0,D.href.length-11-1):""}}),al=Js.extend({initialize:function(p){this._marker=p},addHooks:function(){var p=this._marker._icon;this._draggable||(this._draggable=new ks(p,p,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Tn(p,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(p){var w=this._marker,D=w._map,V=this._marker.options.autoPanSpeed,nt=this._marker.options.autoPanPadding,mt=Es(w._icon),Lt=D.getPixelBounds(),ae=D.getPixelOrigin(),fe=St(Lt.min._subtract(ae).add(nt),Lt.max._subtract(ae).subtract(nt));if(!fe.contains(mt)){var Ce=$t((Math.max(fe.max.x,mt.x)-fe.max.x)/(Lt.max.x-fe.max.x)-(Math.min(fe.min.x,mt.x)-fe.min.x)/(Lt.min.x-fe.min.x),(Math.max(fe.max.y,mt.y)-fe.max.y)/(Lt.max.y-fe.max.y)-(Math.min(fe.min.y,mt.y)-fe.min.y)/(Lt.min.y-fe.min.y)).multiplyBy(V);D.panBy(Ce,{animate:!1}),this._draggable._newPos._add(Ce),this._draggable._startPos._add(Ce),Ai(w._icon,this._draggable._newPos),this._onDrag(p),this._panRequest=wt(this._adjustPan.bind(this,p))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(p){this._marker.options.autoPan&&(Ct(this._panRequest),this._panRequest=wt(this._adjustPan.bind(this,p)))},_onDrag:function(p){var w=this._marker,D=w._shadow,V=Es(w._icon),nt=w._map.layerPointToLatLng(V);D&&Ai(D,V),w._latlng=nt,p.latlng=nt,p.oldLatLng=this._oldLatLng,w.fire("move",p).fire("drag",p)},_onDragEnd:function(p){Ct(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",p)}}),Dl=Qa.extend({options:{icon:new ru,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(p,w){q(this,w),this._latlng=ce(p)},onAdd:function(p){this._zoomAnimated=this._zoomAnimated&&p.options.markerZoomAnimation,this._zoomAnimated&&p.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(p){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&p.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(p){var w=this._latlng;return this._latlng=ce(p),this.update(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},setZIndexOffset:function(p){return this.options.zIndexOffset=p,this.update()},getIcon:function(){return this.options.icon},setIcon:function(p){return this.options.icon=p,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var p=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(p)}return this},_initIcon:function(){var p=this.options,w="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),D=p.icon.createIcon(this._icon),V=!1;D!==this._icon&&(this._icon&&this._removeIcon(),V=!0,p.title&&(D.title=p.title),D.tagName==="IMG"&&(D.alt=p.alt||"")),Tn(D,w),p.keyboard&&(D.tabIndex="0",D.setAttribute("role","button")),this._icon=D,p.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mn(D,"focus",this._panOnFocus,this);var nt=p.icon.createShadow(this._shadow),mt=!1;nt!==this._shadow&&(this._removeShadow(),mt=!0),nt&&(Tn(nt,w),nt.alt=""),this._shadow=nt,p.opacity<1&&this._updateOpacity(),V&&this.getPane().appendChild(this._icon),this._initInteraction(),nt&&mt&&this.getPane(p.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gi(this._icon,"focus",this._panOnFocus,this),Rn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Rn(this._shadow),this._shadow=null},_setPos:function(p){this._icon&&Ai(this._icon,p),this._shadow&&Ai(this._shadow,p),this._zIndex=p.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(p){this._icon&&(this._icon.style.zIndex=this._zIndex+p)},_animateZoom:function(p){var w=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center).round();this._setPos(w)},_initInteraction:function(){if(this.options.interactive&&(Tn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),al)){var p=this.options.draggable;this.dragging&&(p=this.dragging.enabled(),this.dragging.disable()),this.dragging=new al(this),p&&this.dragging.enable()}},setOpacity:function(p){return this.options.opacity=p,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var p=this.options.opacity;this._icon&&Vi(this._icon,p),this._shadow&&Vi(this._shadow,p)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var p=this._map;if(p){var w=this.options.icon.options,D=w.iconSize?$t(w.iconSize):$t(0,0),V=w.iconAnchor?$t(w.iconAnchor):$t(0,0);p.panInside(this._latlng,{paddingTopLeft:V,paddingBottomRight:D.subtract(V)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Qc(p,w){return new Dl(p,w)}var Os=Qa.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(p){this._renderer=p.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(p){return q(this,p),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&p&&Object.prototype.hasOwnProperty.call(p,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),no=Os.extend({options:{fill:!0,radius:10},initialize:function(p,w){q(this,w),this._latlng=ce(p),this._radius=this.options.radius},setLatLng:function(p){var w=this._latlng;return this._latlng=ce(p),this.redraw(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(p){return this.options.radius=this._radius=p,this.redraw()},getRadius:function(){return this._radius},setStyle:function(p){var w=p&&p.radius||this._radius;return Os.prototype.setStyle.call(this,p),this.setRadius(w),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var p=this._radius,w=this._radiusY||p,D=this._clickTolerance(),V=[p+D,w+D];this._pxBounds=new ft(this._point.subtract(V),this._point.add(V))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(p){return p.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $u(p,w){return new no(p,w)}var zl=no.extend({initialize:function(p,w,D){if(typeof w=="number"&&(w=r({},D,{radius:w})),q(this,w),this._latlng=ce(p),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(p){return this._mRadius=p,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var p=[this._radius,this._radiusY||this._radius];return new jt(this._map.layerPointToLatLng(this._point.subtract(p)),this._map.layerPointToLatLng(this._point.add(p)))},setStyle:Os.prototype.setStyle,_project:function(){var p=this._latlng.lng,w=this._latlng.lat,D=this._map,V=D.options.crs;if(V.distance===Ie.distance){var nt=Math.PI/180,mt=this._mRadius/Ie.R/nt,Lt=D.project([w+mt,p]),ae=D.project([w-mt,p]),fe=Lt.add(ae).divideBy(2),Ce=D.unproject(fe).lat,Qe=Math.acos((Math.cos(mt*nt)-Math.sin(w*nt)*Math.sin(Ce*nt))/(Math.cos(w*nt)*Math.cos(Ce*nt)))/nt;(isNaN(Qe)||Qe===0)&&(Qe=mt/Math.cos(Math.PI/180*w)),this._point=fe.subtract(D.getPixelOrigin()),this._radius=isNaN(Qe)?0:fe.x-D.project([Ce,p-Qe]).x,this._radiusY=fe.y-Lt.y}else{var yn=V.unproject(V.project(this._latlng).subtract([this._mRadius,0]));this._point=D.latLngToLayerPoint(this._latlng),this._radius=this._point.x-D.latLngToLayerPoint(yn).x}this._updateBounds()}});function Jc(p,w,D){return new zl(p,w,D)}var ui=Os.extend({options:{smoothFactor:1,noClip:!1},initialize:function(p,w){q(this,w),this._setLatLngs(p)},getLatLngs:function(){return this._latlngs},setLatLngs:function(p){return this._setLatLngs(p),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(p){for(var w=1/0,D=null,V=Nn,nt,mt,Lt=0,ae=this._parts.length;Lt<ae;Lt++)for(var fe=this._parts[Lt],Ce=1,Qe=fe.length;Ce<Qe;Ce++){nt=fe[Ce-1],mt=fe[Ce];var yn=V(p,nt,mt,!0);yn<w&&(w=yn,D=V(p,nt,mt))}return D&&(D.distance=Math.sqrt(w)),D},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _i(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(p,w){return w=w||this._defaultShape(),p=ce(p),w.push(p),this._bounds.extend(p),this.redraw()},_setLatLngs:function(p){this._bounds=new jt,this._latlngs=this._convertLatLngs(p)},_defaultShape:function(){return Ur(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(p){for(var w=[],D=Ur(p),V=0,nt=p.length;V<nt;V++)D?(w[V]=ce(p[V]),this._bounds.extend(w[V])):w[V]=this._convertLatLngs(p[V]);return w},_project:function(){var p=new ft;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,p),this._bounds.isValid()&&p.isValid()&&(this._rawPxBounds=p,this._updateBounds())},_updateBounds:function(){var p=this._clickTolerance(),w=new Bt(p,p);this._rawPxBounds&&(this._pxBounds=new ft([this._rawPxBounds.min.subtract(w),this._rawPxBounds.max.add(w)]))},_projectLatlngs:function(p,w,D){var V=p[0]instanceof le,nt=p.length,mt,Lt;if(V){for(Lt=[],mt=0;mt<nt;mt++)Lt[mt]=this._map.latLngToLayerPoint(p[mt]),D.extend(Lt[mt]);w.push(Lt)}else for(mt=0;mt<nt;mt++)this._projectLatlngs(p[mt],w,D)},_clipPoints:function(){var p=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}var w=this._parts,D,V,nt,mt,Lt,ae,fe;for(D=0,nt=0,mt=this._rings.length;D<mt;D++)for(fe=this._rings[D],V=0,Lt=fe.length;V<Lt-1;V++)ae=bc(fe[V],fe[V+1],p,V,!0),ae&&(w[nt]=w[nt]||[],w[nt].push(ae[0]),(ae[1]!==fe[V+1]||V===Lt-2)&&(w[nt].push(ae[1]),nt++))}},_simplifyPoints:function(){for(var p=this._parts,w=this.options.smoothFactor,D=0,V=p.length;D<V;D++)p[D]=Yc(p[D],w)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(p,w){var D,V,nt,mt,Lt,ae,fe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(D=0,mt=this._parts.length;D<mt;D++)for(ae=this._parts[D],V=0,Lt=ae.length,nt=Lt-1;V<Lt;nt=V++)if(!(!w&&V===0)&&xc(p,ae[nt],ae[V])<=fe)return!0;return!1}});function Ll(p,w){return new ui(p,w)}ui._flat=Di;var Er=ui.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _c(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(p){var w=ui.prototype._convertLatLngs.call(this,p),D=w.length;return D>=2&&w[0]instanceof le&&w[0].equals(w[D-1])&&w.pop(),w},_setLatLngs:function(p){ui.prototype._setLatLngs.call(this,p),Ur(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ur(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var p=this._renderer._bounds,w=this.options.weight,D=new Bt(w,w);if(p=new ft(p.min.subtract(D),p.max.add(D)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}for(var V=0,nt=this._rings.length,mt;V<nt;V++)mt=yc(this._rings[V],p,!0),mt.length&&this._parts.push(mt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(p){var w=!1,D,V,nt,mt,Lt,ae,fe,Ce;if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(mt=0,fe=this._parts.length;mt<fe;mt++)for(D=this._parts[mt],Lt=0,Ce=D.length,ae=Ce-1;Lt<Ce;ae=Lt++)V=D[Lt],nt=D[ae],V.y>p.y!=nt.y>p.y&&p.x<(nt.x-V.x)*(p.y-V.y)/(nt.y-V.y)+V.x&&(w=!w);return w||ui.prototype._containsPoint.call(this,p,!0)}});function au(p,w){return new Er(p,w)}var Ja=Ba.extend({initialize:function(p,w){q(this,w),this._layers={},p&&this.addData(p)},addData:function(p){var w=X(p)?p:p.features,D,V,nt;if(w){for(D=0,V=w.length;D<V;D++)nt=w[D],(nt.geometries||nt.geometry||nt.features||nt.coordinates)&&this.addData(nt);return this}var mt=this.options;if(mt.filter&&!mt.filter(p))return this;var Lt=Cr(p,mt);return Lt?(Lt.feature=Hu(p),Lt.defaultOptions=Lt.options,this.resetStyle(Lt),mt.onEachFeature&&mt.onEachFeature(p,Lt),this.addLayer(Lt)):this},resetStyle:function(p){return p===void 0?this.eachLayer(this.resetStyle,this):(p.options=r({},p.defaultOptions),this._setLayerStyle(p,this.options.style),this)},setStyle:function(p){return this.eachLayer(function(w){this._setLayerStyle(w,p)},this)},_setLayerStyle:function(p,w){p.setStyle&&(typeof w=="function"&&(w=w(p.feature)),p.setStyle(w))}});function Cr(p,w){var D=p.type==="Feature"?p.geometry:p,V=D?D.coordinates:null,nt=[],mt=w&&w.pointToLayer,Lt=w&&w.coordsToLatLng||sl,ae,fe,Ce,Qe;if(!V&&!D)return null;switch(D.type){case"Point":return ae=Lt(V),ms(mt,p,ae,w);case"MultiPoint":for(Ce=0,Qe=V.length;Ce<Qe;Ce++)ae=Lt(V[Ce]),nt.push(ms(mt,p,ae,w));return new Ba(nt);case"LineString":case"MultiLineString":return fe=io(V,D.type==="LineString"?0:1,Lt),new ui(fe,w);case"Polygon":case"MultiPolygon":return fe=io(V,D.type==="Polygon"?1:2,Lt),new Er(fe,w);case"GeometryCollection":for(Ce=0,Qe=D.geometries.length;Ce<Qe;Ce++){var yn=Cr({geometry:D.geometries[Ce],type:"Feature",properties:p.properties},w);yn&&nt.push(yn)}return new Ba(nt);case"FeatureCollection":for(Ce=0,Qe=D.features.length;Ce<Qe;Ce++){var $n=Cr(D.features[Ce],w);$n&&nt.push($n)}return new Ba(nt);default:throw new Error("Invalid GeoJSON object.")}}function ms(p,w,D,V){return p?p(w,D):new Dl(D,V&&V.markersInheritOptions&&V)}function sl(p){return new le(p[1],p[0],p[2])}function io(p,w,D){for(var V=[],nt=0,mt=p.length,Lt;nt<mt;nt++)Lt=w?io(p[nt],w-1,D):(D||sl)(p[nt]),V.push(Lt);return V}function qu(p,w){return p=ce(p),p.alt!==void 0?[O(p.lng,w),O(p.lat,w),O(p.alt,w)]:[O(p.lng,w),O(p.lat,w)]}function su(p,w,D,V){for(var nt=[],mt=0,Lt=p.length;mt<Lt;mt++)nt.push(w?su(p[mt],Ur(p[mt])?0:w-1,D,V):qu(p[mt],V));return!w&&D&&nt.length>0&&nt.push(nt[0].slice()),nt}function Do(p,w){return p.feature?r({},p.feature,{geometry:w}):Hu(w)}function Hu(p){return p.type==="Feature"||p.type==="FeatureCollection"?p:{type:"Feature",properties:{},geometry:p}}var zo={toGeoJSON:function(p){return Do(this,{type:"Point",coordinates:qu(this.getLatLng(),p)})}};Dl.include(zo),zl.include(zo),no.include(zo),ui.include({toGeoJSON:function(p){var w=!Ur(this._latlngs),D=su(this._latlngs,w?1:0,!1,p);return Do(this,{type:(w?"Multi":"")+"LineString",coordinates:D})}}),Er.include({toGeoJSON:function(p){var w=!Ur(this._latlngs),D=w&&!Ur(this._latlngs[0]),V=su(this._latlngs,D?2:w?1:0,!0,p);return w||(V=[V]),Do(this,{type:(D?"Multi":"")+"Polygon",coordinates:V})}}),eo.include({toMultiPoint:function(p){var w=[];return this.eachLayer(function(D){w.push(D.toGeoJSON(p).geometry.coordinates)}),Do(this,{type:"MultiPoint",coordinates:w})},toGeoJSON:function(p){var w=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(w==="MultiPoint")return this.toMultiPoint(p);var D=w==="GeometryCollection",V=[];return this.eachLayer(function(nt){if(nt.toGeoJSON){var mt=nt.toGeoJSON(p);if(D)V.push(mt.geometry);else{var Lt=Hu(mt);Lt.type==="FeatureCollection"?V.push.apply(V,Lt.features):V.push(Lt)}}}),D?Do(this,{geometries:V,type:"GeometryCollection"}):{type:"FeatureCollection",features:V}}});function ts(p,w){return new Ja(p,w)}var Lo=ts,Vr=Qa.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(p,w,D){this._url=p,this._bounds=Yt(w),q(this,D)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Tn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Rn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(p){return this.options.opacity=p,this._image&&this._updateOpacity(),this},setStyle:function(p){return p.opacity&&this.setOpacity(p.opacity),this},bringToFront:function(){return this._map&&ir(this._image),this},bringToBack:function(){return this._map&&mi(this._image),this},setUrl:function(p){return this._url=p,this._image&&(this._image.src=p),this},setBounds:function(p){return this._bounds=Yt(p),this._map&&this._reset(),this},getEvents:function(){var p={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var p=this._url.tagName==="IMG",w=this._image=p?this._url:Pn("img");if(Tn(w,"leaflet-image-layer"),this._zoomAnimated&&Tn(w,"leaflet-zoom-animated"),this.options.className&&Tn(w,this.options.className),w.onselectstart=A,w.onmousemove=A,w.onload=f(this.fire,this,"load"),w.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),p){this._url=w.src;return}w.src=this._url,w.alt=this.options.alt},_animateZoom:function(p){var w=this._map.getZoomScale(p.zoom),D=this._map._latLngBoundsToNewLayerBounds(this._bounds,p.zoom,p.center).min;As(this._image,D,w)},_reset:function(){var p=this._image,w=new ft(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),D=w.getSize();Ai(p,w.min),p.style.width=D.x+"px",p.style.height=D.y+"px"},_updateOpacity:function(){Vi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var p=this.options.errorOverlayUrl;p&&this._url!==p&&(this._url=p,this._image.src=p)},getCenter:function(){return this._bounds.getCenter()}}),ou=function(p,w,D){return new Vr(p,w,D)},Io=Vr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var p=this._url.tagName==="VIDEO",w=this._image=p?this._url:Pn("video");if(Tn(w,"leaflet-image-layer"),this._zoomAnimated&&Tn(w,"leaflet-zoom-animated"),this.options.className&&Tn(w,this.options.className),w.onselectstart=A,w.onmousemove=A,w.onloadeddata=f(this.fire,this,"load"),p){for(var D=w.getElementsByTagName("source"),V=[],nt=0;nt<D.length;nt++)V.push(D[nt].src);this._url=D.length>0?V:[w.src];return}X(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(w.style,"objectFit")&&(w.style.objectFit="fill"),w.autoplay=!!this.options.autoplay,w.loop=!!this.options.loop,w.muted=!!this.options.muted,w.playsInline=!!this.options.playsInline;for(var mt=0;mt<this._url.length;mt++){var Lt=Pn("source");Lt.src=this._url[mt],w.appendChild(Lt)}}});function Il(p,w,D){return new Io(p,w,D)}var Zu=Vr.extend({_initImage:function(){var p=this._image=this._url;Tn(p,"leaflet-image-layer"),this._zoomAnimated&&Tn(p,"leaflet-zoom-animated"),this.options.className&&Tn(p,this.options.className),p.onselectstart=A,p.onmousemove=A}});function Ro(p,w,D){return new Zu(p,w,D)}var Wr=Qa.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(p,w){p&&(p instanceof le||X(p))?(this._latlng=ce(p),q(this,w)):(q(this,p),this._source=w),this.options.content&&(this._content=this.options.content)},openOn:function(p){return p=arguments.length?p:this._source._map,p.hasLayer(this)||p.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(p){return this._map?this.close():(arguments.length?this._source=p:p=this._source,this._prepareOpen(),this.openOn(p._map)),this},onAdd:function(p){this._zoomAnimated=p._zoomAnimated,this._container||this._initLayout(),p._fadeAnimated&&Vi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),p._fadeAnimated&&Vi(this._container,1),this.bringToFront(),this.options.interactive&&(Tn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(p){p._fadeAnimated?(Vi(this._container,0),this._removeTimeout=setTimeout(f(Rn,void 0,this._container),200)):Rn(this._container),this.options.interactive&&(zn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(p){return this._latlng=ce(p),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(p){return this._content=p,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var p={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ir(this._container),this},bringToBack:function(){return this._map&&mi(this._container),this},_prepareOpen:function(p){var w=this._source;if(!w._map)return!1;if(w instanceof Ba){w=null;var D=this._source._layers;for(var V in D)if(D[V]._map){w=D[V];break}if(!w)return!1;this._source=w}if(!p)if(w.getCenter)p=w.getCenter();else if(w.getLatLng)p=w.getLatLng();else if(w.getBounds)p=w.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(p),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var p=this._contentNode,w=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof w=="string")p.innerHTML=w;else{for(;p.hasChildNodes();)p.removeChild(p.firstChild);p.appendChild(w)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var p=this._map.latLngToLayerPoint(this._latlng),w=$t(this.options.offset),D=this._getAnchor();this._zoomAnimated?Ai(this._container,p.add(D)):w=w.add(p).add(D);var V=this._containerBottom=-w.y,nt=this._containerLeft=-Math.round(this._containerWidth/2)+w.x;this._container.style.bottom=V+"px",this._container.style.left=nt+"px"}},_getAnchor:function(){return[0,0]}});Jn.include({_initOverlay:function(p,w,D,V){var nt=w;return nt instanceof p||(nt=new p(V).setContent(w)),D&&nt.setLatLng(D),nt}}),Qa.include({_initOverlay:function(p,w,D,V){var nt=D;return nt instanceof p?(q(nt,V),nt._source=this):(nt=w&&!V?w:new p(V,this),nt.setContent(D)),nt}});var aa=Wr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(p){return p=arguments.length?p:this._source._map,!p.hasLayer(this)&&p._popup&&p._popup.options.autoClose&&p.removeLayer(p._popup),p._popup=this,Wr.prototype.openOn.call(this,p)},onAdd:function(p){Wr.prototype.onAdd.call(this,p),p.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Os||this._source.on("preclick",La))},onRemove:function(p){Wr.prototype.onRemove.call(this,p),p.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Os||this._source.off("preclick",La))},getEvents:function(){var p=Wr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(p.preclick=this.close),this.options.keepInView&&(p.moveend=this._adjustPan),p},_initLayout:function(){var p="leaflet-popup",w=this._container=Pn("div",p+" "+(this.options.className||"")+" leaflet-zoom-animated"),D=this._wrapper=Pn("div",p+"-content-wrapper",w);if(this._contentNode=Pn("div",p+"-content",D),Qs(w),Ia(this._contentNode),Mn(w,"contextmenu",La),this._tipContainer=Pn("div",p+"-tip-container",w),this._tip=Pn("div",p+"-tip",this._tipContainer),this.options.closeButton){var V=this._closeButton=Pn("a",p+"-close-button",w);V.setAttribute("role","button"),V.setAttribute("aria-label","Close popup"),V.href="#close",V.innerHTML='<span aria-hidden="true">&#215;</span>',Mn(V,"click",function(nt){$i(nt),this.close()},this)}},_updateLayout:function(){var p=this._contentNode,w=p.style;w.width="",w.whiteSpace="nowrap";var D=p.offsetWidth;D=Math.min(D,this.options.maxWidth),D=Math.max(D,this.options.minWidth),w.width=D+1+"px",w.whiteSpace="",w.height="";var V=p.offsetHeight,nt=this.options.maxHeight,mt="leaflet-popup-scrolled";nt&&V>nt?(w.height=nt+"px",Tn(p,mt)):zn(p,mt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(p){var w=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center),D=this._getAnchor();Ai(this._container,w.add(D))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var p=this._map,w=parseInt(Ou(this._container,"marginBottom"),10)||0,D=this._container.offsetHeight+w,V=this._containerWidth,nt=new Bt(this._containerLeft,-D-this._containerBottom);nt._add(Es(this._container));var mt=p.layerPointToContainerPoint(nt),Lt=$t(this.options.autoPanPadding),ae=$t(this.options.autoPanPaddingTopLeft||Lt),fe=$t(this.options.autoPanPaddingBottomRight||Lt),Ce=p.getSize(),Qe=0,yn=0;mt.x+V+fe.x>Ce.x&&(Qe=mt.x+V-Ce.x+fe.x),mt.x-Qe-ae.x<0&&(Qe=mt.x-ae.x),mt.y+D+fe.y>Ce.y&&(yn=mt.y+D-Ce.y+fe.y),mt.y-yn-ae.y<0&&(yn=mt.y-ae.y),(Qe||yn)&&(this.options.keepInView&&(this._autopanning=!0),p.fire("autopanstart").panBy([Qe,yn]))}},_getAnchor:function(){return $t(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ro=function(p,w){return new aa(p,w)};Jn.mergeOptions({closePopupOnClick:!0}),Jn.include({openPopup:function(p,w,D){return this._initOverlay(aa,p,w,D).openOn(this),this},closePopup:function(p){return p=arguments.length?p:this._popup,p&&p.close(),this}}),Qa.include({bindPopup:function(p,w){return this._popup=this._initOverlay(aa,this._popup,p,w),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(p){return this._popup&&(this instanceof Ba||(this._popup._source=this),this._popup._prepareOpen(p||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(p){return this._popup&&this._popup.setContent(p),this},getPopup:function(){return this._popup},_openPopup:function(p){if(!(!this._popup||!this._map)){Ta(p);var w=p.layer||p.target;if(this._popup._source===w&&!(w instanceof Os)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(p.latlng);return}this._popup._source=w,this.openPopup(p.latlng)}},_movePopup:function(p){this._popup.setLatLng(p.latlng)},_onKeyPress:function(p){p.originalEvent.keyCode===13&&this._openPopup(p)}});var ol=Wr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(p){Wr.prototype.onAdd.call(this,p),this.setOpacity(this.options.opacity),p.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(p){Wr.prototype.onRemove.call(this,p),p.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var p=Wr.prototype.getEvents.call(this);return this.options.permanent||(p.preclick=this.close),p},_initLayout:function(){var p="leaflet-tooltip",w=p+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pn("div",w),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(p){var w,D,V=this._map,nt=this._container,mt=V.latLngToContainerPoint(V.getCenter()),Lt=V.layerPointToContainerPoint(p),ae=this.options.direction,fe=nt.offsetWidth,Ce=nt.offsetHeight,Qe=$t(this.options.offset),yn=this._getAnchor();ae==="top"?(w=fe/2,D=Ce):ae==="bottom"?(w=fe/2,D=0):ae==="center"?(w=fe/2,D=Ce/2):ae==="right"?(w=0,D=Ce/2):ae==="left"?(w=fe,D=Ce/2):Lt.x<mt.x?(ae="right",w=0,D=Ce/2):(ae="left",w=fe+(Qe.x+yn.x)*2,D=Ce/2),p=p.subtract($t(w,D,!0)).add(Qe).add(yn),zn(nt,"leaflet-tooltip-right"),zn(nt,"leaflet-tooltip-left"),zn(nt,"leaflet-tooltip-top"),zn(nt,"leaflet-tooltip-bottom"),Tn(nt,"leaflet-tooltip-"+ae),Ai(nt,p)},_updatePosition:function(){var p=this._map.latLngToLayerPoint(this._latlng);this._setPosition(p)},setOpacity:function(p){this.options.opacity=p,this._container&&Vi(this._container,p)},_animateZoom:function(p){var w=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center);this._setPosition(w)},_getAnchor:function(){return $t(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Bo=function(p,w){return new ol(p,w)};Jn.include({openTooltip:function(p,w,D){return this._initOverlay(ol,p,w,D).openOn(this),this},closeTooltip:function(p){return p.close(),this}}),Qa.include({bindTooltip:function(p,w){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ol,this._tooltip,p,w),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(p){if(!(!p&&this._tooltipHandlersAdded)){var w=p?"off":"on",D={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?D.add=this._openTooltip:(D.mouseover=this._openTooltip,D.mouseout=this.closeTooltip,D.click=this._openTooltip,this._map?this._addFocusListeners():D.add=this._addFocusListeners),this._tooltip.options.sticky&&(D.mousemove=this._moveTooltip),this[w](D),this._tooltipHandlersAdded=!p}},openTooltip:function(p){return this._tooltip&&(this instanceof Ba||(this._tooltip._source=this),this._tooltip._prepareOpen(p)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(p){return this._tooltip&&this._tooltip.setContent(p),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(p){var w=typeof p.getElement=="function"&&p.getElement();w&&(Mn(w,"focus",function(){this._tooltip._source=p,this.openTooltip()},this),Mn(w,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(p){var w=typeof p.getElement=="function"&&p.getElement();w&&w.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(p){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var w=this;this._map.once("moveend",function(){w._openOnceFlag=!1,w._openTooltip(p)});return}this._tooltip._source=p.layer||p.target,this.openTooltip(this._tooltip.options.sticky?p.latlng:void 0)}},_moveTooltip:function(p){var w=p.latlng,D,V;this._tooltip.options.sticky&&p.originalEvent&&(D=this._map.mouseEventToContainerPoint(p.originalEvent),V=this._map.containerPointToLayerPoint(D),w=this._map.layerPointToLatLng(V)),this._tooltip.setLatLng(w)}});var ao=ps.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(p){var w=p&&p.tagName==="DIV"?p:document.createElement("div"),D=this.options;if(D.html instanceof Element?(wa(w),w.appendChild(D.html)):w.innerHTML=D.html!==!1?D.html:"",D.bgPos){var V=$t(D.bgPos);w.style.backgroundPosition=-V.x+"px "+-V.y+"px"}return this._setIconStyles(w,"icon"),w},createShadow:function(){return null}});function Yf(p){return new ao(p)}ps.Default=ru;var ll=Qa.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ie.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(p){q(this,p)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(p){p._addZoomLimit(this)},onRemove:function(p){this._removeAllTiles(),Rn(this._container),p._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ir(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(p){return this.options.opacity=p,this._updateOpacity(),this},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var p=this._clampZoom(this._map.getZoom());p!==this._tileZoom&&(this._tileZoom=p,this._updateLevels()),this._update()}return this},getEvents:function(){var p={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),p.move=this._onMove),this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},createTile:function(){return document.createElement("div")},getTileSize:function(){var p=this.options.tileSize;return p instanceof Bt?p:new Bt(p,p)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(p){for(var w=this.getPane().children,D=-p(-1/0,1/0),V=0,nt=w.length,mt;V<nt;V++)mt=w[V].style.zIndex,w[V]!==this._container&&mt&&(D=p(D,+mt));isFinite(D)&&(this.options.zIndex=D+p(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ie.ielt9){Vi(this._container,this.options.opacity);var p=+new Date,w=!1,D=!1;for(var V in this._tiles){var nt=this._tiles[V];if(!(!nt.current||!nt.loaded)){var mt=Math.min(1,(p-nt.loaded)/200);Vi(nt.el,mt),mt<1?w=!0:(nt.active?D=!0:this._onOpaqueTile(nt),nt.active=!0)}}D&&!this._noPrune&&this._pruneTiles(),w&&(Ct(this._fadeFrame),this._fadeFrame=wt(this._updateOpacity,this))}},_onOpaqueTile:A,_initContainer:function(){this._container||(this._container=Pn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var p=this._tileZoom,w=this.options.maxZoom;if(p!==void 0){for(var D in this._levels)D=Number(D),this._levels[D].el.children.length||D===p?(this._levels[D].el.style.zIndex=w-Math.abs(p-D),this._onUpdateLevel(D)):(Rn(this._levels[D].el),this._removeTilesAtZoom(D),this._onRemoveLevel(D),delete this._levels[D]);var V=this._levels[p],nt=this._map;return V||(V=this._levels[p]={},V.el=Pn("div","leaflet-tile-container leaflet-zoom-animated",this._container),V.el.style.zIndex=w,V.origin=nt.project(nt.unproject(nt.getPixelOrigin()),p).round(),V.zoom=p,this._setZoomTransform(V,nt.getCenter(),nt.getZoom()),A(V.el.offsetWidth),this._onCreateLevel(V)),this._level=V,V}},_onUpdateLevel:A,_onRemoveLevel:A,_onCreateLevel:A,_pruneTiles:function(){if(this._map){var p,w,D=this._map.getZoom();if(D>this.options.maxZoom||D<this.options.minZoom){this._removeAllTiles();return}for(p in this._tiles)w=this._tiles[p],w.retain=w.current;for(p in this._tiles)if(w=this._tiles[p],w.current&&!w.active){var V=w.coords;this._retainParent(V.x,V.y,V.z,V.z-5)||this._retainChildren(V.x,V.y,V.z,V.z+2)}for(p in this._tiles)this._tiles[p].retain||this._removeTile(p)}},_removeTilesAtZoom:function(p){for(var w in this._tiles)this._tiles[w].coords.z===p&&this._removeTile(w)},_removeAllTiles:function(){for(var p in this._tiles)this._removeTile(p)},_invalidateAll:function(){for(var p in this._levels)Rn(this._levels[p].el),this._onRemoveLevel(Number(p)),delete this._levels[p];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(p,w,D,V){var nt=Math.floor(p/2),mt=Math.floor(w/2),Lt=D-1,ae=new Bt(+nt,+mt);ae.z=+Lt;var fe=this._tileCoordsToKey(ae),Ce=this._tiles[fe];return Ce&&Ce.active?(Ce.retain=!0,!0):(Ce&&Ce.loaded&&(Ce.retain=!0),Lt>V?this._retainParent(nt,mt,Lt,V):!1)},_retainChildren:function(p,w,D,V){for(var nt=2*p;nt<2*p+2;nt++)for(var mt=2*w;mt<2*w+2;mt++){var Lt=new Bt(nt,mt);Lt.z=D+1;var ae=this._tileCoordsToKey(Lt),fe=this._tiles[ae];if(fe&&fe.active){fe.retain=!0;continue}else fe&&fe.loaded&&(fe.retain=!0);D+1<V&&this._retainChildren(nt,mt,D+1,V)}},_resetView:function(p){var w=p&&(p.pinch||p.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),w,w)},_animateZoom:function(p){this._setView(p.center,p.zoom,!0,p.noUpdate)},_clampZoom:function(p){var w=this.options;return w.minNativeZoom!==void 0&&p<w.minNativeZoom?w.minNativeZoom:w.maxNativeZoom!==void 0&&w.maxNativeZoom<p?w.maxNativeZoom:p},_setView:function(p,w,D,V){var nt=Math.round(w);this.options.maxZoom!==void 0&&nt>this.options.maxZoom||this.options.minZoom!==void 0&&nt<this.options.minZoom?nt=void 0:nt=this._clampZoom(nt);var mt=this.options.updateWhenZooming&&nt!==this._tileZoom;(!V||mt)&&(this._tileZoom=nt,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),nt!==void 0&&this._update(p),D||this._pruneTiles(),this._noPrune=!!D),this._setZoomTransforms(p,w)},_setZoomTransforms:function(p,w){for(var D in this._levels)this._setZoomTransform(this._levels[D],p,w)},_setZoomTransform:function(p,w,D){var V=this._map.getZoomScale(D,p.zoom),nt=p.origin.multiplyBy(V).subtract(this._map._getNewPixelOrigin(w,D)).round();ie.any3d?As(p.el,nt,V):Ai(p.el,nt)},_resetGrid:function(){var p=this._map,w=p.options.crs,D=this._tileSize=this.getTileSize(),V=this._tileZoom,nt=this._map.getPixelWorldBounds(this._tileZoom);nt&&(this._globalTileRange=this._pxBoundsToTileRange(nt)),this._wrapX=w.wrapLng&&!this.options.noWrap&&[Math.floor(p.project([0,w.wrapLng[0]],V).x/D.x),Math.ceil(p.project([0,w.wrapLng[1]],V).x/D.y)],this._wrapY=w.wrapLat&&!this.options.noWrap&&[Math.floor(p.project([w.wrapLat[0],0],V).y/D.x),Math.ceil(p.project([w.wrapLat[1],0],V).y/D.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(p){var w=this._map,D=w._animatingZoom?Math.max(w._animateToZoom,w.getZoom()):w.getZoom(),V=w.getZoomScale(D,this._tileZoom),nt=w.project(p,this._tileZoom).floor(),mt=w.getSize().divideBy(V*2);return new ft(nt.subtract(mt),nt.add(mt))},_update:function(p){var w=this._map;if(w){var D=this._clampZoom(w.getZoom());if(p===void 0&&(p=w.getCenter()),this._tileZoom!==void 0){var V=this._getTiledPixelBounds(p),nt=this._pxBoundsToTileRange(V),mt=nt.getCenter(),Lt=[],ae=this.options.keepBuffer,fe=new ft(nt.getBottomLeft().subtract([ae,-ae]),nt.getTopRight().add([ae,-ae]));if(!(isFinite(nt.min.x)&&isFinite(nt.min.y)&&isFinite(nt.max.x)&&isFinite(nt.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ce in this._tiles){var Qe=this._tiles[Ce].coords;(Qe.z!==this._tileZoom||!fe.contains(new Bt(Qe.x,Qe.y)))&&(this._tiles[Ce].current=!1)}if(Math.abs(D-this._tileZoom)>1){this._setView(p,D);return}for(var yn=nt.min.y;yn<=nt.max.y;yn++)for(var $n=nt.min.x;$n<=nt.max.x;$n++){var ci=new Bt($n,yn);if(ci.z=this._tileZoom,!!this._isValidTile(ci)){var Qi=this._tiles[this._tileCoordsToKey(ci)];Qi?Qi.current=!0:Lt.push(ci)}}if(Lt.sort(function(Ge,ri){return Ge.distanceTo(mt)-ri.distanceTo(mt)}),Lt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Je=document.createDocumentFragment();for($n=0;$n<Lt.length;$n++)this._addTile(Lt[$n],Je);this._level.el.appendChild(Je)}}}},_isValidTile:function(p){var w=this._map.options.crs;if(!w.infinite){var D=this._globalTileRange;if(!w.wrapLng&&(p.x<D.min.x||p.x>D.max.x)||!w.wrapLat&&(p.y<D.min.y||p.y>D.max.y))return!1}if(!this.options.bounds)return!0;var V=this._tileCoordsToBounds(p);return Yt(this.options.bounds).overlaps(V)},_keyToBounds:function(p){return this._tileCoordsToBounds(this._keyToTileCoords(p))},_tileCoordsToNwSe:function(p){var w=this._map,D=this.getTileSize(),V=p.scaleBy(D),nt=V.add(D),mt=w.unproject(V,p.z),Lt=w.unproject(nt,p.z);return[mt,Lt]},_tileCoordsToBounds:function(p){var w=this._tileCoordsToNwSe(p),D=new jt(w[0],w[1]);return this.options.noWrap||(D=this._map.wrapLatLngBounds(D)),D},_tileCoordsToKey:function(p){return p.x+":"+p.y+":"+p.z},_keyToTileCoords:function(p){var w=p.split(":"),D=new Bt(+w[0],+w[1]);return D.z=+w[2],D},_removeTile:function(p){var w=this._tiles[p];w&&(Rn(w.el),delete this._tiles[p],this.fire("tileunload",{tile:w.el,coords:this._keyToTileCoords(p)}))},_initTile:function(p){Tn(p,"leaflet-tile");var w=this.getTileSize();p.style.width=w.x+"px",p.style.height=w.y+"px",p.onselectstart=A,p.onmousemove=A,ie.ielt9&&this.options.opacity<1&&Vi(p,this.options.opacity)},_addTile:function(p,w){var D=this._getTilePos(p),V=this._tileCoordsToKey(p),nt=this.createTile(this._wrapCoords(p),f(this._tileReady,this,p));this._initTile(nt),this.createTile.length<2&&wt(f(this._tileReady,this,p,null,nt)),Ai(nt,D),this._tiles[V]={el:nt,coords:p,current:!0},w.appendChild(nt),this.fire("tileloadstart",{tile:nt,coords:p})},_tileReady:function(p,w,D){w&&this.fire("tileerror",{error:w,tile:D,coords:p});var V=this._tileCoordsToKey(p);D=this._tiles[V],D&&(D.loaded=+new Date,this._map._fadeAnimated?(Vi(D.el,0),Ct(this._fadeFrame),this._fadeFrame=wt(this._updateOpacity,this)):(D.active=!0,this._pruneTiles()),w||(Tn(D.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:D.el,coords:p})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ie.ielt9||!this._map._fadeAnimated?wt(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(p){return p.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(p){var w=new Bt(this._wrapX?x(p.x,this._wrapX):p.x,this._wrapY?x(p.y,this._wrapY):p.y);return w.z=p.z,w},_pxBoundsToTileRange:function(p){var w=this.getTileSize();return new ft(p.min.unscaleBy(w).floor(),p.max.unscaleBy(w).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var p in this._tiles)if(!this._tiles[p].loaded)return!1;return!0}});function th(p){return new ll(p)}var Ds=ll.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(p,w){this._url=p,w=q(this,w),w.detectRetina&&ie.retina&&w.maxZoom>0?(w.tileSize=Math.floor(w.tileSize/2),w.zoomReverse?(w.zoomOffset--,w.minZoom=Math.min(w.maxZoom,w.minZoom+1)):(w.zoomOffset++,w.maxZoom=Math.max(w.minZoom,w.maxZoom-1)),w.minZoom=Math.max(0,w.minZoom)):w.zoomReverse?w.minZoom=Math.min(w.maxZoom,w.minZoom):w.maxZoom=Math.max(w.minZoom,w.maxZoom),typeof w.subdomains=="string"&&(w.subdomains=w.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(p,w){return this._url===p&&w===void 0&&(w=!0),this._url=p,w||this.redraw(),this},createTile:function(p,w){var D=document.createElement("img");return Mn(D,"load",f(this._tileOnLoad,this,w,D)),Mn(D,"error",f(this._tileOnError,this,w,D)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(D.referrerPolicy=this.options.referrerPolicy),D.alt="",D.src=this.getTileUrl(p),D},getTileUrl:function(p){var w={r:ie.retina?"@2x":"",s:this._getSubdomain(p),x:p.x,y:p.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var D=this._globalTileRange.max.y-p.y;this.options.tms&&(w.y=D),w["-y"]=D}return W(this._url,r(w,this.options))},_tileOnLoad:function(p,w){ie.ielt9?setTimeout(f(p,this,null,w),0):p(null,w)},_tileOnError:function(p,w,D){var V=this.options.errorTileUrl;V&&w.getAttribute("src")!==V&&(w.src=V),p(D,w)},_onTileRemove:function(p){p.tile.onload=null},_getZoomForUrl:function(){var p=this._tileZoom,w=this.options.maxZoom,D=this.options.zoomReverse,V=this.options.zoomOffset;return D&&(p=w-p),p+V},_getSubdomain:function(p){var w=Math.abs(p.x+p.y)%this.options.subdomains.length;return this.options.subdomains[w]},_abortLoading:function(){var p,w;for(p in this._tiles)if(this._tiles[p].coords.z!==this._tileZoom&&(w=this._tiles[p].el,w.onload=A,w.onerror=A,!w.complete)){w.src=Q;var D=this._tiles[p].coords;Rn(w),delete this._tiles[p],this.fire("tileabort",{tile:w,coords:D})}},_removeTile:function(p){var w=this._tiles[p];if(w)return w.el.setAttribute("src",Q),ll.prototype._removeTile.call(this,p)},_tileReady:function(p,w,D){if(!(!this._map||D&&D.getAttribute("src")===Q))return ll.prototype._tileReady.call(this,p,w,D)}});function Yr(p,w){return new Ds(p,w)}var es=Ds.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(p,w){this._url=p;var D=r({},this.defaultWmsParams);for(var V in w)V in this.options||(D[V]=w[V]);w=q(this,w);var nt=w.detectRetina&&ie.retina?2:1,mt=this.getTileSize();D.width=mt.x*nt,D.height=mt.y*nt,this.wmsParams=D},onAdd:function(p){this._crs=this.options.crs||p.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var w=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[w]=this._crs.code,Ds.prototype.onAdd.call(this,p)},getTileUrl:function(p){var w=this._tileCoordsToNwSe(p),D=this._crs,V=St(D.project(w[0]),D.project(w[1])),nt=V.min,mt=V.max,Lt=(this._wmsVersion>=1.3&&this._crs===Fu?[nt.y,nt.x,mt.y,mt.x]:[nt.x,nt.y,mt.x,mt.y]).join(","),ae=Ds.prototype.getTileUrl.call(this,p);return ae+H(this.wmsParams,ae,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Lt},setParams:function(p,w){return r(this.wmsParams,p),w||this.redraw(),this}});function Ze(p,w){return new es(p,w)}Ds.WMS=es,Yr.wms=Ze;var Xr=Qa.extend({options:{padding:.1},initialize:function(p){q(this,p),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Tn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var p={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(p.zoomanim=this._onAnimZoom),p},_onAnimZoom:function(p){this._updateTransform(p.center,p.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(p,w){var D=this._map.getZoomScale(w,this._zoom),V=this._map.getSize().multiplyBy(.5+this.options.padding),nt=this._map.project(this._center,w),mt=V.multiplyBy(-D).add(nt).subtract(this._map._getNewPixelOrigin(p,w));ie.any3d?As(this._container,mt,D):Ai(this._container,mt)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var p in this._layers)this._layers[p]._reset()},_onZoomEnd:function(){for(var p in this._layers)this._layers[p]._project()},_updatePaths:function(){for(var p in this._layers)this._layers[p]._update()},_update:function(){var p=this.options.padding,w=this._map.getSize(),D=this._map.containerPointToLayerPoint(w.multiplyBy(-p)).round();this._bounds=new ft(D,D.add(w.multiplyBy(1+p*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zs=Xr.extend({options:{tolerance:0},getEvents:function(){var p=Xr.prototype.getEvents.call(this);return p.viewprereset=this._onViewPreReset,p},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Xr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var p=this._container=document.createElement("canvas");Mn(p,"mousemove",this._onMouseMove,this),Mn(p,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Mn(p,"mouseout",this._handleMouseOut,this),p._leaflet_disable_events=!0,this._ctx=p.getContext("2d")},_destroyContainer:function(){Ct(this._redrawRequest),delete this._ctx,Rn(this._container),gi(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var p;this._redrawBounds=null;for(var w in this._layers)p=this._layers[w],p._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xr.prototype._update.call(this);var p=this._bounds,w=this._container,D=p.getSize(),V=ie.retina?2:1;Ai(w,p.min),w.width=V*D.x,w.height=V*D.y,w.style.width=D.x+"px",w.style.height=D.y+"px",ie.retina&&this._ctx.scale(2,2),this._ctx.translate(-p.min.x,-p.min.y),this.fire("update")}},_reset:function(){Xr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(p){this._updateDashArray(p),this._layers[y(p)]=p;var w=p._order={layer:p,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=w),this._drawLast=w,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(p){this._requestRedraw(p)},_removePath:function(p){var w=p._order,D=w.next,V=w.prev;D?D.prev=V:this._drawLast=V,V?V.next=D:this._drawFirst=D,delete p._order,delete this._layers[y(p)],this._requestRedraw(p)},_updatePath:function(p){this._extendRedrawBounds(p),p._project(),p._update(),this._requestRedraw(p)},_updateStyle:function(p){this._updateDashArray(p),this._requestRedraw(p)},_updateDashArray:function(p){if(typeof p.options.dashArray=="string"){var w=p.options.dashArray.split(/[, ]+/),D=[],V,nt;for(nt=0;nt<w.length;nt++){if(V=Number(w[nt]),isNaN(V))return;D.push(V)}p.options._dashArray=D}else p.options._dashArray=p.options.dashArray},_requestRedraw:function(p){this._map&&(this._extendRedrawBounds(p),this._redrawRequest=this._redrawRequest||wt(this._redraw,this))},_extendRedrawBounds:function(p){if(p._pxBounds){var w=(p.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ft,this._redrawBounds.extend(p._pxBounds.min.subtract([w,w])),this._redrawBounds.extend(p._pxBounds.max.add([w,w]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var p=this._redrawBounds;if(p){var w=p.getSize();this._ctx.clearRect(p.min.x,p.min.y,w.x,w.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var p,w=this._redrawBounds;if(this._ctx.save(),w){var D=w.getSize();this._ctx.beginPath(),this._ctx.rect(w.min.x,w.min.y,D.x,D.y),this._ctx.clip()}this._drawing=!0;for(var V=this._drawFirst;V;V=V.next)p=V.layer,(!w||p._pxBounds&&p._pxBounds.intersects(w))&&p._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(p,w){if(this._drawing){var D,V,nt,mt,Lt=p._parts,ae=Lt.length,fe=this._ctx;if(ae){for(fe.beginPath(),D=0;D<ae;D++){for(V=0,nt=Lt[D].length;V<nt;V++)mt=Lt[D][V],fe[V?"lineTo":"moveTo"](mt.x,mt.y);w&&fe.closePath()}this._fillStroke(fe,p)}}},_updateCircle:function(p){if(!(!this._drawing||p._empty())){var w=p._point,D=this._ctx,V=Math.max(Math.round(p._radius),1),nt=(Math.max(Math.round(p._radiusY),1)||V)/V;nt!==1&&(D.save(),D.scale(1,nt)),D.beginPath(),D.arc(w.x,w.y/nt,V,0,Math.PI*2,!1),nt!==1&&D.restore(),this._fillStroke(D,p)}},_fillStroke:function(p,w){var D=w.options;D.fill&&(p.globalAlpha=D.fillOpacity,p.fillStyle=D.fillColor||D.color,p.fill(D.fillRule||"evenodd")),D.stroke&&D.weight!==0&&(p.setLineDash&&p.setLineDash(w.options&&w.options._dashArray||[]),p.globalAlpha=D.opacity,p.lineWidth=D.weight,p.strokeStyle=D.color,p.lineCap=D.lineCap,p.lineJoin=D.lineJoin,p.stroke())},_onClick:function(p){for(var w=this._map.mouseEventToLayerPoint(p),D,V,nt=this._drawFirst;nt;nt=nt.next)D=nt.layer,D.options.interactive&&D._containsPoint(w)&&(!(p.type==="click"||p.type==="preclick")||!this._map._draggableMoved(D))&&(V=D);this._fireEvent(V?[V]:!1,p)},_onMouseMove:function(p){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var w=this._map.mouseEventToLayerPoint(p);this._handleMouseHover(p,w)}},_handleMouseOut:function(p){var w=this._hoveredLayer;w&&(zn(this._container,"leaflet-interactive"),this._fireEvent([w],p,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(p,w){if(!this._mouseHoverThrottled){for(var D,V,nt=this._drawFirst;nt;nt=nt.next)D=nt.layer,D.options.interactive&&D._containsPoint(w)&&(V=D);V!==this._hoveredLayer&&(this._handleMouseOut(p),V&&(Tn(this._container,"leaflet-interactive"),this._fireEvent([V],p,"mouseover"),this._hoveredLayer=V)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,p),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(p,w,D){this._map._fireDOMEvent(w,D||w.type,p)},_bringToFront:function(p){var w=p._order;if(w){var D=w.next,V=w.prev;if(D)D.prev=V;else return;V?V.next=D:D&&(this._drawFirst=D),w.prev=this._drawLast,this._drawLast.next=w,w.next=null,this._drawLast=w,this._requestRedraw(p)}},_bringToBack:function(p){var w=p._order;if(w){var D=w.next,V=w.prev;if(V)V.next=D;else return;D?D.prev=V:V&&(this._drawLast=V),w.prev=null,w.next=this._drawFirst,this._drawFirst.prev=w,this._drawFirst=w,this._requestRedraw(p)}}});function so(p){return ie.canvas?new zs(p):null}var No=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(p){return document.createElement("<lvml:"+p+' class="lvml">')}}catch{}return function(p){return document.createElement("<"+p+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ye={_initContainer:function(){this._container=Pn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Xr.prototype._update.call(this),this.fire("update"))},_initPath:function(p){var w=p._container=No("shape");Tn(w,"leaflet-vml-shape "+(this.options.className||"")),w.coordsize="1 1",p._path=No("path"),w.appendChild(p._path),this._updateStyle(p),this._layers[y(p)]=p},_addPath:function(p){var w=p._container;this._container.appendChild(w),p.options.interactive&&p.addInteractiveTarget(w)},_removePath:function(p){var w=p._container;Rn(w),p.removeInteractiveTarget(w),delete this._layers[y(p)]},_updateStyle:function(p){var w=p._stroke,D=p._fill,V=p.options,nt=p._container;nt.stroked=!!V.stroke,nt.filled=!!V.fill,V.stroke?(w||(w=p._stroke=No("stroke")),nt.appendChild(w),w.weight=V.weight+"px",w.color=V.color,w.opacity=V.opacity,V.dashArray?w.dashStyle=X(V.dashArray)?V.dashArray.join(" "):V.dashArray.replace(/( *, *)/g," "):w.dashStyle="",w.endcap=V.lineCap.replace("butt","flat"),w.joinstyle=V.lineJoin):w&&(nt.removeChild(w),p._stroke=null),V.fill?(D||(D=p._fill=No("fill")),nt.appendChild(D),D.color=V.fillColor||V.color,D.opacity=V.fillOpacity):D&&(nt.removeChild(D),p._fill=null)},_updateCircle:function(p){var w=p._point.round(),D=Math.round(p._radius),V=Math.round(p._radiusY||D);this._setPath(p,p._empty()?"M0 0":"AL "+w.x+","+w.y+" "+D+","+V+" 0,"+65535*360)},_setPath:function(p,w){p._path.v=w},_bringToFront:function(p){ir(p._container)},_bringToBack:function(p){mi(p._container)}},gs=ie.vml?No:an,ul=Xr.extend({_initContainer:function(){this._container=gs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Rn(this._container),gi(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xr.prototype._update.call(this);var p=this._bounds,w=p.getSize(),D=this._container;(!this._svgSize||!this._svgSize.equals(w))&&(this._svgSize=w,D.setAttribute("width",w.x),D.setAttribute("height",w.y)),Ai(D,p.min),D.setAttribute("viewBox",[p.min.x,p.min.y,w.x,w.y].join(" ")),this.fire("update")}},_initPath:function(p){var w=p._path=gs("path");p.options.className&&Tn(w,p.options.className),p.options.interactive&&Tn(w,"leaflet-interactive"),this._updateStyle(p),this._layers[y(p)]=p},_addPath:function(p){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(p._path),p.addInteractiveTarget(p._path)},_removePath:function(p){Rn(p._path),p.removeInteractiveTarget(p._path),delete this._layers[y(p)]},_updatePath:function(p){p._project(),p._update()},_updateStyle:function(p){var w=p._path,D=p.options;w&&(D.stroke?(w.setAttribute("stroke",D.color),w.setAttribute("stroke-opacity",D.opacity),w.setAttribute("stroke-width",D.weight),w.setAttribute("stroke-linecap",D.lineCap),w.setAttribute("stroke-linejoin",D.lineJoin),D.dashArray?w.setAttribute("stroke-dasharray",D.dashArray):w.removeAttribute("stroke-dasharray"),D.dashOffset?w.setAttribute("stroke-dashoffset",D.dashOffset):w.removeAttribute("stroke-dashoffset")):w.setAttribute("stroke","none"),D.fill?(w.setAttribute("fill",D.fillColor||D.color),w.setAttribute("fill-opacity",D.fillOpacity),w.setAttribute("fill-rule",D.fillRule||"evenodd")):w.setAttribute("fill","none"))},_updatePoly:function(p,w){this._setPath(p,Ke(p._parts,w))},_updateCircle:function(p){var w=p._point,D=Math.max(Math.round(p._radius),1),V=Math.max(Math.round(p._radiusY),1)||D,nt="a"+D+","+V+" 0 1,0 ",mt=p._empty()?"M0 0":"M"+(w.x-D)+","+w.y+nt+D*2+",0 "+nt+-D*2+",0 ";this._setPath(p,mt)},_setPath:function(p,w){p._path.setAttribute("d",w)},_bringToFront:function(p){ir(p._path)},_bringToBack:function(p){mi(p._path)}});ie.vml&&ul.include(Ye);function Gu(p){return ie.svg||ie.vml?new ul(p):null}Jn.include({getRenderer:function(p){var w=p.options.renderer||this._getPaneRenderer(p.options.pane)||this.options.renderer||this._renderer;return w||(w=this._renderer=this._createRenderer()),this.hasLayer(w)||this.addLayer(w),w},_getPaneRenderer:function(p){if(p==="overlayPane"||p===void 0)return!1;var w=this._paneRenderers[p];return w===void 0&&(w=this._createRenderer({pane:p}),this._paneRenderers[p]=w),w},_createRenderer:function(p){return this.options.preferCanvas&&so(p)||Gu(p)}});var jo=Er.extend({initialize:function(p,w){Er.prototype.initialize.call(this,this._boundsToLatLngs(p),w)},setBounds:function(p){return this.setLatLngs(this._boundsToLatLngs(p))},_boundsToLatLngs:function(p){return p=Yt(p),[p.getSouthWest(),p.getNorthWest(),p.getNorthEast(),p.getSouthEast()]}});function Jh(p,w){return new jo(p,w)}ul.create=gs,ul.pointsToPath=Ke,Ja.geometryToLayer=Cr,Ja.coordsToLatLng=sl,Ja.coordsToLatLngs=io,Ja.latLngToCoords=qu,Ja.latLngsToCoords=su,Ja.getFeature=Do,Ja.asFeature=Hu,Jn.mergeOptions({boxZoom:!0});var Ma=Js.extend({initialize:function(p){this._map=p,this._container=p._container,this._pane=p._panes.overlayPane,this._resetStateTimeout=0,p.on("unload",this._destroy,this)},addHooks:function(){Mn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){gi(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Rn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(p){if(!p.shiftKey||p.which!==1&&p.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ya(),pc(),this._startPoint=this._map.mouseEventToContainerPoint(p),Mn(document,{contextmenu:Ta,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(p){this._moved||(this._moved=!0,this._box=Pn("div","leaflet-zoom-box",this._container),Tn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(p);var w=new ft(this._point,this._startPoint),D=w.getSize();Ai(this._box,w.min),this._box.style.width=D.x+"px",this._box.style.height=D.y+"px"},_finish:function(){this._moved&&(Rn(this._box),zn(this._container,"leaflet-crosshair")),ds(),Al(),gi(document,{contextmenu:Ta,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(p){if(!(p.which!==1&&p.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var w=new jt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(w).fire("boxzoomend",{boxZoomBounds:w})}},_onKeyDown:function(p){p.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Jn.addInitHook("addHandler","boxZoom",Ma),Jn.mergeOptions({doubleClickZoom:!0});var Wu=Js.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(p){var w=this._map,D=w.getZoom(),V=w.options.zoomDelta,nt=p.originalEvent.shiftKey?D-V:D+V;w.options.doubleClickZoom==="center"?w.setZoom(nt):w.setZoomAround(p.containerPoint,nt)}});Jn.addInitHook("addHandler","doubleClickZoom",Wu),Jn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var oo=Js.extend({addHooks:function(){if(!this._draggable){var p=this._map;this._draggable=new ks(p._mapPane,p._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),p.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),p.on("zoomend",this._onZoomEnd,this),p.whenReady(this._onZoomEnd,this))}Tn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zn(this._map._container,"leaflet-grab"),zn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var p=this._map;if(p._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var w=Yt(this._map.options.maxBounds);this._offsetLimit=St(this._map.latLngToContainerPoint(w.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(w.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;p.fire("movestart").fire("dragstart"),p.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(p){if(this._map.options.inertia){var w=this._lastTime=+new Date,D=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(D),this._times.push(w),this._prunePositions(w)}this._map.fire("move",p).fire("drag",p)},_prunePositions:function(p){for(;this._positions.length>1&&p-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var p=this._map.getSize().divideBy(2),w=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=w.subtract(p).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(p,w){return p-(p-w)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var p=this._draggable._newPos.subtract(this._draggable._startPos),w=this._offsetLimit;p.x<w.min.x&&(p.x=this._viscousLimit(p.x,w.min.x)),p.y<w.min.y&&(p.y=this._viscousLimit(p.y,w.min.y)),p.x>w.max.x&&(p.x=this._viscousLimit(p.x,w.max.x)),p.y>w.max.y&&(p.y=this._viscousLimit(p.y,w.max.y)),this._draggable._newPos=this._draggable._startPos.add(p)}},_onPreDragWrap:function(){var p=this._worldWidth,w=Math.round(p/2),D=this._initialWorldOffset,V=this._draggable._newPos.x,nt=(V-w+D)%p+w-D,mt=(V+w+D)%p-w-D,Lt=Math.abs(nt+D)<Math.abs(mt+D)?nt:mt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Lt},_onDragEnd:function(p){var w=this._map,D=w.options,V=!D.inertia||p.noInertia||this._times.length<2;if(w.fire("dragend",p),V)w.fire("moveend");else{this._prunePositions(+new Date);var nt=this._lastPos.subtract(this._positions[0]),mt=(this._lastTime-this._times[0])/1e3,Lt=D.easeLinearity,ae=nt.multiplyBy(Lt/mt),fe=ae.distanceTo([0,0]),Ce=Math.min(D.inertiaMaxSpeed,fe),Qe=ae.multiplyBy(Ce/fe),yn=Ce/(D.inertiaDeceleration*Lt),$n=Qe.multiplyBy(-yn/2).round();!$n.x&&!$n.y?w.fire("moveend"):($n=w._limitOffset($n,w.options.maxBounds),wt(function(){w.panBy($n,{duration:yn,easeLinearity:Lt,noMoveStart:!0,animate:!0})}))}}});Jn.addInitHook("addHandler","dragging",oo),Jn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Yu=Js.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(p){this._map=p,this._setPanDelta(p.options.keyboardPanDelta),this._setZoomDelta(p.options.zoomDelta)},addHooks:function(){var p=this._map._container;p.tabIndex<=0&&(p.tabIndex="0"),Mn(p,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),gi(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var p=document.body,w=document.documentElement,D=p.scrollTop||w.scrollTop,V=p.scrollLeft||w.scrollLeft;this._map._container.focus(),window.scrollTo(V,D)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(p){var w=this._panKeys={},D=this.keyCodes,V,nt;for(V=0,nt=D.left.length;V<nt;V++)w[D.left[V]]=[-1*p,0];for(V=0,nt=D.right.length;V<nt;V++)w[D.right[V]]=[p,0];for(V=0,nt=D.down.length;V<nt;V++)w[D.down[V]]=[0,p];for(V=0,nt=D.up.length;V<nt;V++)w[D.up[V]]=[0,-1*p]},_setZoomDelta:function(p){var w=this._zoomKeys={},D=this.keyCodes,V,nt;for(V=0,nt=D.zoomIn.length;V<nt;V++)w[D.zoomIn[V]]=p;for(V=0,nt=D.zoomOut.length;V<nt;V++)w[D.zoomOut[V]]=-p},_addHooks:function(){Mn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){gi(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(p){if(!(p.altKey||p.ctrlKey||p.metaKey)){var w=p.keyCode,D=this._map,V;if(w in this._panKeys){if(!D._panAnim||!D._panAnim._inProgress)if(V=this._panKeys[w],p.shiftKey&&(V=$t(V).multiplyBy(3)),D.options.maxBounds&&(V=D._limitOffset($t(V),D.options.maxBounds)),D.options.worldCopyJump){var nt=D.wrapLatLng(D.unproject(D.project(D.getCenter()).add(V)));D.panTo(nt)}else D.panBy(V)}else if(w in this._zoomKeys)D.setZoom(D.getZoom()+(p.shiftKey?3:1)*this._zoomKeys[w]);else if(w===27&&D._popup&&D._popup.options.closeOnEscapeKey)D.closePopup();else return;Ta(p)}}});Jn.addInitHook("addHandler","keyboard",Yu),Jn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Rl=Js.extend({addHooks:function(){Mn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){gi(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(p){var w=Oi(p),D=this._map.options.wheelDebounceTime;this._delta+=w,this._lastMousePos=this._map.mouseEventToContainerPoint(p),this._startTime||(this._startTime=+new Date);var V=Math.max(D-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),V),Ta(p)},_performZoom:function(){var p=this._map,w=p.getZoom(),D=this._map.options.zoomSnap||0;p._stop();var V=this._delta/(this._map.options.wheelPxPerZoomLevel*4),nt=4*Math.log(2/(1+Math.exp(-Math.abs(V))))/Math.LN2,mt=D?Math.ceil(nt/D)*D:nt,Lt=p._limitZoom(w+(this._delta>0?mt:-mt))-w;this._delta=0,this._startTime=null,Lt&&(p.options.scrollWheelZoom==="center"?p.setZoom(w+Lt):p.setZoomAround(this._lastMousePos,w+Lt))}});Jn.addInitHook("addHandler","scrollWheelZoom",Rl);var Fo=600;Jn.mergeOptions({tapHold:ie.touchNative&&ie.safari&&ie.mobile,tapTolerance:15});var lu=Js.extend({addHooks:function(){Mn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){gi(this._map._container,"touchstart",this._onDown,this)},_onDown:function(p){if(clearTimeout(this._holdTimeout),p.touches.length===1){var w=p.touches[0];this._startPos=this._newPos=new Bt(w.clientX,w.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(Mn(document,"touchend",$i),Mn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",w))},this),Fo),Mn(document,"touchend touchcancel contextmenu",this._cancel,this),Mn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function p(){gi(document,"touchend",$i),gi(document,"touchend touchcancel",p)},_cancel:function(){clearTimeout(this._holdTimeout),gi(document,"touchend touchcancel contextmenu",this._cancel,this),gi(document,"touchmove",this._onMove,this)},_onMove:function(p){var w=p.touches[0];this._newPos=new Bt(w.clientX,w.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(p,w){var D=new MouseEvent(p,{bubbles:!0,cancelable:!0,view:window,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY});D._simulated=!0,w.target.dispatchEvent(D)}});Jn.addInitHook("addHandler","tapHold",lu),Jn.mergeOptions({touchZoom:ie.touch,bounceAtZoomLimits:!0});var sa=Js.extend({addHooks:function(){Tn(this._map._container,"leaflet-touch-zoom"),Mn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zn(this._map._container,"leaflet-touch-zoom"),gi(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(p){var w=this._map;if(!(!p.touches||p.touches.length!==2||w._animatingZoom||this._zooming)){var D=w.mouseEventToContainerPoint(p.touches[0]),V=w.mouseEventToContainerPoint(p.touches[1]);this._centerPoint=w.getSize()._divideBy(2),this._startLatLng=w.containerPointToLatLng(this._centerPoint),w.options.touchZoom!=="center"&&(this._pinchStartLatLng=w.containerPointToLatLng(D.add(V)._divideBy(2))),this._startDist=D.distanceTo(V),this._startZoom=w.getZoom(),this._moved=!1,this._zooming=!0,w._stop(),Mn(document,"touchmove",this._onTouchMove,this),Mn(document,"touchend touchcancel",this._onTouchEnd,this),$i(p)}},_onTouchMove:function(p){if(!(!p.touches||p.touches.length!==2||!this._zooming)){var w=this._map,D=w.mouseEventToContainerPoint(p.touches[0]),V=w.mouseEventToContainerPoint(p.touches[1]),nt=D.distanceTo(V)/this._startDist;if(this._zoom=w.getScaleZoom(nt,this._startZoom),!w.options.bounceAtZoomLimits&&(this._zoom<w.getMinZoom()&&nt<1||this._zoom>w.getMaxZoom()&&nt>1)&&(this._zoom=w._limitZoom(this._zoom)),w.options.touchZoom==="center"){if(this._center=this._startLatLng,nt===1)return}else{var mt=D._add(V)._divideBy(2)._subtract(this._centerPoint);if(nt===1&&mt.x===0&&mt.y===0)return;this._center=w.unproject(w.project(this._pinchStartLatLng,this._zoom).subtract(mt),this._zoom)}this._moved||(w._moveStart(!0,!1),this._moved=!0),Ct(this._animRequest);var Lt=f(w._move,w,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=wt(Lt,this,!0),$i(p)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ct(this._animRequest),gi(document,"touchmove",this._onTouchMove,this),gi(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Jn.addInitHook("addHandler","touchZoom",sa),Jn.BoxZoom=Ma,Jn.DoubleClickZoom=Wu,Jn.Drag=oo,Jn.Keyboard=Yu,Jn.ScrollWheelZoom=Rl,Jn.TapHold=lu,Jn.TouchZoom=sa,n.Bounds=ft,n.Browser=ie,n.CRS=Oe,n.Canvas=zs,n.Circle=zl,n.CircleMarker=no,n.Class=ve,n.Control=ra,n.DivIcon=ao,n.DivOverlay=Wr,n.DomEvent=Cl,n.DomUtil=El,n.Draggable=ks,n.Evented=Pt,n.FeatureGroup=Ba,n.GeoJSON=Ja,n.GridLayer=ll,n.Handler=Js,n.Icon=ps,n.ImageOverlay=Vr,n.LatLng=le,n.LatLngBounds=jt,n.Layer=Qa,n.LayerGroup=eo,n.LineUtil=Ru,n.Map=Jn,n.Marker=Dl,n.Mixin=Gf,n.Path=Os,n.Point=Bt,n.PolyUtil=vc,n.Polygon=Er,n.Polyline=ui,n.Popup=aa,n.PosAnimation=ko,n.Projection=Nu,n.Rectangle=jo,n.Renderer=Xr,n.SVG=ul,n.SVGOverlay=Zu,n.TileLayer=Ds,n.Tooltip=ol,n.Transformation=Pe,n.Util=re,n.VideoOverlay=Io,n.bind=f,n.bounds=St,n.canvas=so,n.circle=Jc,n.circleMarker=$u,n.control=Ps,n.divIcon=Yf,n.extend=r,n.featureGroup=Qh,n.geoJSON=ts,n.geoJson=Lo,n.gridLayer=th,n.icon=Vu,n.imageOverlay=ou,n.latLng=ce,n.latLngBounds=Yt,n.layerGroup=Uu,n.map=zu,n.marker=Qc,n.point=$t,n.polygon=au,n.polyline=Ll,n.popup=ro,n.rectangle=Jh,n.setOptions=q,n.stamp=y,n.svg=Gu,n.svgOverlay=Ro,n.tileLayer=Yr,n.tooltip=Bo,n.transformation=ge,n.version=i,n.videoOverlay=Il;var lo=window.L;n.noConflict=function(){return window.L=lo,this},window.L=n}))})(ny,ny.exports)),ny.exports}var jy=UB();const NT=Pu(jy);function VB(t){return t.split(" ").filter(Boolean)}function $B(t,e){for(const n of VB(e))jy.DomUtil.addClass(t,n)}function Nk(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function jk(t,e){return e==null?function(i,r){const u=G.useRef(void 0);return u.current||(u.current=t(i,r)),u}:function(i,r){const u=G.useRef(void 0);u.current||(u.current=t(i,r));const f=G.useRef(i),{instance:a}=u.current;return G.useEffect(function(){f.current!==i&&(e(a,i,f.current),f.current=i)},[a,i,e]),u}}function Fk(t,e){G.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function qB(t){return function(n){const i=Y0(),r=t(gS(n,i),i);return LB(i.map,n.attribution),Bk(r.current,n.eventHandlers),Fk(r.current,i),r}}function HB(t,e){const n=G.useRef(void 0);G.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function ZB(t){return function(n){const i=Y0(),r=t(gS(n,i),i);return Bk(r.current,n.eventHandlers),Fk(r.current,i),HB(r.current,n),r}}function GB(t,e){const n=jk(t,e),i=ZB(n);return NB(i)}function WB(t,e){const n=jk(t,e),i=qB(n);return jB(i)}function YB(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function yS(){return Y0().map}function cb(t,e){const n=yS();return G.useEffect(function(){return n.on(t,e),function(){n.off(t,e)}},[n,t,e]),n}const hb=GB(function({data:e,...n},i){const r=new jy.GeoJSON(e,n);return Nk(r,BB(i,{overlayContainer:r}))},function(e,n,i){n.style!==i.style&&(n.style==null?e.resetStyle():e.setStyle(n.style))});function XB({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:u,placeholder:f,style:a,whenReady:y,zoom:_,...x},A){const[O]=G.useState({className:r,id:u,style:a}),[I,F]=G.useState(null),q=G.useRef(void 0);G.useImperativeHandle(A,()=>I?.map??null,[I]);const H=G.useCallback(W=>{if(W!==null&&!q.current){const X=new jy.Map(W,x);q.current=X,n!=null&&_!=null?X.setView(n,_):t!=null&&X.fitBounds(t,e),y!=null&&X.whenReady(y),F(RB(X))}},[]);G.useEffect(()=>()=>{I?.map.remove()},[I]);const K=I?my.createElement(W0,{value:I},i):f??null;return my.createElement("div",{...O,ref:H},K)}const KB=G.forwardRef(XB),QB=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"];function jT(t,e){const{[e]:n,...i}=t;return i}function JB(t,e,n){if(QB.indexOf(t)!==-1)throw new Error(`You must use a unique name for a pane that is not a default Leaflet pane: ${t}`);if(n.map.getPane(t)!=null)throw new Error(`A pane with this name already exists: ${t}`);const i=e.pane??n.pane,r=i?n.map.getPane(i):void 0,u=n.map.createPane(t,r);if(e.className!=null&&$B(u,e.className),e.style!=null)for(const f of Object.keys(e.style))u.style[f]=e.style[f];return u}function t5(t,e){const[n]=G.useState(t.name),[i,r]=G.useState(null);G.useImperativeHandle(e,()=>i,[i]);const u=Y0(),f=G.useMemo(()=>({...u,pane:n}),[u]);return G.useEffect(()=>(r(JB(n,t,u)),function(){u.map.getPane(n)?.remove?.(),u.map._panes!=null&&(u.map._panes=jT(u.map._panes,n),u.map._paneRenderers=jT(u.map._paneRenderers,n))}),[]),t.children!=null&&i!=null?Ny.createPortal(my.createElement(W0,{value:f},t.children),i):null}const fb=G.forwardRef(t5),e5=WB(function({url:e,...n},i){const r=new jy.TileLayer(e,gS(n,i));return Nk(r,i)},function(e,n,i){YB(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});function Uk(t,e,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function ow(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!FT(t[0])||!FT(t[1]))throw new Error("coordinates must contain numbers");return Uk({type:"Point",coordinates:t},e,n)}function n5(t,e,n={}){for(const r of t){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let u=0;u<r[r.length-1].length;u++)if(r[r.length-1][u]!==r[0][u])throw new Error("First and last Position are not equivalent.")}return Uk({type:"Polygon",coordinates:t},e,n)}function FT(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function X0(t,e,n){if(t!==null)for(var i,r,u,f,a,y,_,x=0,A=0,O,I=t.type,F=I==="FeatureCollection",q=I==="Feature",H=F?t.features.length:1,K=0;K<H;K++){_=F?t.features[K].geometry:q?t.geometry:t,O=_?_.type==="GeometryCollection":!1,a=O?_.geometries.length:1;for(var W=0;W<a;W++){var X=0,tt=0;if(f=O?_.geometries[W]:_,f!==null){y=f.coordinates;var Q=f.type;switch(x=n&&(Q==="Polygon"||Q==="MultiPolygon")?1:0,Q){case null:break;case"Point":if(e(y,A,K,X,tt)===!1)return!1;A++,X++;break;case"LineString":case"MultiPoint":for(i=0;i<y.length;i++){if(e(y[i],A,K,X,tt)===!1)return!1;A++,Q==="MultiPoint"&&X++}Q==="LineString"&&X++;break;case"Polygon":case"MultiLineString":for(i=0;i<y.length;i++){for(r=0;r<y[i].length-x;r++){if(e(y[i][r],A,K,X,tt)===!1)return!1;A++}Q==="MultiLineString"&&X++,Q==="Polygon"&&tt++}Q==="Polygon"&&X++;break;case"MultiPolygon":for(i=0;i<y.length;i++){for(tt=0,r=0;r<y[i].length;r++){for(u=0;u<y[i][r].length-x;u++){if(e(y[i][r][u],A,K,X,tt)===!1)return!1;A++}tt++}X++}break;case"GeometryCollection":for(i=0;i<f.geometries.length;i++)if(X0(f.geometries[i],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var cv={exports:{}},Vv={exports:{}},i5=Vv.exports,UT;function r5(){return UT||(UT=1,(function(t,e){(function(n,i){t.exports=i()})(i5,function(){function n(W,X,tt,Q,at){(function ht(ot,ct,xt,wt,Ct){for(;wt>xt;){if(wt-xt>600){var re=wt-xt+1,ve=ct-xt+1,Ee=Math.log(re),Nt=.5*Math.exp(2*Ee/3),Pt=.5*Math.sqrt(Ee*Nt*(re-Nt)/re)*(ve-re/2<0?-1:1),Bt=Math.max(xt,Math.floor(ct-ve*Nt/re+Pt)),Ft=Math.min(wt,Math.floor(ct+(re-ve)*Nt/re+Pt));ht(ot,ct,Bt,Ft,Ct)}var $t=ot[ct],ft=xt,St=wt;for(i(ot,xt,ct),Ct(ot[wt],$t)>0&&i(ot,xt,wt);ft<St;){for(i(ot,ft,St),ft++,St--;Ct(ot[ft],$t)<0;)ft++;for(;Ct(ot[St],$t)>0;)St--}Ct(ot[xt],$t)===0?i(ot,xt,St):i(ot,++St,wt),St<=ct&&(xt=St+1),ct<=St&&(wt=St-1)}})(W,X,tt||0,Q||W.length-1,at||r)}function i(W,X,tt){var Q=W[X];W[X]=W[tt],W[tt]=Q}function r(W,X){return W<X?-1:W>X?1:0}var u=function(W){W===void 0&&(W=9),this._maxEntries=Math.max(4,W),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function f(W,X,tt){if(!tt)return X.indexOf(W);for(var Q=0;Q<X.length;Q++)if(tt(W,X[Q]))return Q;return-1}function a(W,X){y(W,0,W.children.length,X,W)}function y(W,X,tt,Q,at){at||(at=H(null)),at.minX=1/0,at.minY=1/0,at.maxX=-1/0,at.maxY=-1/0;for(var ht=X;ht<tt;ht++){var ot=W.children[ht];_(at,W.leaf?Q(ot):ot)}return at}function _(W,X){return W.minX=Math.min(W.minX,X.minX),W.minY=Math.min(W.minY,X.minY),W.maxX=Math.max(W.maxX,X.maxX),W.maxY=Math.max(W.maxY,X.maxY),W}function x(W,X){return W.minX-X.minX}function A(W,X){return W.minY-X.minY}function O(W){return(W.maxX-W.minX)*(W.maxY-W.minY)}function I(W){return W.maxX-W.minX+(W.maxY-W.minY)}function F(W,X){return W.minX<=X.minX&&W.minY<=X.minY&&X.maxX<=W.maxX&&X.maxY<=W.maxY}function q(W,X){return X.minX<=W.maxX&&X.minY<=W.maxY&&X.maxX>=W.minX&&X.maxY>=W.minY}function H(W){return{children:W,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function K(W,X,tt,Q,at){for(var ht=[X,tt];ht.length;)if(!((tt=ht.pop())-(X=ht.pop())<=Q)){var ot=X+Math.ceil((tt-X)/Q/2)*Q;n(W,ot,X,tt,at),ht.push(X,ot,ot,tt)}}return u.prototype.all=function(){return this._all(this.data,[])},u.prototype.search=function(W){var X=this.data,tt=[];if(!q(W,X))return tt;for(var Q=this.toBBox,at=[];X;){for(var ht=0;ht<X.children.length;ht++){var ot=X.children[ht],ct=X.leaf?Q(ot):ot;q(W,ct)&&(X.leaf?tt.push(ot):F(W,ct)?this._all(ot,tt):at.push(ot))}X=at.pop()}return tt},u.prototype.collides=function(W){var X=this.data;if(!q(W,X))return!1;for(var tt=[];X;){for(var Q=0;Q<X.children.length;Q++){var at=X.children[Q],ht=X.leaf?this.toBBox(at):at;if(q(W,ht)){if(X.leaf||F(W,ht))return!0;tt.push(at)}}X=tt.pop()}return!1},u.prototype.load=function(W){if(!W||!W.length)return this;if(W.length<this._minEntries){for(var X=0;X<W.length;X++)this.insert(W[X]);return this}var tt=this._build(W.slice(),0,W.length-1,0);if(this.data.children.length)if(this.data.height===tt.height)this._splitRoot(this.data,tt);else{if(this.data.height<tt.height){var Q=this.data;this.data=tt,tt=Q}this._insert(tt,this.data.height-tt.height-1,!0)}else this.data=tt;return this},u.prototype.insert=function(W){return W&&this._insert(W,this.data.height-1),this},u.prototype.clear=function(){return this.data=H([]),this},u.prototype.remove=function(W,X){if(!W)return this;for(var tt,Q,at,ht=this.data,ot=this.toBBox(W),ct=[],xt=[];ht||ct.length;){if(ht||(ht=ct.pop(),Q=ct[ct.length-1],tt=xt.pop(),at=!0),ht.leaf){var wt=f(W,ht.children,X);if(wt!==-1)return ht.children.splice(wt,1),ct.push(ht),this._condense(ct),this}at||ht.leaf||!F(ht,ot)?Q?(tt++,ht=Q.children[tt],at=!1):ht=null:(ct.push(ht),xt.push(tt),tt=0,Q=ht,ht=ht.children[0])}return this},u.prototype.toBBox=function(W){return W},u.prototype.compareMinX=function(W,X){return W.minX-X.minX},u.prototype.compareMinY=function(W,X){return W.minY-X.minY},u.prototype.toJSON=function(){return this.data},u.prototype.fromJSON=function(W){return this.data=W,this},u.prototype._all=function(W,X){for(var tt=[];W;)W.leaf?X.push.apply(X,W.children):tt.push.apply(tt,W.children),W=tt.pop();return X},u.prototype._build=function(W,X,tt,Q){var at,ht=tt-X+1,ot=this._maxEntries;if(ht<=ot)return a(at=H(W.slice(X,tt+1)),this.toBBox),at;Q||(Q=Math.ceil(Math.log(ht)/Math.log(ot)),ot=Math.ceil(ht/Math.pow(ot,Q-1))),(at=H([])).leaf=!1,at.height=Q;var ct=Math.ceil(ht/ot),xt=ct*Math.ceil(Math.sqrt(ot));K(W,X,tt,xt,this.compareMinX);for(var wt=X;wt<=tt;wt+=xt){var Ct=Math.min(wt+xt-1,tt);K(W,wt,Ct,ct,this.compareMinY);for(var re=wt;re<=Ct;re+=ct){var ve=Math.min(re+ct-1,Ct);at.children.push(this._build(W,re,ve,Q-1))}}return a(at,this.toBBox),at},u.prototype._chooseSubtree=function(W,X,tt,Q){for(;Q.push(X),!X.leaf&&Q.length-1!==tt;){for(var at=1/0,ht=1/0,ot=void 0,ct=0;ct<X.children.length;ct++){var xt=X.children[ct],wt=O(xt),Ct=(re=W,ve=xt,(Math.max(ve.maxX,re.maxX)-Math.min(ve.minX,re.minX))*(Math.max(ve.maxY,re.maxY)-Math.min(ve.minY,re.minY))-wt);Ct<ht?(ht=Ct,at=wt<at?wt:at,ot=xt):Ct===ht&&wt<at&&(at=wt,ot=xt)}X=ot||X.children[0]}var re,ve;return X},u.prototype._insert=function(W,X,tt){var Q=tt?W:this.toBBox(W),at=[],ht=this._chooseSubtree(Q,this.data,X,at);for(ht.children.push(W),_(ht,Q);X>=0&&at[X].children.length>this._maxEntries;)this._split(at,X),X--;this._adjustParentBBoxes(Q,at,X)},u.prototype._split=function(W,X){var tt=W[X],Q=tt.children.length,at=this._minEntries;this._chooseSplitAxis(tt,at,Q);var ht=this._chooseSplitIndex(tt,at,Q),ot=H(tt.children.splice(ht,tt.children.length-ht));ot.height=tt.height,ot.leaf=tt.leaf,a(tt,this.toBBox),a(ot,this.toBBox),X?W[X-1].children.push(ot):this._splitRoot(tt,ot)},u.prototype._splitRoot=function(W,X){this.data=H([W,X]),this.data.height=W.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},u.prototype._chooseSplitIndex=function(W,X,tt){for(var Q,at,ht,ot,ct,xt,wt,Ct=1/0,re=1/0,ve=X;ve<=tt-X;ve++){var Ee=y(W,0,ve,this.toBBox),Nt=y(W,ve,tt,this.toBBox),Pt=(at=Ee,ht=Nt,ot=void 0,ct=void 0,xt=void 0,wt=void 0,ot=Math.max(at.minX,ht.minX),ct=Math.max(at.minY,ht.minY),xt=Math.min(at.maxX,ht.maxX),wt=Math.min(at.maxY,ht.maxY),Math.max(0,xt-ot)*Math.max(0,wt-ct)),Bt=O(Ee)+O(Nt);Pt<Ct?(Ct=Pt,Q=ve,re=Bt<re?Bt:re):Pt===Ct&&Bt<re&&(re=Bt,Q=ve)}return Q||tt-X},u.prototype._chooseSplitAxis=function(W,X,tt){var Q=W.leaf?this.compareMinX:x,at=W.leaf?this.compareMinY:A;this._allDistMargin(W,X,tt,Q)<this._allDistMargin(W,X,tt,at)&&W.children.sort(Q)},u.prototype._allDistMargin=function(W,X,tt,Q){W.children.sort(Q);for(var at=this.toBBox,ht=y(W,0,X,at),ot=y(W,tt-X,tt,at),ct=I(ht)+I(ot),xt=X;xt<tt-X;xt++){var wt=W.children[xt];_(ht,W.leaf?at(wt):wt),ct+=I(ht)}for(var Ct=tt-X-1;Ct>=X;Ct--){var re=W.children[Ct];_(ot,W.leaf?at(re):re),ct+=I(ot)}return ct},u.prototype._adjustParentBBoxes=function(W,X,tt){for(var Q=tt;Q>=0;Q--)_(X[Q],W)},u.prototype._condense=function(W){for(var X=W.length-1,tt=void 0;X>=0;X--)W[X].children.length===0?X>0?(tt=W[X-1].children).splice(tt.indexOf(W[X]),1):this.clear():a(W[X],this.toBBox)},u})})(Vv)),Vv.exports}class a5{constructor(e=[],n=s5){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:i}=this,r=n[e];for(;e>0;){const u=e-1>>1,f=n[u];if(i(r,f)>=0)break;n[e]=f,e=u}n[e]=r}_down(e){const{data:n,compare:i}=this,r=this.length>>1,u=n[e];for(;e<r;){let f=(e<<1)+1,a=n[f];const y=f+1;if(y<this.length&&i(n[y],a)<0&&(f=y,a=n[y]),i(a,u)>=0)break;n[e]=a,e=f}n[e]=u}}function s5(t,e){return t<e?-1:t>e?1:0}const o5=Object.freeze(Object.defineProperty({__proto__:null,default:a5},Symbol.toStringTag,{value:"Module"})),l5=KR(o5);var jg={exports:{}},db,VT;function u5(){return VT||(VT=1,db=function(e,n,i,r){var u=e[0],f=e[1],a=!1;i===void 0&&(i=0),r===void 0&&(r=n.length);for(var y=(r-i)/2,_=0,x=y-1;_<y;x=_++){var A=n[i+_*2+0],O=n[i+_*2+1],I=n[i+x*2+0],F=n[i+x*2+1],q=O>f!=F>f&&u<(I-A)*(f-O)/(F-O)+A;q&&(a=!a)}return a}),db}var pb,$T;function c5(){return $T||($T=1,pb=function(e,n,i,r){var u=e[0],f=e[1],a=!1;i===void 0&&(i=0),r===void 0&&(r=n.length);for(var y=r-i,_=0,x=y-1;_<y;x=_++){var A=n[_+i][0],O=n[_+i][1],I=n[x+i][0],F=n[x+i][1],q=O>f!=F>f&&u<(I-A)*(f-O)/(F-O)+A;q&&(a=!a)}return a}),pb}var qT;function h5(){if(qT)return jg.exports;qT=1;var t=u5(),e=c5();return jg.exports=function(i,r,u,f){return r.length>0&&Array.isArray(r[0])?e(i,r,u,f):t(i,r,u,f)},jg.exports.nested=e,jg.exports.flat=t,jg.exports}var iy={exports:{}},f5=iy.exports,HT;function d5(){return HT||(HT=1,(function(t,e){(function(n,i){i(e)})(f5,function(n){const r=33306690738754706e-32;function u(q,H,K,W,X){let tt,Q,at,ht,ot=H[0],ct=W[0],xt=0,wt=0;ct>ot==ct>-ot?(tt=ot,ot=H[++xt]):(tt=ct,ct=W[++wt]);let Ct=0;if(xt<q&&wt<K)for(ct>ot==ct>-ot?(at=tt-((Q=ot+tt)-ot),ot=H[++xt]):(at=tt-((Q=ct+tt)-ct),ct=W[++wt]),tt=Q,at!==0&&(X[Ct++]=at);xt<q&&wt<K;)ct>ot==ct>-ot?(at=tt-((Q=tt+ot)-(ht=Q-tt))+(ot-ht),ot=H[++xt]):(at=tt-((Q=tt+ct)-(ht=Q-tt))+(ct-ht),ct=W[++wt]),tt=Q,at!==0&&(X[Ct++]=at);for(;xt<q;)at=tt-((Q=tt+ot)-(ht=Q-tt))+(ot-ht),ot=H[++xt],tt=Q,at!==0&&(X[Ct++]=at);for(;wt<K;)at=tt-((Q=tt+ct)-(ht=Q-tt))+(ct-ht),ct=W[++wt],tt=Q,at!==0&&(X[Ct++]=at);return tt===0&&Ct!==0||(X[Ct++]=tt),Ct}function f(q){return new Float64Array(q)}const a=33306690738754716e-32,y=22204460492503146e-32,_=11093356479670487e-47,x=f(4),A=f(8),O=f(12),I=f(16),F=f(4);n.orient2d=function(q,H,K,W,X,tt){const Q=(H-tt)*(K-X),at=(q-X)*(W-tt),ht=Q-at;if(Q===0||at===0||Q>0!=at>0)return ht;const ot=Math.abs(Q+at);return Math.abs(ht)>=a*ot?ht:-(function(ct,xt,wt,Ct,re,ve,Ee){let Nt,Pt,Bt,Ft,$t,ft,St,jt,Yt,le,ce,Oe,Ie,Gt,Le,Pe,ge,nn;const qe=ct-re,an=wt-re,Ke=xt-ve,On=Ct-ve;$t=(Le=(jt=qe-(St=(ft=134217729*qe)-(ft-qe)))*(le=On-(Yt=(ft=134217729*On)-(ft-On)))-((Gt=qe*On)-St*Yt-jt*Yt-St*le))-(ce=Le-(ge=(jt=Ke-(St=(ft=134217729*Ke)-(ft-Ke)))*(le=an-(Yt=(ft=134217729*an)-(ft-an)))-((Pe=Ke*an)-St*Yt-jt*Yt-St*le))),x[0]=Le-(ce+$t)+($t-ge),$t=(Ie=Gt-((Oe=Gt+ce)-($t=Oe-Gt))+(ce-$t))-(ce=Ie-Pe),x[1]=Ie-(ce+$t)+($t-Pe),$t=(nn=Oe+ce)-Oe,x[2]=Oe-(nn-$t)+(ce-$t),x[3]=nn;let rn=(function(Yn,cn){let Zi=cn[0];for(let si=1;si<Yn;si++)Zi+=cn[si];return Zi})(4,x),In=y*Ee;if(rn>=In||-rn>=In||(Nt=ct-(qe+($t=ct-qe))+($t-re),Bt=wt-(an+($t=wt-an))+($t-re),Pt=xt-(Ke+($t=xt-Ke))+($t-ve),Ft=Ct-(On+($t=Ct-On))+($t-ve),Nt===0&&Pt===0&&Bt===0&&Ft===0)||(In=_*Ee+r*Math.abs(rn),(rn+=qe*Ft+On*Nt-(Ke*Bt+an*Pt))>=In||-rn>=In))return rn;$t=(Le=(jt=Nt-(St=(ft=134217729*Nt)-(ft-Nt)))*(le=On-(Yt=(ft=134217729*On)-(ft-On)))-((Gt=Nt*On)-St*Yt-jt*Yt-St*le))-(ce=Le-(ge=(jt=Pt-(St=(ft=134217729*Pt)-(ft-Pt)))*(le=an-(Yt=(ft=134217729*an)-(ft-an)))-((Pe=Pt*an)-St*Yt-jt*Yt-St*le))),F[0]=Le-(ce+$t)+($t-ge),$t=(Ie=Gt-((Oe=Gt+ce)-($t=Oe-Gt))+(ce-$t))-(ce=Ie-Pe),F[1]=Ie-(ce+$t)+($t-Pe),$t=(nn=Oe+ce)-Oe,F[2]=Oe-(nn-$t)+(ce-$t),F[3]=nn;const me=u(4,x,4,F,A);$t=(Le=(jt=qe-(St=(ft=134217729*qe)-(ft-qe)))*(le=Ft-(Yt=(ft=134217729*Ft)-(ft-Ft)))-((Gt=qe*Ft)-St*Yt-jt*Yt-St*le))-(ce=Le-(ge=(jt=Ke-(St=(ft=134217729*Ke)-(ft-Ke)))*(le=Bt-(Yt=(ft=134217729*Bt)-(ft-Bt)))-((Pe=Ke*Bt)-St*Yt-jt*Yt-St*le))),F[0]=Le-(ce+$t)+($t-ge),$t=(Ie=Gt-((Oe=Gt+ce)-($t=Oe-Gt))+(ce-$t))-(ce=Ie-Pe),F[1]=Ie-(ce+$t)+($t-Pe),$t=(nn=Oe+ce)-Oe,F[2]=Oe-(nn-$t)+(ce-$t),F[3]=nn;const ki=u(me,A,4,F,O);$t=(Le=(jt=Nt-(St=(ft=134217729*Nt)-(ft-Nt)))*(le=Ft-(Yt=(ft=134217729*Ft)-(ft-Ft)))-((Gt=Nt*Ft)-St*Yt-jt*Yt-St*le))-(ce=Le-(ge=(jt=Pt-(St=(ft=134217729*Pt)-(ft-Pt)))*(le=Bt-(Yt=(ft=134217729*Bt)-(ft-Bt)))-((Pe=Pt*Bt)-St*Yt-jt*Yt-St*le))),F[0]=Le-(ce+$t)+($t-ge),$t=(Ie=Gt-((Oe=Gt+ce)-($t=Oe-Gt))+(ce-$t))-(ce=Ie-Pe),F[1]=Ie-(ce+$t)+($t-Pe),$t=(nn=Oe+ce)-Oe,F[2]=Oe-(nn-$t)+(ce-$t),F[3]=nn;const Li=u(ki,O,4,F,I);return I[Li-1]})(q,H,K,W,X,tt,ot)},n.orient2dfast=function(q,H,K,W,X,tt){return(H-tt)*(K-X)-(q-X)*(W-tt)},Object.defineProperty(n,"__esModule",{value:!0})})})(iy,iy.exports)),iy.exports}var ZT;function p5(){if(ZT)return cv.exports;ZT=1;var t=r5(),e=l5,n=h5(),i=d5().orient2d;e.default&&(e=e.default),cv.exports=r,cv.exports.default=r;function r(tt,Q,at){Q=Math.max(0,Q===void 0?2:Q),at=at||0;var ht=I(tt),ot=new t(16);ot.toBBox=function(St){return{minX:St[0],minY:St[1],maxX:St[0],maxY:St[1]}},ot.compareMinX=function(St,jt){return St[0]-jt[0]},ot.compareMinY=function(St,jt){return St[1]-jt[1]},ot.load(tt);for(var ct=[],xt=0,wt;xt<ht.length;xt++){var Ct=ht[xt];ot.remove(Ct),wt=F(Ct,wt),ct.push(wt)}var re=new t(16);for(xt=0;xt<ct.length;xt++)re.insert(O(ct[xt]));for(var ve=Q*Q,Ee=at*at;ct.length;){var Nt=ct.shift(),Pt=Nt.p,Bt=Nt.next.p,Ft=q(Pt,Bt);if(!(Ft<Ee)){var $t=Ft/ve;Ct=u(ot,Nt.prev.p,Pt,Bt,Nt.next.next.p,$t,re),Ct&&Math.min(q(Ct,Pt),q(Ct,Bt))<=$t&&(ct.push(Nt),ct.push(F(Ct,Nt)),ot.remove(Ct),re.remove(Nt),re.insert(O(Nt)),re.insert(O(Nt.next)))}}Nt=wt;var ft=[];do ft.push(Nt.p),Nt=Nt.next;while(Nt!==wt);return ft.push(Nt.p),ft}function u(tt,Q,at,ht,ot,ct,xt){for(var wt=new e([],f),Ct=tt.data;Ct;){for(var re=0;re<Ct.children.length;re++){var ve=Ct.children[re],Ee=Ct.leaf?H(ve,at,ht):a(at,ht,ve);Ee>ct||wt.push({node:ve,dist:Ee})}for(;wt.length&&!wt.peek().node.children;){var Nt=wt.pop(),Pt=Nt.node,Bt=H(Pt,Q,at),Ft=H(Pt,ht,ot);if(Nt.dist<Bt&&Nt.dist<Ft&&_(at,Pt,xt)&&_(ht,Pt,xt))return Pt}Ct=wt.pop(),Ct&&(Ct=Ct.node)}return null}function f(tt,Q){return tt.dist-Q.dist}function a(tt,Q,at){if(y(tt,at)||y(Q,at))return 0;var ht=K(tt[0],tt[1],Q[0],Q[1],at.minX,at.minY,at.maxX,at.minY);if(ht===0)return 0;var ot=K(tt[0],tt[1],Q[0],Q[1],at.minX,at.minY,at.minX,at.maxY);if(ot===0)return 0;var ct=K(tt[0],tt[1],Q[0],Q[1],at.maxX,at.minY,at.maxX,at.maxY);if(ct===0)return 0;var xt=K(tt[0],tt[1],Q[0],Q[1],at.minX,at.maxY,at.maxX,at.maxY);return xt===0?0:Math.min(ht,ot,ct,xt)}function y(tt,Q){return tt[0]>=Q.minX&&tt[0]<=Q.maxX&&tt[1]>=Q.minY&&tt[1]<=Q.maxY}function _(tt,Q,at){for(var ht=Math.min(tt[0],Q[0]),ot=Math.min(tt[1],Q[1]),ct=Math.max(tt[0],Q[0]),xt=Math.max(tt[1],Q[1]),wt=at.search({minX:ht,minY:ot,maxX:ct,maxY:xt}),Ct=0;Ct<wt.length;Ct++)if(A(wt[Ct].p,wt[Ct].next.p,tt,Q))return!1;return!0}function x(tt,Q,at){return i(tt[0],tt[1],Q[0],Q[1],at[0],at[1])}function A(tt,Q,at,ht){return tt!==ht&&Q!==at&&x(tt,Q,at)>0!=x(tt,Q,ht)>0&&x(at,ht,tt)>0!=x(at,ht,Q)>0}function O(tt){var Q=tt.p,at=tt.next.p;return tt.minX=Math.min(Q[0],at[0]),tt.minY=Math.min(Q[1],at[1]),tt.maxX=Math.max(Q[0],at[0]),tt.maxY=Math.max(Q[1],at[1]),tt}function I(tt){for(var Q=tt[0],at=tt[0],ht=tt[0],ot=tt[0],ct=0;ct<tt.length;ct++){var xt=tt[ct];xt[0]<Q[0]&&(Q=xt),xt[0]>ht[0]&&(ht=xt),xt[1]<at[1]&&(at=xt),xt[1]>ot[1]&&(ot=xt)}var wt=[Q,at,ht,ot],Ct=wt.slice();for(ct=0;ct<tt.length;ct++)n(tt[ct],wt)||Ct.push(tt[ct]);return X(Ct)}function F(tt,Q){var at={p:tt,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return Q?(at.next=Q.next,at.prev=Q,Q.next.prev=at,Q.next=at):(at.prev=at,at.next=at),at}function q(tt,Q){var at=tt[0]-Q[0],ht=tt[1]-Q[1];return at*at+ht*ht}function H(tt,Q,at){var ht=Q[0],ot=Q[1],ct=at[0]-ht,xt=at[1]-ot;if(ct!==0||xt!==0){var wt=((tt[0]-ht)*ct+(tt[1]-ot)*xt)/(ct*ct+xt*xt);wt>1?(ht=at[0],ot=at[1]):wt>0&&(ht+=ct*wt,ot+=xt*wt)}return ct=tt[0]-ht,xt=tt[1]-ot,ct*ct+xt*xt}function K(tt,Q,at,ht,ot,ct,xt,wt){var Ct=at-tt,re=ht-Q,ve=xt-ot,Ee=wt-ct,Nt=tt-ot,Pt=Q-ct,Bt=Ct*Ct+re*re,Ft=Ct*ve+re*Ee,$t=ve*ve+Ee*Ee,ft=Ct*Nt+re*Pt,St=ve*Nt+Ee*Pt,jt=Bt*$t-Ft*Ft,Yt,le,ce,Oe,Ie=jt,Gt=jt;jt===0?(le=0,Ie=1,Oe=St,Gt=$t):(le=Ft*St-$t*ft,Oe=Bt*St-Ft*ft,le<0?(le=0,Oe=St,Gt=$t):le>Ie&&(le=Ie,Oe=St+Ft,Gt=$t)),Oe<0?(Oe=0,-ft<0?le=0:-ft>Bt?le=Ie:(le=-ft,Ie=Bt)):Oe>Gt&&(Oe=Gt,-ft+Ft<0?le=0:-ft+Ft>Bt?le=Ie:(le=-ft+Ft,Ie=Bt)),Yt=le===0?0:le/Ie,ce=Oe===0?0:Oe/Gt;var Le=(1-Yt)*tt+Yt*at,Pe=(1-Yt)*Q+Yt*ht,ge=(1-ce)*ot+ce*xt,nn=(1-ce)*ct+ce*wt,qe=ge-Le,an=nn-Pe;return qe*qe+an*an}function W(tt,Q){return tt[0]===Q[0]?tt[1]-Q[1]:tt[0]-Q[0]}function X(tt){tt.sort(W);for(var Q=[],at=0;at<tt.length;at++){for(;Q.length>=2&&x(Q[Q.length-2],Q[Q.length-1],tt[at])<=0;)Q.pop();Q.push(tt[at])}for(var ht=[],ot=tt.length-1;ot>=0;ot--){for(;ht.length>=2&&x(ht[ht.length-2],ht[ht.length-1],tt[ot])<=0;)ht.pop();ht.push(tt[ot])}return ht.pop(),Q.pop(),Q.concat(ht)}return cv.exports}var m5=p5();const g5=Pu(m5);function y5(t,e={}){e.concavity=e.concavity||1/0;const n=[];if(X0(t,r=>{n.push([r[0],r[1]])}),!n.length)return null;const i=g5(n,e.concavity);return i.length>3?n5([i]):null}function GT(t,e={}){let n=0,i=0,r=0;return X0(t,function(u){n+=u[0],i+=u[1],r++},!0),ow([n/r,i/r],e.properties)}function _5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function v5(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function Vk(t,e={}){switch(v5(t)){case"Point":return ow(_5(t),e.properties);case"Polygon":var n=[];X0(t,function(tt){n.push(tt)});var i=GT(t,{properties:e.properties}),r=i.geometry.coordinates,u=0,f=0,a=0,y,_,x,A,O,I,F,q,H=n.map(function(tt){return[tt[0]-r[0],tt[1]-r[1]]});for(y=0;y<n.length-1;y++)_=H[y],A=_[0],I=_[1],x=H[y+1],O=x[0],F=x[1],q=A*F-O*I,a+=q,u+=(A+O)*q,f+=(I+F)*q;if(a===0)return i;var K=a*.5,W=1/(6*K);return ow([r[0]+W*u,r[1]+W*f],e.properties);default:var X=y5(t);return X?Vk(X,{properties:e.properties}):GT(t,{properties:e.properties})}}var $k=Vk;const mm=["CTPRVN_CD","CTPRV_CD","CTP_CD","SIDO_CD","SIG_CD"],x5=["CTP_KOR_NM","SIDO_NM","CTP_ENG_NM","CTP_NM"],mb=["SIG_CD","SGG_CD","ADM_DR_CD"],WT=["SIG_KOR_NM","SGG_NM","ADM_DR_NM","SIG_NM"],b5=["CTPRVN_CD","UPPER_CD","SIDO_CD"],Hl=(t,e)=>{for(const n of e)if(t&&t[n]!=null)return t[n]},kf=[[32.5,124],[39.6,132.5]];function w5(){const t=yS();G.useEffect(()=>{t.options.inertia=!1},[t]);const e=()=>{t.getBounds().intersects(kf)||t.panInsideBounds(kf,{animate:!1})};return cb("move",e),cb("zoom",e),cb("moveend",e),null}function S5(t,e=[]){const n=yS();G.useEffect(()=>{const i=t.current;if(i)try{const r=i.getBounds();if(r&&r.isValid()){const u=Math.max(r.getSouth(),kf[0][0]),f=Math.max(r.getWest(),kf[0][1]),a=Math.min(r.getNorth(),kf[1][0]),y=Math.min(r.getEast(),kf[1][1]);n.fitBounds([[u,f],[a,y]],{padding:[24,24],paddingBottomRight:[24,80]})}}catch{}},e)}function T5({targetRef:t,deps:e}){return S5(t,e),null}const qk=[[-180,-90],[-180,90],[180,90],[180,-90],[-180,-90]],Hk=t=>t?t.type==="Polygon"?t.coordinates:t.type==="MultiPolygon"?t.coordinates.flat():[]:[],M5=t=>{if(!t?.features)return null;const e=[];for(const n of t.features)e.push(...Hk(n.geometry));return{type:"Feature",properties:{kind:"mask-korea"},geometry:{type:"Polygon",coordinates:[qk,...e]}}},A5=t=>{if(!t?.geometry)return null;const e=Hk(t.geometry);return{type:"Feature",properties:{kind:"mask-sido"},geometry:{type:"Polygon",coordinates:[qk,...e]}}},E5={11:"",26:"",27:"",28:"",29:"",30:"",31:"",36:"",41:"",42:"",43:"",44:"",45:"",46:"",47:"",48:"",50:""},C5=t=>{const e=t?.properties||{},n=String(Hl(e,mm)||"");return E5[n]||Hl(e,x5)||" /"},lw={11:[37.5665,126.978],26:[35.1796,129.0756],27:[35.8714,128.6014],28:[37.4563,126.7052],29:[35.1595,126.8526],30:[36.3504,127.3845],31:[35.5384,129.3114],36:[36.48,127.289],41:[37.4138,127.5183],42:[37.8228,128.1555],43:[36.6357,127.4917],44:[36.5184,126.8],45:[35.817,127.111],46:[35.12,126.9],47:[36.4919,128.8889],48:[35.23,128.25],50:[33.4996,126.5312]},Zk={11:[.08,-.1],28:[.04,-.08],36:[.02,.08],30:[-.02,.02],41:[.02,-.06],43:[0,0],44:[.02,.1],45:[.02,.12],46:[.02,.06],47:[0,0],48:[.05,-.1],26:[0,-.04],27:[.02,-.02],31:[0,.06],42:[0,0],50:[0,0]},hv=Object.entries(Zk).sort(([t],[e])=>t.localeCompare(e)).map(([t,e])=>`${t}:${e[0].toFixed(3)},${e[1].toFixed(3)}`).join("|"),fv=Object.entries(lw).sort(([t],[e])=>t.localeCompare(e)).map(([t,e])=>`${t}:${e[0].toFixed(4)},${e[1].toFixed(4)}`).join("|");function P5(t){const e=String(Hl(t.properties,mm)||"");if(lw[e]){const[n,i]=lw[e];return[n,i]}try{const n=$k(t),[i,r]=n.geometry.coordinates;return[r,i]}catch{return null}}const YT=(t,e,n,i)=>{if(t==null||isNaN(t))return"#e6e6e6";const r=Math.pow((t-e)/(n-e+1e-6),.6);if(i==="electric"){const u=Math.round(180-r*160),f=Math.round(210-r*190),a=Math.round(255-r*100);return`rgb(${u},${f},${a})`}else{const u=Math.round(255-r*60),f=Math.round(210-r*160),a=Math.round(130-r*100);return`rgb(${u},${f},${a})`}},Fg=t=>{const e=String(t||"");return e.length!==6?e||"":`${e.slice(0,4)} ${e.slice(4)}`};function k5({onRegionSelect:t,allEnergyData:e,yearMonth:n="202506"}){const[i,r]=G.useState("sido"),[u,f]=G.useState(null),[a,y]=G.useState(""),[_,x]=G.useState(null),[A,O]=G.useState(null),[I,F]=G.useState(null),[q,H]=G.useState(null),[K,W]=G.useState(null),[X,tt]=G.useState("electric"),Q=G.useRef(null);G.useEffect(()=>{(async()=>{try{const Ft=await(await fetch("/korea/SIDO_MAP_2022.json")).json();x(Ft),H(M5(Ft))}catch{y(" /korea/SIDO_MAP_2022.json   .")}try{const Ft=await(await fetch("/korea/sgg.json")).json();O(Ft)}catch{y(Bt=>(Bt?Bt+" / ":"")+" /korea/sgg.json   .")}})()},[]),G.useEffect(()=>{if(i!=="sgg")return;const Bt=u?.code;if(!Bt){F(null),W(null);return}const Ft=_?.features?.find($t=>String(Hl($t.properties,mm))===String(Bt))||null;if(W(Ft?A5(Ft):null),A?.features){const $t=A.features.filter(ft=>{const St=ft.properties||{};let jt=Hl(St,b5);if(jt==null){const Yt=Hl(St,mb);Yt&&(jt=String(Yt).slice(0,2))}return String(jt)===String(Bt)});F($t.length?{type:"FeatureCollection",features:$t}:null)}else F(null)},[i,u,A,_]);const at=G.useMemo(()=>i==="sido"?_:I,[i,_,I]),ht=G.useMemo(()=>{if(!_?.features)return{};const Bt={};for(const Ft of _.features){const $t=String(Hl(Ft.properties,mm)||"");let ft=P5(Ft)||[0,0];const St=Zk[$t];St&&(ft=[ft[0]+St[0],ft[1]+St[1]]),Bt[$t]=ft}return Bt},[_,fv,hv]),ot=Array.isArray(e)?e:e?.items||[],ct=G.useMemo(()=>ot.filter(Bt=>String(Bt?.yearMonth)===String(n)),[ot,n]),xt=G.useMemo(()=>{const Bt={};for(const Ft of ct){const $t=Ft?.countyId!=null?String(Ft.countyId):null;if(!$t)continue;const ft=Number(X==="gas"?Ft.useGas:Ft.useElect);isNaN(ft)||(Bt[$t]=(Bt[$t]??0)+ft)}return Bt},[ct,X]),wt=G.useMemo(()=>{const Bt={};for(const Ft of ct){let $t=null;if(Ft?.cityId!=null?$t=String(Ft.cityId).padStart(2,"0"):Ft?.countyId!=null&&($t=String(Ft.countyId).slice(0,2)),!$t)continue;const ft=Number(X==="gas"?Ft.useGas:Ft.useElect);isNaN(ft)||(Bt[$t]=(Bt[$t]??0)+ft)}return Bt},[ct,X]),{minVal:Ct,maxVal:re}=G.useMemo(()=>{const Bt=Object.values(i==="sido"?wt:xt).filter(Ft=>Ft>0);return Bt.length?{minVal:Math.min(...Bt),maxVal:Math.max(...Bt)}:{minVal:0,maxVal:0}},[i,wt,xt]),ve=Bt=>{if(i==="sido"){const ft=String(Hl(Bt.properties,mm)||""),St=wt[ft];return{weight:1,color:"#fff",fillOpacity:.92,fillColor:YT(St,Ct,re,X)}}const Ft=String(Hl(Bt.properties,mb)||""),$t=xt[Ft];return{weight:1,color:"#fff",fillOpacity:.92,fillColor:YT($t,Ct,re,X)}},Ee=Bt=>{const Ft=Hl(Bt?.properties||{},WT)||" ";return`${u?.name||" /"} ${String(Ft).replace(/<br\/>/g," ")}`},Nt=(Bt,Ft)=>{if(i==="sido"){const $t=String(Hl(Bt.properties,mm)||""),ft=C5(Bt),St=ht[$t];if(St){const jt=NT.tooltip({permanent:!0,direction:"center",className:"area-label"}).setContent(ft).setLatLng(St);Ft.bindTooltip(jt),Ft.on("add",()=>{try{Ft.openTooltip()}catch{}})}Ft.on("mouseover",jt=>{Ft.setStyle({weight:2,color:"#fff"}),Ft.bindPopup(`${ft}<br/>${Fg(n)}`).openPopup(jt.latlng)}),Ft.on("mouseout",()=>{Ft.setStyle({weight:1,color:"#fff"}),Ft.closePopup()}),Ft.on("click",jt=>{f({code:$t,name:ft}),r("sgg"),Ft.bindPopup(`${ft}<br/>${Fg(n)}`).openPopup(jt.latlng),t?.({cityId:Number($t),cityName:ft})}),Ft.on("add",()=>{try{Ft.getElement()?.classList?.add("cursor-pointer")}catch{}})}else{const $t=Ee(Bt);try{const ft=$k(Bt),[St,jt]=ft.geometry.coordinates,Yt=NT.tooltip({permanent:!0,direction:"center",className:"area-label sgg"}).setContent($t.replace((u?.name||"")+" ","")).setLatLng([jt,St]);Ft.bindTooltip(Yt),Ft.on("add",()=>{try{Ft.openTooltip()}catch{}})}catch{}Ft.on("mouseover",ft=>{Ft.setStyle({weight:2,color:"#fff"}),Ft.bindPopup(`${$t}<br/>${Fg(n)}`).openPopup(ft.latlng)}),Ft.on("mouseout",()=>{Ft.setStyle({weight:1,color:"#fff"}),Ft.closePopup()}),Ft.on("click",ft=>{Ft.bindPopup(`${$t}<br/>${Fg(n)}`).openPopup(ft.latlng);const St=String(Hl(Bt.properties,mb)||""),jt=Hl(Bt.properties,WT);t?.({cityId:Number(u?.code),countyId:Number(St),cityName:u?.name,countyName:jt})})}},Pt=()=>{r("sido"),f(null),F(null),W(null)};return vt.jsxs("div",{className:"map-host",children:[vt.jsxs("div",{className:"map-toolbar",children:[vt.jsxs("div",{className:"month-label",children:[" ",Fg(n)," "]}),vt.jsxs("div",{className:"map-energy-buttons",children:[vt.jsx("button",{className:X==="electric"?"active-electric":"",onClick:()=>tt("electric"),title:"  ",children:" "}),vt.jsx("button",{className:X==="gas"?"active-gas":"",onClick:()=>tt("gas"),title:"  ",children:" "})]})]}),a&&vt.jsx("div",{className:"warn-box",children:a}),i==="sgg"&&vt.jsx("button",{className:"btn-back",onClick:Pt,children:" / "}),vt.jsxs(KB,{bounds:kf,minZoom:6,maxZoom:13,maxBounds:kf,maxBoundsViscosity:1,inertia:!1,worldCopyJump:!1,zoomControl:!1,attributionControl:!1,zoomSnap:.25,zoomDelta:.25,wheelPxPerZoomLevel:220,wheelDebounceTime:40,style:{height:"100%",width:"100%"},children:[vt.jsx(fb,{name:"mask",style:{zIndex:400}}),vt.jsx(fb,{name:"gaps",style:{zIndex:405}}),vt.jsx(fb,{name:"polygons",style:{zIndex:410}}),vt.jsx(e5,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",noWrap:!0}),(i==="sgg"?K:q)&&vt.jsx(hb,{pane:"mask",data:i==="sgg"?K:q,style:{fillColor:"#ffffffff",fillOpacity:.6,color:"#0b1020",weight:0},interactive:!1}),at&&vt.jsx(hb,{pane:"gaps",data:at,style:{fillOpacity:0,color:"#ebdfd8ff",weight:i==="sido"?6:3,lineJoin:"round",lineCap:"round"},interactive:!1}),at&&vt.jsx(hb,{pane:"polygons",ref:Q,data:at,style:ve,onEachFeature:Nt},i==="sido"?`polygons-sido-${fv}-${hv}`:`polygons-sgg-${u?.code||""}`),vt.jsx(T5,{targetRef:Q,deps:[i,u?.code,at?.features?.length,fv,hv,X,n]}),vt.jsx(w5,{})]},i==="sido"?`map-sido-${fv}-${hv}`:`map-sgg-${u?.code||""}`)]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Fy(t){return t+.5|0}const Of=(t,e,n)=>Math.max(Math.min(t,n),e);function ry(t){return Of(Fy(t*2.55),0,255)}function If(t){return Of(Fy(t*255),0,255)}function wh(t){return Of(Fy(t/2.55)/100,0,1)}function XT(t){return Of(Fy(t*100),0,100)}const wu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},uw=[..."0123456789ABCDEF"],O5=t=>uw[t&15],D5=t=>uw[(t&240)>>4]+uw[t&15],dv=t=>(t&240)>>4===(t&15),z5=t=>dv(t.r)&&dv(t.g)&&dv(t.b)&&dv(t.a);function L5(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&wu[t[1]]*17,g:255&wu[t[2]]*17,b:255&wu[t[3]]*17,a:e===5?wu[t[4]]*17:255}:(e===7||e===9)&&(n={r:wu[t[1]]<<4|wu[t[2]],g:wu[t[3]]<<4|wu[t[4]],b:wu[t[5]]<<4|wu[t[6]],a:e===9?wu[t[7]]<<4|wu[t[8]]:255})),n}const I5=(t,e)=>t<255?e(t):"";function R5(t){var e=z5(t)?O5:D5;return t?"#"+e(t.r)+e(t.g)+e(t.b)+I5(t.a,e):void 0}const B5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Gk(t,e,n){const i=e*Math.min(n,1-n),r=(u,f=(u+t/30)%12)=>n-i*Math.max(Math.min(f-3,9-f,1),-1);return[r(0),r(8),r(4)]}function N5(t,e,n){const i=(r,u=(r+t/60)%6)=>n-n*e*Math.max(Math.min(u,4-u,1),0);return[i(5),i(3),i(1)]}function j5(t,e,n){const i=Gk(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function F5(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function _S(t){const n=t.r/255,i=t.g/255,r=t.b/255,u=Math.max(n,i,r),f=Math.min(n,i,r),a=(u+f)/2;let y,_,x;return u!==f&&(x=u-f,_=a>.5?x/(2-u-f):x/(u+f),y=F5(n,i,r,x,u),y=y*60+.5),[y|0,_||0,a]}function vS(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(If)}function xS(t,e,n){return vS(Gk,t,e,n)}function U5(t,e,n){return vS(j5,t,e,n)}function V5(t,e,n){return vS(N5,t,e,n)}function Wk(t){return(t%360+360)%360}function $5(t){const e=B5.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?ry(+e[5]):If(+e[5]));const r=Wk(+e[2]),u=+e[3]/100,f=+e[4]/100;return e[1]==="hwb"?i=U5(r,u,f):e[1]==="hsv"?i=V5(r,u,f):i=xS(r,u,f),{r:i[0],g:i[1],b:i[2],a:n}}function q5(t,e){var n=_S(t);n[0]=Wk(n[0]+e),n=xS(n),t.r=n[0],t.g=n[1],t.b=n[2]}function H5(t){if(!t)return;const e=_S(t),n=e[0],i=XT(e[1]),r=XT(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${wh(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const KT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},QT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Z5(){const t={},e=Object.keys(QT),n=Object.keys(KT);let i,r,u,f,a;for(i=0;i<e.length;i++){for(f=a=e[i],r=0;r<n.length;r++)u=n[r],a=a.replace(u,KT[u]);u=parseInt(QT[f],16),t[a]=[u>>16&255,u>>8&255,u&255]}return t}let pv;function G5(t){pv||(pv=Z5(),pv.transparent=[0,0,0,0]);const e=pv[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const W5=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Y5(t){const e=W5.exec(t);let n=255,i,r,u;if(e){if(e[7]!==i){const f=+e[7];n=e[8]?ry(f):Of(f*255,0,255)}return i=+e[1],r=+e[3],u=+e[5],i=255&(e[2]?ry(i):Of(i,0,255)),r=255&(e[4]?ry(r):Of(r,0,255)),u=255&(e[6]?ry(u):Of(u,0,255)),{r:i,g:r,b:u,a:n}}}function X5(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${wh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const gb=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,um=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function K5(t,e,n){const i=um(wh(t.r)),r=um(wh(t.g)),u=um(wh(t.b));return{r:If(gb(i+n*(um(wh(e.r))-i))),g:If(gb(r+n*(um(wh(e.g))-r))),b:If(gb(u+n*(um(wh(e.b))-u))),a:t.a+n*(e.a-t.a)}}function mv(t,e,n){if(t){let i=_S(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=xS(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Yk(t,e){return t&&Object.assign(e||{},t)}function JT(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=If(t[3]))):(e=Yk(t,{r:0,g:0,b:0,a:1}),e.a=If(e.a)),e}function Q5(t){return t.charAt(0)==="r"?Y5(t):$5(t)}let Xk=class cw{constructor(e){if(e instanceof cw)return e;const n=typeof e;let i;n==="object"?i=JT(e):n==="string"&&(i=L5(e)||G5(e)||Q5(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Yk(this._rgb);return e&&(e.a=wh(e.a)),e}set rgb(e){this._rgb=JT(e)}rgbString(){return this._valid?X5(this._rgb):void 0}hexString(){return this._valid?R5(this._rgb):void 0}hslString(){return this._valid?H5(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let u;const f=n===u?.5:n,a=2*f-1,y=i.a-r.a,_=((a*y===-1?a:(a+y)/(1+a*y))+1)/2;u=1-_,i.r=255&_*i.r+u*r.r+.5,i.g=255&_*i.g+u*r.g+.5,i.b=255&_*i.b+u*r.b+.5,i.a=f*i.a+(1-f)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=K5(this._rgb,e._rgb,n)),this}clone(){return new cw(this.rgb)}alpha(e){return this._rgb.a=If(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Fy(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return mv(this._rgb,2,e),this}darken(e){return mv(this._rgb,2,-e),this}saturate(e){return mv(this._rgb,1,e),this}desaturate(e){return mv(this._rgb,1,-e),this}rotate(e){return q5(this._rgb,e),this}};/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function vh(){}const J5=(()=>{let t=0;return()=>t++})();function di(t){return t==null}function Hr(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Si(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ga(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Zl(t,e){return ga(t)?t:e}function Wn(t,e){return typeof t>"u"?e:t}const tN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Kk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Sr(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function tr(t,e,n,i){let r,u,f;if(Hr(t))for(u=t.length,r=0;r<u;r++)e.call(n,t[r],r);else if(Si(t))for(f=Object.keys(t),u=f.length,r=0;r<u;r++)e.call(n,t[f[r]],f[r])}function Qv(t,e){let n,i,r,u;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],u=e[n],r.datasetIndex!==u.datasetIndex||r.index!==u.index)return!1;return!0}function Jv(t){if(Hr(t))return t.map(Jv);if(Si(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Jv(t[n[r]]);return e}return t}function Qk(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function eN(t,e,n,i){if(!Qk(t))return;const r=e[t],u=n[t];Si(r)&&Si(u)?yy(r,u,i):e[t]=Jv(u)}function yy(t,e,n){const i=Hr(e)?e:[e],r=i.length;if(!Si(t))return t;n=n||{};const u=n.merger||eN;let f;for(let a=0;a<r;++a){if(f=i[a],!Si(f))continue;const y=Object.keys(f);for(let _=0,x=y.length;_<x;++_)u(y[_],t,f,n)}return t}function cy(t,e){return yy(t,e,{merger:nN})}function nN(t,e,n){if(!Qk(t))return;const i=e[t],r=n[t];Si(i)&&Si(r)?cy(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Jv(r))}const tM={"":t=>t,x:t=>t.x,y:t=>t.y};function iN(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function rN(t){const e=iN(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Bf(t,e){return(tM[e]||(tM[e]=rN(e)))(t)}function bS(t){return t.charAt(0).toUpperCase()+t.slice(1)}const _y=t=>typeof t<"u",Nf=t=>typeof t=="function",eM=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function aN(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Fi=Math.PI,Br=2*Fi,sN=Br+Fi,t0=Number.POSITIVE_INFINITY,oN=Fi/180,Da=Fi/2,kd=Fi/4,nM=Fi*2/3,Df=Math.log10,jc=Math.sign;function hy(t,e,n){return Math.abs(t-e)<n}function iM(t){const e=Math.round(t);t=hy(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Df(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function lN(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,u)=>r-u).pop(),e}function uN(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function wm(t){return!uN(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function cN(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Jk(t,e,n){let i,r,u;for(i=0,r=t.length;i<r;i++)u=t[i][n],isNaN(u)||(e.min=Math.min(e.min,u),e.max=Math.max(e.max,u))}function hc(t){return t*(Fi/180)}function wS(t){return t*(180/Fi)}function rM(t){if(!ga(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function tO(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let u=Math.atan2(i,n);return u<-.5*Fi&&(u+=Br),{angle:u,distance:r}}function hw(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function hN(t,e){return(t-e+sN)%Br-Fi}function To(t){return(t%Br+Br)%Br}function vy(t,e,n,i){const r=To(t),u=To(e),f=To(n),a=To(u-r),y=To(f-r),_=To(r-u),x=To(r-f);return r===u||r===f||i&&u===f||a>y&&_<x}function Ss(t,e,n){return Math.max(e,Math.min(n,t))}function fN(t){return Ss(t,-32768,32767)}function Mh(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function SS(t,e,n){n=n||(f=>t[f]<e);let i=t.length-1,r=0,u;for(;i-r>1;)u=r+i>>1,n(u)?r=u:i=u;return{lo:r,hi:i}}const Ah=(t,e,n,i)=>SS(t,n,i?r=>{const u=t[r][e];return u<n||u===n&&t[r+1][e]===n}:r=>t[r][e]<n),dN=(t,e,n)=>SS(t,n,i=>t[i][e]>=n);function pN(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const eO=["push","pop","shift","splice","unshift"];function mN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),eO.forEach(n=>{const i="_onData"+bS(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...u){const f=r.apply(this,u);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...u)}),f}})})}function aM(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(eO.forEach(u=>{delete t[u]}),delete t._chartjs)}function nO(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const iO=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function rO(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,iO.call(window,()=>{i=!1,t.apply(e,n)}))}}function gN(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const TS=t=>t==="start"?"left":t==="end"?"right":"center",wo=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,yN=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function aO(t,e,n){const i=e.length;let r=0,u=i;if(t._sorted){const{iScale:f,vScale:a,_parsed:y}=t,_=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,x=f.axis,{min:A,max:O,minDefined:I,maxDefined:F}=f.getUserBounds();if(I){if(r=Math.min(Ah(y,x,A).lo,n?i:Ah(e,x,f.getPixelForValue(A)).lo),_){const q=y.slice(0,r+1).reverse().findIndex(H=>!di(H[a.axis]));r-=Math.max(0,q)}r=Ss(r,0,i-1)}if(F){let q=Math.max(Ah(y,f.axis,O,!0).hi+1,n?0:Ah(e,x,f.getPixelForValue(O),!0).hi+1);if(_){const H=y.slice(q-1).findIndex(K=>!di(K[a.axis]));q+=Math.max(0,H)}u=Ss(q,r,i)-r}else u=i-r}return{start:r,count:u}}function sO(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const u=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),u}const gv=t=>t===0||t===1,sM=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Br/n)),oM=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Br/n)+1,fy={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Da)+1,easeOutSine:t=>Math.sin(t*Da),easeInOutSine:t=>-.5*(Math.cos(Fi*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>gv(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>gv(t)?t:sM(t,.075,.3),easeOutElastic:t=>gv(t)?t:oM(t,.075,.3),easeInOutElastic(t){return gv(t)?t:t<.5?.5*sM(t*2,.1125,.45):.5+.5*oM(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-fy.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?fy.easeInBounce(t*2)*.5:fy.easeOutBounce(t*2-1)*.5+.5};function MS(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function lM(t){return MS(t)?t:new Xk(t)}function yb(t){return MS(t)?t:new Xk(t).saturate(.5).darken(.1).hexString()}const _N=["x","y","borderWidth","radius","tension"],vN=["color","borderColor","backgroundColor"];function xN(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:vN},numbers:{type:"number",properties:_N}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function bN(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const uM=new Map;function wN(t,e){e=e||{};const n=t+JSON.stringify(e);let i=uM.get(n);return i||(i=new Intl.NumberFormat(t,e),uM.set(n,i)),i}function Uy(t,e,n){return wN(e,n).format(t)}const oO={values(t){return Hr(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,u=t;if(n.length>1){const _=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(_<1e-4||_>1e15)&&(r="scientific"),u=SN(t,n)}const f=Df(Math.abs(u)),a=isNaN(f)?1:Math.max(Math.min(-1*Math.floor(f),20),0),y={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(y,this.options.ticks.format),Uy(t,i,y)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Df(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?oO.numeric.call(this,t,e,n):""}};function SN(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var K0={formatters:oO};function TN(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:K0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Yd=Object.create(null),fw=Object.create(null);function dy(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const u=n[i];t=t[u]||(t[u]=Object.create(null))}return t}function _b(t,e,n){return typeof e=="string"?yy(dy(t,e),n):yy(dy(t,""),e)}class MN{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>yb(r.backgroundColor),this.hoverBorderColor=(i,r)=>yb(r.borderColor),this.hoverColor=(i,r)=>yb(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return _b(this,e,n)}get(e){return dy(this,e)}describe(e,n){return _b(fw,e,n)}override(e,n){return _b(Yd,e,n)}route(e,n,i,r){const u=dy(this,e),f=dy(this,i),a="_"+n;Object.defineProperties(u,{[a]:{value:u[n],writable:!0},[n]:{enumerable:!0,get(){const y=this[a],_=f[r];return Si(y)?Object.assign({},_,y):Wn(y,_)},set(y){this[a]=y}}})}apply(e){e.forEach(n=>n(this))}}var Zr=new MN({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[xN,bN,TN]);function AN(t){return!t||di(t.size)||di(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function e0(t,e,n,i,r){let u=e[r];return u||(u=e[r]=t.measureText(r).width,n.push(r)),u>i&&(i=u),i}function EN(t,e,n,i){i=i||{};let r=i.data=i.data||{},u=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},u=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let f=0;const a=n.length;let y,_,x,A,O;for(y=0;y<a;y++)if(A=n[y],A!=null&&!Hr(A))f=e0(t,r,u,f,A);else if(Hr(A))for(_=0,x=A.length;_<x;_++)O=A[_],O!=null&&!Hr(O)&&(f=e0(t,r,u,f,O));t.restore();const I=u.length/2;if(I>n.length){for(y=0;y<I;y++)delete r[u[y]];u.splice(0,I)}return f}function Od(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function cM(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function dw(t,e,n,i){lO(t,e,n,i,null)}function lO(t,e,n,i,r){let u,f,a,y,_,x,A,O;const I=e.pointStyle,F=e.rotation,q=e.radius;let H=(F||0)*oN;if(I&&typeof I=="object"&&(u=I.toString(),u==="[object HTMLImageElement]"||u==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(H),t.drawImage(I,-I.width/2,-I.height/2,I.width,I.height),t.restore();return}if(!(isNaN(q)||q<=0)){switch(t.beginPath(),I){default:r?t.ellipse(n,i,r/2,q,0,0,Br):t.arc(n,i,q,0,Br),t.closePath();break;case"triangle":x=r?r/2:q,t.moveTo(n+Math.sin(H)*x,i-Math.cos(H)*q),H+=nM,t.lineTo(n+Math.sin(H)*x,i-Math.cos(H)*q),H+=nM,t.lineTo(n+Math.sin(H)*x,i-Math.cos(H)*q),t.closePath();break;case"rectRounded":_=q*.516,y=q-_,f=Math.cos(H+kd)*y,A=Math.cos(H+kd)*(r?r/2-_:y),a=Math.sin(H+kd)*y,O=Math.sin(H+kd)*(r?r/2-_:y),t.arc(n-A,i-a,_,H-Fi,H-Da),t.arc(n+O,i-f,_,H-Da,H),t.arc(n+A,i+a,_,H,H+Da),t.arc(n-O,i+f,_,H+Da,H+Fi),t.closePath();break;case"rect":if(!F){y=Math.SQRT1_2*q,x=r?r/2:y,t.rect(n-x,i-y,2*x,2*y);break}H+=kd;case"rectRot":A=Math.cos(H)*(r?r/2:q),f=Math.cos(H)*q,a=Math.sin(H)*q,O=Math.sin(H)*(r?r/2:q),t.moveTo(n-A,i-a),t.lineTo(n+O,i-f),t.lineTo(n+A,i+a),t.lineTo(n-O,i+f),t.closePath();break;case"crossRot":H+=kd;case"cross":A=Math.cos(H)*(r?r/2:q),f=Math.cos(H)*q,a=Math.sin(H)*q,O=Math.sin(H)*(r?r/2:q),t.moveTo(n-A,i-a),t.lineTo(n+A,i+a),t.moveTo(n+O,i-f),t.lineTo(n-O,i+f);break;case"star":A=Math.cos(H)*(r?r/2:q),f=Math.cos(H)*q,a=Math.sin(H)*q,O=Math.sin(H)*(r?r/2:q),t.moveTo(n-A,i-a),t.lineTo(n+A,i+a),t.moveTo(n+O,i-f),t.lineTo(n-O,i+f),H+=kd,A=Math.cos(H)*(r?r/2:q),f=Math.cos(H)*q,a=Math.sin(H)*q,O=Math.sin(H)*(r?r/2:q),t.moveTo(n-A,i-a),t.lineTo(n+A,i+a),t.moveTo(n+O,i-f),t.lineTo(n-O,i+f);break;case"line":f=r?r/2:Math.cos(H)*q,a=Math.sin(H)*q,t.moveTo(n-f,i-a),t.lineTo(n+f,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(H)*(r?r/2:q),i+Math.sin(H)*q);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Eh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Q0(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function J0(t){t.restore()}function CN(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const u=(e.x+n.x)/2;t.lineTo(u,e.y),t.lineTo(u,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function PN(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function kN(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),di(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function ON(t,e,n,i,r){if(r.strikethrough||r.underline){const u=t.measureText(i),f=e-u.actualBoundingBoxLeft,a=e+u.actualBoundingBoxRight,y=n-u.actualBoundingBoxAscent,_=n+u.actualBoundingBoxDescent,x=r.strikethrough?(y+_)/2:_;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(f,x),t.lineTo(a,x),t.stroke()}}function DN(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Xd(t,e,n,i,r,u={}){const f=Hr(e)?e:[e],a=u.strokeWidth>0&&u.strokeColor!=="";let y,_;for(t.save(),t.font=r.string,kN(t,u),y=0;y<f.length;++y)_=f[y],u.backdrop&&DN(t,u.backdrop),a&&(u.strokeColor&&(t.strokeStyle=u.strokeColor),di(u.strokeWidth)||(t.lineWidth=u.strokeWidth),t.strokeText(_,n,i,u.maxWidth)),t.fillText(_,n,i,u.maxWidth),ON(t,n,i,_,u),i+=Number(r.lineHeight);t.restore()}function xy(t,e){const{x:n,y:i,w:r,h:u,radius:f}=e;t.arc(n+f.topLeft,i+f.topLeft,f.topLeft,1.5*Fi,Fi,!0),t.lineTo(n,i+u-f.bottomLeft),t.arc(n+f.bottomLeft,i+u-f.bottomLeft,f.bottomLeft,Fi,Da,!0),t.lineTo(n+r-f.bottomRight,i+u),t.arc(n+r-f.bottomRight,i+u-f.bottomRight,f.bottomRight,Da,0,!0),t.lineTo(n+r,i+f.topRight),t.arc(n+r-f.topRight,i+f.topRight,f.topRight,0,-Da,!0),t.lineTo(n+f.topLeft,i)}const zN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,LN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function IN(t,e){const n=(""+t).match(zN);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const RN=t=>+t||0;function AS(t,e){const n={},i=Si(e),r=i?Object.keys(e):e,u=Si(t)?i?f=>Wn(t[f],t[e[f]]):f=>t[f]:()=>t;for(const f of r)n[f]=RN(u(f));return n}function uO(t){return AS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Vd(t){return AS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Eo(t){const e=uO(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ls(t,e){t=t||{},e=e||Zr.font;let n=Wn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Wn(t.style,e.style);i&&!(""+i).match(LN)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Wn(t.family,e.family),lineHeight:IN(Wn(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Wn(t.weight,e.weight),string:""};return r.string=AN(r),r}function ay(t,e,n,i){let r,u,f;for(r=0,u=t.length;r<u;++r)if(f=t[r],f!==void 0&&f!==void 0)return f}function BN(t,e,n){const{min:i,max:r}=t,u=Kk(e,(r-i)/2),f=(a,y)=>n&&a===0?0:a+y;return{min:f(i,-Math.abs(u)),max:f(r,u)}}function Ff(t,e){return Object.assign(Object.create(t),e)}function ES(t,e=[""],n,i,r=()=>t[0]){const u=n||t;typeof i>"u"&&(i=dO("_fallback",t));const f={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:u,_fallback:i,_getTarget:r,override:a=>ES([a,...t],e,u,i)};return new Proxy(f,{deleteProperty(a,y){return delete a[y],delete a._keys,delete t[0][y],!0},get(a,y){return hO(a,y,()=>HN(y,e,t,a))},getOwnPropertyDescriptor(a,y){return Reflect.getOwnPropertyDescriptor(a._scopes[0],y)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,y){return fM(a).includes(y)},ownKeys(a){return fM(a)},set(a,y,_){const x=a._storage||(a._storage=r());return a[y]=x[y]=_,delete a._keys,!0}})}function Sm(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:cO(t,i),setContext:u=>Sm(t,u,n,i),override:u=>Sm(t.override(u),e,n,i)};return new Proxy(r,{deleteProperty(u,f){return delete u[f],delete t[f],!0},get(u,f,a){return hO(u,f,()=>jN(u,f,a))},getOwnPropertyDescriptor(u,f){return u._descriptors.allKeys?Reflect.has(t,f)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,f)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(u,f){return Reflect.has(t,f)},ownKeys(){return Reflect.ownKeys(t)},set(u,f,a){return t[f]=a,delete u[f],!0}})}function cO(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Nf(n)?n:()=>n,isIndexable:Nf(i)?i:()=>i}}const NN=(t,e)=>t?t+bS(e):e,CS=(t,e)=>Si(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function hO(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function jN(t,e,n){const{_proxy:i,_context:r,_subProxy:u,_descriptors:f}=t;let a=i[e];return Nf(a)&&f.isScriptable(e)&&(a=FN(e,a,t,n)),Hr(a)&&a.length&&(a=UN(e,a,t,f.isIndexable)),CS(e,a)&&(a=Sm(a,r,u&&u[e],f)),a}function FN(t,e,n,i){const{_proxy:r,_context:u,_subProxy:f,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let y=e(u,f||i);return a.delete(t),CS(t,y)&&(y=PS(r._scopes,r,t,y)),y}function UN(t,e,n,i){const{_proxy:r,_context:u,_subProxy:f,_descriptors:a}=n;if(typeof u.index<"u"&&i(t))return e[u.index%e.length];if(Si(e[0])){const y=e,_=r._scopes.filter(x=>x!==y);e=[];for(const x of y){const A=PS(_,r,t,x);e.push(Sm(A,u,f&&f[t],a))}}return e}function fO(t,e,n){return Nf(t)?t(e,n):t}const VN=(t,e)=>t===!0?e:typeof t=="string"?Bf(e,t):void 0;function $N(t,e,n,i,r){for(const u of e){const f=VN(n,u);if(f){t.add(f);const a=fO(f._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(f===!1&&typeof i<"u"&&n!==i)return null}return!1}function PS(t,e,n,i){const r=e._rootScopes,u=fO(e._fallback,n,i),f=[...t,...r],a=new Set;a.add(i);let y=hM(a,f,n,u||n,i);return y===null||typeof u<"u"&&u!==n&&(y=hM(a,f,u,y,i),y===null)?!1:ES(Array.from(a),[""],r,u,()=>qN(e,n,i))}function hM(t,e,n,i,r){for(;n;)n=$N(t,e,n,i,r);return n}function qN(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Hr(r)&&Si(n)?n:r||{}}function HN(t,e,n,i){let r;for(const u of e)if(r=dO(NN(u,t),n),typeof r<"u")return CS(t,r)?PS(n,i,t,r):r}function dO(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function fM(t){let e=t._keys;return e||(e=t._keys=ZN(t._scopes)),e}function ZN(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function pO(t,e,n,i){const{iScale:r}=t,{key:u="r"}=this._parsing,f=new Array(i);let a,y,_,x;for(a=0,y=i;a<y;++a)_=a+n,x=e[_],f[a]={r:r.parse(Bf(x,u),_)};return f}const GN=Number.EPSILON||1e-14,Tm=(t,e)=>e<t.length&&!t[e].skip&&t[e],mO=t=>t==="x"?"y":"x";function WN(t,e,n,i){const r=t.skip?e:t,u=e,f=n.skip?e:n,a=hw(u,r),y=hw(f,u);let _=a/(a+y),x=y/(a+y);_=isNaN(_)?0:_,x=isNaN(x)?0:x;const A=i*_,O=i*x;return{previous:{x:u.x-A*(f.x-r.x),y:u.y-A*(f.y-r.y)},next:{x:u.x+O*(f.x-r.x),y:u.y+O*(f.y-r.y)}}}function YN(t,e,n){const i=t.length;let r,u,f,a,y,_=Tm(t,0);for(let x=0;x<i-1;++x)if(y=_,_=Tm(t,x+1),!(!y||!_)){if(hy(e[x],0,GN)){n[x]=n[x+1]=0;continue}r=n[x]/e[x],u=n[x+1]/e[x],a=Math.pow(r,2)+Math.pow(u,2),!(a<=9)&&(f=3/Math.sqrt(a),n[x]=r*f*e[x],n[x+1]=u*f*e[x])}}function XN(t,e,n="x"){const i=mO(n),r=t.length;let u,f,a,y=Tm(t,0);for(let _=0;_<r;++_){if(f=a,a=y,y=Tm(t,_+1),!a)continue;const x=a[n],A=a[i];f&&(u=(x-f[n])/3,a[`cp1${n}`]=x-u,a[`cp1${i}`]=A-u*e[_]),y&&(u=(y[n]-x)/3,a[`cp2${n}`]=x+u,a[`cp2${i}`]=A+u*e[_])}}function KN(t,e="x"){const n=mO(e),i=t.length,r=Array(i).fill(0),u=Array(i);let f,a,y,_=Tm(t,0);for(f=0;f<i;++f)if(a=y,y=_,_=Tm(t,f+1),!!y){if(_){const x=_[e]-y[e];r[f]=x!==0?(_[n]-y[n])/x:0}u[f]=a?_?jc(r[f-1])!==jc(r[f])?0:(r[f-1]+r[f])/2:r[f-1]:r[f]}YN(t,r,u),XN(t,u,e)}function yv(t,e,n){return Math.max(Math.min(t,n),e)}function QN(t,e){let n,i,r,u,f,a=Eh(t[0],e);for(n=0,i=t.length;n<i;++n)f=u,u=a,a=n<i-1&&Eh(t[n+1],e),u&&(r=t[n],f&&(r.cp1x=yv(r.cp1x,e.left,e.right),r.cp1y=yv(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=yv(r.cp2x,e.left,e.right),r.cp2y=yv(r.cp2y,e.top,e.bottom)))}function JN(t,e,n,i,r){let u,f,a,y;if(e.spanGaps&&(t=t.filter(_=>!_.skip)),e.cubicInterpolationMode==="monotone")KN(t,r);else{let _=i?t[t.length-1]:t[0];for(u=0,f=t.length;u<f;++u)a=t[u],y=WN(_,a,t[Math.min(u+1,f-(i?0:1))%f],e.tension),a.cp1x=y.previous.x,a.cp1y=y.previous.y,a.cp2x=y.next.x,a.cp2y=y.next.y,_=a}e.capBezierPoints&&QN(t,n)}function kS(){return typeof window<"u"&&typeof document<"u"}function OS(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function n0(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const tx=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function t4(t,e){return tx(t).getPropertyValue(e)}const e4=["top","right","bottom","left"];function $d(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const u=e4[r];i[u]=parseFloat(t[e+"-"+u+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const n4=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function i4(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:u}=i;let f=!1,a,y;if(n4(r,u,t.target))a=r,y=u;else{const _=e.getBoundingClientRect();a=i.clientX-_.left,y=i.clientY-_.top,f=!0}return{x:a,y,box:f}}function Ld(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=tx(n),u=r.boxSizing==="border-box",f=$d(r,"padding"),a=$d(r,"border","width"),{x:y,y:_,box:x}=i4(t,n),A=f.left+(x&&a.left),O=f.top+(x&&a.top);let{width:I,height:F}=e;return u&&(I-=f.width+a.width,F-=f.height+a.height),{x:Math.round((y-A)/I*n.width/i),y:Math.round((_-O)/F*n.height/i)}}function r4(t,e,n){let i,r;if(e===void 0||n===void 0){const u=t&&OS(t);if(!u)e=t.clientWidth,n=t.clientHeight;else{const f=u.getBoundingClientRect(),a=tx(u),y=$d(a,"border","width"),_=$d(a,"padding");e=f.width-_.width-y.width,n=f.height-_.height-y.height,i=n0(a.maxWidth,u,"clientWidth"),r=n0(a.maxHeight,u,"clientHeight")}}return{width:e,height:n,maxWidth:i||t0,maxHeight:r||t0}}const zf=t=>Math.round(t*10)/10;function a4(t,e,n,i){const r=tx(t),u=$d(r,"margin"),f=n0(r.maxWidth,t,"clientWidth")||t0,a=n0(r.maxHeight,t,"clientHeight")||t0,y=r4(t,e,n);let{width:_,height:x}=y;if(r.boxSizing==="content-box"){const O=$d(r,"border","width"),I=$d(r,"padding");_-=I.width+O.width,x-=I.height+O.height}return _=Math.max(0,_-u.width),x=Math.max(0,i?_/i:x-u.height),_=zf(Math.min(_,f,y.maxWidth)),x=zf(Math.min(x,a,y.maxHeight)),_&&!x&&(x=zf(_/2)),(e!==void 0||n!==void 0)&&i&&y.height&&x>y.height&&(x=y.height,_=zf(Math.floor(x*i))),{width:_,height:x}}function dM(t,e,n){const i=e||1,r=zf(t.height*i),u=zf(t.width*i);t.height=zf(t.height),t.width=zf(t.width);const f=t.canvas;return f.style&&(n||!f.style.height&&!f.style.width)&&(f.style.height=`${t.height}px`,f.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||f.height!==r||f.width!==u?(t.currentDevicePixelRatio=i,f.height=r,f.width=u,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const s4=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};kS()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function pM(t,e){const n=t4(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Id(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function o4(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function l4(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},u={x:e.cp1x,y:e.cp1y},f=Id(t,r,n),a=Id(r,u,n),y=Id(u,e,n),_=Id(f,a,n),x=Id(a,y,n);return Id(_,x,n)}const u4=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},c4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function vm(t,e,n){return t?u4(e,n):c4()}function gO(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function yO(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function _O(t){return t==="angle"?{between:vy,compare:hN,normalize:To}:{between:Mh,compare:(e,n)=>e-n,normalize:e=>e}}function mM({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function h4(t,e,n){const{property:i,start:r,end:u}=n,{between:f,normalize:a}=_O(i),y=e.length;let{start:_,end:x,loop:A}=t,O,I;if(A){for(_+=y,x+=y,O=0,I=y;O<I&&f(a(e[_%y][i]),r,u);++O)_--,x--;_%=y,x%=y}return x<_&&(x+=y),{start:_,end:x,loop:A,style:t.style}}function vO(t,e,n){if(!n)return[t];const{property:i,start:r,end:u}=n,f=e.length,{compare:a,between:y,normalize:_}=_O(i),{start:x,end:A,loop:O,style:I}=h4(t,e,n),F=[];let q=!1,H=null,K,W,X;const tt=()=>y(r,X,K)&&a(r,X)!==0,Q=()=>a(u,K)===0||y(u,X,K),at=()=>q||tt(),ht=()=>!q||Q();for(let ot=x,ct=x;ot<=A;++ot)W=e[ot%f],!W.skip&&(K=_(W[i]),K!==X&&(q=y(K,r,u),H===null&&at()&&(H=a(K,r)===0?ot:ct),H!==null&&ht()&&(F.push(mM({start:H,end:ot,loop:O,count:f,style:I})),H=null),ct=ot,X=K));return H!==null&&F.push(mM({start:H,end:A,loop:O,count:f,style:I})),F}function xO(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const u=vO(i[r],t.points,e);u.length&&n.push(...u)}return n}function f4(t,e,n,i){let r=0,u=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(u+=r);u>r&&t[u%e].skip;)u--;return u%=e,{start:r,end:u}}function d4(t,e,n,i){const r=t.length,u=[];let f=e,a=t[e],y;for(y=e+1;y<=n;++y){const _=t[y%r];_.skip||_.stop?a.skip||(i=!1,u.push({start:e%r,end:(y-1)%r,loop:i}),e=f=_.stop?y:null):(f=y,a.skip&&(e=y)),a=_}return f!==null&&u.push({start:e%r,end:f%r,loop:i}),u}function p4(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const u=!!t._loop,{start:f,end:a}=f4(n,r,u,i);if(i===!0)return gM(t,[{start:f,end:a,loop:u}],n,e);const y=a<f?a+r:a,_=!!t._fullLoop&&f===0&&a===r-1;return gM(t,d4(n,f,y,_),n,e)}function gM(t,e,n,i){return!i||!i.setContext||!n?e:m4(t,e,n,i)}function m4(t,e,n,i){const r=t._chart.getContext(),u=yM(t.options),{_datasetIndex:f,options:{spanGaps:a}}=t,y=n.length,_=[];let x=u,A=e[0].start,O=A;function I(F,q,H,K){const W=a?-1:1;if(F!==q){for(F+=y;n[F%y].skip;)F-=W;for(;n[q%y].skip;)q+=W;F%y!==q%y&&(_.push({start:F%y,end:q%y,loop:H,style:K}),x=K,A=q%y)}}for(const F of e){A=a?A:F.start;let q=n[A%y],H;for(O=A+1;O<=F.end;O++){const K=n[O%y];H=yM(i.setContext(Ff(r,{type:"segment",p0:q,p1:K,p0DataIndex:(O-1)%y,p1DataIndex:O%y,datasetIndex:f}))),g4(H,x)&&I(A,O-1,F.loop,x),q=K,x=H}A<O-1&&I(A,O-1,F.loop,x)}return _}function yM(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function g4(t,e){if(!e)return!1;const n=[],i=function(r,u){return MS(u)?(n.includes(u)||n.push(u),n.indexOf(u)):u};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function _v(t,e,n){return t.options.clip?t[n]:e[n]}function y4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:_v(n,e,"left"),right:_v(n,e,"right"),top:_v(i,e,"top"),bottom:_v(i,e,"bottom")}:e}function bO(t,e){const n=e._clip;if(n.disabled)return!1;const i=y4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class _4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const u=n.listeners[r],f=n.duration;u.forEach(a=>a({chart:e,initial:n.initial,numSteps:f,currentStep:Math.min(i-n.start,f)}))}_refresh(){this._request||(this._running=!0,this._request=iO.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const u=i.items;let f=u.length-1,a=!1,y;for(;f>=0;--f)y=u[f],y._active?(y._total>i.duration&&(i.duration=y._total),y.tick(e),a=!0):(u[f]=u[u.length-1],u.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),u.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=u.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var xh=new _4;const _M="transparent",v4={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=lM(t||_M),r=i.valid&&lM(e||_M);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class x4{constructor(e,n,i,r){const u=n[i];r=ay([e.to,r,u,e.from]);const f=ay([e.from,u,r]);this._active=!0,this._fn=e.fn||v4[e.type||typeof f],this._easing=fy[e.easing]||fy.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=f,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],u=i-this._start,f=this._duration-u;this._start=i,this._duration=Math.floor(Math.max(f,e.duration)),this._total+=u,this._loop=!!e.loop,this._to=ay([e.to,n,r,e.from]),this._from=ay([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,u=this._from,f=this._loop,a=this._to;let y;if(this._active=u!==a&&(f||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=u;return}y=n/i%2,y=f&&y>1?2-y:y,y=this._easing(Math.min(1,Math.max(0,y))),this._target[r]=this._fn(u,a,y)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class wO{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Si(e))return;const n=Object.keys(Zr.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const u=e[r];if(!Si(u))return;const f={};for(const a of n)f[a]=u[a];(Hr(u.properties)&&u.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,f)})})}_animateOptions(e,n){const i=n.options,r=w4(e,i);if(!r)return[];const u=this._createAnimations(r,i);return i.$shared&&b4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),u}_createAnimations(e,n){const i=this._properties,r=[],u=e.$animations||(e.$animations={}),f=Object.keys(n),a=Date.now();let y;for(y=f.length-1;y>=0;--y){const _=f[y];if(_.charAt(0)==="$")continue;if(_==="options"){r.push(...this._animateOptions(e,n));continue}const x=n[_];let A=u[_];const O=i.get(_);if(A)if(O&&A.active()){A.update(O,x,a);continue}else A.cancel();if(!O||!O.duration){e[_]=x;continue}u[_]=A=new x4(O,e,_,x),r.push(A)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return xh.add(this._chart,i),!0}}function b4(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const u=t[i[r]];u&&u.active()&&n.push(u.wait())}return Promise.all(n)}function w4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function vM(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,u=n.max===void 0?e:0;return{start:i?u:r,end:i?r:u}}function S4(t,e,n){if(n===!1)return!1;const i=vM(t,n),r=vM(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function T4(t){let e,n,i,r;return Si(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function SO(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,u;for(r=0,u=i.length;r<u;++r)n.push(i[r].index);return n}function xM(t,e,n,i={}){const r=t.keys,u=i.mode==="single";let f,a,y,_;if(e===null)return;let x=!1;for(f=0,a=r.length;f<a;++f){if(y=+r[f],y===n){if(x=!0,i.all)continue;break}_=t.values[y],ga(_)&&(u||e===0||jc(e)===jc(_))&&(e+=_)}return!x&&!i.all?0:e}function M4(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",u=i.axis==="x"?"x":"y",f=Object.keys(t),a=new Array(f.length);let y,_,x;for(y=0,_=f.length;y<_;++y)x=f[y],a[y]={[r]:x,[u]:t[x]};return a}function vb(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function A4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function E4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function C4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function bM(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const u=t[r.index];if(n&&u>0||!n&&u<0)return r.index}return null}function wM(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:u,vScale:f,index:a}=i,y=u.axis,_=f.axis,x=A4(u,f,i),A=e.length;let O;for(let I=0;I<A;++I){const F=e[I],{[y]:q,[_]:H}=F,K=F._stacks||(F._stacks={});O=K[_]=C4(r,x,q),O[a]=H,O._top=bM(O,f,!0,i.type),O._bottom=bM(O,f,!1,i.type);const W=O._visualValues||(O._visualValues={});W[a]=H}}function xb(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function P4(t,e){return Ff(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function k4(t,e,n){return Ff(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ug(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const u=r._stacks;if(!u||u[i]===void 0||u[i][n]===void 0)return;delete u[i][n],u[i]._visualValues!==void 0&&u[i]._visualValues[n]!==void 0&&delete u[i]._visualValues[n]}}}const bb=t=>t==="reset"||t==="none",SM=(t,e)=>e?t:Object.assign({},t),O4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:SO(n,!0),values:null};class Uf{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=vb(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ug(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(A,O,I,F)=>A==="x"?O:A==="r"?F:I,u=n.xAxisID=Wn(i.xAxisID,xb(e,"x")),f=n.yAxisID=Wn(i.yAxisID,xb(e,"y")),a=n.rAxisID=Wn(i.rAxisID,xb(e,"r")),y=n.indexAxis,_=n.iAxisID=r(y,u,f,a),x=n.vAxisID=r(y,f,u,a);n.xScale=this.getScaleForId(u),n.yScale=this.getScaleForId(f),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(_),n.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&aM(this._data,this),e._stacked&&Ug(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Si(n)){const r=this._cachedMeta;this._data=M4(n,r)}else if(i!==n){if(i){aM(i,this);const r=this._cachedMeta;Ug(r),r._parsed=[]}n&&Object.isExtensible(n)&&mN(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const u=n._stacked;n._stacked=vb(n.vScale,n),n.stack!==i.stack&&(r=!0,Ug(n),n.stack=i.stack),this._resyncElements(e),(r||u!==n._stacked)&&(wM(this,n._parsed),n._stacked=vb(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:u,_stacked:f}=i,a=u.axis;let y=e===0&&n===r.length?!0:i._sorted,_=e>0&&i._parsed[e-1],x,A,O;if(this._parsing===!1)i._parsed=r,i._sorted=!0,O=r;else{Hr(r[e])?O=this.parseArrayData(i,r,e,n):Si(r[e])?O=this.parseObjectData(i,r,e,n):O=this.parsePrimitiveData(i,r,e,n);const I=()=>A[a]===null||_&&A[a]<_[a];for(x=0;x<n;++x)i._parsed[x+e]=A=O[x],y&&(I()&&(y=!1),_=A);i._sorted=y}f&&wM(this,O)}parsePrimitiveData(e,n,i,r){const{iScale:u,vScale:f}=e,a=u.axis,y=f.axis,_=u.getLabels(),x=u===f,A=new Array(r);let O,I,F;for(O=0,I=r;O<I;++O)F=O+i,A[O]={[a]:x||u.parse(_[F],F),[y]:f.parse(n[F],F)};return A}parseArrayData(e,n,i,r){const{xScale:u,yScale:f}=e,a=new Array(r);let y,_,x,A;for(y=0,_=r;y<_;++y)x=y+i,A=n[x],a[y]={x:u.parse(A[0],x),y:f.parse(A[1],x)};return a}parseObjectData(e,n,i,r){const{xScale:u,yScale:f}=e,{xAxisKey:a="x",yAxisKey:y="y"}=this._parsing,_=new Array(r);let x,A,O,I;for(x=0,A=r;x<A;++x)O=x+i,I=n[O],_[x]={x:u.parse(Bf(I,a),O),y:f.parse(Bf(I,y),O)};return _}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,u=this._cachedMeta,f=n[e.axis],a={keys:SO(r,!0),values:n._stacks[e.axis]._visualValues};return xM(a,f,u.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const u=i[n.axis];let f=u===null?NaN:u;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,f=xM(r,u,this._cachedMeta.index)),e.min=Math.min(e.min,f),e.max=Math.max(e.max,f)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,u=i._sorted&&e===i.iScale,f=r.length,a=this._getOtherScale(e),y=O4(n,i,this.chart),_={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:A}=E4(a);let O,I;function F(){I=r[O];const q=I[a.axis];return!ga(I[e.axis])||x>q||A<q}for(O=0;O<f&&!(!F()&&(this.updateRangeFromParsed(_,e,I,y),u));++O);if(u){for(O=f-1;O>=0;--O)if(!F()){this.updateRangeFromParsed(_,e,I,y);break}}return _}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,u,f;for(r=0,u=n.length;r<u;++r)f=n[r][e.axis],ga(f)&&i.push(f);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,u=this.getParsed(e);return{label:i?""+i.getLabelForValue(u[i.axis]):"",value:r?""+r.getLabelForValue(u[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=T4(Wn(this.options.clip,S4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],u=n.chartArea,f=[],a=this._drawStart||0,y=this._drawCount||r.length-a,_=this.options.drawActiveElementsOnTop;let x;for(i.dataset&&i.dataset.draw(e,u,a,y),x=a;x<a+y;++x){const A=r[x];A.hidden||(A.active&&_?f.push(A):A.draw(e,u))}for(x=0;x<f.length;++x)f[x].draw(e,u)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let u;if(e>=0&&e<this._cachedMeta.data.length){const f=this._cachedMeta.data[e];u=f.$context||(f.$context=k4(this.getContext(),e,f)),u.parsed=this.getParsed(e),u.raw=r.data[e],u.index=u.dataIndex=e}else u=this.$context||(this.$context=P4(this.chart.getContext(),this.index)),u.dataset=r,u.index=u.datasetIndex=this.index;return u.active=!!n,u.mode=i,u}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",u=this._cachedDataOpts,f=e+"-"+n,a=u[f],y=this.enableOptionSharing&&_y(i);if(a)return SM(a,y);const _=this.chart.config,x=_.datasetElementScopeKeys(this._type,e),A=r?[`${e}Hover`,"hover",e,""]:[e,""],O=_.getOptionScopes(this.getDataset(),x),I=Object.keys(Zr.elements[e]),F=()=>this.getContext(i,r,n),q=_.resolveNamedOptions(O,I,F,A);return q.$shared&&(q.$shared=y,u[f]=Object.freeze(SM(q,y))),q}_resolveAnimations(e,n,i){const r=this.chart,u=this._cachedDataOpts,f=`animation-${n}`,a=u[f];if(a)return a;let y;if(r.options.animation!==!1){const x=this.chart.config,A=x.datasetAnimationScopeKeys(this._type,n),O=x.getOptionScopes(this.getDataset(),A);y=x.createResolver(O,this.getContext(e,i,n))}const _=new wO(r,y&&y.animations);return y&&y._cacheable&&(u[f]=Object.freeze(_)),_}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||bb(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,u=this.getSharedOptions(i),f=this.includeOptions(n,u)||u!==r;return this.updateSharedOptions(u,n,i),{sharedOptions:u,includeOptions:f}}updateElement(e,n,i,r){bb(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!bb(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const u=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(u)||u})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,y,_]of this._syncList)this[a](y,_);this._syncList=[];const r=i.length,u=n.length,f=Math.min(u,r);f&&this.parse(0,f),u>r?this._insertElements(r,u-r,e):u<r&&this._removeElements(u,r-u)}_insertElements(e,n,i=!0){const r=this._cachedMeta,u=r.data,f=e+n;let a;const y=_=>{for(_.length+=n,a=_.length-1;a>=f;a--)_[a]=_[a-n]};for(y(u),a=e;a<f;++a)u[a]=new this.dataElementType;this._parsing&&y(r._parsed),this.parse(e,n),i&&this.updateElements(u,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Ug(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function D4(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,u=n.length;r<u;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=nO(i.sort((r,u)=>r-u))}return t._cache.$bar}function z4(t){const e=t.iScale,n=D4(e,t.type);let i=e._length,r,u,f,a;const y=()=>{f===32767||f===-32768||(_y(a)&&(i=Math.min(i,Math.abs(f-a)||i)),a=f)};for(r=0,u=n.length;r<u;++r)f=e.getPixelForValue(n[r]),y();for(a=void 0,r=0,u=e.ticks.length;r<u;++r)f=e.getPixelForTick(r),y();return i}function L4(t,e,n,i){const r=n.barThickness;let u,f;return di(r)?(u=e.min*n.categoryPercentage,f=n.barPercentage):(u=r*i,f=1),{chunk:u/i,ratio:f,start:e.pixels[t]-u/2}}function I4(t,e,n,i){const r=e.pixels,u=r[t];let f=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const y=n.categoryPercentage;f===null&&(f=u-(a===null?e.end-e.start:a-u)),a===null&&(a=u+u-f);const _=u-(u-Math.min(f,a))/2*y;return{chunk:Math.abs(a-f)/2*y/i,ratio:n.barPercentage,start:_}}function R4(t,e,n,i){const r=n.parse(t[0],i),u=n.parse(t[1],i),f=Math.min(r,u),a=Math.max(r,u);let y=f,_=a;Math.abs(f)>Math.abs(a)&&(y=a,_=f),e[n.axis]=_,e._custom={barStart:y,barEnd:_,start:r,end:u,min:f,max:a}}function TO(t,e,n,i){return Hr(t)?R4(t,e,n,i):e[n.axis]=n.parse(t,i),e}function TM(t,e,n,i){const r=t.iScale,u=t.vScale,f=r.getLabels(),a=r===u,y=[];let _,x,A,O;for(_=n,x=n+i;_<x;++_)O=e[_],A={},A[r.axis]=a||r.parse(f[_],_),y.push(TO(O,A,u,_));return y}function wb(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function B4(t,e,n){return t!==0?jc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function N4(t){let e,n,i,r,u;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",u="start"):(r="start",u="end"),{start:n,end:i,reverse:e,top:r,bottom:u}}function j4(t,e,n,i){let r=e.borderSkipped;const u={};if(!r){t.borderSkipped=u;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:f,end:a,reverse:y,top:_,bottom:x}=N4(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=_:(n._bottom||0)===i?r=x:(u[MM(x,f,a,y)]=!0,r=_)),u[MM(r,f,a,y)]=!0,t.borderSkipped=u}function MM(t,e,n,i){return i?(t=F4(t,e,n),t=AM(t,n,e)):t=AM(t,e,n),t}function F4(t,e,n){return t===e?n:t===n?e:t}function AM(t,e,n){return t==="start"?e:t==="end"?n:t}function U4(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class V4 extends Uf{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,i,r){return TM(e,n,i,r)}parseArrayData(e,n,i,r){return TM(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:u,vScale:f}=e,{xAxisKey:a="x",yAxisKey:y="y"}=this._parsing,_=u.axis==="x"?a:y,x=f.axis==="x"?a:y,A=[];let O,I,F,q;for(O=i,I=i+r;O<I;++O)q=n[O],F={},F[u.axis]=u.parse(Bf(q,_),O),A.push(TO(Bf(q,x),F,f,O));return A}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const u=i._custom;u&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,u.min),e.max=Math.max(e.max,u.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,u=this.getParsed(e),f=u._custom,a=wb(f)?"["+f.start+", "+f.end+"]":""+r.getLabelForValue(u[r.axis]);return{label:""+i.getLabelForValue(u[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const u=r==="reset",{index:f,_cachedMeta:{vScale:a}}=this,y=a.getBasePixel(),_=a.isHorizontal(),x=this._getRuler(),{sharedOptions:A,includeOptions:O}=this._getSharedOptions(n,r);for(let I=n;I<n+i;I++){const F=this.getParsed(I),q=u||di(F[a.axis])?{base:y,head:y}:this._calculateBarValuePixels(I),H=this._calculateBarIndexPixels(I,x),K=(F._stacks||{})[a.axis],W={horizontal:_,base:q.base,enableBorderRadius:!K||wb(F._custom)||f===K._top||f===K._bottom,x:_?q.head:H.center,y:_?H.center:q.head,height:_?H.size:Math.abs(q.size),width:_?Math.abs(q.size):H.size};O&&(W.options=A||this.resolveDataElementOptions(I,e[I].active?"active":r));const X=W.options||e[I].options;j4(W,X,K,f),U4(W,X,x.ratio),this.updateElement(e[I],I,W,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(x=>x.controller.options.grouped),u=i.options.stacked,f=[],a=this._cachedMeta.controller.getParsed(n),y=a&&a[i.axis],_=x=>{const A=x._parsed.find(I=>I[i.axis]===y),O=A&&A[x.vScale.axis];if(di(O)||isNaN(O))return!0};for(const x of r)if(!(n!==void 0&&_(x))&&((u===!1||f.indexOf(x.stack)===-1||u===void 0&&x.stack===void 0)&&f.push(x.stack),x.index===e))break;return f.length||f.push(void 0),f}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[Wn(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,i){const r=this._getStacks(e,i),u=n!==void 0?r.indexOf(n):-1;return u===-1?r.length-1:u}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let u,f;for(u=0,f=n.data.length;u<f;++u)r.push(i.getPixelForValue(this.getParsed(u)[i.axis],u));const a=e.barThickness;return{min:a||z4(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:u,minBarLength:f}}=this,a=u||0,y=this.getParsed(e),_=y._custom,x=wb(_);let A=y[n.axis],O=0,I=i?this.applyStack(n,y,i):A,F,q;I!==A&&(O=I-A,I=A),x&&(A=_.barStart,I=_.barEnd-_.barStart,A!==0&&jc(A)!==jc(_.barEnd)&&(O=0),O+=A);const H=!di(u)&&!x?u:O;let K=n.getPixelForValue(H);if(this.chart.getDataVisibility(e)?F=n.getPixelForValue(O+I):F=K,q=F-K,Math.abs(q)<f){q=B4(q,n,a)*f,A===a&&(K-=q/2);const W=n.getPixelForDecimal(0),X=n.getPixelForDecimal(1),tt=Math.min(W,X),Q=Math.max(W,X);K=Math.max(Math.min(K,Q),tt),F=K+q,i&&!x&&(y._stacks[n.axis]._visualValues[r]=n.getValueForPixel(F)-n.getValueForPixel(K))}if(K===n.getPixelForValue(a)){const W=jc(q)*n.getLineWidthForValue(a)/2;K+=W,q-=W}return{size:q,base:K,head:F,center:F+q/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,u=r.skipNull,f=Wn(r.maxBarThickness,1/0);let a,y;const _=this._getAxisCount();if(n.grouped){const x=u?this._getStackCount(e):n.stackCount,A=r.barThickness==="flex"?I4(e,n,r,x*_):L4(e,n,r,x*_),O=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,I=this._getAxis().indexOf(Wn(O,this.getFirstScaleIdForIndexAxis())),F=this._getStackIndex(this.index,this._cachedMeta.stack,u?e:void 0)+I;a=A.start+A.chunk*F+A.chunk/2,y=Math.min(f,A.chunk*A.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),y=Math.min(f,n.min*n.ratio);return{base:a-y/2,head:a+y/2,center:a,size:y}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let u=0;for(;u<r;++u)this.getParsed(u)[n.axis]!==null&&!i[u].hidden&&i[u].draw(this._ctx)}}class $4 extends Uf{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,r){const u=super.parsePrimitiveData(e,n,i,r);for(let f=0;f<u.length;f++)u[f]._custom=this.resolveDataElementOptions(f+i).radius;return u}parseArrayData(e,n,i,r){const u=super.parseArrayData(e,n,i,r);for(let f=0;f<u.length;f++){const a=n[i+f];u[f]._custom=Wn(a[2],this.resolveDataElementOptions(f+i).radius)}return u}parseObjectData(e,n,i,r){const u=super.parseObjectData(e,n,i,r);for(let f=0;f<u.length;f++){const a=n[i+f];u[f]._custom=Wn(a&&a.r&&+a.r,this.resolveDataElementOptions(f+i).radius)}return u}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:u}=n,f=this.getParsed(e),a=r.getLabelForValue(f.x),y=u.getLabelForValue(f.y),_=f._custom;return{label:i[e]||"",value:"("+a+", "+y+(_?", "+_:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,r){const u=r==="reset",{iScale:f,vScale:a}=this._cachedMeta,{sharedOptions:y,includeOptions:_}=this._getSharedOptions(n,r),x=f.axis,A=a.axis;for(let O=n;O<n+i;O++){const I=e[O],F=!u&&this.getParsed(O),q={},H=q[x]=u?f.getPixelForDecimal(.5):f.getPixelForValue(F[x]),K=q[A]=u?a.getBasePixel():a.getPixelForValue(F[A]);q.skip=isNaN(H)||isNaN(K),_&&(q.options=y||this.resolveDataElementOptions(O,I.active?"active":r),u&&(q.options.radius=0)),this.updateElement(I,O,q,r)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const u=r.radius;return n!=="active"&&(r.radius=0),r.radius+=Wn(i&&i._custom,u),r}}function q4(t,e,n){let i=1,r=1,u=0,f=0;if(e<Br){const a=t,y=a+e,_=Math.cos(a),x=Math.sin(a),A=Math.cos(y),O=Math.sin(y),I=(X,tt,Q)=>vy(X,a,y,!0)?1:Math.max(tt,tt*n,Q,Q*n),F=(X,tt,Q)=>vy(X,a,y,!0)?-1:Math.min(tt,tt*n,Q,Q*n),q=I(0,_,A),H=I(Da,x,O),K=F(Fi,_,A),W=F(Fi+Da,x,O);i=(q-K)/2,r=(H-W)/2,u=-(q+K)/2,f=-(H+W)/2}return{ratioX:i,ratioY:r,offsetX:u,offsetY:f}}class DS extends Uf{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:i,textAlign:r,color:u,useBorderRadius:f,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((y,_)=>{const A=e.getDatasetMeta(0).controller.getStyle(_);return{text:y,fillStyle:A.backgroundColor,fontColor:u,hidden:!e.getDataVisibility(_),lineDash:A.borderDash,lineDashOffset:A.borderDashOffset,lineJoin:A.borderJoinStyle,lineWidth:A.borderWidth,strokeStyle:A.borderColor,textAlign:r,pointStyle:i,borderRadius:f&&(a||A.borderRadius),index:_}}):[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let u=y=>+i[y];if(Si(i[e])){const{key:y="value"}=this._parsing;u=_=>+Bf(i[_],y)}let f,a;for(f=e,a=e+n;f<a;++f)r._parsed[f]=u(f)}}_getRotation(){return hc(this.options.rotation-90)}_getCircumference(){return hc(this.options.circumference)}_getRotationExtents(){let e=Br,n=-Br;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,u=r._getRotation(),f=r._getCircumference();e=Math.min(e,u),n=Math.max(n,u+f)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,u=r.data,f=this.getMaxBorderWidth()+this.getMaxOffset(u)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-f)/2,0),y=Math.min(tN(this.options.cutout,a),1),_=this._getRingWeight(this.index),{circumference:x,rotation:A}=this._getRotationExtents(),{ratioX:O,ratioY:I,offsetX:F,offsetY:q}=q4(A,x,y),H=(i.width-f)/O,K=(i.height-f)/I,W=Math.max(Math.min(H,K)/2,0),X=Kk(this.options.radius,W),tt=Math.max(X*y,0),Q=(X-tt)/this._getVisibleDatasetWeightTotal();this.offsetX=F*X,this.offsetY=q*X,r.total=this.calculateTotal(),this.outerRadius=X-Q*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Q*_,0),this.updateElements(u,0,u.length,e)}_circumference(e,n){const i=this.options,r=this._cachedMeta,u=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*u/Br)}updateElements(e,n,i,r){const u=r==="reset",f=this.chart,a=f.chartArea,_=f.options.animation,x=(a.left+a.right)/2,A=(a.top+a.bottom)/2,O=u&&_.animateScale,I=O?0:this.innerRadius,F=O?0:this.outerRadius,{sharedOptions:q,includeOptions:H}=this._getSharedOptions(n,r);let K=this._getRotation(),W;for(W=0;W<n;++W)K+=this._circumference(W,u);for(W=n;W<n+i;++W){const X=this._circumference(W,u),tt=e[W],Q={x:x+this.offsetX,y:A+this.offsetY,startAngle:K,endAngle:K+X,circumference:X,outerRadius:F,innerRadius:I};H&&(Q.options=q||this.resolveDataElementOptions(W,tt.active?"active":r)),K+=X,this.updateElement(tt,W,Q,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,r;for(r=0;r<n.length;r++){const u=e._parsed[r];u!==null&&!isNaN(u)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(u))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Br*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],u=Uy(n._parsed[e],i.options.locale);return{label:r[e]||"",value:u}}getMaxBorderWidth(e){let n=0;const i=this.chart;let r,u,f,a,y;if(!e){for(r=0,u=i.data.datasets.length;r<u;++r)if(i.isDatasetVisible(r)){f=i.getDatasetMeta(r),e=f.data,a=f.controller;break}}if(!e)return 0;for(r=0,u=e.length;r<u;++r)y=a.resolveDataElementOptions(r),y.borderAlign!=="inner"&&(n=Math.max(n,y.borderWidth||0,y.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,r=e.length;i<r;++i){const u=this.resolveDataElementOptions(i);n=Math.max(n,u.offset||0,u.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(Wn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class MO extends Uf{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:u}=n,f=this.chart._animationsDisabled;let{start:a,count:y}=aO(n,r,f);this._drawStart=a,this._drawCount=y,sO(n)&&(a=0,y=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!u._decimated,i.points=r;const _=this.resolveDatasetElementOptions(e);this.options.showLine||(_.borderWidth=0),_.segment=this.options.segment,this.updateElement(i,void 0,{animated:!f,options:_},e),this.updateElements(r,a,y,e)}updateElements(e,n,i,r){const u=r==="reset",{iScale:f,vScale:a,_stacked:y,_dataset:_}=this._cachedMeta,{sharedOptions:x,includeOptions:A}=this._getSharedOptions(n,r),O=f.axis,I=a.axis,{spanGaps:F,segment:q}=this.options,H=wm(F)?F:Number.POSITIVE_INFINITY,K=this.chart._animationsDisabled||u||r==="none",W=n+i,X=e.length;let tt=n>0&&this.getParsed(n-1);for(let Q=0;Q<X;++Q){const at=e[Q],ht=K?at:{};if(Q<n||Q>=W){ht.skip=!0;continue}const ot=this.getParsed(Q),ct=di(ot[I]),xt=ht[O]=f.getPixelForValue(ot[O],Q),wt=ht[I]=u||ct?a.getBasePixel():a.getPixelForValue(y?this.applyStack(a,ot,y):ot[I],Q);ht.skip=isNaN(xt)||isNaN(wt)||ct,ht.stop=Q>0&&Math.abs(ot[O]-tt[O])>H,q&&(ht.parsed=ot,ht.raw=_.data[Q]),A&&(ht.options=x||this.resolveDataElementOptions(Q,at.active?"active":r)),K||this.updateElement(at,Q,ht,r),tt=ot}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const u=r[0].size(this.resolveDataElementOptions(0)),f=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,u,f)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class AO extends Uf{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((u,f)=>{const y=e.getDatasetMeta(0).controller.getStyle(f);return{text:u,fillStyle:y.backgroundColor,strokeStyle:y.borderColor,fontColor:r,lineWidth:y.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(f),index:f}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],u=Uy(n._parsed[e].r,i.options.locale);return{label:r[e]||"",value:u}}parseObjectData(e,n,i,r){return pO.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,r)=>{const u=this.getParsed(r).r;!isNaN(u)&&this.chart.getDataVisibility(r)&&(u<n.min&&(n.min=u),u>n.max&&(n.max=u))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,r=Math.min(n.right-n.left,n.bottom-n.top),u=Math.max(r/2,0),f=Math.max(i.cutoutPercentage?u/100*i.cutoutPercentage:1,0),a=(u-f)/e.getVisibleDatasetCount();this.outerRadius=u-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,r){const u=r==="reset",f=this.chart,y=f.options.animation,_=this._cachedMeta.rScale,x=_.xCenter,A=_.yCenter,O=_.getIndexAngle(0)-.5*Fi;let I=O,F;const q=360/this.countVisibleElements();for(F=0;F<n;++F)I+=this._computeAngle(F,r,q);for(F=n;F<n+i;F++){const H=e[F];let K=I,W=I+this._computeAngle(F,r,q),X=f.getDataVisibility(F)?_.getDistanceFromCenterForValue(this.getParsed(F).r):0;I=W,u&&(y.animateScale&&(X=0),y.animateRotate&&(K=W=O));const tt={x,y:A,innerRadius:0,outerRadius:X,startAngle:K,endAngle:W,options:this.resolveDataElementOptions(F,H.active?"active":r)};this.updateElement(H,F,tt,r)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?hc(this.resolveDataElementOptions(e,n).angle||i):0}}class H4 extends DS{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class Z4 extends Uf{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,r){return pO.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta,i=n.dataset,r=n.data||[],u=n.iScale.getLabels();if(i.points=r,e!=="resize"){const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0);const a={_loop:!0,_fullLoop:u.length===r.length,options:f};this.updateElement(i,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,n,i,r){const u=this._cachedMeta.rScale,f=r==="reset";for(let a=n;a<n+i;a++){const y=e[a],_=this.resolveDataElementOptions(a,y.active?"active":r),x=u.getPointPositionForValue(a,this.getParsed(a).r),A=f?u.xCenter:x.x,O=f?u.yCenter:x.y,I={x:A,y:O,angle:x.angle,skip:isNaN(A)||isNaN(O),options:_};this.updateElement(y,a,I,r)}}}class G4 extends Uf{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:u}=n,f=this.getParsed(e),a=r.getLabelForValue(f.x),y=u.getLabelForValue(f.y);return{label:i[e]||"",value:"("+a+", "+y+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:u,count:f}=aO(n,i,r);if(this._drawStart=u,this._drawCount=f,sO(n)&&(u=0,f=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:y}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!y._decimated,a.points=i;const _=this.resolveDatasetElementOptions(e);_.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:_},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,u,f,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,r){const u=r==="reset",{iScale:f,vScale:a,_stacked:y,_dataset:_}=this._cachedMeta,x=this.resolveDataElementOptions(n,r),A=this.getSharedOptions(x),O=this.includeOptions(r,A),I=f.axis,F=a.axis,{spanGaps:q,segment:H}=this.options,K=wm(q)?q:Number.POSITIVE_INFINITY,W=this.chart._animationsDisabled||u||r==="none";let X=n>0&&this.getParsed(n-1);for(let tt=n;tt<n+i;++tt){const Q=e[tt],at=this.getParsed(tt),ht=W?Q:{},ot=di(at[F]),ct=ht[I]=f.getPixelForValue(at[I],tt),xt=ht[F]=u||ot?a.getBasePixel():a.getPixelForValue(y?this.applyStack(a,at,y):at[F],tt);ht.skip=isNaN(ct)||isNaN(xt)||ot,ht.stop=tt>0&&Math.abs(at[I]-X[I])>K,H&&(ht.parsed=at,ht.raw=_.data[tt]),O&&(ht.options=A||this.resolveDataElementOptions(tt,Q.active?"active":r)),W||this.updateElement(Q,tt,ht,r),X=at}this.updateSharedOptions(A,r,x)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let y=n.length-1;y>=0;--y)a=Math.max(a,n[y].size(this.resolveDataElementOptions(y))/2);return a>0&&a}const i=e.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const u=n[0].size(this.resolveDataElementOptions(0)),f=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,u,f)/2}}var W4=Object.freeze({__proto__:null,BarController:V4,BubbleController:$4,DoughnutController:DS,LineController:MO,PieController:H4,PolarAreaController:AO,RadarController:Z4,ScatterController:G4});function Dd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class zS{static override(e){Object.assign(zS.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Dd()}parse(){return Dd()}format(){return Dd()}add(){return Dd()}diff(){return Dd()}startOf(){return Dd()}endOf(){return Dd()}}var Y4={_date:zS};function X4(t,e,n,i){const{controller:r,data:u,_sorted:f}=t,a=r._cachedMeta.iScale,y=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&f&&u.length){const _=a._reversePixels?dN:Ah;if(i){if(r._sharedOptions){const x=u[0],A=typeof x.getRange=="function"&&x.getRange(e);if(A){const O=_(u,e,n-A),I=_(u,e,n+A);return{lo:O.lo,hi:I.hi}}}}else{const x=_(u,e,n);if(y){const{vScale:A}=r._cachedMeta,{_parsed:O}=t,I=O.slice(0,x.lo+1).reverse().findIndex(q=>!di(q[A.axis]));x.lo-=Math.max(0,I);const F=O.slice(x.hi).findIndex(q=>!di(q[A.axis]));x.hi+=Math.max(0,F)}return x}}return{lo:0,hi:u.length-1}}function ex(t,e,n,i,r){const u=t.getSortedVisibleDatasetMetas(),f=n[e];for(let a=0,y=u.length;a<y;++a){const{index:_,data:x}=u[a],{lo:A,hi:O}=X4(u[a],e,f,r);for(let I=A;I<=O;++I){const F=x[I];F.skip||i(F,_,I)}}}function K4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const u=e?Math.abs(i.x-r.x):0,f=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(f,2))}}function Sb(t,e,n,i,r){const u=[];return!r&&!t.isPointInArea(e)||ex(t,n,e,function(a,y,_){!r&&!Eh(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&u.push({element:a,datasetIndex:y,index:_})},!0),u}function Q4(t,e,n,i){let r=[];function u(f,a,y){const{startAngle:_,endAngle:x}=f.getProps(["startAngle","endAngle"],i),{angle:A}=tO(f,{x:e.x,y:e.y});vy(A,_,x)&&r.push({element:f,datasetIndex:a,index:y})}return ex(t,n,e,u),r}function J4(t,e,n,i,r,u){let f=[];const a=K4(n);let y=Number.POSITIVE_INFINITY;function _(x,A,O){const I=x.inRange(e.x,e.y,r);if(i&&!I)return;const F=x.getCenterPoint(r);if(!(!!u||t.isPointInArea(F))&&!I)return;const H=a(e,F);H<y?(f=[{element:x,datasetIndex:A,index:O}],y=H):H===y&&f.push({element:x,datasetIndex:A,index:O})}return ex(t,n,e,_),f}function Tb(t,e,n,i,r,u){return!u&&!t.isPointInArea(e)?[]:n==="r"&&!i?Q4(t,e,n,r):J4(t,e,n,i,r,u)}function EM(t,e,n,i,r){const u=[],f=n==="x"?"inXRange":"inYRange";let a=!1;return ex(t,n,e,(y,_,x)=>{y[f]&&y[f](e[n],r)&&(u.push({element:y,datasetIndex:_,index:x}),a=a||y.inRange(e.x,e.y,r))}),i&&!a?[]:u}var tj={modes:{index(t,e,n,i){const r=Ld(e,t),u=n.axis||"x",f=n.includeInvisible||!1,a=n.intersect?Sb(t,r,u,i,f):Tb(t,r,u,!1,i,f),y=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(_=>{const x=a[0].index,A=_.data[x];A&&!A.skip&&y.push({element:A,datasetIndex:_.index,index:x})}),y):[]},dataset(t,e,n,i){const r=Ld(e,t),u=n.axis||"xy",f=n.includeInvisible||!1;let a=n.intersect?Sb(t,r,u,i,f):Tb(t,r,u,!1,i,f);if(a.length>0){const y=a[0].datasetIndex,_=t.getDatasetMeta(y).data;a=[];for(let x=0;x<_.length;++x)a.push({element:_[x],datasetIndex:y,index:x})}return a},point(t,e,n,i){const r=Ld(e,t),u=n.axis||"xy",f=n.includeInvisible||!1;return Sb(t,r,u,i,f)},nearest(t,e,n,i){const r=Ld(e,t),u=n.axis||"xy",f=n.includeInvisible||!1;return Tb(t,r,u,n.intersect,i,f)},x(t,e,n,i){const r=Ld(e,t);return EM(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Ld(e,t);return EM(t,r,"y",n.intersect,i)}}};const EO=["left","top","right","bottom"];function Vg(t,e){return t.filter(n=>n.pos===e)}function CM(t,e){return t.filter(n=>EO.indexOf(n.pos)===-1&&n.box.axis===e)}function $g(t,e){return t.sort((n,i)=>{const r=e?i:n,u=e?n:i;return r.weight===u.weight?r.index-u.index:r.weight-u.weight})}function ej(t){const e=[];let n,i,r,u,f,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:u,options:{stack:f,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:u,horizontal:r.isHorizontal(),weight:r.weight,stack:f&&u+f,stackWeight:a});return e}function nj(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:u}=n;if(!i||!EO.includes(r))continue;const f=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});f.count++,f.weight+=u}return e}function ij(t,e){const n=nj(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let u,f,a;for(u=0,f=t.length;u<f;++u){a=t[u];const{fullSize:y}=a.box,_=n[a.stack],x=_&&a.stackWeight/_.weight;a.horizontal?(a.width=x?x*i:y&&e.availableWidth,a.height=r):(a.width=i,a.height=x?x*r:y&&e.availableHeight)}return n}function rj(t){const e=ej(t),n=$g(e.filter(_=>_.box.fullSize),!0),i=$g(Vg(e,"left"),!0),r=$g(Vg(e,"right")),u=$g(Vg(e,"top"),!0),f=$g(Vg(e,"bottom")),a=CM(e,"x"),y=CM(e,"y");return{fullSize:n,leftAndTop:i.concat(u),rightAndBottom:r.concat(y).concat(f).concat(a),chartArea:Vg(e,"chartArea"),vertical:i.concat(r).concat(y),horizontal:u.concat(f).concat(a)}}function PM(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function CO(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function aj(t,e,n,i){const{pos:r,box:u}=n,f=t.maxPadding;if(!Si(r)){n.size&&(t[r]-=n.size);const A=i[n.stack]||{size:0,count:1};A.size=Math.max(A.size,n.horizontal?u.height:u.width),n.size=A.size/A.count,t[r]+=n.size}u.getPadding&&CO(f,u.getPadding());const a=Math.max(0,e.outerWidth-PM(f,t,"left","right")),y=Math.max(0,e.outerHeight-PM(f,t,"top","bottom")),_=a!==t.w,x=y!==t.h;return t.w=a,t.h=y,n.horizontal?{same:_,other:x}:{same:x,other:_}}function sj(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function oj(t,e){const n=e.maxPadding;function i(r){const u={left:0,top:0,right:0,bottom:0};return r.forEach(f=>{u[f]=Math.max(e[f],n[f])}),u}return i(t?["left","right"]:["top","bottom"])}function sy(t,e,n,i){const r=[];let u,f,a,y,_,x;for(u=0,f=t.length,_=0;u<f;++u){a=t[u],y=a.box,y.update(a.width||e.w,a.height||e.h,oj(a.horizontal,e));const{same:A,other:O}=aj(e,n,a,i);_|=A&&r.length,x=x||O,y.fullSize||r.push(a)}return _&&sy(r,e,n,i)||x}function vv(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function kM(t,e,n,i){const r=n.padding;let{x:u,y:f}=e;for(const a of t){const y=a.box,_=i[a.stack]||{placed:0,weight:1},x=a.stackWeight/_.weight||1;if(a.horizontal){const A=e.w*x,O=_.size||y.height;_y(_.start)&&(f=_.start),y.fullSize?vv(y,r.left,f,n.outerWidth-r.right-r.left,O):vv(y,e.left+_.placed,f,A,O),_.start=f,_.placed+=A,f=y.bottom}else{const A=e.h*x,O=_.size||y.width;_y(_.start)&&(u=_.start),y.fullSize?vv(y,u,r.top,O,n.outerHeight-r.bottom-r.top):vv(y,u,e.top+_.placed,O,A),_.start=u,_.placed+=A,u=y.right}}e.x=u,e.y=f}var Ao={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Eo(t.options.layout.padding),u=Math.max(e-r.width,0),f=Math.max(n-r.height,0),a=rj(t.boxes),y=a.vertical,_=a.horizontal;tr(t.boxes,q=>{typeof q.beforeLayout=="function"&&q.beforeLayout()});const x=y.reduce((q,H)=>H.box.options&&H.box.options.display===!1?q:q+1,0)||1,A=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:u,availableHeight:f,vBoxMaxWidth:u/2/x,hBoxMaxHeight:f/2}),O=Object.assign({},r);CO(O,Eo(i));const I=Object.assign({maxPadding:O,w:u,h:f,x:r.left,y:r.top},r),F=ij(y.concat(_),A);sy(a.fullSize,I,A,F),sy(y,I,A,F),sy(_,I,A,F)&&sy(y,I,A,F),sj(I),kM(a.leftAndTop,I,A,F),I.x+=I.w,I.y+=I.h,kM(a.rightAndBottom,I,A,F),t.chartArea={left:I.left,top:I.top,right:I.left+I.w,bottom:I.top+I.h,height:I.h,width:I.w},tr(a.chartArea,q=>{const H=q.box;Object.assign(H,t.chartArea),H.update(I.w,I.h,{left:0,top:0,right:0,bottom:0})})}};class PO{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class lj extends PO{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const $v="$chartjs",uj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},OM=t=>t===null||t==="";function cj(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[$v]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",OM(r)){const u=pM(t,"width");u!==void 0&&(t.width=u)}if(OM(i))if(t.style.height==="")t.height=t.width/(e||2);else{const u=pM(t,"height");u!==void 0&&(t.height=u)}return t}const kO=s4?{passive:!0}:!1;function hj(t,e,n){t&&t.addEventListener(e,n,kO)}function fj(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,kO)}function dj(t,e){const n=uj[t.type]||t.type,{x:i,y:r}=Ld(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function i0(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function pj(t,e,n){const i=t.canvas,r=new MutationObserver(u=>{let f=!1;for(const a of u)f=f||i0(a.addedNodes,i),f=f&&!i0(a.removedNodes,i);f&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function mj(t,e,n){const i=t.canvas,r=new MutationObserver(u=>{let f=!1;for(const a of u)f=f||i0(a.removedNodes,i),f=f&&!i0(a.addedNodes,i);f&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const by=new Map;let DM=0;function OO(){const t=window.devicePixelRatio;t!==DM&&(DM=t,by.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function gj(t,e){by.size||window.addEventListener("resize",OO),by.set(t,e)}function yj(t){by.delete(t),by.size||window.removeEventListener("resize",OO)}function _j(t,e,n){const i=t.canvas,r=i&&OS(i);if(!r)return;const u=rO((a,y)=>{const _=r.clientWidth;n(a,y),_<r.clientWidth&&n()},window),f=new ResizeObserver(a=>{const y=a[0],_=y.contentRect.width,x=y.contentRect.height;_===0&&x===0||u(_,x)});return f.observe(r),gj(t,u),f}function Mb(t,e,n){n&&n.disconnect(),e==="resize"&&yj(t)}function vj(t,e,n){const i=t.canvas,r=rO(u=>{t.ctx!==null&&n(dj(u,t))},t);return hj(i,e,r),r}class xj extends PO{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(cj(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[$v])return!1;const i=n[$v].initial;["height","width"].forEach(u=>{const f=i[u];di(f)?n.removeAttribute(u):n.setAttribute(u,f)});const r=i.style||{};return Object.keys(r).forEach(u=>{n.style[u]=r[u]}),n.width=n.width,delete n[$v],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),f={attach:pj,detach:mj,resize:_j}[n]||vj;r[n]=f(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Mb,detach:Mb,resize:Mb}[n]||fj)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return a4(e,n,i,r)}isAttached(e){const n=e&&OS(e);return!!(n&&n.isConnected)}}function bj(t){return!kS()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?lj:xj}let Uh=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return wm(this.x)&&wm(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(u=>{r[u]=i[u]&&i[u].active()?i[u]._to:this[u]}),r}};function wj(t,e){const n=t.options.ticks,i=Sj(t),r=Math.min(n.maxTicksLimit||i,i),u=n.major.enabled?Mj(e):[],f=u.length,a=u[0],y=u[f-1],_=[];if(f>r)return Aj(e,_,u,f/r),_;const x=Tj(u,e,r);if(f>0){let A,O;const I=f>1?Math.round((y-a)/(f-1)):null;for(xv(e,_,x,di(I)?0:a-I,a),A=0,O=f-1;A<O;A++)xv(e,_,x,u[A],u[A+1]);return xv(e,_,x,y,di(I)?e.length:y+I),_}return xv(e,_,x),_}function Sj(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function Tj(t,e,n){const i=Ej(t),r=e.length/n;if(!i)return Math.max(r,1);const u=lN(i);for(let f=0,a=u.length-1;f<a;f++){const y=u[f];if(y>r)return y}return Math.max(r,1)}function Mj(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function Aj(t,e,n,i){let r=0,u=n[0],f;for(i=Math.ceil(i),f=0;f<t.length;f++)f===u&&(e.push(t[f]),r++,u=n[r*i])}function xv(t,e,n,i,r){const u=Wn(i,0),f=Math.min(Wn(r,t.length),t.length);let a=0,y,_,x;for(n=Math.ceil(n),r&&(y=r-i,n=y/Math.floor(y/n)),x=u;x<0;)a++,x=Math.round(u+a*n);for(_=Math.max(u,0);_<f;_++)_===x&&(e.push(t[_]),a++,x=Math.round(u+a*n))}function Ej(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const Cj=t=>t==="left"?"right":t==="right"?"left":t,zM=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,LM=(t,e)=>Math.min(e||t,t);function IM(t,e){const n=[],i=t.length/e,r=t.length;let u=0;for(;u<r;u+=i)n.push(t[Math.floor(u)]);return n}function Pj(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),u=t._startPixel,f=t._endPixel,a=1e-6;let y=t.getPixelForTick(r),_;if(!(n&&(i===1?_=Math.max(y-u,f-y):e===0?_=(t.getPixelForTick(1)-y)/2:_=(y-t.getPixelForTick(r-1))/2,y+=r<e?_:-_,y<u-a||y>f+a)))return y}function kj(t,e){tr(t,n=>{const i=n.gc,r=i.length/2;let u;if(r>e){for(u=0;u<r;++u)delete n.data[i[u]];i.splice(0,r)}})}function qg(t){return t.drawTicks?t.tickLength:0}function RM(t,e){if(!t.display)return 0;const n=ls(t.font,e),i=Eo(t.padding);return(Hr(t.text)?t.text.length:1)*n.lineHeight+i.height}function Oj(t,e){return Ff(t,{scale:e,type:"scale"})}function Dj(t,e,n){return Ff(t,{tick:n,index:e,type:"tick"})}function zj(t,e,n){let i=TS(t);return(n&&e!=="right"||!n&&e==="right")&&(i=Cj(i)),i}function Lj(t,e,n,i){const{top:r,left:u,bottom:f,right:a,chart:y}=t,{chartArea:_,scales:x}=y;let A=0,O,I,F;const q=f-r,H=a-u;if(t.isHorizontal()){if(I=wo(i,u,a),Si(n)){const K=Object.keys(n)[0],W=n[K];F=x[K].getPixelForValue(W)+q-e}else n==="center"?F=(_.bottom+_.top)/2+q-e:F=zM(t,n,e);O=a-u}else{if(Si(n)){const K=Object.keys(n)[0],W=n[K];I=x[K].getPixelForValue(W)-H+e}else n==="center"?I=(_.left+_.right)/2-H+e:I=zM(t,n,e);F=wo(i,f,r),A=n==="left"?-Da:Da}return{titleX:I,titleY:F,maxWidth:O,rotation:A}}class rp extends Uh{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Zl(e,Number.POSITIVE_INFINITY),n=Zl(n,Number.NEGATIVE_INFINITY),i=Zl(i,Number.POSITIVE_INFINITY),r=Zl(r,Number.NEGATIVE_INFINITY),{min:Zl(e,i),max:Zl(n,r),minDefined:ga(e),maxDefined:ga(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:u}=this.getUserBounds(),f;if(r&&u)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let y=0,_=a.length;y<_;++y)f=a[y].controller.getMinMax(this,e),r||(n=Math.min(n,f.min)),u||(i=Math.max(i,f.max));return n=u&&n>i?i:n,i=r&&n>i?n:i,{min:Zl(n,Zl(i,n)),max:Zl(i,Zl(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Sr(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:u,ticks:f}=this.options,a=f.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=BN(this,u,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const y=a<this.ticks.length;this._convertTicksToLabels(y?IM(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),f.display&&(f.autoSkip||f.source==="auto")&&(this.ticks=wj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),y&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Sr(this.options.afterUpdate,[this])}beforeSetDimensions(){Sr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Sr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Sr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Sr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,u;for(i=0,r=e.length;i<r;i++)u=e[i],u.label=Sr(n.callback,[u.value,i,e],this)}afterTickToLabelConversion(){Sr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Sr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=LM(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,u=n.maxRotation;let f=r,a,y,_;if(!this._isVisible()||!n.display||r>=u||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const x=this._getLabelSizes(),A=x.widest.width,O=x.highest.height,I=Ss(this.chart.width-A,0,this.maxWidth);a=e.offset?this.maxWidth/i:I/(i-1),A+6>a&&(a=I/(i-(e.offset?.5:1)),y=this.maxHeight-qg(e.grid)-n.padding-RM(e.title,this.chart.options.font),_=Math.sqrt(A*A+O*O),f=wS(Math.min(Math.asin(Ss((x.highest.height+6)/a,-1,1)),Math.asin(Ss(y/_,-1,1))-Math.asin(Ss(O/_,-1,1)))),f=Math.max(r,Math.min(u,f))),this.labelRotation=f}afterCalculateLabelRotation(){Sr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Sr(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:u}}=this,f=this._isVisible(),a=this.isHorizontal();if(f){const y=RM(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=qg(u)+y):(e.height=this.maxHeight,e.width=qg(u)+y),i.display&&this.ticks.length){const{first:_,last:x,widest:A,highest:O}=this._getLabelSizes(),I=i.padding*2,F=hc(this.labelRotation),q=Math.cos(F),H=Math.sin(F);if(a){const K=i.mirror?0:H*A.width+q*O.height;e.height=Math.min(this.maxHeight,e.height+K+I)}else{const K=i.mirror?0:q*A.width+H*O.height;e.width=Math.min(this.maxWidth,e.width+K+I)}this._calculatePadding(_,x,H,q)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:u,padding:f},position:a}=this.options,y=this.labelRotation!==0,_=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const x=this.getPixelForTick(0)-this.left,A=this.right-this.getPixelForTick(this.ticks.length-1);let O=0,I=0;y?_?(O=r*e.width,I=i*n.height):(O=i*e.height,I=r*n.width):u==="start"?I=n.width:u==="end"?O=e.width:u!=="inner"&&(O=e.width/2,I=n.width/2),this.paddingLeft=Math.max((O-x+f)*this.width/(this.width-x),0),this.paddingRight=Math.max((I-A+f)*this.width/(this.width-A),0)}else{let x=n.height/2,A=e.height/2;u==="start"?(x=0,A=e.height):u==="end"&&(x=n.height,A=0),this.paddingTop=x+f,this.paddingBottom=A+f}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Sr(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)di(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=IM(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:u}=this,f=[],a=[],y=Math.floor(n/LM(n,i));let _=0,x=0,A,O,I,F,q,H,K,W,X,tt,Q;for(A=0;A<n;A+=y){if(F=e[A].label,q=this._resolveTickFontOptions(A),r.font=H=q.string,K=u[H]=u[H]||{data:{},gc:[]},W=q.lineHeight,X=tt=0,!di(F)&&!Hr(F))X=e0(r,K.data,K.gc,X,F),tt=W;else if(Hr(F))for(O=0,I=F.length;O<I;++O)Q=F[O],!di(Q)&&!Hr(Q)&&(X=e0(r,K.data,K.gc,X,Q),tt+=W);f.push(X),a.push(tt),_=Math.max(X,_),x=Math.max(tt,x)}kj(u,n);const at=f.indexOf(_),ht=a.indexOf(x),ot=ct=>({width:f[ct]||0,height:a[ct]||0});return{first:ot(0),last:ot(n-1),widest:ot(at),highest:ot(ht),widths:f,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return fN(this._alignToPixels?Od(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=Dj(this.getContext(),e,i))}return this.$context||(this.$context=Oj(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=hc(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),u=this._getLabelSizes(),f=e.autoSkipPadding||0,a=u?u.widest.width+f:0,y=u?u.highest.height+f:0;return this.isHorizontal()?y*i>a*r?a/i:y/r:y*r<a*i?y/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:u,position:f,border:a}=r,y=u.offset,_=this.isHorizontal(),A=this.ticks.length+(y?1:0),O=qg(u),I=[],F=a.setContext(this.getContext()),q=F.display?F.width:0,H=q/2,K=function(Nt){return Od(i,Nt,q)};let W,X,tt,Q,at,ht,ot,ct,xt,wt,Ct,re;if(f==="top")W=K(this.bottom),ht=this.bottom-O,ct=W-H,wt=K(e.top)+H,re=e.bottom;else if(f==="bottom")W=K(this.top),wt=e.top,re=K(e.bottom)-H,ht=W+H,ct=this.top+O;else if(f==="left")W=K(this.right),at=this.right-O,ot=W-H,xt=K(e.left)+H,Ct=e.right;else if(f==="right")W=K(this.left),xt=e.left,Ct=K(e.right)-H,at=W+H,ot=this.left+O;else if(n==="x"){if(f==="center")W=K((e.top+e.bottom)/2+.5);else if(Si(f)){const Nt=Object.keys(f)[0],Pt=f[Nt];W=K(this.chart.scales[Nt].getPixelForValue(Pt))}wt=e.top,re=e.bottom,ht=W+H,ct=ht+O}else if(n==="y"){if(f==="center")W=K((e.left+e.right)/2);else if(Si(f)){const Nt=Object.keys(f)[0],Pt=f[Nt];W=K(this.chart.scales[Nt].getPixelForValue(Pt))}at=W-H,ot=at-O,xt=e.left,Ct=e.right}const ve=Wn(r.ticks.maxTicksLimit,A),Ee=Math.max(1,Math.ceil(A/ve));for(X=0;X<A;X+=Ee){const Nt=this.getContext(X),Pt=u.setContext(Nt),Bt=a.setContext(Nt),Ft=Pt.lineWidth,$t=Pt.color,ft=Bt.dash||[],St=Bt.dashOffset,jt=Pt.tickWidth,Yt=Pt.tickColor,le=Pt.tickBorderDash||[],ce=Pt.tickBorderDashOffset;tt=Pj(this,X,y),tt!==void 0&&(Q=Od(i,tt,Ft),_?at=ot=xt=Ct=Q:ht=ct=wt=re=Q,I.push({tx1:at,ty1:ht,tx2:ot,ty2:ct,x1:xt,y1:wt,x2:Ct,y2:re,width:Ft,color:$t,borderDash:ft,borderDashOffset:St,tickWidth:jt,tickColor:Yt,tickBorderDash:le,tickBorderDashOffset:ce}))}return this._ticksLength=A,this._borderValue=W,I}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:u}=i,f=this.isHorizontal(),a=this.ticks,{align:y,crossAlign:_,padding:x,mirror:A}=u,O=qg(i.grid),I=O+x,F=A?-x:I,q=-hc(this.labelRotation),H=[];let K,W,X,tt,Q,at,ht,ot,ct,xt,wt,Ct,re="middle";if(r==="top")at=this.bottom-F,ht=this._getXAxisLabelAlignment();else if(r==="bottom")at=this.top+F,ht=this._getXAxisLabelAlignment();else if(r==="left"){const Ee=this._getYAxisLabelAlignment(O);ht=Ee.textAlign,Q=Ee.x}else if(r==="right"){const Ee=this._getYAxisLabelAlignment(O);ht=Ee.textAlign,Q=Ee.x}else if(n==="x"){if(r==="center")at=(e.top+e.bottom)/2+I;else if(Si(r)){const Ee=Object.keys(r)[0],Nt=r[Ee];at=this.chart.scales[Ee].getPixelForValue(Nt)+I}ht=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")Q=(e.left+e.right)/2-I;else if(Si(r)){const Ee=Object.keys(r)[0],Nt=r[Ee];Q=this.chart.scales[Ee].getPixelForValue(Nt)}ht=this._getYAxisLabelAlignment(O).textAlign}n==="y"&&(y==="start"?re="top":y==="end"&&(re="bottom"));const ve=this._getLabelSizes();for(K=0,W=a.length;K<W;++K){X=a[K],tt=X.label;const Ee=u.setContext(this.getContext(K));ot=this.getPixelForTick(K)+u.labelOffset,ct=this._resolveTickFontOptions(K),xt=ct.lineHeight,wt=Hr(tt)?tt.length:1;const Nt=wt/2,Pt=Ee.color,Bt=Ee.textStrokeColor,Ft=Ee.textStrokeWidth;let $t=ht;f?(Q=ot,ht==="inner"&&(K===W-1?$t=this.options.reverse?"left":"right":K===0?$t=this.options.reverse?"right":"left":$t="center"),r==="top"?_==="near"||q!==0?Ct=-wt*xt+xt/2:_==="center"?Ct=-ve.highest.height/2-Nt*xt+xt:Ct=-ve.highest.height+xt/2:_==="near"||q!==0?Ct=xt/2:_==="center"?Ct=ve.highest.height/2-Nt*xt:Ct=ve.highest.height-wt*xt,A&&(Ct*=-1),q!==0&&!Ee.showLabelBackdrop&&(Q+=xt/2*Math.sin(q))):(at=ot,Ct=(1-wt)*xt/2);let ft;if(Ee.showLabelBackdrop){const St=Eo(Ee.backdropPadding),jt=ve.heights[K],Yt=ve.widths[K];let le=Ct-St.top,ce=0-St.left;switch(re){case"middle":le-=jt/2;break;case"bottom":le-=jt;break}switch(ht){case"center":ce-=Yt/2;break;case"right":ce-=Yt;break;case"inner":K===W-1?ce-=Yt:K>0&&(ce-=Yt/2);break}ft={left:ce,top:le,width:Yt+St.width,height:jt+St.height,color:Ee.backdropColor}}H.push({label:tt,font:ct,textOffset:Ct,options:{rotation:q,color:Pt,strokeColor:Bt,strokeWidth:Ft,textAlign:$t,textBaseline:re,translation:[Q,at],backdrop:ft}})}return H}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-hc(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:u}}=this.options,f=this._getLabelSizes(),a=e+u,y=f.widest.width;let _,x;return n==="left"?r?(x=this.right+u,i==="near"?_="left":i==="center"?(_="center",x+=y/2):(_="right",x+=y)):(x=this.right-a,i==="near"?_="right":i==="center"?(_="center",x-=y/2):(_="left",x=this.left)):n==="right"?r?(x=this.left+u,i==="near"?_="right":i==="center"?(_="center",x-=y/2):(_="left",x-=y)):(x=this.left+a,i==="near"?_="left":i==="center"?(_="center",x+=y/2):(_="right",x=this.right)):_="right",{textAlign:_,x}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:u,height:f}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,u,f),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(u=>u.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let u,f;const a=(y,_,x)=>{!x.width||!x.color||(i.save(),i.lineWidth=x.width,i.strokeStyle=x.color,i.setLineDash(x.borderDash||[]),i.lineDashOffset=x.borderDashOffset,i.beginPath(),i.moveTo(y.x,y.y),i.lineTo(_.x,_.y),i.stroke(),i.restore())};if(n.display)for(u=0,f=r.length;u<f;++u){const y=r[u];n.drawOnChartArea&&a({x:y.x1,y:y.y1},{x:y.x2,y:y.y2},y),n.drawTicks&&a({x:y.tx1,y:y.ty1},{x:y.tx2,y:y.ty2},{color:y.tickColor,width:y.tickWidth,borderDash:y.tickBorderDash,borderDashOffset:y.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,u=i.setContext(this.getContext()),f=i.display?u.width:0;if(!f)return;const a=r.setContext(this.getContext(0)).lineWidth,y=this._borderValue;let _,x,A,O;this.isHorizontal()?(_=Od(e,this.left,f)-f/2,x=Od(e,this.right,a)+a/2,A=O=y):(A=Od(e,this.top,f)-f/2,O=Od(e,this.bottom,a)+a/2,_=x=y),n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.beginPath(),n.moveTo(_,A),n.lineTo(x,O),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Q0(i,r);const u=this.getLabelItems(e);for(const f of u){const a=f.options,y=f.font,_=f.label,x=f.textOffset;Xd(i,_,0,x,y,a)}r&&J0(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const u=ls(i.font),f=Eo(i.padding),a=i.align;let y=u.lineHeight/2;n==="bottom"||n==="center"||Si(n)?(y+=f.bottom,Hr(i.text)&&(y+=u.lineHeight*(i.text.length-1))):y+=f.top;const{titleX:_,titleY:x,maxWidth:A,rotation:O}=Lj(this,y,n,a);Xd(e,i.text,0,0,u,{color:i.color,maxWidth:A,rotation:O,textAlign:zj(a,n,r),textBaseline:"middle",translation:[_,x]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Wn(e.grid&&e.grid.z,-1),r=Wn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==rp.prototype.draw?[{z:n,draw:u=>{this.draw(u)}}]:[{z:i,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:u=>{this.drawLabels(u)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let u,f;for(u=0,f=n.length;u<f;++u){const a=n[u];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ls(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class bv{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;Bj(n)&&(i=this.register(n));const r=this.items,u=e.id,f=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+e);return u in r||(r[u]=e,Ij(e,f,i),this.override&&Zr.override(e.id,e.overrides)),f}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Zr[r]&&(delete Zr[r][i],this.override&&delete Yd[i])}}function Ij(t,e,n){const i=yy(Object.create(null),[n?Zr.get(n):{},Zr.get(e),t.defaults]);Zr.set(e,i),t.defaultRoutes&&Rj(e,t.defaultRoutes),t.descriptors&&Zr.describe(e,t.descriptors)}function Rj(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),u=[t].concat(i).join("."),f=e[n].split("."),a=f.pop(),y=f.join(".");Zr.route(u,r,y,a)})}function Bj(t){return"id"in t&&"defaults"in t}class Nj{constructor(){this.controllers=new bv(Uf,"datasets",!0),this.elements=new bv(Uh,"elements"),this.plugins=new bv(Object,"plugins"),this.scales=new bv(rp,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const u=i||this._getRegistryForType(r);i||u.isForType(r)||u===this.plugins&&r.id?this._exec(e,u,r):tr(r,f=>{const a=i||this._getRegistryForType(f);this._exec(e,a,f)})})}_exec(e,n,i){const r=bS(e);Sr(i["before"+r],[],i),n[e](i),Sr(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Rc=new Nj;class jj{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const u=r?this._descriptors(e).filter(r):this._descriptors(e),f=this._notify(u,e,n,i);return n==="afterDestroy"&&(this._notify(u,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),f}_notify(e,n,i,r){r=r||{};for(const u of e){const f=u.plugin,a=f[i],y=[n,r,u.options];if(Sr(a,y,f)===!1&&r.cancelable)return!1}return!0}invalidate(){di(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=Wn(i.options&&i.options.plugins,{}),u=Fj(i);return r===!1&&!n?[]:Vj(e,u,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(u,f)=>u.filter(a=>!f.some(y=>a.plugin.id===y.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function Fj(t){const e={},n=[],i=Object.keys(Rc.plugins.items);for(let u=0;u<i.length;u++)n.push(Rc.getPlugin(i[u]));const r=t.plugins||[];for(let u=0;u<r.length;u++){const f=r[u];n.indexOf(f)===-1&&(n.push(f),e[f.id]=!0)}return{plugins:n,localIds:e}}function Uj(t,e){return!e&&t===!1?null:t===!0?{}:t}function Vj(t,{plugins:e,localIds:n},i,r){const u=[],f=t.getContext();for(const a of e){const y=a.id,_=Uj(i[y],r);_!==null&&u.push({plugin:a,options:$j(t.config,{plugin:a,local:n[y]},_,f)})}return u}function $j(t,{plugin:e,local:n},i,r){const u=t.pluginScopeKeys(e),f=t.getOptionScopes(i,u);return n&&e.defaults&&f.push(e.defaults),t.createResolver(f,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function pw(t,e){const n=Zr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function qj(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Hj(t,e){return t===e?"_index_":"_value_"}function BM(t){if(t==="x"||t==="y"||t==="r")return t}function Zj(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function mw(t,...e){if(BM(t))return t;for(const n of e){const i=n.axis||Zj(n.position)||t.length>1&&BM(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function NM(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Gj(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return NM(t,"x",n[0])||NM(t,"y",n[0])}return{}}function Wj(t,e){const n=Yd[t.type]||{scales:{}},i=e.scales||{},r=pw(t.type,e),u=Object.create(null);return Object.keys(i).forEach(f=>{const a=i[f];if(!Si(a))return console.error(`Invalid scale configuration for scale: ${f}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${f}`);const y=mw(f,a,Gj(f,t),Zr.scales[a.type]),_=Hj(y,r),x=n.scales||{};u[f]=cy(Object.create(null),[{axis:y},a,x[y],x[_]])}),t.data.datasets.forEach(f=>{const a=f.type||t.type,y=f.indexAxis||pw(a,e),x=(Yd[a]||{}).scales||{};Object.keys(x).forEach(A=>{const O=qj(A,y),I=f[O+"AxisID"]||O;u[I]=u[I]||Object.create(null),cy(u[I],[{axis:O},i[I],x[A]])})}),Object.keys(u).forEach(f=>{const a=u[f];cy(a,[Zr.scales[a.type],Zr.scale])}),u}function DO(t){const e=t.options||(t.options={});e.plugins=Wn(e.plugins,{}),e.scales=Wj(t,e)}function zO(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Yj(t){return t=t||{},t.data=zO(t.data),DO(t),t}const jM=new Map,LO=new Set;function wv(t,e){let n=jM.get(t);return n||(n=e(),jM.set(t,n),LO.add(n)),n}const Hg=(t,e,n)=>{const i=Bf(e,n);i!==void 0&&t.add(i)};class Xj{constructor(e){this._config=Yj(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=zO(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),DO(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return wv(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return wv(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return wv(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return wv(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:u}=this,f=this._cachedScopes(e,i),a=f.get(n);if(a)return a;const y=new Set;n.forEach(x=>{e&&(y.add(e),x.forEach(A=>Hg(y,e,A))),x.forEach(A=>Hg(y,r,A)),x.forEach(A=>Hg(y,Yd[u]||{},A)),x.forEach(A=>Hg(y,Zr,A)),x.forEach(A=>Hg(y,fw,A))});const _=Array.from(y);return _.length===0&&_.push(Object.create(null)),LO.has(n)&&f.set(n,_),_}chartOptionScopes(){const{options:e,type:n}=this;return[e,Yd[n]||{},Zr.datasets[n]||{},{type:n},Zr,fw]}resolveNamedOptions(e,n,i,r=[""]){const u={$shared:!0},{resolver:f,subPrefixes:a}=FM(this._resolverCache,e,r);let y=f;if(Qj(f,n)){u.$shared=!1,i=Nf(i)?i():i;const _=this.createResolver(e,i,a);y=Sm(f,i,_)}for(const _ of n)u[_]=y[_];return u}createResolver(e,n,i=[""],r){const{resolver:u}=FM(this._resolverCache,e,i);return Si(n)?Sm(u,n,void 0,r):u}}function FM(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let u=i.get(r);return u||(u={resolver:ES(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,u)),u}const Kj=t=>Si(t)&&Object.getOwnPropertyNames(t).some(e=>Nf(t[e]));function Qj(t,e){const{isScriptable:n,isIndexable:i}=cO(t);for(const r of e){const u=n(r),f=i(r),a=(f||u)&&t[r];if(u&&(Nf(a)||Kj(a))||f&&Hr(a))return!0}return!1}var Jj="4.5.1";const t6=["top","bottom","left","right","chartArea"];function UM(t,e){return t==="top"||t==="bottom"||t6.indexOf(t)===-1&&e==="x"}function VM(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function $M(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Sr(n&&n.onComplete,[t],e)}function e6(t){const e=t.chart,n=e.options.animation;Sr(n&&n.onProgress,[t],e)}function IO(t){return kS()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const qv={},qM=t=>{const e=IO(t);return Object.values(qv).filter(n=>n.canvas===e).pop()};function n6(t,e,n){const i=Object.keys(t);for(const r of i){const u=+r;if(u>=e){const f=t[r];delete t[r],(n>0||u>e)&&(t[u+n]=f)}}}function i6(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}let Lm=class{static defaults=Zr;static instances=qv;static overrides=Yd;static registry=Rc;static version=Jj;static getChart=qM;static register(...e){Rc.add(...e),HM()}static unregister(...e){Rc.remove(...e),HM()}constructor(e,n){const i=this.config=new Xj(n),r=IO(e),u=qM(r);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");const f=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||bj(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,f.aspectRatio),y=a&&a.canvas,_=y&&y.height,x=y&&y.width;if(this.id=J5(),this.ctx=a,this.canvas=y,this.width=x,this.height=_,this._options=f,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new jj,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=gN(A=>this.update(A),f.resizeDelay||0),this._dataChanges=[],qv[this.id]=this,!a||!y){console.error("Failed to create chart: can't acquire context from the given item");return}xh.listen(this,"complete",$M),xh.listen(this,"progress",e6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:u}=this;return di(e)?n&&u?u:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Rc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():dM(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return cM(this.canvas,this.ctx),this}stop(){return xh.stop(this),this}resize(e,n){xh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,u=i.maintainAspectRatio&&this.aspectRatio,f=this.platform.getMaximumSize(r,e,n,u),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),y=this.width?"resize":"attach";this.width=f.width,this.height=f.height,this._aspectRatio=this.aspectRatio,dM(this,a,!0)&&(this.notifyPlugins("resize",{size:f}),Sr(i.onResize,[this,f],this),this.attached&&this._doResize(y)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};tr(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((f,a)=>(f[a]=!1,f),{});let u=[];n&&(u=u.concat(Object.keys(n).map(f=>{const a=n[f],y=mw(f,a),_=y==="r",x=y==="x";return{options:a,dposition:_?"chartArea":x?"bottom":"left",dtype:_?"radialLinear":x?"category":"linear"}}))),tr(u,f=>{const a=f.options,y=a.id,_=mw(y,a),x=Wn(a.type,f.dtype);(a.position===void 0||UM(a.position,_)!==UM(f.dposition))&&(a.position=f.dposition),r[y]=!0;let A=null;if(y in i&&i[y].type===x)A=i[y];else{const O=Rc.getScale(x);A=new O({id:y,type:x,ctx:this.ctx,chart:this}),i[A.id]=A}A.init(a,e)}),tr(r,(f,a)=>{f||delete i[a]}),tr(i,f=>{Ao.configure(this,f,f.options),Ao.addBox(this,f)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,u)=>r.index-u.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(VM("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(u=>u===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const u=n[i];let f=this.getDatasetMeta(i);const a=u.type||this.config.type;if(f.type&&f.type!==a&&(this._destroyDatasetMeta(i),f=this.getDatasetMeta(i)),f.type=a,f.indexAxis=u.indexAxis||pw(a,this.options),f.order=u.order||0,f.index=i,f.label=""+u.label,f.visible=this.isDatasetVisible(i),f.controller)f.controller.updateIndex(i),f.controller.linkScales();else{const y=Rc.getController(a),{datasetElementType:_,dataElementType:x}=Zr.datasets[a];Object.assign(y,{dataElementType:Rc.getElement(x),datasetElementType:_&&Rc.getElement(_)}),f.controller=new y(this,i),e.push(f.controller)}}return this._updateMetasets(),e}_resetElements(){tr(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let f=0;for(let _=0,x=this.data.datasets.length;_<x;_++){const{controller:A}=this.getDatasetMeta(_),O=!r&&u.indexOf(A)===-1;A.buildOrUpdateElements(O),f=Math.max(+A.getMaxOverflow(),f)}f=this._minPadding=i.layout.autoPadding?f:0,this._updateLayout(f),r||tr(u,_=>{_.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(VM("z","_idx"));const{_active:a,_lastEvent:y}=this;y?this._eventHandler(y,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){tr(this.scales,e=>{Ao.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!eM(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:u}of n){const f=i==="_removeElements"?-u:u;n6(e,r,f)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=u=>new Set(e.filter(f=>f[0]===u).map((f,a)=>a+","+f.splice(1).join(","))),r=i(0);for(let u=1;u<n;u++)if(!eM(r,i(u)))return;return Array.from(r).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ao.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],tr(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,u)=>{r._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Nf(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xh.has(this)?this.attached&&!xh.running(this)&&xh.start(this):(this.draw(),$M({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,u;for(r=0,u=n.length;r<u;++r){const f=n[r];(!e||f.visible)&&i.push(f)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=bO(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Q0(n,r),e.controller.draw(),r&&J0(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Eh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const u=tj.modes[n];return typeof u=="function"?u(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(u=>u&&u._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Ff(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",u=this.getDatasetMeta(e),f=u.controller._resolveAnimations(void 0,r);_y(n)?(u.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),f.update(u,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),xh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),cM(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete qv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(u,f)=>{n.addEventListener(this,u,f),e[u]=f},r=(u,f,a)=>{u.offsetX=f,u.offsetY=a,this._eventHandler(u)};tr(this.options.events,u=>i(u,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(y,_)=>{n.addEventListener(this,y,_),e[y]=_},r=(y,_)=>{e[y]&&(n.removeEventListener(this,y,_),delete e[y])},u=(y,_)=>{this.canvas&&this.resize(y,_)};let f;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",u),i("detach",f)};f=()=>{this.attached=!1,r("resize",u),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():f()}unbindEvents(){tr(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},tr(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let u,f,a,y;for(n==="dataset"&&(u=this.getDatasetMeta(e[0].datasetIndex),u.controller["_"+r+"DatasetHoverStyle"]()),a=0,y=e.length;a<y;++a){f=e[a];const _=f&&this.getDatasetMeta(f.datasetIndex).controller;_&&_[r+"HoverStyle"](f.element,f.datasetIndex,f.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:u,index:f})=>{const a=this.getDatasetMeta(u);if(!a)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:a.data[f],index:f}});!Qv(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,u=(y,_)=>y.filter(x=>!_.some(A=>x.datasetIndex===A.datasetIndex&&x.index===A.index)),f=u(n,e),a=i?e:u(e,n);f.length&&this.updateHoverStyle(f,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=f=>(f.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const u=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(u||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:u}=this,f=n,a=this._getActiveElements(e,r,i,f),y=aN(e),_=i6(e,this._lastEvent,i,y);i&&(this._lastEvent=null,Sr(u.onHover,[e,a,this],this),y&&Sr(u.onClick,[e,a,this],this));const x=!Qv(a,r);return(x||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=_,x}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const u=this.options.hover;return this.getElementsAtEventForMode(e,u.mode,u,r)}};function HM(){return tr(Lm.instances,t=>t._plugins.invalidate())}function r6(t,e,n){const{startAngle:i,x:r,y:u,outerRadius:f,innerRadius:a,options:y}=e,{borderWidth:_,borderJoinStyle:x}=y,A=Math.min(_/f,To(i-n));if(t.beginPath(),t.arc(r,u,f-_/2,i+A/2,n-A/2),a>0){const O=Math.min(_/a,To(i-n));t.arc(r,u,a+_/2,n-O/2,i+O/2,!0)}else{const O=Math.min(_/2,f*To(i-n));if(x==="round")t.arc(r,u,O,n-Fi/2,i+Fi/2,!0);else if(x==="bevel"){const I=2*O*O,F=-I*Math.cos(n+Fi/2)+r,q=-I*Math.sin(n+Fi/2)+u,H=I*Math.cos(i+Fi/2)+r,K=I*Math.sin(i+Fi/2)+u;t.lineTo(F,q),t.lineTo(H,K)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function a6(t,e,n){const{startAngle:i,pixelMargin:r,x:u,y:f,outerRadius:a,innerRadius:y}=e;let _=r/a;t.beginPath(),t.arc(u,f,a,i-_,n+_),y>r?(_=r/y,t.arc(u,f,y,n+_,i-_,!0)):t.arc(u,f,r,n+Da,i-Da),t.closePath(),t.clip()}function s6(t){return AS(t,["outerStart","outerEnd","innerStart","innerEnd"])}function o6(t,e,n,i){const r=s6(t.options.borderRadius),u=(n-e)/2,f=Math.min(u,i*e/2),a=y=>{const _=(n-Math.min(u,y))*i/2;return Ss(y,0,Math.min(u,_))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Ss(r.innerStart,0,f),innerEnd:Ss(r.innerEnd,0,f)}}function cm(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function r0(t,e,n,i,r,u){const{x:f,y:a,startAngle:y,pixelMargin:_,innerRadius:x}=e,A=Math.max(e.outerRadius+i+n-_,0),O=x>0?x+i+n+_:0;let I=0;const F=r-y;if(i){const Ee=x>0?x-i:0,Nt=A>0?A-i:0,Pt=(Ee+Nt)/2,Bt=Pt!==0?F*Pt/(Pt+i):F;I=(F-Bt)/2}const q=Math.max(.001,F*A-n/Fi)/A,H=(F-q)/2,K=y+H+I,W=r-H-I,{outerStart:X,outerEnd:tt,innerStart:Q,innerEnd:at}=o6(e,O,A,W-K),ht=A-X,ot=A-tt,ct=K+X/ht,xt=W-tt/ot,wt=O+Q,Ct=O+at,re=K+Q/wt,ve=W-at/Ct;if(t.beginPath(),u){const Ee=(ct+xt)/2;if(t.arc(f,a,A,ct,Ee),t.arc(f,a,A,Ee,xt),tt>0){const Ft=cm(ot,xt,f,a);t.arc(Ft.x,Ft.y,tt,xt,W+Da)}const Nt=cm(Ct,W,f,a);if(t.lineTo(Nt.x,Nt.y),at>0){const Ft=cm(Ct,ve,f,a);t.arc(Ft.x,Ft.y,at,W+Da,ve+Math.PI)}const Pt=(W-at/O+(K+Q/O))/2;if(t.arc(f,a,O,W-at/O,Pt,!0),t.arc(f,a,O,Pt,K+Q/O,!0),Q>0){const Ft=cm(wt,re,f,a);t.arc(Ft.x,Ft.y,Q,re+Math.PI,K-Da)}const Bt=cm(ht,K,f,a);if(t.lineTo(Bt.x,Bt.y),X>0){const Ft=cm(ht,ct,f,a);t.arc(Ft.x,Ft.y,X,K-Da,ct)}}else{t.moveTo(f,a);const Ee=Math.cos(ct)*A+f,Nt=Math.sin(ct)*A+a;t.lineTo(Ee,Nt);const Pt=Math.cos(xt)*A+f,Bt=Math.sin(xt)*A+a;t.lineTo(Pt,Bt)}t.closePath()}function l6(t,e,n,i,r){const{fullCircles:u,startAngle:f,circumference:a}=e;let y=e.endAngle;if(u){r0(t,e,n,i,y,r);for(let _=0;_<u;++_)t.fill();isNaN(a)||(y=f+(a%Br||Br))}return r0(t,e,n,i,y,r),t.fill(),y}function u6(t,e,n,i,r){const{fullCircles:u,startAngle:f,circumference:a,options:y}=e,{borderWidth:_,borderJoinStyle:x,borderDash:A,borderDashOffset:O,borderRadius:I}=y,F=y.borderAlign==="inner";if(!_)return;t.setLineDash(A||[]),t.lineDashOffset=O,F?(t.lineWidth=_*2,t.lineJoin=x||"round"):(t.lineWidth=_,t.lineJoin=x||"bevel");let q=e.endAngle;if(u){r0(t,e,n,i,q,r);for(let H=0;H<u;++H)t.stroke();isNaN(a)||(q=f+(a%Br||Br))}F&&a6(t,e,q),y.selfJoin&&q-f>=Fi&&I===0&&x!=="miter"&&r6(t,e,q),u||(r0(t,e,n,i,q,r),t.stroke())}class c6 extends Uh{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.getProps(["x","y"],i),{angle:u,distance:f}=tO(r,{x:e,y:n}),{startAngle:a,endAngle:y,innerRadius:_,outerRadius:x,circumference:A}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),O=(this.options.spacing+this.options.borderWidth)/2,I=Wn(A,y-a),F=vy(u,a,y)&&a!==y,q=I>=Br||F,H=Mh(f,_+O,x+O);return q&&H}getCenterPoint(e){const{x:n,y:i,startAngle:r,endAngle:u,innerRadius:f,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:y,spacing:_}=this.options,x=(r+u)/2,A=(f+a+_+y)/2;return{x:n+Math.cos(x)*A,y:i+Math.sin(x)*A}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,r=(n.offset||0)/4,u=(n.spacing||0)/2,f=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Br?Math.floor(i/Br):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const y=1-Math.sin(Math.min(Fi,i||0)),_=r*y;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,l6(e,this,_,u,f),u6(e,this,_,u,f),e.restore()}}function RO(t,e,n=e){t.lineCap=Wn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Wn(n.borderDash,e.borderDash)),t.lineDashOffset=Wn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Wn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Wn(n.borderWidth,e.borderWidth),t.strokeStyle=Wn(n.borderColor,e.borderColor)}function h6(t,e,n){t.lineTo(n.x,n.y)}function f6(t){return t.stepped?CN:t.tension||t.cubicInterpolationMode==="monotone"?PN:h6}function BO(t,e,n={}){const i=t.length,{start:r=0,end:u=i-1}=n,{start:f,end:a}=e,y=Math.max(r,f),_=Math.min(u,a),x=r<f&&u<f||r>a&&u>a;return{count:i,start:y,loop:e.loop,ilen:_<y&&!x?i+_-y:_-y}}function d6(t,e,n,i){const{points:r,options:u}=e,{count:f,start:a,loop:y,ilen:_}=BO(r,n,i),x=f6(u);let{move:A=!0,reverse:O}=i||{},I,F,q;for(I=0;I<=_;++I)F=r[(a+(O?_-I:I))%f],!F.skip&&(A?(t.moveTo(F.x,F.y),A=!1):x(t,q,F,O,u.stepped),q=F);return y&&(F=r[(a+(O?_:0))%f],x(t,q,F,O,u.stepped)),!!y}function p6(t,e,n,i){const r=e.points,{count:u,start:f,ilen:a}=BO(r,n,i),{move:y=!0,reverse:_}=i||{};let x=0,A=0,O,I,F,q,H,K;const W=tt=>(f+(_?a-tt:tt))%u,X=()=>{q!==H&&(t.lineTo(x,H),t.lineTo(x,q),t.lineTo(x,K))};for(y&&(I=r[W(0)],t.moveTo(I.x,I.y)),O=0;O<=a;++O){if(I=r[W(O)],I.skip)continue;const tt=I.x,Q=I.y,at=tt|0;at===F?(Q<q?q=Q:Q>H&&(H=Q),x=(A*x+tt)/++A):(X(),t.lineTo(tt,Q),F=at,A=0,q=H=Q),K=Q}X()}function gw(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?p6:d6}function m6(t){return t.stepped?o4:t.tension||t.cubicInterpolationMode==="monotone"?l4:Id}function g6(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),RO(t,e.options),t.stroke(r)}function y6(t,e,n,i){const{segments:r,options:u}=e,f=gw(e);for(const a of r)RO(t,u,a.style),t.beginPath(),f(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const _6=typeof Path2D=="function";function v6(t,e,n,i){_6&&!e.options.segment?g6(t,e,n,i):y6(t,e,n,i)}class Vy extends Uh{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;JN(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=p4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],u=this.points,f=xO(this,{property:n,start:r,end:r});if(!f.length)return;const a=[],y=m6(i);let _,x;for(_=0,x=f.length;_<x;++_){const{start:A,end:O}=f[_],I=u[A],F=u[O];if(I===F){a.push(I);continue}const q=Math.abs((r-I[n])/(F[n]-I[n])),H=y(I,F,q,i.stepped);H[n]=e[n],a.push(H)}return a.length===1?a[0]:a}pathSegment(e,n,i){return gw(this)(e,this,n,i)}path(e,n,i){const r=this.segments,u=gw(this);let f=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)f&=u(e,this,a,{start:n,end:n+i-1});return!!f}draw(e,n,i,r){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(e.save(),v6(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ZM(t,e,n,i){const r=t.options,{[n]:u}=t.getProps([n],i);return Math.abs(e-u)<r.radius+r.hitRadius}class NO extends Uh{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.options,{x:u,y:f}=this.getProps(["x","y"],i);return Math.pow(e-u,2)+Math.pow(n-f,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,n){return ZM(this,e,"x",n)}inYRange(e,n){return ZM(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!Eh(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,dw(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function jO(t,e){const{x:n,y:i,base:r,width:u,height:f}=t.getProps(["x","y","base","width","height"],e);let a,y,_,x,A;return t.horizontal?(A=f/2,a=Math.min(n,r),y=Math.max(n,r),_=i-A,x=i+A):(A=u/2,a=n-A,y=n+A,_=Math.min(i,r),x=Math.max(i,r)),{left:a,top:_,right:y,bottom:x}}function Lf(t,e,n,i){return t?0:Ss(e,n,i)}function x6(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,u=uO(i);return{t:Lf(r.top,u.top,0,n),r:Lf(r.right,u.right,0,e),b:Lf(r.bottom,u.bottom,0,n),l:Lf(r.left,u.left,0,e)}}function b6(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,u=Vd(r),f=Math.min(e,n),a=t.borderSkipped,y=i||Si(r);return{topLeft:Lf(!y||a.top||a.left,u.topLeft,0,f),topRight:Lf(!y||a.top||a.right,u.topRight,0,f),bottomLeft:Lf(!y||a.bottom||a.left,u.bottomLeft,0,f),bottomRight:Lf(!y||a.bottom||a.right,u.bottomRight,0,f)}}function w6(t){const e=jO(t),n=e.right-e.left,i=e.bottom-e.top,r=x6(t,n/2,i/2),u=b6(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:u},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,u.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,u.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,u.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,u.bottomRight-Math.max(r.b,r.r))}}}}function Ab(t,e,n,i){const r=e===null,u=n===null,a=t&&!(r&&u)&&jO(t,i);return a&&(r||Mh(e,a.left,a.right))&&(u||Mh(n,a.top,a.bottom))}function S6(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function T6(t,e){t.rect(e.x,e.y,e.w,e.h)}function Eb(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,u=(t.x+t.w!==n.x+n.w?e:0)-i,f=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+u,h:t.h+f,radius:t.radius}}class M6 extends Uh{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:u,outer:f}=w6(this),a=S6(f.radius)?xy:T6;e.save(),(f.w!==u.w||f.h!==u.h)&&(e.beginPath(),a(e,Eb(f,n,u)),e.clip(),a(e,Eb(u,-n,f)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Eb(u,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return Ab(this,e,n,i)}inXRange(e,n){return Ab(this,e,null,n)}inYRange(e,n){return Ab(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:u}=this.getProps(["x","y","base","horizontal"],e);return{x:u?(n+r)/2:n,y:u?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var A6=Object.freeze({__proto__:null,ArcElement:c6,BarElement:M6,LineElement:Vy,PointElement:NO});const yw=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],GM=yw.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function FO(t){return yw[t%yw.length]}function UO(t){return GM[t%GM.length]}function E6(t,e){return t.borderColor=FO(e),t.backgroundColor=UO(e),++e}function C6(t,e){return t.backgroundColor=t.data.map(()=>FO(e++)),e}function P6(t,e){return t.backgroundColor=t.data.map(()=>UO(e++)),e}function k6(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof DS?e=C6(n,e):r instanceof AO?e=P6(n,e):r&&(e=E6(n,e))}}function WM(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function O6(t){return t&&(t.borderColor||t.backgroundColor)}function D6(){return Zr.borderColor!=="rgba(0,0,0,0.1)"||Zr.backgroundColor!=="rgba(0,0,0,0.1)"}var z6={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:u}=r,f=WM(i)||O6(r)||u&&WM(u)||D6();if(!n.forceOverride&&f)return;const a=k6(t);i.forEach(a)}};function L6(t,e,n,i,r){const u=r.samples||i;if(u>=n)return t.slice(e,e+n);const f=[],a=(n-2)/(u-2);let y=0;const _=e+n-1;let x=e,A,O,I,F,q;for(f[y++]=t[x],A=0;A<u-2;A++){let H=0,K=0,W;const X=Math.floor((A+1)*a)+1+e,tt=Math.min(Math.floor((A+2)*a)+1,n)+e,Q=tt-X;for(W=X;W<tt;W++)H+=t[W].x,K+=t[W].y;H/=Q,K/=Q;const at=Math.floor(A*a)+1+e,ht=Math.min(Math.floor((A+1)*a)+1,n)+e,{x:ot,y:ct}=t[x];for(I=F=-1,W=at;W<ht;W++)F=.5*Math.abs((ot-H)*(t[W].y-ct)-(ot-t[W].x)*(K-ct)),F>I&&(I=F,O=t[W],q=W);f[y++]=O,x=q}return f[y++]=t[_],f}function I6(t,e,n,i){let r=0,u=0,f,a,y,_,x,A,O,I,F,q;const H=[],K=e+n-1,W=t[e].x,tt=t[K].x-W;for(f=e;f<e+n;++f){a=t[f],y=(a.x-W)/tt*i,_=a.y;const Q=y|0;if(Q===x)_<F?(F=_,A=f):_>q&&(q=_,O=f),r=(u*r+a.x)/++u;else{const at=f-1;if(!di(A)&&!di(O)){const ht=Math.min(A,O),ot=Math.max(A,O);ht!==I&&ht!==at&&H.push({...t[ht],x:r}),ot!==I&&ot!==at&&H.push({...t[ot],x:r})}f>0&&at!==I&&H.push(t[at]),H.push(a),x=Q,u=0,F=q=_,A=O=I=f}}return H}function VO(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function YM(t){t.data.datasets.forEach(e=>{VO(e)})}function R6(t,e){const n=e.length;let i=0,r;const{iScale:u}=t,{min:f,max:a,minDefined:y,maxDefined:_}=u.getUserBounds();return y&&(i=Ss(Ah(e,u.axis,f).lo,0,n-1)),_?r=Ss(Ah(e,u.axis,a).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var B6={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){YM(t);return}const i=t.width;t.data.datasets.forEach((r,u)=>{const{_data:f,indexAxis:a}=r,y=t.getDatasetMeta(u),_=f||r.data;if(ay([a,t.options.indexAxis])==="y"||!y.controller.supportsDecimation)return;const x=t.scales[y.xAxisID];if(x.type!=="linear"&&x.type!=="time"||t.options.parsing)return;let{start:A,count:O}=R6(y,_);const I=n.threshold||4*i;if(O<=I){VO(r);return}di(f)&&(r._data=_,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(q){this._data=q}}));let F;switch(n.algorithm){case"lttb":F=L6(_,A,O,i,n);break;case"min-max":F=I6(_,A,O,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=F})},destroy(t){YM(t)}};function N6(t,e,n){const i=t.segments,r=t.points,u=e.points,f=[];for(const a of i){let{start:y,end:_}=a;_=nx(y,_,r);const x=_w(n,r[y],r[_],a.loop);if(!e.segments){f.push({source:a,target:x,start:r[y],end:r[_]});continue}const A=xO(e,x);for(const O of A){const I=_w(n,u[O.start],u[O.end],O.loop),F=vO(a,r,I);for(const q of F)f.push({source:q,target:O,start:{[n]:XM(x,I,"start",Math.max)},end:{[n]:XM(x,I,"end",Math.min)}})}}return f}function _w(t,e,n,i){if(i)return;let r=e[t],u=n[t];return t==="angle"&&(r=To(r),u=To(u)),{property:t,start:r,end:u}}function j6(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,u=[];return e.segments.forEach(({start:f,end:a})=>{a=nx(f,a,r);const y=r[f],_=r[a];i!==null?(u.push({x:y.x,y:i}),u.push({x:_.x,y:i})):n!==null&&(u.push({x:n,y:y.y}),u.push({x:n,y:_.y}))}),u}function nx(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function XM(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function $O(t,e){let n=[],i=!1;return Hr(t)?(i=!0,n=t):n=j6(t,e),n.length?new Vy({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function KM(t){return t&&t.fill!==!1}function F6(t,e,n){let r=t[e].fill;const u=[e];let f;if(!n)return r;for(;r!==!1&&u.indexOf(r)===-1;){if(!ga(r))return r;if(f=t[r],!f)return!1;if(f.visible)return r;u.push(r),r=f.fill}return!1}function U6(t,e,n){const i=H6(t);if(Si(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return ga(r)&&Math.floor(r)===r?V6(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function V6(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function $6(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Si(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function q6(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:Si(t)?i=t.value:i=e.getBaseValue(),i}function H6(t){const e=t.options,n=e.fill;let i=Wn(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Z6(t){const{scale:e,index:n,line:i}=t,r=[],u=i.segments,f=i.points,a=G6(e,n);a.push($O({x:null,y:e.bottom},i));for(let y=0;y<u.length;y++){const _=u[y];for(let x=_.start;x<=_.end;x++)W6(r,f[x],a)}return new Vy({points:r,options:{}})}function G6(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const u=i[r];if(u.index===e)break;u.hidden||n.unshift(u.dataset)}return n}function W6(t,e,n){const i=[];for(let r=0;r<n.length;r++){const u=n[r],{first:f,last:a,point:y}=Y6(u,e,"x");if(!(!y||f&&a)){if(f)i.unshift(y);else if(t.push(y),!a)break}}t.push(...i)}function Y6(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],u=t.segments,f=t.points;let a=!1,y=!1;for(let _=0;_<u.length;_++){const x=u[_],A=f[x.start][n],O=f[x.end][n];if(Mh(r,A,O)){a=r===A,y=r===O;break}}return{first:a,last:y,point:i}}class qO{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:r,y:u,radius:f}=this;return n=n||{start:0,end:Br},e.arc(r,u,f,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:r}=this,u=e.angle;return{x:n+Math.cos(u)*r,y:i+Math.sin(u)*r,angle:u}}}function X6(t){const{chart:e,fill:n,line:i}=t;if(ga(n))return K6(e,n);if(n==="stack")return Z6(t);if(n==="shape")return!0;const r=Q6(t);return r instanceof qO?r:$O(r,i)}function K6(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Q6(t){return(t.scale||{}).getPointPositionForValue?tF(t):J6(t)}function J6(t){const{scale:e={},fill:n}=t,i=$6(n,e);if(ga(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function tF(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,u=i.reverse?e.max:e.min,f=q6(n,e,u),a=[];if(i.grid.circular){const y=e.getPointPositionForValue(0,u);return new qO({x:y.x,y:y.y,radius:e.getDistanceFromCenterForValue(f)})}for(let y=0;y<r;++y)a.push(e.getPointPositionForValue(y,f));return a}function Cb(t,e,n){const i=X6(e),{chart:r,index:u,line:f,scale:a,axis:y}=e,_=f.options,x=_.fill,A=_.backgroundColor,{above:O=A,below:I=A}=x||{},F=r.getDatasetMeta(u),q=bO(r,F);i&&f.points.length&&(Q0(t,n),eF(t,{line:f,target:i,above:O,below:I,area:n,scale:a,axis:y,clip:q}),J0(t))}function eF(t,e){const{line:n,target:i,above:r,below:u,area:f,scale:a,clip:y}=e,_=n._loop?"angle":e.axis;t.save();let x=u;u!==r&&(_==="x"?(QM(t,i,f.top),Pb(t,{line:n,target:i,color:r,scale:a,property:_,clip:y}),t.restore(),t.save(),QM(t,i,f.bottom)):_==="y"&&(JM(t,i,f.left),Pb(t,{line:n,target:i,color:u,scale:a,property:_,clip:y}),t.restore(),t.save(),JM(t,i,f.right),x=r)),Pb(t,{line:n,target:i,color:x,scale:a,property:_,clip:y}),t.restore()}function QM(t,e,n){const{segments:i,points:r}=e;let u=!0,f=!1;t.beginPath();for(const a of i){const{start:y,end:_}=a,x=r[y],A=r[nx(y,_,r)];u?(t.moveTo(x.x,x.y),u=!1):(t.lineTo(x.x,n),t.lineTo(x.x,x.y)),f=!!e.pathSegment(t,a,{move:f}),f?t.closePath():t.lineTo(A.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function JM(t,e,n){const{segments:i,points:r}=e;let u=!0,f=!1;t.beginPath();for(const a of i){const{start:y,end:_}=a,x=r[y],A=r[nx(y,_,r)];u?(t.moveTo(x.x,x.y),u=!1):(t.lineTo(n,x.y),t.lineTo(x.x,x.y)),f=!!e.pathSegment(t,a,{move:f}),f?t.closePath():t.lineTo(n,A.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Pb(t,e){const{line:n,target:i,property:r,color:u,scale:f,clip:a}=e,y=N6(n,i,r);for(const{source:_,target:x,start:A,end:O}of y){const{style:{backgroundColor:I=u}={}}=_,F=i!==!0;t.save(),t.fillStyle=I,nF(t,f,a,F&&_w(r,A,O)),t.beginPath();const q=!!n.pathSegment(t,_);let H;if(F){q?t.closePath():tA(t,i,O,r);const K=!!i.pathSegment(t,x,{move:q,reverse:!0});H=q&&K,H||tA(t,i,A,r)}t.closePath(),t.fill(H?"evenodd":"nonzero"),t.restore()}}function nF(t,e,n,i){const r=e.chart.chartArea,{property:u,start:f,end:a}=i||{};if(u==="x"||u==="y"){let y,_,x,A;u==="x"?(y=f,_=r.top,x=a,A=r.bottom):(y=r.left,_=f,x=r.right,A=a),t.beginPath(),n&&(y=Math.max(y,n.left),x=Math.min(x,n.right),_=Math.max(_,n.top),A=Math.min(A,n.bottom)),t.rect(y,_,x-y,A-_),t.clip()}}function tA(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var HO={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let u,f,a,y;for(f=0;f<i;++f)u=t.getDatasetMeta(f),a=u.dataset,y=null,a&&a.options&&a instanceof Vy&&(y={visible:t.isDatasetVisible(f),index:f,fill:U6(a,f,i),chart:t,axis:u.controller.options.indexAxis,scale:u.vScale,line:a}),u.$filler=y,r.push(y);for(f=0;f<i;++f)y=r[f],!(!y||y.fill===!1)&&(y.fill=F6(r,f,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),u=t.chartArea;for(let f=r.length-1;f>=0;--f){const a=r[f].$filler;a&&(a.line.updateControlPoints(u,a.axis),i&&a.fill&&Cb(t.ctx,a,u))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const u=i[r].$filler;KM(u)&&Cb(t.ctx,u,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!KM(i)||n.drawTime!=="beforeDatasetDraw"||Cb(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const eA=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},iF=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class nA extends Uh{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Sr(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=ls(i.font),u=r.size,f=this._computeTitleHeight(),{boxWidth:a,itemHeight:y}=eA(i,u);let _,x;n.font=r.string,this.isHorizontal()?(_=this.maxWidth,x=this._fitRows(f,u,a,y)+10):(x=this.maxHeight,_=this._fitCols(f,r,a,y)+10),this.width=Math.min(_,e.maxWidth||this.maxWidth),this.height=Math.min(x,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:u,maxWidth:f,options:{labels:{padding:a}}}=this,y=this.legendHitBoxes=[],_=this.lineWidths=[0],x=r+a;let A=e;u.textAlign="left",u.textBaseline="middle";let O=-1,I=-x;return this.legendItems.forEach((F,q)=>{const H=i+n/2+u.measureText(F.text).width;(q===0||_[_.length-1]+H+2*a>f)&&(A+=x,_[_.length-(q>0?0:1)]=0,I+=x,O++),y[q]={left:0,top:I,row:O,width:H,height:r},_[_.length-1]+=H+a}),A}_fitCols(e,n,i,r){const{ctx:u,maxHeight:f,options:{labels:{padding:a}}}=this,y=this.legendHitBoxes=[],_=this.columnSizes=[],x=f-e;let A=a,O=0,I=0,F=0,q=0;return this.legendItems.forEach((H,K)=>{const{itemWidth:W,itemHeight:X}=rF(i,n,u,H,r);K>0&&I+X+2*a>x&&(A+=O+a,_.push({width:O,height:I}),F+=O+a,q++,O=I=0),y[K]={left:F,top:I,col:q,width:W,height:X},O=Math.max(O,W),I+=X+a}),A+=O,_.push({width:O,height:I}),A}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:u}}=this,f=vm(u,this.left,this.width);if(this.isHorizontal()){let a=0,y=wo(i,this.left+r,this.right-this.lineWidths[a]);for(const _ of n)a!==_.row&&(a=_.row,y=wo(i,this.left+r,this.right-this.lineWidths[a])),_.top+=this.top+e+r,_.left=f.leftForLtr(f.x(y),_.width),y+=_.width+r}else{let a=0,y=wo(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const _ of n)_.col!==a&&(a=_.col,y=wo(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),_.top=y,_.left+=this.left+r,_.left=f.leftForLtr(f.x(_.left),_.width),y+=_.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Q0(e,this),this._draw(),J0(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:u,labels:f}=e,a=Zr.color,y=vm(e.rtl,this.left,this.width),_=ls(f.font),{padding:x}=f,A=_.size,O=A/2;let I;this.drawTitle(),r.textAlign=y.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=_.string;const{boxWidth:F,boxHeight:q,itemHeight:H}=eA(f,A),K=function(at,ht,ot){if(isNaN(F)||F<=0||isNaN(q)||q<0)return;r.save();const ct=Wn(ot.lineWidth,1);if(r.fillStyle=Wn(ot.fillStyle,a),r.lineCap=Wn(ot.lineCap,"butt"),r.lineDashOffset=Wn(ot.lineDashOffset,0),r.lineJoin=Wn(ot.lineJoin,"miter"),r.lineWidth=ct,r.strokeStyle=Wn(ot.strokeStyle,a),r.setLineDash(Wn(ot.lineDash,[])),f.usePointStyle){const xt={radius:q*Math.SQRT2/2,pointStyle:ot.pointStyle,rotation:ot.rotation,borderWidth:ct},wt=y.xPlus(at,F/2),Ct=ht+O;lO(r,xt,wt,Ct,f.pointStyleWidth&&F)}else{const xt=ht+Math.max((A-q)/2,0),wt=y.leftForLtr(at,F),Ct=Vd(ot.borderRadius);r.beginPath(),Object.values(Ct).some(re=>re!==0)?xy(r,{x:wt,y:xt,w:F,h:q,radius:Ct}):r.rect(wt,xt,F,q),r.fill(),ct!==0&&r.stroke()}r.restore()},W=function(at,ht,ot){Xd(r,ot.text,at,ht+H/2,_,{strikethrough:ot.hidden,textAlign:y.textAlign(ot.textAlign)})},X=this.isHorizontal(),tt=this._computeTitleHeight();X?I={x:wo(u,this.left+x,this.right-i[0]),y:this.top+x+tt,line:0}:I={x:this.left+x,y:wo(u,this.top+tt+x,this.bottom-n[0].height),line:0},gO(this.ctx,e.textDirection);const Q=H+x;this.legendItems.forEach((at,ht)=>{r.strokeStyle=at.fontColor,r.fillStyle=at.fontColor;const ot=r.measureText(at.text).width,ct=y.textAlign(at.textAlign||(at.textAlign=f.textAlign)),xt=F+O+ot;let wt=I.x,Ct=I.y;y.setWidth(this.width),X?ht>0&&wt+xt+x>this.right&&(Ct=I.y+=Q,I.line++,wt=I.x=wo(u,this.left+x,this.right-i[I.line])):ht>0&&Ct+Q>this.bottom&&(wt=I.x=wt+n[I.line].width+x,I.line++,Ct=I.y=wo(u,this.top+tt+x,this.bottom-n[I.line].height));const re=y.x(wt);if(K(re,Ct,at),wt=yN(ct,wt+F+O,X?wt+xt:this.right,e.rtl),W(y.x(wt),Ct,at),X)I.x+=xt+x;else if(typeof at.text!="string"){const ve=_.lineHeight;I.y+=ZO(at,ve)+x}else I.y+=Q}),yO(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=ls(n.font),r=Eo(n.padding);if(!n.display)return;const u=vm(e.rtl,this.left,this.width),f=this.ctx,a=n.position,y=i.size/2,_=r.top+y;let x,A=this.left,O=this.width;if(this.isHorizontal())O=Math.max(...this.lineWidths),x=this.top+_,A=wo(e.align,A,this.right-O);else{const F=this.columnSizes.reduce((q,H)=>Math.max(q,H.height),0);x=_+wo(e.align,this.top,this.bottom-F-e.labels.padding-this._computeTitleHeight())}const I=wo(a,A,A+O);f.textAlign=u.textAlign(TS(a)),f.textBaseline="middle",f.strokeStyle=n.color,f.fillStyle=n.color,f.font=i.string,Xd(f,n.text,I,x,i)}_computeTitleHeight(){const e=this.options.title,n=ls(e.font),i=Eo(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,u;if(Mh(e,this.left,this.right)&&Mh(n,this.top,this.bottom)){for(u=this.legendHitBoxes,i=0;i<u.length;++i)if(r=u[i],Mh(e,r.left,r.left+r.width)&&Mh(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!oF(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,u=iF(r,i);r&&!u&&Sr(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!u&&Sr(n.onHover,[e,i,this],this)}else i&&Sr(n.onClick,[e,i,this],this)}}function rF(t,e,n,i,r){const u=aF(i,t,e,n),f=sF(r,i,e.lineHeight);return{itemWidth:u,itemHeight:f}}function aF(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((u,f)=>u.length>f.length?u:f)),e+n.size/2+i.measureText(r).width}function sF(t,e,n){let i=t;return typeof e.text!="string"&&(i=ZO(e,n)),i}function ZO(t,e){const n=t.text?t.text.length:0;return e*n}function oF(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var GO={id:"legend",_element:nA,start(t,e,n){const i=t.legend=new nA({ctx:t.ctx,options:n,chart:t});Ao.configure(t,i,n),Ao.addBox(t,i)},stop(t){Ao.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Ao.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:u,useBorderRadius:f,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(y=>{const _=y.controller.getStyle(n?0:void 0),x=Eo(_.borderWidth);return{text:e[y.index].label,fillStyle:_.backgroundColor,fontColor:u,hidden:!y.visible,lineCap:_.borderCapStyle,lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:_.borderColor,pointStyle:i||_.pointStyle,rotation:_.rotation,textAlign:r||_.textAlign,borderRadius:f&&(a||_.borderRadius),datasetIndex:y.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class LS extends Uh{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Hr(i.text)?i.text.length:1;this._padding=Eo(i.padding);const u=r*ls(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=u:this.width=u}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:u,options:f}=this,a=f.align;let y=0,_,x,A;return this.isHorizontal()?(x=wo(a,i,u),A=n+e,_=u-i):(f.position==="left"?(x=i+e,A=wo(a,r,n),y=Fi*-.5):(x=u-e,A=wo(a,n,r),y=Fi*.5),_=r-n),{titleX:x,titleY:A,maxWidth:_,rotation:y}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=ls(n.font),u=i.lineHeight/2+this._padding.top,{titleX:f,titleY:a,maxWidth:y,rotation:_}=this._drawArgs(u);Xd(e,n.text,0,0,i,{color:n.color,maxWidth:y,rotation:_,textAlign:TS(n.align),textBaseline:"middle",translation:[f,a]})}}function lF(t,e){const n=new LS({ctx:t.ctx,options:e,chart:t});Ao.configure(t,n,e),Ao.addBox(t,n),t.titleBlock=n}var WO={id:"title",_element:LS,start(t,e,n){lF(t,n)},stop(t){const e=t.titleBlock;Ao.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Ao.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Sv=new WeakMap;var uF={id:"subtitle",start(t,e,n){const i=new LS({ctx:t.ctx,options:n,chart:t});Ao.configure(t,i,n),Ao.addBox(t,i),Sv.set(t,i)},stop(t){Ao.removeBox(t,Sv.get(t)),Sv.delete(t)},beforeUpdate(t,e,n){const i=Sv.get(t);Ao.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const oy={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,u=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const y=a.tooltipPosition();i.add(y.x),r+=y.y,++u}}return u===0||i.size===0?!1:{x:[...i].reduce((a,y)=>a+y)/i.size,y:r/u}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,u,f,a;for(u=0,f=t.length;u<f;++u){const y=t[u].element;if(y&&y.hasValue()){const _=y.getCenterPoint(),x=hw(e,_);x<r&&(r=x,a=y)}}if(a){const y=a.tooltipPosition();n=y.x,i=y.y}return{x:n,y:i}}};function Ic(t,e){return e&&(Hr(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function bh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function cF(t,e){const{element:n,datasetIndex:i,index:r}=e,u=t.getDatasetMeta(i).controller,{label:f,value:a}=u.getLabelAndValue(r);return{chart:t,label:f,parsed:u.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:u.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function iA(t,e){const n=t.chart.ctx,{body:i,footer:r,title:u}=t,{boxWidth:f,boxHeight:a}=e,y=ls(e.bodyFont),_=ls(e.titleFont),x=ls(e.footerFont),A=u.length,O=r.length,I=i.length,F=Eo(e.padding);let q=F.height,H=0,K=i.reduce((tt,Q)=>tt+Q.before.length+Q.lines.length+Q.after.length,0);if(K+=t.beforeBody.length+t.afterBody.length,A&&(q+=A*_.lineHeight+(A-1)*e.titleSpacing+e.titleMarginBottom),K){const tt=e.displayColors?Math.max(a,y.lineHeight):y.lineHeight;q+=I*tt+(K-I)*y.lineHeight+(K-1)*e.bodySpacing}O&&(q+=e.footerMarginTop+O*x.lineHeight+(O-1)*e.footerSpacing);let W=0;const X=function(tt){H=Math.max(H,n.measureText(tt).width+W)};return n.save(),n.font=_.string,tr(t.title,X),n.font=y.string,tr(t.beforeBody.concat(t.afterBody),X),W=e.displayColors?f+2+e.boxPadding:0,tr(i,tt=>{tr(tt.before,X),tr(tt.lines,X),tr(tt.after,X)}),W=0,n.font=x.string,tr(t.footer,X),n.restore(),H+=F.width,{width:H,height:q}}function hF(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function fF(t,e,n,i){const{x:r,width:u}=i,f=n.caretSize+n.caretPadding;if(t==="left"&&r+u+f>e.width||t==="right"&&r-u-f<0)return!0}function dF(t,e,n,i){const{x:r,width:u}=n,{width:f,chartArea:{left:a,right:y}}=t;let _="center";return i==="center"?_=r<=(a+y)/2?"left":"right":r<=u/2?_="left":r>=f-u/2&&(_="right"),fF(_,t,e,n)&&(_="center"),_}function rA(t,e,n){const i=n.yAlign||e.yAlign||hF(t,n);return{xAlign:n.xAlign||e.xAlign||dF(t,e,n,i),yAlign:i}}function pF(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function mF(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function aA(t,e,n,i){const{caretSize:r,caretPadding:u,cornerRadius:f}=t,{xAlign:a,yAlign:y}=n,_=r+u,{topLeft:x,topRight:A,bottomLeft:O,bottomRight:I}=Vd(f);let F=pF(e,a);const q=mF(e,y,_);return y==="center"?a==="left"?F+=_:a==="right"&&(F-=_):a==="left"?F-=Math.max(x,O)+r:a==="right"&&(F+=Math.max(A,I)+r),{x:Ss(F,0,i.width-e.width),y:Ss(q,0,i.height-e.height)}}function Tv(t,e,n){const i=Eo(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function sA(t){return Ic([],bh(t))}function gF(t,e,n){return Ff(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function oA(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const YO={beforeTitle:vh,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:vh,beforeBody:vh,beforeLabel:vh,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return di(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:vh,afterBody:vh,beforeFooter:vh,footer:vh,afterFooter:vh};function gl(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?YO[e].call(n,i):r}let lA=class extends Uh{static positioners=oy;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,u=new wO(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=gF(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=gl(i,"beforeTitle",this,e),u=gl(i,"title",this,e),f=gl(i,"afterTitle",this,e);let a=[];return a=Ic(a,bh(r)),a=Ic(a,bh(u)),a=Ic(a,bh(f)),a}getBeforeBody(e,n){return sA(gl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return tr(e,u=>{const f={before:[],lines:[],after:[]},a=oA(i,u);Ic(f.before,bh(gl(a,"beforeLabel",this,u))),Ic(f.lines,gl(a,"label",this,u)),Ic(f.after,bh(gl(a,"afterLabel",this,u))),r.push(f)}),r}getAfterBody(e,n){return sA(gl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=gl(i,"beforeFooter",this,e),u=gl(i,"footer",this,e),f=gl(i,"afterFooter",this,e);let a=[];return a=Ic(a,bh(r)),a=Ic(a,bh(u)),a=Ic(a,bh(f)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],u=[],f=[];let a=[],y,_;for(y=0,_=n.length;y<_;++y)a.push(cF(this.chart,n[y]));return e.filter&&(a=a.filter((x,A,O)=>e.filter(x,A,O,i))),e.itemSort&&(a=a.sort((x,A)=>e.itemSort(x,A,i))),tr(a,x=>{const A=oA(e.callbacks,x);r.push(gl(A,"labelColor",this,x)),u.push(gl(A,"labelPointStyle",this,x)),f.push(gl(A,"labelTextColor",this,x))}),this.labelColors=r,this.labelPointStyles=u,this.labelTextColors=f,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let u,f=[];if(!r.length)this.opacity!==0&&(u={opacity:0});else{const a=oy[i.position].call(this,r,this._eventPosition);f=this._createItems(i),this.title=this.getTitle(f,i),this.beforeBody=this.getBeforeBody(f,i),this.body=this.getBody(f,i),this.afterBody=this.getAfterBody(f,i),this.footer=this.getFooter(f,i);const y=this._size=iA(this,i),_=Object.assign({},a,y),x=rA(this.chart,i,_),A=aA(i,_,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,u={opacity:1,x:A.x,y:A.y,width:y.width,height:y.height,caretX:a.x,caretY:a.y}}this._tooltipItems=f,this.$context=void 0,u&&this._resolveAnimations().update(this,u),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const u=this.getCaretPosition(e,i,r);n.lineTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.lineTo(u.x3,u.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:u}=this,{caretSize:f,cornerRadius:a}=i,{topLeft:y,topRight:_,bottomLeft:x,bottomRight:A}=Vd(a),{x:O,y:I}=e,{width:F,height:q}=n;let H,K,W,X,tt,Q;return u==="center"?(tt=I+q/2,r==="left"?(H=O,K=H-f,X=tt+f,Q=tt-f):(H=O+F,K=H+f,X=tt-f,Q=tt+f),W=H):(r==="left"?K=O+Math.max(y,x)+f:r==="right"?K=O+F-Math.max(_,A)-f:K=this.caretX,u==="top"?(X=I,tt=X-f,H=K-f,W=K+f):(X=I+q,tt=X+f,H=K+f,W=K-f),Q=X),{x1:H,x2:K,x3:W,y1:X,y2:tt,y3:Q}}drawTitle(e,n,i){const r=this.title,u=r.length;let f,a,y;if(u){const _=vm(i.rtl,this.x,this.width);for(e.x=Tv(this,i.titleAlign,i),n.textAlign=_.textAlign(i.titleAlign),n.textBaseline="middle",f=ls(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=f.string,y=0;y<u;++y)n.fillText(r[y],_.x(e.x),e.y+f.lineHeight/2),e.y+=f.lineHeight+a,y+1===u&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,u){const f=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:y,boxWidth:_}=u,x=ls(u.bodyFont),A=Tv(this,"left",u),O=r.x(A),I=y<x.lineHeight?(x.lineHeight-y)/2:0,F=n.y+I;if(u.usePointStyle){const q={radius:Math.min(_,y)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},H=r.leftForLtr(O,_)+_/2,K=F+y/2;e.strokeStyle=u.multiKeyBackground,e.fillStyle=u.multiKeyBackground,dw(e,q,H,K),e.strokeStyle=f.borderColor,e.fillStyle=f.backgroundColor,dw(e,q,H,K)}else{e.lineWidth=Si(f.borderWidth)?Math.max(...Object.values(f.borderWidth)):f.borderWidth||1,e.strokeStyle=f.borderColor,e.setLineDash(f.borderDash||[]),e.lineDashOffset=f.borderDashOffset||0;const q=r.leftForLtr(O,_),H=r.leftForLtr(r.xPlus(O,1),_-2),K=Vd(f.borderRadius);Object.values(K).some(W=>W!==0)?(e.beginPath(),e.fillStyle=u.multiKeyBackground,xy(e,{x:q,y:F,w:_,h:y,radius:K}),e.fill(),e.stroke(),e.fillStyle=f.backgroundColor,e.beginPath(),xy(e,{x:H,y:F+1,w:_-2,h:y-2,radius:K}),e.fill()):(e.fillStyle=u.multiKeyBackground,e.fillRect(q,F,_,y),e.strokeRect(q,F,_,y),e.fillStyle=f.backgroundColor,e.fillRect(H,F+1,_-2,y-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:u,bodyAlign:f,displayColors:a,boxHeight:y,boxWidth:_,boxPadding:x}=i,A=ls(i.bodyFont);let O=A.lineHeight,I=0;const F=vm(i.rtl,this.x,this.width),q=function(ot){n.fillText(ot,F.x(e.x+I),e.y+O/2),e.y+=O+u},H=F.textAlign(f);let K,W,X,tt,Q,at,ht;for(n.textAlign=f,n.textBaseline="middle",n.font=A.string,e.x=Tv(this,H,i),n.fillStyle=i.bodyColor,tr(this.beforeBody,q),I=a&&H!=="right"?f==="center"?_/2+x:_+2+x:0,tt=0,at=r.length;tt<at;++tt){for(K=r[tt],W=this.labelTextColors[tt],n.fillStyle=W,tr(K.before,q),X=K.lines,a&&X.length&&(this._drawColorBox(n,e,tt,F,i),O=Math.max(A.lineHeight,y)),Q=0,ht=X.length;Q<ht;++Q)q(X[Q]),O=A.lineHeight;tr(K.after,q)}I=0,O=A.lineHeight,tr(this.afterBody,q),e.y-=u}drawFooter(e,n,i){const r=this.footer,u=r.length;let f,a;if(u){const y=vm(i.rtl,this.x,this.width);for(e.x=Tv(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=y.textAlign(i.footerAlign),n.textBaseline="middle",f=ls(i.footerFont),n.fillStyle=i.footerColor,n.font=f.string,a=0;a<u;++a)n.fillText(r[a],y.x(e.x),e.y+f.lineHeight/2),e.y+=f.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:u,yAlign:f}=this,{x:a,y}=e,{width:_,height:x}=i,{topLeft:A,topRight:O,bottomLeft:I,bottomRight:F}=Vd(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+A,y),f==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+_-O,y),n.quadraticCurveTo(a+_,y,a+_,y+O),f==="center"&&u==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+_,y+x-F),n.quadraticCurveTo(a+_,y+x,a+_-F,y+x),f==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+I,y+x),n.quadraticCurveTo(a,y+x,a,y+x-I),f==="center"&&u==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,y+A),n.quadraticCurveTo(a,y,a+A,y),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,u=i&&i.y;if(r||u){const f=oy[e.position].call(this,this._active,this._eventPosition);if(!f)return;const a=this._size=iA(this,e),y=Object.assign({},f,this._size),_=rA(n,e,y),x=aA(e,y,_,n);(r._to!==x.x||u._to!==x.y)&&(this.xAlign=_.xAlign,this.yAlign=_.yAlign,this.width=a.width,this.height=a.height,this.caretX=f.x,this.caretY=f.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},u={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const f=Eo(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(u,e,r,n),gO(e,n.textDirection),u.y+=f.top,this.drawTitle(u,e,n),this.drawBody(u,e,n),this.drawFooter(u,e,n),yO(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:y})=>{const _=this.chart.getDatasetMeta(a);if(!_)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:_.data[y],index:y}}),u=!Qv(i,r),f=this._positionChanged(r,n);(u||f)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,u=this._active||[],f=this._getActiveElements(e,u,n,i),a=this._positionChanged(f,e),y=n||!Qv(f,u)||a;return y&&(this._active=f,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),y}_getActiveElements(e,n,i,r){const u=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const f=this.chart.getElementsAtEventForMode(e,u.mode,u,i);return u.reverse&&f.reverse(),f}_positionChanged(e,n){const{caretX:i,caretY:r,options:u}=this,f=oy[u.position].call(this,e,n);return f!==!1&&(i!==f.x||r!==f.y)}};var XO={id:"tooltip",_element:lA,positioners:oy,afterInit(t,e,n){n&&(t.tooltip=new lA({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:YO},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},yF=Object.freeze({__proto__:null,Colors:z6,Decimation:B6,Filler:HO,Legend:GO,SubTitle:uF,Title:WO,Tooltip:XO});const _F=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function vF(t,e,n,i){const r=t.indexOf(e);if(r===-1)return _F(t,e,n,i);const u=t.lastIndexOf(e);return r!==u?n:r}const xF=(t,e)=>t===null?null:Ss(Math.round(t),0,e);function uA(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class KO extends rp{static id="category";static defaults={ticks:{callback:uA}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:u}of n)i[r]===u&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(di(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:vF(i,e,Wn(n,e),this._addedLabels),xF(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let u=this.getLabels();u=e===0&&n===u.length-1?u:u.slice(e,n+1),this._valueRange=Math.max(u.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let f=e;f<=n;f++)r.push({value:f});return r}getLabelForValue(e){return uA.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function bF(t,e){const n=[],{bounds:r,step:u,min:f,max:a,precision:y,count:_,maxTicks:x,maxDigits:A,includeBounds:O}=t,I=u||1,F=x-1,{min:q,max:H}=e,K=!di(f),W=!di(a),X=!di(_),tt=(H-q)/(A+1);let Q=iM((H-q)/F/I)*I,at,ht,ot,ct;if(Q<1e-14&&!K&&!W)return[{value:q},{value:H}];ct=Math.ceil(H/Q)-Math.floor(q/Q),ct>F&&(Q=iM(ct*Q/F/I)*I),di(y)||(at=Math.pow(10,y),Q=Math.ceil(Q*at)/at),r==="ticks"?(ht=Math.floor(q/Q)*Q,ot=Math.ceil(H/Q)*Q):(ht=q,ot=H),K&&W&&u&&cN((a-f)/u,Q/1e3)?(ct=Math.round(Math.min((a-f)/Q,x)),Q=(a-f)/ct,ht=f,ot=a):X?(ht=K?f:ht,ot=W?a:ot,ct=_-1,Q=(ot-ht)/ct):(ct=(ot-ht)/Q,hy(ct,Math.round(ct),Q/1e3)?ct=Math.round(ct):ct=Math.ceil(ct));const xt=Math.max(rM(Q),rM(ht));at=Math.pow(10,di(y)?xt:y),ht=Math.round(ht*at)/at,ot=Math.round(ot*at)/at;let wt=0;for(K&&(O&&ht!==f?(n.push({value:f}),ht<f&&wt++,hy(Math.round((ht+wt*Q)*at)/at,f,cA(f,tt,t))&&wt++):ht<f&&wt++);wt<ct;++wt){const Ct=Math.round((ht+wt*Q)*at)/at;if(W&&Ct>a)break;n.push({value:Ct})}return W&&O&&ot!==a?n.length&&hy(n[n.length-1].value,a,cA(a,tt,t))?n[n.length-1].value=a:n.push({value:a}):(!W||ot===a)&&n.push({value:ot}),n}function cA(t,e,{horizontal:n,minRotation:i}){const r=hc(i),u=(n?Math.sin(r):Math.cos(r))||.001,f=.75*e*(""+t).length;return Math.min(e/u,f)}class a0 extends rp{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return di(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:u}=this;const f=y=>r=n?r:y,a=y=>u=i?u:y;if(e){const y=jc(r),_=jc(u);y<0&&_<0?a(0):y>0&&_>0&&f(0)}if(r===u){let y=u===0?1:Math.abs(u*.05);a(u+y),e||f(r-y)}this.min=r,this.max=u}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},u=this._range||this,f=bF(r,u);return e.bounds==="ticks"&&Jk(f,this,"value"),e.reverse?(f.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),f}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Uy(e,this.chart.options.locale,this.options.ticks.format)}}class QO extends a0{static id="linear";static defaults={ticks:{callback:K0.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ga(e)?e:0,this.max=ga(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=hc(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,u.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const wy=t=>Math.floor(Df(t)),zd=(t,e)=>Math.pow(10,wy(t)+e);function hA(t){return t/Math.pow(10,wy(t))===1}function fA(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function wF(t,e){const n=e-t;let i=wy(n);for(;fA(t,e,i)>10;)i++;for(;fA(t,e,i)<10;)i--;return Math.min(i,wy(t))}function SF(t,{min:e,max:n}){e=Zl(t.min,e);const i=[],r=wy(e);let u=wF(e,n),f=u<0?Math.pow(10,Math.abs(u)):1;const a=Math.pow(10,u),y=r>u?Math.pow(10,r):0,_=Math.round((e-y)*f)/f,x=Math.floor((e-y)/a/10)*a*10;let A=Math.floor((_-x)/Math.pow(10,u)),O=Zl(t.min,Math.round((y+x+A*Math.pow(10,u))*f)/f);for(;O<n;)i.push({value:O,major:hA(O),significand:A}),A>=10?A=A<15?15:20:A++,A>=20&&(u++,A=2,f=u>=0?1:f),O=Math.round((y+x+A*Math.pow(10,u))*f)/f;const I=Zl(t.max,O);return i.push({value:I,major:hA(I),significand:A}),i}class TF extends rp{static id="logarithmic";static defaults={ticks:{callback:K0.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=a0.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return ga(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ga(e)?Math.max(0,e):null,this.max=ga(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ga(this._userMin)&&(this.min=e===zd(this.min,0)?zd(this.min,-1):zd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const u=a=>i=e?i:a,f=a=>r=n?r:a;i===r&&(i<=0?(u(1),f(10)):(u(zd(i,-1)),f(zd(r,1)))),i<=0&&u(zd(r,-1)),r<=0&&f(zd(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=SF(n,this);return e.bounds==="ticks"&&Jk(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Uy(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Df(e),this._valueRange=Df(this.max)-Df(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Df(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}function vw(t){const e=t.ticks;if(e.display&&t.display){const n=Eo(e.backdropPadding);return Wn(e.font&&e.font.size,Zr.font.size)+n.height}return 0}function MF(t,e,n){return n=Hr(n)?n:[n],{w:EN(t,e.string,n),h:n.length*e.lineHeight}}function dA(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function AF(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],u=t._pointLabels.length,f=t.options.pointLabels,a=f.centerPointLabels?Fi/u:0;for(let y=0;y<u;y++){const _=f.setContext(t.getPointLabelContext(y));r[y]=_.padding;const x=t.getPointPosition(y,t.drawingArea+r[y],a),A=ls(_.font),O=MF(t.ctx,A,t._pointLabels[y]);i[y]=O;const I=To(t.getIndexAngle(y)+a),F=Math.round(wS(I)),q=dA(F,x.x,O.w,0,180),H=dA(F,x.y,O.h,90,270);EF(n,e,I,q,H)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=kF(t,i,r)}function EF(t,e,n,i,r){const u=Math.abs(Math.sin(n)),f=Math.abs(Math.cos(n));let a=0,y=0;i.start<e.l?(a=(e.l-i.start)/u,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/u,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(y=(e.t-r.start)/f,t.t=Math.min(t.t,e.t-y)):r.end>e.b&&(y=(r.end-e.b)/f,t.b=Math.max(t.b,e.b+y))}function CF(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:u,padding:f,size:a}=n,y=t.getPointPosition(e,i+r+f,u),_=Math.round(wS(To(y.angle+Da))),x=zF(y.y,a.h,_),A=OF(_),O=DF(y.x,a.w,A);return{visible:!0,x:y.x,y:x,textAlign:A,left:O,top:x,right:O+a.w,bottom:x+a.h}}function PF(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:u}=t;return!(Eh({x:n,y:i},e)||Eh({x:n,y:u},e)||Eh({x:r,y:i},e)||Eh({x:r,y:u},e))}function kF(t,e,n){const i=[],r=t._pointLabels.length,u=t.options,{centerPointLabels:f,display:a}=u.pointLabels,y={extra:vw(u)/2,additionalAngle:f?Fi/r:0};let _;for(let x=0;x<r;x++){y.padding=n[x],y.size=e[x];const A=CF(t,x,y);i.push(A),a==="auto"&&(A.visible=PF(A,_),A.visible&&(_=A))}return i}function OF(t){return t===0||t===180?"center":t<180?"left":"right"}function DF(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function zF(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function LF(t,e,n){const{left:i,top:r,right:u,bottom:f}=n,{backdropColor:a}=e;if(!di(a)){const y=Vd(e.borderRadius),_=Eo(e.backdropPadding);t.fillStyle=a;const x=i-_.left,A=r-_.top,O=u-i+_.width,I=f-r+_.height;Object.values(y).some(F=>F!==0)?(t.beginPath(),xy(t,{x,y:A,w:O,h:I,radius:y}),t.fill()):t.fillRect(x,A,O,I)}}function IF(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const u=t._pointLabelItems[r];if(!u.visible)continue;const f=i.setContext(t.getPointLabelContext(r));LF(n,f,u);const a=ls(f.font),{x:y,y:_,textAlign:x}=u;Xd(n,t._pointLabels[r],y,_+a.lineHeight/2,a,{color:f.color,textAlign:x,textBaseline:"middle"})}}function JO(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Br);else{let u=t.getPointPosition(0,e);r.moveTo(u.x,u.y);for(let f=1;f<i;f++)u=t.getPointPosition(f,e),r.lineTo(u.x,u.y)}}function RF(t,e,n,i,r){const u=t.ctx,f=e.circular,{color:a,lineWidth:y}=e;!f&&!i||!a||!y||n<0||(u.save(),u.strokeStyle=a,u.lineWidth=y,u.setLineDash(r.dash||[]),u.lineDashOffset=r.dashOffset,u.beginPath(),JO(t,n,f,i),u.closePath(),u.stroke(),u.restore())}function BF(t,e,n){return Ff(t,{label:n,index:e,type:"pointLabel"})}class NF extends a0{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:K0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Eo(vw(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ga(e)&&!isNaN(e)?e:0,this.max=ga(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/vw(this.options))}generateTickLabels(e){a0.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=Sr(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?AF(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=Br/(this._pointLabels.length||1),i=this.options.startAngle||0;return To(e*n+hc(i))}getDistanceFromCenterForValue(e){if(di(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(di(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return BF(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-Da+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:u}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:u}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),JO(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:u}=n,f=this._pointLabels.length;let a,y,_;if(n.pointLabels.display&&IF(this,f),r.display&&this.ticks.forEach((x,A)=>{if(A!==0||A===0&&this.min<0){y=this.getDistanceFromCenterForValue(x.value);const O=this.getContext(A),I=r.setContext(O),F=u.setContext(O);RF(this,I,y,f,F)}}),i.display){for(e.save(),a=f-1;a>=0;a--){const x=i.setContext(this.getPointLabelContext(a)),{color:A,lineWidth:O}=x;!O||!A||(e.lineWidth=O,e.strokeStyle=A,e.setLineDash(x.borderDash),e.lineDashOffset=x.borderDashOffset,y=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),_=this.getPointPosition(a,y),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(_.x,_.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let u,f;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,y)=>{if(y===0&&this.min>=0&&!n.reverse)return;const _=i.setContext(this.getContext(y)),x=ls(_.font);if(u=this.getDistanceFromCenterForValue(this.ticks[y].value),_.showLabelBackdrop){e.font=x.string,f=e.measureText(a.label).width,e.fillStyle=_.backdropColor;const A=Eo(_.backdropPadding);e.fillRect(-f/2-A.left,-u-x.size/2-A.top,f+A.width,x.size+A.height)}Xd(e,a.label,0,-u,x,{color:_.color,strokeColor:_.textStrokeColor,strokeWidth:_.textStrokeWidth})}),e.restore()}drawTitle(){}}const ix={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_l=Object.keys(ix);function pA(t,e){return t-e}function mA(t,e){if(di(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:u}=t._parseOpts;let f=e;return typeof i=="function"&&(f=i(f)),ga(f)||(f=typeof i=="string"?n.parse(f,i):n.parse(f)),f===null?null:(r&&(f=r==="week"&&(wm(u)||u===!0)?n.startOf(f,"isoWeek",u):n.startOf(f,r)),+f)}function gA(t,e,n,i){const r=_l.length;for(let u=_l.indexOf(t);u<r-1;++u){const f=ix[_l[u]],a=f.steps?f.steps:Number.MAX_SAFE_INTEGER;if(f.common&&Math.ceil((n-e)/(a*f.size))<=i)return _l[u]}return _l[r-1]}function jF(t,e,n,i,r){for(let u=_l.length-1;u>=_l.indexOf(n);u--){const f=_l[u];if(ix[f].common&&t._adapter.diff(r,i,f)>=e-1)return f}return _l[n?_l.indexOf(n):0]}function FF(t){for(let e=_l.indexOf(t)+1,n=_l.length;e<n;++e)if(ix[_l[e]].common)return _l[e]}function yA(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=SS(n,e),u=n[i]>=e?n[i]:n[r];t[u]=!0}}function UF(t,e,n,i){const r=t._adapter,u=+r.startOf(e[0].value,i),f=e[e.length-1].value;let a,y;for(a=u;a<=f;a=+r.add(a,1,i))y=n[a],y>=0&&(e[y].major=!0);return e}function _A(t,e,n){const i=[],r={},u=e.length;let f,a;for(f=0;f<u;++f)a=e[f],r[a]=f,i.push({value:a,major:!1});return u===0||!n?i:UF(t,i,r,n)}class xw extends rp{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new Y4._date(e.adapters.date);r.init(n),cy(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:mA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:u,minDefined:f,maxDefined:a}=this.getUserBounds();function y(_){!f&&!isNaN(_.min)&&(r=Math.min(r,_.min)),!a&&!isNaN(_.max)&&(u=Math.max(u,_.max))}(!f||!a)&&(y(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&y(this.getMinMax(!1))),r=ga(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),u=ga(u)&&!isNaN(u)?u:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,u-1),this.max=Math.max(r+1,u)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const u=this.min,f=this.max,a=pN(r,u,f);return this._unit=n.unit||(i.autoSkip?gA(n.minUnit,this.min,this.max,this._getLabelCapacity(u)):jF(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:FF(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),_A(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,u;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,u=this.getDecimalForValue(e[e.length-1]),e.length===1?i=u:i=(u-this.getDecimalForValue(e[e.length-2]))/2);const f=e.length<3?.5:.25;n=Ss(n,0,f),i=Ss(i,0,f),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,u=r.time,f=u.unit||gA(u.minUnit,n,i,this._getLabelCapacity(n)),a=Wn(r.ticks.stepSize,1),y=f==="week"?u.isoWeekday:!1,_=wm(y)||y===!0,x={};let A=n,O,I;if(_&&(A=+e.startOf(A,"isoWeek",y)),A=+e.startOf(A,_?"day":f),e.diff(i,n,f)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+f);const F=r.ticks.source==="data"&&this.getDataTimestamps();for(O=A,I=0;O<i;O=+e.add(O,a,f),I++)yA(x,O,F);return(O===i||r.bounds==="ticks"||I===1)&&yA(x,O,F),Object.keys(x).sort(pA).map(q=>+q)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,u=this._unit,f=n||r[u];return this._adapter.format(e,f)}_tickFormatFunction(e,n,i,r){const u=this.options,f=u.ticks.callback;if(f)return Sr(f,[e,n,i],this);const a=u.time.displayFormats,y=this._unit,_=this._majorUnit,x=y&&a[y],A=_&&a[_],O=i[n],I=_&&A&&O&&O.major;return this._adapter.format(e,r||(I?A:x))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=hc(this.isHorizontal()?n.maxRotation:n.minRotation),u=Math.cos(r),f=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*u+a*f,h:i*f+a*u}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,u=this._tickFormatFunction(e,0,_A(this,[e],this._majorUnit),r),f=this._getLabelSize(u),a=Math.floor(this.isHorizontal()?this.width/f.w:this.height/f.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(mA(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return nO(e.sort(pA))}}function Mv(t,e,n){let i=0,r=t.length-1,u,f,a,y;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Ah(t,"pos",e)),{pos:u,time:a}=t[i],{pos:f,time:y}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Ah(t,"time",e)),{time:u,pos:a}=t[i],{time:f,pos:y}=t[r]);const _=f-u;return _?a+(y-a)*(e-u)/_:a}class VF extends xw{static id="timeseries";static defaults=xw.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Mv(n,this.min),this._tableRange=Mv(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],u=[];let f,a,y,_,x;for(f=0,a=e.length;f<a;++f)_=e[f],_>=n&&_<=i&&r.push(_);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(f=0,a=r.length;f<a;++f)x=r[f+1],y=r[f-1],_=r[f],Math.round((x+y)/2)!==_&&u.push({time:_,pos:f/(a-1)});return u}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,u)=>r-u)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Mv(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Mv(this._table,i*this._tableRange+this._minPos,!0)}}var $F=Object.freeze({__proto__:null,CategoryScale:KO,LinearScale:QO,LogarithmicScale:TF,RadialLinearScale:NF,TimeScale:xw,TimeSeriesScale:VF});const qF=[W4,A6,yF,$F];Lm.register(...qF);function HF({selectedRegion:t,selectedRegionData:e,nationalData:n,sidoData:i,energyType:r,mainTab:u}){const f=G.useRef(null),a=G.useRef(null);return G.useEffect(()=>{if(!e||e.length===0)return;const _=(e.items||e).filter(K=>{const W=Number(K.yearMonth);return W>=202001&&W<=202506});if(_.length===0)return;const x=[];for(let K=2020;K<=2025;K++)for(let W=1;W<=12;W++){const X=`${K}${String(W).padStart(2,"0")}`;if(x.push(X),X==="202506")break}const A=K=>Number(r==="electric"?K.useElect||0:K.useGas||0);let O=x,I=[],F=[];if(t)if(t.countyId){const K=new Map;_.forEach(W=>{Number(W.countyId)===Number(t.countyId)&&K.set(W.yearMonth,A(W))}),I=O.map(W=>K.get(W)??0)}else{const K={};_.forEach(W=>{K[W.countyId]||(K[W.countyId]={}),K[W.countyId][W.yearMonth]=A(W)}),I=O.map(W=>{let X=0;return Object.values(K).forEach(tt=>{X+=tt[W]??0}),X})}else{const K=new Map;(n||[]).forEach(W=>K.set(W.yearMonth,A(W))),I=O.map(W=>K.get(W)??0)}if(!t)F=[];else if(t.countyId){const K=new Map;(i||[]).forEach(W=>K.set(W.yearMonth,A(W))),F=O.map(W=>K.get(W)??0)}else{const K=new Map;(n||[]).forEach(W=>K.set(W.yearMonth,A(W))),F=O.map(W=>K.get(W)??0)}a.current&&a.current.destroy();const q=f.current.getContext("2d"),H=[{label:t?t.countyId?`${t.countyName}`:`${t.cityName}  `:" ",data:I,borderColor:"#3b82f6",backgroundColor:"#3b82f633",yAxisID:"y1",fill:!0,tension:.3,borderWidth:2,pointRadius:2}];F.length>0&&H.push({label:t.countyId?`${t.cityName}  `:" ",data:F,borderColor:"#ef4444",backgroundColor:"#ef444433",yAxisID:"y2",fill:!1,tension:.3,borderWidth:2,pointRadius:2}),a.current=new Lm(q,{type:"line",data:{labels:O,datasets:H},options:{responsive:!0,maintainAspectRatio:!1,scales:{y1:{type:"linear",position:"left"},y2:{type:"linear",position:"right",grid:{drawOnChartArea:!1}}}}})},[t,e,n,i,r,u]),vt.jsx("div",{style:{width:"100%",height:"420px",paddingTop:"8px"},children:vt.jsx("canvas",{ref:f,style:{width:"100%",height:"100%"}})})}function ZF(){const[t,e]=G.useState(null),[n,i]=G.useState([]),[r,u]=G.useState([]),[f,a]=G.useState("electric"),[y,_]=G.useState("energy"),[x,A]=G.useState([]),[O,I]=G.useState(!0);return G.useEffect(()=>{(async()=>{try{I(!0),A([]);const F=await fetch("/api/energy?cityId=0&countyId=0");if(!F.ok)throw new Error("  ");const q=await F.json();console.log("!");const H=Array.isArray(q?.items)?q.items:Array.isArray(q)?q:[];A(H),i(H)}catch(F){console.error("    :",F)}finally{I(!1)}})()},[]),G.useEffect(()=>{if(!t){i(x),u([]);return}let F="/api/energy";const q=Number(t.cityId),H=Number(t.countyId);q&&H?F+=`?cityId=${q}&countyId=${H}`:q&&(F+=`?cityId=${q}`),(async()=>{try{const K=await fetch(F);if(!K.ok)throw new Error("  ");const W=await K.json(),X=Array.isArray(W?.items)?W.items:Array.isArray(W)?W:[];if(i(X),console.log("   :",X),q&&H){const Q=await(await fetch(`/api/energy?cityId=${q}&countyId=0`)).json(),at=Array.isArray(Q?.items)?Q.items:Array.isArray(Q)?Q:[];u(at)}else u([])}catch(K){console.error("    :",K)}})()},[t,x]),O?vt.jsxs("div",{className:"dashboard",children:[vt.jsx("h1",{children:"  "}),vt.jsx("p",{children:"   ..."})]}):vt.jsxs("div",{className:"dashboard",children:[vt.jsx("h1",{children:"  "}),vt.jsx("p",{children:"  ,  ,         ."}),vt.jsxs("div",{className:"dashboard-grid",children:[vt.jsxs("div",{className:"card map",children:[vt.jsx("h3",{children:"  "}),vt.jsx("div",{className:"panel-body",style:{height:500},children:vt.jsx(k5,{onRegionSelect:e,energyType:f,allEnergyData:x})})]}),vt.jsxs("div",{className:"card chart",children:[vt.jsx("h3",{children:t?`${t.cityName||""} ${t.countyName||""}`.trim():"  "}),vt.jsxs("div",{className:"main-tabs",children:[vt.jsx("button",{className:y==="energy"?"active":"",onClick:()=>_("energy"),children:" "}),vt.jsx("button",{className:y==="co2"?"active":"",onClick:()=>_("co2"),children:" "})]}),vt.jsxs("div",{className:"sub-tabs",children:[vt.jsx("button",{className:f==="electric"?"active":"",onClick:()=>a("electric"),children:" "}),vt.jsx("button",{className:f==="gas"?"active":"",onClick:()=>a("gas"),children:" "})]}),vt.jsx(HF,{selectedRegion:t,selectedRegionData:n,nationalData:x,sidoData:r,energyType:f,mainTab:y})]}),vt.jsxs("div",{className:"card chart",children:[vt.jsx("h3",{children:"~2030   "}),vt.jsx("div",{className:"chart-placeholder",children:"   "})]}),vt.jsxs("div",{className:"card chart",children:[vt.jsx("h3",{children:"~2030   "}),vt.jsx("div",{className:"chart-placeholder",children:"   "})]})]})]})}const tD="label";function vA(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function GF(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function eD(t,e){t.labels=e}function nD(t,e,n=tD){const i=[];t.datasets=e.map(r=>{const u=t.datasets.find(f=>f[n]===r[n]);return!u||!r.data||i.includes(u)?{...r}:(i.push(u),Object.assign(u,r),u)})}function WF(t,e=tD){const n={labels:[],datasets:[]};return eD(n,t.labels),nD(n,t.datasets,e),n}function YF(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:u,type:f,data:a,options:y,plugins:_=[],fallbackContent:x,updateMode:A,...O}=t,I=G.useRef(null),F=G.useRef(null),q=()=>{I.current&&(F.current=new Lm(I.current,{type:f,data:WF(a,u),options:y&&{...y},plugins:_}),vA(e,F.current))},H=()=>{vA(e,null),F.current&&(F.current.destroy(),F.current=null)};return G.useEffect(()=>{!r&&F.current&&y&&GF(F.current,y)},[r,y]),G.useEffect(()=>{!r&&F.current&&eD(F.current.config.data,a.labels)},[r,a.labels]),G.useEffect(()=>{!r&&F.current&&a.datasets&&nD(F.current.config.data,a.datasets,u)},[r,a.datasets]),G.useEffect(()=>{F.current&&(r?(H(),setTimeout(q)):F.current.update(A))},[r,y,a.labels,a.datasets,A]),G.useEffect(()=>{F.current&&(H(),setTimeout(q))},[f]),G.useEffect(()=>(q(),()=>H()),[]),vt.jsx("canvas",{ref:I,role:"img",height:n,width:i,...O,children:x})}const XF=G.forwardRef(YF);function KF(t,e){return Lm.register(e),G.forwardRef((n,i)=>vt.jsx(XF,{...n,ref:i,type:t}))}const QF=KF("line",MO),ma={11:{name:"",districts:{11110:"",11140:"",11170:"",11200:"",11215:"",11230:"",11260:"",11290:"",11305:"",11320:"",11350:"",11380:"",11410:"",11440:"",11470:"",11500:"",11530:"",11545:"",11560:"",11590:"",11620:"",11650:"",11680:"",11710:"",11740:""}},26:{name:"",districts:{26110:"",26140:"",26170:"",26200:"",26230:"",26260:"",26290:"",26320:"",26350:"",26380:"",26410:"",26440:"",26470:"",26500:"",26530:"",26710:""}},27:{name:"",districts:{27110:"",27140:"",27170:"",27200:"",27230:"",27260:"",27290:"",27710:"",27720:""}},28:{name:"",districts:{28110:"",28140:"",28177:"",28185:"",28200:"",28237:"",28245:"",28260:"",28710:"",28720:""}},29:{name:"",districts:{29110:"",29140:"",29155:"",29170:"",29200:""}},30:{name:"",districts:{30110:"",30140:"",30170:"",30200:"",30230:""}},31:{name:"",districts:{31110:"",31140:"",31170:"",31200:"",31710:""}},36:{name:"",districts:{36110:""}},41:{name:"",districts:{41111:" ",41113:" ",41115:" ",41117:" ",41131:" ",41133:" ",41135:" ",41150:"",41171:" ",41173:" ",41192:" ",41194:" ",41196:" ",41210:"",41220:"",41250:"",41271:" ",41273:" ",41281:" ",41285:" ",41287:" ",41290:"",41310:"",41360:"",41370:"",41390:"",41410:"",41430:"",41450:"",41461:" ",41463:" ",41465:" ",41480:"",41500:"",41550:"",41570:"",41590:"",41610:"",41630:"",41650:"",41670:"",41800:"",41820:"",41830:""}},43:{name:"",districts:{43111:" ",43112:" ",43113:" ",43114:" ",43130:"",43150:"",43720:"",43730:"",43740:"",43745:"",43750:"",43760:"",43770:"",43800:""}},44:{name:"",districts:{44131:" ",44133:" ",44150:"",44180:"",44200:"",44210:"",44230:"",44250:"",44270:"",44710:"",44760:"",44770:"",44790:"",44800:"",44810:"",44825:""}},46:{name:"",districts:{46110:"",46130:"",46150:"",46170:"",46230:"",46710:"",46720:"",46730:"",46770:"",46780:"",46790:"",46800:"",46810:"",46820:"",46830:"",46840:"",46860:"",46870:"",46880:"",46890:"",46900:"",46910:""}},47:{name:"",districts:{47111:" ",47113:" ",47130:"",47150:"",47170:"",47190:"",47210:"",47230:"",47250:"",47280:"",47290:"",47730:"",47750:"",47760:"",47770:"",47820:"",47830:"",47840:"",47850:"",47900:"",47920:"",47930:"",47940:""}},48:{name:"",districts:{48121:" ",48123:" ",48125:" ",48127:" ",48129:" ",48170:"",48220:"",48240:"",48250:"",48270:"",48310:"",48330:"",48720:"",48730:"",48740:"",48820:"",48840:"",48850:"",48860:"",48870:"",48880:"",48890:""}},50:{name:"",districts:{50110:"",50130:""}},51:{name:"",districts:{51110:"",51130:"",51150:"",51170:"",51190:"",51210:"",51230:"",51720:"",51730:"",51750:"",51760:"",51770:"",51780:"",51790:"",51800:"",51810:"",51820:"",51830:""}},52:{name:"",districts:{52111:" ",52113:" ",52130:"",52140:"",52180:"",52190:"",52210:"",52710:"",52720:"",52730:"",52740:"",52750:"",52770:"",52790:"",52800:""}}};Lm.register(KO,QO,NO,Vy,WO,XO,GO,HO);const JF={labels:["1","2","3","4","5","6","7","8","9","10","11","12"],datasets:[{label:"  (KWh)",data:[25e3,22e3,26e3,24e3,25500,23e3],fill:!0,borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.3)",tension:.4},{label:"  (KWh)",data:[9e3,8e3,9500,8500,9e3,8800],fill:!0,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.3)",tension:.4}]},t8={responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{min:0,stacked:!0}}},e8=[{date:"2024-11-04",energy:"",region:"",consumption:"1,603 KWh",cost:"212,462",efficiency:"",trend:""},{date:"2024-11-05",energy:"",region:"",consumption:"1,205 KWh",cost:"121,394",efficiency:"",trend:""},{date:"2024-11-06",energy:"",region:"",consumption:"2,034 KWh",cost:"268,695",efficiency:"",trend:""},{date:"2024-11-07",energy:"",region:"",consumption:"1,837 KWh",cost:"214,160",efficiency:"",trend:""},{date:"2024-11-08",energy:"",region:"",consumption:"2,460 KWh",cost:"335,978",efficiency:"",trend:""},{date:"2024-11-09",energy:"",region:"",consumption:"1,625 KWh",cost:"184,269",efficiency:"",trend:""},{date:"2024-11-10",energy:"",region:"",consumption:"2,238 KWh",cost:"333,607",efficiency:"",trend:""}];function n8(){const t="2020-01",e=new Date,n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=`${n}-${i}`,[u,f]=G.useState(""),a=_=>{f(_.target.value)},y=()=>ma[u]?vt.jsxs("table",{className:"stats-table",children:[vt.jsx("thead",{children:vt.jsxs("tr",{children:[vt.jsx("th",{children:" ()"}),vt.jsx("th",{children:" (KWh)"}),vt.jsx("th",{children:"()"})]})}),vt.jsx("tbody",{children:ma[u].map(_=>vt.jsxs("tr",{children:[vt.jsx("td",{children:_.gu}),vt.jsx("td",{children:_.consumption}),vt.jsx("td",{children:_.cost})]},_.gu))})]}):vt.jsxs("table",{className:"stats-table",children:[vt.jsx("thead",{children:vt.jsxs("tr",{children:[vt.jsx("th",{children:""}),vt.jsx("th",{children:""}),vt.jsx("th",{children:""}),vt.jsx("th",{children:" (KWh)"}),vt.jsx("th",{children:"()"}),vt.jsx("th",{children:" "}),vt.jsx("th",{children:""})]})}),vt.jsx("tbody",{children:e8.map(_=>vt.jsxs("tr",{children:[vt.jsx("td",{children:_.date}),vt.jsx("td",{children:_.energy}),vt.jsx("td",{children:_.region}),vt.jsx("td",{children:_.consumption}),vt.jsx("td",{children:_.cost}),vt.jsx("td",{children:_.efficiency}),vt.jsx("td",{children:_.trend})]},_.date))})]});return vt.jsxs("div",{className:"stats-sidebar-layout",children:[vt.jsxs("aside",{className:"stats-sidebar",children:[vt.jsxs("div",{className:"sidebar-section",children:[vt.jsx("h4",{children:"  "}),vt.jsx("input",{type:"month",className:"stats-input",min:t,max:r,defaultValue:r})]}),vt.jsxs("div",{className:"sidebar-section",children:[vt.jsx("h4",{children:" "}),vt.jsx("label",{children:""}),vt.jsxs("select",{className:"stats-input",children:[vt.jsx("option",{children:""}),vt.jsx("option",{children:"(kWh)"}),vt.jsx("option",{children:"(kWh)"})]}),vt.jsx("label",{children:""}),vt.jsxs("select",{className:"stats-input",value:u,onChange:a,children:[vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""}),vt.jsx("option",{children:""})]})]}),vt.jsxs("div",{className:"sidebar-section",children:[vt.jsx("h4",{children:"  "}),vt.jsx("label",{children:" "}),vt.jsxs("select",{className:"stats-input",children:[vt.jsx("option",{children:" "}),vt.jsx("option",{children:" "})]}),vt.jsx("label",{children:" "}),vt.jsxs("select",{className:"stats-input",children:[vt.jsx("option",{children:" "}),vt.jsx("option",{children:" "})]}),vt.jsx("button",{className:"stats-button-primary",children:""})]})]}),vt.jsxs("main",{className:"main-content",children:[vt.jsx("h2",{children:"   "}),vt.jsxs("div",{className:"stats-tabs-inline",children:[vt.jsx("button",{className:"tab-button-inline active",children:""}),vt.jsx("button",{className:"tab-button-inline",children:""}),vt.jsx("button",{className:"tab-button-inline",children:""})]}),vt.jsxs("div",{className:"chart-section",children:[vt.jsx("h3",{children:"   "}),vt.jsx("p",{children:" 12    ."}),vt.jsx("div",{className:"chart-container",children:vt.jsx(QF,{data:JF,options:t8})})]}),vt.jsxs("div",{className:"table-section",children:[vt.jsx("h3",{children:u===""?"   ":`${u}   `}),vt.jsx("p",{children:"      ."}),vt.jsx("div",{className:"stats-table-container",children:y()})]})]})]})}function iD(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=iD(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Nr(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=iD(t))&&(i&&(i+=" "),i+=e);return i}var i8=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function IS(t){if(typeof t!="string")return!1;var e=i8;return e.includes(t)}var r8=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function rD(t){if(typeof t!="string")return!1;var e=r8;return e.includes(t)}function aD(t){return typeof t=="string"&&t.startsWith("data-")}function fc(t){var e=Object.entries(t).filter(n=>{var[i]=n;return rD(i)||aD(i)});return Object.fromEntries(e)}function rx(t){if(t==null)return null;if(G.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return fc(e)}return typeof t=="object"&&!Array.isArray(t)?fc(t):null}function Au(t){var e=Object.entries(t).filter(n=>{var[i]=n;return rD(i)||aD(i)||IS(i)});return Object.fromEntries(e)}function a8(t){return t==null?null:G.isValidElement(t)?Au(t.props):typeof t=="object"&&!Array.isArray(t)?Au(t):null}var s8=["children","width","height","viewBox","className","style","title","desc"];function bw(){return bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bw.apply(null,arguments)}function o8(t,e){if(t==null)return{};var n,i,r=l8(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function l8(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var sD=G.forwardRef((t,e)=>{var{children:n,width:i,height:r,viewBox:u,className:f,style:a,title:y,desc:_}=t,x=o8(t,s8),A=u||{width:i,height:r,x:0,y:0},O=Nr("recharts-surface",f);return G.createElement("svg",bw({},Au(x),{className:O,width:i,height:r,style:a,viewBox:"".concat(A.x," ").concat(A.y," ").concat(A.width," ").concat(A.height),ref:e}),G.createElement("title",null,y),G.createElement("desc",null,_),n)}),u8=["children","className"];function ww(){return ww=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ww.apply(null,arguments)}function c8(t,e){if(t==null)return{};var n,i,r=h8(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function h8(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Vc=G.forwardRef((t,e)=>{var{children:n,className:i}=t,r=c8(t,u8),u=Nr("recharts-layer",i);return G.createElement("g",ww({className:u},Au(r),{ref:e}),n)}),f8=G.createContext(null);function pa(t){return function(){return t}}const Sw=Math.PI,Tw=2*Sw,Rd=1e-6,d8=Tw-Rd;function oD(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function p8(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return oD;const n=10**e;return function(i){this._+=i[0];for(let r=1,u=i.length;r<u;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class m8{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?oD:p8(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,u,f){this._append`C${+e},${+n},${+i},${+r},${this._x1=+u},${this._y1=+f}`}arcTo(e,n,i,r,u){if(e=+e,n=+n,i=+i,r=+r,u=+u,u<0)throw new Error(`negative radius: ${u}`);let f=this._x1,a=this._y1,y=i-e,_=r-n,x=f-e,A=a-n,O=x*x+A*A;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(O>Rd)if(!(Math.abs(A*y-_*x)>Rd)||!u)this._append`L${this._x1=e},${this._y1=n}`;else{let I=i-f,F=r-a,q=y*y+_*_,H=I*I+F*F,K=Math.sqrt(q),W=Math.sqrt(O),X=u*Math.tan((Sw-Math.acos((q+O-H)/(2*K*W)))/2),tt=X/W,Q=X/K;Math.abs(tt-1)>Rd&&this._append`L${e+tt*x},${n+tt*A}`,this._append`A${u},${u},0,0,${+(A*I>x*F)},${this._x1=e+Q*y},${this._y1=n+Q*_}`}}arc(e,n,i,r,u,f){if(e=+e,n=+n,i=+i,f=!!f,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),y=i*Math.sin(r),_=e+a,x=n+y,A=1^f,O=f?r-u:u-r;this._x1===null?this._append`M${_},${x}`:(Math.abs(this._x1-_)>Rd||Math.abs(this._y1-x)>Rd)&&this._append`L${_},${x}`,i&&(O<0&&(O=O%Tw+Tw),O>d8?this._append`A${i},${i},0,1,${A},${e-a},${n-y}A${i},${i},0,1,${A},${this._x1=_},${this._y1=x}`:O>Rd&&this._append`A${i},${i},0,${+(O>=Sw)},${A},${this._x1=e+i*Math.cos(u)},${this._y1=n+i*Math.sin(u)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function lD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new m8(e)}function RS(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function uD(t){this._context=t}uD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ax(t){return new uD(t)}function cD(t){return t[0]}function hD(t){return t[1]}function fD(t,e){var n=pa(!0),i=null,r=ax,u=null,f=lD(a);t=typeof t=="function"?t:t===void 0?cD:pa(t),e=typeof e=="function"?e:e===void 0?hD:pa(e);function a(y){var _,x=(y=RS(y)).length,A,O=!1,I;for(i==null&&(u=r(I=f())),_=0;_<=x;++_)!(_<x&&n(A=y[_],_,y))===O&&((O=!O)?u.lineStart():u.lineEnd()),O&&u.point(+t(A,_,y),+e(A,_,y));if(I)return u=null,I+""||null}return a.x=function(y){return arguments.length?(t=typeof y=="function"?y:pa(+y),a):t},a.y=function(y){return arguments.length?(e=typeof y=="function"?y:pa(+y),a):e},a.defined=function(y){return arguments.length?(n=typeof y=="function"?y:pa(!!y),a):n},a.curve=function(y){return arguments.length?(r=y,i!=null&&(u=r(i)),a):r},a.context=function(y){return arguments.length?(y==null?i=u=null:u=r(i=y),a):i},a}function Av(t,e,n){var i=null,r=pa(!0),u=null,f=ax,a=null,y=lD(_);t=typeof t=="function"?t:t===void 0?cD:pa(+t),e=typeof e=="function"?e:pa(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?hD:pa(+n);function _(A){var O,I,F,q=(A=RS(A)).length,H,K=!1,W,X=new Array(q),tt=new Array(q);for(u==null&&(a=f(W=y())),O=0;O<=q;++O){if(!(O<q&&r(H=A[O],O,A))===K)if(K=!K)I=O,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),F=O-1;F>=I;--F)a.point(X[F],tt[F]);a.lineEnd(),a.areaEnd()}K&&(X[O]=+t(H,O,A),tt[O]=+e(H,O,A),a.point(i?+i(H,O,A):X[O],n?+n(H,O,A):tt[O]))}if(W)return a=null,W+""||null}function x(){return fD().defined(r).curve(f).context(u)}return _.x=function(A){return arguments.length?(t=typeof A=="function"?A:pa(+A),i=null,_):t},_.x0=function(A){return arguments.length?(t=typeof A=="function"?A:pa(+A),_):t},_.x1=function(A){return arguments.length?(i=A==null?null:typeof A=="function"?A:pa(+A),_):i},_.y=function(A){return arguments.length?(e=typeof A=="function"?A:pa(+A),n=null,_):e},_.y0=function(A){return arguments.length?(e=typeof A=="function"?A:pa(+A),_):e},_.y1=function(A){return arguments.length?(n=A==null?null:typeof A=="function"?A:pa(+A),_):n},_.lineX0=_.lineY0=function(){return x().x(t).y(e)},_.lineY1=function(){return x().x(t).y(n)},_.lineX1=function(){return x().x(i).y(e)},_.defined=function(A){return arguments.length?(r=typeof A=="function"?A:pa(!!A),_):r},_.curve=function(A){return arguments.length?(f=A,u!=null&&(a=f(u)),_):f},_.context=function(A){return arguments.length?(A==null?u=a=null:a=f(u=A),_):u},_}class dD{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function g8(t){return new dD(t,!0)}function y8(t){return new dD(t,!1)}function s0(){}function o0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function pD(t){this._context=t}pD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:o0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:o0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _8(t){return new pD(t)}function mD(t){this._context=t}mD.prototype={areaStart:s0,areaEnd:s0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:o0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function v8(t){return new mD(t)}function gD(t){this._context=t}gD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:o0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function x8(t){return new gD(t)}function yD(t){this._context=t}yD.prototype={areaStart:s0,areaEnd:s0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function b8(t){return new yD(t)}function xA(t){return t<0?-1:1}function bA(t,e,n){var i=t._x1-t._x0,r=e-t._x1,u=(t._y1-t._y0)/(i||r<0&&-0),f=(n-t._y1)/(r||i<0&&-0),a=(u*r+f*i)/(i+r);return(xA(u)+xA(f))*Math.min(Math.abs(u),Math.abs(f),.5*Math.abs(a))||0}function wA(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function kb(t,e,n){var i=t._x0,r=t._y0,u=t._x1,f=t._y1,a=(u-i)/3;t._context.bezierCurveTo(i+a,r+a*e,u-a,f-a*n,u,f)}function l0(t){this._context=t}l0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kb(this,this._t0,wA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kb(this,wA(this,n=bA(this,t,e)),n);break;default:kb(this,this._t0,n=bA(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function _D(t){this._context=new vD(t)}(_D.prototype=Object.create(l0.prototype)).point=function(t,e){l0.prototype.point.call(this,e,t)};function vD(t){this._context=t}vD.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,u){this._context.bezierCurveTo(e,t,i,n,u,r)}};function w8(t){return new l0(t)}function S8(t){return new _D(t)}function xD(t){this._context=t}xD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=SA(t),r=SA(e),u=0,f=1;f<n;++u,++f)this._context.bezierCurveTo(i[0][u],r[0][u],i[1][u],r[1][u],t[f],e[f]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function SA(t){var e,n=t.length-1,i,r=new Array(n),u=new Array(n),f=new Array(n);for(r[0]=0,u[0]=2,f[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,u[e]=4,f[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,u[n-1]=7,f[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/u[e-1],u[e]-=i,f[e]-=i*f[e-1];for(r[n-1]=f[n-1]/u[n-1],e=n-2;e>=0;--e)r[e]=(f[e]-r[e+1])/u[e];for(u[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)u[e]=2*t[e+1]-r[e+1];return[r,u]}function T8(t){return new xD(t)}function sx(t,e){this._context=t,this._t=e}sx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function M8(t){return new sx(t,.5)}function A8(t){return new sx(t,0)}function E8(t){return new sx(t,1)}function Mm(t,e){if((f=t.length)>1)for(var n=1,i,r,u=t[e[0]],f,a=u.length;n<f;++n)for(r=u,u=t[e[n]],i=0;i<a;++i)u[i][1]+=u[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function Mw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function C8(t,e){return t[e]}function P8(t){const e=[];return e.key=t,e}function k8(){var t=pa([]),e=Mw,n=Mm,i=C8;function r(u){var f=Array.from(t.apply(this,arguments),P8),a,y=f.length,_=-1,x;for(const A of u)for(a=0,++_;a<y;++a)(f[a][_]=[0,+i(A,f[a].key,_,u)]).data=A;for(a=0,x=RS(e(f));a<y;++a)f[x[a]].index=a;return n(f,x),f}return r.keys=function(u){return arguments.length?(t=typeof u=="function"?u:pa(Array.from(u)),r):t},r.value=function(u){return arguments.length?(i=typeof u=="function"?u:pa(+u),r):i},r.order=function(u){return arguments.length?(e=u==null?Mw:typeof u=="function"?u:pa(Array.from(u)),r):e},r.offset=function(u){return arguments.length?(n=u??Mm,r):n},r}function O8(t,e){if((i=t.length)>0){for(var n,i,r=0,u=t[0].length,f;r<u;++r){for(f=n=0;n<i;++n)f+=t[n][r][1]||0;if(f)for(n=0;n<i;++n)t[n][r][1]/=f}Mm(t,e)}}function D8(t,e){if((r=t.length)>0){for(var n=0,i=t[e[0]],r,u=i.length;n<u;++n){for(var f=0,a=0;f<r;++f)a+=t[f][n][1]||0;i[n][1]+=i[n][0]=-a/2}Mm(t,e)}}function z8(t,e){if(!(!((f=t.length)>0)||!((u=(r=t[e[0]]).length)>0))){for(var n=0,i=1,r,u,f;i<u;++i){for(var a=0,y=0,_=0;a<f;++a){for(var x=t[e[a]],A=x[i][1]||0,O=x[i-1][1]||0,I=(A-O)/2,F=0;F<a;++F){var q=t[e[F]],H=q[i][1]||0,K=q[i-1][1]||0;I+=H-K}y+=A,_+=I*A}r[i-1][1]+=r[i-1][0]=n,y&&(n-=_/y)}r[i-1][1]+=r[i-1][0]=n,Mm(t,e)}}var Ob={},Db={},TA;function L8(){return TA||(TA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(Db)),Db}var zb={},MA;function bD(){return MA||(MA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(zb)),zb}var Lb={},AA;function BS(){return AA||(AA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(Lb)),Lb}var Ib={},Rb={},EA;function I8(){return EA||(EA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}t.toString=e})(Rb)),Rb}var CA;function NS(){return CA||(CA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I8(),n=BS();function i(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const u=[],f=r.length;if(f===0)return u;let a=0,y="",_="",x=!1;for(r.charCodeAt(0)===46&&(u.push(""),a++);a<f;){const A=r[a];_?A==="\\"&&a+1<f?(a++,y+=r[a]):A===_?_="":y+=A:x?A==='"'||A==="'"?_=A:A==="]"?(x=!1,u.push(y),y=""):y+=A:A==="["?(x=!0,y&&(u.push(y),y="")):A==="."?y&&(u.push(y),y=""):y+=A,a++}return y&&u.push(y),u}t.toPath=i})(Ib)),Ib}var PA;function jS(){return PA||(PA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=L8(),n=bD(),i=BS(),r=NS();function u(a,y,_){if(a==null)return _;switch(typeof y){case"string":{if(e.isUnsafeProperty(y))return _;const x=a[y];return x===void 0?n.isDeepKey(y)?u(a,r.toPath(y),_):_:x}case"number":case"symbol":{typeof y=="number"&&(y=i.toKey(y));const x=a[y];return x===void 0?_:x}default:{if(Array.isArray(y))return f(a,y,_);if(Object.is(y?.valueOf(),-0)?y="-0":y=String(y),e.isUnsafeProperty(y))return _;const x=a[y];return x===void 0?_:x}}}function f(a,y,_){if(y.length===0)return _;let x=a;for(let A=0;A<y.length;A++){if(x==null||e.isUnsafeProperty(y[A]))return _;x=x[y[A]]}return x===void 0?_:x}t.get=u})(Ob)),Ob}var Bb,kA;function R8(){return kA||(kA=1,Bb=jS().get),Bb}var B8=R8();const ox=Pu(B8);var Tu=t=>t===0?0:t>0?1:-1,dc=t=>typeof t=="number"&&t!=+t,Lh=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,xn=t=>(typeof t=="number"||t instanceof Number)&&!dc(t),$c=t=>xn(t)||typeof t=="string",N8=0,Sy=t=>{var e=++N8;return"".concat(t||"").concat(e)},jf=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xn(e)&&typeof e!="string")return i;var u;if(Lh(e)){if(n==null)return i;var f=e.indexOf("%");u=n*parseFloat(e.slice(0,f))/100}else u=+e;return dc(u)&&(u=i),r&&n!=null&&u>n&&(u=n),u},wD=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},i=0;i<e;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1};function Bc(t,e,n){return xn(t)&&xn(e)?t+n*(e-t):e}function SD(t,e,n){if(!(!t||!t.length))return t.find(i=>i&&(typeof e=="function"?e(i):ox(i,e))===n)}var Zs=t=>t===null||typeof t>"u",FS=t=>Zs(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function j8(t){return t!=null}function Im(){}var TD=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,US=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(G.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(r=>{IS(r)&&(i[r]=(u=>n[r](n,u)))}),i},F8=(t,e,n)=>i=>(t(e,n,i),null),U8=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var i=null;return Object.keys(t).forEach(r=>{var u=t[r];IS(r)&&typeof u=="function"&&(i||(i={}),i[r]=F8(u,e,n))}),i};function OA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function V8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OA(Object(n),!0).forEach(function(i){$8(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OA(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $8(t,e,n){return(e=q8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q8(t){var e=H8(t,"string");return typeof e=="symbol"?e:e+""}function H8(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ql(t,e){var n=V8({},t),i=e,r=Object.keys(e),u=r.reduce((f,a)=>(f[a]===void 0&&i[a]!==void 0&&(f[a]=i[a]),f),n);return u}var Nb={},jb={},DA;function Z8(){return DA||(DA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){const r=new Map;for(let u=0;u<n.length;u++){const f=n[u],a=i(f);r.has(a)||r.set(a,f)}return Array.from(r.values())}t.uniqBy=e})(jb)),jb}var Fb={},zA;function MD(){return zA||(zA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(Fb)),Fb}var Ub={},Vb={},$b={},LA;function G8(){return LA||(LA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})($b)),$b}var IA;function VS(){return IA||(IA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G8();function n(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}t.isArrayLike=n})(Vb)),Vb}var qb={},RA;function W8(){return RA||(RA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(qb)),qb}var BA;function Y8(){return BA||(BA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VS(),n=W8();function i(r){return n.isObjectLike(r)&&e.isArrayLike(r)}t.isArrayLikeObject=i})(Ub)),Ub}var Hb={},Zb={},NA;function X8(){return NA||(NA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jS();function n(i){return function(r){return e.get(r,i)}}t.property=n})(Zb)),Zb}var Gb={},Wb={},Yb={},Xb={},jA;function AD(){return jA||(jA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Xb)),Xb}var Kb={},FA;function ED(){return FA||(FA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Kb)),Kb}var Qb={},UA;function CD(){return UA||(UA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}t.eq=e})(Qb)),Qb}var VA;function K8(){return VA||(VA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AD(),n=ED(),i=CD();function r(x,A,O){return typeof O!="function"?r(x,A,()=>{}):u(x,A,function I(F,q,H,K,W,X){const tt=O(F,q,H,K,W,X);return tt!==void 0?!!tt:u(F,q,I,X)},new Map)}function u(x,A,O,I){if(A===x)return!0;switch(typeof A){case"object":return f(x,A,O,I);case"function":return Object.keys(A).length>0?u(x,{...A},O,I):i.eq(x,A);default:return e.isObject(x)?typeof A=="string"?A==="":!0:i.eq(x,A)}}function f(x,A,O,I){if(A==null)return!0;if(Array.isArray(A))return y(x,A,O,I);if(A instanceof Map)return a(x,A,O,I);if(A instanceof Set)return _(x,A,O,I);const F=Object.keys(A);if(x==null)return F.length===0;if(F.length===0)return!0;if(I?.has(A))return I.get(A)===x;I?.set(A,x);try{for(let q=0;q<F.length;q++){const H=F[q];if(!n.isPrimitive(x)&&!(H in x)||A[H]===void 0&&x[H]!==void 0||A[H]===null&&x[H]!==null||!O(x[H],A[H],H,x,A,I))return!1}return!0}finally{I?.delete(A)}}function a(x,A,O,I){if(A.size===0)return!0;if(!(x instanceof Map))return!1;for(const[F,q]of A.entries()){const H=x.get(F);if(O(H,q,F,x,A,I)===!1)return!1}return!0}function y(x,A,O,I){if(A.length===0)return!0;if(!Array.isArray(x))return!1;const F=new Set;for(let q=0;q<A.length;q++){const H=A[q];let K=!1;for(let W=0;W<x.length;W++){if(F.has(W))continue;const X=x[W];let tt=!1;if(O(X,H,q,x,A,I)&&(tt=!0),tt){F.add(W),K=!0;break}}if(!K)return!1}return!0}function _(x,A,O,I){return A.size===0?!0:x instanceof Set?y([...x],[...A],O,I):!1}t.isMatchWith=r,t.isSetMatch=_})(Yb)),Yb}var $A;function PD(){return $A||($A=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K8();function n(i,r){return e.isMatchWith(i,r,()=>{})}t.isMatch=n})(Wb)),Wb}var Jb={},t1={},e1={},qA;function Q8(){return qA||(qA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}t.getSymbols=e})(e1)),e1}var n1={},HA;function kD(){return HA||(HA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(n1)),n1}var i1={},ZA;function OD(){return ZA||(ZA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",i="[object Number]",r="[object Boolean]",u="[object Arguments]",f="[object Symbol]",a="[object Date]",y="[object Map]",_="[object Set]",x="[object Array]",A="[object Function]",O="[object ArrayBuffer]",I="[object Object]",F="[object Error]",q="[object DataView]",H="[object Uint8Array]",K="[object Uint8ClampedArray]",W="[object Uint16Array]",X="[object Uint32Array]",tt="[object BigUint64Array]",Q="[object Int8Array]",at="[object Int16Array]",ht="[object Int32Array]",ot="[object BigInt64Array]",ct="[object Float32Array]",xt="[object Float64Array]";t.argumentsTag=u,t.arrayBufferTag=O,t.arrayTag=x,t.bigInt64ArrayTag=ot,t.bigUint64ArrayTag=tt,t.booleanTag=r,t.dataViewTag=q,t.dateTag=a,t.errorTag=F,t.float32ArrayTag=ct,t.float64ArrayTag=xt,t.functionTag=A,t.int16ArrayTag=at,t.int32ArrayTag=ht,t.int8ArrayTag=Q,t.mapTag=y,t.numberTag=i,t.objectTag=I,t.regexpTag=e,t.setTag=_,t.stringTag=n,t.symbolTag=f,t.uint16ArrayTag=W,t.uint32ArrayTag=X,t.uint8ArrayTag=H,t.uint8ClampedArrayTag=K})(i1)),i1}var r1={},GA;function J8(){return GA||(GA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(r1)),r1}var WA;function DD(){return WA||(WA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Q8(),n=kD(),i=OD(),r=ED(),u=J8();function f(x,A){return a(x,void 0,x,new Map,A)}function a(x,A,O,I=new Map,F=void 0){const q=F?.(x,A,O,I);if(q!==void 0)return q;if(r.isPrimitive(x))return x;if(I.has(x))return I.get(x);if(Array.isArray(x)){const H=new Array(x.length);I.set(x,H);for(let K=0;K<x.length;K++)H[K]=a(x[K],K,O,I,F);return Object.hasOwn(x,"index")&&(H.index=x.index),Object.hasOwn(x,"input")&&(H.input=x.input),H}if(x instanceof Date)return new Date(x.getTime());if(x instanceof RegExp){const H=new RegExp(x.source,x.flags);return H.lastIndex=x.lastIndex,H}if(x instanceof Map){const H=new Map;I.set(x,H);for(const[K,W]of x)H.set(K,a(W,K,O,I,F));return H}if(x instanceof Set){const H=new Set;I.set(x,H);for(const K of x)H.add(a(K,void 0,O,I,F));return H}if(typeof Buffer<"u"&&Buffer.isBuffer(x))return x.subarray();if(u.isTypedArray(x)){const H=new(Object.getPrototypeOf(x)).constructor(x.length);I.set(x,H);for(let K=0;K<x.length;K++)H[K]=a(x[K],K,O,I,F);return H}if(x instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&x instanceof SharedArrayBuffer)return x.slice(0);if(x instanceof DataView){const H=new DataView(x.buffer.slice(0),x.byteOffset,x.byteLength);return I.set(x,H),y(H,x,O,I,F),H}if(typeof File<"u"&&x instanceof File){const H=new File([x],x.name,{type:x.type});return I.set(x,H),y(H,x,O,I,F),H}if(typeof Blob<"u"&&x instanceof Blob){const H=new Blob([x],{type:x.type});return I.set(x,H),y(H,x,O,I,F),H}if(x instanceof Error){const H=new x.constructor;return I.set(x,H),H.message=x.message,H.name=x.name,H.stack=x.stack,H.cause=x.cause,y(H,x,O,I,F),H}if(x instanceof Boolean){const H=new Boolean(x.valueOf());return I.set(x,H),y(H,x,O,I,F),H}if(x instanceof Number){const H=new Number(x.valueOf());return I.set(x,H),y(H,x,O,I,F),H}if(x instanceof String){const H=new String(x.valueOf());return I.set(x,H),y(H,x,O,I,F),H}if(typeof x=="object"&&_(x)){const H=Object.create(Object.getPrototypeOf(x));return I.set(x,H),y(H,x,O,I,F),H}return x}function y(x,A,O=x,I,F){const q=[...Object.keys(A),...e.getSymbols(A)];for(let H=0;H<q.length;H++){const K=q[H],W=Object.getOwnPropertyDescriptor(x,K);(W==null||W.writable)&&(x[K]=a(A[K],K,O,I,F))}}function _(x){switch(n.getTag(x)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=f,t.cloneDeepWithImpl=a,t.copyProperties=y})(t1)),t1}var YA;function tU(){return YA||(YA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DD();function n(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}t.cloneDeep=n})(Jb)),Jb}var XA;function eU(){return XA||(XA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PD(),n=tU();function i(r){return r=n.cloneDeep(r),u=>e.isMatch(u,r)}t.matches=i})(Gb)),Gb}var a1={},s1={},o1={},KA;function nU(){return KA||(KA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DD(),n=OD();function i(r,u){return e.cloneDeepWith(r,(f,a,y,_)=>{const x=u?.(f,a,y,_);if(x!==void 0)return x;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case n.numberTag:case n.stringTag:case n.booleanTag:{const A=new r.constructor(r?.valueOf());return e.copyProperties(A,r),A}case n.argumentsTag:{const A={};return e.copyProperties(A,r),A.length=r.length,A[Symbol.iterator]=r[Symbol.iterator],A}default:return}})}t.cloneDeepWith=i})(o1)),o1}var QA;function iU(){return QA||(QA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nU();function n(i){return e.cloneDeepWith(i)}t.cloneDeep=n})(s1)),s1}var l1={},u1={},JA;function zD(){return JA||(JA=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}t.isIndex=n})(u1)),u1}var c1={},tE;function rU(){return tE||(tE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kD();function n(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}t.isArguments=n})(c1)),c1}var eE;function aU(){return eE||(eE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bD(),n=zD(),i=rU(),r=NS();function u(f,a){let y;if(Array.isArray(a)?y=a:typeof a=="string"&&e.isDeepKey(a)&&f?.[a]==null?y=r.toPath(a):y=[a],y.length===0)return!1;let _=f;for(let x=0;x<y.length;x++){const A=y[x];if((_==null||!Object.hasOwn(_,A))&&!((Array.isArray(_)||i.isArguments(_))&&n.isIndex(A)&&A<_.length))return!1;_=_[A]}return!0}t.has=u})(l1)),l1}var nE;function sU(){return nE||(nE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PD(),n=BS(),i=iU(),r=jS(),u=aU();function f(a,y){switch(typeof a){case"object":{Object.is(a?.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return y=i.cloneDeep(y),function(_){const x=r.get(_,a);return x===void 0?u.has(_,a):y===void 0?x===void 0:e.isMatch(x,y)}}t.matchesProperty=f})(a1)),a1}var iE;function oU(){return iE||(iE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MD(),n=X8(),i=eU(),r=sU();function u(f){if(f==null)return e.identity;switch(typeof f){case"function":return f;case"object":return Array.isArray(f)&&f.length===2?r.matchesProperty(f[0],f[1]):i.matches(f);case"string":case"symbol":case"number":return n.property(f)}}t.iteratee=u})(Hb)),Hb}var rE;function lU(){return rE||(rE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Z8(),n=MD(),i=Y8(),r=oU();function u(f,a=n.identity){return i.isArrayLikeObject(f)?e.uniqBy(Array.from(f),r.iteratee(a)):[]}t.uniqBy=u})(Nb)),Nb}var h1,aE;function uU(){return aE||(aE=1,h1=lU().uniqBy),h1}var cU=uU();const sE=Pu(cU);function hU(t,e,n){return e===!0?sE(t,n):typeof e=="function"?sE(t,e):t}var f1={exports:{}},d1={},p1={exports:{}},m1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function fU(){if(oE)return m1;oE=1;var t=Om();function e(A,O){return A===O&&(A!==0||1/A===1/O)||A!==A&&O!==O}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,u=t.useLayoutEffect,f=t.useDebugValue;function a(A,O){var I=O(),F=i({inst:{value:I,getSnapshot:O}}),q=F[0].inst,H=F[1];return u(function(){q.value=I,q.getSnapshot=O,y(q)&&H({inst:q})},[A,I,O]),r(function(){return y(q)&&H({inst:q}),A(function(){y(q)&&H({inst:q})})},[A]),f(I),I}function y(A){var O=A.getSnapshot;A=A.value;try{var I=O();return!n(A,I)}catch{return!0}}function _(A,O){return O()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_:a;return m1.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:x,m1}var lE;function dU(){return lE||(lE=1,p1.exports=fU()),p1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function pU(){if(uE)return d1;uE=1;var t=Om(),e=dU();function n(_,x){return _===x&&(_!==0||1/_===1/x)||_!==_&&x!==x}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,u=t.useRef,f=t.useEffect,a=t.useMemo,y=t.useDebugValue;return d1.useSyncExternalStoreWithSelector=function(_,x,A,O,I){var F=u(null);if(F.current===null){var q={hasValue:!1,value:null};F.current=q}else q=F.current;F=a(function(){function K(at){if(!W){if(W=!0,X=at,at=O(at),I!==void 0&&q.hasValue){var ht=q.value;if(I(ht,at))return tt=ht}return tt=at}if(ht=tt,i(X,at))return ht;var ot=O(at);return I!==void 0&&I(ht,ot)?(X=at,ht):(X=at,tt=ot)}var W=!1,X,tt,Q=A===void 0?null:A;return[function(){return K(x())},Q===null?void 0:function(){return K(Q())}]},[x,A,O,I]);var H=r(_,F[0],F[1]);return f(function(){q.hasValue=!0,q.value=H},[H]),y(H),H},d1}var cE;function mU(){return cE||(cE=1,f1.exports=pU()),f1.exports}var gU=mU(),$S=G.createContext(null),yU=t=>t,Ts=()=>{var t=G.useContext($S);return t?t.store.dispatch:yU},Hv=()=>{},_U=()=>Hv,vU=(t,e)=>t===e;function En(t){var e=G.useContext($S);return gU.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:_U,e?e.store.getState:Hv,e?e.store.getState:Hv,e?t:Hv,vU)}function xU(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function bU(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function wU(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var hE=t=>Array.isArray(t)?t:[t];function SU(t){const e=Array.isArray(t[0])?t[0]:t;return wU(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function TU(t,e){const n=[],{length:i}=t;for(let r=0;r<i;r++)n.push(t[r].apply(null,e));return n}var MU=class{constructor(t){this.value=t}deref(){return this.value}},AU=typeof WeakRef<"u"?WeakRef:MU,EU=0,fE=1;function Ev(){return{s:EU,v:void 0,o:null,p:null}}function LD(t,e={}){let n=Ev();const{resultEqualityCheck:i}=e;let r,u=0;function f(){let a=n;const{length:y}=arguments;for(let A=0,O=y;A<O;A++){const I=arguments[A];if(typeof I=="function"||typeof I=="object"&&I!==null){let F=a.o;F===null&&(a.o=F=new WeakMap);const q=F.get(I);q===void 0?(a=Ev(),F.set(I,a)):a=q}else{let F=a.p;F===null&&(a.p=F=new Map);const q=F.get(I);q===void 0?(a=Ev(),F.set(I,a)):a=q}}const _=a;let x;if(a.s===fE)x=a.v;else if(x=t.apply(null,arguments),u++,i){const A=r?.deref?.()??r;A!=null&&i(A,x)&&(x=A,u!==0&&u--),r=typeof x=="object"&&x!==null||typeof x=="function"?new AU(x):x}return _.s=fE,_.v=x,x}return f.clearCache=()=>{n=Ev(),f.resetResultsCount()},f.resultsCount=()=>u,f.resetResultsCount=()=>{u=0},f}function CU(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...r)=>{let u=0,f=0,a,y={},_=r.pop();typeof _=="object"&&(y=_,_=r.pop()),xU(_,`createSelector expects an output function after the inputs, but received: [${typeof _}]`);const x={...n,...y},{memoize:A,memoizeOptions:O=[],argsMemoize:I=LD,argsMemoizeOptions:F=[]}=x,q=hE(O),H=hE(F),K=SU(r),W=A(function(){return u++,_.apply(null,arguments)},...q),X=I(function(){f++;const Q=TU(K,arguments);return a=W.apply(null,Q),a},...H);return Object.assign(X,{resultFunc:_,memoizedResultFunc:W,dependencies:K,dependencyRecomputations:()=>f,resetDependencyRecomputations:()=>{f=0},lastResult:()=>a,recomputations:()=>u,resetRecomputations:()=>{u=0},memoize:A,argsMemoize:I})};return Object.assign(i,{withTypes:()=>i}),i}var we=CU(LD),PU=Object.assign((t,e=we)=>{bU(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(u=>t[u]);return e(i,(...u)=>u.reduce((f,a,y)=>(f[n[y]]=a,f),{}))},{withTypes:()=>PU}),g1={},y1={},_1={},dE;function kU(){return dE||(dE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,r,u)=>{if(i!==r){const f=e(i),a=e(r);if(f===a&&f===0){if(i<r)return u==="desc"?1:-1;if(i>r)return u==="desc"?-1:1}return u==="desc"?a-f:f-a}return 0};t.compareValues=n})(_1)),_1}var v1={},x1={},pE;function ID(){return pE||(pE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(x1)),x1}var mE;function OU(){return mE||(mE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ID(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(u,f){return Array.isArray(u)?!1:typeof u=="number"||typeof u=="boolean"||u==null||e.isSymbol(u)?!0:typeof u=="string"&&(i.test(u)||!n.test(u))||f!=null&&Object.hasOwn(f,u)}t.isKey=r})(v1)),v1}var gE;function DU(){return gE||(gE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kU(),n=OU(),i=NS();function r(u,f,a,y){if(u==null)return[];a=y?void 0:a,Array.isArray(u)||(u=Object.values(u)),Array.isArray(f)||(f=f==null?[null]:[f]),f.length===0&&(f=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(I=>String(I));const _=(I,F)=>{let q=I;for(let H=0;H<F.length&&q!=null;++H)q=q[F[H]];return q},x=(I,F)=>F==null||I==null?F:typeof I=="object"&&"key"in I?Object.hasOwn(F,I.key)?F[I.key]:_(F,I.path):typeof I=="function"?I(F):Array.isArray(I)?_(F,I):typeof F=="object"?F[I]:F,A=f.map(I=>(Array.isArray(I)&&I.length===1&&(I=I[0]),I==null||typeof I=="function"||Array.isArray(I)||n.isKey(I)?I:{key:I,path:i.toPath(I)}));return u.map(I=>({original:I,criteria:A.map(F=>x(F,I))})).slice().sort((I,F)=>{for(let q=0;q<A.length;q++){const H=e.compareValues(I.criteria[q],F.criteria[q],a[q]);if(H!==0)return H}return 0}).map(I=>I.original)}t.orderBy=r})(y1)),y1}var b1={},yE;function zU(){return yE||(yE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i=1){const r=[],u=Math.floor(i),f=(a,y)=>{for(let _=0;_<a.length;_++){const x=a[_];Array.isArray(x)&&y<u?f(x,y+1):r.push(x)}};return f(n,0),r}t.flatten=e})(b1)),b1}var w1={},_E;function RD(){return _E||(_E=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zD(),n=VS(),i=AD(),r=CD();function u(f,a,y){return i.isObject(y)&&(typeof a=="number"&&n.isArrayLike(y)&&e.isIndex(a)&&a<y.length||typeof a=="string"&&a in y)?r.eq(y[a],f):!1}t.isIterateeCall=u})(w1)),w1}var vE;function LU(){return vE||(vE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DU(),n=zU(),i=RD();function r(u,...f){const a=f.length;return a>1&&i.isIterateeCall(u,f[0],f[1])?f=[]:a>2&&i.isIterateeCall(f[0],f[1],f[2])&&(f=[f[0]]),e.orderBy(u,n.flatten(f),["asc"])}t.sortBy=r})(g1)),g1}var S1,xE;function IU(){return xE||(xE=1,S1=LU().sortBy),S1}var RU=IU();const lx=Pu(RU);var BD=t=>t.legend.settings,BU=t=>t.legend.size,NU=t=>t.legend.payload;we([NU,BD],(t,e)=>{var{itemSorter:n}=e,i=t.flat(1);return n?lx(i,n):i});var Cv=1;function jU(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=G.useState({height:0,left:0,top:0,width:0}),i=G.useCallback(r=>{if(r!=null){var u=r.getBoundingClientRect(),f={height:u.height,left:u.left,top:u.top,width:u.width};(Math.abs(f.height-e.height)>Cv||Math.abs(f.left-e.left)>Cv||Math.abs(f.top-e.top)>Cv||Math.abs(f.width-e.width)>Cv)&&n({height:f.height,left:f.left,top:f.top,width:f.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,i]}function qs(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var FU=typeof Symbol=="function"&&Symbol.observable||"@@observable",bE=FU,T1=()=>Math.random().toString(36).substring(7).split("").join("."),UU={INIT:`@@redux/INIT${T1()}`,REPLACE:`@@redux/REPLACE${T1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${T1()}`},u0=UU;function qS(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function ND(t,e,n){if(typeof t!="function")throw new Error(qs(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(qs(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(qs(1));return n(ND)(t,e)}let i=t,r=e,u=new Map,f=u,a=0,y=!1;function _(){f===u&&(f=new Map,u.forEach((H,K)=>{f.set(K,H)}))}function x(){if(y)throw new Error(qs(3));return r}function A(H){if(typeof H!="function")throw new Error(qs(4));if(y)throw new Error(qs(5));let K=!0;_();const W=a++;return f.set(W,H),function(){if(K){if(y)throw new Error(qs(6));K=!1,_(),f.delete(W),u=null}}}function O(H){if(!qS(H))throw new Error(qs(7));if(typeof H.type>"u")throw new Error(qs(8));if(typeof H.type!="string")throw new Error(qs(17));if(y)throw new Error(qs(9));try{y=!0,r=i(r,H)}finally{y=!1}return(u=f).forEach(W=>{W()}),H}function I(H){if(typeof H!="function")throw new Error(qs(10));i=H,O({type:u0.REPLACE})}function F(){const H=A;return{subscribe(K){if(typeof K!="object"||K===null)throw new Error(qs(11));function W(){const tt=K;tt.next&&tt.next(x())}return W(),{unsubscribe:H(W)}},[bE](){return this}}}return O({type:u0.INIT}),{dispatch:O,subscribe:A,getState:x,replaceReducer:I,[bE]:F}}function VU(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:u0.INIT})>"u")throw new Error(qs(12));if(typeof n(void 0,{type:u0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(qs(13))})}function jD(t){const e=Object.keys(t),n={};for(let u=0;u<e.length;u++){const f=e[u];typeof t[f]=="function"&&(n[f]=t[f])}const i=Object.keys(n);let r;try{VU(n)}catch(u){r=u}return function(f={},a){if(r)throw r;let y=!1;const _={};for(let x=0;x<i.length;x++){const A=i[x],O=n[A],I=f[A],F=O(I,a);if(typeof F>"u")throw a&&a.type,new Error(qs(14));_[A]=F,y=y||F!==I}return y=y||i.length!==Object.keys(f).length,y?_:f}}function c0(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function $U(...t){return e=>(n,i)=>{const r=e(n,i);let u=()=>{throw new Error(qs(15))};const f={getState:r.getState,dispatch:(y,..._)=>u(y,..._)},a=t.map(y=>y(f));return u=c0(...a)(r.dispatch),{...r,dispatch:u}}}function FD(t){return qS(t)&&"type"in t&&typeof t.type=="string"}var UD=Symbol.for("immer-nothing"),wE=Symbol.for("immer-draftable"),Kl=Symbol.for("immer-state");function uc(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ty=Object.getPrototypeOf;function Kd(t){return!!t&&!!t[Kl]}function Ih(t){return t?VD(t)||Array.isArray(t)||!!t[wE]||!!t.constructor?.[wE]||$y(t)||cx(t):!1}var qU=Object.prototype.constructor.toString(),SE=new WeakMap;function VD(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=SE.get(n);return i===void 0&&(i=Function.toString.call(n),SE.set(n,i)),i===qU}function h0(t,e,n=!0){ux(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function ux(t){const e=t[Kl];return e?e.type_:Array.isArray(t)?1:$y(t)?2:cx(t)?3:0}function Aw(t,e){return ux(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function $D(t,e,n){const i=ux(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function HU(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function $y(t){return t instanceof Map}function cx(t){return t instanceof Set}function Bd(t){return t.copy_||t.base_}function Ew(t,e){if($y(t))return new Map(t);if(cx(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=VD(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[Kl];let r=Reflect.ownKeys(i);for(let u=0;u<r.length;u++){const f=r[u],a=i[f];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(i[f]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[f]})}return Object.create(Ty(t),i)}else{const i=Ty(t);if(i!==null&&n)return{...t};const r=Object.create(i);return Object.assign(r,t)}}function HS(t,e=!1){return hx(t)||Kd(t)||!Ih(t)||(ux(t)>1&&Object.defineProperties(t,{set:Pv,add:Pv,clear:Pv,delete:Pv}),Object.freeze(t),e&&Object.values(t).forEach(n=>HS(n,!0))),t}function ZU(){uc(2)}var Pv={value:ZU};function hx(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var GU={};function Qd(t){const e=GU[t];return e||uc(0,t),e}var My;function qD(){return My}function WU(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function TE(t,e){e&&(Qd("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Cw(t){Pw(t),t.drafts_.forEach(YU),t.drafts_=null}function Pw(t){t===My&&(My=t.parent_)}function ME(t){return My=WU(My,t)}function YU(t){const e=t[Kl];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function AE(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Kl].modified_&&(Cw(e),uc(4)),Ih(t)&&(t=f0(e,t),e.parent_||d0(e,t)),e.patches_&&Qd("Patches").generateReplacementPatches_(n[Kl].base_,t,e.patches_,e.inversePatches_)):t=f0(e,n,[]),Cw(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==UD?t:void 0}function f0(t,e,n){if(hx(e))return e;const i=t.immer_.shouldUseStrictIteration(),r=e[Kl];if(!r)return h0(e,(u,f)=>EE(t,r,e,u,f,n),i),e;if(r.scope_!==t)return e;if(!r.modified_)return d0(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const u=r.copy_;let f=u,a=!1;r.type_===3&&(f=new Set(u),u.clear(),a=!0),h0(f,(y,_)=>EE(t,r,u,y,_,n,a),i),d0(t,u,!1),n&&t.patches_&&Qd("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function EE(t,e,n,i,r,u,f){if(r==null||typeof r!="object"&&!f)return;const a=hx(r);if(!(a&&!f)){if(Kd(r)){const y=u&&e&&e.type_!==3&&!Aw(e.assigned_,i)?u.concat(i):void 0,_=f0(t,r,y);if($D(n,i,_),Kd(_))t.canAutoFreeze_=!1;else return}else f&&n.add(r);if(Ih(r)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&a)return;f0(t,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&($y(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&d0(t,r)}}}function d0(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&HS(e,n)}function XU(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:qD(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,u=ZS;n&&(r=[i],u=Ay);const{revoke:f,proxy:a}=Proxy.revocable(r,u);return i.draft_=a,i.revoke_=f,a}var ZS={get(t,e){if(e===Kl)return t;const n=Bd(t);if(!Aw(n,e))return KU(t,n,e);const i=n[e];return t.finalized_||!Ih(i)?i:i===M1(t.base_,e)?(A1(t),t.copy_[e]=Ow(i,t)):i},has(t,e){return e in Bd(t)},ownKeys(t){return Reflect.ownKeys(Bd(t))},set(t,e,n){const i=HD(Bd(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=M1(Bd(t),e),u=r?.[Kl];if(u&&u.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(HU(n,r)&&(n!==void 0||Aw(t.base_,e)))return!0;A1(t),kw(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return M1(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,A1(t),kw(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Bd(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){uc(11)},getPrototypeOf(t){return Ty(t.base_)},setPrototypeOf(){uc(12)}},Ay={};h0(ZS,(t,e)=>{Ay[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Ay.deleteProperty=function(t,e){return Ay.set.call(this,t,e,void 0)};Ay.set=function(t,e,n){return ZS.set.call(this,t[0],e,n,t[0])};function M1(t,e){const n=t[Kl];return(n?Bd(n):t)[e]}function KU(t,e,n){const i=HD(e,n);return i?"value"in i?i.value:i.get?.call(t.draft_):void 0}function HD(t,e){if(!(e in t))return;let n=Ty(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Ty(n)}}function kw(t){t.modified_||(t.modified_=!0,t.parent_&&kw(t.parent_))}function A1(t){t.copy_||(t.copy_=Ew(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var QU=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const u=n;n=e;const f=this;return function(y=u,..._){return f.produce(y,x=>n.call(this,x,..._))}}typeof n!="function"&&uc(6),i!==void 0&&typeof i!="function"&&uc(7);let r;if(Ih(e)){const u=ME(this),f=Ow(e,void 0);let a=!0;try{r=n(f),a=!1}finally{a?Cw(u):Pw(u)}return TE(u,i),AE(r,u)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===UD&&(r=void 0),this.autoFreeze_&&HS(r,!0),i){const u=[],f=[];Qd("Patches").generateReplacementPatches_(e,r,u,f),i(u,f)}return r}else uc(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(f,...a)=>this.produceWithPatches(f,y=>e(y,...a));let i,r;return[this.produce(e,n,(f,a)=>{i=f,r=a}),i,r]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ih(t)||uc(8),Kd(t)&&(t=Oh(t));const e=ME(this),n=Ow(t,void 0);return n[Kl].isManual_=!0,Pw(e),n}finishDraft(t,e){const n=t&&t[Kl];(!n||!n.isManual_)&&uc(9);const{scope_:i}=n;return TE(i,e),AE(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const i=Qd("Patches").applyPatches_;return Kd(t)?i(t,e):this.produce(t,r=>i(r,e))}};function Ow(t,e){const n=$y(t)?Qd("MapSet").proxyMap_(t,e):cx(t)?Qd("MapSet").proxySet_(t,e):XU(t,e);return(e?e.scope_:qD()).drafts_.push(n),n}function Oh(t){return Kd(t)||uc(10,t),ZD(t)}function ZD(t){if(!Ih(t)||hx(t))return t;const e=t[Kl];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Ew(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=Ew(t,!0);return h0(n,(r,u)=>{$D(n,r,ZD(u))},i),e&&(e.finalized_=!1),n}var Dw=new QU,GD=Dw.produce,JU=Dw.setUseStrictIteration.bind(Dw);function WD(t){return({dispatch:n,getState:i})=>r=>u=>typeof u=="function"?u(n,i,t):r(u)}var tV=WD(),eV=WD,nV=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?c0:c0.apply(null,arguments)};function Eu(t,e){function n(...i){if(e){let r=e(...i);if(!r)throw new Error(Xl(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>FD(i)&&i.type===t,n}var YD=class ly extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ly.prototype)}static get[Symbol.species](){return ly}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new ly(...e[0].concat(this)):new ly(...e.concat(this))}};function CE(t){return Ih(t)?GD(t,()=>{}):t}function kv(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function iV(t){return typeof t=="boolean"}var rV=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:u=!0}=e??{};let f=new YD;return n&&(iV(n)?f.push(tV):f.push(eV(n.extraArgument))),f},XD="RTK_autoBatch",os=()=>t=>({payload:t,meta:{[XD]:!0}}),PE=t=>e=>{setTimeout(e,t)},KD=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let r=!0,u=!1,f=!1;const a=new Set,y=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:PE(10):t.type==="callback"?t.queueNotification:PE(t.timeout),_=()=>{f=!1,u&&(u=!1,a.forEach(x=>x()))};return Object.assign({},i,{subscribe(x){const A=()=>r&&x(),O=i.subscribe(A);return a.add(x),()=>{O(),a.delete(x)}},dispatch(x){try{return r=!x?.meta?.[XD],u=!r,u&&(f||(f=!0,y(_))),i.dispatch(x)}finally{r=!0}}})},aV=t=>function(n){const{autoBatch:i=!0}=n??{};let r=new YD(t);return i&&r.push(KD(typeof i=="object"?i:void 0)),r};function sV(t){const e=rV(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:u=void 0,enhancers:f=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(qS(n))a=jD(n);else throw new Error(Xl(1));let y;typeof i=="function"?y=i(e):y=e();let _=c0;r&&(_=nV({trace:!1,...typeof r=="object"&&r}));const x=$U(...y),A=aV(x);let O=typeof f=="function"?f(A):A();const I=_(...O);return ND(a,u,I)}function QD(t){const e={},n=[];let i;const r={addCase(u,f){const a=typeof u=="string"?u:u.type;if(!a)throw new Error(Xl(28));if(a in e)throw new Error(Xl(29));return e[a]=f,r},addAsyncThunk(u,f){return f.pending&&(e[u.pending.type]=f.pending),f.rejected&&(e[u.rejected.type]=f.rejected),f.fulfilled&&(e[u.fulfilled.type]=f.fulfilled),f.settled&&n.push({matcher:u.settled,reducer:f.settled}),r},addMatcher(u,f){return n.push({matcher:u,reducer:f}),r},addDefaultCase(u){return i=u,r}};return t(r),[e,n,i]}JU(!1);function oV(t){return typeof t=="function"}function lV(t,e){let[n,i,r]=QD(e),u;if(oV(t))u=()=>CE(t());else{const a=CE(t);u=()=>a}function f(a=u(),y){let _=[n[y.type],...i.filter(({matcher:x})=>x(y)).map(({reducer:x})=>x)];return _.filter(x=>!!x).length===0&&(_=[r]),_.reduce((x,A)=>{if(A)if(Kd(x)){const I=A(x,y);return I===void 0?x:I}else{if(Ih(x))return GD(x,O=>A(O,y));{const O=A(x,y);if(O===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return O}}return x},a)}return f.getInitialState=u,f}var uV="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",cV=(t=21)=>{let e="",n=t;for(;n--;)e+=uV[Math.random()*64|0];return e},hV=Symbol.for("rtk-slice-createasyncthunk");function fV(t,e){return`${t}/${e}`}function dV({creators:t}={}){const e=t?.asyncThunk?.[hV];return function(i){const{name:r,reducerPath:u=r}=i;if(!r)throw new Error(Xl(11));const f=(typeof i.reducers=="function"?i.reducers(mV()):i.reducers)||{},a=Object.keys(f),y={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},_={addCase(X,tt){const Q=typeof X=="string"?X:X.type;if(!Q)throw new Error(Xl(12));if(Q in y.sliceCaseReducersByType)throw new Error(Xl(13));return y.sliceCaseReducersByType[Q]=tt,_},addMatcher(X,tt){return y.sliceMatchers.push({matcher:X,reducer:tt}),_},exposeAction(X,tt){return y.actionCreators[X]=tt,_},exposeCaseReducer(X,tt){return y.sliceCaseReducersByName[X]=tt,_}};a.forEach(X=>{const tt=f[X],Q={reducerName:X,type:fV(r,X),createNotation:typeof i.reducers=="function"};yV(tt)?vV(Q,tt,_,e):gV(Q,tt,_)});function x(){const[X={},tt=[],Q=void 0]=typeof i.extraReducers=="function"?QD(i.extraReducers):[i.extraReducers],at={...X,...y.sliceCaseReducersByType};return lV(i.initialState,ht=>{for(let ot in at)ht.addCase(ot,at[ot]);for(let ot of y.sliceMatchers)ht.addMatcher(ot.matcher,ot.reducer);for(let ot of tt)ht.addMatcher(ot.matcher,ot.reducer);Q&&ht.addDefaultCase(Q)})}const A=X=>X,O=new Map,I=new WeakMap;let F;function q(X,tt){return F||(F=x()),F(X,tt)}function H(){return F||(F=x()),F.getInitialState()}function K(X,tt=!1){function Q(ht){let ot=ht[X];return typeof ot>"u"&&tt&&(ot=kv(I,Q,H)),ot}function at(ht=A){const ot=kv(O,tt,()=>new WeakMap);return kv(ot,ht,()=>{const ct={};for(const[xt,wt]of Object.entries(i.selectors??{}))ct[xt]=pV(wt,ht,()=>kv(I,ht,H),tt);return ct})}return{reducerPath:X,getSelectors:at,get selectors(){return at(Q)},selectSlice:Q}}const W={name:r,reducer:q,actions:y.actionCreators,caseReducers:y.sliceCaseReducersByName,getInitialState:H,...K(u),injectInto(X,{reducerPath:tt,...Q}={}){const at=tt??u;return X.inject({reducerPath:at,reducer:q},Q),{...W,...K(at,!0)}}};return W}}function pV(t,e,n,i){function r(u,...f){let a=e(u);return typeof a>"u"&&i&&(a=n()),t(a,...f)}return r.unwrapped=t,r}var xl=dV();function mV(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function gV({type:t,reducerName:e,createNotation:n},i,r){let u,f;if("reducer"in i){if(n&&!_V(i))throw new Error(Xl(17));u=i.reducer,f=i.prepare}else u=i;r.addCase(t,u).exposeCaseReducer(e,u).exposeAction(e,f?Eu(t,f):Eu(t))}function yV(t){return t._reducerDefinitionType==="asyncThunk"}function _V(t){return t._reducerDefinitionType==="reducerWithPrepare"}function vV({type:t,reducerName:e},n,i,r){if(!r)throw new Error(Xl(18));const{payloadCreator:u,fulfilled:f,pending:a,rejected:y,settled:_,options:x}=n,A=r(t,u,x);i.exposeAction(e,A),f&&i.addCase(A.fulfilled,f),a&&i.addCase(A.pending,a),y&&i.addCase(A.rejected,y),_&&i.addMatcher(A.settled,_),i.exposeCaseReducer(e,{fulfilled:f||Ov,pending:a||Ov,rejected:y||Ov,settled:_||Ov})}function Ov(){}var xV="task",JD="listener",tz="completed",GS="cancelled",bV=`task-${GS}`,wV=`task-${tz}`,zw=`${JD}-${GS}`,SV=`${JD}-${tz}`,fx=class{constructor(t){this.code=t,this.message=`${xV} ${GS} (reason: ${t})`}name="TaskAbortError";message},WS=(t,e)=>{if(typeof t!="function")throw new TypeError(Xl(32))},p0=()=>{},ez=(t,e=p0)=>(t.catch(e),t),nz=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),qd=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Hd=t=>{if(t.aborted){const{reason:e}=t;throw new fx(e)}};function iz(t,e){let n=p0;return new Promise((i,r)=>{const u=()=>r(new fx(t.reason));if(t.aborted){u();return}n=nz(t,u),e.finally(()=>n()).then(i,r)}).finally(()=>{n=p0})}var TV=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof fx?"cancelled":"rejected",error:n}}finally{e?.()}},m0=t=>e=>ez(iz(t,e).then(n=>(Hd(t),n))),rz=t=>{const e=m0(t);return n=>e(new Promise(i=>setTimeout(i,n)))},{assign:xm}=Object,kE={},dx="listenerMiddleware",MV=(t,e)=>{const n=i=>nz(t,()=>qd(i,t.reason));return(i,r)=>{WS(i);const u=new AbortController;n(u);const f=TV(async()=>{Hd(t),Hd(u.signal);const a=await i({pause:m0(u.signal),delay:rz(u.signal),signal:u.signal});return Hd(u.signal),a},()=>qd(u,wV));return r?.autoJoin&&e.push(f.catch(p0)),{result:m0(t)(f),cancel(){qd(u,bV)}}}},AV=(t,e)=>{const n=async(i,r)=>{Hd(e);let u=()=>{};const a=[new Promise((y,_)=>{let x=t({predicate:i,effect:(A,O)=>{O.unsubscribe(),y([A,O.getState(),O.getOriginalState()])}});u=()=>{x(),_()}})];r!=null&&a.push(new Promise(y=>setTimeout(y,r,null)));try{const y=await iz(e,Promise.race(a));return Hd(e),y}finally{u()}};return(i,r)=>ez(n(i,r))},az=t=>{let{type:e,actionCreator:n,matcher:i,predicate:r,effect:u}=t;if(e)r=Eu(e).match;else if(n)e=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(Xl(21));return WS(u),{predicate:r,type:e,effect:u}},sz=xm(t=>{const{type:e,predicate:n,effect:i}=az(t);return{id:cV(),effect:i,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Xl(22))}}},{withTypes:()=>sz}),OE=(t,e)=>{const{type:n,effect:i,predicate:r}=az(e);return Array.from(t.values()).find(u=>(typeof n=="string"?u.type===n:u.predicate===r)&&u.effect===i)},Lw=t=>{t.pending.forEach(e=>{qd(e,zw)})},EV=(t,e)=>()=>{for(const n of e.keys())Lw(n);t.clear()},DE=(t,e,n)=>{try{t(e,n)}catch(i){setTimeout(()=>{throw i},0)}},oz=xm(Eu(`${dx}/add`),{withTypes:()=>oz}),CV=Eu(`${dx}/removeAll`),lz=xm(Eu(`${dx}/remove`),{withTypes:()=>lz}),PV=(...t)=>{console.error(`${dx}/error`,...t)},qy=(t={})=>{const e=new Map,n=new Map,i=I=>{const F=n.get(I)??0;n.set(I,F+1)},r=I=>{const F=n.get(I)??1;F===1?n.delete(I):n.set(I,F-1)},{extra:u,onError:f=PV}=t;WS(f);const a=I=>(I.unsubscribe=()=>e.delete(I.id),e.set(I.id,I),F=>{I.unsubscribe(),F?.cancelActive&&Lw(I)}),y=I=>{const F=OE(e,I)??sz(I);return a(F)};xm(y,{withTypes:()=>y});const _=I=>{const F=OE(e,I);return F&&(F.unsubscribe(),I.cancelActive&&Lw(F)),!!F};xm(_,{withTypes:()=>_});const x=async(I,F,q,H)=>{const K=new AbortController,W=AV(y,K.signal),X=[];try{I.pending.add(K),i(I),await Promise.resolve(I.effect(F,xm({},q,{getOriginalState:H,condition:(tt,Q)=>W(tt,Q).then(Boolean),take:W,delay:rz(K.signal),pause:m0(K.signal),extra:u,signal:K.signal,fork:MV(K.signal,X),unsubscribe:I.unsubscribe,subscribe:()=>{e.set(I.id,I)},cancelActiveListeners:()=>{I.pending.forEach((tt,Q,at)=>{tt!==K&&(qd(tt,zw),at.delete(tt))})},cancel:()=>{qd(K,zw),I.pending.delete(K)},throwIfCancelled:()=>{Hd(K.signal)}})))}catch(tt){tt instanceof fx||DE(f,tt,{raisedBy:"effect"})}finally{await Promise.all(X),qd(K,SV),r(I),I.pending.delete(K)}},A=EV(e,n);return{middleware:I=>F=>q=>{if(!FD(q))return F(q);if(oz.match(q))return y(q.payload);if(CV.match(q)){A();return}if(lz.match(q))return _(q.payload);let H=I.getState();const K=()=>{if(H===kE)throw new Error(Xl(23));return H};let W;try{if(W=F(q),e.size>0){const X=I.getState(),tt=Array.from(e.values());for(const Q of tt){let at=!1;try{at=Q.predicate(q,X,H)}catch(ht){at=!1,DE(f,ht,{raisedBy:"predicate"})}at&&x(Q,q,I,K)}}}finally{H=kE}return W},startListening:y,stopListening:_,clearListeners:A}};function Xl(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var kV={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},uz=xl({name:"chartLayout",initialState:kV,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,i,r,u;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,t.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,t.margin.left=(u=e.payload.left)!==null&&u!==void 0?u:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:OV,setLayout:DV,setChartSize:zV,setScale:LV}=uz.actions,IV=uz.reducer;function cz(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function zE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function gm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zE(Object(n),!0).forEach(function(i){RV(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function RV(t,e,n){return(e=BV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BV(t){var e=NV(t,"string");return typeof e=="symbol"?e:e+""}function NV(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qo(t,e,n){return Zs(t)||Zs(e)?n:$c(e)?ox(t,e,n):typeof e=="function"?e(t):n}var jV=(t,e,n)=>{if(e&&n){var{width:i,height:r}=n,{align:u,verticalAlign:f,layout:a}=e;if((a==="vertical"||a==="horizontal"&&f==="middle")&&u!=="center"&&xn(t[u]))return gm(gm({},t),{},{[u]:t[u]+(i||0)});if((a==="horizontal"||a==="vertical"&&u==="center")&&f!=="middle"&&xn(t[f]))return gm(gm({},t),{},{[f]:t[f]+(r||0)})}return t},Vh=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",hz=(t,e,n,i)=>{if(i)return t.map(a=>a.coordinate);var r,u,f=t.map(a=>(a.coordinate===e&&(r=!0),a.coordinate===n&&(u=!0),a.coordinate));return r||f.push(e),u||f.push(n),f},fz=(t,e,n)=>{if(!t)return null;var{duplicateDomain:i,type:r,range:u,scale:f,realScaleType:a,isCategorical:y,categoricalDomain:_,tickCount:x,ticks:A,niceTicks:O,axisType:I}=t;if(!f)return null;var F=a==="scaleBand"&&f.bandwidth?f.bandwidth()/2:2,q=r==="category"&&f.bandwidth?f.bandwidth()/F:0;if(q=I==="angleAxis"&&u&&u.length>=2?Tu(u[0]-u[1])*2*q:q,A||O){var H=(A||O||[]).map((K,W)=>{var X=i?i.indexOf(K):K;return{coordinate:f(X)+q,value:K,offset:q,index:W}});return H.filter(K=>!dc(K.coordinate))}return y&&_?_.map((K,W)=>({coordinate:f(K)+q,value:K,index:W,offset:q})):f.ticks&&x!=null?f.ticks(x).map((K,W)=>({coordinate:f(K)+q,value:K,offset:q,index:W})):f.domain().map((K,W)=>({coordinate:f(K)+q,value:i?i[K]:K,index:W,offset:q}))},LE=1e-4,FV=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,i=t.range(),r=Math.min(i[0],i[1])-LE,u=Math.max(i[0],i[1])+LE,f=t(e[0]),a=t(e[n-1]);(f<r||f>u||a<r||a>u)&&t.domain([e[0],e[n-1]])}},UV=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var r=0,u=0,f=0;f<e;++f){var a=dc(t[f][n][1])?t[f][n][0]:t[f][n][1];a>=0?(t[f][n][0]=r,t[f][n][1]=r+a,r=t[f][n][1]):(t[f][n][0]=u,t[f][n][1]=u+a,u=t[f][n][1])}},VV=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var r=0,u=0;u<e;++u){var f=dc(t[u][n][1])?t[u][n][0]:t[u][n][1];f>=0?(t[u][n][0]=r,t[u][n][1]=r+f,r=t[u][n][1]):(t[u][n][0]=0,t[u][n][1]=0)}},$V={sign:UV,expand:O8,none:Mm,silhouette:D8,wiggle:z8,positive:VV},qV=(t,e,n)=>{var i=$V[n],r=k8().keys(e).value((u,f)=>Number(Qo(u,f,0))).order(Mw).offset(i);return r(t)};function HV(t){return t==null?void 0:String(t)}function IE(t){var{axis:e,ticks:n,bandSize:i,entry:r,index:u,dataKey:f}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Zs(r[e.dataKey])){var a=SD(n,"value",r[e.dataKey]);if(a)return a.coordinate+i/2}return n[u]?n[u].coordinate+i/2:null}var y=Qo(r,Zs(f)?e.dataKey:f);return Zs(y)?null:e.scale(y)}var ZV=t=>{var e=t.flat(2).filter(xn);return[Math.min(...e),Math.max(...e)]},GV=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],WV=(t,e,n)=>{if(t!=null)return GV(Object.keys(t).reduce((i,r)=>{var u=t[r],{stackedData:f}=u,a=f.reduce((y,_)=>{var x=cz(_,e,n),A=ZV(x);return[Math.min(y[0],A[0]),Math.max(y[1],A[1])]},[1/0,-1/0]);return[Math.min(a[0],i[0]),Math.max(a[1],i[1])]},[1/0,-1/0]))},RE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,BE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,g0=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&e&&e.length>=2){for(var r=lx(e,x=>x.coordinate),u=1/0,f=1,a=r.length;f<a;f++){var y=r[f],_=r[f-1];u=Math.min((y.coordinate||0)-(_.coordinate||0),u)}return u===1/0?0:u}return n?void 0:0};function NE(t){var{tooltipEntrySettings:e,dataKey:n,payload:i,value:r,name:u}=t;return gm(gm({},e),{},{dataKey:n,payload:i,value:r,name:u})}function dz(t,e){if(t)return String(t);if(typeof e=="string")return e}var YV=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},XV=(t,e)=>e==="centric"?t.angle:t.radius,$h=t=>t.layout.width,qh=t=>t.layout.height,KV=t=>t.layout.scale,pz=t=>t.layout.margin,px=we(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),mx=we(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),QV="data-recharts-item-index",JV="data-recharts-item-data-key",Hy=60;function jE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Dv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jE(Object(n),!0).forEach(function(i){t$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function t$(t,e,n){return(e=e$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e$(t){var e=n$(t,"string");return typeof e=="symbol"?e:e+""}function n$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var i$=t=>t.brush.height;function r$(t){var e=mx(t);return e.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Hy;return n+r}return n},0)}function a$(t){var e=mx(t);return e.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Hy;return n+r}return n},0)}function s$(t){var e=px(t);return e.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function o$(t){var e=px(t);return e.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var Gs=we([$h,qh,pz,i$,r$,a$,s$,o$,BD,BU],(t,e,n,i,r,u,f,a,y,_)=>{var x={left:(n.left||0)+r,right:(n.right||0)+u},A={top:(n.top||0)+f,bottom:(n.bottom||0)+a},O=Dv(Dv({},A),x),I=O.bottom;O.bottom+=i,O=jV(O,y,_);var F=t-O.left-O.right,q=e-O.top-O.bottom;return Dv(Dv({brushBottom:I},O),{},{width:Math.max(F,0),height:Math.max(q,0)})}),l$=we(Gs,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),mz=we($h,qh,(t,e)=>({x:0,y:0,width:t,height:e})),u$=G.createContext(null),bl=()=>G.useContext(u$)!=null,gx=t=>t.brush,yx=we([gx,Gs,pz],(t,e,n)=>({height:t.height,x:xn(t.x)?t.x:e.left,y:xn(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:xn(t.width)?t.width:e.width})),E1={},C1={},P1={},FE;function c$(){return FE||(FE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i,{signal:r,edges:u}={}){let f,a=null;const y=u!=null&&u.includes("leading"),_=u==null||u.includes("trailing"),x=()=>{a!==null&&(n.apply(f,a),f=void 0,a=null)},A=()=>{_&&x(),q()};let O=null;const I=()=>{O!=null&&clearTimeout(O),O=setTimeout(()=>{O=null,A()},i)},F=()=>{O!==null&&(clearTimeout(O),O=null)},q=()=>{F(),f=void 0,a=null},H=()=>{x()},K=function(...W){if(r?.aborted)return;f=this,a=W;const X=O==null;I(),y&&X&&x()};return K.schedule=I,K.cancel=q,K.flush=H,r?.addEventListener("abort",q,{once:!0}),K}t.debounce=e})(P1)),P1}var UE;function h$(){return UE||(UE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=c$();function n(i,r=0,u={}){typeof u!="object"&&(u={});const{leading:f=!1,trailing:a=!0,maxWait:y}=u,_=Array(2);f&&(_[0]="leading"),a&&(_[1]="trailing");let x,A=null;const O=e.debounce(function(...q){x=i.apply(this,q),A=null},r,{edges:_}),I=function(...q){return y!=null&&(A===null&&(A=Date.now()),Date.now()-A>=y)?(x=i.apply(this,q),A=Date.now(),O.cancel(),O.schedule(),x):(O.apply(this,q),x)},F=()=>(O.flush(),x);return I.cancel=O.cancel,I.flush=F,I}t.debounce=n})(C1)),C1}var VE;function f$(){return VE||(VE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h$();function n(i,r=0,u={}){const{leading:f=!0,trailing:a=!0}=u;return e.debounce(i,r,{leading:f,maxWait:r,trailing:a})}t.throttle=n})(E1)),E1}var k1,$E;function d$(){return $E||($E=1,k1=f$().throttle),k1}var p$=d$();const m$=Pu(p$);var y0=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),u=2;u<i;u++)r[u-2]=arguments[u]},gz=(t,e,n)=>{var{width:i="100%",height:r="100%",aspect:u,maxHeight:f}=n,a=Lh(i)?t:Number(i),y=Lh(r)?e:Number(r);return u&&u>0&&(a?y=a/u:y&&(a=y*u),f&&y!=null&&y>f&&(y=f)),{calculatedWidth:a,calculatedHeight:y}},g$={width:0,height:0,overflow:"visible"},y$={width:0,overflowX:"visible"},_$={height:0,overflowY:"visible"},v$={},x$=t=>{var{width:e,height:n}=t,i=Lh(e),r=Lh(n);return i&&r?g$:i?y$:r?_$:v$};function b$(t){var{width:e,height:n,aspect:i}=t,r=e,u=n;return r===void 0&&u===void 0?(r="100%",u="100%"):r===void 0?r=i&&i>0?void 0:"100%":u===void 0&&(u=i&&i>0?void 0:"100%"),{width:r,height:u}}function ya(t){return Number.isFinite(t)}function qc(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Iw(){return Iw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Iw.apply(null,arguments)}function qE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function HE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qE(Object(n),!0).forEach(function(i){w$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function w$(t,e,n){return(e=S$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S$(t){var e=T$(t,"string");return typeof e=="symbol"?e:e+""}function T$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yz=G.createContext({width:-1,height:-1});function M$(t){return qc(t.width)&&qc(t.height)}function _z(t){var{children:e,width:n,height:i}=t,r=G.useMemo(()=>({width:n,height:i}),[n,i]);return M$(r)?G.createElement(yz.Provider,{value:r},e):null}var YS=()=>G.useContext(yz),A$=G.forwardRef((t,e)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:r,height:u,minWidth:f=0,minHeight:a,maxHeight:y,children:_,debounce:x=0,id:A,className:O,onResize:I,style:F={}}=t,q=G.useRef(null),H=G.useRef();H.current=I,G.useImperativeHandle(e,()=>q.current);var[K,W]=G.useState({containerWidth:i.width,containerHeight:i.height}),X=G.useCallback((ot,ct)=>{W(xt=>{var wt=Math.round(ot),Ct=Math.round(ct);return xt.containerWidth===wt&&xt.containerHeight===Ct?xt:{containerWidth:wt,containerHeight:Ct}})},[]);G.useEffect(()=>{if(q.current==null||typeof ResizeObserver>"u")return Im;var ot=Ct=>{var re,{width:ve,height:Ee}=Ct[0].contentRect;X(ve,Ee),(re=H.current)===null||re===void 0||re.call(H,ve,Ee)};x>0&&(ot=m$(ot,x,{trailing:!0,leading:!1}));var ct=new ResizeObserver(ot),{width:xt,height:wt}=q.current.getBoundingClientRect();return X(xt,wt),ct.observe(q.current),()=>{ct.disconnect()}},[X,x]);var{containerWidth:tt,containerHeight:Q}=K;y0(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:at,calculatedHeight:ht}=gz(tt,Q,{width:r,height:u,aspect:n,maxHeight:y});return y0(at!=null&&at>0||ht!=null&&ht>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,at,ht,r,u,f,a,n),G.createElement("div",{id:A?"".concat(A):void 0,className:Nr("recharts-responsive-container",O),style:HE(HE({},F),{},{width:r,height:u,minWidth:f,minHeight:a,maxHeight:y}),ref:q},G.createElement("div",{style:x$({width:r,height:u})},G.createElement(_z,{width:at,height:ht},_)))}),vz=G.forwardRef((t,e)=>{var n=YS();if(qc(n.width)&&qc(n.height))return t.children;var{width:i,height:r}=b$({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:u,calculatedHeight:f}=gz(void 0,void 0,{width:i,height:r,aspect:t.aspect,maxHeight:t.maxHeight});return xn(u)&&xn(f)?G.createElement(_z,{width:u,height:f},t.children):G.createElement(A$,Iw({},t,{width:i,height:r,ref:e}))});function xz(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var _x=()=>{var t,e=bl(),n=En(l$),i=En(yx),r=(t=En(gx))===null||t===void 0?void 0:t.padding;return!e||!i||!r?n:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},E$={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},bz=()=>{var t;return(t=En(Gs))!==null&&t!==void 0?t:E$},wz=()=>En($h),Sz=()=>En(qh),Tr=t=>t.layout.layoutType,vx=()=>En(Tr),C$=()=>{var t=vx();return t!==void 0},xx=t=>{var e=Ts(),n=bl(),{width:i,height:r}=t,u=YS(),f=i,a=r;return u&&(f=u.width>0?u.width:i,a=u.height>0?u.height:r),G.useEffect(()=>{!n&&qc(f)&&qc(a)&&e(zV({width:f,height:a}))},[e,n,f,a]),null},P$={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Tz=xl({name:"legend",initialState:P$,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:os()},removeLegendPayload:{reducer(t,e){var n=Oh(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:os()}}}),{setLegendSize:Gtt,setLegendSettings:Wtt,addLegendPayload:k$,removeLegendPayload:O$}=Tz.actions,D$=Tz.reducer;function Rw(){return Rw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Rw.apply(null,arguments)}function ZE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function O1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZE(Object(n),!0).forEach(function(i){z$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function z$(t,e,n){return(e=L$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L$(t){var e=I$(t,"string");return typeof e=="symbol"?e:e+""}function I$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function R$(t){return Array.isArray(t)&&$c(t[0])&&$c(t[1])?t.join(" ~ "):t}var B$=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:i={},labelStyle:r={},payload:u,formatter:f,itemSorter:a,wrapperClassName:y,labelClassName:_,label:x,labelFormatter:A,accessibilityLayer:O=!1}=t,I=()=>{if(u&&u.length){var Q={padding:0,margin:0},at=(a?lx(u,a):u).map((ht,ot)=>{if(ht.type==="none")return null;var ct=ht.formatter||f||R$,{value:xt,name:wt}=ht,Ct=xt,re=wt;if(ct){var ve=ct(xt,wt,ht,ot,u);if(Array.isArray(ve))[Ct,re]=ve;else if(ve!=null)Ct=ve;else return null}var Ee=O1({display:"block",paddingTop:4,paddingBottom:4,color:ht.color||"#000"},i);return G.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ot),style:Ee},$c(re)?G.createElement("span",{className:"recharts-tooltip-item-name"},re):null,$c(re)?G.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,G.createElement("span",{className:"recharts-tooltip-item-value"},Ct),G.createElement("span",{className:"recharts-tooltip-item-unit"},ht.unit||""))});return G.createElement("ul",{className:"recharts-tooltip-item-list",style:Q},at)}return null},F=O1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),q=O1({margin:0},r),H=!Zs(x),K=H?x:"",W=Nr("recharts-default-tooltip",y),X=Nr("recharts-tooltip-label",_);H&&A&&u!==void 0&&u!==null&&(K=A(x,u));var tt=O?{role:"status","aria-live":"assertive"}:{};return G.createElement("div",Rw({className:W,style:F},tt),G.createElement("p",{className:X,style:q},G.isValidElement(K)?K:"".concat(K)),I())},Zg="recharts-tooltip-wrapper",N$={visibility:"hidden"};function j$(t){var{coordinate:e,translateX:n,translateY:i}=t;return Nr(Zg,{["".concat(Zg,"-right")]:xn(n)&&e&&xn(e.x)&&n>=e.x,["".concat(Zg,"-left")]:xn(n)&&e&&xn(e.x)&&n<e.x,["".concat(Zg,"-bottom")]:xn(i)&&e&&xn(e.y)&&i>=e.y,["".concat(Zg,"-top")]:xn(i)&&e&&xn(e.y)&&i<e.y})}function GE(t){var{allowEscapeViewBox:e,coordinate:n,key:i,offsetTopLeft:r,position:u,reverseDirection:f,tooltipDimension:a,viewBox:y,viewBoxDimension:_}=t;if(u&&xn(u[i]))return u[i];var x=n[i]-a-(r>0?r:0),A=n[i]+r;if(e[i])return f[i]?x:A;var O=y[i];if(O==null)return 0;if(f[i]){var I=x,F=O;return I<F?Math.max(A,O):Math.max(x,O)}if(_==null)return 0;var q=A+a,H=O+_;return q>H?Math.max(x,O):Math.max(A,O)}function F$(t){var{translateX:e,translateY:n,useTranslate3d:i}=t;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function U$(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:i,position:r,reverseDirection:u,tooltipBox:f,useTranslate3d:a,viewBox:y}=t,_,x,A;return f.height>0&&f.width>0&&n?(x=GE({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:r,reverseDirection:u,tooltipDimension:f.width,viewBox:y,viewBoxDimension:y.width}),A=GE({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:r,reverseDirection:u,tooltipDimension:f.height,viewBox:y,viewBoxDimension:y.height}),_=F$({translateX:x,translateY:A,useTranslate3d:a})):_=N$,{cssProperties:_,cssClasses:j$({translateX:x,translateY:A,coordinate:n})}}function WE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function zv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WE(Object(n),!0).forEach(function(i){Bw(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Bw(t,e,n){return(e=V$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V$(t){var e=$$(t,"string");return typeof e=="symbol"?e:e+""}function $$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class q$ extends G.PureComponent{constructor(){super(...arguments),Bw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Bw(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,i,r,u;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(r=(u=this.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:i,animationEasing:r,children:u,coordinate:f,hasPayload:a,isAnimationActive:y,offset:_,position:x,reverseDirection:A,useTranslate3d:O,viewBox:I,wrapperStyle:F,lastBoundingBox:q,innerRef:H,hasPortalFromProps:K}=this.props,{cssClasses:W,cssProperties:X}=U$({allowEscapeViewBox:n,coordinate:f,offsetTopLeft:_,position:x,reverseDirection:A,tooltipBox:{height:q.height,width:q.width},useTranslate3d:O,viewBox:I}),tt=K?{}:zv(zv({transition:y&&e?"transform ".concat(i,"ms ").concat(r):void 0},X),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),Q=zv(zv({},tt),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},F);return G.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:W,style:Q,ref:H},u)}}var H$=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Rm={devToolsEnabled:!1,isSsr:H$()},Mz=()=>{var t;return(t=En(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Nw(){return Nw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Nw.apply(null,arguments)}function YE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function XE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YE(Object(n),!0).forEach(function(i){Z$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Z$(t,e,n){return(e=G$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G$(t){var e=W$(t,"string");return typeof e=="symbol"?e:e+""}function W$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KE={curveBasisClosed:v8,curveBasisOpen:x8,curveBasis:_8,curveBumpX:g8,curveBumpY:y8,curveLinearClosed:b8,curveLinear:ax,curveMonotoneX:w8,curveMonotoneY:S8,curveNatural:T8,curveStep:M8,curveStepAfter:E8,curveStepBefore:A8},_0=t=>ya(t.x)&&ya(t.y),QE=t=>t.base!=null&&_0(t.base)&&_0(t),Gg=t=>t.x,Wg=t=>t.y,Y$=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(FS(t));return(n==="curveMonotone"||n==="curveBump")&&e?KE["".concat(n).concat(e==="vertical"?"Y":"X")]:KE[n]||ax},X$=t=>{var{type:e="linear",points:n=[],baseLine:i,layout:r,connectNulls:u=!1}=t,f=Y$(e,r),a=u?n.filter(_0):n,y;if(Array.isArray(i)){var _=n.map((I,F)=>XE(XE({},I),{},{base:i[F]}));r==="vertical"?y=Av().y(Wg).x1(Gg).x0(I=>I.base.x):y=Av().x(Gg).y1(Wg).y0(I=>I.base.y);var x=y.defined(QE).curve(f),A=u?_.filter(QE):_;return x(A)}r==="vertical"&&xn(i)?y=Av().y(Wg).x1(Gg).x0(i):xn(i)?y=Av().x(Gg).y1(Wg).y0(i):y=fD().x(Gg).y(Wg);var O=y.defined(_0).curve(f);return O(a)},Zv=t=>{var{className:e,points:n,path:i,pathRef:r}=t;if((!n||!n.length)&&!i)return null;var u=n&&n.length?X$(t):i;return G.createElement("path",Nw({},fc(t),US(t),{className:Nr("recharts-curve",e),d:u===null?void 0:u,ref:r}))},K$=["x","y","top","left","width","height","className"];function jw(){return jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jw.apply(null,arguments)}function JE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Q$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JE(Object(n),!0).forEach(function(i){J$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function J$(t,e,n){return(e=tq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tq(t){var e=eq(t,"string");return typeof e=="symbol"?e:e+""}function eq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nq(t,e){if(t==null)return{};var n,i,r=iq(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iq(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var rq=(t,e,n,i,r,u)=>"M".concat(t,",").concat(r,"v").concat(i,"M").concat(u,",").concat(e,"h").concat(n),aq=t=>{var{x:e=0,y:n=0,top:i=0,left:r=0,width:u=0,height:f=0,className:a}=t,y=nq(t,K$),_=Q$({x:e,y:n,top:i,left:r,width:u,height:f},y);return!xn(e)||!xn(n)||!xn(u)||!xn(f)||!xn(i)||!xn(r)?null:G.createElement("path",jw({},Au(_),{className:Nr("recharts-cross",a),d:rq(e,n,u,f,i,r)}))};function sq(t,e,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-r:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-r,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function tC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function eC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tC(Object(n),!0).forEach(function(i){oq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function oq(t,e,n){return(e=lq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lq(t){var e=uq(t,"string");return typeof e=="symbol"?e:e+""}function uq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cq=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),hq=(t,e,n)=>t.map(i=>"".concat(cq(i)," ").concat(e,"ms ").concat(n)).join(","),fq=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,i)=>n.filter(r=>i.includes(r))),Ey=(t,e)=>Object.keys(e).reduce((n,i)=>eC(eC({},n),{},{[i]:t(i,e[i])}),{});function nC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ss(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nC(Object(n),!0).forEach(function(i){dq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function dq(t,e,n){return(e=pq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pq(t){var e=mq(t,"string");return typeof e=="symbol"?e:e+""}function mq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v0=(t,e,n)=>t+(e-t)*n,Fw=t=>{var{from:e,to:n}=t;return e!==n},Az=(t,e,n)=>{var i=Ey((r,u)=>{if(Fw(u)){var[f,a]=t(u.from,u.to,u.velocity);return ss(ss({},u),{},{from:f,velocity:a})}return u},e);return n<1?Ey((r,u)=>Fw(u)?ss(ss({},u),{},{velocity:v0(u.velocity,i[r].velocity,n),from:v0(u.from,i[r].from,n)}):u,e):Az(t,i,n-1)};function gq(t,e,n,i,r,u){var f,a=i.reduce((O,I)=>ss(ss({},O),{},{[I]:{from:t[I],velocity:0,to:e[I]}}),{}),y=()=>Ey((O,I)=>I.from,a),_=()=>!Object.values(a).filter(Fw).length,x=null,A=O=>{f||(f=O);var I=O-f,F=I/n.dt;a=Az(n,a,F),r(ss(ss(ss({},t),e),y())),f=O,_()||(x=u.setTimeout(A))};return()=>(x=u.setTimeout(A),()=>{var O;(O=x)===null||O===void 0||O()})}function yq(t,e,n,i,r,u,f){var a=null,y=r.reduce((A,O)=>ss(ss({},A),{},{[O]:[t[O],e[O]]}),{}),_,x=A=>{_||(_=A);var O=(A-_)/i,I=Ey((q,H)=>v0(...H,n(O)),y);if(u(ss(ss(ss({},t),e),I)),O<1)a=f.setTimeout(x);else{var F=Ey((q,H)=>v0(...H,n(1)),y);u(ss(ss(ss({},t),e),F))}};return()=>(a=f.setTimeout(x),()=>{var A;(A=a)===null||A===void 0||A()})}const _q=(t,e,n,i,r,u)=>{var f=fq(t,e);return n==null?()=>(r(ss(ss({},t),e)),()=>{}):n.isStepper===!0?gq(t,e,n,f,r,u):yq(t,e,n,i,f,r,u)};var x0=1e-4,Ez=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Cz=(t,e)=>t.map((n,i)=>n*e**i).reduce((n,i)=>n+i),iC=(t,e)=>n=>{var i=Ez(t,e);return Cz(i,n)},vq=(t,e)=>n=>{var i=Ez(t,e),r=[...i.map((u,f)=>u*f).slice(1),0];return Cz(r,n)},xq=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r,u=n[0].split("(");if(u[0]==="cubic-bezier"&&((r=u[1])===null||r===void 0?void 0:r.split(")")[0].split(",").length)===4){var f=u[1].split(")")[0].split(",").map(a=>parseFloat(a));return[f[0],f[1],f[2],f[3]]}}}return n.length===4?n:[0,0,1,1]},bq=(t,e,n,i)=>{var r=iC(t,n),u=iC(e,i),f=vq(t,n),a=_=>_>1?1:_<0?0:_,y=_=>{for(var x=_>1?1:_,A=x,O=0;O<8;++O){var I=r(A)-x,F=f(A);if(Math.abs(I-x)<x0||F<x0)return u(A);A=a(A-I/F)}return u(A)};return y.isStepper=!1,y},rC=function(){return bq(...xq(...arguments))},wq=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:r=17}=e,u=(f,a,y)=>{var _=-(f-a)*n,x=y*i,A=y+(_-x)*r/1e3,O=y*r/1e3+f;return Math.abs(O-a)<x0&&Math.abs(A)<x0?[a,0]:[O,A]};return u.isStepper=!0,u.dt=r,u},Sq=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rC(t);case"spring":return wq();default:if(t.split("(")[0]==="cubic-bezier")return rC(t)}return typeof t=="function"?t:null};function Tq(t){var e,n=()=>null,i=!1,r=null,u=f=>{if(!i){if(Array.isArray(f)){if(!f.length)return;var a=f,[y,..._]=a;if(typeof y=="number"){r=t.setTimeout(u.bind(null,_),y);return}u(y),r=t.setTimeout(u.bind(null,_));return}typeof f=="string"&&(e=f,n(e)),typeof f=="object"&&(e=f,n(e)),typeof f=="function"&&f()}};return{stop:()=>{i=!0},start:f=>{i=!1,r&&(r(),r=null),u(f)},subscribe:f=>(n=f,()=>{n=()=>null}),getTimeoutController:()=>t}}class Mq{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,u=f=>{f-i>=n?e(f):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(u))};return r=requestAnimationFrame(u),()=>{r!=null&&cancelAnimationFrame(r)}}}function Aq(){return Tq(new Mq)}var Eq=G.createContext(Aq);function Cq(t,e){var n=G.useContext(Eq);return G.useMemo(()=>e??n(t),[t,e,n])}var Pq={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},aC={t:0},D1={t:1};function Pz(t){var e=Ql(t,Pq),{isActive:n,canBegin:i,duration:r,easing:u,begin:f,onAnimationEnd:a,onAnimationStart:y,children:_}=e,x=Cq(e.animationId,e.animationManager),[A,O]=G.useState(n?aC:D1),I=G.useRef(null);return G.useEffect(()=>{n||O(D1)},[n]),G.useEffect(()=>{if(!n||!i)return Im;var F=_q(aC,D1,Sq(u),r,O,x.getTimeoutController()),q=()=>{I.current=F()};return x.start([y,f,q,r,a]),()=>{x.stop(),I.current&&I.current(),a()}},[n,i,r,u,f,y,a,x]),_(A.t)}function kz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=G.useRef(Sy(e)),i=G.useRef(t);return i.current!==t&&(n.current=Sy(e),i.current=t),n.current}var kq=["radius"],Oq=["radius"];function sC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function oC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sC(Object(n),!0).forEach(function(i){Dq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Dq(t,e,n){return(e=zq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zq(t){var e=Lq(t,"string");return typeof e=="symbol"?e:e+""}function Lq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b0(){return b0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},b0.apply(null,arguments)}function lC(t,e){if(t==null)return{};var n,i,r=Iq(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Iq(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var uC=(t,e,n,i,r)=>{var u=Math.min(Math.abs(n)/2,Math.abs(i)/2),f=i>=0?1:-1,a=n>=0?1:-1,y=i>=0&&n>=0||i<0&&n<0?1:0,_;if(u>0&&r instanceof Array){for(var x=[0,0,0,0],A=0,O=4;A<O;A++)x[A]=r[A]>u?u:r[A];_="M".concat(t,",").concat(e+f*x[0]),x[0]>0&&(_+="A ".concat(x[0],",").concat(x[0],",0,0,").concat(y,",").concat(t+a*x[0],",").concat(e)),_+="L ".concat(t+n-a*x[1],",").concat(e),x[1]>0&&(_+="A ".concat(x[1],",").concat(x[1],",0,0,").concat(y,`,
        `).concat(t+n,",").concat(e+f*x[1])),_+="L ".concat(t+n,",").concat(e+i-f*x[2]),x[2]>0&&(_+="A ".concat(x[2],",").concat(x[2],",0,0,").concat(y,`,
        `).concat(t+n-a*x[2],",").concat(e+i)),_+="L ".concat(t+a*x[3],",").concat(e+i),x[3]>0&&(_+="A ".concat(x[3],",").concat(x[3],",0,0,").concat(y,`,
        `).concat(t,",").concat(e+i-f*x[3])),_+="Z"}else if(u>0&&r===+r&&r>0){var I=Math.min(u,r);_="M ".concat(t,",").concat(e+f*I,`
            A `).concat(I,",").concat(I,",0,0,").concat(y,",").concat(t+a*I,",").concat(e,`
            L `).concat(t+n-a*I,",").concat(e,`
            A `).concat(I,",").concat(I,",0,0,").concat(y,",").concat(t+n,",").concat(e+f*I,`
            L `).concat(t+n,",").concat(e+i-f*I,`
            A `).concat(I,",").concat(I,",0,0,").concat(y,",").concat(t+n-a*I,",").concat(e+i,`
            L `).concat(t+a*I,",").concat(e+i,`
            A `).concat(I,",").concat(I,",0,0,").concat(y,",").concat(t,",").concat(e+i-f*I," Z")}else _="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return _},cC={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rq=t=>{var e=Ql(t,cC),n=G.useRef(null),[i,r]=G.useState(-1);G.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Pt=n.current.getTotalLength();Pt&&r(Pt)}catch{}},[]);var{x:u,y:f,width:a,height:y,radius:_,className:x}=e,{animationEasing:A,animationDuration:O,animationBegin:I,isAnimationActive:F,isUpdateAnimationActive:q}=e,H=G.useRef(a),K=G.useRef(y),W=G.useRef(u),X=G.useRef(f),tt=G.useMemo(()=>({x:u,y:f,width:a,height:y,radius:_}),[u,f,a,y,_]),Q=kz(tt,"rectangle-");if(u!==+u||f!==+f||a!==+a||y!==+y||a===0||y===0)return null;var at=Nr("recharts-rectangle",x);if(!q){var ht=Au(e),{radius:ot}=ht,ct=lC(ht,kq);return G.createElement("path",b0({},ct,{radius:typeof _=="number"?_:void 0,className:at,d:uC(u,f,a,y,_)}))}var xt=H.current,wt=K.current,Ct=W.current,re=X.current,ve="0px ".concat(i===-1?1:i,"px"),Ee="".concat(i,"px 0px"),Nt=hq(["strokeDasharray"],O,typeof A=="string"?A:cC.animationEasing);return G.createElement(Pz,{animationId:Q,key:Q,canBegin:i>0,duration:O,easing:A,isActive:q,begin:I},Pt=>{var Bt=Bc(xt,a,Pt),Ft=Bc(wt,y,Pt),$t=Bc(Ct,u,Pt),ft=Bc(re,f,Pt);n.current&&(H.current=Bt,K.current=Ft,W.current=$t,X.current=ft);var St;F?Pt>0?St={transition:Nt,strokeDasharray:Ee}:St={strokeDasharray:ve}:St={strokeDasharray:Ee};var jt=Au(e),{radius:Yt}=jt,le=lC(jt,Oq);return G.createElement("path",b0({},le,{radius:typeof _=="number"?_:void 0,className:at,d:uC($t,ft,Bt,Ft,_),ref:n,style:oC(oC({},St),e.style)}))})};function hC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function fC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hC(Object(n),!0).forEach(function(i){Bq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Bq(t,e,n){return(e=Nq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nq(t){var e=jq(t,"string");return typeof e=="symbol"?e:e+""}function jq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var w0=Math.PI/180,Fq=t=>t*180/Math.PI,Hs=(t,e,n,i)=>({x:t+Math.cos(-w0*i)*n,y:e+Math.sin(-w0*i)*n}),Uq=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},Vq=(t,e)=>{var{x:n,y:i}=t,{x:r,y:u}=e;return Math.sqrt((n-r)**2+(i-u)**2)},$q=(t,e)=>{var{x:n,y:i}=t,{cx:r,cy:u}=e,f=Vq({x:n,y:i},{x:r,y:u});if(f<=0)return{radius:f,angle:0};var a=(n-r)/f,y=Math.acos(a);return i>u&&(y=2*Math.PI-y),{radius:f,angle:Fq(y),angleInRadian:y}},qq=t=>{var{startAngle:e,endAngle:n}=t,i=Math.floor(e/360),r=Math.floor(n/360),u=Math.min(i,r);return{startAngle:e-u*360,endAngle:n-u*360}},Hq=(t,e)=>{var{startAngle:n,endAngle:i}=e,r=Math.floor(n/360),u=Math.floor(i/360),f=Math.min(r,u);return t+f*360},Zq=(t,e)=>{var{chartX:n,chartY:i}=t,{radius:r,angle:u}=$q({x:n,y:i},e),{innerRadius:f,outerRadius:a}=e;if(r<f||r>a||r===0)return null;var{startAngle:y,endAngle:_}=qq(e),x=u,A;if(y<=_){for(;x>_;)x-=360;for(;x<y;)x+=360;A=x>=y&&x<=_}else{for(;x>y;)x-=360;for(;x<_;)x+=360;A=x>=_&&x<=y}return A?fC(fC({},e),{},{radius:r,angle:Hq(x,e)}):null};function Oz(t){var{cx:e,cy:n,radius:i,startAngle:r,endAngle:u}=t,f=Hs(e,n,i,r),a=Hs(e,n,i,u);return{points:[f,a],cx:e,cy:n,radius:i,startAngle:r,endAngle:u}}function Uw(){return Uw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Uw.apply(null,arguments)}var Gq=(t,e)=>{var n=Tu(e-t),i=Math.min(Math.abs(e-t),359.999);return n*i},Lv=t=>{var{cx:e,cy:n,radius:i,angle:r,sign:u,isExternal:f,cornerRadius:a,cornerIsExternal:y}=t,_=a*(f?1:-1)+i,x=Math.asin(a/_)/w0,A=y?r:r+u*x,O=Hs(e,n,_,A),I=Hs(e,n,i,A),F=y?r-u*x:r,q=Hs(e,n,_*Math.cos(x*w0),F);return{center:O,circleTangency:I,lineTangency:q,theta:x}},Dz=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:u,endAngle:f}=t,a=Gq(u,f),y=u+a,_=Hs(e,n,r,u),x=Hs(e,n,r,y),A="M ".concat(_.x,",").concat(_.y,`
    A `).concat(r,",").concat(r,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(u>y),`,
    `).concat(x.x,",").concat(x.y,`
  `);if(i>0){var O=Hs(e,n,i,u),I=Hs(e,n,i,y);A+="L ".concat(I.x,",").concat(I.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(u<=y),`,
            `).concat(O.x,",").concat(O.y," Z")}else A+="L ".concat(e,",").concat(n," Z");return A},Wq=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,cornerRadius:u,forceCornerRadius:f,cornerIsExternal:a,startAngle:y,endAngle:_}=t,x=Tu(_-y),{circleTangency:A,lineTangency:O,theta:I}=Lv({cx:e,cy:n,radius:r,angle:y,sign:x,cornerRadius:u,cornerIsExternal:a}),{circleTangency:F,lineTangency:q,theta:H}=Lv({cx:e,cy:n,radius:r,angle:_,sign:-x,cornerRadius:u,cornerIsExternal:a}),K=a?Math.abs(y-_):Math.abs(y-_)-I-H;if(K<0)return f?"M ".concat(O.x,",").concat(O.y,`
        a`).concat(u,",").concat(u,",0,0,1,").concat(u*2,`,0
        a`).concat(u,",").concat(u,",0,0,1,").concat(-u*2,`,0
      `):Dz({cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:y,endAngle:_});var W="M ".concat(O.x,",").concat(O.y,`
    A`).concat(u,",").concat(u,",0,0,").concat(+(x<0),",").concat(A.x,",").concat(A.y,`
    A`).concat(r,",").concat(r,",0,").concat(+(K>180),",").concat(+(x<0),",").concat(F.x,",").concat(F.y,`
    A`).concat(u,",").concat(u,",0,0,").concat(+(x<0),",").concat(q.x,",").concat(q.y,`
  `);if(i>0){var{circleTangency:X,lineTangency:tt,theta:Q}=Lv({cx:e,cy:n,radius:i,angle:y,sign:x,isExternal:!0,cornerRadius:u,cornerIsExternal:a}),{circleTangency:at,lineTangency:ht,theta:ot}=Lv({cx:e,cy:n,radius:i,angle:_,sign:-x,isExternal:!0,cornerRadius:u,cornerIsExternal:a}),ct=a?Math.abs(y-_):Math.abs(y-_)-Q-ot;if(ct<0&&u===0)return"".concat(W,"L").concat(e,",").concat(n,"Z");W+="L".concat(ht.x,",").concat(ht.y,`
      A`).concat(u,",").concat(u,",0,0,").concat(+(x<0),",").concat(at.x,",").concat(at.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ct>180),",").concat(+(x>0),",").concat(X.x,",").concat(X.y,`
      A`).concat(u,",").concat(u,",0,0,").concat(+(x<0),",").concat(tt.x,",").concat(tt.y,"Z")}else W+="L".concat(e,",").concat(n,"Z");return W},Yq={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Xq=t=>{var e=Ql(t,Yq),{cx:n,cy:i,innerRadius:r,outerRadius:u,cornerRadius:f,forceCornerRadius:a,cornerIsExternal:y,startAngle:_,endAngle:x,className:A}=e;if(u<r||_===x)return null;var O=Nr("recharts-sector",A),I=u-r,F=jf(f,I,0,!0),q;return F>0&&Math.abs(_-x)<360?q=Wq({cx:n,cy:i,innerRadius:r,outerRadius:u,cornerRadius:Math.min(F,I/2),forceCornerRadius:a,cornerIsExternal:y,startAngle:_,endAngle:x}):q=Dz({cx:n,cy:i,innerRadius:r,outerRadius:u,startAngle:_,endAngle:x}),G.createElement("path",Uw({},Au(e),{className:O,d:q}))};function Kq(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(TD(e)){if(t==="centric"){var{cx:i,cy:r,innerRadius:u,outerRadius:f,angle:a}=e,y=Hs(i,r,u,a),_=Hs(i,r,f,a);return[{x:y.x,y:y.y},{x:_.x,y:_.y}]}return Oz(e)}}var z1={},L1={},I1={},dC;function Qq(){return dC||(dC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ID();function n(i){return e.isSymbol(i)?NaN:Number(i)}t.toNumber=n})(I1)),I1}var pC;function Jq(){return pC||(pC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qq();function n(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}t.toFinite=n})(L1)),L1}var mC;function t9(){return mC||(mC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RD(),n=Jq();function i(r,u,f){f&&typeof f!="number"&&e.isIterateeCall(r,u,f)&&(u=f=void 0),r=n.toFinite(r),u===void 0?(u=r,r=0):u=n.toFinite(u),f=f===void 0?r<u?1:-1:n.toFinite(f);const a=Math.max(Math.ceil((u-r)/(f||1)),0),y=new Array(a);for(let _=0;_<a;_++)y[_]=r,r+=f;return y}t.range=i})(z1)),z1}var R1,gC;function e9(){return gC||(gC=1,R1=t9().range),R1}var n9=e9();const zz=Pu(n9);function Rf(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i9(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function XS(t){let e,n,i;t.length!==2?(e=Rf,n=(a,y)=>Rf(t(a),y),i=(a,y)=>t(a)-y):(e=t===Rf||t===i9?t:r9,n=t,i=t);function r(a,y,_=0,x=a.length){if(_<x){if(e(y,y)!==0)return x;do{const A=_+x>>>1;n(a[A],y)<0?_=A+1:x=A}while(_<x)}return _}function u(a,y,_=0,x=a.length){if(_<x){if(e(y,y)!==0)return x;do{const A=_+x>>>1;n(a[A],y)<=0?_=A+1:x=A}while(_<x)}return _}function f(a,y,_=0,x=a.length){const A=r(a,y,_,x-1);return A>_&&i(a[A-1],y)>-i(a[A],y)?A-1:A}return{left:r,center:f,right:u}}function r9(){return 0}function Lz(t){return t===null?NaN:+t}function*a9(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const s9=XS(Rf),Zy=s9.right;XS(Lz).center;class yC extends Map{constructor(e,n=u9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(_C(this,e))}has(e){return super.has(_C(this,e))}set(e,n){return super.set(o9(this,e),n)}delete(e){return super.delete(l9(this,e))}}function _C({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function o9({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function l9({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function u9(t){return t!==null&&typeof t=="object"?t.valueOf():t}function c9(t=Rf){if(t===Rf)return Iz;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function Iz(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const h9=Math.sqrt(50),f9=Math.sqrt(10),d9=Math.sqrt(2);function S0(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),u=i/Math.pow(10,r),f=u>=h9?10:u>=f9?5:u>=d9?2:1;let a,y,_;return r<0?(_=Math.pow(10,-r)/f,a=Math.round(t*_),y=Math.round(e*_),a/_<t&&++a,y/_>e&&--y,_=-_):(_=Math.pow(10,r)*f,a=Math.round(t/_),y=Math.round(e/_),a*_<t&&++a,y*_>e&&--y),y<a&&.5<=n&&n<2?S0(t,e,n*2):[a,y,_]}function Vw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,u,f]=i?S0(e,t,n):S0(t,e,n);if(!(u>=r))return[];const a=u-r+1,y=new Array(a);if(i)if(f<0)for(let _=0;_<a;++_)y[_]=(u-_)/-f;else for(let _=0;_<a;++_)y[_]=(u-_)*f;else if(f<0)for(let _=0;_<a;++_)y[_]=(r+_)/-f;else for(let _=0;_<a;++_)y[_]=(r+_)*f;return y}function $w(t,e,n){return e=+e,t=+t,n=+n,S0(t,e,n)[2]}function qw(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?$w(e,t,n):$w(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function vC(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function xC(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function Rz(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?Iz:c9(r);i>n;){if(i-n>600){const y=i-n+1,_=e-n+1,x=Math.log(y),A=.5*Math.exp(2*x/3),O=.5*Math.sqrt(x*A*(y-A)/y)*(_-y/2<0?-1:1),I=Math.max(n,Math.floor(e-_*A/y+O)),F=Math.min(i,Math.floor(e+(y-_)*A/y+O));Rz(t,e,I,F,r)}const u=t[e];let f=n,a=i;for(Yg(t,n,e),r(t[i],u)>0&&Yg(t,n,i);f<a;){for(Yg(t,f,a),++f,--a;r(t[f],u)<0;)++f;for(;r(t[a],u)>0;)--a}r(t[n],u)===0?Yg(t,n,a):(++a,Yg(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}return t}function Yg(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function p9(t,e,n){if(t=Float64Array.from(a9(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return xC(t);if(e>=1)return vC(t);var i,r=(i-1)*e,u=Math.floor(r),f=vC(Rz(t,u).subarray(0,u+1)),a=xC(t.subarray(u+1));return f+(a-f)*(r-u)}}function m9(t,e,n=Lz){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,u=Math.floor(r),f=+n(t[u],u,t),a=+n(t[u+1],u+1,t);return f+(a-f)*(r-u)}}function g9(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,u=new Array(r);++i<r;)u[i]=t+i*n;return u}function ku(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Hh(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Hw=Symbol("implicit");function KS(){var t=new yC,e=[],n=[],i=Hw;function r(u){let f=t.get(u);if(f===void 0){if(i!==Hw)return i;t.set(u,f=e.push(u)-1)}return n[f%n.length]}return r.domain=function(u){if(!arguments.length)return e.slice();e=[],t=new yC;for(const f of u)t.has(f)||t.set(f,e.push(f)-1);return r},r.range=function(u){return arguments.length?(n=Array.from(u),r):n.slice()},r.unknown=function(u){return arguments.length?(i=u,r):i},r.copy=function(){return KS(e,n).unknown(i)},ku.apply(r,arguments),r}function QS(){var t=KS().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,u,f,a=!1,y=0,_=0,x=.5;delete t.unknown;function A(){var O=e().length,I=r<i,F=I?r:i,q=I?i:r;u=(q-F)/Math.max(1,O-y+_*2),a&&(u=Math.floor(u)),F+=(q-F-u*(O-y))*x,f=u*(1-y),a&&(F=Math.round(F),f=Math.round(f));var H=g9(O).map(function(K){return F+u*K});return n(I?H.reverse():H)}return t.domain=function(O){return arguments.length?(e(O),A()):e()},t.range=function(O){return arguments.length?([i,r]=O,i=+i,r=+r,A()):[i,r]},t.rangeRound=function(O){return[i,r]=O,i=+i,r=+r,a=!0,A()},t.bandwidth=function(){return f},t.step=function(){return u},t.round=function(O){return arguments.length?(a=!!O,A()):a},t.padding=function(O){return arguments.length?(y=Math.min(1,_=+O),A()):y},t.paddingInner=function(O){return arguments.length?(y=Math.min(1,O),A()):y},t.paddingOuter=function(O){return arguments.length?(_=+O,A()):_},t.align=function(O){return arguments.length?(x=Math.max(0,Math.min(1,O)),A()):x},t.copy=function(){return QS(e(),[i,r]).round(a).paddingInner(y).paddingOuter(_).align(x)},ku.apply(A(),arguments)}function Bz(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Bz(e())},t}function y9(){return Bz(QS.apply(null,arguments).paddingInner(1))}function JS(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Nz(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Gy(){}var Cy=.7,T0=1/Cy,bm="\\s*([+-]?\\d+)\\s*",Py="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_9=/^#([0-9a-f]{3,8})$/,v9=new RegExp(`^rgb\\(${bm},${bm},${bm}\\)$`),x9=new RegExp(`^rgb\\(${Fc},${Fc},${Fc}\\)$`),b9=new RegExp(`^rgba\\(${bm},${bm},${bm},${Py}\\)$`),w9=new RegExp(`^rgba\\(${Fc},${Fc},${Fc},${Py}\\)$`),S9=new RegExp(`^hsl\\(${Py},${Fc},${Fc}\\)$`),T9=new RegExp(`^hsla\\(${Py},${Fc},${Fc},${Py}\\)$`),bC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};JS(Gy,ky,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:wC,formatHex:wC,formatHex8:M9,formatHsl:A9,formatRgb:SC,toString:SC});function wC(){return this.rgb().formatHex()}function M9(){return this.rgb().formatHex8()}function A9(){return jz(this).formatHsl()}function SC(){return this.rgb().formatRgb()}function ky(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_9.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?TC(e):n===3?new vl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Iv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Iv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=v9.exec(t))?new vl(e[1],e[2],e[3],1):(e=x9.exec(t))?new vl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=b9.exec(t))?Iv(e[1],e[2],e[3],e[4]):(e=w9.exec(t))?Iv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=S9.exec(t))?EC(e[1],e[2]/100,e[3]/100,1):(e=T9.exec(t))?EC(e[1],e[2]/100,e[3]/100,e[4]):bC.hasOwnProperty(t)?TC(bC[t]):t==="transparent"?new vl(NaN,NaN,NaN,0):null}function TC(t){return new vl(t>>16&255,t>>8&255,t&255,1)}function Iv(t,e,n,i){return i<=0&&(t=e=n=NaN),new vl(t,e,n,i)}function E9(t){return t instanceof Gy||(t=ky(t)),t?(t=t.rgb(),new vl(t.r,t.g,t.b,t.opacity)):new vl}function Zw(t,e,n,i){return arguments.length===1?E9(t):new vl(t,e,n,i??1)}function vl(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}JS(vl,Zw,Nz(Gy,{brighter(t){return t=t==null?T0:Math.pow(T0,t),new vl(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Cy:Math.pow(Cy,t),new vl(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vl(Zd(this.r),Zd(this.g),Zd(this.b),M0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MC,formatHex:MC,formatHex8:C9,formatRgb:AC,toString:AC}));function MC(){return`#${jd(this.r)}${jd(this.g)}${jd(this.b)}`}function C9(){return`#${jd(this.r)}${jd(this.g)}${jd(this.b)}${jd((isNaN(this.opacity)?1:this.opacity)*255)}`}function AC(){const t=M0(this.opacity);return`${t===1?"rgb(":"rgba("}${Zd(this.r)}, ${Zd(this.g)}, ${Zd(this.b)}${t===1?")":`, ${t})`}`}function M0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function jd(t){return t=Zd(t),(t<16?"0":"")+t.toString(16)}function EC(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new cc(t,e,n,i)}function jz(t){if(t instanceof cc)return new cc(t.h,t.s,t.l,t.opacity);if(t instanceof Gy||(t=ky(t)),!t)return new cc;if(t instanceof cc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),u=Math.max(e,n,i),f=NaN,a=u-r,y=(u+r)/2;return a?(e===u?f=(n-i)/a+(n<i)*6:n===u?f=(i-e)/a+2:f=(e-n)/a+4,a/=y<.5?u+r:2-u-r,f*=60):a=y>0&&y<1?0:f,new cc(f,a,y,t.opacity)}function P9(t,e,n,i){return arguments.length===1?jz(t):new cc(t,e,n,i??1)}function cc(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}JS(cc,P9,Nz(Gy,{brighter(t){return t=t==null?T0:Math.pow(T0,t),new cc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Cy:Math.pow(Cy,t),new cc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new vl(B1(t>=240?t-240:t+120,r,i),B1(t,r,i),B1(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new cc(CC(this.h),Rv(this.s),Rv(this.l),M0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=M0(this.opacity);return`${t===1?"hsl(":"hsla("}${CC(this.h)}, ${Rv(this.s)*100}%, ${Rv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function CC(t){return t=(t||0)%360,t<0?t+360:t}function Rv(t){return Math.max(0,Math.min(1,t||0))}function B1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const t2=t=>()=>t;function k9(t,e){return function(n){return t+n*e}}function O9(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function D9(t){return(t=+t)==1?Fz:function(e,n){return n-e?O9(e,n,t):t2(isNaN(e)?n:e)}}function Fz(t,e){var n=e-t;return n?k9(t,n):t2(isNaN(t)?e:t)}const PC=(function t(e){var n=D9(e);function i(r,u){var f=n((r=Zw(r)).r,(u=Zw(u)).r),a=n(r.g,u.g),y=n(r.b,u.b),_=Fz(r.opacity,u.opacity);return function(x){return r.r=f(x),r.g=a(x),r.b=y(x),r.opacity=_(x),r+""}}return i.gamma=t,i})(1);function z9(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(u){for(r=0;r<n;++r)i[r]=t[r]*(1-u)+e[r]*u;return i}}function L9(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function I9(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),u=new Array(n),f;for(f=0;f<i;++f)r[f]=Bm(t[f],e[f]);for(;f<n;++f)u[f]=e[f];return function(a){for(f=0;f<i;++f)u[f]=r[f](a);return u}}function R9(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function A0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function B9(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Bm(t[r],e[r]):i[r]=e[r];return function(u){for(r in n)i[r]=n[r](u);return i}}var Gw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,N1=new RegExp(Gw.source,"g");function N9(t){return function(){return t}}function j9(t){return function(e){return t(e)+""}}function F9(t,e){var n=Gw.lastIndex=N1.lastIndex=0,i,r,u,f=-1,a=[],y=[];for(t=t+"",e=e+"";(i=Gw.exec(t))&&(r=N1.exec(e));)(u=r.index)>n&&(u=e.slice(n,u),a[f]?a[f]+=u:a[++f]=u),(i=i[0])===(r=r[0])?a[f]?a[f]+=r:a[++f]=r:(a[++f]=null,y.push({i:f,x:A0(i,r)})),n=N1.lastIndex;return n<e.length&&(u=e.slice(n),a[f]?a[f]+=u:a[++f]=u),a.length<2?y[0]?j9(y[0].x):N9(e):(e=y.length,function(_){for(var x=0,A;x<e;++x)a[(A=y[x]).i]=A.x(_);return a.join("")})}function Bm(t,e){var n=typeof e,i;return e==null||n==="boolean"?t2(e):(n==="number"?A0:n==="string"?(i=ky(e))?(e=i,PC):F9:e instanceof ky?PC:e instanceof Date?R9:L9(e)?z9:Array.isArray(e)?I9:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?B9:A0)(t,e)}function e2(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function U9(t,e){e===void 0&&(e=t,t=Bm);for(var n=0,i=e.length-1,r=e[0],u=new Array(i<0?0:i);n<i;)u[n]=t(r,r=e[++n]);return function(f){var a=Math.max(0,Math.min(i-1,Math.floor(f*=i)));return u[a](f-a)}}function V9(t){return function(){return t}}function E0(t){return+t}var kC=[0,1];function Xo(t){return t}function Ww(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:V9(isNaN(e)?NaN:.5)}function $9(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function q9(t,e,n){var i=t[0],r=t[1],u=e[0],f=e[1];return r<i?(i=Ww(r,i),u=n(f,u)):(i=Ww(i,r),u=n(u,f)),function(a){return u(i(a))}}function H9(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),u=new Array(i),f=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++f<i;)r[f]=Ww(t[f],t[f+1]),u[f]=n(e[f],e[f+1]);return function(a){var y=Zy(t,a,1,i)-1;return u[y](r[y](a))}}function Wy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bx(){var t=kC,e=kC,n=Bm,i,r,u,f=Xo,a,y,_;function x(){var O=Math.min(t.length,e.length);return f!==Xo&&(f=$9(t[0],t[O-1])),a=O>2?H9:q9,y=_=null,A}function A(O){return O==null||isNaN(O=+O)?u:(y||(y=a(t.map(i),e,n)))(i(f(O)))}return A.invert=function(O){return f(r((_||(_=a(e,t.map(i),A0)))(O)))},A.domain=function(O){return arguments.length?(t=Array.from(O,E0),x()):t.slice()},A.range=function(O){return arguments.length?(e=Array.from(O),x()):e.slice()},A.rangeRound=function(O){return e=Array.from(O),n=e2,x()},A.clamp=function(O){return arguments.length?(f=O?!0:Xo,x()):f!==Xo},A.interpolate=function(O){return arguments.length?(n=O,x()):n},A.unknown=function(O){return arguments.length?(u=O,A):u},function(O,I){return i=O,r=I,x()}}function n2(){return bx()(Xo,Xo)}function Z9(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function C0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Am(t){return t=C0(Math.abs(t)),t?t[1]:NaN}function G9(t,e){return function(n,i){for(var r=n.length,u=[],f=0,a=t[0],y=0;r>0&&a>0&&(y+a+1>i&&(a=Math.max(1,i-y)),u.push(n.substring(r-=a,r+a)),!((y+=a+1)>i));)a=t[f=(f+1)%t.length];return u.reverse().join(e)}}function W9(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Y9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Oy(t){if(!(e=Y9.exec(t)))throw new Error("invalid format: "+t);var e;return new i2({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Oy.prototype=i2.prototype;function i2(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}i2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function X9(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var Uz;function K9(t,e){var n=C0(t,e);if(!n)return t+"";var i=n[0],r=n[1],u=r-(Uz=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,f=i.length;return u===f?i:u>f?i+new Array(u-f+1).join("0"):u>0?i.slice(0,u)+"."+i.slice(u):"0."+new Array(1-u).join("0")+C0(t,Math.max(0,e+u-1))[0]}function OC(t,e){var n=C0(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const DC={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Z9,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>OC(t*100,e),r:OC,s:K9,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function zC(t){return t}var LC=Array.prototype.map,IC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Q9(t){var e=t.grouping===void 0||t.thousands===void 0?zC:G9(LC.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",u=t.numerals===void 0?zC:W9(LC.call(t.numerals,String)),f=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",y=t.nan===void 0?"NaN":t.nan+"";function _(A){A=Oy(A);var O=A.fill,I=A.align,F=A.sign,q=A.symbol,H=A.zero,K=A.width,W=A.comma,X=A.precision,tt=A.trim,Q=A.type;Q==="n"?(W=!0,Q="g"):DC[Q]||(X===void 0&&(X=12),tt=!0,Q="g"),(H||O==="0"&&I==="=")&&(H=!0,O="0",I="=");var at=q==="$"?n:q==="#"&&/[boxX]/.test(Q)?"0"+Q.toLowerCase():"",ht=q==="$"?i:/[%p]/.test(Q)?f:"",ot=DC[Q],ct=/[defgprs%]/.test(Q);X=X===void 0?6:/[gprs]/.test(Q)?Math.max(1,Math.min(21,X)):Math.max(0,Math.min(20,X));function xt(wt){var Ct=at,re=ht,ve,Ee,Nt;if(Q==="c")re=ot(wt)+re,wt="";else{wt=+wt;var Pt=wt<0||1/wt<0;if(wt=isNaN(wt)?y:ot(Math.abs(wt),X),tt&&(wt=X9(wt)),Pt&&+wt==0&&F!=="+"&&(Pt=!1),Ct=(Pt?F==="("?F:a:F==="-"||F==="("?"":F)+Ct,re=(Q==="s"?IC[8+Uz/3]:"")+re+(Pt&&F==="("?")":""),ct){for(ve=-1,Ee=wt.length;++ve<Ee;)if(Nt=wt.charCodeAt(ve),48>Nt||Nt>57){re=(Nt===46?r+wt.slice(ve+1):wt.slice(ve))+re,wt=wt.slice(0,ve);break}}}W&&!H&&(wt=e(wt,1/0));var Bt=Ct.length+wt.length+re.length,Ft=Bt<K?new Array(K-Bt+1).join(O):"";switch(W&&H&&(wt=e(Ft+wt,Ft.length?K-re.length:1/0),Ft=""),I){case"<":wt=Ct+wt+re+Ft;break;case"=":wt=Ct+Ft+wt+re;break;case"^":wt=Ft.slice(0,Bt=Ft.length>>1)+Ct+wt+re+Ft.slice(Bt);break;default:wt=Ft+Ct+wt+re;break}return u(wt)}return xt.toString=function(){return A+""},xt}function x(A,O){var I=_((A=Oy(A),A.type="f",A)),F=Math.max(-8,Math.min(8,Math.floor(Am(O)/3)))*3,q=Math.pow(10,-F),H=IC[8+F/3];return function(K){return I(q*K)+H}}return{format:_,formatPrefix:x}}var Bv,r2,Vz;J9({thousands:",",grouping:[3],currency:["$",""]});function J9(t){return Bv=Q9(t),r2=Bv.format,Vz=Bv.formatPrefix,Bv}function tH(t){return Math.max(0,-Am(Math.abs(t)))}function eH(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Am(e)/3)))*3-Am(Math.abs(t)))}function nH(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Am(e)-Am(t))+1}function $z(t,e,n,i){var r=qw(t,e,n),u;switch(i=Oy(i??",f"),i.type){case"s":{var f=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(u=eH(r,f))&&(i.precision=u),Vz(i,f)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(u=nH(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=u-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(u=tH(r))&&(i.precision=u-(i.type==="%")*2);break}}return r2(i)}function Vf(t){var e=t.domain;return t.ticks=function(n){var i=e();return Vw(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return $z(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,u=i.length-1,f=i[r],a=i[u],y,_,x=10;for(a<f&&(_=f,f=a,a=_,_=r,r=u,u=_);x-- >0;){if(_=$w(f,a,n),_===y)return i[r]=f,i[u]=a,e(i);if(_>0)f=Math.floor(f/_)*_,a=Math.ceil(a/_)*_;else if(_<0)f=Math.ceil(f*_)/_,a=Math.floor(a*_)/_;else break;y=_}return t},t}function qz(){var t=n2();return t.copy=function(){return Wy(t,qz())},ku.apply(t,arguments),Vf(t)}function Hz(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,E0),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return Hz(t).unknown(e)},t=arguments.length?Array.from(t,E0):[0,1],Vf(n)}function Zz(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],u=t[i],f;return u<r&&(f=n,n=i,i=f,f=r,r=u,u=f),t[n]=e.floor(r),t[i]=e.ceil(u),t}function RC(t){return Math.log(t)}function BC(t){return Math.exp(t)}function iH(t){return-Math.log(-t)}function rH(t){return-Math.exp(-t)}function aH(t){return isFinite(t)?+("1e"+t):t<0?0:t}function sH(t){return t===10?aH:t===Math.E?Math.exp:e=>Math.pow(t,e)}function oH(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function NC(t){return(e,n)=>-t(-e,n)}function a2(t){const e=t(RC,BC),n=e.domain;let i=10,r,u;function f(){return r=oH(i),u=sH(i),n()[0]<0?(r=NC(r),u=NC(u),t(iH,rH)):t(RC,BC),e}return e.base=function(a){return arguments.length?(i=+a,f()):i},e.domain=function(a){return arguments.length?(n(a),f()):n()},e.ticks=a=>{const y=n();let _=y[0],x=y[y.length-1];const A=x<_;A&&([_,x]=[x,_]);let O=r(_),I=r(x),F,q;const H=a==null?10:+a;let K=[];if(!(i%1)&&I-O<H){if(O=Math.floor(O),I=Math.ceil(I),_>0){for(;O<=I;++O)for(F=1;F<i;++F)if(q=O<0?F/u(-O):F*u(O),!(q<_)){if(q>x)break;K.push(q)}}else for(;O<=I;++O)for(F=i-1;F>=1;--F)if(q=O>0?F/u(-O):F*u(O),!(q<_)){if(q>x)break;K.push(q)}K.length*2<H&&(K=Vw(_,x,H))}else K=Vw(O,I,Math.min(I-O,H)).map(u);return A?K.reverse():K},e.tickFormat=(a,y)=>{if(a==null&&(a=10),y==null&&(y=i===10?"s":","),typeof y!="function"&&(!(i%1)&&(y=Oy(y)).precision==null&&(y.trim=!0),y=r2(y)),a===1/0)return y;const _=Math.max(1,i*a/e.ticks().length);return x=>{let A=x/u(Math.round(r(x)));return A*i<i-.5&&(A*=i),A<=_?y(x):""}},e.nice=()=>n(Zz(n(),{floor:a=>u(Math.floor(r(a))),ceil:a=>u(Math.ceil(r(a)))})),e}function Gz(){const t=a2(bx()).domain([1,10]);return t.copy=()=>Wy(t,Gz()).base(t.base()),ku.apply(t,arguments),t}function jC(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function FC(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function s2(t){var e=1,n=t(jC(e),FC(e));return n.constant=function(i){return arguments.length?t(jC(e=+i),FC(e)):e},Vf(n)}function Wz(){var t=s2(bx());return t.copy=function(){return Wy(t,Wz()).constant(t.constant())},ku.apply(t,arguments)}function UC(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function lH(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function uH(t){return t<0?-t*t:t*t}function o2(t){var e=t(Xo,Xo),n=1;function i(){return n===1?t(Xo,Xo):n===.5?t(lH,uH):t(UC(n),UC(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},Vf(e)}function l2(){var t=o2(bx());return t.copy=function(){return Wy(t,l2()).exponent(t.exponent())},ku.apply(t,arguments),t}function cH(){return l2.apply(null,arguments).exponent(.5)}function VC(t){return Math.sign(t)*t*t}function hH(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Yz(){var t=n2(),e=[0,1],n=!1,i;function r(u){var f=hH(t(u));return isNaN(f)?i:n?Math.round(f):f}return r.invert=function(u){return t.invert(VC(u))},r.domain=function(u){return arguments.length?(t.domain(u),r):t.domain()},r.range=function(u){return arguments.length?(t.range((e=Array.from(u,E0)).map(VC)),r):e.slice()},r.rangeRound=function(u){return r.range(u).round(!0)},r.round=function(u){return arguments.length?(n=!!u,r):n},r.clamp=function(u){return arguments.length?(t.clamp(u),r):t.clamp()},r.unknown=function(u){return arguments.length?(i=u,r):i},r.copy=function(){return Yz(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},ku.apply(r,arguments),Vf(r)}function Xz(){var t=[],e=[],n=[],i;function r(){var f=0,a=Math.max(1,e.length);for(n=new Array(a-1);++f<a;)n[f-1]=m9(t,f/a);return u}function u(f){return f==null||isNaN(f=+f)?i:e[Zy(n,f)]}return u.invertExtent=function(f){var a=e.indexOf(f);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},u.domain=function(f){if(!arguments.length)return t.slice();t=[];for(let a of f)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Rf),r()},u.range=function(f){return arguments.length?(e=Array.from(f),r()):e.slice()},u.unknown=function(f){return arguments.length?(i=f,u):i},u.quantiles=function(){return n.slice()},u.copy=function(){return Xz().domain(t).range(e).unknown(i)},ku.apply(u,arguments)}function Kz(){var t=0,e=1,n=1,i=[.5],r=[0,1],u;function f(y){return y!=null&&y<=y?r[Zy(i,y,0,n)]:u}function a(){var y=-1;for(i=new Array(n);++y<n;)i[y]=((y+1)*e-(y-n)*t)/(n+1);return f}return f.domain=function(y){return arguments.length?([t,e]=y,t=+t,e=+e,a()):[t,e]},f.range=function(y){return arguments.length?(n=(r=Array.from(y)).length-1,a()):r.slice()},f.invertExtent=function(y){var _=r.indexOf(y);return _<0?[NaN,NaN]:_<1?[t,i[0]]:_>=n?[i[n-1],e]:[i[_-1],i[_]]},f.unknown=function(y){return arguments.length&&(u=y),f},f.thresholds=function(){return i.slice()},f.copy=function(){return Kz().domain([t,e]).range(r).unknown(u)},ku.apply(Vf(f),arguments)}function Qz(){var t=[.5],e=[0,1],n,i=1;function r(u){return u!=null&&u<=u?e[Zy(t,u,0,i)]:n}return r.domain=function(u){return arguments.length?(t=Array.from(u),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(u){return arguments.length?(e=Array.from(u),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(u){var f=e.indexOf(u);return[t[f-1],t[f]]},r.unknown=function(u){return arguments.length?(n=u,r):n},r.copy=function(){return Qz().domain(t).range(e).unknown(n)},ku.apply(r,arguments)}const j1=new Date,F1=new Date;function us(t,e,n,i){function r(u){return t(u=arguments.length===0?new Date:new Date(+u)),u}return r.floor=u=>(t(u=new Date(+u)),u),r.ceil=u=>(t(u=new Date(u-1)),e(u,1),t(u),u),r.round=u=>{const f=r(u),a=r.ceil(u);return u-f<a-u?f:a},r.offset=(u,f)=>(e(u=new Date(+u),f==null?1:Math.floor(f)),u),r.range=(u,f,a)=>{const y=[];if(u=r.ceil(u),a=a==null?1:Math.floor(a),!(u<f)||!(a>0))return y;let _;do y.push(_=new Date(+u)),e(u,a),t(u);while(_<u&&u<f);return y},r.filter=u=>us(f=>{if(f>=f)for(;t(f),!u(f);)f.setTime(f-1)},(f,a)=>{if(f>=f)if(a<0)for(;++a<=0;)for(;e(f,-1),!u(f););else for(;--a>=0;)for(;e(f,1),!u(f););}),n&&(r.count=(u,f)=>(j1.setTime(+u),F1.setTime(+f),t(j1),t(F1),Math.floor(n(j1,F1))),r.every=u=>(u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?r.filter(i?f=>i(f)%u===0:f=>r.count(0,f)%u===0):r)),r}const P0=us(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);P0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?us(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):P0);P0.range;const Ch=1e3,Mu=Ch*60,Ph=Mu*60,Rh=Ph*24,u2=Rh*7,$C=Rh*30,U1=Rh*365,Fd=us(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ch)},(t,e)=>(e-t)/Ch,t=>t.getUTCSeconds());Fd.range;const c2=us(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ch)},(t,e)=>{t.setTime(+t+e*Mu)},(t,e)=>(e-t)/Mu,t=>t.getMinutes());c2.range;const h2=us(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Mu)},(t,e)=>(e-t)/Mu,t=>t.getUTCMinutes());h2.range;const f2=us(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ch-t.getMinutes()*Mu)},(t,e)=>{t.setTime(+t+e*Ph)},(t,e)=>(e-t)/Ph,t=>t.getHours());f2.range;const d2=us(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ph)},(t,e)=>(e-t)/Ph,t=>t.getUTCHours());d2.range;const Yy=us(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Mu)/Rh,t=>t.getDate()-1);Yy.range;const wx=us(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rh,t=>t.getUTCDate()-1);wx.range;const Jz=us(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rh,t=>Math.floor(t/Rh));Jz.range;function ap(t){return us(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Mu)/u2)}const Sx=ap(0),k0=ap(1),fH=ap(2),dH=ap(3),Em=ap(4),pH=ap(5),mH=ap(6);Sx.range;k0.range;fH.range;dH.range;Em.range;pH.range;mH.range;function sp(t){return us(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/u2)}const Tx=sp(0),O0=sp(1),gH=sp(2),yH=sp(3),Cm=sp(4),_H=sp(5),vH=sp(6);Tx.range;O0.range;gH.range;yH.range;Cm.range;_H.range;vH.range;const p2=us(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());p2.range;const m2=us(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());m2.range;const Bh=us(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Bh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:us(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Bh.range;const Nh=us(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Nh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:us(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Nh.range;function tL(t,e,n,i,r,u){const f=[[Fd,1,Ch],[Fd,5,5*Ch],[Fd,15,15*Ch],[Fd,30,30*Ch],[u,1,Mu],[u,5,5*Mu],[u,15,15*Mu],[u,30,30*Mu],[r,1,Ph],[r,3,3*Ph],[r,6,6*Ph],[r,12,12*Ph],[i,1,Rh],[i,2,2*Rh],[n,1,u2],[e,1,$C],[e,3,3*$C],[t,1,U1]];function a(_,x,A){const O=x<_;O&&([_,x]=[x,_]);const I=A&&typeof A.range=="function"?A:y(_,x,A),F=I?I.range(_,+x+1):[];return O?F.reverse():F}function y(_,x,A){const O=Math.abs(x-_)/A,I=XS(([,,H])=>H).right(f,O);if(I===f.length)return t.every(qw(_/U1,x/U1,A));if(I===0)return P0.every(Math.max(qw(_,x,A),1));const[F,q]=f[O/f[I-1][2]<f[I][2]/O?I-1:I];return F.every(q)}return[a,y]}const[xH,bH]=tL(Nh,m2,Tx,Jz,d2,h2),[wH,SH]=tL(Bh,p2,Sx,Yy,f2,c2);function V1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function $1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Xg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function TH(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,u=t.days,f=t.shortDays,a=t.months,y=t.shortMonths,_=Kg(r),x=Qg(r),A=Kg(u),O=Qg(u),I=Kg(f),F=Qg(f),q=Kg(a),H=Qg(a),K=Kg(y),W=Qg(y),X={a:Pt,A:Bt,b:Ft,B:$t,c:null,d:YC,e:YC,f:GH,g:i7,G:a7,H:qH,I:HH,j:ZH,L:eL,m:WH,M:YH,p:ft,q:St,Q:QC,s:JC,S:XH,u:KH,U:QH,V:JH,w:t7,W:e7,x:null,X:null,y:n7,Y:r7,Z:s7,"%":KC},tt={a:jt,A:Yt,b:le,B:ce,c:null,d:XC,e:XC,f:c7,g:x7,G:w7,H:o7,I:l7,j:u7,L:iL,m:h7,M:f7,p:Oe,q:Ie,Q:QC,s:JC,S:d7,u:p7,U:m7,V:g7,w:y7,W:_7,x:null,X:null,y:v7,Y:b7,Z:S7,"%":KC},Q={a:xt,A:wt,b:Ct,B:re,c:ve,d:GC,e:GC,f:FH,g:ZC,G:HC,H:WC,I:WC,j:RH,L:jH,m:IH,M:BH,p:ct,q:LH,Q:VH,s:$H,S:NH,u:PH,U:kH,V:OH,w:CH,W:DH,x:Ee,X:Nt,y:ZC,Y:HC,Z:zH,"%":UH};X.x=at(n,X),X.X=at(i,X),X.c=at(e,X),tt.x=at(n,tt),tt.X=at(i,tt),tt.c=at(e,tt);function at(Gt,Le){return function(Pe){var ge=[],nn=-1,qe=0,an=Gt.length,Ke,On,rn;for(Pe instanceof Date||(Pe=new Date(+Pe));++nn<an;)Gt.charCodeAt(nn)===37&&(ge.push(Gt.slice(qe,nn)),(On=qC[Ke=Gt.charAt(++nn)])!=null?Ke=Gt.charAt(++nn):On=Ke==="e"?" ":"0",(rn=Le[Ke])&&(Ke=rn(Pe,On)),ge.push(Ke),qe=nn+1);return ge.push(Gt.slice(qe,nn)),ge.join("")}}function ht(Gt,Le){return function(Pe){var ge=Xg(1900,void 0,1),nn=ot(ge,Gt,Pe+="",0),qe,an;if(nn!=Pe.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(Le&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(qe=$1(Xg(ge.y,0,1)),an=qe.getUTCDay(),qe=an>4||an===0?O0.ceil(qe):O0(qe),qe=wx.offset(qe,(ge.V-1)*7),ge.y=qe.getUTCFullYear(),ge.m=qe.getUTCMonth(),ge.d=qe.getUTCDate()+(ge.w+6)%7):(qe=V1(Xg(ge.y,0,1)),an=qe.getDay(),qe=an>4||an===0?k0.ceil(qe):k0(qe),qe=Yy.offset(qe,(ge.V-1)*7),ge.y=qe.getFullYear(),ge.m=qe.getMonth(),ge.d=qe.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),an="Z"in ge?$1(Xg(ge.y,0,1)).getUTCDay():V1(Xg(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(an+5)%7:ge.w+ge.U*7-(an+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,$1(ge)):V1(ge)}}function ot(Gt,Le,Pe,ge){for(var nn=0,qe=Le.length,an=Pe.length,Ke,On;nn<qe;){if(ge>=an)return-1;if(Ke=Le.charCodeAt(nn++),Ke===37){if(Ke=Le.charAt(nn++),On=Q[Ke in qC?Le.charAt(nn++):Ke],!On||(ge=On(Gt,Pe,ge))<0)return-1}else if(Ke!=Pe.charCodeAt(ge++))return-1}return ge}function ct(Gt,Le,Pe){var ge=_.exec(Le.slice(Pe));return ge?(Gt.p=x.get(ge[0].toLowerCase()),Pe+ge[0].length):-1}function xt(Gt,Le,Pe){var ge=I.exec(Le.slice(Pe));return ge?(Gt.w=F.get(ge[0].toLowerCase()),Pe+ge[0].length):-1}function wt(Gt,Le,Pe){var ge=A.exec(Le.slice(Pe));return ge?(Gt.w=O.get(ge[0].toLowerCase()),Pe+ge[0].length):-1}function Ct(Gt,Le,Pe){var ge=K.exec(Le.slice(Pe));return ge?(Gt.m=W.get(ge[0].toLowerCase()),Pe+ge[0].length):-1}function re(Gt,Le,Pe){var ge=q.exec(Le.slice(Pe));return ge?(Gt.m=H.get(ge[0].toLowerCase()),Pe+ge[0].length):-1}function ve(Gt,Le,Pe){return ot(Gt,e,Le,Pe)}function Ee(Gt,Le,Pe){return ot(Gt,n,Le,Pe)}function Nt(Gt,Le,Pe){return ot(Gt,i,Le,Pe)}function Pt(Gt){return f[Gt.getDay()]}function Bt(Gt){return u[Gt.getDay()]}function Ft(Gt){return y[Gt.getMonth()]}function $t(Gt){return a[Gt.getMonth()]}function ft(Gt){return r[+(Gt.getHours()>=12)]}function St(Gt){return 1+~~(Gt.getMonth()/3)}function jt(Gt){return f[Gt.getUTCDay()]}function Yt(Gt){return u[Gt.getUTCDay()]}function le(Gt){return y[Gt.getUTCMonth()]}function ce(Gt){return a[Gt.getUTCMonth()]}function Oe(Gt){return r[+(Gt.getUTCHours()>=12)]}function Ie(Gt){return 1+~~(Gt.getUTCMonth()/3)}return{format:function(Gt){var Le=at(Gt+="",X);return Le.toString=function(){return Gt},Le},parse:function(Gt){var Le=ht(Gt+="",!1);return Le.toString=function(){return Gt},Le},utcFormat:function(Gt){var Le=at(Gt+="",tt);return Le.toString=function(){return Gt},Le},utcParse:function(Gt){var Le=ht(Gt+="",!0);return Le.toString=function(){return Gt},Le}}}var qC={"-":"",_:" ",0:"0"},Ms=/^\s*\d+/,MH=/^%/,AH=/[\\^$*+?|[\]().{}]/g;function Ui(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",u=r.length;return i+(u<n?new Array(n-u+1).join(e)+r:r)}function EH(t){return t.replace(AH,"\\$&")}function Kg(t){return new RegExp("^(?:"+t.map(EH).join("|")+")","i")}function Qg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function CH(t,e,n){var i=Ms.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function PH(t,e,n){var i=Ms.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function kH(t,e,n){var i=Ms.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function OH(t,e,n){var i=Ms.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function DH(t,e,n){var i=Ms.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function HC(t,e,n){var i=Ms.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function ZC(t,e,n){var i=Ms.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function zH(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function LH(t,e,n){var i=Ms.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function IH(t,e,n){var i=Ms.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function GC(t,e,n){var i=Ms.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function RH(t,e,n){var i=Ms.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function WC(t,e,n){var i=Ms.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function BH(t,e,n){var i=Ms.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function NH(t,e,n){var i=Ms.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function jH(t,e,n){var i=Ms.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function FH(t,e,n){var i=Ms.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function UH(t,e,n){var i=MH.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function VH(t,e,n){var i=Ms.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function $H(t,e,n){var i=Ms.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function YC(t,e){return Ui(t.getDate(),e,2)}function qH(t,e){return Ui(t.getHours(),e,2)}function HH(t,e){return Ui(t.getHours()%12||12,e,2)}function ZH(t,e){return Ui(1+Yy.count(Bh(t),t),e,3)}function eL(t,e){return Ui(t.getMilliseconds(),e,3)}function GH(t,e){return eL(t,e)+"000"}function WH(t,e){return Ui(t.getMonth()+1,e,2)}function YH(t,e){return Ui(t.getMinutes(),e,2)}function XH(t,e){return Ui(t.getSeconds(),e,2)}function KH(t){var e=t.getDay();return e===0?7:e}function QH(t,e){return Ui(Sx.count(Bh(t)-1,t),e,2)}function nL(t){var e=t.getDay();return e>=4||e===0?Em(t):Em.ceil(t)}function JH(t,e){return t=nL(t),Ui(Em.count(Bh(t),t)+(Bh(t).getDay()===4),e,2)}function t7(t){return t.getDay()}function e7(t,e){return Ui(k0.count(Bh(t)-1,t),e,2)}function n7(t,e){return Ui(t.getFullYear()%100,e,2)}function i7(t,e){return t=nL(t),Ui(t.getFullYear()%100,e,2)}function r7(t,e){return Ui(t.getFullYear()%1e4,e,4)}function a7(t,e){var n=t.getDay();return t=n>=4||n===0?Em(t):Em.ceil(t),Ui(t.getFullYear()%1e4,e,4)}function s7(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ui(e/60|0,"0",2)+Ui(e%60,"0",2)}function XC(t,e){return Ui(t.getUTCDate(),e,2)}function o7(t,e){return Ui(t.getUTCHours(),e,2)}function l7(t,e){return Ui(t.getUTCHours()%12||12,e,2)}function u7(t,e){return Ui(1+wx.count(Nh(t),t),e,3)}function iL(t,e){return Ui(t.getUTCMilliseconds(),e,3)}function c7(t,e){return iL(t,e)+"000"}function h7(t,e){return Ui(t.getUTCMonth()+1,e,2)}function f7(t,e){return Ui(t.getUTCMinutes(),e,2)}function d7(t,e){return Ui(t.getUTCSeconds(),e,2)}function p7(t){var e=t.getUTCDay();return e===0?7:e}function m7(t,e){return Ui(Tx.count(Nh(t)-1,t),e,2)}function rL(t){var e=t.getUTCDay();return e>=4||e===0?Cm(t):Cm.ceil(t)}function g7(t,e){return t=rL(t),Ui(Cm.count(Nh(t),t)+(Nh(t).getUTCDay()===4),e,2)}function y7(t){return t.getUTCDay()}function _7(t,e){return Ui(O0.count(Nh(t)-1,t),e,2)}function v7(t,e){return Ui(t.getUTCFullYear()%100,e,2)}function x7(t,e){return t=rL(t),Ui(t.getUTCFullYear()%100,e,2)}function b7(t,e){return Ui(t.getUTCFullYear()%1e4,e,4)}function w7(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Cm(t):Cm.ceil(t),Ui(t.getUTCFullYear()%1e4,e,4)}function S7(){return"+0000"}function KC(){return"%"}function QC(t){return+t}function JC(t){return Math.floor(+t/1e3)}var hm,aL,sL;T7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function T7(t){return hm=TH(t),aL=hm.format,hm.parse,sL=hm.utcFormat,hm.utcParse,hm}function M7(t){return new Date(t)}function A7(t){return t instanceof Date?+t:+new Date(+t)}function g2(t,e,n,i,r,u,f,a,y,_){var x=n2(),A=x.invert,O=x.domain,I=_(".%L"),F=_(":%S"),q=_("%I:%M"),H=_("%I %p"),K=_("%a %d"),W=_("%b %d"),X=_("%B"),tt=_("%Y");function Q(at){return(y(at)<at?I:a(at)<at?F:f(at)<at?q:u(at)<at?H:i(at)<at?r(at)<at?K:W:n(at)<at?X:tt)(at)}return x.invert=function(at){return new Date(A(at))},x.domain=function(at){return arguments.length?O(Array.from(at,A7)):O().map(M7)},x.ticks=function(at){var ht=O();return t(ht[0],ht[ht.length-1],at??10)},x.tickFormat=function(at,ht){return ht==null?Q:_(ht)},x.nice=function(at){var ht=O();return(!at||typeof at.range!="function")&&(at=e(ht[0],ht[ht.length-1],at??10)),at?O(Zz(ht,at)):x},x.copy=function(){return Wy(x,g2(t,e,n,i,r,u,f,a,y,_))},x}function E7(){return ku.apply(g2(wH,SH,Bh,p2,Sx,Yy,f2,c2,Fd,aL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function C7(){return ku.apply(g2(xH,bH,Nh,m2,Tx,wx,d2,h2,Fd,sL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mx(){var t=0,e=1,n,i,r,u,f=Xo,a=!1,y;function _(A){return A==null||isNaN(A=+A)?y:f(r===0?.5:(A=(u(A)-n)*r,a?Math.max(0,Math.min(1,A)):A))}_.domain=function(A){return arguments.length?([t,e]=A,n=u(t=+t),i=u(e=+e),r=n===i?0:1/(i-n),_):[t,e]},_.clamp=function(A){return arguments.length?(a=!!A,_):a},_.interpolator=function(A){return arguments.length?(f=A,_):f};function x(A){return function(O){var I,F;return arguments.length?([I,F]=O,f=A(I,F),_):[f(0),f(1)]}}return _.range=x(Bm),_.rangeRound=x(e2),_.unknown=function(A){return arguments.length?(y=A,_):y},function(A){return u=A,n=A(t),i=A(e),r=n===i?0:1/(i-n),_}}function $f(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function oL(){var t=Vf(Mx()(Xo));return t.copy=function(){return $f(t,oL())},Hh.apply(t,arguments)}function lL(){var t=a2(Mx()).domain([1,10]);return t.copy=function(){return $f(t,lL()).base(t.base())},Hh.apply(t,arguments)}function uL(){var t=s2(Mx());return t.copy=function(){return $f(t,uL()).constant(t.constant())},Hh.apply(t,arguments)}function y2(){var t=o2(Mx());return t.copy=function(){return $f(t,y2()).exponent(t.exponent())},Hh.apply(t,arguments)}function P7(){return y2.apply(null,arguments).exponent(.5)}function cL(){var t=[],e=Xo;function n(i){if(i!=null&&!isNaN(i=+i))return e((Zy(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let r of i)r!=null&&!isNaN(r=+r)&&t.push(r);return t.sort(Rf),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,r)=>e(r/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,u)=>p9(t,u/i))},n.copy=function(){return cL(e).domain(t)},Hh.apply(n,arguments)}function Ax(){var t=0,e=.5,n=1,i=1,r,u,f,a,y,_=Xo,x,A=!1,O;function I(q){return isNaN(q=+q)?O:(q=.5+((q=+x(q))-u)*(i*q<i*u?a:y),_(A?Math.max(0,Math.min(1,q)):q))}I.domain=function(q){return arguments.length?([t,e,n]=q,r=x(t=+t),u=x(e=+e),f=x(n=+n),a=r===u?0:.5/(u-r),y=u===f?0:.5/(f-u),i=u<r?-1:1,I):[t,e,n]},I.clamp=function(q){return arguments.length?(A=!!q,I):A},I.interpolator=function(q){return arguments.length?(_=q,I):_};function F(q){return function(H){var K,W,X;return arguments.length?([K,W,X]=H,_=U9(q,[K,W,X]),I):[_(0),_(.5),_(1)]}}return I.range=F(Bm),I.rangeRound=F(e2),I.unknown=function(q){return arguments.length?(O=q,I):O},function(q){return x=q,r=q(t),u=q(e),f=q(n),a=r===u?0:.5/(u-r),y=u===f?0:.5/(f-u),i=u<r?-1:1,I}}function hL(){var t=Vf(Ax()(Xo));return t.copy=function(){return $f(t,hL())},Hh.apply(t,arguments)}function fL(){var t=a2(Ax()).domain([.1,1,10]);return t.copy=function(){return $f(t,fL()).base(t.base())},Hh.apply(t,arguments)}function dL(){var t=s2(Ax());return t.copy=function(){return $f(t,dL()).constant(t.constant())},Hh.apply(t,arguments)}function _2(){var t=o2(Ax());return t.copy=function(){return $f(t,_2()).exponent(t.exponent())},Hh.apply(t,arguments)}function k7(){return _2.apply(null,arguments).exponent(.5)}const uy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:QS,scaleDiverging:hL,scaleDivergingLog:fL,scaleDivergingPow:_2,scaleDivergingSqrt:k7,scaleDivergingSymlog:dL,scaleIdentity:Hz,scaleImplicit:Hw,scaleLinear:qz,scaleLog:Gz,scaleOrdinal:KS,scalePoint:y9,scalePow:l2,scaleQuantile:Xz,scaleQuantize:Kz,scaleRadial:Yz,scaleSequential:oL,scaleSequentialLog:lL,scaleSequentialPow:y2,scaleSequentialQuantile:cL,scaleSequentialSqrt:P7,scaleSequentialSymlog:uL,scaleSqrt:cH,scaleSymlog:Wz,scaleThreshold:Qz,scaleTime:E7,scaleUtc:C7,tickFormat:$z},Symbol.toStringTag,{value:"Module"}));var qf=t=>t.chartData,O7=we([qf],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),v2=(t,e,n,i)=>i?O7(t):qf(t);function Jd(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(ya(e)&&ya(n))return!0}return!1}function tP(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function pL(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,i]=t,r,u;if(ya(n))r=n;else if(typeof n=="function")return;if(ya(i))u=i;else if(typeof i=="function")return;var f=[r,u];if(Jd(f))return f}}function D7(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var i=t(e,n);if(Jd(i))return tP(i,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[r,u]=t,f,a;if(r==="auto")e!=null&&(f=Math.min(...e));else if(xn(r))f=r;else if(typeof r=="function")try{e!=null&&(f=r(e?.[0]))}catch{}else if(typeof r=="string"&&RE.test(r)){var y=RE.exec(r);if(y==null||e==null)f=void 0;else{var _=+y[1];f=e[0]-_}}else f=e?.[0];if(u==="auto")e!=null&&(a=Math.max(...e));else if(xn(u))a=u;else if(typeof u=="function")try{e!=null&&(a=u(e?.[1]))}catch{}else if(typeof u=="string"&&BE.test(u)){var x=BE.exec(u);if(x==null||e==null)a=void 0;else{var A=+x[1];a=e[1]+A}}else a=e?.[1];var O=[f,a];if(Jd(O))return e==null?O:tP(O,e,n)}}}var Nm=1e9,z7={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},b2,Gr=!0,Cu="[DecimalError] ",Gd=Cu+"Invalid argument: ",x2=Cu+"Exponent out of range: ",jm=Math.floor,Nd=Math.pow,L7=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Wl,ws=1e7,Rr=7,mL=9007199254740991,D0=jm(mL/Rr),mn={};mn.absoluteValue=mn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};mn.comparedTo=mn.cmp=function(t){var e,n,i,r,u=this;if(t=new u.constructor(t),u.s!==t.s)return u.s||-t.s;if(u.e!==t.e)return u.e>t.e^u.s<0?1:-1;for(i=u.d.length,r=t.d.length,e=0,n=i<r?i:r;e<n;++e)if(u.d[e]!==t.d[e])return u.d[e]>t.d[e]^u.s<0?1:-1;return i===r?0:i>r^u.s<0?1:-1};mn.decimalPlaces=mn.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Rr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};mn.dividedBy=mn.div=function(t){return Dh(this,new this.constructor(t))};mn.dividedToIntegerBy=mn.idiv=function(t){var e=this,n=e.constructor;return vr(Dh(e,new n(t),0,1),n.precision)};mn.equals=mn.eq=function(t){return!this.cmp(t)};mn.exponent=function(){return Ga(this)};mn.greaterThan=mn.gt=function(t){return this.cmp(t)>0};mn.greaterThanOrEqualTo=mn.gte=function(t){return this.cmp(t)>=0};mn.isInteger=mn.isint=function(){return this.e>this.d.length-2};mn.isNegative=mn.isneg=function(){return this.s<0};mn.isPositive=mn.ispos=function(){return this.s>0};mn.isZero=function(){return this.s===0};mn.lessThan=mn.lt=function(t){return this.cmp(t)<0};mn.lessThanOrEqualTo=mn.lte=function(t){return this.cmp(t)<1};mn.logarithm=mn.log=function(t){var e,n=this,i=n.constructor,r=i.precision,u=r+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(Wl))throw Error(Cu+"NaN");if(n.s<1)throw Error(Cu+(n.s?"NaN":"-Infinity"));return n.eq(Wl)?new i(0):(Gr=!1,e=Dh(Dy(n,u),Dy(t,u),u),Gr=!0,vr(e,r))};mn.minus=mn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?_L(e,t):gL(e,(t.s=-t.s,t))};mn.modulo=mn.mod=function(t){var e,n=this,i=n.constructor,r=i.precision;if(t=new i(t),!t.s)throw Error(Cu+"NaN");return n.s?(Gr=!1,e=Dh(n,t,0,1).times(t),Gr=!0,n.minus(e)):vr(new i(n),r)};mn.naturalExponential=mn.exp=function(){return yL(this)};mn.naturalLogarithm=mn.ln=function(){return Dy(this)};mn.negated=mn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};mn.plus=mn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?gL(e,t):_L(e,(t.s=-t.s,t))};mn.precision=mn.sd=function(t){var e,n,i,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Gd+t);if(e=Ga(r)+1,i=r.d.length-1,n=i*Rr+1,i=r.d[i],i){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};mn.squareRoot=mn.sqrt=function(){var t,e,n,i,r,u,f,a=this,y=a.constructor;if(a.s<1){if(!a.s)return new y(0);throw Error(Cu+"NaN")}for(t=Ga(a),Gr=!1,r=Math.sqrt(+a),r==0||r==1/0?(e=Nc(a.d),(e.length+t)%2==0&&(e+="0"),r=Math.sqrt(e),t=jm((t+1)/2)-(t<0||t%2),r==1/0?e="5e"+t:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new y(e)):i=new y(r.toString()),n=y.precision,r=f=n+3;;)if(u=i,i=u.plus(Dh(a,u,f+2)).times(.5),Nc(u.d).slice(0,f)===(e=Nc(i.d)).slice(0,f)){if(e=e.slice(f-3,f+1),r==f&&e=="4999"){if(vr(u,n+1,0),u.times(u).eq(a)){i=u;break}}else if(e!="9999")break;f+=4}return Gr=!0,vr(i,n)};mn.times=mn.mul=function(t){var e,n,i,r,u,f,a,y,_,x=this,A=x.constructor,O=x.d,I=(t=new A(t)).d;if(!x.s||!t.s)return new A(0);for(t.s*=x.s,n=x.e+t.e,y=O.length,_=I.length,y<_&&(u=O,O=I,I=u,f=y,y=_,_=f),u=[],f=y+_,i=f;i--;)u.push(0);for(i=_;--i>=0;){for(e=0,r=y+i;r>i;)a=u[r]+I[i]*O[r-i-1]+e,u[r--]=a%ws|0,e=a/ws|0;u[r]=(u[r]+e)%ws|0}for(;!u[--f];)u.pop();return e?++n:u.shift(),t.d=u,t.e=n,Gr?vr(t,A.precision):t};mn.toDecimalPlaces=mn.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Hc(t,0,Nm),e===void 0?e=i.rounding:Hc(e,0,8),vr(n,t+Ga(n)+1,e))};mn.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=tp(i,!0):(Hc(t,0,Nm),e===void 0?e=r.rounding:Hc(e,0,8),i=vr(new r(i),t+1,e),n=tp(i,!0,t+1)),n};mn.toFixed=function(t,e){var n,i,r=this,u=r.constructor;return t===void 0?tp(r):(Hc(t,0,Nm),e===void 0?e=u.rounding:Hc(e,0,8),i=vr(new u(r),t+Ga(r)+1,e),n=tp(i.abs(),!1,t+Ga(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)};mn.toInteger=mn.toint=function(){var t=this,e=t.constructor;return vr(new e(t),Ga(t)+1,e.rounding)};mn.toNumber=function(){return+this};mn.toPower=mn.pow=function(t){var e,n,i,r,u,f,a=this,y=a.constructor,_=12,x=+(t=new y(t));if(!t.s)return new y(Wl);if(a=new y(a),!a.s){if(t.s<1)throw Error(Cu+"Infinity");return a}if(a.eq(Wl))return a;if(i=y.precision,t.eq(Wl))return vr(a,i);if(e=t.e,n=t.d.length-1,f=e>=n,u=a.s,f){if((n=x<0?-x:x)<=mL){for(r=new y(Wl),e=Math.ceil(i/Rr+4),Gr=!1;n%2&&(r=r.times(a),nP(r.d,e)),n=jm(n/2),n!==0;)a=a.times(a),nP(a.d,e);return Gr=!0,t.s<0?new y(Wl).div(r):vr(r,i)}}else if(u<0)throw Error(Cu+"NaN");return u=u<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Gr=!1,r=t.times(Dy(a,i+_)),Gr=!0,r=yL(r),r.s=u,r};mn.toPrecision=function(t,e){var n,i,r=this,u=r.constructor;return t===void 0?(n=Ga(r),i=tp(r,n<=u.toExpNeg||n>=u.toExpPos)):(Hc(t,1,Nm),e===void 0?e=u.rounding:Hc(e,0,8),r=vr(new u(r),t,e),n=Ga(r),i=tp(r,t<=n||n<=u.toExpNeg,t)),i};mn.toSignificantDigits=mn.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Hc(t,1,Nm),e===void 0?e=i.rounding:Hc(e,0,8)),vr(new i(n),t,e)};mn.toString=mn.valueOf=mn.val=mn.toJSON=mn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ga(t),n=t.constructor;return tp(t,e<=n.toExpNeg||e>=n.toExpPos)};function gL(t,e){var n,i,r,u,f,a,y,_,x=t.constructor,A=x.precision;if(!t.s||!e.s)return e.s||(e=new x(t)),Gr?vr(e,A):e;if(y=t.d,_=e.d,f=t.e,r=e.e,y=y.slice(),u=f-r,u){for(u<0?(i=y,u=-u,a=_.length):(i=_,r=f,a=y.length),f=Math.ceil(A/Rr),a=f>a?f+1:a+1,u>a&&(u=a,i.length=1),i.reverse();u--;)i.push(0);i.reverse()}for(a=y.length,u=_.length,a-u<0&&(u=a,i=_,_=y,y=i),n=0;u;)n=(y[--u]=y[u]+_[u]+n)/ws|0,y[u]%=ws;for(n&&(y.unshift(n),++r),a=y.length;y[--a]==0;)y.pop();return e.d=y,e.e=r,Gr?vr(e,A):e}function Hc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Gd+t)}function Nc(t){var e,n,i,r=t.length-1,u="",f=t[0];if(r>0){for(u+=f,e=1;e<r;e++)i=t[e]+"",n=Rr-i.length,n&&(u+=Ef(n)),u+=i;f=t[e],i=f+"",n=Rr-i.length,n&&(u+=Ef(n))}else if(f===0)return"0";for(;f%10===0;)f/=10;return u+f}var Dh=(function(){function t(i,r){var u,f=0,a=i.length;for(i=i.slice();a--;)u=i[a]*r+f,i[a]=u%ws|0,f=u/ws|0;return f&&i.unshift(f),i}function e(i,r,u,f){var a,y;if(u!=f)y=u>f?1:-1;else for(a=y=0;a<u;a++)if(i[a]!=r[a]){y=i[a]>r[a]?1:-1;break}return y}function n(i,r,u){for(var f=0;u--;)i[u]-=f,f=i[u]<r[u]?1:0,i[u]=f*ws+i[u]-r[u];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,u,f){var a,y,_,x,A,O,I,F,q,H,K,W,X,tt,Q,at,ht,ot,ct=i.constructor,xt=i.s==r.s?1:-1,wt=i.d,Ct=r.d;if(!i.s)return new ct(i);if(!r.s)throw Error(Cu+"Division by zero");for(y=i.e-r.e,ht=Ct.length,Q=wt.length,I=new ct(xt),F=I.d=[],_=0;Ct[_]==(wt[_]||0);)++_;if(Ct[_]>(wt[_]||0)&&--y,u==null?W=u=ct.precision:f?W=u+(Ga(i)-Ga(r))+1:W=u,W<0)return new ct(0);if(W=W/Rr+2|0,_=0,ht==1)for(x=0,Ct=Ct[0],W++;(_<Q||x)&&W--;_++)X=x*ws+(wt[_]||0),F[_]=X/Ct|0,x=X%Ct|0;else{for(x=ws/(Ct[0]+1)|0,x>1&&(Ct=t(Ct,x),wt=t(wt,x),ht=Ct.length,Q=wt.length),tt=ht,q=wt.slice(0,ht),H=q.length;H<ht;)q[H++]=0;ot=Ct.slice(),ot.unshift(0),at=Ct[0],Ct[1]>=ws/2&&++at;do x=0,a=e(Ct,q,ht,H),a<0?(K=q[0],ht!=H&&(K=K*ws+(q[1]||0)),x=K/at|0,x>1?(x>=ws&&(x=ws-1),A=t(Ct,x),O=A.length,H=q.length,a=e(A,q,O,H),a==1&&(x--,n(A,ht<O?ot:Ct,O))):(x==0&&(a=x=1),A=Ct.slice()),O=A.length,O<H&&A.unshift(0),n(q,A,H),a==-1&&(H=q.length,a=e(Ct,q,ht,H),a<1&&(x++,n(q,ht<H?ot:Ct,H))),H=q.length):a===0&&(x++,q=[0]),F[_++]=x,a&&q[0]?q[H++]=wt[tt]||0:(q=[wt[tt]],H=1);while((tt++<Q||q[0]!==void 0)&&W--)}return F[0]||F.shift(),I.e=y,vr(I,f?u+Ga(I)+1:u)}})();function yL(t,e){var n,i,r,u,f,a,y=0,_=0,x=t.constructor,A=x.precision;if(Ga(t)>16)throw Error(x2+Ga(t));if(!t.s)return new x(Wl);for(Gr=!1,a=A,f=new x(.03125);t.abs().gte(.1);)t=t.times(f),_+=5;for(i=Math.log(Nd(2,_))/Math.LN10*2+5|0,a+=i,n=r=u=new x(Wl),x.precision=a;;){if(r=vr(r.times(t),a),n=n.times(++y),f=u.plus(Dh(r,n,a)),Nc(f.d).slice(0,a)===Nc(u.d).slice(0,a)){for(;_--;)u=vr(u.times(u),a);return x.precision=A,e==null?(Gr=!0,vr(u,A)):u}u=f}}function Ga(t){for(var e=t.e*Rr,n=t.d[0];n>=10;n/=10)e++;return e}function q1(t,e,n){if(e>t.LN10.sd())throw Gr=!0,n&&(t.precision=n),Error(Cu+"LN10 precision limit exceeded");return vr(new t(t.LN10),e)}function Ef(t){for(var e="";t--;)e+="0";return e}function Dy(t,e){var n,i,r,u,f,a,y,_,x,A=1,O=10,I=t,F=I.d,q=I.constructor,H=q.precision;if(I.s<1)throw Error(Cu+(I.s?"NaN":"-Infinity"));if(I.eq(Wl))return new q(0);if(e==null?(Gr=!1,_=H):_=e,I.eq(10))return e==null&&(Gr=!0),q1(q,_);if(_+=O,q.precision=_,n=Nc(F),i=n.charAt(0),u=Ga(I),Math.abs(u)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)I=I.times(t),n=Nc(I.d),i=n.charAt(0),A++;u=Ga(I),i>1?(I=new q("0."+n),u++):I=new q(i+"."+n.slice(1))}else return y=q1(q,_+2,H).times(u+""),I=Dy(new q(i+"."+n.slice(1)),_-O).plus(y),q.precision=H,e==null?(Gr=!0,vr(I,H)):I;for(a=f=I=Dh(I.minus(Wl),I.plus(Wl),_),x=vr(I.times(I),_),r=3;;){if(f=vr(f.times(x),_),y=a.plus(Dh(f,new q(r),_)),Nc(y.d).slice(0,_)===Nc(a.d).slice(0,_))return a=a.times(2),u!==0&&(a=a.plus(q1(q,_+2,H).times(u+""))),a=Dh(a,new q(A),_),q.precision=H,e==null?(Gr=!0,vr(a,H)):a;a=y,r+=2}}function eP(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,n=n-i-1,t.e=jm(n/Rr),t.d=[],i=(n+1)%Rr,n<0&&(i+=Rr),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=Rr;i<r;)t.d.push(+e.slice(i,i+=Rr));e=e.slice(i),i=Rr-e.length}else i-=r;for(;i--;)e+="0";if(t.d.push(+e),Gr&&(t.e>D0||t.e<-D0))throw Error(x2+n)}else t.s=0,t.e=0,t.d=[0];return t}function vr(t,e,n){var i,r,u,f,a,y,_,x,A=t.d;for(f=1,u=A[0];u>=10;u/=10)f++;if(i=e-f,i<0)i+=Rr,r=e,_=A[x=0];else{if(x=Math.ceil((i+1)/Rr),u=A.length,x>=u)return t;for(_=u=A[x],f=1;u>=10;u/=10)f++;i%=Rr,r=i-Rr+f}if(n!==void 0&&(u=Nd(10,f-r-1),a=_/u%10|0,y=e<0||A[x+1]!==void 0||_%u,y=n<4?(a||y)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||y||n==6&&(i>0?r>0?_/Nd(10,f-r):0:A[x-1])%10&1||n==(t.s<0?8:7))),e<1||!A[0])return y?(u=Ga(t),A.length=1,e=e-u-1,A[0]=Nd(10,(Rr-e%Rr)%Rr),t.e=jm(-e/Rr)||0):(A.length=1,A[0]=t.e=t.s=0),t;if(i==0?(A.length=x,u=1,x--):(A.length=x+1,u=Nd(10,Rr-i),A[x]=r>0?(_/Nd(10,f-r)%Nd(10,r)|0)*u:0),y)for(;;)if(x==0){(A[0]+=u)==ws&&(A[0]=1,++t.e);break}else{if(A[x]+=u,A[x]!=ws)break;A[x--]=0,u=1}for(i=A.length;A[--i]===0;)A.pop();if(Gr&&(t.e>D0||t.e<-D0))throw Error(x2+Ga(t));return t}function _L(t,e){var n,i,r,u,f,a,y,_,x,A,O=t.constructor,I=O.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new O(t),Gr?vr(e,I):e;if(y=t.d,A=e.d,i=e.e,_=t.e,y=y.slice(),f=_-i,f){for(x=f<0,x?(n=y,f=-f,a=A.length):(n=A,i=_,a=y.length),r=Math.max(Math.ceil(I/Rr),a)+2,f>r&&(f=r,n.length=1),n.reverse(),r=f;r--;)n.push(0);n.reverse()}else{for(r=y.length,a=A.length,x=r<a,x&&(a=r),r=0;r<a;r++)if(y[r]!=A[r]){x=y[r]<A[r];break}f=0}for(x&&(n=y,y=A,A=n,e.s=-e.s),a=y.length,r=A.length-a;r>0;--r)y[a++]=0;for(r=A.length;r>f;){if(y[--r]<A[r]){for(u=r;u&&y[--u]===0;)y[u]=ws-1;--y[u],y[r]+=ws}y[r]-=A[r]}for(;y[--a]===0;)y.pop();for(;y[0]===0;y.shift())--i;return y[0]?(e.d=y,e.e=i,Gr?vr(e,I):e):new O(0)}function tp(t,e,n){var i,r=Ga(t),u=Nc(t.d),f=u.length;return e?(n&&(i=n-f)>0?u=u.charAt(0)+"."+u.slice(1)+Ef(i):f>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(r<0?"e":"e+")+r):r<0?(u="0."+Ef(-r-1)+u,n&&(i=n-f)>0&&(u+=Ef(i))):r>=f?(u+=Ef(r+1-f),n&&(i=n-r-1)>0&&(u=u+"."+Ef(i))):((i=r+1)<f&&(u=u.slice(0,i)+"."+u.slice(i)),n&&(i=n-f)>0&&(r+1===f&&(u+="."),u+=Ef(i))),t.s<0?"-"+u:u}function nP(t,e){if(t.length>e)return t.length=e,!0}function vL(t){var e,n,i;function r(u){var f=this;if(!(f instanceof r))return new r(u);if(f.constructor=r,u instanceof r){f.s=u.s,f.e=u.e,f.d=(u=u.d)?u.slice():u;return}if(typeof u=="number"){if(u*0!==0)throw Error(Gd+u);if(u>0)f.s=1;else if(u<0)u=-u,f.s=-1;else{f.s=0,f.e=0,f.d=[0];return}if(u===~~u&&u<1e7){f.e=0,f.d=[u];return}return eP(f,u.toString())}else if(typeof u!="string")throw Error(Gd+u);if(u.charCodeAt(0)===45?(u=u.slice(1),f.s=-1):f.s=1,L7.test(u))eP(f,u);else throw Error(Gd+u)}if(r.prototype=mn,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=vL,r.config=r.set=I7,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function I7(t){if(!t||typeof t!="object")throw Error(Cu+"Object expected");var e,n,i,r=["precision",1,Nm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=t[n=r[e]])!==void 0)if(jm(i)===i&&i>=r[e+1]&&i<=r[e+2])this[n]=i;else throw Error(Gd+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(Gd+n+": "+i);return this}var b2=vL(z7);Wl=new b2(1);const er=b2;var R7=t=>t,xL={},bL=t=>t===xL,iP=t=>function e(){return arguments.length===0||arguments.length===1&&bL(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},wL=(t,e)=>t===1?e:iP(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var u=i.filter(f=>f!==xL).length;return u>=t?e(...i):wL(t-u,iP(function(){for(var f=arguments.length,a=new Array(f),y=0;y<f;y++)a[y]=arguments[y];var _=i.map(x=>bL(x)?a.shift():x);return e(..._,...a)}))}),Ex=t=>wL(t.length,t),Yw=(t,e)=>{for(var n=[],i=t;i<e;++i)n[i-t]=i;return n},B7=Ex((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),N7=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return R7;var r=n.reverse(),u=r[0],f=r.slice(1);return function(){return f.reduce((a,y)=>y(a),u(...arguments))}},Xw=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),SL=t=>{var e=null,n=null;return function(){for(var i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return e&&r.every((f,a)=>{var y;return f===((y=e)===null||y===void 0?void 0:y[a])})||(e=r,n=t(...r)),n}};function TL(t){var e;return t===0?e=1:e=Math.floor(new er(t).abs().log(10).toNumber())+1,e}function ML(t,e,n){for(var i=new er(t),r=0,u=[];i.lt(e)&&r<1e5;)u.push(i.toNumber()),i=i.add(n),r++;return u}Ex((t,e,n)=>{var i=+t,r=+e;return i+n*(r-i)});Ex((t,e,n)=>{var i=e-+t;return i=i||1/0,(n-t)/i});Ex((t,e,n)=>{var i=e-+t;return i=i||1/0,Math.max(0,Math.min(1,(n-t)/i))});var AL=t=>{var[e,n]=t,[i,r]=[e,n];return e>n&&([i,r]=[n,e]),[i,r]},EL=(t,e,n)=>{if(t.lte(0))return new er(0);var i=TL(t.toNumber()),r=new er(10).pow(i),u=t.div(r),f=i!==1?.05:.1,a=new er(Math.ceil(u.div(f).toNumber())).add(n).mul(f),y=a.mul(r);return e?new er(y.toNumber()):new er(Math.ceil(y.toNumber()))},j7=(t,e,n)=>{var i=new er(1),r=new er(t);if(!r.isint()&&n){var u=Math.abs(t);u<1?(i=new er(10).pow(TL(t)-1),r=new er(Math.floor(r.div(i).toNumber())).mul(i)):u>1&&(r=new er(Math.floor(t)))}else t===0?r=new er(Math.floor((e-1)/2)):n||(r=new er(Math.floor(t)));var f=Math.floor((e-1)/2),a=N7(B7(y=>r.add(new er(y-f).mul(i)).toNumber()),Yw);return a(0,e)},CL=function(e,n,i,r){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(i-1)))return{step:new er(0),tickMin:new er(0),tickMax:new er(0)};var f=EL(new er(n).sub(e).div(i-1),r,u),a;e<=0&&n>=0?a=new er(0):(a=new er(e).add(n).div(2),a=a.sub(new er(a).mod(f)));var y=Math.ceil(a.sub(e).div(f).toNumber()),_=Math.ceil(new er(n).sub(a).div(f).toNumber()),x=y+_+1;return x>i?CL(e,n,i,r,u+1):(x<i&&(_=n>0?_+(i-x):_,y=n>0?y:y+(i-x)),{step:f,tickMin:a.sub(new er(y).mul(f)),tickMax:a.add(new er(_).mul(f))})};function F7(t){var[e,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(i,2),[f,a]=AL([e,n]);if(f===-1/0||a===1/0){var y=a===1/0?[f,...Yw(0,i-1).map(()=>1/0)]:[...Yw(0,i-1).map(()=>-1/0),a];return e>n?Xw(y):y}if(f===a)return j7(f,i,r);var{step:_,tickMin:x,tickMax:A}=CL(f,a,u,r,0),O=ML(x,A.add(new er(.1).mul(_)),_);return e>n?Xw(O):O}function U7(t,e){var[n,i]=t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,f]=AL([n,i]);if(u===-1/0||f===1/0)return[n,i];if(u===f)return[u];var a=Math.max(e,2),y=EL(new er(f).sub(u).div(a-1),r,0),_=[...ML(new er(u),new er(f),y),f];return r===!1&&(_=_.map(x=>Math.round(x))),n>i?Xw(_):_}var V7=SL(F7),$7=SL(U7),q7=t=>t.rootProps.barCategoryGap,Cx=t=>t.rootProps.stackOffset,w2=t=>t.options.chartName,S2=t=>t.rootProps.syncId,PL=t=>t.rootProps.syncMethod,T2=t=>t.options.eventEmitter,H7=t=>t.rootProps.baseValue,Ko={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Sh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Gl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Px=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Z7={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Sh.angleAxisId,includeHidden:!1,name:void 0,reversed:Sh.reversed,scale:Sh.scale,tick:Sh.tick,tickCount:void 0,ticks:void 0,type:Sh.type,unit:void 0},G7={allowDataOverflow:Gl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gl.scale,tick:Gl.tick,tickCount:Gl.tickCount,ticks:void 0,type:Gl.type,unit:void 0},W7={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Sh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Sh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Sh.scale,tick:Sh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Y7={allowDataOverflow:Gl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gl.scale,tick:Gl.tick,tickCount:Gl.tickCount,ticks:void 0,type:"category",unit:void 0},M2=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?W7:Z7,A2=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Y7:G7,kx=t=>t.polarOptions,E2=we([$h,qh,Gs],Uq),kL=we([kx,E2],(t,e)=>{if(t!=null)return jf(t.innerRadius,e,0)}),OL=we([kx,E2],(t,e)=>{if(t!=null)return jf(t.outerRadius,e,e*.8)}),X7=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},DL=we([kx],X7);we([M2,DL],Px);var zL=we([E2,kL,OL],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});we([A2,zL],Px);var LL=we([Tr,kx,kL,OL,$h,qh],(t,e,n,i,r,u)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||i==null)){var{cx:f,cy:a,startAngle:y,endAngle:_}=e;return{cx:jf(f,r,r/2),cy:jf(a,u,u/2),innerRadius:n,outerRadius:i,startAngle:y,endAngle:_,clockWise:!1}}}),cs=(t,e)=>e,Ox=(t,e,n)=>n;function C2(t){return t?.id}function IL(t,e,n){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:u}=n,f=new Map;return t.forEach(a=>{var y,_=(y=a.data)!==null&&y!==void 0?y:i;if(!(_==null||_.length===0)){var x=C2(a);_.forEach((A,O)=>{var I=u==null||r?O:String(Qo(A,u,null)),F=Qo(A,a.dataKey,0),q;f.has(I)?q=f.get(I):q={},Object.assign(q,{[x]:F}),f.set(I,q)})}}),Array.from(f.values())}function P2(t){return t.stackId!=null&&t.dataKey!=null}var Dx=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function zx(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function K7(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var hs=t=>{var e=Tr(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Fm=t=>t.tooltip.settings.axisId;function rP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function z0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rP(Object(n),!0).forEach(function(i){Q7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Q7(t,e,n){return(e=J7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J7(t){var e=tZ(t,"string");return typeof e=="symbol"?e:e+""}function tZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kw=[0,"auto"],$l={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},RL=(t,e)=>t.cartesianAxis.xAxis[e],Zh=(t,e)=>{var n=RL(t,e);return n??$l},ql={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Kw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Hy},BL=(t,e)=>t.cartesianAxis.yAxis[e],Gh=(t,e)=>{var n=BL(t,e);return n??ql},eZ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},k2=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??eZ},Jo=(t,e,n)=>{switch(e){case"xAxis":return Zh(t,n);case"yAxis":return Gh(t,n);case"zAxis":return k2(t,n);case"angleAxis":return M2(t,n);case"radiusAxis":return A2(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},nZ=(t,e,n)=>{switch(e){case"xAxis":return Zh(t,n);case"yAxis":return Gh(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Xy=(t,e,n)=>{switch(e){case"xAxis":return Zh(t,n);case"yAxis":return Gh(t,n);case"angleAxis":return M2(t,n);case"radiusAxis":return A2(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},NL=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function jL(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var FL=t=>t.graphicalItems.cartesianItems,iZ=we([cs,Ox],jL),UL=(t,e,n)=>t.filter(n).filter(i=>e?.includeHidden===!0?!0:!i.hide),Ky=we([FL,Jo,iZ],UL,{memoizeOptions:{resultEqualityCheck:zx}}),VL=we([Ky],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(P2)),$L=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),rZ=we([Ky],$L),qL=t=>t.map(e=>e.data).filter(Boolean).flat(1),aZ=we([Ky],qL,{memoizeOptions:{resultEqualityCheck:zx}}),HL=(t,e)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=e;return t.length>0?t:n.slice(i,r+1)},O2=we([aZ,v2],HL),ZL=(t,e,n)=>e?.dataKey!=null?t.map(i=>({value:Qo(i,e.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>t.map(r=>({value:Qo(r,i)}))):t.map(i=>({value:i})),Lx=we([O2,Jo,Ky],ZL);function GL(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Gv(t){if($c(t)||t instanceof Date){var e=Number(t);if(ya(e))return e}}function aP(t){if(Array.isArray(t)){var e=[Gv(t[0]),Gv(t[1])];return Jd(e)?e:void 0}var n=Gv(t);if(n!=null)return[n,n]}function jh(t){return t.map(Gv).filter(j8)}function sZ(t,e,n){return!n||typeof e!="number"||dc(e)?[]:n.length?jh(n.flatMap(i=>{var r=Qo(t,i.dataKey),u,f;if(Array.isArray(r)?[u,f]=r:u=f=r,!(!ya(u)||!ya(f)))return[e-u,e+f]})):[]}var fs=t=>{var e=hs(t),n=Fm(t);return Xy(t,e,n)},WL=we([fs],t=>t?.dataKey),oZ=we([VL,v2,fs],IL),YL=(t,e,n)=>{var i={},r=e.reduce((u,f)=>(f.stackId==null||(u[f.stackId]==null&&(u[f.stackId]=[]),u[f.stackId].push(f)),u),i);return Object.fromEntries(Object.entries(r).map(u=>{var[f,a]=u,y=a.map(C2);return[f,{stackedData:qV(t,y,n),graphicalItems:a}]}))},Qw=we([oZ,VL,Cx],YL),XL=(t,e,n,i)=>{var{dataStartIndex:r,dataEndIndex:u}=e;if(i==null&&n!=="zAxis"){var f=WV(t,r,u);if(!(f!=null&&f[0]===0&&f[1]===0))return f}},lZ=we([Jo],t=>t.allowDataOverflow),D2=t=>{var e;if(t==null||!("domain"in t))return Kw;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=jh(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:Kw},KL=we([Jo],D2),QL=we([KL,lZ],pL),uZ=we([Qw,qf,cs,QL],XL,{memoizeOptions:{resultEqualityCheck:Dx}}),z2=t=>t.errorBars,cZ=(t,e,n)=>t.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>GL(n,i)),L0=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.filter(Boolean);if(r.length!==0){var u=r.flat(),f=Math.min(...u),a=Math.max(...u);return[f,a]}},JL=(t,e,n,i,r)=>{var u,f;if(n.length>0&&t.forEach(a=>{n.forEach(y=>{var _,x,A=(_=i[y.id])===null||_===void 0?void 0:_.filter(K=>GL(r,K)),O=Qo(a,(x=e.dataKey)!==null&&x!==void 0?x:y.dataKey),I=sZ(a,O,A);if(I.length>=2){var F=Math.min(...I),q=Math.max(...I);(u==null||F<u)&&(u=F),(f==null||q>f)&&(f=q)}var H=aP(O);H!=null&&(u=u==null?H[0]:Math.min(u,H[0]),f=f==null?H[1]:Math.max(f,H[1]))})}),e?.dataKey!=null&&t.forEach(a=>{var y=aP(Qo(a,e.dataKey));y!=null&&(u=u==null?y[0]:Math.min(u,y[0]),f=f==null?y[1]:Math.max(f,y[1]))}),ya(u)&&ya(f))return[u,f]},hZ=we([O2,Jo,rZ,z2,cs],JL,{memoizeOptions:{resultEqualityCheck:Dx}});function fZ(t){var{value:e}=t;if($c(e)||e instanceof Date)return e}var dZ=(t,e,n)=>{var i=t.map(fZ).filter(r=>r!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&wD(i))?zz(0,t.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},tI=t=>t.referenceElements.dots,Um=(t,e,n)=>t.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===n:i.yAxisId===n),pZ=we([tI,cs,Ox],Um),eI=t=>t.referenceElements.areas,mZ=we([eI,cs,Ox],Um),nI=t=>t.referenceElements.lines,gZ=we([nI,cs,Ox],Um),iI=(t,e)=>{var n=jh(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},yZ=we(pZ,cs,iI),rI=(t,e)=>{var n=jh(t.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},_Z=we([mZ,cs],rI);function vZ(t){var e;if(t.x!=null)return jh([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.x);return n==null||n.length===0?[]:jh(n)}function xZ(t){var e;if(t.y!=null)return jh([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.y);return n==null||n.length===0?[]:jh(n)}var aI=(t,e)=>{var n=t.flatMap(i=>e==="xAxis"?vZ(i):xZ(i));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},bZ=we([gZ,cs],aI),wZ=we(yZ,bZ,_Z,(t,e,n)=>L0(t,n,e)),sI=(t,e,n,i,r,u,f,a)=>{if(n!=null)return n;var y=f==="vertical"&&a==="xAxis"||f==="horizontal"&&a==="yAxis",_=y?L0(i,u,r):L0(u,r);return D7(e,_,t.allowDataOverflow)},SZ=we([Jo,KL,QL,uZ,hZ,wZ,Tr,cs],sI,{memoizeOptions:{resultEqualityCheck:Dx}}),TZ=[0,1],oI=(t,e,n,i,r,u,f)=>{if(!((t==null||n==null||n.length===0)&&f===void 0)){var{dataKey:a,type:y}=t,_=Vh(e,u);if(_&&a==null){var x;return zz(0,(x=n?.length)!==null&&x!==void 0?x:0)}return y==="category"?dZ(i,t,_):r==="expand"?TZ:f}},L2=we([Jo,Tr,O2,Lx,Cx,cs,SZ],oI),lI=(t,e,n,i,r)=>{if(t!=null){var{scale:u,type:f}=t;if(u==="auto")return e==="radial"&&r==="radiusAxis"?"band":e==="radial"&&r==="angleAxis"?"linear":f==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":f==="category"?"band":"linear";if(typeof u=="string"){var a="scale".concat(FS(u));return a in uy?a:"point"}}},Qy=we([Jo,Tr,NL,w2,cs],lI);function MZ(t){if(t!=null){if(t in uy)return uy[t]();var e="scale".concat(FS(t));if(e in uy)return uy[e]()}}function I2(t,e,n,i){if(!(n==null||i==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(i);var r=MZ(e);if(r!=null){var u=r.domain(n).range(i);return FV(u),u}}}var uI=(t,e,n)=>{var i=D2(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&Jd(t))return V7(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Jd(t))return $7(t,e.tickCount,e.allowDecimals)}},R2=we([L2,Xy,Qy],uI),cI=(t,e,n,i)=>{if(i!=="angleAxis"&&t?.type==="number"&&Jd(e)&&Array.isArray(n)&&n.length>0){var r=e[0],u=n[0],f=e[1],a=n[n.length-1];return[Math.min(r,u),Math.max(f,a)]}return e},AZ=we([Jo,L2,R2,cs],cI),EZ=we(Lx,Jo,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,i=Array.from(jh(t.map(a=>a.value))).sort((a,y)=>a-y);if(i.length<2)return 1/0;var r=i[i.length-1]-i[0];if(r===0)return 1/0;for(var u=0;u<i.length-1;u++){var f=i[u+1]-i[u];n=Math.min(n,f)}return n/r}}),hI=we(EZ,Tr,q7,Gs,(t,e,n,i)=>i,(t,e,n,i,r)=>{if(!ya(t))return 0;var u=e==="vertical"?i.height:i.width;if(r==="gap")return t*u/2;if(r==="no-gap"){var f=jf(n,t*u),a=t*u/2;return a-f-(a-f)/u*f}return 0}),CZ=(t,e)=>{var n=Zh(t,e);return n==null||typeof n.padding!="string"?0:hI(t,"xAxis",e,n.padding)},PZ=(t,e)=>{var n=Gh(t,e);return n==null||typeof n.padding!="string"?0:hI(t,"yAxis",e,n.padding)},kZ=we(Zh,CZ,(t,e)=>{var n,i;if(t==null)return{left:0,right:0};var{padding:r}=t;return typeof r=="string"?{left:e,right:e}:{left:((n=r.left)!==null&&n!==void 0?n:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),OZ=we(Gh,PZ,(t,e)=>{var n,i;if(t==null)return{top:0,bottom:0};var{padding:r}=t;return typeof r=="string"?{top:e,bottom:e}:{top:((n=r.top)!==null&&n!==void 0?n:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),DZ=we([Gs,kZ,yx,gx,(t,e,n)=>n],(t,e,n,i,r)=>{var{padding:u}=i;return r?[u.left,n.width-u.right]:[t.left+e.left,t.left+t.width-e.right]}),zZ=we([Gs,Tr,OZ,yx,gx,(t,e,n)=>n],(t,e,n,i,r,u)=>{var{padding:f}=r;return u?[i.height-f.bottom,f.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Jy=(t,e,n,i)=>{var r;switch(e){case"xAxis":return DZ(t,n,i);case"yAxis":return zZ(t,n,i);case"zAxis":return(r=k2(t,n))===null||r===void 0?void 0:r.range;case"angleAxis":return DL(t);case"radiusAxis":return zL(t,n);default:return}},fI=we([Jo,Jy],Px),Vm=we([Jo,Qy,AZ,fI],I2);we([Ky,z2,cs],cZ);function dI(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Ix=(t,e)=>e,Rx=(t,e,n)=>n,LZ=we(px,Ix,Rx,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(dI)),IZ=we(mx,Ix,Rx,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(dI)),pI=(t,e)=>({width:t.width,height:e.height}),RZ=(t,e)=>{var n=typeof e.width=="number"?e.width:Hy;return{width:n,height:t.height}},BZ=we(Gs,Zh,pI),NZ=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},jZ=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},FZ=we(qh,Gs,LZ,Ix,Rx,(t,e,n,i,r)=>{var u={},f;return n.forEach(a=>{var y=pI(e,a);f==null&&(f=NZ(e,i,t));var _=i==="top"&&!r||i==="bottom"&&r;u[a.id]=f-Number(_)*y.height,f+=(_?-1:1)*y.height}),u}),UZ=we($h,Gs,IZ,Ix,Rx,(t,e,n,i,r)=>{var u={},f;return n.forEach(a=>{var y=RZ(e,a);f==null&&(f=jZ(e,i,t));var _=i==="left"&&!r||i==="right"&&r;u[a.id]=f-Number(_)*y.width,f+=(_?-1:1)*y.width}),u}),VZ=(t,e)=>{var n=Zh(t,e);if(n!=null)return FZ(t,n.orientation,n.mirror)},$Z=we([Gs,Zh,VZ,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:t.left,y:0}:{x:t.left,y:r}}}),qZ=(t,e)=>{var n=Gh(t,e);if(n!=null)return UZ(t,n.orientation,n.mirror)},HZ=we([Gs,Gh,qZ,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:0,y:t.top}:{x:r,y:t.top}}}),ZZ=we(Gs,Gh,(t,e)=>{var n=typeof e.width=="number"?e.width:Hy;return{width:n,height:t.height}}),mI=(t,e,n,i)=>{if(n!=null){var{allowDuplicatedCategory:r,type:u,dataKey:f}=n,a=Vh(t,i),y=e.map(_=>_.value);if(f&&a&&u==="category"&&r&&wD(y))return y}},B2=we([Tr,Lx,Jo,cs],mI),gI=(t,e,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:u}=n,f=Vh(t,i);if(f&&(r==="number"||u!=="auto"))return e.map(a=>a.value)}},N2=we([Tr,Lx,Xy,cs],gI),sP=we([Tr,nZ,Qy,Vm,B2,N2,Jy,R2,cs],(t,e,n,i,r,u,f,a,y)=>{if(e!=null){var _=Vh(t,y);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:y,categoricalDomain:u,duplicateDomain:r,isCategorical:_,niceTicks:a,range:f,realScaleType:n,scale:i}}}),GZ=(t,e,n,i,r,u,f,a,y)=>{if(!(e==null||i==null)){var _=Vh(t,y),{type:x,ticks:A,tickCount:O}=e,I=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,F=x==="category"&&i.bandwidth?i.bandwidth()/I:0;F=y==="angleAxis"&&u!=null&&u.length>=2?Tu(u[0]-u[1])*2*F:F;var q=A||r;if(q){var H=q.map((K,W)=>{var X=f?f.indexOf(K):K;return{index:W,coordinate:i(X)+F,value:K,offset:F}});return H.filter(K=>ya(K.coordinate))}return _&&a?a.map((K,W)=>({coordinate:i(K)+F,value:K,index:W,offset:F})).filter(K=>ya(K.coordinate)):i.ticks?i.ticks(O).map(K=>({coordinate:i(K)+F,value:K,offset:F})):i.domain().map((K,W)=>({coordinate:i(K)+F,value:f?f[K]:K,index:W,offset:F}))}},yI=we([Tr,Xy,Qy,Vm,R2,Jy,B2,N2,cs],GZ),WZ=(t,e,n,i,r,u,f)=>{if(!(e==null||n==null||i==null||i[0]===i[1])){var a=Vh(t,f),{tickCount:y}=e,_=0;return _=f==="angleAxis"&&i?.length>=2?Tu(i[0]-i[1])*2*_:_,a&&u?u.map((x,A)=>({coordinate:n(x)+_,value:x,index:A,offset:_})):n.ticks?n.ticks(y).map(x=>({coordinate:n(x)+_,value:x,offset:_})):n.domain().map((x,A)=>({coordinate:n(x)+_,value:r?r[x]:x,index:A,offset:_}))}},_I=we([Tr,Xy,Vm,Jy,B2,N2,cs],WZ),vI=we(Jo,Vm,(t,e)=>{if(!(t==null||e==null))return z0(z0({},t),{},{scale:e})}),YZ=we([Jo,Qy,L2,fI],I2);we((t,e,n)=>k2(t,n),YZ,(t,e)=>{if(!(t==null||e==null))return z0(z0({},t),{},{scale:e})});var XZ=we([Tr,px,mx],(t,e,n)=>{switch(t){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),xI=t=>t.options.defaultTooltipEventType,bI=t=>t.options.validateTooltipEventTypes;function wI(t,e,n){if(t==null)return e;var i=t?"axis":"item";return n==null?e:n.includes(i)?i:e}function j2(t,e){var n=xI(t),i=bI(t);return wI(e,n,i)}function KZ(t){return En(e=>j2(e,t))}var SI=(t,e)=>{var n,i=Number(e);if(!(dc(i)||e==null))return i>=0?t==null||(n=t[i])===null||n===void 0?void 0:n.value:void 0},QZ=t=>t.tooltip.settings,Pf={active:!1,index:null,dataKey:void 0,coordinate:void 0},JZ={itemInteraction:{click:Pf,hover:Pf},axisInteraction:{click:Pf,hover:Pf},keyboardInteraction:Pf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},TI=xl({name:"tooltip",initialState:JZ,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:os()},removeTooltipEntrySettings:{reducer(t,e){var n=Oh(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:os()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:tG,removeTooltipEntrySettings:eG,setTooltipSettingsState:nG,setActiveMouseOverItemIndex:iG,mouseLeaveItem:Ytt,mouseLeaveChart:MI,setActiveClickItemIndex:Xtt,setMouseOverAxisIndex:AI,setMouseClickAxisIndex:rG,setSyncInteraction:Jw,setKeyboardInteraction:tS}=TI.actions,aG=TI.reducer;function oP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Nv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oP(Object(n),!0).forEach(function(i){sG(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function sG(t,e,n){return(e=oG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oG(t){var e=lG(t,"string");return typeof e=="symbol"?e:e+""}function lG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uG(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function cG(t){return t.index!=null}var EI=(t,e,n,i)=>{if(e==null)return Pf;var r=uG(t,e,n);if(r==null)return Pf;if(r.active)return r;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var u=t.settings.active===!0;if(cG(r)){if(u)return Nv(Nv({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i};return Nv(Nv({},Pf),{},{coordinate:r.coordinate})},F2=(t,e)=>{var n=t?.index;if(n==null)return null;var i=Number(n);if(!ya(i))return n;var r=0,u=1/0;return e.length>0&&(u=e.length-1),String(Math.max(r,Math.min(i,u)))},CI=(t,e,n,i,r,u,f,a)=>{if(!(u==null||a==null)){var y=f[0],_=y==null?void 0:a(y.positions,u);if(_!=null)return _;var x=r?.[Number(u)];if(x)switch(n){case"horizontal":return{x:x.coordinate,y:(i.top+e)/2};default:return{x:(i.left+t)/2,y:x.coordinate}}}},PI=(t,e,n,i)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var r;return n==="hover"?r=t.itemInteraction.hover.dataKey:r=t.itemInteraction.click.dataKey,r==null&&i!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(u=>{var f;return((f=u.settings)===null||f===void 0?void 0:f.dataKey)===r})},t_=t=>t.options.tooltipPayloadSearcher,$m=t=>t.tooltip;function lP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function uP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lP(Object(n),!0).forEach(function(i){hG(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function hG(t,e,n){return(e=fG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fG(t){var e=dG(t,"string");return typeof e=="symbol"?e:e+""}function dG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pG(t,e){return t??e}var kI=(t,e,n,i,r,u,f)=>{if(!(e==null||u==null)){var{chartData:a,computedData:y,dataStartIndex:_,dataEndIndex:x}=n,A=[];return t.reduce((O,I)=>{var F,{dataDefinedOnItem:q,settings:H}=I,K=pG(q,a),W=Array.isArray(K)?cz(K,_,x):K,X=(F=H?.dataKey)!==null&&F!==void 0?F:i,tt=H?.nameKey,Q;if(i&&Array.isArray(W)&&!Array.isArray(W[0])&&f==="axis"?Q=SD(W,i,r):Q=u(W,e,y,tt),Array.isArray(Q))Q.forEach(ht=>{var ot=uP(uP({},H),{},{name:ht.name,unit:ht.unit,color:void 0,fill:void 0});O.push(NE({tooltipEntrySettings:ot,dataKey:ht.dataKey,payload:ht.payload,value:Qo(ht.payload,ht.dataKey),name:ht.name}))});else{var at;O.push(NE({tooltipEntrySettings:H,dataKey:X,payload:Q,value:Qo(Q,X),name:(at=Qo(Q,tt))!==null&&at!==void 0?at:H?.name}))}return O},A)}},U2=we([fs,Tr,NL,w2,hs],lI),mG=we([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),gG=we([hs,Fm],jL),e_=we([mG,fs,gG],UL,{memoizeOptions:{resultEqualityCheck:zx}}),yG=we([e_],t=>t.filter(P2)),_G=we([e_],qL,{memoizeOptions:{resultEqualityCheck:zx}}),qm=we([_G,qf],HL),vG=we([yG,qf,fs],IL),V2=we([qm,fs,e_],ZL),OI=we([fs],D2),xG=we([fs],t=>t.allowDataOverflow),DI=we([OI,xG],pL),bG=we([e_],t=>t.filter(P2)),wG=we([vG,bG,Cx],YL),SG=we([wG,qf,hs,DI],XL),TG=we([e_],$L),MG=we([qm,fs,TG,z2,hs],JL,{memoizeOptions:{resultEqualityCheck:Dx}}),AG=we([tI,hs,Fm],Um),EG=we([AG,hs],iI),CG=we([eI,hs,Fm],Um),PG=we([CG,hs],rI),kG=we([nI,hs,Fm],Um),OG=we([kG,hs],aI),DG=we([EG,OG,PG],L0),zG=we([fs,OI,DI,SG,MG,DG,Tr,hs],sI),zI=we([fs,Tr,qm,V2,Cx,hs,zG],oI),LG=we([zI,fs,U2],uI),IG=we([fs,zI,LG,hs],cI),LI=t=>{var e=hs(t),n=Fm(t),i=!1;return Jy(t,e,n,i)},II=we([fs,LI],Px),RI=we([fs,U2,IG,II],I2),RG=we([Tr,V2,fs,hs],mI),BG=we([Tr,V2,fs,hs],gI),NG=(t,e,n,i,r,u,f,a)=>{if(e){var{type:y}=e,_=Vh(t,a);if(i){var x=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,A=y==="category"&&i.bandwidth?i.bandwidth()/x:0;return A=a==="angleAxis"&&r!=null&&r?.length>=2?Tu(r[0]-r[1])*2*A:A,_&&f?f.map((O,I)=>({coordinate:i(O)+A,value:O,index:I,offset:A})):i.domain().map((O,I)=>({coordinate:i(O)+A,value:u?u[O]:O,index:I,offset:A}))}}},Wh=we([Tr,fs,U2,RI,LI,RG,BG,hs],NG),$2=we([xI,bI,QZ],(t,e,n)=>wI(n.shared,t,e)),BI=t=>t.tooltip.settings.trigger,q2=t=>t.tooltip.settings.defaultIndex,Bx=we([$m,$2,BI,q2],EI),zy=we([Bx,qm],F2),NI=we([Wh,zy],SI),jG=we([Bx],t=>{if(t)return t.dataKey}),jI=we([$m,$2,BI,q2],PI),FG=we([$h,qh,Tr,Gs,Wh,q2,jI,t_],CI),UG=we([Bx,FG],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),VG=we([Bx],t=>t.active),$G=we([jI,zy,qf,WL,NI,t_,$2],kI),qG=we([$G],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function cP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function hP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cP(Object(n),!0).forEach(function(i){HG(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function HG(t,e,n){return(e=ZG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZG(t){var e=GG(t,"string");return typeof e=="symbol"?e:e+""}function GG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WG=()=>En(fs),YG=()=>{var t=WG(),e=En(Wh),n=En(RI);return g0(!t||!n?void 0:hP(hP({},t),{},{scale:n}),e)};function fP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function fm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fP(Object(n),!0).forEach(function(i){XG(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function XG(t,e,n){return(e=KG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KG(t){var e=QG(t,"string");return typeof e=="symbol"?e:e+""}function QG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JG=(t,e,n,i)=>{var r=e.find(u=>u&&u.index===n);if(r){if(t==="horizontal")return{x:r.coordinate,y:i.chartY};if(t==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},tW=(t,e,n,i)=>{var r=e.find(_=>_&&_.index===n);if(r){if(t==="centric"){var u=r.coordinate,{radius:f}=i;return fm(fm(fm({},i),Hs(i.cx,i.cy,f,u)),{},{angle:u,radius:f})}var a=r.coordinate,{angle:y}=i;return fm(fm(fm({},i),Hs(i.cx,i.cy,a,y)),{},{angle:y,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function eW(t,e){var{chartX:n,chartY:i}=t;return n>=e.left&&n<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var FI=(t,e,n,i,r)=>{var u,f=-1,a=(u=e?.length)!==null&&u!==void 0?u:0;if(a<=1||t==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var y=0;y<a;y++){var _=y>0?n[y-1].coordinate:n[a-1].coordinate,x=n[y].coordinate,A=y>=a-1?n[0].coordinate:n[y+1].coordinate,O=void 0;if(Tu(x-_)!==Tu(A-x)){var I=[];if(Tu(A-x)===Tu(r[1]-r[0])){O=A;var F=x+r[1]-r[0];I[0]=Math.min(F,(F+_)/2),I[1]=Math.max(F,(F+_)/2)}else{O=_;var q=A+r[1]-r[0];I[0]=Math.min(x,(q+x)/2),I[1]=Math.max(x,(q+x)/2)}var H=[Math.min(x,(O+x)/2),Math.max(x,(O+x)/2)];if(t>H[0]&&t<=H[1]||t>=I[0]&&t<=I[1]){({index:f}=n[y]);break}}else{var K=Math.min(_,A),W=Math.max(_,A);if(t>(K+x)/2&&t<=(W+x)/2){({index:f}=n[y]);break}}}else if(e){for(var X=0;X<a;X++)if(X===0&&t<=(e[X].coordinate+e[X+1].coordinate)/2||X>0&&X<a-1&&t>(e[X].coordinate+e[X-1].coordinate)/2&&t<=(e[X].coordinate+e[X+1].coordinate)/2||X===a-1&&t>(e[X].coordinate+e[X-1].coordinate)/2){({index:f}=e[X]);break}}return f},UI=()=>En(w2),H2=(t,e)=>e,VI=(t,e,n)=>n,Z2=(t,e,n,i)=>i,nW=we(Wh,t=>lx(t,e=>e.coordinate)),G2=we([$m,H2,VI,Z2],EI),$I=we([G2,qm],F2),iW=(t,e,n)=>{if(e!=null){var i=$m(t);return e==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},qI=we([$m,H2,VI,Z2],PI),I0=we([$h,qh,Tr,Gs,Wh,Z2,qI,t_],CI),rW=we([G2,I0],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),HI=we([Wh,$I],SI),aW=we([qI,$I,qf,WL,HI,t_,H2],kI),sW=we([G2],t=>({isActive:t.active,activeIndex:t.index})),oW=(t,e,n,i,r,u,f)=>{if(!(!t||!n||!i||!r)&&eW(t,f)){var a=YV(t,e),y=FI(a,u,r,n,i),_=JG(e,r,y,t);return{activeIndex:String(y),activeCoordinate:_}}},lW=(t,e,n,i,r,u,f)=>{if(!(!t||!i||!r||!u||!n)){var a=Zq(t,n);if(a){var y=XV(a,e),_=FI(y,f,u,i,r),x=tW(e,u,_,a);return{activeIndex:String(_),activeCoordinate:x}}}},uW=(t,e,n,i,r,u,f,a)=>{if(!(!t||!e||!i||!r||!u))return e==="horizontal"||e==="vertical"?oW(t,e,i,r,u,f,a):lW(t,e,n,i,r,u,f)},cW=we(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var i=t[e];if(i!=null)return n?i.panoramaElementId:i.elementId}}),hW=we(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(i=>parseInt(i,10)).concat(Object.values(Ko)),n=Array.from(new Set(e));return n.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:K7}});function dP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function pP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dP(Object(n),!0).forEach(function(i){fW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function fW(t,e,n){return(e=dW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dW(t){var e=pW(t,"string");return typeof e=="symbol"?e:e+""}function pW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mW={},gW={zIndexMap:Object.values(Ko).reduce((t,e)=>pP(pP({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),mW)},yW=new Set(Object.values(Ko));function _W(t){return yW.has(t)}var ZI=xl({name:"zIndex",initialState:gW,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:os()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!_W(n)&&delete t.zIndexMap[n])},prepare:os()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n,elementId:i,isPanorama:r}=e.payload;t.zIndexMap[n]?r?t.zIndexMap[n].panoramaElementId=i:t.zIndexMap[n].elementId=i:t.zIndexMap[n]={consumers:0,elementId:r?void 0:i,panoramaElementId:r?i:void 0}},prepare:os()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElementId=void 0:t.zIndexMap[n].elementId=void 0)},prepare:os()}}}),{registerZIndexPortal:vW,unregisterZIndexPortal:xW,registerZIndexPortalId:bW,unregisterZIndexPortalId:wW}=ZI.actions,SW=ZI.reducer;function Yh(t){var{zIndex:e,children:n}=t,i=C$(),r=i&&e!==void 0&&e!==0,u=bl(),f=Ts();G.useLayoutEffect(()=>r?(f(vW({zIndex:e})),()=>{f(xW({zIndex:e}))}):Im,[f,e,r]);var a=En(_=>cW(_,e,u));if(!r)return n;if(!a)return null;var y=document.getElementById(a);return y?Ny.createPortal(n,y):null}function eS(){return eS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},eS.apply(null,arguments)}function mP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function jv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mP(Object(n),!0).forEach(function(i){TW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function TW(t,e,n){return(e=MW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MW(t){var e=AW(t,"string");return typeof e=="symbol"?e:e+""}function AW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EW(t){var{cursor:e,cursorComp:n,cursorProps:i}=t;return G.isValidElement(e)?G.cloneElement(e,i):G.createElement(n,i)}function CW(t){var e,{coordinate:n,payload:i,index:r,offset:u,tooltipAxisBandSize:f,layout:a,cursor:y,tooltipEventType:_,chartName:x}=t,A=n,O=i,I=r;if(!y||!A||x!=="ScatterChart"&&_!=="axis")return null;var F,q,H;if(x==="ScatterChart")F=A,q=aq,H=Ko.cursorLine;else if(x==="BarChart")F=sq(a,A,u,f),q=Rq,H=Ko.cursorRectangle;else if(a==="radial"&&TD(A)){var{cx:K,cy:W,radius:X,startAngle:tt,endAngle:Q}=Oz(A);F={cx:K,cy:W,startAngle:tt,endAngle:Q,innerRadius:X,outerRadius:X},q=Xq,H=Ko.cursorLine}else F={points:Kq(a,A,u)},q=Zv,H=Ko.cursorLine;var at=typeof y=="object"&&"className"in y?y.className:void 0,ht=jv(jv(jv(jv({stroke:"#ccc",pointerEvents:"none"},u),F),rx(y)),{},{payload:O,payloadIndex:I,className:Nr("recharts-tooltip-cursor",at)});return G.createElement(Yh,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:H},G.createElement(EW,{cursor:y,cursorComp:q,cursorProps:ht}))}function PW(t){var e=YG(),n=bz(),i=vx(),r=UI();return e==null||n==null||i==null||r==null?null:G.createElement(CW,eS({},t,{offset:n,layout:i,tooltipAxisBandSize:e,chartName:r}))}var GI=G.createContext(null),kW=()=>G.useContext(GI),H1={exports:{}},gP;function OW(){return gP||(gP=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(y,_,x){this.fn=y,this.context=_,this.once=x||!1}function u(y,_,x,A,O){if(typeof x!="function")throw new TypeError("The listener must be a function");var I=new r(x,A||y,O),F=n?n+_:_;return y._events[F]?y._events[F].fn?y._events[F]=[y._events[F],I]:y._events[F].push(I):(y._events[F]=I,y._eventsCount++),y}function f(y,_){--y._eventsCount===0?y._events=new i:delete y._events[_]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var _=[],x,A;if(this._eventsCount===0)return _;for(A in x=this._events)e.call(x,A)&&_.push(n?A.slice(1):A);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(x)):_},a.prototype.listeners=function(_){var x=n?n+_:_,A=this._events[x];if(!A)return[];if(A.fn)return[A.fn];for(var O=0,I=A.length,F=new Array(I);O<I;O++)F[O]=A[O].fn;return F},a.prototype.listenerCount=function(_){var x=n?n+_:_,A=this._events[x];return A?A.fn?1:A.length:0},a.prototype.emit=function(_,x,A,O,I,F){var q=n?n+_:_;if(!this._events[q])return!1;var H=this._events[q],K=arguments.length,W,X;if(H.fn){switch(H.once&&this.removeListener(_,H.fn,void 0,!0),K){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,x),!0;case 3:return H.fn.call(H.context,x,A),!0;case 4:return H.fn.call(H.context,x,A,O),!0;case 5:return H.fn.call(H.context,x,A,O,I),!0;case 6:return H.fn.call(H.context,x,A,O,I,F),!0}for(X=1,W=new Array(K-1);X<K;X++)W[X-1]=arguments[X];H.fn.apply(H.context,W)}else{var tt=H.length,Q;for(X=0;X<tt;X++)switch(H[X].once&&this.removeListener(_,H[X].fn,void 0,!0),K){case 1:H[X].fn.call(H[X].context);break;case 2:H[X].fn.call(H[X].context,x);break;case 3:H[X].fn.call(H[X].context,x,A);break;case 4:H[X].fn.call(H[X].context,x,A,O);break;default:if(!W)for(Q=1,W=new Array(K-1);Q<K;Q++)W[Q-1]=arguments[Q];H[X].fn.apply(H[X].context,W)}}return!0},a.prototype.on=function(_,x,A){return u(this,_,x,A,!1)},a.prototype.once=function(_,x,A){return u(this,_,x,A,!0)},a.prototype.removeListener=function(_,x,A,O){var I=n?n+_:_;if(!this._events[I])return this;if(!x)return f(this,I),this;var F=this._events[I];if(F.fn)F.fn===x&&(!O||F.once)&&(!A||F.context===A)&&f(this,I);else{for(var q=0,H=[],K=F.length;q<K;q++)(F[q].fn!==x||O&&!F[q].once||A&&F[q].context!==A)&&H.push(F[q]);H.length?this._events[I]=H.length===1?H[0]:H:f(this,I)}return this},a.prototype.removeAllListeners=function(_){var x;return _?(x=n?n+_:_,this._events[x]&&f(this,x)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(H1)),H1.exports}var DW=OW();const zW=Pu(DW);var Ly=new zW,nS="recharts.syncEvent.tooltip",yP="recharts.syncEvent.brush";function LW(t,e){if(e){var n=Number.parseInt(e,10);if(!dc(n))return t?.[n]}}var IW={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},WI=xl({name:"options",initialState:IW,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),RW=WI.reducer,{createEventEmitter:BW}=WI.actions;function NW(t){return t.tooltip.syncInteraction}var jW={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},YI=xl({name:"chartData",initialState:jW,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:i}=e.payload;n!=null&&(t.dataStartIndex=n),i!=null&&(t.dataEndIndex=i)}}}),{setChartData:_P,setDataStartEndIndexes:FW,setComputedData:Ktt}=YI.actions,UW=YI.reducer,VW=["x","y"];function vP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function dm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vP(Object(n),!0).forEach(function(i){$W(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $W(t,e,n){return(e=qW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qW(t){var e=HW(t,"string");return typeof e=="symbol"?e:e+""}function HW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZW(t,e){if(t==null)return{};var n,i,r=GW(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function GW(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function WW(){var t=En(S2),e=En(T2),n=Ts(),i=En(PL),r=En(Wh),u=vx(),f=_x(),a=En(y=>y.rootProps.className);G.useEffect(()=>{if(t==null)return Im;var y=(_,x,A)=>{if(e!==A&&t===_){if(i==="index"){var O;if(f&&x!==null&&x!==void 0&&(O=x.payload)!==null&&O!==void 0&&O.coordinate&&x.payload.sourceViewBox){var I=x.payload.coordinate,{x:F,y:q}=I,H=ZW(I,VW),{x:K,y:W,width:X,height:tt}=x.payload.sourceViewBox,Q=dm(dm({},H),{},{x:f.x+(X?(F-K)/X:0)*f.width,y:f.y+(tt?(q-W)/tt:0)*f.height});n(dm(dm({},x),{},{payload:dm(dm({},x.payload),{},{coordinate:Q})}))}else n(x);return}if(r!=null){var at;if(typeof i=="function"){var ht={activeTooltipIndex:x.payload.index==null?void 0:Number(x.payload.index),isTooltipActive:x.payload.active,activeIndex:x.payload.index==null?void 0:Number(x.payload.index),activeLabel:x.payload.label,activeDataKey:x.payload.dataKey,activeCoordinate:x.payload.coordinate},ot=i(r,ht);at=r[ot]}else i==="value"&&(at=r.find(Nt=>String(Nt.value)===x.payload.label));var{coordinate:ct}=x.payload;if(at==null||x.payload.active===!1||ct==null||f==null){n(Jw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:xt,y:wt}=ct,Ct=Math.min(xt,f.x+f.width),re=Math.min(wt,f.y+f.height),ve={x:u==="horizontal"?at.coordinate:Ct,y:u==="horizontal"?re:at.coordinate},Ee=Jw({active:x.payload.active,coordinate:ve,dataKey:x.payload.dataKey,index:String(at.index),label:x.payload.label,sourceViewBox:x.payload.sourceViewBox});n(Ee)}}};return Ly.on(nS,y),()=>{Ly.off(nS,y)}},[a,n,e,t,i,r,u,f])}function YW(){var t=En(S2),e=En(T2),n=Ts();G.useEffect(()=>{if(t==null)return Im;var i=(r,u,f)=>{e!==f&&t===r&&n(FW(u))};return Ly.on(yP,i),()=>{Ly.off(yP,i)}},[n,e,t])}function XW(){var t=Ts();G.useEffect(()=>{t(BW())},[t]),WW(),YW()}function KW(t,e,n,i,r,u){var f=En(I=>iW(I,t,e)),a=En(T2),y=En(S2),_=En(PL),x=En(NW),A=x?.active,O=_x();G.useEffect(()=>{if(!A&&y!=null&&a!=null){var I=Jw({active:u,coordinate:n,dataKey:f,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:O});Ly.emit(nS,y,I,a)}},[A,n,f,r,i,a,y,_,u,O])}function xP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function bP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xP(Object(n),!0).forEach(function(i){QW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function QW(t,e,n){return(e=JW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JW(t){var e=tY(t,"string");return typeof e=="symbol"?e:e+""}function tY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eY(t){return t.dataKey}function nY(t,e){return G.isValidElement(t)?G.cloneElement(t,e):typeof t=="function"?G.createElement(t,e):G.createElement(B$,e)}var wP=[],iY={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Rm.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function XI(t){var e,n,i=Ql(t,iY),{active:r,allowEscapeViewBox:u,animationDuration:f,animationEasing:a,content:y,filterNull:_,isAnimationActive:x,offset:A,payloadUniqBy:O,position:I,reverseDirection:F,useTranslate3d:q,wrapperStyle:H,cursor:K,shared:W,trigger:X,defaultIndex:tt,portal:Q,axisId:at}=i,ht=Ts(),ot=typeof tt=="number"?String(tt):tt;G.useEffect(()=>{ht(nG({shared:W,trigger:X,axisId:at,active:r,defaultIndex:ot}))},[ht,W,X,at,r,ot]);var ct=_x(),xt=Mz(),wt=KZ(W),{activeIndex:Ct,isActive:re}=(e=En(Oe=>sW(Oe,wt,X,ot)))!==null&&e!==void 0?e:{},ve=En(Oe=>aW(Oe,wt,X,ot)),Ee=En(Oe=>HI(Oe,wt,X,ot)),Nt=En(Oe=>rW(Oe,wt,X,ot)),Pt=ve,Bt=kW(),Ft=(n=r??re)!==null&&n!==void 0?n:!1,[$t,ft]=jU([Pt,Ft]),St=wt==="axis"?Ee:void 0;KW(wt,X,Nt,St,Ct,Ft);var jt=Q??Bt;if(jt==null||ct==null||wt==null)return null;var Yt=Pt??wP;Ft||(Yt=wP),_&&Yt.length&&(Yt=hU(Yt.filter(Oe=>Oe.value!=null&&(Oe.hide!==!0||i.includeHidden)),O,eY));var le=Yt.length>0,ce=G.createElement(q$,{allowEscapeViewBox:u,animationDuration:f,animationEasing:a,isAnimationActive:x,active:Ft,coordinate:Nt,hasPayload:le,offset:A,position:I,reverseDirection:F,useTranslate3d:q,viewBox:ct,wrapperStyle:H,lastBoundingBox:$t,innerRef:ft,hasPortalFromProps:!!Q},nY(y,bP(bP({},i),{},{payload:Yt,label:St,active:Ft,activeIndex:Ct,coordinate:Nt,accessibilityLayer:xt})));return G.createElement(G.Fragment,null,Ny.createPortal(ce,jt),Ft&&G.createElement(PW,{cursor:K,tooltipEventType:wt,coordinate:Nt,payload:Yt,index:Ct}))}function rY(t,e,n){return(e=aY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aY(t){var e=sY(t,"string");return typeof e=="symbol"?e:e+""}function sY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class oY{constructor(e){rY(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function SP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function lY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SP(Object(n),!0).forEach(function(i){uY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function uY(t,e,n){return(e=cY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cY(t){var e=hY(t,"string");return typeof e=="symbol"?e:e+""}function hY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fY={cacheSize:2e3,enableCache:!0},KI=lY({},fY),TP=new oY(KI.cacheSize),dY={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MP="recharts_measurement_span";function pY(t,e){var n=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",u=e.fontStyle||"",f=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(u,"|").concat(f,"|").concat(a)}var AP=(t,e)=>{try{var n=document.getElementById(MP);n||(n=document.createElement("span"),n.setAttribute("id",MP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,dY,e),n.textContent="".concat(t);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},py=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Rm.isSsr)return{width:0,height:0};if(!KI.enableCache)return AP(e,n);var i=pY(e,n),r=TP.get(i);if(r)return r;var u=AP(e,n);return TP.set(i,u),u},EP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mY=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gY=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,QI={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},yY=Object.keys(QI),ym="NaN";function _Y(t,e){return t*QI[e]}class yl{static parse(e){var n,[,i,r]=(n=gY.exec(e))!==null&&n!==void 0?n:[];return new yl(parseFloat(i),r??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,dc(e)&&(this.unit=""),n!==""&&!mY.test(n)&&(this.num=NaN,this.unit=""),yY.includes(n)&&(this.num=_Y(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new yl(NaN,""):new yl(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new yl(NaN,""):new yl(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new yl(NaN,""):new yl(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new yl(NaN,""):new yl(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return dc(this.num)}}function JI(t){if(t.includes(ym))return ym;for(var e=t;e.includes("*")||e.includes("/");){var n,[,i,r,u]=(n=EP.exec(e))!==null&&n!==void 0?n:[],f=yl.parse(i??""),a=yl.parse(u??""),y=r==="*"?f.multiply(a):f.divide(a);if(y.isNaN())return ym;e=e.replace(EP,y.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var _,[,x,A,O]=(_=CP.exec(e))!==null&&_!==void 0?_:[],I=yl.parse(x??""),F=yl.parse(O??""),q=A==="+"?I.add(F):I.subtract(F);if(q.isNaN())return ym;e=e.replace(CP,q.toString())}return e}var PP=/\(([^()]*)\)/;function vY(t){for(var e=t,n;(n=PP.exec(e))!=null;){var[,i]=n;e=e.replace(PP,JI(i))}return e}function xY(t){var e=t.replace(/\s+/g,"");return e=vY(e),e=JI(e),e}function bY(t){try{return xY(t)}catch{return ym}}function Z1(t){var e=bY(t.slice(5,-1));return e===ym?"":e}var wY=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],SY=["dx","dy","angle","className","breakAll"];function iS(){return iS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},iS.apply(null,arguments)}function kP(t,e){if(t==null)return{};var n,i,r=TY(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function TY(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var tR=/[ \f\n\r\t\v\u2028\u2029]+/,eR=t=>{var{children:e,breakAll:n,style:i}=t;try{var r=[];Zs(e)||(n?r=e.toString().split(""):r=e.toString().split(tR));var u=r.map(a=>({word:a,width:py(a,i).width})),f=n?0:py("",i).width;return{wordsWithComputedWidth:u,spaceWidth:f}}catch{return null}};function MY(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var nR=(t,e,n,i)=>t.reduce((r,u)=>{var{word:f,width:a}=u,y=r[r.length-1];if(y&&a!=null&&(e==null||i||y.width+a+n<Number(e)))y.words.push(f),y.width+=a+n;else{var _={words:[f],width:a};r.push(_)}return r},[]),iR=t=>t.reduce((e,n)=>e.width>n.width?e:n),AY="",OP=(t,e,n,i,r,u,f,a)=>{var y=t.slice(0,e),_=eR({breakAll:n,style:i,children:y+AY});if(!_)return[!1,[]];var x=nR(_.wordsWithComputedWidth,u,f,a),A=x.length>r||iR(x).width>Number(u);return[A,x]},EY=(t,e,n,i,r)=>{var{maxLines:u,children:f,style:a,breakAll:y}=t,_=xn(u),x=String(f),A=nR(e,i,n,r);if(!_||r)return A;var O=A.length>u||iR(A).width>Number(i);if(!O)return A;for(var I=0,F=x.length-1,q=0,H;I<=F&&q<=x.length-1;){var K=Math.floor((I+F)/2),W=K-1,[X,tt]=OP(x,W,y,a,u,i,n,r),[Q]=OP(x,K,y,a,u,i,n,r);if(!X&&!Q&&(I=K+1),X&&Q&&(F=K-1),!X&&Q){H=tt;break}q++}return H||A},DP=t=>{var e=Zs(t)?[]:t.toString().split(tR);return[{words:e,width:void 0}]},CY=t=>{var{width:e,scaleToFit:n,children:i,style:r,breakAll:u,maxLines:f}=t;if((e||n)&&!Rm.isSsr){var a,y,_=eR({breakAll:u,children:i,style:r});if(_){var{wordsWithComputedWidth:x,spaceWidth:A}=_;a=x,y=A}else return DP(i);return EY({breakAll:u,children:i,maxLines:f,style:r},a,y,e,!!n)}return DP(i)},rR="#808080",PY={breakAll:!1,capHeight:"0.71em",fill:rR,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},W2=G.forwardRef((t,e)=>{var n=Ql(t,PY),{x:i,y:r,lineHeight:u,capHeight:f,fill:a,scaleToFit:y,textAnchor:_,verticalAnchor:x}=n,A=kP(n,wY),O=G.useMemo(()=>CY({breakAll:A.breakAll,children:A.children,maxLines:A.maxLines,scaleToFit:y,style:A.style,width:A.width}),[A.breakAll,A.children,A.maxLines,y,A.style,A.width]),{dx:I,dy:F,angle:q,className:H,breakAll:K}=A,W=kP(A,SY);if(!$c(i)||!$c(r)||O.length===0)return null;var X=Number(i)+(xn(I)?I:0),tt=Number(r)+(xn(F)?F:0);if(!ya(X)||!ya(tt))return null;var Q;switch(x){case"start":Q=Z1("calc(".concat(f,")"));break;case"middle":Q=Z1("calc(".concat((O.length-1)/2," * -").concat(u," + (").concat(f," / 2))"));break;default:Q=Z1("calc(".concat(O.length-1," * -").concat(u,")"));break}var at=[];if(y){var ht=O[0].width,{width:ot}=A;at.push("scale(".concat(xn(ot)&&xn(ht)?ot/ht:1,")"))}return q&&at.push("rotate(".concat(q,", ").concat(X,", ").concat(tt,")")),at.length&&(W.transform=at.join(" ")),G.createElement("text",iS({},Au(W),{ref:e,x:X,y:tt,className:Nr("recharts-text",H),textAnchor:_,fill:a.includes("url")?rR:a}),O.map((ct,xt)=>{var wt=ct.words.join(K?"":" ");return G.createElement("tspan",{x:X,dy:xt===0?Q:u,key:"".concat(wt,"-").concat(xt)},wt)}))});W2.displayName="Text";var kY=["labelRef"];function OY(t,e){if(t==null)return{};var n,i,r=DY(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function DY(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function zP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Oa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zP(Object(n),!0).forEach(function(i){zY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function zY(t,e,n){return(e=LY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LY(t){var e=IY(t,"string");return typeof e=="symbol"?e:e+""}function IY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Th(){return Th=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Th.apply(null,arguments)}var aR=G.createContext(null),RY=t=>{var{x:e,y:n,upperWidth:i,lowerWidth:r,width:u,height:f,children:a}=t,y=G.useMemo(()=>({x:e,y:n,upperWidth:i,lowerWidth:r,width:u,height:f}),[e,n,i,r,u,f]);return G.createElement(aR.Provider,{value:y},a)},sR=()=>{var t=G.useContext(aR),e=_x();return t||xz(e)},BY=G.createContext(null),NY=()=>{var t=G.useContext(BY),e=En(LL);return t||e},jY=t=>{var{value:e,formatter:n}=t,i=Zs(t.children)?e:t.children;return typeof n=="function"?n(i):i},Y2=t=>t!=null&&typeof t=="function",FY=(t,e)=>{var n=Tu(e-t),i=Math.min(Math.abs(e-t),360);return n*i},UY=(t,e,n,i,r)=>{var{offset:u,className:f}=t,{cx:a,cy:y,innerRadius:_,outerRadius:x,startAngle:A,endAngle:O,clockWise:I}=r,F=(_+x)/2,q=FY(A,O),H=q>=0?1:-1,K,W;switch(e){case"insideStart":K=A+H*u,W=I;break;case"insideEnd":K=O-H*u,W=!I;break;case"end":K=O+H*u,W=I;break;default:throw new Error("Unsupported position ".concat(e))}W=q<=0?W:!W;var X=Hs(a,y,F,K),tt=Hs(a,y,F,K+(W?1:-1)*359),Q="M".concat(X.x,",").concat(X.y,`
    A`).concat(F,",").concat(F,",0,1,").concat(W?0:1,`,
    `).concat(tt.x,",").concat(tt.y),at=Zs(t.id)?Sy("recharts-radial-line-"):t.id;return G.createElement("text",Th({},i,{dominantBaseline:"central",className:Nr("recharts-radial-bar-label",f)}),G.createElement("defs",null,G.createElement("path",{id:at,d:Q})),G.createElement("textPath",{xlinkHref:"#".concat(at)},n))},VY=(t,e,n)=>{var{cx:i,cy:r,innerRadius:u,outerRadius:f,startAngle:a,endAngle:y}=t,_=(a+y)/2;if(n==="outside"){var{x,y:A}=Hs(i,r,f+e,_);return{x,y:A,textAnchor:x>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var O=(u+f)/2,{x:I,y:F}=Hs(i,r,O,_);return{x:I,y:F,textAnchor:"middle",verticalAnchor:"middle"}},rS=t=>"cx"in t&&xn(t.cx),$Y=(t,e)=>{var{parentViewBox:n,offset:i,position:r}=t,u;n!=null&&!rS(n)&&(u=n);var{x:f,y:a,upperWidth:y,lowerWidth:_,height:x}=e,A=f,O=f+(y-_)/2,I=(A+O)/2,F=(y+_)/2,q=A+y/2,H=x>=0?1:-1,K=H*i,W=H>0?"end":"start",X=H>0?"start":"end",tt=y>=0?1:-1,Q=tt*i,at=tt>0?"end":"start",ht=tt>0?"start":"end";if(r==="top"){var ot={x:A+y/2,y:a-K,textAnchor:"middle",verticalAnchor:W};return Oa(Oa({},ot),u?{height:Math.max(a-u.y,0),width:y}:{})}if(r==="bottom"){var ct={x:O+_/2,y:a+x+K,textAnchor:"middle",verticalAnchor:X};return Oa(Oa({},ct),u?{height:Math.max(u.y+u.height-(a+x),0),width:_}:{})}if(r==="left"){var xt={x:I-Q,y:a+x/2,textAnchor:at,verticalAnchor:"middle"};return Oa(Oa({},xt),u?{width:Math.max(xt.x-u.x,0),height:x}:{})}if(r==="right"){var wt={x:I+F+Q,y:a+x/2,textAnchor:ht,verticalAnchor:"middle"};return Oa(Oa({},wt),u?{width:Math.max(u.x+u.width-wt.x,0),height:x}:{})}var Ct=u?{width:F,height:x}:{};return r==="insideLeft"?Oa({x:I+Q,y:a+x/2,textAnchor:ht,verticalAnchor:"middle"},Ct):r==="insideRight"?Oa({x:I+F-Q,y:a+x/2,textAnchor:at,verticalAnchor:"middle"},Ct):r==="insideTop"?Oa({x:A+y/2,y:a+K,textAnchor:"middle",verticalAnchor:X},Ct):r==="insideBottom"?Oa({x:O+_/2,y:a+x-K,textAnchor:"middle",verticalAnchor:W},Ct):r==="insideTopLeft"?Oa({x:A+Q,y:a+K,textAnchor:ht,verticalAnchor:X},Ct):r==="insideTopRight"?Oa({x:A+y-Q,y:a+K,textAnchor:at,verticalAnchor:X},Ct):r==="insideBottomLeft"?Oa({x:O+Q,y:a+x-K,textAnchor:ht,verticalAnchor:W},Ct):r==="insideBottomRight"?Oa({x:O+_-Q,y:a+x-K,textAnchor:at,verticalAnchor:W},Ct):r&&typeof r=="object"&&(xn(r.x)||Lh(r.x))&&(xn(r.y)||Lh(r.y))?Oa({x:f+jf(r.x,F),y:a+jf(r.y,x),textAnchor:"end",verticalAnchor:"end"},Ct):Oa({x:q,y:a+x/2,textAnchor:"middle",verticalAnchor:"middle"},Ct)},qY={offset:5,zIndex:Ko.label};function Cf(t){var e=Ql(t,qY),{viewBox:n,position:i,value:r,children:u,content:f,className:a="",textBreakAll:y,labelRef:_}=e,x=NY(),A=sR(),O=i==="center"?A:x??A,I,F,q;if(n==null?I=O:rS(n)?I=n:I=xz(n),!I||Zs(r)&&Zs(u)&&!G.isValidElement(f)&&typeof f!="function")return null;var H=Oa(Oa({},e),{},{viewBox:I});if(G.isValidElement(f)){var{labelRef:K}=H,W=OY(H,kY);return G.cloneElement(f,W)}if(typeof f=="function"){if(F=G.createElement(f,H),G.isValidElement(F))return F}else F=jY(e);var X=Au(e);if(rS(I)){if(i==="insideStart"||i==="insideEnd"||i==="end")return UY(e,i,F,X,I);q=VY(I,e.offset,e.position)}else q=$Y(e,I);return G.createElement(Yh,{zIndex:e.zIndex},G.createElement(W2,Th({ref:_,className:Nr("recharts-label",a)},X,q,{textAnchor:MY(X.textAnchor)?X.textAnchor:q.textAnchor,breakAll:y}),F))}Cf.displayName="Label";var HY=(t,e,n)=>{if(!t)return null;var i={viewBox:e,labelRef:n};return t===!0?G.createElement(Cf,Th({key:"label-implicit"},i)):$c(t)?G.createElement(Cf,Th({key:"label-implicit",value:t},i)):G.isValidElement(t)?t.type===Cf?G.cloneElement(t,Oa({key:"label-implicit"},i)):G.createElement(Cf,Th({key:"label-implicit",content:t},i)):Y2(t)?G.createElement(Cf,Th({key:"label-implicit",content:t},i)):t&&typeof t=="object"?G.createElement(Cf,Th({},t,{key:"label-implicit"},i)):null};function ZY(t){var{label:e,labelRef:n}=t,i=sR();return HY(e,i,n)||null}var G1={},W1={},LP;function GY(){return LP||(LP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(W1)),W1}var Y1={},IP;function WY(){return IP||(IP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(Y1)),Y1}var RP;function YY(){return RP||(RP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GY(),n=WY(),i=VS();function r(u){if(i.isArrayLike(u))return e.last(n.toArray(u))}t.last=r})(G1)),G1}var X1,BP;function XY(){return BP||(BP=1,X1=YY().last),X1}var KY=XY();const QY=Pu(KY);var JY=["valueAccessor"],tX=["dataKey","clockWise","id","textBreakAll","zIndex"];function R0(){return R0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},R0.apply(null,arguments)}function NP(t,e){if(t==null)return{};var n,i,r=eX(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function eX(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var nX=t=>Array.isArray(t.value)?QY(t.value):t.value,oR=G.createContext(void 0),iX=oR.Provider,lR=G.createContext(void 0);lR.Provider;function rX(){return G.useContext(oR)}function aX(){return G.useContext(lR)}function Wv(t){var{valueAccessor:e=nX}=t,n=NP(t,JY),{dataKey:i,clockWise:r,id:u,textBreakAll:f,zIndex:a}=n,y=NP(n,tX),_=rX(),x=aX(),A=_||x;return!A||!A.length?null:G.createElement(Yh,{zIndex:a??Ko.label},G.createElement(Vc,{className:"recharts-label-list"},A.map((O,I)=>{var F,q=Zs(i)?e(O,I):Qo(O&&O.payload,i),H=Zs(u)?{}:{id:"".concat(u,"-").concat(I)};return G.createElement(Cf,R0({key:"label-".concat(I)},Au(O),y,H,{fill:(F=n.fill)!==null&&F!==void 0?F:O.fill,parentViewBox:O.parentViewBox,value:q,textBreakAll:f,viewBox:O.viewBox,index:I,zIndex:0}))})))}Wv.displayName="LabelList";function sX(t){var{label:e}=t;return e?e===!0?G.createElement(Wv,{key:"labelList-implicit"}):G.isValidElement(e)||Y2(e)?G.createElement(Wv,{key:"labelList-implicit",content:e}):typeof e=="object"?G.createElement(Wv,R0({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function aS(){return aS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},aS.apply(null,arguments)}var uR=t=>{var{cx:e,cy:n,r:i,className:r}=t,u=Nr("recharts-dot",r);return xn(e)&&xn(n)&&xn(i)?G.createElement("circle",aS({},fc(t),US(t),{className:u,cx:e,cy:n,r:i})):null},oX={radiusAxis:{},angleAxis:{}},cR=xl({name:"polarAxis",initialState:oX,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Qtt,removeRadiusAxis:Jtt,addAngleAxis:tet,removeAngleAxis:eet}=cR.actions,lX=cR.reducer,hR=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0;function uX(t){var{fn:e,args:n}=t,i=Ts(),r=bl();return G.useLayoutEffect(()=>{if(!r){var u=e(n);return i(tG(u)),()=>{i(eG(u))}}},[e,n,i,r]),null}function cX(t){var{legendPayload:e}=t,n=Ts(),i=bl();return G.useLayoutEffect(()=>i?Im:(n(k$(e)),()=>{n(O$(e))}),[n,i,e]),null}var K1,hX=()=>{var[t]=G.useState(()=>Sy("uid-"));return t},fX=(K1=e3.useId)!==null&&K1!==void 0?K1:hX;function fR(t,e){var n=fX();return e||(t?"".concat(t,"-").concat(n):n)}var dX=G.createContext(void 0),pX=t=>{var{id:e,type:n,children:i}=t,r=fR("recharts-".concat(n),e);return G.createElement(dX.Provider,{value:r},i(r))},mX={cartesianItems:[],polarItems:[]},dR=xl({name:"graphicalItems",initialState:mX,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:os()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:i}=e.payload,r=Oh(t).cartesianItems.indexOf(n);r>-1&&(t.cartesianItems[r]=i)},prepare:os()},removeCartesianGraphicalItem:{reducer(t,e){var n=Oh(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:os()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:os()},removePolarGraphicalItem:{reducer(t,e){var n=Oh(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:os()}}}),{addCartesianGraphicalItem:gX,replaceCartesianGraphicalItem:yX,removeCartesianGraphicalItem:_X,addPolarGraphicalItem:net,removePolarGraphicalItem:iet}=dR.actions,vX=dR.reducer;function xX(t){var e=Ts(),n=G.useRef(null);return G.useLayoutEffect(()=>{n.current===null?e(gX(t)):n.current!==t&&e(yX({prev:n.current,next:t})),n.current=t},[e,t]),G.useLayoutEffect(()=>()=>{n.current&&(e(_X(n.current)),n.current=null)},[e]),null}var bX=["points"];function jP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Q1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jP(Object(n),!0).forEach(function(i){wX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function wX(t,e,n){return(e=SX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SX(t){var e=TX(t,"string");return typeof e=="symbol"?e:e+""}function TX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B0(){return B0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},B0.apply(null,arguments)}function MX(t,e){if(t==null)return{};var n,i,r=AX(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function AX(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function EX(t){var{option:e,dotProps:n,className:i}=t;if(G.isValidElement(e))return G.cloneElement(e,n);if(typeof e=="function")return e(n);var r=Nr(i,typeof e!="boolean"?e.className:""),u=n??{},{points:f}=u,a=MX(u,bX);return G.createElement(uR,B0({},a,{className:r}))}function CX(t,e){return t==null?!1:e?!0:t.length===1}function PX(t){var{points:e,dot:n,className:i,dotClassName:r,dataKey:u,baseProps:f,needClip:a,clipPathId:y,zIndex:_=Ko.scatter}=t;if(!CX(e,n))return null;var x=hR(n),A=a8(n),O=e.map((F,q)=>{var H,K,W=Q1(Q1(Q1({r:3},f),A),{},{index:q,cx:(H=F.x)!==null&&H!==void 0?H:void 0,cy:(K=F.y)!==null&&K!==void 0?K:void 0,dataKey:u,value:F.value,payload:F.payload,points:e});return G.createElement(EX,{key:"dot-".concat(q),option:n,dotProps:W,className:r})}),I={};return a&&y!=null&&(I.clipPath="url(#clipPath-".concat(x?"":"dots-").concat(y,")")),G.createElement(Yh,{zIndex:_},G.createElement(Vc,B0({className:i},I),O))}function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function UP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(i){kX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function kX(t,e,n){return(e=OX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OX(t){var e=DX(t,"string");return typeof e=="symbol"?e:e+""}function DX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zX={xAxis:{},yAxis:{},zAxis:{}},pR=xl({name:"cartesianAxis",initialState:zX,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:os()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:os()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:os()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:os()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:os()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:os()},updateYAxisWidth(t,e){var{id:n,width:i}=e.payload,r=t.yAxis[n];if(r){var u=r.widthHistory||[];if(u.length===3&&u[0]===u[2]&&i===u[1]&&i!==r.width&&Math.abs(i-u[0])<=1)return;var f=[...u,i].slice(-3);t.yAxis[n]=UP(UP({},t.yAxis[n]),{},{width:i,widthHistory:f})}}}}),{addXAxis:LX,removeXAxis:IX,addYAxis:RX,removeYAxis:BX,addZAxis:ret,removeZAxis:aet,updateYAxisWidth:NX}=pR.actions,jX=pR.reducer,FX=we([Gs],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),UX=we([FX,$h,qh],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),X2=()=>En(UX),VX=()=>En(qG);function VP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function J1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VP(Object(n),!0).forEach(function(i){$X(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $X(t,e,n){return(e=qX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qX(t){var e=HX(t,"string");return typeof e=="symbol"?e:e+""}function HX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZX=t=>{var{point:e,childIndex:n,mainColor:i,activeDot:r,dataKey:u}=t;if(r===!1||e.x==null||e.y==null)return null;var f={index:n,dataKey:u,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},a=J1(J1(J1({},f),rx(r)),US(r)),y;return G.isValidElement(r)?y=G.cloneElement(r,a):typeof r=="function"?y=r(a):y=G.createElement(uR,a),G.createElement(Vc,{className:"recharts-active-dot"},y)};function $P(t){var{points:e,mainColor:n,activeDot:i,itemDataKey:r,zIndex:u=Ko.activeDot}=t,f=En(zy),a=VX();if(e==null||a==null)return null;var y=e.find(_=>a.includes(_.payload));return Zs(y)?null:G.createElement(Yh,{zIndex:u},G.createElement(ZX,{point:y,childIndex:Number(f),mainColor:n,dataKey:r,activeDot:i}))}var GX={},mR=xl({name:"errorBars",initialState:GX,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]||(t[n]=[]),t[n].push(i)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:i,next:r}=e.payload;t[n]&&(t[n]=t[n].map(u=>u.dataKey===i.dataKey&&u.direction===i.direction?r:u))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]&&(t[n]=t[n].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:set,replaceErrorBar:oet,removeErrorBar:uet}=mR.actions,WX=mR.reducer;function gR(t,e){var n,i,r=En(_=>Zh(_,t)),u=En(_=>Gh(_,e)),f=(n=r?.allowDataOverflow)!==null&&n!==void 0?n:$l.allowDataOverflow,a=(i=u?.allowDataOverflow)!==null&&i!==void 0?i:ql.allowDataOverflow,y=f||a;return{needClip:y,needClipX:f,needClipY:a}}function YX(t){var{xAxisId:e,yAxisId:n,clipPathId:i}=t,r=X2(),{needClipX:u,needClipY:f,needClip:a}=gR(e,n);if(!a||!r)return null;var{x:y,y:_,width:x,height:A}=r;return G.createElement("clipPath",{id:"clipPath-".concat(i)},G.createElement("rect",{x:u?y:y-x/2,y:f?_:_-A/2,width:u?x:x*2,height:f?A:A*2}))}var XX=t=>{var{chartData:e}=t,n=Ts(),i=bl();return G.useEffect(()=>i?()=>{}:(n(_P(e)),()=>{n(_P(void 0))}),[e,n,i]),null},qP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},yR=xl({name:"brush",initialState:qP,reducers:{setBrushSettings(t,e){return e.payload==null?qP:e.payload}}}),{setBrushSettings:cet}=yR.actions,KX=yR.reducer;function QX(t,e,n){return(e=JX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JX(t){var e=tK(t,"string");return typeof e=="symbol"?e:e+""}function tK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class K2{static create(e){return new K2(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(i)switch(i){case"start":return this.scale(e);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+r}case"end":{var u=this.bandwidth?this.bandwidth():0;return this.scale(e)+u}default:return this.scale(e)}if(n){var f=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+f}return this.scale(e)}}isInRange(e){var n=this.range(),i=n[0],r=n[n.length-1];return i<=r?e>=i&&e<=r:e>=r&&e<=i}}QX(K2,"EPS",1e-4);function eK(t){return(t%180+180)%180}var nK=function(e){var{width:n,height:i}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=eK(r),f=u*Math.PI/180,a=Math.atan(i/n),y=f>a&&f<Math.PI-a?i/Math.sin(f):n/Math.cos(f);return Math.abs(y)},iK={dots:[],areas:[],lines:[]},_R=xl({name:"referenceElements",initialState:iK,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Oh(t).dots.findIndex(i=>i===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Oh(t).areas.findIndex(i=>i===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Oh(t).lines.findIndex(i=>i===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:het,removeDot:fet,addArea:det,removeArea:pet,addLine:met,removeLine:get}=_R.actions,rK=_R.reducer,aK=G.createContext(void 0),sK=t=>{var{children:e}=t,[n]=G.useState("".concat(Sy("recharts"),"-clip")),i=X2();if(i==null)return null;var{x:r,y:u,width:f,height:a}=i;return G.createElement(aK.Provider,{value:n},G.createElement("defs",null,G.createElement("clipPath",{id:n},G.createElement("rect",{x:r,y:u,height:a,width:f}))),e)};function Pm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var i in e)if({}.hasOwnProperty.call(e,i)&&!{}.hasOwnProperty.call(t,i))return!1;return!0}function vR(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function oK(t,e,n){var i={width:t.width+e.width,height:t.height+e.height};return nK(i,n)}function lK(t,e,n){var i=n==="width",{x:r,y:u,width:f,height:a}=t;return e===1?{start:i?r:u,end:i?r+f:u+a}:{start:i?r+f:u+a,end:i?r:u}}function N0(t,e,n,i,r){if(t*e<t*i||t*e>t*r)return!1;var u=n();return t*(e-t*u/2-i)>=0&&t*(e+t*u/2-r)<=0}function uK(t,e){return vR(t,e+1)}function cK(t,e,n,i,r){for(var u=(i||[]).slice(),{start:f,end:a}=e,y=0,_=1,x=f,A=function(){var F=i?.[y];if(F===void 0)return{v:vR(i,_)};var q=y,H,K=()=>(H===void 0&&(H=n(F,q)),H),W=F.coordinate,X=y===0||N0(t,W,K,x,a);X||(y=0,x=f,_+=1),X&&(x=W+t*(K()/2+r),y+=_)},O;_<=u.length;)if(O=A(),O)return O.v;return[]}function HP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function So(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(n),!0).forEach(function(i){hK(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function hK(t,e,n){return(e=fK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fK(t){var e=dK(t,"string");return typeof e=="symbol"?e:e+""}function dK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pK(t,e,n,i,r){for(var u=(i||[]).slice(),f=u.length,{start:a}=e,{end:y}=e,_=function(O){var I=u[O],F,q=()=>(F===void 0&&(F=n(I,O)),F);if(O===f-1){var H=t*(I.coordinate+t*q()/2-y);u[O]=I=So(So({},I),{},{tickCoord:H>0?I.coordinate-H*t:I.coordinate})}else u[O]=I=So(So({},I),{},{tickCoord:I.coordinate});if(I.tickCoord!=null){var K=N0(t,I.tickCoord,q,a,y);K&&(y=I.tickCoord-t*(q()/2+r),u[O]=So(So({},I),{},{isShow:!0}))}},x=f-1;x>=0;x--)_(x);return u}function mK(t,e,n,i,r,u){var f=(i||[]).slice(),a=f.length,{start:y,end:_}=e;if(u){var x=i[a-1],A=n(x,a-1),O=t*(x.coordinate+t*A/2-_);if(f[a-1]=x=So(So({},x),{},{tickCoord:O>0?x.coordinate-O*t:x.coordinate}),x.tickCoord!=null){var I=N0(t,x.tickCoord,()=>A,y,_);I&&(_=x.tickCoord-t*(A/2+r),f[a-1]=So(So({},x),{},{isShow:!0}))}}for(var F=u?a-1:a,q=function(W){var X=f[W],tt,Q=()=>(tt===void 0&&(tt=n(X,W)),tt);if(W===0){var at=t*(X.coordinate-t*Q()/2-y);f[W]=X=So(So({},X),{},{tickCoord:at<0?X.coordinate-at*t:X.coordinate})}else f[W]=X=So(So({},X),{},{tickCoord:X.coordinate});if(X.tickCoord!=null){var ht=N0(t,X.tickCoord,Q,y,_);ht&&(y=X.tickCoord+t*(Q()/2+r),f[W]=So(So({},X),{},{isShow:!0}))}},H=0;H<F;H++)q(H);return f}function Q2(t,e,n){var{tick:i,ticks:r,viewBox:u,minTickGap:f,orientation:a,interval:y,tickFormatter:_,unit:x,angle:A}=t;if(!r||!r.length||!i)return[];if(xn(y)||Rm.isSsr){var O;return(O=uK(r,xn(y)?y:0))!==null&&O!==void 0?O:[]}var I=[],F=a==="top"||a==="bottom"?"width":"height",q=x&&F==="width"?py(x,{fontSize:e,letterSpacing:n}):{width:0,height:0},H=(X,tt)=>{var Q=typeof _=="function"?_(X.value,tt):X.value;return F==="width"?oK(py(Q,{fontSize:e,letterSpacing:n}),q,A):py(Q,{fontSize:e,letterSpacing:n})[F]},K=r.length>=2?Tu(r[1].coordinate-r[0].coordinate):1,W=lK(u,K,F);return y==="equidistantPreserveStart"?cK(K,W,H,r,f):(y==="preserveStart"||y==="preserveStartEnd"?I=mK(K,W,H,r,f,y==="preserveStartEnd"):I=pK(K,W,H,r,f),I.filter(X=>X.isShow))}var gK=t=>{var{ticks:e,label:n,labelGapWithTick:i=5,tickSize:r=0,tickMargin:u=0}=t,f=0;if(e){Array.from(e).forEach(x=>{if(x){var A=x.getBoundingClientRect();A.width>f&&(f=A.width)}});var a=n?n.getBoundingClientRect().width:0,y=r+u,_=f+y+a+(n?i:0);return Math.round(_)}return 0},yK=["axisLine","width","height","className","hide","ticks","axisType"],_K=["viewBox"],vK=["viewBox"];function sS(t,e){if(t==null)return{};var n,i,r=xK(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xK(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function ep(){return ep=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ep.apply(null,arguments)}function ZP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Za(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZP(Object(n),!0).forEach(function(i){bK(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function bK(t,e,n){return(e=wK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wK(t){var e=SK(t,"string");return typeof e=="symbol"?e:e+""}function SK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var J2={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ko.axis};function TK(t){var{x:e,y:n,width:i,height:r,orientation:u,mirror:f,axisLine:a,otherSvgProps:y}=t;if(!a)return null;var _=Za(Za(Za({},y),fc(a)),{},{fill:"none"});if(u==="top"||u==="bottom"){var x=+(u==="top"&&!f||u==="bottom"&&f);_=Za(Za({},_),{},{x1:e,y1:n+x*r,x2:e+i,y2:n+x*r})}else{var A=+(u==="left"&&!f||u==="right"&&f);_=Za(Za({},_),{},{x1:e+A*i,y1:n,x2:e+A*i,y2:n+r})}return G.createElement("line",ep({},_,{className:Nr("recharts-cartesian-axis-line",ox(a,"className"))}))}function MK(t,e,n,i,r,u,f,a,y){var _,x,A,O,I,F,q=a?-1:1,H=t.tickSize||f,K=xn(t.tickCoord)?t.tickCoord:t.coordinate;switch(u){case"top":_=x=t.coordinate,O=n+ +!a*r,A=O-q*H,F=A-q*y,I=K;break;case"left":A=O=t.coordinate,x=e+ +!a*i,_=x-q*H,I=_-q*y,F=K;break;case"right":A=O=t.coordinate,x=e+ +a*i,_=x+q*H,I=_+q*y,F=K;break;default:_=x=t.coordinate,O=n+ +a*r,A=O+q*H,F=A+q*y,I=K;break}return{line:{x1:_,y1:A,x2:x,y2:O},tick:{x:I,y:F}}}function AK(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function EK(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function CK(t){var{option:e,tickProps:n,value:i}=t,r,u=Nr(n.className,"recharts-cartesian-axis-tick-value");if(G.isValidElement(e))r=G.cloneElement(e,Za(Za({},n),{},{className:u}));else if(typeof e=="function")r=e(Za(Za({},n),{},{className:u}));else{var f="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(f=Nr(f,e?.className)),r=G.createElement(W2,ep({},n,{className:f}),i)}return r}var PK=G.forwardRef((t,e)=>{var{ticks:n=[],tick:i,tickLine:r,stroke:u,tickFormatter:f,unit:a,padding:y,tickTextProps:_,orientation:x,mirror:A,x:O,y:I,width:F,height:q,tickSize:H,tickMargin:K,fontSize:W,letterSpacing:X,getTicksConfig:tt,events:Q,axisType:at}=t,ht=Q2(Za(Za({},tt),{},{ticks:n}),W,X),ot=AK(x,A),ct=EK(x,A),xt=fc(tt),wt=rx(i),Ct={};typeof r=="object"&&(Ct=r);var re=Za(Za({},xt),{},{fill:"none"},Ct),ve=ht.map(Pt=>Za({entry:Pt},MK(Pt,O,I,F,q,x,H,A,K))),Ee=ve.map(Pt=>{var{entry:Bt,line:Ft}=Pt;return G.createElement(Vc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Bt.value,"-").concat(Bt.coordinate,"-").concat(Bt.tickCoord)},r&&G.createElement("line",ep({},re,Ft,{className:Nr("recharts-cartesian-axis-tick-line",ox(r,"className"))})))}),Nt=ve.map((Pt,Bt)=>{var{entry:Ft,tick:$t}=Pt,ft=Za(Za(Za(Za({textAnchor:ot,verticalAnchor:ct},xt),{},{stroke:"none",fill:u},wt),$t),{},{index:Bt,payload:Ft,visibleTicksCount:ht.length,tickFormatter:f,padding:y},_);return G.createElement(Vc,ep({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Ft.value,"-").concat(Ft.coordinate,"-").concat(Ft.tickCoord)},U8(Q,Ft,Bt)),i&&G.createElement(CK,{option:i,tickProps:ft,value:"".concat(typeof f=="function"?f(Ft.value,Bt):Ft.value).concat(a||"")}))});return G.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(at,"-ticks")},Nt.length>0&&G.createElement(Yh,{zIndex:Ko.label},G.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(at,"-tick-labels"),ref:e},Nt)),Ee.length>0&&G.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(at,"-tick-lines")},Ee))}),kK=G.forwardRef((t,e)=>{var{axisLine:n,width:i,height:r,className:u,hide:f,ticks:a,axisType:y}=t,_=sS(t,yK),[x,A]=G.useState(""),[O,I]=G.useState(""),F=G.useRef(null);G.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var H;return gK({ticks:F.current,label:(H=t.labelRef)===null||H===void 0?void 0:H.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var q=G.useCallback(H=>{if(H){var K=H.getElementsByClassName("recharts-cartesian-axis-tick-value");F.current=K;var W=K[0];if(W){var X=window.getComputedStyle(W),tt=X.fontSize,Q=X.letterSpacing;(tt!==x||Q!==O)&&(A(tt),I(Q))}}},[x,O]);return f||i!=null&&i<=0||r!=null&&r<=0?null:G.createElement(Yh,{zIndex:t.zIndex},G.createElement(Vc,{className:Nr("recharts-cartesian-axis",u)},G.createElement(TK,{x:t.x,y:t.y,width:i,height:r,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:fc(t)}),G.createElement(PK,{ref:q,axisType:y,events:_,fontSize:x,getTicksConfig:t,height:t.height,letterSpacing:O,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:a,unit:t.unit,width:t.width,x:t.x,y:t.y}),G.createElement(RY,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},G.createElement(ZY,{label:t.label,labelRef:t.labelRef}),t.children)))}),OK=G.memo(kK,(t,e)=>{var{viewBox:n}=t,i=sS(t,_K),{viewBox:r}=e,u=sS(e,vK);return Pm(n,r)&&Pm(i,u)}),tT=G.forwardRef((t,e)=>{var n=Ql(t,J2);return G.createElement(OK,ep({},n,{ref:e}))});tT.displayName="CartesianAxis";var DK=["x1","y1","x2","y2","key"],zK=["offset"],LK=["xAxisId","yAxisId"],IK=["xAxisId","yAxisId"];function GP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Mo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GP(Object(n),!0).forEach(function(i){RK(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function RK(t,e,n){return(e=BK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BK(t){var e=NK(t,"string");return typeof e=="symbol"?e:e+""}function NK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ud(){return Ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ud.apply(null,arguments)}function j0(t,e){if(t==null)return{};var n,i,r=jK(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jK(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var FK=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:i,y:r,width:u,height:f,ry:a}=t;return G.createElement("rect",{x:i,y:r,ry:a,width:u,height:f,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function xR(t){var{option:e,lineItemProps:n}=t,i;if(G.isValidElement(e))i=G.cloneElement(e,n);else if(typeof e=="function")i=e(n);else{var r,{x1:u,y1:f,x2:a,y2:y,key:_}=n,x=j0(n,DK),A=(r=fc(x))!==null&&r!==void 0?r:{},{offset:O}=A,I=j0(A,zK);i=G.createElement("line",Ud({},I,{x1:u,y1:f,x2:a,y2:y,fill:"none",key:_}))}return i}function UK(t){var{x:e,width:n,horizontal:i=!0,horizontalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:u,yAxisId:f}=t,a=j0(t,LK),y=r.map((_,x)=>{var A=Mo(Mo({},a),{},{x1:e,y1:_,x2:e+n,y2:_,key:"line-".concat(x),index:x});return G.createElement(xR,{key:"line-".concat(x),option:i,lineItemProps:A})});return G.createElement("g",{className:"recharts-cartesian-grid-horizontal"},y)}function VK(t){var{y:e,height:n,vertical:i=!0,verticalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:u,yAxisId:f}=t,a=j0(t,IK),y=r.map((_,x)=>{var A=Mo(Mo({},a),{},{x1:_,y1:e,x2:_,y2:e+n,key:"line-".concat(x),index:x});return G.createElement(xR,{option:i,lineItemProps:A,key:"line-".concat(x)})});return G.createElement("g",{className:"recharts-cartesian-grid-vertical"},y)}function $K(t){var{horizontalFill:e,fillOpacity:n,x:i,y:r,width:u,height:f,horizontalPoints:a,horizontal:y=!0}=t;if(!y||!e||!e.length||a==null)return null;var _=a.map(A=>Math.round(A+r-r)).sort((A,O)=>A-O);r!==_[0]&&_.unshift(0);var x=_.map((A,O)=>{var I=!_[O+1],F=I?r+f-A:_[O+1]-A;if(F<=0)return null;var q=O%e.length;return G.createElement("rect",{key:"react-".concat(O),y:A,x:i,height:F,width:u,stroke:"none",fill:e[q],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},x)}function qK(t){var{vertical:e=!0,verticalFill:n,fillOpacity:i,x:r,y:u,width:f,height:a,verticalPoints:y}=t;if(!e||!n||!n.length)return null;var _=y.map(A=>Math.round(A+r-r)).sort((A,O)=>A-O);r!==_[0]&&_.unshift(0);var x=_.map((A,O)=>{var I=!_[O+1],F=I?r+f-A:_[O+1]-A;if(F<=0)return null;var q=O%n.length;return G.createElement("rect",{key:"react-".concat(O),x:A,y:u,width:F,height:a,stroke:"none",fill:n[q],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},x)}var HK=(t,e)=>{var{xAxis:n,width:i,height:r,offset:u}=t;return hz(Q2(Mo(Mo(Mo({},J2),n),{},{ticks:fz(n),viewBox:{x:0,y:0,width:i,height:r}})),u.left,u.left+u.width,e)},ZK=(t,e)=>{var{yAxis:n,width:i,height:r,offset:u}=t;return hz(Q2(Mo(Mo(Mo({},J2),n),{},{ticks:fz(n),viewBox:{x:0,y:0,width:i,height:r}})),u.top,u.top+u.height,e)},GK={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ko.grid};function eT(t){var e=wz(),n=Sz(),i=bz(),r=Mo(Mo({},Ql(t,GK)),{},{x:xn(t.x)?t.x:i.left,y:xn(t.y)?t.y:i.top,width:xn(t.width)?t.width:i.width,height:xn(t.height)?t.height:i.height}),{xAxisId:u,yAxisId:f,x:a,y,width:_,height:x,syncWithTicks:A,horizontalValues:O,verticalValues:I}=r,F=bl(),q=En(ct=>sP(ct,"xAxis",u,F)),H=En(ct=>sP(ct,"yAxis",f,F));if(!qc(_)||!qc(x)||!xn(a)||!xn(y))return null;var K=r.verticalCoordinatesGenerator||HK,W=r.horizontalCoordinatesGenerator||ZK,{horizontalPoints:X,verticalPoints:tt}=r;if((!X||!X.length)&&typeof W=="function"){var Q=O&&O.length,at=W({yAxis:H?Mo(Mo({},H),{},{ticks:Q?O:H.ticks}):void 0,width:e??_,height:n??x,offset:i},Q?!0:A);y0(Array.isArray(at),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof at,"]")),Array.isArray(at)&&(X=at)}if((!tt||!tt.length)&&typeof K=="function"){var ht=I&&I.length,ot=K({xAxis:q?Mo(Mo({},q),{},{ticks:ht?I:q.ticks}):void 0,width:e??_,height:n??x,offset:i},ht?!0:A);y0(Array.isArray(ot),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof ot,"]")),Array.isArray(ot)&&(tt=ot)}return G.createElement(Yh,{zIndex:r.zIndex},G.createElement("g",{className:"recharts-cartesian-grid"},G.createElement(FK,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),G.createElement($K,Ud({},r,{horizontalPoints:X})),G.createElement(qK,Ud({},r,{verticalPoints:tt})),G.createElement(UK,Ud({},r,{offset:i,horizontalPoints:X,xAxis:q,yAxis:H})),G.createElement(VK,Ud({},r,{offset:i,verticalPoints:tt,xAxis:q,yAxis:H}))))}eT.displayName="CartesianGrid";function WK(t){var e=rx(t),n=3,i=2;if(e!=null){var{r,strokeWidth:u}=e,f=Number(r),a=Number(u);return(Number.isNaN(f)||f<0)&&(f=n),(Number.isNaN(a)||a<0)&&(a=i),{r:f,strokeWidth:a}}return{r:n,strokeWidth:i}}var bR=(t,e,n,i)=>vI(t,"xAxis",e,i),wR=(t,e,n,i)=>_I(t,"xAxis",e,i),SR=(t,e,n,i)=>vI(t,"yAxis",n,i),TR=(t,e,n,i)=>_I(t,"yAxis",n,i),YK=we([Tr,bR,SR,wR,TR],(t,e,n,i,r)=>Vh(t,"xAxis")?g0(e,i,!1):g0(n,r,!1)),XK=(t,e,n,i,r)=>r,MR=we([FL,XK],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),KK=(t,e,n,i,r)=>{var u,f=MR(t,e,n,i,r);if(f!=null){var a=Tr(t),y=Vh(a,"xAxis"),_;if(y?_=Qw(t,"yAxis",n,i):_=Qw(t,"xAxis",e,i),_!=null){var{stackId:x}=f,A=C2(f);if(!(x==null||A==null)){var O=(u=_[x])===null||u===void 0?void 0:u.stackedData;return O?.find(I=>I.key===A)}}}},QK=we([Tr,bR,SR,wR,TR,KK,v2,YK,MR,H7],(t,e,n,i,r,u,f,a,y,_)=>{var{chartData:x,dataStartIndex:A,dataEndIndex:O}=f;if(!(y==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||i==null||r==null||i.length===0||r.length===0||a==null)){var{data:I}=y,F;if(I&&I.length>0?F=I:F=x?.slice(A,O+1),F!=null)return yQ({layout:t,xAxis:e,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataStartIndex:A,areaSettings:y,stackedData:u,displayedData:F,chartBaseValue:_,bandSize:a})}}),JK=["id"],tQ=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Wd(){return Wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wd.apply(null,arguments)}function AR(t,e){if(t==null)return{};var n,i,r=eQ(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function eQ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function WP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function _m(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WP(Object(n),!0).forEach(function(i){nQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nQ(t,e,n){return(e=iQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iQ(t){var e=rQ(t,"string");return typeof e=="symbol"?e:e+""}function rQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F0(t,e){return t&&t!=="none"?t:e}var aQ=t=>{var{dataKey:e,name:n,stroke:i,fill:r,legendType:u,hide:f}=t;return[{inactive:f,dataKey:e,type:u,color:F0(i,r),value:dz(n,e),payload:t}]};function sQ(t){var{dataKey:e,data:n,stroke:i,strokeWidth:r,fill:u,name:f,hide:a,unit:y}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:r,fill:u,dataKey:e,nameKey:void 0,name:dz(f,e),hide:a,type:t.tooltipType,color:F0(i,u),unit:y}}}function oQ(t){var{clipPathId:e,points:n,props:i}=t,{needClip:r,dot:u,dataKey:f}=i,a=fc(i);return G.createElement(PX,{points:n,dot:u,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:f,baseProps:a,needClip:r,clipPathId:e})}function lQ(t){var{showLabels:e,children:n,points:i}=t,r=i.map(u=>{var f,a,y={x:(f=u.x)!==null&&f!==void 0?f:0,y:(a=u.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return _m(_m({},y),{},{value:u.value,payload:u.payload,parentViewBox:void 0,viewBox:y,fill:void 0})});return G.createElement(iX,{value:e?r:void 0},n)}function YP(t){var{points:e,baseLine:n,needClip:i,clipPathId:r,props:u}=t,{layout:f,type:a,stroke:y,connectNulls:_,isRange:x}=u,{id:A}=u,O=AR(u,JK),I=fc(O),F=Au(O);return G.createElement(G.Fragment,null,e?.length>1&&G.createElement(Vc,{clipPath:i?"url(#clipPath-".concat(r,")"):void 0},G.createElement(Zv,Wd({},F,{id:A,points:e,connectNulls:_,type:a,baseLine:n,layout:f,stroke:"none",className:"recharts-area-area"})),y!=="none"&&G.createElement(Zv,Wd({},I,{className:"recharts-area-curve",layout:f,type:a,connectNulls:_,fill:"none",points:e})),y!=="none"&&x&&G.createElement(Zv,Wd({},I,{className:"recharts-area-curve",layout:f,type:a,connectNulls:_,fill:"none",points:n}))),G.createElement(oQ,{points:e,props:O,clipPathId:r}))}function uQ(t){var{alpha:e,baseLine:n,points:i,strokeWidth:r}=t,u=i[0].y,f=i[i.length-1].y;if(!ya(u)||!ya(f))return null;var a=e*Math.abs(u-f),y=Math.max(...i.map(_=>_.x||0));return xn(n)?y=Math.max(n,y):n&&Array.isArray(n)&&n.length&&(y=Math.max(...n.map(_=>_.x||0),y)),xn(y)?G.createElement("rect",{x:0,y:u<f?u:u-a,width:y+(r?parseInt("".concat(r),10):1),height:Math.floor(a)}):null}function cQ(t){var{alpha:e,baseLine:n,points:i,strokeWidth:r}=t,u=i[0].x,f=i[i.length-1].x;if(!ya(u)||!ya(f))return null;var a=e*Math.abs(u-f),y=Math.max(...i.map(_=>_.y||0));return xn(n)?y=Math.max(n,y):n&&Array.isArray(n)&&n.length&&(y=Math.max(...n.map(_=>_.y||0),y)),xn(y)?G.createElement("rect",{x:u<f?u:u-a,y:0,width:a,height:Math.floor(y+(r?parseInt("".concat(r),10):1))}):null}function hQ(t){var{alpha:e,layout:n,points:i,baseLine:r,strokeWidth:u}=t;return n==="vertical"?G.createElement(uQ,{alpha:e,points:i,baseLine:r,strokeWidth:u}):G.createElement(cQ,{alpha:e,points:i,baseLine:r,strokeWidth:u})}function fQ(t){var{needClip:e,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:u}=t,{points:f,baseLine:a,isAnimationActive:y,animationBegin:_,animationDuration:x,animationEasing:A,onAnimationStart:O,onAnimationEnd:I}=i,F=kz(i,"recharts-area-"),[q,H]=G.useState(!1),K=!q,W=G.useCallback(()=>{typeof I=="function"&&I(),H(!1)},[I]),X=G.useCallback(()=>{typeof O=="function"&&O(),H(!0)},[O]),tt=r.current,Q=u.current;return G.createElement(lQ,{showLabels:K,points:f},i.children,G.createElement(Pz,{animationId:F,begin:_,duration:x,isActive:y,easing:A,onAnimationEnd:W,onAnimationStart:X,key:F},at=>{if(tt){var ht=tt.length/f.length,ot=at===1?f:f.map((xt,wt)=>{var Ct=Math.floor(wt*ht);if(tt[Ct]){var re=tt[Ct];return _m(_m({},xt),{},{x:Bc(re.x,xt.x,at),y:Bc(re.y,xt.y,at)})}return xt}),ct;return xn(a)?ct=Bc(Q,a,at):Zs(a)||dc(a)?ct=Bc(Q,0,at):ct=a.map((xt,wt)=>{var Ct=Math.floor(wt*ht);if(Array.isArray(Q)&&Q[Ct]){var re=Q[Ct];return _m(_m({},xt),{},{x:Bc(re.x,xt.x,at),y:Bc(re.y,xt.y,at)})}return xt}),at>0&&(r.current=ot,u.current=ct),G.createElement(YP,{points:ot,baseLine:ct,needClip:e,clipPathId:n,props:i})}return at>0&&(r.current=f,u.current=a),G.createElement(Vc,null,y&&G.createElement("defs",null,G.createElement("clipPath",{id:"animationClipPath-".concat(n)},G.createElement(hQ,{alpha:at,points:f,baseLine:a,layout:i.layout,strokeWidth:i.strokeWidth}))),G.createElement(Vc,{clipPath:"url(#animationClipPath-".concat(n,")")},G.createElement(YP,{points:f,baseLine:a,needClip:e,clipPathId:n,props:i})))}),G.createElement(sX,{label:i.label}))}function dQ(t){var{needClip:e,clipPathId:n,props:i}=t,r=G.useRef(null),u=G.useRef();return G.createElement(fQ,{needClip:e,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:u})}class pQ extends G.PureComponent{render(){var{hide:e,dot:n,points:i,className:r,top:u,left:f,needClip:a,xAxisId:y,yAxisId:_,width:x,height:A,id:O,baseLine:I,zIndex:F}=this.props;if(e)return null;var q=Nr("recharts-area",r),H=O,{r:K,strokeWidth:W}=WK(n),X=hR(n),tt=K*2+W;return G.createElement(Yh,{zIndex:F},G.createElement(Vc,{className:q},a&&G.createElement("defs",null,G.createElement(YX,{clipPathId:H,xAxisId:y,yAxisId:_}),!X&&G.createElement("clipPath",{id:"clipPath-dots-".concat(H)},G.createElement("rect",{x:f-tt/2,y:u-tt/2,width:x+tt,height:A+tt}))),G.createElement(dQ,{needClip:a,clipPathId:H,props:this.props})),G.createElement($P,{points:i,mainColor:F0(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(I)&&G.createElement($P,{points:I,mainColor:F0(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var ER={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Rm.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0,zIndex:Ko.area};function mQ(t){var e,n=Ql(t,ER),{activeDot:i,animationBegin:r,animationDuration:u,animationEasing:f,connectNulls:a,dot:y,fill:_,fillOpacity:x,hide:A,isAnimationActive:O,legendType:I,stroke:F,xAxisId:q,yAxisId:H}=n,K=AR(n,tQ),W=vx(),X=UI(),{needClip:tt}=gR(q,H),Q=bl(),{points:at,isRange:ht,baseLine:ot}=(e=En(ve=>QK(ve,q,H,Q,t.id)))!==null&&e!==void 0?e:{},ct=X2();if(W!=="horizontal"&&W!=="vertical"||ct==null||X!=="AreaChart"&&X!=="ComposedChart")return null;var{height:xt,width:wt,x:Ct,y:re}=ct;return!at||!at.length?null:G.createElement(pQ,Wd({},K,{activeDot:i,animationBegin:r,animationDuration:u,animationEasing:f,baseLine:ot,connectNulls:a,dot:y,fill:_,fillOpacity:x,height:xt,hide:A,layout:W,isAnimationActive:O,isRange:ht,legendType:I,needClip:tt,points:at,stroke:F,width:wt,left:Ct,top:re,xAxisId:q,yAxisId:H}))}var gQ=(t,e,n,i,r)=>{var u=n??e;if(xn(u))return u;var f=t==="horizontal"?r:i,a=f.scale.domain();if(f.type==="number"){var y=Math.max(a[0],a[1]),_=Math.min(a[0],a[1]);return u==="dataMin"?_:u==="dataMax"||y<0?y:Math.max(Math.min(a[0],a[1]),0)}return u==="dataMin"?a[0]:u==="dataMax"?a[1]:a[0]};function yQ(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:i},stackedData:r,layout:u,chartBaseValue:f,xAxis:a,yAxis:y,displayedData:_,dataStartIndex:x,xAxisTicks:A,yAxisTicks:O,bandSize:I}=t,F=r&&r.length,q=gQ(u,f,n,a,y),H=u==="horizontal",K=!1,W=_.map((tt,Q)=>{var at;F?at=r[x+Q]:(at=Qo(tt,i),Array.isArray(at)?K=!0:at=[q,at]);var ht=at[1]==null||F&&!e&&Qo(tt,i)==null;return H?{x:IE({axis:a,ticks:A,bandSize:I,entry:tt,index:Q}),y:ht?null:y.scale(at[1]),value:at,payload:tt}:{x:ht?null:a.scale(at[1]),y:IE({axis:y,ticks:O,bandSize:I,entry:tt,index:Q}),value:at,payload:tt}}),X;return F||K?X=W.map(tt=>{var Q=Array.isArray(tt.value)?tt.value[0]:null;return H?{x:tt.x,y:Q!=null&&tt.y!=null?y.scale(Q):null,payload:tt.payload}:{x:Q!=null?a.scale(Q):null,y:tt.y,payload:tt.payload}}):X=H?y.scale(q):a.scale(q),{points:W,baseLine:X,isRange:K}}function _Q(t){var e=Ql(t,ER),n=bl();return G.createElement(pX,{id:e.id,type:"area"},i=>G.createElement(G.Fragment,null,G.createElement(cX,{legendPayload:aQ(e)}),G.createElement(uX,{fn:sQ,args:e}),G.createElement(xX,{type:"area",id:i,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:HV(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),G.createElement(mQ,Wd({},e,{id:i}))))}var nT=G.memo(_Q);nT.displayName="Area";var vQ=["dangerouslySetInnerHTML","ticks"],xQ=["id"],bQ=["domain"],wQ=["domain"];function oS(){return oS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},oS.apply(null,arguments)}function U0(t,e){if(t==null)return{};var n,i,r=SQ(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function SQ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function TQ(t){var e=Ts();return G.useLayoutEffect(()=>(e(LX(t)),()=>{e(IX(t))}),[t,e]),null}var MQ=t=>{var{xAxisId:e,className:n}=t,i=En(mz),r=bl(),u="xAxis",f=En(H=>Vm(H,u,e,r)),a=En(H=>yI(H,u,e,r)),y=En(H=>BZ(H,e)),_=En(H=>$Z(H,e)),x=En(H=>RL(H,e));if(y==null||_==null||x==null)return null;var{dangerouslySetInnerHTML:A,ticks:O}=t,I=U0(t,vQ),{id:F}=x,q=U0(x,xQ);return G.createElement(tT,oS({},I,q,{scale:f,x:_.x,y:_.y,width:y.width,height:y.height,className:Nr("recharts-".concat(u," ").concat(u),n),viewBox:i,ticks:a,axisType:u}))},AQ={allowDataOverflow:$l.allowDataOverflow,allowDecimals:$l.allowDecimals,allowDuplicatedCategory:$l.allowDuplicatedCategory,height:$l.height,hide:!1,mirror:$l.mirror,orientation:$l.orientation,padding:$l.padding,reversed:$l.reversed,scale:$l.scale,tickCount:$l.tickCount,type:$l.type,xAxisId:0},EQ=t=>{var e,n,i,r,u,f=Ql(t,AQ);return G.createElement(G.Fragment,null,G.createElement(TQ,{interval:(e=f.interval)!==null&&e!==void 0?e:"preserveEnd",id:f.xAxisId,scale:f.scale,type:f.type,padding:f.padding,allowDataOverflow:f.allowDataOverflow,domain:f.domain,dataKey:f.dataKey,allowDuplicatedCategory:f.allowDuplicatedCategory,allowDecimals:f.allowDecimals,tickCount:f.tickCount,includeHidden:(n=f.includeHidden)!==null&&n!==void 0?n:!1,reversed:f.reversed,ticks:f.ticks,height:f.height,orientation:f.orientation,mirror:f.mirror,hide:f.hide,unit:f.unit,name:f.name,angle:(i=f.angle)!==null&&i!==void 0?i:0,minTickGap:(r=f.minTickGap)!==null&&r!==void 0?r:5,tick:(u=f.tick)!==null&&u!==void 0?u:!0,tickFormatter:f.tickFormatter}),G.createElement(MQ,f))},CQ=(t,e)=>{var{domain:n}=t,i=U0(t,bQ),{domain:r}=e,u=U0(e,wQ);return Pm(i,u)?Array.isArray(n)&&n.length===2&&Array.isArray(r)&&r.length===2?n[0]===r[0]&&n[1]===r[1]:Pm({domain:n},{domain:r}):!1},iT=G.memo(EQ,CQ);iT.displayName="XAxis";var PQ=["dangerouslySetInnerHTML","ticks"],kQ=["id"],OQ=["domain"],DQ=["domain"];function lS(){return lS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lS.apply(null,arguments)}function V0(t,e){if(t==null)return{};var n,i,r=zQ(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zQ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function LQ(t){var e=Ts();return G.useLayoutEffect(()=>(e(RX(t)),()=>{e(BX(t))}),[t,e]),null}var IQ=t=>{var{yAxisId:e,className:n,width:i,label:r}=t,u=G.useRef(null),f=G.useRef(null),a=En(mz),y=bl(),_=Ts(),x="yAxis",A=En(Q=>Vm(Q,x,e,y)),O=En(Q=>ZZ(Q,e)),I=En(Q=>HZ(Q,e)),F=En(Q=>yI(Q,x,e,y)),q=En(Q=>BL(Q,e));if(G.useLayoutEffect(()=>{if(!(i!=="auto"||!O||Y2(r)||G.isValidElement(r)||q==null)){var Q=u.current;if(Q){var at=Q.getCalculatedWidth();Math.round(O.width)!==Math.round(at)&&_(NX({id:e,width:at}))}}},[F,O,_,r,e,i,q]),O==null||I==null||q==null)return null;var{dangerouslySetInnerHTML:H,ticks:K}=t,W=V0(t,PQ),{id:X}=q,tt=V0(q,kQ);return G.createElement(tT,lS({},W,tt,{ref:u,labelRef:f,scale:A,x:I.x,y:I.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:O.width,height:O.height,className:Nr("recharts-".concat(x," ").concat(x),n),viewBox:a,ticks:F,axisType:x}))},RQ={allowDataOverflow:ql.allowDataOverflow,allowDecimals:ql.allowDecimals,allowDuplicatedCategory:ql.allowDuplicatedCategory,hide:!1,mirror:ql.mirror,orientation:ql.orientation,padding:ql.padding,reversed:ql.reversed,scale:ql.scale,tickCount:ql.tickCount,type:ql.type,width:ql.width,yAxisId:0},BQ=t=>{var e,n,i,r,u,f=Ql(t,RQ);return G.createElement(G.Fragment,null,G.createElement(LQ,{interval:(e=f.interval)!==null&&e!==void 0?e:"preserveEnd",id:f.yAxisId,scale:f.scale,type:f.type,domain:f.domain,allowDataOverflow:f.allowDataOverflow,dataKey:f.dataKey,allowDuplicatedCategory:f.allowDuplicatedCategory,allowDecimals:f.allowDecimals,tickCount:f.tickCount,padding:f.padding,includeHidden:(n=f.includeHidden)!==null&&n!==void 0?n:!1,reversed:f.reversed,ticks:f.ticks,width:f.width,orientation:f.orientation,mirror:f.mirror,hide:f.hide,unit:f.unit,name:f.name,angle:(i=f.angle)!==null&&i!==void 0?i:0,minTickGap:(r=f.minTickGap)!==null&&r!==void 0?r:5,tick:(u=f.tick)!==null&&u!==void 0?u:!0,tickFormatter:f.tickFormatter}),G.createElement(IQ,f))},NQ=(t,e)=>{var{domain:n}=t,i=V0(t,OQ),{domain:r}=e,u=V0(e,DQ);return Pm(i,u)?Array.isArray(n)&&n.length===2&&Array.isArray(r)&&r.length===2?n[0]===r[0]&&n[1]===r[1]:Pm({domain:n},{domain:r}):!1},rT=G.memo(BQ,NQ);rT.displayName="YAxis";var tw={exports:{}},ew={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XP;function jQ(){if(XP)return ew;XP=1;var t=Om();function e(y,_){return y===_&&(y!==0||1/y===1/_)||y!==y&&_!==_}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,r=t.useRef,u=t.useEffect,f=t.useMemo,a=t.useDebugValue;return ew.useSyncExternalStoreWithSelector=function(y,_,x,A,O){var I=r(null);if(I.current===null){var F={hasValue:!1,value:null};I.current=F}else F=I.current;I=f(function(){function H(Q){if(!K){if(K=!0,W=Q,Q=A(Q),O!==void 0&&F.hasValue){var at=F.value;if(O(at,Q))return X=at}return X=Q}if(at=X,n(W,Q))return at;var ht=A(Q);return O!==void 0&&O(at,ht)?(W=Q,at):(W=Q,X=ht)}var K=!1,W,X,tt=x===void 0?null:x;return[function(){return H(_())},tt===null?void 0:function(){return H(tt())}]},[_,x,A,O]);var q=i(y,I[0],I[1]);return u(function(){F.hasValue=!0,F.value=q},[q]),a(q),q},ew}var KP;function FQ(){return KP||(KP=1,tw.exports=jQ()),tw.exports}FQ();function UQ(t){t()}function VQ(){let t=null,e=null;return{clear(){t=null,e=null},notify(){UQ(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!i||t===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var QP={notify(){},get:()=>[]};function $Q(t,e){let n,i=QP,r=0,u=!1;function f(q){x();const H=i.subscribe(q);let K=!1;return()=>{K||(K=!0,H(),A())}}function a(){i.notify()}function y(){F.onStateChange&&F.onStateChange()}function _(){return u}function x(){r++,n||(n=t.subscribe(y),i=VQ())}function A(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=QP)}function O(){u||(u=!0,x())}function I(){u&&(u=!1,A())}const F={addNestedSub:f,notifyNestedSubs:a,handleChangeWrapper:y,isSubscribed:_,trySubscribe:O,tryUnsubscribe:I,getListeners:()=>i};return F}var qQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HQ=qQ(),ZQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",GQ=ZQ(),WQ=()=>HQ||GQ?G.useLayoutEffect:G.useEffect,YQ=WQ(),XQ=Symbol.for("react-redux-context"),KQ=typeof globalThis<"u"?globalThis:{};function QQ(){if(!G.createContext)return{};const t=KQ[XQ]??=new Map;let e=t.get(G.createContext);return e||(e=G.createContext(null),t.set(G.createContext,e)),e}var JQ=QQ();function tJ(t){const{children:e,context:n,serverState:i,store:r}=t,u=G.useMemo(()=>{const y=$Q(r);return{store:r,subscription:y,getServerState:i?()=>i:void 0}},[r,i]),f=G.useMemo(()=>r.getState(),[r]);YQ(()=>{const{subscription:y}=u;return y.onStateChange=y.notifyNestedSubs,y.trySubscribe(),f!==r.getState()&&y.notifyNestedSubs(),()=>{y.tryUnsubscribe(),y.onStateChange=void 0}},[u,f]);const a=n||JQ;return G.createElement(a.Provider,{value:u},e)}var eJ=tJ,nJ=(t,e)=>e,aT=we([nJ,Tr,LL,hs,II,Wh,nW,Gs],uW),sT=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,i=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/i)}},CR=Eu("mouseClick"),PR=qy();PR.startListening({actionCreator:CR,effect:(t,e)=>{var n=t.payload,i=aT(e.getState(),sT(n));i?.activeIndex!=null&&e.dispatch(rG({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var uS=Eu("mouseMove"),kR=qy();kR.startListening({actionCreator:uS,effect:(t,e)=>{var n=t.payload,i=e.getState(),r=j2(i,i.tooltip.settings.shared),u=aT(i,sT(n));r==="axis"&&(u?.activeIndex!=null?e.dispatch(AI({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):e.dispatch(MI()))}});var JP={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},OR=xl({name:"rootProps",initialState:JP,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:JP.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue}}}),iJ=OR.reducer,{updateOptions:rJ}=OR.actions,DR=xl({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:yet}=DR.actions,aJ=DR.reducer,zR=Eu("keyDown"),LR=Eu("focus"),oT=qy();oT.startListening({actionCreator:zR,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip,u=t.payload;if(!(u!=="ArrowRight"&&u!=="ArrowLeft"&&u!=="Enter")){var f=Number(F2(r,qm(n))),a=Wh(n);if(u==="Enter"){var y=I0(n,"axis","hover",String(r.index));e.dispatch(tS({active:!r.active,activeIndex:r.index,activeDataKey:r.dataKey,activeCoordinate:y}));return}var _=XZ(n),x=_==="left-to-right"?1:-1,A=u==="ArrowRight"?1:-1,O=f+A*x;if(!(a==null||O>=a.length||O<0)){var I=I0(n,"axis","hover",String(O));e.dispatch(tS({active:!0,activeIndex:O.toString(),activeDataKey:void 0,activeCoordinate:I}))}}}}});oT.startListening({actionCreator:LR,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var u="0",f=I0(n,"axis","hover",String(u));e.dispatch(tS({activeDataKey:void 0,active:!0,activeIndex:u,activeCoordinate:f}))}}}});var Su=Eu("externalEvent"),IR=qy();IR.startListening({actionCreator:Su,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),i={activeCoordinate:UG(n),activeDataKey:jG(n),activeIndex:zy(n),activeLabel:NI(n),activeTooltipIndex:zy(n),isTooltipActive:VG(n)};t.payload.handler(i,t.payload.reactEvent)}}});var sJ=we([$m],t=>t.tooltipItemPayloads),oJ=we([sJ,t_,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,i)=>{var r=t.find(a=>a.settings.dataKey===i);if(r!=null){var{positions:u}=r;if(u!=null){var f=e(u,n);return f}}}),RR=Eu("touchMove"),BR=qy();BR.startListening({actionCreator:RR,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var i=e.getState(),r=j2(i,i.tooltip.settings.shared);if(r==="axis"){var u=aT(i,sT({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));u?.activeIndex!=null&&e.dispatch(AI({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate}))}else if(r==="item"){var f,a=n.touches[0];if(document.elementFromPoint==null)return;var y=document.elementFromPoint(a.clientX,a.clientY);if(!y||!y.getAttribute)return;var _=y.getAttribute(QV),x=(f=y.getAttribute(JV))!==null&&f!==void 0?f:void 0,A=oJ(e.getState(),_,x);e.dispatch(iG({activeDataKey:x,activeIndex:_,activeCoordinate:A}))}}}});var lJ=jD({brush:KX,cartesianAxis:jX,chartData:UW,errorBars:WX,graphicalItems:vX,layout:IV,legend:D$,options:RW,polarAxis:lX,polarOptions:aJ,referenceElements:rK,rootProps:iJ,tooltip:aG,zIndex:SW}),uJ=function(e){return sV({reducer:lJ,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([PR.middleware,kR.middleware,oT.middleware,IR.middleware,BR.middleware]),enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(KD({type:"raf"}))},devTools:Rm.devToolsEnabled})};function cJ(t){var{preloadedState:e,children:n,reduxStoreName:i}=t,r=bl(),u=G.useRef(null);if(r)return n;u.current==null&&(u.current=uJ(e));var f=$S;return G.createElement(eJ,{context:f,store:u.current},n)}function hJ(t){var{layout:e,margin:n}=t,i=Ts(),r=bl();return G.useEffect(()=>{r||(i(DV(e)),i(OV(n)))},[i,r,e,n]),null}function fJ(t){var e=Ts();return G.useEffect(()=>{e(rJ(t))},[e,t]),null}function tk(t){var{zIndex:e,isPanorama:n}=t,i=n?"recharts-zindex-panorama-":"recharts-zindex-",r=fR("".concat(i).concat(e)),u=Ts();return G.useLayoutEffect(()=>(u(bW({zIndex:e,elementId:r,isPanorama:n})),()=>{u(wW({zIndex:e,isPanorama:n}))}),[u,e,r,n]),G.createElement("g",{id:r})}function ek(t){var{children:e,isPanorama:n}=t,i=En(hW);if(!i||i.length===0)return e;var r=i.filter(f=>f<0),u=i.filter(f=>f>0);return G.createElement(G.Fragment,null,r.map(f=>G.createElement(tk,{key:f,zIndex:f,isPanorama:n})),e,u.map(f=>G.createElement(tk,{key:f,zIndex:f,isPanorama:n})))}var dJ=["children"];function pJ(t,e){if(t==null)return{};var n,i,r=mJ(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mJ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function $0(){return $0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$0.apply(null,arguments)}var gJ={width:"100%",height:"100%",display:"block"},yJ=G.forwardRef((t,e)=>{var n=wz(),i=Sz(),r=Mz();if(!qc(n)||!qc(i))return null;var{children:u,otherAttributes:f,title:a,desc:y}=t,_,x;return f!=null&&(typeof f.tabIndex=="number"?_=f.tabIndex:_=r?0:void 0,typeof f.role=="string"?x=f.role:x=r?"application":void 0),G.createElement(sD,$0({},f,{title:a,desc:y,role:x,tabIndex:_,width:n,height:i,style:gJ,ref:e}),u)}),_J=t=>{var{children:e}=t,n=En(yx);if(!n)return null;var{width:i,height:r,y:u,x:f}=n;return G.createElement(sD,{width:i,height:r,x:f,y:u},e)},nk=G.forwardRef((t,e)=>{var{children:n}=t,i=pJ(t,dJ),r=bl();return r?G.createElement(_J,null,G.createElement(ek,{isPanorama:!0},n)):G.createElement(yJ,$0({ref:e},i),G.createElement(ek,{isPanorama:!1},n))});function vJ(){var t=Ts(),[e,n]=G.useState(null),i=En(KV);return G.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),u=r.width/e.offsetWidth;ya(u)&&u!==i&&t(LV(u))}},[e,t,i]),n}function ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function xJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ik(Object(n),!0).forEach(function(i){bJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function bJ(t,e,n){return(e=wJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wJ(t){var e=SJ(t,"string");return typeof e=="symbol"?e:e+""}function SJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function np(){return np=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},np.apply(null,arguments)}var TJ=()=>(XW(),null);function q0(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var MJ=G.forwardRef((t,e)=>{var n,i,r=G.useRef(null),[u,f]=G.useState({containerWidth:q0((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:q0((i=t.style)===null||i===void 0?void 0:i.height)}),a=G.useCallback((_,x)=>{f(A=>{var O=Math.round(_),I=Math.round(x);return A.containerWidth===O&&A.containerHeight===I?A:{containerWidth:O,containerHeight:I}})},[]),y=G.useCallback(_=>{if(typeof e=="function"&&e(_),_!=null&&typeof ResizeObserver<"u"){var{width:x,height:A}=_.getBoundingClientRect();a(x,A);var O=F=>{var{width:q,height:H}=F[0].contentRect;a(q,H)},I=new ResizeObserver(O);I.observe(_),r.current=I}},[e,a]);return G.useEffect(()=>()=>{var _=r.current;_?.disconnect()},[a]),G.createElement(G.Fragment,null,G.createElement(xx,{width:u.containerWidth,height:u.containerHeight}),G.createElement("div",np({ref:y},t)))}),AJ=G.forwardRef((t,e)=>{var{width:n,height:i}=t,[r,u]=G.useState({containerWidth:q0(n),containerHeight:q0(i)}),f=G.useCallback((y,_)=>{u(x=>{var A=Math.round(y),O=Math.round(_);return x.containerWidth===A&&x.containerHeight===O?x:{containerWidth:A,containerHeight:O}})},[]),a=G.useCallback(y=>{if(typeof e=="function"&&e(y),y!=null){var{width:_,height:x}=y.getBoundingClientRect();f(_,x)}},[e,f]);return G.createElement(G.Fragment,null,G.createElement(xx,{width:r.containerWidth,height:r.containerHeight}),G.createElement("div",np({ref:a},t)))}),EJ=G.forwardRef((t,e)=>{var{width:n,height:i}=t;return G.createElement(G.Fragment,null,G.createElement(xx,{width:n,height:i}),G.createElement("div",np({ref:e},t)))}),CJ=G.forwardRef((t,e)=>{var{width:n,height:i}=t;return Lh(n)||Lh(i)?G.createElement(AJ,np({},t,{ref:e})):G.createElement(EJ,np({},t,{ref:e}))});function PJ(t){return t===!0?MJ:CJ}var kJ=G.forwardRef((t,e)=>{var{children:n,className:i,height:r,onClick:u,onContextMenu:f,onDoubleClick:a,onMouseDown:y,onMouseEnter:_,onMouseLeave:x,onMouseMove:A,onMouseUp:O,onTouchEnd:I,onTouchMove:F,onTouchStart:q,style:H,width:K,responsive:W,dispatchTouchEvents:X=!0}=t,tt=G.useRef(null),Q=Ts(),[at,ht]=G.useState(null),[ot,ct]=G.useState(null),xt=vJ(),wt=YS(),Ct=wt?.width>0?wt.width:K,re=wt?.height>0?wt.height:r,ve=G.useCallback(Gt=>{xt(Gt),typeof e=="function"&&e(Gt),ht(Gt),ct(Gt),Gt!=null&&(tt.current=Gt)},[xt,e,ht,ct]),Ee=G.useCallback(Gt=>{Q(CR(Gt)),Q(Su({handler:u,reactEvent:Gt}))},[Q,u]),Nt=G.useCallback(Gt=>{Q(uS(Gt)),Q(Su({handler:_,reactEvent:Gt}))},[Q,_]),Pt=G.useCallback(Gt=>{Q(MI()),Q(Su({handler:x,reactEvent:Gt}))},[Q,x]),Bt=G.useCallback(Gt=>{Q(uS(Gt)),Q(Su({handler:A,reactEvent:Gt}))},[Q,A]),Ft=G.useCallback(()=>{Q(LR())},[Q]),$t=G.useCallback(Gt=>{Q(zR(Gt.key))},[Q]),ft=G.useCallback(Gt=>{Q(Su({handler:f,reactEvent:Gt}))},[Q,f]),St=G.useCallback(Gt=>{Q(Su({handler:a,reactEvent:Gt}))},[Q,a]),jt=G.useCallback(Gt=>{Q(Su({handler:y,reactEvent:Gt}))},[Q,y]),Yt=G.useCallback(Gt=>{Q(Su({handler:O,reactEvent:Gt}))},[Q,O]),le=G.useCallback(Gt=>{Q(Su({handler:q,reactEvent:Gt}))},[Q,q]),ce=G.useCallback(Gt=>{X&&Q(RR(Gt)),Q(Su({handler:F,reactEvent:Gt}))},[Q,X,F]),Oe=G.useCallback(Gt=>{Q(Su({handler:I,reactEvent:Gt}))},[Q,I]),Ie=PJ(W);return G.createElement(GI.Provider,{value:at},G.createElement(f8.Provider,{value:ot},G.createElement(Ie,{width:Ct??H?.width,height:re??H?.height,className:Nr("recharts-wrapper",i),style:xJ({position:"relative",cursor:"default",width:Ct,height:re},H),onClick:Ee,onContextMenu:ft,onDoubleClick:St,onFocus:Ft,onKeyDown:$t,onMouseDown:jt,onMouseEnter:Nt,onMouseLeave:Pt,onMouseMove:Bt,onMouseUp:Yt,onTouchEnd:Oe,onTouchMove:ce,onTouchStart:le,ref:ve},G.createElement(TJ,null),n)))}),OJ=["width","height","responsive","children","className","style","compact","title","desc"];function DJ(t,e){if(t==null)return{};var n,i,r=zJ(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zJ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var LJ=G.forwardRef((t,e)=>{var{width:n,height:i,responsive:r,children:u,className:f,style:a,compact:y,title:_,desc:x}=t,A=DJ(t,OJ),O=fc(A);return y?G.createElement(G.Fragment,null,G.createElement(xx,{width:n,height:i}),G.createElement(nk,{otherAttributes:O,title:_,desc:x},u)):G.createElement(kJ,{className:f,style:a,width:n,height:i,responsive:r??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},G.createElement(nk,{otherAttributes:O,title:_,desc:x,ref:e},G.createElement(sK,null,u)))});function cS(){return cS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cS.apply(null,arguments)}var IJ={top:5,right:5,bottom:5,left:5},RJ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:IJ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},BJ=G.forwardRef(function(e,n){var i,r=Ql(e.categoricalChartProps,RJ),{chartName:u,defaultTooltipEventType:f,validateTooltipEventTypes:a,tooltipPayloadSearcher:y,categoricalChartProps:_}=e,x={chartName:u,defaultTooltipEventType:f,validateTooltipEventTypes:a,tooltipPayloadSearcher:y,eventEmitter:void 0};return G.createElement(cJ,{preloadedState:{options:x},reduxStoreName:(i=_.id)!==null&&i!==void 0?i:u},G.createElement(XX,{chartData:_.data}),G.createElement(hJ,{layout:r.layout,margin:r.margin}),G.createElement(fJ,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className}),G.createElement(LJ,cS({},r,{ref:n})))}),NJ=["axis"],NR=G.forwardRef((t,e)=>G.createElement(BJ,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:NJ,tooltipPayloadSearcher:LW,categoricalChartProps:t,ref:e})),Yv={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var jJ=Yv.exports,rk;function FJ(){return rk||(rk=1,(function(t,e){((n,i)=>{t.exports=i()})(jJ,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r,u=!i.document&&!!i.postMessage,f=i.IS_PAPA_WORKER||!1,a={},y=0,_={};function x(ot){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(ct){var xt=Q(ct);xt.chunkSize=parseInt(xt.chunkSize),ct.step||ct.chunk||(xt.chunkSize=null),this._handle=new q(xt),(this._handle.streamer=this)._config=xt}).call(this,ot),this.parseChunk=function(ct,xt){var wt=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<wt){let re=this._config.newline;re||(Ct=this._config.quoteChar||'"',re=this._handle.guessLineEndings(ct,Ct)),ct=[...ct.split(re).slice(wt)].join(re)}this.isFirstChunk&&ht(this._config.beforeFirstChunk)&&(Ct=this._config.beforeFirstChunk(ct))!==void 0&&(ct=Ct),this.isFirstChunk=!1,this._halted=!1;var wt=this._partialLine+ct,Ct=(this._partialLine="",this._handle.parse(wt,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(ct=Ct.meta.cursor,wt=(this._finished||(this._partialLine=wt.substring(ct-this._baseIndex),this._baseIndex=ct),Ct&&Ct.data&&(this._rowCount+=Ct.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)i.postMessage({results:Ct,workerId:_.WORKER_ID,finished:wt});else if(ht(this._config.chunk)&&!xt){if(this._config.chunk(Ct,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Ct=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Ct.data),this._completeResults.errors=this._completeResults.errors.concat(Ct.errors),this._completeResults.meta=Ct.meta),this._completed||!wt||!ht(this._config.complete)||Ct&&Ct.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),wt||Ct&&Ct.meta.paused||this._nextChunk(),Ct}this._halted=!0},this._sendError=function(ct){ht(this._config.error)?this._config.error(ct):f&&this._config.error&&i.postMessage({workerId:_.WORKER_ID,error:ct,finished:!1})}}function A(ot){var ct;(ot=ot||{}).chunkSize||(ot.chunkSize=_.RemoteChunkSize),x.call(this,ot),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(xt){this._input=xt,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(ct=new XMLHttpRequest,this._config.withCredentials&&(ct.withCredentials=this._config.withCredentials),u||(ct.onload=at(this._chunkLoaded,this),ct.onerror=at(this._chunkError,this)),ct.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var xt,wt=this._config.downloadRequestHeaders;for(xt in wt)ct.setRequestHeader(xt,wt[xt])}var Ct;this._config.chunkSize&&(Ct=this._start+this._config.chunkSize-1,ct.setRequestHeader("Range","bytes="+this._start+"-"+Ct));try{ct.send(this._config.downloadRequestBody)}catch(re){this._chunkError(re.message)}u&&ct.status===0&&this._chunkError()}},this._chunkLoaded=function(){ct.readyState===4&&(ct.status<200||400<=ct.status?this._chunkError():(this._start+=this._config.chunkSize||ct.responseText.length,this._finished=!this._config.chunkSize||this._start>=(xt=>(xt=xt.getResponseHeader("Content-Range"))!==null?parseInt(xt.substring(xt.lastIndexOf("/")+1)):-1)(ct),this.parseChunk(ct.responseText)))},this._chunkError=function(xt){xt=ct.statusText||xt,this._sendError(new Error(xt))}}function O(ot){(ot=ot||{}).chunkSize||(ot.chunkSize=_.LocalChunkSize),x.call(this,ot);var ct,xt,wt=typeof FileReader<"u";this.stream=function(Ct){this._input=Ct,xt=Ct.slice||Ct.webkitSlice||Ct.mozSlice,wt?((ct=new FileReader).onload=at(this._chunkLoaded,this),ct.onerror=at(this._chunkError,this)):ct=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Ct=this._input,re=(this._config.chunkSize&&(re=Math.min(this._start+this._config.chunkSize,this._input.size),Ct=xt.call(Ct,this._start,re)),ct.readAsText(Ct,this._config.encoding));wt||this._chunkLoaded({target:{result:re}})},this._chunkLoaded=function(Ct){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Ct.target.result)},this._chunkError=function(){this._sendError(ct.error)}}function I(ot){var ct;x.call(this,ot=ot||{}),this.stream=function(xt){return ct=xt,this._nextChunk()},this._nextChunk=function(){var xt,wt;if(!this._finished)return xt=this._config.chunkSize,ct=xt?(wt=ct.substring(0,xt),ct.substring(xt)):(wt=ct,""),this._finished=!ct,this.parseChunk(wt)}}function F(ot){x.call(this,ot=ot||{});var ct=[],xt=!0,wt=!1;this.pause=function(){x.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){x.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Ct){this._input=Ct,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){wt&&ct.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),ct.length?this.parseChunk(ct.shift()):xt=!0},this._streamData=at(function(Ct){try{ct.push(typeof Ct=="string"?Ct:Ct.toString(this._config.encoding)),xt&&(xt=!1,this._checkIsFinished(),this.parseChunk(ct.shift()))}catch(re){this._streamError(re)}},this),this._streamError=at(function(Ct){this._streamCleanUp(),this._sendError(Ct)},this),this._streamEnd=at(function(){this._streamCleanUp(),wt=!0,this._streamData("")},this),this._streamCleanUp=at(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function q(ot){var ct,xt,wt,Ct,re=Math.pow(2,53),ve=-re,Ee=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Nt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Pt=this,Bt=0,Ft=0,$t=!1,ft=!1,St=[],jt={data:[],errors:[],meta:{}};function Yt(Ie){return ot.skipEmptyLines==="greedy"?Ie.join("").trim()==="":Ie.length===1&&Ie[0].length===0}function le(){if(jt&&wt&&(Oe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_.DefaultDelimiter+"'"),wt=!1),ot.skipEmptyLines&&(jt.data=jt.data.filter(function(Pe){return!Yt(Pe)})),ce()){let Pe=function(ge,nn){ht(ot.transformHeader)&&(ge=ot.transformHeader(ge,nn)),St.push(ge)};if(jt)if(Array.isArray(jt.data[0])){for(var Ie=0;ce()&&Ie<jt.data.length;Ie++)jt.data[Ie].forEach(Pe);jt.data.splice(0,1)}else jt.data.forEach(Pe)}function Gt(Pe,ge){for(var nn=ot.header?{}:[],qe=0;qe<Pe.length;qe++){var an=qe,Ke=Pe[qe],Ke=((On,rn)=>(In=>(ot.dynamicTypingFunction&&ot.dynamicTyping[In]===void 0&&(ot.dynamicTyping[In]=ot.dynamicTypingFunction(In)),(ot.dynamicTyping[In]||ot.dynamicTyping)===!0))(On)?rn==="true"||rn==="TRUE"||rn!=="false"&&rn!=="FALSE"&&((In=>{if(Ee.test(In)&&(In=parseFloat(In),ve<In&&In<re))return 1})(rn)?parseFloat(rn):Nt.test(rn)?new Date(rn):rn===""?null:rn):rn)(an=ot.header?qe>=St.length?"__parsed_extra":St[qe]:an,Ke=ot.transform?ot.transform(Ke,an):Ke);an==="__parsed_extra"?(nn[an]=nn[an]||[],nn[an].push(Ke)):nn[an]=Ke}return ot.header&&(qe>St.length?Oe("FieldMismatch","TooManyFields","Too many fields: expected "+St.length+" fields but parsed "+qe,Ft+ge):qe<St.length&&Oe("FieldMismatch","TooFewFields","Too few fields: expected "+St.length+" fields but parsed "+qe,Ft+ge)),nn}var Le;jt&&(ot.header||ot.dynamicTyping||ot.transform)&&(Le=1,!jt.data.length||Array.isArray(jt.data[0])?(jt.data=jt.data.map(Gt),Le=jt.data.length):jt.data=Gt(jt.data,0),ot.header&&jt.meta&&(jt.meta.fields=St),Ft+=Le)}function ce(){return ot.header&&St.length===0}function Oe(Ie,Gt,Le,Pe){Ie={type:Ie,code:Gt,message:Le},Pe!==void 0&&(Ie.row=Pe),jt.errors.push(Ie)}ht(ot.step)&&(Ct=ot.step,ot.step=function(Ie){jt=Ie,ce()?le():(le(),jt.data.length!==0&&(Bt+=Ie.data.length,ot.preview&&Bt>ot.preview?xt.abort():(jt.data=jt.data[0],Ct(jt,Pt))))}),this.parse=function(Ie,Gt,Le){var Pe=ot.quoteChar||'"',Pe=(ot.newline||(ot.newline=this.guessLineEndings(Ie,Pe)),wt=!1,ot.delimiter?ht(ot.delimiter)&&(ot.delimiter=ot.delimiter(Ie),jt.meta.delimiter=ot.delimiter):((Pe=((ge,nn,qe,an,Ke)=>{var On,rn,In,me;Ke=Ke||[",","	","|",";",_.RECORD_SEP,_.UNIT_SEP];for(var ki=0;ki<Ke.length;ki++){for(var Li,Yn=Ke[ki],cn=0,Zi=0,si=0,Ii=(In=void 0,new K({comments:an,delimiter:Yn,newline:nn,preview:10}).parse(ge)),jr=0;jr<Ii.data.length;jr++)qe&&Yt(Ii.data[jr])?si++:(Li=Ii.data[jr].length,Zi+=Li,In===void 0?In=Li:0<Li&&(cn+=Math.abs(Li-In),In=Li));0<Ii.data.length&&(Zi/=Ii.data.length-si),(rn===void 0||cn<=rn)&&(me===void 0||me<Zi)&&1.99<Zi&&(rn=cn,On=Yn,me=Zi)}return{successful:!!(ot.delimiter=On),bestDelimiter:On}})(Ie,ot.newline,ot.skipEmptyLines,ot.comments,ot.delimitersToGuess)).successful?ot.delimiter=Pe.bestDelimiter:(wt=!0,ot.delimiter=_.DefaultDelimiter),jt.meta.delimiter=ot.delimiter),Q(ot));return ot.preview&&ot.header&&Pe.preview++,ct=Ie,xt=new K(Pe),jt=xt.parse(ct,Gt,Le),le(),$t?{meta:{paused:!0}}:jt||{meta:{paused:!1}}},this.paused=function(){return $t},this.pause=function(){$t=!0,xt.abort(),ct=ht(ot.chunk)?"":ct.substring(xt.getCharIndex())},this.resume=function(){Pt.streamer._halted?($t=!1,Pt.streamer.parseChunk(ct,!0)):setTimeout(Pt.resume,3)},this.aborted=function(){return ft},this.abort=function(){ft=!0,xt.abort(),jt.meta.aborted=!0,ht(ot.complete)&&ot.complete(jt),ct=""},this.guessLineEndings=function(ge,Pe){ge=ge.substring(0,1048576);var Pe=new RegExp(H(Pe)+"([^]*?)"+H(Pe),"gm"),Le=(ge=ge.replace(Pe,"")).split("\r"),Pe=ge.split(`
`),ge=1<Pe.length&&Pe[0].length<Le[0].length;if(Le.length===1||ge)return`
`;for(var nn=0,qe=0;qe<Le.length;qe++)Le[qe][0]===`
`&&nn++;return nn>=Le.length/2?`\r
`:"\r"}}function H(ot){return ot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function K(ot){var ct=(ot=ot||{}).delimiter,xt=ot.newline,wt=ot.comments,Ct=ot.step,re=ot.preview,ve=ot.fastMode,Ee=null,Nt=!1,Pt=ot.quoteChar==null?'"':ot.quoteChar,Bt=Pt;if(ot.escapeChar!==void 0&&(Bt=ot.escapeChar),(typeof ct!="string"||-1<_.BAD_DELIMITERS.indexOf(ct))&&(ct=","),wt===ct)throw new Error("Comment character same as delimiter");wt===!0?wt="#":(typeof wt!="string"||-1<_.BAD_DELIMITERS.indexOf(wt))&&(wt=!1),xt!==`
`&&xt!=="\r"&&xt!==`\r
`&&(xt=`
`);var Ft=0,$t=!1;this.parse=function(ft,St,jt){if(typeof ft!="string")throw new Error("Input must be a string");var Yt=ft.length,le=ct.length,ce=xt.length,Oe=wt.length,Ie=ht(Ct),Gt=[],Le=[],Pe=[],ge=Ft=0;if(!ft)return cn();if(ve||ve!==!1&&ft.indexOf(Pt)===-1){for(var nn=ft.split(xt),qe=0;qe<nn.length;qe++){if(Pe=nn[qe],Ft+=Pe.length,qe!==nn.length-1)Ft+=xt.length;else if(jt)return cn();if(!wt||Pe.substring(0,Oe)!==wt){if(Ie){if(Gt=[],me(Pe.split(ct)),Zi(),$t)return cn()}else me(Pe.split(ct));if(re&&re<=qe)return Gt=Gt.slice(0,re),cn(!0)}}return cn()}for(var an=ft.indexOf(ct,Ft),Ke=ft.indexOf(xt,Ft),On=new RegExp(H(Bt)+H(Pt),"g"),rn=ft.indexOf(Pt,Ft);;)if(ft[Ft]===Pt)for(rn=Ft,Ft++;;){if((rn=ft.indexOf(Pt,rn+1))===-1)return jt||Le.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Gt.length,index:Ft}),Li();if(rn===Yt-1)return Li(ft.substring(Ft,rn).replace(On,Pt));if(Pt===Bt&&ft[rn+1]===Bt)rn++;else if(Pt===Bt||rn===0||ft[rn-1]!==Bt){an!==-1&&an<rn+1&&(an=ft.indexOf(ct,rn+1));var In=ki((Ke=Ke!==-1&&Ke<rn+1?ft.indexOf(xt,rn+1):Ke)===-1?an:Math.min(an,Ke));if(ft.substr(rn+1+In,le)===ct){Pe.push(ft.substring(Ft,rn).replace(On,Pt)),ft[Ft=rn+1+In+le]!==Pt&&(rn=ft.indexOf(Pt,Ft)),an=ft.indexOf(ct,Ft),Ke=ft.indexOf(xt,Ft);break}if(In=ki(Ke),ft.substring(rn+1+In,rn+1+In+ce)===xt){if(Pe.push(ft.substring(Ft,rn).replace(On,Pt)),Yn(rn+1+In+ce),an=ft.indexOf(ct,Ft),rn=ft.indexOf(Pt,Ft),Ie&&(Zi(),$t))return cn();if(re&&Gt.length>=re)return cn(!0);break}Le.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Gt.length,index:Ft}),rn++}}else if(wt&&Pe.length===0&&ft.substring(Ft,Ft+Oe)===wt){if(Ke===-1)return cn();Ft=Ke+ce,Ke=ft.indexOf(xt,Ft),an=ft.indexOf(ct,Ft)}else if(an!==-1&&(an<Ke||Ke===-1))Pe.push(ft.substring(Ft,an)),Ft=an+le,an=ft.indexOf(ct,Ft);else{if(Ke===-1)break;if(Pe.push(ft.substring(Ft,Ke)),Yn(Ke+ce),Ie&&(Zi(),$t))return cn();if(re&&Gt.length>=re)return cn(!0)}return Li();function me(si){Gt.push(si),ge=Ft}function ki(si){var Ii=0;return Ii=si!==-1&&(si=ft.substring(rn+1,si))&&si.trim()===""?si.length:Ii}function Li(si){return jt||(si===void 0&&(si=ft.substring(Ft)),Pe.push(si),Ft=Yt,me(Pe),Ie&&Zi()),cn()}function Yn(si){Ft=si,me(Pe),Pe=[],Ke=ft.indexOf(xt,Ft)}function cn(si){if(ot.header&&!St&&Gt.length&&!Nt){var Ii=Gt[0],jr=Object.create(null),Ws=new Set(Ii);let Wa=!1;for(let _a=0;_a<Ii.length;_a++){let Be=Ii[_a];if(jr[Be=ht(ot.transformHeader)?ot.transformHeader(Be,_a):Be]){let hr,Un=jr[Be];for(;hr=Be+"_"+Un,Un++,Ws.has(hr););Ws.add(hr),Ii[_a]=hr,jr[Be]++,Wa=!0,(Ee=Ee===null?{}:Ee)[hr]=Be}else jr[Be]=1,Ii[_a]=Be;Ws.add(Be)}Wa&&console.warn("Duplicate headers found and renamed."),Nt=!0}return{data:Gt,errors:Le,meta:{delimiter:ct,linebreak:xt,aborted:$t,truncated:!!si,cursor:ge+(St||0),renamedHeaders:Ee}}}function Zi(){Ct(cn()),Gt=[],Le=[]}},this.abort=function(){$t=!0},this.getCharIndex=function(){return Ft}}function W(ot){var ct=ot.data,xt=a[ct.workerId],wt=!1;if(ct.error)xt.userError(ct.error,ct.file);else if(ct.results&&ct.results.data){var Ct={abort:function(){wt=!0,X(ct.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:tt,resume:tt};if(ht(xt.userStep)){for(var re=0;re<ct.results.data.length&&(xt.userStep({data:ct.results.data[re],errors:ct.results.errors,meta:ct.results.meta},Ct),!wt);re++);delete ct.results}else ht(xt.userChunk)&&(xt.userChunk(ct.results,Ct,ct.file),delete ct.results)}ct.finished&&!wt&&X(ct.workerId,ct.results)}function X(ot,ct){var xt=a[ot];ht(xt.userComplete)&&xt.userComplete(ct),xt.terminate(),delete a[ot]}function tt(){throw new Error("Not implemented.")}function Q(ot){if(typeof ot!="object"||ot===null)return ot;var ct,xt=Array.isArray(ot)?[]:{};for(ct in ot)xt[ct]=Q(ot[ct]);return xt}function at(ot,ct){return function(){ot.apply(ct,arguments)}}function ht(ot){return typeof ot=="function"}return _.parse=function(ot,ct){var xt=(ct=ct||{}).dynamicTyping||!1;if(ht(xt)&&(ct.dynamicTypingFunction=xt,xt={}),ct.dynamicTyping=xt,ct.transform=!!ht(ct.transform)&&ct.transform,!ct.worker||!_.WORKERS_SUPPORTED)return xt=null,_.NODE_STREAM_INPUT,typeof ot=="string"?(ot=(wt=>wt.charCodeAt(0)!==65279?wt:wt.slice(1))(ot),xt=new(ct.download?A:I)(ct)):ot.readable===!0&&ht(ot.read)&&ht(ot.on)?xt=new F(ct):(i.File&&ot instanceof File||ot instanceof Object)&&(xt=new O(ct)),xt.stream(ot);(xt=(()=>{var wt;return!!_.WORKERS_SUPPORTED&&(wt=(()=>{var Ct=i.URL||i.webkitURL||null,re=n.toString();return _.BLOB_URL||(_.BLOB_URL=Ct.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",re,")();"],{type:"text/javascript"})))})(),(wt=new i.Worker(wt)).onmessage=W,wt.id=y++,a[wt.id]=wt)})()).userStep=ct.step,xt.userChunk=ct.chunk,xt.userComplete=ct.complete,xt.userError=ct.error,ct.step=ht(ct.step),ct.chunk=ht(ct.chunk),ct.complete=ht(ct.complete),ct.error=ht(ct.error),delete ct.worker,xt.postMessage({input:ot,config:ct,workerId:xt.id})},_.unparse=function(ot,ct){var xt=!1,wt=!0,Ct=",",re=`\r
`,ve='"',Ee=ve+ve,Nt=!1,Pt=null,Bt=!1,Ft=((()=>{if(typeof ct=="object"){if(typeof ct.delimiter!="string"||_.BAD_DELIMITERS.filter(function(St){return ct.delimiter.indexOf(St)!==-1}).length||(Ct=ct.delimiter),typeof ct.quotes!="boolean"&&typeof ct.quotes!="function"&&!Array.isArray(ct.quotes)||(xt=ct.quotes),typeof ct.skipEmptyLines!="boolean"&&typeof ct.skipEmptyLines!="string"||(Nt=ct.skipEmptyLines),typeof ct.newline=="string"&&(re=ct.newline),typeof ct.quoteChar=="string"&&(ve=ct.quoteChar),typeof ct.header=="boolean"&&(wt=ct.header),Array.isArray(ct.columns)){if(ct.columns.length===0)throw new Error("Option columns is empty");Pt=ct.columns}ct.escapeChar!==void 0&&(Ee=ct.escapeChar+ve),ct.escapeFormulae instanceof RegExp?Bt=ct.escapeFormulae:typeof ct.escapeFormulae=="boolean"&&ct.escapeFormulae&&(Bt=/^[=+\-@\t\r].*$/)}})(),new RegExp(H(ve),"g"));if(typeof ot=="string"&&(ot=JSON.parse(ot)),Array.isArray(ot)){if(!ot.length||Array.isArray(ot[0]))return $t(null,ot,Nt);if(typeof ot[0]=="object")return $t(Pt||Object.keys(ot[0]),ot,Nt)}else if(typeof ot=="object")return typeof ot.data=="string"&&(ot.data=JSON.parse(ot.data)),Array.isArray(ot.data)&&(ot.fields||(ot.fields=ot.meta&&ot.meta.fields||Pt),ot.fields||(ot.fields=Array.isArray(ot.data[0])?ot.fields:typeof ot.data[0]=="object"?Object.keys(ot.data[0]):[]),Array.isArray(ot.data[0])||typeof ot.data[0]=="object"||(ot.data=[ot.data])),$t(ot.fields||[],ot.data||[],Nt);throw new Error("Unable to serialize unrecognized input");function $t(St,jt,Yt){var le="",ce=(typeof St=="string"&&(St=JSON.parse(St)),typeof jt=="string"&&(jt=JSON.parse(jt)),Array.isArray(St)&&0<St.length),Oe=!Array.isArray(jt[0]);if(ce&&wt){for(var Ie=0;Ie<St.length;Ie++)0<Ie&&(le+=Ct),le+=ft(St[Ie],Ie);0<jt.length&&(le+=re)}for(var Gt=0;Gt<jt.length;Gt++){var Le=(ce?St:jt[Gt]).length,Pe=!1,ge=ce?Object.keys(jt[Gt]).length===0:jt[Gt].length===0;if(Yt&&!ce&&(Pe=Yt==="greedy"?jt[Gt].join("").trim()==="":jt[Gt].length===1&&jt[Gt][0].length===0),Yt==="greedy"&&ce){for(var nn=[],qe=0;qe<Le;qe++){var an=Oe?St[qe]:qe;nn.push(jt[Gt][an])}Pe=nn.join("").trim()===""}if(!Pe){for(var Ke=0;Ke<Le;Ke++){0<Ke&&!ge&&(le+=Ct);var On=ce&&Oe?St[Ke]:Ke;le+=ft(jt[Gt][On],Ke)}Gt<jt.length-1&&(!Yt||0<Le&&!ge)&&(le+=re)}}return le}function ft(St,jt){var Yt,le;return St==null?"":St.constructor===Date?JSON.stringify(St).slice(1,25):(le=!1,Bt&&typeof St=="string"&&Bt.test(St)&&(St="'"+St,le=!0),Yt=St.toString().replace(Ft,Ee),(le=le||xt===!0||typeof xt=="function"&&xt(St,jt)||Array.isArray(xt)&&xt[jt]||((ce,Oe)=>{for(var Ie=0;Ie<Oe.length;Ie++)if(-1<ce.indexOf(Oe[Ie]))return!0;return!1})(Yt,_.BAD_DELIMITERS)||-1<Yt.indexOf(Ct)||Yt.charAt(0)===" "||Yt.charAt(Yt.length-1)===" ")?ve+Yt+ve:Yt)}},_.RECORD_SEP="",_.UNIT_SEP="",_.BYTE_ORDER_MARK="\uFEFF",_.BAD_DELIMITERS=["\r",`
`,'"',_.BYTE_ORDER_MARK],_.WORKERS_SUPPORTED=!u&&!!i.Worker,_.NODE_STREAM_INPUT=1,_.LocalChunkSize=10485760,_.RemoteChunkSize=5242880,_.DefaultDelimiter=",",_.Parser=K,_.ParserHandle=q,_.NetworkStreamer=A,_.FileStreamer=O,_.StringStreamer=I,_.ReadableStreamStreamer=F,i.jQuery&&((r=i.jQuery).fn.parse=function(ot){var ct=ot.config||{},xt=[];return this.each(function(re){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var ve=0;ve<this.files.length;ve++)xt.push({file:this.files[ve],inputElem:this,instanceConfig:r.extend({},ct)})}),wt(),this;function wt(){if(xt.length===0)ht(ot.complete)&&ot.complete();else{var re,ve,Ee,Nt,Pt=xt[0];if(ht(ot.before)){var Bt=ot.before(Pt.file,Pt.inputElem);if(typeof Bt=="object"){if(Bt.action==="abort")return re="AbortError",ve=Pt.file,Ee=Pt.inputElem,Nt=Bt.reason,void(ht(ot.error)&&ot.error({name:re},ve,Ee,Nt));if(Bt.action==="skip")return void Ct();typeof Bt.config=="object"&&(Pt.instanceConfig=r.extend(Pt.instanceConfig,Bt.config))}else if(Bt==="skip")return void Ct()}var Ft=Pt.instanceConfig.complete;Pt.instanceConfig.complete=function($t){ht(Ft)&&Ft($t,Pt.file,Pt.inputElem),Ct()},_.parse(Pt.file,Pt.instanceConfig)}}function Ct(){xt.splice(0,1),wt()}}),f&&(i.onmessage=function(ot){ot=ot.data,_.WORKER_ID===void 0&&ot&&(_.WORKER_ID=ot.workerId),typeof ot.input=="string"?i.postMessage({workerId:_.WORKER_ID,results:_.parse(ot.input,ot.config),finished:!0}):(i.File&&ot.input instanceof File||ot.input instanceof Object)&&(ot=_.parse(ot.input,ot.config))&&i.postMessage({workerId:_.WORKER_ID,results:ot,finished:!0})}),(A.prototype=Object.create(x.prototype)).constructor=A,(O.prototype=Object.create(x.prototype)).constructor=O,(I.prototype=Object.create(I.prototype)).constructor=I,(F.prototype=Object.create(x.prototype)).constructor=F,_})})(Yv)),Yv.exports}var UJ=FJ();const lT=Pu(UJ),VJ=t=>t===0?"0":`${t/1e6}MWh`,ak=[" ()","1","2","3","4","5","6","7","8","9","10","11","12"];function $J(){const t="2020-01",e=new Date,n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=`${n}-${i}`,[u,f]=G.useState("11"),[a,y]=G.useState(r),[_,x]=G.useState([]),[A,O]=G.useState([]),[I,F]=G.useState([]),[q,H]=G.useState(0),[K,W]=G.useState("");G.useEffect(()=>{fetch("/__2020-2025__v2.csv").then(at=>at.text()).then(at=>{lT.parse(at,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,complete:ht=>{console.log("CSV  :",ht.data[0]),x(ht.data)}})}).catch(at=>{console.error("CSV   :",at)})},[]);const X=()=>{if(_.length===0||!ma[u]){O([]),F([]),H(0);return}const at=parseInt(a.split("-")[0],10),ht=at*100+1,ot=at*100+12,ct=_.filter(ft=>ft.==u&&ft.>=ht&&ft.<=ot),xt=new Array(12).fill(0),wt=["1","2","3","4","5","6","7","8","9","10","11","12"],Ct=new Map,re=new Array(12).fill(0),ve=ma[u].districts;Object.entries(ve).forEach(([ft,St])=>{Ct.set(ft,{gu:St,"1":"-","2":"-","3":"-","4":"-","5":"-","6":"-","7":"-","8":"-","9":"-","10":"-","11":"-","12":"-"})});const Ee=K!=="";ct.forEach(ft=>{const St=String(ft.).trim(),jt=ft.%100,Yt=jt-1,le=`${jt}`,ce=ft.||0/1e3,Oe=ft.||0/1e3;let Ie;if(K===""?Ie=ce:K===""?Ie=Oe:Ie=void 0,Ee&&Ie!==void 0&&Yt>=0&&Yt<12&&(xt[Yt]+=Ie),Ie===void 0)return;const Gt=Math.round(Ie/1e3);if(Ct.has(St)){const Le=Ct.get(St);isNaN(Gt)||(Le[le]=Gt,Ct.set(St,Le),Yt>=0&&Yt<12&&(re[Yt]+=Gt))}});const Nt=Math.max(...xt),Pt=Ee?Math.ceil(Nt*1.1/1e6)*1e6:1e6,Bt=wt.map((ft,St)=>({name:ft,:xt[St]}));F(Bt),H(Pt);const $t={gu:`${ma[u]?ma[u].name:""} `};wt.forEach((ft,St)=>{const jt=re[St];$t[ft]=jt>0?jt:"-"}),O([$t,...Array.from(Ct.values())])},tt=at=>{f(at.target.value)},Q=()=>ma[u]?vt.jsxs("table",{className:"stats-table",children:[vt.jsx("thead",{children:vt.jsx("tr",{children:ak.map(at=>vt.jsx("th",{children:at},at))})}),vt.jsx("tbody",{children:A.map((at,ht)=>vt.jsxs("tr",{style:{fontWeight:ht===0?"bold":"normal",backgroundColor:ht===0?"#f9f9f9":"transparent"},children:[vt.jsx("td",{children:at.gu}),ak.slice(1).map(ot=>vt.jsx("td",{children:typeof at[ot]=="number"?at[ot].toLocaleString():at[ot]},ot))]},at.gu))})]}):vt.jsxs("table",{className:"stats-table",children:[vt.jsx("thead",{children:vt.jsxs("tr",{children:[vt.jsx("th",{children:""}),vt.jsx("th",{children:""}),vt.jsx("th",{children:""}),vt.jsx("th",{children:" (KWh)"}),vt.jsx("th",{children:"()"}),vt.jsx("th",{children:" "}),vt.jsx("th",{children:""})]})}),vt.jsx("tbody",{children:A.map(at=>vt.jsxs("tr",{children:[vt.jsx("td",{children:at.date}),vt.jsx("td",{children:at.energy}),vt.jsx("td",{children:at.region}),vt.jsx("td",{children:at.consumption}),vt.jsx("td",{children:at.cost}),vt.jsx("td",{children:at.efficiency}),vt.jsx("td",{children:at.trend})]},at.date))})]});return vt.jsxs("div",{className:"stats-sidebar-layout",children:[vt.jsxs("aside",{className:"stats-sidebar",children:[vt.jsxs("div",{className:"sidebar-section",children:[vt.jsx("h4",{children:"  "}),vt.jsx("input",{type:"month",className:"stats-input",min:t,max:r,value:a,onChange:at=>y(at.target.value)})]}),vt.jsxs("div",{className:"sidebar-section",children:[vt.jsx("h4",{children:" "}),vt.jsx("label",{children:""}),vt.jsxs("select",{className:"stats-input",value:K,onChange:at=>W(at.target.value),children:[vt.jsx("option",{children:""}),vt.jsx("option",{value:"",children:"(MWh)"}),vt.jsx("option",{value:"",children:"(MWh)"})]}),vt.jsx("label",{children:""}),vt.jsx("select",{className:"stats-input",value:u,onChange:tt,children:Object.keys(ma).map(at=>vt.jsx("option",{value:at,children:ma[at].name},at))})]}),vt.jsx("div",{className:"sidebar-section",children:vt.jsx("button",{className:"stats-button-primary",onClick:X,children:" "})})]}),vt.jsxs("main",{className:"main-content",children:[vt.jsx("h2",{children:"  "}),vt.jsxs("div",{className:"chart-section",children:[vt.jsx("h3",{children:"   "}),vt.jsxs("p",{children:[ma[u]?ma[u].name:"..."," ",a.split("-")[0]," ",K===" "?"    .":K+"   "]}),vt.jsx("div",{className:"chart-container",children:vt.jsx(vz,{width:"100%",height:300,children:vt.jsxs(NR,{data:I,margin:{top:30,right:30,left:50,bottom:5},children:[vt.jsx(eT,{strokeDasharray:"3 3"}),vt.jsx(iT,{dataKey:"name",scale:"point",axisLine:!1,tickLine:!1,tick:{fontSize:13}}),vt.jsx(rT,{axisLine:!1,tickLine:!1,tickFormatter:VJ,domain:[0,q],tickCount:5,tick:{fontSize:13},label:{value:"(MWh)",position:"top",offset:17,fontWeight:"bold",fontSize:14,fill:"#333"}}),vt.jsx(XI,{formatter:at=>[`${(at/1e3).toLocaleString()} kWh`,""]}),vt.jsx(nT,{type:"monotone",dataKey:"",stroke:"#0088FE",fill:"#cce5ff",strokeWidth:2,activeDot:{r:6},dot:{r:4,fill:"#0088FE"}})]})})})]}),vt.jsxs("div",{className:"table-section",children:[vt.jsx("h3",{children:ma[u]?`${ma[u].name} ${a.split("-")[0]}   `:"   "}),vt.jsx("p",{children:"      ."}),vt.jsx("div",{className:"stats-table-container",children:Q()})]})]})]})}const sk=[" ()","1","2","3","4","5","6","7","8","9","10","11","12"];function qJ(){const t="2020-01",e=new Date,n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=`${n}-${i}`,[u,f]=G.useState("11"),[a,y]=G.useState(r),[_,x]=G.useState([]),[A,O]=G.useState([]),[I,F]=G.useState([]),[q]=G.useState(0),[H,K]=G.useState("");G.useEffect(()=>{fetch("/__2020-2025__v2.csv").then(Q=>Q.text()).then(Q=>{lT.parse(Q,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,complete:at=>{x(at.data)}})}).catch(Q=>{console.error("CSV   :",Q)})},[]);const W=()=>{if(_.length===0||!ma[u]){O([]),F([]),q(0);return}const Q=parseInt(a.split("-")[0],10),at=Q*100+1,ht=Q*100+12,ot=.4541,ct=.204,xt=_.filter(St=>{if(!St.||!St.)return!1;const jt=String(St.).trim(),Yt=String(u).trim(),le=parseInt(St.,10);return isNaN(le)?!1:jt===Yt&&le>=at&&le<=ht}),wt=new Array(12).fill(0),Ct=["1","2","3","4","5","6","7","8","9","10","11","12"],re=new Map,ve=new Array(12).fill(0),Ee=ma[u].districts;Object.entries(Ee).forEach(([St,jt])=>{re.set(St,{gu:jt,"1":"-","2":"-","3":"-","4":"-","5":"-","6":"-","7":"-","8":"-","9":"-","10":"-","11":"-","12":"-"})}),xt.forEach(St=>{const jt=String(St.).trim(),Yt=St.%100,le=Yt-1,ce=`${Yt}`,Oe=St.||0,Ie=St.||0;let Gt=0;if(H==="")Gt=Oe/1e6*ot;else if(H==="")Gt=Ie/1e6*ct;else if(H===""){const Pe=Oe/1e6*ot,ge=Ie/1e6*ct;Gt=Pe+ge}if(Gt>0&&le>=0&&le<12&&(wt[le]+=Gt),Gt===0&&H!=="")return;const Le=parseFloat(Gt.toFixed(3));if(re.has(jt)){const Pe=re.get(jt);if(!isNaN(Le)){const ge=Pe[ce]==="-"?0:Pe[ce];Pe[ce]=ge+Le,re.set(jt,Pe),le>=0&&le<12&&(ve[le]+=Le)}}});const Nt=Math.max(...wt),Pt=Nt>0?Math.ceil(Nt*1.1*100)/100:1e3,Bt=Ct.map((St,jt)=>({name:St,:parseFloat(wt[jt].toFixed(2))}));F(Bt),q(Pt);const Ft=Array.from(re.values()).map(St=>{const jt={...St};return Ct.forEach(Yt=>{typeof jt[Yt]=="number"&&jt[Yt]>0&&(jt[Yt]=parseFloat(jt[Yt].toFixed(3)))}),jt}),ft={gu:`${ma[u]?ma[u].name:""} `};Ct.forEach((St,jt)=>{const Yt=ve[jt];ft[St]=Yt>0?parseFloat(Yt.toFixed(3)):"-"}),O([ft,...Ft])},X=Q=>{f(Q.target.value)},tt=()=>ma[u]?vt.jsxs("table",{className:"stats-table",children:[vt.jsx("thead",{children:vt.jsx("tr",{children:sk.map(Q=>vt.jsx("th",{children:Q},Q))})}),vt.jsx("tbody",{children:A.map((Q,at)=>vt.jsxs("tr",{style:{fontWeight:at===0?"bold":"normal",backgroundColor:at===0?"#f9f9f9":"transparent"},children:[vt.jsx("td",{children:Q.gu}),sk.slice(1).map(ht=>vt.jsx("td",{children:typeof Q[ht]=="number"?Q[ht].toLocaleString():Q[ht]},ht))]},Q.gu))})]}):vt.jsx("table",{className:"stats-table"});return vt.jsxs("div",{className:"stats-sidebar-layout",children:[vt.jsxs("aside",{className:"stats-sidebar",children:[vt.jsxs("div",{className:"sidebar-section",children:[vt.jsx("h4",{children:"  "}),vt.jsx("input",{type:"month",className:"stats-input",min:t,max:r,value:a,onChange:Q=>y(Q.target.value)})]}),vt.jsxs("div",{className:"sidebar-section",children:[vt.jsx("h4",{children:" "}),vt.jsx("label",{children:""}),vt.jsxs("select",{className:"stats-input",value:H,onChange:Q=>K(Q.target.value),children:[vt.jsx("option",{children:""}),vt.jsx("option",{value:"",children:" (tCO2eq)"}),vt.jsx("option",{value:"",children:" (tCO2eq)"})]}),vt.jsx("label",{children:""}),vt.jsx("select",{className:"stats-input",value:u,onChange:X,children:Object.keys(ma).map(Q=>vt.jsx("option",{value:Q,children:ma[Q].name},Q))})]}),vt.jsx("div",{className:"sidebar-section",children:vt.jsx("button",{className:"stats-button-primary",onClick:W,children:" "})})]}),vt.jsxs("main",{className:"main-content",children:[vt.jsx("h2",{children:"  "}),vt.jsxs("div",{className:"chart-section",children:[vt.jsx("h3",{children:"  "}),vt.jsxs("p",{children:[u," ",a.split("-")[0]," ",H," ",H===""?"":"","     "]}),vt.jsx("div",{className:"chart-container",children:vt.jsx(vz,{width:"100%",height:300,children:vt.jsxs(NR,{data:I,margin:{top:30,right:30,left:50,bottom:5},children:[vt.jsx(eT,{strokeDasharray:"3 3"}),vt.jsx(iT,{dataKey:"name",scale:"point",axisLine:!1,tickLine:!1,tick:{fontSize:13}}),vt.jsx(rT,{axisLine:!1,tickLine:!1,tickFormatter:Q=>Q.toLocaleString(),tickCount:5,tick:{fontSize:13},label:{value:"(tCO2eq)",position:"top",offset:17,fontWeight:"bold",fontSize:14,fill:"#333"}}),vt.jsx(XI,{formatter:Q=>[`${Q.toLocaleString()} tCO2eq`," "]}),vt.jsx(nT,{type:"monotone",dataKey:"",stroke:"#0088FE",fill:"#cce5ff",strokeWidth:2,activeDot:{r:6},dot:{r:4,fill:"#0088FE"}})]})})})]}),vt.jsxs("div",{className:"table-section",children:[vt.jsx("h3",{children:ma[u]?`${ma[u].name} ${a.split("-")[0]}   `:"   "}),vt.jsx("p",{children:"     ."}),vt.jsx("div",{className:"stats-table-container",children:tt()})]})]})]})}const HJ="_wrap_42lh6_1",ZJ="_header_42lh6_3",GJ="_card_42lh6_9",WJ="_cardHead_42lh6_23",YJ="_panel_42lh6_25",Jg={wrap:HJ,header:ZJ,card:GJ,cardHead:WJ,panel:YJ},XJ="modulepreload",KJ=function(t,e){return new URL(t,e).href},ok={},QJ=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let _=function(x){return Promise.all(x.map(A=>Promise.resolve(A).then(O=>({status:"fulfilled",value:O}),O=>({status:"rejected",reason:O}))))};const f=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),y=a?.nonce||a?.getAttribute("nonce");r=_(n.map(x=>{if(x=KJ(x,i),x in ok)return;ok[x]=!0;const A=x.endsWith(".css"),O=A?'[rel="stylesheet"]':"";if(i)for(let F=f.length-1;F>=0;F--){const q=f[F];if(q.href===x&&(!A||q.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${O}`))return;const I=document.createElement("link");if(I.rel=A?"stylesheet":XJ,A||(I.as="script"),I.crossOrigin="",I.href=x,y&&I.setAttribute("nonce",y),document.head.appendChild(I),A)return new Promise((F,q)=>{I.addEventListener("load",F),I.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(f){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=f,window.dispatchEvent(a),!a.defaultPrevented)throw f}return r.then(f=>{for(const a of f||[])a.status==="rejected"&&u(a.reason);return e().catch(u)})},JJ=G.createContext(null);function ttt(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,i=Array.isArray(t)?t[1]:t?t.y:0,r=Array.isArray(e)?e[0]:e?e.x:0,u=Array.isArray(e)?e[1]:e?e.y:0;return n===r&&i===u}function Yl(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Yl(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(const r of n)if(!e.hasOwnProperty(r)||!Yl(t[r],e[r]))return!1;return!0}return!1}function ett(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function lk(t,e){if(!t.getProjection)return;const n=t.getProjection(),i=e.getProjection();Yl(n,i)||e.setProjection(n)}function uk(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function ck(t,e){const n=e.viewState||e;let i=!1;if("zoom"in n){const r=t.zoom;t.zoom=n.zoom,i=i||r!==t.zoom}if("bearing"in n){const r=t.bearing;t.bearing=n.bearing,i=i||r!==t.bearing}if("pitch"in n){const r=t.pitch;t.pitch=n.pitch,i=i||r!==t.pitch}if(n.padding&&!t.isPaddingEqual(n.padding)&&(i=!0,t.padding=n.padding),"longitude"in n&&"latitude"in n){const r=t.center;t.center=new r.constructor(n.longitude,n.latitude),i=i||r!==t.center}return i}const ntt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function hk(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const i of t.layers)e[i.id]=i;const n=t.layers.map(i=>{let r=null;"interactive"in i&&(r=Object.assign({},i),delete r.interactive);const u=e[i.ref];if(u){r=r||Object.assign({},i),delete r.ref;for(const f of ntt)f in u&&(r[f]=u[f])}return r||i});return{...t,layers:n}}var fk={};const dk={version:8,sources:{},layers:[]},pk={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},nw={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},mk={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},itt=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],rtt=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class km{constructor(e,n,i){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=r=>{const u=this.props[mk[r.type]];u?u(r):r.type==="error"&&console.error(r.error)},this._onPointerEvent=r=>{(r.type==="mousemove"||r.type==="mouseout")&&this._updateHover(r);const u=this.props[pk[r.type]];u&&(this.props.interactiveLayerIds&&r.type!=="mouseover"&&r.type!=="mouseout"&&(r.features=this._hoveredFeatures||this._queryRenderedFeatures(r.point)),u(r),delete r.features)},this._onCameraEvent=r=>{if(!this._internalUpdate){const u=this.props[nw[r.type]];u&&u(r)}r.type in this._deferredEvents&&(this._deferredEvents[r.type]=!1)},this._MapClass=e,this.props=n,this._initialize(i)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const i=this._updateSettings(e,n);i&&this._createShadowTransform(this._map);const r=this._updateSize(e),u=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(i||r||u&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const i=km.savedMaps.pop();if(!i)return null;const r=i.map,u=r.getContainer();for(n.className=u.className;u.childNodes.length>0;)n.appendChild(u.childNodes[0]);r._container=n;const f=r._resizeObserver;f&&(f.disconnect(),f.observe(n)),i.setProps({...e,styleDiffing:!1}),r.resize();const{initialViewState:a}=e;return a&&(a.bounds?r.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):i._updateViewState(a,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",()=>r.fire("load")),r._update(),i}_initialize(e){const{props:n}=this,{mapStyle:i=dk}=n,r={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||att()||null,container:e,style:hk(i)},u=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[u.longitude||0,u.latitude||0],zoom:u.zoom||0,pitch:u.pitch||0,bearing:u.bearing||0}),n.gl){const x=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=x,n.gl)}const f=new this._MapClass(r);u.padding&&f.setPadding(u.padding),n.cursor&&(f.getCanvas().style.cursor=n.cursor),this._createShadowTransform(f);const a=f._render;f._render=x=>{this._inRender=!0,a.call(f,x),this._inRender=!1};const y=f._renderTaskQueue.run;f._renderTaskQueue.run=x=>{y.call(f._renderTaskQueue,x),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const _=f.fire;f.fire=this._fireEvent.bind(this,_),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>{this._updateStyleComponents(this.props,{}),lk(f.transform,this._renderTransform)}),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const x in pk)f.on(x,this._onPointerEvent);for(const x in nw)f.on(x,this._onCameraEvent);for(const x in mk)f.on(x,this._onEvent);this._map=f}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n?.remove(),km.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=ett(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const i=this._map;if(n.width!==i.transform.width||n.height!==i.transform.height)return i.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const i=this._map,r=this._renderTransform,{zoom:u,pitch:f,bearing:a}=r,y=i.isMoving();y&&(r.cameraElevationReference="sea");const _=ck(r,{...uk(i.transform),...e});if(y&&(r.cameraElevationReference="ground"),_&&n){const x=this._deferredEvents;x.move=!0,x.zoom||(x.zoom=u!==r.zoom),x.rotate||(x.rotate=a!==r.bearing),x.pitch||(x.pitch=f!==r.pitch)}return y||ck(i.transform,e),_}_updateSettings(e,n){const i=this._map;let r=!1;for(const u of itt)if(u in e&&!Yl(e[u],n[u])){r=!0;const f=i[`set${u[0].toUpperCase()}${u.slice(1)}`];f?.call(i,e[u])}return r}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:i=dk,styleDiffing:r=!0}=e,u={diff:r};return"localIdeographFontFamily"in e&&(u.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(hk(i),u),!0}return!1}_updateStyleComponents(e,n){const i=this._map;let r=!1;return i.isStyleLoaded()&&("light"in e&&i.setLight&&!Yl(e.light,n.light)&&(r=!0,i.setLight(e.light)),"fog"in e&&i.setFog&&!Yl(e.fog,n.fog)&&(r=!0,i.setFog(e.fog)),"terrain"in e&&i.setTerrain&&!Yl(e.terrain,n.terrain)&&(!e.terrain||i.getSource(e.terrain.source))&&(r=!0,i.setTerrain(e.terrain))),r}_updateHandlers(e,n){var i,r;const u=this._map;let f=!1;for(const a of rtt){const y=(i=e[a])!==null&&i!==void 0?i:!0,_=(r=n[a])!==null&&r!==void 0?r:!0;Yl(y,_)||(f=!0,y?u[a].enable(y):u[a].disable())}return f}_queryRenderedFeatures(e){const n=this._map,i=n.transform,{interactiveLayerIds:r=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:r.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=i}}_updateHover(e){var n;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const u=e.type,f=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(e.point),y=a.length>0;!y&&f&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,y&&!f&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=u}else this._hoveredFeatures=null}_fireEvent(e,n,i){const r=this._map,u=r.transform,f=typeof n=="string"?n:n.type;return f==="move"&&this._updateViewState(this.props,!1),f in nw&&(typeof n=="object"&&(n.viewState=uk(u)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,n,i),r.transform=u,r):(e.call(r,n,i),r)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const i in this._deferredEvents)this._deferredEvents[i]&&e.fire(i);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{lk(this._renderTransform,n),e.transform=n}}}km.savedMaps=[];function att(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||fk.MapboxAccessToken}catch{}try{t=t||fk.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const stt=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function ott(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:i=>{const r=e.transform;e.transform=t.transform;const u=e.project(i);return e.transform=r,u},unproject:i=>{const r=e.transform;e.transform=t.transform;const u=e.unproject(i);return e.transform=r,u},queryTerrainElevation:(i,r)=>{const u=e.transform;e.transform=t.transform;const f=e.queryTerrainElevation(i,r);return e.transform=u,f},queryRenderedFeatures:(i,r)=>{const u=e.transform;e.transform=t.transform;const f=e.queryRenderedFeatures(i,r);return e.transform=u,f}};for(const i of ltt(e))!(i in n)&&!stt.includes(i)&&(n[i]=e[i].bind(e));return n}function ltt(t){const e=new Set;let n=t;for(;n;){for(const i of Object.getOwnPropertyNames(n))i[0]!=="_"&&typeof t[i]=="function"&&i!=="fire"&&i!=="setEventedParent"&&e.add(i);n=Object.getPrototypeOf(n)}return Array.from(e)}const utt=typeof document<"u"?G.useLayoutEffect:G.useEffect,ctt=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function htt(t,e){for(const i of ctt)i in e&&(t[i]=e[i]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,i=>{i&&console.error(i)},!0)}const Hm=G.createContext(null);function ftt(t,e,n){const i=G.useContext(JJ),[r,u]=G.useState(null),f=G.useRef(),{current:a}=G.useRef({mapLib:null,map:null});G.useEffect(()=>{const x=t.mapLib;let A=!0,O;return Promise.resolve(x||n).then(I=>{if(!A)return;if(!I)throw new Error("Invalid mapLib");const F="Map"in I?I:I.default;if(!F.Map)throw new Error("Invalid mapLib");if(htt(F,t),!F.supported||F.supported(t))t.reuseMaps&&(O=km.reuse(t,f.current)),O||(O=new km(F.Map,t,f.current)),a.map=ott(O),a.mapLib=F,u(O),i?.onMapMount(a.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(I=>{const{onError:F}=t;F?F({type:"error",target:null,originalEvent:null,error:I}):console.error(I)}),()=>{A=!1,O&&(i?.onMapUnmount(t.id),t.reuseMaps?O.recycle():O.destroy())}},[]),utt(()=>{r&&r.setProps(t)}),G.useImperativeHandle(e,()=>a.map,[r]);const y=G.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),_={height:"100%"};return G.createElement("div",{id:t.id,ref:f,style:y},r&&G.createElement(Hm.Provider,{value:a},G.createElement("div",{"mapboxgl-children":"",style:_},t.children)))}const dtt=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function op(t,e){if(!t||!e)return;const n=t.style;for(const i in e){const r=e[i];Number.isFinite(r)&&!dtt.test(i)?n[i]=`${r}px`:n[i]=r}}function ptt(t,e){const{map:n,mapLib:i}=G.useContext(Hm),r=G.useRef({props:t});r.current.props=t;const u=G.useMemo(()=>{let q=!1;G.Children.forEach(t.children,W=>{W&&(q=!0)});const H={...t,element:q?document.createElement("div"):null},K=new i.Marker(H);return K.setLngLat([t.longitude,t.latitude]),K.getElement().addEventListener("click",W=>{var X,tt;(tt=(X=r.current.props).onClick)===null||tt===void 0||tt.call(X,{type:"click",target:K,originalEvent:W})}),K.on("dragstart",W=>{var X,tt;const Q=W;Q.lngLat=u.getLngLat(),(tt=(X=r.current.props).onDragStart)===null||tt===void 0||tt.call(X,Q)}),K.on("drag",W=>{var X,tt;const Q=W;Q.lngLat=u.getLngLat(),(tt=(X=r.current.props).onDrag)===null||tt===void 0||tt.call(X,Q)}),K.on("dragend",W=>{var X,tt;const Q=W;Q.lngLat=u.getLngLat(),(tt=(X=r.current.props).onDragEnd)===null||tt===void 0||tt.call(X,Q)}),K},[]);G.useEffect(()=>(u.addTo(n.getMap()),()=>{u.remove()}),[]);const{longitude:f,latitude:a,offset:y,style:_,draggable:x=!1,popup:A=null,rotation:O=0,rotationAlignment:I="auto",pitchAlignment:F="auto"}=t;return G.useEffect(()=>{op(u.getElement(),_)},[_]),G.useImperativeHandle(e,()=>u,[]),(u.getLngLat().lng!==f||u.getLngLat().lat!==a)&&u.setLngLat([f,a]),y&&!ttt(u.getOffset(),y)&&u.setOffset(y),u.isDraggable()!==x&&u.setDraggable(x),u.getRotation()!==O&&u.setRotation(O),u.getRotationAlignment()!==I&&u.setRotationAlignment(I),u.getPitchAlignment()!==F&&u.setPitchAlignment(F),u.getPopup()!==A&&u.setPopup(A),Ny.createPortal(t.children,u.getElement())}G.memo(G.forwardRef(ptt));function gk(t){return new Set(t?t.trim().split(/\s+/):[])}function mtt(t,e){const{map:n,mapLib:i}=G.useContext(Hm),r=G.useMemo(()=>document.createElement("div"),[]),u=G.useRef({props:t});u.current.props=t;const f=G.useMemo(()=>{const a={...t},y=new i.Popup(a);return y.setLngLat([t.longitude,t.latitude]),y.once("open",_=>{var x,A;(A=(x=u.current.props).onOpen)===null||A===void 0||A.call(x,_)}),y},[]);if(G.useEffect(()=>{const a=y=>{var _,x;(x=(_=u.current.props).onClose)===null||x===void 0||x.call(_,y)};return f.on("close",a),f.setDOMContent(r).addTo(n.getMap()),()=>{f.off("close",a),f.isOpen()&&f.remove()}},[]),G.useEffect(()=>{op(f.getElement(),t.style)},[t.style]),G.useImperativeHandle(e,()=>f,[]),f.isOpen()&&((f.getLngLat().lng!==t.longitude||f.getLngLat().lat!==t.latitude)&&f.setLngLat([t.longitude,t.latitude]),t.offset&&!Yl(f.options.offset,t.offset)&&f.setOffset(t.offset),(f.options.anchor!==t.anchor||f.options.maxWidth!==t.maxWidth)&&(f.options.anchor=t.anchor,f.setMaxWidth(t.maxWidth)),f.options.className!==t.className)){const a=gk(f.options.className),y=gk(t.className);for(const _ of a)y.has(_)||f.removeClassName(_);for(const _ of y)a.has(_)||f.addClassName(_);f.options.className=t.className}return Ny.createPortal(t.children,r)}G.memo(G.forwardRef(mtt));function n_(t,e,n,i){const r=G.useContext(Hm),u=G.useMemo(()=>t(r),[]);return G.useEffect(()=>{const f=e,a=null,y=typeof e=="function"?e:null,{map:_}=r;return _.hasControl(u)||(_.addControl(u,f?.position),a&&a(r)),()=>{y&&y(r),_.hasControl(u)&&_.removeControl(u)}},[]),u}function gtt(t){const e=n_(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return G.useEffect(()=>{op(e._container,t.style)},[t.style]),null}G.memo(gtt);function ytt(t){const e=n_(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return G.useEffect(()=>{op(e._controlContainer,t.style)},[t.style]),null}G.memo(ytt);function _tt(t,e){const n=G.useRef({props:t}),i=n_(({mapLib:r})=>{const u=new r.GeolocateControl(t),f=u._setupUI;return u._setupUI=a=>{u._container.hasChildNodes()||f(a)},u.on("geolocate",a=>{var y,_;(_=(y=n.current.props).onGeolocate)===null||_===void 0||_.call(y,a)}),u.on("error",a=>{var y,_;(_=(y=n.current.props).onError)===null||_===void 0||_.call(y,a)}),u.on("outofmaxbounds",a=>{var y,_;(_=(y=n.current.props).onOutOfMaxBounds)===null||_===void 0||_.call(y,a)}),u.on("trackuserlocationstart",a=>{var y,_;(_=(y=n.current.props).onTrackUserLocationStart)===null||_===void 0||_.call(y,a)}),u.on("trackuserlocationend",a=>{var y,_;(_=(y=n.current.props).onTrackUserLocationEnd)===null||_===void 0||_.call(y,a)}),u},{position:t.position});return n.current.props=t,G.useImperativeHandle(e,()=>i,[]),G.useEffect(()=>{op(i._container,t.style)},[t.style]),null}G.memo(G.forwardRef(_tt));function vtt(t){const e=n_(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return G.useEffect(()=>{op(e._container,t.style)},[t.style]),null}const xtt=G.memo(vtt);function btt(t){const e=n_(({mapLib:u})=>new u.ScaleControl(t),{position:t.position}),n=G.useRef(t),i=n.current;n.current=t;const{style:r}=t;return t.maxWidth!==void 0&&t.maxWidth!==i.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==i.unit&&e.setUnit(t.unit),G.useEffect(()=>{op(e._container,r)},[r]),null}G.memo(btt);function H0(t,e){if(!t)throw new Error(e)}function wtt(t,e,n,i){if(H0(n.id===i.id,"layer id changed"),H0(n.type===i.type,"layer type changed"),n.type==="custom"||i.type==="custom")return;const{layout:r={},paint:u={},filter:f,minzoom:a,maxzoom:y,beforeId:_}=n;if(_!==i.beforeId&&t.moveLayer(e,_),r!==i.layout){const x=i.layout||{};for(const A in r)Yl(r[A],x[A])||t.setLayoutProperty(e,A,r[A]);for(const A in x)r.hasOwnProperty(A)||t.setLayoutProperty(e,A,void 0)}if(u!==i.paint){const x=i.paint||{};for(const A in u)Yl(u[A],x[A])||t.setPaintProperty(e,A,u[A]);for(const A in x)u.hasOwnProperty(A)||t.setPaintProperty(e,A,void 0)}Yl(f,i.filter)||t.setFilter(e,f),(a!==i.minzoom||y!==i.maxzoom)&&t.setLayerZoomRange(e,a,y)}function Stt(t,e,n){if(t.style&&t.style._loaded&&(!("source"in n)||t.getSource(n.source))){const i={...n,id:e};delete i.beforeId,t.addLayer(i,n.beforeId)}}let Ttt=0;function Mtt(t){const e=G.useContext(Hm).map.getMap(),n=G.useRef(t),[,i]=G.useState(0),r=G.useMemo(()=>t.id||`jsx-layer-${Ttt++}`,[]);if(G.useEffect(()=>{if(e){const f=()=>i(a=>a+1);return e.on("styledata",f),f(),()=>{e.off("styledata",f),e.style&&e.style._loaded&&e.getLayer(r)&&e.removeLayer(r)}}},[e]),e&&e.style&&e.getLayer(r))try{wtt(e,r,t,n.current)}catch(f){console.warn(f)}else Stt(e,r,t);return n.current=t,null}let Att=0;function Ett(t,e,n){if(t.style&&t.style._loaded){const i={...n};return delete i.id,delete i.children,t.addSource(e,i),t.getSource(e)}return null}function Ctt(t,e,n){H0(e.id===n.id,"source id changed"),H0(e.type===n.type,"source type changed");let i="",r=0;for(const f in e)f!=="children"&&f!=="id"&&!Yl(n[f],e[f])&&(i=f,r++);if(!r)return;const u=e.type;u==="geojson"?t.setData(e.data):u==="image"?t.updateImage({url:e.url,coordinates:e.coordinates}):"setCoordinates"in t&&r===1&&i==="coordinates"?t.setCoordinates(e.coordinates):"setUrl"in t&&i==="url"?t.setUrl(e.url):"setTiles"in t&&i==="tiles"?t.setTiles(e.tiles):console.warn(`Unable to update <Source> prop: ${i}`)}function Ptt(t){const e=G.useContext(Hm).map.getMap(),n=G.useRef(t),[,i]=G.useState(0),r=G.useMemo(()=>t.id||`jsx-source-${Att++}`,[]);G.useEffect(()=>{if(e){const f=()=>setTimeout(()=>i(a=>a+1),0);return e.on("styledata",f),f(),()=>{var a;if(e.off("styledata",f),e.style&&e.style._loaded&&e.getSource(r)){const y=(a=e.getStyle())===null||a===void 0?void 0:a.layers;if(y)for(const _ of y)_.source===r&&e.removeLayer(_.id);e.removeSource(r)}}}},[e]);let u=e&&e.style&&e.getSource(r);return u?Ctt(u,t,n.current):u=Ett(e,r,t),n.current=t,u&&G.Children.map(t.children,f=>f&&G.cloneElement(f,{source:r}))||null}const ktt=QJ(()=>Promise.resolve().then(()=>Btt),[],import.meta.url),Ott=G.forwardRef(function(e,n){return ftt(e,n,ktt)}),Dtt=xtt,ztt=Mtt,Ltt=Ptt;var Xv={exports:{}},Itt=Xv.exports,yk;function Rtt(){return yk||(yk=1,(function(t,e){(function(n,i){t.exports=i()})(Itt,(function(){var n,i,r;function u(a,y){if(!n)n=y;else if(!i)i=y;else{var _="var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk);",x={};n(x),r=y(x),typeof window<"u"&&(r.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}u(["exports"],(function(a){function y(c,s,d,v){return new(d||(d=Promise))((function(T,P){function k(Z){try{U(v.next(Z))}catch(J){P(J)}}function R(Z){try{U(v.throw(Z))}catch(J){P(J)}}function U(Z){var J;Z.done?T(Z.value):(J=Z.value,J instanceof d?J:new d((function(st){st(J)}))).then(k,R)}U((v=v.apply(c,s||[])).next())}))}function _(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var x=A;function A(c,s){this.x=c,this.y=s}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,s){return this.clone()._rotateAround(c,s)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var s=c.x-this.x,d=c.y-this.y;return s*s+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult:function(c){var s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var s=Math.cos(c),d=Math.sin(c),v=d*this.x+s*this.y;return this.x=s*this.x-d*this.y,this.y=v,this},_rotateAround:function(c,s){var d=Math.cos(c),v=Math.sin(c),T=s.y+v*(this.x-s.x)+d*(this.y-s.y);return this.x=s.x+d*(this.x-s.x)-v*(this.y-s.y),this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(c){return c instanceof A?c:Array.isArray(c)?new A(c[0],c[1]):c};var O=_(x),I=F;function F(c,s,d,v){this.cx=3*c,this.bx=3*(d-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(v-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=d,this.p2y=v}F.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(s===void 0&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var d=c,v=0;v<8;v++){var T=this.sampleCurveX(d)-c;if(Math.abs(T)<s)return d;var P=this.sampleCurveDerivativeX(d);if(Math.abs(P)<1e-6)break;d-=T/P}var k=0,R=1;for(d=c,v=0;v<20&&(T=this.sampleCurveX(d),!(Math.abs(T-c)<s));v++)c>T?k=d:R=d,d=.5*(R-k)+k;return d},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};var q=_(I);let H,K;function W(){return H==null&&(H=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),H}function X(){if(K==null&&(K=!1,W())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let v=0;v<25;v++){const T=4*v;s.fillStyle=`rgb(${T},${T+1},${T+2})`,s.fillRect(v%5,Math.floor(v/5),1,1)}const d=s.getImageData(0,0,5,5).data;for(let v=0;v<100;v++)if(v%4!=3&&d[v]!==v){K=!0;break}}}return K||!1}function tt(c,s,d,v){const T=new q(c,s,d,v);return function(P){return T.solve(P)}}const Q=tt(.25,.1,.25,1);function at(c,s,d){return Math.min(d,Math.max(s,c))}function ht(c,s,d){const v=d-s,T=((c-s)%v+v)%v+s;return T===s?d:T}function ot(c,...s){for(const d of s)for(const v in d)c[v]=d[v];return c}let ct=1;function xt(c,s,d){const v={};for(const T in c)v[T]=s.call(d||this,c[T],T,c);return v}function wt(c,s,d){const v={};for(const T in c)s.call(d||this,c[T],T,c)&&(v[T]=c[T]);return v}function Ct(c){return Array.isArray(c)?c.map(Ct):typeof c=="object"&&c?xt(c,Ct):c}const re={};function ve(c){re[c]||(typeof console<"u"&&console.warn(c),re[c]=!0)}function Ee(c,s,d){return(d.y-c.y)*(s.x-c.x)>(s.y-c.y)*(d.x-c.x)}function Nt(c){let s=0;for(let d,v,T=0,P=c.length,k=P-1;T<P;k=T++)d=c[T],v=c[k],s+=(v.x-d.x)*(d.y+v.y);return s}function Pt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Bt=null;function Ft(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const $t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ft(c,s,d,v,T){return y(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const P=new VideoFrame(c,{timestamp:0});try{const k=P?.format;if(!k||!k.startsWith("BGR")&&!k.startsWith("RGB"))throw new Error(`Unrecognized format ${k}`);const R=k.startsWith("BGR"),U=new Uint8ClampedArray(v*T*4);if(yield P.copyTo(U,(function(Z,J,st,ut,gt){const yt=4*Math.max(-J,0),Et=(Math.max(0,st)-st)*ut*4+yt,It=4*ut,Vt=Math.max(0,J),Jt=Math.max(0,st);return{rect:{x:Vt,y:Jt,width:Math.min(Z.width,J+ut)-Vt,height:Math.min(Z.height,st+gt)-Jt},layout:[{offset:Et,stride:It}]}})(c,s,d,v,T)),R)for(let Z=0;Z<U.length;Z+=4){const J=U[Z];U[Z]=U[Z+2],U[Z+2]=J}return U}finally{P.close()}}))}let St,jt,Yt,le;const ce={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const s=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(c,s=0){return this.getImageCanvasContext(c).getImageData(-s,-s,c.width+2*s,c.height+2*s)},getImageCanvasContext(c){const s=window.document.createElement("canvas"),d=s.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return s.width=c.width,s.height=c.height,d.drawImage(c,0,0,c.width,c.height),d},resolveURL:c=>(Yt||(Yt=document.createElement("a")),Yt.href=c,Yt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(le==null&&(le=matchMedia("(prefers-reduced-motion: reduce)")),le.matches)}},Oe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ie extends Error{constructor(s,d,v,T){super(`AJAXError: ${d} (${s}): ${v}`),this.status=s,this.statusText=d,this.url=v,this.body=T}}const Gt=Pt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Le=c=>Oe.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))];function Pe(c,s){const d=new AbortController,v=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,cache:c.cache,referrer:Gt(),signal:d.signal});let T=!1,P=!1;return c.type==="json"&&v.headers.set("Accept","application/json"),P||fetch(v).then((k=>k.ok?(R=>{(c.type==="arrayBuffer"||c.type==="image"?R.arrayBuffer():c.type==="json"?R.json():R.text()).then((U=>{P||(T=!0,s(null,U,R.headers.get("Cache-Control"),R.headers.get("Expires")))})).catch((U=>{P||s(new Error(U.message))}))})(k):k.blob().then((R=>s(new Ie(k.status,k.statusText,c.url,R)))))).catch((k=>{k.code!==20&&s(new Error(k.message))})),{cancel:()=>{P=!0,T||d.abort()}}}const ge=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(Pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s);if(!Pt())return(Le(c.url)||Pe)(c,s)}if(!(/^file:/.test(d=c.url)||/^file:/.test(Gt())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Pe(c,s);if(Pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s,void 0,!0)}var d;return(function(v,T){const P=new XMLHttpRequest;P.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(P.responseType="arraybuffer");for(const k in v.headers)P.setRequestHeader(k,v.headers[k]);return v.type==="json"&&(P.responseType="text",P.setRequestHeader("Accept","application/json")),P.withCredentials=v.credentials==="include",P.onerror=()=>{T(new Error(P.statusText))},P.onload=()=>{if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let k=P.response;if(v.type==="json")try{k=JSON.parse(P.response)}catch(R){return T(R)}T(null,k,P.getResponseHeader("Cache-Control"),P.getResponseHeader("Expires"))}else{const k=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});T(new Ie(P.status,P.statusText,v.url,k))}},P.send(v.body),{cancel:()=>P.abort()}})(c,s)},nn=function(c,s){return ge(ot(c,{type:"arrayBuffer"}),s)};function qe(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const s=new URL(c),d=window.location;return s.protocol===d.protocol&&s.host===d.host}function an(c,s,d){d[c]&&d[c].indexOf(s)!==-1||(d[c]=d[c]||[],d[c].push(s))}function Ke(c,s,d){if(d&&d[c]){const v=d[c].indexOf(s);v!==-1&&d[c].splice(v,1)}}class On{constructor(s,d={}){ot(this,d),this.type=s}}class rn extends On{constructor(s,d={}){super("error",ot({error:s},d))}}class In{on(s,d){return this._listeners=this._listeners||{},an(s,d,this._listeners),this}off(s,d){return Ke(s,d,this._listeners),Ke(s,d,this._oneTimeListeners),this}once(s,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},an(s,d,this._oneTimeListeners),this):new Promise((v=>this.once(s,v)))}fire(s,d){typeof s=="string"&&(s=new On(s,d||{}));const v=s.type;if(this.listens(v)){s.target=this;const T=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const R of T)R.call(this,s);const P=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const R of P)Ke(v,R,this._oneTimeListeners),R.call(this,s);const k=this._eventedParent;k&&(ot(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(s))}else s instanceof rn&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,d){return this._eventedParent=s,this._eventedParentData=d,this}}var me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ki=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Li(c,s){const d={};for(const v in c)v!=="ref"&&(d[v]=c[v]);return ki.forEach((v=>{v in s&&(d[v]=s[v])})),d}function Yn(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let d=0;d<c.length;d++)if(!Yn(c[d],s[d]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(const d in c)if(!Yn(c[d],s[d]))return!1;return!0}return c===s}const cn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Zi(c,s,d){d.push({command:cn.addSource,args:[c,s[c]]})}function si(c,s,d){s.push({command:cn.removeSource,args:[c]}),d[c]=!0}function Ii(c,s,d,v){si(c,d,v),Zi(c,s,d)}function jr(c,s,d){let v;for(v in c[d])if(Object.prototype.hasOwnProperty.call(c[d],v)&&v!=="data"&&!Yn(c[d][v],s[d][v]))return!1;for(v in s[d])if(Object.prototype.hasOwnProperty.call(s[d],v)&&v!=="data"&&!Yn(c[d][v],s[d][v]))return!1;return!0}function Ws(c,s,d,v,T,P){let k;for(k in s=s||{},c=c||{})Object.prototype.hasOwnProperty.call(c,k)&&(Yn(c[k],s[k])||d.push({command:P,args:[v,k,s[k],T]}));for(k in s)Object.prototype.hasOwnProperty.call(s,k)&&!Object.prototype.hasOwnProperty.call(c,k)&&(Yn(c[k],s[k])||d.push({command:P,args:[v,k,s[k],T]}))}function Wa(c){return c.id}function _a(c,s){return c[s.id]=s,c}class Be{constructor(s,d,v,T){this.message=(s?`${s}: `:"")+v,T&&(this.identifier=T),d!=null&&d.__line__&&(this.line=d.__line__)}}function hr(c,...s){for(const d of s)for(const v in d)c[v]=d[v];return c}class Un extends Error{constructor(s,d){super(d),this.message=d,this.key=s}}class va{constructor(s,d=[]){this.parent=s,this.bindings={};for(const[v,T]of d)this.bindings[v]=T}concat(s){return new va(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const fr={kind:"null"},Fe={kind:"number"},Dn={kind:"string"},wn={kind:"boolean"},Mr={kind:"color"},za={kind:"object"},bn={kind:"value"},xa={kind:"collator"},kt={kind:"formatted"},lt={kind:"padding"},dt={kind:"resolvedImage"},bt={kind:"variableAnchorOffsetCollection"};function Dt(c,s){return{kind:"array",itemType:c,N:s}}function zt(c){if(c.kind==="array"){const s=zt(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const te=[fr,Fe,Dn,wn,Mr,kt,za,Dt(bn),lt,dt,bt];function Zt(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Zt(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const d of te)if(!Zt(d,s))return null}}return`Expected ${zt(c)} but found ${zt(s)} instead.`}function Ut(c,s){return s.some((d=>d.kind===c.kind))}function Xt(c,s){return s.some((d=>d==="null"?c===null:d==="array"?Array.isArray(c):d==="object"?c&&!Array.isArray(c)&&typeof c=="object":d===typeof c))}function _e(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}const ie=.96422,Te=.82521,hn=4/29,dn=6/29,He=3*dn*dn,tn=dn*dn*dn,_n=Math.PI/180,Vn=180/Math.PI;function pi(c){return(c%=360)<0&&(c+=360),c}function Kn([c,s,d,v]){let T,P;const k=xr((.2225045*(c=Hn(c))+.7168786*(s=Hn(s))+.0606169*(d=Hn(d)))/1);c===s&&s===d?T=P=k:(T=xr((.4360747*c+.3850649*s+.1430804*d)/ie),P=xr((.0139322*c+.0971045*s+.7141733*d)/Te));const R=116*k-16;return[R<0?0:R,500*(T-k),200*(k-P),v]}function Hn(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function xr(c){return c>tn?Math.pow(c,1/3):c/He+hn}function Ti([c,s,d,v]){let T=(c+16)/116,P=isNaN(s)?T:T+s/500,k=isNaN(d)?T:T-d/200;return T=1*nr(T),P=ie*nr(P),k=Te*nr(k),[Ri(3.1338561*P-1.6168667*T-.4906146*k),Ri(-.9787684*P+1.9161415*T+.033454*k),Ri(.0719453*P-.2289914*T+1.4052427*k),v]}function Ri(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function nr(c){return c>dn?c*c*c:He*(c-hn)}function Ar(c){return parseInt(c.padEnd(2,c),16)/255}function wl(c,s){return Ki(s?c/100:c,0,1)}function Ki(c,s,d){return Math.min(Math.max(s,c),d)}function Sl(c){return!c.some(Number.isNaN)}const Xh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Qn{constructor(s,d,v,T=1,P=!0){this.r=s,this.g=d,this.b=v,this.a=T,P||(this.r*=T,this.g*=T,this.b*=T,T||this.overwriteGetter("rgb",[s,d,v,T]))}static parse(s){if(s instanceof Qn)return s;if(typeof s!="string")return;const d=(function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const T=Xh[v];if(T){const[k,R,U]=T;return[k/255,R/255,U/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const k=v.length<6?1:2;let R=1;return[Ar(v.slice(R,R+=k)),Ar(v.slice(R,R+=k)),Ar(v.slice(R,R+=k)),Ar(v.slice(R,R+k)||"ff")]}if(v.startsWith("rgb")){const k=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[R,U,Z,J,st,ut,gt,yt,Et,It,Vt,Jt]=k,Ht=[J||" ",gt||" ",It].join("");if(Ht==="  "||Ht==="  /"||Ht===",,"||Ht===",,,"){const ee=[Z,ut,Et].join(""),ne=ee==="%%%"?100:ee===""?255:0;if(ne){const Se=[Ki(+U/ne,0,1),Ki(+st/ne,0,1),Ki(+yt/ne,0,1),Vt?wl(+Vt,Jt):1];if(Sl(Se))return Se}}return}}const P=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[k,R,U,Z,J,st,ut,gt,yt]=P,Et=[U||" ",J||" ",ut].join("");if(Et==="  "||Et==="  /"||Et===",,"||Et===",,,"){const It=[+R,Ki(+Z,0,100),Ki(+st,0,100),gt?wl(+gt,yt):1];if(Sl(It))return(function([Vt,Jt,Ht,ee]){function ne(Se){const je=(Se+Vt/30)%12,ln=Jt*Math.min(Ht,1-Ht);return Ht-ln*Math.max(-1,Math.min(je-3,9-je,1))}return Vt=pi(Vt),Jt/=100,Ht/=100,[ne(0),ne(8),ne(4),ee]})(It)}}})(s);return d?new Qn(...d,!1):void 0}get rgb(){const{r:s,g:d,b:v,a:T}=this,P=T||1/0;return this.overwriteGetter("rgb",[s/P,d/P,v/P,T])}get hcl(){return this.overwriteGetter("hcl",(function(s){const[d,v,T,P]=Kn(s),k=Math.sqrt(v*v+T*T);return[Math.round(1e4*k)?pi(Math.atan2(T,v)*Vn):NaN,k,d,P]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Kn(this.rgb))}overwriteGetter(s,d){return Object.defineProperty(this,s,{value:d}),d}toString(){const[s,d,v,T]=this.rgb;return`rgba(${[s,d,v].map((P=>Math.round(255*P))).join(",")},${T})`}}Qn.black=new Qn(0,0,0,1),Qn.white=new Qn(1,1,1,1),Qn.transparent=new Qn(0,0,0,0),Qn.red=new Qn(1,0,0,1);class Ys{constructor(s,d,v){this.sensitivity=s?d?"variant":"case":d?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,d){return this.collator.compare(s,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class tl{constructor(s,d,v,T,P){this.text=s,this.image=d,this.scale=v,this.fontStack=T,this.textColor=P}}class Fr{constructor(s){this.sections=s}static fromString(s){return new Fr([new tl(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((s=>s.text.length!==0||s.image&&s.image.name.length!==0))}static factory(s){return s instanceof Fr?s:Fr.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map((s=>s.text)).join("")}}class ba{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof ba)return s;if(typeof s=="number")return new ba([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const d of s)if(typeof d!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new ba(s)}}toString(){return JSON.stringify(this.values)}}const Ou=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Pn{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Pn)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let d=0;d<s.length;d+=2){const v=s[d],T=s[d+1];if(typeof v!="string"||!Ou.has(v)||!Array.isArray(T)||T.length!==2||typeof T[0]!="number"||typeof T[1]!="number")return}return new Pn(s)}}toString(){return JSON.stringify(this.values)}}class Rn{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Rn({name:s,available:!1}):null}}function wa(c,s,d,v){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof d=="number"&&d>=0&&d<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[c,s,d,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[c,s,d,v]:[c,s,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ir(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Qn||c instanceof Ys||c instanceof Fr||c instanceof ba||c instanceof Pn||c instanceof Rn)return!0;if(Array.isArray(c)){for(const s of c)if(!ir(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!ir(c[s]))return!1;return!0}return!1}function mi(c){if(c===null)return fr;if(typeof c=="string")return Dn;if(typeof c=="boolean")return wn;if(typeof c=="number")return Fe;if(c instanceof Qn)return Mr;if(c instanceof Ys)return xa;if(c instanceof Fr)return kt;if(c instanceof ba)return lt;if(c instanceof Pn)return bt;if(c instanceof Rn)return dt;if(Array.isArray(c)){const s=c.length;let d;for(const v of c){const T=mi(v);if(d){if(d===T)continue;d=bn;break}d=T}return Dt(d||bn,s)}return za}function ni(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof Qn||c instanceof Fr||c instanceof ba||c instanceof Pn||c instanceof Rn?c.toString():JSON.stringify(c)}class Tn{constructor(s,d){this.type=s,this.value=d}static parse(s,d){if(s.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!ir(s[1]))return d.error("invalid value");const v=s[1];let T=mi(v);const P=d.expectedType;return T.kind!=="array"||T.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(T=P),new Tn(T,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class zn{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const Co={string:Dn,number:Fe,boolean:wn,object:za};class Sa{constructor(s,d){this.type=s,this.args=d}static parse(s,d){if(s.length<2)return d.error("Expected at least one argument.");let v,T=1;const P=s[0];if(P==="array"){let R,U;if(s.length>2){const Z=s[1];if(typeof Z!="string"||!(Z in Co)||Z==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);R=Co[Z],T++}else R=bn;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return d.error('The length argument to "array" must be a positive integer literal',2);U=s[2],T++}v=Dt(R,U)}else{if(!Co[P])throw new Error(`Types doesn't contain name = ${P}`);v=Co[P]}const k=[];for(;T<s.length;T++){const R=d.parse(s[T],T,bn);if(!R)return null;k.push(R)}return new Sa(v,k)}evaluate(s){for(let d=0;d<this.args.length;d++){const v=this.args[d].evaluate(s);if(!Zt(this.type,mi(v)))return v;if(d===this.args.length-1)throw new zn(`Expected value to be of type ${zt(this.type)}, but found ${zt(mi(v))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every((s=>s.outputDefined()))}}const Vi={"to-boolean":wn,"to-color":Mr,"to-number":Fe,"to-string":Dn};class Xs{constructor(s,d){this.type=s,this.args=d}static parse(s,d){if(s.length<2)return d.error("Expected at least one argument.");const v=s[0];if(!Vi[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&s.length!==2)return d.error("Expected one argument.");const T=Vi[v],P=[];for(let k=1;k<s.length;k++){const R=d.parse(s[k],k,bn);if(!R)return null;P.push(R)}return new Xs(T,P)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let d,v;for(const T of this.args){if(d=T.evaluate(s),v=null,d instanceof Qn)return d;if(typeof d=="string"){const P=s.parseColor(d);if(P)return P}else if(Array.isArray(d)&&(v=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:wa(d[0],d[1],d[2],d[3]),!v))return new Qn(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new zn(v||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const v of this.args){d=v.evaluate(s);const T=ba.parse(d);if(T)return T}throw new zn(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const v of this.args){d=v.evaluate(s);const T=Pn.parse(d);if(T)return T}throw new zn(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const v of this.args){if(d=v.evaluate(s),d===null)return 0;const T=Number(d);if(!isNaN(T))return T}throw new zn(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return Fr.fromString(ni(this.args[0].evaluate(s)));case"resolvedImage":return Rn.fromString(ni(this.args[0].evaluate(s)));default:return ni(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every((s=>s.outputDefined()))}}const Jl=["Unknown","Point","LineString","Polygon"];class As{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Jl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let d=this._parseColorCache[s];return d||(d=this._parseColorCache[s]=Qn.parse(s)),d}}class Ai{constructor(s,d,v=[],T,P=new va,k=[]){this.registry=s,this.path=v,this.key=v.map((R=>`[${R}]`)).join(""),this.scope=P,this.errors=k,this.expectedType=T,this._isConstant=d}parse(s,d,v,T,P={}){return d?this.concat(d,v,T)._parse(s,P):this._parse(s,P)}_parse(s,d){function v(T,P,k){return k==="assert"?new Sa(P,[T]):k==="coerce"?new Xs(P,[T]):T}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const T=s[0];if(typeof T!="string")return this.error(`Expression name must be a string, but found ${typeof T} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const P=this.registry[T];if(P){let k=P.parse(s,this);if(!k)return null;if(this.expectedType){const R=this.expectedType,U=k.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||U.kind!=="value")if(R.kind!=="color"&&R.kind!=="formatted"&&R.kind!=="resolvedImage"||U.kind!=="value"&&U.kind!=="string")if(R.kind!=="padding"||U.kind!=="value"&&U.kind!=="number"&&U.kind!=="array")if(R.kind!=="variableAnchorOffsetCollection"||U.kind!=="value"&&U.kind!=="array"){if(this.checkSubtype(R,U))return null}else k=v(k,R,d.typeAnnotation||"coerce");else k=v(k,R,d.typeAnnotation||"coerce");else k=v(k,R,d.typeAnnotation||"coerce");else k=v(k,R,d.typeAnnotation||"assert")}if(!(k instanceof Tn)&&k.type.kind!=="resolvedImage"&&this._isConstant(k)){const R=new As;try{k=new Tn(k.type,k.evaluate(R))}catch(U){return this.error(U.message),null}}return k}return this.error(`Unknown expression "${T}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,d,v){const T=typeof s=="number"?this.path.concat(s):this.path,P=v?this.scope.concat(v):this.scope;return new Ai(this.registry,this._isConstant,T,d||null,P,this.errors)}error(s,...d){const v=`${this.key}${d.map((T=>`[${T}]`)).join("")}`;this.errors.push(new Un(v,s))}checkSubtype(s,d){const v=Zt(s,d);return v&&this.error(v),v}}class Es{constructor(s,d,v){this.type=xa,this.locale=v,this.caseSensitive=s,this.diacriticSensitive=d}static parse(s,d){if(s.length!==2)return d.error("Expected one argument.");const v=s[1];if(typeof v!="object"||Array.isArray(v))return d.error("Collator options argument must be an object.");const T=d.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,wn);if(!T)return null;const P=d.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,wn);if(!P)return null;let k=null;return v.locale&&(k=d.parse(v.locale,1,Dn),!k)?null:new Es(T,P,k)}evaluate(s){return new Ys(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const Ya=8192;function ds(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function Tl(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function Ml(c,s){const d=(180+c[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,T=Math.pow(2,s.z);return[Math.round(d*T*Ya),Math.round(v*T*Ya)]}function pc(c,s,d){const v=c[0]-s[0],T=c[1]-s[1],P=c[0]-d[0],k=c[1]-d[1];return v*k-P*T==0&&v*P<=0&&T*k<=0}function Al(c,s){let d=!1;for(let k=0,R=s.length;k<R;k++){const U=s[k];for(let Z=0,J=U.length;Z<J-1;Z++){if(pc(c,U[Z],U[Z+1]))return!1;(T=U[Z])[1]>(v=c)[1]!=(P=U[Z+1])[1]>v[1]&&v[0]<(P[0]-T[0])*(v[1]-T[1])/(P[1]-T[1])+T[0]&&(d=!d)}}var v,T,P;return d}function tu(c,s){for(let d=0;d<s.length;d++)if(Al(c,s[d]))return!0;return!1}function mc(c,s,d,v){const T=v[0]-d[0],P=v[1]-d[1],k=(c[0]-d[0])*P-T*(c[1]-d[1]),R=(s[0]-d[0])*P-T*(s[1]-d[1]);return k>0&&R<0||k<0&&R>0}function eu(c,s,d){for(const Z of d)for(let J=0;J<Z.length-1;++J)if((R=[(k=Z[J+1])[0]-(P=Z[J])[0],k[1]-P[1]])[0]*(U=[(T=s)[0]-(v=c)[0],T[1]-v[1]])[1]-R[1]*U[0]!=0&&mc(v,T,P,k)&&mc(P,k,v,T))return!0;var v,T,P,k,R,U;return!1}function Xa(c,s){for(let d=0;d<c.length;++d)if(!Al(c[d],s))return!1;for(let d=0;d<c.length-1;++d)if(eu(c[d],c[d+1],s))return!1;return!0}function Du(c,s){for(let d=0;d<s.length;d++)if(Xa(c,s[d]))return!0;return!1}function el(c,s,d){const v=[];for(let T=0;T<c.length;T++){const P=[];for(let k=0;k<c[T].length;k++){const R=Ml(c[T][k],d);ds(s,R),P.push(R)}v.push(P)}return v}function El(c,s,d){const v=[];for(let T=0;T<c.length;T++){const P=el(c[T],s,d);v.push(P)}return v}function Mn(c,s,d,v){if(c[0]<d[0]||c[0]>d[2]){const T=.5*v;let P=c[0]-d[0]>T?-v:d[0]-c[0]>T?v:0;P===0&&(P=c[0]-d[2]>T?-v:d[2]-c[0]>T?v:0),c[0]+=P}ds(s,c)}function Ka(c,s,d,v){const T=Math.pow(2,v.z)*Ya,P=[v.x*Ya,v.y*Ya],k=[];for(const R of c)for(const U of R){const Z=[U.x+P[0],U.y+P[1]];Mn(Z,s,d,T),k.push(Z)}return k}function gi(c,s,d,v){const T=Math.pow(2,v.z)*Ya,P=[v.x*Ya,v.y*Ya],k=[];for(const U of c){const Z=[];for(const J of U){const st=[J.x+P[0],J.y+P[1]];ds(s,st),Z.push(st)}k.push(Z)}if(s[2]-s[0]<=T/2){(R=s)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const U of k)for(const Z of U)Mn(Z,s,d,T)}var R;return k}class Po{constructor(s,d){this.type=wn,this.geojson=s,this.geometries=d}static parse(s,d){if(s.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(ir(s[1])){const v=s[1];if(v.type==="FeatureCollection")for(let T=0;T<v.features.length;++T){const P=v.features[T].geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new Po(v,v.features[T].geometry)}else if(v.type==="Feature"){const T=v.geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new Po(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new Po(v,v)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return(function(d,v){const T=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],k=d.canonicalID();if(v.type==="Polygon"){const R=el(v.coordinates,P,k),U=Ka(d.geometry(),T,P,k);if(!Tl(T,P))return!1;for(const Z of U)if(!Al(Z,R))return!1}if(v.type==="MultiPolygon"){const R=El(v.coordinates,P,k),U=Ka(d.geometry(),T,P,k);if(!Tl(T,P))return!1;for(const Z of U)if(!tu(Z,R))return!1}return!0})(s,this.geometries);if(s.geometryType()==="LineString")return(function(d,v){const T=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],k=d.canonicalID();if(v.type==="Polygon"){const R=el(v.coordinates,P,k),U=gi(d.geometry(),T,P,k);if(!Tl(T,P))return!1;for(const Z of U)if(!Xa(Z,R))return!1}if(v.type==="MultiPolygon"){const R=El(v.coordinates,P,k),U=gi(d.geometry(),T,P,k);if(!Tl(T,P))return!1;for(const Z of U)if(!Du(Z,R))return!1}return!0})(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ks{constructor(s,d){this.type=d.type,this.name=s,this.boundExpression=d}static parse(s,d){if(s.length!==2||typeof s[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const v=s[1];return d.scope.has(v)?new Ks(v,d.scope.get(v)):d.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class rr{constructor(s,d,v,T){this.name=s,this.type=d,this._evaluate=v,this.args=T}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,d){const v=s[0],T=rr.definitions[v];if(!T)return d.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const P=Array.isArray(T)?T[0]:T.type,k=Array.isArray(T)?[[T[1],T[2]]]:T.overloads,R=k.filter((([Z])=>!Array.isArray(Z)||Z.length===s.length-1));let U=null;for(const[Z,J]of R){U=new Ai(d.registry,nl,d.path,null,d.scope);const st=[];let ut=!1;for(let gt=1;gt<s.length;gt++){const yt=s[gt],Et=Array.isArray(Z)?Z[gt-1]:Z.type,It=U.parse(yt,1+st.length,Et);if(!It){ut=!0;break}st.push(It)}if(!ut)if(Array.isArray(Z)&&Z.length!==st.length)U.error(`Expected ${Z.length} arguments, but found ${st.length} instead.`);else{for(let gt=0;gt<st.length;gt++){const yt=Array.isArray(Z)?Z[gt]:Z.type,Et=st[gt];U.concat(gt+1).checkSubtype(yt,Et.type)}if(U.errors.length===0)return new rr(v,P,J,st)}}if(R.length===1)d.errors.push(...U.errors);else{const Z=(R.length?R:k).map((([st])=>{return ut=st,Array.isArray(ut)?`(${ut.map(zt).join(", ")})`:`(${zt(ut.type)}...)`;var ut})).join(" | "),J=[];for(let st=1;st<s.length;st++){const ut=d.parse(s[st],1+J.length);if(!ut)return null;J.push(zt(ut.type))}d.error(`Expected arguments of type ${Z}, but found (${J.join(", ")}) instead.`)}return null}static register(s,d){rr.definitions=d;for(const v in d)s[v]=rr}}function nl(c){if(c instanceof Ks)return nl(c.boundExpression);if(c instanceof rr&&c.name==="error"||c instanceof Es||c instanceof Po)return!1;const s=c instanceof Xs||c instanceof Sa;let d=!0;return c.eachChild((v=>{d=s?d&&nl(v):d&&v instanceof Tn})),!!d&&La(c)&&Qs(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function La(c){if(c instanceof rr&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Po)return!1;let s=!0;return c.eachChild((d=>{s&&!La(d)&&(s=!1)})),s}function Ia(c){if(c instanceof rr&&c.name==="feature-state")return!1;let s=!0;return c.eachChild((d=>{s&&!Ia(d)&&(s=!1)})),s}function Qs(c,s){if(c instanceof rr&&s.indexOf(c.name)>=0)return!1;let d=!0;return c.eachChild((v=>{d&&!Qs(v,s)&&(d=!1)})),d}function $i(c,s){const d=c.length-1;let v,T,P=0,k=d,R=0;for(;P<=k;)if(R=Math.floor((P+k)/2),v=c[R],T=c[R+1],v<=s){if(R===d||s<T)return R;P=R+1}else{if(!(v>s))throw new zn("Input is not a number.");k=R-1}return 0}class Ta{constructor(s,d,v){this.type=s,this.input=d,this.labels=[],this.outputs=[];for(const[T,P]of v)this.labels.push(T),this.outputs.push(P)}static parse(s,d){if(s.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return d.error("Expected an even number of arguments.");const v=d.parse(s[1],1,Fe);if(!v)return null;const T=[];let P=null;d.expectedType&&d.expectedType.kind!=="value"&&(P=d.expectedType);for(let k=1;k<s.length;k+=2){const R=k===1?-1/0:s[k],U=s[k+1],Z=k,J=k+1;if(typeof R!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(T.length&&T[T.length-1][0]>=R)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Z);const st=d.parse(U,J,P);if(!st)return null;P=P||st.type,T.push([R,st])}return new Ta(P,v,T)}evaluate(s){const d=this.labels,v=this.outputs;if(d.length===1)return v[0].evaluate(s);const T=this.input.evaluate(s);if(T<=d[0])return v[0].evaluate(s);const P=d.length;return T>=d[P-1]?v[P-1].evaluate(s):v[$i(d,T)].evaluate(s)}eachChild(s){s(this.input);for(const d of this.outputs)s(d)}outputDefined(){return this.outputs.every((s=>s.outputDefined()))}}function Bn(c,s,d){return c+d*(s-c)}function il(c,s,d){return c.map(((v,T)=>Bn(v,s[T],d)))}const Ra={number:Bn,color:function(c,s,d,v="rgb"){switch(v){case"rgb":{const[T,P,k,R]=il(c.rgb,s.rgb,d);return new Qn(T,P,k,R,!1)}case"hcl":{const[T,P,k,R]=c.hcl,[U,Z,J,st]=s.hcl;let ut,gt;if(isNaN(T)||isNaN(U))isNaN(T)?isNaN(U)?ut=NaN:(ut=U,k!==1&&k!==0||(gt=Z)):(ut=T,J!==1&&J!==0||(gt=P));else{let Jt=U-T;U>T&&Jt>180?Jt-=360:U<T&&T-U>180&&(Jt+=360),ut=T+d*Jt}const[yt,Et,It,Vt]=(function([Jt,Ht,ee,ne]){return Jt=isNaN(Jt)?0:Jt*_n,Ti([ee,Math.cos(Jt)*Ht,Math.sin(Jt)*Ht,ne])})([ut,gt??Bn(P,Z,d),Bn(k,J,d),Bn(R,st,d)]);return new Qn(yt,Et,It,Vt,!1)}case"lab":{const[T,P,k,R]=Ti(il(c.lab,s.lab,d));return new Qn(T,P,k,R,!1)}}},array:il,padding:function(c,s,d){return new ba(il(c.values,s.values,d))},variableAnchorOffsetCollection:function(c,s,d){const v=c.values,T=s.values;if(v.length!==T.length)throw new zn(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${s.toString()}`);const P=[];for(let k=0;k<v.length;k+=2){if(v[k]!==T[k])throw new zn(`Cannot interpolate values containing mismatched anchors. from[${k}]: ${v[k]}, to[${k}]: ${T[k]}`);P.push(v[k]);const[R,U]=v[k+1],[Z,J]=T[k+1];P.push([Bn(R,Z,d),Bn(U,J,d)])}return new Pn(P)}};class Oi{constructor(s,d,v,T,P){this.type=s,this.operator=d,this.interpolation=v,this.input=T,this.labels=[],this.outputs=[];for(const[k,R]of P)this.labels.push(k),this.outputs.push(R)}static interpolationFactor(s,d,v,T){let P=0;if(s.name==="exponential")P=Cs(d,s.base,v,T);else if(s.name==="linear")P=Cs(d,1,v,T);else if(s.name==="cubic-bezier"){const k=s.controlPoints;P=new q(k[0],k[1],k[2],k[3]).solve(Cs(d,1,v,T))}return P}static parse(s,d){let[v,T,P,...k]=s;if(!Array.isArray(T)||T.length===0)return d.error("Expected an interpolation type expression.",1);if(T[0]==="linear")T={name:"linear"};else if(T[0]==="exponential"){const Z=T[1];if(typeof Z!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);T={name:"exponential",base:Z}}else{if(T[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(T[0])}`,1,0);{const Z=T.slice(1);if(Z.length!==4||Z.some((J=>typeof J!="number"||J<0||J>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);T={name:"cubic-bezier",controlPoints:Z}}}if(s.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(P=d.parse(P,2,Fe),!P)return null;const R=[];let U=null;v==="interpolate-hcl"||v==="interpolate-lab"?U=Mr:d.expectedType&&d.expectedType.kind!=="value"&&(U=d.expectedType);for(let Z=0;Z<k.length;Z+=2){const J=k[Z],st=k[Z+1],ut=Z+3,gt=Z+4;if(typeof J!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ut);if(R.length&&R[R.length-1][0]>=J)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ut);const yt=d.parse(st,gt,U);if(!yt)return null;U=U||yt.type,R.push([J,yt])}return _e(U,Fe)||_e(U,Mr)||_e(U,lt)||_e(U,bt)||_e(U,Dt(Fe))?new Oi(U,v,T,P,R):d.error(`Type ${zt(U)} is not interpolatable.`)}evaluate(s){const d=this.labels,v=this.outputs;if(d.length===1)return v[0].evaluate(s);const T=this.input.evaluate(s);if(T<=d[0])return v[0].evaluate(s);const P=d.length;if(T>=d[P-1])return v[P-1].evaluate(s);const k=$i(d,T),R=Oi.interpolationFactor(this.interpolation,T,d[k],d[k+1]),U=v[k].evaluate(s),Z=v[k+1].evaluate(s);switch(this.operator){case"interpolate":return Ra[this.type.kind](U,Z,R);case"interpolate-hcl":return Ra.color(U,Z,R,"hcl");case"interpolate-lab":return Ra.color(U,Z,R,"lab")}}eachChild(s){s(this.input);for(const d of this.outputs)s(d)}outputDefined(){return this.outputs.every((s=>s.outputDefined()))}}function Cs(c,s,d,v){const T=v-d,P=c-d;return T===0?0:s===1?P/T:(Math.pow(s,P)-1)/(Math.pow(s,T)-1)}class Cl{constructor(s,d){this.type=s,this.args=d}static parse(s,d){if(s.length<2)return d.error("Expectected at least one argument.");let v=null;const T=d.expectedType;T&&T.kind!=="value"&&(v=T);const P=[];for(const R of s.slice(1)){const U=d.parse(R,1+P.length,v,void 0,{typeAnnotation:"omit"});if(!U)return null;v=v||U.type,P.push(U)}if(!v)throw new Error("No output type");const k=T&&P.some((R=>Zt(T,R.type)));return new Cl(k?bn:v,P)}evaluate(s){let d,v=null,T=0;for(const P of this.args)if(T++,v=P.evaluate(s),v&&v instanceof Rn&&!v.available&&(d||(d=v.name),v=null,T===this.args.length&&(v=d)),v!==null)break;return v}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every((s=>s.outputDefined()))}}class ko{constructor(s,d){this.type=d.type,this.bindings=[].concat(s),this.result=d}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const d of this.bindings)s(d[1]);s(this.result)}static parse(s,d){if(s.length<4)return d.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const v=[];for(let P=1;P<s.length-1;P+=2){const k=s[P];if(typeof k!="string")return d.error(`Expected string, but found ${typeof k} instead.`,P);if(/[^a-zA-Z0-9_]/.test(k))return d.error("Variable names must contain only alphanumeric characters or '_'.",P);const R=d.parse(s[P+1],P+1);if(!R)return null;v.push([k,R])}const T=d.parse(s[s.length-1],s.length-1,d.expectedType,v);return T?new ko(v,T):null}outputDefined(){return this.result.outputDefined()}}class Jn{constructor(s,d,v){this.type=s,this.index=d,this.input=v}static parse(s,d){if(s.length!==3)return d.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const v=d.parse(s[1],1,Fe),T=d.parse(s[2],2,Dt(d.expectedType||bn));return v&&T?new Jn(T.type.itemType,v,T):null}evaluate(s){const d=this.index.evaluate(s),v=this.input.evaluate(s);if(d<0)throw new zn(`Array index out of bounds: ${d} < 0.`);if(d>=v.length)throw new zn(`Array index out of bounds: ${d} > ${v.length-1}.`);if(d!==Math.floor(d))throw new zn(`Array index must be an integer, but found ${d} instead.`);return v[d]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class zu{constructor(s,d){this.type=wn,this.needle=s,this.haystack=d}static parse(s,d){if(s.length!==3)return d.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const v=d.parse(s[1],1,bn),T=d.parse(s[2],2,bn);return v&&T?Ut(v.type,[wn,Dn,Fe,fr,bn])?new zu(v,T):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${zt(v.type)} instead`):null}evaluate(s){const d=this.needle.evaluate(s),v=this.haystack.evaluate(s);if(!v)return!1;if(!Xt(d,["boolean","string","number","null"]))throw new zn(`Expected first argument to be of type boolean, string, number or null, but found ${zt(mi(d))} instead.`);if(!Xt(v,["string","array"]))throw new zn(`Expected second argument to be of type array or string, but found ${zt(mi(v))} instead.`);return v.indexOf(d)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class ra{constructor(s,d,v){this.type=Fe,this.needle=s,this.haystack=d,this.fromIndex=v}static parse(s,d){if(s.length<=2||s.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const v=d.parse(s[1],1,bn),T=d.parse(s[2],2,bn);if(!v||!T)return null;if(!Ut(v.type,[wn,Dn,Fe,fr,bn]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${zt(v.type)} instead`);if(s.length===4){const P=d.parse(s[3],3,Fe);return P?new ra(v,T,P):null}return new ra(v,T)}evaluate(s){const d=this.needle.evaluate(s),v=this.haystack.evaluate(s);if(!Xt(d,["boolean","string","number","null"]))throw new zn(`Expected first argument to be of type boolean, string, number or null, but found ${zt(mi(d))} instead.`);if(!Xt(v,["string","array"]))throw new zn(`Expected second argument to be of type array or string, but found ${zt(mi(v))} instead.`);if(this.fromIndex){const T=this.fromIndex.evaluate(s);return v.indexOf(d,T)}return v.indexOf(d)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class Ps{constructor(s,d,v,T,P,k){this.inputType=s,this.type=d,this.input=v,this.cases=T,this.outputs=P,this.otherwise=k}static parse(s,d){if(s.length<5)return d.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return d.error("Expected an even number of arguments.");let v,T;d.expectedType&&d.expectedType.kind!=="value"&&(T=d.expectedType);const P={},k=[];for(let Z=2;Z<s.length-1;Z+=2){let J=s[Z];const st=s[Z+1];Array.isArray(J)||(J=[J]);const ut=d.concat(Z);if(J.length===0)return ut.error("Expected at least one branch label.");for(const yt of J){if(typeof yt!="number"&&typeof yt!="string")return ut.error("Branch labels must be numbers or strings.");if(typeof yt=="number"&&Math.abs(yt)>Number.MAX_SAFE_INTEGER)return ut.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof yt=="number"&&Math.floor(yt)!==yt)return ut.error("Numeric branch labels must be integer values.");if(v){if(ut.checkSubtype(v,mi(yt)))return null}else v=mi(yt);if(P[String(yt)]!==void 0)return ut.error("Branch labels must be unique.");P[String(yt)]=k.length}const gt=d.parse(st,Z,T);if(!gt)return null;T=T||gt.type,k.push(gt)}const R=d.parse(s[1],1,bn);if(!R)return null;const U=d.parse(s[s.length-1],s.length-1,T);return U?R.type.kind!=="value"&&d.concat(1).checkSubtype(v,R.type)?null:new Ps(v,T,R,P,k,U):null}evaluate(s){const d=this.input.evaluate(s);return(mi(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every((s=>s.outputDefined()))&&this.otherwise.outputDefined()}}class Pl{constructor(s,d,v){this.type=s,this.branches=d,this.otherwise=v}static parse(s,d){if(s.length<4)return d.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return d.error("Expected an odd number of arguments.");let v;d.expectedType&&d.expectedType.kind!=="value"&&(v=d.expectedType);const T=[];for(let k=1;k<s.length-1;k+=2){const R=d.parse(s[k],k,wn);if(!R)return null;const U=d.parse(s[k+1],k+1,v);if(!U)return null;T.push([R,U]),v=v||U.type}const P=d.parse(s[s.length-1],s.length-1,v);if(!P)return null;if(!v)throw new Error("Can't infer output type");return new Pl(v,T,P)}evaluate(s){for(const[d,v]of this.branches)if(d.evaluate(s))return v.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[d,v]of this.branches)s(d),s(v);s(this.otherwise)}outputDefined(){return this.branches.every((([s,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}}class Lu{constructor(s,d,v,T){this.type=s,this.input=d,this.beginIndex=v,this.endIndex=T}static parse(s,d){if(s.length<=2||s.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const v=d.parse(s[1],1,bn),T=d.parse(s[2],2,Fe);if(!v||!T)return null;if(!Ut(v.type,[Dt(bn),Dn,bn]))return d.error(`Expected first argument to be of type array or string, but found ${zt(v.type)} instead`);if(s.length===4){const P=d.parse(s[3],3,Fe);return P?new Lu(v.type,v,T,P):null}return new Lu(v.type,v,T)}evaluate(s){const d=this.input.evaluate(s),v=this.beginIndex.evaluate(s);if(!Xt(d,["string","array"]))throw new zn(`Expected first argument to be of type array or string, but found ${zt(mi(d))} instead.`);if(this.endIndex){const T=this.endIndex.evaluate(s);return d.slice(v,T)}return d.slice(v)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function gc(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Kh(c,s,d,v){return v.compare(s,d)===0}function kl(c,s,d){const v=c!=="=="&&c!=="!=";return class jR{constructor(P,k,R){this.type=wn,this.lhs=P,this.rhs=k,this.collator=R,this.hasUntypedArgument=P.type.kind==="value"||k.type.kind==="value"}static parse(P,k){if(P.length!==3&&P.length!==4)return k.error("Expected two or three arguments.");const R=P[0];let U=k.parse(P[1],1,bn);if(!U)return null;if(!gc(R,U.type))return k.concat(1).error(`"${R}" comparisons are not supported for type '${zt(U.type)}'.`);let Z=k.parse(P[2],2,bn);if(!Z)return null;if(!gc(R,Z.type))return k.concat(2).error(`"${R}" comparisons are not supported for type '${zt(Z.type)}'.`);if(U.type.kind!==Z.type.kind&&U.type.kind!=="value"&&Z.type.kind!=="value")return k.error(`Cannot compare types '${zt(U.type)}' and '${zt(Z.type)}'.`);v&&(U.type.kind==="value"&&Z.type.kind!=="value"?U=new Sa(Z.type,[U]):U.type.kind!=="value"&&Z.type.kind==="value"&&(Z=new Sa(U.type,[Z])));let J=null;if(P.length===4){if(U.type.kind!=="string"&&Z.type.kind!=="string"&&U.type.kind!=="value"&&Z.type.kind!=="value")return k.error("Cannot use collator to compare non-string types.");if(J=k.parse(P[3],3,xa),!J)return null}return new jR(U,Z,J)}evaluate(P){const k=this.lhs.evaluate(P),R=this.rhs.evaluate(P);if(v&&this.hasUntypedArgument){const U=mi(k),Z=mi(R);if(U.kind!==Z.kind||U.kind!=="string"&&U.kind!=="number")throw new zn(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${U.kind}, ${Z.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const U=mi(k),Z=mi(R);if(U.kind!=="string"||Z.kind!=="string")return s(P,k,R)}return this.collator?d(P,k,R,this.collator.evaluate(P)):s(P,k,R)}eachChild(P){P(this.lhs),P(this.rhs),this.collator&&P(this.collator)}outputDefined(){return!0}}}const Gc=kl("==",(function(c,s,d){return s===d}),Kh),Hf=kl("!=",(function(c,s,d){return s!==d}),(function(c,s,d,v){return!Kh(0,s,d,v)})),Wc=kl("<",(function(c,s,d){return s<d}),(function(c,s,d,v){return v.compare(s,d)<0})),Zf=kl(">",(function(c,s,d){return s>d}),(function(c,s,d,v){return v.compare(s,d)>0})),Js=kl("<=",(function(c,s,d){return s<=d}),(function(c,s,d,v){return v.compare(s,d)<=0})),Gf=kl(">=",(function(c,s,d){return s>=d}),(function(c,s,d,v){return v.compare(s,d)>=0}));class Iu{constructor(s,d,v,T,P){this.type=Dn,this.number=s,this.locale=d,this.currency=v,this.minFractionDigits=T,this.maxFractionDigits=P}static parse(s,d){if(s.length!==3)return d.error("Expected two arguments.");const v=d.parse(s[1],1,Fe);if(!v)return null;const T=s[2];if(typeof T!="object"||Array.isArray(T))return d.error("NumberFormat options argument must be an object.");let P=null;if(T.locale&&(P=d.parse(T.locale,1,Dn),!P))return null;let k=null;if(T.currency&&(k=d.parse(T.currency,1,Dn),!k))return null;let R=null;if(T["min-fraction-digits"]&&(R=d.parse(T["min-fraction-digits"],1,Fe),!R))return null;let U=null;return T["max-fraction-digits"]&&(U=d.parse(T["max-fraction-digits"],1,Fe),!U)?null:new Iu(v,P,k,R,U)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class ks{constructor(s){this.type=kt,this.sections=s}static parse(s,d){if(s.length<2)return d.error("Expected at least one argument.");const v=s[1];if(!Array.isArray(v)&&typeof v=="object")return d.error("First argument must be an image or text section.");const T=[];let P=!1;for(let k=1;k<=s.length-1;++k){const R=s[k];if(P&&typeof R=="object"&&!Array.isArray(R)){P=!1;let U=null;if(R["font-scale"]&&(U=d.parse(R["font-scale"],1,Fe),!U))return null;let Z=null;if(R["text-font"]&&(Z=d.parse(R["text-font"],1,Dt(Dn)),!Z))return null;let J=null;if(R["text-color"]&&(J=d.parse(R["text-color"],1,Mr),!J))return null;const st=T[T.length-1];st.scale=U,st.font=Z,st.textColor=J}else{const U=d.parse(s[k],1,bn);if(!U)return null;const Z=U.type.kind;if(Z!=="string"&&Z!=="value"&&Z!=="null"&&Z!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,T.push({content:U,scale:null,font:null,textColor:null})}}return new ks(T)}evaluate(s){return new Fr(this.sections.map((d=>{const v=d.content.evaluate(s);return mi(v)===dt?new tl("",v,null,null,null):new tl(ni(v),null,d.scale?d.scale.evaluate(s):null,d.font?d.font.evaluate(s).join(","):null,d.textColor?d.textColor.evaluate(s):null)})))}eachChild(s){for(const d of this.sections)s(d.content),d.scale&&s(d.scale),d.font&&s(d.font),d.textColor&&s(d.textColor)}outputDefined(){return!1}}class yc{constructor(s){this.type=dt,this.input=s}static parse(s,d){if(s.length!==2)return d.error("Expected two arguments.");const v=d.parse(s[1],1,Dn);return v?new yc(v):d.error("No image name provided.")}evaluate(s){const d=this.input.evaluate(s),v=Rn.fromString(d);return v&&s.availableImages&&(v.available=s.availableImages.indexOf(d)>-1),v}eachChild(s){s(this.input)}outputDefined(){return!1}}class _c{constructor(s){this.type=Fe,this.input=s}static parse(s,d){if(s.length!==2)return d.error(`Expected 1 argument, but found ${s.length-1} instead.`);const v=d.parse(s[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${zt(v.type)} instead.`):new _c(v):null}evaluate(s){const d=this.input.evaluate(s);if(typeof d=="string"||Array.isArray(d))return d.length;throw new zn(`Expected value to be of type string or array, but found ${zt(mi(d))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const rl={"==":Gc,"!=":Hf,">":Zf,"<":Wc,">=":Gf,"<=":Js,array:Sa,at:Jn,boolean:Sa,case:Pl,coalesce:Cl,collator:Es,format:ks,image:yc,in:zu,"index-of":ra,interpolate:Oi,"interpolate-hcl":Oi,"interpolate-lab":Oi,length:_c,let:ko,literal:Tn,match:Ps,number:Sa,"number-format":Iu,object:Sa,slice:Lu,step:Ta,string:Sa,"to-boolean":Xs,"to-color":Xs,"to-number":Xs,"to-string":Xs,var:Ks,within:Po};function vc(c,[s,d,v,T]){s=s.evaluate(c),d=d.evaluate(c),v=v.evaluate(c);const P=T?T.evaluate(c):1,k=wa(s,d,v,P);if(k)throw new zn(k);return new Qn(s/255,d/255,v/255,P,!1)}function Yc(c,s){return c in s}function xc(c,s){const d=s[c];return d===void 0?null:d}function Ol(c){return{type:c}}function Xc(c){return{result:"success",value:c}}function to(c){return{result:"error",value:c}}function nu(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function Kc(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function bc(c){return!!c.expression&&c.expression.interpolated}function ti(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function yi(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function Wf(c){return c}function Nn(c,s){const d=s.type==="color",v=c.stops&&typeof c.stops[0][0]=="object",T=v||!(v||c.property!==void 0),P=c.type||(bc(s)?"exponential":"interval");if(d||s.type==="padding"){const J=d?Qn.parse:ba.parse;(c=hr({},c)).stops&&(c.stops=c.stops.map((st=>[st[0],J(st[1])]))),c.default=J(c.default?c.default:s.default)}if(c.colorSpace&&(k=c.colorSpace)!=="rgb"&&k!=="hcl"&&k!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var k;let R,U,Z;if(P==="exponential")R=Ru;else if(P==="interval")R=_i;else if(P==="categorical"){R=Di,U=Object.create(null);for(const J of c.stops)U[J[0]]=J[1];Z=typeof c.stops[0][0]}else{if(P!=="identity")throw new Error(`Unknown function type "${P}"`);R=Bu}if(v){const J={},st=[];for(let yt=0;yt<c.stops.length;yt++){const Et=c.stops[yt],It=Et[0].zoom;J[It]===void 0&&(J[It]={zoom:It,type:c.type,property:c.property,default:c.default,stops:[]},st.push(It)),J[It].stops.push([Et[0].value,Et[1]])}const ut=[];for(const yt of st)ut.push([J[yt].zoom,Nn(J[yt],s)]);const gt={name:"linear"};return{kind:"composite",interpolationType:gt,interpolationFactor:Oi.interpolationFactor.bind(void 0,gt),zoomStops:ut.map((yt=>yt[0])),evaluate:({zoom:yt},Et)=>Ru({stops:ut,base:c.base},s,yt).evaluate(yt,Et)}}if(T){const J=P==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:J,interpolationFactor:Oi.interpolationFactor.bind(void 0,J),zoomStops:c.stops.map((st=>st[0])),evaluate:({zoom:st})=>R(c,s,st,U,Z)}}return{kind:"source",evaluate(J,st){const ut=st&&st.properties?st.properties[c.property]:void 0;return ut===void 0?Ur(c.default,s.default):R(c,s,ut,U,Z)}}}function Ur(c,s,d){return c!==void 0?c:s!==void 0?s:d!==void 0?d:void 0}function Di(c,s,d,v,T){return Ur(typeof d===T?v[d]:void 0,c.default,s.default)}function _i(c,s,d){if(ti(d)!=="number")return Ur(c.default,s.default);const v=c.stops.length;if(v===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[v-1][0])return c.stops[v-1][1];const T=$i(c.stops.map((P=>P[0])),d);return c.stops[T][1]}function Ru(c,s,d){const v=c.base!==void 0?c.base:1;if(ti(d)!=="number")return Ur(c.default,s.default);const T=c.stops.length;if(T===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[T-1][0])return c.stops[T-1][1];const P=$i(c.stops.map((J=>J[0])),d),k=(function(J,st,ut,gt){const yt=gt-ut,Et=J-ut;return yt===0?0:st===1?Et/yt:(Math.pow(st,Et)-1)/(Math.pow(st,yt)-1)})(d,v,c.stops[P][0],c.stops[P+1][0]),R=c.stops[P][1],U=c.stops[P+1][1],Z=Ra[s.type]||Wf;return typeof R.evaluate=="function"?{evaluate(...J){const st=R.evaluate.apply(void 0,J),ut=U.evaluate.apply(void 0,J);if(st!==void 0&&ut!==void 0)return Z(st,ut,k,c.colorSpace)}}:Z(R,U,k,c.colorSpace)}function Bu(c,s,d){switch(s.type){case"color":d=Qn.parse(d);break;case"formatted":d=Fr.fromString(d.toString());break;case"resolvedImage":d=Rn.fromString(d.toString());break;case"padding":d=ba.parse(d);break;default:ti(d)===s.type||s.type==="enum"&&s.values[d]||(d=void 0)}return Ur(d,c.default,s.default)}rr.register(rl,{error:[{kind:"error"},[Dn],(c,[s])=>{throw new zn(s.evaluate(c))}],typeof:[Dn,[bn],(c,[s])=>zt(mi(s.evaluate(c)))],"to-rgba":[Dt(Fe,4),[Mr],(c,[s])=>{const[d,v,T,P]=s.evaluate(c).rgb;return[255*d,255*v,255*T,P]}],rgb:[Mr,[Fe,Fe,Fe],vc],rgba:[Mr,[Fe,Fe,Fe,Fe],vc],has:{type:wn,overloads:[[[Dn],(c,[s])=>Yc(s.evaluate(c),c.properties())],[[Dn,za],(c,[s,d])=>Yc(s.evaluate(c),d.evaluate(c))]]},get:{type:bn,overloads:[[[Dn],(c,[s])=>xc(s.evaluate(c),c.properties())],[[Dn,za],(c,[s,d])=>xc(s.evaluate(c),d.evaluate(c))]]},"feature-state":[bn,[Dn],(c,[s])=>xc(s.evaluate(c),c.featureState||{})],properties:[za,[],c=>c.properties()],"geometry-type":[Dn,[],c=>c.geometryType()],id:[bn,[],c=>c.id()],zoom:[Fe,[],c=>c.globals.zoom],"heatmap-density":[Fe,[],c=>c.globals.heatmapDensity||0],"line-progress":[Fe,[],c=>c.globals.lineProgress||0],accumulated:[bn,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Fe,Ol(Fe),(c,s)=>{let d=0;for(const v of s)d+=v.evaluate(c);return d}],"*":[Fe,Ol(Fe),(c,s)=>{let d=1;for(const v of s)d*=v.evaluate(c);return d}],"-":{type:Fe,overloads:[[[Fe,Fe],(c,[s,d])=>s.evaluate(c)-d.evaluate(c)],[[Fe],(c,[s])=>-s.evaluate(c)]]},"/":[Fe,[Fe,Fe],(c,[s,d])=>s.evaluate(c)/d.evaluate(c)],"%":[Fe,[Fe,Fe],(c,[s,d])=>s.evaluate(c)%d.evaluate(c)],ln2:[Fe,[],()=>Math.LN2],pi:[Fe,[],()=>Math.PI],e:[Fe,[],()=>Math.E],"^":[Fe,[Fe,Fe],(c,[s,d])=>Math.pow(s.evaluate(c),d.evaluate(c))],sqrt:[Fe,[Fe],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[Fe,[Fe],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[Fe,[Fe],(c,[s])=>Math.log(s.evaluate(c))],log2:[Fe,[Fe],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[Fe,[Fe],(c,[s])=>Math.sin(s.evaluate(c))],cos:[Fe,[Fe],(c,[s])=>Math.cos(s.evaluate(c))],tan:[Fe,[Fe],(c,[s])=>Math.tan(s.evaluate(c))],asin:[Fe,[Fe],(c,[s])=>Math.asin(s.evaluate(c))],acos:[Fe,[Fe],(c,[s])=>Math.acos(s.evaluate(c))],atan:[Fe,[Fe],(c,[s])=>Math.atan(s.evaluate(c))],min:[Fe,Ol(Fe),(c,s)=>Math.min(...s.map((d=>d.evaluate(c))))],max:[Fe,Ol(Fe),(c,s)=>Math.max(...s.map((d=>d.evaluate(c))))],abs:[Fe,[Fe],(c,[s])=>Math.abs(s.evaluate(c))],round:[Fe,[Fe],(c,[s])=>{const d=s.evaluate(c);return d<0?-Math.round(-d):Math.round(d)}],floor:[Fe,[Fe],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[Fe,[Fe],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[wn,[Dn,bn],(c,[s,d])=>c.properties()[s.value]===d.value],"filter-id-==":[wn,[bn],(c,[s])=>c.id()===s.value],"filter-type-==":[wn,[Dn],(c,[s])=>c.geometryType()===s.value],"filter-<":[wn,[Dn,bn],(c,[s,d])=>{const v=c.properties()[s.value],T=d.value;return typeof v==typeof T&&v<T}],"filter-id-<":[wn,[bn],(c,[s])=>{const d=c.id(),v=s.value;return typeof d==typeof v&&d<v}],"filter->":[wn,[Dn,bn],(c,[s,d])=>{const v=c.properties()[s.value],T=d.value;return typeof v==typeof T&&v>T}],"filter-id->":[wn,[bn],(c,[s])=>{const d=c.id(),v=s.value;return typeof d==typeof v&&d>v}],"filter-<=":[wn,[Dn,bn],(c,[s,d])=>{const v=c.properties()[s.value],T=d.value;return typeof v==typeof T&&v<=T}],"filter-id-<=":[wn,[bn],(c,[s])=>{const d=c.id(),v=s.value;return typeof d==typeof v&&d<=v}],"filter->=":[wn,[Dn,bn],(c,[s,d])=>{const v=c.properties()[s.value],T=d.value;return typeof v==typeof T&&v>=T}],"filter-id->=":[wn,[bn],(c,[s])=>{const d=c.id(),v=s.value;return typeof d==typeof v&&d>=v}],"filter-has":[wn,[bn],(c,[s])=>s.value in c.properties()],"filter-has-id":[wn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[wn,[Dt(Dn)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[wn,[Dt(bn)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[wn,[Dn,Dt(bn)],(c,[s,d])=>d.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[wn,[Dn,Dt(bn)],(c,[s,d])=>(function(v,T,P,k){for(;P<=k;){const R=P+k>>1;if(T[R]===v)return!0;T[R]>v?k=R-1:P=R+1}return!1})(c.properties()[s.value],d.value,0,d.value.length-1)],all:{type:wn,overloads:[[[wn,wn],(c,[s,d])=>s.evaluate(c)&&d.evaluate(c)],[Ol(wn),(c,s)=>{for(const d of s)if(!d.evaluate(c))return!1;return!0}]]},any:{type:wn,overloads:[[[wn,wn],(c,[s,d])=>s.evaluate(c)||d.evaluate(c)],[Ol(wn),(c,s)=>{for(const d of s)if(d.evaluate(c))return!0;return!1}]]},"!":[wn,[wn],(c,[s])=>!s.evaluate(c)],"is-supported-script":[wn,[Dn],(c,[s])=>{const d=c.globals&&c.globals.isSupportedScript;return!d||d(s.evaluate(c))}],upcase:[Dn,[Dn],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[Dn,[Dn],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[Dn,Ol(bn),(c,s)=>s.map((d=>ni(d.evaluate(c)))).join("")],"resolved-locale":[Dn,[xa],(c,[s])=>s.evaluate(c).resolvedLocale()]});class iu{constructor(s,d){var v;this.expression=s,this._warningHistory={},this._evaluator=new As,this._defaultValue=d?(v=d).type==="color"&&yi(v.default)?new Qn(0,0,0,0):v.type==="color"?Qn.parse(v.default)||null:v.type==="padding"?ba.parse(v.default)||null:v.type==="variableAnchorOffsetCollection"?Pn.parse(v.default)||null:v.default===void 0?null:v.default:null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(s,d,v,T,P,k){return this._evaluator.globals=s,this._evaluator.feature=d,this._evaluator.featureState=v,this._evaluator.canonical=T,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)}evaluate(s,d,v,T,P,k){this._evaluator.globals=s,this._evaluator.feature=d||null,this._evaluator.featureState=v||null,this._evaluator.canonical=T,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=k||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new zn(`Expected value to be one of ${Object.keys(this._enumValues).map((U=>JSON.stringify(U))).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(R.message)),this._defaultValue}}}function Nu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in rl}function ju(c,s){const d=new Ai(rl,nl,[],s?(function(T){const P={color:Mr,string:Dn,number:Fe,enum:Dn,boolean:wn,formatted:kt,padding:lt,resolvedImage:dt,variableAnchorOffsetCollection:bt};return T.type==="array"?Dt(P[T.value]||bn,T.length):P[T.type]})(s):void 0),v=d.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Xc(new iu(v,s)):to(d.errors)}class Fu{constructor(s,d){this.kind=s,this._styleExpression=d,this.isStateDependent=s!=="constant"&&!Ia(d.expression)}evaluateWithoutErrorHandling(s,d,v,T,P,k){return this._styleExpression.evaluateWithoutErrorHandling(s,d,v,T,P,k)}evaluate(s,d,v,T,P,k){return this._styleExpression.evaluate(s,d,v,T,P,k)}}class Oo{constructor(s,d,v,T){this.kind=s,this.zoomStops=v,this._styleExpression=d,this.isStateDependent=s!=="camera"&&!Ia(d.expression),this.interpolationType=T}evaluateWithoutErrorHandling(s,d,v,T,P,k){return this._styleExpression.evaluateWithoutErrorHandling(s,d,v,T,P,k)}evaluate(s,d,v,T,P,k){return this._styleExpression.evaluate(s,d,v,T,P,k)}interpolationFactor(s,d,v){return this.interpolationType?Oi.interpolationFactor(this.interpolationType,s,d,v):0}}function Qa(c,s){const d=ju(c,s);if(d.result==="error")return d;const v=d.value.expression,T=La(v);if(!T&&!nu(s))return to([new Un("","data expressions not supported")]);const P=Qs(v,["zoom"]);if(!P&&!Kc(s))return to([new Un("","zoom expressions not supported")]);const k=Uu(v);return k||P?k instanceof Un?to([k]):k instanceof Oi&&!bc(s)?to([new Un("",'"interpolate" expressions cannot be used with this property')]):Xc(k?new Oo(T?"camera":"composite",d.value,k.labels,k instanceof Oi?k.interpolation:void 0):new Fu(T?"constant":"source",d.value)):to([new Un("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class eo{constructor(s,d){this._parameters=s,this._specification=d,hr(this,Nn(this._parameters,this._specification))}static deserialize(s){return new eo(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Uu(c){let s=null;if(c instanceof ko)s=Uu(c.result);else if(c instanceof Cl){for(const d of c.args)if(s=Uu(d),s)break}else(c instanceof Ta||c instanceof Oi)&&c.input instanceof rr&&c.input.name==="zoom"&&(s=c);return s instanceof Un||c.eachChild((d=>{const v=Uu(d);v instanceof Un?s=v:!s&&v?s=new Un("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&v&&s!==v&&(s=new Un("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),s}function Ba(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!Ba(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const Qh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ps(c){if(c==null)return{filter:()=>!0,needGeometry:!1};Ba(c)||(c=al(c));const s=ju(c,Qh);if(s.result==="error")throw new Error(s.value.map((d=>`${d.key}: ${d.message}`)).join(", "));return{filter:(d,v,T)=>s.value.evaluate(d,v,{},T),needGeometry:ru(c)}}function Vu(c,s){return c<s?-1:c>s?1:0}function ru(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let s=1;s<c.length;s++)if(ru(c[s]))return!0;return!1}function al(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?Dl(c[1],c[2],"=="):s==="!="?no(Dl(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Dl(c[1],c[2],s):s==="any"?(d=c.slice(1),["any"].concat(d.map(al))):s==="all"?["all"].concat(c.slice(1).map(al)):s==="none"?["all"].concat(c.slice(1).map(al).map(no)):s==="in"?Qc(c[1],c.slice(2)):s==="!in"?no(Qc(c[1],c.slice(2))):s==="has"?Os(c[1]):s==="!has"?no(Os(c[1])):s!=="within"||c;var d}function Dl(c,s,d){switch(c){case"$type":return[`filter-type-${d}`,s];case"$id":return[`filter-id-${d}`,s];default:return[`filter-${d}`,c,s]}}function Qc(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some((d=>typeof d!=typeof s[0]))?["filter-in-large",c,["literal",s.sort(Vu)]]:["filter-in-small",c,["literal",s]]}}function Os(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function no(c){return["!",c]}function $u(c){const s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let T="[";for(const P of c)T+=`${$u(P)},`;return`${T}]`}const d=Object.keys(c).sort();let v="{";for(let T=0;T<d.length;T++)v+=`${JSON.stringify(d[T])}:${$u(c[d[T]])},`;return`${v}}`}function zl(c){let s="";for(const d of ki)s+=`/${$u(c[d])}`;return s}function Jc(c){const s=c.value;return s?[new Be(c.key,s,"constants have been deprecated as of v8")]:[]}function ui(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Ll(c){if(Array.isArray(c))return c.map(Ll);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const d in c)s[d]=Ll(c[d]);return s}return ui(c)}function Er(c){const s=c.key,d=c.value,v=c.valueSpec||{},T=c.objectElementValidators||{},P=c.style,k=c.styleSpec,R=c.validateSpec;let U=[];const Z=ti(d);if(Z!=="object")return[new Be(s,d,`object expected, ${Z} found`)];for(const J in d){const st=J.split(".")[0],ut=v[st]||v["*"];let gt;if(T[st])gt=T[st];else if(v[st])gt=R;else if(T["*"])gt=T["*"];else{if(!v["*"]){U.push(new Be(s,d[J],`unknown property "${J}"`));continue}gt=R}U=U.concat(gt({key:(s&&`${s}.`)+J,value:d[J],valueSpec:ut,style:P,styleSpec:k,object:d,objectKey:J,validateSpec:R},d))}for(const J in v)T[J]||v[J].required&&v[J].default===void 0&&d[J]===void 0&&U.push(new Be(s,d,`missing required property "${J}"`));return U}function au(c){const s=c.value,d=c.valueSpec,v=c.style,T=c.styleSpec,P=c.key,k=c.arrayElementValidator||c.validateSpec;if(ti(s)!=="array")return[new Be(P,s,`array expected, ${ti(s)} found`)];if(d.length&&s.length!==d.length)return[new Be(P,s,`array length ${d.length} expected, length ${s.length} found`)];if(d["min-length"]&&s.length<d["min-length"])return[new Be(P,s,`array length at least ${d["min-length"]} expected, length ${s.length} found`)];let R={type:d.value,values:d.values};T.$version<7&&(R.function=d.function),ti(d.value)==="object"&&(R=d.value);let U=[];for(let Z=0;Z<s.length;Z++)U=U.concat(k({array:s,arrayIndex:Z,value:s[Z],valueSpec:R,validateSpec:c.validateSpec,style:v,styleSpec:T,key:`${P}[${Z}]`}));return U}function Ja(c){const s=c.key,d=c.value,v=c.valueSpec;let T=ti(d);return T==="number"&&d!=d&&(T="NaN"),T!=="number"?[new Be(s,d,`number expected, ${T} found`)]:"minimum"in v&&d<v.minimum?[new Be(s,d,`${d} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&d>v.maximum?[new Be(s,d,`${d} is greater than the maximum value ${v.maximum}`)]:[]}function Cr(c){const s=c.valueSpec,d=ui(c.value.type);let v,T,P,k={};const R=d!=="categorical"&&c.value.property===void 0,U=!R,Z=ti(c.value.stops)==="array"&&ti(c.value.stops[0])==="array"&&ti(c.value.stops[0][0])==="object",J=Er({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(gt){if(d==="identity")return[new Be(gt.key,gt.value,'identity function may not have a "stops" property')];let yt=[];const Et=gt.value;return yt=yt.concat(au({key:gt.key,value:Et,valueSpec:gt.valueSpec,validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec,arrayElementValidator:st})),ti(Et)==="array"&&Et.length===0&&yt.push(new Be(gt.key,Et,"array must have at least one stop")),yt},default:function(gt){return gt.validateSpec({key:gt.key,value:gt.value,valueSpec:s,validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec})}}});return d==="identity"&&R&&J.push(new Be(c.key,c.value,'missing required property "property"')),d==="identity"||c.value.stops||J.push(new Be(c.key,c.value,'missing required property "stops"')),d==="exponential"&&c.valueSpec.expression&&!bc(c.valueSpec)&&J.push(new Be(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(U&&!nu(c.valueSpec)?J.push(new Be(c.key,c.value,"property functions not supported")):R&&!Kc(c.valueSpec)&&J.push(new Be(c.key,c.value,"zoom functions not supported"))),d!=="categorical"&&!Z||c.value.property!==void 0||J.push(new Be(c.key,c.value,'"property" property is required')),J;function st(gt){let yt=[];const Et=gt.value,It=gt.key;if(ti(Et)!=="array")return[new Be(It,Et,`array expected, ${ti(Et)} found`)];if(Et.length!==2)return[new Be(It,Et,`array length 2 expected, length ${Et.length} found`)];if(Z){if(ti(Et[0])!=="object")return[new Be(It,Et,`object expected, ${ti(Et[0])} found`)];if(Et[0].zoom===void 0)return[new Be(It,Et,"object stop key must have zoom")];if(Et[0].value===void 0)return[new Be(It,Et,"object stop key must have value")];if(P&&P>ui(Et[0].zoom))return[new Be(It,Et[0].zoom,"stop zoom values must appear in ascending order")];ui(Et[0].zoom)!==P&&(P=ui(Et[0].zoom),T=void 0,k={}),yt=yt.concat(Er({key:`${It}[0]`,value:Et[0],valueSpec:{zoom:{}},validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec,objectElementValidators:{zoom:Ja,value:ut}}))}else yt=yt.concat(ut({key:`${It}[0]`,value:Et[0],validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec},Et));return Nu(Ll(Et[1]))?yt.concat([new Be(`${It}[1]`,Et[1],"expressions are not allowed in function stops.")]):yt.concat(gt.validateSpec({key:`${It}[1]`,value:Et[1],valueSpec:s,validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec}))}function ut(gt,yt){const Et=ti(gt.value),It=ui(gt.value),Vt=gt.value!==null?gt.value:yt;if(v){if(Et!==v)return[new Be(gt.key,Vt,`${Et} stop domain type must match previous stop domain type ${v}`)]}else v=Et;if(Et!=="number"&&Et!=="string"&&Et!=="boolean")return[new Be(gt.key,Vt,"stop domain value must be a number, string, or boolean")];if(Et!=="number"&&d!=="categorical"){let Jt=`number expected, ${Et} found`;return nu(s)&&d===void 0&&(Jt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Be(gt.key,Vt,Jt)]}return d!=="categorical"||Et!=="number"||isFinite(It)&&Math.floor(It)===It?d!=="categorical"&&Et==="number"&&T!==void 0&&It<T?[new Be(gt.key,Vt,"stop domain values must appear in ascending order")]:(T=It,d==="categorical"&&It in k?[new Be(gt.key,Vt,"stop domain values must be unique")]:(k[It]=!0,[])):[new Be(gt.key,Vt,`integer expected, found ${It}`)]}}function ms(c){const s=(c.expressionContext==="property"?Qa:ju)(Ll(c.value),c.valueSpec);if(s.result==="error")return s.value.map((v=>new Be(`${c.key}${v.key}`,c.value,v.message)));const d=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!d.outputDefined())return[new Be(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Ia(d))return[new Be(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Ia(d))return[new Be(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Qs(d,["zoom","feature-state"]))return[new Be(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!La(d))return[new Be(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function sl(c){const s=c.key,d=c.value,v=c.valueSpec,T=[];return Array.isArray(v.values)?v.values.indexOf(ui(d))===-1&&T.push(new Be(s,d,`expected one of [${v.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(v.values).indexOf(ui(d))===-1&&T.push(new Be(s,d,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(d)} found`)),T}function io(c){return Ba(Ll(c.value))?ms(hr({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):qu(c)}function qu(c){const s=c.value,d=c.key;if(ti(s)!=="array")return[new Be(d,s,`array expected, ${ti(s)} found`)];const v=c.styleSpec;let T,P=[];if(s.length<1)return[new Be(d,s,"filter array must have at least 1 element")];switch(P=P.concat(sl({key:`${d}[0]`,value:s[0],valueSpec:v.filter_operator,style:c.style,styleSpec:c.styleSpec})),ui(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&ui(s[1])==="$type"&&P.push(new Be(d,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&P.push(new Be(d,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(T=ti(s[1]),T!=="string"&&P.push(new Be(`${d}[1]`,s[1],`string expected, ${T} found`)));for(let k=2;k<s.length;k++)T=ti(s[k]),ui(s[1])==="$type"?P=P.concat(sl({key:`${d}[${k}]`,value:s[k],valueSpec:v.geometry_type,style:c.style,styleSpec:c.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&P.push(new Be(`${d}[${k}]`,s[k],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let k=1;k<s.length;k++)P=P.concat(qu({key:`${d}[${k}]`,value:s[k],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":T=ti(s[1]),s.length!==2?P.push(new Be(d,s,`filter array for "${s[0]}" operator must have 2 elements`)):T!=="string"&&P.push(new Be(`${d}[1]`,s[1],`string expected, ${T} found`));break;case"within":T=ti(s[1]),s.length!==2?P.push(new Be(d,s,`filter array for "${s[0]}" operator must have 2 elements`)):T!=="object"&&P.push(new Be(`${d}[1]`,s[1],`object expected, ${T} found`))}return P}function su(c,s){const d=c.key,v=c.validateSpec,T=c.style,P=c.styleSpec,k=c.value,R=c.objectKey,U=P[`${s}_${c.layerType}`];if(!U)return[];const Z=R.match(/^(.*)-transition$/);if(s==="paint"&&Z&&U[Z[1]]&&U[Z[1]].transition)return v({key:d,value:k,valueSpec:P.transition,style:T,styleSpec:P});const J=c.valueSpec||U[R];if(!J)return[new Be(d,k,`unknown property "${R}"`)];let st;if(ti(k)==="string"&&nu(J)&&!J.tokens&&(st=/^{([^}]+)}$/.exec(k)))return[new Be(d,k,`"${R}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(st[1])} }\`.`)];const ut=[];return c.layerType==="symbol"&&(R==="text-field"&&T&&!T.glyphs&&ut.push(new Be(d,k,'use of "text-field" requires a style "glyphs" property')),R==="text-font"&&yi(Ll(k))&&ui(k.type)==="identity"&&ut.push(new Be(d,k,'"text-font" does not support identity functions'))),ut.concat(v({key:c.key,value:k,valueSpec:J,style:T,styleSpec:P,expressionContext:"property",propertyType:s,propertyKey:R}))}function Do(c){return su(c,"paint")}function Hu(c){return su(c,"layout")}function zo(c){let s=[];const d=c.value,v=c.key,T=c.style,P=c.styleSpec;d.type||d.ref||s.push(new Be(v,d,'either "type" or "ref" is required'));let k=ui(d.type);const R=ui(d.ref);if(d.id){const U=ui(d.id);for(let Z=0;Z<c.arrayIndex;Z++){const J=T.layers[Z];ui(J.id)===U&&s.push(new Be(v,d.id,`duplicate layer id "${d.id}", previously used at line ${J.id.__line__}`))}}if("ref"in d){let U;["type","source","source-layer","filter","layout"].forEach((Z=>{Z in d&&s.push(new Be(v,d[Z],`"${Z}" is prohibited for ref layers`))})),T.layers.forEach((Z=>{ui(Z.id)===R&&(U=Z)})),U?U.ref?s.push(new Be(v,d.ref,"ref cannot reference another ref layer")):k=ui(U.type):s.push(new Be(v,d.ref,`ref layer "${R}" not found`))}else if(k!=="background")if(d.source){const U=T.sources&&T.sources[d.source],Z=U&&ui(U.type);U?Z==="vector"&&k==="raster"?s.push(new Be(v,d.source,`layer "${d.id}" requires a raster source`)):Z!=="raster-dem"&&k==="hillshade"?s.push(new Be(v,d.source,`layer "${d.id}" requires a raster-dem source`)):Z==="raster"&&k!=="raster"?s.push(new Be(v,d.source,`layer "${d.id}" requires a vector source`)):Z!=="vector"||d["source-layer"]?Z==="raster-dem"&&k!=="hillshade"?s.push(new Be(v,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):k!=="line"||!d.paint||!d.paint["line-gradient"]||Z==="geojson"&&U.lineMetrics||s.push(new Be(v,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Be(v,d,`layer "${d.id}" must specify a "source-layer"`)):s.push(new Be(v,d.source,`source "${d.source}" not found`))}else s.push(new Be(v,d,'missing required property "source"'));return s=s.concat(Er({key:v,value:d,valueSpec:P.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${v}.type`,value:d.type,valueSpec:P.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:d,objectKey:"type"}),filter:io,layout:U=>Er({layer:d,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":Z=>Hu(hr({layerType:k},Z))}}),paint:U=>Er({layer:d,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":Z=>Do(hr({layerType:k},Z))}})}})),s}function ts(c){const s=c.value,d=c.key,v=ti(s);return v!=="string"?[new Be(d,s,`string expected, ${v} found`)]:[]}const Lo={promoteId:function({key:c,value:s}){if(ti(s)==="string")return ts({key:c,value:s});{const d=[];for(const v in s)d.push(...ts({key:`${c}.${v}`,value:s[v]}));return d}}};function Vr(c){const s=c.value,d=c.key,v=c.styleSpec,T=c.style,P=c.validateSpec;if(!s.type)return[new Be(d,s,'"type" is required')];const k=ui(s.type);let R;switch(k){case"vector":case"raster":return R=Er({key:d,value:s,valueSpec:v[`source_${k.replace("-","_")}`],style:c.style,styleSpec:v,objectElementValidators:Lo,validateSpec:P}),R;case"raster-dem":return R=(function(U){var Z;const J=(Z=U.sourceName)!==null&&Z!==void 0?Z:"",st=U.value,ut=U.styleSpec,gt=ut.source_raster_dem,yt=U.style;let Et=[];const It=ti(st);if(st===void 0)return Et;if(It!=="object")return Et.push(new Be("source_raster_dem",st,`object expected, ${It} found`)),Et;const Vt=ui(st.encoding)==="custom",Jt=["redFactor","greenFactor","blueFactor","baseShift"],Ht=U.value.encoding?`"${U.value.encoding}"`:"Default";for(const ee in st)!Vt&&Jt.includes(ee)?Et.push(new Be(ee,st[ee],`In "${J}": "${ee}" is only valid when "encoding" is set to "custom". ${Ht} encoding found`)):gt[ee]?Et=Et.concat(U.validateSpec({key:ee,value:st[ee],valueSpec:gt[ee],validateSpec:U.validateSpec,style:yt,styleSpec:ut})):Et.push(new Be(ee,st[ee],`unknown property "${ee}"`));return Et})({sourceName:d,value:s,style:c.style,styleSpec:v,validateSpec:P}),R;case"geojson":if(R=Er({key:d,value:s,valueSpec:v.source_geojson,style:T,styleSpec:v,validateSpec:P,objectElementValidators:Lo}),s.cluster)for(const U in s.clusterProperties){const[Z,J]=s.clusterProperties[U],st=typeof Z=="string"?[Z,["accumulated"],["get",U]]:Z;R.push(...ms({key:`${d}.${U}.map`,value:J,expressionContext:"cluster-map"})),R.push(...ms({key:`${d}.${U}.reduce`,value:st,expressionContext:"cluster-reduce"}))}return R;case"video":return Er({key:d,value:s,valueSpec:v.source_video,style:T,validateSpec:P,styleSpec:v});case"image":return Er({key:d,value:s,valueSpec:v.source_image,style:T,validateSpec:P,styleSpec:v});case"canvas":return[new Be(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return sl({key:`${d}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ou(c){const s=c.value,d=c.styleSpec,v=d.light,T=c.style;let P=[];const k=ti(s);if(s===void 0)return P;if(k!=="object")return P=P.concat([new Be("light",s,`object expected, ${k} found`)]),P;for(const R in s){const U=R.match(/^(.*)-transition$/);P=P.concat(U&&v[U[1]]&&v[U[1]].transition?c.validateSpec({key:R,value:s[R],valueSpec:d.transition,validateSpec:c.validateSpec,style:T,styleSpec:d}):v[R]?c.validateSpec({key:R,value:s[R],valueSpec:v[R],validateSpec:c.validateSpec,style:T,styleSpec:d}):[new Be(R,s[R],`unknown property "${R}"`)])}return P}function Io(c){const s=c.value,d=c.styleSpec,v=d.terrain,T=c.style;let P=[];const k=ti(s);if(s===void 0)return P;if(k!=="object")return P=P.concat([new Be("terrain",s,`object expected, ${k} found`)]),P;for(const R in s)P=P.concat(v[R]?c.validateSpec({key:R,value:s[R],valueSpec:v[R],validateSpec:c.validateSpec,style:T,styleSpec:d}):[new Be(R,s[R],`unknown property "${R}"`)]);return P}function Il(c){let s=[];const d=c.value,v=c.key;if(Array.isArray(d)){const T=[],P=[];for(const k in d)d[k].id&&T.includes(d[k].id)&&s.push(new Be(v,d,`all the sprites' ids must be unique, but ${d[k].id} is duplicated`)),T.push(d[k].id),d[k].url&&P.includes(d[k].url)&&s.push(new Be(v,d,`all the sprites' URLs must be unique, but ${d[k].url} is duplicated`)),P.push(d[k].url),s=s.concat(Er({key:`${v}[${k}]`,value:d[k],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return ts({key:v,value:d})}const Zu={"*":()=>[],array:au,boolean:function(c){const s=c.value,d=c.key,v=ti(s);return v!=="boolean"?[new Be(d,s,`boolean expected, ${v} found`)]:[]},number:Ja,color:function(c){const s=c.key,d=c.value,v=ti(d);return v!=="string"?[new Be(s,d,`color expected, ${v} found`)]:Qn.parse(String(d))?[]:[new Be(s,d,`color expected, "${d}" found`)]},constants:Jc,enum:sl,filter:io,function:Cr,layer:zo,object:Er,source:Vr,light:ou,terrain:Io,string:ts,formatted:function(c){return ts(c).length===0?[]:ms(c)},resolvedImage:function(c){return ts(c).length===0?[]:ms(c)},padding:function(c){const s=c.key,d=c.value;if(ti(d)==="array"){if(d.length<1||d.length>4)return[new Be(s,d,`padding requires 1 to 4 values; ${d.length} values found`)];const v={type:"number"};let T=[];for(let P=0;P<d.length;P++)T=T.concat(c.validateSpec({key:`${s}[${P}]`,value:d[P],validateSpec:c.validateSpec,valueSpec:v}));return T}return Ja({key:s,value:d,valueSpec:{}})},variableAnchorOffsetCollection:function(c){const s=c.key,d=c.value,v=ti(d),T=c.styleSpec;if(v!=="array"||d.length<1||d.length%2!=0)return[new Be(s,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let P=[];for(let k=0;k<d.length;k+=2)P=P.concat(sl({key:`${s}[${k}]`,value:d[k],valueSpec:T.layout_symbol["text-anchor"]})),P=P.concat(au({key:`${s}[${k+1}]`,value:d[k+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:T}));return P},sprite:Il};function Ro(c){const s=c.value,d=c.valueSpec,v=c.styleSpec;return c.validateSpec=Ro,d.expression&&yi(ui(s))?Cr(c):d.expression&&Nu(Ll(s))?ms(c):d.type&&Zu[d.type]?Zu[d.type](c):Er(hr({},c,{valueSpec:d.type?v[d.type]:d}))}function Wr(c){const s=c.value,d=c.key,v=ts(c);return v.length||(s.indexOf("{fontstack}")===-1&&v.push(new Be(d,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&v.push(new Be(d,s,'"glyphs" url must include a "{range}" token'))),v}function aa(c,s=me){let d=[];return d=d.concat(Ro({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:Ro,objectElementValidators:{glyphs:Wr,"*":()=>[]}})),c.constants&&(d=d.concat(Jc({key:"constants",value:c.constants}))),ol(d)}function ro(c){return function(s){return c({...s,validateSpec:Ro})}}function ol(c){return[].concat(c).sort(((s,d)=>s.line-d.line))}function Bo(c){return function(...s){return ol(c.apply(this,s))}}aa.source=Bo(ro(Vr)),aa.sprite=Bo(ro(Il)),aa.glyphs=Bo(ro(Wr)),aa.light=Bo(ro(ou)),aa.terrain=Bo(ro(Io)),aa.layer=Bo(ro(zo)),aa.filter=Bo(ro(io)),aa.paintProperty=Bo(ro(Do)),aa.layoutProperty=Bo(ro(Hu));const ao=aa,Yf=ao.light,ll=ao.paintProperty,th=ao.layoutProperty;function Ds(c,s){let d=!1;if(s&&s.length)for(const v of s)c.fire(new rn(new Error(v.message))),d=!0;return d}class Yr{constructor(s,d,v){const T=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const k=new Int32Array(this.arrayBuffer);s=k[0],this.d=(d=k[1])+2*(v=k[2]);for(let U=0;U<this.d*this.d;U++){const Z=k[3+U],J=k[3+U+1];T.push(Z===J?null:k.subarray(Z,J))}const R=k[3+T.length+1];this.keys=k.subarray(k[3+T.length],R),this.bboxes=k.subarray(R),this.insert=this._insertReadonly}else{this.d=d+2*v;for(let k=0;k<this.d*this.d;k++)T.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=s,this.padding=v,this.scale=d/s,this.uid=0;const P=v/d*s;this.min=-P,this.max=s+P}insert(s,d,v,T,P){this._forEachCell(d,v,T,P,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(T),this.bboxes.push(P)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,d,v,T,P,k){this.cells[P].push(k)}query(s,d,v,T,P){const k=this.min,R=this.max;if(s<=k&&d<=k&&R<=v&&R<=T&&!P)return Array.prototype.slice.call(this.keys);{const U=[];return this._forEachCell(s,d,v,T,this._queryCell,U,{},P),U}}_queryCell(s,d,v,T,P,k,R,U){const Z=this.cells[P];if(Z!==null){const J=this.keys,st=this.bboxes;for(let ut=0;ut<Z.length;ut++){const gt=Z[ut];if(R[gt]===void 0){const yt=4*gt;(U?U(st[yt+0],st[yt+1],st[yt+2],st[yt+3]):s<=st[yt+2]&&d<=st[yt+3]&&v>=st[yt+0]&&T>=st[yt+1])?(R[gt]=!0,k.push(J[gt])):R[gt]=!1}}}}_forEachCell(s,d,v,T,P,k,R,U){const Z=this._convertToCellCoord(s),J=this._convertToCellCoord(d),st=this._convertToCellCoord(v),ut=this._convertToCellCoord(T);for(let gt=Z;gt<=st;gt++)for(let yt=J;yt<=ut;yt++){const Et=this.d*yt+gt;if((!U||U(this._convertFromCellCoord(gt),this._convertFromCellCoord(yt),this._convertFromCellCoord(gt+1),this._convertFromCellCoord(yt+1)))&&P.call(this,s,d,v,T,Et,k,R,U))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,d=3+this.cells.length+1+1;let v=0;for(let k=0;k<this.cells.length;k++)v+=this.cells[k].length;const T=new Int32Array(d+v+this.keys.length+this.bboxes.length);T[0]=this.extent,T[1]=this.n,T[2]=this.padding;let P=d;for(let k=0;k<s.length;k++){const R=s[k];T[3+k]=P,T.set(R,P),P+=R.length}return T[3+s.length]=P,T.set(this.keys,P),P+=this.keys.length,T[3+s.length+1]=P,T.set(this.bboxes,P),P+=this.bboxes.length,T.buffer}static serialize(s,d){const v=s.toArrayBuffer();return d&&d.push(v),{buffer:v}}static deserialize(s){return new Yr(s.buffer)}}const es={};function Ze(c,s,d={}){if(es[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),es[c]={klass:s,omit:d.omit||[],shallow:d.shallow||[]}}Ze("Object",Object),Ze("TransferableGridIndex",Yr),Ze("Color",Qn),Ze("Error",Error),Ze("AJAXError",Ie),Ze("ResolvedImage",Rn),Ze("StylePropertyFunction",eo),Ze("StyleExpression",iu,{omit:["_evaluator"]}),Ze("ZoomDependentExpression",Oo),Ze("ZoomConstantExpression",Fu),Ze("CompoundExpression",rr,{omit:["_evaluate"]});for(const c in rl)rl[c]._classRegistryKey||Ze(`Expression_${c}`,rl[c]);function Xr(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function zs(c,s){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(Xr(c)||Ft(c))return s&&s.push(c),c;if(ArrayBuffer.isView(c)){const d=c;return s&&s.push(d.buffer),d}if(c instanceof ImageData)return s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const d=[];for(const v of c)d.push(zs(v,s));return d}if(typeof c=="object"){const d=c.constructor,v=d._classRegistryKey;if(!v)throw new Error("can't serialize object of unregistered class");if(!es[v])throw new Error(`${v} is not registered.`);const T=d.serialize?d.serialize(c,s):{};if(d.serialize){if(s&&T===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const P in c){if(!c.hasOwnProperty(P)||es[v].omit.indexOf(P)>=0)continue;const k=c[P];T[P]=es[v].shallow.indexOf(P)>=0?k:zs(k,s)}c instanceof Error&&(T.message=c.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return v!=="Object"&&(T.$name=v),T}throw new Error("can't serialize object of type "+typeof c)}function so(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||Xr(c)||Ft(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(so);if(typeof c=="object"){const s=c.$name||"Object";if(!es[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:d}=es[s];if(!d)throw new Error(`can't deserialize unregistered class ${s}`);if(d.deserialize)return d.deserialize(c);const v=Object.create(d.prototype);for(const T of Object.keys(c)){if(T==="$name")continue;const P=c[T];v[T]=es[s].shallow.indexOf(T)>=0?P:so(P)}return v}throw new Error("can't deserialize object of type "+typeof c)}class No{constructor(){this.first=!0}update(s,d){const v=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=d),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=v,!0))}}const Ye={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function gs(c){for(const s of c)if(jo(s.charCodeAt(0)))return!0;return!1}function ul(c){for(const s of c)if(!Gu(s.charCodeAt(0)))return!1;return!0}function Gu(c){return!(Ye.Arabic(c)||Ye["Arabic Supplement"](c)||Ye["Arabic Extended-A"](c)||Ye["Arabic Presentation Forms-A"](c)||Ye["Arabic Presentation Forms-B"](c))}function jo(c){return!(c!==746&&c!==747&&(c<4352||!(Ye["Bopomofo Extended"](c)||Ye.Bopomofo(c)||Ye["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Ye["CJK Compatibility Ideographs"](c)||Ye["CJK Compatibility"](c)||Ye["CJK Radicals Supplement"](c)||Ye["CJK Strokes"](c)||!(!Ye["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Ye["CJK Unified Ideographs Extension A"](c)||Ye["CJK Unified Ideographs"](c)||Ye["Enclosed CJK Letters and Months"](c)||Ye["Hangul Compatibility Jamo"](c)||Ye["Hangul Jamo Extended-A"](c)||Ye["Hangul Jamo Extended-B"](c)||Ye["Hangul Jamo"](c)||Ye["Hangul Syllables"](c)||Ye.Hiragana(c)||Ye["Ideographic Description Characters"](c)||Ye.Kanbun(c)||Ye["Kangxi Radicals"](c)||Ye["Katakana Phonetic Extensions"](c)||Ye.Katakana(c)&&c!==12540||!(!Ye["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Ye["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Ye["Unified Canadian Aboriginal Syllabics"](c)||Ye["Unified Canadian Aboriginal Syllabics Extended"](c)||Ye["Vertical Forms"](c)||Ye["Yijing Hexagram Symbols"](c)||Ye["Yi Syllables"](c)||Ye["Yi Radicals"](c))))}function Jh(c){return!(jo(c)||(function(s){return!!(Ye["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Ye["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Ye["Letterlike Symbols"](s)||Ye["Number Forms"](s)||Ye["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Ye["Control Pictures"](s)&&s!==9251||Ye["Optical Character Recognition"](s)||Ye["Enclosed Alphanumerics"](s)||Ye["Geometric Shapes"](s)||Ye["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Ye["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Ye["CJK Symbols and Punctuation"](s)||Ye.Katakana(s)||Ye["Private Use Area"](s)||Ye["CJK Compatibility Forms"](s)||Ye["Small Form Variants"](s)||Ye["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)})(c))}function Ma(c){return c>=1424&&c<=2303||Ye["Arabic Presentation Forms-A"](c)||Ye["Arabic Presentation Forms-B"](c)}function Wu(c,s){return!(!s&&Ma(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Ye.Khmer(c))}function oo(c){for(const s of c)if(Ma(s.charCodeAt(0)))return!0;return!1}const Yu="deferred",Rl="loading",Fo="loaded";let lu=null,sa="unavailable",lo=null;const p=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(sa="error"),lu&&lu(c)};function w(){D.fire(new On("pluginStateChange",{pluginStatus:sa,pluginURL:lo}))}const D=new In,V=function(){return sa},nt=function(){if(sa!==Yu||!lo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");sa=Rl,w(),lo&&nn({url:lo},(c=>{c?p(c):(sa=Fo,w())}))},mt={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>sa===Fo||mt.applyArabicShaping!=null,isLoading:()=>sa===Rl,setState(c){if(!Pt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");sa=c.pluginStatus,lo=c.pluginURL},isParsed(){if(!Pt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return mt.applyArabicShaping!=null&&mt.processBidirectionalText!=null&&mt.processStyledBidirectionalText!=null},getPluginURL(){if(!Pt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return lo}};class Lt{constructor(s,d){this.zoom=s,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new No,this.transition={})}isSupportedScript(s){return(function(d,v){for(const T of d)if(!Wu(T.charCodeAt(0),v))return!1;return!0})(s,mt.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,d=s-Math.floor(s),v=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*d}}}class ae{constructor(s,d){this.property=s,this.value=d,this.expression=(function(v,T){if(yi(v))return new eo(v,T);if(Nu(v)){const P=Qa(v,T);if(P.result==="error")throw new Error(P.value.map((k=>`${k.key}: ${k.message}`)).join(", "));return P.value}{let P=v;return T.type==="color"&&typeof v=="string"?P=Qn.parse(v):T.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?T.type==="variableAnchorOffsetCollection"&&Array.isArray(v)&&(P=Pn.parse(v)):P=ba.parse(v),{kind:"constant",evaluate:()=>P}}})(d===void 0?s.specification.default:d,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,d,v){return this.property.possiblyEvaluate(this,s,d,v)}}class fe{constructor(s){this.property=s,this.value=new ae(s,void 0)}transitioned(s,d){return new Qe(this.property,this.value,d,ot({},s.transition,this.transition),s.now)}untransitioned(){return new Qe(this.property,this.value,null,{},0)}}class Ce{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return Ct(this._values[s].value.value)}setValue(s,d){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new fe(this._values[s].property)),this._values[s].value=new ae(this._values[s].property,d===null?void 0:Ct(d))}getTransition(s){return Ct(this._values[s].transition)}setTransition(s,d){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new fe(this._values[s].property)),this._values[s].transition=Ct(d)||void 0}serialize(){const s={};for(const d of Object.keys(this._values)){const v=this.getValue(d);v!==void 0&&(s[d]=v);const T=this.getTransition(d);T!==void 0&&(s[`${d}-transition`]=T)}return s}transitioned(s,d){const v=new yn(this._properties);for(const T of Object.keys(this._values))v._values[T]=this._values[T].transitioned(s,d._values[T]);return v}untransitioned(){const s=new yn(this._properties);for(const d of Object.keys(this._values))s._values[d]=this._values[d].untransitioned();return s}}class Qe{constructor(s,d,v,T,P){this.property=s,this.value=d,this.begin=P+T.delay||0,this.end=this.begin+T.duration||0,s.specification.transition&&(T.delay||T.duration)&&(this.prior=v)}possiblyEvaluate(s,d,v){const T=s.now||0,P=this.value.possiblyEvaluate(s,d,v),k=this.prior;if(k){if(T>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(T<this.begin)return k.possiblyEvaluate(s,d,v);{const R=(T-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(s,d,v),P,(function(U){if(U<=0)return 0;if(U>=1)return 1;const Z=U*U,J=Z*U;return 4*(U<.5?J:3*(U-Z)+J-.75)})(R))}}return P}}class yn{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,d,v){const T=new Qi(this._properties);for(const P of Object.keys(this._values))T._values[P]=this._values[P].possiblyEvaluate(s,d,v);return T}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class $n{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return Ct(this._values[s].value)}setValue(s,d){this._values[s]=new ae(this._values[s].property,d===null?void 0:Ct(d))}serialize(){const s={};for(const d of Object.keys(this._values)){const v=this.getValue(d);v!==void 0&&(s[d]=v)}return s}possiblyEvaluate(s,d,v){const T=new Qi(this._properties);for(const P of Object.keys(this._values))T._values[P]=this._values[P].possiblyEvaluate(s,d,v);return T}}class ci{constructor(s,d,v){this.property=s,this.value=d,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,d,v,T){return this.property.evaluate(this.value,this.parameters,s,d,v,T)}}class Qi{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Je{constructor(s){this.specification=s}possiblyEvaluate(s,d){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(d)}interpolate(s,d,v){const T=Ra[this.specification.type];return T?T(s,d,v):s}}class Ge{constructor(s,d){this.specification=s,this.overrides=d}possiblyEvaluate(s,d,v,T){return new ci(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(d,null,{},v,T)}:s.expression,d)}interpolate(s,d,v){if(s.value.kind!=="constant"||d.value.kind!=="constant")return s;if(s.value.value===void 0||d.value.value===void 0)return new ci(this,{kind:"constant",value:void 0},s.parameters);const T=Ra[this.specification.type];if(T){const P=T(s.value.value,d.value.value,v);return new ci(this,{kind:"constant",value:P},s.parameters)}return s}evaluate(s,d,v,T,P,k){return s.kind==="constant"?s.value:s.evaluate(d,v,T,P,k)}}class ri extends Ge{possiblyEvaluate(s,d,v,T){if(s.value===void 0)return new ci(this,{kind:"constant",value:void 0},d);if(s.expression.kind==="constant"){const P=s.expression.evaluate(d,null,{},v,T),k=s.property.specification.type==="resolvedImage"&&typeof P!="string"?P.name:P,R=this._calculate(k,k,k,d);return new ci(this,{kind:"constant",value:R},d)}if(s.expression.kind==="camera"){const P=this._calculate(s.expression.evaluate({zoom:d.zoom-1}),s.expression.evaluate({zoom:d.zoom}),s.expression.evaluate({zoom:d.zoom+1}),d);return new ci(this,{kind:"constant",value:P},d)}return new ci(this,s.expression,d)}evaluate(s,d,v,T,P,k){if(s.kind==="source"){const R=s.evaluate(d,v,T,P,k);return this._calculate(R,R,R,d)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(d.zoom)-1},v,T),s.evaluate({zoom:Math.floor(d.zoom)},v,T),s.evaluate({zoom:Math.floor(d.zoom)+1},v,T),d):s.value}_calculate(s,d,v,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:s,to:d}:{from:v,to:d}}interpolate(s){return s}}class Xn{constructor(s){this.specification=s}possiblyEvaluate(s,d,v,T){if(s.value!==void 0){if(s.expression.kind==="constant"){const P=s.expression.evaluate(d,null,{},v,T);return this._calculate(P,P,P,d)}return this._calculate(s.expression.evaluate(new Lt(Math.floor(d.zoom-1),d)),s.expression.evaluate(new Lt(Math.floor(d.zoom),d)),s.expression.evaluate(new Lt(Math.floor(d.zoom+1),d)),d)}}_calculate(s,d,v,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:s,to:d}:{from:v,to:d}}interpolate(s){return s}}class uo{constructor(s){this.specification=s}possiblyEvaluate(s,d,v,T){return!!s.expression.evaluate(d,null,{},v,T)}interpolate(){return!1}}class oi{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in s){const v=s[d];v.specification.overridable&&this.overridableProperties.push(d);const T=this.defaultPropertyValues[d]=new ae(v,void 0),P=this.defaultTransitionablePropertyValues[d]=new fe(v);this.defaultTransitioningPropertyValues[d]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=T.possiblyEvaluate({})}}}Ze("DataDrivenProperty",Ge),Ze("DataConstantProperty",Je),Ze("CrossFadedDataDrivenProperty",ri),Ze("CrossFadedProperty",Xn),Ze("ColorRampProperty",uo);const uu="-transition";class Pr extends In{constructor(s,d){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),d.layout&&(this._unevaluatedLayout=new $n(d.layout)),d.paint)){this._transitionablePaint=new Ce(d.paint);for(const v in s.paint)this.setPaintProperty(v,s.paint[v],{validate:!1});for(const v in s.layout)this.setLayoutProperty(v,s.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qi(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,d,v={}){d!=null&&this._validate(th,`layers.${this.id}.layout.${s}`,s,d,v)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,d):this.visibility=d)}getPaintProperty(s){return s.endsWith(uu)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,d,v={}){if(d!=null&&this._validate(ll,`layers.${this.id}.paint.${s}`,s,d,v))return!1;if(s.endsWith(uu))return this._transitionablePaint.setTransition(s.slice(0,-11),d||void 0),!1;{const T=this._transitionablePaint._values[s],P=T.property.specification["property-type"]==="cross-faded-data-driven",k=T.value.isDataDriven(),R=T.value;this._transitionablePaint.setValue(s,d),this._handleSpecialPaintPropertyUpdate(s);const U=this._transitionablePaint._values[s].value;return U.isDataDriven()||k||P||this._handleOverridablePaintPropertyUpdate(s,R,U)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,d,v){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,d){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,d)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),wt(s,((d,v)=>!(d===void 0||v==="layout"&&!Object.keys(d).length||v==="paint"&&!Object.keys(d).length)))}_validate(s,d,v,T,P={}){return(!P||P.validate!==!1)&&Ds(this,s.call(ao,{key:d,layerType:this.type,objectKey:v,value:T,styleSpec:me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const d=this.paint.get(s);if(d instanceof ci&&nu(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const wc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zi{constructor(s,d){this._structArray=s,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class hi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,d){return s._trim(),d&&(s.isTransferred=!0,d.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const d=Object.create(this.prototype);return d.arrayBuffer=s.arrayBuffer,d.length=s.length,d.capacity=s.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function vi(c,s=1){let d=0,v=0;return{members:c.map((T=>{const P=wc[T.type].BYTES_PER_ELEMENT,k=d=cl(d,Math.max(s,P)),R=T.components||1;return v=Math.max(v,P),d+=P*R,{name:T.name,type:T.type,components:R,offset:k}})),size:cl(d,Math.max(v,s)),alignment:s}}function cl(c,s){return Math.ceil(c/s)*s}class Uo extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d){const v=this.length;return this.resize(v+1),this.emplace(v,s,d)}emplace(s,d,v){const T=2*s;return this.int16[T+0]=d,this.int16[T+1]=v,s}}Uo.prototype.bytesPerElement=4,Ze("StructArrayLayout2i4",Uo);class Vo extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,s,d,v)}emplace(s,d,v,T){const P=3*s;return this.int16[P+0]=d,this.int16[P+1]=v,this.int16[P+2]=T,s}}Vo.prototype.bytesPerElement=6,Ze("StructArrayLayout3i6",Vo);class Na extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v,T){const P=this.length;return this.resize(P+1),this.emplace(P,s,d,v,T)}emplace(s,d,v,T,P){const k=4*s;return this.int16[k+0]=d,this.int16[k+1]=v,this.int16[k+2]=T,this.int16[k+3]=P,s}}Na.prototype.bytesPerElement=8,Ze("StructArrayLayout4i8",Na);class Ls extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k){const R=this.length;return this.resize(R+1),this.emplace(R,s,d,v,T,P,k)}emplace(s,d,v,T,P,k,R){const U=6*s;return this.int16[U+0]=d,this.int16[U+1]=v,this.int16[U+2]=T,this.int16[U+3]=P,this.int16[U+4]=k,this.int16[U+5]=R,s}}Ls.prototype.bytesPerElement=12,Ze("StructArrayLayout2i4i12",Ls);class hl extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k){const R=this.length;return this.resize(R+1),this.emplace(R,s,d,v,T,P,k)}emplace(s,d,v,T,P,k,R){const U=4*s,Z=8*s;return this.int16[U+0]=d,this.int16[U+1]=v,this.uint8[Z+4]=T,this.uint8[Z+5]=P,this.uint8[Z+6]=k,this.uint8[Z+7]=R,s}}hl.prototype.bytesPerElement=8,Ze("StructArrayLayout2i4ub8",hl);class ys extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d){const v=this.length;return this.resize(v+1),this.emplace(v,s,d)}emplace(s,d,v){const T=2*s;return this.float32[T+0]=d,this.float32[T+1]=v,s}}ys.prototype.bytesPerElement=8,Ze("StructArrayLayout2f8",ys);class eh extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k,R,U,Z,J){const st=this.length;return this.resize(st+1),this.emplace(st,s,d,v,T,P,k,R,U,Z,J)}emplace(s,d,v,T,P,k,R,U,Z,J,st){const ut=10*s;return this.uint16[ut+0]=d,this.uint16[ut+1]=v,this.uint16[ut+2]=T,this.uint16[ut+3]=P,this.uint16[ut+4]=k,this.uint16[ut+5]=R,this.uint16[ut+6]=U,this.uint16[ut+7]=Z,this.uint16[ut+8]=J,this.uint16[ut+9]=st,s}}eh.prototype.bytesPerElement=20,Ze("StructArrayLayout10ui20",eh);class nh extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k,R,U,Z,J,st,ut){const gt=this.length;return this.resize(gt+1),this.emplace(gt,s,d,v,T,P,k,R,U,Z,J,st,ut)}emplace(s,d,v,T,P,k,R,U,Z,J,st,ut,gt){const yt=12*s;return this.int16[yt+0]=d,this.int16[yt+1]=v,this.int16[yt+2]=T,this.int16[yt+3]=P,this.uint16[yt+4]=k,this.uint16[yt+5]=R,this.uint16[yt+6]=U,this.uint16[yt+7]=Z,this.int16[yt+8]=J,this.int16[yt+9]=st,this.int16[yt+10]=ut,this.int16[yt+11]=gt,s}}nh.prototype.bytesPerElement=24,Ze("StructArrayLayout4i4ui4i24",nh);class ei extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,s,d,v)}emplace(s,d,v,T){const P=3*s;return this.float32[P+0]=d,this.float32[P+1]=v,this.float32[P+2]=T,s}}ei.prototype.bytesPerElement=12,Ze("StructArrayLayout3f12",ei);class E extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const d=this.length;return this.resize(d+1),this.emplace(d,s)}emplace(s,d){return this.uint32[1*s+0]=d,s}}E.prototype.bytesPerElement=4,Ze("StructArrayLayout1ul4",E);class l extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k,R,U,Z){const J=this.length;return this.resize(J+1),this.emplace(J,s,d,v,T,P,k,R,U,Z)}emplace(s,d,v,T,P,k,R,U,Z,J){const st=10*s,ut=5*s;return this.int16[st+0]=d,this.int16[st+1]=v,this.int16[st+2]=T,this.int16[st+3]=P,this.int16[st+4]=k,this.int16[st+5]=R,this.uint32[ut+3]=U,this.uint16[st+8]=Z,this.uint16[st+9]=J,s}}l.prototype.bytesPerElement=20,Ze("StructArrayLayout6i1ul2ui20",l);class m extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k){const R=this.length;return this.resize(R+1),this.emplace(R,s,d,v,T,P,k)}emplace(s,d,v,T,P,k,R){const U=6*s;return this.int16[U+0]=d,this.int16[U+1]=v,this.int16[U+2]=T,this.int16[U+3]=P,this.int16[U+4]=k,this.int16[U+5]=R,s}}m.prototype.bytesPerElement=12,Ze("StructArrayLayout2i2i2i12",m);class b extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P){const k=this.length;return this.resize(k+1),this.emplace(k,s,d,v,T,P)}emplace(s,d,v,T,P,k){const R=4*s,U=8*s;return this.float32[R+0]=d,this.float32[R+1]=v,this.float32[R+2]=T,this.int16[U+6]=P,this.int16[U+7]=k,s}}b.prototype.bytesPerElement=16,Ze("StructArrayLayout2f1f2i16",b);class M extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v,T){const P=this.length;return this.resize(P+1),this.emplace(P,s,d,v,T)}emplace(s,d,v,T,P){const k=12*s,R=3*s;return this.uint8[k+0]=d,this.uint8[k+1]=v,this.float32[R+1]=T,this.float32[R+2]=P,s}}M.prototype.bytesPerElement=12,Ze("StructArrayLayout2ub2f12",M);class C extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,s,d,v)}emplace(s,d,v,T){const P=3*s;return this.uint16[P+0]=d,this.uint16[P+1]=v,this.uint16[P+2]=T,s}}C.prototype.bytesPerElement=6,Ze("StructArrayLayout3ui6",C);class B extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k,R,U,Z,J,st,ut,gt,yt,Et,It,Vt){const Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,s,d,v,T,P,k,R,U,Z,J,st,ut,gt,yt,Et,It,Vt)}emplace(s,d,v,T,P,k,R,U,Z,J,st,ut,gt,yt,Et,It,Vt,Jt){const Ht=24*s,ee=12*s,ne=48*s;return this.int16[Ht+0]=d,this.int16[Ht+1]=v,this.uint16[Ht+2]=T,this.uint16[Ht+3]=P,this.uint32[ee+2]=k,this.uint32[ee+3]=R,this.uint32[ee+4]=U,this.uint16[Ht+10]=Z,this.uint16[Ht+11]=J,this.uint16[Ht+12]=st,this.float32[ee+7]=ut,this.float32[ee+8]=gt,this.uint8[ne+36]=yt,this.uint8[ne+37]=Et,this.uint8[ne+38]=It,this.uint32[ee+10]=Vt,this.int16[Ht+22]=Jt,s}}B.prototype.bytesPerElement=48,Ze("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",B);class j extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k,R,U,Z,J,st,ut,gt,yt,Et,It,Vt,Jt,Ht,ee,ne,Se,je,ln,Xe,We,Ue,en){const $e=this.length;return this.resize($e+1),this.emplace($e,s,d,v,T,P,k,R,U,Z,J,st,ut,gt,yt,Et,It,Vt,Jt,Ht,ee,ne,Se,je,ln,Xe,We,Ue,en)}emplace(s,d,v,T,P,k,R,U,Z,J,st,ut,gt,yt,Et,It,Vt,Jt,Ht,ee,ne,Se,je,ln,Xe,We,Ue,en,$e){const Re=32*s,pn=16*s;return this.int16[Re+0]=d,this.int16[Re+1]=v,this.int16[Re+2]=T,this.int16[Re+3]=P,this.int16[Re+4]=k,this.int16[Re+5]=R,this.int16[Re+6]=U,this.int16[Re+7]=Z,this.uint16[Re+8]=J,this.uint16[Re+9]=st,this.uint16[Re+10]=ut,this.uint16[Re+11]=gt,this.uint16[Re+12]=yt,this.uint16[Re+13]=Et,this.uint16[Re+14]=It,this.uint16[Re+15]=Vt,this.uint16[Re+16]=Jt,this.uint16[Re+17]=Ht,this.uint16[Re+18]=ee,this.uint16[Re+19]=ne,this.uint16[Re+20]=Se,this.uint16[Re+21]=je,this.uint16[Re+22]=ln,this.uint32[pn+12]=Xe,this.float32[pn+13]=We,this.float32[pn+14]=Ue,this.uint16[Re+30]=en,this.uint16[Re+31]=$e,s}}j.prototype.bytesPerElement=64,Ze("StructArrayLayout8i15ui1ul2f2ui64",j);class $ extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const d=this.length;return this.resize(d+1),this.emplace(d,s)}emplace(s,d){return this.float32[1*s+0]=d,s}}$.prototype.bytesPerElement=4,Ze("StructArrayLayout1f4",$);class Y extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,s,d,v)}emplace(s,d,v,T){const P=3*s;return this.uint16[6*s+0]=d,this.float32[P+1]=v,this.float32[P+2]=T,s}}Y.prototype.bytesPerElement=12,Ze("StructArrayLayout1ui2f12",Y);class et extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,s,d,v)}emplace(s,d,v,T){const P=4*s;return this.uint32[2*s+0]=d,this.uint16[P+2]=v,this.uint16[P+3]=T,s}}et.prototype.bytesPerElement=8,Ze("StructArrayLayout1ul2ui8",et);class it extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d){const v=this.length;return this.resize(v+1),this.emplace(v,s,d)}emplace(s,d,v){const T=2*s;return this.uint16[T+0]=d,this.uint16[T+1]=v,s}}it.prototype.bytesPerElement=4,Ze("StructArrayLayout2ui4",it);class pt extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const d=this.length;return this.resize(d+1),this.emplace(d,s)}emplace(s,d){return this.uint16[1*s+0]=d,s}}pt.prototype.bytesPerElement=2,Ze("StructArrayLayout1ui2",pt);class At extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v,T){const P=this.length;return this.resize(P+1),this.emplace(P,s,d,v,T)}emplace(s,d,v,T,P){const k=4*s;return this.float32[k+0]=d,this.float32[k+1]=v,this.float32[k+2]=T,this.float32[k+3]=P,s}}At.prototype.bytesPerElement=16,Ze("StructArrayLayout4f16",At);class Mt extends zi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new O(this.anchorPointX,this.anchorPointY)}}Mt.prototype.size=20;class Ot extends l{get(s){return new Mt(this,s)}}Ze("CollisionBoxArray",Ot);class Tt extends zi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Tt.prototype.size=48;class Wt extends B{get(s){return new Tt(this,s)}}Ze("PlacedSymbolArray",Wt);class oe extends zi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}oe.prototype.size=64;class Rt extends j{get(s){return new oe(this,s)}}Ze("SymbolInstanceArray",Rt);class Kt extends ${getoffsetX(s){return this.float32[1*s+0]}}Ze("GlyphOffsetArray",Kt);class ue extends Vo{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Ze("SymbolLineVertexArray",ue);class de extends zi{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}de.prototype.size=12;class be extends Y{get(s){return new de(this,s)}}Ze("TextAnchorOffsetArray",be);class ze extends zi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ze.prototype.size=8;class Ae extends et{get(s){return new ze(this,s)}}Ze("FeatureIndexArray",Ae);class Ne extends Uo{}class sn extends Uo{}class qn extends Uo{}class Ve extends Ls{}class fn extends hl{}class on extends ys{}class Mi extends eh{}class Ln extends nh{}class Cn extends ei{}class Fn extends E{}class Gi extends m{}class Ei extends M{}class oa extends C{}class Ji extends it{}const br=vi([{name:"a_pos",components:2,type:"Int16"}],4),{members:$r}=br;class Bi{constructor(s=[]){this.segments=s}prepareSegment(s,d,v,T){let P=this.segments[this.segments.length-1];return s>Bi.MAX_VERTEX_ARRAY_LENGTH&&ve(`Max vertices per segment is ${Bi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!P||P.vertexLength+s>Bi.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==T)&&(P={vertexOffset:d.length,primitiveOffset:v.length,vertexLength:0,primitiveLength:0},T!==void 0&&(P.sortKey=T),this.segments.push(P)),P}get(){return this.segments}destroy(){for(const s of this.segments)for(const d in s.vaos)s.vaos[d].destroy()}static simpleSegment(s,d,v,T){return new Bi([{vertexOffset:s,primitiveOffset:d,vertexLength:v,primitiveLength:T,vaos:{},sortKey:0}])}}function co(c,s){return 256*(c=at(Math.floor(c),0,255))+at(Math.floor(s),0,255)}Bi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ze("SegmentVector",Bi);const Aa=vi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ns={exports:{}},$o={exports:{}};$o.exports=function(c,s){var d,v,T,P,k,R,U,Z;for(v=c.length-(d=3&c.length),T=s,k=3432918353,R=461845907,Z=0;Z<v;)U=255&c.charCodeAt(Z)|(255&c.charCodeAt(++Z))<<8|(255&c.charCodeAt(++Z))<<16|(255&c.charCodeAt(++Z))<<24,++Z,T=27492+(65535&(P=5*(65535&(T=(T^=U=(65535&(U=(U=(65535&U)*k+(((U>>>16)*k&65535)<<16)&4294967295)<<15|U>>>17))*R+(((U>>>16)*R&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(P>>>16)&65535)<<16);switch(U=0,d){case 3:U^=(255&c.charCodeAt(Z+2))<<16;case 2:U^=(255&c.charCodeAt(Z+1))<<8;case 1:T^=U=(65535&(U=(U=(65535&(U^=255&c.charCodeAt(Z)))*k+(((U>>>16)*k&65535)<<16)&4294967295)<<15|U>>>17))*R+(((U>>>16)*R&65535)<<16)&4294967295}return T^=c.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0};var cu=$o.exports,la={exports:{}};la.exports=function(c,s){for(var d,v=c.length,T=s^v,P=0;v>=4;)d=1540483477*(65535&(d=255&c.charCodeAt(P)|(255&c.charCodeAt(++P))<<8|(255&c.charCodeAt(++P))<<16|(255&c.charCodeAt(++P))<<24))+((1540483477*(d>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),v-=4,++P;switch(v){case 3:T^=(255&c.charCodeAt(P+2))<<16;case 2:T^=(255&c.charCodeAt(P+1))<<8;case 1:T=1540483477*(65535&(T^=255&c.charCodeAt(P)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0};var kr=cu,Kr=la.exports;ns.exports=kr,ns.exports.murmur3=kr,ns.exports.murmur2=Kr;var hu=_(ns.exports);class dr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,d,v,T){this.ids.push(ar(s)),this.positions.push(d,v,T)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=ar(s);let v=0,T=this.ids.length-1;for(;v<T;){const k=v+T>>1;this.ids[k]>=d?T=k:v=k+1}const P=[];for(;this.ids[v]===d;)P.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return P}static serialize(s,d){const v=new Float64Array(s.ids),T=new Uint32Array(s.positions);return Ea(v,T,0,v.length-1),d&&d.push(v.buffer,T.buffer),{ids:v,positions:T}}static deserialize(s){const d=new dr;return d.ids=s.ids,d.positions=s.positions,d.indexed=!0,d}}function ar(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:hu(String(c))}function Ea(c,s,d,v){for(;d<v;){const T=c[d+v>>1];let P=d-1,k=v+1;for(;;){do P++;while(c[P]<T);do k--;while(c[k]>T);if(P>=k)break;pr(c,P,k),pr(s,3*P,3*k),pr(s,3*P+1,3*k+1),pr(s,3*P+2,3*k+2)}k-d<v-k?(Ea(c,s,d,k),d=k+1):(Ea(c,s,k+1,v),v=k)}}function pr(c,s,d){const v=c[s];c[s]=c[d],c[d]=v}Ze("FeaturePositionMap",dr);class Bl{constructor(s,d){this.gl=s.gl,this.location=d}}class Sc extends Bl{constructor(s,d){super(s,d),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class _s extends Bl{constructor(s,d){super(s,d),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class Is extends Bl{constructor(s,d){super(s,d),this.current=Qn.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const fu=new Float32Array(16);function ih(c){return[co(255*c.r,255*c.g),co(255*c.b,255*c.a)]}class qo{constructor(s,d,v){this.value=s,this.uniformNames=d.map((T=>`u_${T}`)),this.type=v}setUniform(s,d,v){s.set(v.constantOr(this.value))}getBinding(s,d,v){return this.type==="color"?new Is(s,d):new Sc(s,d)}}class vs{constructor(s,d){this.uniformNames=d.map((v=>`u_${v}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=s.tlbr}setUniform(s,d,v,T){const P=T==="u_pattern_to"?this.patternTo:T==="u_pattern_from"?this.patternFrom:T==="u_pixel_ratio_to"?this.pixelRatioTo:T==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&s.set(P)}getBinding(s,d,v){return v.substr(0,9)==="u_pattern"?new _s(s,d):new Sc(s,d)}}class wr{constructor(s,d,v,T){this.expression=s,this.type=v,this.maxValue=0,this.paintVertexAttributes=d.map((P=>({name:`a_${P}`,type:"Float32",components:v==="color"?2:1,offset:0}))),this.paintVertexArray=new T}populatePaintArray(s,d,v,T,P){const k=this.paintVertexArray.length,R=this.expression.evaluate(new Lt(0),d,{},T,[],P);this.paintVertexArray.resize(s),this._setPaintValue(k,s,R)}updatePaintArray(s,d,v,T){const P=this.expression.evaluate({zoom:0},v,T);this._setPaintValue(s,d,P)}_setPaintValue(s,d,v){if(this.type==="color"){const T=ih(v);for(let P=s;P<d;P++)this.paintVertexArray.emplace(P,T[0],T[1])}else{for(let T=s;T<d;T++)this.paintVertexArray.emplace(T,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xi{constructor(s,d,v,T,P,k){this.expression=s,this.uniformNames=d.map((R=>`u_${R}_t`)),this.type=v,this.useIntegerZoom=T,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=d.map((R=>({name:`a_${R}`,type:"Float32",components:v==="color"?4:2,offset:0}))),this.paintVertexArray=new k}populatePaintArray(s,d,v,T,P){const k=this.expression.evaluate(new Lt(this.zoom),d,{},T,[],P),R=this.expression.evaluate(new Lt(this.zoom+1),d,{},T,[],P),U=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(U,s,k,R)}updatePaintArray(s,d,v,T){const P=this.expression.evaluate({zoom:this.zoom},v,T),k=this.expression.evaluate({zoom:this.zoom+1},v,T);this._setPaintValue(s,d,P,k)}_setPaintValue(s,d,v,T){if(this.type==="color"){const P=ih(v),k=ih(T);for(let R=s;R<d;R++)this.paintVertexArray.emplace(R,P[0],P[1],k[0],k[1])}else{for(let P=s;P<d;P++)this.paintVertexArray.emplace(P,v,T);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(T))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,d){const v=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,T=at(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);s.set(T)}getBinding(s,d,v){return new Sc(s,d)}}class Rs{constructor(s,d,v,T,P,k){this.expression=s,this.type=d,this.useIntegerZoom=v,this.zoom=T,this.layerId=k,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P}populatePaintArray(s,d,v){const T=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(T,s,d.patterns&&d.patterns[this.layerId],v)}updatePaintArray(s,d,v,T,P){this._setPaintValues(s,d,v.patterns&&v.patterns[this.layerId],P)}_setPaintValues(s,d,v,T){if(!T||!v)return;const{min:P,mid:k,max:R}=v,U=T[P],Z=T[k],J=T[R];if(U&&Z&&J)for(let st=s;st<d;st++)this.zoomInPaintVertexArray.emplace(st,Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],Z.pixelRatio,U.pixelRatio),this.zoomOutPaintVertexArray.emplace(st,Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],J.tl[0],J.tl[1],J.br[0],J.br[1],Z.pixelRatio,J.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Aa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Aa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ho{constructor(s,d,v){this.binders={},this._buffers=[];const T=[];for(const P in s.paint._values){if(!v(P))continue;const k=s.paint.get(P);if(!(k instanceof ci&&nu(k.property.specification)))continue;const R=Wi(P,s.type),U=k.value,Z=k.property.specification.type,J=k.property.useIntegerZoom,st=k.property.specification["property-type"],ut=st==="cross-faded"||st==="cross-faded-data-driven";if(U.kind==="constant")this.binders[P]=ut?new vs(U.value,R):new qo(U.value,R,Z),T.push(`/u_${P}`);else if(U.kind==="source"||ut){const gt=Qr(P,Z,"source");this.binders[P]=ut?new Rs(U,Z,J,d,gt,s.id):new wr(U,R,Z,gt),T.push(`/a_${P}`)}else{const gt=Qr(P,Z,"composite");this.binders[P]=new xi(U,R,Z,J,d,gt),T.push(`/z_${P}`)}}this.cacheKey=T.sort().join("")}getMaxValue(s){const d=this.binders[s];return d instanceof wr||d instanceof xi?d.maxValue:0}populatePaintArrays(s,d,v,T,P){for(const k in this.binders){const R=this.binders[k];(R instanceof wr||R instanceof xi||R instanceof Rs)&&R.populatePaintArray(s,d,v,T,P)}}setConstantPatternPositions(s,d){for(const v in this.binders){const T=this.binders[v];T instanceof vs&&T.setConstantPatternPositions(s,d)}}updatePaintArrays(s,d,v,T,P){let k=!1;for(const R in s){const U=d.getPositions(R);for(const Z of U){const J=v.feature(Z.index);for(const st in this.binders){const ut=this.binders[st];if((ut instanceof wr||ut instanceof xi||ut instanceof Rs)&&ut.expression.isStateDependent===!0){const gt=T.paint.get(st);ut.expression=gt.value,ut.updatePaintArray(Z.start,Z.end,J,s[R],P),k=!0}}}}return k}defines(){const s=[];for(const d in this.binders){const v=this.binders[d];(v instanceof qo||v instanceof vs)&&s.push(...v.uniformNames.map((T=>`#define HAS_UNIFORM_${T}`)))}return s}getBinderAttributes(){const s=[];for(const d in this.binders){const v=this.binders[d];if(v instanceof wr||v instanceof xi)for(let T=0;T<v.paintVertexAttributes.length;T++)s.push(v.paintVertexAttributes[T].name);else if(v instanceof Rs)for(let T=0;T<Aa.members.length;T++)s.push(Aa.members[T].name)}return s}getBinderUniforms(){const s=[];for(const d in this.binders){const v=this.binders[d];if(v instanceof qo||v instanceof vs||v instanceof xi)for(const T of v.uniformNames)s.push(T)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,d){const v=[];for(const T in this.binders){const P=this.binders[T];if(P instanceof qo||P instanceof vs||P instanceof xi){for(const k of P.uniformNames)if(d[k]){const R=P.getBinding(s,d[k],k);v.push({name:k,property:T,binding:R})}}}return v}setUniforms(s,d,v,T){for(const{name:P,property:k,binding:R}of d)this.binders[k].setUniform(R,T,v.get(k),P)}updatePaintBuffers(s){this._buffers=[];for(const d in this.binders){const v=this.binders[d];if(s&&v instanceof Rs){const T=s.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;T&&this._buffers.push(T)}else(v instanceof wr||v instanceof xi)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(s){for(const d in this.binders){const v=this.binders[d];(v instanceof wr||v instanceof xi||v instanceof Rs)&&v.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const d=this.binders[s];(d instanceof wr||d instanceof xi||d instanceof Rs)&&d.destroy()}}}class An{constructor(s,d,v=(()=>!0)){this.programConfigurations={};for(const T of s)this.programConfigurations[T.id]=new Ho(T,d,v);this.needsUpload=!1,this._featureMap=new dr,this._bufferOffset=0}populatePaintArrays(s,d,v,T,P,k){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(s,d,T,P,k);d.id!==void 0&&this._featureMap.add(d.id,v,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,d,v,T){for(const P of v)this.needsUpload=this.programConfigurations[P.id].updatePaintArrays(s,this._featureMap,d,P,T)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function Wi(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function Qr(c,s,d){const v={color:{source:ys,composite:At},number:{source:$,composite:ys}},T=(function(P){return{"line-pattern":{source:Mi,composite:Mi},"fill-pattern":{source:Mi,composite:Mi},"fill-extrusion-pattern":{source:Mi,composite:Mi}}[P]})(c);return T&&T[d]||v[s][d]}Ze("ConstantBinder",qo),Ze("CrossFadedConstantBinder",vs),Ze("SourceExpressionBinder",wr),Ze("CrossFadedCompositeBinder",Rs),Ze("CompositeExpressionBinder",xi),Ze("ProgramConfiguration",Ho,{omit:["_buffers"]}),Ze("ProgramConfigurationSet",An);const mr=8192,Tc=Math.pow(2,14)-1,Mc=-Tc-1;function du(c){const s=mr/c.extent,d=c.loadGeometry();for(let v=0;v<d.length;v++){const T=d[v];for(let P=0;P<T.length;P++){const k=T[P],R=Math.round(k.x*s),U=Math.round(k.y*s);k.x=at(R,Mc,Tc),k.y=at(U,Mc,Tc),(R<k.x||R>k.x+1||U<k.y||U>k.y+1)&&ve("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Nl(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?du(c):[]}}function Xu(c,s,d,v,T){c.emplaceBack(2*s+(v+1)/2,2*d+(T+1)/2)}class Zm{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new sn,this.indexArray=new oa,this.segments=new Bi,this.programConfigurations=new An(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(s,d,v){const T=this.layers[0],P=[];let k=null,R=!1;T.type==="circle"&&(k=T.layout.get("circle-sort-key"),R=!k.isConstant());for(const{feature:U,id:Z,index:J,sourceLayerIndex:st}of s){const ut=this.layers[0]._featureFilter.needGeometry,gt=Nl(U,ut);if(!this.layers[0]._featureFilter.filter(new Lt(this.zoom),gt,v))continue;const yt=R?k.evaluate(gt,{},v):void 0,Et={id:Z,properties:U.properties,type:U.type,sourceLayerIndex:st,index:J,geometry:ut?gt.geometry:du(U),patterns:{},sortKey:yt};P.push(Et)}R&&P.sort(((U,Z)=>U.sortKey-Z.sortKey));for(const U of P){const{geometry:Z,index:J,sourceLayerIndex:st}=U,ut=s[J].feature;this.addFeature(U,Z,J,v),d.featureIndex.insert(ut,Z,J,st,this.index)}}update(s,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,$r),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,d,v,T){for(const P of d)for(const k of P){const R=k.x,U=k.y;if(R<0||R>=mr||U<0||U>=mr)continue;const Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),J=Z.vertexLength;Xu(this.layoutVertexArray,R,U,-1,-1),Xu(this.layoutVertexArray,R,U,1,-1),Xu(this.layoutVertexArray,R,U,1,1),Xu(this.layoutVertexArray,R,U,-1,1),this.indexArray.emplaceBack(J,J+1,J+2),this.indexArray.emplaceBack(J,J+3,J+2),Z.vertexLength+=4,Z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,{},T)}}function Or(c,s){for(let d=0;d<c.length;d++)if(ua(s,c[d]))return!0;for(let d=0;d<s.length;d++)if(ua(c,s[d]))return!0;return!!up(c,s)}function Gm(c,s,d){return!!ua(c,s)||!!Xf(s,c,d)}function lp(c,s){if(c.length===1)return hp(s,c[0]);for(let d=0;d<s.length;d++){const v=s[d];for(let T=0;T<v.length;T++)if(ua(c,v[T]))return!0}for(let d=0;d<c.length;d++)if(hp(s,c[d]))return!0;for(let d=0;d<s.length;d++)if(up(c,s[d]))return!0;return!1}function i_(c,s,d){if(c.length>1){if(up(c,s))return!0;for(let v=0;v<s.length;v++)if(Xf(s[v],c,d))return!0}for(let v=0;v<c.length;v++)if(Xf(c[v],s,d))return!0;return!1}function up(c,s){if(c.length===0||s.length===0)return!1;for(let d=0;d<c.length-1;d++){const v=c[d],T=c[d+1];for(let P=0;P<s.length-1;P++)if(Nx(v,T,s[P],s[P+1]))return!0}return!1}function Nx(c,s,d,v){return Ee(c,d,v)!==Ee(s,d,v)&&Ee(c,s,d)!==Ee(c,s,v)}function Xf(c,s,d){const v=d*d;if(s.length===1)return c.distSqr(s[0])<v;for(let T=1;T<s.length;T++)if(cp(c,s[T-1],s[T])<v)return!0;return!1}function cp(c,s,d){const v=s.distSqr(d);if(v===0)return c.distSqr(s);const T=((c.x-s.x)*(d.x-s.x)+(c.y-s.y)*(d.y-s.y))/v;return c.distSqr(T<0?s:T>1?d:d.sub(s)._mult(T)._add(s))}function hp(c,s){let d,v,T,P=!1;for(let k=0;k<c.length;k++){d=c[k];for(let R=0,U=d.length-1;R<d.length;U=R++)v=d[R],T=d[U],v.y>s.y!=T.y>s.y&&s.x<(T.x-v.x)*(s.y-v.y)/(T.y-v.y)+v.x&&(P=!P)}return P}function ua(c,s){let d=!1;for(let v=0,T=c.length-1;v<c.length;T=v++){const P=c[v],k=c[T];P.y>s.y!=k.y>s.y&&s.x<(k.x-P.x)*(s.y-P.y)/(k.y-P.y)+P.x&&(d=!d)}return d}function Jr(c,s,d){const v=d[0],T=d[2];if(c.x<v.x&&s.x<v.x||c.x>T.x&&s.x>T.x||c.y<v.y&&s.y<v.y||c.y>T.y&&s.y>T.y)return!1;const P=Ee(c,s,d[0]);return P!==Ee(c,s,d[1])||P!==Ee(c,s,d[2])||P!==Ee(c,s,d[3])}function Ac(c,s,d){const v=s.paint.get(c).value;return v.kind==="constant"?v.value:d.programConfigurations.get(s.id).getMaxValue(c)}function Ec(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function rh(c,s,d,v,T){if(!s[0]&&!s[1])return c;const P=O.convert(s)._mult(T);d==="viewport"&&P._rotate(-v);const k=[];for(let R=0;R<c.length;R++)k.push(c[R].sub(P));return k}let fp,pu;Ze("CircleBucket",Zm,{omit:["layers"]});var dp={get paint(){return pu=pu||new oi({"circle-radius":new Ge(me.paint_circle["circle-radius"]),"circle-color":new Ge(me.paint_circle["circle-color"]),"circle-blur":new Ge(me.paint_circle["circle-blur"]),"circle-opacity":new Ge(me.paint_circle["circle-opacity"]),"circle-translate":new Je(me.paint_circle["circle-translate"]),"circle-translate-anchor":new Je(me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Je(me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Je(me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ge(me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ge(me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ge(me.paint_circle["circle-stroke-opacity"])})},get layout(){return fp=fp||new oi({"circle-sort-key":new Ge(me.layout_circle["circle-sort-key"])})}},ja=1e-6,Cc=typeof Float32Array<"u"?Float32Array:Array;function pp(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Wm(c,s,d){var v=s[0],T=s[1],P=s[2],k=s[3],R=s[4],U=s[5],Z=s[6],J=s[7],st=s[8],ut=s[9],gt=s[10],yt=s[11],Et=s[12],It=s[13],Vt=s[14],Jt=s[15],Ht=d[0],ee=d[1],ne=d[2],Se=d[3];return c[0]=Ht*v+ee*R+ne*st+Se*Et,c[1]=Ht*T+ee*U+ne*ut+Se*It,c[2]=Ht*P+ee*Z+ne*gt+Se*Vt,c[3]=Ht*k+ee*J+ne*yt+Se*Jt,c[4]=(Ht=d[4])*v+(ee=d[5])*R+(ne=d[6])*st+(Se=d[7])*Et,c[5]=Ht*T+ee*U+ne*ut+Se*It,c[6]=Ht*P+ee*Z+ne*gt+Se*Vt,c[7]=Ht*k+ee*J+ne*yt+Se*Jt,c[8]=(Ht=d[8])*v+(ee=d[9])*R+(ne=d[10])*st+(Se=d[11])*Et,c[9]=Ht*T+ee*U+ne*ut+Se*It,c[10]=Ht*P+ee*Z+ne*gt+Se*Vt,c[11]=Ht*k+ee*J+ne*yt+Se*Jt,c[12]=(Ht=d[12])*v+(ee=d[13])*R+(ne=d[14])*st+(Se=d[15])*Et,c[13]=Ht*T+ee*U+ne*ut+Se*It,c[14]=Ht*P+ee*Z+ne*gt+Se*Vt,c[15]=Ht*k+ee*J+ne*yt+Se*Jt,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var tf,r_=Wm;function Kf(c,s,d){var v=s[0],T=s[1],P=s[2],k=s[3];return c[0]=d[0]*v+d[4]*T+d[8]*P+d[12]*k,c[1]=d[1]*v+d[5]*T+d[9]*P+d[13]*k,c[2]=d[2]*v+d[6]*T+d[10]*P+d[14]*k,c[3]=d[3]*v+d[7]*T+d[11]*P+d[15]*k,c}tf=new Cc(4),Cc!=Float32Array&&(tf[0]=0,tf[1]=0,tf[2]=0,tf[3]=0);class a_ extends Pr{constructor(s){super(s,dp)}createBucket(s){return new Zm(s)}queryRadius(s){const d=s;return Ac("circle-radius",this,d)+Ac("circle-stroke-width",this,d)+Ec(this.paint.get("circle-translate"))}queryIntersectsFeature(s,d,v,T,P,k,R,U){const Z=rh(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),k.angle,R),J=this.paint.get("circle-radius").evaluate(d,v)+this.paint.get("circle-stroke-width").evaluate(d,v),st=this.paint.get("circle-pitch-alignment")==="map",ut=st?Z:(function(yt,Et){return yt.map((It=>mp(It,Et)))})(Z,U),gt=st?J*R:J;for(const yt of T)for(const Et of yt){const It=st?Et:mp(Et,U);let Vt=gt;const Jt=Kf([],[Et.x,Et.y,0,1],U);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Vt*=Jt[3]/k.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Vt*=k.cameraToCenterDistance/Jt[3]),Gm(ut,It,Vt))return!0}return!1}}function mp(c,s){const d=Kf([],[c.x,c.y,0,1],s);return new O(d[0]/d[3],d[1]/d[3])}class Ym extends Zm{}let s_;Ze("HeatmapBucket",Ym,{omit:["layers"]});var o_={get paint(){return s_=s_||new oi({"heatmap-radius":new Ge(me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ge(me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Je(me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uo(me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Je(me.paint_heatmap["heatmap-opacity"])})}};function gp(c,{width:s,height:d},v,T){if(T){if(T instanceof Uint8ClampedArray)T=new Uint8Array(T.buffer);else if(T.length!==s*d*v)throw new RangeError(`mismatched image size. expected: ${T.length} but got: ${s*d*v}`)}else T=new Uint8Array(s*d*v);return c.width=s,c.height=d,c.data=T,c}function Xm(c,{width:s,height:d},v){if(s===c.width&&d===c.height)return;const T=gp({},{width:s,height:d},v);Qf(c,T,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,d)},v),c.width=s,c.height=d,c.data=T.data}function Qf(c,s,d,v,T,P){if(T.width===0||T.height===0)return s;if(T.width>c.width||T.height>c.height||d.x>c.width-T.width||d.y>c.height-T.height)throw new RangeError("out of range source coordinates for image copy");if(T.width>s.width||T.height>s.height||v.x>s.width-T.width||v.y>s.height-T.height)throw new RangeError("out of range destination coordinates for image copy");const k=c.data,R=s.data;if(k===R)throw new Error("srcData equals dstData, so image is already copied");for(let U=0;U<T.height;U++){const Z=((d.y+U)*c.width+d.x)*P,J=((v.y+U)*s.width+v.x)*P;for(let st=0;st<T.width*P;st++)R[J+st]=k[Z+st]}return s}class ef{constructor(s,d){gp(this,s,1,d)}resize(s){Xm(this,s,1)}clone(){return new ef({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,d,v,T,P){Qf(s,d,v,T,P,1)}}class ho{constructor(s,d){gp(this,s,4,d)}resize(s){Xm(this,s,4)}replace(s,d){d?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new ho({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,d,v,T,P){Qf(s,d,v,T,P,4)}}function Km(c){const s={},d=c.resolution||256,v=c.clips?c.clips.length:1,T=c.image||new ho({width:d,height:v});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const P=(k,R,U)=>{s[c.evaluationKey]=U;const Z=c.expression.evaluate(s);T.data[k+R+0]=Math.floor(255*Z.r/Z.a),T.data[k+R+1]=Math.floor(255*Z.g/Z.a),T.data[k+R+2]=Math.floor(255*Z.b/Z.a),T.data[k+R+3]=Math.floor(255*Z.a)};if(c.clips)for(let k=0,R=0;k<v;++k,R+=4*d)for(let U=0,Z=0;U<d;U++,Z+=4){const J=U/(d-1),{start:st,end:ut}=c.clips[k];P(R,Z,st*(1-J)+ut*J)}else for(let k=0,R=0;k<d;k++,R+=4)P(0,R,k/(d-1));return T}Ze("AlphaImage",ef),Ze("RGBAImage",ho);class l_ extends Pr{createBucket(s){return new Ym(s)}constructor(s){super(s,o_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Km({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Qm;var jx={get paint(){return Qm=Qm||new oi({"hillshade-illumination-direction":new Je(me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Je(me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Je(me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Je(me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Je(me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Je(me.paint_hillshade["hillshade-accent-color"])})}};class u_ extends Pr{constructor(s){super(s,jx)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const nf=vi([{name:"a_pos",components:2,type:"Int16"}],4),{members:c_}=nf;var rf={exports:{}};function ah(c,s,d){d=d||2;var v,T,P,k,R,U,Z,J=s&&s.length,st=J?s[0]*d:c.length,ut=Jm(c,0,st,d,!0),gt=[];if(!ut||ut.next===ut.prev)return gt;if(J&&(ut=(function(Et,It,Vt,Jt){var Ht,ee,ne,Se=[];for(Ht=0,ee=It.length;Ht<ee;Ht++)(ne=Jm(Et,It[Ht]*Jt,Ht<ee-1?It[Ht+1]*Jt:Et.length,Jt,!1))===ne.next&&(ne.steiner=!0),Se.push(eg(ne));for(Se.sort(m_),Ht=0;Ht<Se.length;Ht++)Vt=tg(Se[Ht],Vt);return Vt})(c,s,ut,d)),c.length>80*d){v=P=c[0],T=k=c[1];for(var yt=d;yt<st;yt+=d)(R=c[yt])<v&&(v=R),(U=c[yt+1])<T&&(T=U),R>P&&(P=R),U>k&&(k=U);Z=(Z=Math.max(P-v,k-T))!==0?32767/Z:0}return Jf(ut,gt,d,v,T,Z,0),gt}function Jm(c,s,d,v,T){var P,k;if(T===oh(c,s,d,v)>0)for(P=s;P<d;P+=v)k=__(P,c[P],c[P+1],k);else for(P=d-v;P>=s;P-=v)k=__(P,c[P],c[P+1],k);return k&&af(k,k.next)&&(ed(k),k=k.next),k}function Ku(c,s){if(!c)return c;s||(s=c);var d,v=c;do if(d=!1,v.steiner||!af(v,v.next)&&Dr(v.prev,v,v.next)!==0)v=v.next;else{if(ed(v),(v=s=v.prev)===v.next)break;d=!0}while(d||v!==s);return s}function Jf(c,s,d,v,T,P,k){if(c){!k&&P&&(function(J,st,ut,gt){var yt=J;do yt.z===0&&(yt.z=yp(yt.x,yt.y,st,ut,gt)),yt.prevZ=yt.prev,yt.nextZ=yt.next,yt=yt.next;while(yt!==J);yt.prevZ.nextZ=null,yt.prevZ=null,(function(Et){var It,Vt,Jt,Ht,ee,ne,Se,je,ln=1;do{for(Vt=Et,Et=null,ee=null,ne=0;Vt;){for(ne++,Jt=Vt,Se=0,It=0;It<ln&&(Se++,Jt=Jt.nextZ);It++);for(je=ln;Se>0||je>0&&Jt;)Se!==0&&(je===0||!Jt||Vt.z<=Jt.z)?(Ht=Vt,Vt=Vt.nextZ,Se--):(Ht=Jt,Jt=Jt.nextZ,je--),ee?ee.nextZ=Ht:Et=Ht,Ht.prevZ=ee,ee=Ht;Vt=Jt}ee.nextZ=null,ln*=2}while(ne>1)})(yt)})(c,v,T,P);for(var R,U,Z=c;c.prev!==c.next;)if(R=c.prev,U=c.next,P?f_(c,v,T,P):h_(c))s.push(R.i/d|0),s.push(c.i/d|0),s.push(U.i/d|0),ed(c),c=U.next,Z=U.next;else if((c=U)===Z){k?k===1?Jf(c=d_(Ku(c),s,d),s,d,v,T,P,2):k===2&&p_(c,s,d,v,T,P):Jf(Ku(c),s,d,v,T,P,1);break}}}function h_(c){var s=c.prev,d=c,v=c.next;if(Dr(s,d,v)>=0)return!1;for(var T=s.x,P=d.x,k=v.x,R=s.y,U=d.y,Z=v.y,J=T<P?T<k?T:k:P<k?P:k,st=R<U?R<Z?R:Z:U<Z?U:Z,ut=T>P?T>k?T:k:P>k?P:k,gt=R>U?R>Z?R:Z:U>Z?U:Z,yt=v.next;yt!==s;){if(yt.x>=J&&yt.x<=ut&&yt.y>=st&&yt.y<=gt&&sh(T,R,P,U,k,Z,yt.x,yt.y)&&Dr(yt.prev,yt,yt.next)>=0)return!1;yt=yt.next}return!0}function f_(c,s,d,v){var T=c.prev,P=c,k=c.next;if(Dr(T,P,k)>=0)return!1;for(var R=T.x,U=P.x,Z=k.x,J=T.y,st=P.y,ut=k.y,gt=R<U?R<Z?R:Z:U<Z?U:Z,yt=J<st?J<ut?J:ut:st<ut?st:ut,Et=R>U?R>Z?R:Z:U>Z?U:Z,It=J>st?J>ut?J:ut:st>ut?st:ut,Vt=yp(gt,yt,s,d,v),Jt=yp(Et,It,s,d,v),Ht=c.prevZ,ee=c.nextZ;Ht&&Ht.z>=Vt&&ee&&ee.z<=Jt;){if(Ht.x>=gt&&Ht.x<=Et&&Ht.y>=yt&&Ht.y<=It&&Ht!==T&&Ht!==k&&sh(R,J,U,st,Z,ut,Ht.x,Ht.y)&&Dr(Ht.prev,Ht,Ht.next)>=0||(Ht=Ht.prevZ,ee.x>=gt&&ee.x<=Et&&ee.y>=yt&&ee.y<=It&&ee!==T&&ee!==k&&sh(R,J,U,st,Z,ut,ee.x,ee.y)&&Dr(ee.prev,ee,ee.next)>=0))return!1;ee=ee.nextZ}for(;Ht&&Ht.z>=Vt;){if(Ht.x>=gt&&Ht.x<=Et&&Ht.y>=yt&&Ht.y<=It&&Ht!==T&&Ht!==k&&sh(R,J,U,st,Z,ut,Ht.x,Ht.y)&&Dr(Ht.prev,Ht,Ht.next)>=0)return!1;Ht=Ht.prevZ}for(;ee&&ee.z<=Jt;){if(ee.x>=gt&&ee.x<=Et&&ee.y>=yt&&ee.y<=It&&ee!==T&&ee!==k&&sh(R,J,U,st,Z,ut,ee.x,ee.y)&&Dr(ee.prev,ee,ee.next)>=0)return!1;ee=ee.nextZ}return!0}function d_(c,s,d){var v=c;do{var T=v.prev,P=v.next.next;!af(T,P)&&ng(T,v,v.next,P)&&of(T,P)&&of(P,T)&&(s.push(T.i/d|0),s.push(v.i/d|0),s.push(P.i/d|0),ed(v),ed(v.next),v=c=P),v=v.next}while(v!==c);return Ku(v)}function p_(c,s,d,v,T,P){var k=c;do{for(var R=k.next.next;R!==k.prev;){if(k.i!==R.i&&y_(k,R)){var U=ig(k,R);return k=Ku(k,k.next),U=Ku(U,U.next),Jf(k,s,d,v,T,P,0),void Jf(U,s,d,v,T,P,0)}R=R.next}k=k.next}while(k!==c)}function m_(c,s){return c.x-s.x}function tg(c,s){var d=(function(T,P){var k,R=P,U=T.x,Z=T.y,J=-1/0;do{if(Z<=R.y&&Z>=R.next.y&&R.next.y!==R.y){var st=R.x+(Z-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(st<=U&&st>J&&(J=st,k=R.x<R.next.x?R:R.next,st===U))return k}R=R.next}while(R!==P);if(!k)return null;var ut,gt=k,yt=k.x,Et=k.y,It=1/0;R=k;do U>=R.x&&R.x>=yt&&U!==R.x&&sh(Z<Et?U:J,Z,yt,Et,Z<Et?J:U,Z,R.x,R.y)&&(ut=Math.abs(Z-R.y)/(U-R.x),of(R,T)&&(ut<It||ut===It&&(R.x>k.x||R.x===k.x&&g_(k,R)))&&(k=R,It=ut)),R=R.next;while(R!==gt);return k})(c,s);if(!d)return s;var v=ig(d,c);return Ku(v,v.next),Ku(d,d.next)}function g_(c,s){return Dr(c.prev,c,s.prev)<0&&Dr(s.next,c,c.next)<0}function yp(c,s,d,v,T){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-d)*T|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-v)*T|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function eg(c){var s=c,d=c;do(s.x<d.x||s.x===d.x&&s.y<d.y)&&(d=s),s=s.next;while(s!==c);return d}function sh(c,s,d,v,T,P,k,R){return(T-k)*(s-R)>=(c-k)*(P-R)&&(c-k)*(v-R)>=(d-k)*(s-R)&&(d-k)*(P-R)>=(T-k)*(v-R)}function y_(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!(function(d,v){var T=d;do{if(T.i!==d.i&&T.next.i!==d.i&&T.i!==v.i&&T.next.i!==v.i&&ng(T,T.next,d,v))return!0;T=T.next}while(T!==d);return!1})(c,s)&&(of(c,s)&&of(s,c)&&(function(d,v){var T=d,P=!1,k=(d.x+v.x)/2,R=(d.y+v.y)/2;do T.y>R!=T.next.y>R&&T.next.y!==T.y&&k<(T.next.x-T.x)*(R-T.y)/(T.next.y-T.y)+T.x&&(P=!P),T=T.next;while(T!==d);return P})(c,s)&&(Dr(c.prev,c,s.prev)||Dr(c,s.prev,s))||af(c,s)&&Dr(c.prev,c,c.next)>0&&Dr(s.prev,s,s.next)>0)}function Dr(c,s,d){return(s.y-c.y)*(d.x-s.x)-(s.x-c.x)*(d.y-s.y)}function af(c,s){return c.x===s.x&&c.y===s.y}function ng(c,s,d,v){var T=sf(Dr(c,s,d)),P=sf(Dr(c,s,v)),k=sf(Dr(d,v,c)),R=sf(Dr(d,v,s));return T!==P&&k!==R||!(T!==0||!td(c,d,s))||!(P!==0||!td(c,v,s))||!(k!==0||!td(d,c,v))||!(R!==0||!td(d,s,v))}function td(c,s,d){return s.x<=Math.max(c.x,d.x)&&s.x>=Math.min(c.x,d.x)&&s.y<=Math.max(c.y,d.y)&&s.y>=Math.min(c.y,d.y)}function sf(c){return c>0?1:c<0?-1:0}function of(c,s){return Dr(c.prev,c,c.next)<0?Dr(c,s,c.next)>=0&&Dr(c,c.prev,s)>=0:Dr(c,s,c.prev)<0||Dr(c,c.next,s)<0}function ig(c,s){var d=new _p(c.i,c.x,c.y),v=new _p(s.i,s.x,s.y),T=c.next,P=s.prev;return c.next=s,s.prev=c,d.next=T,T.prev=d,v.next=d,d.prev=v,P.next=v,v.prev=P,v}function __(c,s,d,v){var T=new _p(c,s,d);return v?(T.next=v.next,T.prev=v,v.next.prev=T,v.next=T):(T.prev=T,T.next=T),T}function ed(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function _p(c,s,d){this.i=c,this.x=s,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function oh(c,s,d,v){for(var T=0,P=s,k=d-v;P<d;P+=v)T+=(c[k]-c[P])*(c[P+1]+c[k+1]),k=P;return T}rf.exports=ah,rf.exports.default=ah,ah.deviation=function(c,s,d,v){var T=s&&s.length,P=Math.abs(oh(c,0,T?s[0]*d:c.length,d));if(T)for(var k=0,R=s.length;k<R;k++)P-=Math.abs(oh(c,s[k]*d,k<R-1?s[k+1]*d:c.length,d));var U=0;for(k=0;k<v.length;k+=3){var Z=v[k]*d,J=v[k+1]*d,st=v[k+2]*d;U+=Math.abs((c[Z]-c[st])*(c[J+1]-c[Z+1])-(c[Z]-c[J])*(c[st+1]-c[Z+1]))}return P===0&&U===0?0:Math.abs((U-P)/P)},ah.flatten=function(c){for(var s=c[0][0].length,d={vertices:[],holes:[],dimensions:s},v=0,T=0;T<c.length;T++){for(var P=0;P<c[T].length;P++)for(var k=0;k<s;k++)d.vertices.push(c[T][P][k]);T>0&&d.holes.push(v+=c[T-1].length)}return d};var vp=_(rf.exports);function xp(c,s,d,v,T){rg(c,s,d,v||c.length-1,T||nd)}function rg(c,s,d,v,T){for(;v>d;){if(v-d>600){var P=v-d+1,k=s-d+1,R=Math.log(P),U=.5*Math.exp(2*R/3),Z=.5*Math.sqrt(R*U*(P-U)/P)*(k-P/2<0?-1:1);rg(c,s,Math.max(d,Math.floor(s-k*U/P+Z)),Math.min(v,Math.floor(s+(P-k)*U/P+Z)),T)}var J=c[s],st=d,ut=v;for(lf(c,d,s),T(c[v],J)>0&&lf(c,d,v);st<ut;){for(lf(c,st,ut),st++,ut--;T(c[st],J)<0;)st++;for(;T(c[ut],J)>0;)ut--}T(c[d],J)===0?lf(c,d,ut):lf(c,++ut,v),ut<=s&&(d=ut+1),s<=ut&&(v=ut-1)}}function lf(c,s,d){var v=c[s];c[s]=c[d],c[d]=v}function nd(c,s){return c<s?-1:c>s?1:0}function bp(c,s){const d=c.length;if(d<=1)return[c];const v=[];let T,P;for(let k=0;k<d;k++){const R=Nt(c[k]);R!==0&&(c[k].area=Math.abs(R),P===void 0&&(P=R<0),P===R<0?(T&&v.push(T),T=[c[k]]):T.push(c[k]))}if(T&&v.push(T),s>1)for(let k=0;k<v.length;k++)v[k].length<=s||(xp(v[k],s,1,v[k].length-1,ag),v[k]=v[k].slice(0,s));return v}function ag(c,s){return s.area-c.area}function wp(c,s,d){const v=d.patternDependencies;let T=!1;for(const P of s){const k=P.paint.get(`${c}-pattern`);k.isConstant()||(T=!0);const R=k.constantOr(null);R&&(T=!0,v[R.to]=!0,v[R.from]=!0)}return T}function id(c,s,d,v,T){const P=T.patternDependencies;for(const k of s){const R=k.paint.get(`${c}-pattern`).value;if(R.kind!=="constant"){let U=R.evaluate({zoom:v-1},d,{},T.availableImages),Z=R.evaluate({zoom:v},d,{},T.availableImages),J=R.evaluate({zoom:v+1},d,{},T.availableImages);U=U&&U.name?U.name:U,Z=Z&&Z.name?Z.name:Z,J=J&&J.name?J.name:J,P[U]=!0,P[Z]=!0,P[J]=!0,d.patterns[k.id]={min:U,mid:Z,max:J}}}return d}class rd{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qn,this.indexArray=new oa,this.indexArray2=new Ji,this.programConfigurations=new An(s.layers,s.zoom),this.segments=new Bi,this.segments2=new Bi,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(s,d,v){this.hasPattern=wp("fill",this.layers,d);const T=this.layers[0].layout.get("fill-sort-key"),P=!T.isConstant(),k=[];for(const{feature:R,id:U,index:Z,sourceLayerIndex:J}of s){const st=this.layers[0]._featureFilter.needGeometry,ut=Nl(R,st);if(!this.layers[0]._featureFilter.filter(new Lt(this.zoom),ut,v))continue;const gt=P?T.evaluate(ut,{},v,d.availableImages):void 0,yt={id:U,properties:R.properties,type:R.type,sourceLayerIndex:J,index:Z,geometry:st?ut.geometry:du(R),patterns:{},sortKey:gt};k.push(yt)}P&&k.sort(((R,U)=>R.sortKey-U.sortKey));for(const R of k){const{geometry:U,index:Z,sourceLayerIndex:J}=R;if(this.hasPattern){const st=id("fill",this.layers,R,this.zoom,d);this.patternFeatures.push(st)}else this.addFeature(R,U,Z,v,{});d.featureIndex.insert(s[Z].feature,U,Z,J,this.index)}}update(s,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,v)}addFeatures(s,d,v){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,d,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,c_),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,d,v,T,P){for(const k of bp(d,500)){let R=0;for(const gt of k)R+=gt.length;const U=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray),Z=U.vertexLength,J=[],st=[];for(const gt of k){if(gt.length===0)continue;gt!==k[0]&&st.push(J.length/2);const yt=this.segments2.prepareSegment(gt.length,this.layoutVertexArray,this.indexArray2),Et=yt.vertexLength;this.layoutVertexArray.emplaceBack(gt[0].x,gt[0].y),this.indexArray2.emplaceBack(Et+gt.length-1,Et),J.push(gt[0].x),J.push(gt[0].y);for(let It=1;It<gt.length;It++)this.layoutVertexArray.emplaceBack(gt[It].x,gt[It].y),this.indexArray2.emplaceBack(Et+It-1,Et+It),J.push(gt[It].x),J.push(gt[It].y);yt.vertexLength+=gt.length,yt.primitiveLength+=gt.length}const ut=vp(J,st);for(let gt=0;gt<ut.length;gt+=3)this.indexArray.emplaceBack(Z+ut[gt],Z+ut[gt+1],Z+ut[gt+2]);U.vertexLength+=R,U.primitiveLength+=ut.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,P,T)}}let sg,og;Ze("FillBucket",rd,{omit:["layers","patternFeatures"]});var lh={get paint(){return og=og||new oi({"fill-antialias":new Je(me.paint_fill["fill-antialias"]),"fill-opacity":new Ge(me.paint_fill["fill-opacity"]),"fill-color":new Ge(me.paint_fill["fill-color"]),"fill-outline-color":new Ge(me.paint_fill["fill-outline-color"]),"fill-translate":new Je(me.paint_fill["fill-translate"]),"fill-translate-anchor":new Je(me.paint_fill["fill-translate-anchor"]),"fill-pattern":new ri(me.paint_fill["fill-pattern"])})},get layout(){return sg=sg||new oi({"fill-sort-key":new Ge(me.layout_fill["fill-sort-key"])})}};class v_ extends Pr{constructor(s){super(s,lh)}recalculate(s,d){super.recalculate(s,d);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new rd(s)}queryRadius(){return Ec(this.paint.get("fill-translate"))}queryIntersectsFeature(s,d,v,T,P,k,R){return lp(rh(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),k.angle,R),T)}isTileClipped(){return!0}}const x_=vi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),b_=vi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Sp}=x_;var Qu={},lg=x,ug=uh;function uh(c,s,d,v,T){this.properties={},this.extent=d,this.type=0,this._pbf=c,this._geometry=-1,this._keys=v,this._values=T,c.readFields(Fx,this,s)}function Fx(c,s,d){c==1?s.id=d.readVarint():c==2?(function(v,T){for(var P=v.readVarint()+v.pos;v.pos<P;){var k=T._keys[v.readVarint()],R=T._values[v.readVarint()];T.properties[k]=R}})(d,s):c==3?s.type=d.readVarint():c==4&&(s._geometry=d.pos)}function cg(c){for(var s,d,v=0,T=0,P=c.length,k=P-1;T<P;k=T++)v+=((d=c[k]).x-(s=c[T]).x)*(s.y+d.y);return v}uh.types=["Unknown","Point","LineString","Polygon"],uh.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var s,d=c.readVarint()+c.pos,v=1,T=0,P=0,k=0,R=[];c.pos<d;){if(T<=0){var U=c.readVarint();v=7&U,T=U>>3}if(T--,v===1||v===2)P+=c.readSVarint(),k+=c.readSVarint(),v===1&&(s&&R.push(s),s=[]),s.push(new lg(P,k));else{if(v!==7)throw new Error("unknown command "+v);s&&s.push(s[0].clone())}}return s&&R.push(s),R},uh.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var s=c.readVarint()+c.pos,d=1,v=0,T=0,P=0,k=1/0,R=-1/0,U=1/0,Z=-1/0;c.pos<s;){if(v<=0){var J=c.readVarint();d=7&J,v=J>>3}if(v--,d===1||d===2)(T+=c.readSVarint())<k&&(k=T),T>R&&(R=T),(P+=c.readSVarint())<U&&(U=P),P>Z&&(Z=P);else if(d!==7)throw new Error("unknown command "+d)}return[k,U,R,Z]},uh.prototype.toGeoJSON=function(c,s,d){var v,T,P=this.extent*Math.pow(2,d),k=this.extent*c,R=this.extent*s,U=this.loadGeometry(),Z=uh.types[this.type];function J(gt){for(var yt=0;yt<gt.length;yt++){var Et=gt[yt];gt[yt]=[360*(Et.x+k)/P-180,360/Math.PI*Math.atan(Math.exp((180-360*(Et.y+R)/P)*Math.PI/180))-90]}}switch(this.type){case 1:var st=[];for(v=0;v<U.length;v++)st[v]=U[v][0];J(U=st);break;case 2:for(v=0;v<U.length;v++)J(U[v]);break;case 3:for(U=(function(gt){var yt=gt.length;if(yt<=1)return[gt];for(var Et,It,Vt=[],Jt=0;Jt<yt;Jt++){var Ht=cg(gt[Jt]);Ht!==0&&(It===void 0&&(It=Ht<0),It===Ht<0?(Et&&Vt.push(Et),Et=[gt[Jt]]):Et.push(gt[Jt]))}return Et&&Vt.push(Et),Vt})(U),v=0;v<U.length;v++)for(T=0;T<U[v].length;T++)J(U[v][T])}U.length===1?U=U[0]:Z="Multi"+Z;var ut={type:"Feature",geometry:{type:Z,coordinates:U},properties:this.properties};return"id"in this&&(ut.id=this.id),ut};var ca=ug,Fa=hg;function hg(c,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(w_,this,s),this.length=this._features.length}function w_(c,s,d){c===15?s.version=d.readVarint():c===1?s.name=d.readString():c===5?s.extent=d.readVarint():c===2?s._features.push(d.pos):c===3?s._keys.push(d.readString()):c===4&&s._values.push((function(v){for(var T=null,P=v.readVarint()+v.pos;v.pos<P;){var k=v.readVarint()>>3;T=k===1?v.readString():k===2?v.readFloat():k===3?v.readDouble():k===4?v.readVarint64():k===5?v.readVarint():k===6?v.readSVarint():k===7?v.readBoolean():null}return T})(d))}hg.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var s=this._pbf.readVarint()+this._pbf.pos;return new ca(this._pbf,s,this.extent,this._keys,this._values)};var S_=Fa;function T_(c,s,d){if(c===3){var v=new S_(d,d.readVarint()+d.pos);v.length&&(s[v.name]=v)}}Qu.VectorTile=function(c,s){this.layers=c.readFields(T_,{},s)},Qu.VectorTileFeature=ug,Qu.VectorTileLayer=Fa;const ad=Qu.VectorTileFeature.types,Tp=Math.pow(2,13);function Pc(c,s,d,v,T,P,k,R){c.emplaceBack(s,d,2*Math.floor(v*Tp)+k,T*Tp*2,P*Tp*2,Math.round(R))}class Mp{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Ve,this.centroidVertexArray=new Ne,this.indexArray=new oa,this.programConfigurations=new An(s.layers,s.zoom),this.segments=new Bi,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(s,d,v){this.features=[],this.hasPattern=wp("fill-extrusion",this.layers,d);for(const{feature:T,id:P,index:k,sourceLayerIndex:R}of s){const U=this.layers[0]._featureFilter.needGeometry,Z=Nl(T,U);if(!this.layers[0]._featureFilter.filter(new Lt(this.zoom),Z,v))continue;const J={id:P,sourceLayerIndex:R,index:k,geometry:U?Z.geometry:du(T),properties:T.properties,type:T.type,patterns:{}};this.hasPattern?this.features.push(id("fill-extrusion",this.layers,J,this.zoom,d)):this.addFeature(J,J.geometry,k,v,{}),d.featureIndex.insert(T,J.geometry,k,R,this.index,!0)}}addFeatures(s,d,v){for(const T of this.features){const{geometry:P}=T;this.addFeature(T,P,T.index,d,v)}}update(s,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Sp),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,b_.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,d,v,T,P){const k={x:0,y:0,vertexCount:0};for(const R of bp(d,500)){let U=0;for(const yt of R)U+=yt.length;let Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const yt of R){if(yt.length===0||Ap(yt))continue;let Et=0;for(let It=0;It<yt.length;It++){const Vt=yt[It];if(It>=1){const Jt=yt[It-1];if(!Ux(Vt,Jt)){Z.vertexLength+4>Bi.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ht=Vt.sub(Jt)._perp()._unit(),ee=Jt.dist(Vt);Et+ee>32768&&(Et=0),Pc(this.layoutVertexArray,Vt.x,Vt.y,Ht.x,Ht.y,0,0,Et),Pc(this.layoutVertexArray,Vt.x,Vt.y,Ht.x,Ht.y,0,1,Et),k.x+=2*Vt.x,k.y+=2*Vt.y,k.vertexCount+=2,Et+=ee,Pc(this.layoutVertexArray,Jt.x,Jt.y,Ht.x,Ht.y,0,0,Et),Pc(this.layoutVertexArray,Jt.x,Jt.y,Ht.x,Ht.y,0,1,Et),k.x+=2*Jt.x,k.y+=2*Jt.y,k.vertexCount+=2;const ne=Z.vertexLength;this.indexArray.emplaceBack(ne,ne+2,ne+1),this.indexArray.emplaceBack(ne+1,ne+2,ne+3),Z.vertexLength+=4,Z.primitiveLength+=2}}}}if(Z.vertexLength+U>Bi.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(U,this.layoutVertexArray,this.indexArray)),ad[s.type]!=="Polygon")continue;const J=[],st=[],ut=Z.vertexLength;for(const yt of R)if(yt.length!==0){yt!==R[0]&&st.push(J.length/2);for(let Et=0;Et<yt.length;Et++){const It=yt[Et];Pc(this.layoutVertexArray,It.x,It.y,0,0,1,1,0),k.x+=It.x,k.y+=It.y,k.vertexCount+=1,J.push(It.x),J.push(It.y)}}const gt=vp(J,st);for(let yt=0;yt<gt.length;yt+=3)this.indexArray.emplaceBack(ut+gt[yt],ut+gt[yt+2],ut+gt[yt+1]);Z.primitiveLength+=gt.length/3,Z.vertexLength+=U}for(let R=0;R<k.vertexCount;R++)this.centroidVertexArray.emplaceBack(Math.floor(k.x/k.vertexCount),Math.floor(k.y/k.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,P,T)}}function Ux(c,s){return c.x===s.x&&(c.x<0||c.x>mr)||c.y===s.y&&(c.y<0||c.y>mr)}function Ap(c){return c.every((s=>s.x<0))||c.every((s=>s.x>mr))||c.every((s=>s.y<0))||c.every((s=>s.y>mr))}let Ep;Ze("FillExtrusionBucket",Mp,{omit:["layers","features"]});var M_={get paint(){return Ep=Ep||new oi({"fill-extrusion-opacity":new Je(me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ge(me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Je(me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Je(me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ri(me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ge(me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ge(me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Je(me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class A_ extends Pr{constructor(s){super(s,M_)}createBucket(s){return new Mp(s)}queryRadius(){return Ec(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(s,d,v,T,P,k,R,U){const Z=rh(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),k.angle,R),J=this.paint.get("fill-extrusion-height").evaluate(d,v),st=this.paint.get("fill-extrusion-base").evaluate(d,v),ut=(function(yt,Et,It,Vt){const Jt=[];for(const Ht of yt){const ee=[Ht.x,Ht.y,0,1];Kf(ee,ee,Et),Jt.push(new O(ee[0]/ee[3],ee[1]/ee[3]))}return Jt})(Z,U),gt=(function(yt,Et,It,Vt){const Jt=[],Ht=[],ee=Vt[8]*Et,ne=Vt[9]*Et,Se=Vt[10]*Et,je=Vt[11]*Et,ln=Vt[8]*It,Xe=Vt[9]*It,We=Vt[10]*It,Ue=Vt[11]*It;for(const en of yt){const $e=[],Re=[];for(const pn of en){const un=pn.x,jn=pn.y,Yi=Vt[0]*un+Vt[4]*jn+Vt[12],Xi=Vt[1]*un+Vt[5]*jn+Vt[13],ta=Vt[2]*un+Vt[6]*jn+Vt[14],Vs=Vt[3]*un+Vt[7]*jn+Vt[15],bs=ta+Se,qr=Vs+je,lr=Yi+ln,Ca=Xi+Xe,is=ta+We,Va=Vs+Ue,ea=new O((Yi+ee)/qr,(Xi+ne)/qr);ea.z=bs/qr,$e.push(ea);const na=new O(lr/Va,Ca/Va);na.z=is/Va,Re.push(na)}Jt.push($e),Ht.push(Re)}return[Jt,Ht]})(T,st,J,U);return(function(yt,Et,It){let Vt=1/0;lp(It,Et)&&(Vt=Cp(It,Et[0]));for(let Jt=0;Jt<Et.length;Jt++){const Ht=Et[Jt],ee=yt[Jt];for(let ne=0;ne<Ht.length-1;ne++){const Se=Ht[ne],je=[Se,Ht[ne+1],ee[ne+1],ee[ne],Se];Or(It,je)&&(Vt=Math.min(Vt,Cp(It,je)))}}return Vt!==1/0&&Vt})(gt[0],gt[1],ut)}}function uf(c,s){return c.x*s.x+c.y*s.y}function Cp(c,s){if(c.length===1){let d=0;const v=s[d++];let T;for(;!T||v.equals(T);)if(T=s[d++],!T)return 1/0;for(;d<s.length;d++){const P=s[d],k=c[0],R=T.sub(v),U=P.sub(v),Z=k.sub(v),J=uf(R,R),st=uf(R,U),ut=uf(U,U),gt=uf(Z,R),yt=uf(Z,U),Et=J*ut-st*st,It=(ut*gt-st*yt)/Et,Vt=(J*yt-st*gt)/Et,Jt=v.z*(1-It-Vt)+T.z*It+P.z*Vt;if(isFinite(Jt))return Jt}return 1/0}{let d=1/0;for(const v of s)d=Math.min(d,v.z);return d}}const fg=vi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:dg}=fg,E_=vi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:pg}=E_,Pp=Qu.VectorTileFeature.types,mg=Math.cos(Math.PI/180*37.5),gg=Math.pow(2,14)/.5;class sd{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new fn,this.layoutVertexArray2=new on,this.indexArray=new oa,this.programConfigurations=new An(s.layers,s.zoom),this.segments=new Bi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(s,d,v){this.hasPattern=wp("line",this.layers,d);const T=this.layers[0].layout.get("line-sort-key"),P=!T.isConstant(),k=[];for(const{feature:R,id:U,index:Z,sourceLayerIndex:J}of s){const st=this.layers[0]._featureFilter.needGeometry,ut=Nl(R,st);if(!this.layers[0]._featureFilter.filter(new Lt(this.zoom),ut,v))continue;const gt=P?T.evaluate(ut,{},v):void 0,yt={id:U,properties:R.properties,type:R.type,sourceLayerIndex:J,index:Z,geometry:st?ut.geometry:du(R),patterns:{},sortKey:gt};k.push(yt)}P&&k.sort(((R,U)=>R.sortKey-U.sortKey));for(const R of k){const{geometry:U,index:Z,sourceLayerIndex:J}=R;if(this.hasPattern){const st=id("line",this.layers,R,this.zoom,d);this.patternFeatures.push(st)}else this.addFeature(R,U,Z,v,{});d.featureIndex.insert(s[Z].feature,U,Z,J,this.index)}}update(s,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,v)}addFeatures(s,d,v){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,d,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,pg)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,dg),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,d,v,T,P){const k=this.layers[0].layout,R=k.get("line-join").evaluate(s,{}),U=k.get("line-cap"),Z=k.get("line-miter-limit"),J=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const st of d)this.addLine(st,s,R,U,Z,J);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,P,T)}addLine(s,d,v,T,P,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Vt=0;Vt<s.length-1;Vt++)this.totalDistance+=s[Vt].dist(s[Vt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=Pp[d.type]==="Polygon";let U=s.length;for(;U>=2&&s[U-1].equals(s[U-2]);)U--;let Z=0;for(;Z<U-1&&s[Z].equals(s[Z+1]);)Z++;if(U<(R?3:2))return;v==="bevel"&&(P=1.05);const J=this.overscaling<=16?15*mr/(512*this.overscaling):0,st=this.segments.prepareSegment(10*U,this.layoutVertexArray,this.indexArray);let ut,gt,yt,Et,It;this.e1=this.e2=-1,R&&(ut=s[U-2],It=s[Z].sub(ut)._unit()._perp());for(let Vt=Z;Vt<U;Vt++){if(yt=Vt===U-1?R?s[Z+1]:void 0:s[Vt+1],yt&&s[Vt].equals(yt))continue;It&&(Et=It),ut&&(gt=ut),ut=s[Vt],It=yt?yt.sub(ut)._unit()._perp():Et,Et=Et||It;let Jt=Et.add(It);Jt.x===0&&Jt.y===0||Jt._unit();const Ht=Et.x*It.x+Et.y*It.y,ee=Jt.x*It.x+Jt.y*It.y,ne=ee!==0?1/ee:1/0,Se=2*Math.sqrt(2-2*ee),je=ee<mg&&gt&&yt,ln=Et.x*It.y-Et.y*It.x>0;if(je&&Vt>Z){const Ue=ut.dist(gt);if(Ue>2*J){const en=ut.sub(ut.sub(gt)._mult(J/Ue)._round());this.updateDistance(gt,en),this.addCurrentVertex(en,Et,0,0,st),gt=en}}const Xe=gt&&yt;let We=Xe?v:R?"butt":T;if(Xe&&We==="round"&&(ne<k?We="miter":ne<=2&&(We="fakeround")),We==="miter"&&ne>P&&(We="bevel"),We==="bevel"&&(ne>2&&(We="flipbevel"),ne<P&&(We="miter")),gt&&this.updateDistance(gt,ut),We==="miter")Jt._mult(ne),this.addCurrentVertex(ut,Jt,0,0,st);else if(We==="flipbevel"){if(ne>100)Jt=It.mult(-1);else{const Ue=ne*Et.add(It).mag()/Et.sub(It).mag();Jt._perp()._mult(Ue*(ln?-1:1))}this.addCurrentVertex(ut,Jt,0,0,st),this.addCurrentVertex(ut,Jt.mult(-1),0,0,st)}else if(We==="bevel"||We==="fakeround"){const Ue=-Math.sqrt(ne*ne-1),en=ln?Ue:0,$e=ln?0:Ue;if(gt&&this.addCurrentVertex(ut,Et,en,$e,st),We==="fakeround"){const Re=Math.round(180*Se/Math.PI/20);for(let pn=1;pn<Re;pn++){let un=pn/Re;if(un!==.5){const Yi=un-.5;un+=un*Yi*(un-1)*((1.0904+Ht*(Ht*(3.55645-1.43519*Ht)-3.2452))*Yi*Yi+(.848013+Ht*(.215638*Ht-1.06021)))}const jn=It.sub(Et)._mult(un)._add(Et)._unit()._mult(ln?-1:1);this.addHalfVertex(ut,jn.x,jn.y,!1,ln,0,st)}}yt&&this.addCurrentVertex(ut,It,-en,-$e,st)}else if(We==="butt")this.addCurrentVertex(ut,Jt,0,0,st);else if(We==="square"){const Ue=gt?1:-1;this.addCurrentVertex(ut,Jt,Ue,Ue,st)}else We==="round"&&(gt&&(this.addCurrentVertex(ut,Et,0,0,st),this.addCurrentVertex(ut,Et,1,1,st,!0)),yt&&(this.addCurrentVertex(ut,It,-1,-1,st,!0),this.addCurrentVertex(ut,It,0,0,st)));if(je&&Vt<U-1){const Ue=ut.dist(yt);if(Ue>2*J){const en=ut.add(yt.sub(ut)._mult(J/Ue)._round());this.updateDistance(ut,en),this.addCurrentVertex(en,It,0,0,st),ut=en}}}}addCurrentVertex(s,d,v,T,P,k=!1){const R=d.y*T-d.x,U=-d.y-d.x*T;this.addHalfVertex(s,d.x+d.y*v,d.y-d.x*v,k,!1,v,P),this.addHalfVertex(s,R,U,k,!0,-T,P),this.distance>gg/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,d,v,T,P,k))}addHalfVertex({x:s,y:d},v,T,P,k,R,U){const Z=.5*(this.lineClips?this.scaledDistance*(gg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(P?1:0),(d<<1)+(k?1:0),Math.round(63*v)+128,Math.round(63*T)+128,1+(R===0?0:R<0?-1:1)|(63&Z)<<2,Z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const J=U.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,J),U.primitiveLength++),k?this.e2=J:this.e1=J}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,d){this.distance+=s.dist(d),this.updateScaledDistance()}}let yg,mu;Ze("LineBucket",sd,{omit:["layers","patternFeatures"]});var kp={get paint(){return mu=mu||new oi({"line-opacity":new Ge(me.paint_line["line-opacity"]),"line-color":new Ge(me.paint_line["line-color"]),"line-translate":new Je(me.paint_line["line-translate"]),"line-translate-anchor":new Je(me.paint_line["line-translate-anchor"]),"line-width":new Ge(me.paint_line["line-width"]),"line-gap-width":new Ge(me.paint_line["line-gap-width"]),"line-offset":new Ge(me.paint_line["line-offset"]),"line-blur":new Ge(me.paint_line["line-blur"]),"line-dasharray":new Xn(me.paint_line["line-dasharray"]),"line-pattern":new ri(me.paint_line["line-pattern"]),"line-gradient":new uo(me.paint_line["line-gradient"])})},get layout(){return yg=yg||new oi({"line-cap":new Je(me.layout_line["line-cap"]),"line-join":new Ge(me.layout_line["line-join"]),"line-miter-limit":new Je(me.layout_line["line-miter-limit"]),"line-round-limit":new Je(me.layout_line["line-round-limit"]),"line-sort-key":new Ge(me.layout_line["line-sort-key"])})}};class Vx extends Ge{possiblyEvaluate(s,d){return d=new Lt(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(s,d)}evaluate(s,d,v,T){return d=ot({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(s,d,v,T)}}let od;class Ju extends Pr{constructor(s){super(s,kp),this.gradientVersion=0,od||(od=new Vx(kp.paint.properties["line-width"].specification),od.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!(function(v){return v._styleExpression!==void 0})(d)&&d._styleExpression.expression instanceof Ta,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,d){super.recalculate(s,d),this.paint._values["line-floorwidth"]=od.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new sd(s)}queryRadius(s){const d=s,v=Op(Ac("line-width",this,d),Ac("line-gap-width",this,d)),T=Ac("line-offset",this,d);return v/2+Math.abs(T)+Ec(this.paint.get("line-translate"))}queryIntersectsFeature(s,d,v,T,P,k,R){const U=rh(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),k.angle,R),Z=R/2*Op(this.paint.get("line-width").evaluate(d,v),this.paint.get("line-gap-width").evaluate(d,v)),J=this.paint.get("line-offset").evaluate(d,v);return J&&(T=(function(st,ut){const gt=[];for(let yt=0;yt<st.length;yt++){const Et=st[yt],It=[];for(let Vt=0;Vt<Et.length;Vt++){const Jt=Et[Vt-1],Ht=Et[Vt],ee=Et[Vt+1],ne=Vt===0?new O(0,0):Ht.sub(Jt)._unit()._perp(),Se=Vt===Et.length-1?new O(0,0):ee.sub(Ht)._unit()._perp(),je=ne._add(Se)._unit(),ln=je.x*Se.x+je.y*Se.y;ln!==0&&je._mult(1/ln),It.push(je._mult(ut)._add(Ht))}gt.push(It)}return gt})(T,J*R)),(function(st,ut,gt){for(let yt=0;yt<ut.length;yt++){const Et=ut[yt];if(st.length>=3){for(let It=0;It<Et.length;It++)if(ua(st,Et[It]))return!0}if(i_(st,Et,gt))return!0}return!1})(U,T,Z)}isTileClipped(){return!0}}function Op(c,s){return s>0?s+2*c:c}const C_=vi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Dp=vi([{name:"a_projected_pos",components:3,type:"Float32"}],4);vi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ld=vi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);vi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const sr=vi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),$x=vi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qx(c,s,d){return c.sections.forEach((v=>{v.text=(function(T,P,k){const R=P.layout.get("text-transform").evaluate(k,{});return R==="uppercase"?T=T.toLocaleUpperCase():R==="lowercase"&&(T=T.toLocaleLowerCase()),mt.applyArabicShaping&&(T=mt.applyArabicShaping(T)),T})(v.text,s,d)})),c}vi([{name:"triangle",components:3,type:"Uint16"}]),vi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),vi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),vi([{type:"Float32",name:"offsetX"}]),vi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),vi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const cf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var gr=24,tc=fi,_g=function(c,s,d,v,T){var P,k,R=8*T-v-1,U=(1<<R)-1,Z=U>>1,J=-7,st=T-1,ut=-1,gt=c[s+st];for(st+=ut,P=gt&(1<<-J)-1,gt>>=-J,J+=R;J>0;P=256*P+c[s+st],st+=ut,J-=8);for(k=P&(1<<-J)-1,P>>=-J,J+=v;J>0;k=256*k+c[s+st],st+=ut,J-=8);if(P===0)P=1-Z;else{if(P===U)return k?NaN:1/0*(gt?-1:1);k+=Math.pow(2,v),P-=Z}return(gt?-1:1)*k*Math.pow(2,P-v)},vg=function(c,s,d,v,T,P){var k,R,U,Z=8*P-T-1,J=(1<<Z)-1,st=J>>1,ut=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,gt=0,yt=1,Et=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(R=isNaN(s)?1:0,k=J):(k=Math.floor(Math.log(s)/Math.LN2),s*(U=Math.pow(2,-k))<1&&(k--,U*=2),(s+=k+st>=1?ut/U:ut*Math.pow(2,1-st))*U>=2&&(k++,U/=2),k+st>=J?(R=0,k=J):k+st>=1?(R=(s*U-1)*Math.pow(2,T),k+=st):(R=s*Math.pow(2,st-1)*Math.pow(2,T),k=0));T>=8;c[d+gt]=255&R,gt+=yt,R/=256,T-=8);for(k=k<<T|R,Z+=T;Z>0;c[d+gt]=255&k,gt+=yt,k/=256,Z-=8);c[d+gt-yt]|=128*Et};function fi(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}fi.Varint=0,fi.Fixed64=1,fi.Bytes=2,fi.Fixed32=5;var fl=4294967296,xg=1/fl,zp=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function gu(c){return c.type===fi.Bytes?c.readVarint()+c.pos:c.pos+1}function kc(c,s,d){return d?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}function Lp(c,s,d){var v=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));d.realloc(v);for(var T=d.pos-1;T>=c;T--)d.buf[T+v]=d.buf[T]}function Ip(c,s){for(var d=0;d<c.length;d++)s.writeVarint(c[d])}function P_(c,s){for(var d=0;d<c.length;d++)s.writeSVarint(c[d])}function ec(c,s){for(var d=0;d<c.length;d++)s.writeFloat(c[d])}function ha(c,s){for(var d=0;d<c.length;d++)s.writeDouble(c[d])}function bg(c,s){for(var d=0;d<c.length;d++)s.writeBoolean(c[d])}function k_(c,s){for(var d=0;d<c.length;d++)s.writeFixed32(c[d])}function Ua(c,s){for(var d=0;d<c.length;d++)s.writeSFixed32(c[d])}function Hx(c,s){for(var d=0;d<c.length;d++)s.writeFixed64(c[d])}function O_(c,s){for(var d=0;d<c.length;d++)s.writeSFixed64(c[d])}function ud(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+16777216*c[s+3]}function qi(c,s,d){c[d]=s,c[d+1]=s>>>8,c[d+2]=s>>>16,c[d+3]=s>>>24}function Bs(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+(c[s+3]<<24)}fi.prototype={destroy:function(){this.buf=null},readFields:function(c,s,d){for(d=d||this.length;this.pos<d;){var v=this.readVarint(),T=v>>3,P=this.pos;this.type=7&v,c(T,s,this),this.pos===P&&this.skip(v)}return s},readMessage:function(c,s){return this.readFields(c,s,this.readVarint()+this.pos)},readFixed32:function(){var c=ud(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=Bs(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=ud(this.buf,this.pos)+ud(this.buf,this.pos+4)*fl;return this.pos+=8,c},readSFixed64:function(){var c=ud(this.buf,this.pos)+Bs(this.buf,this.pos+4)*fl;return this.pos+=8,c},readFloat:function(){var c=_g(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=_g(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var s,d,v=this.buf;return s=127&(d=v[this.pos++]),d<128?s:(s|=(127&(d=v[this.pos++]))<<7,d<128?s:(s|=(127&(d=v[this.pos++]))<<14,d<128?s:(s|=(127&(d=v[this.pos++]))<<21,d<128?s:(function(T,P,k){var R,U,Z=k.buf;if(R=(112&(U=Z[k.pos++]))>>4,U<128||(R|=(127&(U=Z[k.pos++]))<<3,U<128)||(R|=(127&(U=Z[k.pos++]))<<10,U<128)||(R|=(127&(U=Z[k.pos++]))<<17,U<128)||(R|=(127&(U=Z[k.pos++]))<<24,U<128)||(R|=(1&(U=Z[k.pos++]))<<31,U<128))return kc(T,R,P);throw new Error("Expected varint not more than 10 bytes")})(s|=(15&(d=v[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,s=this.pos;return this.pos=c,c-s>=12&&zp?(function(d,v,T){return zp.decode(d.subarray(v,T))})(this.buf,s,c):(function(d,v,T){for(var P="",k=v;k<T;){var R,U,Z,J=d[k],st=null,ut=J>239?4:J>223?3:J>191?2:1;if(k+ut>T)break;ut===1?J<128&&(st=J):ut===2?(192&(R=d[k+1]))==128&&(st=(31&J)<<6|63&R)<=127&&(st=null):ut===3?(U=d[k+2],(192&(R=d[k+1]))==128&&(192&U)==128&&((st=(15&J)<<12|(63&R)<<6|63&U)<=2047||st>=55296&&st<=57343)&&(st=null)):ut===4&&(U=d[k+2],Z=d[k+3],(192&(R=d[k+1]))==128&&(192&U)==128&&(192&Z)==128&&((st=(15&J)<<18|(63&R)<<12|(63&U)<<6|63&Z)<=65535||st>=1114112)&&(st=null)),st===null?(st=65533,ut=1):st>65535&&(st-=65536,P+=String.fromCharCode(st>>>10&1023|55296),st=56320|1023&st),P+=String.fromCharCode(st),k+=ut}return P})(this.buf,s,c)},readBytes:function(){var c=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,c);return this.pos=c,s},readPackedVarint:function(c,s){if(this.type!==fi.Bytes)return c.push(this.readVarint(s));var d=gu(this);for(c=c||[];this.pos<d;)c.push(this.readVarint(s));return c},readPackedSVarint:function(c){if(this.type!==fi.Bytes)return c.push(this.readSVarint());var s=gu(this);for(c=c||[];this.pos<s;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==fi.Bytes)return c.push(this.readBoolean());var s=gu(this);for(c=c||[];this.pos<s;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==fi.Bytes)return c.push(this.readFloat());var s=gu(this);for(c=c||[];this.pos<s;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==fi.Bytes)return c.push(this.readDouble());var s=gu(this);for(c=c||[];this.pos<s;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==fi.Bytes)return c.push(this.readFixed32());var s=gu(this);for(c=c||[];this.pos<s;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==fi.Bytes)return c.push(this.readSFixed32());var s=gu(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==fi.Bytes)return c.push(this.readFixed64());var s=gu(this);for(c=c||[];this.pos<s;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==fi.Bytes)return c.push(this.readSFixed64());var s=gu(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed64());return c},skip:function(c){var s=7&c;if(s===fi.Varint)for(;this.buf[this.pos++]>127;);else if(s===fi.Bytes)this.pos=this.readVarint()+this.pos;else if(s===fi.Fixed32)this.pos+=4;else{if(s!==fi.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(c,s){this.writeVarint(c<<3|s)},realloc:function(c){for(var s=this.length||16;s<this.pos+c;)s*=2;if(s!==this.length){var d=new Uint8Array(s);d.set(this.buf),this.buf=d,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),qi(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),qi(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),qi(this.buf,-1&c,this.pos),qi(this.buf,Math.floor(c*xg),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),qi(this.buf,-1&c,this.pos),qi(this.buf,Math.floor(c*xg),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?(function(s,d){var v,T;if(s>=0?(v=s%4294967296|0,T=s/4294967296|0):(T=~(-s/4294967296),4294967295^(v=~(-s%4294967296))?v=v+1|0:(v=0,T=T+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),(function(P,k,R){R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,R.buf[R.pos]=127&(P>>>=7)})(v,0,d),(function(P,k){var R=(7&P)<<4;k.buf[k.pos++]|=R|((P>>>=3)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P)))))})(T,d)})(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var s=this.pos;this.pos=(function(v,T,P){for(var k,R,U=0;U<T.length;U++){if((k=T.charCodeAt(U))>55295&&k<57344){if(!R){k>56319||U+1===T.length?(v[P++]=239,v[P++]=191,v[P++]=189):R=k;continue}if(k<56320){v[P++]=239,v[P++]=191,v[P++]=189,R=k;continue}k=R-55296<<10|k-56320|65536,R=null}else R&&(v[P++]=239,v[P++]=191,v[P++]=189,R=null);k<128?v[P++]=k:(k<2048?v[P++]=k>>6|192:(k<65536?v[P++]=k>>12|224:(v[P++]=k>>18|240,v[P++]=k>>12&63|128),v[P++]=k>>6&63|128),v[P++]=63&k|128)}return P})(this.buf,c,this.pos);var d=this.pos-s;d>=128&&Lp(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeFloat:function(c){this.realloc(4),vg(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),vg(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var s=c.length;this.writeVarint(s),this.realloc(s);for(var d=0;d<s;d++)this.buf[this.pos++]=c[d]},writeRawMessage:function(c,s){this.pos++;var d=this.pos;c(s,this);var v=this.pos-d;v>=128&&Lp(d,v,this),this.pos=d-1,this.writeVarint(v),this.pos+=v},writeMessage:function(c,s,d){this.writeTag(c,fi.Bytes),this.writeRawMessage(s,d)},writePackedVarint:function(c,s){s.length&&this.writeMessage(c,Ip,s)},writePackedSVarint:function(c,s){s.length&&this.writeMessage(c,P_,s)},writePackedBoolean:function(c,s){s.length&&this.writeMessage(c,bg,s)},writePackedFloat:function(c,s){s.length&&this.writeMessage(c,ec,s)},writePackedDouble:function(c,s){s.length&&this.writeMessage(c,ha,s)},writePackedFixed32:function(c,s){s.length&&this.writeMessage(c,k_,s)},writePackedSFixed32:function(c,s){s.length&&this.writeMessage(c,Ua,s)},writePackedFixed64:function(c,s){s.length&&this.writeMessage(c,Hx,s)},writePackedSFixed64:function(c,s){s.length&&this.writeMessage(c,O_,s)},writeBytesField:function(c,s){this.writeTag(c,fi.Bytes),this.writeBytes(s)},writeFixed32Field:function(c,s){this.writeTag(c,fi.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(c,s){this.writeTag(c,fi.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(c,s){this.writeTag(c,fi.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(c,s){this.writeTag(c,fi.Fixed64),this.writeSFixed64(s)},writeVarintField:function(c,s){this.writeTag(c,fi.Varint),this.writeVarint(s)},writeSVarintField:function(c,s){this.writeTag(c,fi.Varint),this.writeSVarint(s)},writeStringField:function(c,s){this.writeTag(c,fi.Bytes),this.writeString(s)},writeFloatField:function(c,s){this.writeTag(c,fi.Fixed32),this.writeFloat(s)},writeDoubleField:function(c,s){this.writeTag(c,fi.Fixed64),this.writeDouble(s)},writeBooleanField:function(c,s){this.writeVarintField(c,!!s)}};var jl=_(tc);const Rp=3;function D_(c,s,d){c===1&&d.readMessage(z_,s)}function z_(c,s,d){if(c===3){const{id:v,bitmap:T,width:P,height:k,left:R,top:U,advance:Z}=d.readMessage(Zx,{});s.push({id:v,bitmap:new ef({width:P+2*Rp,height:k+2*Rp},T),metrics:{width:P,height:k,left:R,top:U,advance:Z}})}}function Zx(c,s,d){c===1?s.id=d.readVarint():c===2?s.bitmap=d.readBytes():c===3?s.width=d.readVarint():c===4?s.height=d.readVarint():c===5?s.left=d.readSVarint():c===6?s.top=d.readSVarint():c===7&&(s.advance=d.readVarint())}const cd=Rp;function Ns(c){let s=0,d=0;for(const k of c)s+=k.w*k.h,d=Math.max(d,k.w);c.sort(((k,R)=>R.h-k.h));const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),d),h:1/0}];let T=0,P=0;for(const k of c)for(let R=v.length-1;R>=0;R--){const U=v[R];if(!(k.w>U.w||k.h>U.h)){if(k.x=U.x,k.y=U.y,P=Math.max(P,k.y+k.h),T=Math.max(T,k.x+k.w),k.w===U.w&&k.h===U.h){const Z=v.pop();R<v.length&&(v[R]=Z)}else k.h===U.h?(U.x+=k.w,U.w-=k.w):k.w===U.w?(U.y+=k.h,U.h-=k.h):(v.push({x:U.x+k.w,y:U.y,w:U.w-k.w,h:k.h}),U.y+=k.h,U.h-=k.h);break}}return{w:T,h:P,fill:s/(T*P)||0}}const yr=1;class Bp{constructor(s,{pixelRatio:d,version:v,stretchX:T,stretchY:P,content:k}){this.paddedRect=s,this.pixelRatio=d,this.stretchX=T,this.stretchY=P,this.content=k,this.version=v}get tl(){return[this.paddedRect.x+yr,this.paddedRect.y+yr]}get br(){return[this.paddedRect.x+this.paddedRect.w-yr,this.paddedRect.y+this.paddedRect.h-yr]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*yr)/this.pixelRatio,(this.paddedRect.h-2*yr)/this.pixelRatio]}}class js{constructor(s,d){const v={},T={};this.haveRenderCallbacks=[];const P=[];this.addImages(s,v,P),this.addImages(d,T,P);const{w:k,h:R}=Ns(P),U=new ho({width:k||1,height:R||1});for(const Z in s){const J=s[Z],st=v[Z].paddedRect;ho.copy(J.data,U,{x:0,y:0},{x:st.x+yr,y:st.y+yr},J.data)}for(const Z in d){const J=d[Z],st=T[Z].paddedRect,ut=st.x+yr,gt=st.y+yr,yt=J.data.width,Et=J.data.height;ho.copy(J.data,U,{x:0,y:0},{x:ut,y:gt},J.data),ho.copy(J.data,U,{x:0,y:Et-1},{x:ut,y:gt-1},{width:yt,height:1}),ho.copy(J.data,U,{x:0,y:0},{x:ut,y:gt+Et},{width:yt,height:1}),ho.copy(J.data,U,{x:yt-1,y:0},{x:ut-1,y:gt},{width:1,height:Et}),ho.copy(J.data,U,{x:0,y:0},{x:ut+yt,y:gt},{width:1,height:Et})}this.image=U,this.iconPositions=v,this.patternPositions=T}addImages(s,d,v){for(const T in s){const P=s[T],k={x:0,y:0,w:P.data.width+2*yr,h:P.data.height+2*yr};v.push(k),d[T]=new Bp(k,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(T)}}patchUpdatedImages(s,d){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in s.updatedImages)this.patchUpdatedImage(this.iconPositions[v],s.getImage(v),d),this.patchUpdatedImage(this.patternPositions[v],s.getImage(v),d)}patchUpdatedImage(s,d,v){if(!s||!d||s.version===d.version)return;s.version=d.version;const[T,P]=s.tl;v.update(d.data,void 0,{x:T,y:P})}}var nc;Ze("ImagePosition",Bp),Ze("ImageAtlas",js),a.ai=void 0,(nc=a.ai||(a.ai={}))[nc.none=0]="none",nc[nc.horizontal=1]="horizontal",nc[nc.vertical=2]="vertical",nc[nc.horizontalOnly=3]="horizontalOnly";const Zo=-17;class Fl{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,d){const v=new Fl;return v.scale=s||1,v.fontStack=d,v}static forImage(s){const d=new Fl;return d.imageName=s,d}}class fo{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,d){const v=new fo;for(let T=0;T<s.sections.length;T++){const P=s.sections[T];P.image?v.addImageSection(P):v.addTextSection(P,d)}return v}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=(function(s){let d="";for(let v=0;v<s.length;v++){const T=s.charCodeAt(v+1)||null,P=s.charCodeAt(v-1)||null;d+=T&&Jh(T)&&!cf[s[v+1]]||P&&Jh(P)&&!cf[s[v-1]]||!cf[s[v]]?s[v]:cf[s[v]]}return d})(this.text)}trim(){let s=0;for(let v=0;v<this.text.length&&ff[this.text.charCodeAt(v)];v++)s++;let d=this.text.length;for(let v=this.text.length-1;v>=0&&v>=s&&ff[this.text.charCodeAt(v)];v--)d--;this.text=this.text.substring(s,d),this.sectionIndex=this.sectionIndex.slice(s,d)}substring(s,d){const v=new fo;return v.text=this.text.substring(s,d),v.sectionIndex=this.sectionIndex.slice(s,d),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((s,d)=>Math.max(s,this.sections[d].scale)),0)}addTextSection(s,d){this.text+=s.text,this.sections.push(Fl.forText(s.scale,s.fontStack||d));const v=this.sections.length-1;for(let T=0;T<s.text.length;++T)this.sectionIndex.push(v)}addImageSection(s){const d=s.image?s.image.name:"";if(d.length===0)return void ve("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(Fl.forImage(d)),this.sectionIndex.push(this.sections.length-1)):ve("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hf(c,s,d,v,T,P,k,R,U,Z,J,st,ut,gt,yt,Et){const It=fo.fromFeature(c,T);let Vt;st===a.ai.vertical&&It.verticalizePunctuation();const{processBidirectionalText:Jt,processStyledBidirectionalText:Ht}=mt;if(Jt&&It.sections.length===1){Vt=[];const Se=Jt(It.toString(),Np(It,Z,P,s,v,gt,yt));for(const je of Se){const ln=new fo;ln.text=je,ln.sections=It.sections;for(let Xe=0;Xe<je.length;Xe++)ln.sectionIndex.push(0);Vt.push(ln)}}else if(Ht){Vt=[];const Se=Ht(It.text,It.sectionIndex,Np(It,Z,P,s,v,gt,yt));for(const je of Se){const ln=new fo;ln.text=je[0],ln.sectionIndex=je[1],ln.sections=It.sections,Vt.push(ln)}}else Vt=(function(Se,je){const ln=[],Xe=Se.text;let We=0;for(const Ue of je)ln.push(Se.substring(We,Ue)),We=Ue;return We<Xe.length&&ln.push(Se.substring(We,Xe.length)),ln})(It,Np(It,Z,P,s,v,gt,yt));const ee=[],ne={positionedLines:ee,text:It.toString(),top:J[1],bottom:J[1],left:J[0],right:J[0],writingMode:st,iconsInText:!1,verticalizable:!1};return(function(Se,je,ln,Xe,We,Ue,en,$e,Re,pn,un,jn){let Yi=0,Xi=Zo,ta=0,Vs=0;const bs=$e==="right"?1:$e==="left"?0:.5;let qr=0;for(const ea of We){ea.trim();const na=ea.getMaxScale(),$a=(na-1)*gr,qa={positionedGlyphs:[],lineOffset:0};Se.positionedLines[qr]=qa;const Pa=qa.positionedGlyphs;let $s=0;if(!ea.length()){Xi+=Ue,++qr;continue}for(let Lr=0;Lr<ea.length();Lr++){const Zn=ea.getSection(Lr),Ha=ea.getSectionIndex(Lr),ka=ea.getCharCode(Lr);let _r=0,Ir=null,pl=null,_o=null,rs=gr;const ml=!(Re===a.ai.horizontal||!un&&!jo(ka)||un&&(ff[ka]||(lr=ka,Ye.Arabic(lr)||Ye["Arabic Supplement"](lr)||Ye["Arabic Extended-A"](lr)||Ye["Arabic Presentation Forms-A"](lr)||Ye["Arabic Presentation Forms-B"](lr))));if(Zn.imageName){const Go=Xe[Zn.imageName];if(!Go)continue;_o=Zn.imageName,Se.iconsInText=Se.iconsInText||!0,pl=Go.paddedRect;const da=Go.displaySize;Zn.scale=Zn.scale*gr/jn,Ir={width:da[0],height:da[1],left:yr,top:-cd,advance:ml?da[1]:da[0]},_r=$a+(gr-da[1]*Zn.scale),rs=Ir.advance;const bu=ml?da[0]*Zn.scale-gr*na:da[1]*Zn.scale-gr*na;bu>0&&bu>$s&&($s=bu)}else{const Go=ln[Zn.fontStack],da=Go&&Go[ka];if(da&&da.rect)pl=da.rect,Ir=da.metrics;else{const bu=je[Zn.fontStack],Ed=bu&&bu[ka];if(!Ed)continue;Ir=Ed.metrics}_r=(na-Zn.scale)*gr}ml?(Se.verticalizable=!0,Pa.push({glyph:ka,imageName:_o,x:Yi,y:Xi+_r,vertical:ml,scale:Zn.scale,fontStack:Zn.fontStack,sectionIndex:Ha,metrics:Ir,rect:pl}),Yi+=rs*Zn.scale+pn):(Pa.push({glyph:ka,imageName:_o,x:Yi,y:Xi+_r,vertical:ml,scale:Zn.scale,fontStack:Zn.fontStack,sectionIndex:Ha,metrics:Ir,rect:pl}),Yi+=Ir.advance*Zn.scale+pn)}Pa.length!==0&&(ta=Math.max(Yi-pn,ta),fd(Pa,0,Pa.length-1,bs,$s)),Yi=0;const ur=Ue*na+$s;qa.lineOffset=Math.max($s,$a),Xi+=ur,Vs=Math.max(ur,Vs),++qr}var lr;const Ca=Xi-Zo,{horizontalAlign:is,verticalAlign:Va}=jp(en);(function(ea,na,$a,qa,Pa,$s,ur,Lr,Zn){const Ha=(na-$a)*Pa;let ka=0;ka=$s!==ur?-Lr*qa-Zo:(-qa*Zn+.5)*ur;for(const _r of ea)for(const Ir of _r.positionedGlyphs)Ir.x+=Ha,Ir.y+=ka})(Se.positionedLines,bs,is,Va,ta,Vs,Ue,Ca,We.length),Se.top+=-Va*Ca,Se.bottom=Se.top+Ca,Se.left+=-is*ta,Se.right=Se.left+ta})(ne,s,d,v,Vt,k,R,U,st,Z,ut,Et),!(function(Se){for(const je of Se)if(je.positionedGlyphs.length!==0)return!1;return!0})(ee)&&ne}const ff={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ul={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function wg(c,s,d,v,T,P){if(s.imageName){const k=v[s.imageName];return k?k.displaySize[0]*s.scale*gr/P+T:0}{const k=d[s.fontStack],R=k&&k[c];return R?R.metrics.advance*s.scale+T:0}}function ch(c,s,d,v){const T=Math.pow(c-s,2);return v?c<s?T/2:2*T:T+Math.abs(d)*d}function hd(c,s,d){let v=0;return c===10&&(v-=1e4),d&&(v+=150),c!==40&&c!==65288||(v+=50),s!==41&&s!==65289||(v+=50),v}function df(c,s,d,v,T,P){let k=null,R=ch(s,d,T,P);for(const U of v){const Z=ch(s-U.x,d,T,P)+U.badness;Z<=R&&(k=U,R=Z)}return{index:c,x:s,priorBreak:k,badness:R}}function hh(c){return c?hh(c.priorBreak).concat(c.index):[]}function Np(c,s,d,v,T,P,k){if(P!=="point")return[];if(!c)return[];const R=[],U=(function(ut,gt,yt,Et,It,Vt){let Jt=0;for(let Ht=0;Ht<ut.length();Ht++){const ee=ut.getSection(Ht);Jt+=wg(ut.getCharCode(Ht),ee,Et,It,gt,Vt)}return Jt/Math.max(1,Math.ceil(Jt/yt))})(c,s,d,v,T,k),Z=c.text.indexOf("")>=0;let J=0;for(let ut=0;ut<c.length();ut++){const gt=c.getSection(ut),yt=c.getCharCode(ut);if(ff[yt]||(J+=wg(yt,gt,v,T,s,k)),ut<c.length()-1){const Et=!((st=yt)<11904||!(Ye["Bopomofo Extended"](st)||Ye.Bopomofo(st)||Ye["CJK Compatibility Forms"](st)||Ye["CJK Compatibility Ideographs"](st)||Ye["CJK Compatibility"](st)||Ye["CJK Radicals Supplement"](st)||Ye["CJK Strokes"](st)||Ye["CJK Symbols and Punctuation"](st)||Ye["CJK Unified Ideographs Extension A"](st)||Ye["CJK Unified Ideographs"](st)||Ye["Enclosed CJK Letters and Months"](st)||Ye["Halfwidth and Fullwidth Forms"](st)||Ye.Hiragana(st)||Ye["Ideographic Description Characters"](st)||Ye["Kangxi Radicals"](st)||Ye["Katakana Phonetic Extensions"](st)||Ye.Katakana(st)||Ye["Vertical Forms"](st)||Ye["Yi Radicals"](st)||Ye["Yi Syllables"](st)));(Ul[yt]||Et||gt.imageName)&&R.push(df(ut+1,J,U,R,hd(yt,c.getCharCode(ut+1),Et&&Z),!1))}}var st;return hh(df(c.length(),J,U,R,0,!0))}function jp(c){let s=.5,d=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:s,verticalAlign:d}}function fd(c,s,d,v,T){if(!v&&!T)return;const P=c[d],k=(c[d].x+P.metrics.advance*P.scale)*v;for(let R=s;R<=d;R++)c[R].x-=k,c[R].y+=T}function L_(c,s,d){const{horizontalAlign:v,verticalAlign:T}=jp(d),P=s[0]-c.displaySize[0]*v,k=s[1]-c.displaySize[1]*T;return{image:c,top:k,bottom:k+c.displaySize[1],left:P,right:P+c.displaySize[0]}}function dd(c,s,d,v,T,P){const k=c.image;let R;if(k.content){const It=k.content,Vt=k.pixelRatio||1;R=[It[0]/Vt,It[1]/Vt,k.displaySize[0]-It[2]/Vt,k.displaySize[1]-It[3]/Vt]}const U=s.left*P,Z=s.right*P;let J,st,ut,gt;d==="width"||d==="both"?(gt=T[0]+U-v[3],st=T[0]+Z+v[1]):(gt=T[0]+(U+Z-k.displaySize[0])/2,st=gt+k.displaySize[0]);const yt=s.top*P,Et=s.bottom*P;return d==="height"||d==="both"?(J=T[1]+yt-v[0],ut=T[1]+Et+v[2]):(J=T[1]+(yt+Et-k.displaySize[1])/2,ut=J+k.displaySize[1]),{image:k,top:J,right:st,bottom:ut,left:gt,collisionPadding:R}}const pf=255,yu=128,Oc=pf*yu;function Ci(c,s){const{expression:d}=s;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Lt(c+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:T}=d;let P=0;for(;P<v.length&&v[P]<=c;)P++;P=Math.max(0,P-1);let k=P;for(;k<v.length&&v[k]<c+1;)k++;k=Math.min(v.length-1,k);const R=v[P],U=v[k];return d.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:U,interpolationType:T}:{kind:"camera",minZoom:R,maxZoom:U,minSize:d.evaluate(new Lt(R)),maxSize:d.evaluate(new Lt(U)),interpolationType:T}}}function Hi(c,s,d){let v="never";const T=c.get(s);return T?v=T:c.get(d)&&(v="always"),v}const ai=Qu.VectorTileFeature.types,li=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Pi(c,s,d,v,T,P,k,R,U,Z,J,st,ut){const gt=R?Math.min(Oc,Math.round(R[0])):0,yt=R?Math.min(Oc,Math.round(R[1])):0;c.emplaceBack(s,d,Math.round(32*v),Math.round(32*T),P,k,(gt<<1)+(U?1:0),yt,16*Z,16*J,256*st,256*ut)}function Fs(c,s,d){c.emplaceBack(s.x,s.y,d),c.emplaceBack(s.x,s.y,d),c.emplaceBack(s.x,s.y,d),c.emplaceBack(s.x,s.y,d)}function Dc(c){for(const s of c.sections)if(oo(s.text))return!0;return!1}class zc{constructor(s){this.layoutVertexArray=new Ln,this.indexArray=new oa,this.programConfigurations=s,this.segments=new Bi,this.dynamicLayoutVertexArray=new Cn,this.opacityVertexArray=new Fn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Wt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,d,v,T){this.isEmpty()||(v&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,C_.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,Dp.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,li,!0),this.opacityVertexBuffer.itemSize=1),(v||T)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ze("SymbolBuffers",zc);class pd{constructor(s,d,v){this.layoutVertexArray=new s,this.layoutAttributes=d,this.indexArray=new v,this.segments=new Bi,this.collisionVertexArray=new Ei}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,ld.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ze("CollisionBuffers",pd);class po{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((k=>k.id)),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=pp([]),this.placementViewportMatrix=pp([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ci(this.zoom,d["text-size"]),this.iconSizeData=Ci(this.zoom,d["icon-size"]);const v=this.layers[0].layout,T=v.get("symbol-sort-key"),P=v.get("symbol-z-order");this.canOverlap=Hi(v,"text-overlap","text-allow-overlap")!=="never"||Hi(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&!T.isConstant(),this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map((k=>a.ai[k]))),this.stateDependentLayerIds=this.layers.filter((k=>k.isStateDependent())).map((k=>k.id)),this.sourceID=s.sourceID}createArrays(){this.text=new zc(new An(this.layers,this.zoom,(s=>/^text/.test(s)))),this.icon=new zc(new An(this.layers,this.zoom,(s=>/^icon/.test(s)))),this.glyphOffsetArray=new Kt,this.lineVertexArray=new ue,this.symbolInstances=new Rt,this.textAnchorOffsets=new be}calculateGlyphDependencies(s,d,v,T,P){for(let k=0;k<s.length;k++)if(d[s.charCodeAt(k)]=!0,(v||T)&&P){const R=cf[s.charAt(k)];R&&(d[R.charCodeAt(0)]=!0)}}populate(s,d,v){const T=this.layers[0],P=T.layout,k=P.get("text-font"),R=P.get("text-field"),U=P.get("icon-image"),Z=(R.value.kind!=="constant"||R.value.value instanceof Fr&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),J=U.value.kind!=="constant"||!!U.value.value||Object.keys(U.parameters).length>0,st=P.get("symbol-sort-key");if(this.features=[],!Z&&!J)return;const ut=d.iconDependencies,gt=d.glyphDependencies,yt=d.availableImages,Et=new Lt(this.zoom);for(const{feature:It,id:Vt,index:Jt,sourceLayerIndex:Ht}of s){const ee=T._featureFilter.needGeometry,ne=Nl(It,ee);if(!T._featureFilter.filter(Et,ne,v))continue;let Se,je;if(ee||(ne.geometry=du(It)),Z){const Xe=T.getValueAndResolveTokens("text-field",ne,v,yt),We=Fr.factory(Xe);Dc(We)&&(this.hasRTLText=!0),(!this.hasRTLText||V()==="unavailable"||this.hasRTLText&&mt.isParsed())&&(Se=qx(We,T,ne))}if(J){const Xe=T.getValueAndResolveTokens("icon-image",ne,v,yt);je=Xe instanceof Rn?Xe:Rn.fromString(Xe)}if(!Se&&!je)continue;const ln=this.sortFeaturesByKey?st.evaluate(ne,{},v):void 0;if(this.features.push({id:Vt,text:Se,icon:je,index:Jt,sourceLayerIndex:Ht,geometry:ne.geometry,properties:It.properties,type:ai[It.type],sortKey:ln}),je&&(ut[je.name]=!0),Se){const Xe=k.evaluate(ne,{},v).join(","),We=P.get("text-rotation-alignment")!=="viewport"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const Ue of Se.sections)if(Ue.image)ut[Ue.image.name]=!0;else{const en=gs(Se.toString()),$e=Ue.fontStack||Xe,Re=gt[$e]=gt[$e]||{};this.calculateGlyphDependencies(Ue.text,Re,We,this.allowVerticalPlacement,en)}}}P.get("symbol-placement")==="line"&&(this.features=(function(It){const Vt={},Jt={},Ht=[];let ee=0;function ne(Xe){Ht.push(It[Xe]),ee++}function Se(Xe,We,Ue){const en=Jt[Xe];return delete Jt[Xe],Jt[We]=en,Ht[en].geometry[0].pop(),Ht[en].geometry[0]=Ht[en].geometry[0].concat(Ue[0]),en}function je(Xe,We,Ue){const en=Vt[We];return delete Vt[We],Vt[Xe]=en,Ht[en].geometry[0].shift(),Ht[en].geometry[0]=Ue[0].concat(Ht[en].geometry[0]),en}function ln(Xe,We,Ue){const en=Ue?We[0][We[0].length-1]:We[0][0];return`${Xe}:${en.x}:${en.y}`}for(let Xe=0;Xe<It.length;Xe++){const We=It[Xe],Ue=We.geometry,en=We.text?We.text.toString():null;if(!en){ne(Xe);continue}const $e=ln(en,Ue),Re=ln(en,Ue,!0);if($e in Jt&&Re in Vt&&Jt[$e]!==Vt[Re]){const pn=je($e,Re,Ue),un=Se($e,Re,Ht[pn].geometry);delete Vt[$e],delete Jt[Re],Jt[ln(en,Ht[un].geometry,!0)]=un,Ht[pn].geometry=null}else $e in Jt?Se($e,Re,Ue):Re in Vt?je($e,Re,Ue):(ne(Xe),Vt[$e]=ee-1,Jt[Re]=ee-1)}return Ht.filter((Xe=>Xe.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((It,Vt)=>It.sortKey-Vt.sortKey))}update(s,d,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,d,this.layers,v),this.icon.programConfigurations.updatePaintArrays(s,d,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,d){const v=this.lineVertexArray.length;if(s.segment!==void 0){let T=s.dist(d[s.segment+1]),P=s.dist(d[s.segment]);const k={};for(let R=s.segment+1;R<d.length;R++)k[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:T},R<d.length-1&&(T+=d[R+1].dist(d[R]));for(let R=s.segment||0;R>=0;R--)k[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:P},R>0&&(P+=d[R-1].dist(d[R]));for(let R=0;R<d.length;R++){const U=k[R];this.lineVertexArray.emplaceBack(U.x,U.y,U.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(s,d,v,T,P,k,R,U,Z,J,st,ut){const gt=s.indexArray,yt=s.layoutVertexArray,Et=s.segments.prepareSegment(4*d.length,yt,gt,this.canOverlap?k.sortKey:void 0),It=this.glyphOffsetArray.length,Vt=Et.vertexLength,Jt=this.allowVerticalPlacement&&R===a.ai.vertical?Math.PI/2:0,Ht=k.text&&k.text.sections;for(let ee=0;ee<d.length;ee++){const{tl:ne,tr:Se,bl:je,br:ln,tex:Xe,pixelOffsetTL:We,pixelOffsetBR:Ue,minFontScaleX:en,minFontScaleY:$e,glyphOffset:Re,isSDF:pn,sectionIndex:un}=d[ee],jn=Et.vertexLength,Yi=Re[1];Pi(yt,U.x,U.y,ne.x,Yi+ne.y,Xe.x,Xe.y,v,pn,We.x,We.y,en,$e),Pi(yt,U.x,U.y,Se.x,Yi+Se.y,Xe.x+Xe.w,Xe.y,v,pn,Ue.x,We.y,en,$e),Pi(yt,U.x,U.y,je.x,Yi+je.y,Xe.x,Xe.y+Xe.h,v,pn,We.x,Ue.y,en,$e),Pi(yt,U.x,U.y,ln.x,Yi+ln.y,Xe.x+Xe.w,Xe.y+Xe.h,v,pn,Ue.x,Ue.y,en,$e),Fs(s.dynamicLayoutVertexArray,U,Jt),gt.emplaceBack(jn,jn+1,jn+2),gt.emplaceBack(jn+1,jn+2,jn+3),Et.vertexLength+=4,Et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Re[0]),ee!==d.length-1&&un===d[ee+1].sectionIndex||s.programConfigurations.populatePaintArrays(yt.length,k,k.index,{},ut,Ht&&Ht[un])}s.placedSymbolArray.emplaceBack(U.x,U.y,It,this.glyphOffsetArray.length-It,Vt,Z,J,U.segment,v?v[0]:0,v?v[1]:0,T[0],T[1],R,0,!1,0,st)}_addCollisionDebugVertex(s,d,v,T,P,k){return d.emplaceBack(0,0),s.emplaceBack(v.x,v.y,T,P,Math.round(k.x),Math.round(k.y))}addCollisionDebugVertices(s,d,v,T,P,k,R){const U=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),Z=U.vertexLength,J=P.layoutVertexArray,st=P.collisionVertexArray,ut=R.anchorX,gt=R.anchorY;this._addCollisionDebugVertex(J,st,k,ut,gt,new O(s,d)),this._addCollisionDebugVertex(J,st,k,ut,gt,new O(v,d)),this._addCollisionDebugVertex(J,st,k,ut,gt,new O(v,T)),this._addCollisionDebugVertex(J,st,k,ut,gt,new O(s,T)),U.vertexLength+=4;const yt=P.indexArray;yt.emplaceBack(Z,Z+1),yt.emplaceBack(Z+1,Z+2),yt.emplaceBack(Z+2,Z+3),yt.emplaceBack(Z+3,Z),U.primitiveLength+=4}addDebugCollisionBoxes(s,d,v,T){for(let P=s;P<d;P++){const k=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,T?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pd(Gi,sr.members,Ji),this.iconCollisionBox=new pd(Gi,sr.members,Ji);for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(s,d,v,T,P,k,R,U,Z){const J={};for(let st=d;st<v;st++){const ut=s.get(st);J.textBox={x1:ut.x1,y1:ut.y1,x2:ut.x2,y2:ut.y2,anchorPointX:ut.anchorPointX,anchorPointY:ut.anchorPointY},J.textFeatureIndex=ut.featureIndex;break}for(let st=T;st<P;st++){const ut=s.get(st);J.verticalTextBox={x1:ut.x1,y1:ut.y1,x2:ut.x2,y2:ut.y2,anchorPointX:ut.anchorPointX,anchorPointY:ut.anchorPointY},J.verticalTextFeatureIndex=ut.featureIndex;break}for(let st=k;st<R;st++){const ut=s.get(st);J.iconBox={x1:ut.x1,y1:ut.y1,x2:ut.x2,y2:ut.y2,anchorPointX:ut.anchorPointX,anchorPointY:ut.anchorPointY},J.iconFeatureIndex=ut.featureIndex;break}for(let st=U;st<Z;st++){const ut=s.get(st);J.verticalIconBox={x1:ut.x1,y1:ut.y1,x2:ut.x2,y2:ut.y2,anchorPointX:ut.anchorPointX,anchorPointY:ut.anchorPointY},J.verticalIconFeatureIndex=ut.featureIndex;break}return J}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const v=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,d){const v=s.placedSymbolArray.get(d),T=v.vertexStartIndex+4*v.numGlyphs;for(let P=v.vertexStartIndex;P<T;P+=4)s.indexArray.emplaceBack(P,P+1,P+2),s.indexArray.emplaceBack(P+1,P+2,P+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(s),v=Math.cos(s),T=[],P=[],k=[];for(let R=0;R<this.symbolInstances.length;++R){k.push(R);const U=this.symbolInstances.get(R);T.push(0|Math.round(d*U.anchorX+v*U.anchorY)),P.push(U.featureIndex)}return k.sort(((R,U)=>T[R]-T[U]||P[U]-P[R])),k}addToSortKeyRanges(s,d){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===d?v.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const v=this.symbolInstances.get(d);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach(((T,P,k)=>{T>=0&&k.indexOf(T)===P&&this.addIndicesForPlacedSymbol(this.text,T)})),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let zr,ic;Ze("SymbolBucket",po,{omit:["layers","collisionBoxArray","features","compareText"]}),po.MAX_GLYPHS=65535,po.addDynamicAttributes=Fs;var rc={get paint(){return ic=ic||new oi({"icon-opacity":new Ge(me.paint_symbol["icon-opacity"]),"icon-color":new Ge(me.paint_symbol["icon-color"]),"icon-halo-color":new Ge(me.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ge(me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ge(me.paint_symbol["icon-halo-blur"]),"icon-translate":new Je(me.paint_symbol["icon-translate"]),"icon-translate-anchor":new Je(me.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ge(me.paint_symbol["text-opacity"]),"text-color":new Ge(me.paint_symbol["text-color"],{runtimeType:Mr,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Ge(me.paint_symbol["text-halo-color"]),"text-halo-width":new Ge(me.paint_symbol["text-halo-width"]),"text-halo-blur":new Ge(me.paint_symbol["text-halo-blur"]),"text-translate":new Je(me.paint_symbol["text-translate"]),"text-translate-anchor":new Je(me.paint_symbol["text-translate-anchor"])})},get layout(){return zr=zr||new oi({"symbol-placement":new Je(me.layout_symbol["symbol-placement"]),"symbol-spacing":new Je(me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Je(me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ge(me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Je(me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Je(me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Je(me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Je(me.layout_symbol["icon-ignore-placement"]),"icon-optional":new Je(me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Je(me.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ge(me.layout_symbol["icon-size"]),"icon-text-fit":new Je(me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Je(me.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ge(me.layout_symbol["icon-image"]),"icon-rotate":new Ge(me.layout_symbol["icon-rotate"]),"icon-padding":new Ge(me.layout_symbol["icon-padding"]),"icon-keep-upright":new Je(me.layout_symbol["icon-keep-upright"]),"icon-offset":new Ge(me.layout_symbol["icon-offset"]),"icon-anchor":new Ge(me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Je(me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Je(me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Je(me.layout_symbol["text-rotation-alignment"]),"text-field":new Ge(me.layout_symbol["text-field"]),"text-font":new Ge(me.layout_symbol["text-font"]),"text-size":new Ge(me.layout_symbol["text-size"]),"text-max-width":new Ge(me.layout_symbol["text-max-width"]),"text-line-height":new Je(me.layout_symbol["text-line-height"]),"text-letter-spacing":new Ge(me.layout_symbol["text-letter-spacing"]),"text-justify":new Ge(me.layout_symbol["text-justify"]),"text-radial-offset":new Ge(me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Je(me.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ge(me.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ge(me.layout_symbol["text-anchor"]),"text-max-angle":new Je(me.layout_symbol["text-max-angle"]),"text-writing-mode":new Je(me.layout_symbol["text-writing-mode"]),"text-rotate":new Ge(me.layout_symbol["text-rotate"]),"text-padding":new Je(me.layout_symbol["text-padding"]),"text-keep-upright":new Je(me.layout_symbol["text-keep-upright"]),"text-transform":new Ge(me.layout_symbol["text-transform"]),"text-offset":new Ge(me.layout_symbol["text-offset"]),"text-allow-overlap":new Je(me.layout_symbol["text-allow-overlap"]),"text-overlap":new Je(me.layout_symbol["text-overlap"]),"text-ignore-placement":new Je(me.layout_symbol["text-ignore-placement"]),"text-optional":new Je(me.layout_symbol["text-optional"])})}};class Fp{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:fr,this.defaultValue=s}evaluate(s){if(s.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(s.formattedSection))return d.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ze("FormatSectionOverride",Fp,{omit:["defaultValue"]});class xs extends Pr{constructor(s){super(s,rc)}recalculate(s,d){if(super.recalculate(s,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const T=[];for(const P of v)T.indexOf(P)<0&&T.push(P);this.layout._values["text-writing-mode"]=T}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,d,v,T){const P=this.layout.get(s).evaluate(d,{},v,T),k=this._unevaluatedLayout._values[s];return k.isDataDriven()||Nu(k.value)||!P?P:(function(R,U){return U.replace(/{([^{}]+)}/g,((Z,J)=>R&&J in R?String(R[J]):""))})(d.properties,P)}createBucket(s){return new po(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of rc.paint.overridableProperties){if(!xs.hasPaintOverride(this.layout,s))continue;const d=this.paint.get(s),v=new Fp(d),T=new iu(v,d.property.specification);let P=null;P=d.value.kind==="constant"||d.value.kind==="source"?new Fu("source",T):new Oo("composite",T,d.value.zoomStops),this.paint._values[s]=new ci(d.property,P,d.parameters)}}_handleOverridablePaintPropertyUpdate(s,d,v){return!(!this.layout||d.isDataDriven()||v.isDataDriven())&&xs.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,d){const v=s.get("text-field"),T=rc.paint.properties[d];let P=!1;const k=R=>{for(const U of R)if(T.overrides&&T.overrides.hasOverride(U))return void(P=!0)};if(v.value.kind==="constant"&&v.value.value instanceof Fr)k(v.value.value.sections);else if(v.value.kind==="source"){const R=Z=>{P||(Z instanceof Tn&&mi(Z.value)===kt?k(Z.value.sections):Z instanceof ks?k(Z.sections):Z.eachChild(R))},U=v.value;U._styleExpression&&R(U._styleExpression.expression)}return P}}let fh;var md={get paint(){return fh=fh||new oi({"background-color":new Je(me.paint_background["background-color"]),"background-pattern":new Xn(me.paint_background["background-pattern"]),"background-opacity":new Je(me.paint_background["background-opacity"])})}};class mo extends Pr{constructor(s){super(s,md)}}let Up;var Vp={get paint(){return Up=Up||new oi({"raster-opacity":new Je(me.paint_raster["raster-opacity"]),"raster-hue-rotate":new Je(me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Je(me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Je(me.paint_raster["raster-brightness-max"]),"raster-saturation":new Je(me.paint_raster["raster-saturation"]),"raster-contrast":new Je(me.paint_raster["raster-contrast"]),"raster-resampling":new Je(me.paint_raster["raster-resampling"]),"raster-fade-duration":new Je(me.paint_raster["raster-fade-duration"])})}};class I_ extends Pr{constructor(s){super(s,Vp)}}class $p extends Pr{constructor(s){super(s,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class qp{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const _u=63710088e-1;class or{constructor(s,d){if(isNaN(s)||isNaN(d))throw new Error(`Invalid LngLat object: (${s}, ${d})`);if(this.lng=+s,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new or(ht(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const d=Math.PI/180,v=this.lat*d,T=s.lat*d,P=Math.sin(v)*Math.sin(T)+Math.cos(v)*Math.cos(T)*Math.cos((s.lng-this.lng)*d);return _u*Math.acos(Math.min(P,1))}static convert(s){if(s instanceof or)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new or(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new or(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ac=2*Math.PI*_u;function dh(c){return ac*Math.cos(c*Math.PI/180)}function vu(c){return(180+c)/360}function Hp(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function Zp(c,s){return c/dh(s)}function Sg(c){return 360*c-180}function ph(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class mf{constructor(s,d,v=0){this.x=+s,this.y=+d,this.z=+v}static fromLngLat(s,d=0){const v=or.convert(s);return new mf(vu(v.lng),Hp(v.lat),Zp(d,v.lat))}toLngLat(){return new or(Sg(this.x),ph(this.y))}toAltitude(){return this.z*dh(ph(this.y))}meterInMercatorCoordinateUnits(){return 1/ac*(s=ph(this.y),1/Math.cos(s*Math.PI/180));var s}}function go(c,s,d){var v=2*Math.PI*6378137/256/Math.pow(2,d);return[c*v-2*Math.PI*6378137/2,s*v-2*Math.PI*6378137/2]}class Gp{constructor(s,d,v){if(s<0||s>25||v<0||v>=Math.pow(2,s)||d<0||d>=Math.pow(2,s))throw new Error(`x=${d}, y=${v}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=d,this.y=v,this.key=gf(0,s,s,d,v)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,d,v){const T=(k=this.y,R=this.z,U=go(256*(P=this.x),256*(k=Math.pow(2,R)-k-1),R),Z=go(256*(P+1),256*(k+1),R),U[0]+","+U[1]+","+Z[0]+","+Z[1]);var P,k,R,U,Z;const J=(function(st,ut,gt){let yt,Et="";for(let It=st;It>0;It--)yt=1<<It-1,Et+=(ut&yt?1:0)+(gt&yt?2:0);return Et})(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,J).replace(/{bbox-epsg-3857}/g,T)}isChildOf(s){const d=this.z-s.z;return d>0&&s.x===this.x>>d&&s.y===this.y>>d}getTilePoint(s){const d=Math.pow(2,this.z);return new O((s.x*d-this.x)*mr,(s.y*d-this.y)*mr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Us{constructor(s,d){this.wrap=s,this.canonical=d,this.key=gf(s,d.z,d.z,d.x,d.y)}}class yo{constructor(s,d,v,T,P){if(s<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${v}`);this.overscaledZ=s,this.wrap=d,this.canonical=new Gp(v,+T,+P),this.key=gf(d,s,v,T,P)}clone(){return new yo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-s;return s>this.canonical.z?new yo(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new yo(s,this.wrap,s,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(s,d){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-s;return s>this.canonical.z?gf(this.wrap*+d,s,this.canonical.z,this.canonical.x,this.canonical.y):gf(this.wrap*+d,s,s,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const d=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>d&&s.canonical.y===this.canonical.y>>d}children(s){if(this.overscaledZ>=s)return[new yo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,v=2*this.canonical.x,T=2*this.canonical.y;return[new yo(d,this.wrap,d,v,T),new yo(d,this.wrap,d,v+1,T),new yo(d,this.wrap,d,v,T+1),new yo(d,this.wrap,d,v+1,T+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new yo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new yo(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Us(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new mf(s.x-this.wrap,s.y))}}function gf(c,s,d,v,T){(c*=2)<0&&(c=-1*c-1);const P=1<<d;return(P*P*c+P*T+v).toString(36)+d.toString(36)+s.toString(36)}Ze("CanonicalTileID",Gp),Ze("OverscaledTileID",yo,{omit:["posMatrix"]});class R_{constructor(s,d,v,T=1,P=1,k=1,R=0){if(this.uid=s,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void ve(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const U=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=T,this.greenFactor=P,this.blueFactor=k,this.baseShift=R;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Z=0;Z<U;Z++)this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z)],this.data[this._idx(U,Z)]=this.data[this._idx(U-1,Z)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z,0)],this.data[this._idx(Z,U)]=this.data[this._idx(Z,U-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(U,-1)]=this.data[this._idx(U-1,0)],this.data[this._idx(-1,U)]=this.data[this._idx(0,U-1)],this.data[this._idx(U,U)]=this.data[this._idx(U-1,U-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Z=0;Z<U;Z++)for(let J=0;J<U;J++){const st=this.get(Z,J);st>this.max&&(this.max=st),st<this.min&&(this.min=st)}}get(s,d){const v=new Uint8Array(this.data.buffer),T=4*this._idx(s,d);return this.unpack(v[T],v[T+1],v[T+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,d){if(s<-1||s>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(s+1)}unpack(s,d,v){return s*this.redFactor+d*this.greenFactor+v*this.blueFactor-this.baseShift}getPixels(){return new ho({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,d,v){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let T=d*this.dim,P=d*this.dim+this.dim,k=v*this.dim,R=v*this.dim+this.dim;switch(d){case-1:T=P-1;break;case 1:P=T+1}switch(v){case-1:k=R-1;break;case 1:R=k+1}const U=-d*this.dim,Z=-v*this.dim;for(let J=k;J<R;J++)for(let st=T;st<P;st++)this.data[this._idx(st,J)]=s.data[this._idx(st+U,J+Z)]}}Ze("DEMData",R_);class sc{constructor(s){this._stringToNumber={},this._numberToString=[];for(let d=0;d<s.length;d++){const v=s[d];this._stringToNumber[v]=d,this._numberToString[d]=v}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class gd{constructor(s,d,v,T,P){this.type="Feature",this._vectorTileFeature=s,s._z=d,s._x=v,s._y=T,this.properties=s.properties,this.id=P}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(s[d]=this[d]);return s}}class Wp{constructor(s,d){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Yr(mr,16,0),this.grid3D=new Yr(mr,16,0),this.featureIndexArray=new Ae,this.promoteId=d}insert(s,d,v,T,P,k){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,T,P);const U=k?this.grid3D:this.grid;for(let Z=0;Z<d.length;Z++){const J=d[Z],st=[1/0,1/0,-1/0,-1/0];for(let ut=0;ut<J.length;ut++){const gt=J[ut];st[0]=Math.min(st[0],gt.x),st[1]=Math.min(st[1],gt.y),st[2]=Math.max(st[2],gt.x),st[3]=Math.max(st[3],gt.y)}st[0]<mr&&st[1]<mr&&st[2]>=0&&st[3]>=0&&U.insert(R,st[0],st[1],st[2],st[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Qu.VectorTile(new jl(this.rawTileData)).layers,this.sourceLayerCoder=new sc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,d,v,T){this.loadVTLayers();const P=s.params||{},k=mr/s.tileSize/s.scale,R=ps(P.filter),U=s.queryGeometry,Z=s.queryPadding*k,J=Tg(U),st=this.grid.query(J.minX-Z,J.minY-Z,J.maxX+Z,J.maxY+Z),ut=Tg(s.cameraQueryGeometry),gt=this.grid3D.query(ut.minX-Z,ut.minY-Z,ut.maxX+Z,ut.maxY+Z,((It,Vt,Jt,Ht)=>(function(ee,ne,Se,je,ln){for(const We of ee)if(ne<=We.x&&Se<=We.y&&je>=We.x&&ln>=We.y)return!0;const Xe=[new O(ne,Se),new O(ne,ln),new O(je,ln),new O(je,Se)];if(ee.length>2){for(const We of Xe)if(ua(ee,We))return!0}for(let We=0;We<ee.length-1;We++)if(Jr(ee[We],ee[We+1],Xe))return!0;return!1})(s.cameraQueryGeometry,It-Z,Vt-Z,Jt+Z,Ht+Z)));for(const It of gt)st.push(It);st.sort(B_);const yt={};let Et;for(let It=0;It<st.length;It++){const Vt=st[It];if(Vt===Et)continue;Et=Vt;const Jt=this.featureIndexArray.get(Vt);let Ht=null;this.loadMatchingFeature(yt,Jt.bucketIndex,Jt.sourceLayerIndex,Jt.featureIndex,R,P.layers,P.availableImages,d,v,T,((ee,ne,Se)=>(Ht||(Ht=du(ee)),ne.queryIntersectsFeature(U,ee,Se,Ht,this.z,s.transform,k,s.pixelPosMatrix))))}return yt}loadMatchingFeature(s,d,v,T,P,k,R,U,Z,J,st){const ut=this.bucketLayerIDs[d];if(k&&!(function(It,Vt){for(let Jt=0;Jt<It.length;Jt++)if(Vt.indexOf(It[Jt])>=0)return!0;return!1})(k,ut))return;const gt=this.sourceLayerCoder.decode(v),yt=this.vtLayers[gt].feature(T);if(P.needGeometry){const It=Nl(yt,!0);if(!P.filter(new Lt(this.tileID.overscaledZ),It,this.tileID.canonical))return}else if(!P.filter(new Lt(this.tileID.overscaledZ),yt))return;const Et=this.getId(yt,gt);for(let It=0;It<ut.length;It++){const Vt=ut[It];if(k&&k.indexOf(Vt)<0)continue;const Jt=U[Vt];if(!Jt)continue;let Ht={};Et&&J&&(Ht=J.getState(Jt.sourceLayer||"_geojsonTileLayer",Et));const ee=ot({},Z[Vt]);ee.paint=mh(ee.paint,Jt.paint,yt,Ht,R),ee.layout=mh(ee.layout,Jt.layout,yt,Ht,R);const ne=!st||st(yt,Jt,Ht);if(!ne)continue;const Se=new gd(yt,this.z,this.x,this.y,Et);Se.layer=ee;let je=s[Vt];je===void 0&&(je=s[Vt]=[]),je.push({featureIndex:T,feature:Se,intersectionZ:ne})}}lookupSymbolFeatures(s,d,v,T,P,k,R,U){const Z={};this.loadVTLayers();const J=ps(P);for(const st of s)this.loadMatchingFeature(Z,v,T,st,J,k,R,U,d);return Z}hasLayer(s){for(const d of this.bucketLayerIDs)for(const v of d)if(s===v)return!0;return!1}getId(s,d){let v=s.id;return this.promoteId&&(v=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof v=="boolean"&&(v=Number(v))),v}}function mh(c,s,d,v,T){return xt(c,((P,k)=>{const R=s instanceof Qi?s.get(k):null;return R&&R.evaluate?R.evaluate(d,v,T):R}))}function Tg(c){let s=1/0,d=1/0,v=-1/0,T=-1/0;for(const P of c)s=Math.min(s,P.x),d=Math.min(d,P.y),v=Math.max(v,P.x),T=Math.max(T,P.y);return{minX:s,minY:d,maxX:v,maxY:T}}function B_(c,s){return s-c}function Mg(c,s,d,v,T){const P=[];for(let k=0;k<c.length;k++){const R=c[k];let U;for(let Z=0;Z<R.length-1;Z++){let J=R[Z],st=R[Z+1];J.x<s&&st.x<s||(J.x<s?J=new O(s,J.y+(s-J.x)/(st.x-J.x)*(st.y-J.y))._round():st.x<s&&(st=new O(s,J.y+(s-J.x)/(st.x-J.x)*(st.y-J.y))._round()),J.y<d&&st.y<d||(J.y<d?J=new O(J.x+(d-J.y)/(st.y-J.y)*(st.x-J.x),d)._round():st.y<d&&(st=new O(J.x+(d-J.y)/(st.y-J.y)*(st.x-J.x),d)._round()),J.x>=v&&st.x>=v||(J.x>=v?J=new O(v,J.y+(v-J.x)/(st.x-J.x)*(st.y-J.y))._round():st.x>=v&&(st=new O(v,J.y+(v-J.x)/(st.x-J.x)*(st.y-J.y))._round()),J.y>=T&&st.y>=T||(J.y>=T?J=new O(J.x+(T-J.y)/(st.y-J.y)*(st.x-J.x),T)._round():st.y>=T&&(st=new O(J.x+(T-J.y)/(st.y-J.y)*(st.x-J.x),T)._round()),U&&J.equals(U[U.length-1])||(U=[J],P.push(U)),U.push(st)))))}}return P}Ze("FeatureIndex",Wp,{omit:["rawTileData","sourceLayerCoder"]});class oc extends O{constructor(s,d,v,T){super(s,d),this.angle=v,T!==void 0&&(this.segment=T)}clone(){return new oc(this.x,this.y,this.angle,this.segment)}}function yd(c,s,d,v,T){if(s.segment===void 0||d===0)return!0;let P=s,k=s.segment+1,R=0;for(;R>-d/2;){if(k--,k<0)return!1;R-=c[k].dist(P),P=c[k]}R+=c[k].dist(c[k+1]),k++;const U=[];let Z=0;for(;R<d/2;){const J=c[k],st=c[k+1];if(!st)return!1;let ut=c[k-1].angleTo(J)-J.angleTo(st);for(ut=Math.abs((ut+3*Math.PI)%(2*Math.PI)-Math.PI),U.push({distance:R,angleDelta:ut}),Z+=ut;R-U[0].distance>v;)Z-=U.shift().angleDelta;if(Z>T)return!1;k++,R+=J.dist(st)}return!0}function Yp(c){let s=0;for(let d=0;d<c.length-1;d++)s+=c[d].dist(c[d+1]);return s}function N_(c,s,d){return c?.6*s*d:0}function j_(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function Gx(c,s,d,v,T,P){const k=N_(d,T,P),R=j_(d,v)*P;let U=0;const Z=Yp(c)/2;for(let J=0;J<c.length-1;J++){const st=c[J],ut=c[J+1],gt=st.dist(ut);if(U+gt>Z){const yt=(Z-U)/gt,Et=Ra.number(st.x,ut.x,yt),It=Ra.number(st.y,ut.y,yt),Vt=new oc(Et,It,ut.angleTo(st),J);return Vt._round(),!k||yd(c,Vt,R,k,s)?Vt:void 0}U+=gt}}function F_(c,s,d,v,T,P,k,R,U){const Z=N_(v,P,k),J=j_(v,T),st=J*k,ut=c[0].x===0||c[0].x===U||c[0].y===0||c[0].y===U;return s-st<s/4&&(s=st+s/4),Ag(c,ut?s/2*R%s:(J/2+2*P)*k*R%s,s,Z,d,st,ut,!1,U)}function Ag(c,s,d,v,T,P,k,R,U){const Z=P/2,J=Yp(c);let st=0,ut=s-d,gt=[];for(let yt=0;yt<c.length-1;yt++){const Et=c[yt],It=c[yt+1],Vt=Et.dist(It),Jt=It.angleTo(Et);for(;ut+d<st+Vt;){ut+=d;const Ht=(ut-st)/Vt,ee=Ra.number(Et.x,It.x,Ht),ne=Ra.number(Et.y,It.y,Ht);if(ee>=0&&ee<U&&ne>=0&&ne<U&&ut-Z>=0&&ut+Z<=J){const Se=new oc(ee,ne,Jt,yt);Se._round(),v&&!yd(c,Se,P,v,T)||gt.push(Se)}}st+=Vt}return R||gt.length||k||(gt=Ag(c,st/2,d,v,T,P,k,!0,U)),gt}Ze("Anchor",oc);const Vl=yr;function _d(c,s,d,v){const T=[],P=c.image,k=P.pixelRatio,R=P.paddedRect.w-2*Vl,U=P.paddedRect.h-2*Vl,Z=c.right-c.left,J=c.bottom-c.top,st=P.stretchX||[[0,R]],ut=P.stretchY||[[0,U]],gt=(Ue,en)=>Ue+en[1]-en[0],yt=st.reduce(gt,0),Et=ut.reduce(gt,0),It=R-yt,Vt=U-Et;let Jt=0,Ht=yt,ee=0,ne=Et,Se=0,je=It,ln=0,Xe=Vt;if(P.content&&v){const Ue=P.content;Jt=vd(st,0,Ue[0]),ee=vd(ut,0,Ue[1]),Ht=vd(st,Ue[0],Ue[2]),ne=vd(ut,Ue[1],Ue[3]),Se=Ue[0]-Jt,ln=Ue[1]-ee,je=Ue[2]-Ue[0]-Ht,Xe=Ue[3]-Ue[1]-ne}const We=(Ue,en,$e,Re)=>{const pn=xd(Ue.stretch-Jt,Ht,Z,c.left),un=bd(Ue.fixed-Se,je,Ue.stretch,yt),jn=xd(en.stretch-ee,ne,J,c.top),Yi=bd(en.fixed-ln,Xe,en.stretch,Et),Xi=xd($e.stretch-Jt,Ht,Z,c.left),ta=bd($e.fixed-Se,je,$e.stretch,yt),Vs=xd(Re.stretch-ee,ne,J,c.top),bs=bd(Re.fixed-ln,Xe,Re.stretch,Et),qr=new O(pn,jn),lr=new O(Xi,jn),Ca=new O(Xi,Vs),is=new O(pn,Vs),Va=new O(un/k,Yi/k),ea=new O(ta/k,bs/k),na=s*Math.PI/180;if(na){const Pa=Math.sin(na),$s=Math.cos(na),ur=[$s,-Pa,Pa,$s];qr._matMult(ur),lr._matMult(ur),is._matMult(ur),Ca._matMult(ur)}const $a=Ue.stretch+Ue.fixed,qa=en.stretch+en.fixed;return{tl:qr,tr:lr,bl:is,br:Ca,tex:{x:P.paddedRect.x+Vl+$a,y:P.paddedRect.y+Vl+qa,w:$e.stretch+$e.fixed-$a,h:Re.stretch+Re.fixed-qa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Va,pixelOffsetBR:ea,minFontScaleX:je/k/Z,minFontScaleY:Xe/k/J,isSDF:d}};if(v&&(P.stretchX||P.stretchY)){const Ue=Eg(st,It,yt),en=Eg(ut,Vt,Et);for(let $e=0;$e<Ue.length-1;$e++){const Re=Ue[$e],pn=Ue[$e+1];for(let un=0;un<en.length-1;un++)T.push(We(Re,en[un],pn,en[un+1]))}}else T.push(We({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:U+1}));return T}function vd(c,s,d){let v=0;for(const T of c)v+=Math.max(s,Math.min(d,T[1]))-Math.max(s,Math.min(d,T[0]));return v}function Eg(c,s,d){const v=[{fixed:-Vl,stretch:0}];for(const[T,P]of c){const k=v[v.length-1];v.push({fixed:T-k.stretch,stretch:k.stretch}),v.push({fixed:T-k.stretch,stretch:k.stretch+(P-T)})}return v.push({fixed:s+Vl,stretch:d}),v}function xd(c,s,d,v){return c/s*d+v}function bd(c,s,d,v){return c-s*d/v}class wd{constructor(s,d,v,T,P,k,R,U,Z,J){if(this.boxStartIndex=s.length,Z){let st=k.top,ut=k.bottom;const gt=k.collisionPadding;gt&&(st-=gt[1],ut+=gt[3]);let yt=ut-st;yt>0&&(yt=Math.max(10,yt),this.circleDiameter=yt)}else{let st=k.top*R-U[0],ut=k.bottom*R+U[2],gt=k.left*R-U[3],yt=k.right*R+U[1];const Et=k.collisionPadding;if(Et&&(gt-=Et[0]*R,st-=Et[1]*R,yt+=Et[2]*R,ut+=Et[3]*R),J){const It=new O(gt,st),Vt=new O(yt,st),Jt=new O(gt,ut),Ht=new O(yt,ut),ee=J*Math.PI/180;It._rotate(ee),Vt._rotate(ee),Jt._rotate(ee),Ht._rotate(ee),gt=Math.min(It.x,Vt.x,Jt.x,Ht.x),yt=Math.max(It.x,Vt.x,Jt.x,Ht.x),st=Math.min(It.y,Vt.y,Jt.y,Ht.y),ut=Math.max(It.y,Vt.y,Jt.y,Ht.y)}s.emplaceBack(d.x,d.y,gt,st,yt,ut,v,T,P)}this.boxEndIndex=s.length}}class U_{constructor(s=[],d=Xp){if(this.data=s,this.length=this.data.length,this.compare=d,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:d,compare:v}=this,T=d[s];for(;s>0;){const P=s-1>>1,k=d[P];if(v(T,k)>=0)break;d[s]=k,s=P}d[s]=T}_down(s){const{data:d,compare:v}=this,T=this.length>>1,P=d[s];for(;s<T;){let k=1+(s<<1),R=d[k];const U=k+1;if(U<this.length&&v(d[U],R)<0&&(k=U,R=d[U]),v(R,P)>=0)break;d[s]=R,s=k}d[s]=P}}function Xp(c,s){return c<s?-1:c>s?1:0}function V_(c,s=1,d=!1){let v=1/0,T=1/0,P=-1/0,k=-1/0;const R=c[0];for(let gt=0;gt<R.length;gt++){const yt=R[gt];(!gt||yt.x<v)&&(v=yt.x),(!gt||yt.y<T)&&(T=yt.y),(!gt||yt.x>P)&&(P=yt.x),(!gt||yt.y>k)&&(k=yt.y)}const U=Math.min(P-v,k-T);let Z=U/2;const J=new U_([],$_);if(U===0)return new O(v,T);for(let gt=v;gt<P;gt+=U)for(let yt=T;yt<k;yt+=U)J.push(new bi(gt+Z,yt+Z,Z,c));let st=(function(gt){let yt=0,Et=0,It=0;const Vt=gt[0];for(let Jt=0,Ht=Vt.length,ee=Ht-1;Jt<Ht;ee=Jt++){const ne=Vt[Jt],Se=Vt[ee],je=ne.x*Se.y-Se.x*ne.y;Et+=(ne.x+Se.x)*je,It+=(ne.y+Se.y)*je,yt+=3*je}return new bi(Et/yt,It/yt,0,gt)})(c),ut=J.length;for(;J.length;){const gt=J.pop();(gt.d>st.d||!st.d)&&(st=gt,d&&console.log("found best %d after %d probes",Math.round(1e4*gt.d)/1e4,ut)),gt.max-st.d<=s||(Z=gt.h/2,J.push(new bi(gt.p.x-Z,gt.p.y-Z,Z,c)),J.push(new bi(gt.p.x+Z,gt.p.y-Z,Z,c)),J.push(new bi(gt.p.x-Z,gt.p.y+Z,Z,c)),J.push(new bi(gt.p.x+Z,gt.p.y+Z,Z,c)),ut+=4)}return d&&(console.log(`num probes: ${ut}`),console.log(`best distance: ${st.d}`)),st.p}function $_(c,s){return s.max-c.max}function bi(c,s,d,v){this.p=new O(c,s),this.h=d,this.d=(function(T,P){let k=!1,R=1/0;for(let U=0;U<P.length;U++){const Z=P[U];for(let J=0,st=Z.length,ut=st-1;J<st;ut=J++){const gt=Z[J],yt=Z[ut];gt.y>T.y!=yt.y>T.y&&T.x<(yt.x-gt.x)*(T.y-gt.y)/(yt.y-gt.y)+gt.x&&(k=!k),R=Math.min(R,cp(T,gt,yt))}}return(k?1:-1)*Math.sqrt(R)})(this.p,v),this.max=this.d+this.h*Math.SQRT2}var fa;a.aq=void 0,(fa=a.aq||(a.aq={}))[fa.center=1]="center",fa[fa.left=2]="left",fa[fa.right=3]="right",fa[fa.top=4]="top",fa[fa.bottom=5]="bottom",fa[fa["top-left"]=6]="top-left",fa[fa["top-right"]=7]="top-right",fa[fa["bottom-left"]=8]="bottom-left",fa[fa["bottom-right"]=9]="bottom-right";const Lc=7,Kp=Number.POSITIVE_INFINITY;function q_(c,s){return s[1]!==Kp?(function(d,v,T){let P=0,k=0;switch(v=Math.abs(v),T=Math.abs(T),d){case"top-right":case"top-left":case"top":k=T-Lc;break;case"bottom-right":case"bottom-left":case"bottom":k=-T+Lc}switch(d){case"top-right":case"bottom-right":case"right":P=-v;break;case"top-left":case"bottom-left":case"left":P=v}return[P,k]})(c,s[0],s[1]):(function(d,v){let T=0,P=0;v<0&&(v=0);const k=v/Math.SQRT2;switch(d){case"top-right":case"top-left":P=k-Lc;break;case"bottom-right":case"bottom-left":P=-k+Lc;break;case"bottom":P=-v+Lc;break;case"top":P=v-Lc}switch(d){case"top-right":case"bottom-right":T=-k;break;case"top-left":case"bottom-left":T=k;break;case"left":T=v;break;case"right":T=-v}return[T,P]})(c,s[0])}function H_(c,s,d){var v;const T=c.layout,P=(v=T.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(s,{},d);if(P){const R=P.values,U=[];for(let Z=0;Z<R.length;Z+=2){const J=U[Z]=R[Z],st=R[Z+1].map((ut=>ut*gr));J.startsWith("top")?st[1]-=Lc:J.startsWith("bottom")&&(st[1]+=Lc),U[Z+1]=st}return new Pn(U)}const k=T.get("text-variable-anchor");if(k){let R;R=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[T.get("text-radial-offset").evaluate(s,{},d)*gr,Kp]:T.get("text-offset").evaluate(s,{},d).map((Z=>Z*gr));const U=[];for(const Z of k)U.push(Z,q_(Z,R));return new Pn(U)}return null}function Cg(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Qp(c,s,d,v,T,P,k,R,U,Z,J){let st=P.textMaxSize.evaluate(s,{});st===void 0&&(st=k);const ut=c.layers[0].layout,gt=ut.get("icon-offset").evaluate(s,{},J),yt=Jp(d.horizontal),Et=k/24,It=c.tilePixelRatio*Et,Vt=c.tilePixelRatio*st/24,Jt=c.tilePixelRatio*R,Ht=c.tilePixelRatio*ut.get("symbol-spacing"),ee=ut.get("text-padding")*c.tilePixelRatio,ne=(function(Re,pn,un,jn=1){const Yi=Re.get("icon-padding").evaluate(pn,{},un),Xi=Yi&&Yi.values;return[Xi[0]*jn,Xi[1]*jn,Xi[2]*jn,Xi[3]*jn]})(ut,s,J,c.tilePixelRatio),Se=ut.get("text-max-angle")/180*Math.PI,je=ut.get("text-rotation-alignment")!=="viewport"&&ut.get("symbol-placement")!=="point",ln=ut.get("icon-rotation-alignment")==="map"&&ut.get("symbol-placement")!=="point",Xe=ut.get("symbol-placement"),We=Ht/2,Ue=ut.get("icon-text-fit");let en;v&&Ue!=="none"&&(c.allowVerticalPlacement&&d.vertical&&(en=dd(v,d.vertical,Ue,ut.get("icon-text-fit-padding"),gt,Et)),yt&&(v=dd(v,yt,Ue,ut.get("icon-text-fit-padding"),gt,Et)));const $e=(Re,pn)=>{pn.x<0||pn.x>=mr||pn.y<0||pn.y>=mr||(function(un,jn,Yi,Xi,ta,Vs,bs,qr,lr,Ca,is,Va,ea,na,$a,qa,Pa,$s,ur,Lr,Zn,Ha,ka,_r,Ir){const pl=un.addToLineVertexArray(jn,Yi);let _o,rs,ml,Go,da=0,bu=0,Ed=0,Z_=0,kg=-1,Og=-1;const lc={};let G_=hu("");if(un.allowVerticalPlacement&&Xi.vertical){const as=qr.layout.get("text-rotate").evaluate(Zn,{},_r)+90;ml=new wd(lr,jn,Ca,is,Va,Xi.vertical,ea,na,$a,as),bs&&(Go=new wd(lr,jn,Ca,is,Va,bs,Pa,$s,$a,as))}if(ta){const as=qr.layout.get("icon-rotate").evaluate(Zn,{}),xo=qr.layout.get("icon-text-fit")!=="none",yh=_d(ta,as,ka,xo),Wo=bs?_d(bs,as,ka,xo):void 0;rs=new wd(lr,jn,Ca,is,Va,ta,Pa,$s,!1,as),da=4*yh.length;const _h=un.iconSizeData;let Yo=null;_h.kind==="source"?(Yo=[yu*qr.layout.get("icon-size").evaluate(Zn,{})],Yo[0]>Oc&&ve(`${un.layerIds[0]}: Value for "icon-size" is >= ${pf}. Reduce your "icon-size".`)):_h.kind==="composite"&&(Yo=[yu*Ha.compositeIconSizes[0].evaluate(Zn,{},_r),yu*Ha.compositeIconSizes[1].evaluate(Zn,{},_r)],(Yo[0]>Oc||Yo[1]>Oc)&&ve(`${un.layerIds[0]}: Value for "icon-size" is >= ${pf}. Reduce your "icon-size".`)),un.addSymbols(un.icon,yh,Yo,Lr,ur,Zn,a.ai.none,jn,pl.lineStartIndex,pl.lineLength,-1,_r),kg=un.icon.placedSymbolArray.length-1,Wo&&(bu=4*Wo.length,un.addSymbols(un.icon,Wo,Yo,Lr,ur,Zn,a.ai.vertical,jn,pl.lineStartIndex,pl.lineLength,-1,_r),Og=un.icon.placedSymbolArray.length-1)}const W_=Object.keys(Xi.horizontal);for(const as of W_){const xo=Xi.horizontal[as];if(!_o){G_=hu(xo.text);const Wo=qr.layout.get("text-rotate").evaluate(Zn,{},_r);_o=new wd(lr,jn,Ca,is,Va,xo,ea,na,$a,Wo)}const yh=xo.positionedLines.length===1;if(Ed+=gh(un,jn,xo,Vs,qr,$a,Zn,qa,pl,Xi.vertical?a.ai.horizontal:a.ai.horizontalOnly,yh?W_:[as],lc,kg,Ha,_r),yh)break}Xi.vertical&&(Z_+=gh(un,jn,Xi.vertical,Vs,qr,$a,Zn,qa,pl,a.ai.vertical,["vertical"],lc,Og,Ha,_r));const Y_=_o?_o.boxStartIndex:un.collisionBoxArray.length,_f=_o?_o.boxEndIndex:un.collisionBoxArray.length,Cd=ml?ml.boxStartIndex:un.collisionBoxArray.length,X_=ml?ml.boxEndIndex:un.collisionBoxArray.length,Yx=rs?rs.boxStartIndex:un.collisionBoxArray.length,vf=rs?rs.boxEndIndex:un.collisionBoxArray.length,Pd=Go?Go.boxStartIndex:un.collisionBoxArray.length,K_=Go?Go.boxEndIndex:un.collisionBoxArray.length;let vo=-1;const xf=(as,xo)=>as&&as.circleDiameter?Math.max(as.circleDiameter,xo):xo;vo=xf(_o,vo),vo=xf(ml,vo),vo=xf(rs,vo),vo=xf(Go,vo);const sm=vo>-1?1:0;sm&&(vo*=Ir/gr),un.glyphOffsetArray.length>=po.MAX_GLYPHS&&ve("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Zn.sortKey!==void 0&&un.addToSortKeyRanges(un.symbolInstances.length,Zn.sortKey);const om=H_(qr,Zn,_r),[Q_,J_]=(function(as,xo){const yh=as.length,Wo=xo?.values;if(Wo?.length>0)for(let _h=0;_h<Wo.length;_h+=2){const Yo=Wo[_h+1];as.emplaceBack(a.aq[Wo[_h]],Yo[0],Yo[1])}return[yh,as.length]})(un.textAnchorOffsets,om);un.symbolInstances.emplaceBack(jn.x,jn.y,lc.right>=0?lc.right:-1,lc.center>=0?lc.center:-1,lc.left>=0?lc.left:-1,lc.vertical||-1,kg,Og,G_,Y_,_f,Cd,X_,Yx,vf,Pd,K_,Ca,Ed,Z_,da,bu,sm,0,ea,vo,Q_,J_)})(c,pn,Re,d,v,T,en,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,It,[ee,ee,ee,ee],je,U,Jt,ne,ln,gt,s,P,Z,J,k)};if(Xe==="line")for(const Re of Mg(s.geometry,0,0,mr,mr)){const pn=F_(Re,Ht,Se,d.vertical||yt,v,24,Vt,c.overscaling,mr);for(const un of pn)yt&&tm(c,yt.text,We,un)||$e(Re,un)}else if(Xe==="line-center"){for(const Re of s.geometry)if(Re.length>1){const pn=Gx(Re,Se,d.vertical||yt,v,24,Vt);pn&&$e(Re,pn)}}else if(s.type==="Polygon")for(const Re of bp(s.geometry,0)){const pn=V_(Re,16);$e(Re[0],new oc(pn.x,pn.y,0))}else if(s.type==="LineString")for(const Re of s.geometry)$e(Re,new oc(Re[0].x,Re[0].y,0));else if(s.type==="Point")for(const Re of s.geometry)for(const pn of Re)$e([pn],new oc(pn.x,pn.y,0))}function gh(c,s,d,v,T,P,k,R,U,Z,J,st,ut,gt,yt){const Et=(function(Jt,Ht,ee,ne,Se,je,ln,Xe){const We=ne.layout.get("text-rotate").evaluate(je,{})*Math.PI/180,Ue=[];for(const en of Ht.positionedLines)for(const $e of en.positionedGlyphs){if(!$e.rect)continue;const Re=$e.rect||{};let pn=cd+1,un=!0,jn=1,Yi=0;const Xi=(Se||Xe)&&$e.vertical,ta=$e.metrics.advance*$e.scale/2;if(Xe&&Ht.verticalizable&&(Yi=en.lineOffset/2-($e.imageName?-(gr-$e.metrics.width*$e.scale)/2:($e.scale-1)*gr)),$e.imageName){const Lr=ln[$e.imageName];un=Lr.sdf,jn=Lr.pixelRatio,pn=yr/jn}const Vs=Se?[$e.x+ta,$e.y]:[0,0];let bs=Se?[0,0]:[$e.x+ta+ee[0],$e.y+ee[1]-Yi],qr=[0,0];Xi&&(qr=bs,bs=[0,0]);const lr=$e.metrics.isDoubleResolution?2:1,Ca=($e.metrics.left-pn)*$e.scale-ta+bs[0],is=(-$e.metrics.top-pn)*$e.scale+bs[1],Va=Ca+Re.w/lr*$e.scale/jn,ea=is+Re.h/lr*$e.scale/jn,na=new O(Ca,is),$a=new O(Va,is),qa=new O(Ca,ea),Pa=new O(Va,ea);if(Xi){const Lr=new O(-ta,ta-Zo),Zn=-Math.PI/2,Ha=gr/2-ta,ka=new O(5-Zo-Ha,-($e.imageName?Ha:0)),_r=new O(...qr);na._rotateAround(Zn,Lr)._add(ka)._add(_r),$a._rotateAround(Zn,Lr)._add(ka)._add(_r),qa._rotateAround(Zn,Lr)._add(ka)._add(_r),Pa._rotateAround(Zn,Lr)._add(ka)._add(_r)}if(We){const Lr=Math.sin(We),Zn=Math.cos(We),Ha=[Zn,-Lr,Lr,Zn];na._matMult(Ha),$a._matMult(Ha),qa._matMult(Ha),Pa._matMult(Ha)}const $s=new O(0,0),ur=new O(0,0);Ue.push({tl:na,tr:$a,bl:qa,br:Pa,tex:Re,writingMode:Ht.writingMode,glyphOffset:Vs,sectionIndex:$e.sectionIndex,isSDF:un,pixelOffsetTL:$s,pixelOffsetBR:ur,minFontScaleX:0,minFontScaleY:0})}return Ue})(0,d,R,T,P,k,v,c.allowVerticalPlacement),It=c.textSizeData;let Vt=null;It.kind==="source"?(Vt=[yu*T.layout.get("text-size").evaluate(k,{})],Vt[0]>Oc&&ve(`${c.layerIds[0]}: Value for "text-size" is >= ${pf}. Reduce your "text-size".`)):It.kind==="composite"&&(Vt=[yu*gt.compositeTextSizes[0].evaluate(k,{},yt),yu*gt.compositeTextSizes[1].evaluate(k,{},yt)],(Vt[0]>Oc||Vt[1]>Oc)&&ve(`${c.layerIds[0]}: Value for "text-size" is >= ${pf}. Reduce your "text-size".`)),c.addSymbols(c.text,Et,Vt,R,P,k,Z,s,U.lineStartIndex,U.lineLength,ut,yt);for(const Jt of J)st[Jt]=c.text.placedSymbolArray.length-1;return 4*Et.length}function Jp(c){for(const s in c)return c[s];return null}function tm(c,s,d,v){const T=c.compareText;if(s in T){const P=T[s];for(let k=P.length-1;k>=0;k--)if(v.dist(P[k])<d)return!0}else T[s]=[];return T[s].push(v),!1}const em=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class xu{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,v]=new Uint8Array(s,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const T=v>>4;if(T!==1)throw new Error(`Got v${T} data when expected v1.`);const P=em[15&v];if(!P)throw new Error("Unrecognized array type.");const[k]=new Uint16Array(s,2,1),[R]=new Uint32Array(s,4,1);return new xu(R,k,P,s)}constructor(s,d=64,v=Float64Array,T){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=v,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const P=em.indexOf(this.ArrayType),k=2*s*this.ArrayType.BYTES_PER_ELEMENT,R=s*this.IndexArrayType.BYTES_PER_ELEMENT,U=(8-R%8)%8;if(P<0)throw new Error(`Unexpected typed array class: ${v}.`);T&&T instanceof ArrayBuffer?(this.data=T,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+R+U,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+k+R+U),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+R+U,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+P]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=s)}add(s,d){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=s,this.coords[this._pos++]=d,v}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return dl(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,d,v,T){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:P,coords:k,nodeSize:R}=this,U=[0,P.length-1,0],Z=[];for(;U.length;){const J=U.pop()||0,st=U.pop()||0,ut=U.pop()||0;if(st-ut<=R){for(let It=ut;It<=st;It++){const Vt=k[2*It],Jt=k[2*It+1];Vt>=s&&Vt<=v&&Jt>=d&&Jt<=T&&Z.push(P[It])}continue}const gt=ut+st>>1,yt=k[2*gt],Et=k[2*gt+1];yt>=s&&yt<=v&&Et>=d&&Et<=T&&Z.push(P[gt]),(J===0?s<=yt:d<=Et)&&(U.push(ut),U.push(gt-1),U.push(1-J)),(J===0?v>=yt:T>=Et)&&(U.push(gt+1),U.push(st),U.push(1-J))}return Z}within(s,d,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:P,nodeSize:k}=this,R=[0,T.length-1,0],U=[],Z=v*v;for(;R.length;){const J=R.pop()||0,st=R.pop()||0,ut=R.pop()||0;if(st-ut<=k){for(let It=ut;It<=st;It++)Pg(P[2*It],P[2*It+1],s,d)<=Z&&U.push(T[It]);continue}const gt=ut+st>>1,yt=P[2*gt],Et=P[2*gt+1];Pg(yt,Et,s,d)<=Z&&U.push(T[gt]),(J===0?s-v<=yt:d-v<=Et)&&(R.push(ut),R.push(gt-1),R.push(1-J)),(J===0?s+v>=yt:d+v>=Et)&&(R.push(gt+1),R.push(st),R.push(1-J))}return U}}function dl(c,s,d,v,T,P){if(T-v<=d)return;const k=v+T>>1;yf(c,s,k,v,T,P),dl(c,s,d,v,k-1,1-P),dl(c,s,d,k+1,T,1-P)}function yf(c,s,d,v,T,P){for(;T>v;){if(T-v>600){const Z=T-v+1,J=d-v+1,st=Math.log(Z),ut=.5*Math.exp(2*st/3),gt=.5*Math.sqrt(st*ut*(Z-ut)/Z)*(J-Z/2<0?-1:1);yf(c,s,d,Math.max(v,Math.floor(d-J*ut/Z+gt)),Math.min(T,Math.floor(d+(Z-J)*ut/Z+gt)),P)}const k=s[2*d+P];let R=v,U=T;for(Sd(c,s,v,d),s[2*T+P]>k&&Sd(c,s,v,T);R<U;){for(Sd(c,s,R,U),R++,U--;s[2*R+P]<k;)R++;for(;s[2*U+P]>k;)U--}s[2*v+P]===k?Sd(c,s,v,U):(U++,Sd(c,s,U,T)),U<=d&&(v=U+1),d<=U&&(T=U-1)}}function Sd(c,s,d,v){nm(c,d,v),nm(s,2*d,2*v),nm(s,2*d+1,2*v+1)}function nm(c,s,d){const v=c[s];c[s]=c[d],c[d]=v}function Pg(c,s,d,v){const T=c-d,P=s-v;return T*T+P*P}var im;a.bh=void 0,(im=a.bh||(a.bh={})).create="create",im.load="load",im.fullLoad="fullLoad";let Td=null,Md=[];const Ad=1e3/60,rm="loadTime",am="fullLoadTime",Wx={mark(c){performance.mark(c)},frame(c){const s=c;Td!=null&&Md.push(s-Td),Td=s},clearMetrics(){Td=null,Md=[],performance.clearMeasures(rm),performance.clearMeasures(am);for(const c in a.bh)performance.clearMarks(a.bh[c])},getPerformanceMetrics(){performance.measure(rm,a.bh.create,a.bh.load),performance.measure(am,a.bh.create,a.bh.fullLoad);const c=performance.getEntriesByName(rm)[0].duration,s=performance.getEntriesByName(am)[0].duration,d=Md.length,v=1/(Md.reduce(((P,k)=>P+k),0)/d/1e3),T=Md.filter((P=>P>Ad)).reduce(((P,k)=>P+(k-Ad)/Ad),0);return{loadTime:c,fullLoadTime:s,fps:v,percentDroppedFrames:T/(d+T)*100,totalFrames:d}}};a.$=function(c,s,d){var v,T,P,k,R,U,Z,J,st,ut,gt,yt,Et=d[0],It=d[1],Vt=d[2];return s===c?(c[12]=s[0]*Et+s[4]*It+s[8]*Vt+s[12],c[13]=s[1]*Et+s[5]*It+s[9]*Vt+s[13],c[14]=s[2]*Et+s[6]*It+s[10]*Vt+s[14],c[15]=s[3]*Et+s[7]*It+s[11]*Vt+s[15]):(T=s[1],P=s[2],k=s[3],R=s[4],U=s[5],Z=s[6],J=s[7],st=s[8],ut=s[9],gt=s[10],yt=s[11],c[0]=v=s[0],c[1]=T,c[2]=P,c[3]=k,c[4]=R,c[5]=U,c[6]=Z,c[7]=J,c[8]=st,c[9]=ut,c[10]=gt,c[11]=yt,c[12]=v*Et+R*It+st*Vt+s[12],c[13]=T*Et+U*It+ut*Vt+s[13],c[14]=P*Et+Z*It+gt*Vt+s[14],c[15]=k*Et+J*It+yt*Vt+s[15]),c},a.A=Cc,a.B=Ra,a.C=class{constructor(c,s,d){this.receive=v=>{const T=v.data,P=T.id;if(P&&(!T.targetMapId||this.mapId===T.targetMapId))if(T.type==="<cancel>"){delete this.tasks[P];const k=this.cancelCallbacks[P];delete this.cancelCallbacks[P],k&&k()}else Pt()||T.mustQueue?(this.tasks[P]=T,this.taskQueue.push(P),this.invoker.trigger()):this.processTask(P,T)},this.process=()=>{if(!this.taskQueue.length)return;const v=this.taskQueue.shift(),T=this.tasks[v];delete this.tasks[v],this.taskQueue.length&&this.invoker.trigger(),T&&this.processTask(v,T)},this.target=c,this.parent=s,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new qp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Pt()?c:window}send(c,s,d,v,T=!1){const P=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[P]=d);const k=[],R={id:P,type:c,hasCallback:!!d,targetMapId:v,mustQueue:T,sourceMapId:this.mapId,data:zs(s,k)};return this.target.postMessage(R,{transfer:k}),{cancel:()=>{d&&delete this.callbacks[P],this.target.postMessage({id:P,type:"<cancel>",targetMapId:v,sourceMapId:this.mapId})}}}processTask(c,s){if(s.type==="<response>"){const d=this.callbacks[c];delete this.callbacks[c],d&&(s.error?d(so(s.error)):d(null,so(s.data)))}else{let d=!1;const v=[],T=s.hasCallback?(R,U)=>{d=!0,delete this.cancelCallbacks[c];const Z={id:c,type:"<response>",sourceMapId:this.mapId,error:R?zs(R):null,data:zs(U,v)};this.target.postMessage(Z,{transfer:v})}:R=>{d=!0};let P=null;const k=so(s.data);if(this.parent[s.type])P=this.parent[s.type](s.sourceMapId,k,T);else if("getWorkerSource"in this.parent){const R=s.type.split(".");P=this.parent.getWorkerSource(s.sourceMapId,R[0],k.source)[R[1]](k,T)}else T(new Error(`Could not find function ${s.type}`));!d&&P&&P.cancel&&(this.cancelCallbacks[c]=P.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.D=Je,a.E=In,a.F=function(c,s){const d={};for(let v=0;v<s.length;v++){const T=s[v];T in c&&(d[T]=c[T])}return d},a.G=vu,a.H=Hp,a.I=Bp,a.J=W,a.K=X,a.L=or,a.M=ft,a.N=mr,a.O=yo,a.P=O,a.Q=vi,a.R=ho,a.S=Bi,a.T=Ce,a.U=mf,a.V=class extends Na{},a.W=Gp,a.X=function(c,s){const d=window.document.createElement("video");d.muted=!0,d.onloadstart=function(){s(null,d)};for(let v=0;v<c.length;v++){const T=window.document.createElement("source");qe(c[v])||(d.crossOrigin="Anonymous"),T.src=c[v],d.appendChild(T)}return{cancel:()=>{}}},a.Y=Be,a.Z=function(){var c=new Cc(16);return Cc!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},a._=y,a.a=Ft,a.a$=class extends pt{},a.a0=function(c,s,d){var v=d[0],T=d[1],P=d[2];return c[0]=s[0]*v,c[1]=s[1]*v,c[2]=s[2]*v,c[3]=s[3]*v,c[4]=s[4]*T,c[5]=s[5]*T,c[6]=s[6]*T,c[7]=s[7]*T,c[8]=s[8]*P,c[9]=s[9]*P,c[10]=s[10]*P,c[11]=s[11]*P,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},a.a1=Wm,a.a2=function(){return ct++},a.a3=Ot,a.a4=po,a.a5=function(){mt.isLoading()||mt.isLoaded()||V()!=="deferred"||nt()},a.a6=ps,a.a7=Nl,a.a8=Lt,a.a9=gd,a.aA=p,a.aB=function(c){c=c.slice();const s=Object.create(null);for(let d=0;d<c.length;d++)s[c[d].id]=c[d];for(let d=0;d<c.length;d++)"ref"in c[d]&&(c[d]=Li(c[d],s[c[d].ref]));return c},a.aC=function(c){if(c.type==="custom")return new $p(c);switch(c.type){case"background":return new mo(c);case"circle":return new a_(c);case"fill":return new v_(c);case"fill-extrusion":return new A_(c);case"heatmap":return new l_(c);case"hillshade":return new u_(c);case"line":return new Ju(c);case"raster":return new I_(c);case"symbol":return new xs(c)}},a.aD=Ct,a.aE=function(c,s){if(!c)return[{command:cn.setStyle,args:[s]}];let d=[];try{if(!Yn(c.version,s.version))return[{command:cn.setStyle,args:[s]}];Yn(c.center,s.center)||d.push({command:cn.setCenter,args:[s.center]}),Yn(c.zoom,s.zoom)||d.push({command:cn.setZoom,args:[s.zoom]}),Yn(c.bearing,s.bearing)||d.push({command:cn.setBearing,args:[s.bearing]}),Yn(c.pitch,s.pitch)||d.push({command:cn.setPitch,args:[s.pitch]}),Yn(c.sprite,s.sprite)||d.push({command:cn.setSprite,args:[s.sprite]}),Yn(c.glyphs,s.glyphs)||d.push({command:cn.setGlyphs,args:[s.glyphs]}),Yn(c.transition,s.transition)||d.push({command:cn.setTransition,args:[s.transition]}),Yn(c.light,s.light)||d.push({command:cn.setLight,args:[s.light]});const v={},T=[];(function(k,R,U,Z){let J;for(J in R=R||{},k=k||{})Object.prototype.hasOwnProperty.call(k,J)&&(Object.prototype.hasOwnProperty.call(R,J)||si(J,U,Z));for(J in R)Object.prototype.hasOwnProperty.call(R,J)&&(Object.prototype.hasOwnProperty.call(k,J)?Yn(k[J],R[J])||(k[J].type==="geojson"&&R[J].type==="geojson"&&jr(k,R,J)?U.push({command:cn.setGeoJSONSourceData,args:[J,R[J].data]}):Ii(J,R,U,Z)):Zi(J,R,U))})(c.sources,s.sources,T,v);const P=[];c.layers&&c.layers.forEach((k=>{v[k.source]?d.push({command:cn.removeLayer,args:[k.id]}):P.push(k)})),d=d.concat(T),(function(k,R,U){R=R||[];const Z=(k=k||[]).map(Wa),J=R.map(Wa),st=k.reduce(_a,{}),ut=R.reduce(_a,{}),gt=Z.slice(),yt=Object.create(null);let Et,It,Vt,Jt,Ht,ee,ne;for(Et=0,It=0;Et<Z.length;Et++)Vt=Z[Et],Object.prototype.hasOwnProperty.call(ut,Vt)?It++:(U.push({command:cn.removeLayer,args:[Vt]}),gt.splice(gt.indexOf(Vt,It),1));for(Et=0,It=0;Et<J.length;Et++)Vt=J[J.length-1-Et],gt[gt.length-1-Et]!==Vt&&(Object.prototype.hasOwnProperty.call(st,Vt)?(U.push({command:cn.removeLayer,args:[Vt]}),gt.splice(gt.lastIndexOf(Vt,gt.length-It),1)):It++,ee=gt[gt.length-Et],U.push({command:cn.addLayer,args:[ut[Vt],ee]}),gt.splice(gt.length-Et,0,Vt),yt[Vt]=!0);for(Et=0;Et<J.length;Et++)if(Vt=J[Et],Jt=st[Vt],Ht=ut[Vt],!yt[Vt]&&!Yn(Jt,Ht))if(Yn(Jt.source,Ht.source)&&Yn(Jt["source-layer"],Ht["source-layer"])&&Yn(Jt.type,Ht.type)){for(ne in Ws(Jt.layout,Ht.layout,U,Vt,null,cn.setLayoutProperty),Ws(Jt.paint,Ht.paint,U,Vt,null,cn.setPaintProperty),Yn(Jt.filter,Ht.filter)||U.push({command:cn.setFilter,args:[Vt,Ht.filter]}),Yn(Jt.minzoom,Ht.minzoom)&&Yn(Jt.maxzoom,Ht.maxzoom)||U.push({command:cn.setLayerZoomRange,args:[Vt,Ht.minzoom,Ht.maxzoom]}),Jt)Object.prototype.hasOwnProperty.call(Jt,ne)&&ne!=="layout"&&ne!=="paint"&&ne!=="filter"&&ne!=="metadata"&&ne!=="minzoom"&&ne!=="maxzoom"&&(ne.indexOf("paint.")===0?Ws(Jt[ne],Ht[ne],U,Vt,ne.slice(6),cn.setPaintProperty):Yn(Jt[ne],Ht[ne])||U.push({command:cn.setLayerProperty,args:[Vt,ne,Ht[ne]]}));for(ne in Ht)Object.prototype.hasOwnProperty.call(Ht,ne)&&!Object.prototype.hasOwnProperty.call(Jt,ne)&&ne!=="layout"&&ne!=="paint"&&ne!=="filter"&&ne!=="metadata"&&ne!=="minzoom"&&ne!=="maxzoom"&&(ne.indexOf("paint.")===0?Ws(Jt[ne],Ht[ne],U,Vt,ne.slice(6),cn.setPaintProperty):Yn(Jt[ne],Ht[ne])||U.push({command:cn.setLayerProperty,args:[Vt,ne,Ht[ne]]}))}else U.push({command:cn.removeLayer,args:[Vt]}),ee=gt[gt.lastIndexOf(Vt)+1],U.push({command:cn.addLayer,args:[Ht,ee]})})(P,s.layers,d)}catch(v){console.warn("Unable to compute style diff:",v),d=[{command:cn.setStyle,args:[s]}]}return d},a.aF=function(c){const s=[],d=c.id;return d===void 0&&s.push({message:`layers.${d}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${d}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),s},a.aG=function c(s,d){if(Array.isArray(s)){if(!Array.isArray(d)||s.length!==d.length)return!1;for(let v=0;v<s.length;v++)if(!c(s[v],d[v]))return!1;return!0}if(typeof s=="object"&&s!==null&&d!==null){if(typeof d!="object"||Object.keys(s).length!==Object.keys(d).length)return!1;for(const v in s)if(!c(s[v],d[v]))return!1;return!0}return s===d},a.aH=xt,a.aI=wt,a.aJ=D,a.aK=function(c){return c({pluginStatus:sa,pluginURL:lo}),D.on("pluginStateChange",c),c},a.aL=class extends Bl{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},a.aM=Sc,a.aN=class extends Bl{constructor(c,s){super(c,s),this.current=fu}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},a.aO=_s,a.aP=class extends Bl{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},a.aQ=class extends Bl{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},a.aR=Is,a.aS=function(c,s,d,v,T,P,k){var R=1/(s-d),U=1/(v-T),Z=1/(P-k);return c[0]=-2*R,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*U,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*Z,c[11]=0,c[12]=(s+d)*R,c[13]=(T+v)*U,c[14]=(k+P)*Z,c[15]=1,c},a.aT=Qn,a.aU=r_,a.aV=class extends b{},a.aW=$x,a.aX=class extends C{},a.aY=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},a.aZ=Km,a.a_=Ne,a.aa=function(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,v,T,P)=>{const k=T||P;return s[v]=!k||k.toLowerCase(),""})),s["max-age"]){const d=parseInt(s["max-age"],10);isNaN(d)?delete s["max-age"]:s["max-age"]=d}return s},a.ab=function(c,s){const d=[];for(const v in c)v in s||d.push(v);return d},a.ac=function(c){if(Bt==null){const s=c.navigator?c.navigator.userAgent:null;Bt=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Bt},a.ad=at,a.ae=function(c,s,d){var v=Math.sin(d),T=Math.cos(d),P=s[0],k=s[1],R=s[2],U=s[3],Z=s[4],J=s[5],st=s[6],ut=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=P*T+Z*v,c[1]=k*T+J*v,c[2]=R*T+st*v,c[3]=U*T+ut*v,c[4]=Z*T-P*v,c[5]=J*T-k*v,c[6]=st*T-R*v,c[7]=ut*T-U*v,c},a.af=function(c){var s=new Cc(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},a.ag=Kf,a.ah=function(c,s){let d=0,v=0;if(c.kind==="constant")v=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:T,minZoom:P,maxZoom:k}=c,R=T?at(Oi.interpolationFactor(T,s,P,k),0,1):0;c.kind==="camera"?v=Ra.number(c.minSize,c.maxSize,R):d=R}return{uSizeT:d,uSize:v}},a.aj=function(c,{uSize:s,uSizeT:d},{lowerSize:v,upperSize:T}){return c.kind==="source"?v/yu:c.kind==="composite"?Ra.number(v/yu,T/yu,d):s},a.ak=Fs,a.al=function(c,s,d,v){const T=s.y-c.y,P=s.x-c.x,k=v.y-d.y,R=v.x-d.x,U=k*P-R*T;if(U===0)return null;const Z=(R*(c.y-d.y)-k*(c.x-d.x))/U;return new O(c.x+Z*P,c.y+Z*T)},a.am=Mg,a.an=Or,a.ao=pp,a.ap=gr,a.ar=Hi,a.as=function(c,s){var d=s[0],v=s[1],T=s[2],P=s[3],k=s[4],R=s[5],U=s[6],Z=s[7],J=s[8],st=s[9],ut=s[10],gt=s[11],yt=s[12],Et=s[13],It=s[14],Vt=s[15],Jt=d*R-v*k,Ht=d*U-T*k,ee=d*Z-P*k,ne=v*U-T*R,Se=v*Z-P*R,je=T*Z-P*U,ln=J*Et-st*yt,Xe=J*It-ut*yt,We=J*Vt-gt*yt,Ue=st*It-ut*Et,en=st*Vt-gt*Et,$e=ut*Vt-gt*It,Re=Jt*$e-Ht*en+ee*Ue+ne*We-Se*Xe+je*ln;return Re?(c[0]=(R*$e-U*en+Z*Ue)*(Re=1/Re),c[1]=(T*en-v*$e-P*Ue)*Re,c[2]=(Et*je-It*Se+Vt*ne)*Re,c[3]=(ut*Se-st*je-gt*ne)*Re,c[4]=(U*We-k*$e-Z*Xe)*Re,c[5]=(d*$e-T*We+P*Xe)*Re,c[6]=(It*ee-yt*je-Vt*Ht)*Re,c[7]=(J*je-ut*ee+gt*Ht)*Re,c[8]=(k*en-R*We+Z*ln)*Re,c[9]=(v*We-d*en-P*ln)*Re,c[10]=(yt*Se-Et*ee+Vt*Jt)*Re,c[11]=(st*ee-J*Se-gt*Jt)*Re,c[12]=(R*Xe-k*Ue-U*ln)*Re,c[13]=(d*Ue-v*Xe+T*ln)*Re,c[14]=(Et*Ht-yt*ne-It*Jt)*Re,c[15]=(J*ne-st*Ht+ut*Jt)*Re,c):null},a.at=Cg,a.au=jp,a.av=xu,a.aw=function(){const c={},s=me.$version;for(const d in me.$root){const v=me.$root[d];if(v.required){let T=null;T=d==="version"?s:v.type==="array"?[]:{},T!=null&&(c[d]=T)}}return c},a.ax=cn,a.ay=No,a.az=Gt,a.b=function(c,s){const d=new Blob([new Uint8Array(c)],{type:"image/png"});createImageBitmap(d).then((v=>{s(null,v)})).catch((v=>{s(new Error(`Could not load image because of ${v.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))},a.b0=oa,a.b1=function(c,s){var d=c[0],v=c[1],T=c[2],P=c[3],k=c[4],R=c[5],U=c[6],Z=c[7],J=c[8],st=c[9],ut=c[10],gt=c[11],yt=c[12],Et=c[13],It=c[14],Vt=c[15],Jt=s[0],Ht=s[1],ee=s[2],ne=s[3],Se=s[4],je=s[5],ln=s[6],Xe=s[7],We=s[8],Ue=s[9],en=s[10],$e=s[11],Re=s[12],pn=s[13],un=s[14],jn=s[15];return Math.abs(d-Jt)<=ja*Math.max(1,Math.abs(d),Math.abs(Jt))&&Math.abs(v-Ht)<=ja*Math.max(1,Math.abs(v),Math.abs(Ht))&&Math.abs(T-ee)<=ja*Math.max(1,Math.abs(T),Math.abs(ee))&&Math.abs(P-ne)<=ja*Math.max(1,Math.abs(P),Math.abs(ne))&&Math.abs(k-Se)<=ja*Math.max(1,Math.abs(k),Math.abs(Se))&&Math.abs(R-je)<=ja*Math.max(1,Math.abs(R),Math.abs(je))&&Math.abs(U-ln)<=ja*Math.max(1,Math.abs(U),Math.abs(ln))&&Math.abs(Z-Xe)<=ja*Math.max(1,Math.abs(Z),Math.abs(Xe))&&Math.abs(J-We)<=ja*Math.max(1,Math.abs(J),Math.abs(We))&&Math.abs(st-Ue)<=ja*Math.max(1,Math.abs(st),Math.abs(Ue))&&Math.abs(ut-en)<=ja*Math.max(1,Math.abs(ut),Math.abs(en))&&Math.abs(gt-$e)<=ja*Math.max(1,Math.abs(gt),Math.abs($e))&&Math.abs(yt-Re)<=ja*Math.max(1,Math.abs(yt),Math.abs(Re))&&Math.abs(Et-pn)<=ja*Math.max(1,Math.abs(Et),Math.abs(pn))&&Math.abs(It-un)<=ja*Math.max(1,Math.abs(It),Math.abs(un))&&Math.abs(Vt-jn)<=ja*Math.max(1,Math.abs(Vt),Math.abs(jn))},a.b2=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},a.b3=function(c,s,d){return c[0]=s[0]*d[0],c[1]=s[1]*d[1],c[2]=s[2]*d[2],c[3]=s[3]*d[3],c},a.b4=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]*s[3]},a.b5=ht,a.b6=Us,a.b7=Zp,a.b8=function(c,s,d,v,T){var P,k=1/Math.tan(s/2);return c[0]=k/d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=k,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,T!=null&&T!==1/0?(c[10]=(T+v)*(P=1/(v-T)),c[14]=2*T*v*P):(c[10]=-1,c[14]=-2*v),c},a.b9=function(c,s,d){var v=Math.sin(d),T=Math.cos(d),P=s[4],k=s[5],R=s[6],U=s[7],Z=s[8],J=s[9],st=s[10],ut=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=P*T+Z*v,c[5]=k*T+J*v,c[6]=R*T+st*v,c[7]=U*T+ut*v,c[8]=Z*T-P*v,c[9]=J*T-k*v,c[10]=st*T-R*v,c[11]=ut*T-U*v,c},a.bA=x,a.bB=tc,a.bC=ju,a.bD=mt,a.ba=tt,a.bb=Q,a.bc=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},a.bd=class extends Vo{},a.be=_u,a.bf=Sg,a.bg=Wx,a.bi=Ie,a.bj=function(c,s,d=!1){if(sa===Yu||sa===Rl||sa===Fo)throw new Error("setRTLTextPlugin cannot be called multiple times.");lo=ce.resolveURL(c),sa=Yu,lu=s,w(),d||nt()},a.bk=V,a.bl=function(c,s){const d={};for(let T=0;T<c.length;T++){const P=s&&s[c[T].id]||zl(c[T]);s&&(s[c[T].id]=P);let k=d[P];k||(k=d[P]=[]),k.push(c[T])}const v=[];for(const T in d)v.push(d[T]);return v},a.bm=Ze,a.bn=sc,a.bo=Wp,a.bp=js,a.bq=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=mr/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0],d=s.layout,v=s._unevaluatedLayout._values,T={layoutIconSize:v["icon-size"].possiblyEvaluate(new Lt(c.bucket.zoom+1),c.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Lt(c.bucket.zoom+1),c.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Lt(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:Z,maxZoom:J}=c.bucket.textSizeData;T.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Lt(Z),c.canonical),v["text-size"].possiblyEvaluate(new Lt(J),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:Z,maxZoom:J}=c.bucket.iconSizeData;T.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Lt(Z),c.canonical),v["icon-size"].possiblyEvaluate(new Lt(J),c.canonical)]}const P=d.get("text-line-height")*gr,k=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",R=d.get("text-keep-upright"),U=d.get("text-size");for(const Z of c.bucket.features){const J=d.get("text-font").evaluate(Z,{},c.canonical).join(","),st=U.evaluate(Z,{},c.canonical),ut=T.layoutTextSize.evaluate(Z,{},c.canonical),gt=T.layoutIconSize.evaluate(Z,{},c.canonical),yt={horizontal:{},vertical:void 0},Et=Z.text;let It,Vt=[0,0];if(Et){const ee=Et.toString(),ne=d.get("text-letter-spacing").evaluate(Z,{},c.canonical)*gr,Se=ul(ee)?ne:0,je=d.get("text-anchor").evaluate(Z,{},c.canonical),ln=H_(s,Z,c.canonical);if(!ln){const $e=d.get("text-radial-offset").evaluate(Z,{},c.canonical);Vt=$e?q_(je,[$e*gr,Kp]):d.get("text-offset").evaluate(Z,{},c.canonical).map((Re=>Re*gr))}let Xe=k?"center":d.get("text-justify").evaluate(Z,{},c.canonical);const We=d.get("symbol-placement"),Ue=We==="point"?d.get("text-max-width").evaluate(Z,{},c.canonical)*gr:0,en=()=>{c.bucket.allowVerticalPlacement&&gs(ee)&&(yt.vertical=hf(Et,c.glyphMap,c.glyphPositions,c.imagePositions,J,Ue,P,je,"left",Se,Vt,a.ai.vertical,!0,We,ut,st))};if(!k&&ln){const $e=new Set;if(Xe==="auto")for(let pn=0;pn<ln.values.length;pn+=2)$e.add(Cg(ln.values[pn]));else $e.add(Xe);let Re=!1;for(const pn of $e)if(!yt.horizontal[pn])if(Re)yt.horizontal[pn]=yt.horizontal[0];else{const un=hf(Et,c.glyphMap,c.glyphPositions,c.imagePositions,J,Ue,P,"center",pn,Se,Vt,a.ai.horizontal,!1,We,ut,st);un&&(yt.horizontal[pn]=un,Re=un.positionedLines.length===1)}en()}else{Xe==="auto"&&(Xe=Cg(je));const $e=hf(Et,c.glyphMap,c.glyphPositions,c.imagePositions,J,Ue,P,je,Xe,Se,Vt,a.ai.horizontal,!1,We,ut,st);$e&&(yt.horizontal[Xe]=$e),en(),gs(ee)&&k&&R&&(yt.vertical=hf(Et,c.glyphMap,c.glyphPositions,c.imagePositions,J,Ue,P,je,Xe,Se,Vt,a.ai.vertical,!1,We,ut,st))}}let Jt=!1;if(Z.icon&&Z.icon.name){const ee=c.imageMap[Z.icon.name];ee&&(It=L_(c.imagePositions[Z.icon.name],d.get("icon-offset").evaluate(Z,{},c.canonical),d.get("icon-anchor").evaluate(Z,{},c.canonical)),Jt=!!ee.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Jt:c.bucket.sdfIcons!==Jt&&ve("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ee.pixelRatio!==c.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Ht=Jp(yt.horizontal)||yt.vertical;c.bucket.iconsInText=!!Ht&&Ht.iconsInText,(Ht||It)&&Qp(c.bucket,Z,yt,It,c.imageMap,T,ut,gt,Vt,Jt,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},a.br=sd,a.bs=rd,a.bt=Mp,a.bu=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},a.bv=jl,a.bw=Qu,a.bx=function(c,s,d,v,T){return y(this,void 0,void 0,(function*(){if(X())try{return yield ft(c,s,d,v,T)}catch{}return(function(P,k,R,U,Z){const J=P.width,st=P.height;St&&jt||(St=new OffscreenCanvas(J,st),jt=St.getContext("2d",{willReadFrequently:!0})),St.width=J,St.height=st,jt.drawImage(P,0,0,J,st);const ut=jt.getImageData(k,R,U,Z);return jt.clearRect(0,0,J,st),ut.data})(c,s,d,v,T)}))},a.by=R_,a.bz=_,a.c=Oe,a.d=function(c,s){const d=new Image;d.onload=()=>{s(null,d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame((()=>{d.src=$t}))},d.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(c)],{type:"image/png"});d.src=c.byteLength?URL.createObjectURL(v):$t},a.e=ot,a.f=function(c,s){return ge(ot(c,{type:"json"}),s)},a.g=Le,a.h=ce,a.i=Pt,a.j=rn,a.k=On,a.l=nn,a.m=ge,a.n=function(c){return new jl(c).readFields(D_,[])},a.o=function(c,s,d){if(!c.length)return d(null,[]);let v=c.length;const T=new Array(c.length);let P=null;c.forEach(((k,R)=>{s(k,((U,Z)=>{U&&(P=U),T[R]=Z,--v==0&&d(P,T)}))}))},a.p=Ns,a.q=ef,a.r=oi,a.s=qe,a.t=Yf,a.u=Ye,a.v=me,a.w=ve,a.x=Ds,a.y=ao,a.z=function([c,s,d]){return s+=90,s*=Math.PI/180,d*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(d),y:c*Math.sin(s)*Math.sin(d),z:c*Math.cos(d)}}})),u(["./shared"],(function(a){class y{constructor(lt){this.keyCache={},lt&&this.replace(lt)}replace(lt){this._layerConfigs={},this._layers={},this.update(lt,[])}update(lt,dt){for(const Dt of lt){this._layerConfigs[Dt.id]=Dt;const zt=this._layers[Dt.id]=a.aC(Dt);zt._featureFilter=a.a6(zt.filter),this.keyCache[Dt.id]&&delete this.keyCache[Dt.id]}for(const Dt of dt)delete this.keyCache[Dt],delete this._layerConfigs[Dt],delete this._layers[Dt];this.familiesBySource={};const bt=a.bl(Object.values(this._layerConfigs),this.keyCache);for(const Dt of bt){const zt=Dt.map((ie=>this._layers[ie.id])),te=zt[0];if(te.visibility==="none")continue;const Zt=te.source||"";let Ut=this.familiesBySource[Zt];Ut||(Ut=this.familiesBySource[Zt]={});const Xt=te.sourceLayer||"_geojsonTileLayer";let _e=Ut[Xt];_e||(_e=Ut[Xt]=[]),_e.push(zt)}}}class _{constructor(lt){const dt={},bt=[];for(const Zt in lt){const Ut=lt[Zt],Xt=dt[Zt]={};for(const _e in Ut){const ie=Ut[+_e];if(!ie||ie.bitmap.width===0||ie.bitmap.height===0)continue;const Te={x:0,y:0,w:ie.bitmap.width+2,h:ie.bitmap.height+2};bt.push(Te),Xt[_e]={rect:Te,metrics:ie.metrics}}}const{w:Dt,h:zt}=a.p(bt),te=new a.q({width:Dt||1,height:zt||1});for(const Zt in lt){const Ut=lt[Zt];for(const Xt in Ut){const _e=Ut[+Xt];if(!_e||_e.bitmap.width===0||_e.bitmap.height===0)continue;const ie=dt[Zt][Xt].rect;a.q.copy(_e.bitmap,te,{x:0,y:0},{x:ie.x+1,y:ie.y+1},_e.bitmap)}}this.image=te,this.positions=dt}}a.bm("GlyphAtlas",_);class x{constructor(lt){this.tileID=new a.O(lt.tileID.overscaledZ,lt.tileID.wrap,lt.tileID.canonical.z,lt.tileID.canonical.x,lt.tileID.canonical.y),this.uid=lt.uid,this.zoom=lt.zoom,this.pixelRatio=lt.pixelRatio,this.tileSize=lt.tileSize,this.source=lt.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=lt.showCollisionBoxes,this.collectResourceTiming=!!lt.collectResourceTiming,this.returnDependencies=!!lt.returnDependencies,this.promoteId=lt.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(lt,dt,bt,Dt,zt){this.status="parsing",this.data=lt,this.collisionBoxArray=new a.a3;const te=new a.bn(Object.keys(lt.layers).sort()),Zt=new a.bo(this.tileID,this.promoteId);Zt.bucketLayerIDs=[];const Ut={},Xt={featureIndex:Zt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:bt},_e=dt.familiesBySource[this.source];for(const Kn in _e){const Hn=lt.layers[Kn];if(!Hn)continue;Hn.version===1&&a.w(`Vector tile source "${this.source}" layer "${Kn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const xr=te.encode(Kn),Ti=[];for(let Ri=0;Ri<Hn.length;Ri++){const nr=Hn.feature(Ri),Ar=Zt.getId(nr,Kn);Ti.push({feature:nr,id:Ar,index:Ri,sourceLayerIndex:xr})}for(const Ri of _e[Kn]){const nr=Ri[0];nr.source!==this.source&&a.w(`layer.source = ${nr.source} does not equal this.source = ${this.source}`),nr.minzoom&&this.zoom<Math.floor(nr.minzoom)||nr.maxzoom&&this.zoom>=nr.maxzoom||nr.visibility!=="none"&&(A(Ri,this.zoom,bt),(Ut[nr.id]=nr.createBucket({index:Zt.bucketLayerIDs.length,layers:Ri,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:xr,sourceID:this.source})).populate(Ti,Xt,this.tileID.canonical),Zt.bucketLayerIDs.push(Ri.map((Ar=>Ar.id))))}}let ie,Te,hn,dn;const He=a.aH(Xt.glyphDependencies,(Kn=>Object.keys(Kn).map(Number)));this.inFlightDependencies.forEach((Kn=>Kn?.cancel())),this.inFlightDependencies=[];const tn=++this.dependencySentinel;Object.keys(He).length?this.inFlightDependencies.push(Dt.send("getGlyphs",{uid:this.uid,stacks:He,source:this.source,tileID:this.tileID,type:"glyphs"},((Kn,Hn)=>{tn===this.dependencySentinel&&(ie||(ie=Kn,Te=Hn,pi.call(this)))}))):Te={};const _n=Object.keys(Xt.iconDependencies);_n.length?this.inFlightDependencies.push(Dt.send("getImages",{icons:_n,source:this.source,tileID:this.tileID,type:"icons"},((Kn,Hn)=>{tn===this.dependencySentinel&&(ie||(ie=Kn,hn=Hn,pi.call(this)))}))):hn={};const Vn=Object.keys(Xt.patternDependencies);function pi(){if(ie)return zt(ie);if(Te&&hn&&dn){const Kn=new _(Te),Hn=new a.bp(hn,dn);for(const xr in Ut){const Ti=Ut[xr];Ti instanceof a.a4?(A(Ti.layers,this.zoom,bt),a.bq({bucket:Ti,glyphMap:Te,glyphPositions:Kn.positions,imageMap:hn,imagePositions:Hn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ti.hasPattern&&(Ti instanceof a.br||Ti instanceof a.bs||Ti instanceof a.bt)&&(A(Ti.layers,this.zoom,bt),Ti.addFeatures(Xt,this.tileID.canonical,Hn.patternPositions))}this.status="done",zt(null,{buckets:Object.values(Ut).filter((xr=>!xr.isEmpty())),featureIndex:Zt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Kn.image,imageAtlas:Hn,glyphMap:this.returnDependencies?Te:null,iconMap:this.returnDependencies?hn:null,glyphPositions:this.returnDependencies?Kn.positions:null})}}Vn.length?this.inFlightDependencies.push(Dt.send("getImages",{icons:Vn,source:this.source,tileID:this.tileID,type:"patterns"},((Kn,Hn)=>{tn===this.dependencySentinel&&(ie||(ie=Kn,dn=Hn,pi.call(this)))}))):dn={},pi.call(this)}}function A(kt,lt,dt){const bt=new a.a8(lt);for(const Dt of kt)Dt.recalculate(bt,dt)}function O(kt,lt){const dt=a.l(kt.request,((bt,Dt,zt,te)=>{if(bt)lt(bt);else if(Dt)try{const Zt=new a.bw.VectorTile(new a.bv(Dt));lt(null,{vectorTile:Zt,rawData:Dt,cacheControl:zt,expires:te})}catch(Zt){const Ut=new Uint8Array(Dt);let Xt=`Unable to parse the tile at ${kt.request.url}, `;Xt+=Ut[0]===31&&Ut[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Zt.messge}`,lt(new Error(Xt))}}));return()=>{dt.cancel(),lt()}}class I{constructor(lt,dt,bt,Dt){this.actor=lt,this.layerIndex=dt,this.availableImages=bt,this.loadVectorData=Dt||O,this.fetching={},this.loading={},this.loaded={}}loadTile(lt,dt){const bt=lt.uid;this.loading||(this.loading={});const Dt=!!(lt&&lt.request&&lt.request.collectResourceTiming)&&new a.bu(lt.request),zt=this.loading[bt]=new x(lt);zt.abort=this.loadVectorData(lt,((te,Zt)=>{if(delete this.loading[bt],te||!Zt)return zt.status="done",this.loaded[bt]=zt,dt(te);const Ut=Zt.rawData,Xt={};Zt.expires&&(Xt.expires=Zt.expires),Zt.cacheControl&&(Xt.cacheControl=Zt.cacheControl);const _e={};if(Dt){const ie=Dt.finish();ie&&(_e.resourceTiming=JSON.parse(JSON.stringify(ie)))}zt.vectorTile=Zt.vectorTile,zt.parse(Zt.vectorTile,this.layerIndex,this.availableImages,this.actor,((ie,Te)=>{if(delete this.fetching[bt],ie||!Te)return dt(ie);dt(null,a.e({rawTileData:Ut.slice(0)},Te,Xt,_e))})),this.loaded=this.loaded||{},this.loaded[bt]=zt,this.fetching[bt]={rawTileData:Ut,cacheControl:Xt,resourceTiming:_e}}))}reloadTile(lt,dt){const bt=this.loaded,Dt=lt.uid;if(bt&&bt[Dt]){const zt=bt[Dt];zt.showCollisionBoxes=lt.showCollisionBoxes,zt.status==="parsing"?zt.parse(zt.vectorTile,this.layerIndex,this.availableImages,this.actor,((te,Zt)=>{if(te||!Zt)return dt(te,Zt);let Ut;if(this.fetching[Dt]){const{rawTileData:Xt,cacheControl:_e,resourceTiming:ie}=this.fetching[Dt];delete this.fetching[Dt],Ut=a.e({rawTileData:Xt.slice(0)},Zt,_e,ie)}else Ut=Zt;dt(null,Ut)})):zt.status==="done"&&(zt.vectorTile?zt.parse(zt.vectorTile,this.layerIndex,this.availableImages,this.actor,dt):dt())}}abortTile(lt,dt){const bt=this.loading,Dt=lt.uid;bt&&bt[Dt]&&bt[Dt].abort&&(bt[Dt].abort(),delete bt[Dt]),dt()}removeTile(lt,dt){const bt=this.loaded,Dt=lt.uid;bt&&bt[Dt]&&delete bt[Dt],dt()}}class F{constructor(){this.loaded={}}loadTile(lt,dt){return a._(this,void 0,void 0,(function*(){const{uid:bt,encoding:Dt,rawImageData:zt,redFactor:te,greenFactor:Zt,blueFactor:Ut,baseShift:Xt}=lt,_e=zt.width+2,ie=zt.height+2,Te=a.a(zt)?new a.R({width:_e,height:ie},yield a.bx(zt,-1,-1,_e,ie)):zt,hn=new a.by(bt,Te,Dt,te,Zt,Ut,Xt);this.loaded=this.loaded||{},this.loaded[bt]=hn,dt(null,hn)}))}removeTile(lt){const dt=this.loaded,bt=lt.uid;dt&&dt[bt]&&delete dt[bt]}}function q(kt,lt){if(kt.length!==0){H(kt[0],lt);for(var dt=1;dt<kt.length;dt++)H(kt[dt],!lt)}}function H(kt,lt){for(var dt=0,bt=0,Dt=0,zt=kt.length,te=zt-1;Dt<zt;te=Dt++){var Zt=(kt[Dt][0]-kt[te][0])*(kt[te][1]+kt[Dt][1]),Ut=dt+Zt;bt+=Math.abs(dt)>=Math.abs(Zt)?dt-Ut+Zt:Zt-Ut+dt,dt=Ut}dt+bt>=0!=!!lt&&kt.reverse()}var K=a.bz((function kt(lt,dt){var bt,Dt=lt&&lt.type;if(Dt==="FeatureCollection")for(bt=0;bt<lt.features.length;bt++)kt(lt.features[bt],dt);else if(Dt==="GeometryCollection")for(bt=0;bt<lt.geometries.length;bt++)kt(lt.geometries[bt],dt);else if(Dt==="Feature")kt(lt.geometry,dt);else if(Dt==="Polygon")q(lt.coordinates,dt);else if(Dt==="MultiPolygon")for(bt=0;bt<lt.coordinates.length;bt++)q(lt.coordinates[bt],dt);return lt}));const W=a.bw.VectorTileFeature.prototype.toGeoJSON;var X={exports:{}},tt=a.bA,Q=a.bw.VectorTileFeature,at=ht;function ht(kt,lt){this.options=lt||{},this.features=kt,this.length=kt.length}function ot(kt,lt){this.id=typeof kt.id=="number"?kt.id:void 0,this.type=kt.type,this.rawGeometry=kt.type===1?[kt.geometry]:kt.geometry,this.properties=kt.tags,this.extent=lt||4096}ht.prototype.feature=function(kt){return new ot(this.features[kt],this.options.extent)},ot.prototype.loadGeometry=function(){var kt=this.rawGeometry;this.geometry=[];for(var lt=0;lt<kt.length;lt++){for(var dt=kt[lt],bt=[],Dt=0;Dt<dt.length;Dt++)bt.push(new tt(dt[Dt][0],dt[Dt][1]));this.geometry.push(bt)}return this.geometry},ot.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var kt=this.geometry,lt=1/0,dt=-1/0,bt=1/0,Dt=-1/0,zt=0;zt<kt.length;zt++)for(var te=kt[zt],Zt=0;Zt<te.length;Zt++){var Ut=te[Zt];lt=Math.min(lt,Ut.x),dt=Math.max(dt,Ut.x),bt=Math.min(bt,Ut.y),Dt=Math.max(Dt,Ut.y)}return[lt,bt,dt,Dt]},ot.prototype.toGeoJSON=Q.prototype.toGeoJSON;var ct=a.bB,xt=at;function wt(kt){var lt=new ct;return(function(dt,bt){for(var Dt in dt.layers)bt.writeMessage(3,Ct,dt.layers[Dt])})(kt,lt),lt.finish()}function Ct(kt,lt){var dt;lt.writeVarintField(15,kt.version||1),lt.writeStringField(1,kt.name||""),lt.writeVarintField(5,kt.extent||4096);var bt={keys:[],values:[],keycache:{},valuecache:{}};for(dt=0;dt<kt.length;dt++)bt.feature=kt.feature(dt),lt.writeMessage(2,re,bt);var Dt=bt.keys;for(dt=0;dt<Dt.length;dt++)lt.writeStringField(3,Dt[dt]);var zt=bt.values;for(dt=0;dt<zt.length;dt++)lt.writeMessage(4,Bt,zt[dt])}function re(kt,lt){var dt=kt.feature;dt.id!==void 0&&lt.writeVarintField(1,dt.id),lt.writeMessage(2,ve,kt),lt.writeVarintField(3,dt.type),lt.writeMessage(4,Pt,dt)}function ve(kt,lt){var dt=kt.feature,bt=kt.keys,Dt=kt.values,zt=kt.keycache,te=kt.valuecache;for(var Zt in dt.properties){var Ut=dt.properties[Zt],Xt=zt[Zt];if(Ut!==null){Xt===void 0&&(bt.push(Zt),zt[Zt]=Xt=bt.length-1),lt.writeVarint(Xt);var _e=typeof Ut;_e!=="string"&&_e!=="boolean"&&_e!=="number"&&(Ut=JSON.stringify(Ut));var ie=_e+":"+Ut,Te=te[ie];Te===void 0&&(Dt.push(Ut),te[ie]=Te=Dt.length-1),lt.writeVarint(Te)}}}function Ee(kt,lt){return(lt<<3)+(7&kt)}function Nt(kt){return kt<<1^kt>>31}function Pt(kt,lt){for(var dt=kt.loadGeometry(),bt=kt.type,Dt=0,zt=0,te=dt.length,Zt=0;Zt<te;Zt++){var Ut=dt[Zt],Xt=1;bt===1&&(Xt=Ut.length),lt.writeVarint(Ee(1,Xt));for(var _e=bt===3?Ut.length-1:Ut.length,ie=0;ie<_e;ie++){ie===1&&bt!==1&&lt.writeVarint(Ee(2,_e-1));var Te=Ut[ie].x-Dt,hn=Ut[ie].y-zt;lt.writeVarint(Nt(Te)),lt.writeVarint(Nt(hn)),Dt+=Te,zt+=hn}bt===3&&lt.writeVarint(Ee(7,1))}}function Bt(kt,lt){var dt=typeof kt;dt==="string"?lt.writeStringField(1,kt):dt==="boolean"?lt.writeBooleanField(7,kt):dt==="number"&&(kt%1!=0?lt.writeDoubleField(3,kt):kt<0?lt.writeSVarintField(6,kt):lt.writeVarintField(5,kt))}X.exports=wt,X.exports.fromVectorTileJs=wt,X.exports.fromGeojsonVt=function(kt,lt){lt=lt||{};var dt={};for(var bt in kt)dt[bt]=new xt(kt[bt].features,lt),dt[bt].name=bt,dt[bt].version=lt.version,dt[bt].extent=lt.extent;return wt({layers:dt})},X.exports.GeoJSONWrapper=xt;var Ft=a.bz(X.exports);const $t={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:kt=>kt},ft=Math.fround||(St=new Float32Array(1),kt=>(St[0]=+kt,St[0]));var St;const jt=3,Yt=5,le=6;class ce{constructor(lt){this.options=Object.assign(Object.create($t),lt),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(lt){const{log:dt,minZoom:bt,maxZoom:Dt}=this.options;dt&&console.time("total time");const zt=`prepare ${lt.length} points`;dt&&console.time(zt),this.points=lt;const te=[];for(let Ut=0;Ut<lt.length;Ut++){const Xt=lt[Ut];if(!Xt.geometry)continue;const[_e,ie]=Xt.geometry.coordinates,Te=ft(Gt(_e)),hn=ft(Le(ie));te.push(Te,hn,1/0,Ut,-1,1),this.options.reduce&&te.push(0)}let Zt=this.trees[Dt+1]=this._createTree(te);dt&&console.timeEnd(zt);for(let Ut=Dt;Ut>=bt;Ut--){const Xt=+Date.now();Zt=this.trees[Ut]=this._createTree(this._cluster(Zt,Ut)),dt&&console.log("z%d: %d clusters in %dms",Ut,Zt.numItems,+Date.now()-Xt)}return dt&&console.timeEnd("total time"),this}getClusters(lt,dt){let bt=((lt[0]+180)%360+360)%360-180;const Dt=Math.max(-90,Math.min(90,lt[1]));let zt=lt[2]===180?180:((lt[2]+180)%360+360)%360-180;const te=Math.max(-90,Math.min(90,lt[3]));if(lt[2]-lt[0]>=360)bt=-180,zt=180;else if(bt>zt){const ie=this.getClusters([bt,Dt,180,te],dt),Te=this.getClusters([-180,Dt,zt,te],dt);return ie.concat(Te)}const Zt=this.trees[this._limitZoom(dt)],Ut=Zt.range(Gt(bt),Le(te),Gt(zt),Le(Dt)),Xt=Zt.data,_e=[];for(const ie of Ut){const Te=this.stride*ie;_e.push(Xt[Te+Yt]>1?Oe(Xt,Te,this.clusterProps):this.points[Xt[Te+jt]])}return _e}getChildren(lt){const dt=this._getOriginId(lt),bt=this._getOriginZoom(lt),Dt="No cluster with the specified id.",zt=this.trees[bt];if(!zt)throw new Error(Dt);const te=zt.data;if(dt*this.stride>=te.length)throw new Error(Dt);const Zt=this.options.radius/(this.options.extent*Math.pow(2,bt-1)),Ut=zt.within(te[dt*this.stride],te[dt*this.stride+1],Zt),Xt=[];for(const _e of Ut){const ie=_e*this.stride;te[ie+4]===lt&&Xt.push(te[ie+Yt]>1?Oe(te,ie,this.clusterProps):this.points[te[ie+jt]])}if(Xt.length===0)throw new Error(Dt);return Xt}getLeaves(lt,dt,bt){const Dt=[];return this._appendLeaves(Dt,lt,dt=dt||10,bt=bt||0,0),Dt}getTile(lt,dt,bt){const Dt=this.trees[this._limitZoom(lt)],zt=Math.pow(2,lt),{extent:te,radius:Zt}=this.options,Ut=Zt/te,Xt=(bt-Ut)/zt,_e=(bt+1+Ut)/zt,ie={features:[]};return this._addTileFeatures(Dt.range((dt-Ut)/zt,Xt,(dt+1+Ut)/zt,_e),Dt.data,dt,bt,zt,ie),dt===0&&this._addTileFeatures(Dt.range(1-Ut/zt,Xt,1,_e),Dt.data,zt,bt,zt,ie),dt===zt-1&&this._addTileFeatures(Dt.range(0,Xt,Ut/zt,_e),Dt.data,-1,bt,zt,ie),ie.features.length?ie:null}getClusterExpansionZoom(lt){let dt=this._getOriginZoom(lt)-1;for(;dt<=this.options.maxZoom;){const bt=this.getChildren(lt);if(dt++,bt.length!==1)break;lt=bt[0].properties.cluster_id}return dt}_appendLeaves(lt,dt,bt,Dt,zt){const te=this.getChildren(dt);for(const Zt of te){const Ut=Zt.properties;if(Ut&&Ut.cluster?zt+Ut.point_count<=Dt?zt+=Ut.point_count:zt=this._appendLeaves(lt,Ut.cluster_id,bt,Dt,zt):zt<Dt?zt++:lt.push(Zt),lt.length===bt)break}return zt}_createTree(lt){const dt=new a.av(lt.length/this.stride|0,this.options.nodeSize,Float32Array);for(let bt=0;bt<lt.length;bt+=this.stride)dt.add(lt[bt],lt[bt+1]);return dt.finish(),dt.data=lt,dt}_addTileFeatures(lt,dt,bt,Dt,zt,te){for(const Zt of lt){const Ut=Zt*this.stride,Xt=dt[Ut+Yt]>1;let _e,ie,Te;if(Xt)_e=Ie(dt,Ut,this.clusterProps),ie=dt[Ut],Te=dt[Ut+1];else{const He=this.points[dt[Ut+jt]];_e=He.properties;const[tn,_n]=He.geometry.coordinates;ie=Gt(tn),Te=Le(_n)}const hn={type:1,geometry:[[Math.round(this.options.extent*(ie*zt-bt)),Math.round(this.options.extent*(Te*zt-Dt))]],tags:_e};let dn;dn=Xt||this.options.generateId?dt[Ut+jt]:this.points[dt[Ut+jt]].id,dn!==void 0&&(hn.id=dn),te.features.push(hn)}}_limitZoom(lt){return Math.max(this.options.minZoom,Math.min(Math.floor(+lt),this.options.maxZoom+1))}_cluster(lt,dt){const{radius:bt,extent:Dt,reduce:zt,minPoints:te}=this.options,Zt=bt/(Dt*Math.pow(2,dt)),Ut=lt.data,Xt=[],_e=this.stride;for(let ie=0;ie<Ut.length;ie+=_e){if(Ut[ie+2]<=dt)continue;Ut[ie+2]=dt;const Te=Ut[ie],hn=Ut[ie+1],dn=lt.within(Ut[ie],Ut[ie+1],Zt),He=Ut[ie+Yt];let tn=He;for(const _n of dn){const Vn=_n*_e;Ut[Vn+2]>dt&&(tn+=Ut[Vn+Yt])}if(tn>He&&tn>=te){let _n,Vn=Te*He,pi=hn*He,Kn=-1;const Hn=((ie/_e|0)<<5)+(dt+1)+this.points.length;for(const xr of dn){const Ti=xr*_e;if(Ut[Ti+2]<=dt)continue;Ut[Ti+2]=dt;const Ri=Ut[Ti+Yt];Vn+=Ut[Ti]*Ri,pi+=Ut[Ti+1]*Ri,Ut[Ti+4]=Hn,zt&&(_n||(_n=this._map(Ut,ie,!0),Kn=this.clusterProps.length,this.clusterProps.push(_n)),zt(_n,this._map(Ut,Ti)))}Ut[ie+4]=Hn,Xt.push(Vn/tn,pi/tn,1/0,Hn,-1,tn),zt&&Xt.push(Kn)}else{for(let _n=0;_n<_e;_n++)Xt.push(Ut[ie+_n]);if(tn>1)for(const _n of dn){const Vn=_n*_e;if(!(Ut[Vn+2]<=dt)){Ut[Vn+2]=dt;for(let pi=0;pi<_e;pi++)Xt.push(Ut[Vn+pi])}}}}return Xt}_getOriginId(lt){return lt-this.points.length>>5}_getOriginZoom(lt){return(lt-this.points.length)%32}_map(lt,dt,bt){if(lt[dt+Yt]>1){const te=this.clusterProps[lt[dt+le]];return bt?Object.assign({},te):te}const Dt=this.points[lt[dt+jt]].properties,zt=this.options.map(Dt);return bt&&zt===Dt?Object.assign({},zt):zt}}function Oe(kt,lt,dt){return{type:"Feature",id:kt[lt+jt],properties:Ie(kt,lt,dt),geometry:{type:"Point",coordinates:[(bt=kt[lt],360*(bt-.5)),Pe(kt[lt+1])]}};var bt}function Ie(kt,lt,dt){const bt=kt[lt+Yt],Dt=bt>=1e4?`${Math.round(bt/1e3)}k`:bt>=1e3?Math.round(bt/100)/10+"k":bt,zt=kt[lt+le],te=zt===-1?{}:Object.assign({},dt[zt]);return Object.assign(te,{cluster:!0,cluster_id:kt[lt+jt],point_count:bt,point_count_abbreviated:Dt})}function Gt(kt){return kt/360+.5}function Le(kt){const lt=Math.sin(kt*Math.PI/180),dt=.5-.25*Math.log((1+lt)/(1-lt))/Math.PI;return dt<0?0:dt>1?1:dt}function Pe(kt){const lt=(180-360*kt)*Math.PI/180;return 360*Math.atan(Math.exp(lt))/Math.PI-90}function ge(kt,lt,dt,bt){for(var Dt,zt=bt,te=dt-lt>>1,Zt=dt-lt,Ut=kt[lt],Xt=kt[lt+1],_e=kt[dt],ie=kt[dt+1],Te=lt+3;Te<dt;Te+=3){var hn=nn(kt[Te],kt[Te+1],Ut,Xt,_e,ie);if(hn>zt)Dt=Te,zt=hn;else if(hn===zt){var dn=Math.abs(Te-te);dn<Zt&&(Dt=Te,Zt=dn)}}zt>bt&&(Dt-lt>3&&ge(kt,lt,Dt,bt),kt[Dt+2]=zt,dt-Dt>3&&ge(kt,Dt,dt,bt))}function nn(kt,lt,dt,bt,Dt,zt){var te=Dt-dt,Zt=zt-bt;if(te!==0||Zt!==0){var Ut=((kt-dt)*te+(lt-bt)*Zt)/(te*te+Zt*Zt);Ut>1?(dt=Dt,bt=zt):Ut>0&&(dt+=te*Ut,bt+=Zt*Ut)}return(te=kt-dt)*te+(Zt=lt-bt)*Zt}function qe(kt,lt,dt,bt){var Dt={id:kt===void 0?null:kt,type:lt,geometry:dt,tags:bt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(zt){var te=zt.geometry,Zt=zt.type;if(Zt==="Point"||Zt==="MultiPoint"||Zt==="LineString")an(zt,te);else if(Zt==="Polygon"||Zt==="MultiLineString")for(var Ut=0;Ut<te.length;Ut++)an(zt,te[Ut]);else if(Zt==="MultiPolygon")for(Ut=0;Ut<te.length;Ut++)for(var Xt=0;Xt<te[Ut].length;Xt++)an(zt,te[Ut][Xt])})(Dt),Dt}function an(kt,lt){for(var dt=0;dt<lt.length;dt+=3)kt.minX=Math.min(kt.minX,lt[dt]),kt.minY=Math.min(kt.minY,lt[dt+1]),kt.maxX=Math.max(kt.maxX,lt[dt]),kt.maxY=Math.max(kt.maxY,lt[dt+1])}function Ke(kt,lt,dt,bt){if(lt.geometry){var Dt=lt.geometry.coordinates,zt=lt.geometry.type,te=Math.pow(dt.tolerance/((1<<dt.maxZoom)*dt.extent),2),Zt=[],Ut=lt.id;if(dt.promoteId?Ut=lt.properties[dt.promoteId]:dt.generateId&&(Ut=bt||0),zt==="Point")On(Dt,Zt);else if(zt==="MultiPoint")for(var Xt=0;Xt<Dt.length;Xt++)On(Dt[Xt],Zt);else if(zt==="LineString")rn(Dt,Zt,te,!1);else if(zt==="MultiLineString"){if(dt.lineMetrics){for(Xt=0;Xt<Dt.length;Xt++)rn(Dt[Xt],Zt=[],te,!1),kt.push(qe(Ut,"LineString",Zt,lt.properties));return}In(Dt,Zt,te,!1)}else if(zt==="Polygon")In(Dt,Zt,te,!0);else{if(zt!=="MultiPolygon"){if(zt==="GeometryCollection"){for(Xt=0;Xt<lt.geometry.geometries.length;Xt++)Ke(kt,{id:Ut,geometry:lt.geometry.geometries[Xt],properties:lt.properties},dt,bt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Xt=0;Xt<Dt.length;Xt++){var _e=[];In(Dt[Xt],_e,te,!0),Zt.push(_e)}}kt.push(qe(Ut,zt,Zt,lt.properties))}}function On(kt,lt){lt.push(me(kt[0])),lt.push(ki(kt[1])),lt.push(0)}function rn(kt,lt,dt,bt){for(var Dt,zt,te=0,Zt=0;Zt<kt.length;Zt++){var Ut=me(kt[Zt][0]),Xt=ki(kt[Zt][1]);lt.push(Ut),lt.push(Xt),lt.push(0),Zt>0&&(te+=bt?(Dt*Xt-Ut*zt)/2:Math.sqrt(Math.pow(Ut-Dt,2)+Math.pow(Xt-zt,2))),Dt=Ut,zt=Xt}var _e=lt.length-3;lt[2]=1,ge(lt,0,_e,dt),lt[_e+2]=1,lt.size=Math.abs(te),lt.start=0,lt.end=lt.size}function In(kt,lt,dt,bt){for(var Dt=0;Dt<kt.length;Dt++){var zt=[];rn(kt[Dt],zt,dt,bt),lt.push(zt)}}function me(kt){return kt/360+.5}function ki(kt){var lt=Math.sin(kt*Math.PI/180),dt=.5-.25*Math.log((1+lt)/(1-lt))/Math.PI;return dt<0?0:dt>1?1:dt}function Li(kt,lt,dt,bt,Dt,zt,te,Zt){if(bt/=lt,zt>=(dt/=lt)&&te<bt)return kt;if(te<dt||zt>=bt)return null;for(var Ut=[],Xt=0;Xt<kt.length;Xt++){var _e=kt[Xt],ie=_e.geometry,Te=_e.type,hn=Dt===0?_e.minX:_e.minY,dn=Dt===0?_e.maxX:_e.maxY;if(hn>=dt&&dn<bt)Ut.push(_e);else if(!(dn<dt||hn>=bt)){var He=[];if(Te==="Point"||Te==="MultiPoint")Yn(ie,He,dt,bt,Dt);else if(Te==="LineString")cn(ie,He,dt,bt,Dt,!1,Zt.lineMetrics);else if(Te==="MultiLineString")si(ie,He,dt,bt,Dt,!1);else if(Te==="Polygon")si(ie,He,dt,bt,Dt,!0);else if(Te==="MultiPolygon")for(var tn=0;tn<ie.length;tn++){var _n=[];si(ie[tn],_n,dt,bt,Dt,!0),_n.length&&He.push(_n)}if(He.length){if(Zt.lineMetrics&&Te==="LineString"){for(tn=0;tn<He.length;tn++)Ut.push(qe(_e.id,Te,He[tn],_e.tags));continue}Te!=="LineString"&&Te!=="MultiLineString"||(He.length===1?(Te="LineString",He=He[0]):Te="MultiLineString"),Te!=="Point"&&Te!=="MultiPoint"||(Te=He.length===3?"Point":"MultiPoint"),Ut.push(qe(_e.id,Te,He,_e.tags))}}}return Ut.length?Ut:null}function Yn(kt,lt,dt,bt,Dt){for(var zt=0;zt<kt.length;zt+=3){var te=kt[zt+Dt];te>=dt&&te<=bt&&(lt.push(kt[zt]),lt.push(kt[zt+1]),lt.push(kt[zt+2]))}}function cn(kt,lt,dt,bt,Dt,zt,te){for(var Zt,Ut,Xt=Zi(kt),_e=Dt===0?jr:Ws,ie=kt.start,Te=0;Te<kt.length-3;Te+=3){var hn=kt[Te],dn=kt[Te+1],He=kt[Te+2],tn=kt[Te+3],_n=kt[Te+4],Vn=Dt===0?hn:dn,pi=Dt===0?tn:_n,Kn=!1;te&&(Zt=Math.sqrt(Math.pow(hn-tn,2)+Math.pow(dn-_n,2))),Vn<dt?pi>dt&&(Ut=_e(Xt,hn,dn,tn,_n,dt),te&&(Xt.start=ie+Zt*Ut)):Vn>bt?pi<bt&&(Ut=_e(Xt,hn,dn,tn,_n,bt),te&&(Xt.start=ie+Zt*Ut)):Ii(Xt,hn,dn,He),pi<dt&&Vn>=dt&&(Ut=_e(Xt,hn,dn,tn,_n,dt),Kn=!0),pi>bt&&Vn<=bt&&(Ut=_e(Xt,hn,dn,tn,_n,bt),Kn=!0),!zt&&Kn&&(te&&(Xt.end=ie+Zt*Ut),lt.push(Xt),Xt=Zi(kt)),te&&(ie+=Zt)}var Hn=kt.length-3;hn=kt[Hn],dn=kt[Hn+1],He=kt[Hn+2],(Vn=Dt===0?hn:dn)>=dt&&Vn<=bt&&Ii(Xt,hn,dn,He),Hn=Xt.length-3,zt&&Hn>=3&&(Xt[Hn]!==Xt[0]||Xt[Hn+1]!==Xt[1])&&Ii(Xt,Xt[0],Xt[1],Xt[2]),Xt.length&&lt.push(Xt)}function Zi(kt){var lt=[];return lt.size=kt.size,lt.start=kt.start,lt.end=kt.end,lt}function si(kt,lt,dt,bt,Dt,zt){for(var te=0;te<kt.length;te++)cn(kt[te],lt,dt,bt,Dt,zt,!1)}function Ii(kt,lt,dt,bt){kt.push(lt),kt.push(dt),kt.push(bt)}function jr(kt,lt,dt,bt,Dt,zt){var te=(zt-lt)/(bt-lt);return kt.push(zt),kt.push(dt+(Dt-dt)*te),kt.push(1),te}function Ws(kt,lt,dt,bt,Dt,zt){var te=(zt-dt)/(Dt-dt);return kt.push(lt+(bt-lt)*te),kt.push(zt),kt.push(1),te}function Wa(kt,lt){for(var dt=[],bt=0;bt<kt.length;bt++){var Dt,zt=kt[bt],te=zt.type;if(te==="Point"||te==="MultiPoint"||te==="LineString")Dt=_a(zt.geometry,lt);else if(te==="MultiLineString"||te==="Polygon"){Dt=[];for(var Zt=0;Zt<zt.geometry.length;Zt++)Dt.push(_a(zt.geometry[Zt],lt))}else if(te==="MultiPolygon")for(Dt=[],Zt=0;Zt<zt.geometry.length;Zt++){for(var Ut=[],Xt=0;Xt<zt.geometry[Zt].length;Xt++)Ut.push(_a(zt.geometry[Zt][Xt],lt));Dt.push(Ut)}dt.push(qe(zt.id,te,Dt,zt.tags))}return dt}function _a(kt,lt){var dt=[];dt.size=kt.size,kt.start!==void 0&&(dt.start=kt.start,dt.end=kt.end);for(var bt=0;bt<kt.length;bt+=3)dt.push(kt[bt]+lt,kt[bt+1],kt[bt+2]);return dt}function Be(kt,lt){if(kt.transformed)return kt;var dt,bt,Dt,zt=1<<kt.z,te=kt.x,Zt=kt.y;for(dt=0;dt<kt.features.length;dt++){var Ut=kt.features[dt],Xt=Ut.geometry,_e=Ut.type;if(Ut.geometry=[],_e===1)for(bt=0;bt<Xt.length;bt+=2)Ut.geometry.push(hr(Xt[bt],Xt[bt+1],lt,zt,te,Zt));else for(bt=0;bt<Xt.length;bt++){var ie=[];for(Dt=0;Dt<Xt[bt].length;Dt+=2)ie.push(hr(Xt[bt][Dt],Xt[bt][Dt+1],lt,zt,te,Zt));Ut.geometry.push(ie)}}return kt.transformed=!0,kt}function hr(kt,lt,dt,bt,Dt,zt){return[Math.round(dt*(kt*bt-Dt)),Math.round(dt*(lt*bt-zt))]}function Un(kt,lt,dt,bt,Dt){for(var zt=lt===Dt.maxZoom?0:Dt.tolerance/((1<<lt)*Dt.extent),te={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:dt,y:bt,z:lt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Zt=0;Zt<kt.length;Zt++){te.numFeatures++,va(te,kt[Zt],zt,Dt);var Ut=kt[Zt].minX,Xt=kt[Zt].minY,_e=kt[Zt].maxX,ie=kt[Zt].maxY;Ut<te.minX&&(te.minX=Ut),Xt<te.minY&&(te.minY=Xt),_e>te.maxX&&(te.maxX=_e),ie>te.maxY&&(te.maxY=ie)}return te}function va(kt,lt,dt,bt){var Dt=lt.geometry,zt=lt.type,te=[];if(zt==="Point"||zt==="MultiPoint")for(var Zt=0;Zt<Dt.length;Zt+=3)te.push(Dt[Zt]),te.push(Dt[Zt+1]),kt.numPoints++,kt.numSimplified++;else if(zt==="LineString")fr(te,Dt,kt,dt,!1,!1);else if(zt==="MultiLineString"||zt==="Polygon")for(Zt=0;Zt<Dt.length;Zt++)fr(te,Dt[Zt],kt,dt,zt==="Polygon",Zt===0);else if(zt==="MultiPolygon")for(var Ut=0;Ut<Dt.length;Ut++){var Xt=Dt[Ut];for(Zt=0;Zt<Xt.length;Zt++)fr(te,Xt[Zt],kt,dt,!0,Zt===0)}if(te.length){var _e=lt.tags||null;if(zt==="LineString"&&bt.lineMetrics){for(var ie in _e={},lt.tags)_e[ie]=lt.tags[ie];_e.mapbox_clip_start=Dt.start/Dt.size,_e.mapbox_clip_end=Dt.end/Dt.size}var Te={geometry:te,type:zt==="Polygon"||zt==="MultiPolygon"?3:zt==="LineString"||zt==="MultiLineString"?2:1,tags:_e};lt.id!==null&&(Te.id=lt.id),kt.features.push(Te)}}function fr(kt,lt,dt,bt,Dt,zt){var te=bt*bt;if(bt>0&&lt.size<(Dt?te:bt))dt.numPoints+=lt.length/3;else{for(var Zt=[],Ut=0;Ut<lt.length;Ut+=3)(bt===0||lt[Ut+2]>te)&&(dt.numSimplified++,Zt.push(lt[Ut]),Zt.push(lt[Ut+1])),dt.numPoints++;Dt&&(function(Xt,_e){for(var ie=0,Te=0,hn=Xt.length,dn=hn-2;Te<hn;dn=Te,Te+=2)ie+=(Xt[Te]-Xt[dn])*(Xt[Te+1]+Xt[dn+1]);if(ie>0===_e)for(Te=0,hn=Xt.length;Te<hn/2;Te+=2){var He=Xt[Te],tn=Xt[Te+1];Xt[Te]=Xt[hn-2-Te],Xt[Te+1]=Xt[hn-1-Te],Xt[hn-2-Te]=He,Xt[hn-1-Te]=tn}})(Zt,zt),kt.push(Zt)}}function Fe(kt,lt){var dt=(lt=this.options=(function(Dt,zt){for(var te in zt)Dt[te]=zt[te];return Dt})(Object.create(this.options),lt)).debug;if(dt&&console.time("preprocess data"),lt.maxZoom<0||lt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(lt.promoteId&&lt.generateId)throw new Error("promoteId and generateId cannot be used together.");var bt=(function(Dt,zt){var te=[];if(Dt.type==="FeatureCollection")for(var Zt=0;Zt<Dt.features.length;Zt++)Ke(te,Dt.features[Zt],zt,Zt);else Ke(te,Dt.type==="Feature"?Dt:{geometry:Dt},zt);return te})(kt,lt);this.tiles={},this.tileCoords=[],dt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",lt.indexMaxZoom,lt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),bt=(function(Dt,zt){var te=zt.buffer/zt.extent,Zt=Dt,Ut=Li(Dt,1,-1-te,te,0,-1,2,zt),Xt=Li(Dt,1,1-te,2+te,0,-1,2,zt);return(Ut||Xt)&&(Zt=Li(Dt,1,-te,1+te,0,-1,2,zt)||[],Ut&&(Zt=Wa(Ut,1).concat(Zt)),Xt&&(Zt=Zt.concat(Wa(Xt,-1)))),Zt})(bt,lt),bt.length&&this.splitTile(bt,0,0,0),dt&&(bt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Dn(kt,lt,dt){return 32*((1<<kt)*dt+lt)+kt}function wn(kt,lt){return lt?kt.properties[lt]:kt.id}function Mr(kt,lt){if(kt==null)return!0;if(kt.type==="Feature")return wn(kt,lt)!=null;if(kt.type==="FeatureCollection"){const dt=new Set;for(const bt of kt.features){const Dt=wn(bt,lt);if(Dt==null||dt.has(Dt))return!1;dt.add(Dt)}return!0}return!1}function za(kt,lt){const dt=new Map;if(kt!=null)if(kt.type==="Feature")dt.set(wn(kt,lt),kt);else for(const bt of kt.features)dt.set(wn(bt,lt),bt);return dt}Fe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Fe.prototype.splitTile=function(kt,lt,dt,bt,Dt,zt,te){for(var Zt=[kt,lt,dt,bt],Ut=this.options,Xt=Ut.debug;Zt.length;){bt=Zt.pop(),dt=Zt.pop(),lt=Zt.pop(),kt=Zt.pop();var _e=1<<lt,ie=Dn(lt,dt,bt),Te=this.tiles[ie];if(!Te&&(Xt>1&&console.time("creation"),Te=this.tiles[ie]=Un(kt,lt,dt,bt,Ut),this.tileCoords.push({z:lt,x:dt,y:bt}),Xt)){Xt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",lt,dt,bt,Te.numFeatures,Te.numPoints,Te.numSimplified),console.timeEnd("creation"));var hn="z"+lt;this.stats[hn]=(this.stats[hn]||0)+1,this.total++}if(Te.source=kt,Dt){if(lt===Ut.maxZoom||lt===Dt)continue;var dn=1<<Dt-lt;if(dt!==Math.floor(zt/dn)||bt!==Math.floor(te/dn))continue}else if(lt===Ut.indexMaxZoom||Te.numPoints<=Ut.indexMaxPoints)continue;if(Te.source=null,kt.length!==0){Xt>1&&console.time("clipping");var He,tn,_n,Vn,pi,Kn,Hn=.5*Ut.buffer/Ut.extent,xr=.5-Hn,Ti=.5+Hn,Ri=1+Hn;He=tn=_n=Vn=null,pi=Li(kt,_e,dt-Hn,dt+Ti,0,Te.minX,Te.maxX,Ut),Kn=Li(kt,_e,dt+xr,dt+Ri,0,Te.minX,Te.maxX,Ut),kt=null,pi&&(He=Li(pi,_e,bt-Hn,bt+Ti,1,Te.minY,Te.maxY,Ut),tn=Li(pi,_e,bt+xr,bt+Ri,1,Te.minY,Te.maxY,Ut),pi=null),Kn&&(_n=Li(Kn,_e,bt-Hn,bt+Ti,1,Te.minY,Te.maxY,Ut),Vn=Li(Kn,_e,bt+xr,bt+Ri,1,Te.minY,Te.maxY,Ut),Kn=null),Xt>1&&console.timeEnd("clipping"),Zt.push(He||[],lt+1,2*dt,2*bt),Zt.push(tn||[],lt+1,2*dt,2*bt+1),Zt.push(_n||[],lt+1,2*dt+1,2*bt),Zt.push(Vn||[],lt+1,2*dt+1,2*bt+1)}}},Fe.prototype.getTile=function(kt,lt,dt){var bt=this.options,Dt=bt.extent,zt=bt.debug;if(kt<0||kt>24)return null;var te=1<<kt,Zt=Dn(kt,lt=(lt%te+te)%te,dt);if(this.tiles[Zt])return Be(this.tiles[Zt],Dt);zt>1&&console.log("drilling down to z%d-%d-%d",kt,lt,dt);for(var Ut,Xt=kt,_e=lt,ie=dt;!Ut&&Xt>0;)Xt--,_e=Math.floor(_e/2),ie=Math.floor(ie/2),Ut=this.tiles[Dn(Xt,_e,ie)];return Ut&&Ut.source?(zt>1&&console.log("found parent tile z%d-%d-%d",Xt,_e,ie),zt>1&&console.time("drilling down"),this.splitTile(Ut.source,Xt,_e,ie,kt,lt,dt),zt>1&&console.timeEnd("drilling down"),this.tiles[Zt]?Be(this.tiles[Zt],Dt):null):null};class bn extends I{constructor(lt,dt,bt,Dt){super(lt,dt,bt),this._dataUpdateable=new Map,this.loadGeoJSON=(zt,te)=>{const{promoteId:Zt}=zt;if(zt.request)return a.f(zt.request,((Ut,Xt,_e,ie)=>{this._dataUpdateable=Mr(Xt,Zt)?za(Xt,Zt):void 0,te(Ut,Xt,_e,ie)}));if(typeof zt.data=="string")try{const Ut=JSON.parse(zt.data);this._dataUpdateable=Mr(Ut,Zt)?za(Ut,Zt):void 0,te(null,Ut)}catch{te(new Error(`Input data given to '${zt.source}' is not a valid GeoJSON object.`))}else zt.dataDiff?this._dataUpdateable?((function(Ut,Xt,_e){var ie,Te,hn,dn;if(Xt.removeAll&&Ut.clear(),Xt.remove)for(const He of Xt.remove)Ut.delete(He);if(Xt.add)for(const He of Xt.add){const tn=wn(He,_e);tn!=null&&Ut.set(tn,He)}if(Xt.update)for(const He of Xt.update){let tn=Ut.get(He.id);if(tn==null)continue;const _n=!He.removeAllProperties&&(((ie=He.removeProperties)===null||ie===void 0?void 0:ie.length)>0||((Te=He.addOrUpdateProperties)===null||Te===void 0?void 0:Te.length)>0);if((He.newGeometry||He.removeAllProperties||_n)&&(tn=Object.assign({},tn),Ut.set(He.id,tn),_n&&(tn.properties=Object.assign({},tn.properties))),He.newGeometry&&(tn.geometry=He.newGeometry),He.removeAllProperties)tn.properties={};else if(((hn=He.removeProperties)===null||hn===void 0?void 0:hn.length)>0)for(const Vn of He.removeProperties)Object.prototype.hasOwnProperty.call(tn.properties,Vn)&&delete tn.properties[Vn];if(((dn=He.addOrUpdateProperties)===null||dn===void 0?void 0:dn.length)>0)for(const{key:Vn,value:pi}of He.addOrUpdateProperties)tn.properties[Vn]=pi}})(this._dataUpdateable,zt.dataDiff,Zt),te(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):te(new Error(`Cannot update existing geojson data in ${zt.source}`)):te(new Error(`Input data given to '${zt.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Dt&&(this.loadGeoJSON=Dt)}loadGeoJSONTile(lt,dt){const bt=lt.tileID.canonical;if(!this._geoJSONIndex)return dt(null,null);const Dt=this._geoJSONIndex.getTile(bt.z,bt.x,bt.y);if(!Dt)return dt(null,null);const zt=new class{constructor(Zt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.N,this.length=Zt.length,this._features=Zt}feature(Zt){return new class{constructor(Ut){this._feature=Ut,this.extent=a.N,this.type=Ut.type,this.properties=Ut.tags,"id"in Ut&&!isNaN(Ut.id)&&(this.id=parseInt(Ut.id,10))}loadGeometry(){if(this._feature.type===1){const Ut=[];for(const Xt of this._feature.geometry)Ut.push([new a.P(Xt[0],Xt[1])]);return Ut}{const Ut=[];for(const Xt of this._feature.geometry){const _e=[];for(const ie of Xt)_e.push(new a.P(ie[0],ie[1]));Ut.push(_e)}return Ut}}toGeoJSON(Ut,Xt,_e){return W.call(this,Ut,Xt,_e)}}(this._features[Zt])}}(Dt.features);let te=Ft(zt);te.byteOffset===0&&te.byteLength===te.buffer.byteLength||(te=new Uint8Array(te)),dt(null,{vectorTile:zt,rawData:te.buffer})}loadData(lt,dt){var bt;(bt=this._pendingRequest)===null||bt===void 0||bt.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Dt=!!(lt&&lt.request&&lt.request.collectResourceTiming)&&new a.bu(lt.request);this._pendingCallback=dt,this._pendingRequest=this.loadGeoJSON(lt,((zt,te)=>{if(delete this._pendingCallback,delete this._pendingRequest,zt||!te)return dt(zt);if(typeof te!="object")return dt(new Error(`Input data given to '${lt.source}' is not a valid GeoJSON object.`));{K(te,!0);try{if(lt.filter){const Ut=a.bC(lt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ut.result==="error")throw new Error(Ut.value.map((_e=>`${_e.key}: ${_e.message}`)).join(", "));te={type:"FeatureCollection",features:te.features.filter((_e=>Ut.value.evaluate({zoom:0},_e)))}}this._geoJSONIndex=lt.cluster?new ce((function({superclusterOptions:Ut,clusterProperties:Xt}){if(!Xt||!Ut)return Ut;const _e={},ie={},Te={accumulated:null,zoom:0},hn={properties:null},dn=Object.keys(Xt);for(const He of dn){const[tn,_n]=Xt[He],Vn=a.bC(_n),pi=a.bC(typeof tn=="string"?[tn,["accumulated"],["get",He]]:tn);_e[He]=Vn.value,ie[He]=pi.value}return Ut.map=He=>{hn.properties=He;const tn={};for(const _n of dn)tn[_n]=_e[_n].evaluate(Te,hn);return tn},Ut.reduce=(He,tn)=>{hn.properties=tn;for(const _n of dn)Te.accumulated=He[_n],He[_n]=ie[_n].evaluate(Te,hn)},Ut})(lt)).load(te.features):(function(Ut,Xt){return new Fe(Ut,Xt)})(te,lt.geojsonVtOptions)}catch(Ut){return dt(Ut)}this.loaded={};const Zt={};if(Dt){const Ut=Dt.finish();Ut&&(Zt.resourceTiming={},Zt.resourceTiming[lt.source]=JSON.parse(JSON.stringify(Ut)))}dt(null,Zt)}}))}reloadTile(lt,dt){const bt=this.loaded;return bt&&bt[lt.uid]?super.reloadTile(lt,dt):this.loadTile(lt,dt)}removeSource(lt,dt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),dt()}getClusterExpansionZoom(lt,dt){try{dt(null,this._geoJSONIndex.getClusterExpansionZoom(lt.clusterId))}catch(bt){dt(bt)}}getClusterChildren(lt,dt){try{dt(null,this._geoJSONIndex.getChildren(lt.clusterId))}catch(bt){dt(bt)}}getClusterLeaves(lt,dt){try{dt(null,this._geoJSONIndex.getLeaves(lt.clusterId,lt.limit,lt.offset))}catch(bt){dt(bt)}}}class xa{constructor(lt){this.self=lt,this.actor=new a.C(lt,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:I,geojson:bn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(dt,bt)=>{if(this.workerSourceTypes[dt])throw new Error(`Worker source with name "${dt}" already registered.`);this.workerSourceTypes[dt]=bt},this.self.registerRTLTextPlugin=dt=>{if(a.bD.isParsed())throw new Error("RTL text plugin already registered.");a.bD.applyArabicShaping=dt.applyArabicShaping,a.bD.processBidirectionalText=dt.processBidirectionalText,a.bD.processStyledBidirectionalText=dt.processStyledBidirectionalText}}setReferrer(lt,dt){this.referrer=dt}setImages(lt,dt,bt){this.availableImages[lt]=dt;for(const Dt in this.workerSources[lt]){const zt=this.workerSources[lt][Dt];for(const te in zt)zt[te].availableImages=dt}bt()}setLayers(lt,dt,bt){this.getLayerIndex(lt).replace(dt),bt()}updateLayers(lt,dt,bt){this.getLayerIndex(lt).update(dt.layers,dt.removedIds),bt()}loadTile(lt,dt,bt){this.getWorkerSource(lt,dt.type,dt.source).loadTile(dt,bt)}loadDEMTile(lt,dt,bt){this.getDEMWorkerSource(lt,dt.source).loadTile(dt,bt)}reloadTile(lt,dt,bt){this.getWorkerSource(lt,dt.type,dt.source).reloadTile(dt,bt)}abortTile(lt,dt,bt){this.getWorkerSource(lt,dt.type,dt.source).abortTile(dt,bt)}removeTile(lt,dt,bt){this.getWorkerSource(lt,dt.type,dt.source).removeTile(dt,bt)}removeDEMTile(lt,dt){this.getDEMWorkerSource(lt,dt.source).removeTile(dt)}removeSource(lt,dt,bt){if(!this.workerSources[lt]||!this.workerSources[lt][dt.type]||!this.workerSources[lt][dt.type][dt.source])return;const Dt=this.workerSources[lt][dt.type][dt.source];delete this.workerSources[lt][dt.type][dt.source],Dt.removeSource!==void 0?Dt.removeSource(dt,bt):bt()}loadWorkerSource(lt,dt,bt){try{this.self.importScripts(dt.url),bt()}catch(Dt){bt(Dt.toString())}}syncRTLPluginState(lt,dt,bt){try{a.bD.setState(dt);const Dt=a.bD.getPluginURL();if(a.bD.isLoaded()&&!a.bD.isParsed()&&Dt!=null){this.self.importScripts(Dt);const zt=a.bD.isParsed();bt(zt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Dt}`),zt)}}catch(Dt){bt(Dt.toString())}}getAvailableImages(lt){let dt=this.availableImages[lt];return dt||(dt=[]),dt}getLayerIndex(lt){let dt=this.layerIndexes[lt];return dt||(dt=this.layerIndexes[lt]=new y),dt}getWorkerSource(lt,dt,bt){return this.workerSources[lt]||(this.workerSources[lt]={}),this.workerSources[lt][dt]||(this.workerSources[lt][dt]={}),this.workerSources[lt][dt][bt]||(this.workerSources[lt][dt][bt]=new this.workerSourceTypes[dt]({send:(Dt,zt,te)=>{this.actor.send(Dt,zt,te,lt)}},this.getLayerIndex(lt),this.getAvailableImages(lt))),this.workerSources[lt][dt][bt]}getDEMWorkerSource(lt,dt){return this.demWorkerSources[lt]||(this.demWorkerSources[lt]={}),this.demWorkerSources[lt][dt]||(this.demWorkerSources[lt][dt]=new F),this.demWorkerSources[lt][dt]}}return a.i()&&(self.worker=new xa(self)),xa})),u(["./shared"],(function(a){var y="3.6.2";class _{static testProp(l){if(!_.docStyle)return l[0];for(let m=0;m<l.length;m++)if(l[m]in _.docStyle)return l[m];return l[0]}static create(l,m,b){const M=window.document.createElement(l);return m!==void 0&&(M.className=m),b&&b.appendChild(M),M}static createNS(l,m){return window.document.createElementNS(l,m)}static disableDrag(){_.docStyle&&_.selectProp&&(_.userSelect=_.docStyle[_.selectProp],_.docStyle[_.selectProp]="none")}static enableDrag(){_.docStyle&&_.selectProp&&(_.docStyle[_.selectProp]=_.userSelect)}static setTransform(l,m){l.style[_.transformProp]=m}static addEventListener(l,m,b,M={}){l.addEventListener(m,b,"passive"in M?M:M.capture)}static removeEventListener(l,m,b,M={}){l.removeEventListener(m,b,"passive"in M?M:M.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",_.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",_.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",_.suppressClickInternal,!0)}),0)}static mousePos(l,m){const b=l.getBoundingClientRect();return new a.P(m.clientX-b.left-l.clientLeft,m.clientY-b.top-l.clientTop)}static touchPos(l,m){const b=l.getBoundingClientRect(),M=[];for(let C=0;C<m.length;C++)M.push(new a.P(m[C].clientX-b.left-l.clientLeft,m[C].clientY-b.top-l.clientTop));return M}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}_.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,_.selectProp=_.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),_.transformProp=_.testProp(["transform","WebkitTransform"]);const x={supported:!1,testSupport:function(E){!I&&O&&(F?q(E):A=E)}};let A,O,I=!1,F=!1;function q(E){const l=E.createTexture();E.bindTexture(E.TEXTURE_2D,l);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,O),E.isContextLost())return;x.supported=!0}catch{}E.deleteTexture(l),I=!0}var H,K;typeof document<"u"&&(O=document.createElement("img"),O.onload=function(){A&&q(A),A=null,F=!0},O.onerror=function(){I=!0,A=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(E){let l,m,b,M;E.resetRequestQueue=()=>{l=[],m=0,b=0,M={}},E.addThrottleControl=Y=>{const et=b++;return M[et]=Y,et},E.removeThrottleControl=Y=>{delete M[Y],j()},E.getImage=(Y,et,it=!0)=>{x.supported&&(Y.headers||(Y.headers={}),Y.headers.accept="image/webp,*/*");const pt={requestParameters:Y,supportImageRefresh:it,callback:et,cancelled:!1,completed:!1,cancel:()=>{pt.completed||pt.cancelled||(pt.cancelled=!0,pt.innerRequest&&(pt.innerRequest.cancel(),m--),j())}};return l.push(pt),j(),pt};const C=Y=>{const{requestParameters:et,supportImageRefresh:it,callback:pt}=Y;return a.e(et,{type:"image"}),(it!==!1||a.i()||a.g(et.url)||et.headers&&!Object.keys(et.headers).reduce(((At,Mt)=>At&&Mt==="accept"),!0)?a.m:$)(et,((At,Mt,Ot,Tt)=>{B(Y,pt,At,Mt,Ot,Tt)}))},B=(Y,et,it,pt,At,Mt)=>{it?et(it):pt instanceof HTMLImageElement||a.a(pt)?et(null,pt):pt&&((Ot,Tt)=>{typeof createImageBitmap=="function"?a.b(Ot,Tt):a.d(Ot,Tt)})(pt,((Ot,Tt)=>{Ot!=null?et(Ot):Tt!=null&&et(null,Tt,{cacheControl:At,expires:Mt})})),Y.cancelled||(Y.completed=!0,m--,j())},j=()=>{const Y=(()=>{const et=Object.keys(M);let it=!1;if(et.length>0){for(const pt of et)if(it=M[pt](),it)break}return it})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let et=m;et<Y&&l.length>0;et++){const it=l.shift();if(it.cancelled){et--;continue}const pt=C(it);m++,it.innerRequest=pt}},$=(Y,et)=>{const it=new Image,pt=Y.url;let At=!1;const Mt=Y.credentials;return Mt&&Mt==="include"?it.crossOrigin="use-credentials":(Mt&&Mt==="same-origin"||!a.s(pt))&&(it.crossOrigin="anonymous"),it.fetchPriority="high",it.onload=()=>{et(null,it),it.onerror=it.onload=null},it.onerror=()=>{At||et(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),it.onerror=it.onload=null},it.src=pt,{cancel:()=>{At=!0,it.src=""}}}})(H||(H={})),H.resetRequestQueue(),(function(E){E.Glyphs="Glyphs",E.Image="Image",E.Source="Source",E.SpriteImage="SpriteImage",E.SpriteJSON="SpriteJSON",E.Style="Style",E.Tile="Tile",E.Unknown="Unknown"})(K||(K={}));class W{constructor(l){this._transformRequestFn=l}transformRequest(l,m){return this._transformRequestFn&&this._transformRequestFn(l,m)||{url:l}}normalizeSpriteURL(l,m,b){const M=(function(C){const B=C.match(X);if(!B)throw new Error(`Unable to parse URL "${C}"`);return{protocol:B[1],authority:B[2],path:B[3]||"/",params:B[4]?B[4].split("&"):[]}})(l);return M.path+=`${m}${b}`,(function(C){const B=C.params.length?`?${C.params.join("&")}`:"";return`${C.protocol}://${C.authority}${C.path}${B}`})(M)}setTransformRequest(l){this._transformRequestFn=l}}const X=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function tt(E){var l=new a.A(3);return l[0]=E[0],l[1]=E[1],l[2]=E[2],l}var Q,at=function(E,l,m){return E[0]=l[0]-m[0],E[1]=l[1]-m[1],E[2]=l[2]-m[2],E};Q=new a.A(3),a.A!=Float32Array&&(Q[0]=0,Q[1]=0,Q[2]=0);var ht=function(E){var l=E[0],m=E[1];return l*l+m*m};function ot(E){const l=[];if(typeof E=="string")l.push({id:"default",url:E});else if(E&&E.length>0){const m=[];for(const{id:b,url:M}of E){const C=`${b}${M}`;m.indexOf(C)===-1&&(m.push(C),l.push({id:b,url:M}))}}return l}function ct(E,l,m,b,M){if(b)return void E(b);if(M!==Object.values(l).length||M!==Object.values(m).length)return;const C={};for(const B in l){C[B]={};const j=a.h.getImageCanvasContext(m[B]),$=l[B];for(const Y in $){const{width:et,height:it,x:pt,y:At,sdf:Mt,pixelRatio:Ot,stretchX:Tt,stretchY:Wt,content:oe}=$[Y];C[B][Y]={data:null,pixelRatio:Ot,sdf:Mt,stretchX:Tt,stretchY:Wt,content:oe,spriteData:{width:et,height:it,x:pt,y:At,context:j}}}}E(null,C)}(function(){var E=new a.A(2);a.A!=Float32Array&&(E[0]=0,E[1]=0)})();class xt{constructor(l,m,b,M){this.context=l,this.format=b,this.texture=l.gl.createTexture(),this.update(m,M)}update(l,m,b){const{width:M,height:C}=l,B=!(this.size&&this.size[0]===M&&this.size[1]===C||b),{context:j}=this,{gl:$}=j;if(this.useMipmap=!!(m&&m.useMipmap),$.bindTexture($.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===$.RGBA&&(!m||m.premultiply!==!1)),B)this.size=[M,C],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.a(l)?$.texImage2D($.TEXTURE_2D,0,this.format,this.format,$.UNSIGNED_BYTE,l):$.texImage2D($.TEXTURE_2D,0,this.format,M,C,0,this.format,$.UNSIGNED_BYTE,l.data);else{const{x:Y,y:et}=b||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.a(l)?$.texSubImage2D($.TEXTURE_2D,0,Y,et,$.RGBA,$.UNSIGNED_BYTE,l):$.texSubImage2D($.TEXTURE_2D,0,Y,et,M,C,$.RGBA,$.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&$.generateMipmap($.TEXTURE_2D)}bind(l,m,b){const{context:M}=this,{gl:C}=M;C.bindTexture(C.TEXTURE_2D,this.texture),b!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=C.LINEAR),l!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,l),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,b||l),this.filter=l),m!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,m),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,m),this.wrap=m)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function wt(E){const{userImage:l}=E;return!!(l&&l.render&&l.render())&&(E.data.replace(new Uint8Array(l.data.buffer)),!0)}class Ct extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:m,callback:b}of this.requestors)this._notify(m,b);this.requestors=[]}}getImage(l){const m=this.images[l];if(m&&!m.data&&m.spriteData){const b=m.spriteData;m.data=new a.R({width:b.width,height:b.height},b.context.getImageData(b.x,b.y,b.width,b.height).data),m.spriteData=null}return m}addImage(l,m){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,m)&&(this.images[l]=m)}_validate(l,m){let b=!0;const M=m.data||m.spriteData;return this._validateStretch(m.stretchX,M&&M.width)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "stretchX" value`))),b=!1),this._validateStretch(m.stretchY,M&&M.height)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "stretchY" value`))),b=!1),this._validateContent(m.content,m)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "content" value`))),b=!1),b}_validateStretch(l,m){if(!l)return!0;let b=0;for(const M of l){if(M[0]<b||M[1]<M[0]||m<M[1])return!1;b=M[1]}return!0}_validateContent(l,m){if(!l)return!0;if(l.length!==4)return!1;const b=m.spriteData,M=b&&b.width||m.data.width,C=b&&b.height||m.data.height;return!(l[0]<0||M<l[0]||l[1]<0||C<l[1]||l[2]<0||M<l[2]||l[3]<0||C<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,m,b=!0){const M=this.getImage(l);if(b&&(M.data.width!==m.data.width||M.data.height!==m.data.height))throw new Error(`size mismatch between old image (${M.data.width}x${M.data.height}) and new image (${m.data.width}x${m.data.height}).`);m.version=M.version+1,this.images[l]=m,this.updatedImages[l]=!0}removeImage(l){const m=this.images[l];delete this.images[l],delete this.patterns[l],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,m){let b=!0;if(!this.isLoaded())for(const M of l)this.images[M]||(b=!1);this.isLoaded()||b?this._notify(l,m):this.requestors.push({ids:l,callback:m})}_notify(l,m){const b={};for(const M of l){let C=this.getImage(M);C||(this.fire(new a.k("styleimagemissing",{id:M})),C=this.getImage(M)),C?b[M]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:a.w(`Image "${M}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,b)}getPixelSize(){const{width:l,height:m}=this.atlasImage;return{width:l,height:m}}getPattern(l){const m=this.patterns[l],b=this.getImage(l);if(!b)return null;if(m&&m.position.version===b.version)return m.position;if(m)m.position.version=b.version;else{const M={w:b.data.width+2,h:b.data.height+2,x:0,y:0},C=new a.I(M,b);this.patterns[l]={bin:M,position:C}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const m=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new xt(l,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const C in this.patterns)l.push(this.patterns[C].bin);const{w:m,h:b}=a.p(l),M=this.atlasImage;M.resize({width:m||1,height:b||1});for(const C in this.patterns){const{bin:B}=this.patterns[C],j=B.x+1,$=B.y+1,Y=this.getImage(C).data,et=Y.width,it=Y.height;a.R.copy(Y,M,{x:0,y:0},{x:j,y:$},{width:et,height:it}),a.R.copy(Y,M,{x:0,y:it-1},{x:j,y:$-1},{width:et,height:1}),a.R.copy(Y,M,{x:0,y:0},{x:j,y:$+it},{width:et,height:1}),a.R.copy(Y,M,{x:et-1,y:0},{x:j-1,y:$},{width:1,height:it}),a.R.copy(Y,M,{x:0,y:0},{x:j+et,y:$},{width:1,height:it})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const m of l){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const b=this.getImage(m);b||a.w(`Image with ID: "${m}" was not found`),wt(b)&&this.updateImage(m,b)}}}const re=1e20;function ve(E,l,m,b,M,C,B,j,$){for(let Y=l;Y<l+b;Y++)Ee(E,m*C+Y,C,M,B,j,$);for(let Y=m;Y<m+M;Y++)Ee(E,Y*C+l,1,b,B,j,$)}function Ee(E,l,m,b,M,C,B){C[0]=0,B[0]=-re,B[1]=re,M[0]=E[l];for(let j=1,$=0,Y=0;j<b;j++){M[j]=E[l+j*m];const et=j*j;do{const it=C[$];Y=(M[j]-M[it]+et-it*it)/(j-it)/2}while(Y<=B[$]&&--$>-1);$++,C[$]=j,B[$]=Y,B[$+1]=re}for(let j=0,$=0;j<b;j++){for(;B[$+1]<j;)$++;const Y=C[$],et=j-Y;E[l+j*m]=M[Y]+et*et}}class Nt{constructor(l,m){this.requestManager=l,this.localIdeographFontFamily=m,this.entries={}}setURL(l){this.url=l}getGlyphs(l,m){const b=[];for(const M in l)for(const C of l[M])b.push({stack:M,id:C});a.o(b,(({stack:M,id:C},B)=>{let j=this.entries[M];j||(j=this.entries[M]={glyphs:{},requests:{},ranges:{}});let $=j.glyphs[C];if($!==void 0)return void B(null,{stack:M,id:C,glyph:$});if($=this._tinySDF(j,M,C),$)return j.glyphs[C]=$,void B(null,{stack:M,id:C,glyph:$});const Y=Math.floor(C/256);if(256*Y>65535)return void B(new Error("glyphs > 65535 not supported"));if(j.ranges[Y])return void B(null,{stack:M,id:C,glyph:$});if(!this.url)return void B(new Error("glyphsUrl is not set"));let et=j.requests[Y];et||(et=j.requests[Y]=[],Nt.loadGlyphRange(M,Y,this.url,this.requestManager,((it,pt)=>{if(pt){for(const At in pt)this._doesCharSupportLocalGlyph(+At)||(j.glyphs[+At]=pt[+At]);j.ranges[Y]=!0}for(const At of et)At(it,pt);delete j.requests[Y]}))),et.push(((it,pt)=>{it?B(it):pt&&B(null,{stack:M,id:C,glyph:pt[C]||null})}))}),((M,C)=>{if(M)m(M);else if(C){const B={};for(const{stack:j,id:$,glyph:Y}of C)(B[j]||(B[j]={}))[$]=Y&&{id:Y.id,bitmap:Y.bitmap.clone(),metrics:Y.metrics};m(null,B)}}))}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(a.u["CJK Unified Ideographs"](l)||a.u["Hangul Syllables"](l)||a.u.Hiragana(l)||a.u.Katakana(l))}_tinySDF(l,m,b){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(b))return;let C=l.tinySDF;if(!C){let j="400";/bold/i.test(m)?j="900":/medium/i.test(m)?j="500":/light/i.test(m)&&(j="200"),C=l.tinySDF=new Nt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:j})}const B=C.draw(String.fromCharCode(b));return{id:b,bitmap:new a.q({width:B.width||60,height:B.height||60},B.data),metrics:{width:B.glyphWidth/2||24,height:B.glyphHeight/2||24,left:B.glyphLeft/2+.5||0,top:B.glyphTop/2-27.5||-8,advance:B.glyphAdvance/2||24,isDoubleResolution:!0}}}}Nt.loadGlyphRange=function(E,l,m,b,M){const C=256*l,B=C+255,j=b.transformRequest(m.replace("{fontstack}",E).replace("{range}",`${C}-${B}`),K.Glyphs);a.l(j,(($,Y)=>{if($)M($);else if(Y){const et={};for(const it of a.n(Y))et[it.id]=it;M(null,et)}}))},Nt.TinySDF=class{constructor({fontSize:E=24,buffer:l=3,radius:m=8,cutoff:b=.25,fontFamily:M="sans-serif",fontWeight:C="normal",fontStyle:B="normal"}={}){this.buffer=l,this.cutoff=b,this.radius=m;const j=this.size=E+4*l,$=this._createCanvas(j),Y=this.ctx=$.getContext("2d",{willReadFrequently:!0});Y.font=`${B} ${C} ${E}px ${M}`,Y.textBaseline="alphabetic",Y.textAlign="left",Y.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(E){const l=document.createElement("canvas");return l.width=l.height=E,l}draw(E){const{width:l,actualBoundingBoxAscent:m,actualBoundingBoxDescent:b,actualBoundingBoxLeft:M,actualBoundingBoxRight:C}=this.ctx.measureText(E),B=Math.ceil(m),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(C-M))),$=Math.min(this.size-this.buffer,B+Math.ceil(b)),Y=j+2*this.buffer,et=$+2*this.buffer,it=Math.max(Y*et,0),pt=new Uint8ClampedArray(it),At={data:pt,width:Y,height:et,glyphWidth:j,glyphHeight:$,glyphTop:B,glyphLeft:0,glyphAdvance:l};if(j===0||$===0)return At;const{ctx:Mt,buffer:Ot,gridInner:Tt,gridOuter:Wt}=this;Mt.clearRect(Ot,Ot,j,$),Mt.fillText(E,Ot,Ot+B);const oe=Mt.getImageData(Ot,Ot,j,$);Wt.fill(re,0,it),Tt.fill(0,0,it);for(let Rt=0;Rt<$;Rt++)for(let Kt=0;Kt<j;Kt++){const ue=oe.data[4*(Rt*j+Kt)+3]/255;if(ue===0)continue;const de=(Rt+Ot)*Y+Kt+Ot;if(ue===1)Wt[de]=0,Tt[de]=re;else{const be=.5-ue;Wt[de]=be>0?be*be:0,Tt[de]=be<0?be*be:0}}ve(Wt,0,0,Y,et,Y,this.f,this.v,this.z),ve(Tt,Ot,Ot,j,$,Y,this.f,this.v,this.z);for(let Rt=0;Rt<it;Rt++){const Kt=Math.sqrt(Wt[Rt])-Math.sqrt(Tt[Rt]);pt[Rt]=Math.round(255-255*(Kt/this.radius+this.cutoff))}return At}};class Pt{constructor(){this.specification=a.v.light.position}possiblyEvaluate(l,m){return a.z(l.expression.evaluate(m))}interpolate(l,m,b){return{x:a.B.number(l.x,m.x,b),y:a.B.number(l.y,m.y,b),z:a.B.number(l.z,m.z,b)}}}let Bt;class Ft extends a.E{constructor(l){super(),Bt=Bt||new a.r({anchor:new a.D(a.v.light.anchor),position:new Pt,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(Bt),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,m={}){if(!this._validate(a.t,l,m))for(const b in l){const M=l[b];b.endsWith("-transition")?this._transitionable.setTransition(b.slice(0,-11),M):this._transitionable.setValue(b,M)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,m,b){return(!b||b.validate!==!1)&&a.x(this,l.call(a.y,a.e({value:m,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}}class $t{constructor(l,m){this.width=l,this.height=m,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,m){const b=l.join(",")+String(m);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(l,m)),this.dashEntry[b]}getDashRanges(l,m,b){const M=[];let C=l.length%2==1?-l[l.length-1]*b:0,B=l[0]*b,j=!0;M.push({left:C,right:B,isDash:j,zeroLength:l[0]===0});let $=l[0];for(let Y=1;Y<l.length;Y++){j=!j;const et=l[Y];C=$*b,$+=et,B=$*b,M.push({left:C,right:B,isDash:j,zeroLength:et===0})}return M}addRoundDash(l,m,b){const M=m/2;for(let C=-b;C<=b;C++){const B=this.width*(this.nextRow+b+C);let j=0,$=l[j];for(let Y=0;Y<this.width;Y++){Y/$.right>1&&($=l[++j]);const et=Math.abs(Y-$.left),it=Math.abs(Y-$.right),pt=Math.min(et,it);let At;const Mt=C/b*(M+1);if($.isDash){const Ot=M-Math.abs(Mt);At=Math.sqrt(pt*pt+Ot*Ot)}else At=M-Math.sqrt(pt*pt+Mt*Mt);this.data[B+Y]=Math.max(0,Math.min(255,At+128))}}}addRegularDash(l){for(let j=l.length-1;j>=0;--j){const $=l[j],Y=l[j+1];$.zeroLength?l.splice(j,1):Y&&Y.isDash===$.isDash&&(Y.left=$.left,l.splice(j,1))}const m=l[0],b=l[l.length-1];m.isDash===b.isDash&&(m.left=b.left-this.width,b.right=m.right+this.width);const M=this.width*this.nextRow;let C=0,B=l[C];for(let j=0;j<this.width;j++){j/B.right>1&&(B=l[++C]);const $=Math.abs(j-B.left),Y=Math.abs(j-B.right),et=Math.min($,Y);this.data[M+j]=Math.max(0,Math.min(255,(B.isDash?et:-et)+128))}}addDash(l,m){const b=m?7:0,M=2*b+1;if(this.nextRow+M>this.height)return a.w("LineAtlas out of space"),null;let C=0;for(let j=0;j<l.length;j++)C+=l[j];if(C!==0){const j=this.width/C,$=this.getDashRanges(l,this.width,j);m?this.addRoundDash($,j,b):this.addRegularDash($)}const B={y:(this.nextRow+b+.5)/this.height,height:2*b/this.height,width:C};return this.nextRow+=M,this.dirty=!0,B}bind(l){const m=l.gl;this.texture?(m.bindTexture(m.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,m.texSubImage2D(m.TEXTURE_2D,0,0,0,this.width,this.height,m.ALPHA,m.UNSIGNED_BYTE,this.data))):(this.texture=m.createTexture(),m.bindTexture(m.TEXTURE_2D,this.texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texImage2D(m.TEXTURE_2D,0,m.ALPHA,this.width,this.height,0,m.ALPHA,m.UNSIGNED_BYTE,this.data))}}class ft{constructor(l,m,b){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=b;const M=this.workerPool.acquire(b);for(let C=0;C<M.length;C++){const B=new a.C(M[C],m,b);B.name=`Worker ${C}`,this.actors.push(B)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,m,b){a.o(this.actors,((M,C)=>{M.send(l,m,C)}),b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach((m=>{m.remove()})),this.actors=[],l&&this.workerPool.release(this.id)}}function St(E,l,m){const b=function(M,C){if(M)return m(M);if(C){const B=a.F(a.e(C,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);C.vector_layers&&(B.vectorLayers=C.vector_layers,B.vectorLayerIds=B.vectorLayers.map((j=>j.id))),m(null,B)}};return E.url?a.f(l.transformRequest(E.url,K.Source),b):a.h.frame((()=>b(null,E)))}class jt{constructor(l,m){l&&(m?this.setSouthWest(l).setNorthEast(m):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.L?new a.L(l.lng,l.lat):a.L.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.L?new a.L(l.lng,l.lat):a.L.convert(l),this}extend(l){const m=this._sw,b=this._ne;let M,C;if(l instanceof a.L)M=l,C=l;else{if(!(l instanceof jt))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(jt.convert(l)):this.extend(a.L.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.L.convert(l)):this;if(M=l._sw,C=l._ne,!M||!C)return this}return m||b?(m.lng=Math.min(M.lng,m.lng),m.lat=Math.min(M.lat,m.lat),b.lng=Math.max(C.lng,b.lng),b.lat=Math.max(C.lat,b.lat)):(this._sw=new a.L(M.lng,M.lat),this._ne=new a.L(C.lng,C.lat)),this}getCenter(){return new a.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.L(this.getWest(),this.getNorth())}getSouthEast(){return new a.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:m,lat:b}=a.L.convert(l);let M=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=m&&m>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&M}static convert(l){return l instanceof jt?l:l&&new jt(l)}static fromLngLat(l,m=0){const b=360*m/40075017,M=b/Math.cos(Math.PI/180*l.lat);return new jt(new a.L(l.lng-M,l.lat-b),new a.L(l.lng+M,l.lat+b))}}class Yt{constructor(l,m,b){this.bounds=jt.convert(this.validateBounds(l)),this.minzoom=m||0,this.maxzoom=b||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const m=Math.pow(2,l.z),b=Math.floor(a.G(this.bounds.getWest())*m),M=Math.floor(a.H(this.bounds.getNorth())*m),C=Math.ceil(a.G(this.bounds.getEast())*m),B=Math.ceil(a.H(this.bounds.getSouth())*m);return l.x>=b&&l.x<C&&l.y>=M&&l.y<B}}class le extends a.E{constructor(l,m,b,M){if(super(),this.load=()=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=St(this._options,this.map._requestManager,((C,B)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),C?this.fire(new a.j(C)):B&&(a.e(this,B),B.bounds&&(this.tileBounds=new Yt(B.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}))},this.serialize=()=>a.e({},this._options),this.id=l,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.F(m,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l(),this.load()}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(l,m){const b=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),M={request:this.map._requestManager.transformRequest(b,K.Tile),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function C(B,j){return delete l.request,l.aborted?m(null):B&&B.status!==404?m(B):(j&&j.resourceTiming&&(l.resourceTiming=j.resourceTiming),this.map._refreshExpiredTiles&&j&&l.setExpiryData(j),l.loadVectorData(j,this.map.painter),m(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}M.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired"?l.state==="loading"?l.reloadCallback=m:l.request=l.actor.send("reloadTile",M,C.bind(this)):(l.actor=this.dispatcher.getActor(),l.request=l.actor.send("loadTile",M,C.bind(this)))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id},void 0)}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ce extends a.E{constructor(l,m,b,M){super(),this.id=l,this.dispatcher=b,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},m),a.e(this,a.F(m,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=St(this._options,this.map._requestManager,((l,m)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new a.j(l)):m&&(a.e(this,m),m.bounds&&(this.tileBounds=new Yt(m.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l(),this.load()}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,m){const b=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.request=H.getImage(this.map._requestManager.transformRequest(b,K.Tile),((M,C,B)=>{if(delete l.request,l.aborted)l.state="unloaded",m(null);else if(M)l.state="errored",m(M);else if(C){this.map._refreshExpiredTiles&&B&&l.setExpiryData(B);const j=this.map.painter.context,$=j.gl;l.texture=this.map.painter.getTileTexture(C.width),l.texture?l.texture.update(C,{useMipmap:!0}):(l.texture=new xt(j,C,$.RGBA,{useMipmap:!0}),l.texture.bind($.LINEAR,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),j.extTextureFilterAnisotropic&&$.texParameterf($.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax)),l.state="loaded",m(null)}}),this.map._refreshExpiredTiles)}abortTile(l,m){l.request&&(l.request.cancel(),delete l.request),m()}unloadTile(l,m){l.texture&&this.map.painter.saveTileTexture(l.texture),m()}hasTransition(){return!1}}class Oe extends ce{constructor(l,m,b,M){super(l,m,b,M),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox",this.redFactor=m.redFactor,this.greenFactor=m.greenFactor,this.blueFactor=m.blueFactor,this.baseShift=m.baseShift}loadTile(l,m){const b=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),M=this.map._requestManager.transformRequest(b,K.Tile);function C(B,j){B&&(l.state="errored",m(B)),j&&(l.dem=j,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded",m(null))}l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.request=H.getImage(M,((B,j,$)=>a._(this,void 0,void 0,(function*(){if(delete l.request,l.aborted)l.state="unloaded",m(null);else if(B)l.state="errored",m(B);else if(j){this.map._refreshExpiredTiles&&l.setExpiryData($);const Y=a.a(j)&&a.J()?j:yield(function(it){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.K()){const pt=it.width+2,At=it.height+2;try{return new a.R({width:pt,height:At},yield a.M(it,-1,-1,pt,At))}catch{}}return a.h.getImageData(it,1)}))})(j),et={uid:l.uid,coord:l.tileID,source:this.id,rawImageData:Y,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};l.actor&&l.state!=="expired"||(l.actor=this.dispatcher.getActor(),l.actor.send("loadDEMTile",et,C))}}))),this.map._refreshExpiredTiles)}_getNeighboringTiles(l){const m=l.canonical,b=Math.pow(2,m.z),M=(m.x-1+b)%b,C=m.x===0?l.wrap-1:l.wrap,B=(m.x+1+b)%b,j=m.x+1===b?l.wrap+1:l.wrap,$={};return $[new a.O(l.overscaledZ,C,m.z,M,m.y).key]={backfilled:!1},$[new a.O(l.overscaledZ,j,m.z,B,m.y).key]={backfilled:!1},m.y>0&&($[new a.O(l.overscaledZ,C,m.z,M,m.y-1).key]={backfilled:!1},$[new a.O(l.overscaledZ,l.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},$[new a.O(l.overscaledZ,j,m.z,B,m.y-1).key]={backfilled:!1}),m.y+1<b&&($[new a.O(l.overscaledZ,C,m.z,M,m.y+1).key]={backfilled:!1},$[new a.O(l.overscaledZ,l.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},$[new a.O(l.overscaledZ,j,m.z,B,m.y+1).key]={backfilled:!1}),$}unloadTile(l){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&l.actor.send("removeDEMTile",{uid:l.uid,source:this.id})}}class Ie extends a.E{constructor(l,m,b,M){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>a.e({},this._options,{type:this.type,data:this._data}),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=b.getActor(),this.setEventedParent(M),this._data=m.data,this._options=a.e({},m),this._collectResourceTiming=m.collectResourceTiming,m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId;const C=a.N/this.tileSize;this.workerOptions=a.e({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:(m.buffer!==void 0?m.buffer:128)*C,tolerance:(m.tolerance!==void 0?m.tolerance:.375)*C,extent:a.N,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:m.clusterMaxZoom!==void 0?m.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,m.clusterMinPoints||2),extent:a.N,radius:(m.clusterRadius||50)*C,log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=l.clusterRadius),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l,m){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:l,source:this.id},m),this}getClusterChildren(l,m){return this.actor.send("geojson.getClusterChildren",{clusterId:l,source:this.id},m),this}getClusterLeaves(l,m,b,M){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:l,limit:m,offset:b},M),this}_updateWorkerData(l){const m=a.e({},this.workerOptions);l?m.dataDiff=l:typeof this._data=="string"?(m.request=this.map._requestManager.transformRequest(a.h.resolveURL(this._data),K.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,m,((b,M)=>{if(this._pendingLoads--,this._removed||M&&M.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let C=null;if(M&&M.resourceTiming&&M.resourceTiming[this.id]&&(C=M.resourceTiming[this.id].slice(0)),b)return void this.fire(new a.j(b));const B={dataType:"source"};this._collectResourceTiming&&C&&C.length>0&&a.e(B,{resourceTiming:C}),this.fire(new a.k("data",Object.assign(Object.assign({},B),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},B),{sourceDataType:"content"})))}))}loaded(){return this._pendingLoads===0}loadTile(l,m){const b=l.actor?"reloadTile":"loadTile";l.actor=this.actor;const M={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.request=this.actor.send(b,M,((C,B)=>(delete l.request,l.unloadVectorData(),l.aborted?m(null):C?m(C):(l.loadVectorData(B,this.map.painter,b==="reloadTile"),m(null)))))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.aborted=!0}unloadTile(l){l.unloadVectorData(),this.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Gt=a.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Le extends a.E{constructor(l,m,b,M){super(),this.load=(C,B)=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=H.getImage(this.map._requestManager.transformRequest(this.url,K.Image),((j,$)=>{this._request=null,this._loaded=!0,j?this.fire(new a.j(j)):$&&(this.image=$,C&&(this.coordinates=C),B&&B(),this._finishLoading())}))},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const C=this.map.painter.context,B=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Gt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new xt(C,this.image,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE));let j=!1;for(const $ in this.tiles){const Y=this.tiles[$];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture,j=!0)}j&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=l,this.dispatcher=b,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=m}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=l.url,this.load(l.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(l){this.coordinates=l;const m=l.map(a.U.fromLngLat);this.tileID=(function(M){let C=1/0,B=1/0,j=-1/0,$=-1/0;for(const pt of M)C=Math.min(C,pt.x),B=Math.min(B,pt.y),j=Math.max(j,pt.x),$=Math.max($,pt.y);const Y=Math.max(j-C,$-B),et=Math.max(0,Math.floor(-Math.log(Y)/Math.LN2)),it=Math.pow(2,et);return new a.W(et,Math.floor((C+j)/2*it),Math.floor((B+$)/2*it))})(m),this.minzoom=this.maxzoom=this.tileID.z;const b=m.map((M=>this.tileID.getTilePoint(M)._round()));return this._boundsArray=new a.V,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,a.N,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,a.N),this._boundsArray.emplaceBack(b[2].x,b[2].y,a.N,a.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(l,m){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},m(null)):(l.state="errored",m(null))}hasTransition(){return!1}}class Pe extends Le{constructor(l,m,b,M){super(l,m,b,M),this.load=()=>{this._loaded=!1;const C=this.options;this.urls=[];for(const B of C.urls)this.urls.push(this.map._requestManager.transformRequest(B,K.Source).url);a.X(this.urls,((B,j)=>{this._loaded=!0,B?this.fire(new a.j(B)):j&&(this.video=j,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const C=this.map.painter.context,B=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Gt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE),B.texSubImage2D(B.TEXTURE_2D,0,0,0,B.RGBA,B.UNSIGNED_BYTE,this.video)):(this.texture=new xt(C,this.video,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE));let j=!1;for(const $ in this.tiles){const Y=this.tiles[$];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture,j=!0)}j&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=m}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const m=this.video.seekable;l<m.start(0)||l>m.end(0)?this.fire(new a.j(new a.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${m.start(0)} and ${m.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class ge extends Le{constructor(l,m,b,M){super(l,m,b,M),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let C=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,C=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,C=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const B=this.map.painter.context,j=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Gt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?(C||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new xt(B,this.canvas,j.RGBA,{premultiply:!0});let $=!1;for(const Y in this.tiles){const et=this.tiles[Y];et.state!=="loaded"&&(et.state="loaded",et.texture=this.texture,$=!0)}$&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some((C=>!Array.isArray(C)||C.length!==2||C.some((B=>typeof B!="number"))))||this.fire(new a.j(new a.Y(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.Y(`sources.${l}`,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new a.j(new a.Y(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.Y(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.Y(`sources.${l}`,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const nn={},qe=E=>{switch(E){case"geojson":return Ie;case"image":return Le;case"raster":return ce;case"raster-dem":return Oe;case"vector":return le;case"video":return Pe;case"canvas":return ge}return nn[E]};function an(E,l){const m=a.Z();return a.$(m,m,[1,1,0]),a.a0(m,m,[.5*E.width,.5*E.height,1]),a.a1(m,m,E.calculatePosMatrix(l.toUnwrapped()))}function Ke(E,l,m,b,M,C){const B=(function(it,pt,At){if(it)for(const Mt of it){const Ot=pt[Mt];if(Ot&&Ot.source===At&&Ot.type==="fill-extrusion")return!0}else for(const Mt in pt){const Ot=pt[Mt];if(Ot.source===At&&Ot.type==="fill-extrusion")return!0}return!1})(M&&M.layers,l,E.id),j=C.maxPitchScaleFactor(),$=E.tilesIn(b,j,B);$.sort(On);const Y=[];for(const it of $)Y.push({wrappedTileID:it.tileID.wrapped().key,queryResults:it.tile.queryRenderedFeatures(l,m,E._state,it.queryGeometry,it.cameraQueryGeometry,it.scale,M,C,j,an(E.transform,it.tileID))});const et=(function(it){const pt={},At={};for(const Mt of it){const Ot=Mt.queryResults,Tt=Mt.wrappedTileID,Wt=At[Tt]=At[Tt]||{};for(const oe in Ot){const Rt=Ot[oe],Kt=Wt[oe]=Wt[oe]||{},ue=pt[oe]=pt[oe]||[];for(const de of Rt)Kt[de.featureIndex]||(Kt[de.featureIndex]=!0,ue.push(de))}}return pt})(Y);for(const it in et)et[it].forEach((pt=>{const At=pt.feature,Mt=E.getFeatureState(At.layer["source-layer"],At.id);At.source=At.layer.source,At.layer["source-layer"]&&(At.sourceLayer=At.layer["source-layer"]),At.state=Mt}));return et}function On(E,l){const m=E.tileID,b=l.tileID;return m.overscaledZ-b.overscaledZ||m.canonical.y-b.canonical.y||m.wrap-b.wrap||m.canonical.x-b.canonical.x}class rn{constructor(l,m){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=a.a2(),this.uses=0,this.tileSize=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const m=l+this.timeAdded;m<this.fadeEndTime||(this.fadeEndTime=m)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,m,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=(function(M,C){const B={};if(!C)return B;for(const j of M){const $=j.layerIds.map((Y=>C.getLayer(Y))).filter(Boolean);if($.length!==0){j.layers=$,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map((Y=>$.filter((et=>et.id===Y))[0])));for(const Y of $)B[Y.id]=j}}return B})(l.buckets,m.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const C=this.buckets[M];if(C instanceof a.a4){if(this.hasSymbolBuckets=!0,!b)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const C=this.buckets[M];if(C instanceof a.a4&&C.hasRTLText){this.hasRTLText=!0,a.a5();break}}this.queryPadding=0;for(const M in this.buckets){const C=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,m.style.getLayer(M).queryRadius(C))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new a.a3}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const b in this.buckets){const M=this.buckets[b];M.uploadPending()&&M.upload(l)}const m=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new xt(l,this.imageAtlas.image,m.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new xt(l,this.glyphAtlasImage,m.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,m,b,M,C,B,j,$,Y,et){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:C,scale:B,tileSize:this.tileSize,pixelPosMatrix:et,transform:$,params:j,queryPadding:this.queryPadding*Y},l,m,b):{}}querySourceFeatures(l,m){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const M=b.loadVTLayers(),C=m&&m.sourceLayer?m.sourceLayer:"",B=M._geojsonTileLayer||M[C];if(!B)return;const j=a.a6(m&&m.filter),{z:$,x:Y,y:et}=this.tileID.canonical,it={z:$,x:Y,y:et};for(let pt=0;pt<B.length;pt++){const At=B.feature(pt);if(j.needGeometry){const Tt=a.a7(At,!0);if(!j.filter(new a.a8(this.tileID.overscaledZ),Tt,this.tileID.canonical))continue}else if(!j.filter(new a.a8(this.tileID.overscaledZ),At))continue;const Mt=b.getId(At,C),Ot=new a.a9(At,$,Y,et,Mt);Ot.tile=it,l.push(Ot)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const m=this.expirationTime;if(l.cacheControl){const b=a.aa(l.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const b=Date.now();let M=!1;if(this.expirationTime>b)M=!1;else if(m)if(this.expirationTime<m)M=!0;else{const C=this.expirationTime-m;C?this.expirationTime=b+Math.max(C,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,m){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!m.style.hasLayer(M))continue;const C=this.buckets[M],B=C.layers[0].sourceLayer||"_geojsonTileLayer",j=b[B],$=l[B];if(!j||!$||Object.keys($).length===0)continue;C.update($,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Y=m&&m.style&&m.style.getLayer(M);Y&&(this.queryPadding=Math.max(this.queryPadding,Y.queryRadius(C)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=a.h.now()+l}setDependencies(l,m){const b={};for(const M of m)b[M]=!0;this.dependencies[l]=b}hasDependency(l,m){for(const b of l){const M=this.dependencies[b];if(M){for(const C of m)if(M[C])return!0}}return!1}}class In{constructor(l,m){this.max=l,this.onRemove=m,this.reset()}reset(){for(const l in this.data)for(const m of this.data[l])m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value);return this.data={},this.order=[],this}add(l,m,b){const M=l.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const C={value:m,timeout:void 0};if(b!==void 0&&(C.timeout=setTimeout((()=>{this.remove(l,C)}),b)),this.data[M].push(C),this.order.push(M),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const m=this.data[l].shift();return m.timeout&&clearTimeout(m.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),m.value}getByKey(l){const m=this.data[l];return m?m[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,m){if(!this.has(l))return this;const b=l.wrapped().key,M=m===void 0?0:this.data[b].indexOf(m),C=this.data[b][M];return this.data[b].splice(M,1),C.timeout&&clearTimeout(C.timeout),this.data[b].length===0&&delete this.data[b],this.onRemove(C.value),this.order.splice(this.order.indexOf(b),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}filter(l){const m=[];for(const b in this.data)for(const M of this.data[b])l(M.value)||m.push(M);for(const b of m)this.remove(b.value.tileID,b)}}class me{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,m,b){const M=String(m);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][M]=this.stateChanges[l][M]||{},a.e(this.stateChanges[l][M],b),this.deletedStates[l]===null){this.deletedStates[l]={};for(const C in this.state[l])C!==M&&(this.deletedStates[l][C]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][M]===null){this.deletedStates[l][M]={};for(const C in this.state[l][M])b[C]||(this.deletedStates[l][M][C]=null)}else for(const C in b)this.deletedStates[l]&&this.deletedStates[l][M]&&this.deletedStates[l][M][C]===null&&delete this.deletedStates[l][M][C]}removeFeatureState(l,m,b){if(this.deletedStates[l]===null)return;const M=String(m);if(this.deletedStates[l]=this.deletedStates[l]||{},b&&m!==void 0)this.deletedStates[l][M]!==null&&(this.deletedStates[l][M]=this.deletedStates[l][M]||{},this.deletedStates[l][M][b]=null);else if(m!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][M])for(b in this.deletedStates[l][M]={},this.stateChanges[l][M])this.deletedStates[l][M][b]=null;else this.deletedStates[l][M]=null;else this.deletedStates[l]=null}getState(l,m){const b=String(m),M=a.e({},(this.state[l]||{})[b],(this.stateChanges[l]||{})[b]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const C=this.deletedStates[l][m];if(C===null)return{};for(const B in C)delete M[B]}return M}initializeTileState(l,m){l.setFeatureState(this.state,m)}coalesceChanges(l,m){const b={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const C={};for(const B in this.stateChanges[M])this.state[M][B]||(this.state[M][B]={}),a.e(this.state[M][B],this.stateChanges[M][B]),C[B]=this.state[M][B];b[M]=C}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const C={};if(this.deletedStates[M]===null)for(const B in this.state[M])C[B]={},this.state[M][B]={};else for(const B in this.deletedStates[M]){if(this.deletedStates[M][B]===null)this.state[M][B]={};else for(const j of Object.keys(this.deletedStates[M][B]))delete this.state[M][B][j];C[B]=this.state[M][B]}b[M]=b[M]||{},a.e(b[M],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(const M in l)l[M].setFeatureState(b,m)}}class ki extends a.E{constructor(l,m,b){super(),this.id=l,this.dispatcher=b,this.on("data",(M=>{M.dataType==="source"&&M.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&M.dataType==="source"&&M.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((M,C,B,j)=>{const $=new(qe(C.type))(M,C,B,j);if($.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${$.id}`);return $})(l,m,b,this),this._tiles={},this._cache=new In(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new me,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const m=this._tiles[l];if(m.state!=="loaded"&&m.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,m){return this._source.loadTile(l,m)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,(()=>{}))}_abortTile(l){this._source.abortTile&&this._source.abortTile(l,(()=>{})),this._source.fire(new a.k("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const m in this._tiles){const b=this._tiles[m];b.upload(l),b.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((l=>l.tileID)).sort(Li).map((l=>l.key))}getRenderableIds(l){const m=[];for(const b in this._tiles)this._isIdRenderable(b,l)&&m.push(this._tiles[b]);return l?m.sort(((b,M)=>{const C=b.tileID,B=M.tileID,j=new a.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),$=new a.P(B.canonical.x,B.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-B.overscaledZ||$.y-j.y||$.x-j.x})).map((b=>b.tileID.key)):m.map((b=>b.tileID)).sort(Li).map((b=>b.key))}hasRenderableParent(l){const m=this.findLoadedParent(l,0);return!!m&&this._isIdRenderable(m.tileID.key)}_isIdRenderable(l,m){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(m||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,m){const b=this._tiles[l];b&&(b.state!=="loading"&&(b.state=m),this._loadTile(b,this._tileLoaded.bind(this,b,l,m)))}_tileLoaded(l,m,b,M){if(M)return l.state="errored",void(M.status!==404?this._source.fire(new a.j(M,{tile:l})):this.update(this.transform,this.terrain));l.timeAdded=a.h.now(),b==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(m,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const m=this.getRenderableIds();for(let M=0;M<m.length;M++){const C=m[M];if(l.neighboringTiles&&l.neighboringTiles[C]){const B=this.getTileByID(C);b(l,B),b(B,l)}}function b(M,C){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let B=C.tileID.canonical.x-M.tileID.canonical.x;const j=C.tileID.canonical.y-M.tileID.canonical.y,$=Math.pow(2,M.tileID.canonical.z),Y=C.tileID.key;B===0&&j===0||Math.abs(j)>1||(Math.abs(B)>1&&(Math.abs(B+$)===1?B+=$:Math.abs(B-$)===1&&(B-=$)),C.dem&&M.dem&&(M.dem.backfillBorder(C.dem,B,j),M.neighboringTiles&&M.neighboringTiles[Y]&&(M.neighboringTiles[Y].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,m,b,M){for(const C in this._tiles){let B=this._tiles[C];if(M[C]||!B.hasData()||B.tileID.overscaledZ<=m||B.tileID.overscaledZ>b)continue;let j=B.tileID;for(;B&&B.tileID.overscaledZ>m+1;){const Y=B.tileID.scaledTo(B.tileID.overscaledZ-1);B=this._tiles[Y.key],B&&B.hasData()&&(j=Y)}let $=j;for(;$.overscaledZ>m;)if($=$.scaledTo($.overscaledZ-1),l[$.key]){M[j.key]=j;break}}}findLoadedParent(l,m){if(l.key in this._loadedParentTiles){const b=this._loadedParentTiles[l.key];return b&&b.tileID.overscaledZ>=m?b:null}for(let b=l.overscaledZ-1;b>=m;b--){const M=l.scaledTo(b),C=this._getLoadedTile(M);if(C)return C}}_getLoadedTile(l){const m=this._tiles[l.key];return m&&m.hasData()?m:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const m=Math.ceil(l.width/this._source.tileSize)+1,b=Math.ceil(l.height/this._source.tileSize)+1,M=Math.floor(m*b*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(C)}handleWrapJump(l){const m=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,m){const b={};for(const M in this._tiles){const C=this._tiles[M];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+m),b[C.tileID.key]=C}this._tiles=b;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}update(l,m){if(this.transform=l,this.terrain=m,!this._sourceLoaded||this._paused)return;let b;this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?b=l.getVisibleUnwrappedCoordinates(this._source.tileID).map((et=>new a.O(et.canonical.z,et.wrap,et.canonical.z,et.canonical.x,et.canonical.y))):(b=l.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:m}),this._source.hasTile&&(b=b.filter((et=>this._source.hasTile(et))))):b=[];const M=l.coveringZoomLevel(this._source),C=Math.max(M-ki.maxOverzooming,this._source.minzoom),B=Math.max(M+ki.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const et={};for(const it of b)if(it.canonical.z>this._source.minzoom){const pt=it.scaledTo(it.canonical.z-1);et[pt.key]=pt;const At=it.scaledTo(Math.max(this._source.minzoom,Math.min(it.canonical.z,5)));et[At.key]=At}b=b.concat(Object.values(et))}const j=b.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,j&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const $=this._updateRetainedTiles(b,M);if(Yn(this._source.type)){const et={},it={},pt=Object.keys($),At=a.h.now();for(const Mt of pt){const Ot=$[Mt],Tt=this._tiles[Mt];if(!Tt||Tt.fadeEndTime!==0&&Tt.fadeEndTime<=At)continue;const Wt=this.findLoadedParent(Ot,C);Wt&&(this._addTile(Wt.tileID),et[Wt.tileID.key]=Wt.tileID),it[Mt]=Ot}this._retainLoadedChildren(it,M,B,$);for(const Mt in et)$[Mt]||(this._coveredTiles[Mt]=!0,$[Mt]=et[Mt]);if(m){const Mt={},Ot={};for(const Tt of b)this._tiles[Tt.key].hasData()?Mt[Tt.key]=Tt:Ot[Tt.key]=Tt;for(const Tt in Ot){const Wt=Ot[Tt].children(this._source.maxzoom);this._tiles[Wt[0].key]&&this._tiles[Wt[1].key]&&this._tiles[Wt[2].key]&&this._tiles[Wt[3].key]&&(Mt[Wt[0].key]=$[Wt[0].key]=Wt[0],Mt[Wt[1].key]=$[Wt[1].key]=Wt[1],Mt[Wt[2].key]=$[Wt[2].key]=Wt[2],Mt[Wt[3].key]=$[Wt[3].key]=Wt[3],delete Ot[Tt])}for(const Tt in Ot){const Wt=this.findLoadedParent(Ot[Tt],this._source.minzoom);if(Wt){Mt[Wt.tileID.key]=$[Wt.tileID.key]=Wt.tileID;for(const oe in Mt)Mt[oe].isChildOf(Wt.tileID)&&delete Mt[oe]}}for(const Tt in this._tiles)Mt[Tt]||(this._coveredTiles[Tt]=!0)}}for(const et in $)this._tiles[et].clearFadeHold();const Y=a.ab(this._tiles,$);for(const et of Y){const it=this._tiles[et];it.hasSymbolBuckets&&!it.holdingForFade()?it.setHoldDuration(this.map._fadeDuration):it.hasSymbolBuckets&&!it.symbolFadeFinished()||this._removeTile(et)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,m){const b={},M={},C=Math.max(m-ki.maxOverzooming,this._source.minzoom),B=Math.max(m+ki.maxUnderzooming,this._source.minzoom),j={};for(const $ of l){const Y=this._addTile($);b[$.key]=$,Y.hasData()||m<this._source.maxzoom&&(j[$.key]=$)}this._retainLoadedChildren(j,m,B,b);for(const $ of l){let Y=this._tiles[$.key];if(Y.hasData())continue;if(m+1>this._source.maxzoom){const it=$.children(this._source.maxzoom)[0],pt=this.getTile(it);if(pt&&pt.hasData()){b[it.key]=it;continue}}else{const it=$.children(this._source.maxzoom);if(b[it[0].key]&&b[it[1].key]&&b[it[2].key]&&b[it[3].key])continue}let et=Y.wasRequested();for(let it=$.overscaledZ-1;it>=C;--it){const pt=$.scaledTo(it);if(M[pt.key])break;if(M[pt.key]=!0,Y=this.getTile(pt),!Y&&et&&(Y=this._addTile(pt)),Y){const At=Y.hasData();if((et||At)&&(b[pt.key]=pt),et=Y.wasRequested(),At)break}}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const m=[];let b,M=this._tiles[l].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){b=this._loadedParentTiles[M.key];break}m.push(M.key);const C=M.scaledTo(M.overscaledZ-1);if(b=this._getLoadedTile(C),b)break;M=C}for(const C of m)this._loadedParentTiles[C]=b}}_addTile(l){let m=this._tiles[l.key];if(m)return m;m=this._cache.getAndRemove(l),m&&(this._setTileReloadTimer(l.key,m),m.tileID=l,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,m)));const b=m;return m||(m=new rn(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(m,this._tileLoaded.bind(this,m,l.key,m.state))),m.uses++,this._tiles[l.key]=m,b||this._source.fire(new a.k("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m}_setTileReloadTimer(l,m){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const b=m.getExpiryTimeout();b&&(this._timers[l]=setTimeout((()=>{this._reloadTile(l,"expired"),delete this._timers[l]}),b))}_removeTile(l){const m=this._tiles[l];m&&(m.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,m,b){const M=[],C=this.transform;if(!C)return M;const B=b?C.getCameraQueryGeometry(l):l,j=l.map((Mt=>C.pointCoordinate(Mt,this.terrain))),$=B.map((Mt=>C.pointCoordinate(Mt,this.terrain))),Y=this.getIds();let et=1/0,it=1/0,pt=-1/0,At=-1/0;for(const Mt of $)et=Math.min(et,Mt.x),it=Math.min(it,Mt.y),pt=Math.max(pt,Mt.x),At=Math.max(At,Mt.y);for(let Mt=0;Mt<Y.length;Mt++){const Ot=this._tiles[Y[Mt]];if(Ot.holdingForFade())continue;const Tt=Ot.tileID,Wt=Math.pow(2,C.zoom-Ot.tileID.overscaledZ),oe=m*Ot.queryPadding*a.N/Ot.tileSize/Wt,Rt=[Tt.getTilePoint(new a.U(et,it)),Tt.getTilePoint(new a.U(pt,At))];if(Rt[0].x-oe<a.N&&Rt[0].y-oe<a.N&&Rt[1].x+oe>=0&&Rt[1].y+oe>=0){const Kt=j.map((de=>Tt.getTilePoint(de))),ue=$.map((de=>Tt.getTilePoint(de)));M.push({tile:Ot,tileID:Tt,queryGeometry:Kt,cameraQueryGeometry:ue,scale:Wt})}}return M}getVisibleCoordinates(l){const m=this.getRenderableIds(l).map((b=>this._tiles[b].tileID));for(const b of m)b.posMatrix=this.transform.calculatePosMatrix(b.toUnwrapped());return m}hasTransition(){if(this._source.hasTransition())return!0;if(Yn(this._source.type)){const l=a.h.now();for(const m in this._tiles)if(this._tiles[m].fadeEndTime>=l)return!0}return!1}setFeatureState(l,m,b){this._state.updateState(l=l||"_geojsonTileLayer",m,b)}removeFeatureState(l,m,b){this._state.removeFeatureState(l=l||"_geojsonTileLayer",m,b)}getFeatureState(l,m){return this._state.getState(l=l||"_geojsonTileLayer",m)}setDependencies(l,m,b){const M=this._tiles[l];M&&M.setDependencies(m,b)}reloadTilesForDependencies(l,m){for(const b in this._tiles)this._tiles[b].hasDependency(l,m)&&this._reloadTile(b,"reloading");this._cache.filter((b=>!b.hasDependency(l,m)))}}function Li(E,l){const m=Math.abs(2*E.wrap)-+(E.wrap<0),b=Math.abs(2*l.wrap)-+(l.wrap<0);return E.overscaledZ-l.overscaledZ||b-m||l.canonical.y-E.canonical.y||l.canonical.x-E.canonical.x}function Yn(E){return E==="raster"||E==="image"||E==="video"}ki.maxOverzooming=10,ki.maxUnderzooming=3;const cn="mapboxgl_preloaded_worker_pool";class Zi{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Zi.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach((m=>{m.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[cn]}numActive(){return Object.keys(this.active).length}}const si=Math.floor(a.h.hardwareConcurrency/2);let Ii;function jr(){return Ii||(Ii=new Zi),Ii}Zi.workerCount=a.ac(globalThis)?Math.max(Math.min(si,3),1):1;class Ws{constructor(l,m){this.reset(l,m)}reset(l,m){this.points=l||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.ad(l,0,1);let m=1,b=this._distances[m];const M=l*this.paddedLength+this.padding;for(;b<M&&m<this._distances.length;)b=this._distances[++m];const C=m-1,B=this._distances[C],j=b-B,$=j>0?(M-B)/j:0;return this.points[C].mult(1-$).add(this.points[m].mult($))}}function Wa(E,l){let m=!0;return E==="always"||E!=="never"&&l!=="never"||(m=!1),m}class _a{constructor(l,m,b){const M=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(l/b),this.yCellCount=Math.ceil(m/b);for(let B=0;B<this.xCellCount*this.yCellCount;B++)M.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=m,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,m,b,M,C){this._forEachCell(m,b,M,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(M),this.bboxes.push(C)}insertCircle(l,m,b,M){this._forEachCell(m-M,b-M,m+M,b+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(m),this.circles.push(b),this.circles.push(M)}_insertBoxCell(l,m,b,M,C,B){this.boxCells[C].push(B)}_insertCircleCell(l,m,b,M,C,B){this.circleCells[C].push(B)}_query(l,m,b,M,C,B,j){if(b<0||l>this.width||M<0||m>this.height)return[];const $=[];if(l<=0&&m<=0&&this.width<=b&&this.height<=M){if(C)return[{key:null,x1:l,y1:m,x2:b,y2:M}];for(let Y=0;Y<this.boxKeys.length;Y++)$.push({key:this.boxKeys[Y],x1:this.bboxes[4*Y],y1:this.bboxes[4*Y+1],x2:this.bboxes[4*Y+2],y2:this.bboxes[4*Y+3]});for(let Y=0;Y<this.circleKeys.length;Y++){const et=this.circles[3*Y],it=this.circles[3*Y+1],pt=this.circles[3*Y+2];$.push({key:this.circleKeys[Y],x1:et-pt,y1:it-pt,x2:et+pt,y2:it+pt})}}else this._forEachCell(l,m,b,M,this._queryCell,$,{hitTest:C,overlapMode:B,seenUids:{box:{},circle:{}}},j);return $}query(l,m,b,M){return this._query(l,m,b,M,!1,null)}hitTest(l,m,b,M,C,B){return this._query(l,m,b,M,!0,C,B).length>0}hitTestCircle(l,m,b,M,C){const B=l-b,j=l+b,$=m-b,Y=m+b;if(j<0||B>this.width||Y<0||$>this.height)return!1;const et=[];return this._forEachCell(B,$,j,Y,this._queryCellCircle,et,{hitTest:!0,overlapMode:M,circle:{x:l,y:m,radius:b},seenUids:{box:{},circle:{}}},C),et.length>0}_queryCell(l,m,b,M,C,B,j,$){const{seenUids:Y,hitTest:et,overlapMode:it}=j,pt=this.boxCells[C];if(pt!==null){const Mt=this.bboxes;for(const Ot of pt)if(!Y.box[Ot]){Y.box[Ot]=!0;const Tt=4*Ot,Wt=this.boxKeys[Ot];if(l<=Mt[Tt+2]&&m<=Mt[Tt+3]&&b>=Mt[Tt+0]&&M>=Mt[Tt+1]&&(!$||$(Wt))&&(!et||!Wa(it,Wt.overlapMode))&&(B.push({key:Wt,x1:Mt[Tt],y1:Mt[Tt+1],x2:Mt[Tt+2],y2:Mt[Tt+3]}),et))return!0}}const At=this.circleCells[C];if(At!==null){const Mt=this.circles;for(const Ot of At)if(!Y.circle[Ot]){Y.circle[Ot]=!0;const Tt=3*Ot,Wt=this.circleKeys[Ot];if(this._circleAndRectCollide(Mt[Tt],Mt[Tt+1],Mt[Tt+2],l,m,b,M)&&(!$||$(Wt))&&(!et||!Wa(it,Wt.overlapMode))){const oe=Mt[Tt],Rt=Mt[Tt+1],Kt=Mt[Tt+2];if(B.push({key:Wt,x1:oe-Kt,y1:Rt-Kt,x2:oe+Kt,y2:Rt+Kt}),et)return!0}}}return!1}_queryCellCircle(l,m,b,M,C,B,j,$){const{circle:Y,seenUids:et,overlapMode:it}=j,pt=this.boxCells[C];if(pt!==null){const Mt=this.bboxes;for(const Ot of pt)if(!et.box[Ot]){et.box[Ot]=!0;const Tt=4*Ot,Wt=this.boxKeys[Ot];if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,Mt[Tt+0],Mt[Tt+1],Mt[Tt+2],Mt[Tt+3])&&(!$||$(Wt))&&!Wa(it,Wt.overlapMode))return B.push(!0),!0}}const At=this.circleCells[C];if(At!==null){const Mt=this.circles;for(const Ot of At)if(!et.circle[Ot]){et.circle[Ot]=!0;const Tt=3*Ot,Wt=this.circleKeys[Ot];if(this._circlesCollide(Mt[Tt],Mt[Tt+1],Mt[Tt+2],Y.x,Y.y,Y.radius)&&(!$||$(Wt))&&!Wa(it,Wt.overlapMode))return B.push(!0),!0}}}_forEachCell(l,m,b,M,C,B,j,$){const Y=this._convertToXCellCoord(l),et=this._convertToYCellCoord(m),it=this._convertToXCellCoord(b),pt=this._convertToYCellCoord(M);for(let At=Y;At<=it;At++)for(let Mt=et;Mt<=pt;Mt++)if(C.call(this,l,m,b,M,this.xCellCount*Mt+At,B,j,$))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,m,b,M,C,B){const j=M-l,$=C-m,Y=b+B;return Y*Y>j*j+$*$}_circleAndRectCollide(l,m,b,M,C,B,j){const $=(B-M)/2,Y=Math.abs(l-(M+$));if(Y>$+b)return!1;const et=(j-C)/2,it=Math.abs(m-(C+et));if(it>et+b)return!1;if(Y<=$||it<=et)return!0;const pt=Y-$,At=it-et;return pt*pt+At*At<=b*b}}function Be(E,l,m,b,M){const C=a.Z();return l?(a.a0(C,C,[1/M,1/M,1]),m||a.ae(C,C,b.angle)):a.a1(C,b.labelPlaneMatrix,E),C}function hr(E,l,m,b,M){if(l){const C=a.af(E);return a.a0(C,C,[M,M,1]),m||a.ae(C,C,-b.angle),C}return b.glCoordMatrix}function Un(E,l,m){let b;m?(b=[E.x,E.y,m(E.x,E.y),1],a.ag(b,b,l)):(b=[E.x,E.y,0,1],Dt(b,b,l));const M=b[3];return{point:new a.P(b[0]/M,b[1]/M),signedDistanceFromCamera:M}}function va(E,l){return .5+E/l*.5}function fr(E,l){const m=E[0]/E[3],b=E[1]/E[3];return m>=-l[0]&&m<=l[0]&&b>=-l[1]&&b<=l[1]}function Fe(E,l,m,b,M,C,B,j,$,Y){const et=b?E.textSizeData:E.iconSizeData,it=a.ah(et,m.transform.zoom),pt=[256/m.width*2+1,256/m.height*2+1],At=b?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;At.clear();const Mt=E.lineVertexArray,Ot=b?E.text.placedSymbolArray:E.icon.placedSymbolArray,Tt=m.transform.width/m.transform.height;let Wt=!1;for(let oe=0;oe<Ot.length;oe++){const Rt=Ot.get(oe);if(Rt.hidden||Rt.writingMode===a.ai.vertical&&!Wt){bt(Rt.numGlyphs,At);continue}let Kt;if(Wt=!1,Y?(Kt=[Rt.anchorX,Rt.anchorY,Y(Rt.anchorX,Rt.anchorY),1],a.ag(Kt,Kt,l)):(Kt=[Rt.anchorX,Rt.anchorY,0,1],Dt(Kt,Kt,l)),!fr(Kt,pt)){bt(Rt.numGlyphs,At);continue}const ue=va(m.transform.cameraToCenterDistance,Kt[3]),de=a.aj(et,it,Rt),be=B?de/ue:de*ue,ze=new a.P(Rt.anchorX,Rt.anchorY),Ae=Un(ze,M,Y).point,Ne={projections:{},offsets:{}},sn=Mr(Rt,be,!1,j,l,M,C,E.glyphOffsetArray,Mt,At,Ae,ze,Ne,Tt,$,Y);Wt=sn.useVertical,(sn.notEnoughRoom||Wt||sn.needsFlipping&&Mr(Rt,be,!0,j,l,M,C,E.glyphOffsetArray,Mt,At,Ae,ze,Ne,Tt,$,Y).notEnoughRoom)&&bt(Rt.numGlyphs,At)}b?E.text.dynamicLayoutVertexBuffer.updateData(At):E.icon.dynamicLayoutVertexBuffer.updateData(At)}function Dn(E,l,m,b,M,C,B,j,$,Y,et,it,pt){const At=j.glyphStartIndex+j.numGlyphs,Mt=j.lineStartIndex,Ot=j.lineStartIndex+j.lineLength,Tt=l.getoffsetX(j.glyphStartIndex),Wt=l.getoffsetX(At-1),oe=lt(E*Tt,m,b,M,C,B,j.segment,Mt,Ot,$,Y,et,it,pt);if(!oe)return null;const Rt=lt(E*Wt,m,b,M,C,B,j.segment,Mt,Ot,$,Y,et,it,pt);return Rt?{first:oe,last:Rt}:null}function wn(E,l,m,b){return E===a.ai.horizontal&&Math.abs(m.y-l.y)>Math.abs(m.x-l.x)*b?{useVertical:!0}:(E===a.ai.vertical?l.y<m.y:l.x>m.x)?{needsFlipping:!0}:null}function Mr(E,l,m,b,M,C,B,j,$,Y,et,it,pt,At,Mt,Ot){const Tt=l/24,Wt=E.lineOffsetX*Tt,oe=E.lineOffsetY*Tt;let Rt;if(E.numGlyphs>1){const Kt=E.glyphStartIndex+E.numGlyphs,ue=E.lineStartIndex,de=E.lineStartIndex+E.lineLength,be=Dn(Tt,j,Wt,oe,m,et,it,E,$,C,pt,Mt,Ot);if(!be)return{notEnoughRoom:!0};const ze=Un(be.first.point,B,Ot).point,Ae=Un(be.last.point,B,Ot).point;if(b&&!m){const Ne=wn(E.writingMode,ze,Ae,At);if(Ne)return Ne}Rt=[be.first];for(let Ne=E.glyphStartIndex+1;Ne<Kt-1;Ne++)Rt.push(lt(Tt*j.getoffsetX(Ne),Wt,oe,m,et,it,E.segment,ue,de,$,C,pt,Mt,Ot));Rt.push(be.last)}else{if(b&&!m){const ue=Un(it,M,Ot).point,de=E.lineStartIndex+E.segment+1,be=new a.P($.getx(de),$.gety(de)),ze=Un(be,M,Ot),Ae=ze.signedDistanceFromCamera>0?ze.point:za(it,be,ue,1,M,Ot),Ne=wn(E.writingMode,ue,Ae,At);if(Ne)return Ne}const Kt=lt(Tt*j.getoffsetX(E.glyphStartIndex),Wt,oe,m,et,it,E.segment,E.lineStartIndex,E.lineStartIndex+E.lineLength,$,C,pt,Mt,Ot);if(!Kt)return{notEnoughRoom:!0};Rt=[Kt]}for(const Kt of Rt)a.ak(Y,Kt.point,Kt.angle);return{}}function za(E,l,m,b,M,C){const B=Un(E.add(E.sub(l)._unit()),M,C).point,j=m.sub(B);return m.add(j._mult(b/j.mag()))}function bn(E,l){const{projectionCache:m,lineVertexArray:b,labelPlaneMatrix:M,tileAnchorPoint:C,distanceFromAnchor:B,getElevation:j,previousVertex:$,direction:Y,absOffsetX:et}=l;if(m.projections[E])return m.projections[E];const it=new a.P(b.getx(E),b.gety(E)),pt=Un(it,M,j);if(pt.signedDistanceFromCamera>0)return m.projections[E]=pt.point,pt.point;const At=E-Y;return za(B===0?C:new a.P(b.getx(At),b.gety(At)),it,$,et-B+1,M,j)}function xa(E,l,m){return E._unit()._perp()._mult(l*m)}function kt(E,l,m,b,M,C,B,j){const{projectionCache:$,direction:Y}=j;if($.offsets[E])return $.offsets[E];const et=m.add(l);if(E+Y<b||E+Y>=M)return $.offsets[E]=et,et;const it=bn(E+Y,j),pt=xa(it.sub(m),B,Y),At=m.add(pt),Mt=it.add(pt);return $.offsets[E]=a.al(C,et,At,Mt)||et,$.offsets[E]}function lt(E,l,m,b,M,C,B,j,$,Y,et,it,pt,At){const Mt=b?E-l:E+l;let Ot=Mt>0?1:-1,Tt=0;b&&(Ot*=-1,Tt=Math.PI),Ot<0&&(Tt+=Math.PI);let Wt,oe,Rt=Ot>0?j+B:j+B+1,Kt=M,ue=M,de=0,be=0;const ze=Math.abs(Mt),Ae=[];let Ne;for(;de+be<=ze;){if(Rt+=Ot,Rt<j||Rt>=$)return null;de+=be,ue=Kt,oe=Wt;const Ve={projectionCache:it,lineVertexArray:Y,labelPlaneMatrix:et,tileAnchorPoint:C,distanceFromAnchor:de,getElevation:At,previousVertex:ue,direction:Ot,absOffsetX:ze};if(Kt=bn(Rt,Ve),m===0)Ae.push(ue),Ne=Kt.sub(ue);else{let fn;const on=Kt.sub(ue);fn=on.mag()===0?xa(bn(Rt+Ot,Ve).sub(Kt),m,Ot):xa(on,m,Ot),oe||(oe=ue.add(fn)),Wt=kt(Rt,fn,Kt,j,$,oe,m,Ve),Ae.push(oe),Ne=Wt.sub(oe)}be=Ne.mag()}const sn=Ne._mult((ze-de)/be)._add(oe||ue),qn=Tt+Math.atan2(Kt.y-ue.y,Kt.x-ue.x);return Ae.push(sn),{point:sn,angle:pt?qn:0,path:Ae}}const dt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function bt(E,l){for(let m=0;m<E;m++){const b=l.length;l.resize(b+4),l.float32.set(dt,3*b)}}function Dt(E,l,m){const b=l[0],M=l[1];return E[0]=m[0]*b+m[4]*M+m[12],E[1]=m[1]*b+m[5]*M+m[13],E[3]=m[3]*b+m[7]*M+m[15],E}const zt=100;class te{constructor(l,m=new _a(l.width+200,l.height+200,25),b=new _a(l.width+200,l.height+200,25)){this.transform=l,this.grid=m,this.ignoredGrid=b,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+zt,this.screenBottomBoundary=l.height+zt,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,m,b,M,C,B){const j=this.projectAndGetPerspectiveRatio(M,l.anchorPointX,l.anchorPointY,B),$=b*j.perspectiveRatio,Y=l.x1*$+j.point.x,et=l.y1*$+j.point.y,it=l.x2*$+j.point.x,pt=l.y2*$+j.point.y;return!this.isInsideGrid(Y,et,it,pt)||m!=="always"&&this.grid.hitTest(Y,et,it,pt,m,C)||j.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Y,et,it,pt],offscreen:this.isOffscreen(Y,et,it,pt)}}placeCollisionCircles(l,m,b,M,C,B,j,$,Y,et,it,pt,At,Mt){const Ot=[],Tt=new a.P(m.anchorX,m.anchorY),Wt=Un(Tt,B,Mt),oe=va(this.transform.cameraToCenterDistance,Wt.signedDistanceFromCamera),Rt=(et?C/oe:C*oe)/a.ap,Kt=Un(Tt,j,Mt).point,ue=Dn(Rt,M,m.lineOffsetX*Rt,m.lineOffsetY*Rt,!1,Kt,Tt,m,b,j,{projections:{},offsets:{}},!1,Mt);let de=!1,be=!1,ze=!0;if(ue){const Ae=.5*pt*oe+At,Ne=new a.P(-100,-100),sn=new a.P(this.screenRightBoundary,this.screenBottomBoundary),qn=new Ws,Ve=ue.first,fn=ue.last;let on=[];for(let Cn=Ve.path.length-1;Cn>=1;Cn--)on.push(Ve.path[Cn]);for(let Cn=1;Cn<fn.path.length;Cn++)on.push(fn.path[Cn]);const Mi=2.5*Ae;if($){const Cn=on.map((Fn=>Un(Fn,$,Mt)));on=Cn.some((Fn=>Fn.signedDistanceFromCamera<=0))?[]:Cn.map((Fn=>Fn.point))}let Ln=[];if(on.length>0){const Cn=on[0].clone(),Fn=on[0].clone();for(let Gi=1;Gi<on.length;Gi++)Cn.x=Math.min(Cn.x,on[Gi].x),Cn.y=Math.min(Cn.y,on[Gi].y),Fn.x=Math.max(Fn.x,on[Gi].x),Fn.y=Math.max(Fn.y,on[Gi].y);Ln=Cn.x>=Ne.x&&Fn.x<=sn.x&&Cn.y>=Ne.y&&Fn.y<=sn.y?[on]:Fn.x<Ne.x||Cn.x>sn.x||Fn.y<Ne.y||Cn.y>sn.y?[]:a.am([on],Ne.x,Ne.y,sn.x,sn.y)}for(const Cn of Ln){qn.reset(Cn,.25*Ae);let Fn=0;Fn=qn.length<=.5*Ae?1:Math.ceil(qn.paddedLength/Mi)+1;for(let Gi=0;Gi<Fn;Gi++){const Ei=Gi/Math.max(Fn-1,1),oa=qn.lerp(Ei),Ji=oa.x+zt,br=oa.y+zt;Ot.push(Ji,br,Ae,0);const $r=Ji-Ae,Bi=br-Ae,co=Ji+Ae,Aa=br+Ae;if(ze=ze&&this.isOffscreen($r,Bi,co,Aa),be=be||this.isInsideGrid($r,Bi,co,Aa),l!=="always"&&this.grid.hitTestCircle(Ji,br,Ae,l,it)&&(de=!0,!Y))return{circles:[],offscreen:!1,collisionDetected:de}}}}return{circles:!Y&&de||!be||oe<this.perspectiveRatioCutoff?[]:Ot,offscreen:ze,collisionDetected:de}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let b=1/0,M=1/0,C=-1/0,B=-1/0;for(const et of l){const it=new a.P(et.x+zt,et.y+zt);b=Math.min(b,it.x),M=Math.min(M,it.y),C=Math.max(C,it.x),B=Math.max(B,it.y),m.push(it)}const j=this.grid.query(b,M,C,B).concat(this.ignoredGrid.query(b,M,C,B)),$={},Y={};for(const et of j){const it=et.key;if($[it.bucketInstanceId]===void 0&&($[it.bucketInstanceId]={}),$[it.bucketInstanceId][it.featureIndex])continue;const pt=[new a.P(et.x1,et.y1),new a.P(et.x2,et.y1),new a.P(et.x2,et.y2),new a.P(et.x1,et.y2)];a.an(m,pt)&&($[it.bucketInstanceId][it.featureIndex]=!0,Y[it.bucketInstanceId]===void 0&&(Y[it.bucketInstanceId]=[]),Y[it.bucketInstanceId].push(it.featureIndex))}return Y}insertCollisionBox(l,m,b,M,C,B){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:C,collisionGroupID:B,overlapMode:m},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,m,b,M,C,B){const j=b?this.ignoredGrid:this.grid,$={bucketInstanceId:M,featureIndex:C,collisionGroupID:B,overlapMode:m};for(let Y=0;Y<l.length;Y+=4)j.insertCircle($,l[Y],l[Y+1],l[Y+2])}projectAndGetPerspectiveRatio(l,m,b,M){let C;return M?(C=[m,b,M(m,b),1],a.ag(C,C,l)):(C=[m,b,0,1],Dt(C,C,l)),{point:new a.P((C[0]/C[3]+1)/2*this.transform.width+zt,(-C[1]/C[3]+1)/2*this.transform.height+zt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}}isOffscreen(l,m,b,M){return b<zt||l>=this.screenRightBoundary||M<zt||m>this.screenBottomBoundary}isInsideGrid(l,m,b,M){return b>=0&&l<this.gridRightBoundary&&M>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const l=a.ao([]);return a.$(l,l,[-100,-100,0]),l}}function Zt(E,l,m){return l*(a.N/(E.tileSize*Math.pow(2,m-E.tileID.overscaledZ)))}class Ut{constructor(l,m,b,M){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?m:-m))):M&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class Xt{constructor(l,m,b,M,C){this.text=new Ut(l?l.text:null,m,b,C),this.icon=new Ut(l?l.icon:null,m,M,C)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class _e{constructor(l,m,b){this.text=l,this.icon=m,this.skipFade=b}}class ie{constructor(){this.invProjMatrix=a.Z(),this.viewportMatrix=a.Z(),this.circles=[]}}class Te{constructor(l,m,b,M,C){this.bucketInstanceId=l,this.featureIndex=m,this.sourceLayerIndex=b,this.bucketIndex=M,this.tileID=C}}class hn{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const m=++this.maxGroupID;this.collisionGroups[l]={ID:m,predicate:b=>b.collisionGroupID===m}}return this.collisionGroups[l]}}function dn(E,l,m,b,M){const{horizontalAlign:C,verticalAlign:B}=a.au(E);return new a.P(-(C-.5)*l+b[0]*M,-(B-.5)*m+b[1]*M)}function He(E,l,m,b,M,C){const{x1:B,x2:j,y1:$,y2:Y,anchorPointX:et,anchorPointY:it}=E,pt=new a.P(l,m);return b&&pt._rotate(M?C:-C),{x1:B+pt.x,y1:$+pt.y,x2:j+pt.x,y2:Y+pt.y,anchorPointX:et,anchorPointY:it}}class tn{constructor(l,m,b,M,C){this.transform=l.clone(),this.terrain=m,this.collisionIndex=new te(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new hn(M),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,m,b,M){const C=b.getBucket(m),B=b.latestFeatureIndex;if(!C||!B||m.id!==C.layerIds[0])return;const j=b.collisionBoxArray,$=C.layers[0].layout,Y=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),et=b.tileSize/a.N,it=this.transform.calculatePosMatrix(b.tileID.toUnwrapped()),pt=$.get("text-pitch-alignment")==="map",At=$.get("text-rotation-alignment")==="map",Mt=Zt(b,1,this.transform.zoom),Ot=Be(it,pt,At,this.transform,Mt);let Tt=null;if(pt){const oe=hr(it,pt,At,this.transform,Mt);Tt=a.a1([],this.transform.labelPlaneMatrix,oe)}this.retainedQueryData[C.bucketInstanceId]=new Te(C.bucketInstanceId,B,C.sourceLayerIndex,C.index,b.tileID);const Wt={bucket:C,layout:$,posMatrix:it,textLabelPlaneMatrix:Ot,labelToScreenMatrix:Tt,scale:Y,textPixelRatio:et,holdingForFade:b.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:a.ah(C.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(M)for(const oe of C.sortKeyRanges){const{sortKey:Rt,symbolInstanceStart:Kt,symbolInstanceEnd:ue}=oe;l.push({sortKey:Rt,symbolInstanceStart:Kt,symbolInstanceEnd:ue,parameters:Wt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Wt})}attemptAnchorPlacement(l,m,b,M,C,B,j,$,Y,et,it,pt,At,Mt,Ot,Tt){const Wt=a.aq[l.textAnchor],oe=[l.textOffset0,l.textOffset1],Rt=dn(Wt,b,M,oe,C),Kt=this.collisionIndex.placeCollisionBox(He(m,Rt.x,Rt.y,B,j,this.transform.angle),it,$,Y,et.predicate,Tt);if((!Ot||this.collisionIndex.placeCollisionBox(He(Ot,Rt.x,Rt.y,B,j,this.transform.angle),it,$,Y,et.predicate,Tt).box.length!==0)&&Kt.box.length>0){let ue;if(this.prevPlacement&&this.prevPlacement.variableOffsets[pt.crossTileID]&&this.prevPlacement.placements[pt.crossTileID]&&this.prevPlacement.placements[pt.crossTileID].text&&(ue=this.prevPlacement.variableOffsets[pt.crossTileID].anchor),pt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[pt.crossTileID]={textOffset:oe,width:b,height:M,anchor:Wt,textBoxScale:C,prevAnchor:ue},this.markUsedJustification(At,Wt,pt,Mt),At.allowVerticalPlacement&&(this.markUsedOrientation(At,Mt,pt),this.placedOrientations[pt.crossTileID]=Mt),{shift:Rt,placedGlyphBoxes:Kt}}}placeLayerBucketPart(l,m,b){const{bucket:M,layout:C,posMatrix:B,textLabelPlaneMatrix:j,labelToScreenMatrix:$,textPixelRatio:Y,holdingForFade:et,collisionBoxArray:it,partiallyEvaluatedTextSize:pt,collisionGroup:At}=l.parameters,Mt=C.get("text-optional"),Ot=C.get("icon-optional"),Tt=a.ar(C,"text-overlap","text-allow-overlap"),Wt=Tt==="always",oe=a.ar(C,"icon-overlap","icon-allow-overlap"),Rt=oe==="always",Kt=C.get("text-rotation-alignment")==="map",ue=C.get("text-pitch-alignment")==="map",de=C.get("icon-text-fit")!=="none",be=C.get("symbol-z-order")==="viewport-y",ze=Wt&&(Rt||!M.hasIconData()||Ot),Ae=Rt&&(Wt||!M.hasTextData()||Mt);!M.collisionArrays&&it&&M.deserializeCollisionBoxes(it);const Ne=this.retainedQueryData[M.bucketInstanceId].tileID,sn=this.terrain?(Ve,fn)=>this.terrain.getElevation(Ne,Ve,fn):null,qn=(Ve,fn)=>{var on,Mi;if(m[Ve.crossTileID])return;if(et)return void(this.placements[Ve.crossTileID]=new _e(!1,!1,!1));let Ln=!1,Cn=!1,Fn=!0,Gi=null,Ei={box:null,offscreen:null},oa={box:null},Ji=null,br=null,$r=null,Bi=0,co=0,Aa=0;fn.textFeatureIndex?Bi=fn.textFeatureIndex:Ve.useRuntimeCollisionCircles&&(Bi=Ve.featureIndex),fn.verticalTextFeatureIndex&&(co=fn.verticalTextFeatureIndex);const ns=fn.textBox;if(ns){const la=dr=>{let ar=a.ai.horizontal;if(M.allowVerticalPlacement&&!dr&&this.prevPlacement){const Ea=this.prevPlacement.placedOrientations[Ve.crossTileID];Ea&&(this.placedOrientations[Ve.crossTileID]=Ea,ar=Ea,this.markUsedOrientation(M,ar,Ve))}return ar},kr=(dr,ar)=>{if(M.allowVerticalPlacement&&Ve.numVerticalGlyphVertices>0&&fn.verticalTextBox){for(const Ea of M.writingModes)if(Ea===a.ai.vertical?(Ei=ar(),oa=Ei):Ei=dr(),Ei&&Ei.box&&Ei.box.length)break}else Ei=dr()},Kr=Ve.textAnchorOffsetStartIndex,hu=Ve.textAnchorOffsetEndIndex;if(hu===Kr){const dr=(ar,Ea)=>{const pr=this.collisionIndex.placeCollisionBox(ar,Tt,Y,B,At.predicate,sn);return pr&&pr.box&&pr.box.length&&(this.markUsedOrientation(M,Ea,Ve),this.placedOrientations[Ve.crossTileID]=Ea),pr};kr((()=>dr(ns,a.ai.horizontal)),(()=>{const ar=fn.verticalTextBox;return M.allowVerticalPlacement&&Ve.numVerticalGlyphVertices>0&&ar?dr(ar,a.ai.vertical):{box:null,offscreen:null}})),la(Ei&&Ei.box&&Ei.box.length)}else{let dr=a.aq[(Mi=(on=this.prevPlacement)===null||on===void 0?void 0:on.variableOffsets[Ve.crossTileID])===null||Mi===void 0?void 0:Mi.anchor];const ar=(pr,Bl,Sc)=>{const _s=pr.x2-pr.x1,Is=pr.y2-pr.y1,fu=Ve.textBoxScale,ih=de&&oe==="never"?Bl:null;let qo={box:[],offscreen:!1},vs=Tt==="never"?1:2,wr="never";dr&&vs++;for(let xi=0;xi<vs;xi++){for(let Rs=Kr;Rs<hu;Rs++){const Ho=M.textAnchorOffsets.get(Rs);if(dr&&Ho.textAnchor!==dr)continue;const An=this.attemptAnchorPlacement(Ho,pr,_s,Is,fu,Kt,ue,Y,B,At,wr,Ve,M,Sc,ih,sn);if(An&&(qo=An.placedGlyphBoxes,qo&&qo.box&&qo.box.length))return Ln=!0,Gi=An.shift,qo}dr?dr=null:wr=Tt}return qo};kr((()=>ar(ns,fn.iconBox,a.ai.horizontal)),(()=>{const pr=fn.verticalTextBox;return M.allowVerticalPlacement&&!(Ei&&Ei.box&&Ei.box.length)&&Ve.numVerticalGlyphVertices>0&&pr?ar(pr,fn.verticalIconBox,a.ai.vertical):{box:null,offscreen:null}})),Ei&&(Ln=Ei.box,Fn=Ei.offscreen);const Ea=la(Ei&&Ei.box);if(!Ln&&this.prevPlacement){const pr=this.prevPlacement.variableOffsets[Ve.crossTileID];pr&&(this.variableOffsets[Ve.crossTileID]=pr,this.markUsedJustification(M,pr.anchor,Ve,Ea))}}}if(Ji=Ei,Ln=Ji&&Ji.box&&Ji.box.length>0,Fn=Ji&&Ji.offscreen,Ve.useRuntimeCollisionCircles){const la=M.text.placedSymbolArray.get(Ve.centerJustifiedTextSymbolIndex),kr=a.aj(M.textSizeData,pt,la),Kr=C.get("text-padding");br=this.collisionIndex.placeCollisionCircles(Tt,la,M.lineVertexArray,M.glyphOffsetArray,kr,B,j,$,b,ue,At.predicate,Ve.collisionCircleDiameter,Kr,sn),br.circles.length&&br.collisionDetected&&!b&&a.w("Collisions detected, but collision boxes are not shown"),Ln=Wt||br.circles.length>0&&!br.collisionDetected,Fn=Fn&&br.offscreen}if(fn.iconFeatureIndex&&(Aa=fn.iconFeatureIndex),fn.iconBox){const la=kr=>{const Kr=de&&Gi?He(kr,Gi.x,Gi.y,Kt,ue,this.transform.angle):kr;return this.collisionIndex.placeCollisionBox(Kr,oe,Y,B,At.predicate,sn)};oa&&oa.box&&oa.box.length&&fn.verticalIconBox?($r=la(fn.verticalIconBox),Cn=$r.box.length>0):($r=la(fn.iconBox),Cn=$r.box.length>0),Fn=Fn&&$r.offscreen}const $o=Mt||Ve.numHorizontalGlyphVertices===0&&Ve.numVerticalGlyphVertices===0,cu=Ot||Ve.numIconVertices===0;if($o||cu?cu?$o||(Cn=Cn&&Ln):Ln=Cn&&Ln:Cn=Ln=Cn&&Ln,Ln&&Ji&&Ji.box&&this.collisionIndex.insertCollisionBox(Ji.box,Tt,C.get("text-ignore-placement"),M.bucketInstanceId,oa&&oa.box&&co?co:Bi,At.ID),Cn&&$r&&this.collisionIndex.insertCollisionBox($r.box,oe,C.get("icon-ignore-placement"),M.bucketInstanceId,Aa,At.ID),br&&(Ln&&this.collisionIndex.insertCollisionCircles(br.circles,Tt,C.get("text-ignore-placement"),M.bucketInstanceId,Bi,At.ID),b)){const la=M.bucketInstanceId;let kr=this.collisionCircleArrays[la];kr===void 0&&(kr=this.collisionCircleArrays[la]=new ie);for(let Kr=0;Kr<br.circles.length;Kr+=4)kr.circles.push(br.circles[Kr+0]),kr.circles.push(br.circles[Kr+1]),kr.circles.push(br.circles[Kr+2]),kr.circles.push(br.collisionDetected?1:0)}if(Ve.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ve.crossTileID]=new _e(Ln||ze,Cn||Ae,Fn||M.justReloaded),m[Ve.crossTileID]=!0};if(be){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ve=M.getSortedSymbolIndexes(this.transform.angle);for(let fn=Ve.length-1;fn>=0;--fn){const on=Ve[fn];qn(M.symbolInstances.get(on),M.collisionArrays[on])}}else for(let Ve=l.symbolInstanceStart;Ve<l.symbolInstanceEnd;Ve++)qn(M.symbolInstances.get(Ve),M.collisionArrays[Ve]);if(b&&M.bucketInstanceId in this.collisionCircleArrays){const Ve=this.collisionCircleArrays[M.bucketInstanceId];a.as(Ve.invProjMatrix,B),Ve.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(l,m,b,M){let C;C=M===a.ai.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[a.at(m)];const B=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const j of B)j>=0&&(l.text.placedSymbolArray.get(j).crossTileID=C>=0&&j!==C?0:b.crossTileID)}markUsedOrientation(l,m,b){const M=m===a.ai.horizontal||m===a.ai.horizontalOnly?m:0,C=m===a.ai.vertical?m:0,B=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const j of B)l.text.placedSymbolArray.get(j).placedOrientation=M;b.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=C)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let b=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const M=m?m.symbolFadeChange(l):1,C=m?m.opacities:{},B=m?m.variableOffsets:{},j=m?m.placedOrientations:{};for(const $ in this.placements){const Y=this.placements[$],et=C[$];et?(this.opacities[$]=new Xt(et,M,Y.text,Y.icon),b=b||Y.text!==et.text.placed||Y.icon!==et.icon.placed):(this.opacities[$]=new Xt(null,M,Y.text,Y.icon,Y.skipFade),b=b||Y.text||Y.icon)}for(const $ in C){const Y=C[$];if(!this.opacities[$]){const et=new Xt(Y,M,!1,!1);et.isHidden()||(this.opacities[$]=et,b=b||Y.text.placed||Y.icon.placed)}}for(const $ in B)this.variableOffsets[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.variableOffsets[$]=B[$]);for(const $ in j)this.placedOrientations[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.placedOrientations[$]=j[$]);if(m&&m.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:l)}updateLayerOpacities(l,m){const b={};for(const M of m){const C=M.getBucket(l);C&&M.latestFeatureIndex&&l.id===C.layerIds[0]&&this.updateBucketOpacities(C,b,M.collisionBoxArray)}}updateBucketOpacities(l,m,b){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const M=l.layers[0],C=M.layout,B=new Xt(null,0,!1,!1,!0),j=C.get("text-allow-overlap"),$=C.get("icon-allow-overlap"),Y=M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"),et=C.get("text-rotation-alignment")==="map",it=C.get("text-pitch-alignment")==="map",pt=C.get("icon-text-fit")!=="none",At=new Xt(null,0,j&&($||!l.hasIconData()||C.get("icon-optional")),$&&(j||!l.hasTextData()||C.get("text-optional")),!0);!l.collisionArrays&&b&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(b);const Mt=(Ot,Tt,Wt)=>{for(let oe=0;oe<Tt/4;oe++)Ot.opacityVertexArray.emplaceBack(Wt);Ot.hasVisibleVertices=Ot.hasVisibleVertices||Wt!==Ar};for(let Ot=0;Ot<l.symbolInstances.length;Ot++){const Tt=l.symbolInstances.get(Ot),{numHorizontalGlyphVertices:Wt,numVerticalGlyphVertices:oe,crossTileID:Rt}=Tt;let Kt=this.opacities[Rt];m[Rt]?Kt=B:Kt||(Kt=At,this.opacities[Rt]=Kt),m[Rt]=!0;const ue=Tt.numIconVertices>0,de=this.placedOrientations[Tt.crossTileID],be=de===a.ai.vertical,ze=de===a.ai.horizontal||de===a.ai.horizontalOnly;if(Wt>0||oe>0){const Ae=nr(Kt.text);Mt(l.text,Wt,be?Ar:Ae),Mt(l.text,oe,ze?Ar:Ae);const Ne=Kt.text.isHidden();[Tt.rightJustifiedTextSymbolIndex,Tt.centerJustifiedTextSymbolIndex,Tt.leftJustifiedTextSymbolIndex].forEach((Ve=>{Ve>=0&&(l.text.placedSymbolArray.get(Ve).hidden=Ne||be?1:0)})),Tt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Tt.verticalPlacedTextSymbolIndex).hidden=Ne||ze?1:0);const sn=this.variableOffsets[Tt.crossTileID];sn&&this.markUsedJustification(l,sn.anchor,Tt,de);const qn=this.placedOrientations[Tt.crossTileID];qn&&(this.markUsedJustification(l,"left",Tt,qn),this.markUsedOrientation(l,qn,Tt))}if(ue){const Ae=nr(Kt.icon),Ne=!(pt&&Tt.verticalPlacedIconSymbolIndex&&be);Tt.placedIconSymbolIndex>=0&&(Mt(l.icon,Tt.numIconVertices,Ne?Ae:Ar),l.icon.placedSymbolArray.get(Tt.placedIconSymbolIndex).hidden=Kt.icon.isHidden()),Tt.verticalPlacedIconSymbolIndex>=0&&(Mt(l.icon,Tt.numVerticalIconVertices,Ne?Ar:Ae),l.icon.placedSymbolArray.get(Tt.verticalPlacedIconSymbolIndex).hidden=Kt.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Ae=l.collisionArrays[Ot];if(Ae){let Ne=new a.P(0,0);if(Ae.textBox||Ae.verticalTextBox){let qn=!0;if(Y){const Ve=this.variableOffsets[Rt];Ve?(Ne=dn(Ve.anchor,Ve.width,Ve.height,Ve.textOffset,Ve.textBoxScale),et&&Ne._rotate(it?this.transform.angle:-this.transform.angle)):qn=!1}Ae.textBox&&_n(l.textCollisionBox.collisionVertexArray,Kt.text.placed,!qn||be,Ne.x,Ne.y),Ae.verticalTextBox&&_n(l.textCollisionBox.collisionVertexArray,Kt.text.placed,!qn||ze,Ne.x,Ne.y)}const sn=!!(!ze&&Ae.verticalIconBox);Ae.iconBox&&_n(l.iconCollisionBox.collisionVertexArray,Kt.icon.placed,sn,pt?Ne.x:0,pt?Ne.y:0),Ae.verticalIconBox&&_n(l.iconCollisionBox.collisionVertexArray,Kt.icon.placed,!sn,pt?Ne.x:0,pt?Ne.y:0)}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);if(l.bucketInstanceId in this.collisionCircleArrays){const Ot=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=Ot.invProjMatrix,l.placementViewportMatrix=Ot.viewportMatrix,l.collisionCircleArray=Ot.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,m){const b=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*b>l}setStale(){this.stale=!0}}function _n(E,l,m,b,M){E.emplaceBack(l?1:0,m?1:0,b||0,M||0),E.emplaceBack(l?1:0,m?1:0,b||0,M||0),E.emplaceBack(l?1:0,m?1:0,b||0,M||0),E.emplaceBack(l?1:0,m?1:0,b||0,M||0)}const Vn=Math.pow(2,25),pi=Math.pow(2,24),Kn=Math.pow(2,17),Hn=Math.pow(2,16),xr=Math.pow(2,9),Ti=Math.pow(2,8),Ri=Math.pow(2,1);function nr(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;const l=E.placed?1:0,m=Math.floor(127*E.opacity);return m*Vn+l*pi+m*Kn+l*Hn+m*xr+l*Ti+m*Ri+l}const Ar=0;class wl{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,m,b,M,C){const B=this._bucketParts;for(;this._currentTileIndex<l.length;)if(m.getBucketParts(B,M,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort(((j,$)=>j.sortKey-$.sortKey)));this._currentPartIndex<B.length;)if(m.placeLayerBucketPart(B[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,C())return!0;return!1}}class Ki{constructor(l,m,b,M,C,B,j,$){this.placement=new tn(l,m,B,j,$),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(l,m,b){const M=a.h.now(),C=()=>!this._forceFullPlacement&&a.h.now()-M>2;for(;this._currentPlacementIndex>=0;){const B=m[l[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=j)&&(!B.maxzoom||B.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new wl(B)),this._inProgressLayer.continuePlacement(b[B.source],this.placement,this._showCollisionBoxes,B,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Sl=512/a.N/2;class Xh{constructor(l,m,b){this.tileID=l,this.bucketInstanceId=b,this._symbolsByKey={};const M=new Map;for(let C=0;C<m.length;C++){const B=m.get(C),j=B.key,$=M.get(j);$?$.push(B):M.set(j,[B])}for(const[C,B]of M){const j={positions:B.map(($=>({x:Math.floor($.anchorX*Sl),y:Math.floor($.anchorY*Sl)}))),crossTileIDs:B.map(($=>$.crossTileID))};if(j.positions.length>128){const $=new a.av(j.positions.length,16,Uint16Array);for(const{x:Y,y:et}of j.positions)$.add(Y,et);$.finish(),delete j.positions,j.index=$}this._symbolsByKey[C]=j}}getScaledCoordinates(l,m){const{x:b,y:M,z:C}=this.tileID.canonical,{x:B,y:j,z:$}=m.canonical,Y=Sl/Math.pow(2,$-C),et=(j*a.N+l.anchorY)*Y,it=M*a.N*Sl;return{x:Math.floor((B*a.N+l.anchorX)*Y-b*a.N*Sl),y:Math.floor(et-it)}}findMatches(l,m,b){const M=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z);for(let C=0;C<l.length;C++){const B=l.get(C);if(B.crossTileID)continue;const j=this._symbolsByKey[B.key];if(!j)continue;const $=this.getScaledCoordinates(B,m);if(j.index){const Y=j.index.range($.x-M,$.y-M,$.x+M,$.y+M).sort();for(const et of Y){const it=j.crossTileIDs[et];if(!b[it]){b[it]=!0,B.crossTileID=it;break}}}else if(j.positions)for(let Y=0;Y<j.positions.length;Y++){const et=j.positions[Y],it=j.crossTileIDs[Y];if(Math.abs(et.x-$.x)<=M&&Math.abs(et.y-$.y)<=M&&!b[it]){b[it]=!0,B.crossTileID=it;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:l})=>l))}}class Qn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ys{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const m=Math.round((l-this.lng)/360);if(m!==0)for(const b in this.indexes){const M=this.indexes[b],C={};for(const B in M){const j=M[B];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+m),C[j.tileID.key]=j}this.indexes[b]=C}this.lng=l}addBucket(l,m,b){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let C=0;C<m.symbolInstances.length;C++)m.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const M=this.usedCrossTileIDs[l.overscaledZ];for(const C in this.indexes){const B=this.indexes[C];if(Number(C)>l.overscaledZ)for(const j in B){const $=B[j];$.tileID.isChildOf(l)&&$.findMatches(m.symbolInstances,l,M)}else{const j=B[l.scaledTo(Number(C)).key];j&&j.findMatches(m.symbolInstances,l,M)}}for(let C=0;C<m.symbolInstances.length;C++){const B=m.symbolInstances.get(C);B.crossTileID||(B.crossTileID=b.generate(),M[B.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Xh(l,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(l,m){for(const b of m.getCrossTileIDsLists())for(const M of b)delete this.usedCrossTileIDs[l][M]}removeStaleBuckets(l){let m=!1;for(const b in this.indexes){const M=this.indexes[b];for(const C in M)l[M[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,M[C]),delete M[C],m=!0)}return m}}class tl{constructor(){this.layerIndexes={},this.crossTileIDs=new Qn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,m,b){let M=this.layerIndexes[l.id];M===void 0&&(M=this.layerIndexes[l.id]=new Ys);let C=!1;const B={};M.handleWrapJump(b);for(const j of m){const $=j.getBucket(l);$&&l.id===$.layerIds[0]&&($.bucketInstanceId||($.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(j.tileID,$,this.crossTileIDs)&&(C=!0),B[$.bucketInstanceId]=!0)}return M.removeStaleBuckets(B)&&(C=!0),C}pruneUnusedLayers(l){const m={};l.forEach((b=>{m[b]=!0}));for(const b in this.layerIndexes)m[b]||delete this.layerIndexes[b]}}const Fr=(E,l)=>a.x(E,l&&l.filter((m=>m.identifier!=="source.canvas"))),ba=a.F(a.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Ou=a.F(a.ax,["setCenter","setZoom","setBearing","setPitch"]),Pn=a.aw();class Rn extends a.E{constructor(l,m={}){super(),this.map=l,this.dispatcher=new ft(jr(),this,l._getMapId()),this.imageManager=new Ct,this.imageManager.setEventedParent(this),this.glyphManager=new Nt(l._requestManager,m.localIdeographFontFamily),this.lineAtlas=new $t(256,512),this.crossTileSymbolIndex=new tl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.az());const b=this;this._rtlTextPluginCallback=Rn.registerForPluginStateChange((M=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:M.pluginStatus,pluginURL:M.pluginURL},((C,B)=>{if(a.aA(C),B&&B.every((j=>j)))for(const j in b.sourceCaches){const $=b.sourceCaches[j].getSource().type;$!=="vector"&&$!=="geojson"||b.sourceCaches[j].reload()}}))})),this.on("data",(M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const C=this.sourceCaches[M.sourceId];if(!C)return;const B=C.getSource();if(B&&B.vectorLayerIds)for(const j in this._layers){const $=this._layers[j];$.source===B.id&&this._validateLayer($)}}))}loadURL(l,m={},b){this.fire(new a.k("dataloading",{dataType:"style"})),m.validate=typeof m.validate!="boolean"||m.validate;const M=this.map._requestManager.transformRequest(l,K.Style);this._request=a.f(M,((C,B)=>{this._request=null,C?this.fire(new a.j(C)):B&&this._load(B,m,b)}))}loadJSON(l,m={},b){this.fire(new a.k("dataloading",{dataType:"style"})),this._request=a.h.frame((()=>{this._request=null,m.validate=m.validate!==!1,this._load(l,m,b)}))}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(Pn,{validate:!1})}_load(l,m,b){var M;const C=m.transformStyle?m.transformStyle(b,l):l;if(!m.validate||!Fr(this,a.y(C))){this._loaded=!0,this.stylesheet=C;for(const B in C.sources)this.addSource(B,C.sources[B],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs),this._createLayers(),this.light=new Ft(this.stylesheet.light),this.map.setTerrain((M=this.stylesheet.terrain)!==null&&M!==void 0?M:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const l=a.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",l),this._order=l.map((m=>m.id)),this._layers={},this._serializedLayers=null;for(const m of l){const b=a.aC(m);b.setEventedParent(this,{layer:{id:m.id}}),this._layers[m.id]=b}}_loadSprite(l,m=!1,b=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=(function(M,C,B,j){const $=ot(M),Y=$.length,et=B>1?"@2x":"",it={},pt={},At={};for(const{id:Mt,url:Ot}of $){const Tt=C.transformRequest(C.normalizeSpriteURL(Ot,et,".json"),K.SpriteJSON),Wt=`${Mt}_${Tt.url}`;it[Wt]=a.f(Tt,((Kt,ue)=>{delete it[Wt],pt[Mt]=ue,ct(j,pt,At,Kt,Y)}));const oe=C.transformRequest(C.normalizeSpriteURL(Ot,et,".png"),K.SpriteImage),Rt=`${Mt}_${oe.url}`;it[Rt]=H.getImage(oe,((Kt,ue)=>{delete it[Rt],At[Mt]=ue,ct(j,pt,At,Kt,Y)}))}return{cancel(){for(const Mt of Object.values(it))Mt.cancel()}}})(l,this.map._requestManager,this.map.getPixelRatio(),((M,C)=>{if(this._spriteRequest=null,M)this.fire(new a.j(M));else if(C)for(const B in C){this._spritesImagesIds[B]=[];const j=this._spritesImagesIds[B]?this._spritesImagesIds[B].filter(($=>!($ in C))):[];for(const $ of j)this.imageManager.removeImage($),this._changedImages[$]=!0;for(const $ in C[B]){const Y=B==="default"?$:`${B}:${$}`;this._spritesImagesIds[B].push(Y),Y in this.imageManager.images?this.imageManager.updateImage(Y,C[B][$],!1):this.imageManager.addImage(Y,C[B][$]),m&&(this._changedImages[Y]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),m&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),b&&b(M)}))}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(l){const m=this.sourceCaches[l.source];if(!m)return;const b=l.sourceLayer;if(!b)return;const M=m.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(b)===-1)&&this.fire(new a.j(new Error(`Source layer "${b}" does not exist on source "${M.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l){const m=this._serializedAllLayers();if(!l||l.length===0)return Object.values(m);const b=[];for(const M of l)m[M]&&b.push(m[M]);return b}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const m=Object.keys(this._layers);for(const b of m){const M=this._layers[b];M.type!=="custom"&&(l[b]=M.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const m=this._changed;if(this._changed){const M=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(M.length||C.length)&&this._updateWorkerLayers(M,C);for(const B in this._updatedSources){const j=this._updatedSources[B];if(j==="reload")this._reloadSource(B);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(B)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const B in this._updatedPaintProps)this._layers[B].updateTransitions(l);this.light.updateTransitions(l),this._resetUpdates()}const b={};for(const M in this.sourceCaches){const C=this.sourceCaches[M];b[M]=C.used,C.used=!1}for(const M of this._order){const C=this._layers[M];C.recalculate(l,this._availableImages),!C.isHidden(l.zoom)&&C.source&&(this.sourceCaches[C.source].used=!0)}for(const M in b){const C=this.sourceCaches[M];b[M]!==C.used&&C.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(l),this.z=l.zoom,m&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const m in this.sourceCaches)this.sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(l),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,m={}){this._checkLoaded();const b=this.serialize();if(l=m.transformStyle?m.transformStyle(b,l):l,Fr(this,a.y(l)))return!1;(l=a.aD(l)).layers=a.aB(l.layers);const M=a.aE(b,l).filter((B=>!(B.command in Ou)));if(M.length===0)return!1;const C=M.filter((B=>!(B.command in ba)));if(C.length>0)throw new Error(`Unimplemented: ${C.map((B=>B.command)).join(", ")}.`);for(const B of M)B.command!=="setTransition"&&this[B.command].apply(this,B.args);return this.stylesheet=l,this._serializedLayers=null,!0}addImage(l,m){if(this.getImage(l))return this.fire(new a.j(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,m),this._afterImageUpdated(l)}updateImage(l,m){this.imageManager.updateImage(l,m)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.j(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,m,b={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(a.y.source,`sources.${l}`,m,null,b))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const M=this.sourceCaches[l]=new ki(l,m,this.dispatcher);M.style=this,M.setEventedParent(this,(()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:l}))),M.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===l)return this.fire(new a.j(new Error(`Source "${l}" cannot be removed while layer "${b}" is using it.`)));const m=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],m.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),m.setEventedParent(null),m.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,m){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const b=this.sourceCaches[l].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(m),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,m,b={}){this._checkLoaded();const M=l.id;if(this.getLayer(M))return void this.fire(new a.j(new Error(`Layer "${M}" already exists on this map.`)));let C;if(l.type==="custom"){if(Fr(this,a.aF(l)))return;C=a.aC(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(M,l.source),l=a.aD(l),l=a.e(l,{source:M})),this._validate(a.y.layer,`layers.${M}`,l,{arrayIndex:-1},b))return;C=a.aC(l),this._validateLayer(C),C.setEventedParent(this,{layer:{id:M}})}const B=m?this._order.indexOf(m):this._order.length;if(m&&B===-1)this.fire(new a.j(new Error(`Cannot add layer "${M}" before non-existing layer "${m}".`)));else{if(this._order.splice(B,0,M),this._layerOrderChanged=!0,this._layers[M]=C,this._removedLayers[M]&&C.source&&C.type!=="custom"){const j=this._removedLayers[M];delete this._removedLayers[M],j.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map)}}moveLayer(l,m){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.j(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===m)return;const b=this._order.indexOf(l);this._order.splice(b,1);const M=m?this._order.indexOf(m):this._order.length;m&&M===-1?this.fire(new a.j(new Error(`Cannot move layer "${l}" before non-existing layer "${m}".`))):(this._order.splice(M,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const m=this._layers[l];if(!m)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${l}".`)));m.setEventedParent(null);const b=this._order.indexOf(l);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=m,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],m.onRemove&&m.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,m,b){this._checkLoaded();const M=this.getLayer(l);M?M.minzoom===m&&M.maxzoom===b||(m!=null&&(M.minzoom=m),b!=null&&(M.maxzoom=b),this._updateLayer(M)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,m,b={}){this._checkLoaded();const M=this.getLayer(l);if(M){if(!a.aG(M.filter,m))return m==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(a.y.filter,`layers.${M.id}.filter`,m,null,b)||(M.filter=a.aD(m),this._updateLayer(M)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.aD(this.getLayer(l).filter)}setLayoutProperty(l,m,b,M={}){this._checkLoaded();const C=this.getLayer(l);C?a.aG(C.getLayoutProperty(m),b)||(C.setLayoutProperty(m,b,M),this._updateLayer(C)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,m){const b=this.getLayer(l);if(b)return b.getLayoutProperty(m);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,m,b,M={}){this._checkLoaded();const C=this.getLayer(l);C?a.aG(C.getPaintProperty(m),b)||(C.setPaintProperty(m,b,M)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new a.j(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,m){return this.getLayer(l).getPaintProperty(m)}setFeatureState(l,m){this._checkLoaded();const b=l.source,M=l.sourceLayer,C=this.sourceCaches[b];if(C===void 0)return void this.fire(new a.j(new Error(`The source '${b}' does not exist in the map's style.`)));const B=C.getSource().type;B==="geojson"&&M?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):B!=="vector"||M?(l.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),C.setFeatureState(M,l.id,m)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,m){this._checkLoaded();const b=l.source,M=this.sourceCaches[b];if(M===void 0)return void this.fire(new a.j(new Error(`The source '${b}' does not exist in the map's style.`)));const C=M.getSource().type,B=C==="vector"?l.sourceLayer:void 0;C!=="vector"||B?m&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(B,l.id,m):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const m=l.source,b=l.sourceLayer,M=this.sourceCaches[m];if(M!==void 0)return M.getSource().type!=="vector"||b?(l.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),M.getFeatureState(b,l.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.aH(this.sourceCaches,(C=>C.serialize())),m=this._serializeByIds(this._order),b=this.map.getTerrain()||void 0,M=this.stylesheet;return a.aI({version:M.version,name:M.name,metadata:M.metadata,light:M.light,center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,sprite:M.sprite,glyphs:M.glyphs,transition:M.transition,sources:l,layers:m,terrain:b},(C=>C!==void 0))}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const m=B=>this._layers[B].type==="fill-extrusion",b={},M=[];for(let B=this._order.length-1;B>=0;B--){const j=this._order[B];if(m(j)){b[j]=B;for(const $ of l){const Y=$[j];if(Y)for(const et of Y)M.push(et)}}}M.sort(((B,j)=>j.intersectionZ-B.intersectionZ));const C=[];for(let B=this._order.length-1;B>=0;B--){const j=this._order[B];if(m(j))for(let $=M.length-1;$>=0;$--){const Y=M[$].feature;if(b[Y.layer.id]<B)break;C.push(Y),M.pop()}else for(const $ of l){const Y=$[j];if(Y)for(const et of Y)C.push(et.feature)}}return C}queryRenderedFeatures(l,m,b){m&&m.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",m.filter,null,m);const M={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const j of m.layers){const $=this._layers[j];if(!$)return this.fire(new a.j(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];M[$.source]=!0}}const C=[];m.availableImages=this._availableImages;const B=this._serializedAllLayers();for(const j in this.sourceCaches)m.layers&&!M[j]||C.push(Ke(this.sourceCaches[j],this._layers,B,l,m,b));return this.placement&&C.push((function(j,$,Y,et,it,pt,At){const Mt={},Ot=pt.queryRenderedSymbols(et),Tt=[];for(const Wt of Object.keys(Ot).map(Number))Tt.push(At[Wt]);Tt.sort(On);for(const Wt of Tt){const oe=Wt.featureIndex.lookupSymbolFeatures(Ot[Wt.bucketInstanceId],$,Wt.bucketIndex,Wt.sourceLayerIndex,it.filter,it.layers,it.availableImages,j);for(const Rt in oe){const Kt=Mt[Rt]=Mt[Rt]||[],ue=oe[Rt];ue.sort(((de,be)=>{const ze=Wt.featureSortOrder;if(ze){const Ae=ze.indexOf(de.featureIndex);return ze.indexOf(be.featureIndex)-Ae}return be.featureIndex-de.featureIndex}));for(const de of ue)Kt.push(de)}}for(const Wt in Mt)Mt[Wt].forEach((oe=>{const Rt=oe.feature,Kt=Y[j[Wt].source].getFeatureState(Rt.layer["source-layer"],Rt.id);Rt.source=Rt.layer.source,Rt.layer["source-layer"]&&(Rt.sourceLayer=Rt.layer["source-layer"]),Rt.state=Kt}));return Mt})(this._layers,B,this.sourceCaches,l,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(l,m){m&&m.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",m.filter,null,m);const b=this.sourceCaches[l];return b?(function(M,C){const B=M.getRenderableIds().map((Y=>M.getTileByID(Y))),j=[],$={};for(let Y=0;Y<B.length;Y++){const et=B[Y],it=et.tileID.canonical.key;$[it]||($[it]=!0,et.querySourceFeatures(j,C))}return j})(b,m):[]}addSourceType(l,m,b){return qe(l)?b(new Error(`A source type called "${l}" already exists.`)):(((M,C)=>{nn[M]=C})(l,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:m.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(l,m={}){this._checkLoaded();const b=this.light.getLight();let M=!1;for(const B in l)if(!a.aG(l[B],b[B])){M=!0;break}if(!M)return;const C={now:a.h.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,m),this.light.updateTransitions(C)}_validate(l,m,b,M,C={}){return(!C||C.validate!==!1)&&Fr(this,l.call(a.y,a.e({key:m,style:this.serialize(),value:b,styleSpec:a.v},M)))}_remove(l=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const m in this._layers)this._layers[m].setEventedParent(null);for(const m in this.sourceCaches){const b=this.sourceCaches[m];b.setEventedParent(null),b.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const m in this.sourceCaches)this.sourceCaches[m].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,m,b,M,C=!1){let B=!1,j=!1;const $={};for(const Y of this._order){const et=this._layers[Y];if(et.type!=="symbol")continue;if(!$[et.source]){const pt=this.sourceCaches[et.source];$[et.source]=pt.getRenderableIds(!0).map((At=>pt.getTileByID(At))).sort(((At,Mt)=>Mt.tileID.overscaledZ-At.tileID.overscaledZ||(At.tileID.isLessThan(Mt.tileID)?-1:1)))}const it=this.crossTileSymbolIndex.addLayer(et,$[et.source],l.center.lng);B=B||it}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((C=C||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.h.now(),l.zoom))&&(this.pauseablePlacement=new Ki(l,this.map.terrain,this._order,C,m,b,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,$),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.h.now()),j=!0),B&&this.pauseablePlacement.placement.setStale()),j||B)for(const Y of this._order){const et=this._layers[Y];et.type==="symbol"&&this.placement.updateLayerOpacities(et,$[et.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.h.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,m,b){this.imageManager.getImages(m.icons,b),this._updateTilesForChangedImages();const M=this.sourceCaches[m.source];M&&M.setDependencies(m.tileID.key,m.type,m.icons)}getGlyphs(l,m,b){this.glyphManager.getGlyphs(m.stacks,b);const M=this.sourceCaches[m.source];M&&M.setDependencies(m.tileID.key,m.type,[""])}getResource(l,m,b){return a.m(m,b)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,m={}){this._checkLoaded(),l&&this._validate(a.y.glyphs,"glyphs",l,null,m)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,m,b={},M){this._checkLoaded();const C=[{id:l,url:m}],B=[...ot(this.stylesheet.sprite),...C];this._validate(a.y.sprite,"sprite",B,null,b)||(this.stylesheet.sprite=B,this._loadSprite(C,!0,M))}removeSprite(l){this._checkLoaded();const m=ot(this.stylesheet.sprite);if(m.find((b=>b.id===l))){if(this._spritesImagesIds[l])for(const b of this._spritesImagesIds[l])this.imageManager.removeImage(b),this._changedImages[b]=!0;m.splice(m.findIndex((b=>b.id===l)),1),this.stylesheet.sprite=m.length>0?m:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return ot(this.stylesheet.sprite)}setSprite(l,m={},b){this._checkLoaded(),l&&this._validate(a.y.sprite,"sprite",l,null,m)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,b):(this._unloadSprite(),b&&b(null)))}}Rn.registerForPluginStateChange=a.aK;var wa=a.Q([{name:"a_pos",type:"Int16",components:2}]),ir="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const mi={prelude:ni(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:ni(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ni(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ni(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ni("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ni(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:ni(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ni("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ni("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ni("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ni(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:ni(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:ni(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:ni(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ni(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ni(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ni(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ni(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ni(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ni(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ni(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ni(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ni(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ni(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ni(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ni(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ni("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ir),terrainDepth:ni("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ir),terrainCoords:ni("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ir)};function ni(E,l){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=l.match(/attribute ([\w]+) ([\w]+)/g),M=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=C?C.concat(M):M,j={};return{fragmentSource:E=E.replace(m,(($,Y,et,it,pt)=>(j[pt]=!0,Y==="define"?`
#ifndef HAS_UNIFORM_u_${pt}
varying ${et} ${it} ${pt};
#else
uniform ${et} ${it} u_${pt};
#endif
`:`
#ifdef HAS_UNIFORM_u_${pt}
    ${et} ${it} ${pt} = u_${pt};
#endif
`))),vertexSource:l=l.replace(m,(($,Y,et,it,pt)=>{const At=it==="float"?"vec2":"vec4",Mt=pt.match(/color/)?"color":At;return j[pt]?Y==="define"?`
#ifndef HAS_UNIFORM_u_${pt}
uniform lowp float u_${pt}_t;
attribute ${et} ${At} a_${pt};
varying ${et} ${it} ${pt};
#else
uniform ${et} ${it} u_${pt};
#endif
`:Mt==="vec4"?`
#ifndef HAS_UNIFORM_u_${pt}
    ${pt} = a_${pt};
#else
    ${et} ${it} ${pt} = u_${pt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pt}
    ${pt} = unpack_mix_${Mt}(a_${pt}, u_${pt}_t);
#else
    ${et} ${it} ${pt} = u_${pt};
#endif
`:Y==="define"?`
#ifndef HAS_UNIFORM_u_${pt}
uniform lowp float u_${pt}_t;
attribute ${et} ${At} a_${pt};
#else
uniform ${et} ${it} u_${pt};
#endif
`:Mt==="vec4"?`
#ifndef HAS_UNIFORM_u_${pt}
    ${et} ${it} ${pt} = a_${pt};
#else
    ${et} ${it} ${pt} = u_${pt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pt}
    ${et} ${it} ${pt} = unpack_mix_${Mt}(a_${pt}, u_${pt}_t);
#else
    ${et} ${it} ${pt} = u_${pt};
#endif
`})),staticAttributes:b,staticUniforms:B}}class Tn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,m,b,M,C,B,j,$,Y){this.context=l;let et=this.boundPaintVertexBuffers.length!==M.length;for(let it=0;!et&&it<M.length;it++)this.boundPaintVertexBuffers[it]!==M[it]&&(et=!0);!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==b||et||this.boundIndexBuffer!==C||this.boundVertexOffset!==B||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==$||this.boundDynamicVertexBuffer3!==Y?this.freshBind(m,b,M,C,B,j,$,Y):(l.bindVertexArray.set(this.vao),j&&j.bind(),C&&C.dynamicDraw&&C.bind(),$&&$.bind(),Y&&Y.bind())}freshBind(l,m,b,M,C,B,j,$){const Y=l.numAttributes,et=this.context,it=et.gl;this.vao&&this.destroy(),this.vao=et.createVertexArray(),et.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=M,this.boundVertexOffset=C,this.boundDynamicVertexBuffer=B,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=$,m.enableAttributes(it,l);for(const pt of b)pt.enableAttributes(it,l);B&&B.enableAttributes(it,l),j&&j.enableAttributes(it,l),$&&$.enableAttributes(it,l),m.bind(),m.setVertexAttribPointers(it,l,C);for(const pt of b)pt.bind(),pt.setVertexAttribPointers(it,l,C);B&&(B.bind(),B.setVertexAttribPointers(it,l,C)),M&&M.bind(),j&&(j.bind(),j.setVertexAttribPointers(it,l,C)),$&&($.bind(),$.setVertexAttribPointers(it,l,C)),et.currentNumAttributes=Y}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function zn(E){const l=[];for(let m=0;m<E.length;m++){if(E[m]===null)continue;const b=E[m].split(" ");l.push(b.pop())}return l}class Co{constructor(l,m,b,M,C,B){const j=l.gl;this.program=j.createProgram();const $=zn(m.staticAttributes),Y=b?b.getBinderAttributes():[],et=$.concat(Y),it=mi.prelude.staticUniforms?zn(mi.prelude.staticUniforms):[],pt=m.staticUniforms?zn(m.staticUniforms):[],At=b?b.getBinderUniforms():[],Mt=it.concat(pt).concat(At),Ot=[];for(const de of Mt)Ot.indexOf(de)<0&&Ot.push(de);const Tt=b?b.defines():[];C&&Tt.push("#define OVERDRAW_INSPECTOR;"),B&&Tt.push("#define TERRAIN3D;");const Wt=Tt.concat(mi.prelude.fragmentSource,m.fragmentSource).join(`
`),oe=Tt.concat(mi.prelude.vertexSource,m.vertexSource).join(`
`),Rt=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Rt,Wt),j.compileShader(Rt),!j.getShaderParameter(Rt,j.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${j.getShaderInfoLog(Rt)}`);j.attachShader(this.program,Rt);const Kt=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Kt,oe),j.compileShader(Kt),!j.getShaderParameter(Kt,j.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${j.getShaderInfoLog(Kt)}`);j.attachShader(this.program,Kt),this.attributes={};const ue={};this.numAttributes=et.length;for(let de=0;de<this.numAttributes;de++)et[de]&&(j.bindAttribLocation(this.program,de,et[de]),this.attributes[et[de]]=de);if(j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw new Error(`Program failed to link: ${j.getProgramInfoLog(this.program)}`);j.deleteShader(Kt),j.deleteShader(Rt);for(let de=0;de<Ot.length;de++){const be=Ot[de];if(be&&!ue[be]){const ze=j.getUniformLocation(this.program,be);ze&&(ue[be]=ze)}}this.fixedUniforms=M(l,ue),this.terrainUniforms=((de,be)=>({u_depth:new a.aL(de,be.u_depth),u_terrain:new a.aL(de,be.u_terrain),u_terrain_dim:new a.aM(de,be.u_terrain_dim),u_terrain_matrix:new a.aN(de,be.u_terrain_matrix),u_terrain_unpack:new a.aO(de,be.u_terrain_unpack),u_terrain_exaggeration:new a.aM(de,be.u_terrain_exaggeration)}))(l,ue),this.binderUniforms=b?b.getUniforms(l,ue):[]}draw(l,m,b,M,C,B,j,$,Y,et,it,pt,At,Mt,Ot,Tt,Wt,oe){const Rt=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(b),l.setStencilMode(M),l.setColorMode(C),l.setCullFace(B),$){l.activeTexture.set(Rt.TEXTURE2),Rt.bindTexture(Rt.TEXTURE_2D,$.depthTexture),l.activeTexture.set(Rt.TEXTURE3),Rt.bindTexture(Rt.TEXTURE_2D,$.texture);for(const ue in this.terrainUniforms)this.terrainUniforms[ue].set($[ue])}for(const ue in this.fixedUniforms)this.fixedUniforms[ue].set(j[ue]);Ot&&Ot.setUniforms(l,this.binderUniforms,At,{zoom:Mt});let Kt=0;switch(m){case Rt.LINES:Kt=2;break;case Rt.TRIANGLES:Kt=3;break;case Rt.LINE_STRIP:Kt=1}for(const ue of pt.get()){const de=ue.vaos||(ue.vaos={});(de[Y]||(de[Y]=new Tn)).bind(l,this,et,Ot?Ot.getPaintVertexBuffers():[],it,ue.vertexOffset,Tt,Wt,oe),Rt.drawElements(m,ue.primitiveLength*Kt,Rt.UNSIGNED_SHORT,ue.primitiveOffset*Kt*2)}}}function Sa(E,l,m){const b=1/Zt(m,1,l.transform.tileZoom),M=Math.pow(2,m.tileID.overscaledZ),C=m.tileSize*Math.pow(2,l.transform.tileZoom)/M,B=C*(m.tileID.canonical.x+m.tileID.wrap*M),j=C*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[b,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[B>>16,j>>16],u_pixel_coord_lower:[65535&B,65535&j]}}const Vi=(E,l,m,b)=>{const M=l.style.light,C=M.properties.get("position"),B=[C.x,C.y,C.z],j=(function(){var Y=new a.A(9);return a.A!=Float32Array&&(Y[1]=0,Y[2]=0,Y[3]=0,Y[5]=0,Y[6]=0,Y[7]=0),Y[0]=1,Y[4]=1,Y[8]=1,Y})();M.properties.get("anchor")==="viewport"&&(function(Y,et){var it=Math.sin(et),pt=Math.cos(et);Y[0]=pt,Y[1]=it,Y[2]=0,Y[3]=-it,Y[4]=pt,Y[5]=0,Y[6]=0,Y[7]=0,Y[8]=1})(j,-l.transform.angle),(function(Y,et,it){var pt=et[0],At=et[1],Mt=et[2];Y[0]=pt*it[0]+At*it[3]+Mt*it[6],Y[1]=pt*it[1]+At*it[4]+Mt*it[7],Y[2]=pt*it[2]+At*it[5]+Mt*it[8]})(B,B,j);const $=M.properties.get("color");return{u_matrix:E,u_lightpos:B,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[$.r,$.g,$.b],u_vertical_gradient:+m,u_opacity:b}},Xs=(E,l,m,b,M,C,B)=>a.e(Vi(E,l,m,b),Sa(C,l,B),{u_height_factor:-Math.pow(2,M.overscaledZ)/B.tileSize/8}),Jl=E=>({u_matrix:E}),As=(E,l,m,b)=>a.e(Jl(E),Sa(m,l,b)),Ai=(E,l)=>({u_matrix:E,u_world:l}),Es=(E,l,m,b,M)=>a.e(As(E,l,m,b),{u_world:M}),Ya=(E,l,m,b)=>{const M=E.transform;let C,B;if(b.paint.get("circle-pitch-alignment")==="map"){const j=Zt(m,1,M.zoom);C=!0,B=[j,j]}else C=!1,B=M.pixelsToGLUnits;return{u_camera_to_center_distance:M.cameraToCenterDistance,u_scale_with_map:+(b.paint.get("circle-pitch-scale")==="map"),u_matrix:E.translatePosMatrix(l.posMatrix,m,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:B}},ds=(E,l,m)=>{const b=Zt(m,1,l.zoom),M=Math.pow(2,l.zoom-m.tileID.overscaledZ),C=m.tileID.overscaleFactor();return{u_matrix:E,u_camera_to_center_distance:l.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[l.pixelsToGLUnits[0]/(b*M),l.pixelsToGLUnits[1]/(b*M)],u_overscale_factor:C}},Tl=(E,l,m=1)=>({u_matrix:E,u_color:l,u_overlay:0,u_overlay_scale:m}),Ml=E=>({u_matrix:E}),pc=(E,l,m,b)=>({u_matrix:E,u_extrude_scale:Zt(l,1,m),u_intensity:b});function Al(E,l){const m=Math.pow(2,l.canonical.z),b=l.canonical.y;return[new a.U(0,b/m).toLngLat().lat,new a.U(0,(b+1)/m).toLngLat().lat]}const tu=(E,l,m,b)=>{const M=E.transform;return{u_matrix:el(E,l,m,b),u_ratio:1/Zt(l,1,M.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},mc=(E,l,m,b,M)=>a.e(tu(E,l,m,M),{u_image:0,u_image_height:b}),eu=(E,l,m,b,M)=>{const C=E.transform,B=Du(l,C);return{u_matrix:el(E,l,m,M),u_texsize:l.imageAtlasTexture.size,u_ratio:1/Zt(l,1,C.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[B,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},Xa=(E,l,m,b,M,C)=>{const B=E.lineAtlas,j=Du(l,E.transform),$=m.layout.get("line-cap")==="round",Y=B.getDash(b.from,$),et=B.getDash(b.to,$),it=Y.width*M.fromScale,pt=et.width*M.toScale;return a.e(tu(E,l,m,C),{u_patternscale_a:[j/it,-Y.height/2],u_patternscale_b:[j/pt,-et.height/2],u_sdfgamma:B.width/(256*Math.min(it,pt)*E.pixelRatio)/2,u_image:0,u_tex_y_a:Y.y,u_tex_y_b:et.y,u_mix:M.t})};function Du(E,l){return 1/Zt(E,1,l.tileZoom)}function el(E,l,m,b){return E.translatePosMatrix(b?b.posMatrix:l.tileID.posMatrix,l,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}const El=(E,l,m,b,M)=>{return{u_matrix:E,u_tl_parent:l,u_scale_parent:m,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*M.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:M.paint.get("raster-brightness-min"),u_brightness_high:M.paint.get("raster-brightness-max"),u_saturation_factor:(B=M.paint.get("raster-saturation"),B>0?1-1/(1.001-B):-B),u_contrast_factor:(C=M.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:Mn(M.paint.get("raster-hue-rotate"))};var C,B};function Mn(E){E*=Math.PI/180;const l=Math.sin(E),m=Math.cos(E);return[(2*m+1)/3,(-Math.sqrt(3)*l-m+1)/3,(Math.sqrt(3)*l-m+1)/3]}const Ka=(E,l,m,b,M,C,B,j,$,Y)=>{const et=M.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:et.cameraToCenterDistance,u_pitch:et.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:et.width/et.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:B,u_coord_matrix:j,u_is_text:+$,u_pitch_with_map:+b,u_texsize:Y,u_texture:0}},gi=(E,l,m,b,M,C,B,j,$,Y,et)=>{const it=M.transform;return a.e(Ka(E,l,m,b,M,C,B,j,$,Y),{u_gamma_scale:b?Math.cos(it._pitch)*it.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},Po=(E,l,m,b,M,C,B,j,$,Y)=>a.e(gi(E,l,m,b,M,C,B,j,!0,$),{u_texsize_icon:Y,u_texture_icon:1}),Ks=(E,l,m)=>({u_matrix:E,u_opacity:l,u_color:m}),rr=(E,l,m,b,M,C)=>a.e((function(B,j,$,Y){const et=$.imageManager.getPattern(B.from.toString()),it=$.imageManager.getPattern(B.to.toString()),{width:pt,height:At}=$.imageManager.getPixelSize(),Mt=Math.pow(2,Y.tileID.overscaledZ),Ot=Y.tileSize*Math.pow(2,$.transform.tileZoom)/Mt,Tt=Ot*(Y.tileID.canonical.x+Y.tileID.wrap*Mt),Wt=Ot*Y.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:et.tl,u_pattern_br_a:et.br,u_pattern_tl_b:it.tl,u_pattern_br_b:it.br,u_texsize:[pt,At],u_mix:j.t,u_pattern_size_a:et.displaySize,u_pattern_size_b:it.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/Zt(Y,1,$.transform.tileZoom),u_pixel_coord_upper:[Tt>>16,Wt>>16],u_pixel_coord_lower:[65535&Tt,65535&Wt]}})(b,C,m,M),{u_matrix:E,u_opacity:l}),nl={fillExtrusion:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_lightpos:new a.aP(E,l.u_lightpos),u_lightintensity:new a.aM(E,l.u_lightintensity),u_lightcolor:new a.aP(E,l.u_lightcolor),u_vertical_gradient:new a.aM(E,l.u_vertical_gradient),u_opacity:new a.aM(E,l.u_opacity)}),fillExtrusionPattern:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_lightpos:new a.aP(E,l.u_lightpos),u_lightintensity:new a.aM(E,l.u_lightintensity),u_lightcolor:new a.aP(E,l.u_lightcolor),u_vertical_gradient:new a.aM(E,l.u_vertical_gradient),u_height_factor:new a.aM(E,l.u_height_factor),u_image:new a.aL(E,l.u_image),u_texsize:new a.aQ(E,l.u_texsize),u_pixel_coord_upper:new a.aQ(E,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(E,l.u_pixel_coord_lower),u_scale:new a.aP(E,l.u_scale),u_fade:new a.aM(E,l.u_fade),u_opacity:new a.aM(E,l.u_opacity)}),fill:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix)}),fillPattern:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_image:new a.aL(E,l.u_image),u_texsize:new a.aQ(E,l.u_texsize),u_pixel_coord_upper:new a.aQ(E,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(E,l.u_pixel_coord_lower),u_scale:new a.aP(E,l.u_scale),u_fade:new a.aM(E,l.u_fade)}),fillOutline:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_world:new a.aQ(E,l.u_world)}),fillOutlinePattern:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_world:new a.aQ(E,l.u_world),u_image:new a.aL(E,l.u_image),u_texsize:new a.aQ(E,l.u_texsize),u_pixel_coord_upper:new a.aQ(E,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(E,l.u_pixel_coord_lower),u_scale:new a.aP(E,l.u_scale),u_fade:new a.aM(E,l.u_fade)}),circle:(E,l)=>({u_camera_to_center_distance:new a.aM(E,l.u_camera_to_center_distance),u_scale_with_map:new a.aL(E,l.u_scale_with_map),u_pitch_with_map:new a.aL(E,l.u_pitch_with_map),u_extrude_scale:new a.aQ(E,l.u_extrude_scale),u_device_pixel_ratio:new a.aM(E,l.u_device_pixel_ratio),u_matrix:new a.aN(E,l.u_matrix)}),collisionBox:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_camera_to_center_distance:new a.aM(E,l.u_camera_to_center_distance),u_pixels_to_tile_units:new a.aM(E,l.u_pixels_to_tile_units),u_extrude_scale:new a.aQ(E,l.u_extrude_scale),u_overscale_factor:new a.aM(E,l.u_overscale_factor)}),collisionCircle:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_inv_matrix:new a.aN(E,l.u_inv_matrix),u_camera_to_center_distance:new a.aM(E,l.u_camera_to_center_distance),u_viewport_size:new a.aQ(E,l.u_viewport_size)}),debug:(E,l)=>({u_color:new a.aR(E,l.u_color),u_matrix:new a.aN(E,l.u_matrix),u_overlay:new a.aL(E,l.u_overlay),u_overlay_scale:new a.aM(E,l.u_overlay_scale)}),clippingMask:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix)}),heatmap:(E,l)=>({u_extrude_scale:new a.aM(E,l.u_extrude_scale),u_intensity:new a.aM(E,l.u_intensity),u_matrix:new a.aN(E,l.u_matrix)}),heatmapTexture:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_world:new a.aQ(E,l.u_world),u_image:new a.aL(E,l.u_image),u_color_ramp:new a.aL(E,l.u_color_ramp),u_opacity:new a.aM(E,l.u_opacity)}),hillshade:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_image:new a.aL(E,l.u_image),u_latrange:new a.aQ(E,l.u_latrange),u_light:new a.aQ(E,l.u_light),u_shadow:new a.aR(E,l.u_shadow),u_highlight:new a.aR(E,l.u_highlight),u_accent:new a.aR(E,l.u_accent)}),hillshadePrepare:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_image:new a.aL(E,l.u_image),u_dimension:new a.aQ(E,l.u_dimension),u_zoom:new a.aM(E,l.u_zoom),u_unpack:new a.aO(E,l.u_unpack)}),line:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_ratio:new a.aM(E,l.u_ratio),u_device_pixel_ratio:new a.aM(E,l.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(E,l.u_units_to_pixels)}),lineGradient:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_ratio:new a.aM(E,l.u_ratio),u_device_pixel_ratio:new a.aM(E,l.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(E,l.u_units_to_pixels),u_image:new a.aL(E,l.u_image),u_image_height:new a.aM(E,l.u_image_height)}),linePattern:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_texsize:new a.aQ(E,l.u_texsize),u_ratio:new a.aM(E,l.u_ratio),u_device_pixel_ratio:new a.aM(E,l.u_device_pixel_ratio),u_image:new a.aL(E,l.u_image),u_units_to_pixels:new a.aQ(E,l.u_units_to_pixels),u_scale:new a.aP(E,l.u_scale),u_fade:new a.aM(E,l.u_fade)}),lineSDF:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_ratio:new a.aM(E,l.u_ratio),u_device_pixel_ratio:new a.aM(E,l.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(E,l.u_units_to_pixels),u_patternscale_a:new a.aQ(E,l.u_patternscale_a),u_patternscale_b:new a.aQ(E,l.u_patternscale_b),u_sdfgamma:new a.aM(E,l.u_sdfgamma),u_image:new a.aL(E,l.u_image),u_tex_y_a:new a.aM(E,l.u_tex_y_a),u_tex_y_b:new a.aM(E,l.u_tex_y_b),u_mix:new a.aM(E,l.u_mix)}),raster:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_tl_parent:new a.aQ(E,l.u_tl_parent),u_scale_parent:new a.aM(E,l.u_scale_parent),u_buffer_scale:new a.aM(E,l.u_buffer_scale),u_fade_t:new a.aM(E,l.u_fade_t),u_opacity:new a.aM(E,l.u_opacity),u_image0:new a.aL(E,l.u_image0),u_image1:new a.aL(E,l.u_image1),u_brightness_low:new a.aM(E,l.u_brightness_low),u_brightness_high:new a.aM(E,l.u_brightness_high),u_saturation_factor:new a.aM(E,l.u_saturation_factor),u_contrast_factor:new a.aM(E,l.u_contrast_factor),u_spin_weights:new a.aP(E,l.u_spin_weights)}),symbolIcon:(E,l)=>({u_is_size_zoom_constant:new a.aL(E,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(E,l.u_is_size_feature_constant),u_size_t:new a.aM(E,l.u_size_t),u_size:new a.aM(E,l.u_size),u_camera_to_center_distance:new a.aM(E,l.u_camera_to_center_distance),u_pitch:new a.aM(E,l.u_pitch),u_rotate_symbol:new a.aL(E,l.u_rotate_symbol),u_aspect_ratio:new a.aM(E,l.u_aspect_ratio),u_fade_change:new a.aM(E,l.u_fade_change),u_matrix:new a.aN(E,l.u_matrix),u_label_plane_matrix:new a.aN(E,l.u_label_plane_matrix),u_coord_matrix:new a.aN(E,l.u_coord_matrix),u_is_text:new a.aL(E,l.u_is_text),u_pitch_with_map:new a.aL(E,l.u_pitch_with_map),u_texsize:new a.aQ(E,l.u_texsize),u_texture:new a.aL(E,l.u_texture)}),symbolSDF:(E,l)=>({u_is_size_zoom_constant:new a.aL(E,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(E,l.u_is_size_feature_constant),u_size_t:new a.aM(E,l.u_size_t),u_size:new a.aM(E,l.u_size),u_camera_to_center_distance:new a.aM(E,l.u_camera_to_center_distance),u_pitch:new a.aM(E,l.u_pitch),u_rotate_symbol:new a.aL(E,l.u_rotate_symbol),u_aspect_ratio:new a.aM(E,l.u_aspect_ratio),u_fade_change:new a.aM(E,l.u_fade_change),u_matrix:new a.aN(E,l.u_matrix),u_label_plane_matrix:new a.aN(E,l.u_label_plane_matrix),u_coord_matrix:new a.aN(E,l.u_coord_matrix),u_is_text:new a.aL(E,l.u_is_text),u_pitch_with_map:new a.aL(E,l.u_pitch_with_map),u_texsize:new a.aQ(E,l.u_texsize),u_texture:new a.aL(E,l.u_texture),u_gamma_scale:new a.aM(E,l.u_gamma_scale),u_device_pixel_ratio:new a.aM(E,l.u_device_pixel_ratio),u_is_halo:new a.aL(E,l.u_is_halo)}),symbolTextAndIcon:(E,l)=>({u_is_size_zoom_constant:new a.aL(E,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(E,l.u_is_size_feature_constant),u_size_t:new a.aM(E,l.u_size_t),u_size:new a.aM(E,l.u_size),u_camera_to_center_distance:new a.aM(E,l.u_camera_to_center_distance),u_pitch:new a.aM(E,l.u_pitch),u_rotate_symbol:new a.aL(E,l.u_rotate_symbol),u_aspect_ratio:new a.aM(E,l.u_aspect_ratio),u_fade_change:new a.aM(E,l.u_fade_change),u_matrix:new a.aN(E,l.u_matrix),u_label_plane_matrix:new a.aN(E,l.u_label_plane_matrix),u_coord_matrix:new a.aN(E,l.u_coord_matrix),u_is_text:new a.aL(E,l.u_is_text),u_pitch_with_map:new a.aL(E,l.u_pitch_with_map),u_texsize:new a.aQ(E,l.u_texsize),u_texsize_icon:new a.aQ(E,l.u_texsize_icon),u_texture:new a.aL(E,l.u_texture),u_texture_icon:new a.aL(E,l.u_texture_icon),u_gamma_scale:new a.aM(E,l.u_gamma_scale),u_device_pixel_ratio:new a.aM(E,l.u_device_pixel_ratio),u_is_halo:new a.aL(E,l.u_is_halo)}),background:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_opacity:new a.aM(E,l.u_opacity),u_color:new a.aR(E,l.u_color)}),backgroundPattern:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_opacity:new a.aM(E,l.u_opacity),u_image:new a.aL(E,l.u_image),u_pattern_tl_a:new a.aQ(E,l.u_pattern_tl_a),u_pattern_br_a:new a.aQ(E,l.u_pattern_br_a),u_pattern_tl_b:new a.aQ(E,l.u_pattern_tl_b),u_pattern_br_b:new a.aQ(E,l.u_pattern_br_b),u_texsize:new a.aQ(E,l.u_texsize),u_mix:new a.aM(E,l.u_mix),u_pattern_size_a:new a.aQ(E,l.u_pattern_size_a),u_pattern_size_b:new a.aQ(E,l.u_pattern_size_b),u_scale_a:new a.aM(E,l.u_scale_a),u_scale_b:new a.aM(E,l.u_scale_b),u_pixel_coord_upper:new a.aQ(E,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(E,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aM(E,l.u_tile_units_to_pixels)}),terrain:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_texture:new a.aL(E,l.u_texture),u_ele_delta:new a.aM(E,l.u_ele_delta)}),terrainDepth:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_ele_delta:new a.aM(E,l.u_ele_delta)}),terrainCoords:(E,l)=>({u_matrix:new a.aN(E,l.u_matrix),u_texture:new a.aL(E,l.u_texture),u_terrain_coords_id:new a.aM(E,l.u_terrain_coords_id),u_ele_delta:new a.aM(E,l.u_ele_delta)})};class La{constructor(l,m,b){this.context=l;const M=l.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const m=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ia={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Qs{constructor(l,m,b,M){this.length=m.length,this.attributes=b,this.itemSize=m.bytesPerElement,this.dynamicDraw=M,this.context=l;const C=l.gl;this.buffer=C.createBuffer(),l.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,m){for(let b=0;b<this.attributes.length;b++){const M=m.attributes[this.attributes[b].name];M!==void 0&&l.enableVertexAttribArray(M)}}setVertexAttribPointers(l,m,b){for(let M=0;M<this.attributes.length;M++){const C=this.attributes[M],B=m.attributes[C.name];B!==void 0&&l.vertexAttribPointer(B,C.components,l[Ia[C.type]],!1,this.itemSize,C.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const $i=new WeakMap;function Ta(E){var l;if($i.has(E))return $i.get(E);{const m=(l=E.getParameter(E.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return $i.set(E,m),m}}class Bn{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class il extends Bn{getDefault(){return a.aT.transparent}set(l){const m=this.current;(l.r!==m.r||l.g!==m.g||l.b!==m.b||l.a!==m.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Ra extends Bn{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Oi extends Bn{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Cs extends Bn{getDefault(){return[!0,!0,!0,!0]}set(l){const m=this.current;(l[0]!==m[0]||l[1]!==m[1]||l[2]!==m[2]||l[3]!==m[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Cl extends Bn{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class ko extends Bn{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Jn extends Bn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const m=this.current;(l.func!==m.func||l.ref!==m.ref||l.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class zu extends Bn{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const m=this.current;(l[0]!==m[0]||l[1]!==m[1]||l[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class ra extends Bn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;l?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=l,this.dirty=!1}}class Ps extends Bn{getDefault(){return[0,1]}set(l){const m=this.current;(l[0]!==m[0]||l[1]!==m[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Pl extends Bn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;l?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=l,this.dirty=!1}}class Lu extends Bn{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class gc extends Bn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;l?m.enable(m.BLEND):m.disable(m.BLEND),this.current=l,this.dirty=!1}}class Kh extends Bn{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const m=this.current;(l[0]!==m[0]||l[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class kl extends Bn{getDefault(){return a.aT.transparent}set(l){const m=this.current;(l.r!==m.r||l.g!==m.g||l.b!==m.b||l.a!==m.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Gc extends Bn{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Hf extends Bn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;l?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=l,this.dirty=!1}}class Wc extends Bn{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Zf extends Bn{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class Js extends Bn{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class Gf extends Bn{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Iu extends Bn{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const m=this.current;(l[0]!==m[0]||l[1]!==m[1]||l[2]!==m[2]||l[3]!==m[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class ks extends Bn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class yc extends Bn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class _c extends Bn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class rl extends Bn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class vc extends Bn{getDefault(){return null}set(l){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Yc extends Bn{getDefault(){return null}set(l){var m;if(l===this.current&&!this.dirty)return;const b=this.gl;Ta(b)?b.bindVertexArray(l):(m=b.getExtension("OES_vertex_array_object"))===null||m===void 0||m.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class xc extends Bn{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Ol extends Bn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Xc extends Bn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class to extends Bn{constructor(l,m){super(l),this.context=l,this.parent=m}getDefault(){return null}}class nu extends to{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Kc extends to{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class bc extends to{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class ti{constructor(l,m,b,M,C){this.context=l,this.width=m,this.height=b;const B=l.gl,j=this.framebuffer=B.createFramebuffer();if(this.colorAttachment=new nu(l,j),M)this.depthAttachment=C?new bc(l,j):new Kc(l,j);else if(C)throw new Error("Stencil cannot be setted without depth");if(B.checkFramebufferStatus(B.FRAMEBUFFER)!==B.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const l=this.context.gl,m=this.colorAttachment.get();if(m&&l.deleteTexture(m),this.depthAttachment){const b=this.depthAttachment.get();b&&l.deleteRenderbuffer(b)}l.deleteFramebuffer(this.framebuffer)}}class yi{constructor(l,m,b){this.blendFunction=l,this.blendColor=m,this.mask=b}}yi.Replace=[1,0],yi.disabled=new yi(yi.Replace,a.aT.transparent,[!1,!1,!1,!1]),yi.unblended=new yi(yi.Replace,a.aT.transparent,[!0,!0,!0,!0]),yi.alphaBlended=new yi([1,771],a.aT.transparent,[!0,!0,!0,!0]);class Wf{constructor(l){var m,b;if(this.gl=l,this.clearColor=new il(this),this.clearDepth=new Ra(this),this.clearStencil=new Oi(this),this.colorMask=new Cs(this),this.depthMask=new Cl(this),this.stencilMask=new ko(this),this.stencilFunc=new Jn(this),this.stencilOp=new zu(this),this.stencilTest=new ra(this),this.depthRange=new Ps(this),this.depthTest=new Pl(this),this.depthFunc=new Lu(this),this.blend=new gc(this),this.blendFunc=new Kh(this),this.blendColor=new kl(this),this.blendEquation=new Gc(this),this.cullFace=new Hf(this),this.cullFaceSide=new Wc(this),this.frontFace=new Zf(this),this.program=new Js(this),this.activeTexture=new Gf(this),this.viewport=new Iu(this),this.bindFramebuffer=new ks(this),this.bindRenderbuffer=new yc(this),this.bindTexture=new _c(this),this.bindVertexBuffer=new rl(this),this.bindElementBuffer=new vc(this),this.bindVertexArray=new Yc(this),this.pixelStoreUnpack=new xc(this),this.pixelStoreUnpackPremultiplyAlpha=new Ol(this),this.pixelStoreUnpackFlipY=new Xc(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),Ta(l)){this.HALF_FLOAT=l.HALF_FLOAT;const M=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(m=l.RGBA16F)!==null&&m!==void 0?m:M?.RGBA16F_EXT,this.RGB16F=(b=l.RGB16F)!==null&&b!==void 0?b:M?.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const M=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=M?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,m){return new La(this,l,m)}createVertexBuffer(l,m,b){return new Qs(this,l,m,b)}createRenderbuffer(l,m,b){const M=this.gl,C=M.createRenderbuffer();return this.bindRenderbuffer.set(C),M.renderbufferStorage(M.RENDERBUFFER,l,m,b),this.bindRenderbuffer.set(null),C}createFramebuffer(l,m,b,M){return new ti(this,l,m,b,M)}clear({color:l,depth:m,stencil:b}){const M=this.gl;let C=0;l&&(C|=M.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(C|=M.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),b!==void 0&&(C|=M.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),M.clear(C)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.aG(l.blendFunction,yi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return Ta(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var m;return Ta(this.gl)?this.gl.deleteVertexArray(l):(m=this.gl.getExtension("OES_vertex_array_object"))===null||m===void 0?void 0:m.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}class Nn{constructor(l,m,b){this.func=l,this.mask=m,this.range=b}}Nn.ReadOnly=!1,Nn.ReadWrite=!0,Nn.disabled=new Nn(519,Nn.ReadOnly,[0,1]);const Ur=7680;class Di{constructor(l,m,b,M,C,B){this.test=l,this.ref=m,this.mask=b,this.fail=M,this.depthFail=C,this.pass=B}}Di.disabled=new Di({func:519,mask:0},0,0,Ur,Ur,Ur);class _i{constructor(l,m,b){this.enable=l,this.mode=m,this.frontFace=b}}let Ru;function Bu(E,l,m,b,M,C,B){const j=E.context,$=j.gl,Y=E.useProgram("collisionBox"),et=[];let it=0,pt=0;for(let Rt=0;Rt<b.length;Rt++){const Kt=b[Rt],ue=l.getTile(Kt),de=ue.getBucket(m);if(!de)continue;let be=Kt.posMatrix;M[0]===0&&M[1]===0||(be=E.translatePosMatrix(Kt.posMatrix,ue,M,C));const ze=B?de.textCollisionBox:de.iconCollisionBox,Ae=de.collisionCircleArray;if(Ae.length>0){const Ne=a.Z(),sn=be;a.aU(Ne,de.placementInvProjMatrix,E.transform.glCoordMatrix),a.aU(Ne,Ne,de.placementViewportMatrix),et.push({circleArray:Ae,circleOffset:pt,transform:sn,invTransform:Ne,coord:Kt}),it+=Ae.length/4,pt=it}ze&&Y.draw(j,$.LINES,Nn.disabled,Di.disabled,E.colorModeForRenderPass(),_i.disabled,ds(be,E.transform,ue),E.style.map.terrain&&E.style.map.terrain.getTerrainData(Kt),m.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,null,E.transform.zoom,null,null,ze.collisionVertexBuffer)}if(!B||!et.length)return;const At=E.useProgram("collisionCircle"),Mt=new a.aV;Mt.resize(4*it),Mt._trim();let Ot=0;for(const Rt of et)for(let Kt=0;Kt<Rt.circleArray.length/4;Kt++){const ue=4*Kt,de=Rt.circleArray[ue+0],be=Rt.circleArray[ue+1],ze=Rt.circleArray[ue+2],Ae=Rt.circleArray[ue+3];Mt.emplace(Ot++,de,be,ze,Ae,0),Mt.emplace(Ot++,de,be,ze,Ae,1),Mt.emplace(Ot++,de,be,ze,Ae,2),Mt.emplace(Ot++,de,be,ze,Ae,3)}(!Ru||Ru.length<2*it)&&(Ru=(function(Rt){const Kt=2*Rt,ue=new a.aX;ue.resize(Kt),ue._trim();for(let de=0;de<Kt;de++){const be=6*de;ue.uint16[be+0]=4*de+0,ue.uint16[be+1]=4*de+1,ue.uint16[be+2]=4*de+2,ue.uint16[be+3]=4*de+2,ue.uint16[be+4]=4*de+3,ue.uint16[be+5]=4*de+0}return ue})(it));const Tt=j.createIndexBuffer(Ru,!0),Wt=j.createVertexBuffer(Mt,a.aW.members,!0);for(const Rt of et){const Kt={u_matrix:Rt.transform,u_inv_matrix:Rt.invTransform,u_camera_to_center_distance:(oe=E.transform).cameraToCenterDistance,u_viewport_size:[oe.width,oe.height]};At.draw(j,$.TRIANGLES,Nn.disabled,Di.disabled,E.colorModeForRenderPass(),_i.disabled,Kt,E.style.map.terrain&&E.style.map.terrain.getTerrainData(Rt.coord),m.id,Wt,Tt,a.S.simpleSegment(0,2*Rt.circleOffset,Rt.circleArray.length,Rt.circleArray.length/2),null,E.transform.zoom,null,null,null)}var oe;Wt.destroy(),Tt.destroy()}_i.disabled=new _i(!1,1029,2305),_i.backCCW=new _i(!0,1029,2305);const iu=a.ao(new Float32Array(16));function Nu(E,l,m,b,M,C){const{horizontalAlign:B,verticalAlign:j}=a.au(E);return new a.P((-(B-.5)*l/M+b[0])*C,(-(j-.5)*m/M+b[1])*C)}function ju(E,l,m,b,M,C,B,j,$,Y,et){const it=E.text.placedSymbolArray,pt=E.text.dynamicLayoutVertexArray,At=E.icon.dynamicLayoutVertexArray,Mt={};pt.clear();for(let Ot=0;Ot<it.length;Ot++){const Tt=it.get(Ot),Wt=Tt.hidden||!Tt.crossTileID||E.allowVerticalPlacement&&!Tt.placedOrientation?null:b[Tt.crossTileID];if(Wt){const oe=new a.P(Tt.anchorX,Tt.anchorY),Rt=Un(oe,m?B:C,et),Kt=va(M.cameraToCenterDistance,Rt.signedDistanceFromCamera);let ue=a.aj(E.textSizeData,$,Tt)*Kt/a.ap;m&&(ue*=E.tilePixelRatio/j);const{width:de,height:be,anchor:ze,textOffset:Ae,textBoxScale:Ne}=Wt,sn=Nu(ze,de,be,Ae,Ne,ue),qn=m?Un(oe.add(sn),C,et).point:Rt.point.add(l?sn.rotate(-M.angle):sn),Ve=E.allowVerticalPlacement&&Tt.placedOrientation===a.ai.vertical?Math.PI/2:0;for(let fn=0;fn<Tt.numGlyphs;fn++)a.ak(pt,qn,Ve);Y&&Tt.associatedIconIndex>=0&&(Mt[Tt.associatedIconIndex]={shiftedAnchor:qn,angle:Ve})}else bt(Tt.numGlyphs,pt)}if(Y){At.clear();const Ot=E.icon.placedSymbolArray;for(let Tt=0;Tt<Ot.length;Tt++){const Wt=Ot.get(Tt);if(Wt.hidden)bt(Wt.numGlyphs,At);else{const oe=Mt[Tt];if(oe)for(let Rt=0;Rt<Wt.numGlyphs;Rt++)a.ak(At,oe.shiftedAnchor,oe.angle);else bt(Wt.numGlyphs,At)}}E.icon.dynamicLayoutVertexBuffer.updateData(At)}E.text.dynamicLayoutVertexBuffer.updateData(pt)}function Fu(E,l,m){return m.iconsInText&&l?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function Oo(E,l,m,b,M,C,B,j,$,Y,et,it){const pt=E.context,At=pt.gl,Mt=E.transform,Ot=j==="map",Tt=$==="map",Wt=j!=="viewport"&&m.layout.get("symbol-placement")!=="point",oe=Ot&&!Tt&&!Wt,Rt=!m.layout.get("symbol-sort-key").isConstant();let Kt=!1;const ue=E.depthModeForSublayer(0,Nn.ReadOnly),de=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),be=[];for(const ze of b){const Ae=l.getTile(ze),Ne=Ae.getBucket(m);if(!Ne)continue;const sn=M?Ne.text:Ne.icon;if(!sn||!sn.segments.get().length||!sn.hasVisibleVertices)continue;const qn=sn.programConfigurations.get(m.id),Ve=M||Ne.sdfIcons,fn=M?Ne.textSizeData:Ne.iconSizeData,on=Tt||Mt.pitch!==0,Mi=E.useProgram(Fu(Ve,M,Ne),qn),Ln=a.ah(fn,Mt.zoom),Cn=E.style.map.terrain&&E.style.map.terrain.getTerrainData(ze);let Fn,Gi,Ei,oa,Ji=[0,0],br=null;if(M)Gi=Ae.glyphAtlasTexture,Ei=At.LINEAR,Fn=Ae.glyphAtlasTexture.size,Ne.iconsInText&&(Ji=Ae.imageAtlasTexture.size,br=Ae.imageAtlasTexture,oa=on||E.options.rotating||E.options.zooming||fn.kind==="composite"||fn.kind==="camera"?At.LINEAR:At.NEAREST);else{const dr=m.layout.get("icon-size").constantOr(0)!==1||Ne.iconsNeedLinear;Gi=Ae.imageAtlasTexture,Ei=Ve||E.options.rotating||E.options.zooming||dr||on?At.LINEAR:At.NEAREST,Fn=Ae.imageAtlasTexture.size}const $r=Zt(Ae,1,E.transform.zoom),Bi=Be(ze.posMatrix,Tt,Ot,E.transform,$r),co=hr(ze.posMatrix,Tt,Ot,E.transform,$r),Aa=de&&Ne.hasTextData(),ns=m.layout.get("icon-text-fit")!=="none"&&Aa&&Ne.hasIconData();if(Wt){const dr=E.style.map.terrain?(Ea,pr)=>E.style.map.terrain.getElevation(ze,Ea,pr):null,ar=m.layout.get("text-rotation-alignment")==="map";Fe(Ne,ze.posMatrix,E,M,Bi,co,Tt,Y,ar,dr)}const $o=E.translatePosMatrix(ze.posMatrix,Ae,C,B),cu=Wt||M&&de||ns?iu:Bi,la=E.translatePosMatrix(co,Ae,C,B,!0),kr=Ve&&m.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Kr;Kr=Ve?Ne.iconsInText?Po(fn.kind,Ln,oe,Tt,E,$o,cu,la,Fn,Ji):gi(fn.kind,Ln,oe,Tt,E,$o,cu,la,M,Fn):Ka(fn.kind,Ln,oe,Tt,E,$o,cu,la,M,Fn);const hu={program:Mi,buffers:sn,uniformValues:Kr,atlasTexture:Gi,atlasTextureIcon:br,atlasInterpolation:Ei,atlasInterpolationIcon:oa,isSDF:Ve,hasHalo:kr};if(Rt&&Ne.canOverlap){Kt=!0;const dr=sn.segments.get();for(const ar of dr)be.push({segments:new a.S([ar]),sortKey:ar.sortKey,state:hu,terrainData:Cn})}else be.push({segments:sn.segments,sortKey:0,state:hu,terrainData:Cn})}Kt&&be.sort(((ze,Ae)=>ze.sortKey-Ae.sortKey));for(const ze of be){const Ae=ze.state;if(pt.activeTexture.set(At.TEXTURE0),Ae.atlasTexture.bind(Ae.atlasInterpolation,At.CLAMP_TO_EDGE),Ae.atlasTextureIcon&&(pt.activeTexture.set(At.TEXTURE1),Ae.atlasTextureIcon&&Ae.atlasTextureIcon.bind(Ae.atlasInterpolationIcon,At.CLAMP_TO_EDGE)),Ae.isSDF){const Ne=Ae.uniformValues;Ae.hasHalo&&(Ne.u_is_halo=1,Qa(Ae.buffers,ze.segments,m,E,Ae.program,ue,et,it,Ne,ze.terrainData)),Ne.u_is_halo=0}Qa(Ae.buffers,ze.segments,m,E,Ae.program,ue,et,it,Ae.uniformValues,ze.terrainData)}}function Qa(E,l,m,b,M,C,B,j,$,Y){const et=b.context;M.draw(et,et.gl.TRIANGLES,C,B,j,_i.disabled,$,Y,m.id,E.layoutVertexBuffer,E.indexBuffer,l,m.paint,b.transform.zoom,E.programConfigurations.get(m.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function eo(E,l,m,b,M){if(!m||!b||!b.imageAtlas)return;const C=b.imageAtlas.patternPositions;let B=C[m.to.toString()],j=C[m.from.toString()];if(!B&&j&&(B=j),!j&&B&&(j=B),!B||!j){const $=M.getPaintProperty(l);B=C[$],j=C[$]}B&&j&&E.setConstantPatternPositions(B,j)}function Uu(E,l,m,b,M,C,B){const j=E.context.gl,$="fill-pattern",Y=m.paint.get($),et=Y&&Y.constantOr(1),it=m.getCrossfadeParameters();let pt,At,Mt,Ot,Tt;B?(At=et&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pt=j.LINES):(At=et?"fillPattern":"fill",pt=j.TRIANGLES);const Wt=Y.constantOr(null);for(const oe of b){const Rt=l.getTile(oe);if(et&&!Rt.patternsLoaded())continue;const Kt=Rt.getBucket(m);if(!Kt)continue;const ue=Kt.programConfigurations.get(m.id),de=E.useProgram(At,ue),be=E.style.map.terrain&&E.style.map.terrain.getTerrainData(oe);et&&(E.context.activeTexture.set(j.TEXTURE0),Rt.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),ue.updatePaintBuffers(it)),eo(ue,$,Wt,Rt,m);const ze=be?oe:null,Ae=E.translatePosMatrix(ze?ze.posMatrix:oe.posMatrix,Rt,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(B){Ot=Kt.indexBuffer2,Tt=Kt.segments2;const Ne=[j.drawingBufferWidth,j.drawingBufferHeight];Mt=At==="fillOutlinePattern"&&et?Es(Ae,E,it,Rt,Ne):Ai(Ae,Ne)}else Ot=Kt.indexBuffer,Tt=Kt.segments,Mt=et?As(Ae,E,it,Rt):Jl(Ae);de.draw(E.context,pt,M,E.stencilModeForClipping(oe),C,_i.disabled,Mt,be,m.id,Kt.layoutVertexBuffer,Ot,Tt,m.paint,E.transform.zoom,ue)}}function Ba(E,l,m,b,M,C,B){const j=E.context,$=j.gl,Y="fill-extrusion-pattern",et=m.paint.get(Y),it=et.constantOr(1),pt=m.getCrossfadeParameters(),At=m.paint.get("fill-extrusion-opacity"),Mt=et.constantOr(null);for(const Ot of b){const Tt=l.getTile(Ot),Wt=Tt.getBucket(m);if(!Wt)continue;const oe=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ot),Rt=Wt.programConfigurations.get(m.id),Kt=E.useProgram(it?"fillExtrusionPattern":"fillExtrusion",Rt);it&&(E.context.activeTexture.set($.TEXTURE0),Tt.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),Rt.updatePaintBuffers(pt)),eo(Rt,Y,Mt,Tt,m);const ue=E.translatePosMatrix(Ot.posMatrix,Tt,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),de=m.paint.get("fill-extrusion-vertical-gradient"),be=it?Xs(ue,E,de,At,Ot,pt,Tt):Vi(ue,E,de,At);Kt.draw(j,j.gl.TRIANGLES,M,C,B,_i.backCCW,be,oe,m.id,Wt.layoutVertexBuffer,Wt.indexBuffer,Wt.segments,m.paint,E.transform.zoom,Rt,E.style.map.terrain&&Wt.centroidVertexBuffer)}}function Qh(E,l,m,b,M,C,B){const j=E.context,$=j.gl,Y=m.fbo;if(!Y)return;const et=E.useProgram("hillshade"),it=E.style.map.terrain&&E.style.map.terrain.getTerrainData(l);j.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,Y.colorAttachment.get()),et.draw(j,$.TRIANGLES,M,C,B,_i.disabled,((pt,At,Mt,Ot)=>{const Tt=Mt.paint.get("hillshade-shadow-color"),Wt=Mt.paint.get("hillshade-highlight-color"),oe=Mt.paint.get("hillshade-accent-color");let Rt=Mt.paint.get("hillshade-illumination-direction")*(Math.PI/180);Mt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Rt-=pt.transform.angle);const Kt=!pt.options.moving;return{u_matrix:Ot?Ot.posMatrix:pt.transform.calculatePosMatrix(At.tileID.toUnwrapped(),Kt),u_image:0,u_latrange:Al(0,At.tileID),u_light:[Mt.paint.get("hillshade-exaggeration"),Rt],u_shadow:Tt,u_highlight:Wt,u_accent:oe}})(E,m,b,it?l:null),it,b.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}function ps(E,l,m,b,M,C){const B=E.context,j=B.gl,$=l.dem;if($&&$.data){const Y=$.dim,et=$.stride,it=$.getPixels();if(B.activeTexture.set(j.TEXTURE1),B.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||E.getTileTexture(et),l.demTexture){const At=l.demTexture;At.update(it,{premultiply:!1}),At.bind(j.NEAREST,j.CLAMP_TO_EDGE)}else l.demTexture=new xt(B,it,j.RGBA,{premultiply:!1}),l.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);B.activeTexture.set(j.TEXTURE0);let pt=l.fbo;if(!pt){const At=new xt(B,{width:Y,height:Y,data:null},j.RGBA);At.bind(j.LINEAR,j.CLAMP_TO_EDGE),pt=l.fbo=B.createFramebuffer(Y,Y,!0,!1),pt.colorAttachment.set(At.texture)}B.bindFramebuffer.set(pt.framebuffer),B.viewport.set([0,0,Y,Y]),E.useProgram("hillshadePrepare").draw(B,j.TRIANGLES,b,M,C,_i.disabled,((At,Mt)=>{const Ot=Mt.stride,Tt=a.Z();return a.aS(Tt,0,a.N,-a.N,0,0,1),a.$(Tt,Tt,[0,-a.N,0]),{u_matrix:Tt,u_image:1,u_dimension:[Ot,Ot],u_zoom:At.overscaledZ,u_unpack:Mt.getUnpackVector()}})(l.tileID,$),null,m.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function Vu(E,l,m,b,M,C){const B=b.paint.get("raster-fade-duration");if(!C&&B>0){const j=a.h.now(),$=(j-E.timeAdded)/B,Y=l?(j-l.timeAdded)/B:-1,et=m.getSource(),it=M.coveringZoomLevel({tileSize:et.tileSize,roundZoom:et.roundZoom}),pt=!l||Math.abs(l.tileID.overscaledZ-it)>Math.abs(E.tileID.overscaledZ-it),At=pt&&E.refreshedUponExpiration?1:a.ad(pt?$:1-Y,0,1);return E.refreshedUponExpiration&&$>=1&&(E.refreshedUponExpiration=!1),l?{opacity:1,mix:1-At}:{opacity:At,mix:0}}return{opacity:1,mix:0}}const ru=new a.aT(1,0,0,1),al=new a.aT(0,1,0,1),Dl=new a.aT(0,0,1,1),Qc=new a.aT(1,0,1,1),Os=new a.aT(0,1,1,1);function no(E,l,m,b){zl(E,0,l+m/2,E.transform.width,m,b)}function $u(E,l,m,b){zl(E,l-m/2,0,m,E.transform.height,b)}function zl(E,l,m,b,M,C){const B=E.context,j=B.gl;j.enable(j.SCISSOR_TEST),j.scissor(l*E.pixelRatio,m*E.pixelRatio,b*E.pixelRatio,M*E.pixelRatio),B.clear({color:C}),j.disable(j.SCISSOR_TEST)}function Jc(E,l,m){const b=E.context,M=b.gl,C=m.posMatrix,B=E.useProgram("debug"),j=Nn.disabled,$=Di.disabled,Y=E.colorModeForRenderPass(),et="$debug",it=E.style.map.terrain&&E.style.map.terrain.getTerrainData(m);b.activeTexture.set(M.TEXTURE0);const pt=l.getTileByID(m.key).latestRawTileData,At=Math.floor((pt&&pt.byteLength||0)/1024),Mt=l.getTile(m).tileSize,Ot=512/Math.min(Mt,512)*(m.overscaledZ/E.transform.zoom)*.5;let Tt=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(Tt+=` => ${m.overscaledZ}`),(function(Wt,oe){Wt.initDebugOverlayCanvas();const Rt=Wt.debugOverlayCanvas,Kt=Wt.context.gl,ue=Wt.debugOverlayCanvas.getContext("2d");ue.clearRect(0,0,Rt.width,Rt.height),ue.shadowColor="white",ue.shadowBlur=2,ue.lineWidth=1.5,ue.strokeStyle="white",ue.textBaseline="top",ue.font="bold 36px Open Sans, sans-serif",ue.fillText(oe,5,5),ue.strokeText(oe,5,5),Wt.debugOverlayTexture.update(Rt),Wt.debugOverlayTexture.bind(Kt.LINEAR,Kt.CLAMP_TO_EDGE)})(E,`${Tt} ${At}kB`),B.draw(b,M.TRIANGLES,j,$,yi.alphaBlended,_i.disabled,Tl(C,a.aT.transparent,Ot),null,et,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),B.draw(b,M.LINE_STRIP,j,$,Y,_i.disabled,Tl(C,a.aT.red),it,et,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function ui(E,l,m){const b=E.context,M=b.gl,C=E.colorModeForRenderPass(),B=new Nn(M.LEQUAL,Nn.ReadWrite,E.depthRangeFor3D),j=E.useProgram("terrain"),$=l.getTerrainMesh();b.bindFramebuffer.set(null),b.viewport.set([0,0,E.width,E.height]);for(const Y of m){const et=E.renderToTexture.getTexture(Y),it=l.getTerrainData(Y.tileID);b.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,et.texture);const pt={u_matrix:E.transform.calculatePosMatrix(Y.tileID.toUnwrapped()),u_texture:0,u_ele_delta:l.getMeshFrameDelta(E.transform.zoom)};j.draw(b,M.TRIANGLES,B,Di.disabled,C,_i.backCCW,pt,it,"terrain",$.vertexBuffer,$.indexBuffer,$.segments)}}class Ll{constructor(l,m){this.context=new Wf(l),this.transform=m,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.Z(),renderTime:0},this.setup(),this.numSublayers=ki.maxUnderzooming+ki.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new tl}resize(l,m,b){if(this.width=Math.floor(l*b),this.height=Math.floor(m*b),this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const l=this.context,m=new a.a_;m.emplaceBack(0,0),m.emplaceBack(a.N,0),m.emplaceBack(0,a.N),m.emplaceBack(a.N,a.N),this.tileExtentBuffer=l.createVertexBuffer(m,wa.members),this.tileExtentSegments=a.S.simpleSegment(0,0,4,2);const b=new a.a_;b.emplaceBack(0,0),b.emplaceBack(a.N,0),b.emplaceBack(0,a.N),b.emplaceBack(a.N,a.N),this.debugBuffer=l.createVertexBuffer(b,wa.members),this.debugSegments=a.S.simpleSegment(0,0,4,5);const M=new a.V;M.emplaceBack(0,0,0,0),M.emplaceBack(a.N,0,a.N,0),M.emplaceBack(0,a.N,0,a.N),M.emplaceBack(a.N,a.N,a.N,a.N),this.rasterBoundsBuffer=l.createVertexBuffer(M,Gt.members),this.rasterBoundsSegments=a.S.simpleSegment(0,0,4,2);const C=new a.a_;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(C,wa.members),this.viewportSegments=a.S.simpleSegment(0,0,4,2);const B=new a.a$;B.emplaceBack(0),B.emplaceBack(1),B.emplaceBack(3),B.emplaceBack(2),B.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(B);const j=new a.b0;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(j);const $=this.context.gl;this.stencilClearMode=new Di({func:$.ALWAYS,mask:0},0,255,$.ZERO,$.ZERO,$.ZERO)}clearStencil(){const l=this.context,m=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=a.Z();a.aS(b,0,this.width,this.height,0,0,1),a.a0(b,b,[m.drawingBufferWidth,m.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,m.TRIANGLES,Nn.disabled,this.stencilClearMode,yi.disabled,_i.disabled,Ml(b),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,m){if(this.currentStencilSource===l.source||!l.isTileClipped()||!m||!m.length)return;this.currentStencilSource=l.source;const b=this.context,M=b.gl;this.nextStencilID+m.length>256&&this.clearStencil(),b.setColorMode(yi.disabled),b.setDepthMode(Nn.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const B of m){const j=this._tileClippingMaskIDs[B.key]=this.nextStencilID++,$=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B);C.draw(b,M.TRIANGLES,Nn.disabled,new Di({func:M.ALWAYS,mask:0},j,255,M.KEEP,M.KEEP,M.REPLACE),yi.disabled,_i.disabled,Ml(B.posMatrix),$,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,m=this.context.gl;return new Di({func:m.NOTEQUAL,mask:255},l,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(l){const m=this.context.gl;return new Di({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(l){const m=this.context.gl,b=l.sort(((B,j)=>j.overscaledZ-B.overscaledZ)),M=b[b.length-1].overscaledZ,C=b[0].overscaledZ-M+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const B={};for(let j=0;j<C;j++)B[j+M]=new Di({func:m.GEQUAL,mask:255},j+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=C,[B,b]}return[{[M]:Di.disabled},b]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new yi([l.CONSTANT_COLOR,l.ONE],new a.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?yi.unblended:yi.alphaBlended}depthModeForSublayer(l,m,b){if(!this.opaquePassEnabledForLayer())return Nn.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Nn(b||this.context.gl.LEQUAL,m,[M,M])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,m){this.style=l,this.options=m,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(a.h.now()),this.imageManager.beginFrame();const b=this.style._order,M=this.style.sourceCaches,C={},B={},j={};for(const $ in M){const Y=M[$];Y.used&&Y.prepare(this.context),C[$]=Y.getVisibleCoordinates(),B[$]=C[$].slice().reverse(),j[$]=Y.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $=0;$<b.length;$++)if(this.style._layers[b[$]].is3D()){this.opaquePassCutoff=$;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const $=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||$.length)&&(a.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(Y,et){const it=Y.context,pt=it.gl,At=yi.unblended,Mt=new Nn(pt.LEQUAL,Nn.ReadWrite,[0,1]),Ot=et.getTerrainMesh(),Tt=et.sourceCache.getRenderableTiles(),Wt=Y.useProgram("terrainDepth");it.bindFramebuffer.set(et.getFramebuffer("depth").framebuffer),it.viewport.set([0,0,Y.width/devicePixelRatio,Y.height/devicePixelRatio]),it.clear({color:a.aT.transparent,depth:1});for(const oe of Tt){const Rt=et.getTerrainData(oe.tileID),Kt={u_matrix:Y.transform.calculatePosMatrix(oe.tileID.toUnwrapped()),u_ele_delta:et.getMeshFrameDelta(Y.transform.zoom)};Wt.draw(it,pt.TRIANGLES,Mt,Di.disabled,At,_i.backCCW,Kt,Rt,"terrain",Ot.vertexBuffer,Ot.indexBuffer,Ot.segments)}it.bindFramebuffer.set(null),it.viewport.set([0,0,Y.width,Y.height])})(this,this.style.map.terrain),(function(Y,et){const it=Y.context,pt=it.gl,At=yi.unblended,Mt=new Nn(pt.LEQUAL,Nn.ReadWrite,[0,1]),Ot=et.getTerrainMesh(),Tt=et.getCoordsTexture(),Wt=et.sourceCache.getRenderableTiles(),oe=Y.useProgram("terrainCoords");it.bindFramebuffer.set(et.getFramebuffer("coords").framebuffer),it.viewport.set([0,0,Y.width/devicePixelRatio,Y.height/devicePixelRatio]),it.clear({color:a.aT.transparent,depth:1}),et.coordsIndex=[];for(const Rt of Wt){const Kt=et.getTerrainData(Rt.tileID);it.activeTexture.set(pt.TEXTURE0),pt.bindTexture(pt.TEXTURE_2D,Tt.texture);const ue={u_matrix:Y.transform.calculatePosMatrix(Rt.tileID.toUnwrapped()),u_terrain_coords_id:(255-et.coordsIndex.length)/255,u_texture:0,u_ele_delta:et.getMeshFrameDelta(Y.transform.zoom)};oe.draw(it,pt.TRIANGLES,Mt,Di.disabled,At,_i.backCCW,ue,Kt,"terrain",Ot.vertexBuffer,Ot.indexBuffer,Ot.segments),et.coordsIndex.push(Rt.tileID.key)}it.bindFramebuffer.set(null),it.viewport.set([0,0,Y.width,Y.height])})(this,this.style.map.terrain))}this.renderPass="offscreen";for(const $ of b){const Y=this.style._layers[$];if(!Y.hasOffscreenPass()||Y.isHidden(this.transform.zoom))continue;const et=B[Y.source];(Y.type==="custom"||et.length)&&this.renderLayer(this,M[Y.source],Y,et)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:m.showOverdrawInspector?a.aT.black:a.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const $=this.style._layers[b[this.currentLayer]],Y=M[$.source],et=C[$.source];this._renderTileClippingMasks($,et),this.renderLayer(this,Y,$,et)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const $=this.style._layers[b[this.currentLayer]],Y=M[$.source];if(this.renderToTexture&&this.renderToTexture.renderLayer($))continue;const et=($.type==="symbol"?j:B)[$.source];this._renderTileClippingMasks($,C[$.source]),this.renderLayer(this,Y,$,et)}if(this.options.showTileBoundaries){const $=(function(Y,et){let it=null;const pt=Object.values(Y._layers).flatMap((Tt=>Tt.source&&!Tt.isHidden(et)?[Y.sourceCaches[Tt.source]]:[])),At=pt.filter((Tt=>Tt.getSource().type==="vector")),Mt=pt.filter((Tt=>Tt.getSource().type!=="vector")),Ot=Tt=>{(!it||it.getSource().maxzoom<Tt.getSource().maxzoom)&&(it=Tt)};return At.forEach((Tt=>Ot(Tt))),it||Mt.forEach((Tt=>Ot(Tt))),it})(this.style,this.transform.zoom);$&&(function(Y,et,it){for(let pt=0;pt<it.length;pt++)Jc(Y,et,it[pt])})(this,$,$.getVisibleCoordinates())}this.options.showPadding&&(function($){const Y=$.transform.padding;no($,$.transform.height-(Y.top||0),3,ru),no($,Y.bottom||0,3,al),$u($,Y.left||0,3,Dl),$u($,$.transform.width-(Y.right||0),3,Qc);const et=$.transform.centerPoint;(function(it,pt,At,Mt){zl(it,pt-1,At-10,2,20,Mt),zl(it,pt-10,At-1,20,2,Mt)})($,et.x,$.transform.height-et.y,Os)})(this),this.context.setDefault()}renderLayer(l,m,b,M){if(!b.isHidden(this.transform.zoom)&&(b.type==="background"||b.type==="custom"||(M||[]).length))switch(this.id=b.id,b.type){case"symbol":(function(C,B,j,$,Y){if(C.renderPass!=="translucent")return;const et=Di.disabled,it=C.colorModeForRenderPass();(j._unevaluatedLayout.hasValue("text-variable-anchor")||j._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(pt,At,Mt,Ot,Tt,Wt,oe){const Rt=At.transform,Kt=Tt==="map",ue=Wt==="map";for(const de of pt){const be=Ot.getTile(de),ze=be.getBucket(Mt);if(!ze||!ze.text||!ze.text.segments.get().length)continue;const Ae=a.ah(ze.textSizeData,Rt.zoom),Ne=Zt(be,1,At.transform.zoom),sn=Be(de.posMatrix,ue,Kt,At.transform,Ne),qn=Mt.layout.get("icon-text-fit")!=="none"&&ze.hasIconData();if(Ae){const Ve=Math.pow(2,Rt.zoom-be.tileID.overscaledZ);ju(ze,Kt,ue,oe,Rt,sn,de.posMatrix,Ve,Ae,qn,At.style.map.terrain?(fn,on)=>At.style.map.terrain.getElevation(de,fn,on):null)}}})($,C,j,B,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),Y),j.paint.get("icon-opacity").constantOr(1)!==0&&Oo(C,B,j,$,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),et,it),j.paint.get("text-opacity").constantOr(1)!==0&&Oo(C,B,j,$,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),et,it),B.map.showCollisionBoxes&&(Bu(C,B,j,$,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),Bu(C,B,j,$,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))})(l,m,b,M,this.style.placement.variableOffsets);break;case"circle":(function(C,B,j,$){if(C.renderPass!=="translucent")return;const Y=j.paint.get("circle-opacity"),et=j.paint.get("circle-stroke-width"),it=j.paint.get("circle-stroke-opacity"),pt=!j.layout.get("circle-sort-key").isConstant();if(Y.constantOr(1)===0&&(et.constantOr(1)===0||it.constantOr(1)===0))return;const At=C.context,Mt=At.gl,Ot=C.depthModeForSublayer(0,Nn.ReadOnly),Tt=Di.disabled,Wt=C.colorModeForRenderPass(),oe=[];for(let Rt=0;Rt<$.length;Rt++){const Kt=$[Rt],ue=B.getTile(Kt),de=ue.getBucket(j);if(!de)continue;const be=de.programConfigurations.get(j.id),ze=C.useProgram("circle",be),Ae=de.layoutVertexBuffer,Ne=de.indexBuffer,sn=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Kt),qn={programConfiguration:be,program:ze,layoutVertexBuffer:Ae,indexBuffer:Ne,uniformValues:Ya(C,Kt,ue,j),terrainData:sn};if(pt){const Ve=de.segments.get();for(const fn of Ve)oe.push({segments:new a.S([fn]),sortKey:fn.sortKey,state:qn})}else oe.push({segments:de.segments,sortKey:0,state:qn})}pt&&oe.sort(((Rt,Kt)=>Rt.sortKey-Kt.sortKey));for(const Rt of oe){const{programConfiguration:Kt,program:ue,layoutVertexBuffer:de,indexBuffer:be,uniformValues:ze,terrainData:Ae}=Rt.state;ue.draw(At,Mt.TRIANGLES,Ot,Tt,Wt,_i.disabled,ze,Ae,j.id,de,be,Rt.segments,j.paint,C.transform.zoom,Kt)}})(l,m,b,M);break;case"heatmap":(function(C,B,j,$){if(j.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){const Y=C.context,et=Y.gl,it=Di.disabled,pt=new yi([et.ONE,et.ONE],a.aT.transparent,[!0,!0,!0,!0]);(function(At,Mt,Ot){const Tt=At.gl;At.activeTexture.set(Tt.TEXTURE1),At.viewport.set([0,0,Mt.width/4,Mt.height/4]);let Wt=Ot.heatmapFbo;if(Wt)Tt.bindTexture(Tt.TEXTURE_2D,Wt.colorAttachment.get()),At.bindFramebuffer.set(Wt.framebuffer);else{const oe=Tt.createTexture();Tt.bindTexture(Tt.TEXTURE_2D,oe),Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_WRAP_S,Tt.CLAMP_TO_EDGE),Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_WRAP_T,Tt.CLAMP_TO_EDGE),Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_MIN_FILTER,Tt.LINEAR),Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_MAG_FILTER,Tt.LINEAR),Wt=Ot.heatmapFbo=At.createFramebuffer(Mt.width/4,Mt.height/4,!1,!1),(function(Rt,Kt,ue,de){var be,ze;const Ae=Rt.gl,Ne=(be=Rt.HALF_FLOAT)!==null&&be!==void 0?be:Ae.UNSIGNED_BYTE,sn=(ze=Rt.RGBA16F)!==null&&ze!==void 0?ze:Ae.RGBA;Ae.texImage2D(Ae.TEXTURE_2D,0,sn,Kt.width/4,Kt.height/4,0,Ae.RGBA,Ne,null),de.colorAttachment.set(ue)})(At,Mt,oe,Wt)}})(Y,C,j),Y.clear({color:a.aT.transparent});for(let At=0;At<$.length;At++){const Mt=$[At];if(B.hasRenderableParent(Mt))continue;const Ot=B.getTile(Mt),Tt=Ot.getBucket(j);if(!Tt)continue;const Wt=Tt.programConfigurations.get(j.id),oe=C.useProgram("heatmap",Wt),{zoom:Rt}=C.transform;oe.draw(Y,et.TRIANGLES,Nn.disabled,it,pt,_i.disabled,pc(Mt.posMatrix,Ot,Rt,j.paint.get("heatmap-intensity")),null,j.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,j.paint,C.transform.zoom,Wt)}Y.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),(function(Y,et){const it=Y.context,pt=it.gl,At=et.heatmapFbo;if(!At)return;it.activeTexture.set(pt.TEXTURE0),pt.bindTexture(pt.TEXTURE_2D,At.colorAttachment.get()),it.activeTexture.set(pt.TEXTURE1);let Mt=et.colorRampTexture;Mt||(Mt=et.colorRampTexture=new xt(it,et.colorRamp,pt.RGBA)),Mt.bind(pt.LINEAR,pt.CLAMP_TO_EDGE),Y.useProgram("heatmapTexture").draw(it,pt.TRIANGLES,Nn.disabled,Di.disabled,Y.colorModeForRenderPass(),_i.disabled,((Ot,Tt,Wt,oe)=>{const Rt=a.Z();a.aS(Rt,0,Ot.width,Ot.height,0,0,1);const Kt=Ot.context.gl;return{u_matrix:Rt,u_world:[Kt.drawingBufferWidth,Kt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Tt.paint.get("heatmap-opacity")}})(Y,et),null,et.id,Y.viewportBuffer,Y.quadTriangleIndexBuffer,Y.viewportSegments,et.paint,Y.transform.zoom)})(C,j))})(l,m,b,M);break;case"line":(function(C,B,j,$){if(C.renderPass!=="translucent")return;const Y=j.paint.get("line-opacity"),et=j.paint.get("line-width");if(Y.constantOr(1)===0||et.constantOr(1)===0)return;const it=C.depthModeForSublayer(0,Nn.ReadOnly),pt=C.colorModeForRenderPass(),At=j.paint.get("line-dasharray"),Mt=j.paint.get("line-pattern"),Ot=Mt.constantOr(1),Tt=j.paint.get("line-gradient"),Wt=j.getCrossfadeParameters(),oe=Ot?"linePattern":At?"lineSDF":Tt?"lineGradient":"line",Rt=C.context,Kt=Rt.gl;let ue=!0;for(const de of $){const be=B.getTile(de);if(Ot&&!be.patternsLoaded())continue;const ze=be.getBucket(j);if(!ze)continue;const Ae=ze.programConfigurations.get(j.id),Ne=C.context.program.get(),sn=C.useProgram(oe,Ae),qn=ue||sn.program!==Ne,Ve=C.style.map.terrain&&C.style.map.terrain.getTerrainData(de),fn=Mt.constantOr(null);if(fn&&be.imageAtlas){const Ln=be.imageAtlas,Cn=Ln.patternPositions[fn.to.toString()],Fn=Ln.patternPositions[fn.from.toString()];Cn&&Fn&&Ae.setConstantPatternPositions(Cn,Fn)}const on=Ve?de:null,Mi=Ot?eu(C,be,j,Wt,on):At?Xa(C,be,j,At,Wt,on):Tt?mc(C,be,j,ze.lineClipsArray.length,on):tu(C,be,j,on);if(Ot)Rt.activeTexture.set(Kt.TEXTURE0),be.imageAtlasTexture.bind(Kt.LINEAR,Kt.CLAMP_TO_EDGE),Ae.updatePaintBuffers(Wt);else if(At&&(qn||C.lineAtlas.dirty))Rt.activeTexture.set(Kt.TEXTURE0),C.lineAtlas.bind(Rt);else if(Tt){const Ln=ze.gradients[j.id];let Cn=Ln.texture;if(j.gradientVersion!==Ln.version){let Fn=256;if(j.stepInterpolant){const Gi=B.getSource().maxzoom,Ei=de.canonical.z===Gi?Math.ceil(1<<C.transform.maxZoom-de.canonical.z):1;Fn=a.ad(a.aY(ze.maxLineLength/a.N*1024*Ei),256,Rt.maxTextureSize)}Ln.gradient=a.aZ({expression:j.gradientExpression(),evaluationKey:"lineProgress",resolution:Fn,image:Ln.gradient||void 0,clips:ze.lineClipsArray}),Ln.texture?Ln.texture.update(Ln.gradient):Ln.texture=new xt(Rt,Ln.gradient,Kt.RGBA),Ln.version=j.gradientVersion,Cn=Ln.texture}Rt.activeTexture.set(Kt.TEXTURE0),Cn.bind(j.stepInterpolant?Kt.NEAREST:Kt.LINEAR,Kt.CLAMP_TO_EDGE)}sn.draw(Rt,Kt.TRIANGLES,it,C.stencilModeForClipping(de),pt,_i.disabled,Mi,Ve,j.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,j.paint,C.transform.zoom,Ae,ze.layoutVertexBuffer2),ue=!1}})(l,m,b,M);break;case"fill":(function(C,B,j,$){const Y=j.paint.get("fill-color"),et=j.paint.get("fill-opacity");if(et.constantOr(1)===0)return;const it=C.colorModeForRenderPass(),pt=j.paint.get("fill-pattern"),At=C.opaquePassEnabledForLayer()&&!pt.constantOr(1)&&Y.constantOr(a.aT.transparent).a===1&&et.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===At){const Mt=C.depthModeForSublayer(1,C.renderPass==="opaque"?Nn.ReadWrite:Nn.ReadOnly);Uu(C,B,j,$,Mt,it,!1)}if(C.renderPass==="translucent"&&j.paint.get("fill-antialias")){const Mt=C.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,Nn.ReadOnly);Uu(C,B,j,$,Mt,it,!0)}})(l,m,b,M);break;case"fill-extrusion":(function(C,B,j,$){const Y=j.paint.get("fill-extrusion-opacity");if(Y!==0&&C.renderPass==="translucent"){const et=new Nn(C.context.gl.LEQUAL,Nn.ReadWrite,C.depthRangeFor3D);if(Y!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))Ba(C,B,j,$,et,Di.disabled,yi.disabled),Ba(C,B,j,$,et,C.stencilModeFor3D(),C.colorModeForRenderPass());else{const it=C.colorModeForRenderPass();Ba(C,B,j,$,et,Di.disabled,it)}}})(l,m,b,M);break;case"hillshade":(function(C,B,j,$){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const Y=C.context,et=C.depthModeForSublayer(0,Nn.ReadOnly),it=C.colorModeForRenderPass(),[pt,At]=C.renderPass==="translucent"?C.stencilConfigForOverlap($):[{},$];for(const Mt of At){const Ot=B.getTile(Mt);Ot.needsHillshadePrepare!==void 0&&Ot.needsHillshadePrepare&&C.renderPass==="offscreen"?ps(C,Ot,j,et,Di.disabled,it):C.renderPass==="translucent"&&Qh(C,Mt,Ot,j,et,pt[Mt.overscaledZ],it)}Y.viewport.set([0,0,C.width,C.height])})(l,m,b,M);break;case"raster":(function(C,B,j,$){if(C.renderPass!=="translucent"||j.paint.get("raster-opacity")===0||!$.length)return;const Y=C.context,et=Y.gl,it=B.getSource(),pt=C.useProgram("raster"),At=C.colorModeForRenderPass(),[Mt,Ot]=it instanceof Le?[{},$]:C.stencilConfigForOverlap($),Tt=Ot[Ot.length-1].overscaledZ,Wt=!C.options.moving;for(const oe of Ot){const Rt=C.depthModeForSublayer(oe.overscaledZ-Tt,j.paint.get("raster-opacity")===1?Nn.ReadWrite:Nn.ReadOnly,et.LESS),Kt=B.getTile(oe);Kt.registerFadeDuration(j.paint.get("raster-fade-duration"));const ue=B.findLoadedParent(oe,0),de=Vu(Kt,ue,B,j,C.transform,C.style.map.terrain);let be,ze;const Ae=j.paint.get("raster-resampling")==="nearest"?et.NEAREST:et.LINEAR;Y.activeTexture.set(et.TEXTURE0),Kt.texture.bind(Ae,et.CLAMP_TO_EDGE,et.LINEAR_MIPMAP_NEAREST),Y.activeTexture.set(et.TEXTURE1),ue?(ue.texture.bind(Ae,et.CLAMP_TO_EDGE,et.LINEAR_MIPMAP_NEAREST),be=Math.pow(2,ue.tileID.overscaledZ-Kt.tileID.overscaledZ),ze=[Kt.tileID.canonical.x*be%1,Kt.tileID.canonical.y*be%1]):Kt.texture.bind(Ae,et.CLAMP_TO_EDGE,et.LINEAR_MIPMAP_NEAREST);const Ne=C.style.map.terrain&&C.style.map.terrain.getTerrainData(oe),sn=Ne?oe:null,qn=sn?sn.posMatrix:C.transform.calculatePosMatrix(oe.toUnwrapped(),Wt),Ve=El(qn,ze||[0,0],be||1,de,j);it instanceof Le?pt.draw(Y,et.TRIANGLES,Rt,Di.disabled,At,_i.disabled,Ve,Ne,j.id,it.boundsBuffer,C.quadTriangleIndexBuffer,it.boundsSegments):pt.draw(Y,et.TRIANGLES,Rt,Mt[oe.overscaledZ],At,_i.disabled,Ve,Ne,j.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}})(l,m,b,M);break;case"background":(function(C,B,j,$){const Y=j.paint.get("background-color"),et=j.paint.get("background-opacity");if(et===0)return;const it=C.context,pt=it.gl,At=C.transform,Mt=At.tileSize,Ot=j.paint.get("background-pattern");if(C.isPatternMissing(Ot))return;const Tt=!Ot&&Y.a===1&&et===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==Tt)return;const Wt=Di.disabled,oe=C.depthModeForSublayer(0,Tt==="opaque"?Nn.ReadWrite:Nn.ReadOnly),Rt=C.colorModeForRenderPass(),Kt=C.useProgram(Ot?"backgroundPattern":"background"),ue=$||At.coveringTiles({tileSize:Mt,terrain:C.style.map.terrain});Ot&&(it.activeTexture.set(pt.TEXTURE0),C.imageManager.bind(C.context));const de=j.getCrossfadeParameters();for(const be of ue){const ze=$?be.posMatrix:C.transform.calculatePosMatrix(be.toUnwrapped()),Ae=Ot?rr(ze,et,C,Ot,{tileID:be,tileSize:Mt},de):Ks(ze,et,Y),Ne=C.style.map.terrain&&C.style.map.terrain.getTerrainData(be);Kt.draw(it,pt.TRIANGLES,oe,Wt,Rt,_i.disabled,Ae,Ne,j.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}})(l,0,b,M);break;case"custom":(function(C,B,j){const $=C.context,Y=j.implementation;if(C.renderPass==="offscreen"){const et=Y.prerender;et&&(C.setCustomLayerDefaults(),$.setColorMode(C.colorModeForRenderPass()),et.call(Y,$.gl,C.transform.customLayerMatrix()),$.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),$.setColorMode(C.colorModeForRenderPass()),$.setStencilMode(Di.disabled);const et=Y.renderingMode==="3d"?new Nn(C.context.gl.LEQUAL,Nn.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,Nn.ReadOnly);$.setDepthMode(et),Y.render($.gl,C.transform.customLayerMatrix()),$.setDirty(),C.setBaseState(),$.bindFramebuffer.set(null)}})(l,0,b)}}translatePosMatrix(l,m,b,M,C){if(!b[0]&&!b[1])return l;const B=C?M==="map"?this.transform.angle:0:M==="viewport"?-this.transform.angle:0;if(B){const Y=Math.sin(B),et=Math.cos(B);b=[b[0]*et-b[1]*Y,b[0]*Y+b[1]*et]}const j=[C?b[0]:Zt(m,b[0],this.transform.zoom),C?b[1]:Zt(m,b[1],this.transform.zoom),0],$=new Float32Array(16);return a.$($,l,j),$}saveTileTexture(l){const m=this._tileTextures[l.size[0]];m?m.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const m=this._tileTextures[l];return m&&m.length>0?m.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const m=this.imageManager.getPattern(l.from.toString()),b=this.imageManager.getPattern(l.to.toString());return!m||!b}useProgram(l,m){this.cache=this.cache||{};const b=l+(m?m.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[b]||(this.cache[b]=new Co(this.context,mi[l],m,nl[l],this._showOverdrawInspector,this.style.map.terrain)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new xt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:m}=this.context.gl;return this.width!==l||this.height!==m}}class Er{constructor(l,m){this.points=l,this.planes=m}static fromInvProjectionMatrix(l,m,b){const M=Math.pow(2,b),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((j=>{const $=1/(j=a.ag([],j,l))[3]/m*M;return a.b3(j,j,[$,$,1/j[3],$])})),B=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((j=>{const $=(function(pt,At){var Mt=At[0],Ot=At[1],Tt=At[2],Wt=Mt*Mt+Ot*Ot+Tt*Tt;return Wt>0&&(Wt=1/Math.sqrt(Wt)),pt[0]=At[0]*Wt,pt[1]=At[1]*Wt,pt[2]=At[2]*Wt,pt})([],(function(pt,At,Mt){var Ot=At[0],Tt=At[1],Wt=At[2],oe=Mt[0],Rt=Mt[1],Kt=Mt[2];return pt[0]=Tt*Kt-Wt*Rt,pt[1]=Wt*oe-Ot*Kt,pt[2]=Ot*Rt-Tt*oe,pt})([],at([],C[j[0]],C[j[1]]),at([],C[j[2]],C[j[1]]))),Y=-((et=$)[0]*(it=C[j[1]])[0]+et[1]*it[1]+et[2]*it[2]);var et,it;return $.concat(Y)}));return new Er(C,B)}}class au{constructor(l,m){this.min=l,this.max=m,this.center=(function(b,M,C){return b[0]=.5*M[0],b[1]=.5*M[1],b[2]=.5*M[2],b})([],(function(b,M,C){return b[0]=M[0]+C[0],b[1]=M[1]+C[1],b[2]=M[2]+C[2],b})([],this.min,this.max))}quadrant(l){const m=[l%2==0,l<2],b=tt(this.min),M=tt(this.max);for(let C=0;C<m.length;C++)b[C]=m[C]?this.min[C]:this.center[C],M[C]=m[C]?this.center[C]:this.max[C];return M[2]=this.max[2],new au(b,M)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const m=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let b=!0;for(let M=0;M<l.planes.length;M++){const C=l.planes[M];let B=0;for(let j=0;j<m.length;j++)a.b4(C,m[j])>=0&&B++;if(B===0)return 0;B!==m.length&&(b=!1)}if(b)return 2;for(let M=0;M<3;M++){let C=Number.MAX_VALUE,B=-Number.MAX_VALUE;for(let j=0;j<l.points.length;j++){const $=l.points[j][M]-this.min[M];C=Math.min(C,$),B=Math.max(B,$)}if(B<0||C>this.max[M]-this.min[M])return 0}return 1}}class Ja{constructor(l=0,m=0,b=0,M=0){if(isNaN(l)||l<0||isNaN(m)||m<0||isNaN(b)||b<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=m,this.left=b,this.right=M}interpolate(l,m,b){return m.top!=null&&l.top!=null&&(this.top=a.B.number(l.top,m.top,b)),m.bottom!=null&&l.bottom!=null&&(this.bottom=a.B.number(l.bottom,m.bottom,b)),m.left!=null&&l.left!=null&&(this.left=a.B.number(l.left,m.left,b)),m.right!=null&&l.right!=null&&(this.right=a.B.number(l.right,m.right,b)),this}getCenter(l,m){const b=a.ad((this.left+l-this.right)/2,0,l),M=a.ad((this.top+m-this.bottom)/2,0,m);return new a.P(b,M)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Ja(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Cr{constructor(l,m,b,M,C){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=C===void 0||!!C,this._minZoom=l||0,this._maxZoom=m||22,this._minPitch=b??0,this._maxPitch=M??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ja,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const l=new Cr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.apply(this),l}apply(l){this.tileSize=l.tileSize,this.latRange=l.latRange,this.width=l.width,this.height=l.height,this._center=l._center,this._elevation=l._elevation,this._minEleveationForCurrentTile=l._minEleveationForCurrentTile,this.zoom=l.zoom,this.angle=l.angle,this._fov=l._fov,this._pitch=l._pitch,this._unmodified=l._unmodified,this._edgeInsets=l._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const m=-a.b5(l,-180,180)*Math.PI/180;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=(function(){var b=new a.A(4);return a.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b})(),(function(b,M,C){var B=M[0],j=M[1],$=M[2],Y=M[3],et=Math.sin(C),it=Math.cos(C);b[0]=B*it+$*et,b[1]=j*it+Y*et,b[2]=B*-et+$*it,b[3]=j*-et+Y*it})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const m=a.ad(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const m=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._zoom=m,this.tileZoom=Math.max(0,Math.floor(m)),this.scale=this.zoomScale(m),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,m,b){this._unmodified=!1,this._edgeInsets.interpolate(l,m,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const m=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(l){const m=[new a.b6(0,l)];if(this._renderWorldCopies){const b=this.pointCoordinate(new a.P(0,0)),M=this.pointCoordinate(new a.P(this.width,0)),C=this.pointCoordinate(new a.P(this.width,this.height)),B=this.pointCoordinate(new a.P(0,this.height)),j=Math.floor(Math.min(b.x,M.x,C.x,B.x)),$=Math.floor(Math.max(b.x,M.x,C.x,B.x)),Y=1;for(let et=j-Y;et<=$+Y;et++)et!==0&&m.push(new a.b6(et,l))}return m}coveringTiles(l){var m,b;let M=this.coveringZoomLevel(l);const C=M;if(l.minzoom!==void 0&&M<l.minzoom)return[];l.maxzoom!==void 0&&M>l.maxzoom&&(M=l.maxzoom);const B=this.pointCoordinate(this.getCameraPoint()),j=a.U.fromLngLat(this.center),$=Math.pow(2,M),Y=[$*B.x,$*B.y,0],et=[$*j.x,$*j.y,0],it=Er.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,M);let pt=l.minzoom||0;!l.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(pt=M);const At=l.terrain?2/Math.min(this.tileSize,l.tileSize)*this.tileSize:3,Mt=Rt=>({aabb:new au([Rt*$,0,0],[(Rt+1)*$,$,0]),zoom:0,x:0,y:0,wrap:Rt,fullyVisible:!1}),Ot=[],Tt=[],Wt=M,oe=l.reparseOverscaled?C:M;if(this._renderWorldCopies)for(let Rt=1;Rt<=3;Rt++)Ot.push(Mt(-Rt)),Ot.push(Mt(Rt));for(Ot.push(Mt(0));Ot.length>0;){const Rt=Ot.pop(),Kt=Rt.x,ue=Rt.y;let de=Rt.fullyVisible;if(!de){const sn=Rt.aabb.intersects(it);if(sn===0)continue;de=sn===2}const be=l.terrain?Y:et,ze=Rt.aabb.distanceX(be),Ae=Rt.aabb.distanceY(be),Ne=Math.max(Math.abs(ze),Math.abs(Ae));if(Rt.zoom===Wt||Ne>At+(1<<Wt-Rt.zoom)-2&&Rt.zoom>=pt){const sn=Wt-Rt.zoom,qn=Y[0]-.5-(Kt<<sn),Ve=Y[1]-.5-(ue<<sn);Tt.push({tileID:new a.O(Rt.zoom===Wt?oe:Rt.zoom,Rt.wrap,Rt.zoom,Kt,ue),distanceSq:ht([et[0]-.5-Kt,et[1]-.5-ue]),tileDistanceToCamera:Math.sqrt(qn*qn+Ve*Ve)})}else for(let sn=0;sn<4;sn++){const qn=(Kt<<1)+sn%2,Ve=(ue<<1)+(sn>>1),fn=Rt.zoom+1;let on=Rt.aabb.quadrant(sn);if(l.terrain){const Mi=new a.O(fn,Rt.wrap,fn,qn,Ve),Ln=l.terrain.getMinMaxElevation(Mi),Cn=(m=Ln.minElevation)!==null&&m!==void 0?m:this.elevation,Fn=(b=Ln.maxElevation)!==null&&b!==void 0?b:this.elevation;on=new au([on.min[0],on.min[1],Cn],[on.max[0],on.max[1],Fn])}Ot.push({aabb:on,zoom:fn,x:qn,y:Ve,wrap:Rt.wrap,fullyVisible:de})}}return Tt.sort(((Rt,Kt)=>Rt.distanceSq-Kt.distanceSq)).map((Rt=>Rt.tileID))}resize(l,m){this.width=l,this.height=m,this.pixelsToGLUnits=[2/l,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const m=a.ad(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.P(a.G(l.lng)*this.worldSize,a.H(m)*this.worldSize)}unproject(l){return new a.U(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(l){const m=this.pointLocation(this.centerPoint,l),b=l.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-b))return;const M=this.getCameraPosition(),C=a.U.fromLngLat(M.lngLat,M.altitude),B=a.U.fromLngLat(m,b),j=C.x-B.x,$=C.y-B.y,Y=C.z-B.z,et=Math.sqrt(j*j+$*$+Y*Y),it=this.scaleZoom(this.cameraToCenterDistance/et/this.tileSize);this._elevation=b,this._center=m,this.zoom=it}setLocationAtPoint(l,m){const b=this.pointCoordinate(m),M=this.pointCoordinate(this.centerPoint),C=this.locationCoordinate(l),B=new a.U(C.x-(b.x-M.x),C.y-(b.y-M.y));this.center=this.coordinateLocation(B),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l,m){return m?this.coordinatePoint(this.locationCoordinate(l),m.getElevationForLngLatZoom(l,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l,m){return this.coordinateLocation(this.pointCoordinate(l,m))}locationCoordinate(l){return a.U.fromLngLat(l)}coordinateLocation(l){return l&&l.toLngLat()}pointCoordinate(l,m){if(m){const pt=m.pointCoordinate(l);if(pt!=null)return pt}const b=[l.x,l.y,0,1],M=[l.x,l.y,1,1];a.ag(b,b,this.pixelMatrixInverse),a.ag(M,M,this.pixelMatrixInverse);const C=b[3],B=M[3],j=b[1]/C,$=M[1]/B,Y=b[2]/C,et=M[2]/B,it=Y===et?0:(0-Y)/(et-Y);return new a.U(a.B.number(b[0]/C,M[0]/B,it)/this.worldSize,a.B.number(j,$,it)/this.worldSize)}coordinatePoint(l,m=0,b=this.pixelMatrix){const M=[l.x*this.worldSize,l.y*this.worldSize,m,1];return a.ag(M,M,b),new a.P(M[0]/M[3],M[1]/M[3])}getBounds(){const l=Math.max(0,this.height/2-this.getHorizon());return new jt().extend(this.pointLocation(new a.P(0,l))).extend(this.pointLocation(new a.P(this.width,l))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new jt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(l,m=!1){const b=l.key,M=m?this._alignedPosMatrixCache:this._posMatrixCache;if(M[b])return M[b];const C=l.canonical,B=this.worldSize/this.zoomScale(C.z),j=C.x+Math.pow(2,C.z)*l.wrap,$=a.ao(new Float64Array(16));return a.$($,$,[j*B,C.y*B,0]),a.a0($,$,[B/a.N,B/a.N,1]),a.a1($,m?this.alignedProjMatrix:this.projMatrix,$),M[b]=new Float32Array($),M[b]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let l,m,b,M,C=-90,B=90,j=-180,$=180;const Y=this.size,et=this._unmodified;if(this.latRange){const At=this.latRange;C=a.H(At[1])*this.worldSize,B=a.H(At[0])*this.worldSize,l=B-C<Y.y?Y.y/(B-C):0}if(this.lngRange){const At=this.lngRange;j=a.b5(a.G(At[0])*this.worldSize,0,this.worldSize),$=a.b5(a.G(At[1])*this.worldSize,0,this.worldSize),$<j&&($+=this.worldSize),m=$-j<Y.x?Y.x/($-j):0}const it=this.point,pt=Math.max(m||0,l||0);if(pt)return this.center=this.unproject(new a.P(m?($+j)/2:it.x,l?(B+C)/2:it.y)),this.zoom+=this.scaleZoom(pt),this._unmodified=et,void(this._constraining=!1);if(this.latRange){const At=it.y,Mt=Y.y/2;At-Mt<C&&(M=C+Mt),At+Mt>B&&(M=B-Mt)}if(this.lngRange){const At=(j+$)/2,Mt=a.b5(it.x,At-this.worldSize/2,At+this.worldSize/2),Ot=Y.x/2;Mt-Ot<j&&(b=j+Ot),Mt+Ot>$&&(b=$-Ot)}b===void 0&&M===void 0||(this.center=this.unproject(new a.P(b!==void 0?b:it.x,M!==void 0?M:it.y)).wrap()),this._unmodified=et,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,m=this.point.x,b=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b7(1,this.center.lat)*this.worldSize;let M=a.ao(new Float64Array(16));a.a0(M,M,[this.width/2,-this.height/2,1]),a.$(M,M,[1,-1,0]),this.labelPlaneMatrix=M,M=a.ao(new Float64Array(16)),a.a0(M,M,[1,-1,1]),a.$(M,M,[-1,-1,0]),a.a0(M,M,[2/this.width,2/this.height,1]),this.glCoordMatrix=M;const C=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),B=Math.min(this.elevation,this._minEleveationForCurrentTile),j=C-B*this._pixelPerMeter/Math.cos(this._pitch),$=B<0?j:C,Y=Math.PI/2+this._pitch,et=this._fov*(.5+l.y/this.height),it=Math.sin(et)*$/Math.sin(a.ad(Math.PI-Y-et,.01,Math.PI-.01)),pt=this.getHorizon(),At=2*Math.atan(pt/this.cameraToCenterDistance)*(.5+l.y/(2*pt)),Mt=Math.sin(At)*$/Math.sin(a.ad(Math.PI-Y-At,.01,Math.PI-.01)),Ot=Math.min(it,Mt),Tt=1.01*(Math.cos(Math.PI/2-this._pitch)*Ot+$),Wt=this.height/50;M=new Float64Array(16),a.b8(M,this._fov,this.width/this.height,Wt,Tt),M[8]=2*-l.x/this.width,M[9]=2*l.y/this.height,a.a0(M,M,[1,-1,1]),a.$(M,M,[0,0,-this.cameraToCenterDistance]),a.b9(M,M,this._pitch),a.ae(M,M,this.angle),a.$(M,M,[-m,-b,0]),this.mercatorMatrix=a.a0([],M,[this.worldSize,this.worldSize,this.worldSize]),a.a0(M,M,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.a1(new Float64Array(16),this.labelPlaneMatrix,M),a.$(M,M,[0,0,-this.elevation]),this.projMatrix=M,this.invProjMatrix=a.as([],M),this.pixelMatrix3D=a.a1(new Float64Array(16),this.labelPlaneMatrix,M);const oe=this.width%2/2,Rt=this.height%2/2,Kt=Math.cos(this.angle),ue=Math.sin(this.angle),de=m-Math.round(m)+Kt*oe+ue*Rt,be=b-Math.round(b)+Kt*Rt+ue*oe,ze=new Float64Array(M);if(a.$(ze,ze,[de>.5?de-1:de,be>.5?be-1:be,0]),this.alignedProjMatrix=ze,M=a.as(new Float64Array(16),this.pixelMatrix),!M)throw new Error("failed to invert matrix");this.pixelMatrixInverse=M,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new a.P(0,0)),m=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.ag(m,m,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,l))}getCameraQueryGeometry(l){const m=this.getCameraPoint();if(l.length===1)return[l[0],m];{let b=m.x,M=m.y,C=m.x,B=m.y;for(const j of l)b=Math.min(b,j.x),M=Math.min(M,j.y),C=Math.max(C,j.x),B=Math.max(B,j.y);return[new a.P(b,M),new a.P(C,M),new a.P(C,B),new a.P(b,B),new a.P(b,M)]}}}function ms(E,l){let m,b=!1,M=null,C=null;const B=()=>{M=null,b&&(E.apply(C,m),M=setTimeout(B,l),b=!1)};return(...j)=>(b=!0,C=this,m=j,M||B(),M)}class sl{constructor(l){this._getCurrentHash=()=>{const m=window.location.hash.replace("#","");if(this._hashName){let b;return m.split("&").map((M=>M.split("="))).forEach((M=>{M[0]===this._hashName&&(b=M)})),(b&&b[1]||"").split("/")}return m.split("/")},this._onHashChange=()=>{const m=this._getCurrentHash();if(m.length>=3&&!m.some((b=>isNaN(b)))){const b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:b,pitch:+(m[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const m=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,m)}catch{}},this._updateHash=ms(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(l){const m=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,M=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,M),B=Math.round(m.lng*C)/C,j=Math.round(m.lat*C)/C,$=this._map.getBearing(),Y=this._map.getPitch();let et="";if(et+=l?`/${B}/${j}/${b}`:`${b}/${j}/${B}`,($||Y)&&(et+="/"+Math.round(10*$)/10),Y&&(et+=`/${Math.round(Y)}`),this._hashName){const it=this._hashName;let pt=!1;const At=window.location.hash.slice(1).split("&").map((Mt=>{const Ot=Mt.split("=")[0];return Ot===it?(pt=!0,`${Ot}=${et}`):Mt})).filter((Mt=>Mt));return pt||At.push(`${it}=${et}`),`#${At.join("&")}`}return`#${et}`}}const io={linearity:.3,easing:a.ba(0,0,.3,1)},qu=a.e({deceleration:2500,maxSpeed:1400},io),su=a.e({deceleration:20,maxSpeed:1400},io),Do=a.e({deceleration:1e3,maxSpeed:360},io),Hu=a.e({deceleration:1e3,maxSpeed:90},io);class zo{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.h.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,m=a.h.now();for(;l.length>0&&m-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const m={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)m.zoom+=C.zoomDelta||0,m.bearing+=C.bearingDelta||0,m.pitch+=C.pitchDelta||0,C.panDelta&&m.pan._add(C.panDelta),C.around&&(m.around=C.around),C.pinchAround&&(m.pinchAround=C.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(m.pan.mag()){const C=Lo(m.pan.mag(),b,a.e({},qu,l||{}));M.offset=m.pan.mult(C.amount/m.pan.mag()),M.center=this._map.transform.center,ts(M,C)}if(m.zoom){const C=Lo(m.zoom,b,su);M.zoom=this._map.transform.zoom+C.amount,ts(M,C)}if(m.bearing){const C=Lo(m.bearing,b,Do);M.bearing=this._map.transform.bearing+a.ad(C.amount,-179,179),ts(M,C)}if(m.pitch){const C=Lo(m.pitch,b,Hu);M.pitch=this._map.transform.pitch+C.amount,ts(M,C)}if(M.zoom||M.bearing){const C=m.pinchAround===void 0?m.around:m.pinchAround;M.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),a.e(M,{noMoveStart:!0})}}function ts(E,l){(!E.duration||E.duration<l.duration)&&(E.duration=l.duration,E.easing=l.easing)}function Lo(E,l,m){const{maxSpeed:b,linearity:M,deceleration:C}=m,B=a.ad(E*M/(l/1e3),-b,b),j=Math.abs(B)/(C*M);return{easing:m.easing,duration:1e3*j,amount:B*(j/2)}}class Vr extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,m,b,M={}){const C=_.mousePos(m.getCanvasContainer(),b),B=m.unproject(C);super(l,a.e({point:C,lngLat:B,originalEvent:b},M)),this._defaultPrevented=!1,this.target=m}}class ou extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,m,b){const M=l==="touchend"?b.changedTouches:b.touches,C=_.touchPos(m.getCanvasContainer(),M),B=C.map(($=>m.unproject($))),j=C.reduce((($,Y,et,it)=>$.add(Y.div(it.length))),new a.P(0,0));super(l,{points:C,point:j,lngLats:B,lngLat:m.unproject(j),originalEvent:b}),this._defaultPrevented=!1}}class Io extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,m,b){super(l,{originalEvent:b}),this._defaultPrevented=!1}}class Il{constructor(l,m){this._map=l,this._clickTolerance=m.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Io(l.type,this._map,l))}mousedown(l,m){return this._mousedownPos=m,this._firePreventable(new Vr(l.type,this._map,l))}mouseup(l){this._map.fire(new Vr(l.type,this._map,l))}click(l,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new Vr(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Vr(l.type,this._map,l))}mouseover(l){this._map.fire(new Vr(l.type,this._map,l))}mouseout(l){this._map.fire(new Vr(l.type,this._map,l))}touchstart(l){return this._firePreventable(new ou(l.type,this._map,l))}touchmove(l){this._map.fire(new ou(l.type,this._map,l))}touchend(l){this._map.fire(new ou(l.type,this._map,l))}touchcancel(l){this._map.fire(new ou(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zu{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Vr(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Vr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Vr(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ro{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.pointLocation(a.P.convert(l),this._map.terrain)}}class Wr{constructor(l,m){this._map=l,this._tr=new Ro(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,m){this.isEnabled()&&l.shiftKey&&l.button===0&&(_.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(l,m){if(!this._active)return;const b=m;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=b,this._box||(this._box=_.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const C=Math.min(M.x,b.x),B=Math.max(M.x,b.x),j=Math.min(M.y,b.y),$=Math.max(M.y,b.y);_.setTransform(this._box,`translate(${C}px,${j}px)`),this._box.style.width=B-C+"px",this._box.style.height=$-j+"px"}mouseupWindow(l,m){if(!this._active||l.button!==0)return;const b=this._startPos,M=m;if(this.reset(),_.suppressClick(),b.x!==M.x||b.y!==M.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:l})),{cameraAnimation:C=>C.fitScreenCoordinates(b,M,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,m){return this._map.fire(new a.k(l,{originalEvent:m}))}}function aa(E,l){if(E.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${l.length}`);const m={};for(let b=0;b<E.length;b++)m[E[b].identifier]=l[b];return m}class ro{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,m,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),b.length===this.numTouches&&(this.centroid=(function(M){const C=new a.P(0,0);for(const B of M)C._add(B);return C.div(M.length)})(m),this.touches=aa(b,m)))}touchmove(l,m,b){if(this.aborted||!this.centroid)return;const M=aa(b,m);for(const C in this.touches){const B=M[C];(!B||B.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(l,m,b){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class ol{constructor(l){this.singleTap=new ro(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,m,b){this.singleTap.touchstart(l,m,b)}touchmove(l,m,b){this.singleTap.touchmove(l,m,b)}touchend(l,m,b){const M=this.singleTap.touchend(l,m,b);if(M){const C=l.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(M)<30;if(C&&B||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class Bo{constructor(l){this._tr=new Ro(l),this._zoomIn=new ol({numTouches:1,numTaps:2}),this._zoomOut=new ol({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,m,b){this._zoomIn.touchstart(l,m,b),this._zoomOut.touchstart(l,m,b)}touchmove(l,m,b){this._zoomIn.touchmove(l,m,b),this._zoomOut.touchmove(l,m,b)}touchend(l,m,b){const M=this._zoomIn.touchend(l,m,b),C=this._zoomOut.touchend(l,m,b),B=this._tr;return M?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:B.zoom+1,around:B.unproject(M)},{originalEvent:l})}):C?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:B.zoom-1,around:B.unproject(C)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ao{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const m=this._moveFunction(...l);if(m.bearingDelta||m.pitchDelta||m.around||m.panDelta)return this._active=!0,m}dragStart(l,m){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=m.length?m[0]:m,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,m){if(!this.isEnabled())return;const b=this._lastPoint;if(!b)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const M=m.length?m[0]:m;return!this._moved&&M.dist(b)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=M,this._move(b,M))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&_.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Yf={0:1,2:2};class ll{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const m=_.mouseButton(l);this._eventButton=m}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!(function(m,b){const M=Yf[b];return m.buttons===void 0||(m.buttons&M)!==M})(l,this._eventButton)}isValidEndEvent(l){return _.mouseButton(l)===this._eventButton}}class th{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}const Ds=E=>{E.mousedown=E.dragStart,E.mousemoveWindow=E.dragMove,E.mouseup=E.dragEnd,E.contextmenu=function(l){l.preventDefault()}},Yr=({enable:E,clickTolerance:l,bearingDegreesPerPixelMoved:m=.8})=>{const b=new ll({checkCorrectEvent:M=>_.mouseButton(M)===0&&M.ctrlKey||_.mouseButton(M)===2});return new ao({clickTolerance:l,move:(M,C)=>({bearingDelta:(C.x-M.x)*m}),moveStateManager:b,enable:E,assignEvents:Ds})},es=({enable:E,clickTolerance:l,pitchDegreesPerPixelMoved:m=-.5})=>{const b=new ll({checkCorrectEvent:M=>_.mouseButton(M)===0&&M.ctrlKey||_.mouseButton(M)===2});return new ao({clickTolerance:l,move:(M,C)=>({pitchDelta:(C.y-M.y)*m}),moveStateManager:b,enable:E,assignEvents:Ds})};class Ze{constructor(l,m){this._minTouches=l.cooperativeGestures?2:1,this._clickTolerance=l.clickTolerance||1,this._map=m,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0),setTimeout((()=>{this._cancelCooperativeMessage=!1}),200)}touchstart(l,m,b){return this._calculateTransform(l,m,b)}touchmove(l,m,b){if(this._map._cooperativeGestures&&(this._minTouches===2&&b.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(l,!1,b.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(b.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,m,b)}touchend(l,m,b){this._calculateTransform(l,m,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,m,b){b.length>0&&(this._active=!0);const M=aa(b,m),C=new a.P(0,0),B=new a.P(0,0);let j=0;for(const Y in M){const et=M[Y],it=this._touches[Y];it&&(C._add(et),B._add(et.sub(it)),j++,M[Y]=et)}if(this._touches=M,j<this._minTouches||!B.mag())return;const $=B.div(j);return this._sum._add($),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(j),panDelta:$}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,m,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([m[0],m[1]]))}touchmove(l,m,b){if(!this._firstTwoTouches)return;l.preventDefault();const[M,C]=this._firstTwoTouches,B=zs(b,m,M),j=zs(b,m,C);if(!B||!j)return;const $=this._aroundCenter?null:B.add(j).div(2);return this._move([B,j],$,l)}touchend(l,m,b){if(!this._firstTwoTouches)return;const[M,C]=this._firstTwoTouches,B=zs(b,m,M),j=zs(b,m,C);B&&j||(this._active&&_.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function zs(E,l,m){for(let b=0;b<E.length;b++)if(E[b].identifier===m)return l[b]}function so(E,l){return Math.log(E/l)/Math.LN2}class No extends Xr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,m){const b=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(so(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:so(this._distance,b),pinchAround:m}}}function Ye(E,l){return 180*E.angleWith(l)/Math.PI}class gs extends Xr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,m){const b=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ye(this._vector,b),pinchAround:m}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const m=25/(Math.PI*this._minDiameter)*360,b=Ye(l,this._startVector);return Math.abs(b)<m}}function ul(E){return Math.abs(E.y)>Math.abs(E.x)}class Gu extends Xr{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,m,b){super.touchstart(l,m,b),this._currentTouchCount=b.length}_start(l){this._lastPoints=l,ul(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,m,b){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const M=l[0].sub(this._lastPoints[0]),C=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,C,b.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(M.y+C.y)/2*-.5}):void 0}gestureBeginsVertically(l,m,b){if(this._valid!==void 0)return this._valid;const M=l.mag()>=2,C=m.mag()>=2;if(!M&&!C)return;if(!M||!C)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const B=l.y>0==m.y>0;return ul(l)&&ul(m)&&B}}const jo={panStep:100,bearingStep:15,pitchStep:10};class Jh{constructor(l){this._tr=new Ro(l);const m=jo;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let m=0,b=0,M=0,C=0,B=0;switch(l.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:l.shiftKey?b=-1:(l.preventDefault(),C=-1);break;case 39:l.shiftKey?b=1:(l.preventDefault(),C=1);break;case 38:l.shiftKey?M=1:(l.preventDefault(),B=-1);break;case 40:l.shiftKey?M=-1:(l.preventDefault(),B=1);break;default:return}return this._rotationDisabled&&(b=0,M=0),{cameraAnimation:j=>{const $=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:Ma,zoom:m?Math.round($.zoom)+m*(l.shiftKey?2:1):$.zoom,bearing:$.bearing+b*this._bearingStep,pitch:$.pitch+M*this._pitchStep,offset:[-C*this._panStep,-B*this._panStep],center:$.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ma(E){return E*(2-E)}const Wu=4.000244140625;class oo{constructor(l,m){this._onTimeout=b=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},this._map=l,this._tr=new Ro(l),this._el=l.getCanvasContainer(),this._triggerRenderFrame=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!l[this._map._metaKey])return;l.preventDefault()}let m=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const b=a.h.now(),M=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,m!==0&&m%Wu==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(M*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),l.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=l,this._delta-=m,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=_.mousePos(this._el,l),b=this._tr;this._around=a.L.convert(this._aroundCenter?b.center:b.unproject(m)),this._aroundPoint=b.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>Wu?this._wheelZoomRate:this._defaultZoomRate;let $=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&$!==0&&($=1/$);const Y=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(Y*$))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,b=this._startZoom,M=this._easing;let C,B=!1;if(this._type==="wheel"&&b&&M){const j=Math.min((a.h.now()-this._lastWheelEventTime)/200,1),$=M(j);C=a.B.number(b,m,$),j<1?this._frameId||(this._frameId=!0):B=!0}else C=m,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!B,zoomDelta:C-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let m=a.bb;if(this._prevEase){const b=this._prevEase,M=(a.h.now()-b.start)/b.duration,C=b.easing(M+.01)-b.easing(M),B=.27/Math.sqrt(C*C+1e-4)*.01,j=Math.sqrt(.0729-B*B);m=a.ba(B,j,.25,1)}return this._prevEase={start:a.h.now(),duration:l,easing:m},m}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Yu{constructor(l,m){this._clickZoom=l,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Rl{constructor(l){this._tr=new Ro(l),this.reset()}reset(){this._active=!1}dblclick(l,m){return l.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(m)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fo{constructor(){this._tap=new ol({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,m,b){if(!this._swipePoint)if(this._tapTime){const M=m[0],C=l.timeStamp-this._tapTime<500,B=this._tapPoint.dist(M)<30;C&&B?b.length>0&&(this._swipePoint=M,this._swipeTouch=b[0].identifier):this.reset()}else this._tap.touchstart(l,m,b)}touchmove(l,m,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const M=m[0],C=M.y-this._swipePoint.y;return this._swipePoint=M,l.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(l,m,b)}touchend(l,m,b){if(this._tapTime)this._swipePoint&&b.length===0&&this.reset();else{const M=this._tap.touchend(l,m,b);M&&(this._tapTime=l.timeStamp,this._tapPoint=M)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lu{constructor(l,m,b){this._el=l,this._mousePan=m,this._touchPan=b}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class sa{constructor(l,m,b){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=m,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class lo{constructor(l,m,b,M){this._el=l,this._touchZoom=m,this._touchRotate=b,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const p=E=>E.zoom||E.drag||E.pitch||E.rotate;class w extends a.k{}function D(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class V{constructor(l,m){this.handleWindowEvent=M=>{this.handleEvent(M,`${M.type}Window`)},this.handleEvent=(M,C)=>{if(M.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const B=M.type==="renderFrame"?void 0:M,j={needsRenderFrame:!1},$={},Y={},et=M.touches,it=et?this._getMapTouches(et):void 0,pt=it?_.touchPos(this._el,it):_.mousePos(this._el,M);for(const{handlerName:Ot,handler:Tt,allowed:Wt}of this._handlers){if(!Tt.isEnabled())continue;let oe;this._blockedByActive(Y,Wt,Ot)?Tt.reset():Tt[C||M.type]&&(oe=Tt[C||M.type](M,pt,it),this.mergeHandlerResult(j,$,oe,Ot,B),oe&&oe.needsRenderFrame&&this._triggerRenderFrame()),(oe||Tt.isActive())&&(Y[Ot]=Tt)}const At={};for(const Ot in this._previousActiveHandlers)Y[Ot]||(At[Ot]=B);this._previousActiveHandlers=Y,(Object.keys(At).length||D(j))&&(this._changes.push([j,$,At]),this._triggerRenderFrame()),(Object.keys(Y).length||D(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Mt}=j;Mt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Mt(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new zo(l),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(m);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,C,B]of this._listeners)_.addEventListener(M,C,M===document?this.handleWindowEvent:this.handleEvent,B)}destroy(){for(const[l,m,b]of this._listeners)_.removeEventListener(l,m,l===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(l){const m=this._map,b=m.getCanvasContainer();this._add("mapEvent",new Il(m,l));const M=m.boxZoom=new Wr(m,l);this._add("boxZoom",M),l.interactive&&l.boxZoom&&M.enable();const C=new Bo(m),B=new Rl(m);m.doubleClickZoom=new Yu(B,C),this._add("tapZoom",C),this._add("clickZoom",B),l.interactive&&l.doubleClickZoom&&m.doubleClickZoom.enable();const j=new Fo;this._add("tapDragZoom",j);const $=m.touchPitch=new Gu(m);this._add("touchPitch",$),l.interactive&&l.touchPitch&&m.touchPitch.enable(l.touchPitch);const Y=Yr(l),et=es(l);m.dragRotate=new sa(l,Y,et),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",et,["mouseRotate"]),l.interactive&&l.dragRotate&&m.dragRotate.enable();const it=(({enable:Wt,clickTolerance:oe})=>{const Rt=new ll({checkCorrectEvent:Kt=>_.mouseButton(Kt)===0&&!Kt.ctrlKey});return new ao({clickTolerance:oe,move:(Kt,ue)=>({around:ue,panDelta:ue.sub(Kt)}),activateOnStart:!0,moveStateManager:Rt,enable:Wt,assignEvents:Ds})})(l),pt=new Ze(l,m);m.dragPan=new lu(b,it,pt),this._add("mousePan",it),this._add("touchPan",pt,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&m.dragPan.enable(l.dragPan);const At=new gs,Mt=new No;m.touchZoomRotate=new lo(b,Mt,At,j),this._add("touchRotate",At,["touchPan","touchZoom"]),this._add("touchZoom",Mt,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&m.touchZoomRotate.enable(l.touchZoomRotate);const Ot=m.scrollZoom=new oo(m,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Ot,["mousePan"]),l.interactive&&l.scrollZoom&&m.scrollZoom.enable(l.scrollZoom);const Tt=m.keyboard=new Jh(m);this._add("keyboard",Tt),l.interactive&&l.keyboard&&m.keyboard.enable(),this._add("blockableMapEvent",new Zu(m))}_add(l,m,b){this._handlers.push({handlerName:l,handler:m,allowed:b}),this._handlersById[l]=m}stop(l){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!p(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,m,b){for(const M in l)if(M!==b&&(!m||m.indexOf(M)<0))return!0;return!1}_getMapTouches(l){const m=[];for(const b of l)this._el.contains(b.target)&&m.push(b);return m}mergeHandlerResult(l,m,b,M,C){if(!b)return;a.e(l,b);const B={handlerName:M,originalEvent:b.originalEvent||C};b.zoomDelta!==void 0&&(m.zoom=B),b.panDelta!==void 0&&(m.drag=B),b.pitchDelta!==void 0&&(m.pitch=B),b.bearingDelta!==void 0&&(m.rotate=B)}_applyChanges(){const l={},m={},b={};for(const[M,C,B]of this._changes)M.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(M.panDelta)),M.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+M.pitchDelta),M.around!==void 0&&(l.around=M.around),M.pinchAround!==void 0&&(l.pinchAround=M.pinchAround),M.noInertia&&(l.noInertia=M.noInertia),a.e(m,C),a.e(b,B);this._updateMapTransform(l,m,b),this._changes=[]}_updateMapTransform(l,m,b){const M=this._map,C=M._getTransformForUpdate(),B=M.terrain;if(!(D(l)||B&&this._terrainMovement))return this._fireEvents(m,b,!0);let{panDelta:j,zoomDelta:$,bearingDelta:Y,pitchDelta:et,around:it,pinchAround:pt}=l;pt!==void 0&&(it=pt),M._stop(!0),it=it||M.transform.centerPoint;const At=C.pointLocation(j?it.sub(j):it);Y&&(C.bearing+=Y),et&&(C.pitch+=et),$&&(C.zoom+=$),B?this._terrainMovement||!m.drag&&!m.zoom?m.drag&&this._terrainMovement?C.center=C.pointLocation(C.centerPoint.sub(j)):C.setLocationAtPoint(At,it):(this._terrainMovement=!0,this._map._elevationFreeze=!0,C.setLocationAtPoint(At,it),this._map.once("moveend",(()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,C.recalculateZoom(M.terrain)}))):C.setLocationAtPoint(At,it),M._applyUpdatedTransform(C),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(m,b,!0)}_fireEvents(l,m,b){const M=p(this._eventsInProgress),C=p(l),B={};for(const et in l){const{originalEvent:it}=l[et];this._eventsInProgress[et]||(B[`${et}start`]=it),this._eventsInProgress[et]=l[et]}!M&&C&&this._fireEvent("movestart",C.originalEvent);for(const et in B)this._fireEvent(et,B[et]);C&&this._fireEvent("move",C.originalEvent);for(const et in l){const{originalEvent:it}=l[et];this._fireEvent(et,it)}const j={};let $;for(const et in this._eventsInProgress){const{handlerName:it,originalEvent:pt}=this._eventsInProgress[et];this._handlersById[it].isActive()||(delete this._eventsInProgress[et],$=m[it]||pt,j[`${et}end`]=$)}for(const et in j)this._fireEvent(et,j[et]);const Y=p(this._eventsInProgress);if(b&&(M||C)&&!Y){this._updatingCamera=!0;const et=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),it=pt=>pt!==0&&-this._bearingSnap<pt&&pt<this._bearingSnap;!et||!et.essential&&a.h.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:$})),it(this._map.getBearing())&&this._map.resetNorth()):(it(et.bearing||this._map.getBearing())&&(et.bearing=0),et.freezeElevation=!0,this._map.easeTo(et,{originalEvent:$})),this._updatingCamera=!1}}_fireEvent(l,m){this._map.fire(new a.k(l,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((l=>{delete this._frameId,this.handleEvent(new w("renderFrame",{timeStamp:l})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class nt extends a.E{constructor(l,m){super(),this._renderFrameCallback=()=>{const b=Math.min((a.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=m.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new a.L(this.transform.center.lng,this.transform.center.lat)}setCenter(l,m){return this.jumpTo({center:l},m)}panBy(l,m,b){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},m),b)}panTo(l,m,b){return this.easeTo(a.e({center:l},m),b)}getZoom(){return this.transform.zoom}setZoom(l,m){return this.jumpTo({zoom:l},m),this}zoomTo(l,m,b){return this.easeTo(a.e({zoom:l},m),b)}zoomIn(l,m){return this.zoomTo(this.getZoom()+1,l,m),this}zoomOut(l,m){return this.zoomTo(this.getZoom()-1,l,m),this}getBearing(){return this.transform.bearing}setBearing(l,m){return this.jumpTo({bearing:l},m),this}getPadding(){return this.transform.padding}setPadding(l,m){return this.jumpTo({padding:l},m),this}rotateTo(l,m,b){return this.easeTo(a.e({bearing:l},m),b)}resetNorth(l,m){return this.rotateTo(0,a.e({duration:1e3},l),m),this}resetNorthPitch(l,m){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},l),m),this}snapToNorth(l,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,m):this}getPitch(){return this.transform.pitch}setPitch(l,m){return this.jumpTo({pitch:l},m),this}cameraForBounds(l,m){l=jt.convert(l);const b=m&&m.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),b,m)}_cameraForBoxAndBearing(l,m,b,M){const C={top:0,bottom:0,right:0,left:0};if(typeof(M=a.e({padding:C,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const ue=M.padding;M.padding={top:ue,bottom:ue,right:ue,left:ue}}M.padding=a.e(C,M.padding);const B=this.transform,j=B.padding,$=B.project(a.L.convert(l)),Y=B.project(a.L.convert(m)),et=$.rotate(-b*Math.PI/180),it=Y.rotate(-b*Math.PI/180),pt=new a.P(Math.max(et.x,it.x),Math.max(et.y,it.y)),At=new a.P(Math.min(et.x,it.x),Math.min(et.y,it.y)),Mt=pt.sub(At),Ot=(B.width-(j.left+j.right+M.padding.left+M.padding.right))/Mt.x,Tt=(B.height-(j.top+j.bottom+M.padding.top+M.padding.bottom))/Mt.y;if(Tt<0||Ot<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Wt=Math.min(B.scaleZoom(B.scale*Math.min(Ot,Tt)),M.maxZoom),oe=a.P.convert(M.offset),Rt=new a.P((M.padding.left-M.padding.right)/2,(M.padding.top-M.padding.bottom)/2).rotate(b*Math.PI/180),Kt=oe.add(Rt).mult(B.scale/B.zoomScale(Wt));return{center:B.unproject($.add(Y).div(2).sub(Kt)),zoom:Wt,bearing:b}}fitBounds(l,m,b){return this._fitInternal(this.cameraForBounds(l,m),m,b)}fitScreenCoordinates(l,m,b,M,C){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(l)),this.transform.pointLocation(a.P.convert(m)),b,M),M,C)}_fitInternal(l,m,b){return l?(delete(m=a.e(l,m)).padding,m.linear?this.easeTo(m,b):this.flyTo(m,b)):this}jumpTo(l,m){this.stop();const b=this._getTransformForUpdate();let M=!1,C=!1,B=!1;return"zoom"in l&&b.zoom!==+l.zoom&&(M=!0,b.zoom=+l.zoom),l.center!==void 0&&(b.center=a.L.convert(l.center)),"bearing"in l&&b.bearing!==+l.bearing&&(C=!0,b.bearing=+l.bearing),"pitch"in l&&b.pitch!==+l.pitch&&(B=!0,b.pitch=+l.pitch),l.padding==null||b.isPaddingEqual(l.padding)||(b.padding=l.padding),this._applyUpdatedTransform(b),this.fire(new a.k("movestart",m)).fire(new a.k("move",m)),M&&this.fire(new a.k("zoomstart",m)).fire(new a.k("zoom",m)).fire(new a.k("zoomend",m)),C&&this.fire(new a.k("rotatestart",m)).fire(new a.k("rotate",m)).fire(new a.k("rotateend",m)),B&&this.fire(new a.k("pitchstart",m)).fire(new a.k("pitch",m)).fire(new a.k("pitchend",m)),this.fire(new a.k("moveend",m))}calculateCameraOptionsFromTo(l,m,b,M=0){const C=a.U.fromLngLat(l,m),B=a.U.fromLngLat(b,M),j=B.x-C.x,$=B.y-C.y,Y=B.z-C.z,et=Math.hypot(j,$,Y);if(et===0)throw new Error("Can't calculate camera options with same From and To");const it=Math.hypot(j,$),pt=this.transform.scaleZoom(this.transform.cameraToCenterDistance/et/this.transform.tileSize),At=180*Math.atan2(j,-$)/Math.PI;let Mt=180*Math.acos(it/et)/Math.PI;return Mt=Y<0?90-Mt:90+Mt,{center:B.toLngLat(),zoom:pt,pitch:Mt,bearing:At}}easeTo(l,m){this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.bb},l)).animate===!1||!l.essential&&a.h.prefersReducedMotion)&&(l.duration=0);const b=this._getTransformForUpdate(),M=this.getZoom(),C=this.getBearing(),B=this.getPitch(),j=this.getPadding(),$="zoom"in l?+l.zoom:M,Y="bearing"in l?this._normalizeBearing(l.bearing,C):C,et="pitch"in l?+l.pitch:B,it="padding"in l?l.padding:b.padding,pt=a.P.convert(l.offset);let At=b.centerPoint.add(pt);const Mt=b.pointLocation(At),Ot=a.L.convert(l.center||Mt);this._normalizeCenter(Ot);const Tt=b.project(Mt),Wt=b.project(Ot).sub(Tt),oe=b.zoomScale($-M);let Rt,Kt;l.around&&(Rt=a.L.convert(l.around),Kt=b.locationPoint(Rt));const ue={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||$!==M,this._rotating=this._rotating||C!==Y,this._pitching=this._pitching||et!==B,this._padding=!b.isPaddingEqual(it),this._easeId=l.easeId,this._prepareEase(m,l.noMoveStart,ue),this.terrain&&this._prepareElevation(Ot),this._ease((de=>{if(this._zooming&&(b.zoom=a.B.number(M,$,de)),this._rotating&&(b.bearing=a.B.number(C,Y,de)),this._pitching&&(b.pitch=a.B.number(B,et,de)),this._padding&&(b.interpolatePadding(j,it,de),At=b.centerPoint.add(pt)),this.terrain&&!l.freezeElevation&&this._updateElevation(de),Rt)b.setLocationAtPoint(Rt,Kt);else{const be=b.zoomScale(b.zoom-M),ze=$>M?Math.min(2,oe):Math.max(.5,oe),Ae=Math.pow(ze,1-de),Ne=b.unproject(Tt.add(Wt.mult(de*Ae)).mult(be));b.setLocationAtPoint(b.renderWorldCopies?Ne.wrap():Ne,At)}this._applyUpdatedTransform(b),this._fireMoveEvents(m)}),(de=>{this.terrain&&this._finalizeElevation(),this._afterEase(m,de)}),l),this}_prepareEase(l,m,b={}){this._moving=!0,m||b.moving||this.fire(new a.k("movestart",l)),this._zooming&&!b.zooming&&this.fire(new a.k("zoomstart",l)),this._rotating&&!b.rotating&&this.fire(new a.k("rotatestart",l)),this._pitching&&!b.pitching&&this.fire(new a.k("pitchstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const m=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&m!==this._elevationTarget){const b=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(b-(m-(b*l+this._elevationStart))/(1-l)),this._elevationTarget=m}this.transform.elevation=a.B.number(this._elevationStart,this._elevationTarget,l)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(l){if(!this.transformCameraUpdate)return;const m=l.clone(),{center:b,zoom:M,pitch:C,bearing:B,elevation:j}=this.transformCameraUpdate(m);b&&(m.center=b),M!==void 0&&(m.zoom=M),C!==void 0&&(m.pitch=C),B!==void 0&&(m.bearing=B),j!==void 0&&(m.elevation=j),this.transform.apply(m)}_fireMoveEvents(l){this.fire(new a.k("move",l)),this._zooming&&this.fire(new a.k("zoom",l)),this._rotating&&this.fire(new a.k("rotate",l)),this._pitching&&this.fire(new a.k("pitch",l))}_afterEase(l,m){if(this._easeId&&m&&this._easeId===m)return;delete this._easeId;const b=this._zooming,M=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new a.k("zoomend",l)),M&&this.fire(new a.k("rotateend",l)),C&&this.fire(new a.k("pitchend",l)),this.fire(new a.k("moveend",l))}flyTo(l,m){if(!l.essential&&a.h.prefersReducedMotion){const on=a.F(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(on,m)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.bb},l);const b=this._getTransformForUpdate(),M=this.getZoom(),C=this.getBearing(),B=this.getPitch(),j=this.getPadding(),$="zoom"in l?a.ad(+l.zoom,b.minZoom,b.maxZoom):M,Y="bearing"in l?this._normalizeBearing(l.bearing,C):C,et="pitch"in l?+l.pitch:B,it="padding"in l?l.padding:b.padding,pt=b.zoomScale($-M),At=a.P.convert(l.offset);let Mt=b.centerPoint.add(At);const Ot=b.pointLocation(Mt),Tt=a.L.convert(l.center||Ot);this._normalizeCenter(Tt);const Wt=b.project(Ot),oe=b.project(Tt).sub(Wt);let Rt=l.curve;const Kt=Math.max(b.width,b.height),ue=Kt/pt,de=oe.mag();if("minZoom"in l){const on=a.ad(Math.min(l.minZoom,M,$),b.minZoom,b.maxZoom),Mi=Kt/b.zoomScale(on-M);Rt=Math.sqrt(Mi/de*2)}const be=Rt*Rt;function ze(on){const Mi=(ue*ue-Kt*Kt+(on?-1:1)*be*be*de*de)/(2*(on?ue:Kt)*be*de);return Math.log(Math.sqrt(Mi*Mi+1)-Mi)}function Ae(on){return(Math.exp(on)-Math.exp(-on))/2}function Ne(on){return(Math.exp(on)+Math.exp(-on))/2}const sn=ze(!1);let qn=function(on){return Ne(sn)/Ne(sn+Rt*on)},Ve=function(on){return Kt*((Ne(sn)*(Ae(Mi=sn+Rt*on)/Ne(Mi))-Ae(sn))/be)/de;var Mi},fn=(ze(!0)-sn)/Rt;if(Math.abs(de)<1e-6||!isFinite(fn)){if(Math.abs(Kt-ue)<1e-6)return this.easeTo(l,m);const on=ue<Kt?-1:1;fn=Math.abs(Math.log(ue/Kt))/Rt,Ve=function(){return 0},qn=function(Mi){return Math.exp(on*Rt*Mi)}}return l.duration="duration"in l?+l.duration:1e3*fn/("screenSpeed"in l?+l.screenSpeed/Rt:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=C!==Y,this._pitching=et!==B,this._padding=!b.isPaddingEqual(it),this._prepareEase(m,!1),this.terrain&&this._prepareElevation(Tt),this._ease((on=>{const Mi=on*fn,Ln=1/qn(Mi);b.zoom=on===1?$:M+b.scaleZoom(Ln),this._rotating&&(b.bearing=a.B.number(C,Y,on)),this._pitching&&(b.pitch=a.B.number(B,et,on)),this._padding&&(b.interpolatePadding(j,it,on),Mt=b.centerPoint.add(At)),this.terrain&&!l.freezeElevation&&this._updateElevation(on);const Cn=on===1?Tt:b.unproject(Wt.add(oe.mult(Ve(Mi))).mult(Ln));b.setLocationAtPoint(b.renderWorldCopies?Cn.wrap():Cn,Mt),this._applyUpdatedTransform(b),this._fireMoveEvents(m)}),(()=>{this.terrain&&this._finalizeElevation(),this._afterEase(m)}),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,m)}if(!l){const b=this.handlers;b&&b.stop(!1)}return this}_ease(l,m,b){b.animate===!1||b.duration===0?(l(1),m()):(this._easeStart=a.h.now(),this._easeOptions=b,this._onEaseFrame=l,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,m){l=a.b5(l,-180,180);const b=Math.abs(l-m);return Math.abs(l-360-m)<b&&(l-=360),Math.abs(l+360-m)<b&&(l+=360),l}_normalizeCenter(l){const m=this.transform;if(!m.renderWorldCopies||m.lngRange)return;const b=l.lng-m.center.lng;l.lng+=b>180?-360:b<-180?360:0}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(a.L.convert(l),this.transform.tileZoom)-this.transform.elevation:null}}class mt{constructor(l={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=m=>{!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"&&m.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options&&this.options.compact,this._container=_.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=_.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,m){const b=this._map._getUIString(`AttributionControl.${m}`);l.title=b,l.setAttribute("aria-label",b)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map((M=>typeof M!="string"?"":M))):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const m=this._map.style.sourceCaches;for(const M in m){const C=m[M];if(C.used||C.usedForTerrain){const B=C.getSource();B.attribution&&l.indexOf(B.attribution)<0&&l.push(B.attribution)}}l=l.filter((M=>String(M).trim())),l.sort(((M,C)=>M.length-C.length)),l=l.filter(((M,C)=>{for(let B=C+1;B<l.length;B++)if(l[B].indexOf(M)>=0)return!1;return!0}));const b=l.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,l.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Lt{constructor(l={}){this._updateCompact=()=>{const m=this._container.children;if(m.length){const b=m[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&b.classList.add("maplibregl-compact"):b.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=_.create("div","maplibregl-ctrl");const m=_.create("a","maplibregl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://maplibre.org/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){_.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ae{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const m=++this._id;return this._queue.push({callback:l,id:m,cancelled:!1}),m}remove(l){const m=this._currentlyRunning,b=m?this._queue.concat(m):this._queue;for(const M of b)if(M.id===l)return void(M.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const m=this._currentlyRunning=this._queue;this._queue=[];for(const b of m)if(!b.cancelled&&(b.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const fe={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Ce=a.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Qe extends a.E{constructor(l){super(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,l.usedForTerrain=!0,l.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,m){this.sourceCache.update(l,m),this._renderableTilesKeys=[];const b={};for(const M of l.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:m}))b[M.key]=!0,this._renderableTilesKeys.push(M.key),this._tiles[M.key]||(M.posMatrix=new Float64Array(16),a.aS(M.posMatrix,0,a.N,0,a.N,0,1),this._tiles[M.key]=new rn(M,this.tileSize));for(const M in this._tiles)b[M]||delete this._tiles[M]}freeRtt(l){for(const m in this._tiles){const b=this._tiles[m];(!l||b.tileID.equals(l)||b.tileID.isChildOf(l)||l.isChildOf(b.tileID))&&(b.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((l=>this.getTileByID(l)))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const m={};for(const b of this._renderableTilesKeys){const M=this._tiles[b].tileID;if(M.canonical.equals(l.canonical)){const C=l.clone();C.posMatrix=new Float64Array(16),a.aS(C.posMatrix,0,a.N,0,a.N,0,1),m[b]=C}else if(M.canonical.isChildOf(l.canonical)){const C=l.clone();C.posMatrix=new Float64Array(16);const B=M.canonical.z-l.canonical.z,j=M.canonical.x-(M.canonical.x>>B<<B),$=M.canonical.y-(M.canonical.y>>B<<B),Y=a.N>>B;a.aS(C.posMatrix,0,Y,0,Y,0,1),a.$(C.posMatrix,C.posMatrix,[-j*Y,-$*Y,0]),m[b]=C}else if(l.canonical.isChildOf(M.canonical)){const C=l.clone();C.posMatrix=new Float64Array(16);const B=l.canonical.z-M.canonical.z,j=l.canonical.x-(l.canonical.x>>B<<B),$=l.canonical.y-(l.canonical.y>>B<<B),Y=a.N>>B;a.aS(C.posMatrix,0,a.N,0,a.N,0,1),a.$(C.posMatrix,C.posMatrix,[j*Y,$*Y,0]),a.a0(C.posMatrix,C.posMatrix,[1/2**B,1/2**B,0]),m[b]=C}}return m}getSourceTile(l,m){const b=this.sourceCache._source;let M=l.overscaledZ-this.deltaZoom;if(M>b.maxzoom&&(M=b.maxzoom),M<b.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(M).key);let C=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!C||!C.dem)&&m)for(;M>=b.minzoom&&(!C||!C.dem);)C=this.sourceCache.getTileByID(l.scaledTo(M--).key);return C}tilesAfterTime(l=Date.now()){return Object.values(this._tiles).filter((m=>m.timeAdded>=l))}}class yn{constructor(l,m,b){this.painter=l,this.sourceCache=new Qe(m),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,m,b,M=a.N){var C;if(!(m>=0&&m<M&&b>=0&&b<M))return 0;const B=this.getTerrainData(l),j=(C=B.tile)===null||C===void 0?void 0:C.dem;if(!j)return 0;const $=(function(Mt,Ot,Tt){var Wt=Ot[0],oe=Ot[1];return Mt[0]=Tt[0]*Wt+Tt[4]*oe+Tt[12],Mt[1]=Tt[1]*Wt+Tt[5]*oe+Tt[13],Mt})([],[m/M*a.N,b/M*a.N],B.u_terrain_matrix),Y=[$[0]*j.dim,$[1]*j.dim],et=Math.floor(Y[0]),it=Math.floor(Y[1]),pt=Y[0]-et,At=Y[1]-it;return j.get(et,it)*(1-pt)*(1-At)+j.get(et+1,it)*pt*(1-At)+j.get(et,it+1)*(1-pt)*At+j.get(et+1,it+1)*pt*At}getElevationForLngLatZoom(l,m){const{tileID:b,mercatorX:M,mercatorY:C}=this._getOverscaledTileIDFromLngLatZoom(l,m);return this.getElevation(b,M%a.N,C%a.N,a.N)}getElevation(l,m,b,M=a.N){return this.getDEMElevation(l,m,b,M)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const M=this.painter.context,C=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new xt(M,C,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new xt(M,new a.R({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ao([])}const m=this.sourceCache.getSourceTile(l,!0);if(m&&m.dem&&(!m.demTexture||m.needsTerrainPrepare)){const M=this.painter.context;m.demTexture=this.painter.getTileTexture(m.dem.stride),m.demTexture?m.demTexture.update(m.dem.getPixels(),{premultiply:!1}):m.demTexture=new xt(M,m.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),m.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),m.needsTerrainPrepare=!1}const b=m&&m+m.tileID.key+l.key;if(b&&!this._demMatrixCache[b]){const M=this.sourceCache.sourceCache._source.maxzoom;let C=l.canonical.z-m.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=M?C=l.canonical.z-M:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const B=l.canonical.x-(l.canonical.x>>C<<C),j=l.canonical.y-(l.canonical.y>>C<<C),$=a.bc(new Float64Array(16),[1/(a.N<<C),1/(a.N<<C),0]);a.$($,$,[B*a.N,j*a.N,0]),this._demMatrixCache[l.key]={matrix:$,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:m&&m.dem&&m.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:m&&m.dem&&m.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(m&&m.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:m}}getFramebuffer(l){const m=this.painter,b=m.width/devicePixelRatio,M=m.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new xt(m.context,{width:b,height:M,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new xt(m.context,{width:b,height:M,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=m.context.createFramebuffer(b,M,!0,!1),this._fbo.depthAttachment.set(m.context.createRenderbuffer(m.context.gl.DEPTH_COMPONENT16,b,M))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const m=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let C=0,B=0;C<this._coordsTextureSize;C++)for(let j=0;j<this._coordsTextureSize;j++,B+=4)m[B+0]=255&j,m[B+1]=255&C,m[B+2]=j>>8<<4|C>>8,m[B+3]=0;const b=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(m.buffer)),M=new xt(l,b,l.gl.RGBA,{premultiply:!1});return M.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(l){const m=new Uint8Array(4),b=this.painter.context,M=b.gl;b.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,m),b.bindFramebuffer.set(null);const C=m[0]+(m[2]>>4<<8),B=m[1]+((15&m[2])<<8),j=this.coordsIndex[255-m[3]],$=j&&this.sourceCache.getTileByID(j);if(!$)return null;const Y=this._coordsTextureSize,et=(1<<$.tileID.canonical.z)*Y;return new a.U(this._allowMercatorOverflow(l,($.tileID.canonical.x*Y+C)/et),($.tileID.canonical.y*Y+B)/et,this.getElevation($.tileID,C,B,Y))}getTerrainMesh(){if(this._mesh)return this._mesh;const l=this.painter.context,m=new a.bd,b=new a.b0,M=this.meshSize,C=a.N/M,B=M*M;for(let it=0;it<=M;it++)for(let pt=0;pt<=M;pt++)m.emplaceBack(pt*C,it*C,0);for(let it=0;it<B;it+=M+1)for(let pt=0;pt<M;pt++)b.emplaceBack(pt+it,M+pt+it+1,M+pt+it+2),b.emplaceBack(pt+it,M+pt+it+2,pt+it+1);const j=m.length,$=j+2*(M+1);for(const it of[0,1])for(let pt=0;pt<=M;pt++)for(const At of[0,1])m.emplaceBack(pt*C,it*a.N,At);for(let it=0;it<2*M;it+=2)b.emplaceBack($+it,$+it+1,$+it+3),b.emplaceBack($+it,$+it+3,$+it+2),b.emplaceBack(j+it,j+it+3,j+it+1),b.emplaceBack(j+it,j+it+2,j+it+3);const Y=m.length,et=Y+2*(M+1);for(const it of[0,1])for(let pt=0;pt<=M;pt++)for(const At of[0,1])m.emplaceBack(it*a.N,pt*C,At);for(let it=0;it<2*M;it+=2)b.emplaceBack(Y+it,Y+it+1,Y+it+3),b.emplaceBack(Y+it,Y+it+3,Y+it+2),b.emplaceBack(et+it,et+it+3,et+it+1),b.emplaceBack(et+it,et+it+2,et+it+3);return this._mesh={indexBuffer:l.createIndexBuffer(b),vertexBuffer:l.createVertexBuffer(m,Ce.members),segments:a.S.simpleSegment(0,0,m.length,b.length)},this._mesh}getMeshFrameDelta(l){return 2*Math.PI*a.be/Math.pow(2,l)/5}getMinTileElevationForLngLatZoom(l,m){var b;const{tileID:M}=this._getOverscaledTileIDFromLngLatZoom(l,m);return(b=this.getMinMaxElevation(M).minElevation)!==null&&b!==void 0?b:0}getMinMaxElevation(l){const m=this.getTerrainData(l).tile,b={minElevation:null,maxElevation:null};return m&&m.dem&&(b.minElevation=m.dem.min*this.exaggeration,b.maxElevation=m.dem.max*this.exaggeration),b}_getOverscaledTileIDFromLngLatZoom(l,m){const b=a.U.fromLngLat(l.wrap()),M=(1<<m)*a.N,C=b.x*M,B=b.y*M,j=Math.floor(C/a.N),$=Math.floor(B/a.N);return{tileID:new a.O(m,0,m,j,$),mercatorX:C,mercatorY:B}}_allowMercatorOverflow(l,m){const b=l.x<this.painter.width/2;let M=a.bf(m);const C=this.painter.transform.center.lng;return b&&Math.sign(M)>0&&Math.sign(C)<0||!b&&Math.sign(M)<0&&Math.sign(C)>0?(M=360*Math.sign(C)+M,a.G(M)):m}}class $n{constructor(l,m,b){this._context=l,this._size=m,this._tileSize=b,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const m=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),b=new xt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return b.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),m.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),m.colorAttachment.set(b.texture),{id:l,fbo:m,texture:b,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((m=>l.id!==m)),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const m of this._recentlyUsed)if(!this._objects[m].inUse)return this._objects[m];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((l=>!l.inUse))===!1}}const ci={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Qi{constructor(l,m){this.painter=l,this.terrain=m,this.pool=new $n(l.context,30,m.sourceCache.tileSize*m.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,m){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter((b=>!l._layers[b].isHidden(m))),this._coordsDescendingInv={};for(const b in l.sourceCaches){this._coordsDescendingInv[b]={};const M=l.sourceCaches[b].getVisibleCoordinates();for(const C of M){const B=this.terrain.sourceCache.getTerrainCoords(C);for(const j in B)this._coordsDescendingInv[b][j]||(this._coordsDescendingInv[b][j]=[]),this._coordsDescendingInv[b][j].push(B[j])}}this._coordsDescendingInvStr={};for(const b of l._order){const M=l._layers[b],C=M.source;if(ci[M.type]&&!this._coordsDescendingInvStr[C]){this._coordsDescendingInvStr[C]={};for(const B in this._coordsDescendingInv[C])this._coordsDescendingInvStr[C][B]=this._coordsDescendingInv[C][B].map((j=>j.key)).sort().join()}}for(const b of this._renderableTiles)for(const M in this._coordsDescendingInvStr){const C=this._coordsDescendingInvStr[M][b.tileID.key];C&&C!==b.rttCoords[M]&&(b.rtt=[])}}renderLayer(l){if(l.isHidden(this.painter.transform.zoom))return!1;const m=l.type,b=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(ci[m]&&(this._prevType&&ci[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(l.id),!M))return!0;if(ci[this._prevType]||ci[m]&&M){this._prevType=m;const C=this._stacks.length-1,B=this._stacks[C]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(ui(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[C]){const Y=this.pool.getObjectForId(j.rtt[C].id);if(Y.stamp===j.rtt[C].stamp){this.pool.useObject(Y);continue}}const $=this.pool.getOrCreateFreeObject();this.pool.useObject($),this.pool.stampObject($),j.rtt[C]={id:$.id,stamp:$.stamp},b.context.bindFramebuffer.set($.fbo.framebuffer),b.context.clear({color:a.aT.transparent,stencil:0}),b.currentStencilSource=void 0;for(let Y=0;Y<B.length;Y++){const et=b.style._layers[B[Y]],it=et.source?this._coordsDescendingInv[et.source][j.tileID.key]:[j.tileID];b.context.viewport.set([0,0,$.fbo.width,$.fbo.height]),b._renderTileClippingMasks(et,it),b.renderLayer(b,b.style.sourceCaches[et.source],et,it),et.source&&(j.rttCoords[et.source]=this._coordsDescendingInvStr[et.source][j.tileID.key])}}return ui(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ci[m]}return!1}}const Je=y,Ge={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},ri=E=>{E.touchstart=E.dragStart,E.touchmoveWindow=E.dragMove,E.touchend=E.dragEnd},Xn={showCompass:!0,showZoom:!0,visualizePitch:!1};class uo{constructor(l,m,b=!1){this.mousedown=B=>{this.startMouse(a.e({},B,{ctrlKey:!0,preventDefault:()=>B.preventDefault()}),_.mousePos(this.element,B)),_.addEventListener(window,"mousemove",this.mousemove),_.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=B=>{this.moveMouse(B,_.mousePos(this.element,B))},this.mouseup=B=>{this.mouseRotate.dragEnd(B),this.mousePitch&&this.mousePitch.dragEnd(B),this.offTemp()},this.touchstart=B=>{B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,B.targetTouches)[0],this.startTouch(B,this._startPos),_.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.addEventListener(window,"touchend",this.touchend))},this.touchmove=B=>{B.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,B.targetTouches)[0],this.moveTouch(B,this._lastPos))},this.touchend=B=>{B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const M=l.dragRotate._mouseRotate.getClickTolerance(),C=l.dragRotate._mousePitch.getClickTolerance();this.element=m,this.mouseRotate=Yr({clickTolerance:M,enable:!0}),this.touchRotate=(({enable:B,clickTolerance:j,bearingDegreesPerPixelMoved:$=.8})=>{const Y=new th;return new ao({clickTolerance:j,move:(et,it)=>({bearingDelta:(it.x-et.x)*$}),moveStateManager:Y,enable:B,assignEvents:ri})})({clickTolerance:M,enable:!0}),this.map=l,b&&(this.mousePitch=es({clickTolerance:C,enable:!0}),this.touchPitch=(({enable:B,clickTolerance:j,pitchDegreesPerPixelMoved:$=-.5})=>{const Y=new th;return new ao({clickTolerance:j,move:(et,it)=>({pitchDelta:(it.y-et.y)*$}),moveStateManager:Y,enable:B,assignEvents:ri})})({clickTolerance:C,enable:!0})),_.addEventListener(m,"mousedown",this.mousedown),_.addEventListener(m,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(m,"touchcancel",this.reset)}startMouse(l,m){this.mouseRotate.dragStart(l,m),this.mousePitch&&this.mousePitch.dragStart(l,m),_.disableDrag()}startTouch(l,m){this.touchRotate.dragStart(l,m),this.touchPitch&&this.touchPitch.dragStart(l,m),_.disableDrag()}moveMouse(l,m){const b=this.map,{bearingDelta:M}=this.mouseRotate.dragMove(l,m)||{};if(M&&b.setBearing(b.getBearing()+M),this.mousePitch){const{pitchDelta:C}=this.mousePitch.dragMove(l,m)||{};C&&b.setPitch(b.getPitch()+C)}}moveTouch(l,m){const b=this.map,{bearingDelta:M}=this.touchRotate.dragMove(l,m)||{};if(M&&b.setBearing(b.getBearing()+M),this.touchPitch){const{pitchDelta:C}=this.touchPitch.dragMove(l,m)||{};C&&b.setPitch(b.getPitch()+C)}}off(){const l=this.element;_.removeEventListener(l,"mousedown",this.mousedown),_.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend),_.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){_.enableDrag(),_.removeEventListener(window,"mousemove",this.mousemove),_.removeEventListener(window,"mouseup",this.mouseup),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend)}}let oi;function uu(E,l,m){if(E=new a.L(E.lng,E.lat),l){const b=new a.L(E.lng-360,E.lat),M=new a.L(E.lng+360,E.lat),C=m.locationPoint(E).distSqr(l);m.locationPoint(b).distSqr(l)<C?E=b:m.locationPoint(M).distSqr(l)<C&&(E=M)}for(;Math.abs(E.lng-m.center.lng)>180;){const b=m.locationPoint(E);if(b.x>=0&&b.y>=0&&b.x<=m.width&&b.y<=m.height)break;E.lng>m.center.lng?E.lng-=360:E.lng+=360}return E}const Pr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wc(E,l,m){const b=E.classList;for(const M in Pr)b.remove(`maplibregl-${m}-anchor-${M}`);b.add(`maplibregl-${m}-anchor-${l}`)}class zi extends a.E{constructor(l){if(super(),this._onKeyPress=m=>{const b=m.code,M=m.charCode||m.keyCode;b!=="Space"&&b!=="Enter"&&M!==32&&M!==13||this.togglePopup()},this._onMapClick=m=>{const b=m.originalEvent.target,M=this._element;this._popup&&(b===M||M.contains(b))&&this.togglePopup()},this._update=m=>{if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();(m?.type==="terrain"||m?.type==="render"&&!b)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=uu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let M="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?M=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(M=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),m&&m.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,`${Pr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${M}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout((()=>{const B=this._map.unproject(this._pos),j=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=B.distanceTo(this._lngLat)>20*j?"0.2":"1.0",this._opacityTimeout=null}),100))},this._onMove=m=>{if(!this._isDragging){const b=this._clickTolerance||this._map._clickTolerance;this._isDragging=m.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=m=>{this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._pointerdownPos=m.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");const m=_.createNS("http://www.w3.org/2000/svg","svg"),b=41,M=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${b}px`),m.setAttributeNS(null,"width",`${M}px`),m.setAttributeNS(null,"viewBox",`0 0 ${M} ${b}`);const C=_.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"stroke","none"),C.setAttributeNS(null,"stroke-width","1"),C.setAttributeNS(null,"fill","none"),C.setAttributeNS(null,"fill-rule","evenodd");const B=_.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const j=_.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const $=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Wt of $){const oe=_.createNS("http://www.w3.org/2000/svg","ellipse");oe.setAttributeNS(null,"opacity","0.04"),oe.setAttributeNS(null,"cx","10.5"),oe.setAttributeNS(null,"cy","5.80029008"),oe.setAttributeNS(null,"rx",Wt.rx),oe.setAttributeNS(null,"ry",Wt.ry),j.appendChild(oe)}const Y=_.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"fill",this._color);const et=_.createNS("http://www.w3.org/2000/svg","path");et.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Y.appendChild(et);const it=_.createNS("http://www.w3.org/2000/svg","g");it.setAttributeNS(null,"opacity","0.25"),it.setAttributeNS(null,"fill","#000000");const pt=_.createNS("http://www.w3.org/2000/svg","path");pt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),it.appendChild(pt);const At=_.createNS("http://www.w3.org/2000/svg","g");At.setAttributeNS(null,"transform","translate(6.0, 7.0)"),At.setAttributeNS(null,"fill","#FFFFFF");const Mt=_.createNS("http://www.w3.org/2000/svg","g");Mt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ot=_.createNS("http://www.w3.org/2000/svg","circle");Ot.setAttributeNS(null,"fill","#000000"),Ot.setAttributeNS(null,"opacity","0.25"),Ot.setAttributeNS(null,"cx","5.5"),Ot.setAttributeNS(null,"cy","5.5"),Ot.setAttributeNS(null,"r","5.4999962");const Tt=_.createNS("http://www.w3.org/2000/svg","circle");Tt.setAttributeNS(null,"fill","#FFFFFF"),Tt.setAttributeNS(null,"cx","5.5"),Tt.setAttributeNS(null,"cy","5.5"),Tt.setAttributeNS(null,"r","5.4999962"),Mt.appendChild(Ot),Mt.appendChild(Tt),B.appendChild(j),B.appendChild(Y),B.appendChild(it),B.appendChild(At),B.appendChild(Mt),m.appendChild(B),m.setAttributeNS(null,"height",b*this._scale+"px"),m.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(m),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(m=>{m.preventDefault()})),this._element.addEventListener("mousedown",(m=>{m.preventDefault()})),wc(this._element,this._anchor,"marker"),l&&l.className)for(const m of l.className.split(" "))this._element.classList.add(m);this._popup=null}addTo(l){return this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.L.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const M=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?l.remove():l.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const hi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let vi=0,cl=!1;const Uo={maxWidth:100,unit:"metric"};function Vo(E,l,m){const b=m&&m.maxWidth||100,M=E._container.clientHeight/2,C=E.unproject([0,M]),B=E.unproject([b,M]),j=C.distanceTo(B);if(m&&m.unit==="imperial"){const $=3.2808*j;$>5280?Na(l,b,$/5280,E._getUIString("ScaleControl.Miles")):Na(l,b,$,E._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?Na(l,b,j/1852,E._getUIString("ScaleControl.NauticalMiles")):j>=1e3?Na(l,b,j/1e3,E._getUIString("ScaleControl.Kilometers")):Na(l,b,j,E._getUIString("ScaleControl.Meters"))}function Na(E,l,m,b){const M=(function(C){const B=Math.pow(10,`${Math.floor(C)}`.length-1);let j=C/B;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:(function($){const Y=Math.pow(10,Math.ceil(-Math.log($)/Math.LN10));return Math.round($*Y)/Y})(j),B*j})(m);E.style.width=l*(M/m)+"px",E.innerHTML=`${M}&nbsp;${b}`}const Ls={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ys(E){if(E){if(typeof E=="number"){const l=Math.round(Math.abs(E)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,E),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-E),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(E,0),right:new a.P(-E,0)}}if(E instanceof a.P||Array.isArray(E)){const l=a.P.convert(E);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(E.center||[0,0]),top:a.P.convert(E.top||[0,0]),"top-left":a.P.convert(E["top-left"]||[0,0]),"top-right":a.P.convert(E["top-right"]||[0,0]),bottom:a.P.convert(E.bottom||[0,0]),"bottom-left":a.P.convert(E["bottom-left"]||[0,0]),"bottom-right":a.P.convert(E["bottom-right"]||[0,0]),left:a.P.convert(E.left||[0,0]),right:a.P.convert(E.right||[0,0])}}return ys(new a.P(0,0))}const eh={extend:(E,...l)=>a.e(E,...l),run(E){E()},logToElement(E,l=!1,m="log"){const b=window.document.getElementById(m);b&&(l&&(b.innerHTML=""),b.innerHTML+=`<br>${E}`)}},nh=y;class ei{static get version(){return nh}static get workerCount(){return Zi.workerCount}static set workerCount(l){Zi.workerCount=l}static get maxParallelImageRequests(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(l){a.c.MAX_PARALLEL_IMAGE_REQUESTS=l}static get workerUrl(){return a.c.WORKER_URL}static set workerUrl(l){a.c.WORKER_URL=l}static addProtocol(l,m){a.c.REGISTERED_PROTOCOLS[l]=m}static removeProtocol(l){delete a.c.REGISTERED_PROTOCOLS[l]}}return ei.Map=class extends nt{constructor(E){if(a.bg.mark(a.bh.create),(E=a.e({},Ge,E)).minZoom!=null&&E.maxZoom!=null&&E.minZoom>E.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(E.minPitch!=null&&E.maxPitch!=null&&E.minPitch>E.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(E.minPitch!=null&&E.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(E.maxPitch!=null&&E.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Cr(E.minZoom,E.maxZoom,E.minPitch,E.maxPitch,E.renderWorldCopies),{bearingSnap:E.bearingSnap}),this._cooperativeGesturesOnWheel=l=>{this._onCooperativeGesture(l,l[this._metaKey],1)},this._contextLost=l=>{l.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.k("webglcontextlost",{originalEvent:l}))},this._contextRestored=l=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:l}))},this._onMapScroll=l=>{if(l.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=E.interactive,this._cooperativeGestures=E.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=E.maxTileCacheSize,this._maxTileCacheZoomLevels=E.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=E.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=E.preserveDrawingBuffer,this._antialias=E.antialias,this._trackResize=E.trackResize,this._bearingSnap=E.bearingSnap,this._refreshExpiredTiles=E.refreshExpiredTiles,this._fadeDuration=E.fadeDuration,this._crossSourceCollisions=E.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=E.collectResourceTiming,this._renderTaskQueue=new ae,this._controls=[],this._mapId=a.a2(),this._locale=a.e({},fe,E.locale),this._clickTolerance=E.clickTolerance,this._overridePixelRatio=E.pixelRatio,this._maxCanvasSize=E.maxCanvasSize,this.transformCameraUpdate=E.transformCameraUpdate,this._imageQueueHandle=H.addThrottleControl((()=>this.isMoving())),this._requestManager=new W(E.transformRequest),typeof E.container=="string"){if(this._container=document.getElementById(E.container),!this._container)throw new Error(`Container '${E.container}' not found.`)}else{if(!(E.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=E.container}if(E.maxBounds&&this.setMaxBounds(E.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let l=!1;const m=ms((b=>{this._trackResize&&!this._removed&&this.resize(b)._update()}),50);this._resizeObserver=new ResizeObserver((b=>{l?m(b):l=!0})),this._resizeObserver.observe(this._container)}this.handlers=new V(this,E),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=E.hash&&new sl(typeof E.hash=="string"&&E.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),E.bounds&&(this.resize(),this.fitBounds(E.bounds,a.e({},E.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=E.localIdeographFontFamily,this._validateStyle=E.validateStyle,E.style&&this.setStyle(E.style,{localIdeographFontFamily:E.localIdeographFontFamily}),E.attributionControl&&this.addControl(new mt({customAttribution:E.customAttribution})),E.maplibreLogo&&this.addControl(new Lt,E.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(l=>{this._update(l.dataType==="style"),this.fire(new a.k(`${l.dataType}data`,l))})),this.on("dataloading",(l=>{this.fire(new a.k(`${l.dataType}dataloading`,l))})),this.on("dataabort",(l=>{this.fire(new a.k("sourcedataabort",l))}))}_getMapId(){return this._mapId}addControl(E,l){if(l===void 0&&(l=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=E.onAdd(this);this._controls.push(E);const b=this._controlPositions[l];return l.indexOf("bottom")!==-1?b.insertBefore(m,b.firstChild):b.appendChild(m),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(E);return l>-1&&this._controls.splice(l,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}calculateCameraOptionsFromTo(E,l,m,b){return b==null&&this.terrain&&(b=this.terrain.getElevationForLngLatZoom(m,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(E,l,m,b)}resize(E){var l;const m=this._containerDimensions(),b=m[0],M=m[1],C=this._getClampedPixelRatio(b,M);if(this._resizeCanvas(b,M,C),this.painter.resize(b,M,C),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const $=this._getClampedPixelRatio(b,M);this._resizeCanvas(b,M,$),this.painter.resize(b,M,$)}this.transform.resize(b,M),(l=this._requestedCameraState)===null||l===void 0||l.resize(b,M);const B=!this._moving;return B&&(this.stop(),this.fire(new a.k("movestart",E)).fire(new a.k("move",E))),this.fire(new a.k("resize",E)),B&&this.fire(new a.k("moveend",E)),this}_getClampedPixelRatio(E,l){const{0:m,1:b}=this._maxCanvasSize,M=this.getPixelRatio(),C=E*M,B=l*M;return Math.min(C>m?m/C:1,B>b?b/B:1)*M}getPixelRatio(){var E;return(E=this._overridePixelRatio)!==null&&E!==void 0?E:devicePixelRatio}setPixelRatio(E){this._overridePixelRatio=E,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(jt.convert(E)),this._update()}setMinZoom(E){if((E=E??-2)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E??22)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(E){return this._cooperativeGestures=E,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(E){return this.transform.locationPoint(a.L.convert(E),this.style&&this.terrain)}unproject(E){return this.transform.pointLocation(a.P.convert(E),this.terrain)}isMoving(){var E;return this._moving||((E=this.handlers)===null||E===void 0?void 0:E.isMoving())}isZooming(){var E;return this._zooming||((E=this.handlers)===null||E===void 0?void 0:E.isZooming())}isRotating(){var E;return this._rotating||((E=this.handlers)===null||E===void 0?void 0:E.isRotating())}_createDelegatedListener(E,l,m){if(E==="mouseenter"||E==="mouseover"){let b=!1;return{layer:l,listener:m,delegates:{mousemove:C=>{const B=this.getLayer(l)?this.queryRenderedFeatures(C.point,{layers:[l]}):[];B.length?b||(b=!0,m.call(this,new Vr(E,this,C.originalEvent,{features:B}))):b=!1},mouseout:()=>{b=!1}}}}if(E==="mouseleave"||E==="mouseout"){let b=!1;return{layer:l,listener:m,delegates:{mousemove:B=>{(this.getLayer(l)?this.queryRenderedFeatures(B.point,{layers:[l]}):[]).length?b=!0:b&&(b=!1,m.call(this,new Vr(E,this,B.originalEvent)))},mouseout:B=>{b&&(b=!1,m.call(this,new Vr(E,this,B.originalEvent)))}}}}{const b=M=>{const C=this.getLayer(l)?this.queryRenderedFeatures(M.point,{layers:[l]}):[];C.length&&(M.features=C,m.call(this,M),delete M.features)};return{layer:l,listener:m,delegates:{[E]:b}}}}on(E,l,m){if(m===void 0)return super.on(E,l);const b=this._createDelegatedListener(E,l,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(b);for(const M in b.delegates)this.on(M,b.delegates[M]);return this}once(E,l,m){if(m===void 0)return super.once(E,l);const b=this._createDelegatedListener(E,l,m);for(const M in b.delegates)this.once(M,b.delegates[M]);return this}off(E,l,m){return m===void 0?super.off(E,l):(this._delegatedListeners&&this._delegatedListeners[E]&&(b=>{const M=this._delegatedListeners[E];for(let C=0;C<M.length;C++){const B=M[C];if(B.layer===l&&B.listener===m){for(const j in B.delegates)this.off(j,B.delegates[j]);return M.splice(C,1),this}}})(),this)}queryRenderedFeatures(E,l){if(!this.style)return[];let m;const b=E instanceof a.P||Array.isArray(E),M=b?E:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(b?{}:E)||{},M instanceof a.P||typeof M[0]=="number")m=[a.P.convert(M)];else{const C=a.P.convert(M[0]),B=a.P.convert(M[1]);m=[C,new a.P(B.x,C.y),B,new a.P(C.x,B.y),C]}return this.style.queryRenderedFeatures(m,l,this.transform)}querySourceFeatures(E,l){return this.style.querySourceFeatures(E,l)}setStyle(E,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(E,l))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){const l=this._locale[E];if(l==null)throw new Error(`Missing UI string '${E}'`);return l}_updateStyle(E,l){if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(E,l)));const m=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!E)),E?(this.style=new Rn(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E,l,m):this.style.loadJSON(E,l,m),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Rn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,l){if(typeof E=="string"){const m=this._requestManager.transformRequest(E,K.Style);a.f(m,((b,M)=>{b?this.fire(new a.j(b)):M&&this._updateDiff(M,l)}))}else typeof E=="object"&&this._updateDiff(E,l)}_updateDiff(E,l){try{this.style.setState(E,l)&&this._update(!0)}catch(m){a.w(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(E,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(E,l){return this._lazyInitEmptyStyle(),this.style.addSource(E,l),this._update(!0)}isSourceLoaded(E){const l=this.style&&this.style.sourceCaches[E];if(l!==void 0)return l.loaded();this.fire(new a.j(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),E){const l=this.style.sourceCaches[E.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${E.source}`);for(const m in this.style._layers){const b=this.style._layers[m];b.type==="hillshade"&&b.source===E.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new yn(this.painter,l,E),this.painter.renderToTexture=new Qi(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=m=>{m.dataType==="style"?this.terrain.sourceCache.freeRtt():m.dataType==="source"&&m.tile&&(m.sourceId!==E.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(m.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:E})),this}getTerrain(){var E,l;return(l=(E=this.terrain)===null||E===void 0?void 0:E.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const E=this.style&&this.style.sourceCaches;for(const l in E){const m=E[l]._tiles;for(const b in m){const M=m[b];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}addSourceType(E,l,m){return this._lazyInitEmptyStyle(),this.style.addSourceType(E,l,m)}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,l,m={}){const{pixelRatio:b=1,sdf:M=!1,stretchX:C,stretchY:B,content:j}=m;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.a(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:$,height:Y,data:et}=l,it=l;return this.style.addImage(E,{data:new a.R({width:$,height:Y},new Uint8Array(et)),pixelRatio:b,stretchX:C,stretchY:B,content:j,sdf:M,version:0,userImage:it}),it.onAdd&&it.onAdd(this,E),this}}{const{width:$,height:Y,data:et}=a.h.getImageData(l);this.style.addImage(E,{data:new a.R({width:$,height:Y},et),pixelRatio:b,stretchX:C,stretchY:B,content:j,sdf:M,version:0})}}updateImage(E,l){const m=this.style.getImage(E);if(!m)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=l instanceof HTMLImageElement||a.a(l)?a.h.getImageData(l):l,{width:M,height:C,data:B}=b;if(M===void 0||C===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==m.data.width||C!==m.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(l instanceof HTMLImageElement||a.a(l));return m.data.replace(B,j),this.style.updateImage(E,m),this}getImage(E){return this.style.getImage(E)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E,l){H.getImage(this._requestManager.transformRequest(E,K.Image),l)}listImages(){return this.style.listImages()}addLayer(E,l){return this._lazyInitEmptyStyle(),this.style.addLayer(E,l),this._update(!0)}moveLayer(E,l){return this.style.moveLayer(E,l),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(E,l,m){return this.style.setLayerZoomRange(E,l,m),this._update(!0)}setFilter(E,l,m={}){return this.style.setFilter(E,l,m),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,l,m,b={}){return this.style.setPaintProperty(E,l,m,b),this._update(!0)}getPaintProperty(E,l){return this.style.getPaintProperty(E,l)}setLayoutProperty(E,l,m,b={}){return this.style.setLayoutProperty(E,l,m,b),this._update(!0)}getLayoutProperty(E,l){return this.style.getLayoutProperty(E,l)}setGlyphs(E,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(E,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(E,l,m={}){return this._lazyInitEmptyStyle(),this.style.addSprite(E,l,m,(b=>{b||this._update(!0)})),this}removeSprite(E){return this._lazyInitEmptyStyle(),this.style.removeSprite(E),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(E,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(E,l,(m=>{m||this._update(!0)})),this}setLight(E,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,l),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(E,l){return this.style.setFeatureState(E,l),this._update()}removeFeatureState(E,l){return this.style.removeFeatureState(E,l),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,l=0;return this._container&&(E=this._container.clientWidth||400,l=this._container.clientHeight||300),[E,l]}_setupContainer(){const E=this._container;E.classList.add("maplibregl-map");const l=this._canvasContainer=_.create("div","maplibregl-canvas-container",E);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=_.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const m=this._containerDimensions(),b=this._getClampedPixelRatio(m[0],m[1]);this._resizeCanvas(m[0],m[1],b);const M=this._controlContainer=_.create("div","maplibregl-control-container",E),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((B=>{C[B]=_.create("div",`maplibregl-ctrl-${B} `,M)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=_.create("div","maplibregl-cooperative-gesture-screen",this._container);let E=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(E=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${E}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){_.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(E,l,m){this._canvas.width=Math.floor(m*E),this._canvas.height=Math.floor(m*l),this._canvas.style.width=`${E}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const E={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let l=null;this._canvas.addEventListener("webglcontextcreationerror",(b=>{l={requestedAttributes:E},b&&(l.statusMessage=b.statusMessage,l.type=b.type)}),{once:!0});const m=this._canvas.getContext("webgl2",E)||this._canvas.getContext("webgl",E);if(!m){const b="Failed to initialize WebGL";throw l?(l.message=b,new Error(JSON.stringify(l))):new Error(b)}this.painter=new Ll(m,this.transform),x.testSupport(m)}_onCooperativeGesture(E,l,m){return!l&&m<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){const l=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let m=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const M=this.transform.zoom,C=a.h.now();this.style.zoomHistory.update(M,C);const B=new a.a8(M,{now:C,fadeDuration:l,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),j=B.crossFadingFactor();j===1&&j===this._crossFadingFactor||(m=!0,this._crossFadingFactor=j),this.style.update(B)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,l,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bg.mark(a.bh.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||m)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,a.bg.mark(a.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var E;this._hash&&this._hash.remove();for(const m of this._controls)m.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(E=this._resizeObserver)===null||E===void 0||E.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),_.remove(this._canvasContainer),_.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),a.bg.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.h.frame((E=>{a.bg.frame(E),this._frame=null,this._render(E)})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}get version(){return Je}getCameraTargetElevation(){return this.transform.elevation}},ei.NavigationControl=class{constructor(E){this._updateZoomButtons=()=>{const l=this._map.getZoom(),m=l===this._map.getMaxZoom(),b=l===this._map.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())},this._rotateCompassArrow=()=>{const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=l},this._setButtonTitle=(l,m)=>{const b=this._map._getUIString(`NavigationControl.${m}`);l.title=b,l.setAttribute("aria-label",b)},this.options=a.e({},Xn,E),this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(l=>this._map.zoomIn({},{originalEvent:l}))),_.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(l=>this._map.zoomOut({},{originalEvent:l}))),_.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})})),this._compassIcon=_.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new uo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,l){const m=_.create("button",E,this._container);return m.type="button",m.addEventListener("click",l),m}},ei.GeolocateControl=class extends a.E{constructor(E){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",l)),this._finish()}},this._updateCamera=l=>{const m=new a.L(l.coords.longitude,l.coords.latitude),b=l.coords.accuracy,M=this._map.getBearing(),C=a.e({bearing:M},this.options.fitBoundsOptions),B=jt.fromLngLat(m,b);this._map.fitBounds(B,C,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const m=new a.L(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&cl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=l=>{if(this._map){if(this._container.addEventListener("contextmenu",(m=>m.preventDefault())),this._geolocateButton=_.create("button","maplibregl-ctrl-geolocate",this._container),_.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{const m=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new zi({element:this._dotElement}),this._circleElement=_.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(m=>{m.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m.originalEvent&&m.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")))}))}},this.options=a.e({},hi,E)}onAdd(E){return this._map=E,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),(function(l,m=!1){oi===void 0||m?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then((b=>{oi=b.state!=="denied",l(oi)})).catch((()=>{oi=!!window.navigator.geolocation,l(oi)})):(oi=!!window.navigator.geolocation,l(oi)):l(oi)})(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,vi=0,cl=!1}_isOutOfMapMaxBounds(E){const l=this._map.getMaxBounds(),m=E.coords;return l&&(m.longitude<l.getWest()||m.longitude>l.getEast()||m.latitude<l.getSouth()||m.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const E=this._map.getBounds(),l=E.getSouthEast(),m=E.getNorthEast(),b=l.distanceTo(m),M=Math.ceil(this._accuracy/(b/this._map._container.clientHeight)*2);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":vi--,cl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),vi++,vi>1?(E={maximumAge:6e5,timeout:0},cl=!0):(E=this.options.positionOptions,cl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},ei.AttributionControl=mt,ei.LogoControl=Lt,ei.ScaleControl=class{constructor(E){this._onMove=()=>{Vo(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,Vo(this._map,this._container,this.options)},this.options=a.e({},Uo,E)}getDefaultPosition(){return"bottom-left"}onAdd(E){return this._map=E,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},ei.FullscreenControl=class extends a.E{constructor(E={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){_.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const E=this._fullscreenButton=_.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);_.create("span","maplibregl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},ei.TerrainControl=class{constructor(E){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=E}onAdd(E){return this._map=E,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=_.create("button","maplibregl-ctrl-terrain",this._container),_.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){_.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},ei.Popup=class extends a.E{constructor(E){super(),this.remove=()=>(this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.k("close")),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=_.create("div","maplibregl-popup",this._map.getContainer()),this._tip=_.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const B of this.options.className.split(" "))this._container.classList.add(B);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=uu(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!l)return;const m=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);let b=this.options.anchor;const M=ys(this.options.offset);if(!b){const B=this._container.offsetWidth,j=this._container.offsetHeight;let $;$=m.y+M.bottom.y<j?["top"]:m.y>this._map.transform.height-j?["bottom"]:[],m.x<B/2?$.push("left"):m.x>this._map.transform.width-B/2&&$.push("right"),b=$.length===0?"bottom":$.join("-")}const C=m.add(M[b]).round();_.setTransform(this._container,`${Pr[b]} translate(${C.x}px,${C.y}px)`),wc(this._container,b,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Ls),E)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=a.L.convert(E),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){const l=document.createDocumentFragment(),m=document.createElement("body");let b;for(m.innerHTML=E;b=m.firstChild,b;)l.appendChild(b);return this.setDOMContent(l)}getMaxWidth(){var E;return(E=this._container)===null||E===void 0?void 0:E.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){this._container&&this._container.classList.add(E)}removeClassName(E){this._container&&this._container.classList.remove(E)}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}_createCloseButton(){this.options.closeButton&&(this._closeButton=_.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const E=this._container.querySelector(hl);E&&E.focus()}},ei.Marker=zi,ei.Style=Rn,ei.LngLat=a.L,ei.LngLatBounds=jt,ei.Point=a.P,ei.MercatorCoordinate=a.U,ei.Evented=a.E,ei.AJAXError=a.bi,ei.config=a.c,ei.CanvasSource=ge,ei.GeoJSONSource=Ie,ei.ImageSource=Le,ei.RasterDEMTileSource=Oe,ei.RasterTileSource=ce,ei.VectorTileSource=le,ei.VideoSource=Pe,ei.setRTLTextPlugin=a.bj,ei.getRTLTextPluginStatus=a.bk,ei.prewarm=function(){jr().acquire(cn)},ei.clearPrewarmedResources=function(){const E=Ii;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(cn),Ii=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},eh.extend(ei,{isSafari:a.ac,getPerformanceMetrics:a.bg.getPerformanceMetrics}),ei}));var f=r;return f}))})(Xv)),Xv.exports}var FR=Rtt();const UR=Pu(FR),Btt=vk({__proto__:null,default:UR},[FR]),Ntt=`
.heatbox { display:flex; flex-direction:column; gap:10px; height:100%; }
.hb-top { display:flex; justify-content:space-between; gap:12px; align-items:center; }
.hb-left { display:flex; gap:8px; align-items:center; }
.hb-right { display:flex; gap:10px; align-items:center; }
.hb-btn { height:32px; padding:0 10px; border:1px solid #ddd; border-radius:8px; background:#fff; cursor:pointer; }
.hb-btn.ghost { background:#fafafa; }
.hb-field { font-size:14px; color:#333; display:inline-flex; gap:6px; align-items:center; }
.hb-legend { display:flex; gap:8px; align-items:center; font-size:12px; color:#666; }
.hb-legend i { display:inline-block; width:160px; height:10px; border-radius:999px; }
.hb-monthbar { display:flex; gap:4px; align-items:center; padding:8px 0; }
.hb-m { min-width:36px; height:28px; border:1px solid #e5e7eb; background:#fff; border-radius:6px; font-size:13px; cursor:pointer; }
.hb-m[disabled] { opacity:.35; cursor:not-allowed; }
.hb-m.active { background:#ffedd5; border-color:#fdba74; font-weight:700; }
.hb-warn { margin-top:6px; padding:10px 12px; border:1px solid #ffe58f; background:#fffbe6; border-radius:8px; color:#8b5e00; font-size:13px; }
`,iw=t=>t<10?`0${t}`:String(t),_k=t=>String(t??"").replace(/\D+/g,""),jtt=t=>`${t.slice(0,4)}-${t.slice(4,6)}`,rw=t=>String(t??"").toLowerCase().replace(/\([^)]*\)/g,"").replace(/[^\w-]+/g," ").replace(/\s+/g,"").trim(),ty={ym:["","","","yyyymm","ym","month","","","(yyyymm)"],sgg5:["","sigcd","sggcd","adm_drcd","adm_cd5","sig_cd5","code"],law10:["","10","adm_cd","","","hid_cd"],elec:["","","","","electricity","mwh","elec"],gas:["","","gas","gj","citygas",""]},ey=(t,e)=>{const n=t.map(i=>[i,rw(i)]);for(const i of e){const r=n.find(([,u])=>u===rw(i));if(r)return r[0]}for(const i of e){const r=n.find(([,u])=>u.includes(rw(i)));if(r)return r[0]}return null};function Ftt(t){const e=(i,r)=>{for(const u of i)if(typeof u[0]=="number"){const[f,a]=u;r.minX=Math.min(r.minX,f),r.maxX=Math.max(r.maxX,f),r.minY=Math.min(r.minY,a),r.maxY=Math.max(r.maxY,a)}else e(u,r)};if(!t)return null;const n={minX:999,maxX:-999,minY:999,maxY:-999};if(t.type==="Polygon")e(t.coordinates,n);else if(t.type==="MultiPolygon")e(t.coordinates,n);else return null;return[(n.minX+n.maxX)/2,(n.minY+n.maxY)/2]}function Utt({csvUrl:t="/__2020-2025__v2.csv",sggGeoUrl:e="/korea/sgg.json",forceYmKey:n,forceSggKey:i,forceElecKey:r,forceGasKey:u,autoPlay:f=!0,intervalMs:a=900}){const[y,_]=G.useState(""),[x,A]=G.useState("elec"),[O,I]=G.useState(!0),[F,q]=G.useState([]),[H,K]=G.useState(""),[W,X]=G.useState(0),[tt,Q]=G.useState(f),[at,ht]=G.useState(1),ot=G.useMemo(()=>Array.from(new Set(F.map(Pt=>Pt.slice(0,4)))),[F]),ct=G.useMemo(()=>H?F.filter(Pt=>Pt.startsWith(H)):[],[F,H]),xt=F[W]||"-",wt=G.useRef(new Map),Ct=G.useRef({elec:new Map,gas:new Map});G.useEffect(()=>{(async()=>{try{const Pt=await fetch(e);if(!Pt.ok)throw new Error(`HTTP ${Pt.status}`);const Bt=await Pt.json(),Ft=new Map;for(const $t of Bt.features||[]){const ft=$t.properties||{},St=ft.SIG_CD??ft.SGG_CD??ft.ADM_DR_CD??ft.code??ft.sig_cd??ft.sgg_cd;if(!St)continue;const jt=String(St).padStart(5,"0").slice(0,5),Yt=Ftt($t.geometry);Yt&&Ft.set(jt,Yt)}wt.current=Ft,Ft.size||_(" sgg.json   .")}catch{_(" /korea/sgg.json  ")}})()},[e]),G.useEffect(()=>{(async()=>{try{const Pt=await fetch(t,{cache:"no-cache"});if(!Pt.ok)throw new Error(`HTTP ${Pt.status}`);let Bt=await Pt.text();if(/<!doctype|<html/i.test(Bt.slice(0,200)))throw new Error("CSV_URL_RETURNED_HTML");Bt=Bt.replace(/^\uFEFF/,"");const Ft=lT.parse(Bt,{header:!0,skipEmptyLines:"greedy",dynamicTyping:!0,transformHeader:nn=>String(nn).replace(/\([^)]*\)/g,"").replace(/\t/g," ").replace(/\s+/g," ").trim()}),$t=Array.isArray(Ft.data)?Ft.data:[];if(!$t.length){_(" CSV .");return}const ft=Ft.meta.fields||Object.keys($t[0]),St={ymKey:ey(ft,ty.ym),sgg5Key:ey(ft,ty.sgg5),law10Key:ey(ft,ty.law10),elecKey:ey(ft,ty.elec),gasKey:ey(ft,ty.gas)},jt=n||St.ymKey,Yt=i||St.sgg5Key||St.law10Key,le=r||St.elecKey,ce=u||St.gasKey;if(!jt||!Yt||!le&&!ce){_(" CSV   (//). props  .");return}const Oe=nn=>nn==null||nn===""?null:typeof nn=="number"?nn:Number(String(nn).replace(/,/g,"")),Ie=wt.current,Gt=new Map,Le=new Map,Pe=new Set;for(const nn of $t){const qe=nn[jt],an=_k(String(qe??""));if(an.length<6)continue;const Ke=jtt(an.slice(0,6));Pe.add(Ke);const On=_k(String(nn[Yt]??"")).slice(0,5).padStart(5,"0"),rn=Ie.get(On);if(!rn)continue;const In=Oe(nn[le]),me=Oe(nn[ce]);Number.isFinite(In)&&(Gt.has(Ke)||Gt.set(Ke,[]),Gt.get(Ke).push({lng:rn[0],lat:rn[1],value:In})),Number.isFinite(me)&&(Le.has(Ke)||Le.set(Ke,[]),Le.get(Ke).push({lng:rn[0],lat:rn[1],value:me}))}Ct.current={elec:Gt,gas:Le};const ge=Array.from(Pe).sort();q(ge),K(ge[0]?.slice(0,4)||""),X(0),_(ge.length?"":" CSV     .")}catch(Pt){console.error(Pt),_(" CSV / ")}})()},[t,n,i,r,u]),G.useEffect(()=>{if(!tt||ct.length===0)return;const Pt=ct,Bt=F[W],Ft=Math.max(0,Pt.indexOf(Bt)),$t=Math.max(150,a/(at||1)),ft=setInterval(()=>{const St=(Ft+1)%Pt.length,jt=Pt[St],Yt=F.findIndex(le=>le===jt);Yt>=0&&X(Yt)},$t);return()=>clearInterval(ft)},[tt,ct,F,W,a,at]);const re=G.useMemo(()=>{const Pt=Ct.current[x].get(xt)||[];let Bt=1;return O&&Pt.length&&(Bt=Pt.reduce((Ft,$t)=>$t.value>Ft?$t.value:Ft,0)||1),{type:"FeatureCollection",features:Pt.map(Ft=>({type:"Feature",geometry:{type:"Point",coordinates:[Ft.lng,Ft.lat]},properties:{w:O?Math.max(.05,Ft.value/Bt):Ft.value}}))}},[x,O,xt]),ve=G.useMemo(()=>({"heatmap-radius":["interpolate",["linear"],["zoom"],5,18,7,28,10,40],"heatmap-intensity":1,"heatmap-opacity":.9,"heatmap-weight":["coalesce",["get","w"],0],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(47,128,237,0)",.2,"rgb(86,204,242)",.4,"rgb(255,209,102)",.6,"rgb(252,163,17)",1,"rgb(230,57,70)"]}),[]),Ee=Pt=>{if(!H)return;const Bt=`${H}-${iw(Pt)}`,Ft=F.findIndex($t=>$t===Bt);Ft>=0&&X(Ft)};xt!=="-"&&Number(xt.slice(5,7));const Nt=G.useMemo(()=>{const Pt=new Set(ct),Bt={};for(let Ft=1;Ft<=12;Ft++)Bt[Ft]=Pt.has(`${H}-${iw(Ft)}`);return Bt},[H,ct]);return vt.jsxs("div",{className:"heatbox",style:{height:"100%"},children:[vt.jsx("style",{children:Ntt}),vt.jsxs("div",{className:"hb-top",children:[vt.jsxs("div",{className:"hb-left",children:[vt.jsx("button",{className:"hb-btn",onClick:()=>Q(Pt=>!Pt),children:tt?" ":" "}),vt.jsx("button",{className:"hb-btn ghost",onClick:()=>{if(ct.length===0)return;const Pt=ct,Ft=(Math.max(0,Pt.indexOf(xt))-1+Pt.length)%Pt.length,$t=Pt[Ft],ft=F.findIndex(St=>St===$t);ft>=0&&X(ft)},children:" "}),vt.jsx("button",{className:"hb-btn ghost",onClick:()=>{if(ct.length===0)return;const Pt=ct,Ft=(Math.max(0,Pt.indexOf(xt))+1)%Pt.length,$t=Pt[Ft],ft=F.findIndex(St=>St===$t);ft>=0&&X(ft)},children:" "}),vt.jsx("span",{style:{fontWeight:700},children:xt})]}),vt.jsxs("div",{className:"hb-right",children:[vt.jsxs("label",{className:"hb-field",children:["",vt.jsxs("select",{value:x,onChange:Pt=>A(Pt.target.value),children:[vt.jsx("option",{value:"elec",children:""}),vt.jsx("option",{value:"gas",children:""})]})]}),vt.jsxs("label",{className:"hb-field",children:["",vt.jsx("input",{type:"checkbox",checked:O,onChange:Pt=>I(Pt.target.checked)})]}),vt.jsxs("label",{className:"hb-field",children:["",vt.jsxs("select",{value:at,onChange:Pt=>ht(Number(Pt.target.value)),children:[vt.jsx("option",{value:.5,children:"0.5x"}),vt.jsx("option",{value:1,children:"1x"}),vt.jsx("option",{value:2,children:"2x"}),vt.jsx("option",{value:3,children:"3x"})]})]}),vt.jsxs("label",{className:"hb-field",children:["",vt.jsx("select",{value:H,onChange:Pt=>{K(Pt.target.value);const Bt=F.find(Ft=>Ft.startsWith(Pt.target.value));Bt&&X(F.findIndex(Ft=>Ft===Bt))},children:ot.map(Pt=>vt.jsx("option",{value:Pt,children:Pt},Pt))})]})]})]}),vt.jsxs("div",{className:"hb-legend",children:[vt.jsx("span",{children:""}),vt.jsx("i",{style:{background:"linear-gradient(90deg,#2f80ed,#56ccf2,#ffd166,#fca311,#e63946)"}}),vt.jsx("span",{children:""})]}),vt.jsx("div",{style:{flex:1,minHeight:360},children:vt.jsxs(Ott,{mapLib:UR,initialViewState:{longitude:127.8,latitude:36.3,zoom:6.2,minZoom:5.8,maxZoom:13},mapStyle:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",reuseMaps:!0,style:{height:"100%",width:"100%"},children:[vt.jsx(Dtt,{position:"bottom-right"}),vt.jsx(Ltt,{id:"heat-src",type:"geojson",data:re}),vt.jsx(ztt,{id:"heat-lyr",type:"heatmap",source:"heat-src",paint:ve})]})}),vt.jsxs("div",{className:"hb-monthbar",children:[vt.jsx("button",{className:"hb-btn",onClick:()=>Q(Pt=>!Pt),children:tt?"":""}),Array.from({length:12},(Pt,Bt)=>Bt+1).map(Pt=>{const Bt=Nt[Pt],Ft=Bt&&Pt===(xt!=="-"?Number(xt.slice(5,7)):0)&&xt.startsWith(H);return vt.jsxs("button",{className:`hb-m ${Ft?"active":""}`,disabled:!Bt,onClick:()=>Ee(Pt),title:Bt?`${H}-${iw(Pt)}`:" ",children:[Pt,""]},Pt)})]}),y&&vt.jsx("div",{className:"hb-warn",children:y})]})}function Vtt(){return vt.jsxs("div",{className:Jg.wrap,children:[vt.jsxs("header",{className:Jg.header,children:[vt.jsx("h1",{children:"  "}),vt.jsx("p",{children:" CSV      ."})]}),vt.jsxs("section",{className:Jg.card,children:[vt.jsx("div",{className:Jg.cardHead,children:vt.jsx("h3",{children:"   ()"})}),vt.jsx("div",{className:Jg.panel,style:{height:520},children:vt.jsx(Utt,{csvUrl:"/__2020-2025__v2.csv",sggGeoUrl:"/korea/sgg.json",forceYmKey:"",forceSggKey:"",forceElecKey:"",forceGasKey:"",autoPlay:!0,intervalMs:900})})]})]})}function $tt(){return vt.jsxs(bB,{children:[vt.jsx(DB,{}),vt.jsx("main",{className:"pt-20 min-h-[80vh] bg-[#fffbea]",children:vt.jsxs(Q3,{children:[vt.jsx(pm,{path:"/",element:vt.jsx(ZF,{})}),vt.jsx(pm,{path:"gas-emission",element:vt.jsx(n8,{})}),vt.jsx(pm,{path:"energy-usage",element:vt.jsx(Vtt,{})}),vt.jsx(pm,{path:"usage-stats",element:vt.jsx($J,{})}),vt.jsx(pm,{path:"gas-stats",element:vt.jsx(qJ,{})})]})}),vt.jsx(zB,{})]})}o3.createRoot(document.getElementById("root")).render(vt.jsx(G.StrictMode,{children:vt.jsx($tt,{})}));
