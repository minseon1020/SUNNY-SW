function Dk(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const l=Object.getOwnPropertyDescriptor(i,r);l&&Object.defineProperty(t,r,l.get?l:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function Ou(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function f3(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var sb={exports:{}},jg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PT;function d3(){if(PT)return jg;PT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,l){var f=null;if(l!==void 0&&(f=""+l),r.key!==void 0&&(f=""+r.key),"key"in r){l={};for(var a in r)a!=="key"&&(l[a]=r[a])}else l=r;return r=l.ref,{$$typeof:t,type:i,key:f,ref:r!==void 0?r:null,props:l}}return jg.Fragment=e,jg.jsx=n,jg.jsxs=n,jg}var kT;function p3(){return kT||(kT=1,sb.exports=d3()),sb.exports}var xt=p3(),ob={exports:{}},Gn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT;function m3(){if(OT)return Gn;OT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),f=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),O=Symbol.iterator;function z(pt){return pt===null||typeof pt!="object"?null:(pt=O&&pt[O]||pt["@@iterator"],typeof pt=="function"?pt:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,H={};function Q(pt,Tt,$t){this.props=pt,this.context=Tt,this.refs=H,this.updater=$t||F}Q.prototype.isReactComponent={},Q.prototype.setState=function(pt,Tt){if(typeof pt!="object"&&typeof pt!="function"&&pt!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,pt,Tt,"setState")},Q.prototype.forceUpdate=function(pt){this.updater.enqueueForceUpdate(this,pt,"forceUpdate")};function X(){}X.prototype=Q.prototype;function Y(pt,Tt,$t){this.props=pt,this.context=Tt,this.refs=H,this.updater=$t||F}var W=Y.prototype=new X;W.constructor=Y,V(W,Q.prototype),W.isPureReactComponent=!0;var J=Array.isArray;function ot(){}var ht={H:null,A:null,T:null,S:null},rt=Object.prototype.hasOwnProperty;function ut(pt,Tt,$t){var Yt=$t.ref;return{$$typeof:t,type:pt,key:Tt,ref:Yt!==void 0?Yt:null,props:$t}}function _t(pt,Tt){return ut(pt.type,Tt,pt.props)}function bt(pt){return typeof pt=="object"&&pt!==null&&pt.$$typeof===t}function Pt(pt){var Tt={"=":"=0",":":"=2"};return"$"+pt.replace(/[=:]/g,function($t){return Tt[$t]})}var re=/\/+/g;function ye(pt,Tt){return typeof pt=="object"&&pt!==null&&pt.key!=null?Pt(""+pt.key):Tt.toString(36)}function fe(pt){switch(pt.status){case"fulfilled":return pt.value;case"rejected":throw pt.reason;default:switch(typeof pt.status=="string"?pt.then(ot,ot):(pt.status="pending",pt.then(function(Tt){pt.status==="pending"&&(pt.status="fulfilled",pt.value=Tt)},function(Tt){pt.status==="pending"&&(pt.status="rejected",pt.reason=Tt)})),pt.status){case"fulfilled":return pt.value;case"rejected":throw pt.reason}}throw pt}function kt(pt,Tt,$t,Yt,se){var le=typeof pt;(le==="undefined"||le==="boolean")&&(pt=null);var Ae=!1;if(pt===null)Ae=!0;else switch(le){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(pt.$$typeof){case t:case e:Ae=!0;break;case x:return Ae=pt._init,kt(Ae(pt._payload),Tt,$t,Yt,se)}}if(Ae)return se=se(pt),Ae=Yt===""?"."+ye(pt,0):Yt,J(se)?($t="",Ae!=null&&($t=Ae.replace(re,"$&/")+"/"),kt(se,Tt,$t,"",function(Pe){return Pe})):se!=null&&(bt(se)&&(se=_t(se,$t+(se.key==null||pt&&pt.key===se.key?"":(""+se.key).replace(re,"$&/")+"/")+Ae)),Tt.push(se)),1;Ae=0;var Ie=Yt===""?".":Yt+":";if(J(pt))for(var Wt=0;Wt<pt.length;Wt++)Yt=pt[Wt],le=Ie+ye(Yt,Wt),Ae+=kt(Yt,Tt,$t,le,se);else if(Wt=z(pt),typeof Wt=="function")for(pt=Wt.call(pt),Wt=0;!(Yt=pt.next()).done;)Yt=Yt.value,le=Ie+ye(Yt,Wt++),Ae+=kt(Yt,Tt,$t,le,se);else if(le==="object"){if(typeof pt.then=="function")return kt(fe(pt),Tt,$t,Yt,se);throw Tt=String(pt),Error("Objects are not valid as a React child (found: "+(Tt==="[object Object]"?"object with keys {"+Object.keys(pt).join(", ")+"}":Tt)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function Ot(pt,Tt,$t){if(pt==null)return pt;var Yt=[],se=0;return kt(pt,Yt,"","",function(le){return Tt.call($t,le,se++)}),Yt}function St(pt){if(pt._status===-1){var Tt=pt._result;Tt=Tt(),Tt.then(function($t){(pt._status===0||pt._status===-1)&&(pt._status=1,pt._result=$t)},function($t){(pt._status===0||pt._status===-1)&&(pt._status=2,pt._result=$t)}),pt._status===-1&&(pt._status=0,pt._result=Tt)}if(pt._status===1)return pt._result.default;throw pt._result}var jt=typeof reportError=="function"?reportError:function(pt){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof pt=="object"&&pt!==null&&typeof pt.message=="string"?String(pt.message):String(pt),error:pt});if(!window.dispatchEvent(Tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",pt);return}console.error(pt)},Vt={map:Ot,forEach:function(pt,Tt,$t){Ot(pt,function(){Tt.apply(this,arguments)},$t)},count:function(pt){var Tt=0;return Ot(pt,function(){Tt++}),Tt},toArray:function(pt){return Ot(pt,function(Tt){return Tt})||[]},only:function(pt){if(!bt(pt))throw Error("React.Children.only expected to receive a single React element child.");return pt}};return Gn.Activity=M,Gn.Children=Vt,Gn.Component=Q,Gn.Fragment=n,Gn.Profiler=r,Gn.PureComponent=Y,Gn.StrictMode=i,Gn.Suspense=g,Gn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ht,Gn.__COMPILER_RUNTIME={__proto__:null,c:function(pt){return ht.H.useMemoCache(pt)}},Gn.cache=function(pt){return function(){return pt.apply(null,arguments)}},Gn.cacheSignal=function(){return null},Gn.cloneElement=function(pt,Tt,$t){if(pt==null)throw Error("The argument must be a React element, but you passed "+pt+".");var Yt=V({},pt.props),se=pt.key;if(Tt!=null)for(le in Tt.key!==void 0&&(se=""+Tt.key),Tt)!rt.call(Tt,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&Tt.ref===void 0||(Yt[le]=Tt[le]);var le=arguments.length-2;if(le===1)Yt.children=$t;else if(1<le){for(var Ae=Array(le),Ie=0;Ie<le;Ie++)Ae[Ie]=arguments[Ie+2];Yt.children=Ae}return ut(pt.type,se,Yt)},Gn.createContext=function(pt){return pt={$$typeof:f,_currentValue:pt,_currentValue2:pt,_threadCount:0,Provider:null,Consumer:null},pt.Provider=pt,pt.Consumer={$$typeof:l,_context:pt},pt},Gn.createElement=function(pt,Tt,$t){var Yt,se={},le=null;if(Tt!=null)for(Yt in Tt.key!==void 0&&(le=""+Tt.key),Tt)rt.call(Tt,Yt)&&Yt!=="key"&&Yt!=="__self"&&Yt!=="__source"&&(se[Yt]=Tt[Yt]);var Ae=arguments.length-2;if(Ae===1)se.children=$t;else if(1<Ae){for(var Ie=Array(Ae),Wt=0;Wt<Ae;Wt++)Ie[Wt]=arguments[Wt+2];se.children=Ie}if(pt&&pt.defaultProps)for(Yt in Ae=pt.defaultProps,Ae)se[Yt]===void 0&&(se[Yt]=Ae[Yt]);return ut(pt,le,se)},Gn.createRef=function(){return{current:null}},Gn.forwardRef=function(pt){return{$$typeof:a,render:pt}},Gn.isValidElement=bt,Gn.lazy=function(pt){return{$$typeof:x,_payload:{_status:-1,_result:pt},_init:St}},Gn.memo=function(pt,Tt){return{$$typeof:_,type:pt,compare:Tt===void 0?null:Tt}},Gn.startTransition=function(pt){var Tt=ht.T,$t={};ht.T=$t;try{var Yt=pt(),se=ht.S;se!==null&&se($t,Yt),typeof Yt=="object"&&Yt!==null&&typeof Yt.then=="function"&&Yt.then(ot,jt)}catch(le){jt(le)}finally{Tt!==null&&$t.types!==null&&(Tt.types=$t.types),ht.T=Tt}},Gn.unstable_useCacheRefresh=function(){return ht.H.useCacheRefresh()},Gn.use=function(pt){return ht.H.use(pt)},Gn.useActionState=function(pt,Tt,$t){return ht.H.useActionState(pt,Tt,$t)},Gn.useCallback=function(pt,Tt){return ht.H.useCallback(pt,Tt)},Gn.useContext=function(pt){return ht.H.useContext(pt)},Gn.useDebugValue=function(){},Gn.useDeferredValue=function(pt,Tt){return ht.H.useDeferredValue(pt,Tt)},Gn.useEffect=function(pt,Tt){return ht.H.useEffect(pt,Tt)},Gn.useEffectEvent=function(pt){return ht.H.useEffectEvent(pt)},Gn.useId=function(){return ht.H.useId()},Gn.useImperativeHandle=function(pt,Tt,$t){return ht.H.useImperativeHandle(pt,Tt,$t)},Gn.useInsertionEffect=function(pt,Tt){return ht.H.useInsertionEffect(pt,Tt)},Gn.useLayoutEffect=function(pt,Tt){return ht.H.useLayoutEffect(pt,Tt)},Gn.useMemo=function(pt,Tt){return ht.H.useMemo(pt,Tt)},Gn.useOptimistic=function(pt,Tt){return ht.H.useOptimistic(pt,Tt)},Gn.useReducer=function(pt,Tt,$t){return ht.H.useReducer(pt,Tt,$t)},Gn.useRef=function(pt){return ht.H.useRef(pt)},Gn.useState=function(pt){return ht.H.useState(pt)},Gn.useSyncExternalStore=function(pt,Tt,$t){return ht.H.useSyncExternalStore(pt,Tt,$t)},Gn.useTransition=function(){return ht.H.useTransition()},Gn.version="19.2.0",Gn}var DT;function Lm(){return DT||(DT=1,ob.exports=m3()),ob.exports}var Z=Lm();const yy=Ou(Z),g3=Dk({__proto__:null,default:yy},[Z]);var lb={exports:{}},Fg={},ub={exports:{}},cb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function y3(){return zT||(zT=1,(function(t){function e(kt,Ot){var St=kt.length;kt.push(Ot);t:for(;0<St;){var jt=St-1>>>1,Vt=kt[jt];if(0<r(Vt,Ot))kt[jt]=Ot,kt[St]=Vt,St=jt;else break t}}function n(kt){return kt.length===0?null:kt[0]}function i(kt){if(kt.length===0)return null;var Ot=kt[0],St=kt.pop();if(St!==Ot){kt[0]=St;t:for(var jt=0,Vt=kt.length,pt=Vt>>>1;jt<pt;){var Tt=2*(jt+1)-1,$t=kt[Tt],Yt=Tt+1,se=kt[Yt];if(0>r($t,St))Yt<Vt&&0>r(se,$t)?(kt[jt]=se,kt[Yt]=St,jt=Yt):(kt[jt]=$t,kt[Tt]=St,jt=Tt);else if(Yt<Vt&&0>r(se,St))kt[jt]=se,kt[Yt]=St,jt=Yt;else break t}}return Ot}function r(kt,Ot){var St=kt.sortIndex-Ot.sortIndex;return St!==0?St:kt.id-Ot.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var f=Date,a=f.now();t.unstable_now=function(){return f.now()-a}}var g=[],_=[],x=1,M=null,O=3,z=!1,F=!1,V=!1,H=!1,Q=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function W(kt){for(var Ot=n(_);Ot!==null;){if(Ot.callback===null)i(_);else if(Ot.startTime<=kt)i(_),Ot.sortIndex=Ot.expirationTime,e(g,Ot);else break;Ot=n(_)}}function J(kt){if(V=!1,W(kt),!F)if(n(g)!==null)F=!0,ot||(ot=!0,Pt());else{var Ot=n(_);Ot!==null&&fe(J,Ot.startTime-kt)}}var ot=!1,ht=-1,rt=5,ut=-1;function _t(){return H?!0:!(t.unstable_now()-ut<rt)}function bt(){if(H=!1,ot){var kt=t.unstable_now();ut=kt;var Ot=!0;try{t:{F=!1,V&&(V=!1,X(ht),ht=-1),z=!0;var St=O;try{e:{for(W(kt),M=n(g);M!==null&&!(M.expirationTime>kt&&_t());){var jt=M.callback;if(typeof jt=="function"){M.callback=null,O=M.priorityLevel;var Vt=jt(M.expirationTime<=kt);if(kt=t.unstable_now(),typeof Vt=="function"){M.callback=Vt,W(kt),Ot=!0;break e}M===n(g)&&i(g),W(kt)}else i(g);M=n(g)}if(M!==null)Ot=!0;else{var pt=n(_);pt!==null&&fe(J,pt.startTime-kt),Ot=!1}}break t}finally{M=null,O=St,z=!1}Ot=void 0}}finally{Ot?Pt():ot=!1}}}var Pt;if(typeof Y=="function")Pt=function(){Y(bt)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ye=re.port2;re.port1.onmessage=bt,Pt=function(){ye.postMessage(null)}}else Pt=function(){Q(bt,0)};function fe(kt,Ot){ht=Q(function(){kt(t.unstable_now())},Ot)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(kt){kt.callback=null},t.unstable_forceFrameRate=function(kt){0>kt||125<kt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rt=0<kt?Math.floor(1e3/kt):5},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_next=function(kt){switch(O){case 1:case 2:case 3:var Ot=3;break;default:Ot=O}var St=O;O=Ot;try{return kt()}finally{O=St}},t.unstable_requestPaint=function(){H=!0},t.unstable_runWithPriority=function(kt,Ot){switch(kt){case 1:case 2:case 3:case 4:case 5:break;default:kt=3}var St=O;O=kt;try{return Ot()}finally{O=St}},t.unstable_scheduleCallback=function(kt,Ot,St){var jt=t.unstable_now();switch(typeof St=="object"&&St!==null?(St=St.delay,St=typeof St=="number"&&0<St?jt+St:jt):St=jt,kt){case 1:var Vt=-1;break;case 2:Vt=250;break;case 5:Vt=1073741823;break;case 4:Vt=1e4;break;default:Vt=5e3}return Vt=St+Vt,kt={id:x++,callback:Ot,priorityLevel:kt,startTime:St,expirationTime:Vt,sortIndex:-1},St>jt?(kt.sortIndex=St,e(_,kt),n(g)===null&&kt===n(_)&&(V?(X(ht),ht=-1):V=!0,fe(J,St-jt))):(kt.sortIndex=Vt,e(g,kt),F||z||(F=!0,ot||(ot=!0,Pt()))),kt},t.unstable_shouldYield=_t,t.unstable_wrapCallback=function(kt){var Ot=O;return function(){var St=O;O=Ot;try{return kt.apply(this,arguments)}finally{O=St}}}})(cb)),cb}var LT;function _3(){return LT||(LT=1,ub.exports=y3()),ub.exports}var hb={exports:{}},So={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IT;function v3(){if(IT)return So;IT=1;var t=Lm();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)_+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,_,x){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:M==null?null:""+M,children:g,containerInfo:_,implementation:x}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return So.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,So.createPortal=function(g,_){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return l(g,_,null,x)},So.flushSync=function(g){var _=f.T,x=i.p;try{if(f.T=null,i.p=2,g)return g()}finally{f.T=_,i.p=x,i.d.f()}},So.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(g,_))},So.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},So.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var x=_.as,M=a(x,_.crossOrigin),O=typeof _.integrity=="string"?_.integrity:void 0,z=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;x==="style"?i.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:M,integrity:O,fetchPriority:z}):x==="script"&&i.d.X(g,{crossOrigin:M,integrity:O,fetchPriority:z,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},So.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var x=a(_.as,_.crossOrigin);i.d.M(g,{crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(g)},So.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var x=_.as,M=a(x,_.crossOrigin);i.d.L(g,x,{crossOrigin:M,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},So.preloadModule=function(g,_){if(typeof g=="string")if(_){var x=a(_.as,_.crossOrigin);i.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(g)},So.requestFormReset=function(g){i.d.r(g)},So.unstable_batchedUpdates=function(g,_){return g(_)},So.useFormState=function(g,_,x){return f.H.useFormState(g,_,x)},So.useFormStatus=function(){return f.H.useHostTransitionStatus()},So.version="19.2.0",So}var RT;function zk(){if(RT)return hb.exports;RT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),hb.exports=v3(),hb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function x3(){if(BT)return Fg;BT=1;var t=_3(),e=Lm(),n=zk();function i(o){var h="https://react.dev/errors/"+o;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+o+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function l(o){var h=o,y=o;if(o.alternate)for(;h.return;)h=h.return;else{o=h;do h=o,(h.flags&4098)!==0&&(y=h.return),o=h.return;while(o)}return h.tag===3?y:null}function f(o){if(o.tag===13){var h=o.memoizedState;if(h===null&&(o=o.alternate,o!==null&&(h=o.memoizedState)),h!==null)return h.dehydrated}return null}function a(o){if(o.tag===31){var h=o.memoizedState;if(h===null&&(o=o.alternate,o!==null&&(h=o.memoizedState)),h!==null)return h.dehydrated}return null}function g(o){if(l(o)!==o)throw Error(i(188))}function _(o){var h=o.alternate;if(!h){if(h=l(o),h===null)throw Error(i(188));return h!==o?null:o}for(var y=o,S=h;;){var I=y.return;if(I===null)break;var N=I.alternate;if(N===null){if(S=I.return,S!==null){y=S;continue}break}if(I.child===N.child){for(N=I.child;N;){if(N===y)return g(I),o;if(N===S)return g(I),h;N=N.sibling}throw Error(i(188))}if(y.return!==S.return)y=I,S=N;else{for(var at=!1,vt=I.child;vt;){if(vt===y){at=!0,y=I,S=N;break}if(vt===S){at=!0,S=I,y=N;break}vt=vt.sibling}if(!at){for(vt=N.child;vt;){if(vt===y){at=!0,y=N,S=I;break}if(vt===S){at=!0,S=N,y=I;break}vt=vt.sibling}if(!at)throw Error(i(189))}}if(y.alternate!==S)throw Error(i(190))}if(y.tag!==3)throw Error(i(188));return y.stateNode.current===y?o:h}function x(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o;for(o=o.child;o!==null;){if(h=x(o),h!==null)return h;o=o.sibling}return null}var M=Object.assign,O=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),ht=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),ut=Symbol.for("react.activity"),_t=Symbol.for("react.memo_cache_sentinel"),bt=Symbol.iterator;function Pt(o){return o===null||typeof o!="object"?null:(o=bt&&o[bt]||o["@@iterator"],typeof o=="function"?o:null)}var re=Symbol.for("react.client.reference");function ye(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===re?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case V:return"Fragment";case Q:return"Profiler";case H:return"StrictMode";case J:return"Suspense";case ot:return"SuspenseList";case ut:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case F:return"Portal";case Y:return o.displayName||"Context";case X:return(o._context.displayName||"Context")+".Consumer";case W:var h=o.render;return o=o.displayName,o||(o=h.displayName||h.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ht:return h=o.displayName||null,h!==null?h:ye(o.type)||"Memo";case rt:h=o._payload,o=o._init;try{return ye(o(h))}catch{}}return null}var fe=Array.isArray,kt=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ot=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,St={pending:!1,data:null,method:null,action:null},jt=[],Vt=-1;function pt(o){return{current:o}}function Tt(o){0>Vt||(o.current=jt[Vt],jt[Vt]=null,Vt--)}function $t(o,h){Vt++,jt[Vt]=o.current,o.current=h}var Yt=pt(null),se=pt(null),le=pt(null),Ae=pt(null);function Ie(o,h){switch($t(le,h),$t(se,o),$t(Yt,null),h.nodeType){case 9:case 11:o=(o=h.documentElement)&&(o=o.namespaceURI)?Re(o):0;break;default:if(o=h.tagName,h=h.namespaceURI)h=Re(h),o=pn(h,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Tt(Yt),$t(Yt,o)}function Wt(){Tt(Yt),Tt(se),Tt(le)}function Pe(o){o.memoizedState!==null&&$t(Ae,o);var h=Yt.current,y=pn(h,o.type);h!==y&&($t(se,o),$t(Yt,y))}function we(o){se.current===o&&(Tt(Yt),Tt(se)),Ae.current===o&&(Tt(Ae),Ig._currentValue=St)}var ce,rn;function je(o){if(ce===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);ce=h&&h[1]||"",rn=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+o+rn}var nn=!1;function tn(o,h){if(!o||nn)return"";nn=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(be){var ve=be}Reflect.construct(o,[],ze)}else{try{ze.call()}catch(be){ve=be}o.call(ze.prototype)}}else{try{throw Error()}catch(be){ve=be}(ze=o())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(be){if(be&&ve&&typeof be.stack=="string")return[be.stack,ve.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=S.DetermineComponentFrameRoot(),at=N[0],vt=N[1];if(at&&vt){var qt=at.split(`
`),ge=vt.split(`
`);for(I=S=0;S<qt.length&&!qt[S].includes("DetermineComponentFrameRoot");)S++;for(;I<ge.length&&!ge[I].includes("DetermineComponentFrameRoot");)I++;if(S===qt.length||I===ge.length)for(S=qt.length-1,I=ge.length-1;1<=S&&0<=I&&qt[S]!==ge[I];)I--;for(;1<=S&&0<=I;S--,I--)if(qt[S]!==ge[I]){if(S!==1||I!==1)do if(S--,I--,0>I||qt[S]!==ge[I]){var Ce=`
`+qt[S].replace(" at new "," at ");return o.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",o.displayName)),Ce}while(1<=S&&0<=I);break}}}finally{nn=!1,Error.prepareStackTrace=y}return(y=o?o.displayName||o.name:"")?je(y):""}function Tn(o,h){switch(o.tag){case 26:case 27:case 5:return je(o.type);case 16:return je("Lazy");case 13:return o.child!==h&&h!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return tn(o.type,!1);case 11:return tn(o.type.render,!1);case 1:return tn(o.type,!0);case 31:return je("Activity");default:return""}}function an(o){try{var h="",y=null;do h+=Tn(o,y),y=o,o=o.return;while(o);return h}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var In=Object.prototype.hasOwnProperty,_e=t.unstable_scheduleCallback,Di=t.unstable_cancelCallback,Ri=t.unstable_shouldYield,Yn=t.unstable_requestPaint,cn=t.unstable_now,Wi=t.unstable_getCurrentPriorityLevel,si=t.unstable_ImmediatePriority,Bi=t.unstable_UserBlockingPriority,Ur=t.unstable_NormalPriority,Xs=t.unstable_LowPriority,Xa=t.unstable_IdlePriority,va=t.log,Be=t.unstable_setDisableYieldValue,dr=null,Un=null;function xa(o){if(typeof va=="function"&&Be(o),Un&&typeof Un.setStrictMode=="function")try{Un.setStrictMode(dr,o)}catch{}}var pr=Math.clz32?Math.clz32:wn,Ue=Math.log,Dn=Math.LN2;function wn(o){return o>>>=0,o===0?32:31-(Ue(o)/Dn|0)|0}var Er=256,La=262144,bn=4194304;function ba(o){var h=o&42;if(h!==0)return h;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Dt(o,h,y){var S=o.pendingLanes;if(S===0)return 0;var I=0,N=o.suspendedLanes,at=o.pingedLanes;o=o.warmLanes;var vt=S&134217727;return vt!==0?(S=vt&~N,S!==0?I=ba(S):(at&=vt,at!==0?I=ba(at):y||(y=vt&~o,y!==0&&(I=ba(y))))):(vt=S&~N,vt!==0?I=ba(vt):at!==0?I=ba(at):y||(y=S&~o,y!==0&&(I=ba(y)))),I===0?0:h!==0&&h!==I&&(h&N)===0&&(N=I&-I,y=h&-h,N>=y||N===32&&(y&4194048)!==0)?h:I}function lt(o,h){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&h)===0}function ft(o,h){switch(o){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var o=bn;return bn<<=1,(bn&62914560)===0&&(bn=4194304),o}function Lt(o){for(var h=[],y=0;31>y;y++)h.push(o);return h}function It(o,h){o.pendingLanes|=h,h!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function te(o,h,y,S,I,N){var at=o.pendingLanes;o.pendingLanes=y,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=y,o.entangledLanes&=y,o.errorRecoveryDisabledLanes&=y,o.shellSuspendCounter=0;var vt=o.entanglements,qt=o.expirationTimes,ge=o.hiddenUpdates;for(y=at&~y;0<y;){var Ce=31-pr(y),ze=1<<Ce;vt[Ce]=0,qt[Ce]=-1;var ve=ge[Ce];if(ve!==null)for(ge[Ce]=null,Ce=0;Ce<ve.length;Ce++){var be=ve[Ce];be!==null&&(be.lane&=-536870913)}y&=~ze}S!==0&&Zt(o,S,0),N!==0&&I===0&&o.tag!==0&&(o.suspendedLanes|=N&~(at&~h))}function Zt(o,h,y){o.pendingLanes|=h,o.suspendedLanes&=~h;var S=31-pr(h);o.entangledLanes|=h,o.entanglements[S]=o.entanglements[S]|1073741824|y&261930}function Ft(o,h){var y=o.entangledLanes|=h;for(o=o.entanglements;y;){var S=31-pr(y),I=1<<S;I&h|o[S]&h&&(o[S]|=h),y&=~I}}function Xt(o,h){var y=h&-h;return y=(y&42)!==0?1:xe(y),(y&(o.suspendedLanes|h))!==0?0:y}function xe(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ie(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Ee(){var o=Ot.p;return o!==0?o:(o=window.event,o===void 0?32:wT(o.type))}function hn(o,h){var y=Ot.p;try{return Ot.p=o,h()}finally{Ot.p=y}}var dn=Math.random().toString(36).slice(2),He="__reactFiber$"+dn,Je="__reactProps$"+dn,_n="__reactContainer$"+dn,Vn="__reactEvents$"+dn,gi="__reactListeners$"+dn,Kn="__reactHandles$"+dn,Hn="__reactResources$"+dn,wr="__reactMarker$"+dn;function Mi(o){delete o[He],delete o[Je],delete o[Vn],delete o[gi],delete o[Kn]}function Ni(o){var h=o[He];if(h)return h;for(var y=o.parentNode;y;){if(h=y[_n]||y[He]){if(y=h.alternate,h.child!==null||y!==null&&y.child!==null)for(o=Za(o);o!==null;){if(y=o[He])return y;o=Za(o)}return h}o=y,y=o.parentNode}return null}function rr(o){if(o=o[He]||o[_n]){var h=o.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return o}return null}function Cr(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o.stateNode;throw Error(i(33))}function Tl(o){var h=o[Hn];return h||(h=o[Hn]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Ji(o){o[wr]=!0}var Al=new Set,Qh={};function Qn(o,h){Ks(o,h),Ks(o+"Capture",h)}function Ks(o,h){for(Qh[o]=h,o=0;o<h.length;o++)Al.add(h[o])}var nl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vr={},wa={};function zu(o){return In.call(wa,o)?!0:In.call(Vr,o)?!1:nl.test(o)?wa[o]=!0:(Vr[o]=!0,!1)}function kn(o,h,y){if(zu(h))if(y===null)o.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":o.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){o.removeAttribute(h);return}}o.setAttribute(h,""+y)}}function Rn(o,h,y){if(y===null)o.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttribute(h,""+y)}}function Sa(o,h,y,S){if(S===null)o.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(y);return}o.setAttributeNS(h,y,""+S)}}function ar(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function yi(o){var h=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function ni(o,h,y){var S=Object.getOwnPropertyDescriptor(o.constructor.prototype,h);if(!o.hasOwnProperty(h)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var I=S.get,N=S.set;return Object.defineProperty(o,h,{configurable:!0,get:function(){return I.call(this)},set:function(at){y=""+at,N.call(this,at)}}),Object.defineProperty(o,h,{enumerable:S.enumerable}),{getValue:function(){return y},setValue:function(at){y=""+at},stopTracking:function(){o._valueTracker=null,delete o[h]}}}}function An(o){if(!o._valueTracker){var h=yi(o)?"checked":"value";o._valueTracker=ni(o,h,""+o[h])}}function zn(o){if(!o)return!1;var h=o._valueTracker;if(!h)return!0;var y=h.getValue(),S="";return o&&(S=yi(o)?o.checked?"true":"false":o.value),o=S,o!==y?(h.setValue(o),!0):!1}function ko(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Ta=/[\n"\\]/g;function qi(o){return o.replace(Ta,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Qs(o,h,y,S,I,N,at,vt){o.name="",at!=null&&typeof at!="function"&&typeof at!="symbol"&&typeof at!="boolean"?o.type=at:o.removeAttribute("type"),h!=null?at==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+ar(h)):o.value!==""+ar(h)&&(o.value=""+ar(h)):at!=="submit"&&at!=="reset"||o.removeAttribute("value"),h!=null?Cs(o,at,ar(h)):y!=null?Cs(o,at,ar(y)):S!=null&&o.removeAttribute("value"),I==null&&N!=null&&(o.defaultChecked=!!N),I!=null&&(o.checked=I&&typeof I!="function"&&typeof I!="symbol"),vt!=null&&typeof vt!="function"&&typeof vt!="symbol"&&typeof vt!="boolean"?o.name=""+ar(vt):o.removeAttribute("name")}function eu(o,h,y,S,I,N,at,vt){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.type=N),h!=null||y!=null){if(!(N!=="submit"&&N!=="reset"||h!=null)){An(o);return}y=y!=null?""+ar(y):"",h=h!=null?""+ar(h):y,vt||h===o.value||(o.value=h),o.defaultValue=h}S=S??I,S=typeof S!="function"&&typeof S!="symbol"&&!!S,o.checked=vt?o.checked:!!S,o.defaultChecked=!!S,at!=null&&typeof at!="function"&&typeof at!="symbol"&&typeof at!="boolean"&&(o.name=at),An(o)}function Cs(o,h,y){h==="number"&&ko(o.ownerDocument)===o||o.defaultValue===""+y||(o.defaultValue=""+y)}function Ci(o,h,y,S){if(o=o.options,h){h={};for(var I=0;I<y.length;I++)h["$"+y[I]]=!0;for(y=0;y<o.length;y++)I=h.hasOwnProperty("$"+o[y].value),o[y].selected!==I&&(o[y].selected=I),I&&S&&(o[y].defaultSelected=!0)}else{for(y=""+ar(y),h=null,I=0;I<o.length;I++){if(o[I].value===y){o[I].selected=!0,S&&(o[I].defaultSelected=!0);return}h!==null||o[I].disabled||(h=o[I])}h!==null&&(h.selected=!0)}}function Ps(o,h,y){if(h!=null&&(h=""+ar(h),h!==o.value&&(o.value=h),y==null)){o.defaultValue!==h&&(o.defaultValue=h);return}o.defaultValue=y!=null?""+ar(y):""}function Ka(o,h,y,S){if(h==null){if(S!=null){if(y!=null)throw Error(i(92));if(fe(S)){if(1<S.length)throw Error(i(93));S=S[0]}y=S}y==null&&(y=""),h=y}y=ar(h),o.defaultValue=y,S=o.textContent,S===y&&S!==""&&S!==null&&(o.value=S),An(o)}function ms(o,h){if(h){var y=o.firstChild;if(y&&y===o.lastChild&&y.nodeType===3){y.nodeValue=h;return}}o.textContent=h}var Ml=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function El(o,h,y){var S=h.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="":S?o.setProperty(h,y):typeof y!="number"||y===0||Ml.has(h)?h==="float"?o.cssFloat=y:o[h]=(""+y).trim():o[h]=y+"px"}function gc(o,h,y){if(h!=null&&typeof h!="object")throw Error(i(62));if(o=o.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?o.setProperty(S,""):S==="float"?o.cssFloat="":o[S]="");for(var I in h)S=h[I],h.hasOwnProperty(I)&&y[I]!==S&&El(o,I,S)}else for(var N in h)h.hasOwnProperty(N)&&El(o,N,h[N])}function Cl(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function iu(o){return yc.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Qa(){}var Lu=null;function il(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Pl=null,Mn=null;function Ja(o){var h=rr(o);if(h&&(o=h.stateNode)){var y=o[Je]||null;t:switch(o=h.stateNode,h.type){case"input":if(Qs(o,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),h=y.name,y.type==="radio"&&h!=null){for(y=o;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+qi(""+h)+'"][type="radio"]'),h=0;h<y.length;h++){var S=y[h];if(S!==o&&S.form===o.form){var I=S[Je]||null;if(!I)throw Error(i(90));Qs(S,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(h=0;h<y.length;h++)S=y[h],S.form===o.form&&zn(S)}break t;case"textarea":Ps(o,y.value,y.defaultValue);break t;case"select":h=y.value,h!=null&&Ci(o,!!y.multiple,h,!1)}}}var _i=!1;function Oo(o,h,y){if(_i)return o(h,y);_i=!0;try{var S=o(h);return S}finally{if(_i=!1,(Pl!==null||Mn!==null)&&(_d(),Pl&&(h=Pl,o=Mn,Mn=Pl=null,Ja(h),o)))for(h=0;h<o.length;h++)Ja(o[h])}}function Js(o,h){var y=o.stateNode;if(y===null)return null;var S=y[Je]||null;if(S===null)return null;y=S[h];t:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(o=o.type,S=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!S;break t;default:o=!1}if(o)return null;if(y&&typeof y!="function")throw Error(i(231,h,typeof y));return y}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rl=!1;if(sr)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){rl=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{rl=!1}var Ra=null,to=null,Hi=null;function Aa(){if(Hi)return Hi;var o,h=to,y=h.length,S,I="value"in Ra?Ra.value:Ra.textContent,N=I.length;for(o=0;o<y&&h[o]===I[o];o++);var at=y-o;for(S=1;S<=at&&h[y-S]===I[N-S];S++);return Hi=I.slice(o,1<S?1-S:void 0)}function Bn(o){var h=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&h===13&&(o=13)):o=h,o===10&&(o=13),32<=o||o===13?o:0}function al(){return!0}function Ba(){return!1}function zi(o){function h(y,S,I,N,at){this._reactName=y,this._targetInst=I,this.type=S,this.nativeEvent=N,this.target=at,this.currentTarget=null;for(var vt in o)o.hasOwnProperty(vt)&&(y=o[vt],this[vt]=y?y(N):N[vt]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?al:Ba,this.isPropagationStopped=Ba,this}return M(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=al)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=al)},persist:function(){},isPersistent:al}),h}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kl=zi(ks),Do=M({},ks,{view:0,detail:0}),Jn=zi(Do),Iu,sa,Os,Ol=M({},Do,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bc,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Os&&(Os&&o.type==="mousemove"?(Iu=o.screenX-Os.screenX,sa=o.screenY-Os.screenY):sa=Iu=0,Os=o),Iu)},movementY:function(o){return"movementY"in o?o.movementY:sa}}),Ru=zi(Ol),_c=M({},Ol,{dataTransfer:0}),Jh=zi(_c),Dl=M({},Do,{relatedTarget:0}),Yc=zi(Dl),Gf=M({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),Xc=zi(Gf),Wf=M({},ks,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),eo=zi(Wf),Yf=M({},ks,{data:0}),Bu=zi(Yf),Ds={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sl(o){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(o):(o=xc[o])?!!h[o]:!1}function bc(){return sl}var Kc=M({},Do,{key:function(o){if(o.key){var h=Ds[o.key]||o.key;if(h!=="Unidentified")return h}return o.type==="keypress"?(o=Bn(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?vc[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bc,charCode:function(o){return o.type==="keypress"?Bn(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Bn(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),wc=zi(Kc),zl=M({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qc=zi(zl),no=M({},Do,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bc}),ru=zi(no),Jc=M({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sc=zi(Jc),ti=M({},Ol,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),vi=zi(ti),Xf=M({},ks,{newState:0,oldState:0}),Nn=zi(Xf),$r=[9,13,27,32],Li=sr&&"CompositionEvent"in window,xi=null;sr&&"documentMode"in document&&(xi=document.documentMode);var Nu=sr&&"TextEvent"in window&&!xi,ju=sr&&(!Li||xi&&8<xi&&11>=xi),au=" ",Fu=!1;function Uu(o,h){switch(o){case"keyup":return $r.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vu(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var zo=!1;function ts(o,h){switch(o){case"compositionend":return Vu(h);case"keypress":return h.which!==32?null:(Fu=!0,au);case"textInput":return o=h.data,o===au&&Fu?null:o;default:return null}}function io(o,h){if(zo)return o==="compositionend"||!Li&&Uu(o,h)?(o=Aa(),Hi=to=Ra=null,zo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return ju&&h.locale!=="ko"?null:h.data;default:return null}}var $u={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Na(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h==="input"?!!$u[o.type]:h==="textarea"}function tf(o,h,y,S){Pl?Mn?Mn.push(S):Mn=[S]:Pl=S,h=yt(h,"onChange"),0<h.length&&(y=new kl("onChange","change",null,y,S),o.push({event:y,listeners:h}))}var gs=null,qu=null;function su(o){k(o,0)}function ol(o){var h=Cr(o);if(zn(h))return o}function Ll(o,h){if(o==="change")return h}var th=!1;if(sr){var zs;if(sr){var ro="oninput"in document;if(!ro){var Hu=document.createElement("div");Hu.setAttribute("oninput","return;"),ro=typeof Hu.oninput=="function"}zs=ro}else zs=!1;th=zs&&(!document.documentMode||9<document.documentMode)}function Il(){gs&&(gs.detachEvent("onpropertychange",eh),qu=gs=null)}function eh(o){if(o.propertyName==="value"&&ol(qu)){var h=[];tf(h,qu,o,il(o)),Oo(su,h)}}function ui(o,h,y){o==="focusin"?(Il(),gs=h,qu=y,gs.attachEvent("onpropertychange",eh)):o==="focusout"&&Il()}function Rl(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ol(qu)}function Pr(o,h){if(o==="click")return ol(h)}function ou(o,h){if(o==="input"||o==="change")return ol(h)}function es(o,h){return o===h&&(o!==0||1/o===1/h)||o!==o&&h!==h}var kr=typeof Object.is=="function"?Object.is:es;function ys(o,h){if(kr(o,h))return!0;if(typeof o!="object"||o===null||typeof h!="object"||h===null)return!1;var y=Object.keys(o),S=Object.keys(h);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var I=y[S];if(!In.call(h,I)||!kr(o[I],h[I]))return!1}return!0}function ll(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function ao(o,h){var y=ll(o);o=0;for(var S;y;){if(y.nodeType===3){if(S=o+y.textContent.length,o<=h&&S>=h)return{node:y,offset:h-o};o=S}t:{for(;y;){if(y.nextSibling){y=y.nextSibling;break t}y=y.parentNode}y=void 0}y=ll(y)}}function Zu(o,h){return o&&h?o===h?!0:o&&o.nodeType===3?!1:h&&h.nodeType===3?Zu(o,h.parentNode):"contains"in o?o.contains(h):o.compareDocumentPosition?!!(o.compareDocumentPosition(h)&16):!1:!1}function lu(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var h=ko(o.document);h instanceof o.HTMLIFrameElement;){try{var y=typeof h.contentWindow.location.href=="string"}catch{y=!1}if(y)o=h.contentWindow;else break;h=ko(o.document)}return h}function Lo(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h&&(h==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||h==="textarea"||o.contentEditable==="true")}var Gu=sr&&"documentMode"in document&&11>=document.documentMode,Io=null,ns=null,Ro=null,qr=!1;function uu(o,h,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;qr||Io==null||Io!==ko(S)||(S=Io,"selectionStart"in S&&Lo(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Ro&&ys(Ro,S)||(Ro=S,S=yt(ns,"onSelect"),0<S.length&&(h=new kl("onSelect","select",null,h,y),o.push({event:h,listeners:S}),h.target=Io)))}function Bo(o,h){var y={};return y[o.toLowerCase()]=h.toLowerCase(),y["Webkit"+o]="webkit"+h,y["Moz"+o]="moz"+h,y}var Bl={animationend:Bo("Animation","AnimationEnd"),animationiteration:Bo("Animation","AnimationIteration"),animationstart:Bo("Animation","AnimationStart"),transitionrun:Bo("Transition","TransitionRun"),transitionstart:Bo("Transition","TransitionStart"),transitioncancel:Bo("Transition","TransitionCancel"),transitionend:Bo("Transition","TransitionEnd")},Wu={},No={};sr&&(No=document.createElement("div").style,"AnimationEvent"in window||(delete Bl.animationend.animation,delete Bl.animationiteration.animation,delete Bl.animationstart.animation),"TransitionEvent"in window||delete Bl.transitionend.transition);function Xr(o){if(Wu[o])return Wu[o];if(!Bl[o])return o;var h=Bl[o],y;for(y in h)if(h.hasOwnProperty(y)&&y in No)return Wu[o]=h[y];return o}var oa=Xr("animationend"),so=Xr("animationiteration"),ul=Xr("animationstart"),jo=Xr("transitionrun"),oo=Xr("transitionstart"),Kf=Xr("transitioncancel"),cl=Xr("transitionend"),nh=new Map,Ls="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ls.push("scrollEnd");function Kr(o,h){nh.set(o,h),Qn(h,[o])}var is=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Ze=[],Qr=0,Is=0;function lo(){for(var o=Qr,h=Is=Qr=0;h<o;){var y=Ze[h];Ze[h++]=null;var S=Ze[h];Ze[h++]=null;var I=Ze[h];Ze[h++]=null;var N=Ze[h];if(Ze[h++]=null,S!==null&&I!==null){var at=S.pending;at===null?I.next=I:(I.next=at.next,at.next=I),S.pending=I}N!==0&&hl(y,I,N)}}function Fo(o,h,y,S){Ze[Qr++]=o,Ze[Qr++]=h,Ze[Qr++]=y,Ze[Qr++]=S,Is|=S,o.lanes|=S,o=o.alternate,o!==null&&(o.lanes|=S)}function Ye(o,h,y,S){return Fo(o,h,y,S),Yu(o)}function _s(o,h){return Fo(o,null,null,h),Yu(o)}function hl(o,h,y){o.lanes|=y;var S=o.alternate;S!==null&&(S.lanes|=y);for(var I=!1,N=o.return;N!==null;)N.childLanes|=y,S=N.alternate,S!==null&&(S.childLanes|=y),N.tag===22&&(o=N.stateNode,o===null||o._visibility&1||(I=!0)),o=N,N=N.return;return o.tag===3?(N=o.stateNode,I&&h!==null&&(I=31-pr(y),o=N.hiddenUpdates,S=o[I],S===null?o[I]=[h]:S.push(h),h.lane=y|536870912),N):null}function Yu(o){if(50<gh)throw gh=0,yf=null,Error(i(185));for(var h=o.return;h!==null;)o=h,h=o.return;return o.tag===3?o.stateNode:null}var Uo={};function ef(o,h,y,S){this.tag=o,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ma(o,h,y,S){return new ef(o,h,y,S)}function Xu(o){return o=o.prototype,!(!o||!o.isReactComponent)}function uo(o,h){var y=o.alternate;return y===null?(y=Ma(o.tag,h,o.key,o.mode),y.elementType=o.elementType,y.type=o.type,y.stateNode=o.stateNode,y.alternate=o,o.alternate=y):(y.pendingProps=h,y.type=o.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=o.flags&65011712,y.childLanes=o.childLanes,y.lanes=o.lanes,y.child=o.child,y.memoizedProps=o.memoizedProps,y.memoizedState=o.memoizedState,y.updateQueue=o.updateQueue,h=o.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=o.sibling,y.index=o.index,y.ref=o.ref,y.refCleanup=o.refCleanup,y}function Ku(o,h){o.flags&=65011714;var y=o.alternate;return y===null?(o.childLanes=0,o.lanes=h,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=y.childLanes,o.lanes=y.lanes,o.child=y.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=y.memoizedProps,o.memoizedState=y.memoizedState,o.updateQueue=y.updateQueue,o.type=y.type,h=y.dependencies,o.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),o}function Nl(o,h,y,S,I,N){var at=0;if(S=o,typeof o=="function")Xu(o)&&(at=1);else if(typeof o=="string")at=os(o,y,Yt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case ut:return o=Ma(31,y,h,I),o.elementType=ut,o.lanes=N,o;case V:return Vo(y.children,I,N,h);case H:at=8,I|=24;break;case Q:return o=Ma(12,y,h,I|2),o.elementType=Q,o.lanes=N,o;case J:return o=Ma(13,y,h,I),o.elementType=J,o.lanes=N,o;case ot:return o=Ma(19,y,h,I),o.elementType=ot,o.lanes=N,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Y:at=10;break t;case X:at=9;break t;case W:at=11;break t;case ht:at=14;break t;case rt:at=16,S=null;break t}at=29,y=Error(i(130,o===null?"null":typeof o,"")),S=null}return h=Ma(at,y,h,I),h.elementType=o,h.type=S,h.lanes=N,h}function Vo(o,h,y,S){return o=Ma(7,o,S,h),o.lanes=y,o}function cu(o,h,y){return o=Ma(6,o,null,h),o.lanes=y,o}function la(o){var h=Ma(18,null,null,0);return h.stateNode=o,h}function co(o,h,y){return h=Ma(4,o.children!==null?o.children:[],o.key,h),h.lanes=y,h.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},h}var p=new WeakMap;function w(o,h){if(typeof o=="object"&&o!==null){var y=p.get(o);return y!==void 0?y:(h={value:o,source:h,stack:an(h)},p.set(o,h),h)}return{value:o,source:h,stack:an(h)}}var D=[],$=0,nt=null,mt=0,Rt=[],ae=0,pe=null,Oe=1,Ke="";function yn(o,h){D[$++]=mt,D[$++]=nt,nt=o,mt=h}function $n(o,h,y){Rt[ae++]=Oe,Rt[ae++]=Ke,Rt[ae++]=pe,pe=o;var S=Oe;o=Ke;var I=32-pr(S)-1;S&=~(1<<I),y+=1;var N=32-pr(h)+I;if(30<N){var at=I-I%5;N=(S&(1<<at)-1).toString(32),S>>=at,I-=at,Oe=1<<32-pr(h)+I|y<<I|S,Ke=N+o}else Oe=1<<N|y<<I|S,Ke=o}function ci(o){o.return!==null&&(yn(o,1),$n(o,1,0))}function tr(o){for(;o===nt;)nt=D[--$],D[$]=null,mt=D[--$],D[$]=null;for(;o===pe;)pe=Rt[--ae],Rt[ae]=null,Ke=Rt[--ae],Rt[ae]=null,Oe=Rt[--ae],Rt[ae]=null}function Qe(o,h){Rt[ae++]=Oe,Rt[ae++]=Ke,Rt[ae++]=pe,Oe=h.id,Ke=h.overflow,pe=o}var Ge=null,ri=null,Xn=!1,ho=null,oi=!1,hu=Error(i(519));function Or(o){var h=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $o(w(h,o)),hu}function Tc(o){var h=o.stateNode,y=o.type,S=o.memoizedProps;switch(h[He]=o,h[Je]=S,y){case"dialog":R("cancel",h),R("close",h);break;case"iframe":case"object":case"embed":R("load",h);break;case"video":case"audio":for(y=0;y<T.length;y++)R(T[y],h);break;case"source":R("error",h);break;case"img":case"image":case"link":R("error",h),R("load",h);break;case"details":R("toggle",h);break;case"input":R("invalid",h),eu(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":R("invalid",h);break;case"textarea":R("invalid",h),Ka(h,S.value,S.defaultValue,S.children)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||h.textContent===""+y||S.suppressHydrationWarning===!0||ee(h.textContent,y)?(S.popover!=null&&(R("beforetoggle",h),R("toggle",h)),S.onScroll!=null&&R("scroll",h),S.onScrollEnd!=null&&R("scrollend",h),S.onClick!=null&&(h.onclick=Qa),h=!0):h=!1,h||Or(o,!0)}function Ii(o){for(Ge=o.return;Ge;)switch(Ge.tag){case 5:case 31:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:Ge=Ge.return}}function hi(o){if(o!==Ge)return!1;if(!Xn)return Ii(o),Xn=!0,!1;var h=o.tag,y;if((y=h!==3&&h!==27)&&((y=h===5)&&(y=o.type,y=!(y!=="form"&&y!=="button")||un(o.type,o.memoizedProps)),y=!y),y&&ri&&Or(o),Ii(o),h===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));ri=Zn(o)}else if(h===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));ri=Zn(o)}else h===27?(h=ri,cr(o.type)?(o=Rr,Rr=null,ri=o):ri=h):ri=Ge?hr(o.stateNode.nextSibling):null;return!0}function bi(){ri=Ge=null,Xn=!1}function fl(){var o=ho;return o!==null&&(yo===null?yo=o:yo.push.apply(yo,o),ho=null),o}function $o(o){ho===null?ho=[o]:ho.push(o)}var qo=pt(null),ja=null,Rs=null;function dl(o,h,y){$t(qo,h._currentValue),h._currentValue=y}function vs(o){o._currentValue=qo.current,Tt(qo)}function ih(o,h,y){for(;o!==null;){var S=o.alternate;if((o.childLanes&h)!==h?(o.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),o===y)break;o=o.return}}function rh(o,h,y,S){var I=o.child;for(I!==null&&(I.return=o);I!==null;){var N=I.dependencies;if(N!==null){var at=I.child;N=N.firstContext;t:for(;N!==null;){var vt=N;N=I;for(var qt=0;qt<h.length;qt++)if(vt.context===h[qt]){N.lanes|=y,vt=N.alternate,vt!==null&&(vt.lanes|=y),ih(N.return,y,o),S||(at=null);break t}N=vt.next}}else if(I.tag===18){if(at=I.return,at===null)throw Error(i(341));at.lanes|=y,N=at.alternate,N!==null&&(N.lanes|=y),ih(at,y,o),at=null}else at=I.child;if(at!==null)at.return=I;else for(at=I;at!==null;){if(at===o){at=null;break}if(I=at.sibling,I!==null){I.return=at.return,at=I;break}at=at.return}I=at}}function ei(o,h,y,S){o=null;for(var I=h,N=!1;I!==null;){if(!N){if((I.flags&524288)!==0)N=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var at=I.alternate;if(at===null)throw Error(i(387));if(at=at.memoizedProps,at!==null){var vt=I.type;kr(I.pendingProps.value,at.value)||(o!==null?o.push(vt):o=[vt])}}else if(I===Ae.current){if(at=I.alternate,at===null)throw Error(i(387));at.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(o!==null?o.push(Ig):o=[Ig])}I=I.return}o!==null&&rh(h,o,y,S),h.flags|=262144}function E(o){for(o=o.firstContext;o!==null;){if(!kr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function u(o){ja=o,Rs=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function m(o){return A(ja,o)}function b(o,h){return ja===null&&u(o),A(o,h)}function A(o,h){var y=h._currentValue;if(h={context:h,memoizedValue:y,next:null},Rs===null){if(o===null)throw Error(i(308));Rs=h,o.dependencies={lanes:0,firstContext:h},o.flags|=524288}else Rs=Rs.next=h;return y}var C=typeof AbortController<"u"?AbortController:function(){var o=[],h=this.signal={aborted:!1,addEventListener:function(y,S){o.push(S)}};this.abort=function(){h.aborted=!0,o.forEach(function(y){return y()})}},B=t.unstable_scheduleCallback,j=t.unstable_NormalPriority,q={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function K(){return{controller:new C,data:new Map,refCount:0}}function et(o){o.refCount--,o.refCount===0&&B(j,function(){o.controller.abort()})}var it=null,dt=0,Et=0,Mt=null;function zt(o,h){if(it===null){var y=it=[];dt=0,Et=Cd(),Mt={status:"pending",value:void 0,then:function(S){y.push(S)}}}return dt++,h.then(At,At),h}function At(){if(--dt===0&&it!==null){Mt!==null&&(Mt.status="fulfilled");var o=it;it=null,Et=0,Mt=null;for(var h=0;h<o.length;h++)(0,o[h])()}}function Gt(o,h){var y=[],S={status:"pending",value:null,reason:null,then:function(I){y.push(I)}};return o.then(function(){S.status="fulfilled",S.value=h;for(var I=0;I<y.length;I++)(0,y[I])(h)},function(I){for(S.status="rejected",S.reason=I,I=0;I<y.length;I++)(0,y[I])(void 0)}),S}var ue=kt.S;kt.S=function(o,h){B_=cn(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&zt(o,h),ue!==null&&ue(o,h)};var Nt=pt(null);function Kt(){var o=Nt.current;return o!==null?o:Gi.pooledCache}function he(o,h){h===null?$t(Nt,Nt.current):$t(Nt,h.pool)}function me(){var o=Kt();return o===null?null:{parent:q._currentValue,pool:o}}var Se=Error(i(460)),Le=Error(i(474)),ke=Error(i(542)),Ne={then:function(){}};function sn(o){return o=o.status,o==="fulfilled"||o==="rejected"}function qn(o,h,y){switch(y=o[y],y===void 0?o.push(h):y!==h&&(h.then(Qa,Qa),h=y),h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,Ei(o),o;default:if(typeof h.status=="string")h.then(Qa,Qa);else{if(o=Gi,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=h,o.status="pending",o.then(function(S){if(h.status==="pending"){var I=h;I.status="fulfilled",I.value=S}},function(S){if(h.status==="pending"){var I=h;I.status="rejected",I.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,Ei(o),o}throw fn=h,Se}}function $e(o){try{var h=o._init;return h(o._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(fn=y,Se):y}}var fn=null;function on(){if(fn===null)throw Error(i(459));var o=fn;return fn=null,o}function Ei(o){if(o===Se||o===ke)throw Error(i(483))}var Ln=null,Pn=0;function Fn(o){var h=Pn;return Pn+=1,Ln===null&&(Ln=[]),qn(Ln,o,h)}function Yi(o,h){h=h.props.ref,o.ref=h!==void 0?h:null}function Pi(o,h){throw h.$$typeof===O?Error(i(525)):(o=Object.prototype.toString.call(h),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":o)))}function ua(o){function h(oe,Qt){if(o){var de=oe.deletions;de===null?(oe.deletions=[Qt],oe.flags|=16):de.push(Qt)}}function y(oe,Qt){if(!o)return null;for(;Qt!==null;)h(oe,Qt),Qt=Qt.sibling;return null}function S(oe){for(var Qt=new Map;oe!==null;)oe.key!==null?Qt.set(oe.key,oe):Qt.set(oe.index,oe),oe=oe.sibling;return Qt}function I(oe,Qt){return oe=uo(oe,Qt),oe.index=0,oe.sibling=null,oe}function N(oe,Qt,de){return oe.index=de,o?(de=oe.alternate,de!==null?(de=de.index,de<Qt?(oe.flags|=67108866,Qt):de):(oe.flags|=67108866,Qt)):(oe.flags|=1048576,Qt)}function at(oe){return o&&oe.alternate===null&&(oe.flags|=67108866),oe}function vt(oe,Qt,de,De){return Qt===null||Qt.tag!==6?(Qt=cu(de,oe.mode,De),Qt.return=oe,Qt):(Qt=I(Qt,de),Qt.return=oe,Qt)}function qt(oe,Qt,de,De){var Sn=de.type;return Sn===V?Ce(oe,Qt,de.props.children,De,de.key):Qt!==null&&(Qt.elementType===Sn||typeof Sn=="object"&&Sn!==null&&Sn.$$typeof===rt&&$e(Sn)===Qt.type)?(Qt=I(Qt,de.props),Yi(Qt,de),Qt.return=oe,Qt):(Qt=Nl(de.type,de.key,de.props,null,oe.mode,De),Yi(Qt,de),Qt.return=oe,Qt)}function ge(oe,Qt,de,De){return Qt===null||Qt.tag!==4||Qt.stateNode.containerInfo!==de.containerInfo||Qt.stateNode.implementation!==de.implementation?(Qt=co(de,oe.mode,De),Qt.return=oe,Qt):(Qt=I(Qt,de.children||[]),Qt.return=oe,Qt)}function Ce(oe,Qt,de,De,Sn){return Qt===null||Qt.tag!==7?(Qt=Vo(de,oe.mode,De,Sn),Qt.return=oe,Qt):(Qt=I(Qt,de),Qt.return=oe,Qt)}function ze(oe,Qt,de){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number"||typeof Qt=="bigint")return Qt=cu(""+Qt,oe.mode,de),Qt.return=oe,Qt;if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case z:return de=Nl(Qt.type,Qt.key,Qt.props,null,oe.mode,de),Yi(de,Qt),de.return=oe,de;case F:return Qt=co(Qt,oe.mode,de),Qt.return=oe,Qt;case rt:return Qt=$e(Qt),ze(oe,Qt,de)}if(fe(Qt)||Pt(Qt))return Qt=Vo(Qt,oe.mode,de,null),Qt.return=oe,Qt;if(typeof Qt.then=="function")return ze(oe,Fn(Qt),de);if(Qt.$$typeof===Y)return ze(oe,b(oe,Qt),de);Pi(oe,Qt)}return null}function ve(oe,Qt,de,De){var Sn=Qt!==null?Qt.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Sn!==null?null:vt(oe,Qt,""+de,De);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case z:return de.key===Sn?qt(oe,Qt,de,De):null;case F:return de.key===Sn?ge(oe,Qt,de,De):null;case rt:return de=$e(de),ve(oe,Qt,de,De)}if(fe(de)||Pt(de))return Sn!==null?null:Ce(oe,Qt,de,De,null);if(typeof de.then=="function")return ve(oe,Qt,Fn(de),De);if(de.$$typeof===Y)return ve(oe,Qt,b(oe,de),De);Pi(oe,de)}return null}function be(oe,Qt,de,De,Sn){if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return oe=oe.get(de)||null,vt(Qt,oe,""+De,Sn);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case z:return oe=oe.get(De.key===null?de:De.key)||null,qt(Qt,oe,De,Sn);case F:return oe=oe.get(De.key===null?de:De.key)||null,ge(Qt,oe,De,Sn);case rt:return De=$e(De),be(oe,Qt,de,De,Sn)}if(fe(De)||Pt(De))return oe=oe.get(de)||null,Ce(Qt,oe,De,Sn,null);if(typeof De.then=="function")return be(oe,Qt,de,Fn(De),Sn);if(De.$$typeof===Y)return be(oe,Qt,de,b(Qt,De),Sn);Pi(Qt,De)}return null}function gn(oe,Qt,de,De){for(var Sn=null,Fi=null,vn=Qt,ii=Qt=0,Ti=null;vn!==null&&ii<de.length;ii++){vn.index>ii?(Ti=vn,vn=null):Ti=vn.sibling;var Ui=ve(oe,vn,de[ii],De);if(Ui===null){vn===null&&(vn=Ti);break}o&&vn&&Ui.alternate===null&&h(oe,vn),Qt=N(Ui,Qt,ii),Fi===null?Sn=Ui:Fi.sibling=Ui,Fi=Ui,vn=Ti}if(ii===de.length)return y(oe,vn),Xn&&yn(oe,ii),Sn;if(vn===null){for(;ii<de.length;ii++)vn=ze(oe,de[ii],De),vn!==null&&(Qt=N(vn,Qt,ii),Fi===null?Sn=vn:Fi.sibling=vn,Fi=vn);return Xn&&yn(oe,ii),Sn}for(vn=S(vn);ii<de.length;ii++)Ti=be(vn,oe,ii,de[ii],De),Ti!==null&&(o&&Ti.alternate!==null&&vn.delete(Ti.key===null?ii:Ti.key),Qt=N(Ti,Qt,ii),Fi===null?Sn=Ti:Fi.sibling=Ti,Fi=Ti);return o&&vn.forEach(function(Ef){return h(oe,Ef)}),Xn&&yn(oe,ii),Sn}function On(oe,Qt,de,De){if(de==null)throw Error(i(151));for(var Sn=null,Fi=null,vn=Qt,ii=Qt=0,Ti=null,Ui=de.next();vn!==null&&!Ui.done;ii++,Ui=de.next()){vn.index>ii?(Ti=vn,vn=null):Ti=vn.sibling;var Ef=ve(oe,vn,Ui.value,De);if(Ef===null){vn===null&&(vn=Ti);break}o&&vn&&Ef.alternate===null&&h(oe,vn),Qt=N(Ef,Qt,ii),Fi===null?Sn=Ef:Fi.sibling=Ef,Fi=Ef,vn=Ti}if(Ui.done)return y(oe,vn),Xn&&yn(oe,ii),Sn;if(vn===null){for(;!Ui.done;ii++,Ui=de.next())Ui=ze(oe,Ui.value,De),Ui!==null&&(Qt=N(Ui,Qt,ii),Fi===null?Sn=Ui:Fi.sibling=Ui,Fi=Ui);return Xn&&yn(oe,ii),Sn}for(vn=S(vn);!Ui.done;ii++,Ui=de.next())Ui=be(vn,oe,ii,Ui.value,De),Ui!==null&&(o&&Ui.alternate!==null&&vn.delete(Ui.key===null?ii:Ui.key),Qt=N(Ui,Qt,ii),Fi===null?Sn=Ui:Fi.sibling=Ui,Fi=Ui);return o&&vn.forEach(function(h3){return h(oe,h3)}),Xn&&yn(oe,ii),Sn}function fr(oe,Qt,de,De){if(typeof de=="object"&&de!==null&&de.type===V&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case z:t:{for(var Sn=de.key;Qt!==null;){if(Qt.key===Sn){if(Sn=de.type,Sn===V){if(Qt.tag===7){y(oe,Qt.sibling),De=I(Qt,de.props.children),De.return=oe,oe=De;break t}}else if(Qt.elementType===Sn||typeof Sn=="object"&&Sn!==null&&Sn.$$typeof===rt&&$e(Sn)===Qt.type){y(oe,Qt.sibling),De=I(Qt,de.props),Yi(De,de),De.return=oe,oe=De;break t}y(oe,Qt);break}else h(oe,Qt);Qt=Qt.sibling}de.type===V?(De=Vo(de.props.children,oe.mode,De,de.key),De.return=oe,oe=De):(De=Nl(de.type,de.key,de.props,null,oe.mode,De),Yi(De,de),De.return=oe,oe=De)}return at(oe);case F:t:{for(Sn=de.key;Qt!==null;){if(Qt.key===Sn)if(Qt.tag===4&&Qt.stateNode.containerInfo===de.containerInfo&&Qt.stateNode.implementation===de.implementation){y(oe,Qt.sibling),De=I(Qt,de.children||[]),De.return=oe,oe=De;break t}else{y(oe,Qt);break}else h(oe,Qt);Qt=Qt.sibling}De=co(de,oe.mode,De),De.return=oe,oe=De}return at(oe);case rt:return de=$e(de),fr(oe,Qt,de,De)}if(fe(de))return gn(oe,Qt,de,De);if(Pt(de)){if(Sn=Pt(de),typeof Sn!="function")throw Error(i(150));return de=Sn.call(de),On(oe,Qt,de,De)}if(typeof de.then=="function")return fr(oe,Qt,Fn(de),De);if(de.$$typeof===Y)return fr(oe,Qt,b(oe,de),De);Pi(oe,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,Qt!==null&&Qt.tag===6?(y(oe,Qt.sibling),De=I(Qt,de),De.return=oe,oe=De):(y(oe,Qt),De=cu(de,oe.mode,De),De.return=oe,oe=De),at(oe)):y(oe,Qt)}return function(oe,Qt,de,De){try{Pn=0;var Sn=fr(oe,Qt,de,De);return Ln=null,Sn}catch(vn){if(vn===Se||vn===ke)throw vn;var Fi=Ma(29,vn,null,oe.mode);return Fi.lanes=De,Fi.return=oe,Fi}finally{}}}var er=ua(!0),Sr=ua(!1),Hr=!1;function ji(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fo(o,h){o=o.updateQueue,h.updateQueue===o&&(h.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ea(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function rs(o,h,y){var S=o.updateQueue;if(S===null)return null;if(S=S.shared,(ki&2)!==0){var I=S.pending;return I===null?h.next=h:(h.next=I.next,I.next=h),S.pending=h,h=Yu(o),hl(o,null,y),h}return Fo(o,S,h,y),Yu(o)}function Ho(o,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194048)!==0)){var S=h.lanes;S&=o.pendingLanes,y|=S,h.lanes=y,Ft(o,y)}}function fu(o,h){var y=o.updateQueue,S=o.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var I=null,N=null;if(y=y.firstBaseUpdate,y!==null){do{var at={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};N===null?I=N=at:N=N.next=at,y=y.next}while(y!==null);N===null?I=N=h:N=N.next=h}else I=N=h;y={baseState:S.baseState,firstBaseUpdate:I,lastBaseUpdate:N,shared:S.shared,callbacks:S.callbacks},o.updateQueue=y;return}o=y.lastBaseUpdate,o===null?y.firstBaseUpdate=h:o.next=h,y.lastBaseUpdate=h}var ca=!1;function Dr(){if(ca){var o=Mt;if(o!==null)throw o}}function Jr(o,h,y,S){ca=!1;var I=o.updateQueue;Hr=!1;var N=I.firstBaseUpdate,at=I.lastBaseUpdate,vt=I.shared.pending;if(vt!==null){I.shared.pending=null;var qt=vt,ge=qt.next;qt.next=null,at===null?N=ge:at.next=ge,at=qt;var Ce=o.alternate;Ce!==null&&(Ce=Ce.updateQueue,vt=Ce.lastBaseUpdate,vt!==at&&(vt===null?Ce.firstBaseUpdate=ge:vt.next=ge,Ce.lastBaseUpdate=qt))}if(N!==null){var ze=I.baseState;at=0,Ce=ge=qt=null,vt=N;do{var ve=vt.lane&-536870913,be=ve!==vt.lane;if(be?(li&ve)===ve:(S&ve)===ve){ve!==0&&ve===Et&&(ca=!0),Ce!==null&&(Ce=Ce.next={lane:0,tag:vt.tag,payload:vt.payload,callback:null,next:null});t:{var gn=o,On=vt;ve=h;var fr=y;switch(On.tag){case 1:if(gn=On.payload,typeof gn=="function"){ze=gn.call(fr,ze,ve);break t}ze=gn;break t;case 3:gn.flags=gn.flags&-65537|128;case 0:if(gn=On.payload,ve=typeof gn=="function"?gn.call(fr,ze,ve):gn,ve==null)break t;ze=M({},ze,ve);break t;case 2:Hr=!0}}ve=vt.callback,ve!==null&&(o.flags|=64,be&&(o.flags|=8192),be=I.callbacks,be===null?I.callbacks=[ve]:be.push(ve))}else be={lane:ve,tag:vt.tag,payload:vt.payload,callback:vt.callback,next:null},Ce===null?(ge=Ce=be,qt=ze):Ce=Ce.next=be,at|=ve;if(vt=vt.next,vt===null){if(vt=I.shared.pending,vt===null)break;be=vt,vt=be.next,be.next=null,I.lastBaseUpdate=be,I.shared.pending=null}}while(!0);Ce===null&&(qt=ze),I.baseState=qt,I.firstBaseUpdate=ge,I.lastBaseUpdate=Ce,N===null&&(I.shared.lanes=0),ac|=at,o.lanes=at,o.memoizedState=ze}}function du(o,h){if(typeof o!="function")throw Error(i(191,o));o.call(h)}function mr(o,h){var y=o.callbacks;if(y!==null)for(o.callbacks=null,o=0;o<y.length;o++)du(y[o],h)}var or=pt(null),Ca=pt(0);function gr(o,h){o=go,$t(Ca,o),$t(or,h),go=o|h.baseLanes}function jl(){$t(Ca,go),$t(or,or.current)}function Ac(){go=Ca.current,Tt(or),Tt(Ca)}var xs=pt(null),Bs=null;function pu(o){var h=o.alternate;$t(wi,wi.current&1),$t(xs,o),Bs===null&&(h===null||or.current!==null||h.memoizedState!==null)&&(Bs=o)}function ah(o){$t(wi,wi.current),$t(xs,o),Bs===null&&(Bs=o)}function Zo(o){o.tag===22?($t(wi,wi.current),$t(xs,o),Bs===null&&(Bs=o)):bs()}function bs(){$t(wi,wi.current),$t(xs,xs.current)}function Tr(o){Tt(xs),Bs===o&&(Bs=null),Tt(wi)}var wi=pt(0);function Ns(o){for(var h=o;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||Ha(y)||ka(y)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Go=0,En=null,Xi=null,ta=null,yr=!1,Mc=!1,Ec=!1,mu=0,Fl=0,Qu=null,Ym=0;function zr(){throw Error(i(321))}function Xm(o,h){if(h===null)return!1;for(var y=0;y<h.length&&y<o.length;y++)if(!kr(o[y],h[y]))return!1;return!0}function hp(o,h,y,S,I,N){return Go=N,En=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,kt.H=o===null||o.memoizedState===null?Tp:lg,Ec=!1,N=y(S,I),Ec=!1,Mc&&(N=fp(h,y,S,I)),a_(o),N}function a_(o){kt.H=rd;var h=Xi!==null&&Xi.next!==null;if(Go=0,ta=Xi=En=null,yr=!1,Fl=0,Qu=null,h)throw Error(i(300));o===null||fa||(o=o.dependencies,o!==null&&E(o)&&(fa=!0))}function fp(o,h,y,S){En=o;var I=0;do{if(Mc&&(Qu=null),Fl=0,Mc=!1,25<=I)throw Error(i(301));if(I+=1,ta=Xi=null,o.updateQueue!=null){var N=o.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}kt.H=Ap,N=h(y,S)}while(Mc);return N}function Vx(){var o=kt.H,h=o.useState()[0];return h=typeof h.then=="function"?Pc(h):h,o=o.useState()[0],(Xi!==null?Xi.memoizedState:null)!==o&&(En.flags|=1024),h}function Qf(){var o=mu!==0;return mu=0,o}function dp(o,h,y){h.updateQueue=o.updateQueue,h.flags&=-2053,o.lanes&=~y}function pp(o){if(yr){for(o=o.memoizedState;o!==null;){var h=o.queue;h!==null&&(h.pending=null),o=o.next}yr=!1}Go=0,ta=Xi=En=null,Mc=!1,Fl=mu=0,Qu=null}function ha(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ta===null?En.memoizedState=ta=o:ta=ta.next=o,ta}function ea(){if(Xi===null){var o=En.alternate;o=o!==null?o.memoizedState:null}else o=Xi.next;var h=ta===null?En.memoizedState:ta.next;if(h!==null)ta=h,Xi=o;else{if(o===null)throw En.alternate===null?Error(i(467)):Error(i(310));Xi=o,o={memoizedState:Xi.memoizedState,baseState:Xi.baseState,baseQueue:Xi.baseQueue,queue:Xi.queue,next:null},ta===null?En.memoizedState=ta=o:ta=ta.next=o}return ta}function Cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pc(o){var h=Fl;return Fl+=1,Qu===null&&(Qu=[]),o=qn(Qu,o,h),h=En,(ta===null?h.memoizedState:ta.next)===null&&(h=h.alternate,kt.H=h===null||h.memoizedState===null?Tp:lg),o}function sh(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Pc(o);if(o.$$typeof===Y)return m(o)}throw Error(i(438,String(o)))}function mp(o){var h=null,y=En.updateQueue;if(y!==null&&(h=y.memoCache),h==null){var S=En.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(I){return I.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),y===null&&(y=Cc(),En.updateQueue=y),y.memoCache=h,y=h.data[h.index],y===void 0)for(y=h.data[h.index]=Array(o),S=0;S<o;S++)y[S]=_t;return h.index++,y}function gu(o,h){return typeof h=="function"?h(o):h}function gp(o){var h=ea();return Fa(h,Xi,o)}function Fa(o,h,y){var S=o.queue;if(S===null)throw Error(i(311));S.lastRenderedReducer=y;var I=o.baseQueue,N=S.pending;if(N!==null){if(I!==null){var at=I.next;I.next=N.next,N.next=at}h.baseQueue=I=N,S.pending=null}if(N=o.baseState,I===null)o.memoizedState=N;else{h=I.next;var vt=at=null,qt=null,ge=h,Ce=!1;do{var ze=ge.lane&-536870913;if(ze!==ge.lane?(li&ze)===ze:(Go&ze)===ze){var ve=ge.revertLane;if(ve===0)qt!==null&&(qt=qt.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),ze===Et&&(Ce=!0);else if((Go&ve)===ve){ge=ge.next,ve===Et&&(Ce=!0);continue}else ze={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},qt===null?(vt=qt=ze,at=N):qt=qt.next=ze,En.lanes|=ve,ac|=ve;ze=ge.action,Ec&&y(N,ze),N=ge.hasEagerState?ge.eagerState:y(N,ze)}else ve={lane:ze,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},qt===null?(vt=qt=ve,at=N):qt=qt.next=ve,En.lanes|=ze,ac|=ze;ge=ge.next}while(ge!==null&&ge!==h);if(qt===null?at=N:qt.next=vt,!kr(N,o.memoizedState)&&(fa=!0,Ce&&(y=Mt,y!==null)))throw y;o.memoizedState=N,o.baseState=at,o.baseQueue=qt,S.lastRenderedState=N}return I===null&&(S.lanes=0),[o.memoizedState,S.dispatch]}function kc(o){var h=ea(),y=h.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=o;var S=y.dispatch,I=y.pending,N=h.memoizedState;if(I!==null){y.pending=null;var at=I=I.next;do N=o(N,at.action),at=at.next;while(at!==I);kr(N,h.memoizedState)||(fa=!0),h.memoizedState=N,h.baseQueue===null&&(h.baseState=N),y.lastRenderedState=N}return[N,S]}function yp(o,h,y){var S=En,I=ea(),N=Xn;if(N){if(y===void 0)throw Error(i(407));y=y()}else y=h();var at=!kr((Xi||I).memoizedState,y);if(at&&(I.memoizedState=y,fa=!0),I=I.queue,Ju(s_.bind(null,S,I,o),[o]),I.getSnapshot!==h||at||ta!==null&&ta.memoizedState.tag&1){if(S.flags|=2048,af(9,{destroy:void 0},nf.bind(null,S,I,y,h),null),Gi===null)throw Error(i(349));N||(Go&127)!==0||Km(S,h,y)}return y}function Km(o,h,y){o.flags|=16384,o={getSnapshot:h,value:y},h=En.updateQueue,h===null?(h=Cc(),En.updateQueue=h,h.stores=[o]):(y=h.stores,y===null?h.stores=[o]:y.push(o))}function nf(o,h,y,S){h.value=y,h.getSnapshot=S,Jf(h)&&o_(o)}function s_(o,h,y){return y(function(){Jf(h)&&o_(o)})}function Jf(o){var h=o.getSnapshot;o=o.value;try{var y=h();return!kr(o,y)}catch{return!0}}function o_(o){var h=_s(o,2);h!==null&&$s(h,o,2)}function _p(o){var h=ha();if(typeof o=="function"){var y=o;if(o=y(),Ec){xa(!0);try{y()}finally{xa(!1)}}}return h.memoizedState=h.baseState=o,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gu,lastRenderedState:o},h}function Qm(o,h,y,S){return o.baseState=y,Fa(o,Xi,typeof S=="function"?S:gu)}function l_(o,h,y,S,I){if(Sp(o))throw Error(i(485));if(o=h.action,o!==null){var N={payload:I,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(at){N.listeners.push(at)}};kt.T!==null?y(!0):N.isTransition=!1,S(N),y=h.pending,y===null?(N.next=h.pending=N,u_(h,N)):(N.next=y.next,h.pending=y.next=N)}}function u_(o,h){var y=h.action,S=h.payload,I=o.state;if(h.isTransition){var N=kt.T,at={};kt.T=at;try{var vt=y(I,S),qt=kt.S;qt!==null&&qt(at,vt),vp(o,h,vt)}catch(ge){td(o,h,ge)}finally{N!==null&&at.types!==null&&(N.types=at.types),kt.T=N}}else try{N=y(I,S),vp(o,h,N)}catch(ge){td(o,h,ge)}}function vp(o,h,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){Jm(o,h,S)},function(S){return td(o,h,S)}):Jm(o,h,y)}function Jm(o,h,y){h.status="fulfilled",h.value=y,rf(h),o.state=y,h=o.pending,h!==null&&(y=h.next,y===h?o.pending=null:(y=y.next,h.next=y,u_(o,y)))}function td(o,h,y){var S=o.pending;if(o.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=y,rf(h),h=h.next;while(h!==S)}o.action=null}function rf(o){o=o.listeners;for(var h=0;h<o.length;h++)(0,o[h])()}function po(o,h){return h}function tg(o,h){if(Xn){var y=Gi.formState;if(y!==null){t:{var S=En;if(Xn){if(ri){e:{for(var I=ri,N=oi;I.nodeType!==8;){if(!N){I=null;break e}if(I=hr(I.nextSibling),I===null){I=null;break e}}N=I.data,I=N==="F!"||N==="F"?I:null}if(I){ri=hr(I.nextSibling),S=I.data==="F!";break t}}Or(S)}S=!1}S&&(h=y[0])}}return y=ha(),y.memoizedState=y.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:h},y.queue=S,y=bp.bind(null,En,S),S.dispatch=y,S=_p(!1),N=wp.bind(null,En,!1,S.queue),S=ha(),I={state:h,dispatch:null,action:o,pending:null},S.queue=I,y=l_.bind(null,En,I,N,y),I.dispatch=y,S.memoizedState=o,[h,y,!1]}function c_(o){var h=ea();return eg(h,Xi,o)}function eg(o,h,y){if(h=Fa(o,h,po)[0],o=gp(gu)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=Pc(h)}catch(at){throw at===Se?ke:at}else S=h;h=ea();var I=h.queue,N=I.dispatch;return y!==h.memoizedState&&(En.flags|=2048,af(9,{destroy:void 0},$x.bind(null,I,y),null)),[S,N,o]}function $x(o,h){o.action=h}function h_(o){var h=ea(),y=Xi;if(y!==null)return eg(h,y,o);ea(),h=h.memoizedState,y=ea();var S=y.queue.dispatch;return y.memoizedState=o,[h,S,!1]}function af(o,h,y,S){return o={tag:o,create:y,deps:S,inst:h,next:null},h=En.updateQueue,h===null&&(h=Cc(),En.updateQueue=h),y=h.lastEffect,y===null?h.lastEffect=o.next=o:(S=y.next,y.next=o,o.next=S,h.lastEffect=o),o}function f_(){return ea().memoizedState}function sf(o,h,y,S){var I=ha();En.flags|=o,I.memoizedState=af(1|h,{destroy:void 0},y,S===void 0?null:S)}function oh(o,h,y,S){var I=ea();S=S===void 0?null:S;var N=I.memoizedState.inst;Xi!==null&&S!==null&&Xm(S,Xi.memoizedState.deps)?I.memoizedState=af(h,N,y,S):(En.flags|=o,I.memoizedState=af(1|h,N,y,S))}function ng(o,h){sf(8390656,8,o,h)}function Ju(o,h){oh(2048,8,o,h)}function ed(o){En.flags|=4;var h=En.updateQueue;if(h===null)h=Cc(),En.updateQueue=h,h.events=[o];else{var y=h.events;y===null?h.events=[o]:y.push(o)}}function d_(o){var h=ea().memoizedState;return ed({ref:h,nextImpl:o}),function(){if((ki&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}function p_(o,h){return oh(4,2,o,h)}function m_(o,h){return oh(4,4,o,h)}function g_(o,h){if(typeof h=="function"){o=o();var y=h(o);return function(){typeof y=="function"?y():h(null)}}if(h!=null)return o=o(),h.current=o,function(){h.current=null}}function y_(o,h,y){y=y!=null?y.concat([o]):null,oh(4,4,g_.bind(null,h,o),y)}function ig(){}function __(o,h){var y=ea();h=h===void 0?null:h;var S=y.memoizedState;return h!==null&&Xm(h,S[1])?S[0]:(y.memoizedState=[o,h],o)}function xp(o,h){var y=ea();h=h===void 0?null:h;var S=y.memoizedState;if(h!==null&&Xm(h,S[1]))return S[0];if(S=o(),Ec){xa(!0);try{o()}finally{xa(!1)}}return y.memoizedState=[S,h],S}function rg(o,h,y){return y===void 0||(Go&1073741824)!==0&&(li&261930)===0?o.memoizedState=h:(o.memoizedState=y,o=Xp(),En.lanes|=o,ac|=o,y)}function lh(o,h,y,S){return kr(y,h)?y:or.current!==null?(o=rg(o,y,S),kr(o,h)||(fa=!0),o):(Go&42)===0||(Go&1073741824)!==0&&(li&261930)===0?(fa=!0,o.memoizedState=y):(o=Xp(),En.lanes|=o,ac|=o,h)}function v_(o,h,y,S,I){var N=Ot.p;Ot.p=N!==0&&8>N?N:8;var at=kt.T,vt={};kt.T=vt,wp(o,!1,h,y);try{var qt=I(),ge=kt.S;if(ge!==null&&ge(vt,qt),qt!==null&&typeof qt=="object"&&typeof qt.then=="function"){var Ce=Gt(qt,S);uh(o,h,Ce,_o(o))}else uh(o,h,S,_o(o))}catch(ze){uh(o,h,{then:function(){},status:"rejected",reason:ze},_o())}finally{Ot.p=N,at!==null&&vt.types!==null&&(at.types=vt.types),kt.T=at}}function Lr(){}function of(o,h,y,S){if(o.tag!==5)throw Error(i(476));var I=ag(o).queue;v_(o,I,h,St,y===null?Lr:function(){return nd(o),y(S)})}function ag(o){var h=o.memoizedState;if(h!==null)return h;h={memoizedState:St,baseState:St,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gu,lastRenderedState:St},next:null};var y={};return h.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gu,lastRenderedState:y},next:null},o.memoizedState=h,o=o.alternate,o!==null&&(o.memoizedState=h),h}function nd(o){var h=ag(o);h.next===null&&(h=o.alternate.memoizedState),uh(o,h.next.queue,{},_o())}function lf(){return m(Ig)}function uf(){return ea().memoizedState}function sg(){return ea().memoizedState}function x_(o){for(var h=o.return;h!==null;){switch(h.tag){case 24:case 3:var y=_o();o=Ea(y);var S=rs(h,o,y);S!==null&&($s(S,h,y),Ho(S,h,y)),h={cache:K()},o.payload=h;return}h=h.return}}function id(o,h,y){var S=_o();y={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Sp(o)?og(h,y):(y=Ye(o,h,y,S),y!==null&&($s(y,o,S),cf(y,h,S)))}function bp(o,h,y){var S=_o();uh(o,h,y,S)}function uh(o,h,y,S){var I={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(Sp(o))og(h,I);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=h.lastRenderedReducer,N!==null))try{var at=h.lastRenderedState,vt=N(at,y);if(I.hasEagerState=!0,I.eagerState=vt,kr(vt,at))return Fo(o,h,I,0),Gi===null&&lo(),!1}catch{}finally{}if(y=Ye(o,h,I,S),y!==null)return $s(y,o,S),cf(y,h,S),!0}return!1}function wp(o,h,y,S){if(S={lane:2,revertLane:Cd(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},Sp(o)){if(h)throw Error(i(479))}else h=Ye(o,y,S,2),h!==null&&$s(h,o,2)}function Sp(o){var h=o.alternate;return o===En||h!==null&&h===En}function og(o,h){Mc=yr=!0;var y=o.pending;y===null?h.next=h:(h.next=y.next,y.next=h),o.pending=h}function cf(o,h,y){if((y&4194048)!==0){var S=h.lanes;S&=o.pendingLanes,y|=S,h.lanes=y,Ft(o,y)}}var rd={readContext:m,use:sh,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useLayoutEffect:zr,useInsertionEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useSyncExternalStore:zr,useId:zr,useHostTransitionStatus:zr,useFormState:zr,useActionState:zr,useOptimistic:zr,useMemoCache:zr,useCacheRefresh:zr};rd.useEffectEvent=zr;var Tp={readContext:m,use:sh,useCallback:function(o,h){return ha().memoizedState=[o,h===void 0?null:h],o},useContext:m,useEffect:ng,useImperativeHandle:function(o,h,y){y=y!=null?y.concat([o]):null,sf(4194308,4,g_.bind(null,h,o),y)},useLayoutEffect:function(o,h){return sf(4194308,4,o,h)},useInsertionEffect:function(o,h){sf(4,2,o,h)},useMemo:function(o,h){var y=ha();h=h===void 0?null:h;var S=o();if(Ec){xa(!0);try{o()}finally{xa(!1)}}return y.memoizedState=[S,h],S},useReducer:function(o,h,y){var S=ha();if(y!==void 0){var I=y(h);if(Ec){xa(!0);try{y(h)}finally{xa(!1)}}}else I=h;return S.memoizedState=S.baseState=I,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:I},S.queue=o,o=o.dispatch=id.bind(null,En,o),[S.memoizedState,o]},useRef:function(o){var h=ha();return o={current:o},h.memoizedState=o},useState:function(o){o=_p(o);var h=o.queue,y=bp.bind(null,En,h);return h.dispatch=y,[o.memoizedState,y]},useDebugValue:ig,useDeferredValue:function(o,h){var y=ha();return rg(y,o,h)},useTransition:function(){var o=_p(!1);return o=v_.bind(null,En,o.queue,!0,!1),ha().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,h,y){var S=En,I=ha();if(Xn){if(y===void 0)throw Error(i(407));y=y()}else{if(y=h(),Gi===null)throw Error(i(349));(li&127)!==0||Km(S,h,y)}I.memoizedState=y;var N={value:y,getSnapshot:h};return I.queue=N,ng(s_.bind(null,S,N,o),[o]),S.flags|=2048,af(9,{destroy:void 0},nf.bind(null,S,N,y,h),null),y},useId:function(){var o=ha(),h=Gi.identifierPrefix;if(Xn){var y=Ke,S=Oe;y=(S&~(1<<32-pr(S)-1)).toString(32)+y,h="_"+h+"R_"+y,y=mu++,0<y&&(h+="H"+y.toString(32)),h+="_"}else y=Ym++,h="_"+h+"r_"+y.toString(32)+"_";return o.memoizedState=h},useHostTransitionStatus:lf,useFormState:tg,useActionState:tg,useOptimistic:function(o){var h=ha();h.memoizedState=h.baseState=o;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=y,h=wp.bind(null,En,!0,y),y.dispatch=h,[o,h]},useMemoCache:mp,useCacheRefresh:function(){return ha().memoizedState=x_.bind(null,En)},useEffectEvent:function(o){var h=ha(),y={impl:o};return h.memoizedState=y,function(){if((ki&2)!==0)throw Error(i(440));return y.impl.apply(void 0,arguments)}}},lg={readContext:m,use:sh,useCallback:__,useContext:m,useEffect:Ju,useImperativeHandle:y_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:xp,useReducer:gp,useRef:f_,useState:function(){return gp(gu)},useDebugValue:ig,useDeferredValue:function(o,h){var y=ea();return lh(y,Xi.memoizedState,o,h)},useTransition:function(){var o=gp(gu)[0],h=ea().memoizedState;return[typeof o=="boolean"?o:Pc(o),h]},useSyncExternalStore:yp,useId:uf,useHostTransitionStatus:lf,useFormState:c_,useActionState:c_,useOptimistic:function(o,h){var y=ea();return Qm(y,Xi,o,h)},useMemoCache:mp,useCacheRefresh:sg};lg.useEffectEvent=d_;var Ap={readContext:m,use:sh,useCallback:__,useContext:m,useEffect:Ju,useImperativeHandle:y_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:xp,useReducer:kc,useRef:f_,useState:function(){return kc(gu)},useDebugValue:ig,useDeferredValue:function(o,h){var y=ea();return Xi===null?rg(y,o,h):lh(y,Xi.memoizedState,o,h)},useTransition:function(){var o=kc(gu)[0],h=ea().memoizedState;return[typeof o=="boolean"?o:Pc(o),h]},useSyncExternalStore:yp,useId:uf,useHostTransitionStatus:lf,useFormState:h_,useActionState:h_,useOptimistic:function(o,h){var y=ea();return Xi!==null?Qm(y,Xi,o,h):(y.baseState=o,[o,y.queue.dispatch])},useMemoCache:mp,useCacheRefresh:sg};Ap.useEffectEvent=d_;function ad(o,h,y,S){h=o.memoizedState,y=y(S,h),y=y==null?h:M({},h,y),o.memoizedState=y,o.lanes===0&&(o.updateQueue.baseState=y)}var sd={enqueueSetState:function(o,h,y){o=o._reactInternals;var S=_o(),I=Ea(S);I.payload=h,y!=null&&(I.callback=y),h=rs(o,I,S),h!==null&&($s(h,o,S),Ho(h,o,S))},enqueueReplaceState:function(o,h,y){o=o._reactInternals;var S=_o(),I=Ea(S);I.tag=1,I.payload=h,y!=null&&(I.callback=y),h=rs(o,I,S),h!==null&&($s(h,o,S),Ho(h,o,S))},enqueueForceUpdate:function(o,h){o=o._reactInternals;var y=_o(),S=Ea(y);S.tag=2,h!=null&&(S.callback=h),h=rs(o,S,y),h!==null&&($s(h,o,y),Ho(h,o,y))}};function ug(o,h,y,S,I,N,at){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(S,N,at):h.prototype&&h.prototype.isPureReactComponent?!ys(y,S)||!ys(I,N):!0}function cg(o,h,y,S){o=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,S),h.state!==o&&sd.enqueueReplaceState(h,h.state,null)}function ch(o,h){var y=h;if("ref"in h){y={};for(var S in h)S!=="ref"&&(y[S]=h[S])}if(o=o.defaultProps){y===h&&(y=M({},y));for(var I in o)y[I]===void 0&&(y[I]=o[I])}return y}function b_(o){is(o)}function w_(o){console.error(o)}function S_(o){is(o)}function Mp(o,h){try{var y=o.onUncaughtError;y(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function tc(o,h,y){try{var S=o.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function hg(o,h,y){return y=Ea(y),y.tag=3,y.payload={element:null},y.callback=function(){Mp(o,h)},y}function fg(o){return o=Ea(o),o.tag=3,o}function hh(o,h,y,S){var I=y.type.getDerivedStateFromError;if(typeof I=="function"){var N=S.value;o.payload=function(){return I(N)},o.callback=function(){tc(h,y,S)}}var at=y.stateNode;at!==null&&typeof at.componentDidCatch=="function"&&(o.callback=function(){tc(h,y,S),typeof I!="function"&&(xu===null?xu=new Set([this]):xu.add(this));var vt=S.stack;this.componentDidCatch(S.value,{componentStack:vt!==null?vt:""})})}function qx(o,h,y,S,I){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=y.alternate,h!==null&&ei(h,y,I,!0),y=xs.current,y!==null){switch(y.tag){case 31:case 13:return Bs===null?vd():y.alternate===null&&Ir===0&&(Ir=3),y.flags&=-257,y.flags|=65536,y.lanes=I,S===Ne?y.flags|=16384:(h=y.updateQueue,h===null?y.updateQueue=new Set([S]):h.add(S),pa(o,S,I)),!1;case 22:return y.flags|=65536,S===Ne?y.flags|=16384:(h=y.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=h):(y=h.retryQueue,y===null?h.retryQueue=new Set([S]):y.add(S)),pa(o,S,I)),!1}throw Error(i(435,y.tag))}return pa(o,S,I),vd(),!1}if(Xn)return h=xs.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=I,S!==hu&&(o=Error(i(422),{cause:S}),$o(w(o,y)))):(S!==hu&&(h=Error(i(423),{cause:S}),$o(w(h,y))),o=o.current.alternate,o.flags|=65536,I&=-I,o.lanes|=I,S=w(S,y),I=hg(o.stateNode,S,I),fu(o,I),Ir!==4&&(Ir=2)),!1;var N=Error(i(520),{cause:S});if(N=w(N,y),yd===null?yd=[N]:yd.push(N),Ir!==4&&(Ir=2),h===null)return!0;S=w(S,y),y=h;do{switch(y.tag){case 3:return y.flags|=65536,o=I&-I,y.lanes|=o,o=hg(y.stateNode,S,o),fu(y,o),!1;case 1:if(h=y.type,N=y.stateNode,(y.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(xu===null||!xu.has(N))))return y.flags|=65536,I&=-I,y.lanes|=I,I=fg(I),hh(I,o,y,S),fu(y,I),!1}y=y.return}while(y!==null);return!1}var dg=Error(i(461)),fa=!1;function Ua(o,h,y,S){h.child=o===null?Sr(h,null,y,S):er(h,o.child,y,S)}function pg(o,h,y,S,I){y=y.render;var N=h.ref;if("ref"in S){var at={};for(var vt in S)vt!=="ref"&&(at[vt]=S[vt])}else at=S;return u(h),S=hp(o,h,y,at,N,I),vt=Qf(),o!==null&&!fa?(dp(o,h,I),yu(o,h,I)):(Xn&&vt&&ci(h),h.flags|=1,Ua(o,h,S,I),h.child)}function T_(o,h,y,S,I){if(o===null){var N=y.type;return typeof N=="function"&&!Xu(N)&&N.defaultProps===void 0&&y.compare===null?(h.tag=15,h.type=N,A_(o,h,N,S,I)):(o=Nl(y.type,null,S,h,h.mode,I),o.ref=h.ref,o.return=h,h.child=o)}if(N=o.child,!zp(o,I)){var at=N.memoizedProps;if(y=y.compare,y=y!==null?y:ys,y(at,S)&&o.ref===h.ref)return yu(o,h,I)}return h.flags|=1,o=uo(N,S),o.ref=h.ref,o.return=h,h.child=o}function A_(o,h,y,S,I){if(o!==null){var N=o.memoizedProps;if(ys(N,S)&&o.ref===h.ref)if(fa=!1,h.pendingProps=S=N,zp(o,I))(o.flags&131072)!==0&&(fa=!0);else return h.lanes=o.lanes,yu(o,h,I)}return kp(o,h,y,S,I)}function M_(o,h,y,S){var I=S.children,N=o!==null?o.memoizedState:null;if(o===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((h.flags&128)!==0){if(N=N!==null?N.baseLanes|y:y,o!==null){for(S=h.child=o.child,I=0;S!==null;)I=I|S.lanes|S.childLanes,S=S.sibling;S=I&~N}else S=0,h.child=null;return Ep(o,h,N,y,S)}if((y&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},o!==null&&he(h,N!==null?N.cachePool:null),N!==null?gr(h,N):jl(),Zo(h);else return S=h.lanes=536870912,Ep(o,h,N!==null?N.baseLanes|y:y,y,S)}else N!==null?(he(h,N.cachePool),gr(h,N),bs(),h.memoizedState=null):(o!==null&&he(h,null),jl(),bs());return Ua(o,h,I,y),h.child}function od(o,h){return o!==null&&o.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function Ep(o,h,y,S,I){var N=Kt();return N=N===null?null:{parent:q._currentValue,pool:N},h.memoizedState={baseLanes:y,cachePool:N},o!==null&&he(h,null),jl(),Zo(h),o!==null&&ei(o,h,S,!0),h.childLanes=I,null}function Oc(o,h){return h=Dp({mode:h.mode,children:h.children},o.mode),h.ref=o.ref,o.child=h,h.return=o,h}function Cp(o,h,y){return er(h,o.child,null,y),o=Oc(h,h.pendingProps),o.flags|=2,Tr(h),h.memoizedState=null,o}function Hx(o,h,y){var S=h.pendingProps,I=(h.flags&128)!==0;if(h.flags&=-129,o===null){if(Xn){if(S.mode==="hidden")return o=Oc(h,S),h.lanes=536870912,od(null,o);if(ah(h),(o=ri)?(o=qa(o,oi),o=o!==null&&o.data==="&"?o:null,o!==null&&(h.memoizedState={dehydrated:o,treeContext:pe!==null?{id:Oe,overflow:Ke}:null,retryLane:536870912,hydrationErrors:null},y=la(o),y.return=h,h.child=y,Ge=h,ri=null)):o=null,o===null)throw Or(h);return h.lanes=536870912,null}return Oc(h,S)}var N=o.memoizedState;if(N!==null){var at=N.dehydrated;if(ah(h),I)if(h.flags&256)h.flags&=-257,h=Cp(o,h,y);else if(h.memoizedState!==null)h.child=o.child,h.flags|=128,h=null;else throw Error(i(558));else if(fa||ei(o,h,y,!1),I=(y&o.childLanes)!==0,fa||I){if(S=Gi,S!==null&&(at=Xt(S,y),at!==0&&at!==N.retryLane))throw N.retryLane=at,_s(o,at),$s(S,o,at),dg;vd(),h=Cp(o,h,y)}else o=N.treeContext,ri=hr(at.nextSibling),Ge=h,Xn=!0,ho=null,oi=!1,o!==null&&Qe(h,o),h=Oc(h,S),h.flags|=4096;return h}return o=uo(o.child,{mode:S.mode,children:S.children}),o.ref=h.ref,h.child=o,o.return=h,o}function Pp(o,h){var y=h.ref;if(y===null)o!==null&&o.ref!==null&&(h.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(i(284));(o===null||o.ref!==y)&&(h.flags|=4194816)}}function kp(o,h,y,S,I){return u(h),y=hp(o,h,y,S,void 0,I),S=Qf(),o!==null&&!fa?(dp(o,h,I),yu(o,h,I)):(Xn&&S&&ci(h),h.flags|=1,Ua(o,h,y,I),h.child)}function E_(o,h,y,S,I,N){return u(h),h.updateQueue=null,y=fp(h,S,y,I),a_(o),S=Qf(),o!==null&&!fa?(dp(o,h,N),yu(o,h,N)):(Xn&&S&&ci(h),h.flags|=1,Ua(o,h,y,N),h.child)}function C_(o,h,y,S,I){if(u(h),h.stateNode===null){var N=Uo,at=y.contextType;typeof at=="object"&&at!==null&&(N=m(at)),N=new y(S,N),h.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=sd,h.stateNode=N,N._reactInternals=h,N=h.stateNode,N.props=S,N.state=h.memoizedState,N.refs={},ji(h),at=y.contextType,N.context=typeof at=="object"&&at!==null?m(at):Uo,N.state=h.memoizedState,at=y.getDerivedStateFromProps,typeof at=="function"&&(ad(h,y,at,S),N.state=h.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(at=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),at!==N.state&&sd.enqueueReplaceState(N,N.state,null),Jr(h,S,N,I),Dr(),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(o===null){N=h.stateNode;var vt=h.memoizedProps,qt=ch(y,vt);N.props=qt;var ge=N.context,Ce=y.contextType;at=Uo,typeof Ce=="object"&&Ce!==null&&(at=m(Ce));var ze=y.getDerivedStateFromProps;Ce=typeof ze=="function"||typeof N.getSnapshotBeforeUpdate=="function",vt=h.pendingProps!==vt,Ce||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(vt||ge!==at)&&cg(h,N,S,at),Hr=!1;var ve=h.memoizedState;N.state=ve,Jr(h,S,N,I),Dr(),ge=h.memoizedState,vt||ve!==ge||Hr?(typeof ze=="function"&&(ad(h,y,ze,S),ge=h.memoizedState),(qt=Hr||ug(h,y,qt,S,ve,ge,at))?(Ce||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(h.flags|=4194308)):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=ge),N.props=S,N.state=ge,N.context=at,S=qt):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{N=h.stateNode,fo(o,h),at=h.memoizedProps,Ce=ch(y,at),N.props=Ce,ze=h.pendingProps,ve=N.context,ge=y.contextType,qt=Uo,typeof ge=="object"&&ge!==null&&(qt=m(ge)),vt=y.getDerivedStateFromProps,(ge=typeof vt=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(at!==ze||ve!==qt)&&cg(h,N,S,qt),Hr=!1,ve=h.memoizedState,N.state=ve,Jr(h,S,N,I),Dr();var be=h.memoizedState;at!==ze||ve!==be||Hr||o!==null&&o.dependencies!==null&&E(o.dependencies)?(typeof vt=="function"&&(ad(h,y,vt,S),be=h.memoizedState),(Ce=Hr||ug(h,y,Ce,S,ve,be,qt)||o!==null&&o.dependencies!==null&&E(o.dependencies))?(ge||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(S,be,qt),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(S,be,qt)),typeof N.componentDidUpdate=="function"&&(h.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof N.componentDidUpdate!="function"||at===o.memoizedProps&&ve===o.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||at===o.memoizedProps&&ve===o.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=be),N.props=S,N.state=be,N.context=qt,S=Ce):(typeof N.componentDidUpdate!="function"||at===o.memoizedProps&&ve===o.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||at===o.memoizedProps&&ve===o.memoizedState||(h.flags|=1024),S=!1)}return N=S,Pp(o,h),S=(h.flags&128)!==0,N||S?(N=h.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:N.render(),h.flags|=1,o!==null&&S?(h.child=er(h,o.child,null,I),h.child=er(h,null,y,I)):Ua(o,h,y,I),h.memoizedState=N.state,o=h.child):o=yu(o,h,I),o}function hf(o,h,y,S){return bi(),h.flags|=256,Ua(o,h,y,S),h.child}var Op={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mg(o){return{baseLanes:o,cachePool:me()}}function gg(o,h,y){return o=o!==null?o.childLanes&~y:0,h&&(o|=ws),o}function P_(o,h,y){var S=h.pendingProps,I=!1,N=(h.flags&128)!==0,at;if((at=N)||(at=o!==null&&o.memoizedState===null?!1:(wi.current&2)!==0),at&&(I=!0,h.flags&=-129),at=(h.flags&32)!==0,h.flags&=-33,o===null){if(Xn){if(I?pu(h):bs(),(o=ri)?(o=qa(o,oi),o=o!==null&&o.data!=="&"?o:null,o!==null&&(h.memoizedState={dehydrated:o,treeContext:pe!==null?{id:Oe,overflow:Ke}:null,retryLane:536870912,hydrationErrors:null},y=la(o),y.return=h,h.child=y,Ge=h,ri=null)):o=null,o===null)throw Or(h);return ka(o)?h.lanes=32:h.lanes=536870912,null}var vt=S.children;return S=S.fallback,I?(bs(),I=h.mode,vt=Dp({mode:"hidden",children:vt},I),S=Vo(S,I,y,null),vt.return=h,S.return=h,vt.sibling=S,h.child=vt,S=h.child,S.memoizedState=mg(y),S.childLanes=gg(o,at,y),h.memoizedState=Op,od(null,S)):(pu(h),yg(h,vt))}var qt=o.memoizedState;if(qt!==null&&(vt=qt.dehydrated,vt!==null)){if(N)h.flags&256?(pu(h),h.flags&=-257,h=_g(o,h,y)):h.memoizedState!==null?(bs(),h.child=o.child,h.flags|=128,h=null):(bs(),vt=S.fallback,I=h.mode,S=Dp({mode:"visible",children:S.children},I),vt=Vo(vt,I,y,null),vt.flags|=2,S.return=h,vt.return=h,S.sibling=vt,h.child=S,er(h,o.child,null,y),S=h.child,S.memoizedState=mg(y),S.childLanes=gg(o,at,y),h.memoizedState=Op,h=od(null,S));else if(pu(h),ka(vt)){if(at=vt.nextSibling&&vt.nextSibling.dataset,at)var ge=at.dgst;at=ge,S=Error(i(419)),S.stack="",S.digest=at,$o({value:S,source:null,stack:null}),h=_g(o,h,y)}else if(fa||ei(o,h,y,!1),at=(y&o.childLanes)!==0,fa||at){if(at=Gi,at!==null&&(S=Xt(at,y),S!==0&&S!==qt.retryLane))throw qt.retryLane=S,_s(o,S),$s(at,o,S),dg;Ha(vt)||vd(),h=_g(o,h,y)}else Ha(vt)?(h.flags|=192,h.child=o.child,h=null):(o=qt.treeContext,ri=hr(vt.nextSibling),Ge=h,Xn=!0,ho=null,oi=!1,o!==null&&Qe(h,o),h=yg(h,S.children),h.flags|=4096);return h}return I?(bs(),vt=S.fallback,I=h.mode,qt=o.child,ge=qt.sibling,S=uo(qt,{mode:"hidden",children:S.children}),S.subtreeFlags=qt.subtreeFlags&65011712,ge!==null?vt=uo(ge,vt):(vt=Vo(vt,I,y,null),vt.flags|=2),vt.return=h,S.return=h,S.sibling=vt,h.child=S,od(null,S),S=h.child,vt=o.child.memoizedState,vt===null?vt=mg(y):(I=vt.cachePool,I!==null?(qt=q._currentValue,I=I.parent!==qt?{parent:qt,pool:qt}:I):I=me(),vt={baseLanes:vt.baseLanes|y,cachePool:I}),S.memoizedState=vt,S.childLanes=gg(o,at,y),h.memoizedState=Op,od(o.child,S)):(pu(h),y=o.child,o=y.sibling,y=uo(y,{mode:"visible",children:S.children}),y.return=h,y.sibling=null,o!==null&&(at=h.deletions,at===null?(h.deletions=[o],h.flags|=16):at.push(o)),h.child=y,h.memoizedState=null,y)}function yg(o,h){return h=Dp({mode:"visible",children:h},o.mode),h.return=o,o.child=h}function Dp(o,h){return o=Ma(22,o,null,h),o.lanes=0,o}function _g(o,h,y){return er(h,o.child,null,y),o=yg(h,h.pendingProps.children),o.flags|=2,h.memoizedState=null,o}function vg(o,h,y){o.lanes|=h;var S=o.alternate;S!==null&&(S.lanes|=h),ih(o.return,h,y)}function ld(o,h,y,S,I,N){var at=o.memoizedState;at===null?o.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:I,treeForkCount:N}:(at.isBackwards=h,at.rendering=null,at.renderingStartTime=0,at.last=S,at.tail=y,at.tailMode=I,at.treeForkCount=N)}function xg(o,h,y){var S=h.pendingProps,I=S.revealOrder,N=S.tail;S=S.children;var at=wi.current,vt=(at&2)!==0;if(vt?(at=at&1|2,h.flags|=128):at&=1,$t(wi,at),Ua(o,h,S,y),S=Xn?mt:0,!vt&&o!==null&&(o.flags&128)!==0)t:for(o=h.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&vg(o,y,h);else if(o.tag===19)vg(o,y,h);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===h)break t;for(;o.sibling===null;){if(o.return===null||o.return===h)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(I){case"forwards":for(y=h.child,I=null;y!==null;)o=y.alternate,o!==null&&Ns(o)===null&&(I=y),y=y.sibling;y=I,y===null?(I=h.child,h.child=null):(I=y.sibling,y.sibling=null),ld(h,!1,I,y,N,S);break;case"backwards":case"unstable_legacy-backwards":for(y=null,I=h.child,h.child=null;I!==null;){if(o=I.alternate,o!==null&&Ns(o)===null){h.child=I;break}o=I.sibling,I.sibling=y,y=I,I=o}ld(h,!0,y,null,N,S);break;case"together":ld(h,!1,null,null,void 0,S);break;default:h.memoizedState=null}return h.child}function yu(o,h,y){if(o!==null&&(h.dependencies=o.dependencies),ac|=h.lanes,(y&h.childLanes)===0)if(o!==null){if(ei(o,h,y,!1),(y&h.childLanes)===0)return null}else return null;if(o!==null&&h.child!==o.child)throw Error(i(153));if(h.child!==null){for(o=h.child,y=uo(o,o.pendingProps),h.child=y,y.return=h;o.sibling!==null;)o=o.sibling,y=y.sibling=uo(o,o.pendingProps),y.return=h;y.sibling=null}return h.child}function zp(o,h){return(o.lanes&h)!==0?!0:(o=o.dependencies,!!(o!==null&&E(o)))}function Zx(o,h,y){switch(h.tag){case 3:Ie(h,h.stateNode.containerInfo),dl(h,q,o.memoizedState.cache),bi();break;case 27:case 5:Pe(h);break;case 4:Ie(h,h.stateNode.containerInfo);break;case 10:dl(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,ah(h),null;break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(pu(h),h.flags|=128,null):(y&h.child.childLanes)!==0?P_(o,h,y):(pu(h),o=yu(o,h,y),o!==null?o.sibling:null);pu(h);break;case 19:var I=(o.flags&128)!==0;if(S=(y&h.childLanes)!==0,S||(ei(o,h,y,!1),S=(y&h.childLanes)!==0),I){if(S)return xg(o,h,y);h.flags|=128}if(I=h.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),$t(wi,wi.current),S)break;return null;case 22:return h.lanes=0,M_(o,h,y,h.pendingProps);case 24:dl(h,q,o.memoizedState.cache)}return yu(o,h,y)}function ud(o,h,y){if(o!==null)if(o.memoizedProps!==h.pendingProps)fa=!0;else{if(!zp(o,y)&&(h.flags&128)===0)return fa=!1,Zx(o,h,y);fa=(o.flags&131072)!==0}else fa=!1,Xn&&(h.flags&1048576)!==0&&$n(h,mt,h.index);switch(h.lanes=0,h.tag){case 16:t:{var S=h.pendingProps;if(o=$e(h.elementType),h.type=o,typeof o=="function")Xu(o)?(S=ch(o,S),h.tag=1,h=C_(null,h,o,S,y)):(h.tag=0,h=kp(null,h,o,S,y));else{if(o!=null){var I=o.$$typeof;if(I===W){h.tag=11,h=pg(null,h,o,S,y);break t}else if(I===ht){h.tag=14,h=T_(null,h,o,S,y);break t}}throw h=ye(o)||o,Error(i(306,h,""))}}return h;case 0:return kp(o,h,h.type,h.pendingProps,y);case 1:return S=h.type,I=ch(S,h.pendingProps),C_(o,h,S,I,y);case 3:t:{if(Ie(h,h.stateNode.containerInfo),o===null)throw Error(i(387));S=h.pendingProps;var N=h.memoizedState;I=N.element,fo(o,h),Jr(h,S,null,y);var at=h.memoizedState;if(S=at.cache,dl(h,q,S),S!==N.cache&&rh(h,[q],y,!0),Dr(),S=at.element,N.isDehydrated)if(N={element:S,isDehydrated:!1,cache:at.cache},h.updateQueue.baseState=N,h.memoizedState=N,h.flags&256){h=hf(o,h,S,y);break t}else if(S!==I){I=w(Error(i(424)),h),$o(I),h=hf(o,h,S,y);break t}else{switch(o=h.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(ri=hr(o.firstChild),Ge=h,Xn=!0,ho=null,oi=!0,y=Sr(h,null,S,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(bi(),S===I){h=yu(o,h,y);break t}Ua(o,h,S,y)}h=h.child}return h;case 26:return Pp(o,h),o===null?(y=K_(h.type,null,h.pendingProps,null))?h.memoizedState=y:Xn||(y=h.type,o=h.pendingProps,S=qe(le.current).createElement(y),S[He]=h,S[Je]=o,Fe(S,y,o),Ji(S),h.stateNode=S):h.memoizedState=K_(h.type,o.memoizedProps,h.pendingProps,o.memoizedState),null;case 27:return Pe(h),o===null&&Xn&&(S=h.stateNode=Oa(h.type,h.pendingProps,le.current),Ge=h,oi=!0,I=ri,cr(h.type)?(Rr=I,ri=hr(S.firstChild)):ri=I),Ua(o,h,h.pendingProps.children,y),Pp(o,h),o===null&&(h.flags|=4194304),h.child;case 5:return o===null&&Xn&&((I=S=ri)&&(S=ia(S,h.type,h.pendingProps,oi),S!==null?(h.stateNode=S,Ge=h,ri=hr(S.firstChild),oi=!1,I=!0):I=!1),I||Or(h)),Pe(h),I=h.type,N=h.pendingProps,at=o!==null?o.memoizedProps:null,S=N.children,un(I,N)?S=null:at!==null&&un(I,at)&&(h.flags|=32),h.memoizedState!==null&&(I=hp(o,h,Vx,null,null,y),Ig._currentValue=I),Pp(o,h),Ua(o,h,S,y),h.child;case 6:return o===null&&Xn&&((o=y=ri)&&(y=ra(y,h.pendingProps,oi),y!==null?(h.stateNode=y,Ge=h,ri=null,o=!0):o=!1),o||Or(h)),null;case 13:return P_(o,h,y);case 4:return Ie(h,h.stateNode.containerInfo),S=h.pendingProps,o===null?h.child=er(h,null,S,y):Ua(o,h,S,y),h.child;case 11:return pg(o,h,h.type,h.pendingProps,y);case 7:return Ua(o,h,h.pendingProps,y),h.child;case 8:return Ua(o,h,h.pendingProps.children,y),h.child;case 12:return Ua(o,h,h.pendingProps.children,y),h.child;case 10:return S=h.pendingProps,dl(h,h.type,S.value),Ua(o,h,S.children,y),h.child;case 9:return I=h.type._context,S=h.pendingProps.children,u(h),I=m(I),S=S(I),h.flags|=1,Ua(o,h,S,y),h.child;case 14:return T_(o,h,h.type,h.pendingProps,y);case 15:return A_(o,h,h.type,h.pendingProps,y);case 19:return xg(o,h,y);case 31:return Hx(o,h,y);case 22:return M_(o,h,y,h.pendingProps);case 24:return u(h),S=m(q),o===null?(I=Kt(),I===null&&(I=Gi,N=K(),I.pooledCache=N,N.refCount++,N!==null&&(I.pooledCacheLanes|=y),I=N),h.memoizedState={parent:S,cache:I},ji(h),dl(h,q,I)):((o.lanes&y)!==0&&(fo(o,h),Jr(h,null,null,y),Dr()),I=o.memoizedState,N=h.memoizedState,I.parent!==S?(I={parent:S,cache:S},h.memoizedState=I,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=I),dl(h,q,S)):(S=N.cache,dl(h,q,S),S!==I.cache&&rh(h,[q],y,!0))),Ua(o,h,h.pendingProps.children,y),h.child;case 29:throw h.pendingProps}throw Error(i(156,h.tag))}function ec(o){o.flags|=4}function Lp(o,h,y,S,I){if((h=(o.mode&32)!==0)&&(h=!1),h){if(o.flags|=16777216,(I&335544128)===I)if(o.stateNode.complete)o.flags|=8192;else if(j_())o.flags|=8192;else throw fn=Ne,Le}else o.flags&=-16777217}function k_(o,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!wo(h))if(j_())o.flags|=8192;else throw fn=Ne,Le}function Ip(o,h){h!==null&&(o.flags|=4),o.flags&16384&&(h=o.tag!==22?wt():536870912,o.lanes|=h,ph|=h)}function cd(o,h){if(!Xn)switch(o.tailMode){case"hidden":h=o.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?o.tail=null:y.sibling=null;break;case"collapsed":y=o.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?h||o.tail===null?o.tail=null:o.tail.sibling=null:S.sibling=null}}function lr(o){var h=o.alternate!==null&&o.alternate.child===o.child,y=0,S=0;if(h)for(var I=o.child;I!==null;)y|=I.lanes|I.childLanes,S|=I.subtreeFlags&65011712,S|=I.flags&65011712,I.return=o,I=I.sibling;else for(I=o.child;I!==null;)y|=I.lanes|I.childLanes,S|=I.subtreeFlags,S|=I.flags,I.return=o,I=I.sibling;return o.subtreeFlags|=S,o.childLanes=y,h}function Gx(o,h,y){var S=h.pendingProps;switch(tr(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(h),null;case 1:return lr(h),null;case 3:return y=h.stateNode,S=null,o!==null&&(S=o.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),vs(q),Wt(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(hi(h)?ec(h):o===null||o.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,fl())),lr(h),null;case 26:var I=h.type,N=h.memoizedState;return o===null?(ec(h),N!==null?(lr(h),k_(h,N)):(lr(h),Lp(h,I,null,S,y))):N?N!==o.memoizedState?(ec(h),lr(h),k_(h,N)):(lr(h),h.flags&=-16777217):(o=o.memoizedProps,o!==S&&ec(h),lr(h),Lp(h,I,o,S,y)),null;case 27:if(we(h),y=le.current,I=h.type,o!==null&&h.stateNode!=null)o.memoizedProps!==S&&ec(h);else{if(!S){if(h.stateNode===null)throw Error(i(166));return lr(h),null}o=Yt.current,hi(h)?Tc(h):(o=Oa(I,S,y),h.stateNode=o,ec(h))}return lr(h),null;case 5:if(we(h),I=h.type,o!==null&&h.stateNode!=null)o.memoizedProps!==S&&ec(h);else{if(!S){if(h.stateNode===null)throw Error(i(166));return lr(h),null}if(N=Yt.current,hi(h))Tc(h);else{var at=qe(le.current);switch(N){case 1:N=at.createElementNS("http://www.w3.org/2000/svg",I);break;case 2:N=at.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;default:switch(I){case"svg":N=at.createElementNS("http://www.w3.org/2000/svg",I);break;case"math":N=at.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;case"script":N=at.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof S.is=="string"?at.createElement("select",{is:S.is}):at.createElement("select"),S.multiple?N.multiple=!0:S.size&&(N.size=S.size);break;default:N=typeof S.is=="string"?at.createElement(I,{is:S.is}):at.createElement(I)}}N[He]=h,N[Je]=S;t:for(at=h.child;at!==null;){if(at.tag===5||at.tag===6)N.appendChild(at.stateNode);else if(at.tag!==4&&at.tag!==27&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===h)break t;for(;at.sibling===null;){if(at.return===null||at.return===h)break t;at=at.return}at.sibling.return=at.return,at=at.sibling}h.stateNode=N;t:switch(Fe(N,I,S),I){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break t;case"img":S=!0;break t;default:S=!1}S&&ec(h)}}return lr(h),Lp(h,h.type,o===null?null:o.memoizedProps,h.pendingProps,y),null;case 6:if(o&&h.stateNode!=null)o.memoizedProps!==S&&ec(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(i(166));if(o=le.current,hi(h)){if(o=h.stateNode,y=h.memoizedProps,S=null,I=Ge,I!==null)switch(I.tag){case 27:case 5:S=I.memoizedProps}o[He]=h,o=!!(o.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||ee(o.nodeValue,y)),o||Or(h,!0)}else o=qe(o).createTextNode(S),o[He]=h,h.stateNode=o}return lr(h),null;case 31:if(y=h.memoizedState,o===null||o.memoizedState!==null){if(S=hi(h),y!==null){if(o===null){if(!S)throw Error(i(318));if(o=h.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[He]=h}else bi(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;lr(h),o=!1}else y=fl(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),o=!0;if(!o)return h.flags&256?(Tr(h),h):(Tr(h),null);if((h.flags&128)!==0)throw Error(i(558))}return lr(h),null;case 13:if(S=h.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I=hi(h),S!==null&&S.dehydrated!==null){if(o===null){if(!I)throw Error(i(318));if(I=h.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(i(317));I[He]=h}else bi(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;lr(h),I=!1}else I=fl(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=I),I=!0;if(!I)return h.flags&256?(Tr(h),h):(Tr(h),null)}return Tr(h),(h.flags&128)!==0?(h.lanes=y,h):(y=S!==null,o=o!==null&&o.memoizedState!==null,y&&(S=h.child,I=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(I=S.alternate.memoizedState.cachePool.pool),N=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(N=S.memoizedState.cachePool.pool),N!==I&&(S.flags|=2048)),y!==o&&y&&(h.child.flags|=8192),Ip(h,h.updateQueue),lr(h),null);case 4:return Wt(),o===null&&tt(h.stateNode.containerInfo),lr(h),null;case 10:return vs(h.type),lr(h),null;case 19:if(Tt(wi),S=h.memoizedState,S===null)return lr(h),null;if(I=(h.flags&128)!==0,N=S.rendering,N===null)if(I)cd(S,!1);else{if(Ir!==0||o!==null&&(o.flags&128)!==0)for(o=h.child;o!==null;){if(N=Ns(o),N!==null){for(h.flags|=128,cd(S,!1),o=N.updateQueue,h.updateQueue=o,Ip(h,o),h.subtreeFlags=0,o=y,y=h.child;y!==null;)Ku(y,o),y=y.sibling;return $t(wi,wi.current&1|2),Xn&&yn(h,S.treeForkCount),h.child}o=o.sibling}S.tail!==null&&cn()>Zp&&(h.flags|=128,I=!0,cd(S,!1),h.lanes=4194304)}else{if(!I)if(o=Ns(N),o!==null){if(h.flags|=128,I=!0,o=o.updateQueue,h.updateQueue=o,Ip(h,o),cd(S,!0),S.tail===null&&S.tailMode==="hidden"&&!N.alternate&&!Xn)return lr(h),null}else 2*cn()-S.renderingStartTime>Zp&&y!==536870912&&(h.flags|=128,I=!0,cd(S,!1),h.lanes=4194304);S.isBackwards?(N.sibling=h.child,h.child=N):(o=S.last,o!==null?o.sibling=N:h.child=N,S.last=N)}return S.tail!==null?(o=S.tail,S.rendering=o,S.tail=o.sibling,S.renderingStartTime=cn(),o.sibling=null,y=wi.current,$t(wi,I?y&1|2:y&1),Xn&&yn(h,S.treeForkCount),o):(lr(h),null);case 22:case 23:return Tr(h),Ac(),S=h.memoizedState!==null,o!==null?o.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(y&536870912)!==0&&(h.flags&128)===0&&(lr(h),h.subtreeFlags&6&&(h.flags|=8192)):lr(h),y=h.updateQueue,y!==null&&Ip(h,y.retryQueue),y=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==y&&(h.flags|=2048),o!==null&&Tt(Nt),null;case 24:return y=null,o!==null&&(y=o.memoizedState.cache),h.memoizedState.cache!==y&&(h.flags|=2048),vs(q),lr(h),null;case 25:return null;case 30:return null}throw Error(i(156,h.tag))}function Wx(o,h){switch(tr(h),h.tag){case 1:return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 3:return vs(q),Wt(),o=h.flags,(o&65536)!==0&&(o&128)===0?(h.flags=o&-65537|128,h):null;case 26:case 27:case 5:return we(h),null;case 31:if(h.memoizedState!==null){if(Tr(h),h.alternate===null)throw Error(i(340));bi()}return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 13:if(Tr(h),o=h.memoizedState,o!==null&&o.dehydrated!==null){if(h.alternate===null)throw Error(i(340));bi()}return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 19:return Tt(wi),null;case 4:return Wt(),null;case 10:return vs(h.type),null;case 22:case 23:return Tr(h),Ac(),o!==null&&Tt(Nt),o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 24:return vs(q),null;case 25:return null;default:return null}}function ff(o,h){switch(tr(h),h.tag){case 3:vs(q),Wt();break;case 26:case 27:case 5:we(h);break;case 4:Wt();break;case 31:h.memoizedState!==null&&Tr(h);break;case 13:Tr(h);break;case 19:Tt(wi);break;case 10:vs(h.type);break;case 22:case 23:Tr(h),Ac(),o!==null&&Tt(Nt);break;case 24:vs(q)}}function _r(o,h){try{var y=h.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var I=S.next;y=I;do{if((y.tag&o)===o){S=void 0;var N=y.create,at=y.inst;S=N(),at.destroy=S}y=y.next}while(y!==I)}}catch(vt){Si(h,h.return,vt)}}function nc(o,h,y){try{var S=h.updateQueue,I=S!==null?S.lastEffect:null;if(I!==null){var N=I.next;S=N;do{if((S.tag&o)===o){var at=S.inst,vt=at.destroy;if(vt!==void 0){at.destroy=void 0,I=h;var qt=y,ge=vt;try{ge()}catch(Ce){Si(I,qt,Ce)}}}S=S.next}while(S!==N)}}catch(Ce){Si(h,h.return,Ce)}}function bg(o){var h=o.updateQueue;if(h!==null){var y=o.stateNode;try{mr(h,y)}catch(S){Si(o,o.return,S)}}}function wg(o,h,y){y.props=ch(o.type,o.memoizedProps),y.state=o.memoizedState;try{y.componentWillUnmount()}catch(S){Si(o,h,S)}}function fi(o,h){try{var y=o.ref;if(y!==null){switch(o.tag){case 26:case 27:case 5:var S=o.stateNode;break;case 30:S=o.stateNode;break;default:S=o.stateNode}typeof y=="function"?o.refCleanup=y(S):y.current=S}}catch(I){Si(o,h,I)}}function pl(o,h){var y=o.ref,S=o.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(I){Si(o,h,I)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(I){Si(o,h,I)}else y.current=null}function Sg(o){var h=o.type,y=o.memoizedProps,S=o.stateNode;try{t:switch(h){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break t;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(I){Si(o,o.return,I)}}function Rp(o,h,y){try{var S=o.stateNode;ln(S,o.type,y,h),S[Je]=h}catch(I){Si(o,o.return,I)}}function _u(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&cr(o.type)||o.tag===4}function Dc(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||_u(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&cr(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Bp(o,h,y){var S=o.tag;if(S===5||S===6)o=o.stateNode,h?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(o,h):(h=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,h.appendChild(o),y=y._reactRootContainer,y!=null||h.onclick!==null||(h.onclick=Qa));else if(S!==4&&(S===27&&cr(o.type)&&(y=o.stateNode,h=null),o=o.child,o!==null))for(Bp(o,h,y),o=o.sibling;o!==null;)Bp(o,h,y),o=o.sibling}function Np(o,h,y){var S=o.tag;if(S===5||S===6)o=o.stateNode,h?y.insertBefore(o,h):y.appendChild(o);else if(S!==4&&(S===27&&cr(o.type)&&(y=o.stateNode),o=o.child,o!==null))for(Np(o,h,y),o=o.sibling;o!==null;)Np(o,h,y),o=o.sibling}function O_(o){var h=o.stateNode,y=o.memoizedProps;try{for(var S=o.type,I=h.attributes;I.length;)h.removeAttributeNode(I[0]);Fe(h,S,y),h[He]=o,h[Je]=y}catch(N){Si(o,o.return,N)}}var ic=!1,da=!1,Tg=!1,D_=typeof WeakSet=="function"?WeakSet:Set,Va=null;function Yx(o,h){if(o=o.containerInfo,Ve=rv,o=lu(o),Lo(o)){if("selectionStart"in o)var y={start:o.selectionStart,end:o.selectionEnd};else t:{y=(y=o.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var I=S.anchorOffset,N=S.focusNode;S=S.focusOffset;try{y.nodeType,N.nodeType}catch{y=null;break t}var at=0,vt=-1,qt=-1,ge=0,Ce=0,ze=o,ve=null;e:for(;;){for(var be;ze!==y||I!==0&&ze.nodeType!==3||(vt=at+I),ze!==N||S!==0&&ze.nodeType!==3||(qt=at+S),ze.nodeType===3&&(at+=ze.nodeValue.length),(be=ze.firstChild)!==null;)ve=ze,ze=be;for(;;){if(ze===o)break e;if(ve===y&&++ge===I&&(vt=at),ve===N&&++Ce===S&&(qt=at),(be=ze.nextSibling)!==null)break;ze=ve,ve=ze.parentNode}ze=be}y=vt===-1||qt===-1?null:{start:vt,end:qt}}else y=null}y=y||{start:0,end:0}}else y=null;for(en={focusedElem:o,selectionRange:y},rv=!1,Va=h;Va!==null;)if(h=Va,o=h.child,(h.subtreeFlags&1028)!==0&&o!==null)o.return=h,Va=o;else for(;Va!==null;){switch(h=Va,N=h.alternate,o=h.flags,h.tag){case 0:if((o&4)!==0&&(o=h.updateQueue,o=o!==null?o.events:null,o!==null))for(y=0;y<o.length;y++)I=o[y],I.ref.impl=I.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&N!==null){o=void 0,y=h,I=N.memoizedProps,N=N.memoizedState,S=y.stateNode;try{var gn=ch(y.type,I);o=S.getSnapshotBeforeUpdate(gn,N),S.__reactInternalSnapshotBeforeUpdate=o}catch(On){Si(y,y.return,On)}}break;case 3:if((o&1024)!==0){if(o=h.stateNode.containerInfo,y=o.nodeType,y===9)$a(o);else if(y===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":$a(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=h.sibling,o!==null){o.return=h.return,Va=o;break}Va=h.return}}function z_(o,h,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:Wo(o,y),S&4&&_r(5,y);break;case 1:if(Wo(o,y),S&4)if(o=y.stateNode,h===null)try{o.componentDidMount()}catch(at){Si(y,y.return,at)}else{var I=ch(y.type,h.memoizedProps);h=h.memoizedState;try{o.componentDidUpdate(I,h,o.__reactInternalSnapshotBeforeUpdate)}catch(at){Si(y,y.return,at)}}S&64&&bg(y),S&512&&fi(y,y.return);break;case 3:if(Wo(o,y),S&64&&(o=y.updateQueue,o!==null)){if(h=null,y.child!==null)switch(y.child.tag){case 27:case 5:h=y.child.stateNode;break;case 1:h=y.child.stateNode}try{mr(o,h)}catch(at){Si(y,y.return,at)}}break;case 27:h===null&&S&4&&O_(y);case 26:case 5:Wo(o,y),h===null&&S&4&&Sg(y),S&512&&fi(y,y.return);break;case 12:Wo(o,y);break;case 31:Wo(o,y),S&4&&L_(o,y);break;case 13:Wo(o,y),S&4&&I_(o,y),S&64&&(o=y.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(y=Z_.bind(null,y),Hs(o,y))));break;case 22:if(S=y.memoizedState!==null||ic,!S){h=h!==null&&h.memoizedState!==null||da,I=ic;var N=da;ic=S,(da=h)&&!N?mo(o,y,(y.subtreeFlags&8772)!==0):Wo(o,y),ic=I,da=N}break;case 30:break;default:Wo(o,y)}}function hd(o){var h=o.alternate;h!==null&&(o.alternate=null,hd(h)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(h=o.stateNode,h!==null&&Mi(h)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Zi=null,js=!1;function Ul(o,h,y){for(y=y.child;y!==null;)jp(o,h,y),y=y.sibling}function jp(o,h,y){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(dr,y)}catch{}switch(y.tag){case 26:da||pl(y,h),Ul(o,h,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:da||pl(y,h);var S=Zi,I=js;cr(y.type)&&(Zi=y.stateNode,js=!1),Ul(o,h,y),xr(y.stateNode),Zi=S,js=I;break;case 5:da||pl(y,h);case 6:if(S=Zi,I=js,Zi=null,Ul(o,h,y),Zi=S,js=I,Zi!==null)if(js)try{(Zi.nodeType===9?Zi.body:Zi.nodeName==="HTML"?Zi.ownerDocument.body:Zi).removeChild(y.stateNode)}catch(N){Si(y,h,N)}else try{Zi.removeChild(y.stateNode)}catch(N){Si(y,h,N)}break;case 18:Zi!==null&&(js?(o=Zi,Pa(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,y.stateNode),hm(o)):Pa(Zi,y.stateNode));break;case 4:S=Zi,I=js,Zi=y.stateNode.containerInfo,js=!0,Ul(o,h,y),Zi=S,js=I;break;case 0:case 11:case 14:case 15:nc(2,y,h),da||nc(4,y,h),Ul(o,h,y);break;case 1:da||(pl(y,h),S=y.stateNode,typeof S.componentWillUnmount=="function"&&wg(y,h,S)),Ul(o,h,y);break;case 21:Ul(o,h,y);break;case 22:da=(S=da)||y.memoizedState!==null,Ul(o,h,y),da=S;break;default:Ul(o,h,y)}}function L_(o,h){if(h.memoizedState===null&&(o=h.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{hm(o)}catch(y){Si(h,h.return,y)}}}function I_(o,h){if(h.memoizedState===null&&(o=h.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{hm(o)}catch(y){Si(h,h.return,y)}}function Xx(o){switch(o.tag){case 31:case 13:case 19:var h=o.stateNode;return h===null&&(h=o.stateNode=new D_),h;case 22:return o=o.stateNode,h=o._retryCache,h===null&&(h=o._retryCache=new D_),h;default:throw Error(i(435,o.tag))}}function fd(o,h){var y=Xx(o);h.forEach(function(S){if(!y.has(S)){y.add(S);var I=G_.bind(null,o,S);S.then(I,I)}})}function Fs(o,h){var y=h.deletions;if(y!==null)for(var S=0;S<y.length;S++){var I=y[S],N=o,at=h,vt=at;t:for(;vt!==null;){switch(vt.tag){case 27:if(cr(vt.type)){Zi=vt.stateNode,js=!1;break t}break;case 5:Zi=vt.stateNode,js=!1;break t;case 3:case 4:Zi=vt.stateNode.containerInfo,js=!0;break t}vt=vt.return}if(Zi===null)throw Error(i(160));jp(N,at,I),Zi=null,js=!1,N=I.alternate,N!==null&&(N.return=null),I.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)Fp(h,o),h=h.sibling}var vr=null;function Fp(o,h){var y=o.alternate,S=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Fs(h,o),Us(o),S&4&&(nc(3,o,o.return),_r(3,o),nc(5,o,o.return));break;case 1:Fs(h,o),Us(o),S&512&&(da||y===null||pl(y,y.return)),S&64&&ic&&(o=o.updateQueue,o!==null&&(S=o.callbacks,S!==null&&(y=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var I=vr;if(Fs(h,o),Us(o),S&512&&(da||y===null||pl(y,y.return)),S&4){var N=y!==null?y.memoizedState:null;if(S=o.memoizedState,y===null)if(S===null)if(o.stateNode===null){t:{S=o.type,y=o.memoizedProps,I=I.ownerDocument||I;e:switch(S){case"title":N=I.getElementsByTagName("title")[0],(!N||N[wr]||N[He]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=I.createElement(S),I.head.insertBefore(N,I.querySelector("head > title"))),Fe(N,S,y),N[He]=o,Ji(N),S=N;break t;case"link":var at=tv("link","href",I).get(S+(y.href||""));if(at){for(var vt=0;vt<at.length;vt++)if(N=at[vt],N.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&N.getAttribute("rel")===(y.rel==null?null:y.rel)&&N.getAttribute("title")===(y.title==null?null:y.title)&&N.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){at.splice(vt,1);break e}}N=I.createElement(S),Fe(N,S,y),I.head.appendChild(N);break;case"meta":if(at=tv("meta","content",I).get(S+(y.content||""))){for(vt=0;vt<at.length;vt++)if(N=at[vt],N.getAttribute("content")===(y.content==null?null:""+y.content)&&N.getAttribute("name")===(y.name==null?null:y.name)&&N.getAttribute("property")===(y.property==null?null:y.property)&&N.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&N.getAttribute("charset")===(y.charSet==null?null:y.charSet)){at.splice(vt,1);break e}}N=I.createElement(S),Fe(N,S,y),I.head.appendChild(N);break;default:throw Error(i(468,S))}N[He]=o,Ji(N),S=N}o.stateNode=S}else ev(I,o.type,o.stateNode);else o.stateNode=J_(I,S,o.memoizedProps);else N!==S?(N===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):N.count--,S===null?ev(I,o.type,o.stateNode):J_(I,S,o.memoizedProps)):S===null&&o.stateNode!==null&&Rp(o,o.memoizedProps,y.memoizedProps)}break;case 27:Fs(h,o),Us(o),S&512&&(da||y===null||pl(y,y.return)),y!==null&&S&4&&Rp(o,o.memoizedProps,y.memoizedProps);break;case 5:if(Fs(h,o),Us(o),S&512&&(da||y===null||pl(y,y.return)),o.flags&32){I=o.stateNode;try{ms(I,"")}catch(gn){Si(o,o.return,gn)}}S&4&&o.stateNode!=null&&(I=o.memoizedProps,Rp(o,I,y!==null?y.memoizedProps:I)),S&1024&&(Tg=!0);break;case 6:if(Fs(h,o),Us(o),S&4){if(o.stateNode===null)throw Error(i(162));S=o.memoizedProps,y=o.stateNode;try{y.nodeValue=S}catch(gn){Si(o,o.return,gn)}}break;case 3:if(cm=null,I=vr,vr=xo(h.containerInfo),Fs(h,o),vr=I,Us(o),S&4&&y!==null&&y.memoizedState.isDehydrated)try{hm(h.containerInfo)}catch(gn){Si(o,o.return,gn)}Tg&&(Tg=!1,rc(o));break;case 4:S=vr,vr=xo(o.stateNode.containerInfo),Fs(h,o),Us(o),vr=S;break;case 12:Fs(h,o),Us(o);break;case 31:Fs(h,o),Us(o),S&4&&(S=o.updateQueue,S!==null&&(o.updateQueue=null,fd(o,S)));break;case 13:Fs(h,o),Us(o),o.child.flags&8192&&o.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Hp=cn()),S&4&&(S=o.updateQueue,S!==null&&(o.updateQueue=null,fd(o,S)));break;case 22:I=o.memoizedState!==null;var qt=y!==null&&y.memoizedState!==null,ge=ic,Ce=da;if(ic=ge||I,da=Ce||qt,Fs(h,o),da=Ce,ic=ge,Us(o),S&8192)t:for(h=o.stateNode,h._visibility=I?h._visibility&-2:h._visibility|1,I&&(y===null||qt||ic||da||Vl(o)),y=null,h=o;;){if(h.tag===5||h.tag===26){if(y===null){qt=y=h;try{if(N=qt.stateNode,I)at=N.style,typeof at.setProperty=="function"?at.setProperty("display","none","important"):at.display="none";else{vt=qt.stateNode;var ze=qt.memoizedProps.style,ve=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;vt.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(gn){Si(qt,qt.return,gn)}}}else if(h.tag===6){if(y===null){qt=h;try{qt.stateNode.nodeValue=I?"":qt.memoizedProps}catch(gn){Si(qt,qt.return,gn)}}}else if(h.tag===18){if(y===null){qt=h;try{var be=qt.stateNode;I?as(be,!0):as(qt.stateNode,!1)}catch(gn){Si(qt,qt.return,gn)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===o)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break t;for(;h.sibling===null;){if(h.return===null||h.return===o)break t;y===h&&(y=null),h=h.return}y===h&&(y=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=o.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,fd(o,y))));break;case 19:Fs(h,o),Us(o),S&4&&(S=o.updateQueue,S!==null&&(o.updateQueue=null,fd(o,S)));break;case 30:break;case 21:break;default:Fs(h,o),Us(o)}}function Us(o){var h=o.flags;if(h&2){try{for(var y,S=o.return;S!==null;){if(_u(S)){y=S;break}S=S.return}if(y==null)throw Error(i(160));switch(y.tag){case 27:var I=y.stateNode,N=Dc(o);Np(o,N,I);break;case 5:var at=y.stateNode;y.flags&32&&(ms(at,""),y.flags&=-33);var vt=Dc(o);Np(o,vt,at);break;case 3:case 4:var qt=y.stateNode.containerInfo,ge=Dc(o);Bp(o,ge,qt);break;default:throw Error(i(161))}}catch(Ce){Si(o,o.return,Ce)}o.flags&=-3}h&4096&&(o.flags&=-4097)}function rc(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var h=o;rc(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),o=o.sibling}}function Wo(o,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)z_(o,h.alternate,h),h=h.sibling}function Vl(o){for(o=o.child;o!==null;){var h=o;switch(h.tag){case 0:case 11:case 14:case 15:nc(4,h,h.return),Vl(h);break;case 1:pl(h,h.return);var y=h.stateNode;typeof y.componentWillUnmount=="function"&&wg(h,h.return,y),Vl(h);break;case 27:xr(h.stateNode);case 26:case 5:pl(h,h.return),Vl(h);break;case 22:h.memoizedState===null&&Vl(h);break;case 30:Vl(h);break;default:Vl(h)}o=o.sibling}}function mo(o,h,y){for(y=y&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,I=o,N=h,at=N.flags;switch(N.tag){case 0:case 11:case 15:mo(I,N,y),_r(4,N);break;case 1:if(mo(I,N,y),S=N,I=S.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(ge){Si(S,S.return,ge)}if(S=N,I=S.updateQueue,I!==null){var vt=S.stateNode;try{var qt=I.shared.hiddenCallbacks;if(qt!==null)for(I.shared.hiddenCallbacks=null,I=0;I<qt.length;I++)du(qt[I],vt)}catch(ge){Si(S,S.return,ge)}}y&&at&64&&bg(N),fi(N,N.return);break;case 27:O_(N);case 26:case 5:mo(I,N,y),y&&S===null&&at&4&&Sg(N),fi(N,N.return);break;case 12:mo(I,N,y);break;case 31:mo(I,N,y),y&&at&4&&L_(I,N);break;case 13:mo(I,N,y),y&&at&4&&I_(I,N);break;case 22:N.memoizedState===null&&mo(I,N,y),fi(N,N.return);break;case 30:break;default:mo(I,N,y)}h=h.sibling}}function df(o,h){var y=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),o=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(o=h.memoizedState.cachePool.pool),o!==y&&(o!=null&&o.refCount++,y!=null&&et(y))}function pf(o,h){o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&et(o))}function $l(o,h,y,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Ag(o,h,y,S),h=h.sibling}function Ag(o,h,y,S){var I=h.flags;switch(h.tag){case 0:case 11:case 15:$l(o,h,y,S),I&2048&&_r(9,h);break;case 1:$l(o,h,y,S);break;case 3:$l(o,h,y,S),I&2048&&(o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&et(o)));break;case 12:if(I&2048){$l(o,h,y,S),o=h.stateNode;try{var N=h.memoizedProps,at=N.id,vt=N.onPostCommit;typeof vt=="function"&&vt(at,h.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(qt){Si(h,h.return,qt)}}else $l(o,h,y,S);break;case 31:$l(o,h,y,S);break;case 13:$l(o,h,y,S);break;case 23:break;case 22:N=h.stateNode,at=h.alternate,h.memoizedState!==null?N._visibility&2?$l(o,h,y,S):dd(o,h):N._visibility&2?$l(o,h,y,S):(N._visibility|=2,fh(o,h,y,S,(h.subtreeFlags&10256)!==0||!1)),I&2048&&df(at,h);break;case 24:$l(o,h,y,S),I&2048&&pf(h.alternate,h);break;default:$l(o,h,y,S)}}function fh(o,h,y,S,I){for(I=I&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var N=o,at=h,vt=y,qt=S,ge=at.flags;switch(at.tag){case 0:case 11:case 15:fh(N,at,vt,qt,I),_r(8,at);break;case 23:break;case 22:var Ce=at.stateNode;at.memoizedState!==null?Ce._visibility&2?fh(N,at,vt,qt,I):dd(N,at):(Ce._visibility|=2,fh(N,at,vt,qt,I)),I&&ge&2048&&df(at.alternate,at);break;case 24:fh(N,at,vt,qt,I),I&&ge&2048&&pf(at.alternate,at);break;default:fh(N,at,vt,qt,I)}h=h.sibling}}function dd(o,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var y=o,S=h,I=S.flags;switch(S.tag){case 22:dd(y,S),I&2048&&df(S.alternate,S);break;case 24:dd(y,S),I&2048&&pf(S.alternate,S);break;default:dd(y,S)}h=h.sibling}}var mf=8192;function dh(o,h,y){if(o.subtreeFlags&mf)for(o=o.child;o!==null;)Up(o,h,y),o=o.sibling}function Up(o,h,y){switch(o.tag){case 26:dh(o,h,y),o.flags&mf&&o.memoizedState!==null&&vh(y,vr,o.memoizedState,o.memoizedProps);break;case 5:dh(o,h,y);break;case 3:case 4:var S=vr;vr=xo(o.stateNode.containerInfo),dh(o,h,y),vr=S;break;case 22:o.memoizedState===null&&(S=o.alternate,S!==null&&S.memoizedState!==null?(S=mf,mf=16777216,dh(o,h,y),mf=S):dh(o,h,y));break;default:dh(o,h,y)}}function Vp(o){var h=o.alternate;if(h!==null&&(o=h.child,o!==null)){h.child=null;do h=o.sibling,o.sibling=null,o=h;while(o!==null)}}function pd(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var S=h[y];Va=S,gf(S,o)}Vp(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)R_(o),o=o.sibling}function R_(o){switch(o.tag){case 0:case 11:case 15:pd(o),o.flags&2048&&nc(9,o,o.return);break;case 3:pd(o);break;case 12:pd(o);break;case 22:var h=o.stateNode;o.memoizedState!==null&&h._visibility&2&&(o.return===null||o.return.tag!==13)?(h._visibility&=-3,md(o)):pd(o);break;default:pd(o)}}function md(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var S=h[y];Va=S,gf(S,o)}Vp(o)}for(o=o.child;o!==null;){switch(h=o,h.tag){case 0:case 11:case 15:nc(8,h,h.return),md(h);break;case 22:y=h.stateNode,y._visibility&2&&(y._visibility&=-3,md(h));break;default:md(h)}o=o.sibling}}function gf(o,h){for(;Va!==null;){var y=Va;switch(y.tag){case 0:case 11:case 15:nc(8,y,h);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:et(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,Va=S;else t:for(y=o;Va!==null;){S=Va;var I=S.sibling,N=S.return;if(hd(S),S===y){Va=null;break t}if(I!==null){I.return=N,Va=I;break t}Va=N}}}var vu={getCacheForType:function(o){var h=m(q),y=h.data.get(o);return y===void 0&&(y=o(),h.data.set(o,y)),y},cacheSignal:function(){return m(q).controller.signal}},zc=typeof WeakMap=="function"?WeakMap:Map,ki=0,Gi=null,ai=null,li=0,Oi=0,Vs=null,Lc=!1,Ic=!1,gd=!1,go=0,Ir=0,ac=0,sc=0,$p=0,ws=0,ph=0,yd=null,yo=null,qp=!1,Hp=0,B_=0,Zp=1/0,Gp=null,xu=null,ur=0,oc=null,mh=null,bu=0,Wp=0,Yp=null,Mg=null,gh=0,yf=null;function _o(){return(ki&2)!==0&&li!==0?li&-li:kt.T!==null?Cd():Ee()}function Xp(){if(ws===0)if((li&536870912)===0||Xn){var o=La;La<<=1,(La&3932160)===0&&(La=262144),ws=o}else ws=536870912;return o=xs.current,o!==null&&(o.flags|=32),ws}function $s(o,h,y){(o===Gi&&(Oi===2||Oi===9)||o.cancelPendingCommit!==null)&&(yh(o,0),lc(o,li,ws,!1)),It(o,y),((ki&2)===0||o!==Gi)&&(o===Gi&&((ki&2)===0&&(sc|=y),Ir===4&&lc(o,li,ws,!1)),ml(o))}function vo(o,h,y){if((ki&6)!==0)throw Error(i(327));var S=!y&&(h&127)===0&&(h&o.expiredLanes)===0||lt(o,h),I=S?U_(o,h):Qp(o,h,!0),N=S;do{if(I===0){Ic&&!S&&lc(o,h,0,!1);break}else{if(y=o.current.alternate,N&&!N_(y)){I=Qp(o,h,!1),N=!1;continue}if(I===2){if(N=h,o.errorRecoveryDisabledLanes&N)var at=0;else at=o.pendingLanes&-536870913,at=at!==0?at:at&536870912?536870912:0;if(at!==0){h=at;t:{var vt=o;I=yd;var qt=vt.current.memoizedState.isDehydrated;if(qt&&(yh(vt,at).flags|=256),at=Qp(vt,at,!1),at!==2){if(gd&&!qt){vt.errorRecoveryDisabledLanes|=N,sc|=N,I=4;break t}N=yo,yo=I,N!==null&&(yo===null?yo=N:yo.push.apply(yo,N))}I=at}if(N=!1,I!==2)continue}}if(I===1){yh(o,0),lc(o,h,0,!0);break}t:{switch(S=o,N=I,N){case 0:case 1:throw Error(i(345));case 4:if((h&4194048)!==h)break;case 6:lc(S,h,ws,!Lc);break t;case 2:yo=null;break;case 3:case 5:break;default:throw Error(i(329))}if((h&62914560)===h&&(I=Hp+300-cn(),10<I)){if(lc(S,h,ws,!Lc),Dt(S,0,!0)!==0)break t;bu=h,S.timeoutHandle=Qi(_f.bind(null,S,y,yo,Gp,qp,h,ws,sc,ph,Lc,N,"Throttled",-0,0),I);break t}_f(S,y,yo,Gp,qp,h,ws,sc,ph,Lc,N,null,-0,0)}}break}while(!0);ml(o)}function _f(o,h,y,S,I,N,at,vt,qt,ge,Ce,ze,ve,be){if(o.timeoutHandle=-1,ze=h.subtreeFlags,ze&8192||(ze&16785408)===16785408){ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qa},Up(h,N,ze);var gn=(N&62914560)===N?Hp-cn():(N&4194048)===N?B_-cn():0;if(gn=xh(ze,gn),gn!==null){bu=N,o.cancelPendingCommit=gn(kg.bind(null,o,h,N,y,S,I,at,vt,qt,Ce,ze,null,ve,be)),lc(o,N,at,!ge);return}}kg(o,h,N,y,S,I,at,vt,qt)}function N_(o){for(var h=o;;){var y=h.tag;if((y===0||y===11||y===15)&&h.flags&16384&&(y=h.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var I=y[S],N=I.getSnapshot;I=I.value;try{if(!kr(N(),I))return!1}catch{return!1}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function lc(o,h,y,S){h&=~$p,h&=~sc,o.suspendedLanes|=h,o.pingedLanes&=~h,S&&(o.warmLanes|=h),S=o.expirationTimes;for(var I=h;0<I;){var N=31-pr(I),at=1<<N;S[N]=-1,I&=~at}y!==0&&Zt(o,y,h)}function _d(){return(ki&6)===0?(vf(0),!1):!0}function Kp(){if(ai!==null){if(Oi===0)var o=ai.return;else o=ai,Rs=ja=null,pp(o),Ln=null,Pn=0,o=ai;for(;o!==null;)ff(o.alternate,o),o=o.return;ai=null}}function yh(o,h){var y=o.timeoutHandle;y!==-1&&(o.timeoutHandle=-1,na(y)),y=o.cancelPendingCommit,y!==null&&(o.cancelPendingCommit=null,y()),bu=0,Kp(),Gi=o,ai=y=uo(o.current,null),li=h,Oi=0,Vs=null,Lc=!1,Ic=lt(o,h),gd=!1,ph=ws=$p=sc=ac=Ir=0,yo=yd=null,qp=!1,(h&8)!==0&&(h|=h&32);var S=o.entangledLanes;if(S!==0)for(o=o.entanglements,S&=h;0<S;){var I=31-pr(S),N=1<<I;h|=o[I],S&=~N}return go=h,lo(),y}function Eg(o,h){En=null,kt.H=rd,h===Se||h===ke?(h=on(),Oi=3):h===Le?(h=on(),Oi=4):Oi=h===dg?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Vs=h,ai===null&&(Ir=1,Mp(o,w(h,o.current)))}function j_(){var o=xs.current;return o===null?!0:(li&4194048)===li?Bs===null:(li&62914560)===li||(li&536870912)!==0?o===Bs:!1}function Cg(){var o=kt.H;return kt.H=rd,o===null?rd:o}function uc(){var o=kt.A;return kt.A=vu,o}function vd(){Ir=4,Lc||(li&4194048)!==li&&xs.current!==null||(Ic=!0),(ac&134217727)===0&&(sc&134217727)===0||Gi===null||lc(Gi,li,ws,!1)}function Qp(o,h,y){var S=ki;ki|=2;var I=Cg(),N=uc();(Gi!==o||li!==h)&&(Gp=null,yh(o,h)),h=!1;var at=Ir;t:do try{if(Oi!==0&&ai!==null){var vt=ai,qt=Vs;switch(Oi){case 8:Kp(),at=6;break t;case 3:case 2:case 9:case 6:xs.current===null&&(h=!0);var ge=Oi;if(Oi=0,Vs=null,ql(o,vt,qt,ge),y&&Ic){at=0;break t}break;default:ge=Oi,Oi=0,Vs=null,ql(o,vt,qt,ge)}}F_(),at=Ir;break}catch(Ce){Eg(o,Ce)}while(!0);return h&&o.shellSuspendCounter++,Rs=ja=null,ki=S,kt.H=I,kt.A=N,ai===null&&(Gi=null,li=0,lo()),at}function F_(){for(;ai!==null;)V_(ai)}function U_(o,h){var y=ki;ki|=2;var S=Cg(),I=uc();Gi!==o||li!==h?(Gp=null,Zp=cn()+500,yh(o,h)):Ic=lt(o,h);t:do try{if(Oi!==0&&ai!==null){h=ai;var N=Vs;e:switch(Oi){case 1:Oi=0,Vs=null,ql(o,h,N,1);break;case 2:case 9:if(sn(N)){Oi=0,Vs=null,Pg(h);break}h=function(){Oi!==2&&Oi!==9||Gi!==o||(Oi=7),ml(o)},N.then(h,h);break t;case 3:Oi=7;break t;case 4:Oi=5;break t;case 7:sn(N)?(Oi=0,Vs=null,Pg(h)):(Oi=0,Vs=null,ql(o,h,N,7));break;case 5:var at=null;switch(ai.tag){case 26:at=ai.memoizedState;case 5:case 27:var vt=ai;if(at?wo(at):vt.stateNode.complete){Oi=0,Vs=null;var qt=vt.sibling;if(qt!==null)ai=qt;else{var ge=vt.return;ge!==null?(ai=ge,xd(ge)):ai=null}break e}}Oi=0,Vs=null,ql(o,h,N,5);break;case 6:Oi=0,Vs=null,ql(o,h,N,6);break;case 8:Kp(),Ir=6;break t;default:throw Error(i(462))}}Kx();break}catch(Ce){Eg(o,Ce)}while(!0);return Rs=ja=null,kt.H=S,kt.A=I,ki=y,ai!==null?0:(Gi=null,li=0,lo(),Ir)}function Kx(){for(;ai!==null&&!Ri();)V_(ai)}function V_(o){var h=ud(o.alternate,o,go);o.memoizedProps=o.pendingProps,h===null?xd(o):ai=h}function Pg(o){var h=o,y=h.alternate;switch(h.tag){case 15:case 0:h=E_(y,h,h.pendingProps,h.type,void 0,li);break;case 11:h=E_(y,h,h.pendingProps,h.type.render,h.ref,li);break;case 5:pp(h);default:ff(y,h),h=ai=Ku(h,go),h=ud(y,h,go)}o.memoizedProps=o.pendingProps,h===null?xd(o):ai=h}function ql(o,h,y,S){Rs=ja=null,pp(h),Ln=null,Pn=0;var I=h.return;try{if(qx(o,I,h,y,li)){Ir=1,Mp(o,w(y,o.current)),ai=null;return}}catch(N){if(I!==null)throw ai=I,N;Ir=1,Mp(o,w(y,o.current)),ai=null;return}h.flags&32768?(Xn||S===1?o=!0:Ic||(li&536870912)!==0?o=!1:(Lc=o=!0,(S===2||S===9||S===3||S===6)&&(S=xs.current,S!==null&&S.tag===13&&(S.flags|=16384))),bd(h,o)):xd(h)}function xd(o){var h=o;do{if((h.flags&32768)!==0){bd(h,Lc);return}o=h.return;var y=Gx(h.alternate,h,go);if(y!==null){ai=y;return}if(h=h.sibling,h!==null){ai=h;return}ai=h=o}while(h!==null);Ir===0&&(Ir=5)}function bd(o,h){do{var y=Wx(o.alternate,o);if(y!==null){y.flags&=32767,ai=y;return}if(y=o.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!h&&(o=o.sibling,o!==null)){ai=o;return}ai=o=y}while(o!==null);Ir=6,ai=null}function kg(o,h,y,S,I,N,at,vt,qt){o.cancelPendingCommit=null;do Jp();while(ur!==0);if((ki&6)!==0)throw Error(i(327));if(h!==null){if(h===o.current)throw Error(i(177));if(N=h.lanes|h.childLanes,N|=Is,te(o,y,N,at,vt,qt),o===Gi&&(ai=Gi=null,li=0),mh=h,oc=o,bu=y,Wp=N,Yp=I,Mg=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Og(Ur,function(){return q_(),null})):(o.callbackNode=null,o.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=kt.T,kt.T=null,I=Ot.p,Ot.p=2,at=ki,ki|=4;try{Yx(o,h,y)}finally{ki=at,Ot.p=I,kt.T=S}}ur=1,wd(),Sd(),Td()}}function wd(){if(ur===1){ur=0;var o=oc,h=mh,y=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||y){y=kt.T,kt.T=null;var S=Ot.p;Ot.p=2;var I=ki;ki|=4;try{Fp(h,o);var N=en,at=lu(o.containerInfo),vt=N.focusedElem,qt=N.selectionRange;if(at!==vt&&vt&&vt.ownerDocument&&Zu(vt.ownerDocument.documentElement,vt)){if(qt!==null&&Lo(vt)){var ge=qt.start,Ce=qt.end;if(Ce===void 0&&(Ce=ge),"selectionStart"in vt)vt.selectionStart=ge,vt.selectionEnd=Math.min(Ce,vt.value.length);else{var ze=vt.ownerDocument||document,ve=ze&&ze.defaultView||window;if(ve.getSelection){var be=ve.getSelection(),gn=vt.textContent.length,On=Math.min(qt.start,gn),fr=qt.end===void 0?On:Math.min(qt.end,gn);!be.extend&&On>fr&&(at=fr,fr=On,On=at);var oe=ao(vt,On),Qt=ao(vt,fr);if(oe&&Qt&&(be.rangeCount!==1||be.anchorNode!==oe.node||be.anchorOffset!==oe.offset||be.focusNode!==Qt.node||be.focusOffset!==Qt.offset)){var de=ze.createRange();de.setStart(oe.node,oe.offset),be.removeAllRanges(),On>fr?(be.addRange(de),be.extend(Qt.node,Qt.offset)):(de.setEnd(Qt.node,Qt.offset),be.addRange(de))}}}}for(ze=[],be=vt;be=be.parentNode;)be.nodeType===1&&ze.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof vt.focus=="function"&&vt.focus(),vt=0;vt<ze.length;vt++){var De=ze[vt];De.element.scrollLeft=De.left,De.element.scrollTop=De.top}}rv=!!Ve,en=Ve=null}finally{ki=I,Ot.p=S,kt.T=y}}o.current=h,ur=2}}function Sd(){if(ur===2){ur=0;var o=oc,h=mh,y=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||y){y=kt.T,kt.T=null;var S=Ot.p;Ot.p=2;var I=ki;ki|=4;try{z_(o,h.alternate,h)}finally{ki=I,Ot.p=S,kt.T=y}}ur=3}}function Td(){if(ur===4||ur===3){ur=0,Yn();var o=oc,h=mh,y=bu,S=Mg;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?ur=5:(ur=0,mh=oc=null,$_(o,o.pendingLanes));var I=o.pendingLanes;if(I===0&&(xu=null),ie(y),h=h.stateNode,Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(dr,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=kt.T,I=Ot.p,Ot.p=2,kt.T=null;try{for(var N=o.onRecoverableError,at=0;at<S.length;at++){var vt=S[at];N(vt.value,{componentStack:vt.stack})}}finally{kt.T=h,Ot.p=I}}(bu&3)!==0&&Jp(),ml(o),I=o.pendingLanes,(y&261930)!==0&&(I&42)!==0?o===yf?gh++:(gh=0,yf=o):gh=0,vf(0)}}function $_(o,h){(o.pooledCacheLanes&=h)===0&&(h=o.pooledCache,h!=null&&(o.pooledCache=null,et(h)))}function Jp(){return wd(),Sd(),Td(),q_()}function q_(){if(ur!==5)return!1;var o=oc,h=Wp;Wp=0;var y=ie(bu),S=kt.T,I=Ot.p;try{Ot.p=32>y?32:y,kt.T=null,y=Yp,Yp=null;var N=oc,at=bu;if(ur=0,mh=oc=null,bu=0,(ki&6)!==0)throw Error(i(331));var vt=ki;if(ki|=4,R_(N.current),Ag(N,N.current,at,y),ki=vt,vf(0,!1),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(dr,N)}catch{}return!0}finally{Ot.p=I,kt.T=S,$_(o,h)}}function H_(o,h,y){h=w(y,h),h=hg(o.stateNode,h,2),o=rs(o,h,2),o!==null&&(It(o,2),ml(o))}function Si(o,h,y){if(o.tag===3)H_(o,o,y);else for(;h!==null;){if(h.tag===3){H_(h,o,y);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(xu===null||!xu.has(S))){o=w(y,o),y=fg(2),S=rs(h,y,2),S!==null&&(hh(y,S,h,o),It(S,2),ml(S));break}}h=h.return}}function pa(o,h,y){var S=o.pingCache;if(S===null){S=o.pingCache=new zc;var I=new Set;S.set(h,I)}else I=S.get(h),I===void 0&&(I=new Set,S.set(h,I));I.has(y)||(gd=!0,I.add(y),o=Rc.bind(null,o,h,y),h.then(o,o))}function Rc(o,h,y){var S=o.pingCache;S!==null&&S.delete(h),o.pingedLanes|=o.suspendedLanes&y,o.warmLanes&=~y,Gi===o&&(li&y)===y&&(Ir===4||Ir===3&&(li&62914560)===li&&300>cn()-Hp?(ki&2)===0&&yh(o,0):$p|=y,ph===li&&(ph=0)),ml(o)}function tm(o,h){h===0&&(h=wt()),o=_s(o,h),o!==null&&(It(o,h),ml(o))}function Z_(o){var h=o.memoizedState,y=0;h!==null&&(y=h.retryLane),tm(o,y)}function G_(o,h){var y=0;switch(o.tag){case 31:case 13:var S=o.stateNode,I=o.memoizedState;I!==null&&(y=I.retryLane);break;case 19:S=o.stateNode;break;case 22:S=o.stateNode._retryCache;break;default:throw Error(i(314))}S!==null&&S.delete(h),tm(o,y)}function Og(o,h){return _e(o,h)}var em=null,_h=null,nm=!1,im=!1,rm=!1,wu=0;function ml(o){o!==_h&&o.next===null&&(_h===null?em=_h=o:_h=_h.next=o),im=!0,nm||(nm=!0,Ed())}function vf(o,h){if(!rm&&im){rm=!0;do for(var y=!1,S=em;S!==null;){if(o!==0){var I=S.pendingLanes;if(I===0)var N=0;else{var at=S.suspendedLanes,vt=S.pingedLanes;N=(1<<31-pr(42|o)+1)-1,N&=I&~(at&~vt),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(y=!0,Md(S,N))}else N=li,N=Dt(S,S===Gi?N:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(N&3)===0||lt(S,N)||(y=!0,Md(S,N));S=S.next}while(y);rm=!1}}function Ad(){am()}function am(){im=nm=!1;var o=0;wu!==0&&Ki()&&(o=wu);for(var h=cn(),y=null,S=em;S!==null;){var I=S.next,N=Dg(S,h);N===0?(S.next=null,y===null?em=I:y.next=I,I===null&&(_h=y)):(y=S,(o!==0||(N&3)!==0)&&(im=!0)),S=I}ur!==0&&ur!==5||vf(o),wu!==0&&(wu=0)}function Dg(o,h){for(var y=o.suspendedLanes,S=o.pingedLanes,I=o.expirationTimes,N=o.pendingLanes&-62914561;0<N;){var at=31-pr(N),vt=1<<at,qt=I[at];qt===-1?((vt&y)===0||(vt&S)!==0)&&(I[at]=ft(vt,h)):qt<=h&&(o.expiredLanes|=vt),N&=~vt}if(h=Gi,y=li,y=Dt(o,o===h?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),S=o.callbackNode,y===0||o===h&&(Oi===2||Oi===9)||o.cancelPendingCommit!==null)return S!==null&&S!==null&&Di(S),o.callbackNode=null,o.callbackPriority=0;if((y&3)===0||lt(o,y)){if(h=y&-y,h===o.callbackPriority)return h;switch(S!==null&&Di(S),ie(y)){case 2:case 8:y=Bi;break;case 32:y=Ur;break;case 268435456:y=Xa;break;default:y=Ur}return S=sm.bind(null,o),y=_e(y,S),o.callbackPriority=h,o.callbackNode=y,h}return S!==null&&S!==null&&Di(S),o.callbackPriority=2,o.callbackNode=null,2}function sm(o,h){if(ur!==0&&ur!==5)return o.callbackNode=null,o.callbackPriority=0,null;var y=o.callbackNode;if(Jp()&&o.callbackNode!==y)return null;var S=li;return S=Dt(o,o===Gi?S:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),S===0?null:(vo(o,S,h),Dg(o,cn()),o.callbackNode!=null&&o.callbackNode===y?sm.bind(null,o):null)}function Md(o,h){if(Jp())return null;vo(o,h,!0)}function Ed(){Ss(function(){(ki&6)!==0?_e(si,Ad):am()})}function Cd(){if(wu===0){var o=Et;o===0&&(o=Er,Er<<=1,(Er&261888)===0&&(Er=256)),wu=o}return wu}function om(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:iu(""+o)}function lm(o,h){var y=h.ownerDocument.createElement("input");return y.name=h.name,y.value=h.value,o.id&&y.setAttribute("form",o.id),h.parentNode.insertBefore(y,h),o=new FormData(o),y.parentNode.removeChild(y),o}function Qx(o,h,y,S,I){if(h==="submit"&&y&&y.stateNode===I){var N=om((I[Je]||null).action),at=S.submitter;at&&(h=(h=at[Je]||null)?om(h.formAction):at.getAttribute("formAction"),h!==null&&(N=h,at=null));var vt=new kl("action","action",null,S,I);o.push({event:vt,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(wu!==0){var qt=at?lm(I,at):new FormData(I);of(y,{pending:!0,data:qt,method:I.method,action:N},null,qt)}}else typeof N=="function"&&(vt.preventDefault(),qt=at?lm(I,at):new FormData(I),of(y,{pending:!0,data:qt,method:I.method,action:N},N,qt))},currentTarget:I}]})}}for(var c=0;c<Ls.length;c++){var s=Ls[c],d=s.toLowerCase(),v=s[0].toUpperCase()+s.slice(1);Kr(d,"on"+v)}Kr(oa,"onAnimationEnd"),Kr(so,"onAnimationIteration"),Kr(ul,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(jo,"onTransitionRun"),Kr(oo,"onTransitionStart"),Kr(Kf,"onTransitionCancel"),Kr(cl,"onTransitionEnd"),Ks("onMouseEnter",["mouseout","mouseover"]),Ks("onMouseLeave",["mouseout","mouseover"]),Ks("onPointerEnter",["pointerout","pointerover"]),Ks("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var T="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(T));function k(o,h){h=(h&4)!==0;for(var y=0;y<o.length;y++){var S=o[y],I=S.event;S=S.listeners;t:{var N=void 0;if(h)for(var at=S.length-1;0<=at;at--){var vt=S[at],qt=vt.instance,ge=vt.currentTarget;if(vt=vt.listener,qt!==N&&I.isPropagationStopped())break t;N=vt,I.currentTarget=ge;try{N(I)}catch(Ce){is(Ce)}I.currentTarget=null,N=qt}else for(at=0;at<S.length;at++){if(vt=S[at],qt=vt.instance,ge=vt.currentTarget,vt=vt.listener,qt!==N&&I.isPropagationStopped())break t;N=vt,I.currentTarget=ge;try{N(I)}catch(Ce){is(Ce)}I.currentTarget=null,N=qt}}}}function R(o,h){var y=h[Vn];y===void 0&&(y=h[Vn]=new Set);var S=o+"__bubble";y.has(S)||(st(h,o,2,!1),y.add(S))}function U(o,h,y){var S=0;h&&(S|=4),st(y,o,S,h)}var G="_reactListening"+Math.random().toString(36).slice(2);function tt(o){if(!o[G]){o[G]=!0,Al.forEach(function(y){y!=="selectionchange"&&(P.has(y)||U(y,!1,o),U(y,!0,o))});var h=o.nodeType===9?o:o.ownerDocument;h===null||h[G]||(h[G]=!0,U("selectionchange",!1,h))}}function st(o,h,y,S){switch(wT(h)){case 2:var I=a3;break;case 8:I=s3;break;default:I=eb}y=I.bind(null,h,y,o),I=void 0,!rl||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(I=!0),S?I!==void 0?o.addEventListener(h,y,{capture:!0,passive:I}):o.addEventListener(h,y,!0):I!==void 0?o.addEventListener(h,y,{passive:I}):o.addEventListener(h,y,!1)}function ct(o,h,y,S,I){var N=S;if((h&1)===0&&(h&2)===0&&S!==null)t:for(;;){if(S===null)return;var at=S.tag;if(at===3||at===4){var vt=S.stateNode.containerInfo;if(vt===I)break;if(at===4)for(at=S.return;at!==null;){var qt=at.tag;if((qt===3||qt===4)&&at.stateNode.containerInfo===I)return;at=at.return}for(;vt!==null;){if(at=Ni(vt),at===null)return;if(qt=at.tag,qt===5||qt===6||qt===26||qt===27){S=N=at;continue t}vt=vt.parentNode}}S=S.return}Oo(function(){var ge=N,Ce=il(y),ze=[];t:{var ve=nh.get(o);if(ve!==void 0){var be=kl,gn=o;switch(o){case"keypress":if(Bn(y)===0)break t;case"keydown":case"keyup":be=wc;break;case"focusin":gn="focus",be=Yc;break;case"focusout":gn="blur",be=Yc;break;case"beforeblur":case"afterblur":be=Yc;break;case"click":if(y.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=Ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=Jh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=ru;break;case oa:case so:case ul:be=Xc;break;case cl:be=Sc;break;case"scroll":case"scrollend":be=Jn;break;case"wheel":be=vi;break;case"copy":case"cut":case"paste":be=eo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=Qc;break;case"toggle":case"beforetoggle":be=Nn}var On=(h&4)!==0,fr=!On&&(o==="scroll"||o==="scrollend"),oe=On?ve!==null?ve+"Capture":null:ve;On=[];for(var Qt=ge,de;Qt!==null;){var De=Qt;if(de=De.stateNode,De=De.tag,De!==5&&De!==26&&De!==27||de===null||oe===null||(De=Js(Qt,oe),De!=null&&On.push(gt(Qt,De,de))),fr)break;Qt=Qt.return}0<On.length&&(ve=new be(ve,gn,null,y,Ce),ze.push({event:ve,listeners:On}))}}if((h&7)===0){t:{if(ve=o==="mouseover"||o==="pointerover",be=o==="mouseout"||o==="pointerout",ve&&y!==Lu&&(gn=y.relatedTarget||y.fromElement)&&(Ni(gn)||gn[_n]))break t;if((be||ve)&&(ve=Ce.window===Ce?Ce:(ve=Ce.ownerDocument)?ve.defaultView||ve.parentWindow:window,be?(gn=y.relatedTarget||y.toElement,be=ge,gn=gn?Ni(gn):null,gn!==null&&(fr=l(gn),On=gn.tag,gn!==fr||On!==5&&On!==27&&On!==6)&&(gn=null)):(be=null,gn=ge),be!==gn)){if(On=Ru,De="onMouseLeave",oe="onMouseEnter",Qt="mouse",(o==="pointerout"||o==="pointerover")&&(On=Qc,De="onPointerLeave",oe="onPointerEnter",Qt="pointer"),fr=be==null?ve:Cr(be),de=gn==null?ve:Cr(gn),ve=new On(De,Qt+"leave",be,y,Ce),ve.target=fr,ve.relatedTarget=de,De=null,Ni(Ce)===ge&&(On=new On(oe,Qt+"enter",gn,y,Ce),On.target=de,On.relatedTarget=fr,De=On),fr=De,be&&gn)e:{for(On=Ct,oe=be,Qt=gn,de=0,De=oe;De;De=On(De))de++;De=0;for(var Sn=Qt;Sn;Sn=On(Sn))De++;for(;0<de-De;)oe=On(oe),de--;for(;0<De-de;)Qt=On(Qt),De--;for(;de--;){if(oe===Qt||Qt!==null&&oe===Qt.alternate){On=oe;break e}oe=On(oe),Qt=On(Qt)}On=null}else On=null;be!==null&&Bt(ze,ve,be,On,!1),gn!==null&&fr!==null&&Bt(ze,fr,gn,On,!0)}}t:{if(ve=ge?Cr(ge):window,be=ve.nodeName&&ve.nodeName.toLowerCase(),be==="select"||be==="input"&&ve.type==="file")var Fi=Ll;else if(Na(ve))if(th)Fi=ou;else{Fi=Rl;var vn=ui}else be=ve.nodeName,!be||be.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?ge&&Cl(ge.elementType)&&(Fi=Ll):Fi=Pr;if(Fi&&(Fi=Fi(o,ge))){tf(ze,Fi,y,Ce);break t}vn&&vn(o,ve,ge),o==="focusout"&&ge&&ve.type==="number"&&ge.memoizedProps.value!=null&&Cs(ve,"number",ve.value)}switch(vn=ge?Cr(ge):window,o){case"focusin":(Na(vn)||vn.contentEditable==="true")&&(Io=vn,ns=ge,Ro=null);break;case"focusout":Ro=ns=Io=null;break;case"mousedown":qr=!0;break;case"contextmenu":case"mouseup":case"dragend":qr=!1,uu(ze,y,Ce);break;case"selectionchange":if(Gu)break;case"keydown":case"keyup":uu(ze,y,Ce)}var ii;if(Li)t:{switch(o){case"compositionstart":var Ti="onCompositionStart";break t;case"compositionend":Ti="onCompositionEnd";break t;case"compositionupdate":Ti="onCompositionUpdate";break t}Ti=void 0}else zo?Uu(o,y)&&(Ti="onCompositionEnd"):o==="keydown"&&y.keyCode===229&&(Ti="onCompositionStart");Ti&&(ju&&y.locale!=="ko"&&(zo||Ti!=="onCompositionStart"?Ti==="onCompositionEnd"&&zo&&(ii=Aa()):(Ra=Ce,to="value"in Ra?Ra.value:Ra.textContent,zo=!0)),vn=yt(ge,Ti),0<vn.length&&(Ti=new Bu(Ti,o,null,y,Ce),ze.push({event:Ti,listeners:vn}),ii?Ti.data=ii:(ii=Vu(y),ii!==null&&(Ti.data=ii)))),(ii=Nu?ts(o,y):io(o,y))&&(Ti=yt(ge,"onBeforeInput"),0<Ti.length&&(vn=new Bu("onBeforeInput","beforeinput",null,y,Ce),ze.push({event:vn,listeners:Ti}),vn.data=ii)),Qx(ze,o,ge,y,Ce)}k(ze,h)})}function gt(o,h,y){return{instance:o,listener:h,currentTarget:y}}function yt(o,h){for(var y=h+"Capture",S=[];o!==null;){var I=o,N=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||N===null||(I=Js(o,y),I!=null&&S.unshift(gt(o,I,N)),I=Js(o,h),I!=null&&S.push(gt(o,I,N))),o.tag===3)return S;o=o.return}return[]}function Ct(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Bt(o,h,y,S,I){for(var N=h._reactName,at=[];y!==null&&y!==S;){var vt=y,qt=vt.alternate,ge=vt.stateNode;if(vt=vt.tag,qt!==null&&qt===S)break;vt!==5&&vt!==26&&vt!==27||ge===null||(qt=ge,I?(ge=Js(y,N),ge!=null&&at.unshift(gt(y,ge,qt))):I||(ge=Js(y,N),ge!=null&&at.push(gt(y,ge,qt)))),y=y.return}at.length!==0&&o.push({event:h,listeners:at})}var Ut=/\r\n?/g,Jt=/\u0000|\uFFFD/g;function Ht(o){return(typeof o=="string"?o:""+o).replace(Ut,`
`).replace(Jt,"")}function ee(o,h){return h=Ht(h),Ht(o)===h}function ne(o,h,y,S,I,N){switch(y){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||ms(o,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&ms(o,""+S);break;case"className":Rn(o,"class",S);break;case"tabIndex":Rn(o,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(o,y,S);break;case"style":gc(o,S,N);break;case"data":if(h!=="object"){Rn(o,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||y!=="href")){o.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){o.removeAttribute(y);break}S=iu(""+S),o.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){o.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(y==="formAction"?(h!=="input"&&ne(o,h,"name",I.name,I,null),ne(o,h,"formEncType",I.formEncType,I,null),ne(o,h,"formMethod",I.formMethod,I,null),ne(o,h,"formTarget",I.formTarget,I,null)):(ne(o,h,"encType",I.encType,I,null),ne(o,h,"method",I.method,I,null),ne(o,h,"target",I.target,I,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){o.removeAttribute(y);break}S=iu(""+S),o.setAttribute(y,S);break;case"onClick":S!=null&&(o.onclick=Qa);break;case"onScroll":S!=null&&R("scroll",o);break;case"onScrollEnd":S!=null&&R("scrollend",o);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(i(61));if(y=S.__html,y!=null){if(I.children!=null)throw Error(i(60));o.innerHTML=y}}break;case"multiple":o.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":o.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){o.removeAttribute("xlink:href");break}y=iu(""+S),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?o.setAttribute(y,""+S):o.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?o.setAttribute(y,""):o.removeAttribute(y);break;case"capture":case"download":S===!0?o.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?o.setAttribute(y,S):o.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?o.setAttribute(y,S):o.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?o.removeAttribute(y):o.setAttribute(y,S);break;case"popover":R("beforetoggle",o),R("toggle",o),kn(o,"popover",S);break;case"xlinkActuate":Sa(o,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Sa(o,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Sa(o,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Sa(o,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Sa(o,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Sa(o,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Sa(o,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Sa(o,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Sa(o,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":kn(o,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=nu.get(y)||y,kn(o,y,S))}}function Me(o,h,y,S,I,N){switch(y){case"style":gc(o,S,N);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(i(61));if(y=S.__html,y!=null){if(I.children!=null)throw Error(i(60));o.innerHTML=y}}break;case"children":typeof S=="string"?ms(o,S):(typeof S=="number"||typeof S=="bigint")&&ms(o,""+S);break;case"onScroll":S!=null&&R("scroll",o);break;case"onScrollEnd":S!=null&&R("scrollend",o);break;case"onClick":S!=null&&(o.onclick=Qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qh.hasOwnProperty(y))t:{if(y[0]==="o"&&y[1]==="n"&&(I=y.endsWith("Capture"),h=y.slice(2,I?y.length-7:void 0),N=o[Je]||null,N=N!=null?N[y]:null,typeof N=="function"&&o.removeEventListener(h,N,I),typeof S=="function")){typeof N!="function"&&N!==null&&(y in o?o[y]=null:o.hasAttribute(y)&&o.removeAttribute(y)),o.addEventListener(h,S,I);break t}y in o?o[y]=S:S===!0?o.setAttribute(y,""):kn(o,y,S)}}}function Fe(o,h,y){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":R("error",o),R("load",o);var S=!1,I=!1,N;for(N in y)if(y.hasOwnProperty(N)){var at=y[N];if(at!=null)switch(N){case"src":S=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:ne(o,h,N,at,y,null)}}I&&ne(o,h,"srcSet",y.srcSet,y,null),S&&ne(o,h,"src",y.src,y,null);return;case"input":R("invalid",o);var vt=N=at=I=null,qt=null,ge=null;for(S in y)if(y.hasOwnProperty(S)){var Ce=y[S];if(Ce!=null)switch(S){case"name":I=Ce;break;case"type":at=Ce;break;case"checked":qt=Ce;break;case"defaultChecked":ge=Ce;break;case"value":N=Ce;break;case"defaultValue":vt=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(i(137,h));break;default:ne(o,h,S,Ce,y,null)}}eu(o,N,vt,qt,ge,at,I,!1);return;case"select":R("invalid",o),S=at=N=null;for(I in y)if(y.hasOwnProperty(I)&&(vt=y[I],vt!=null))switch(I){case"value":N=vt;break;case"defaultValue":at=vt;break;case"multiple":S=vt;default:ne(o,h,I,vt,y,null)}h=N,y=at,o.multiple=!!S,h!=null?Ci(o,!!S,h,!1):y!=null&&Ci(o,!!S,y,!0);return;case"textarea":R("invalid",o),N=I=S=null;for(at in y)if(y.hasOwnProperty(at)&&(vt=y[at],vt!=null))switch(at){case"value":S=vt;break;case"defaultValue":I=vt;break;case"children":N=vt;break;case"dangerouslySetInnerHTML":if(vt!=null)throw Error(i(91));break;default:ne(o,h,at,vt,y,null)}Ka(o,S,I,N);return;case"option":for(qt in y)if(y.hasOwnProperty(qt)&&(S=y[qt],S!=null))switch(qt){case"selected":o.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:ne(o,h,qt,S,y,null)}return;case"dialog":R("beforetoggle",o),R("toggle",o),R("cancel",o),R("close",o);break;case"iframe":case"object":R("load",o);break;case"video":case"audio":for(S=0;S<T.length;S++)R(T[S],o);break;case"image":R("error",o),R("load",o);break;case"details":R("toggle",o);break;case"embed":case"source":case"link":R("error",o),R("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in y)if(y.hasOwnProperty(ge)&&(S=y[ge],S!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:ne(o,h,ge,S,y,null)}return;default:if(Cl(h)){for(Ce in y)y.hasOwnProperty(Ce)&&(S=y[Ce],S!==void 0&&Me(o,h,Ce,S,y,void 0));return}}for(vt in y)y.hasOwnProperty(vt)&&(S=y[vt],S!=null&&ne(o,h,vt,S,y,null))}function ln(o,h,y,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,N=null,at=null,vt=null,qt=null,ge=null,Ce=null;for(be in y){var ze=y[be];if(y.hasOwnProperty(be)&&ze!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":qt=ze;default:S.hasOwnProperty(be)||ne(o,h,be,null,S,ze)}}for(var ve in S){var be=S[ve];if(ze=y[ve],S.hasOwnProperty(ve)&&(be!=null||ze!=null))switch(ve){case"type":N=be;break;case"name":I=be;break;case"checked":ge=be;break;case"defaultChecked":Ce=be;break;case"value":at=be;break;case"defaultValue":vt=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(i(137,h));break;default:be!==ze&&ne(o,h,ve,be,S,ze)}}Qs(o,at,vt,qt,ge,Ce,N,I);return;case"select":be=at=vt=ve=null;for(N in y)if(qt=y[N],y.hasOwnProperty(N)&&qt!=null)switch(N){case"value":break;case"multiple":be=qt;default:S.hasOwnProperty(N)||ne(o,h,N,null,S,qt)}for(I in S)if(N=S[I],qt=y[I],S.hasOwnProperty(I)&&(N!=null||qt!=null))switch(I){case"value":ve=N;break;case"defaultValue":vt=N;break;case"multiple":at=N;default:N!==qt&&ne(o,h,I,N,S,qt)}h=vt,y=at,S=be,ve!=null?Ci(o,!!y,ve,!1):!!S!=!!y&&(h!=null?Ci(o,!!y,h,!0):Ci(o,!!y,y?[]:"",!1));return;case"textarea":be=ve=null;for(vt in y)if(I=y[vt],y.hasOwnProperty(vt)&&I!=null&&!S.hasOwnProperty(vt))switch(vt){case"value":break;case"children":break;default:ne(o,h,vt,null,S,I)}for(at in S)if(I=S[at],N=y[at],S.hasOwnProperty(at)&&(I!=null||N!=null))switch(at){case"value":ve=I;break;case"defaultValue":be=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:I!==N&&ne(o,h,at,I,S,N)}Ps(o,ve,be);return;case"option":for(var gn in y)if(ve=y[gn],y.hasOwnProperty(gn)&&ve!=null&&!S.hasOwnProperty(gn))switch(gn){case"selected":o.selected=!1;break;default:ne(o,h,gn,null,S,ve)}for(qt in S)if(ve=S[qt],be=y[qt],S.hasOwnProperty(qt)&&ve!==be&&(ve!=null||be!=null))switch(qt){case"selected":o.selected=ve&&typeof ve!="function"&&typeof ve!="symbol";break;default:ne(o,h,qt,ve,S,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var On in y)ve=y[On],y.hasOwnProperty(On)&&ve!=null&&!S.hasOwnProperty(On)&&ne(o,h,On,null,S,ve);for(ge in S)if(ve=S[ge],be=y[ge],S.hasOwnProperty(ge)&&ve!==be&&(ve!=null||be!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,h));break;default:ne(o,h,ge,ve,S,be)}return;default:if(Cl(h)){for(var fr in y)ve=y[fr],y.hasOwnProperty(fr)&&ve!==void 0&&!S.hasOwnProperty(fr)&&Me(o,h,fr,void 0,S,ve);for(Ce in S)ve=S[Ce],be=y[Ce],!S.hasOwnProperty(Ce)||ve===be||ve===void 0&&be===void 0||Me(o,h,Ce,ve,S,be);return}}for(var oe in y)ve=y[oe],y.hasOwnProperty(oe)&&ve!=null&&!S.hasOwnProperty(oe)&&ne(o,h,oe,null,S,ve);for(ze in S)ve=S[ze],be=y[ze],!S.hasOwnProperty(ze)||ve===be||ve==null&&be==null||ne(o,h,ze,ve,S,be)}function Xe(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function We(){if(typeof performance.getEntriesByType=="function"){for(var o=0,h=0,y=performance.getEntriesByType("resource"),S=0;S<y.length;S++){var I=y[S],N=I.transferSize,at=I.initiatorType,vt=I.duration;if(N&&vt&&Xe(at)){for(at=0,vt=I.responseEnd,S+=1;S<y.length;S++){var qt=y[S],ge=qt.startTime;if(ge>vt)break;var Ce=qt.transferSize,ze=qt.initiatorType;Ce&&Xe(ze)&&(qt=qt.responseEnd,at+=Ce*(qt<vt?1:(vt-ge)/(qt-ge)))}if(--S,h+=8*(N+at)/(I.duration/1e3),o++,10<o)break}}if(0<o)return h/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Ve=null,en=null;function qe(o){return o.nodeType===9?o:o.ownerDocument}function Re(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pn(o,h){if(o===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&h==="foreignObject"?0:o}function un(o,h){return o==="textarea"||o==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var jn=null;function Ki(){var o=window.event;return o&&o.type==="popstate"?o===jn?!1:(jn=o,!0):(jn=null,!1)}var Qi=typeof setTimeout=="function"?setTimeout:void 0,na=typeof clearTimeout=="function"?clearTimeout:void 0,qs=typeof Promise=="function"?Promise:void 0,Ss=typeof queueMicrotask=="function"?queueMicrotask:typeof qs<"u"?function(o){return qs.resolve(null).then(o).catch(Zr)}:Qi;function Zr(o){setTimeout(function(){throw o})}function cr(o){return o==="head"}function Pa(o,h){var y=h,S=0;do{var I=y.nextSibling;if(o.removeChild(y),I&&I.nodeType===8)if(y=I.data,y==="/$"||y==="/&"){if(S===0){o.removeChild(I),hm(h);return}S--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")S++;else if(y==="html")xr(o.ownerDocument.documentElement);else if(y==="head"){y=o.ownerDocument.head,xr(y);for(var N=y.firstChild;N;){var at=N.nextSibling,vt=N.nodeName;N[wr]||vt==="SCRIPT"||vt==="STYLE"||vt==="LINK"&&N.rel.toLowerCase()==="stylesheet"||y.removeChild(N),N=at}}else y==="body"&&xr(o.ownerDocument.body);y=I}while(y);hm(h)}function as(o,h){var y=o;o=0;do{var S=y.nextSibling;if(y.nodeType===1?h?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(h?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),S&&S.nodeType===8)if(y=S.data,y==="/$"){if(o===0)break;o--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||o++;y=S}while(y)}function $a(o){var h=o.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var y=h;switch(h=h.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":$a(y),Mi(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}o.removeChild(y)}}function ia(o,h,y,S){for(;o.nodeType===1;){var I=y;if(o.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(S){if(!o[wr])switch(h){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(N=o.getAttribute("rel"),N==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(N!==I.rel||o.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||o.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||o.getAttribute("title")!==(I.title==null?null:I.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(N=o.getAttribute("src"),(N!==(I.src==null?null:I.src)||o.getAttribute("type")!==(I.type==null?null:I.type)||o.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&N&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(h==="input"&&o.type==="hidden"){var N=I.name==null?null:""+I.name;if(I.type==="hidden"&&o.getAttribute("name")===N)return o}else return o;if(o=hr(o.nextSibling),o===null)break}return null}function ra(o,h,y){if(h==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!y||(o=hr(o.nextSibling),o===null))return null;return o}function qa(o,h){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=hr(o.nextSibling),o===null))return null;return o}function Ha(o){return o.data==="$?"||o.data==="$~"}function ka(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function Hs(o,h){var y=o.ownerDocument;if(o.data==="$~")o._reactRetry=h;else if(o.data!=="$?"||y.readyState!=="loading")h();else{var S=function(){h(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),o._reactRetry=S}}function hr(o){for(;o!=null;o=o.nextSibling){var h=o.nodeType;if(h===1||h===3)break;if(h===8){if(h=o.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return o}var Rr=null;function Zn(o){o=o.nextSibling;for(var h=0;o;){if(o.nodeType===8){var y=o.data;if(y==="/$"||y==="/&"){if(h===0)return hr(o.nextSibling);h--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||h++}o=o.nextSibling}return null}function Za(o){o=o.previousSibling;for(var h=0;o;){if(o.nodeType===8){var y=o.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(h===0)return o;h--}else y!=="/$"&&y!=="/&"||h++}o=o.previousSibling}return null}function Oa(o,h,y){switch(h=qe(y),o){case"html":if(o=h.documentElement,!o)throw Error(i(452));return o;case"head":if(o=h.head,!o)throw Error(i(453));return o;case"body":if(o=h.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function xr(o){for(var h=o.attributes;h.length;)o.removeAttributeNode(h[0]);Mi(o)}var Br=new Map,gl=new Set;function xo(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ss=Ot.d;Ot.d={f:yl,r:Yo,D:Pd,C:W_,L:zg,m:Lg,X:Y_,S:cc,M:X_};function yl(){var o=ss.f(),h=_d();return o||h}function Yo(o){var h=rr(o);h!==null&&h.tag===5&&h.type==="form"?nd(h):ss.r(o)}var ma=typeof document>"u"?null:document;function Su(o,h,y){var S=ma;if(S&&typeof h=="string"&&h){var I=qi(h);I='link[rel="'+o+'"][href="'+I+'"]',typeof y=="string"&&(I+='[crossorigin="'+y+'"]'),gl.has(I)||(gl.add(I),o={rel:o,crossOrigin:y,href:h},S.querySelector(I)===null&&(h=S.createElement("link"),Fe(h,"link",o),Ji(h),S.head.appendChild(h)))}}function Pd(o){ss.D(o),Su("dns-prefetch",o,null)}function W_(o,h){ss.C(o,h),Su("preconnect",o,h)}function zg(o,h,y){ss.L(o,h,y);var S=ma;if(S&&o&&h){var I='link[rel="preload"][as="'+qi(h)+'"]';h==="image"&&y&&y.imageSrcSet?(I+='[imagesrcset="'+qi(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(I+='[imagesizes="'+qi(y.imageSizes)+'"]')):I+='[href="'+qi(o)+'"]';var N=I;switch(h){case"style":N=xf(o);break;case"script":N=bf(o)}Br.has(N)||(o=M({rel:"preload",href:h==="image"&&y&&y.imageSrcSet?void 0:o,as:h},y),Br.set(N,o),S.querySelector(I)!==null||h==="style"&&S.querySelector(kd(N))||h==="script"&&S.querySelector(Od(N))||(h=S.createElement("link"),Fe(h,"link",o),Ji(h),S.head.appendChild(h)))}}function Lg(o,h){ss.m(o,h);var y=ma;if(y&&o){var S=h&&typeof h.as=="string"?h.as:"script",I='link[rel="modulepreload"][as="'+qi(S)+'"][href="'+qi(o)+'"]',N=I;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=bf(o)}if(!Br.has(N)&&(o=M({rel:"modulepreload",href:o},h),Br.set(N,o),y.querySelector(I)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Od(N)))return}S=y.createElement("link"),Fe(S,"link",o),Ji(S),y.head.appendChild(S)}}}function cc(o,h,y){ss.S(o,h,y);var S=ma;if(S&&o){var I=Tl(S).hoistableStyles,N=xf(o);h=h||"default";var at=I.get(N);if(!at){var vt={loading:0,preload:null};if(at=S.querySelector(kd(N)))vt.loading=5;else{o=M({rel:"stylesheet",href:o,"data-precedence":h},y),(y=Br.get(N))&&wf(o,y);var qt=at=S.createElement("link");Ji(qt),Fe(qt,"link",o),qt._p=new Promise(function(ge,Ce){qt.onload=ge,qt.onerror=Ce}),qt.addEventListener("load",function(){vt.loading|=1}),qt.addEventListener("error",function(){vt.loading|=2}),vt.loading|=4,bo(at,h,S)}at={type:"stylesheet",instance:at,count:1,state:vt},I.set(N,at)}}}function Y_(o,h){ss.X(o,h);var y=ma;if(y&&o){var S=Tl(y).hoistableScripts,I=bf(o),N=S.get(I);N||(N=y.querySelector(Od(I)),N||(o=M({src:o,async:!0},h),(h=Br.get(I))&&um(o,h),N=y.createElement("script"),Ji(N),Fe(N,"link",o),y.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},S.set(I,N))}}function X_(o,h){ss.M(o,h);var y=ma;if(y&&o){var S=Tl(y).hoistableScripts,I=bf(o),N=S.get(I);N||(N=y.querySelector(Od(I)),N||(o=M({src:o,async:!0,type:"module"},h),(h=Br.get(I))&&um(o,h),N=y.createElement("script"),Ji(N),Fe(N,"link",o),y.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},S.set(I,N))}}function K_(o,h,y,S){var I=(I=le.current)?xo(I):null;if(!I)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(h=xf(y.href),y=Tl(I).hoistableStyles,S=y.get(h),S||(S={type:"style",instance:null,count:0,state:null},y.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){o=xf(y.href);var N=Tl(I).hoistableStyles,at=N.get(o);if(at||(I=I.ownerDocument||I,at={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(o,at),(N=I.querySelector(kd(o)))&&!N._p&&(at.instance=N,at.state.loading=5),Br.has(o)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Br.set(o,y),N||Jx(I,o,y,at.state))),h&&S===null)throw Error(i(528,""));return at}if(h&&S!==null)throw Error(i(529,""));return null;case"script":return h=y.async,y=y.src,typeof y=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=bf(y),y=Tl(I).hoistableScripts,S=y.get(h),S||(S={type:"script",instance:null,count:0,state:null},y.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function xf(o){return'href="'+qi(o)+'"'}function kd(o){return'link[rel="stylesheet"]['+o+"]"}function Q_(o){return M({},o,{"data-precedence":o.precedence,precedence:null})}function Jx(o,h,y,S){o.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=o.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),Fe(h,"link",y),Ji(h),o.head.appendChild(h))}function bf(o){return'[src="'+qi(o)+'"]'}function Od(o){return"script[async]"+o}function J_(o,h,y){if(h.count++,h.instance===null)switch(h.type){case"style":var S=o.querySelector('style[data-href~="'+qi(y.href)+'"]');if(S)return h.instance=S,Ji(S),S;var I=M({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(o.ownerDocument||o).createElement("style"),Ji(S),Fe(S,"style",I),bo(S,y.precedence,o),h.instance=S;case"stylesheet":I=xf(y.href);var N=o.querySelector(kd(I));if(N)return h.state.loading|=4,h.instance=N,Ji(N),N;S=Q_(y),(I=Br.get(I))&&wf(S,I),N=(o.ownerDocument||o).createElement("link"),Ji(N);var at=N;return at._p=new Promise(function(vt,qt){at.onload=vt,at.onerror=qt}),Fe(N,"link",S),h.state.loading|=4,bo(N,y.precedence,o),h.instance=N;case"script":return N=bf(y.src),(I=o.querySelector(Od(N)))?(h.instance=I,Ji(I),I):(S=y,(I=Br.get(N))&&(S=M({},y),um(S,I)),o=o.ownerDocument||o,I=o.createElement("script"),Ji(I),Fe(I,"link",S),o.head.appendChild(I),h.instance=I);case"void":return null;default:throw Error(i(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,bo(S,y.precedence,o));return h.instance}function bo(o,h,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=S.length?S[S.length-1]:null,N=I,at=0;at<S.length;at++){var vt=S[at];if(vt.dataset.precedence===h)N=vt;else if(N!==I)break}N?N.parentNode.insertBefore(o,N.nextSibling):(h=y.nodeType===9?y.head:y,h.insertBefore(o,h.firstChild))}function wf(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.title==null&&(o.title=h.title)}function um(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.integrity==null&&(o.integrity=h.integrity)}var cm=null;function tv(o,h,y){if(cm===null){var S=new Map,I=cm=new Map;I.set(y,S)}else I=cm,S=I.get(y),S||(S=new Map,I.set(y,S));if(S.has(o))return S;for(S.set(o,null),y=y.getElementsByTagName(o),I=0;I<y.length;I++){var N=y[I];if(!(N[wr]||N[He]||o==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var at=N.getAttribute(h)||"";at=o+at;var vt=S.get(at);vt?vt.push(N):S.set(at,[N])}}return S}function ev(o,h,y){o=o.ownerDocument||o,o.head.insertBefore(y,h==="title"?o.querySelector("head > title"):null)}function os(o,h,y){if(y===1||h.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return o=h.disabled,typeof h.precedence=="string"&&o==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function wo(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function vh(o,h,y,S){if(y.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var I=xf(S.href),N=h.querySelector(kd(I));if(N){h=N._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(o.count++,o=Ko.bind(o),h.then(o,o)),y.state.loading|=4,y.instance=N,Ji(N);return}N=h.ownerDocument||h,S=Q_(S),(I=Br.get(I))&&wf(S,I),N=N.createElement("link"),Ji(N);var at=N;at._p=new Promise(function(vt,qt){at.onload=vt,at.onerror=qt}),Fe(N,"link",S),y.instance=N}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(y,h),(h=y.state.preload)&&(y.state.loading&3)===0&&(o.count++,y=Ko.bind(o),h.addEventListener("load",y),h.addEventListener("error",y))}}var Xo=0;function xh(o,h){return o.stylesheets&&o.count===0&&iv(o,o.stylesheets),0<o.count||0<o.imgCount?function(y){var S=setTimeout(function(){if(o.stylesheets&&iv(o,o.stylesheets),o.unsuspend){var N=o.unsuspend;o.unsuspend=null,N()}},6e4+h);0<o.imgBytes&&Xo===0&&(Xo=62500*We());var I=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&iv(o,o.stylesheets),o.unsuspend)){var N=o.unsuspend;o.unsuspend=null,N()}},(o.imgBytes>Xo?50:800)+h);return o.unsuspend=y,function(){o.unsuspend=null,clearTimeout(S),clearTimeout(I)}}:null}function Ko(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)iv(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var nv=null;function iv(o,h){o.stylesheets=null,o.unsuspend!==null&&(o.count++,nv=new Map,h.forEach(i3,o),nv=null,Ko.call(o))}function i3(o,h){if(!(h.state.loading&4)){var y=nv.get(o);if(y)var S=y.get(null);else{y=new Map,nv.set(o,y);for(var I=o.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<I.length;N++){var at=I[N];(at.nodeName==="LINK"||at.getAttribute("media")!=="not all")&&(y.set(at.dataset.precedence,at),S=at)}S&&y.set(null,S)}I=h.instance,at=I.getAttribute("data-precedence"),N=y.get(at)||S,N===S&&y.set(null,I),y.set(at,I),this.count++,S=Ko.bind(this),I.addEventListener("load",S),I.addEventListener("error",S),N?N.parentNode.insertBefore(I,N.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(I,o.firstChild)),h.state.loading|=4}}var Ig={$$typeof:Y,Provider:null,Consumer:null,_currentValue:St,_currentValue2:St,_threadCount:0};function r3(o,h,y,S,I,N,at,vt,qt){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lt(0),this.hiddenUpdates=Lt(null),this.identifierPrefix=S,this.onUncaughtError=I,this.onCaughtError=N,this.onRecoverableError=at,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=qt,this.incompleteTransitions=new Map}function gT(o,h,y,S,I,N,at,vt,qt,ge,Ce,ze){return o=new r3(o,h,y,at,qt,ge,Ce,ze,vt),h=1,N===!0&&(h|=24),N=Ma(3,null,null,h),o.current=N,N.stateNode=o,h=K(),h.refCount++,o.pooledCache=h,h.refCount++,N.memoizedState={element:S,isDehydrated:y,cache:h},ji(N),o}function yT(o){return o?(o=Uo,o):Uo}function _T(o,h,y,S,I,N){I=yT(I),S.context===null?S.context=I:S.pendingContext=I,S=Ea(h),S.payload={element:y},N=N===void 0?null:N,N!==null&&(S.callback=N),y=rs(o,S,h),y!==null&&($s(y,o,h),Ho(y,o,h))}function vT(o,h){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var y=o.retryLane;o.retryLane=y!==0&&y<h?y:h}}function tb(o,h){vT(o,h),(o=o.alternate)&&vT(o,h)}function xT(o){if(o.tag===13||o.tag===31){var h=_s(o,67108864);h!==null&&$s(h,o,67108864),tb(o,67108864)}}function bT(o){if(o.tag===13||o.tag===31){var h=_o();h=xe(h);var y=_s(o,h);y!==null&&$s(y,o,h),tb(o,h)}}var rv=!0;function a3(o,h,y,S){var I=kt.T;kt.T=null;var N=Ot.p;try{Ot.p=2,eb(o,h,y,S)}finally{Ot.p=N,kt.T=I}}function s3(o,h,y,S){var I=kt.T;kt.T=null;var N=Ot.p;try{Ot.p=8,eb(o,h,y,S)}finally{Ot.p=N,kt.T=I}}function eb(o,h,y,S){if(rv){var I=nb(S);if(I===null)ct(o,h,S,av,y),ST(o,S);else if(l3(I,o,h,y,S))S.stopPropagation();else if(ST(o,S),h&4&&-1<o3.indexOf(o)){for(;I!==null;){var N=rr(I);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var at=ba(N.pendingLanes);if(at!==0){var vt=N;for(vt.pendingLanes|=2,vt.entangledLanes|=2;at;){var qt=1<<31-pr(at);vt.entanglements[1]|=qt,at&=~qt}ml(N),(ki&6)===0&&(Zp=cn()+500,vf(0))}}break;case 31:case 13:vt=_s(N,2),vt!==null&&$s(vt,N,2),_d(),tb(N,2)}if(N=nb(S),N===null&&ct(o,h,S,av,y),N===I)break;I=N}I!==null&&S.stopPropagation()}else ct(o,h,S,null,y)}}function nb(o){return o=il(o),ib(o)}var av=null;function ib(o){if(av=null,o=Ni(o),o!==null){var h=l(o);if(h===null)o=null;else{var y=h.tag;if(y===13){if(o=f(h),o!==null)return o;o=null}else if(y===31){if(o=a(h),o!==null)return o;o=null}else if(y===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;o=null}else h!==o&&(o=null)}}return av=o,null}function wT(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wi()){case si:return 2;case Bi:return 8;case Ur:case Xs:return 32;case Xa:return 268435456;default:return 32}default:return 32}}var rb=!1,Sf=null,Tf=null,Af=null,Rg=new Map,Bg=new Map,Mf=[],o3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ST(o,h){switch(o){case"focusin":case"focusout":Sf=null;break;case"dragenter":case"dragleave":Tf=null;break;case"mouseover":case"mouseout":Af=null;break;case"pointerover":case"pointerout":Rg.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bg.delete(h.pointerId)}}function Ng(o,h,y,S,I,N){return o===null||o.nativeEvent!==N?(o={blockedOn:h,domEventName:y,eventSystemFlags:S,nativeEvent:N,targetContainers:[I]},h!==null&&(h=rr(h),h!==null&&xT(h)),o):(o.eventSystemFlags|=S,h=o.targetContainers,I!==null&&h.indexOf(I)===-1&&h.push(I),o)}function l3(o,h,y,S,I){switch(h){case"focusin":return Sf=Ng(Sf,o,h,y,S,I),!0;case"dragenter":return Tf=Ng(Tf,o,h,y,S,I),!0;case"mouseover":return Af=Ng(Af,o,h,y,S,I),!0;case"pointerover":var N=I.pointerId;return Rg.set(N,Ng(Rg.get(N)||null,o,h,y,S,I)),!0;case"gotpointercapture":return N=I.pointerId,Bg.set(N,Ng(Bg.get(N)||null,o,h,y,S,I)),!0}return!1}function TT(o){var h=Ni(o.target);if(h!==null){var y=l(h);if(y!==null){if(h=y.tag,h===13){if(h=f(y),h!==null){o.blockedOn=h,hn(o.priority,function(){bT(y)});return}}else if(h===31){if(h=a(y),h!==null){o.blockedOn=h,hn(o.priority,function(){bT(y)});return}}else if(h===3&&y.stateNode.current.memoizedState.isDehydrated){o.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}o.blockedOn=null}function sv(o){if(o.blockedOn!==null)return!1;for(var h=o.targetContainers;0<h.length;){var y=nb(o.nativeEvent);if(y===null){y=o.nativeEvent;var S=new y.constructor(y.type,y);Lu=S,y.target.dispatchEvent(S),Lu=null}else return h=rr(y),h!==null&&xT(h),o.blockedOn=y,!1;h.shift()}return!0}function AT(o,h,y){sv(o)&&y.delete(h)}function u3(){rb=!1,Sf!==null&&sv(Sf)&&(Sf=null),Tf!==null&&sv(Tf)&&(Tf=null),Af!==null&&sv(Af)&&(Af=null),Rg.forEach(AT),Bg.forEach(AT)}function ov(o,h){o.blockedOn===h&&(o.blockedOn=null,rb||(rb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,u3)))}var lv=null;function MT(o){lv!==o&&(lv=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){lv===o&&(lv=null);for(var h=0;h<o.length;h+=3){var y=o[h],S=o[h+1],I=o[h+2];if(typeof S!="function"){if(ib(S||y)===null)continue;break}var N=rr(y);N!==null&&(o.splice(h,3),h-=3,of(N,{pending:!0,data:I,method:y.method,action:S},S,I))}}))}function hm(o){function h(qt){return ov(qt,o)}Sf!==null&&ov(Sf,o),Tf!==null&&ov(Tf,o),Af!==null&&ov(Af,o),Rg.forEach(h),Bg.forEach(h);for(var y=0;y<Mf.length;y++){var S=Mf[y];S.blockedOn===o&&(S.blockedOn=null)}for(;0<Mf.length&&(y=Mf[0],y.blockedOn===null);)TT(y),y.blockedOn===null&&Mf.shift();if(y=(o.ownerDocument||o).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var I=y[S],N=y[S+1],at=I[Je]||null;if(typeof N=="function")at||MT(y);else if(at){var vt=null;if(N&&N.hasAttribute("formAction")){if(I=N,at=N[Je]||null)vt=at.formAction;else if(ib(I)!==null)continue}else vt=at.action;typeof vt=="function"?y[S+1]=vt:(y.splice(S,3),S-=3),MT(y)}}}function ET(){function o(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(at){return I=at})},focusReset:"manual",scroll:"manual"})}function h(){I!==null&&(I(),I=null),S||setTimeout(y,20)}function y(){if(!S&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,I=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(y,100),function(){S=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),I!==null&&(I(),I=null)}}}function ab(o){this._internalRoot=o}uv.prototype.render=ab.prototype.render=function(o){var h=this._internalRoot;if(h===null)throw Error(i(409));var y=h.current,S=_o();_T(y,S,o,h,null,null)},uv.prototype.unmount=ab.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var h=o.containerInfo;_T(o.current,2,null,o,null,null),_d(),h[_n]=null}};function uv(o){this._internalRoot=o}uv.prototype.unstable_scheduleHydration=function(o){if(o){var h=Ee();o={blockedOn:null,target:o,priority:h};for(var y=0;y<Mf.length&&h!==0&&h<Mf[y].priority;y++);Mf.splice(y,0,o),y===0&&TT(o)}};var CT=e.version;if(CT!=="19.2.0")throw Error(i(527,CT,"19.2.0"));Ot.findDOMNode=function(o){var h=o._reactInternals;if(h===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=_(h),o=o!==null?x(o):null,o=o===null?null:o.stateNode,o};var c3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:kt,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cv.isDisabled&&cv.supportsFiber)try{dr=cv.inject(c3),Un=cv}catch{}}return Fg.createRoot=function(o,h){if(!r(o))throw Error(i(299));var y=!1,S="",I=b_,N=w_,at=S_;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(I=h.onUncaughtError),h.onCaughtError!==void 0&&(N=h.onCaughtError),h.onRecoverableError!==void 0&&(at=h.onRecoverableError)),h=gT(o,1,!1,null,null,y,S,null,I,N,at,ET),o[_n]=h.current,tt(o),new ab(h)},Fg.hydrateRoot=function(o,h,y){if(!r(o))throw Error(i(299));var S=!1,I="",N=b_,at=w_,vt=S_,qt=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(I=y.identifierPrefix),y.onUncaughtError!==void 0&&(N=y.onUncaughtError),y.onCaughtError!==void 0&&(at=y.onCaughtError),y.onRecoverableError!==void 0&&(vt=y.onRecoverableError),y.formState!==void 0&&(qt=y.formState)),h=gT(o,1,!0,h,y??null,S,I,qt,N,at,vt,ET),h.context=yT(null),y=h.current,S=_o(),S=xe(S),I=Ea(S),I.callback=null,rs(y,I,S),y=S,h.current.lanes=y,It(h,y),ml(h),o[_n]=h.current,tt(o),new uv(h)},Fg.version="19.2.0",Fg}var NT;function b3(){if(NT)return lb.exports;NT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),lb.exports=x3(),lb.exports}var w3=b3();/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jT="popstate";function S3(t={}){function e(i,r){let{pathname:l,search:f,hash:a}=i.location;return dw("",{pathname:l,search:f,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:_y(r)}return A3(e,n,null,t)}function aa(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $c(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function T3(){return Math.random().toString(36).substring(2,10)}function FT(t,e){return{usr:t.state,key:t.key,idx:e}}function dw(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Im(e):e,state:n,key:e&&e.key||i||T3()}}function _y({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Im(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function A3(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:l=!1}=i,f=r.history,a="POP",g=null,_=x();_==null&&(_=0,f.replaceState({...f.state,idx:_},""));function x(){return(f.state||{idx:null}).idx}function M(){a="POP";let H=x(),Q=H==null?null:H-_;_=H,g&&g({action:a,location:V.location,delta:Q})}function O(H,Q){a="PUSH";let X=dw(V.location,H,Q);_=x()+1;let Y=FT(X,_),W=V.createHref(X);try{f.pushState(Y,"",W)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;r.location.assign(W)}l&&g&&g({action:a,location:V.location,delta:1})}function z(H,Q){a="REPLACE";let X=dw(V.location,H,Q);_=x();let Y=FT(X,_),W=V.createHref(X);f.replaceState(Y,"",W),l&&g&&g({action:a,location:V.location,delta:0})}function F(H){return M3(H)}let V={get action(){return a},get location(){return t(r,f)},listen(H){if(g)throw new Error("A history only accepts one active listener");return r.addEventListener(jT,M),g=H,()=>{r.removeEventListener(jT,M),g=null}},createHref(H){return e(r,H)},createURL:F,encodeLocation(H){let Q=F(H);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:O,replace:z,go(H){return f.go(H)}};return V}function M3(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),aa(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:_y(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Lk(t,e,n="/"){return E3(t,e,n,!1)}function E3(t,e,n,i){let r=typeof e=="string"?Im(e):e,l=Ih(r.pathname||"/",n);if(l==null)return null;let f=Ik(t);C3(f);let a=null;for(let g=0;a==null&&g<f.length;++g){let _=j3(l);a=B3(f[g],_,i)}return a}function Ik(t,e=[],n=[],i="",r=!1){let l=(f,a,g=r,_)=>{let x={relativePath:_===void 0?f.path||"":_,caseSensitive:f.caseSensitive===!0,childrenIndex:a,route:f};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(i)&&g)return;aa(x.relativePath.startsWith(i),`Absolute route path "${x.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(i.length)}let M=Dh([i,x.relativePath]),O=n.concat(x);f.children&&f.children.length>0&&(aa(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${M}".`),Ik(f.children,e,O,M,g)),!(f.path==null&&!f.index)&&e.push({path:M,score:I3(M,f.index),routesMeta:O})};return t.forEach((f,a)=>{if(f.path===""||!f.path?.includes("?"))l(f,a);else for(let g of Rk(f.path))l(f,a,!0,g)}),e}function Rk(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return r?[l,""]:[l];let f=Rk(i.join("/")),a=[];return a.push(...f.map(g=>g===""?l:[l,g].join("/"))),r&&a.push(...f),a.map(g=>t.startsWith("/")&&g===""?"/":g)}function C3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:R3(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var P3=/^:[\w-]+$/,k3=3,O3=2,D3=1,z3=10,L3=-2,UT=t=>t==="*";function I3(t,e){let n=t.split("/"),i=n.length;return n.some(UT)&&(i+=L3),e&&(i+=O3),n.filter(r=>!UT(r)).reduce((r,l)=>r+(P3.test(l)?k3:l===""?D3:z3),i)}function R3(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function B3(t,e,n=!1){let{routesMeta:i}=t,r={},l="/",f=[];for(let a=0;a<i.length;++a){let g=i[a],_=a===i.length-1,x=l==="/"?e:e.slice(l.length)||"/",M=e0({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},x),O=g.route;if(!M&&_&&n&&!i[i.length-1].route.index&&(M=e0({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!M)return null;Object.assign(r,M.params),f.push({params:r,pathname:Dh([l,M.pathname]),pathnameBase:$3(Dh([l,M.pathnameBase])),route:O}),M.pathnameBase!=="/"&&(l=Dh([l,M.pathnameBase]))}return f}function e0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=N3(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let l=r[0],f=l.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((_,{paramName:x,isOptional:M},O)=>{if(x==="*"){let F=a[O]||"";f=l.slice(0,l.length-F.length).replace(/(.)\/+$/,"$1")}const z=a[O];return M&&!z?_[x]=void 0:_[x]=(z||"").replace(/%2F/g,"/"),_},{}),pathname:l,pathnameBase:f,pattern:t}}function N3(t,e=!1,n=!0){$c(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,a,g)=>(i.push({paramName:a,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function j3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $c(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ih(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function F3(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Im(t):t;return{pathname:n?n.startsWith("/")?n:U3(n,e):e,search:q3(i),hash:H3(r)}}function U3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function fb(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function V3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bk(t){let e=V3(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Nk(t,e,n,i=!1){let r;typeof t=="string"?r=Im(t):(r={...t},aa(!r.pathname||!r.pathname.includes("?"),fb("?","pathname","search",r)),aa(!r.pathname||!r.pathname.includes("#"),fb("#","pathname","hash",r)),aa(!r.search||!r.search.includes("#"),fb("#","search","hash",r)));let l=t===""||r.pathname==="",f=l?"/":r.pathname,a;if(f==null)a=n;else{let M=e.length-1;if(!i&&f.startsWith("..")){let O=f.split("/");for(;O[0]==="..";)O.shift(),M-=1;r.pathname=O.join("/")}a=M>=0?e[M]:"/"}let g=F3(r,a),_=f&&f!=="/"&&f.endsWith("/"),x=(l||f===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(_||x)&&(g.pathname+="/"),g}var Dh=t=>t.join("/").replace(/\/\/+/g,"/"),$3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),q3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,H3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Z3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jk=["POST","PUT","PATCH","DELETE"];new Set(jk);var G3=["GET",...jk];new Set(G3);var Rm=Z.createContext(null);Rm.displayName="DataRouter";var X0=Z.createContext(null);X0.displayName="DataRouterState";Z.createContext(!1);var Fk=Z.createContext({isTransitioning:!1});Fk.displayName="ViewTransition";var W3=Z.createContext(new Map);W3.displayName="Fetchers";var Y3=Z.createContext(null);Y3.displayName="Await";var Wc=Z.createContext(null);Wc.displayName="Navigation";var By=Z.createContext(null);By.displayName="Location";var Vh=Z.createContext({outlet:null,matches:[],isDataRoute:!1});Vh.displayName="Route";var vS=Z.createContext(null);vS.displayName="RouteError";function X3(t,{relative:e}={}){aa(Ny(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=Z.useContext(Wc),{hash:r,pathname:l,search:f}=jy(t,{relative:e}),a=l;return n!=="/"&&(a=l==="/"?n:Dh([n,l])),i.createHref({pathname:a,search:f,hash:r})}function Ny(){return Z.useContext(By)!=null}function sp(){return aa(Ny(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(By).location}var Uk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vk(t){Z.useContext(Wc).static||Z.useLayoutEffect(t)}function K3(){let{isDataRoute:t}=Z.useContext(Vh);return t?cB():Q3()}function Q3(){aa(Ny(),"useNavigate() may be used only in the context of a <Router> component.");let t=Z.useContext(Rm),{basename:e,navigator:n}=Z.useContext(Wc),{matches:i}=Z.useContext(Vh),{pathname:r}=sp(),l=JSON.stringify(Bk(i)),f=Z.useRef(!1);return Vk(()=>{f.current=!0}),Z.useCallback((g,_={})=>{if($c(f.current,Uk),!f.current)return;if(typeof g=="number"){n.go(g);return}let x=Nk(g,JSON.parse(l),r,_.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Dh([e,x.pathname])),(_.replace?n.replace:n.push)(x,_.state,_)},[e,n,l,r,t])}Z.createContext(null);function jy(t,{relative:e}={}){let{matches:n}=Z.useContext(Vh),{pathname:i}=sp(),r=JSON.stringify(Bk(n));return Z.useMemo(()=>Nk(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function J3(t,e){return $k(t,e)}function $k(t,e,n,i,r){aa(Ny(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=Z.useContext(Wc),{matches:f}=Z.useContext(Vh),a=f[f.length-1],g=a?a.params:{},_=a?a.pathname:"/",x=a?a.pathnameBase:"/",M=a&&a.route;{let X=M&&M.path||"";qk(_,!M||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let O=sp(),z;if(e){let X=typeof e=="string"?Im(e):e;aa(x==="/"||X.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${X.pathname}" was given in the \`location\` prop.`),z=X}else z=O;let F=z.pathname||"/",V=F;if(x!=="/"){let X=x.replace(/^\//,"").split("/");V="/"+F.replace(/^\//,"").split("/").slice(X.length).join("/")}let H=Lk(t,{pathname:V});$c(M||H!=null,`No routes matched location "${z.pathname}${z.search}${z.hash}" `),$c(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${z.pathname}${z.search}${z.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=rB(H&&H.map(X=>Object.assign({},X,{params:Object.assign({},g,X.params),pathname:Dh([x,l.encodeLocation?l.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?x:Dh([x,l.encodeLocation?l.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),f,n,i,r);return e&&Q?Z.createElement(By.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...z},navigationType:"POP"}},Q):Q}function tB(){let t=uB(),e=Z3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",t),f=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:l},"ErrorBoundary")," or"," ",Z.createElement("code",{style:l},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},e),n?Z.createElement("pre",{style:r},n):null,f)}var eB=Z.createElement(tB,null),nB=class extends Z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?Z.createElement(Vh.Provider,{value:this.props.routeContext},Z.createElement(vS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iB({routeContext:t,match:e,children:n}){let i=Z.useContext(Rm);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),Z.createElement(Vh.Provider,{value:t},n)}function rB(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,f=n?.errors;if(f!=null){let _=l.findIndex(x=>x.route.id&&f?.[x.route.id]!==void 0);aa(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let a=!1,g=-1;if(n)for(let _=0;_<l.length;_++){let x=l[_];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=_),x.route.id){let{loaderData:M,errors:O}=n,z=x.route.loader&&!M.hasOwnProperty(x.route.id)&&(!O||O[x.route.id]===void 0);if(x.route.lazy||z){a=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}return l.reduceRight((_,x,M)=>{let O,z=!1,F=null,V=null;n&&(O=f&&x.route.id?f[x.route.id]:void 0,F=x.route.errorElement||eB,a&&(g<0&&M===0?(qk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),z=!0,V=null):g===M&&(z=!0,V=x.route.hydrateFallbackElement||null)));let H=e.concat(l.slice(0,M+1)),Q=()=>{let X;return O?X=F:z?X=V:x.route.Component?X=Z.createElement(x.route.Component,null):x.route.element?X=x.route.element:X=_,Z.createElement(iB,{match:x,routeContext:{outlet:_,matches:H,isDataRoute:n!=null},children:X})};return n&&(x.route.ErrorBoundary||x.route.errorElement||M===0)?Z.createElement(nB,{location:n.location,revalidation:n.revalidation,component:F,error:O,children:Q(),routeContext:{outlet:null,matches:H,isDataRoute:!0},unstable_onError:i}):Q()},null)}function xS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aB(t){let e=Z.useContext(Rm);return aa(e,xS(t)),e}function sB(t){let e=Z.useContext(X0);return aa(e,xS(t)),e}function oB(t){let e=Z.useContext(Vh);return aa(e,xS(t)),e}function bS(t){let e=oB(t),n=e.matches[e.matches.length-1];return aa(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function lB(){return bS("useRouteId")}function uB(){let t=Z.useContext(vS),e=sB("useRouteError"),n=bS("useRouteError");return t!==void 0?t:e.errors?.[n]}function cB(){let{router:t}=aB("useNavigate"),e=bS("useNavigate"),n=Z.useRef(!1);return Vk(()=>{n.current=!0}),Z.useCallback(async(r,l={})=>{$c(n.current,Uk),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...l}))},[t,e])}var VT={};function qk(t,e,n){!e&&!VT[t]&&(VT[t]=!0,$c(!1,n))}Z.memo(hB);function hB({routes:t,future:e,state:n,unstable_onError:i}){return $k(t,void 0,n,i,e)}function Rd(t){aa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fB({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:l=!1}){aa(!Ny(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),a=Z.useMemo(()=>({basename:f,navigator:r,static:l,future:{}}),[f,r,l]);typeof n=="string"&&(n=Im(n));let{pathname:g="/",search:_="",hash:x="",state:M=null,key:O="default"}=n,z=Z.useMemo(()=>{let F=Ih(g,f);return F==null?null:{location:{pathname:F,search:_,hash:x,state:M,key:O},navigationType:i}},[f,g,_,x,M,O,i]);return $c(z!=null,`<Router basename="${f}"> is not able to match the URL "${g}${_}${x}" because it does not start with the basename, so the <Router> won't render anything.`),z==null?null:Z.createElement(Wc.Provider,{value:a},Z.createElement(By.Provider,{children:e,value:z}))}function dB({children:t,location:e}){return J3(pw(t),e)}function pw(t,e=[]){let n=[];return Z.Children.forEach(t,(i,r)=>{if(!Z.isValidElement(i))return;let l=[...e,r];if(i.type===Z.Fragment){n.push.apply(n,pw(i.props.children,l));return}aa(i.type===Rd,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),aa(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=pw(i.props.children,l)),n.push(f)}),n}var qv="get",Hv="application/x-www-form-urlencoded";function K0(t){return t!=null&&typeof t.tagName=="string"}function pB(t){return K0(t)&&t.tagName.toLowerCase()==="button"}function mB(t){return K0(t)&&t.tagName.toLowerCase()==="form"}function gB(t){return K0(t)&&t.tagName.toLowerCase()==="input"}function yB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _B(t,e){return t.button===0&&(!e||e==="_self")&&!yB(t)}var hv=null;function vB(){if(hv===null)try{new FormData(document.createElement("form"),0),hv=!1}catch{hv=!0}return hv}var xB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function db(t){return t!=null&&!xB.has(t)?($c(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hv}"`),null):t}function bB(t,e){let n,i,r,l,f;if(mB(t)){let a=t.getAttribute("action");i=a?Ih(a,e):null,n=t.getAttribute("method")||qv,r=db(t.getAttribute("enctype"))||Hv,l=new FormData(t)}else if(pB(t)||gB(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=t.getAttribute("formaction")||a.getAttribute("action");if(i=g?Ih(g,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||qv,r=db(t.getAttribute("formenctype"))||db(a.getAttribute("enctype"))||Hv,l=new FormData(a,t),!vB()){let{name:_,type:x,value:M}=t;if(x==="image"){let O=_?`${_}.`:"";l.append(`${O}x`,"0"),l.append(`${O}y`,"0")}else _&&l.append(_,M)}}else{if(K0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qv,i=null,r=Hv,f=t}return l&&r==="text/plain"&&(f=l,l=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:l,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wS(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wB(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Ih(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function SB(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TB(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function AB(t,e,n){let i=await Promise.all(t.map(async r=>{let l=e.routes[r.route.id];if(l){let f=await SB(l,n);return f.links?f.links():[]}return[]}));return PB(i.flat(1).filter(TB).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function $T(t,e,n,i,r,l){let f=(g,_)=>n[_]?g.route.id!==n[_].route.id:!0,a=(g,_)=>n[_].pathname!==g.pathname||n[_].route.path?.endsWith("*")&&n[_].params["*"]!==g.params["*"];return l==="assets"?e.filter((g,_)=>f(g,_)||a(g,_)):l==="data"?e.filter((g,_)=>{let x=i.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(f(g,_)||a(g,_))return!0;if(g.route.shouldRevalidate){let M=g.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function MB(t,e,{includeHydrateFallback:n}={}){return EB(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function EB(t){return[...new Set(t)]}function CB(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function PB(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let l=JSON.stringify(CB(r));return n.has(l)||(n.add(l),i.push({key:l,link:r})),i},[])}function Hk(){let t=Z.useContext(Rm);return wS(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kB(){let t=Z.useContext(X0);return wS(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var SS=Z.createContext(void 0);SS.displayName="FrameworkContext";function Zk(){let t=Z.useContext(SS);return wS(t,"You must render this element inside a <HydratedRouter> element"),t}function OB(t,e){let n=Z.useContext(SS),[i,r]=Z.useState(!1),[l,f]=Z.useState(!1),{onFocus:a,onBlur:g,onMouseEnter:_,onMouseLeave:x,onTouchStart:M}=e,O=Z.useRef(null);Z.useEffect(()=>{if(t==="render"&&f(!0),t==="viewport"){let V=Q=>{Q.forEach(X=>{f(X.isIntersecting)})},H=new IntersectionObserver(V,{threshold:.5});return O.current&&H.observe(O.current),()=>{H.disconnect()}}},[t]),Z.useEffect(()=>{if(i){let V=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(V)}}},[i]);let z=()=>{r(!0)},F=()=>{r(!1),f(!1)};return n?t!=="intent"?[l,O,{}]:[l,O,{onFocus:Ug(a,z),onBlur:Ug(g,F),onMouseEnter:Ug(_,z),onMouseLeave:Ug(x,F),onTouchStart:Ug(M,z)}]:[!1,O,{}]}function Ug(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function DB({page:t,...e}){let{router:n}=Hk(),i=Z.useMemo(()=>Lk(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?Z.createElement(LB,{page:t,matches:i,...e}):null}function zB(t){let{manifest:e,routeModules:n}=Zk(),[i,r]=Z.useState([]);return Z.useEffect(()=>{let l=!1;return AB(t,e,n).then(f=>{l||r(f)}),()=>{l=!0}},[t,e,n]),i}function LB({page:t,matches:e,...n}){let i=sp(),{manifest:r,routeModules:l}=Zk(),{basename:f}=Hk(),{loaderData:a,matches:g}=kB(),_=Z.useMemo(()=>$T(t,e,g,r,i,"data"),[t,e,g,r,i]),x=Z.useMemo(()=>$T(t,e,g,r,i,"assets"),[t,e,g,r,i]),M=Z.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let F=new Set,V=!1;if(e.forEach(Q=>{let X=r.routes[Q.route.id];!X||!X.hasLoader||(!_.some(Y=>Y.route.id===Q.route.id)&&Q.route.id in a&&l[Q.route.id]?.shouldRevalidate||X.hasClientLoader?V=!0:F.add(Q.route.id))}),F.size===0)return[];let H=wB(t,f,"data");return V&&F.size>0&&H.searchParams.set("_routes",e.filter(Q=>F.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[H.pathname+H.search]},[f,a,i,r,_,e,t,l]),O=Z.useMemo(()=>MB(x,r),[x,r]),z=zB(x);return Z.createElement(Z.Fragment,null,M.map(F=>Z.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...n})),O.map(F=>Z.createElement("link",{key:F,rel:"modulepreload",href:F,...n})),z.map(({key:F,link:V})=>Z.createElement("link",{key:F,nonce:n.nonce,...V})))}function IB(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Gk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gk&&(window.__reactRouterVersion="7.9.5")}catch{}function RB({basename:t,children:e,window:n}){let i=Z.useRef();i.current==null&&(i.current=S3({window:n,v5Compat:!0}));let r=i.current,[l,f]=Z.useState({action:r.action,location:r.location}),a=Z.useCallback(g=>{Z.startTransition(()=>f(g))},[f]);return Z.useLayoutEffect(()=>r.listen(a),[r,a]),Z.createElement(fB,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:r})}var Wk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cf=Z.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:l,replace:f,state:a,target:g,to:_,preventScrollReset:x,viewTransition:M,...O},z){let{basename:F}=Z.useContext(Wc),V=typeof _=="string"&&Wk.test(_),H,Q=!1;if(typeof _=="string"&&V&&(H=_,Gk))try{let ut=new URL(window.location.href),_t=_.startsWith("//")?new URL(ut.protocol+_):new URL(_),bt=Ih(_t.pathname,F);_t.origin===ut.origin&&bt!=null?_=bt+_t.search+_t.hash:Q=!0}catch{$c(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=X3(_,{relative:r}),[Y,W,J]=OB(i,O),ot=FB(_,{replace:f,state:a,target:g,preventScrollReset:x,relative:r,viewTransition:M});function ht(ut){e&&e(ut),ut.defaultPrevented||ot(ut)}let rt=Z.createElement("a",{...O,...J,href:H||X,onClick:Q||l?e:ht,ref:IB(z,W),target:g,"data-discover":!V&&n==="render"?"true":void 0});return Y&&!V?Z.createElement(Z.Fragment,null,rt,Z.createElement(DB,{page:X})):rt});Cf.displayName="Link";var BB=Z.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:l,to:f,viewTransition:a,children:g,..._},x){let M=jy(f,{relative:_.relative}),O=sp(),z=Z.useContext(X0),{navigator:F,basename:V}=Z.useContext(Wc),H=z!=null&&HB(M)&&a===!0,Q=F.encodeLocation?F.encodeLocation(M).pathname:M.pathname,X=O.pathname,Y=z&&z.navigation&&z.navigation.location?z.navigation.location.pathname:null;n||(X=X.toLowerCase(),Y=Y?Y.toLowerCase():null,Q=Q.toLowerCase()),Y&&V&&(Y=Ih(Y,V)||Y);const W=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let J=X===Q||!r&&X.startsWith(Q)&&X.charAt(W)==="/",ot=Y!=null&&(Y===Q||!r&&Y.startsWith(Q)&&Y.charAt(Q.length)==="/"),ht={isActive:J,isPending:ot,isTransitioning:H},rt=J?e:void 0,ut;typeof i=="function"?ut=i(ht):ut=[i,J?"active":null,ot?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let _t=typeof l=="function"?l(ht):l;return Z.createElement(Cf,{..._,"aria-current":rt,className:ut,ref:x,style:_t,to:f,viewTransition:a},typeof g=="function"?g(ht):g)});BB.displayName="NavLink";var NB=Z.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:l,method:f=qv,action:a,onSubmit:g,relative:_,preventScrollReset:x,viewTransition:M,...O},z)=>{let F=$B(),V=qB(a,{relative:_}),H=f.toLowerCase()==="get"?"get":"post",Q=typeof a=="string"&&Wk.test(a),X=Y=>{if(g&&g(Y),Y.defaultPrevented)return;Y.preventDefault();let W=Y.nativeEvent.submitter,J=W?.getAttribute("formmethod")||f;F(W||Y.currentTarget,{fetcherKey:e,method:J,navigate:n,replace:r,state:l,relative:_,preventScrollReset:x,viewTransition:M})};return Z.createElement("form",{ref:z,method:H,action:V,onSubmit:i?g:X,...O,"data-discover":!Q&&t==="render"?"true":void 0})});NB.displayName="Form";function jB(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yk(t){let e=Z.useContext(Rm);return aa(e,jB(t)),e}function FB(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:l,viewTransition:f}={}){let a=K3(),g=sp(),_=jy(t,{relative:l});return Z.useCallback(x=>{if(_B(x,e)){x.preventDefault();let M=n!==void 0?n:_y(g)===_y(_);a(t,{replace:M,state:i,preventScrollReset:r,relative:l,viewTransition:f})}},[g,a,_,n,i,e,t,r,l,f])}var UB=0,VB=()=>`__${String(++UB)}__`;function $B(){let{router:t}=Yk("useSubmit"),{basename:e}=Z.useContext(Wc),n=lB();return Z.useCallback(async(i,r={})=>{let{action:l,method:f,encType:a,formData:g,body:_}=bB(i,e);if(r.navigate===!1){let x=r.fetcherKey||VB();await t.fetch(x,n,r.action||l,{preventScrollReset:r.preventScrollReset,formData:g,body:_,formMethod:r.method||f,formEncType:r.encType||a,flushSync:r.flushSync})}else await t.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:g,body:_,formMethod:r.method||f,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function qB(t,{relative:e}={}){let{basename:n}=Z.useContext(Wc),i=Z.useContext(Vh);aa(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),l={...jy(t||".",{relative:e})},f=sp();if(t==null){l.search=f.search;let a=new URLSearchParams(l.search),g=a.getAll("index");if(g.some(x=>x==="")){a.delete("index"),g.filter(M=>M).forEach(M=>a.append("index",M));let x=a.toString();l.search=x?`?${x}`:""}}return(!t||t===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Dh([n,l.pathname])),_y(l)}function HB(t,{relative:e}={}){let n=Z.useContext(Fk);aa(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Yk("useViewTransitionState"),r=jy(t,{relative:e});if(!n.isTransitioning)return!1;let l=Ih(n.currentLocation.pathname,i)||n.currentLocation.pathname,f=Ih(n.nextLocation.pathname,i)||n.nextLocation.pathname;return e0(r.pathname,f)!=null||e0(r.pathname,l)!=null}var Fy=zk();const ZB=""+new URL("sun-A5krhKHx.png",import.meta.url).href;function GB(){const[t,e]=Z.useState(null);Z.useEffect(()=>{const r=()=>e(null);return document.addEventListener("click",r),()=>document.removeEventListener("click",r)},[]);const n=(r,l)=>{l.stopPropagation(),e(t===r?null:r)},i=r=>l=>{e(null)};return xt.jsxs("header",{className:"header",children:[xt.jsxs("div",{className:"header-left",children:[xt.jsx("img",{src:ZB,alt:" ",className:"logo"}),xt.jsxs("div",{className:"site-info",children:[xt.jsx("h2",{children:"NSE"}),xt.jsx("p",{children:"Nationwide Sunny Energy"})]})]}),xt.jsx("nav",{className:"nav",children:xt.jsxs("ul",{children:[xt.jsxs("li",{className:"dropdown nav-item",onClick:r=>n("main",r),children:[xt.jsx("span",{className:"dropdown-title",children:""}),t==="main"&&xt.jsx("div",{className:"dropdown-area",children:xt.jsx("div",{className:"dropdown-menu",children:xt.jsxs("ul",{children:[xt.jsx("li",{children:xt.jsx(Cf,{to:"/",onClick:i(),children:""})}),xt.jsx("li",{children:xt.jsx(Cf,{to:"/scenario",onClick:i(),children:"  "})})]})})})]}),xt.jsxs("li",{className:"dropdown nav-item",onClick:r=>n("status",r),children:[xt.jsx("span",{className:"dropdown-title",children:" "}),t==="status"&&xt.jsx("div",{className:"dropdown-area",children:xt.jsx("div",{className:"dropdown-menu",children:xt.jsxs("ul",{children:[xt.jsx("li",{children:xt.jsx(Cf,{to:"/energy-usage",onClick:i(),children:"  "})}),xt.jsx("li",{children:xt.jsx(Cf,{to:"/gas-emission",onClick:i(),children:"  "})})]})})})]}),xt.jsxs("li",{className:"dropdown nav-item",onClick:r=>n("stat",r),children:[xt.jsx("span",{className:"dropdown-title",children:" "}),t==="stat"&&xt.jsx("div",{className:"dropdown-area",children:xt.jsx("div",{className:"dropdown-menu",children:xt.jsxs("ul",{children:[xt.jsx("li",{children:xt.jsx(Cf,{to:"/usage-stats",onClick:i(),children:"  "})}),xt.jsx("li",{children:xt.jsx(Cf,{to:"/gas-stats",onClick:i(),children:"  "})})]})})})]})]})})]})}function WB(){return xt.jsx("footer",{className:"footer",children:xt.jsx("p",{children:" 2025   .   ."})})}function YB(t,e){const n=Z.useRef(e);Z.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const XB=1;function KB(t){return Object.freeze({__version:XB,map:t})}function QB(t,e){return Object.freeze({...t,...e})}const Q0=Z.createContext(null);function J0(){const t=Z.use(Q0);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function JB(t){function e(n,i){const{instance:r,context:l}=t(n).current;Z.useImperativeHandle(i,()=>r);const{children:f}=n;return f==null?null:yy.createElement(Q0,{value:l},f)}return Z.forwardRef(e)}function t5(t){function e(n,i){const{instance:r}=t(n).current;return Z.useImperativeHandle(i,()=>r),null}return Z.forwardRef(e)}function Xk(t,e){const n=Z.useRef(void 0);Z.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function TS(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var ry={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var e5=ry.exports,qT;function n5(){return qT||(qT=1,(function(t,e){(function(n,i){i(e)})(e5,(function(n){var i="1.9.4";function r(p){var w,D,$,nt;for(D=1,$=arguments.length;D<$;D++){nt=arguments[D];for(w in nt)p[w]=nt[w]}return p}var l=Object.create||(function(){function p(){}return function(w){return p.prototype=w,new p}})();function f(p,w){var D=Array.prototype.slice;if(p.bind)return p.bind.apply(p,D.call(arguments,1));var $=D.call(arguments,2);return function(){return p.apply(w,$.length?$.concat(D.call(arguments)):arguments)}}var a=0;function g(p){return"_leaflet_id"in p||(p._leaflet_id=++a),p._leaflet_id}function _(p,w,D){var $,nt,mt,Rt;return Rt=function(){$=!1,nt&&(mt.apply(D,nt),nt=!1)},mt=function(){$?nt=arguments:(p.apply(D,arguments),setTimeout(Rt,w),$=!0)},mt}function x(p,w,D){var $=w[1],nt=w[0],mt=$-nt;return p===$&&D?p:((p-nt)%mt+mt)%mt+nt}function M(){return!1}function O(p,w){if(w===!1)return p;var D=Math.pow(10,w===void 0?6:w);return Math.round(p*D)/D}function z(p){return p.trim?p.trim():p.replace(/^\s+|\s+$/g,"")}function F(p){return z(p).split(/\s+/)}function V(p,w){Object.prototype.hasOwnProperty.call(p,"options")||(p.options=p.options?l(p.options):{});for(var D in w)p.options[D]=w[D];return p.options}function H(p,w,D){var $=[];for(var nt in p)$.push(encodeURIComponent(D?nt.toUpperCase():nt)+"="+encodeURIComponent(p[nt]));return(!w||w.indexOf("?")===-1?"?":"&")+$.join("&")}var Q=/\{ *([\w_ -]+) *\}/g;function X(p,w){return p.replace(Q,function(D,$){var nt=w[$];if(nt===void 0)throw new Error("No value provided for variable "+D);return typeof nt=="function"&&(nt=nt(w)),nt})}var Y=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"};function W(p,w){for(var D=0;D<p.length;D++)if(p[D]===w)return D;return-1}var J="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ot(p){return window["webkit"+p]||window["moz"+p]||window["ms"+p]}var ht=0;function rt(p){var w=+new Date,D=Math.max(0,16-(w-ht));return ht=w+D,window.setTimeout(p,D)}var ut=window.requestAnimationFrame||ot("RequestAnimationFrame")||rt,_t=window.cancelAnimationFrame||ot("CancelAnimationFrame")||ot("CancelRequestAnimationFrame")||function(p){window.clearTimeout(p)};function bt(p,w,D){if(D&&ut===rt)p.call(w);else return ut.call(window,f(p,w))}function Pt(p){p&&_t.call(window,p)}var re={__proto__:null,extend:r,create:l,bind:f,get lastId(){return a},stamp:g,throttle:_,wrapNum:x,falseFn:M,formatNum:O,trim:z,splitWords:F,setOptions:V,getParamString:H,template:X,isArray:Y,indexOf:W,emptyImageUrl:J,requestFn:ut,cancelFn:_t,requestAnimFrame:bt,cancelAnimFrame:Pt};function ye(){}ye.extend=function(p){var w=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},D=w.__super__=this.prototype,$=l(D);$.constructor=w,w.prototype=$;for(var nt in this)Object.prototype.hasOwnProperty.call(this,nt)&&nt!=="prototype"&&nt!=="__super__"&&(w[nt]=this[nt]);return p.statics&&r(w,p.statics),p.includes&&(fe(p.includes),r.apply(null,[$].concat(p.includes))),r($,p),delete $.statics,delete $.includes,$.options&&($.options=D.options?l(D.options):{},r($.options,p.options)),$._initHooks=[],$.callInitHooks=function(){if(!this._initHooksCalled){D.callInitHooks&&D.callInitHooks.call(this),this._initHooksCalled=!0;for(var mt=0,Rt=$._initHooks.length;mt<Rt;mt++)$._initHooks[mt].call(this)}},w},ye.include=function(p){var w=this.prototype.options;return r(this.prototype,p),p.options&&(this.prototype.options=w,this.mergeOptions(p.options)),this},ye.mergeOptions=function(p){return r(this.prototype.options,p),this},ye.addInitHook=function(p){var w=Array.prototype.slice.call(arguments,1),D=typeof p=="function"?p:function(){this[p].apply(this,w)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(D),this};function fe(p){if(!(typeof L>"u"||!L||!L.Mixin)){p=Y(p)?p:[p];for(var w=0;w<p.length;w++)p[w]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var kt={on:function(p,w,D){if(typeof p=="object")for(var $ in p)this._on($,p[$],w);else{p=F(p);for(var nt=0,mt=p.length;nt<mt;nt++)this._on(p[nt],w,D)}return this},off:function(p,w,D){if(!arguments.length)delete this._events;else if(typeof p=="object")for(var $ in p)this._off($,p[$],w);else{p=F(p);for(var nt=arguments.length===1,mt=0,Rt=p.length;mt<Rt;mt++)nt?this._off(p[mt]):this._off(p[mt],w,D)}return this},_on:function(p,w,D,$){if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}if(this._listens(p,w,D)===!1){D===this&&(D=void 0);var nt={fn:w,ctx:D};$&&(nt.once=!0),this._events=this._events||{},this._events[p]=this._events[p]||[],this._events[p].push(nt)}},_off:function(p,w,D){var $,nt,mt;if(this._events&&($=this._events[p],!!$)){if(arguments.length===1){if(this._firingCount)for(nt=0,mt=$.length;nt<mt;nt++)$[nt].fn=M;delete this._events[p];return}if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}var Rt=this._listens(p,w,D);if(Rt!==!1){var ae=$[Rt];this._firingCount&&(ae.fn=M,this._events[p]=$=$.slice()),$.splice(Rt,1)}}},fire:function(p,w,D){if(!this.listens(p,D))return this;var $=r({},w,{type:p,target:this,sourceTarget:w&&w.sourceTarget||this});if(this._events){var nt=this._events[p];if(nt){this._firingCount=this._firingCount+1||1;for(var mt=0,Rt=nt.length;mt<Rt;mt++){var ae=nt[mt],pe=ae.fn;ae.once&&this.off(p,pe,ae.ctx),pe.call(ae.ctx||this,$)}this._firingCount--}}return D&&this._propagateEvent($),this},listens:function(p,w,D,$){typeof p!="string"&&console.warn('"string" type argument expected');var nt=w;typeof w!="function"&&($=!!w,nt=void 0,D=void 0);var mt=this._events&&this._events[p];if(mt&&mt.length&&this._listens(p,nt,D)!==!1)return!0;if($){for(var Rt in this._eventParents)if(this._eventParents[Rt].listens(p,w,D,$))return!0}return!1},_listens:function(p,w,D){if(!this._events)return!1;var $=this._events[p]||[];if(!w)return!!$.length;D===this&&(D=void 0);for(var nt=0,mt=$.length;nt<mt;nt++)if($[nt].fn===w&&$[nt].ctx===D)return nt;return!1},once:function(p,w,D){if(typeof p=="object")for(var $ in p)this._on($,p[$],w,!0);else{p=F(p);for(var nt=0,mt=p.length;nt<mt;nt++)this._on(p[nt],w,D,!0)}return this},addEventParent:function(p){return this._eventParents=this._eventParents||{},this._eventParents[g(p)]=p,this},removeEventParent:function(p){return this._eventParents&&delete this._eventParents[g(p)],this},_propagateEvent:function(p){for(var w in this._eventParents)this._eventParents[w].fire(p.type,r({layer:p.target,propagatedFrom:p.target},p),!0)}};kt.addEventListener=kt.on,kt.removeEventListener=kt.clearAllEventListeners=kt.off,kt.addOneTimeEventListener=kt.once,kt.fireEvent=kt.fire,kt.hasEventListeners=kt.listens;var Ot=ye.extend(kt);function St(p,w,D){this.x=D?Math.round(p):p,this.y=D?Math.round(w):w}var jt=Math.trunc||function(p){return p>0?Math.floor(p):Math.ceil(p)};St.prototype={clone:function(){return new St(this.x,this.y)},add:function(p){return this.clone()._add(Vt(p))},_add:function(p){return this.x+=p.x,this.y+=p.y,this},subtract:function(p){return this.clone()._subtract(Vt(p))},_subtract:function(p){return this.x-=p.x,this.y-=p.y,this},divideBy:function(p){return this.clone()._divideBy(p)},_divideBy:function(p){return this.x/=p,this.y/=p,this},multiplyBy:function(p){return this.clone()._multiplyBy(p)},_multiplyBy:function(p){return this.x*=p,this.y*=p,this},scaleBy:function(p){return new St(this.x*p.x,this.y*p.y)},unscaleBy:function(p){return new St(this.x/p.x,this.y/p.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=jt(this.x),this.y=jt(this.y),this},distanceTo:function(p){p=Vt(p);var w=p.x-this.x,D=p.y-this.y;return Math.sqrt(w*w+D*D)},equals:function(p){return p=Vt(p),p.x===this.x&&p.y===this.y},contains:function(p){return p=Vt(p),Math.abs(p.x)<=Math.abs(this.x)&&Math.abs(p.y)<=Math.abs(this.y)},toString:function(){return"Point("+O(this.x)+", "+O(this.y)+")"}};function Vt(p,w,D){return p instanceof St?p:Y(p)?new St(p[0],p[1]):p==null?p:typeof p=="object"&&"x"in p&&"y"in p?new St(p.x,p.y):new St(p,w,D)}function pt(p,w){if(p)for(var D=w?[p,w]:p,$=0,nt=D.length;$<nt;$++)this.extend(D[$])}pt.prototype={extend:function(p){var w,D;if(!p)return this;if(p instanceof St||typeof p[0]=="number"||"x"in p)w=D=Vt(p);else if(p=Tt(p),w=p.min,D=p.max,!w||!D)return this;return!this.min&&!this.max?(this.min=w.clone(),this.max=D.clone()):(this.min.x=Math.min(w.x,this.min.x),this.max.x=Math.max(D.x,this.max.x),this.min.y=Math.min(w.y,this.min.y),this.max.y=Math.max(D.y,this.max.y)),this},getCenter:function(p){return Vt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,p)},getBottomLeft:function(){return Vt(this.min.x,this.max.y)},getTopRight:function(){return Vt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(p){var w,D;return typeof p[0]=="number"||p instanceof St?p=Vt(p):p=Tt(p),p instanceof pt?(w=p.min,D=p.max):w=D=p,w.x>=this.min.x&&D.x<=this.max.x&&w.y>=this.min.y&&D.y<=this.max.y},intersects:function(p){p=Tt(p);var w=this.min,D=this.max,$=p.min,nt=p.max,mt=nt.x>=w.x&&$.x<=D.x,Rt=nt.y>=w.y&&$.y<=D.y;return mt&&Rt},overlaps:function(p){p=Tt(p);var w=this.min,D=this.max,$=p.min,nt=p.max,mt=nt.x>w.x&&$.x<D.x,Rt=nt.y>w.y&&$.y<D.y;return mt&&Rt},isValid:function(){return!!(this.min&&this.max)},pad:function(p){var w=this.min,D=this.max,$=Math.abs(w.x-D.x)*p,nt=Math.abs(w.y-D.y)*p;return Tt(Vt(w.x-$,w.y-nt),Vt(D.x+$,D.y+nt))},equals:function(p){return p?(p=Tt(p),this.min.equals(p.getTopLeft())&&this.max.equals(p.getBottomRight())):!1}};function Tt(p,w){return!p||p instanceof pt?p:new pt(p,w)}function $t(p,w){if(p)for(var D=w?[p,w]:p,$=0,nt=D.length;$<nt;$++)this.extend(D[$])}$t.prototype={extend:function(p){var w=this._southWest,D=this._northEast,$,nt;if(p instanceof se)$=p,nt=p;else if(p instanceof $t){if($=p._southWest,nt=p._northEast,!$||!nt)return this}else return p?this.extend(le(p)||Yt(p)):this;return!w&&!D?(this._southWest=new se($.lat,$.lng),this._northEast=new se(nt.lat,nt.lng)):(w.lat=Math.min($.lat,w.lat),w.lng=Math.min($.lng,w.lng),D.lat=Math.max(nt.lat,D.lat),D.lng=Math.max(nt.lng,D.lng)),this},pad:function(p){var w=this._southWest,D=this._northEast,$=Math.abs(w.lat-D.lat)*p,nt=Math.abs(w.lng-D.lng)*p;return new $t(new se(w.lat-$,w.lng-nt),new se(D.lat+$,D.lng+nt))},getCenter:function(){return new se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new se(this.getNorth(),this.getWest())},getSouthEast:function(){return new se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(p){typeof p[0]=="number"||p instanceof se||"lat"in p?p=le(p):p=Yt(p);var w=this._southWest,D=this._northEast,$,nt;return p instanceof $t?($=p.getSouthWest(),nt=p.getNorthEast()):$=nt=p,$.lat>=w.lat&&nt.lat<=D.lat&&$.lng>=w.lng&&nt.lng<=D.lng},intersects:function(p){p=Yt(p);var w=this._southWest,D=this._northEast,$=p.getSouthWest(),nt=p.getNorthEast(),mt=nt.lat>=w.lat&&$.lat<=D.lat,Rt=nt.lng>=w.lng&&$.lng<=D.lng;return mt&&Rt},overlaps:function(p){p=Yt(p);var w=this._southWest,D=this._northEast,$=p.getSouthWest(),nt=p.getNorthEast(),mt=nt.lat>w.lat&&$.lat<D.lat,Rt=nt.lng>w.lng&&$.lng<D.lng;return mt&&Rt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(p,w){return p?(p=Yt(p),this._southWest.equals(p.getSouthWest(),w)&&this._northEast.equals(p.getNorthEast(),w)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Yt(p,w){return p instanceof $t?p:new $t(p,w)}function se(p,w,D){if(isNaN(p)||isNaN(w))throw new Error("Invalid LatLng object: ("+p+", "+w+")");this.lat=+p,this.lng=+w,D!==void 0&&(this.alt=+D)}se.prototype={equals:function(p,w){if(!p)return!1;p=le(p);var D=Math.max(Math.abs(this.lat-p.lat),Math.abs(this.lng-p.lng));return D<=(w===void 0?1e-9:w)},toString:function(p){return"LatLng("+O(this.lat,p)+", "+O(this.lng,p)+")"},distanceTo:function(p){return Ie.distance(this,le(p))},wrap:function(){return Ie.wrapLatLng(this)},toBounds:function(p){var w=180*p/40075017,D=w/Math.cos(Math.PI/180*this.lat);return Yt([this.lat-w,this.lng-D],[this.lat+w,this.lng+D])},clone:function(){return new se(this.lat,this.lng,this.alt)}};function le(p,w,D){return p instanceof se?p:Y(p)&&typeof p[0]!="object"?p.length===3?new se(p[0],p[1],p[2]):p.length===2?new se(p[0],p[1]):null:p==null?p:typeof p=="object"&&"lat"in p?new se(p.lat,"lng"in p?p.lng:p.lon,p.alt):w===void 0?null:new se(p,w,D)}var Ae={latLngToPoint:function(p,w){var D=this.projection.project(p),$=this.scale(w);return this.transformation._transform(D,$)},pointToLatLng:function(p,w){var D=this.scale(w),$=this.transformation.untransform(p,D);return this.projection.unproject($)},project:function(p){return this.projection.project(p)},unproject:function(p){return this.projection.unproject(p)},scale:function(p){return 256*Math.pow(2,p)},zoom:function(p){return Math.log(p/256)/Math.LN2},getProjectedBounds:function(p){if(this.infinite)return null;var w=this.projection.bounds,D=this.scale(p),$=this.transformation.transform(w.min,D),nt=this.transformation.transform(w.max,D);return new pt($,nt)},infinite:!1,wrapLatLng:function(p){var w=this.wrapLng?x(p.lng,this.wrapLng,!0):p.lng,D=this.wrapLat?x(p.lat,this.wrapLat,!0):p.lat,$=p.alt;return new se(D,w,$)},wrapLatLngBounds:function(p){var w=p.getCenter(),D=this.wrapLatLng(w),$=w.lat-D.lat,nt=w.lng-D.lng;if($===0&&nt===0)return p;var mt=p.getSouthWest(),Rt=p.getNorthEast(),ae=new se(mt.lat-$,mt.lng-nt),pe=new se(Rt.lat-$,Rt.lng-nt);return new $t(ae,pe)}},Ie=r({},Ae,{wrapLng:[-180,180],R:6371e3,distance:function(p,w){var D=Math.PI/180,$=p.lat*D,nt=w.lat*D,mt=Math.sin((w.lat-p.lat)*D/2),Rt=Math.sin((w.lng-p.lng)*D/2),ae=mt*mt+Math.cos($)*Math.cos(nt)*Rt*Rt,pe=2*Math.atan2(Math.sqrt(ae),Math.sqrt(1-ae));return this.R*pe}}),Wt=6378137,Pe={R:Wt,MAX_LATITUDE:85.0511287798,project:function(p){var w=Math.PI/180,D=this.MAX_LATITUDE,$=Math.max(Math.min(D,p.lat),-D),nt=Math.sin($*w);return new St(this.R*p.lng*w,this.R*Math.log((1+nt)/(1-nt))/2)},unproject:function(p){var w=180/Math.PI;return new se((2*Math.atan(Math.exp(p.y/this.R))-Math.PI/2)*w,p.x*w/this.R)},bounds:(function(){var p=Wt*Math.PI;return new pt([-p,-p],[p,p])})()};function we(p,w,D,$){if(Y(p)){this._a=p[0],this._b=p[1],this._c=p[2],this._d=p[3];return}this._a=p,this._b=w,this._c=D,this._d=$}we.prototype={transform:function(p,w){return this._transform(p.clone(),w)},_transform:function(p,w){return w=w||1,p.x=w*(this._a*p.x+this._b),p.y=w*(this._c*p.y+this._d),p},untransform:function(p,w){return w=w||1,new St((p.x/w-this._b)/this._a,(p.y/w-this._d)/this._c)}};function ce(p,w,D,$){return new we(p,w,D,$)}var rn=r({},Ie,{code:"EPSG:3857",projection:Pe,transformation:(function(){var p=.5/(Math.PI*Pe.R);return ce(p,.5,-p,.5)})()}),je=r({},rn,{code:"EPSG:900913"});function nn(p){return document.createElementNS("http://www.w3.org/2000/svg",p)}function tn(p,w){var D="",$,nt,mt,Rt,ae,pe;for($=0,mt=p.length;$<mt;$++){for(ae=p[$],nt=0,Rt=ae.length;nt<Rt;nt++)pe=ae[nt],D+=(nt?"L":"M")+pe.x+" "+pe.y;D+=w?ie.svg?"z":"x":""}return D||"M0 0"}var Tn=document.documentElement.style,an="ActiveXObject"in window,In=an&&!document.addEventListener,_e="msLaunchUri"in navigator&&!("documentMode"in document),Di=xe("webkit"),Ri=xe("android"),Yn=xe("android 2")||xe("android 3"),cn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Wi=Ri&&xe("Google")&&cn<537&&!("AudioNode"in window),si=!!window.opera,Bi=!_e&&xe("chrome"),Ur=xe("gecko")&&!Di&&!si&&!an,Xs=!Bi&&xe("safari"),Xa=xe("phantom"),va="OTransition"in Tn,Be=navigator.platform.indexOf("Win")===0,dr=an&&"transition"in Tn,Un="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Yn,xa="MozPerspective"in Tn,pr=!window.L_DISABLE_3D&&(dr||Un||xa)&&!va&&!Xa,Ue=typeof orientation<"u"||xe("mobile"),Dn=Ue&&Di,wn=Ue&&Un,Er=!window.PointerEvent&&window.MSPointerEvent,La=!!(window.PointerEvent||Er),bn="ontouchstart"in window||!!window.TouchEvent,ba=!window.L_NO_TOUCH&&(bn||La),Dt=Ue&&si,lt=Ue&&Ur,ft=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,wt=(function(){var p=!1;try{var w=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("testPassiveEventSupport",M,w),window.removeEventListener("testPassiveEventSupport",M,w)}catch{}return p})(),Lt=(function(){return!!document.createElement("canvas").getContext})(),It=!!(document.createElementNS&&nn("svg").createSVGRect),te=!!It&&(function(){var p=document.createElement("div");return p.innerHTML="<svg/>",(p.firstChild&&p.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Zt=!It&&(function(){try{var p=document.createElement("div");p.innerHTML='<v:shape adj="1"/>';var w=p.firstChild;return w.style.behavior="url(#default#VML)",w&&typeof w.adj=="object"}catch{return!1}})(),Ft=navigator.platform.indexOf("Mac")===0,Xt=navigator.platform.indexOf("Linux")===0;function xe(p){return navigator.userAgent.toLowerCase().indexOf(p)>=0}var ie={ie:an,ielt9:In,edge:_e,webkit:Di,android:Ri,android23:Yn,androidStock:Wi,opera:si,chrome:Bi,gecko:Ur,safari:Xs,phantom:Xa,opera12:va,win:Be,ie3d:dr,webkit3d:Un,gecko3d:xa,any3d:pr,mobile:Ue,mobileWebkit:Dn,mobileWebkit3d:wn,msPointer:Er,pointer:La,touch:ba,touchNative:bn,mobileOpera:Dt,mobileGecko:lt,retina:ft,passiveEvents:wt,canvas:Lt,svg:It,vml:Zt,inlineSvg:te,mac:Ft,linux:Xt},Ee=ie.msPointer?"MSPointerDown":"pointerdown",hn=ie.msPointer?"MSPointerMove":"pointermove",dn=ie.msPointer?"MSPointerUp":"pointerup",He=ie.msPointer?"MSPointerCancel":"pointercancel",Je={touchstart:Ee,touchmove:hn,touchend:dn,touchcancel:He},_n={touchstart:Tl,touchmove:Cr,touchend:Cr,touchcancel:Cr},Vn={},gi=!1;function Kn(p,w,D){return w==="touchstart"&&rr(),_n[w]?(D=_n[w].bind(this,D),p.addEventListener(Je[w],D,!1),D):(console.warn("wrong event specified:",w),M)}function Hn(p,w,D){if(!Je[w]){console.warn("wrong event specified:",w);return}p.removeEventListener(Je[w],D,!1)}function wr(p){Vn[p.pointerId]=p}function Mi(p){Vn[p.pointerId]&&(Vn[p.pointerId]=p)}function Ni(p){delete Vn[p.pointerId]}function rr(){gi||(document.addEventListener(Ee,wr,!0),document.addEventListener(hn,Mi,!0),document.addEventListener(dn,Ni,!0),document.addEventListener(He,Ni,!0),gi=!0)}function Cr(p,w){if(w.pointerType!==(w.MSPOINTER_TYPE_MOUSE||"mouse")){w.touches=[];for(var D in Vn)w.touches.push(Vn[D]);w.changedTouches=[w],p(w)}}function Tl(p,w){w.MSPOINTER_TYPE_TOUCH&&w.pointerType===w.MSPOINTER_TYPE_TOUCH&&Hi(w),Cr(p,w)}function Ji(p){var w={},D,$;for($ in p)D=p[$],w[$]=D&&D.bind?D.bind(p):D;return p=w,w.type="dblclick",w.detail=2,w.isTrusted=!1,w._simulated=!0,w}var Al=200;function Qh(p,w){p.addEventListener("dblclick",w);var D=0,$;function nt(mt){if(mt.detail!==1){$=mt.detail;return}if(!(mt.pointerType==="mouse"||mt.sourceCapabilities&&!mt.sourceCapabilities.firesTouchEvents)){var Rt=Bn(mt);if(!(Rt.some(function(pe){return pe instanceof HTMLLabelElement&&pe.attributes.for})&&!Rt.some(function(pe){return pe instanceof HTMLInputElement||pe instanceof HTMLSelectElement}))){var ae=Date.now();ae-D<=Al?($++,$===2&&w(Ji(mt))):$=1,D=ae}}}return p.addEventListener("click",nt),{dblclick:w,simDblclick:nt}}function Qn(p,w){p.removeEventListener("dblclick",w.dblclick),p.removeEventListener("click",w.simDblclick)}var Ks=eu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),nl=eu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Vr=nl==="webkitTransition"||nl==="OTransition"?nl+"End":"transitionend";function wa(p){return typeof p=="string"?document.getElementById(p):p}function zu(p,w){var D=p.style[w]||p.currentStyle&&p.currentStyle[w];if((!D||D==="auto")&&document.defaultView){var $=document.defaultView.getComputedStyle(p,null);D=$?$[w]:null}return D==="auto"?null:D}function kn(p,w,D){var $=document.createElement(p);return $.className=w||"",D&&D.appendChild($),$}function Rn(p){var w=p.parentNode;w&&w.removeChild(p)}function Sa(p){for(;p.firstChild;)p.removeChild(p.firstChild)}function ar(p){var w=p.parentNode;w&&w.lastChild!==p&&w.appendChild(p)}function yi(p){var w=p.parentNode;w&&w.firstChild!==p&&w.insertBefore(p,w.firstChild)}function ni(p,w){if(p.classList!==void 0)return p.classList.contains(w);var D=Ta(p);return D.length>0&&new RegExp("(^|\\s)"+w+"(\\s|$)").test(D)}function An(p,w){if(p.classList!==void 0)for(var D=F(w),$=0,nt=D.length;$<nt;$++)p.classList.add(D[$]);else if(!ni(p,w)){var mt=Ta(p);ko(p,(mt?mt+" ":"")+w)}}function zn(p,w){p.classList!==void 0?p.classList.remove(w):ko(p,z((" "+Ta(p)+" ").replace(" "+w+" "," ")))}function ko(p,w){p.className.baseVal===void 0?p.className=w:p.className.baseVal=w}function Ta(p){return p.correspondingElement&&(p=p.correspondingElement),p.className.baseVal===void 0?p.className:p.className.baseVal}function qi(p,w){"opacity"in p.style?p.style.opacity=w:"filter"in p.style&&Qs(p,w)}function Qs(p,w){var D=!1,$="DXImageTransform.Microsoft.Alpha";try{D=p.filters.item($)}catch{if(w===1)return}w=Math.round(w*100),D?(D.Enabled=w!==100,D.Opacity=w):p.style.filter+=" progid:"+$+"(opacity="+w+")"}function eu(p){for(var w=document.documentElement.style,D=0;D<p.length;D++)if(p[D]in w)return p[D];return!1}function Cs(p,w,D){var $=w||new St(0,0);p.style[Ks]=(ie.ie3d?"translate("+$.x+"px,"+$.y+"px)":"translate3d("+$.x+"px,"+$.y+"px,0)")+(D?" scale("+D+")":"")}function Ci(p,w){p._leaflet_pos=w,ie.any3d?Cs(p,w):(p.style.left=w.x+"px",p.style.top=w.y+"px")}function Ps(p){return p._leaflet_pos||new St(0,0)}var Ka,ms,Ml;if("onselectstart"in document)Ka=function(){Mn(window,"selectstart",Hi)},ms=function(){_i(window,"selectstart",Hi)};else{var El=eu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ka=function(){if(El){var p=document.documentElement.style;Ml=p[El],p[El]="none"}},ms=function(){El&&(document.documentElement.style[El]=Ml,Ml=void 0)}}function gc(){Mn(window,"dragstart",Hi)}function Cl(){_i(window,"dragstart",Hi)}var nu,yc;function iu(p){for(;p.tabIndex===-1;)p=p.parentNode;p.style&&(Qa(),nu=p,yc=p.style.outlineStyle,p.style.outlineStyle="none",Mn(window,"keydown",Qa))}function Qa(){nu&&(nu.style.outlineStyle=yc,nu=void 0,yc=void 0,_i(window,"keydown",Qa))}function Lu(p){do p=p.parentNode;while((!p.offsetWidth||!p.offsetHeight)&&p!==document.body);return p}function il(p){var w=p.getBoundingClientRect();return{x:w.width/p.offsetWidth||1,y:w.height/p.offsetHeight||1,boundingClientRect:w}}var Pl={__proto__:null,TRANSFORM:Ks,TRANSITION:nl,TRANSITION_END:Vr,get:wa,getStyle:zu,create:kn,remove:Rn,empty:Sa,toFront:ar,toBack:yi,hasClass:ni,addClass:An,removeClass:zn,setClass:ko,getClass:Ta,setOpacity:qi,testProp:eu,setTransform:Cs,setPosition:Ci,getPosition:Ps,get disableTextSelection(){return Ka},get enableTextSelection(){return ms},disableImageDrag:gc,enableImageDrag:Cl,preventOutline:iu,restoreOutline:Qa,getSizedParentNode:Lu,getScale:il};function Mn(p,w,D,$){if(w&&typeof w=="object")for(var nt in w)sr(p,nt,w[nt],D);else{w=F(w);for(var mt=0,Rt=w.length;mt<Rt;mt++)sr(p,w[mt],D,$)}return this}var Ja="_leaflet_events";function _i(p,w,D,$){if(arguments.length===1)Oo(p),delete p[Ja];else if(w&&typeof w=="object")for(var nt in w)rl(p,nt,w[nt],D);else if(w=F(w),arguments.length===2)Oo(p,function(ae){return W(w,ae)!==-1});else for(var mt=0,Rt=w.length;mt<Rt;mt++)rl(p,w[mt],D,$);return this}function Oo(p,w){for(var D in p[Ja]){var $=D.split(/\d/)[0];(!w||w($))&&rl(p,$,null,null,D)}}var Js={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function sr(p,w,D,$){var nt=w+g(D)+($?"_"+g($):"");if(p[Ja]&&p[Ja][nt])return this;var mt=function(ae){return D.call($||p,ae||window.event)},Rt=mt;!ie.touchNative&&ie.pointer&&w.indexOf("touch")===0?mt=Kn(p,w,mt):ie.touch&&w==="dblclick"?mt=Qh(p,mt):"addEventListener"in p?w==="touchstart"||w==="touchmove"||w==="wheel"||w==="mousewheel"?p.addEventListener(Js[w]||w,mt,ie.passiveEvents?{passive:!1}:!1):w==="mouseenter"||w==="mouseleave"?(mt=function(ae){ae=ae||window.event,ks(p,ae)&&Rt(ae)},p.addEventListener(Js[w],mt,!1)):p.addEventListener(w,Rt,!1):p.attachEvent("on"+w,mt),p[Ja]=p[Ja]||{},p[Ja][nt]=mt}function rl(p,w,D,$,nt){nt=nt||w+g(D)+($?"_"+g($):"");var mt=p[Ja]&&p[Ja][nt];if(!mt)return this;!ie.touchNative&&ie.pointer&&w.indexOf("touch")===0?Hn(p,w,mt):ie.touch&&w==="dblclick"?Qn(p,mt):"removeEventListener"in p?p.removeEventListener(Js[w]||w,mt,!1):p.detachEvent("on"+w,mt),p[Ja][nt]=null}function Ia(p){return p.stopPropagation?p.stopPropagation():p.originalEvent?p.originalEvent._stopped=!0:p.cancelBubble=!0,this}function Ra(p){return sr(p,"wheel",Ia),this}function to(p){return Mn(p,"mousedown touchstart dblclick contextmenu",Ia),p._leaflet_disable_click=!0,this}function Hi(p){return p.preventDefault?p.preventDefault():p.returnValue=!1,this}function Aa(p){return Hi(p),Ia(p),this}function Bn(p){if(p.composedPath)return p.composedPath();for(var w=[],D=p.target;D;)w.push(D),D=D.parentNode;return w}function al(p,w){if(!w)return new St(p.clientX,p.clientY);var D=il(w),$=D.boundingClientRect;return new St((p.clientX-$.left)/D.x-w.clientLeft,(p.clientY-$.top)/D.y-w.clientTop)}var Ba=ie.linux&&ie.chrome?window.devicePixelRatio:ie.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function zi(p){return ie.edge?p.wheelDeltaY/2:p.deltaY&&p.deltaMode===0?-p.deltaY/Ba:p.deltaY&&p.deltaMode===1?-p.deltaY*20:p.deltaY&&p.deltaMode===2?-p.deltaY*60:p.deltaX||p.deltaZ?0:p.wheelDelta?(p.wheelDeltaY||p.wheelDelta)/2:p.detail&&Math.abs(p.detail)<32765?-p.detail*20:p.detail?p.detail/-32765*60:0}function ks(p,w){var D=w.relatedTarget;if(!D)return!0;try{for(;D&&D!==p;)D=D.parentNode}catch{return!1}return D!==p}var kl={__proto__:null,on:Mn,off:_i,stopPropagation:Ia,disableScrollPropagation:Ra,disableClickPropagation:to,preventDefault:Hi,stop:Aa,getPropagationPath:Bn,getMousePosition:al,getWheelDelta:zi,isExternalTarget:ks,addListener:Mn,removeListener:_i},Do=Ot.extend({run:function(p,w,D,$){this.stop(),this._el=p,this._inProgress=!0,this._duration=D||.25,this._easeOutPower=1/Math.max($||.5,.2),this._startPos=Ps(p),this._offset=w.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=bt(this._animate,this),this._step()},_step:function(p){var w=+new Date-this._startTime,D=this._duration*1e3;w<D?this._runFrame(this._easeOut(w/D),p):(this._runFrame(1),this._complete())},_runFrame:function(p,w){var D=this._startPos.add(this._offset.multiplyBy(p));w&&D._round(),Ci(this._el,D),this.fire("step")},_complete:function(){Pt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(p){return 1-Math.pow(1-p,this._easeOutPower)}}),Jn=Ot.extend({options:{crs:rn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(p,w){w=V(this,w),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(p),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),w.maxBounds&&this.setMaxBounds(w.maxBounds),w.zoom!==void 0&&(this._zoom=this._limitZoom(w.zoom)),w.center&&w.zoom!==void 0&&this.setView(le(w.center),w.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=nl&&ie.any3d&&!ie.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Mn(this._proxy,Vr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(p,w,D){if(w=w===void 0?this._zoom:this._limitZoom(w),p=this._limitCenter(le(p),w,this.options.maxBounds),D=D||{},this._stop(),this._loaded&&!D.reset&&D!==!0){D.animate!==void 0&&(D.zoom=r({animate:D.animate},D.zoom),D.pan=r({animate:D.animate,duration:D.duration},D.pan));var $=this._zoom!==w?this._tryAnimatedZoom&&this._tryAnimatedZoom(p,w,D.zoom):this._tryAnimatedPan(p,D.pan);if($)return clearTimeout(this._sizeTimer),this}return this._resetView(p,w,D.pan&&D.pan.noMoveStart),this},setZoom:function(p,w){return this._loaded?this.setView(this.getCenter(),p,{zoom:w}):(this._zoom=p,this)},zoomIn:function(p,w){return p=p||(ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+p,w)},zoomOut:function(p,w){return p=p||(ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-p,w)},setZoomAround:function(p,w,D){var $=this.getZoomScale(w),nt=this.getSize().divideBy(2),mt=p instanceof St?p:this.latLngToContainerPoint(p),Rt=mt.subtract(nt).multiplyBy(1-1/$),ae=this.containerPointToLatLng(nt.add(Rt));return this.setView(ae,w,{zoom:D})},_getBoundsCenterZoom:function(p,w){w=w||{},p=p.getBounds?p.getBounds():Yt(p);var D=Vt(w.paddingTopLeft||w.padding||[0,0]),$=Vt(w.paddingBottomRight||w.padding||[0,0]),nt=this.getBoundsZoom(p,!1,D.add($));if(nt=typeof w.maxZoom=="number"?Math.min(w.maxZoom,nt):nt,nt===1/0)return{center:p.getCenter(),zoom:nt};var mt=$.subtract(D).divideBy(2),Rt=this.project(p.getSouthWest(),nt),ae=this.project(p.getNorthEast(),nt),pe=this.unproject(Rt.add(ae).divideBy(2).add(mt),nt);return{center:pe,zoom:nt}},fitBounds:function(p,w){if(p=Yt(p),!p.isValid())throw new Error("Bounds are not valid.");var D=this._getBoundsCenterZoom(p,w);return this.setView(D.center,D.zoom,w)},fitWorld:function(p){return this.fitBounds([[-90,-180],[90,180]],p)},panTo:function(p,w){return this.setView(p,this._zoom,{pan:w})},panBy:function(p,w){if(p=Vt(p).round(),w=w||{},!p.x&&!p.y)return this.fire("moveend");if(w.animate!==!0&&!this.getSize().contains(p))return this._resetView(this.unproject(this.project(this.getCenter()).add(p)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Do,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),w.noMoveStart||this.fire("movestart"),w.animate!==!1){An(this._mapPane,"leaflet-pan-anim");var D=this._getMapPanePos().subtract(p).round();this._panAnim.run(this._mapPane,D,w.duration||.25,w.easeLinearity)}else this._rawPanBy(p),this.fire("move").fire("moveend");return this},flyTo:function(p,w,D){if(D=D||{},D.animate===!1||!ie.any3d)return this.setView(p,w,D);this._stop();var $=this.project(this.getCenter()),nt=this.project(p),mt=this.getSize(),Rt=this._zoom;p=le(p),w=w===void 0?Rt:w;var ae=Math.max(mt.x,mt.y),pe=ae*this.getZoomScale(Rt,w),Oe=nt.distanceTo($)||1,Ke=1.42,yn=Ke*Ke;function $n(Ii){var hi=Ii?-1:1,bi=Ii?pe:ae,fl=pe*pe-ae*ae+hi*yn*yn*Oe*Oe,$o=2*bi*yn*Oe,qo=fl/$o,ja=Math.sqrt(qo*qo+1)-qo,Rs=ja<1e-9?-18:Math.log(ja);return Rs}function ci(Ii){return(Math.exp(Ii)-Math.exp(-Ii))/2}function tr(Ii){return(Math.exp(Ii)+Math.exp(-Ii))/2}function Qe(Ii){return ci(Ii)/tr(Ii)}var Ge=$n(0);function ri(Ii){return ae*(tr(Ge)/tr(Ge+Ke*Ii))}function Xn(Ii){return ae*(tr(Ge)*Qe(Ge+Ke*Ii)-ci(Ge))/yn}function ho(Ii){return 1-Math.pow(1-Ii,1.5)}var oi=Date.now(),hu=($n(1)-Ge)/Ke,Or=D.duration?1e3*D.duration:1e3*hu*.8;function Tc(){var Ii=(Date.now()-oi)/Or,hi=ho(Ii)*hu;Ii<=1?(this._flyToFrame=bt(Tc,this),this._move(this.unproject($.add(nt.subtract($).multiplyBy(Xn(hi)/Oe)),Rt),this.getScaleZoom(ae/ri(hi),Rt),{flyTo:!0})):this._move(p,w)._moveEnd(!0)}return this._moveStart(!0,D.noMoveStart),Tc.call(this),this},flyToBounds:function(p,w){var D=this._getBoundsCenterZoom(p,w);return this.flyTo(D.center,D.zoom,w)},setMaxBounds:function(p){return p=Yt(p),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),p.isValid()?(this.options.maxBounds=p,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(p){var w=this.options.minZoom;return this.options.minZoom=p,this._loaded&&w!==p&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(p):this},setMaxZoom:function(p){var w=this.options.maxZoom;return this.options.maxZoom=p,this._loaded&&w!==p&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(p):this},panInsideBounds:function(p,w){this._enforcingBounds=!0;var D=this.getCenter(),$=this._limitCenter(D,this._zoom,Yt(p));return D.equals($)||this.panTo($,w),this._enforcingBounds=!1,this},panInside:function(p,w){w=w||{};var D=Vt(w.paddingTopLeft||w.padding||[0,0]),$=Vt(w.paddingBottomRight||w.padding||[0,0]),nt=this.project(this.getCenter()),mt=this.project(p),Rt=this.getPixelBounds(),ae=Tt([Rt.min.add(D),Rt.max.subtract($)]),pe=ae.getSize();if(!ae.contains(mt)){this._enforcingBounds=!0;var Oe=mt.subtract(ae.getCenter()),Ke=ae.extend(mt).getSize().subtract(pe);nt.x+=Oe.x<0?-Ke.x:Ke.x,nt.y+=Oe.y<0?-Ke.y:Ke.y,this.panTo(this.unproject(nt),w),this._enforcingBounds=!1}return this},invalidateSize:function(p){if(!this._loaded)return this;p=r({animate:!1,pan:!0},p===!0?{animate:!0}:p);var w=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var D=this.getSize(),$=w.divideBy(2).round(),nt=D.divideBy(2).round(),mt=$.subtract(nt);return!mt.x&&!mt.y?this:(p.animate&&p.pan?this.panBy(mt):(p.pan&&this._rawPanBy(mt),this.fire("move"),p.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:w,newSize:D}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(p){if(p=this._locateOptions=r({timeout:1e4,watch:!1},p),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var w=f(this._handleGeolocationResponse,this),D=f(this._handleGeolocationError,this);return p.watch?this._locationWatchId=navigator.geolocation.watchPosition(w,D,p):navigator.geolocation.getCurrentPosition(w,D,p),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(p){if(this._container._leaflet_id){var w=p.code,D=p.message||(w===1?"permission denied":w===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:w,message:"Geolocation error: "+D+"."})}},_handleGeolocationResponse:function(p){if(this._container._leaflet_id){var w=p.coords.latitude,D=p.coords.longitude,$=new se(w,D),nt=$.toBounds(p.coords.accuracy*2),mt=this._locateOptions;if(mt.setView){var Rt=this.getBoundsZoom(nt);this.setView($,mt.maxZoom?Math.min(Rt,mt.maxZoom):Rt)}var ae={latlng:$,bounds:nt,timestamp:p.timestamp};for(var pe in p.coords)typeof p.coords[pe]=="number"&&(ae[pe]=p.coords[pe]);this.fire("locationfound",ae)}},addHandler:function(p,w){if(!w)return this;var D=this[p]=new w(this);return this._handlers.push(D),this.options[p]&&D.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Rn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Pt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var p;for(p in this._layers)this._layers[p].remove();for(p in this._panes)Rn(this._panes[p]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(p,w){var D="leaflet-pane"+(p?" leaflet-"+p.replace("Pane","")+"-pane":""),$=kn("div",D,w||this._mapPane);return p&&(this._panes[p]=$),$},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var p=this.getPixelBounds(),w=this.unproject(p.getBottomLeft()),D=this.unproject(p.getTopRight());return new $t(w,D)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(p,w,D){p=Yt(p),D=Vt(D||[0,0]);var $=this.getZoom()||0,nt=this.getMinZoom(),mt=this.getMaxZoom(),Rt=p.getNorthWest(),ae=p.getSouthEast(),pe=this.getSize().subtract(D),Oe=Tt(this.project(ae,$),this.project(Rt,$)).getSize(),Ke=ie.any3d?this.options.zoomSnap:1,yn=pe.x/Oe.x,$n=pe.y/Oe.y,ci=w?Math.max(yn,$n):Math.min(yn,$n);return $=this.getScaleZoom(ci,$),Ke&&($=Math.round($/(Ke/100))*(Ke/100),$=w?Math.ceil($/Ke)*Ke:Math.floor($/Ke)*Ke),Math.max(nt,Math.min(mt,$))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new St(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(p,w){var D=this._getTopLeftPoint(p,w);return new pt(D,D.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(p){return this.options.crs.getProjectedBounds(p===void 0?this.getZoom():p)},getPane:function(p){return typeof p=="string"?this._panes[p]:p},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(p,w){var D=this.options.crs;return w=w===void 0?this._zoom:w,D.scale(p)/D.scale(w)},getScaleZoom:function(p,w){var D=this.options.crs;w=w===void 0?this._zoom:w;var $=D.zoom(p*D.scale(w));return isNaN($)?1/0:$},project:function(p,w){return w=w===void 0?this._zoom:w,this.options.crs.latLngToPoint(le(p),w)},unproject:function(p,w){return w=w===void 0?this._zoom:w,this.options.crs.pointToLatLng(Vt(p),w)},layerPointToLatLng:function(p){var w=Vt(p).add(this.getPixelOrigin());return this.unproject(w)},latLngToLayerPoint:function(p){var w=this.project(le(p))._round();return w._subtract(this.getPixelOrigin())},wrapLatLng:function(p){return this.options.crs.wrapLatLng(le(p))},wrapLatLngBounds:function(p){return this.options.crs.wrapLatLngBounds(Yt(p))},distance:function(p,w){return this.options.crs.distance(le(p),le(w))},containerPointToLayerPoint:function(p){return Vt(p).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(p){return Vt(p).add(this._getMapPanePos())},containerPointToLatLng:function(p){var w=this.containerPointToLayerPoint(Vt(p));return this.layerPointToLatLng(w)},latLngToContainerPoint:function(p){return this.layerPointToContainerPoint(this.latLngToLayerPoint(le(p)))},mouseEventToContainerPoint:function(p){return al(p,this._container)},mouseEventToLayerPoint:function(p){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(p))},mouseEventToLatLng:function(p){return this.layerPointToLatLng(this.mouseEventToLayerPoint(p))},_initContainer:function(p){var w=this._container=wa(p);if(w){if(w._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Mn(w,"scroll",this._onScroll,this),this._containerId=g(w)},_initLayout:function(){var p=this._container;this._fadeAnimated=this.options.fadeAnimation&&ie.any3d,An(p,"leaflet-container"+(ie.touch?" leaflet-touch":"")+(ie.retina?" leaflet-retina":"")+(ie.ielt9?" leaflet-oldie":"")+(ie.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var w=zu(p,"position");w!=="absolute"&&w!=="relative"&&w!=="fixed"&&w!=="sticky"&&(p.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var p=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ci(this._mapPane,new St(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(An(p.markerPane,"leaflet-zoom-hide"),An(p.shadowPane,"leaflet-zoom-hide"))},_resetView:function(p,w,D){Ci(this._mapPane,new St(0,0));var $=!this._loaded;this._loaded=!0,w=this._limitZoom(w),this.fire("viewprereset");var nt=this._zoom!==w;this._moveStart(nt,D)._move(p,w)._moveEnd(nt),this.fire("viewreset"),$&&this.fire("load")},_moveStart:function(p,w){return p&&this.fire("zoomstart"),w||this.fire("movestart"),this},_move:function(p,w,D,$){w===void 0&&(w=this._zoom);var nt=this._zoom!==w;return this._zoom=w,this._lastCenter=p,this._pixelOrigin=this._getNewPixelOrigin(p),$?D&&D.pinch&&this.fire("zoom",D):((nt||D&&D.pinch)&&this.fire("zoom",D),this.fire("move",D)),this},_moveEnd:function(p){return p&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Pt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(p){Ci(this._mapPane,this._getMapPanePos().subtract(p))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(p){this._targets={},this._targets[g(this._container)]=this;var w=p?_i:Mn;w(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&w(window,"resize",this._onResize,this),ie.any3d&&this.options.transform3DLimit&&(p?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Pt(this._resizeRequest),this._resizeRequest=bt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var p=this._getMapPanePos();Math.max(Math.abs(p.x),Math.abs(p.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(p,w){for(var D=[],$,nt=w==="mouseout"||w==="mouseover",mt=p.target||p.srcElement,Rt=!1;mt;){if($=this._targets[g(mt)],$&&(w==="click"||w==="preclick")&&this._draggableMoved($)){Rt=!0;break}if($&&$.listens(w,!0)&&(nt&&!ks(mt,p)||(D.push($),nt))||mt===this._container)break;mt=mt.parentNode}return!D.length&&!Rt&&!nt&&this.listens(w,!0)&&(D=[this]),D},_isClickDisabled:function(p){for(;p&&p!==this._container;){if(p._leaflet_disable_click)return!0;p=p.parentNode}},_handleDOMEvent:function(p){var w=p.target||p.srcElement;if(!(!this._loaded||w._leaflet_disable_events||p.type==="click"&&this._isClickDisabled(w))){var D=p.type;D==="mousedown"&&iu(w),this._fireDOMEvent(p,D)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(p,w,D){if(p.type==="click"){var $=r({},p);$.type="preclick",this._fireDOMEvent($,$.type,D)}var nt=this._findEventTargets(p,w);if(D){for(var mt=[],Rt=0;Rt<D.length;Rt++)D[Rt].listens(w,!0)&&mt.push(D[Rt]);nt=mt.concat(nt)}if(nt.length){w==="contextmenu"&&Hi(p);var ae=nt[0],pe={originalEvent:p};if(p.type!=="keypress"&&p.type!=="keydown"&&p.type!=="keyup"){var Oe=ae.getLatLng&&(!ae._radius||ae._radius<=10);pe.containerPoint=Oe?this.latLngToContainerPoint(ae.getLatLng()):this.mouseEventToContainerPoint(p),pe.layerPoint=this.containerPointToLayerPoint(pe.containerPoint),pe.latlng=Oe?ae.getLatLng():this.layerPointToLatLng(pe.layerPoint)}for(Rt=0;Rt<nt.length;Rt++)if(nt[Rt].fire(w,pe,!0),pe.originalEvent._stopped||nt[Rt].options.bubblingMouseEvents===!1&&W(this._mouseEvents,w)!==-1)return}},_draggableMoved:function(p){return p=p.dragging&&p.dragging.enabled()?p:this,p.dragging&&p.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var p=0,w=this._handlers.length;p<w;p++)this._handlers[p].disable()},whenReady:function(p,w){return this._loaded?p.call(w||this,{target:this}):this.on("load",p,w),this},_getMapPanePos:function(){return Ps(this._mapPane)||new St(0,0)},_moved:function(){var p=this._getMapPanePos();return p&&!p.equals([0,0])},_getTopLeftPoint:function(p,w){var D=p&&w!==void 0?this._getNewPixelOrigin(p,w):this.getPixelOrigin();return D.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(p,w){var D=this.getSize()._divideBy(2);return this.project(p,w)._subtract(D)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(p,w,D){var $=this._getNewPixelOrigin(D,w);return this.project(p,w)._subtract($)},_latLngBoundsToNewLayerBounds:function(p,w,D){var $=this._getNewPixelOrigin(D,w);return Tt([this.project(p.getSouthWest(),w)._subtract($),this.project(p.getNorthWest(),w)._subtract($),this.project(p.getSouthEast(),w)._subtract($),this.project(p.getNorthEast(),w)._subtract($)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(p){return this.latLngToLayerPoint(p).subtract(this._getCenterLayerPoint())},_limitCenter:function(p,w,D){if(!D)return p;var $=this.project(p,w),nt=this.getSize().divideBy(2),mt=new pt($.subtract(nt),$.add(nt)),Rt=this._getBoundsOffset(mt,D,w);return Math.abs(Rt.x)<=1&&Math.abs(Rt.y)<=1?p:this.unproject($.add(Rt),w)},_limitOffset:function(p,w){if(!w)return p;var D=this.getPixelBounds(),$=new pt(D.min.add(p),D.max.add(p));return p.add(this._getBoundsOffset($,w))},_getBoundsOffset:function(p,w,D){var $=Tt(this.project(w.getNorthEast(),D),this.project(w.getSouthWest(),D)),nt=$.min.subtract(p.min),mt=$.max.subtract(p.max),Rt=this._rebound(nt.x,-mt.x),ae=this._rebound(nt.y,-mt.y);return new St(Rt,ae)},_rebound:function(p,w){return p+w>0?Math.round(p-w)/2:Math.max(0,Math.ceil(p))-Math.max(0,Math.floor(w))},_limitZoom:function(p){var w=this.getMinZoom(),D=this.getMaxZoom(),$=ie.any3d?this.options.zoomSnap:1;return $&&(p=Math.round(p/$)*$),Math.max(w,Math.min(D,p))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(p,w){var D=this._getCenterOffset(p)._trunc();return(w&&w.animate)!==!0&&!this.getSize().contains(D)?!1:(this.panBy(D,w),!0)},_createAnimProxy:function(){var p=this._proxy=kn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(p),this.on("zoomanim",function(w){var D=Ks,$=this._proxy.style[D];Cs(this._proxy,this.project(w.center,w.zoom),this.getZoomScale(w.zoom,1)),$===this._proxy.style[D]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Rn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var p=this.getCenter(),w=this.getZoom();Cs(this._proxy,this.project(p,w),this.getZoomScale(w,1))},_catchTransitionEnd:function(p){this._animatingZoom&&p.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(p,w,D){if(this._animatingZoom)return!0;if(D=D||{},!this._zoomAnimated||D.animate===!1||this._nothingToAnimate()||Math.abs(w-this._zoom)>this.options.zoomAnimationThreshold)return!1;var $=this.getZoomScale(w),nt=this._getCenterOffset(p)._divideBy(1-1/$);return D.animate!==!0&&!this.getSize().contains(nt)?!1:(bt(function(){this._moveStart(!0,D.noMoveStart||!1)._animateZoom(p,w,!0)},this),!0)},_animateZoom:function(p,w,D,$){this._mapPane&&(D&&(this._animatingZoom=!0,this._animateToCenter=p,this._animateToZoom=w,An(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:p,zoom:w,noUpdate:$}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Iu(p,w){return new Jn(p,w)}var sa=ye.extend({options:{position:"topright"},initialize:function(p){V(this,p)},getPosition:function(){return this.options.position},setPosition:function(p){var w=this._map;return w&&w.removeControl(this),this.options.position=p,w&&w.addControl(this),this},getContainer:function(){return this._container},addTo:function(p){this.remove(),this._map=p;var w=this._container=this.onAdd(p),D=this.getPosition(),$=p._controlCorners[D];return An(w,"leaflet-control"),D.indexOf("bottom")!==-1?$.insertBefore(w,$.firstChild):$.appendChild(w),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Rn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(p){this._map&&p&&p.screenX>0&&p.screenY>0&&this._map.getContainer().focus()}}),Os=function(p){return new sa(p)};Jn.include({addControl:function(p){return p.addTo(this),this},removeControl:function(p){return p.remove(),this},_initControlPos:function(){var p=this._controlCorners={},w="leaflet-",D=this._controlContainer=kn("div",w+"control-container",this._container);function $(nt,mt){var Rt=w+nt+" "+w+mt;p[nt+mt]=kn("div",Rt,D)}$("top","left"),$("top","right"),$("bottom","left"),$("bottom","right")},_clearControlPos:function(){for(var p in this._controlCorners)Rn(this._controlCorners[p]);Rn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ol=sa.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(p,w,D,$){return D<$?-1:$<D?1:0}},initialize:function(p,w,D){V(this,D),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var $ in p)this._addLayer(p[$],$);for($ in w)this._addLayer(w[$],$,!0)},onAdd:function(p){this._initLayout(),this._update(),this._map=p,p.on("zoomend",this._checkDisabledLayers,this);for(var w=0;w<this._layers.length;w++)this._layers[w].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(p){return sa.prototype.addTo.call(this,p),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(p,w){return this._addLayer(p,w),this._map?this._update():this},addOverlay:function(p,w){return this._addLayer(p,w,!0),this._map?this._update():this},removeLayer:function(p){p.off("add remove",this._onLayerChange,this);var w=this._getLayer(g(p));return w&&this._layers.splice(this._layers.indexOf(w),1),this._map?this._update():this},expand:function(){An(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var p=this._map.getSize().y-(this._container.offsetTop+50);return p<this._section.clientHeight?(An(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=p+"px"):zn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var p="leaflet-control-layers",w=this._container=kn("div",p),D=this.options.collapsed;w.setAttribute("aria-haspopup",!0),to(w),Ra(w);var $=this._section=kn("section",p+"-list");D&&(this._map.on("click",this.collapse,this),Mn(w,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var nt=this._layersLink=kn("a",p+"-toggle",w);nt.href="#",nt.title="Layers",nt.setAttribute("role","button"),Mn(nt,{keydown:function(mt){mt.keyCode===13&&this._expandSafely()},click:function(mt){Hi(mt),this._expandSafely()}},this),D||this.expand(),this._baseLayersList=kn("div",p+"-base",$),this._separator=kn("div",p+"-separator",$),this._overlaysList=kn("div",p+"-overlays",$),w.appendChild($)},_getLayer:function(p){for(var w=0;w<this._layers.length;w++)if(this._layers[w]&&g(this._layers[w].layer)===p)return this._layers[w]},_addLayer:function(p,w,D){this._map&&p.on("add remove",this._onLayerChange,this),this._layers.push({layer:p,name:w,overlay:D}),this.options.sortLayers&&this._layers.sort(f(function($,nt){return this.options.sortFunction($.layer,nt.layer,$.name,nt.name)},this)),this.options.autoZIndex&&p.setZIndex&&(this._lastZIndex++,p.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Sa(this._baseLayersList),Sa(this._overlaysList),this._layerControlInputs=[];var p,w,D,$,nt=0;for(D=0;D<this._layers.length;D++)$=this._layers[D],this._addItem($),w=w||$.overlay,p=p||!$.overlay,nt+=$.overlay?0:1;return this.options.hideSingleBase&&(p=p&&nt>1,this._baseLayersList.style.display=p?"":"none"),this._separator.style.display=w&&p?"":"none",this},_onLayerChange:function(p){this._handlingClick||this._update();var w=this._getLayer(g(p.target)),D=w.overlay?p.type==="add"?"overlayadd":"overlayremove":p.type==="add"?"baselayerchange":null;D&&this._map.fire(D,w)},_createRadioElement:function(p,w){var D='<input type="radio" class="leaflet-control-layers-selector" name="'+p+'"'+(w?' checked="checked"':"")+"/>",$=document.createElement("div");return $.innerHTML=D,$.firstChild},_addItem:function(p){var w=document.createElement("label"),D=this._map.hasLayer(p.layer),$;p.overlay?($=document.createElement("input"),$.type="checkbox",$.className="leaflet-control-layers-selector",$.defaultChecked=D):$=this._createRadioElement("leaflet-base-layers_"+g(this),D),this._layerControlInputs.push($),$.layerId=g(p.layer),Mn($,"click",this._onInputClick,this);var nt=document.createElement("span");nt.innerHTML=" "+p.name;var mt=document.createElement("span");w.appendChild(mt),mt.appendChild($),mt.appendChild(nt);var Rt=p.overlay?this._overlaysList:this._baseLayersList;return Rt.appendChild(w),this._checkDisabledLayers(),w},_onInputClick:function(){if(!this._preventClick){var p=this._layerControlInputs,w,D,$=[],nt=[];this._handlingClick=!0;for(var mt=p.length-1;mt>=0;mt--)w=p[mt],D=this._getLayer(w.layerId).layer,w.checked?$.push(D):w.checked||nt.push(D);for(mt=0;mt<nt.length;mt++)this._map.hasLayer(nt[mt])&&this._map.removeLayer(nt[mt]);for(mt=0;mt<$.length;mt++)this._map.hasLayer($[mt])||this._map.addLayer($[mt]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var p=this._layerControlInputs,w,D,$=this._map.getZoom(),nt=p.length-1;nt>=0;nt--)w=p[nt],D=this._getLayer(w.layerId).layer,w.disabled=D.options.minZoom!==void 0&&$<D.options.minZoom||D.options.maxZoom!==void 0&&$>D.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var p=this._section;this._preventClick=!0,Mn(p,"click",Hi),this.expand();var w=this;setTimeout(function(){_i(p,"click",Hi),w._preventClick=!1})}}),Ru=function(p,w,D){return new Ol(p,w,D)},_c=sa.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(p){var w="leaflet-control-zoom",D=kn("div",w+" leaflet-bar"),$=this.options;return this._zoomInButton=this._createButton($.zoomInText,$.zoomInTitle,w+"-in",D,this._zoomIn),this._zoomOutButton=this._createButton($.zoomOutText,$.zoomOutTitle,w+"-out",D,this._zoomOut),this._updateDisabled(),p.on("zoomend zoomlevelschange",this._updateDisabled,this),D},onRemove:function(p){p.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(p){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(p.shiftKey?3:1))},_zoomOut:function(p){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(p.shiftKey?3:1))},_createButton:function(p,w,D,$,nt){var mt=kn("a",D,$);return mt.innerHTML=p,mt.href="#",mt.title=w,mt.setAttribute("role","button"),mt.setAttribute("aria-label",w),to(mt),Mn(mt,"click",Aa),Mn(mt,"click",nt,this),Mn(mt,"click",this._refocusOnMap,this),mt},_updateDisabled:function(){var p=this._map,w="leaflet-disabled";zn(this._zoomInButton,w),zn(this._zoomOutButton,w),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||p._zoom===p.getMinZoom())&&(An(this._zoomOutButton,w),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||p._zoom===p.getMaxZoom())&&(An(this._zoomInButton,w),this._zoomInButton.setAttribute("aria-disabled","true"))}});Jn.mergeOptions({zoomControl:!0}),Jn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new _c,this.addControl(this.zoomControl))});var Jh=function(p){return new _c(p)},Dl=sa.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(p){var w="leaflet-control-scale",D=kn("div",w),$=this.options;return this._addScales($,w+"-line",D),p.on($.updateWhenIdle?"moveend":"move",this._update,this),p.whenReady(this._update,this),D},onRemove:function(p){p.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(p,w,D){p.metric&&(this._mScale=kn("div",w,D)),p.imperial&&(this._iScale=kn("div",w,D))},_update:function(){var p=this._map,w=p.getSize().y/2,D=p.distance(p.containerPointToLatLng([0,w]),p.containerPointToLatLng([this.options.maxWidth,w]));this._updateScales(D)},_updateScales:function(p){this.options.metric&&p&&this._updateMetric(p),this.options.imperial&&p&&this._updateImperial(p)},_updateMetric:function(p){var w=this._getRoundNum(p),D=w<1e3?w+" m":w/1e3+" km";this._updateScale(this._mScale,D,w/p)},_updateImperial:function(p){var w=p*3.2808399,D,$,nt;w>5280?(D=w/5280,$=this._getRoundNum(D),this._updateScale(this._iScale,$+" mi",$/D)):(nt=this._getRoundNum(w),this._updateScale(this._iScale,nt+" ft",nt/w))},_updateScale:function(p,w,D){p.style.width=Math.round(this.options.maxWidth*D)+"px",p.innerHTML=w},_getRoundNum:function(p){var w=Math.pow(10,(Math.floor(p)+"").length-1),D=p/w;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:1,w*D}}),Yc=function(p){return new Dl(p)},Gf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Xc=sa.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ie.inlineSvg?Gf+" ":"")+"Leaflet</a>"},initialize:function(p){V(this,p),this._attributions={}},onAdd:function(p){p.attributionControl=this,this._container=kn("div","leaflet-control-attribution"),to(this._container);for(var w in p._layers)p._layers[w].getAttribution&&this.addAttribution(p._layers[w].getAttribution());return this._update(),p.on("layeradd",this._addAttribution,this),this._container},onRemove:function(p){p.off("layeradd",this._addAttribution,this)},_addAttribution:function(p){p.layer.getAttribution&&(this.addAttribution(p.layer.getAttribution()),p.layer.once("remove",function(){this.removeAttribution(p.layer.getAttribution())},this))},setPrefix:function(p){return this.options.prefix=p,this._update(),this},addAttribution:function(p){return p?(this._attributions[p]||(this._attributions[p]=0),this._attributions[p]++,this._update(),this):this},removeAttribution:function(p){return p?(this._attributions[p]&&(this._attributions[p]--,this._update()),this):this},_update:function(){if(this._map){var p=[];for(var w in this._attributions)this._attributions[w]&&p.push(w);var D=[];this.options.prefix&&D.push(this.options.prefix),p.length&&D.push(p.join(", ")),this._container.innerHTML=D.join(' <span aria-hidden="true">|</span> ')}}});Jn.mergeOptions({attributionControl:!0}),Jn.addInitHook(function(){this.options.attributionControl&&new Xc().addTo(this)});var Wf=function(p){return new Xc(p)};sa.Layers=Ol,sa.Zoom=_c,sa.Scale=Dl,sa.Attribution=Xc,Os.layers=Ru,Os.zoom=Jh,Os.scale=Yc,Os.attribution=Wf;var eo=ye.extend({initialize:function(p){this._map=p},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});eo.addTo=function(p,w){return p.addHandler(w,this),this};var Yf={Events:kt},Bu=ie.touch?"touchstart mousedown":"mousedown",Ds=Ot.extend({options:{clickTolerance:3},initialize:function(p,w,D,$){V(this,$),this._element=p,this._dragStartTarget=w||p,this._preventOutline=D},enable:function(){this._enabled||(Mn(this._dragStartTarget,Bu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ds._dragging===this&&this.finishDrag(!0),_i(this._dragStartTarget,Bu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(p){if(this._enabled&&(this._moved=!1,!ni(this._element,"leaflet-zoom-anim"))){if(p.touches&&p.touches.length!==1){Ds._dragging===this&&this.finishDrag();return}if(!(Ds._dragging||p.shiftKey||p.which!==1&&p.button!==1&&!p.touches)&&(Ds._dragging=this,this._preventOutline&&iu(this._element),gc(),Ka(),!this._moving)){this.fire("down");var w=p.touches?p.touches[0]:p,D=Lu(this._element);this._startPoint=new St(w.clientX,w.clientY),this._startPos=Ps(this._element),this._parentScale=il(D);var $=p.type==="mousedown";Mn(document,$?"mousemove":"touchmove",this._onMove,this),Mn(document,$?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(p){if(this._enabled){if(p.touches&&p.touches.length>1){this._moved=!0;return}var w=p.touches&&p.touches.length===1?p.touches[0]:p,D=new St(w.clientX,w.clientY)._subtract(this._startPoint);!D.x&&!D.y||Math.abs(D.x)+Math.abs(D.y)<this.options.clickTolerance||(D.x/=this._parentScale.x,D.y/=this._parentScale.y,Hi(p),this._moved||(this.fire("dragstart"),this._moved=!0,An(document.body,"leaflet-dragging"),this._lastTarget=p.target||p.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),An(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(D),this._moving=!0,this._lastEvent=p,this._updatePosition())}},_updatePosition:function(){var p={originalEvent:this._lastEvent};this.fire("predrag",p),Ci(this._element,this._newPos),this.fire("drag",p)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(p){zn(document.body,"leaflet-dragging"),this._lastTarget&&(zn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),_i(document,"mousemove touchmove",this._onMove,this),_i(document,"mouseup touchend touchcancel",this._onUp,this),Cl(),ms();var w=this._moved&&this._moving;this._moving=!1,Ds._dragging=!1,w&&this.fire("dragend",{noInertia:p,distance:this._newPos.distanceTo(this._startPos)})}});function vc(p,w,D){var $,nt=[1,4,2,8],mt,Rt,ae,pe,Oe,Ke,yn,$n;for(mt=0,Ke=p.length;mt<Ke;mt++)p[mt]._code=vi(p[mt],w);for(ae=0;ae<4;ae++){for(yn=nt[ae],$=[],mt=0,Ke=p.length,Rt=Ke-1;mt<Ke;Rt=mt++)pe=p[mt],Oe=p[Rt],pe._code&yn?Oe._code&yn||($n=ti(Oe,pe,yn,w,D),$n._code=vi($n,w),$.push($n)):(Oe._code&yn&&($n=ti(Oe,pe,yn,w,D),$n._code=vi($n,w),$.push($n)),$.push(pe));p=$}return p}function xc(p,w){var D,$,nt,mt,Rt,ae,pe,Oe,Ke;if(!p||p.length===0)throw new Error("latlngs not passed");$r(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var yn=le([0,0]),$n=Yt(p),ci=$n.getNorthWest().distanceTo($n.getSouthWest())*$n.getNorthEast().distanceTo($n.getNorthWest());ci<1700&&(yn=sl(p));var tr=p.length,Qe=[];for(D=0;D<tr;D++){var Ge=le(p[D]);Qe.push(w.project(le([Ge.lat-yn.lat,Ge.lng-yn.lng])))}for(ae=pe=Oe=0,D=0,$=tr-1;D<tr;$=D++)nt=Qe[D],mt=Qe[$],Rt=nt.y*mt.x-mt.y*nt.x,pe+=(nt.x+mt.x)*Rt,Oe+=(nt.y+mt.y)*Rt,ae+=Rt*3;ae===0?Ke=Qe[0]:Ke=[pe/ae,Oe/ae];var ri=w.unproject(Vt(Ke));return le([ri.lat+yn.lat,ri.lng+yn.lng])}function sl(p){for(var w=0,D=0,$=0,nt=0;nt<p.length;nt++){var mt=le(p[nt]);w+=mt.lat,D+=mt.lng,$++}return le([w/$,D/$])}var bc={__proto__:null,clipPolygon:vc,polygonCenter:xc,centroid:sl};function Kc(p,w){if(!w||!p.length)return p.slice();var D=w*w;return p=ru(p,D),p=Qc(p,D),p}function wc(p,w,D){return Math.sqrt(Nn(p,w,D,!0))}function zl(p,w,D){return Nn(p,w,D)}function Qc(p,w){var D=p.length,$=typeof Uint8Array<"u"?Uint8Array:Array,nt=new $(D);nt[0]=nt[D-1]=1,no(p,nt,w,0,D-1);var mt,Rt=[];for(mt=0;mt<D;mt++)nt[mt]&&Rt.push(p[mt]);return Rt}function no(p,w,D,$,nt){var mt=0,Rt,ae,pe;for(ae=$+1;ae<=nt-1;ae++)pe=Nn(p[ae],p[$],p[nt],!0),pe>mt&&(Rt=ae,mt=pe);mt>D&&(w[Rt]=1,no(p,w,D,$,Rt),no(p,w,D,Rt,nt))}function ru(p,w){for(var D=[p[0]],$=1,nt=0,mt=p.length;$<mt;$++)Xf(p[$],p[nt])>w&&(D.push(p[$]),nt=$);return nt<mt-1&&D.push(p[mt-1]),D}var Jc;function Sc(p,w,D,$,nt){var mt=$?Jc:vi(p,D),Rt=vi(w,D),ae,pe,Oe;for(Jc=Rt;;){if(!(mt|Rt))return[p,w];if(mt&Rt)return!1;ae=mt||Rt,pe=ti(p,w,ae,D,nt),Oe=vi(pe,D),ae===mt?(p=pe,mt=Oe):(w=pe,Rt=Oe)}}function ti(p,w,D,$,nt){var mt=w.x-p.x,Rt=w.y-p.y,ae=$.min,pe=$.max,Oe,Ke;return D&8?(Oe=p.x+mt*(pe.y-p.y)/Rt,Ke=pe.y):D&4?(Oe=p.x+mt*(ae.y-p.y)/Rt,Ke=ae.y):D&2?(Oe=pe.x,Ke=p.y+Rt*(pe.x-p.x)/mt):D&1&&(Oe=ae.x,Ke=p.y+Rt*(ae.x-p.x)/mt),new St(Oe,Ke,nt)}function vi(p,w){var D=0;return p.x<w.min.x?D|=1:p.x>w.max.x&&(D|=2),p.y<w.min.y?D|=4:p.y>w.max.y&&(D|=8),D}function Xf(p,w){var D=w.x-p.x,$=w.y-p.y;return D*D+$*$}function Nn(p,w,D,$){var nt=w.x,mt=w.y,Rt=D.x-nt,ae=D.y-mt,pe=Rt*Rt+ae*ae,Oe;return pe>0&&(Oe=((p.x-nt)*Rt+(p.y-mt)*ae)/pe,Oe>1?(nt=D.x,mt=D.y):Oe>0&&(nt+=Rt*Oe,mt+=ae*Oe)),Rt=p.x-nt,ae=p.y-mt,$?Rt*Rt+ae*ae:new St(nt,mt)}function $r(p){return!Y(p[0])||typeof p[0][0]!="object"&&typeof p[0][0]<"u"}function Li(p){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$r(p)}function xi(p,w){var D,$,nt,mt,Rt,ae,pe,Oe;if(!p||p.length===0)throw new Error("latlngs not passed");$r(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var Ke=le([0,0]),yn=Yt(p),$n=yn.getNorthWest().distanceTo(yn.getSouthWest())*yn.getNorthEast().distanceTo(yn.getNorthWest());$n<1700&&(Ke=sl(p));var ci=p.length,tr=[];for(D=0;D<ci;D++){var Qe=le(p[D]);tr.push(w.project(le([Qe.lat-Ke.lat,Qe.lng-Ke.lng])))}for(D=0,$=0;D<ci-1;D++)$+=tr[D].distanceTo(tr[D+1])/2;if($===0)Oe=tr[0];else for(D=0,mt=0;D<ci-1;D++)if(Rt=tr[D],ae=tr[D+1],nt=Rt.distanceTo(ae),mt+=nt,mt>$){pe=(mt-$)/nt,Oe=[ae.x-pe*(ae.x-Rt.x),ae.y-pe*(ae.y-Rt.y)];break}var Ge=w.unproject(Vt(Oe));return le([Ge.lat+Ke.lat,Ge.lng+Ke.lng])}var Nu={__proto__:null,simplify:Kc,pointToSegmentDistance:wc,closestPointOnSegment:zl,clipSegment:Sc,_getEdgeIntersection:ti,_getBitCode:vi,_sqClosestPointOnSegment:Nn,isFlat:$r,_flat:Li,polylineCenter:xi},ju={project:function(p){return new St(p.lng,p.lat)},unproject:function(p){return new se(p.y,p.x)},bounds:new pt([-180,-90],[180,90])},au={R:6378137,R_MINOR:6356752314245179e-9,bounds:new pt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(p){var w=Math.PI/180,D=this.R,$=p.lat*w,nt=this.R_MINOR/D,mt=Math.sqrt(1-nt*nt),Rt=mt*Math.sin($),ae=Math.tan(Math.PI/4-$/2)/Math.pow((1-Rt)/(1+Rt),mt/2);return $=-D*Math.log(Math.max(ae,1e-10)),new St(p.lng*w*D,$)},unproject:function(p){for(var w=180/Math.PI,D=this.R,$=this.R_MINOR/D,nt=Math.sqrt(1-$*$),mt=Math.exp(-p.y/D),Rt=Math.PI/2-2*Math.atan(mt),ae=0,pe=.1,Oe;ae<15&&Math.abs(pe)>1e-7;ae++)Oe=nt*Math.sin(Rt),Oe=Math.pow((1-Oe)/(1+Oe),nt/2),pe=Math.PI/2-2*Math.atan(mt*Oe)-Rt,Rt+=pe;return new se(Rt*w,p.x*w/D)}},Fu={__proto__:null,LonLat:ju,Mercator:au,SphericalMercator:Pe},Uu=r({},Ie,{code:"EPSG:3395",projection:au,transformation:(function(){var p=.5/(Math.PI*au.R);return ce(p,.5,-p,.5)})()}),Vu=r({},Ie,{code:"EPSG:4326",projection:ju,transformation:ce(1/180,1,-1/180,.5)}),zo=r({},Ae,{projection:ju,transformation:ce(1,0,-1,0),scale:function(p){return Math.pow(2,p)},zoom:function(p){return Math.log(p)/Math.LN2},distance:function(p,w){var D=w.lng-p.lng,$=w.lat-p.lat;return Math.sqrt(D*D+$*$)},infinite:!0});Ae.Earth=Ie,Ae.EPSG3395=Uu,Ae.EPSG3857=rn,Ae.EPSG900913=je,Ae.EPSG4326=Vu,Ae.Simple=zo;var ts=Ot.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(p){return p.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(p){return p&&p.removeLayer(this),this},getPane:function(p){return this._map.getPane(p?this.options[p]||p:this.options.pane)},addInteractiveTarget:function(p){return this._map._targets[g(p)]=this,this},removeInteractiveTarget:function(p){return delete this._map._targets[g(p)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(p){var w=p.target;if(w.hasLayer(this)){if(this._map=w,this._zoomAnimated=w._zoomAnimated,this.getEvents){var D=this.getEvents();w.on(D,this),this.once("remove",function(){w.off(D,this)},this)}this.onAdd(w),this.fire("add"),w.fire("layeradd",{layer:this})}}});Jn.include({addLayer:function(p){if(!p._layerAdd)throw new Error("The provided object is not a Layer.");var w=g(p);return this._layers[w]?this:(this._layers[w]=p,p._mapToAdd=this,p.beforeAdd&&p.beforeAdd(this),this.whenReady(p._layerAdd,p),this)},removeLayer:function(p){var w=g(p);return this._layers[w]?(this._loaded&&p.onRemove(this),delete this._layers[w],this._loaded&&(this.fire("layerremove",{layer:p}),p.fire("remove")),p._map=p._mapToAdd=null,this):this},hasLayer:function(p){return g(p)in this._layers},eachLayer:function(p,w){for(var D in this._layers)p.call(w,this._layers[D]);return this},_addLayers:function(p){p=p?Y(p)?p:[p]:[];for(var w=0,D=p.length;w<D;w++)this.addLayer(p[w])},_addZoomLimit:function(p){(!isNaN(p.options.maxZoom)||!isNaN(p.options.minZoom))&&(this._zoomBoundLayers[g(p)]=p,this._updateZoomLevels())},_removeZoomLimit:function(p){var w=g(p);this._zoomBoundLayers[w]&&(delete this._zoomBoundLayers[w],this._updateZoomLevels())},_updateZoomLevels:function(){var p=1/0,w=-1/0,D=this._getZoomSpan();for(var $ in this._zoomBoundLayers){var nt=this._zoomBoundLayers[$].options;p=nt.minZoom===void 0?p:Math.min(p,nt.minZoom),w=nt.maxZoom===void 0?w:Math.max(w,nt.maxZoom)}this._layersMaxZoom=w===-1/0?void 0:w,this._layersMinZoom=p===1/0?void 0:p,D!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var io=ts.extend({initialize:function(p,w){V(this,w),this._layers={};var D,$;if(p)for(D=0,$=p.length;D<$;D++)this.addLayer(p[D])},addLayer:function(p){var w=this.getLayerId(p);return this._layers[w]=p,this._map&&this._map.addLayer(p),this},removeLayer:function(p){var w=p in this._layers?p:this.getLayerId(p);return this._map&&this._layers[w]&&this._map.removeLayer(this._layers[w]),delete this._layers[w],this},hasLayer:function(p){var w=typeof p=="number"?p:this.getLayerId(p);return w in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(p){var w=Array.prototype.slice.call(arguments,1),D,$;for(D in this._layers)$=this._layers[D],$[p]&&$[p].apply($,w);return this},onAdd:function(p){this.eachLayer(p.addLayer,p)},onRemove:function(p){this.eachLayer(p.removeLayer,p)},eachLayer:function(p,w){for(var D in this._layers)p.call(w,this._layers[D]);return this},getLayer:function(p){return this._layers[p]},getLayers:function(){var p=[];return this.eachLayer(p.push,p),p},setZIndex:function(p){return this.invoke("setZIndex",p)},getLayerId:function(p){return g(p)}}),$u=function(p,w){return new io(p,w)},Na=io.extend({addLayer:function(p){return this.hasLayer(p)?this:(p.addEventParent(this),io.prototype.addLayer.call(this,p),this.fire("layeradd",{layer:p}))},removeLayer:function(p){return this.hasLayer(p)?(p in this._layers&&(p=this._layers[p]),p.removeEventParent(this),io.prototype.removeLayer.call(this,p),this.fire("layerremove",{layer:p})):this},setStyle:function(p){return this.invoke("setStyle",p)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var p=new $t;for(var w in this._layers){var D=this._layers[w];p.extend(D.getBounds?D.getBounds():D.getLatLng())}return p}}),tf=function(p,w){return new Na(p,w)},gs=ye.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(p){V(this,p)},createIcon:function(p){return this._createIcon("icon",p)},createShadow:function(p){return this._createIcon("shadow",p)},_createIcon:function(p,w){var D=this._getIconUrl(p);if(!D){if(p==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var $=this._createImg(D,w&&w.tagName==="IMG"?w:null);return this._setIconStyles($,p),(this.options.crossOrigin||this.options.crossOrigin==="")&&($.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),$},_setIconStyles:function(p,w){var D=this.options,$=D[w+"Size"];typeof $=="number"&&($=[$,$]);var nt=Vt($),mt=Vt(w==="shadow"&&D.shadowAnchor||D.iconAnchor||nt&&nt.divideBy(2,!0));p.className="leaflet-marker-"+w+" "+(D.className||""),mt&&(p.style.marginLeft=-mt.x+"px",p.style.marginTop=-mt.y+"px"),nt&&(p.style.width=nt.x+"px",p.style.height=nt.y+"px")},_createImg:function(p,w){return w=w||document.createElement("img"),w.src=p,w},_getIconUrl:function(p){return ie.retina&&this.options[p+"RetinaUrl"]||this.options[p+"Url"]}});function qu(p){return new gs(p)}var su=gs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(p){return typeof su.imagePath!="string"&&(su.imagePath=this._detectIconPath()),(this.options.imagePath||su.imagePath)+gs.prototype._getIconUrl.call(this,p)},_stripUrl:function(p){var w=function(D,$,nt){var mt=$.exec(D);return mt&&mt[nt]};return p=w(p,/^url\((['"])?(.+)\1\)$/,2),p&&w(p,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var p=kn("div","leaflet-default-icon-path",document.body),w=zu(p,"background-image")||zu(p,"backgroundImage");if(document.body.removeChild(p),w=this._stripUrl(w),w)return w;var D=document.querySelector('link[href$="leaflet.css"]');return D?D.href.substring(0,D.href.length-11-1):""}}),ol=eo.extend({initialize:function(p){this._marker=p},addHooks:function(){var p=this._marker._icon;this._draggable||(this._draggable=new Ds(p,p,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),An(p,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(p){var w=this._marker,D=w._map,$=this._marker.options.autoPanSpeed,nt=this._marker.options.autoPanPadding,mt=Ps(w._icon),Rt=D.getPixelBounds(),ae=D.getPixelOrigin(),pe=Tt(Rt.min._subtract(ae).add(nt),Rt.max._subtract(ae).subtract(nt));if(!pe.contains(mt)){var Oe=Vt((Math.max(pe.max.x,mt.x)-pe.max.x)/(Rt.max.x-pe.max.x)-(Math.min(pe.min.x,mt.x)-pe.min.x)/(Rt.min.x-pe.min.x),(Math.max(pe.max.y,mt.y)-pe.max.y)/(Rt.max.y-pe.max.y)-(Math.min(pe.min.y,mt.y)-pe.min.y)/(Rt.min.y-pe.min.y)).multiplyBy($);D.panBy(Oe,{animate:!1}),this._draggable._newPos._add(Oe),this._draggable._startPos._add(Oe),Ci(w._icon,this._draggable._newPos),this._onDrag(p),this._panRequest=bt(this._adjustPan.bind(this,p))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(p){this._marker.options.autoPan&&(Pt(this._panRequest),this._panRequest=bt(this._adjustPan.bind(this,p)))},_onDrag:function(p){var w=this._marker,D=w._shadow,$=Ps(w._icon),nt=w._map.layerPointToLatLng($);D&&Ci(D,$),w._latlng=nt,p.latlng=nt,p.oldLatLng=this._oldLatLng,w.fire("move",p).fire("drag",p)},_onDragEnd:function(p){Pt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",p)}}),Ll=ts.extend({options:{icon:new su,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(p,w){V(this,w),this._latlng=le(p)},onAdd:function(p){this._zoomAnimated=this._zoomAnimated&&p.options.markerZoomAnimation,this._zoomAnimated&&p.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(p){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&p.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(p){var w=this._latlng;return this._latlng=le(p),this.update(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},setZIndexOffset:function(p){return this.options.zIndexOffset=p,this.update()},getIcon:function(){return this.options.icon},setIcon:function(p){return this.options.icon=p,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var p=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(p)}return this},_initIcon:function(){var p=this.options,w="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),D=p.icon.createIcon(this._icon),$=!1;D!==this._icon&&(this._icon&&this._removeIcon(),$=!0,p.title&&(D.title=p.title),D.tagName==="IMG"&&(D.alt=p.alt||"")),An(D,w),p.keyboard&&(D.tabIndex="0",D.setAttribute("role","button")),this._icon=D,p.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mn(D,"focus",this._panOnFocus,this);var nt=p.icon.createShadow(this._shadow),mt=!1;nt!==this._shadow&&(this._removeShadow(),mt=!0),nt&&(An(nt,w),nt.alt=""),this._shadow=nt,p.opacity<1&&this._updateOpacity(),$&&this.getPane().appendChild(this._icon),this._initInteraction(),nt&&mt&&this.getPane(p.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_i(this._icon,"focus",this._panOnFocus,this),Rn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Rn(this._shadow),this._shadow=null},_setPos:function(p){this._icon&&Ci(this._icon,p),this._shadow&&Ci(this._shadow,p),this._zIndex=p.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(p){this._icon&&(this._icon.style.zIndex=this._zIndex+p)},_animateZoom:function(p){var w=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center).round();this._setPos(w)},_initInteraction:function(){if(this.options.interactive&&(An(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ol)){var p=this.options.draggable;this.dragging&&(p=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ol(this),p&&this.dragging.enable()}},setOpacity:function(p){return this.options.opacity=p,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var p=this.options.opacity;this._icon&&qi(this._icon,p),this._shadow&&qi(this._shadow,p)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var p=this._map;if(p){var w=this.options.icon.options,D=w.iconSize?Vt(w.iconSize):Vt(0,0),$=w.iconAnchor?Vt(w.iconAnchor):Vt(0,0);p.panInside(this._latlng,{paddingTopLeft:$,paddingBottomRight:D.subtract($)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function th(p,w){return new Ll(p,w)}var zs=ts.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(p){this._renderer=p.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(p){return V(this,p),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&p&&Object.prototype.hasOwnProperty.call(p,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ro=zs.extend({options:{fill:!0,radius:10},initialize:function(p,w){V(this,w),this._latlng=le(p),this._radius=this.options.radius},setLatLng:function(p){var w=this._latlng;return this._latlng=le(p),this.redraw(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(p){return this.options.radius=this._radius=p,this.redraw()},getRadius:function(){return this._radius},setStyle:function(p){var w=p&&p.radius||this._radius;return zs.prototype.setStyle.call(this,p),this.setRadius(w),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var p=this._radius,w=this._radiusY||p,D=this._clickTolerance(),$=[p+D,w+D];this._pxBounds=new pt(this._point.subtract($),this._point.add($))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(p){return p.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Hu(p,w){return new ro(p,w)}var Il=ro.extend({initialize:function(p,w,D){if(typeof w=="number"&&(w=r({},D,{radius:w})),V(this,w),this._latlng=le(p),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(p){return this._mRadius=p,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var p=[this._radius,this._radiusY||this._radius];return new $t(this._map.layerPointToLatLng(this._point.subtract(p)),this._map.layerPointToLatLng(this._point.add(p)))},setStyle:zs.prototype.setStyle,_project:function(){var p=this._latlng.lng,w=this._latlng.lat,D=this._map,$=D.options.crs;if($.distance===Ie.distance){var nt=Math.PI/180,mt=this._mRadius/Ie.R/nt,Rt=D.project([w+mt,p]),ae=D.project([w-mt,p]),pe=Rt.add(ae).divideBy(2),Oe=D.unproject(pe).lat,Ke=Math.acos((Math.cos(mt*nt)-Math.sin(w*nt)*Math.sin(Oe*nt))/(Math.cos(w*nt)*Math.cos(Oe*nt)))/nt;(isNaN(Ke)||Ke===0)&&(Ke=mt/Math.cos(Math.PI/180*w)),this._point=pe.subtract(D.getPixelOrigin()),this._radius=isNaN(Ke)?0:pe.x-D.project([Oe,p-Ke]).x,this._radiusY=pe.y-Rt.y}else{var yn=$.unproject($.project(this._latlng).subtract([this._mRadius,0]));this._point=D.latLngToLayerPoint(this._latlng),this._radius=this._point.x-D.latLngToLayerPoint(yn).x}this._updateBounds()}});function eh(p,w,D){return new Il(p,w,D)}var ui=zs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(p,w){V(this,w),this._setLatLngs(p)},getLatLngs:function(){return this._latlngs},setLatLngs:function(p){return this._setLatLngs(p),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(p){for(var w=1/0,D=null,$=Nn,nt,mt,Rt=0,ae=this._parts.length;Rt<ae;Rt++)for(var pe=this._parts[Rt],Oe=1,Ke=pe.length;Oe<Ke;Oe++){nt=pe[Oe-1],mt=pe[Oe];var yn=$(p,nt,mt,!0);yn<w&&(w=yn,D=$(p,nt,mt))}return D&&(D.distance=Math.sqrt(w)),D},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(p,w){return w=w||this._defaultShape(),p=le(p),w.push(p),this._bounds.extend(p),this.redraw()},_setLatLngs:function(p){this._bounds=new $t,this._latlngs=this._convertLatLngs(p)},_defaultShape:function(){return $r(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(p){for(var w=[],D=$r(p),$=0,nt=p.length;$<nt;$++)D?(w[$]=le(p[$]),this._bounds.extend(w[$])):w[$]=this._convertLatLngs(p[$]);return w},_project:function(){var p=new pt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,p),this._bounds.isValid()&&p.isValid()&&(this._rawPxBounds=p,this._updateBounds())},_updateBounds:function(){var p=this._clickTolerance(),w=new St(p,p);this._rawPxBounds&&(this._pxBounds=new pt([this._rawPxBounds.min.subtract(w),this._rawPxBounds.max.add(w)]))},_projectLatlngs:function(p,w,D){var $=p[0]instanceof se,nt=p.length,mt,Rt;if($){for(Rt=[],mt=0;mt<nt;mt++)Rt[mt]=this._map.latLngToLayerPoint(p[mt]),D.extend(Rt[mt]);w.push(Rt)}else for(mt=0;mt<nt;mt++)this._projectLatlngs(p[mt],w,D)},_clipPoints:function(){var p=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}var w=this._parts,D,$,nt,mt,Rt,ae,pe;for(D=0,nt=0,mt=this._rings.length;D<mt;D++)for(pe=this._rings[D],$=0,Rt=pe.length;$<Rt-1;$++)ae=Sc(pe[$],pe[$+1],p,$,!0),ae&&(w[nt]=w[nt]||[],w[nt].push(ae[0]),(ae[1]!==pe[$+1]||$===Rt-2)&&(w[nt].push(ae[1]),nt++))}},_simplifyPoints:function(){for(var p=this._parts,w=this.options.smoothFactor,D=0,$=p.length;D<$;D++)p[D]=Kc(p[D],w)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(p,w){var D,$,nt,mt,Rt,ae,pe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(D=0,mt=this._parts.length;D<mt;D++)for(ae=this._parts[D],$=0,Rt=ae.length,nt=Rt-1;$<Rt;nt=$++)if(!(!w&&$===0)&&wc(p,ae[nt],ae[$])<=pe)return!0;return!1}});function Rl(p,w){return new ui(p,w)}ui._flat=Li;var Pr=ui.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(p){var w=ui.prototype._convertLatLngs.call(this,p),D=w.length;return D>=2&&w[0]instanceof se&&w[0].equals(w[D-1])&&w.pop(),w},_setLatLngs:function(p){ui.prototype._setLatLngs.call(this,p),$r(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $r(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var p=this._renderer._bounds,w=this.options.weight,D=new St(w,w);if(p=new pt(p.min.subtract(D),p.max.add(D)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}for(var $=0,nt=this._rings.length,mt;$<nt;$++)mt=vc(this._rings[$],p,!0),mt.length&&this._parts.push(mt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(p){var w=!1,D,$,nt,mt,Rt,ae,pe,Oe;if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(mt=0,pe=this._parts.length;mt<pe;mt++)for(D=this._parts[mt],Rt=0,Oe=D.length,ae=Oe-1;Rt<Oe;ae=Rt++)$=D[Rt],nt=D[ae],$.y>p.y!=nt.y>p.y&&p.x<(nt.x-$.x)*(p.y-$.y)/(nt.y-$.y)+$.x&&(w=!w);return w||ui.prototype._containsPoint.call(this,p,!0)}});function ou(p,w){return new Pr(p,w)}var es=Na.extend({initialize:function(p,w){V(this,w),this._layers={},p&&this.addData(p)},addData:function(p){var w=Y(p)?p:p.features,D,$,nt;if(w){for(D=0,$=w.length;D<$;D++)nt=w[D],(nt.geometries||nt.geometry||nt.features||nt.coordinates)&&this.addData(nt);return this}var mt=this.options;if(mt.filter&&!mt.filter(p))return this;var Rt=kr(p,mt);return Rt?(Rt.feature=Gu(p),Rt.defaultOptions=Rt.options,this.resetStyle(Rt),mt.onEachFeature&&mt.onEachFeature(p,Rt),this.addLayer(Rt)):this},resetStyle:function(p){return p===void 0?this.eachLayer(this.resetStyle,this):(p.options=r({},p.defaultOptions),this._setLayerStyle(p,this.options.style),this)},setStyle:function(p){return this.eachLayer(function(w){this._setLayerStyle(w,p)},this)},_setLayerStyle:function(p,w){p.setStyle&&(typeof w=="function"&&(w=w(p.feature)),p.setStyle(w))}});function kr(p,w){var D=p.type==="Feature"?p.geometry:p,$=D?D.coordinates:null,nt=[],mt=w&&w.pointToLayer,Rt=w&&w.coordsToLatLng||ll,ae,pe,Oe,Ke;if(!$&&!D)return null;switch(D.type){case"Point":return ae=Rt($),ys(mt,p,ae,w);case"MultiPoint":for(Oe=0,Ke=$.length;Oe<Ke;Oe++)ae=Rt($[Oe]),nt.push(ys(mt,p,ae,w));return new Na(nt);case"LineString":case"MultiLineString":return pe=ao($,D.type==="LineString"?0:1,Rt),new ui(pe,w);case"Polygon":case"MultiPolygon":return pe=ao($,D.type==="Polygon"?1:2,Rt),new Pr(pe,w);case"GeometryCollection":for(Oe=0,Ke=D.geometries.length;Oe<Ke;Oe++){var yn=kr({geometry:D.geometries[Oe],type:"Feature",properties:p.properties},w);yn&&nt.push(yn)}return new Na(nt);case"FeatureCollection":for(Oe=0,Ke=D.features.length;Oe<Ke;Oe++){var $n=kr(D.features[Oe],w);$n&&nt.push($n)}return new Na(nt);default:throw new Error("Invalid GeoJSON object.")}}function ys(p,w,D,$){return p?p(w,D):new Ll(D,$&&$.markersInheritOptions&&$)}function ll(p){return new se(p[1],p[0],p[2])}function ao(p,w,D){for(var $=[],nt=0,mt=p.length,Rt;nt<mt;nt++)Rt=w?ao(p[nt],w-1,D):(D||ll)(p[nt]),$.push(Rt);return $}function Zu(p,w){return p=le(p),p.alt!==void 0?[O(p.lng,w),O(p.lat,w),O(p.alt,w)]:[O(p.lng,w),O(p.lat,w)]}function lu(p,w,D,$){for(var nt=[],mt=0,Rt=p.length;mt<Rt;mt++)nt.push(w?lu(p[mt],$r(p[mt])?0:w-1,D,$):Zu(p[mt],$));return!w&&D&&nt.length>0&&nt.push(nt[0].slice()),nt}function Lo(p,w){return p.feature?r({},p.feature,{geometry:w}):Gu(w)}function Gu(p){return p.type==="Feature"||p.type==="FeatureCollection"?p:{type:"Feature",properties:{},geometry:p}}var Io={toGeoJSON:function(p){return Lo(this,{type:"Point",coordinates:Zu(this.getLatLng(),p)})}};Ll.include(Io),Il.include(Io),ro.include(Io),ui.include({toGeoJSON:function(p){var w=!$r(this._latlngs),D=lu(this._latlngs,w?1:0,!1,p);return Lo(this,{type:(w?"Multi":"")+"LineString",coordinates:D})}}),Pr.include({toGeoJSON:function(p){var w=!$r(this._latlngs),D=w&&!$r(this._latlngs[0]),$=lu(this._latlngs,D?2:w?1:0,!0,p);return w||($=[$]),Lo(this,{type:(D?"Multi":"")+"Polygon",coordinates:$})}}),io.include({toMultiPoint:function(p){var w=[];return this.eachLayer(function(D){w.push(D.toGeoJSON(p).geometry.coordinates)}),Lo(this,{type:"MultiPoint",coordinates:w})},toGeoJSON:function(p){var w=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(w==="MultiPoint")return this.toMultiPoint(p);var D=w==="GeometryCollection",$=[];return this.eachLayer(function(nt){if(nt.toGeoJSON){var mt=nt.toGeoJSON(p);if(D)$.push(mt.geometry);else{var Rt=Gu(mt);Rt.type==="FeatureCollection"?$.push.apply($,Rt.features):$.push(Rt)}}}),D?Lo(this,{geometries:$,type:"GeometryCollection"}):{type:"FeatureCollection",features:$}}});function ns(p,w){return new es(p,w)}var Ro=ns,qr=ts.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(p,w,D){this._url=p,this._bounds=Yt(w),V(this,D)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(An(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Rn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(p){return this.options.opacity=p,this._image&&this._updateOpacity(),this},setStyle:function(p){return p.opacity&&this.setOpacity(p.opacity),this},bringToFront:function(){return this._map&&ar(this._image),this},bringToBack:function(){return this._map&&yi(this._image),this},setUrl:function(p){return this._url=p,this._image&&(this._image.src=p),this},setBounds:function(p){return this._bounds=Yt(p),this._map&&this._reset(),this},getEvents:function(){var p={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var p=this._url.tagName==="IMG",w=this._image=p?this._url:kn("img");if(An(w,"leaflet-image-layer"),this._zoomAnimated&&An(w,"leaflet-zoom-animated"),this.options.className&&An(w,this.options.className),w.onselectstart=M,w.onmousemove=M,w.onload=f(this.fire,this,"load"),w.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),p){this._url=w.src;return}w.src=this._url,w.alt=this.options.alt},_animateZoom:function(p){var w=this._map.getZoomScale(p.zoom),D=this._map._latLngBoundsToNewLayerBounds(this._bounds,p.zoom,p.center).min;Cs(this._image,D,w)},_reset:function(){var p=this._image,w=new pt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),D=w.getSize();Ci(p,w.min),p.style.width=D.x+"px",p.style.height=D.y+"px"},_updateOpacity:function(){qi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var p=this.options.errorOverlayUrl;p&&this._url!==p&&(this._url=p,this._image.src=p)},getCenter:function(){return this._bounds.getCenter()}}),uu=function(p,w,D){return new qr(p,w,D)},Bo=qr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var p=this._url.tagName==="VIDEO",w=this._image=p?this._url:kn("video");if(An(w,"leaflet-image-layer"),this._zoomAnimated&&An(w,"leaflet-zoom-animated"),this.options.className&&An(w,this.options.className),w.onselectstart=M,w.onmousemove=M,w.onloadeddata=f(this.fire,this,"load"),p){for(var D=w.getElementsByTagName("source"),$=[],nt=0;nt<D.length;nt++)$.push(D[nt].src);this._url=D.length>0?$:[w.src];return}Y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(w.style,"objectFit")&&(w.style.objectFit="fill"),w.autoplay=!!this.options.autoplay,w.loop=!!this.options.loop,w.muted=!!this.options.muted,w.playsInline=!!this.options.playsInline;for(var mt=0;mt<this._url.length;mt++){var Rt=kn("source");Rt.src=this._url[mt],w.appendChild(Rt)}}});function Bl(p,w,D){return new Bo(p,w,D)}var Wu=qr.extend({_initImage:function(){var p=this._image=this._url;An(p,"leaflet-image-layer"),this._zoomAnimated&&An(p,"leaflet-zoom-animated"),this.options.className&&An(p,this.options.className),p.onselectstart=M,p.onmousemove=M}});function No(p,w,D){return new Wu(p,w,D)}var Xr=ts.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(p,w){p&&(p instanceof se||Y(p))?(this._latlng=le(p),V(this,w)):(V(this,p),this._source=w),this.options.content&&(this._content=this.options.content)},openOn:function(p){return p=arguments.length?p:this._source._map,p.hasLayer(this)||p.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(p){return this._map?this.close():(arguments.length?this._source=p:p=this._source,this._prepareOpen(),this.openOn(p._map)),this},onAdd:function(p){this._zoomAnimated=p._zoomAnimated,this._container||this._initLayout(),p._fadeAnimated&&qi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),p._fadeAnimated&&qi(this._container,1),this.bringToFront(),this.options.interactive&&(An(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(p){p._fadeAnimated?(qi(this._container,0),this._removeTimeout=setTimeout(f(Rn,void 0,this._container),200)):Rn(this._container),this.options.interactive&&(zn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(p){return this._latlng=le(p),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(p){return this._content=p,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var p={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ar(this._container),this},bringToBack:function(){return this._map&&yi(this._container),this},_prepareOpen:function(p){var w=this._source;if(!w._map)return!1;if(w instanceof Na){w=null;var D=this._source._layers;for(var $ in D)if(D[$]._map){w=D[$];break}if(!w)return!1;this._source=w}if(!p)if(w.getCenter)p=w.getCenter();else if(w.getLatLng)p=w.getLatLng();else if(w.getBounds)p=w.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(p),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var p=this._contentNode,w=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof w=="string")p.innerHTML=w;else{for(;p.hasChildNodes();)p.removeChild(p.firstChild);p.appendChild(w)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var p=this._map.latLngToLayerPoint(this._latlng),w=Vt(this.options.offset),D=this._getAnchor();this._zoomAnimated?Ci(this._container,p.add(D)):w=w.add(p).add(D);var $=this._containerBottom=-w.y,nt=this._containerLeft=-Math.round(this._containerWidth/2)+w.x;this._container.style.bottom=$+"px",this._container.style.left=nt+"px"}},_getAnchor:function(){return[0,0]}});Jn.include({_initOverlay:function(p,w,D,$){var nt=w;return nt instanceof p||(nt=new p($).setContent(w)),D&&nt.setLatLng(D),nt}}),ts.include({_initOverlay:function(p,w,D,$){var nt=D;return nt instanceof p?(V(nt,$),nt._source=this):(nt=w&&!$?w:new p($,this),nt.setContent(D)),nt}});var oa=Xr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(p){return p=arguments.length?p:this._source._map,!p.hasLayer(this)&&p._popup&&p._popup.options.autoClose&&p.removeLayer(p._popup),p._popup=this,Xr.prototype.openOn.call(this,p)},onAdd:function(p){Xr.prototype.onAdd.call(this,p),p.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof zs||this._source.on("preclick",Ia))},onRemove:function(p){Xr.prototype.onRemove.call(this,p),p.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof zs||this._source.off("preclick",Ia))},getEvents:function(){var p=Xr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(p.preclick=this.close),this.options.keepInView&&(p.moveend=this._adjustPan),p},_initLayout:function(){var p="leaflet-popup",w=this._container=kn("div",p+" "+(this.options.className||"")+" leaflet-zoom-animated"),D=this._wrapper=kn("div",p+"-content-wrapper",w);if(this._contentNode=kn("div",p+"-content",D),to(w),Ra(this._contentNode),Mn(w,"contextmenu",Ia),this._tipContainer=kn("div",p+"-tip-container",w),this._tip=kn("div",p+"-tip",this._tipContainer),this.options.closeButton){var $=this._closeButton=kn("a",p+"-close-button",w);$.setAttribute("role","button"),$.setAttribute("aria-label","Close popup"),$.href="#close",$.innerHTML='<span aria-hidden="true">&#215;</span>',Mn($,"click",function(nt){Hi(nt),this.close()},this)}},_updateLayout:function(){var p=this._contentNode,w=p.style;w.width="",w.whiteSpace="nowrap";var D=p.offsetWidth;D=Math.min(D,this.options.maxWidth),D=Math.max(D,this.options.minWidth),w.width=D+1+"px",w.whiteSpace="",w.height="";var $=p.offsetHeight,nt=this.options.maxHeight,mt="leaflet-popup-scrolled";nt&&$>nt?(w.height=nt+"px",An(p,mt)):zn(p,mt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(p){var w=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center),D=this._getAnchor();Ci(this._container,w.add(D))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var p=this._map,w=parseInt(zu(this._container,"marginBottom"),10)||0,D=this._container.offsetHeight+w,$=this._containerWidth,nt=new St(this._containerLeft,-D-this._containerBottom);nt._add(Ps(this._container));var mt=p.layerPointToContainerPoint(nt),Rt=Vt(this.options.autoPanPadding),ae=Vt(this.options.autoPanPaddingTopLeft||Rt),pe=Vt(this.options.autoPanPaddingBottomRight||Rt),Oe=p.getSize(),Ke=0,yn=0;mt.x+$+pe.x>Oe.x&&(Ke=mt.x+$-Oe.x+pe.x),mt.x-Ke-ae.x<0&&(Ke=mt.x-ae.x),mt.y+D+pe.y>Oe.y&&(yn=mt.y+D-Oe.y+pe.y),mt.y-yn-ae.y<0&&(yn=mt.y-ae.y),(Ke||yn)&&(this.options.keepInView&&(this._autopanning=!0),p.fire("autopanstart").panBy([Ke,yn]))}},_getAnchor:function(){return Vt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),so=function(p,w){return new oa(p,w)};Jn.mergeOptions({closePopupOnClick:!0}),Jn.include({openPopup:function(p,w,D){return this._initOverlay(oa,p,w,D).openOn(this),this},closePopup:function(p){return p=arguments.length?p:this._popup,p&&p.close(),this}}),ts.include({bindPopup:function(p,w){return this._popup=this._initOverlay(oa,this._popup,p,w),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(p){return this._popup&&(this instanceof Na||(this._popup._source=this),this._popup._prepareOpen(p||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(p){return this._popup&&this._popup.setContent(p),this},getPopup:function(){return this._popup},_openPopup:function(p){if(!(!this._popup||!this._map)){Aa(p);var w=p.layer||p.target;if(this._popup._source===w&&!(w instanceof zs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(p.latlng);return}this._popup._source=w,this.openPopup(p.latlng)}},_movePopup:function(p){this._popup.setLatLng(p.latlng)},_onKeyPress:function(p){p.originalEvent.keyCode===13&&this._openPopup(p)}});var ul=Xr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(p){Xr.prototype.onAdd.call(this,p),this.setOpacity(this.options.opacity),p.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(p){Xr.prototype.onRemove.call(this,p),p.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var p=Xr.prototype.getEvents.call(this);return this.options.permanent||(p.preclick=this.close),p},_initLayout:function(){var p="leaflet-tooltip",w=p+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=kn("div",w),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(p){var w,D,$=this._map,nt=this._container,mt=$.latLngToContainerPoint($.getCenter()),Rt=$.layerPointToContainerPoint(p),ae=this.options.direction,pe=nt.offsetWidth,Oe=nt.offsetHeight,Ke=Vt(this.options.offset),yn=this._getAnchor();ae==="top"?(w=pe/2,D=Oe):ae==="bottom"?(w=pe/2,D=0):ae==="center"?(w=pe/2,D=Oe/2):ae==="right"?(w=0,D=Oe/2):ae==="left"?(w=pe,D=Oe/2):Rt.x<mt.x?(ae="right",w=0,D=Oe/2):(ae="left",w=pe+(Ke.x+yn.x)*2,D=Oe/2),p=p.subtract(Vt(w,D,!0)).add(Ke).add(yn),zn(nt,"leaflet-tooltip-right"),zn(nt,"leaflet-tooltip-left"),zn(nt,"leaflet-tooltip-top"),zn(nt,"leaflet-tooltip-bottom"),An(nt,"leaflet-tooltip-"+ae),Ci(nt,p)},_updatePosition:function(){var p=this._map.latLngToLayerPoint(this._latlng);this._setPosition(p)},setOpacity:function(p){this.options.opacity=p,this._container&&qi(this._container,p)},_animateZoom:function(p){var w=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center);this._setPosition(w)},_getAnchor:function(){return Vt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),jo=function(p,w){return new ul(p,w)};Jn.include({openTooltip:function(p,w,D){return this._initOverlay(ul,p,w,D).openOn(this),this},closeTooltip:function(p){return p.close(),this}}),ts.include({bindTooltip:function(p,w){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ul,this._tooltip,p,w),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(p){if(!(!p&&this._tooltipHandlersAdded)){var w=p?"off":"on",D={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?D.add=this._openTooltip:(D.mouseover=this._openTooltip,D.mouseout=this.closeTooltip,D.click=this._openTooltip,this._map?this._addFocusListeners():D.add=this._addFocusListeners),this._tooltip.options.sticky&&(D.mousemove=this._moveTooltip),this[w](D),this._tooltipHandlersAdded=!p}},openTooltip:function(p){return this._tooltip&&(this instanceof Na||(this._tooltip._source=this),this._tooltip._prepareOpen(p)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(p){return this._tooltip&&this._tooltip.setContent(p),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(p){var w=typeof p.getElement=="function"&&p.getElement();w&&(Mn(w,"focus",function(){this._tooltip._source=p,this.openTooltip()},this),Mn(w,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(p){var w=typeof p.getElement=="function"&&p.getElement();w&&w.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(p){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var w=this;this._map.once("moveend",function(){w._openOnceFlag=!1,w._openTooltip(p)});return}this._tooltip._source=p.layer||p.target,this.openTooltip(this._tooltip.options.sticky?p.latlng:void 0)}},_moveTooltip:function(p){var w=p.latlng,D,$;this._tooltip.options.sticky&&p.originalEvent&&(D=this._map.mouseEventToContainerPoint(p.originalEvent),$=this._map.containerPointToLayerPoint(D),w=this._map.layerPointToLatLng($)),this._tooltip.setLatLng(w)}});var oo=gs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(p){var w=p&&p.tagName==="DIV"?p:document.createElement("div"),D=this.options;if(D.html instanceof Element?(Sa(w),w.appendChild(D.html)):w.innerHTML=D.html!==!1?D.html:"",D.bgPos){var $=Vt(D.bgPos);w.style.backgroundPosition=-$.x+"px "+-$.y+"px"}return this._setIconStyles(w,"icon"),w},createShadow:function(){return null}});function Kf(p){return new oo(p)}gs.Default=su;var cl=ts.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ie.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(p){V(this,p)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(p){p._addZoomLimit(this)},onRemove:function(p){this._removeAllTiles(),Rn(this._container),p._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ar(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(p){return this.options.opacity=p,this._updateOpacity(),this},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var p=this._clampZoom(this._map.getZoom());p!==this._tileZoom&&(this._tileZoom=p,this._updateLevels()),this._update()}return this},getEvents:function(){var p={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),p.move=this._onMove),this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},createTile:function(){return document.createElement("div")},getTileSize:function(){var p=this.options.tileSize;return p instanceof St?p:new St(p,p)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(p){for(var w=this.getPane().children,D=-p(-1/0,1/0),$=0,nt=w.length,mt;$<nt;$++)mt=w[$].style.zIndex,w[$]!==this._container&&mt&&(D=p(D,+mt));isFinite(D)&&(this.options.zIndex=D+p(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ie.ielt9){qi(this._container,this.options.opacity);var p=+new Date,w=!1,D=!1;for(var $ in this._tiles){var nt=this._tiles[$];if(!(!nt.current||!nt.loaded)){var mt=Math.min(1,(p-nt.loaded)/200);qi(nt.el,mt),mt<1?w=!0:(nt.active?D=!0:this._onOpaqueTile(nt),nt.active=!0)}}D&&!this._noPrune&&this._pruneTiles(),w&&(Pt(this._fadeFrame),this._fadeFrame=bt(this._updateOpacity,this))}},_onOpaqueTile:M,_initContainer:function(){this._container||(this._container=kn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var p=this._tileZoom,w=this.options.maxZoom;if(p!==void 0){for(var D in this._levels)D=Number(D),this._levels[D].el.children.length||D===p?(this._levels[D].el.style.zIndex=w-Math.abs(p-D),this._onUpdateLevel(D)):(Rn(this._levels[D].el),this._removeTilesAtZoom(D),this._onRemoveLevel(D),delete this._levels[D]);var $=this._levels[p],nt=this._map;return $||($=this._levels[p]={},$.el=kn("div","leaflet-tile-container leaflet-zoom-animated",this._container),$.el.style.zIndex=w,$.origin=nt.project(nt.unproject(nt.getPixelOrigin()),p).round(),$.zoom=p,this._setZoomTransform($,nt.getCenter(),nt.getZoom()),M($.el.offsetWidth),this._onCreateLevel($)),this._level=$,$}},_onUpdateLevel:M,_onRemoveLevel:M,_onCreateLevel:M,_pruneTiles:function(){if(this._map){var p,w,D=this._map.getZoom();if(D>this.options.maxZoom||D<this.options.minZoom){this._removeAllTiles();return}for(p in this._tiles)w=this._tiles[p],w.retain=w.current;for(p in this._tiles)if(w=this._tiles[p],w.current&&!w.active){var $=w.coords;this._retainParent($.x,$.y,$.z,$.z-5)||this._retainChildren($.x,$.y,$.z,$.z+2)}for(p in this._tiles)this._tiles[p].retain||this._removeTile(p)}},_removeTilesAtZoom:function(p){for(var w in this._tiles)this._tiles[w].coords.z===p&&this._removeTile(w)},_removeAllTiles:function(){for(var p in this._tiles)this._removeTile(p)},_invalidateAll:function(){for(var p in this._levels)Rn(this._levels[p].el),this._onRemoveLevel(Number(p)),delete this._levels[p];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(p,w,D,$){var nt=Math.floor(p/2),mt=Math.floor(w/2),Rt=D-1,ae=new St(+nt,+mt);ae.z=+Rt;var pe=this._tileCoordsToKey(ae),Oe=this._tiles[pe];return Oe&&Oe.active?(Oe.retain=!0,!0):(Oe&&Oe.loaded&&(Oe.retain=!0),Rt>$?this._retainParent(nt,mt,Rt,$):!1)},_retainChildren:function(p,w,D,$){for(var nt=2*p;nt<2*p+2;nt++)for(var mt=2*w;mt<2*w+2;mt++){var Rt=new St(nt,mt);Rt.z=D+1;var ae=this._tileCoordsToKey(Rt),pe=this._tiles[ae];if(pe&&pe.active){pe.retain=!0;continue}else pe&&pe.loaded&&(pe.retain=!0);D+1<$&&this._retainChildren(nt,mt,D+1,$)}},_resetView:function(p){var w=p&&(p.pinch||p.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),w,w)},_animateZoom:function(p){this._setView(p.center,p.zoom,!0,p.noUpdate)},_clampZoom:function(p){var w=this.options;return w.minNativeZoom!==void 0&&p<w.minNativeZoom?w.minNativeZoom:w.maxNativeZoom!==void 0&&w.maxNativeZoom<p?w.maxNativeZoom:p},_setView:function(p,w,D,$){var nt=Math.round(w);this.options.maxZoom!==void 0&&nt>this.options.maxZoom||this.options.minZoom!==void 0&&nt<this.options.minZoom?nt=void 0:nt=this._clampZoom(nt);var mt=this.options.updateWhenZooming&&nt!==this._tileZoom;(!$||mt)&&(this._tileZoom=nt,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),nt!==void 0&&this._update(p),D||this._pruneTiles(),this._noPrune=!!D),this._setZoomTransforms(p,w)},_setZoomTransforms:function(p,w){for(var D in this._levels)this._setZoomTransform(this._levels[D],p,w)},_setZoomTransform:function(p,w,D){var $=this._map.getZoomScale(D,p.zoom),nt=p.origin.multiplyBy($).subtract(this._map._getNewPixelOrigin(w,D)).round();ie.any3d?Cs(p.el,nt,$):Ci(p.el,nt)},_resetGrid:function(){var p=this._map,w=p.options.crs,D=this._tileSize=this.getTileSize(),$=this._tileZoom,nt=this._map.getPixelWorldBounds(this._tileZoom);nt&&(this._globalTileRange=this._pxBoundsToTileRange(nt)),this._wrapX=w.wrapLng&&!this.options.noWrap&&[Math.floor(p.project([0,w.wrapLng[0]],$).x/D.x),Math.ceil(p.project([0,w.wrapLng[1]],$).x/D.y)],this._wrapY=w.wrapLat&&!this.options.noWrap&&[Math.floor(p.project([w.wrapLat[0],0],$).y/D.x),Math.ceil(p.project([w.wrapLat[1],0],$).y/D.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(p){var w=this._map,D=w._animatingZoom?Math.max(w._animateToZoom,w.getZoom()):w.getZoom(),$=w.getZoomScale(D,this._tileZoom),nt=w.project(p,this._tileZoom).floor(),mt=w.getSize().divideBy($*2);return new pt(nt.subtract(mt),nt.add(mt))},_update:function(p){var w=this._map;if(w){var D=this._clampZoom(w.getZoom());if(p===void 0&&(p=w.getCenter()),this._tileZoom!==void 0){var $=this._getTiledPixelBounds(p),nt=this._pxBoundsToTileRange($),mt=nt.getCenter(),Rt=[],ae=this.options.keepBuffer,pe=new pt(nt.getBottomLeft().subtract([ae,-ae]),nt.getTopRight().add([ae,-ae]));if(!(isFinite(nt.min.x)&&isFinite(nt.min.y)&&isFinite(nt.max.x)&&isFinite(nt.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Oe in this._tiles){var Ke=this._tiles[Oe].coords;(Ke.z!==this._tileZoom||!pe.contains(new St(Ke.x,Ke.y)))&&(this._tiles[Oe].current=!1)}if(Math.abs(D-this._tileZoom)>1){this._setView(p,D);return}for(var yn=nt.min.y;yn<=nt.max.y;yn++)for(var $n=nt.min.x;$n<=nt.max.x;$n++){var ci=new St($n,yn);if(ci.z=this._tileZoom,!!this._isValidTile(ci)){var tr=this._tiles[this._tileCoordsToKey(ci)];tr?tr.current=!0:Rt.push(ci)}}if(Rt.sort(function(Ge,ri){return Ge.distanceTo(mt)-ri.distanceTo(mt)}),Rt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qe=document.createDocumentFragment();for($n=0;$n<Rt.length;$n++)this._addTile(Rt[$n],Qe);this._level.el.appendChild(Qe)}}}},_isValidTile:function(p){var w=this._map.options.crs;if(!w.infinite){var D=this._globalTileRange;if(!w.wrapLng&&(p.x<D.min.x||p.x>D.max.x)||!w.wrapLat&&(p.y<D.min.y||p.y>D.max.y))return!1}if(!this.options.bounds)return!0;var $=this._tileCoordsToBounds(p);return Yt(this.options.bounds).overlaps($)},_keyToBounds:function(p){return this._tileCoordsToBounds(this._keyToTileCoords(p))},_tileCoordsToNwSe:function(p){var w=this._map,D=this.getTileSize(),$=p.scaleBy(D),nt=$.add(D),mt=w.unproject($,p.z),Rt=w.unproject(nt,p.z);return[mt,Rt]},_tileCoordsToBounds:function(p){var w=this._tileCoordsToNwSe(p),D=new $t(w[0],w[1]);return this.options.noWrap||(D=this._map.wrapLatLngBounds(D)),D},_tileCoordsToKey:function(p){return p.x+":"+p.y+":"+p.z},_keyToTileCoords:function(p){var w=p.split(":"),D=new St(+w[0],+w[1]);return D.z=+w[2],D},_removeTile:function(p){var w=this._tiles[p];w&&(Rn(w.el),delete this._tiles[p],this.fire("tileunload",{tile:w.el,coords:this._keyToTileCoords(p)}))},_initTile:function(p){An(p,"leaflet-tile");var w=this.getTileSize();p.style.width=w.x+"px",p.style.height=w.y+"px",p.onselectstart=M,p.onmousemove=M,ie.ielt9&&this.options.opacity<1&&qi(p,this.options.opacity)},_addTile:function(p,w){var D=this._getTilePos(p),$=this._tileCoordsToKey(p),nt=this.createTile(this._wrapCoords(p),f(this._tileReady,this,p));this._initTile(nt),this.createTile.length<2&&bt(f(this._tileReady,this,p,null,nt)),Ci(nt,D),this._tiles[$]={el:nt,coords:p,current:!0},w.appendChild(nt),this.fire("tileloadstart",{tile:nt,coords:p})},_tileReady:function(p,w,D){w&&this.fire("tileerror",{error:w,tile:D,coords:p});var $=this._tileCoordsToKey(p);D=this._tiles[$],D&&(D.loaded=+new Date,this._map._fadeAnimated?(qi(D.el,0),Pt(this._fadeFrame),this._fadeFrame=bt(this._updateOpacity,this)):(D.active=!0,this._pruneTiles()),w||(An(D.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:D.el,coords:p})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ie.ielt9||!this._map._fadeAnimated?bt(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(p){return p.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(p){var w=new St(this._wrapX?x(p.x,this._wrapX):p.x,this._wrapY?x(p.y,this._wrapY):p.y);return w.z=p.z,w},_pxBoundsToTileRange:function(p){var w=this.getTileSize();return new pt(p.min.unscaleBy(w).floor(),p.max.unscaleBy(w).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var p in this._tiles)if(!this._tiles[p].loaded)return!1;return!0}});function nh(p){return new cl(p)}var Ls=cl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(p,w){this._url=p,w=V(this,w),w.detectRetina&&ie.retina&&w.maxZoom>0?(w.tileSize=Math.floor(w.tileSize/2),w.zoomReverse?(w.zoomOffset--,w.minZoom=Math.min(w.maxZoom,w.minZoom+1)):(w.zoomOffset++,w.maxZoom=Math.max(w.minZoom,w.maxZoom-1)),w.minZoom=Math.max(0,w.minZoom)):w.zoomReverse?w.minZoom=Math.min(w.maxZoom,w.minZoom):w.maxZoom=Math.max(w.minZoom,w.maxZoom),typeof w.subdomains=="string"&&(w.subdomains=w.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(p,w){return this._url===p&&w===void 0&&(w=!0),this._url=p,w||this.redraw(),this},createTile:function(p,w){var D=document.createElement("img");return Mn(D,"load",f(this._tileOnLoad,this,w,D)),Mn(D,"error",f(this._tileOnError,this,w,D)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(D.referrerPolicy=this.options.referrerPolicy),D.alt="",D.src=this.getTileUrl(p),D},getTileUrl:function(p){var w={r:ie.retina?"@2x":"",s:this._getSubdomain(p),x:p.x,y:p.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var D=this._globalTileRange.max.y-p.y;this.options.tms&&(w.y=D),w["-y"]=D}return X(this._url,r(w,this.options))},_tileOnLoad:function(p,w){ie.ielt9?setTimeout(f(p,this,null,w),0):p(null,w)},_tileOnError:function(p,w,D){var $=this.options.errorTileUrl;$&&w.getAttribute("src")!==$&&(w.src=$),p(D,w)},_onTileRemove:function(p){p.tile.onload=null},_getZoomForUrl:function(){var p=this._tileZoom,w=this.options.maxZoom,D=this.options.zoomReverse,$=this.options.zoomOffset;return D&&(p=w-p),p+$},_getSubdomain:function(p){var w=Math.abs(p.x+p.y)%this.options.subdomains.length;return this.options.subdomains[w]},_abortLoading:function(){var p,w;for(p in this._tiles)if(this._tiles[p].coords.z!==this._tileZoom&&(w=this._tiles[p].el,w.onload=M,w.onerror=M,!w.complete)){w.src=J;var D=this._tiles[p].coords;Rn(w),delete this._tiles[p],this.fire("tileabort",{tile:w,coords:D})}},_removeTile:function(p){var w=this._tiles[p];if(w)return w.el.setAttribute("src",J),cl.prototype._removeTile.call(this,p)},_tileReady:function(p,w,D){if(!(!this._map||D&&D.getAttribute("src")===J))return cl.prototype._tileReady.call(this,p,w,D)}});function Kr(p,w){return new Ls(p,w)}var is=Ls.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(p,w){this._url=p;var D=r({},this.defaultWmsParams);for(var $ in w)$ in this.options||(D[$]=w[$]);w=V(this,w);var nt=w.detectRetina&&ie.retina?2:1,mt=this.getTileSize();D.width=mt.x*nt,D.height=mt.y*nt,this.wmsParams=D},onAdd:function(p){this._crs=this.options.crs||p.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var w=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[w]=this._crs.code,Ls.prototype.onAdd.call(this,p)},getTileUrl:function(p){var w=this._tileCoordsToNwSe(p),D=this._crs,$=Tt(D.project(w[0]),D.project(w[1])),nt=$.min,mt=$.max,Rt=(this._wmsVersion>=1.3&&this._crs===Vu?[nt.y,nt.x,mt.y,mt.x]:[nt.x,nt.y,mt.x,mt.y]).join(","),ae=Ls.prototype.getTileUrl.call(this,p);return ae+H(this.wmsParams,ae,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Rt},setParams:function(p,w){return r(this.wmsParams,p),w||this.redraw(),this}});function Ze(p,w){return new is(p,w)}Ls.WMS=is,Kr.wms=Ze;var Qr=ts.extend({options:{padding:.1},initialize:function(p){V(this,p),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),An(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var p={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(p.zoomanim=this._onAnimZoom),p},_onAnimZoom:function(p){this._updateTransform(p.center,p.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(p,w){var D=this._map.getZoomScale(w,this._zoom),$=this._map.getSize().multiplyBy(.5+this.options.padding),nt=this._map.project(this._center,w),mt=$.multiplyBy(-D).add(nt).subtract(this._map._getNewPixelOrigin(p,w));ie.any3d?Cs(this._container,mt,D):Ci(this._container,mt)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var p in this._layers)this._layers[p]._reset()},_onZoomEnd:function(){for(var p in this._layers)this._layers[p]._project()},_updatePaths:function(){for(var p in this._layers)this._layers[p]._update()},_update:function(){var p=this.options.padding,w=this._map.getSize(),D=this._map.containerPointToLayerPoint(w.multiplyBy(-p)).round();this._bounds=new pt(D,D.add(w.multiplyBy(1+p*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Is=Qr.extend({options:{tolerance:0},getEvents:function(){var p=Qr.prototype.getEvents.call(this);return p.viewprereset=this._onViewPreReset,p},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var p=this._container=document.createElement("canvas");Mn(p,"mousemove",this._onMouseMove,this),Mn(p,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Mn(p,"mouseout",this._handleMouseOut,this),p._leaflet_disable_events=!0,this._ctx=p.getContext("2d")},_destroyContainer:function(){Pt(this._redrawRequest),delete this._ctx,Rn(this._container),_i(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var p;this._redrawBounds=null;for(var w in this._layers)p=this._layers[w],p._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qr.prototype._update.call(this);var p=this._bounds,w=this._container,D=p.getSize(),$=ie.retina?2:1;Ci(w,p.min),w.width=$*D.x,w.height=$*D.y,w.style.width=D.x+"px",w.style.height=D.y+"px",ie.retina&&this._ctx.scale(2,2),this._ctx.translate(-p.min.x,-p.min.y),this.fire("update")}},_reset:function(){Qr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(p){this._updateDashArray(p),this._layers[g(p)]=p;var w=p._order={layer:p,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=w),this._drawLast=w,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(p){this._requestRedraw(p)},_removePath:function(p){var w=p._order,D=w.next,$=w.prev;D?D.prev=$:this._drawLast=$,$?$.next=D:this._drawFirst=D,delete p._order,delete this._layers[g(p)],this._requestRedraw(p)},_updatePath:function(p){this._extendRedrawBounds(p),p._project(),p._update(),this._requestRedraw(p)},_updateStyle:function(p){this._updateDashArray(p),this._requestRedraw(p)},_updateDashArray:function(p){if(typeof p.options.dashArray=="string"){var w=p.options.dashArray.split(/[, ]+/),D=[],$,nt;for(nt=0;nt<w.length;nt++){if($=Number(w[nt]),isNaN($))return;D.push($)}p.options._dashArray=D}else p.options._dashArray=p.options.dashArray},_requestRedraw:function(p){this._map&&(this._extendRedrawBounds(p),this._redrawRequest=this._redrawRequest||bt(this._redraw,this))},_extendRedrawBounds:function(p){if(p._pxBounds){var w=(p.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new pt,this._redrawBounds.extend(p._pxBounds.min.subtract([w,w])),this._redrawBounds.extend(p._pxBounds.max.add([w,w]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var p=this._redrawBounds;if(p){var w=p.getSize();this._ctx.clearRect(p.min.x,p.min.y,w.x,w.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var p,w=this._redrawBounds;if(this._ctx.save(),w){var D=w.getSize();this._ctx.beginPath(),this._ctx.rect(w.min.x,w.min.y,D.x,D.y),this._ctx.clip()}this._drawing=!0;for(var $=this._drawFirst;$;$=$.next)p=$.layer,(!w||p._pxBounds&&p._pxBounds.intersects(w))&&p._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(p,w){if(this._drawing){var D,$,nt,mt,Rt=p._parts,ae=Rt.length,pe=this._ctx;if(ae){for(pe.beginPath(),D=0;D<ae;D++){for($=0,nt=Rt[D].length;$<nt;$++)mt=Rt[D][$],pe[$?"lineTo":"moveTo"](mt.x,mt.y);w&&pe.closePath()}this._fillStroke(pe,p)}}},_updateCircle:function(p){if(!(!this._drawing||p._empty())){var w=p._point,D=this._ctx,$=Math.max(Math.round(p._radius),1),nt=(Math.max(Math.round(p._radiusY),1)||$)/$;nt!==1&&(D.save(),D.scale(1,nt)),D.beginPath(),D.arc(w.x,w.y/nt,$,0,Math.PI*2,!1),nt!==1&&D.restore(),this._fillStroke(D,p)}},_fillStroke:function(p,w){var D=w.options;D.fill&&(p.globalAlpha=D.fillOpacity,p.fillStyle=D.fillColor||D.color,p.fill(D.fillRule||"evenodd")),D.stroke&&D.weight!==0&&(p.setLineDash&&p.setLineDash(w.options&&w.options._dashArray||[]),p.globalAlpha=D.opacity,p.lineWidth=D.weight,p.strokeStyle=D.color,p.lineCap=D.lineCap,p.lineJoin=D.lineJoin,p.stroke())},_onClick:function(p){for(var w=this._map.mouseEventToLayerPoint(p),D,$,nt=this._drawFirst;nt;nt=nt.next)D=nt.layer,D.options.interactive&&D._containsPoint(w)&&(!(p.type==="click"||p.type==="preclick")||!this._map._draggableMoved(D))&&($=D);this._fireEvent($?[$]:!1,p)},_onMouseMove:function(p){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var w=this._map.mouseEventToLayerPoint(p);this._handleMouseHover(p,w)}},_handleMouseOut:function(p){var w=this._hoveredLayer;w&&(zn(this._container,"leaflet-interactive"),this._fireEvent([w],p,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(p,w){if(!this._mouseHoverThrottled){for(var D,$,nt=this._drawFirst;nt;nt=nt.next)D=nt.layer,D.options.interactive&&D._containsPoint(w)&&($=D);$!==this._hoveredLayer&&(this._handleMouseOut(p),$&&(An(this._container,"leaflet-interactive"),this._fireEvent([$],p,"mouseover"),this._hoveredLayer=$)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,p),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(p,w,D){this._map._fireDOMEvent(w,D||w.type,p)},_bringToFront:function(p){var w=p._order;if(w){var D=w.next,$=w.prev;if(D)D.prev=$;else return;$?$.next=D:D&&(this._drawFirst=D),w.prev=this._drawLast,this._drawLast.next=w,w.next=null,this._drawLast=w,this._requestRedraw(p)}},_bringToBack:function(p){var w=p._order;if(w){var D=w.next,$=w.prev;if($)$.next=D;else return;D?D.prev=$:$&&(this._drawLast=$),w.prev=null,w.next=this._drawFirst,this._drawFirst.prev=w,this._drawFirst=w,this._requestRedraw(p)}}});function lo(p){return ie.canvas?new Is(p):null}var Fo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(p){return document.createElement("<lvml:"+p+' class="lvml">')}}catch{}return function(p){return document.createElement("<"+p+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ye={_initContainer:function(){this._container=kn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qr.prototype._update.call(this),this.fire("update"))},_initPath:function(p){var w=p._container=Fo("shape");An(w,"leaflet-vml-shape "+(this.options.className||"")),w.coordsize="1 1",p._path=Fo("path"),w.appendChild(p._path),this._updateStyle(p),this._layers[g(p)]=p},_addPath:function(p){var w=p._container;this._container.appendChild(w),p.options.interactive&&p.addInteractiveTarget(w)},_removePath:function(p){var w=p._container;Rn(w),p.removeInteractiveTarget(w),delete this._layers[g(p)]},_updateStyle:function(p){var w=p._stroke,D=p._fill,$=p.options,nt=p._container;nt.stroked=!!$.stroke,nt.filled=!!$.fill,$.stroke?(w||(w=p._stroke=Fo("stroke")),nt.appendChild(w),w.weight=$.weight+"px",w.color=$.color,w.opacity=$.opacity,$.dashArray?w.dashStyle=Y($.dashArray)?$.dashArray.join(" "):$.dashArray.replace(/( *, *)/g," "):w.dashStyle="",w.endcap=$.lineCap.replace("butt","flat"),w.joinstyle=$.lineJoin):w&&(nt.removeChild(w),p._stroke=null),$.fill?(D||(D=p._fill=Fo("fill")),nt.appendChild(D),D.color=$.fillColor||$.color,D.opacity=$.fillOpacity):D&&(nt.removeChild(D),p._fill=null)},_updateCircle:function(p){var w=p._point.round(),D=Math.round(p._radius),$=Math.round(p._radiusY||D);this._setPath(p,p._empty()?"M0 0":"AL "+w.x+","+w.y+" "+D+","+$+" 0,"+65535*360)},_setPath:function(p,w){p._path.v=w},_bringToFront:function(p){ar(p._container)},_bringToBack:function(p){yi(p._container)}},_s=ie.vml?Fo:nn,hl=Qr.extend({_initContainer:function(){this._container=_s("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_s("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Rn(this._container),_i(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qr.prototype._update.call(this);var p=this._bounds,w=p.getSize(),D=this._container;(!this._svgSize||!this._svgSize.equals(w))&&(this._svgSize=w,D.setAttribute("width",w.x),D.setAttribute("height",w.y)),Ci(D,p.min),D.setAttribute("viewBox",[p.min.x,p.min.y,w.x,w.y].join(" ")),this.fire("update")}},_initPath:function(p){var w=p._path=_s("path");p.options.className&&An(w,p.options.className),p.options.interactive&&An(w,"leaflet-interactive"),this._updateStyle(p),this._layers[g(p)]=p},_addPath:function(p){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(p._path),p.addInteractiveTarget(p._path)},_removePath:function(p){Rn(p._path),p.removeInteractiveTarget(p._path),delete this._layers[g(p)]},_updatePath:function(p){p._project(),p._update()},_updateStyle:function(p){var w=p._path,D=p.options;w&&(D.stroke?(w.setAttribute("stroke",D.color),w.setAttribute("stroke-opacity",D.opacity),w.setAttribute("stroke-width",D.weight),w.setAttribute("stroke-linecap",D.lineCap),w.setAttribute("stroke-linejoin",D.lineJoin),D.dashArray?w.setAttribute("stroke-dasharray",D.dashArray):w.removeAttribute("stroke-dasharray"),D.dashOffset?w.setAttribute("stroke-dashoffset",D.dashOffset):w.removeAttribute("stroke-dashoffset")):w.setAttribute("stroke","none"),D.fill?(w.setAttribute("fill",D.fillColor||D.color),w.setAttribute("fill-opacity",D.fillOpacity),w.setAttribute("fill-rule",D.fillRule||"evenodd")):w.setAttribute("fill","none"))},_updatePoly:function(p,w){this._setPath(p,tn(p._parts,w))},_updateCircle:function(p){var w=p._point,D=Math.max(Math.round(p._radius),1),$=Math.max(Math.round(p._radiusY),1)||D,nt="a"+D+","+$+" 0 1,0 ",mt=p._empty()?"M0 0":"M"+(w.x-D)+","+w.y+nt+D*2+",0 "+nt+-D*2+",0 ";this._setPath(p,mt)},_setPath:function(p,w){p._path.setAttribute("d",w)},_bringToFront:function(p){ar(p._path)},_bringToBack:function(p){yi(p._path)}});ie.vml&&hl.include(Ye);function Yu(p){return ie.svg||ie.vml?new hl(p):null}Jn.include({getRenderer:function(p){var w=p.options.renderer||this._getPaneRenderer(p.options.pane)||this.options.renderer||this._renderer;return w||(w=this._renderer=this._createRenderer()),this.hasLayer(w)||this.addLayer(w),w},_getPaneRenderer:function(p){if(p==="overlayPane"||p===void 0)return!1;var w=this._paneRenderers[p];return w===void 0&&(w=this._createRenderer({pane:p}),this._paneRenderers[p]=w),w},_createRenderer:function(p){return this.options.preferCanvas&&lo(p)||Yu(p)}});var Uo=Pr.extend({initialize:function(p,w){Pr.prototype.initialize.call(this,this._boundsToLatLngs(p),w)},setBounds:function(p){return this.setLatLngs(this._boundsToLatLngs(p))},_boundsToLatLngs:function(p){return p=Yt(p),[p.getSouthWest(),p.getNorthWest(),p.getNorthEast(),p.getSouthEast()]}});function ef(p,w){return new Uo(p,w)}hl.create=_s,hl.pointsToPath=tn,es.geometryToLayer=kr,es.coordsToLatLng=ll,es.coordsToLatLngs=ao,es.latLngToCoords=Zu,es.latLngsToCoords=lu,es.getFeature=Lo,es.asFeature=Gu,Jn.mergeOptions({boxZoom:!0});var Ma=eo.extend({initialize:function(p){this._map=p,this._container=p._container,this._pane=p._panes.overlayPane,this._resetStateTimeout=0,p.on("unload",this._destroy,this)},addHooks:function(){Mn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){_i(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Rn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(p){if(!p.shiftKey||p.which!==1&&p.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ka(),gc(),this._startPoint=this._map.mouseEventToContainerPoint(p),Mn(document,{contextmenu:Aa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(p){this._moved||(this._moved=!0,this._box=kn("div","leaflet-zoom-box",this._container),An(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(p);var w=new pt(this._point,this._startPoint),D=w.getSize();Ci(this._box,w.min),this._box.style.width=D.x+"px",this._box.style.height=D.y+"px"},_finish:function(){this._moved&&(Rn(this._box),zn(this._container,"leaflet-crosshair")),ms(),Cl(),_i(document,{contextmenu:Aa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(p){if(!(p.which!==1&&p.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var w=new $t(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(w).fire("boxzoomend",{boxZoomBounds:w})}},_onKeyDown:function(p){p.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Jn.addInitHook("addHandler","boxZoom",Ma),Jn.mergeOptions({doubleClickZoom:!0});var Xu=eo.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(p){var w=this._map,D=w.getZoom(),$=w.options.zoomDelta,nt=p.originalEvent.shiftKey?D-$:D+$;w.options.doubleClickZoom==="center"?w.setZoom(nt):w.setZoomAround(p.containerPoint,nt)}});Jn.addInitHook("addHandler","doubleClickZoom",Xu),Jn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var uo=eo.extend({addHooks:function(){if(!this._draggable){var p=this._map;this._draggable=new Ds(p._mapPane,p._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),p.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),p.on("zoomend",this._onZoomEnd,this),p.whenReady(this._onZoomEnd,this))}An(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zn(this._map._container,"leaflet-grab"),zn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var p=this._map;if(p._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var w=Yt(this._map.options.maxBounds);this._offsetLimit=Tt(this._map.latLngToContainerPoint(w.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(w.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;p.fire("movestart").fire("dragstart"),p.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(p){if(this._map.options.inertia){var w=this._lastTime=+new Date,D=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(D),this._times.push(w),this._prunePositions(w)}this._map.fire("move",p).fire("drag",p)},_prunePositions:function(p){for(;this._positions.length>1&&p-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var p=this._map.getSize().divideBy(2),w=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=w.subtract(p).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(p,w){return p-(p-w)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var p=this._draggable._newPos.subtract(this._draggable._startPos),w=this._offsetLimit;p.x<w.min.x&&(p.x=this._viscousLimit(p.x,w.min.x)),p.y<w.min.y&&(p.y=this._viscousLimit(p.y,w.min.y)),p.x>w.max.x&&(p.x=this._viscousLimit(p.x,w.max.x)),p.y>w.max.y&&(p.y=this._viscousLimit(p.y,w.max.y)),this._draggable._newPos=this._draggable._startPos.add(p)}},_onPreDragWrap:function(){var p=this._worldWidth,w=Math.round(p/2),D=this._initialWorldOffset,$=this._draggable._newPos.x,nt=($-w+D)%p+w-D,mt=($+w+D)%p-w-D,Rt=Math.abs(nt+D)<Math.abs(mt+D)?nt:mt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Rt},_onDragEnd:function(p){var w=this._map,D=w.options,$=!D.inertia||p.noInertia||this._times.length<2;if(w.fire("dragend",p),$)w.fire("moveend");else{this._prunePositions(+new Date);var nt=this._lastPos.subtract(this._positions[0]),mt=(this._lastTime-this._times[0])/1e3,Rt=D.easeLinearity,ae=nt.multiplyBy(Rt/mt),pe=ae.distanceTo([0,0]),Oe=Math.min(D.inertiaMaxSpeed,pe),Ke=ae.multiplyBy(Oe/pe),yn=Oe/(D.inertiaDeceleration*Rt),$n=Ke.multiplyBy(-yn/2).round();!$n.x&&!$n.y?w.fire("moveend"):($n=w._limitOffset($n,w.options.maxBounds),bt(function(){w.panBy($n,{duration:yn,easeLinearity:Rt,noMoveStart:!0,animate:!0})}))}}});Jn.addInitHook("addHandler","dragging",uo),Jn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ku=eo.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(p){this._map=p,this._setPanDelta(p.options.keyboardPanDelta),this._setZoomDelta(p.options.zoomDelta)},addHooks:function(){var p=this._map._container;p.tabIndex<=0&&(p.tabIndex="0"),Mn(p,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),_i(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var p=document.body,w=document.documentElement,D=p.scrollTop||w.scrollTop,$=p.scrollLeft||w.scrollLeft;this._map._container.focus(),window.scrollTo($,D)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(p){var w=this._panKeys={},D=this.keyCodes,$,nt;for($=0,nt=D.left.length;$<nt;$++)w[D.left[$]]=[-1*p,0];for($=0,nt=D.right.length;$<nt;$++)w[D.right[$]]=[p,0];for($=0,nt=D.down.length;$<nt;$++)w[D.down[$]]=[0,p];for($=0,nt=D.up.length;$<nt;$++)w[D.up[$]]=[0,-1*p]},_setZoomDelta:function(p){var w=this._zoomKeys={},D=this.keyCodes,$,nt;for($=0,nt=D.zoomIn.length;$<nt;$++)w[D.zoomIn[$]]=p;for($=0,nt=D.zoomOut.length;$<nt;$++)w[D.zoomOut[$]]=-p},_addHooks:function(){Mn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){_i(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(p){if(!(p.altKey||p.ctrlKey||p.metaKey)){var w=p.keyCode,D=this._map,$;if(w in this._panKeys){if(!D._panAnim||!D._panAnim._inProgress)if($=this._panKeys[w],p.shiftKey&&($=Vt($).multiplyBy(3)),D.options.maxBounds&&($=D._limitOffset(Vt($),D.options.maxBounds)),D.options.worldCopyJump){var nt=D.wrapLatLng(D.unproject(D.project(D.getCenter()).add($)));D.panTo(nt)}else D.panBy($)}else if(w in this._zoomKeys)D.setZoom(D.getZoom()+(p.shiftKey?3:1)*this._zoomKeys[w]);else if(w===27&&D._popup&&D._popup.options.closeOnEscapeKey)D.closePopup();else return;Aa(p)}}});Jn.addInitHook("addHandler","keyboard",Ku),Jn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Nl=eo.extend({addHooks:function(){Mn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){_i(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(p){var w=zi(p),D=this._map.options.wheelDebounceTime;this._delta+=w,this._lastMousePos=this._map.mouseEventToContainerPoint(p),this._startTime||(this._startTime=+new Date);var $=Math.max(D-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),$),Aa(p)},_performZoom:function(){var p=this._map,w=p.getZoom(),D=this._map.options.zoomSnap||0;p._stop();var $=this._delta/(this._map.options.wheelPxPerZoomLevel*4),nt=4*Math.log(2/(1+Math.exp(-Math.abs($))))/Math.LN2,mt=D?Math.ceil(nt/D)*D:nt,Rt=p._limitZoom(w+(this._delta>0?mt:-mt))-w;this._delta=0,this._startTime=null,Rt&&(p.options.scrollWheelZoom==="center"?p.setZoom(w+Rt):p.setZoomAround(this._lastMousePos,w+Rt))}});Jn.addInitHook("addHandler","scrollWheelZoom",Nl);var Vo=600;Jn.mergeOptions({tapHold:ie.touchNative&&ie.safari&&ie.mobile,tapTolerance:15});var cu=eo.extend({addHooks:function(){Mn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){_i(this._map._container,"touchstart",this._onDown,this)},_onDown:function(p){if(clearTimeout(this._holdTimeout),p.touches.length===1){var w=p.touches[0];this._startPos=this._newPos=new St(w.clientX,w.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(Mn(document,"touchend",Hi),Mn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",w))},this),Vo),Mn(document,"touchend touchcancel contextmenu",this._cancel,this),Mn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function p(){_i(document,"touchend",Hi),_i(document,"touchend touchcancel",p)},_cancel:function(){clearTimeout(this._holdTimeout),_i(document,"touchend touchcancel contextmenu",this._cancel,this),_i(document,"touchmove",this._onMove,this)},_onMove:function(p){var w=p.touches[0];this._newPos=new St(w.clientX,w.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(p,w){var D=new MouseEvent(p,{bubbles:!0,cancelable:!0,view:window,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY});D._simulated=!0,w.target.dispatchEvent(D)}});Jn.addInitHook("addHandler","tapHold",cu),Jn.mergeOptions({touchZoom:ie.touch,bounceAtZoomLimits:!0});var la=eo.extend({addHooks:function(){An(this._map._container,"leaflet-touch-zoom"),Mn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zn(this._map._container,"leaflet-touch-zoom"),_i(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(p){var w=this._map;if(!(!p.touches||p.touches.length!==2||w._animatingZoom||this._zooming)){var D=w.mouseEventToContainerPoint(p.touches[0]),$=w.mouseEventToContainerPoint(p.touches[1]);this._centerPoint=w.getSize()._divideBy(2),this._startLatLng=w.containerPointToLatLng(this._centerPoint),w.options.touchZoom!=="center"&&(this._pinchStartLatLng=w.containerPointToLatLng(D.add($)._divideBy(2))),this._startDist=D.distanceTo($),this._startZoom=w.getZoom(),this._moved=!1,this._zooming=!0,w._stop(),Mn(document,"touchmove",this._onTouchMove,this),Mn(document,"touchend touchcancel",this._onTouchEnd,this),Hi(p)}},_onTouchMove:function(p){if(!(!p.touches||p.touches.length!==2||!this._zooming)){var w=this._map,D=w.mouseEventToContainerPoint(p.touches[0]),$=w.mouseEventToContainerPoint(p.touches[1]),nt=D.distanceTo($)/this._startDist;if(this._zoom=w.getScaleZoom(nt,this._startZoom),!w.options.bounceAtZoomLimits&&(this._zoom<w.getMinZoom()&&nt<1||this._zoom>w.getMaxZoom()&&nt>1)&&(this._zoom=w._limitZoom(this._zoom)),w.options.touchZoom==="center"){if(this._center=this._startLatLng,nt===1)return}else{var mt=D._add($)._divideBy(2)._subtract(this._centerPoint);if(nt===1&&mt.x===0&&mt.y===0)return;this._center=w.unproject(w.project(this._pinchStartLatLng,this._zoom).subtract(mt),this._zoom)}this._moved||(w._moveStart(!0,!1),this._moved=!0),Pt(this._animRequest);var Rt=f(w._move,w,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=bt(Rt,this,!0),Hi(p)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Pt(this._animRequest),_i(document,"touchmove",this._onTouchMove,this),_i(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Jn.addInitHook("addHandler","touchZoom",la),Jn.BoxZoom=Ma,Jn.DoubleClickZoom=Xu,Jn.Drag=uo,Jn.Keyboard=Ku,Jn.ScrollWheelZoom=Nl,Jn.TapHold=cu,Jn.TouchZoom=la,n.Bounds=pt,n.Browser=ie,n.CRS=Ae,n.Canvas=Is,n.Circle=Il,n.CircleMarker=ro,n.Class=ye,n.Control=sa,n.DivIcon=oo,n.DivOverlay=Xr,n.DomEvent=kl,n.DomUtil=Pl,n.Draggable=Ds,n.Evented=Ot,n.FeatureGroup=Na,n.GeoJSON=es,n.GridLayer=cl,n.Handler=eo,n.Icon=gs,n.ImageOverlay=qr,n.LatLng=se,n.LatLngBounds=$t,n.Layer=ts,n.LayerGroup=io,n.LineUtil=Nu,n.Map=Jn,n.Marker=Ll,n.Mixin=Yf,n.Path=zs,n.Point=St,n.PolyUtil=bc,n.Polygon=Pr,n.Polyline=ui,n.Popup=oa,n.PosAnimation=Do,n.Projection=Fu,n.Rectangle=Uo,n.Renderer=Qr,n.SVG=hl,n.SVGOverlay=Wu,n.TileLayer=Ls,n.Tooltip=ul,n.Transformation=we,n.Util=re,n.VideoOverlay=Bo,n.bind=f,n.bounds=Tt,n.canvas=lo,n.circle=eh,n.circleMarker=Hu,n.control=Os,n.divIcon=Kf,n.extend=r,n.featureGroup=tf,n.geoJSON=ns,n.geoJson=Ro,n.gridLayer=nh,n.icon=qu,n.imageOverlay=uu,n.latLng=le,n.latLngBounds=Yt,n.layerGroup=$u,n.map=Iu,n.marker=th,n.point=Vt,n.polygon=ou,n.polyline=Rl,n.popup=so,n.rectangle=ef,n.setOptions=V,n.stamp=g,n.svg=Yu,n.svgOverlay=No,n.tileLayer=Kr,n.tooltip=jo,n.transformation=ce,n.version=i,n.videoOverlay=Bl;var co=window.L;n.noConflict=function(){return window.L=co,this},window.L=n}))})(ry,ry.exports)),ry.exports}var Uy=n5();const HT=Ou(Uy);function i5(t){return t.split(" ").filter(Boolean)}function r5(t,e){for(const n of i5(e))Uy.DomUtil.addClass(t,n)}function Kk(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Qk(t,e){return e==null?function(i,r){const l=Z.useRef(void 0);return l.current||(l.current=t(i,r)),l}:function(i,r){const l=Z.useRef(void 0);l.current||(l.current=t(i,r));const f=Z.useRef(i),{instance:a}=l.current;return Z.useEffect(function(){f.current!==i&&(e(a,i,f.current),f.current=i)},[a,i,e]),l}}function Jk(t,e){Z.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function a5(t){return function(n){const i=J0(),r=t(TS(n,i),i);return YB(i.map,n.attribution),Xk(r.current,n.eventHandlers),Jk(r.current,i),r}}function s5(t,e){const n=Z.useRef(void 0);Z.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function o5(t){return function(n){const i=J0(),r=t(TS(n,i),i);return Xk(r.current,n.eventHandlers),Jk(r.current,i),s5(r.current,n),r}}function l5(t,e){const n=Qk(t,e),i=o5(n);return JB(i)}function u5(t,e){const n=Qk(t,e),i=a5(n);return t5(i)}function c5(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function AS(){return J0().map}function pb(t,e){const n=AS();return Z.useEffect(function(){return n.on(t,e),function(){n.off(t,e)}},[n,t,e]),n}const mb=l5(function({data:e,...n},i){const r=new Uy.GeoJSON(e,n);return Kk(r,QB(i,{overlayContainer:r}))},function(e,n,i){n.style!==i.style&&(n.style==null?e.resetStyle():e.setStyle(n.style))});function h5({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:l,placeholder:f,style:a,whenReady:g,zoom:_,...x},M){const[O]=Z.useState({className:r,id:l,style:a}),[z,F]=Z.useState(null),V=Z.useRef(void 0);Z.useImperativeHandle(M,()=>z?.map??null,[z]);const H=Z.useCallback(X=>{if(X!==null&&!V.current){const Y=new Uy.Map(X,x);V.current=Y,n!=null&&_!=null?Y.setView(n,_):t!=null&&Y.fitBounds(t,e),g!=null&&Y.whenReady(g),F(KB(Y))}},[]);Z.useEffect(()=>()=>{z?.map.remove()},[z]);const Q=z?yy.createElement(Q0,{value:z},i):f??null;return yy.createElement("div",{...O,ref:H},Q)}const f5=Z.forwardRef(h5),d5=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"];function ZT(t,e){const{[e]:n,...i}=t;return i}function p5(t,e,n){if(d5.indexOf(t)!==-1)throw new Error(`You must use a unique name for a pane that is not a default Leaflet pane: ${t}`);if(n.map.getPane(t)!=null)throw new Error(`A pane with this name already exists: ${t}`);const i=e.pane??n.pane,r=i?n.map.getPane(i):void 0,l=n.map.createPane(t,r);if(e.className!=null&&r5(l,e.className),e.style!=null)for(const f of Object.keys(e.style))l.style[f]=e.style[f];return l}function m5(t,e){const[n]=Z.useState(t.name),[i,r]=Z.useState(null);Z.useImperativeHandle(e,()=>i,[i]);const l=J0(),f=Z.useMemo(()=>({...l,pane:n}),[l]);return Z.useEffect(()=>(r(p5(n,t,l)),function(){l.map.getPane(n)?.remove?.(),l.map._panes!=null&&(l.map._panes=ZT(l.map._panes,n),l.map._paneRenderers=ZT(l.map._paneRenderers,n))}),[]),t.children!=null&&i!=null?Fy.createPortal(yy.createElement(Q0,{value:f},t.children),i):null}const gb=Z.forwardRef(m5),g5=u5(function({url:e,...n},i){const r=new Uy.TileLayer(e,TS(n,i));return Kk(r,i)},function(e,n,i){c5(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});function tO(t,e,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function mw(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!GT(t[0])||!GT(t[1]))throw new Error("coordinates must contain numbers");return tO({type:"Point",coordinates:t},e,n)}function y5(t,e,n={}){for(const r of t){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let l=0;l<r[r.length-1].length;l++)if(r[r.length-1][l]!==r[0][l])throw new Error("First and last Position are not equivalent.")}return tO({type:"Polygon",coordinates:t},e,n)}function GT(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function tx(t,e,n){if(t!==null)for(var i,r,l,f,a,g,_,x=0,M=0,O,z=t.type,F=z==="FeatureCollection",V=z==="Feature",H=F?t.features.length:1,Q=0;Q<H;Q++){_=F?t.features[Q].geometry:V?t.geometry:t,O=_?_.type==="GeometryCollection":!1,a=O?_.geometries.length:1;for(var X=0;X<a;X++){var Y=0,W=0;if(f=O?_.geometries[X]:_,f!==null){g=f.coordinates;var J=f.type;switch(x=n&&(J==="Polygon"||J==="MultiPolygon")?1:0,J){case null:break;case"Point":if(e(g,M,Q,Y,W)===!1)return!1;M++,Y++;break;case"LineString":case"MultiPoint":for(i=0;i<g.length;i++){if(e(g[i],M,Q,Y,W)===!1)return!1;M++,J==="MultiPoint"&&Y++}J==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(i=0;i<g.length;i++){for(r=0;r<g[i].length-x;r++){if(e(g[i][r],M,Q,Y,W)===!1)return!1;M++}J==="MultiLineString"&&Y++,J==="Polygon"&&W++}J==="Polygon"&&Y++;break;case"MultiPolygon":for(i=0;i<g.length;i++){for(W=0,r=0;r<g[i].length;r++){for(l=0;l<g[i][r].length-x;l++){if(e(g[i][r][l],M,Q,Y,W)===!1)return!1;M++}W++}Y++}break;case"GeometryCollection":for(i=0;i<f.geometries.length;i++)if(tx(f.geometries[i],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var fv={exports:{}},Zv={exports:{}},_5=Zv.exports,WT;function v5(){return WT||(WT=1,(function(t,e){(function(n,i){t.exports=i()})(_5,function(){function n(X,Y,W,J,ot){(function ht(rt,ut,_t,bt,Pt){for(;bt>_t;){if(bt-_t>600){var re=bt-_t+1,ye=ut-_t+1,fe=Math.log(re),kt=.5*Math.exp(2*fe/3),Ot=.5*Math.sqrt(fe*kt*(re-kt)/re)*(ye-re/2<0?-1:1),St=Math.max(_t,Math.floor(ut-ye*kt/re+Ot)),jt=Math.min(bt,Math.floor(ut+(re-ye)*kt/re+Ot));ht(rt,ut,St,jt,Pt)}var Vt=rt[ut],pt=_t,Tt=bt;for(i(rt,_t,ut),Pt(rt[bt],Vt)>0&&i(rt,_t,bt);pt<Tt;){for(i(rt,pt,Tt),pt++,Tt--;Pt(rt[pt],Vt)<0;)pt++;for(;Pt(rt[Tt],Vt)>0;)Tt--}Pt(rt[_t],Vt)===0?i(rt,_t,Tt):i(rt,++Tt,bt),Tt<=ut&&(_t=Tt+1),ut<=Tt&&(bt=Tt-1)}})(X,Y,W||0,J||X.length-1,ot||r)}function i(X,Y,W){var J=X[Y];X[Y]=X[W],X[W]=J}function r(X,Y){return X<Y?-1:X>Y?1:0}var l=function(X){X===void 0&&(X=9),this._maxEntries=Math.max(4,X),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function f(X,Y,W){if(!W)return Y.indexOf(X);for(var J=0;J<Y.length;J++)if(W(X,Y[J]))return J;return-1}function a(X,Y){g(X,0,X.children.length,Y,X)}function g(X,Y,W,J,ot){ot||(ot=H(null)),ot.minX=1/0,ot.minY=1/0,ot.maxX=-1/0,ot.maxY=-1/0;for(var ht=Y;ht<W;ht++){var rt=X.children[ht];_(ot,X.leaf?J(rt):rt)}return ot}function _(X,Y){return X.minX=Math.min(X.minX,Y.minX),X.minY=Math.min(X.minY,Y.minY),X.maxX=Math.max(X.maxX,Y.maxX),X.maxY=Math.max(X.maxY,Y.maxY),X}function x(X,Y){return X.minX-Y.minX}function M(X,Y){return X.minY-Y.minY}function O(X){return(X.maxX-X.minX)*(X.maxY-X.minY)}function z(X){return X.maxX-X.minX+(X.maxY-X.minY)}function F(X,Y){return X.minX<=Y.minX&&X.minY<=Y.minY&&Y.maxX<=X.maxX&&Y.maxY<=X.maxY}function V(X,Y){return Y.minX<=X.maxX&&Y.minY<=X.maxY&&Y.maxX>=X.minX&&Y.maxY>=X.minY}function H(X){return{children:X,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Q(X,Y,W,J,ot){for(var ht=[Y,W];ht.length;)if(!((W=ht.pop())-(Y=ht.pop())<=J)){var rt=Y+Math.ceil((W-Y)/J/2)*J;n(X,rt,Y,W,ot),ht.push(Y,rt,rt,W)}}return l.prototype.all=function(){return this._all(this.data,[])},l.prototype.search=function(X){var Y=this.data,W=[];if(!V(X,Y))return W;for(var J=this.toBBox,ot=[];Y;){for(var ht=0;ht<Y.children.length;ht++){var rt=Y.children[ht],ut=Y.leaf?J(rt):rt;V(X,ut)&&(Y.leaf?W.push(rt):F(X,ut)?this._all(rt,W):ot.push(rt))}Y=ot.pop()}return W},l.prototype.collides=function(X){var Y=this.data;if(!V(X,Y))return!1;for(var W=[];Y;){for(var J=0;J<Y.children.length;J++){var ot=Y.children[J],ht=Y.leaf?this.toBBox(ot):ot;if(V(X,ht)){if(Y.leaf||F(X,ht))return!0;W.push(ot)}}Y=W.pop()}return!1},l.prototype.load=function(X){if(!X||!X.length)return this;if(X.length<this._minEntries){for(var Y=0;Y<X.length;Y++)this.insert(X[Y]);return this}var W=this._build(X.slice(),0,X.length-1,0);if(this.data.children.length)if(this.data.height===W.height)this._splitRoot(this.data,W);else{if(this.data.height<W.height){var J=this.data;this.data=W,W=J}this._insert(W,this.data.height-W.height-1,!0)}else this.data=W;return this},l.prototype.insert=function(X){return X&&this._insert(X,this.data.height-1),this},l.prototype.clear=function(){return this.data=H([]),this},l.prototype.remove=function(X,Y){if(!X)return this;for(var W,J,ot,ht=this.data,rt=this.toBBox(X),ut=[],_t=[];ht||ut.length;){if(ht||(ht=ut.pop(),J=ut[ut.length-1],W=_t.pop(),ot=!0),ht.leaf){var bt=f(X,ht.children,Y);if(bt!==-1)return ht.children.splice(bt,1),ut.push(ht),this._condense(ut),this}ot||ht.leaf||!F(ht,rt)?J?(W++,ht=J.children[W],ot=!1):ht=null:(ut.push(ht),_t.push(W),W=0,J=ht,ht=ht.children[0])}return this},l.prototype.toBBox=function(X){return X},l.prototype.compareMinX=function(X,Y){return X.minX-Y.minX},l.prototype.compareMinY=function(X,Y){return X.minY-Y.minY},l.prototype.toJSON=function(){return this.data},l.prototype.fromJSON=function(X){return this.data=X,this},l.prototype._all=function(X,Y){for(var W=[];X;)X.leaf?Y.push.apply(Y,X.children):W.push.apply(W,X.children),X=W.pop();return Y},l.prototype._build=function(X,Y,W,J){var ot,ht=W-Y+1,rt=this._maxEntries;if(ht<=rt)return a(ot=H(X.slice(Y,W+1)),this.toBBox),ot;J||(J=Math.ceil(Math.log(ht)/Math.log(rt)),rt=Math.ceil(ht/Math.pow(rt,J-1))),(ot=H([])).leaf=!1,ot.height=J;var ut=Math.ceil(ht/rt),_t=ut*Math.ceil(Math.sqrt(rt));Q(X,Y,W,_t,this.compareMinX);for(var bt=Y;bt<=W;bt+=_t){var Pt=Math.min(bt+_t-1,W);Q(X,bt,Pt,ut,this.compareMinY);for(var re=bt;re<=Pt;re+=ut){var ye=Math.min(re+ut-1,Pt);ot.children.push(this._build(X,re,ye,J-1))}}return a(ot,this.toBBox),ot},l.prototype._chooseSubtree=function(X,Y,W,J){for(;J.push(Y),!Y.leaf&&J.length-1!==W;){for(var ot=1/0,ht=1/0,rt=void 0,ut=0;ut<Y.children.length;ut++){var _t=Y.children[ut],bt=O(_t),Pt=(re=X,ye=_t,(Math.max(ye.maxX,re.maxX)-Math.min(ye.minX,re.minX))*(Math.max(ye.maxY,re.maxY)-Math.min(ye.minY,re.minY))-bt);Pt<ht?(ht=Pt,ot=bt<ot?bt:ot,rt=_t):Pt===ht&&bt<ot&&(ot=bt,rt=_t)}Y=rt||Y.children[0]}var re,ye;return Y},l.prototype._insert=function(X,Y,W){var J=W?X:this.toBBox(X),ot=[],ht=this._chooseSubtree(J,this.data,Y,ot);for(ht.children.push(X),_(ht,J);Y>=0&&ot[Y].children.length>this._maxEntries;)this._split(ot,Y),Y--;this._adjustParentBBoxes(J,ot,Y)},l.prototype._split=function(X,Y){var W=X[Y],J=W.children.length,ot=this._minEntries;this._chooseSplitAxis(W,ot,J);var ht=this._chooseSplitIndex(W,ot,J),rt=H(W.children.splice(ht,W.children.length-ht));rt.height=W.height,rt.leaf=W.leaf,a(W,this.toBBox),a(rt,this.toBBox),Y?X[Y-1].children.push(rt):this._splitRoot(W,rt)},l.prototype._splitRoot=function(X,Y){this.data=H([X,Y]),this.data.height=X.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},l.prototype._chooseSplitIndex=function(X,Y,W){for(var J,ot,ht,rt,ut,_t,bt,Pt=1/0,re=1/0,ye=Y;ye<=W-Y;ye++){var fe=g(X,0,ye,this.toBBox),kt=g(X,ye,W,this.toBBox),Ot=(ot=fe,ht=kt,rt=void 0,ut=void 0,_t=void 0,bt=void 0,rt=Math.max(ot.minX,ht.minX),ut=Math.max(ot.minY,ht.minY),_t=Math.min(ot.maxX,ht.maxX),bt=Math.min(ot.maxY,ht.maxY),Math.max(0,_t-rt)*Math.max(0,bt-ut)),St=O(fe)+O(kt);Ot<Pt?(Pt=Ot,J=ye,re=St<re?St:re):Ot===Pt&&St<re&&(re=St,J=ye)}return J||W-Y},l.prototype._chooseSplitAxis=function(X,Y,W){var J=X.leaf?this.compareMinX:x,ot=X.leaf?this.compareMinY:M;this._allDistMargin(X,Y,W,J)<this._allDistMargin(X,Y,W,ot)&&X.children.sort(J)},l.prototype._allDistMargin=function(X,Y,W,J){X.children.sort(J);for(var ot=this.toBBox,ht=g(X,0,Y,ot),rt=g(X,W-Y,W,ot),ut=z(ht)+z(rt),_t=Y;_t<W-Y;_t++){var bt=X.children[_t];_(ht,X.leaf?ot(bt):bt),ut+=z(ht)}for(var Pt=W-Y-1;Pt>=Y;Pt--){var re=X.children[Pt];_(rt,X.leaf?ot(re):re),ut+=z(rt)}return ut},l.prototype._adjustParentBBoxes=function(X,Y,W){for(var J=W;J>=0;J--)_(Y[J],X)},l.prototype._condense=function(X){for(var Y=X.length-1,W=void 0;Y>=0;Y--)X[Y].children.length===0?Y>0?(W=X[Y-1].children).splice(W.indexOf(X[Y]),1):this.clear():a(X[Y],this.toBBox)},l})})(Zv)),Zv.exports}class x5{constructor(e=[],n=b5){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:i}=this,r=n[e];for(;e>0;){const l=e-1>>1,f=n[l];if(i(r,f)>=0)break;n[e]=f,e=l}n[e]=r}_down(e){const{data:n,compare:i}=this,r=this.length>>1,l=n[e];for(;e<r;){let f=(e<<1)+1,a=n[f];const g=f+1;if(g<this.length&&i(n[g],a)<0&&(f=g,a=n[g]),i(a,l)>=0)break;n[e]=a,e=f}n[e]=l}}function b5(t,e){return t<e?-1:t>e?1:0}const w5=Object.freeze(Object.defineProperty({__proto__:null,default:x5},Symbol.toStringTag,{value:"Module"})),S5=f3(w5);var Vg={exports:{}},yb,YT;function T5(){return YT||(YT=1,yb=function(e,n,i,r){var l=e[0],f=e[1],a=!1;i===void 0&&(i=0),r===void 0&&(r=n.length);for(var g=(r-i)/2,_=0,x=g-1;_<g;x=_++){var M=n[i+_*2+0],O=n[i+_*2+1],z=n[i+x*2+0],F=n[i+x*2+1],V=O>f!=F>f&&l<(z-M)*(f-O)/(F-O)+M;V&&(a=!a)}return a}),yb}var _b,XT;function A5(){return XT||(XT=1,_b=function(e,n,i,r){var l=e[0],f=e[1],a=!1;i===void 0&&(i=0),r===void 0&&(r=n.length);for(var g=r-i,_=0,x=g-1;_<g;x=_++){var M=n[_+i][0],O=n[_+i][1],z=n[x+i][0],F=n[x+i][1],V=O>f!=F>f&&l<(z-M)*(f-O)/(F-O)+M;V&&(a=!a)}return a}),_b}var KT;function M5(){if(KT)return Vg.exports;KT=1;var t=T5(),e=A5();return Vg.exports=function(i,r,l,f){return r.length>0&&Array.isArray(r[0])?e(i,r,l,f):t(i,r,l,f)},Vg.exports.nested=e,Vg.exports.flat=t,Vg.exports}var ay={exports:{}},E5=ay.exports,QT;function C5(){return QT||(QT=1,(function(t,e){(function(n,i){i(e)})(E5,function(n){const r=33306690738754706e-32;function l(V,H,Q,X,Y){let W,J,ot,ht,rt=H[0],ut=X[0],_t=0,bt=0;ut>rt==ut>-rt?(W=rt,rt=H[++_t]):(W=ut,ut=X[++bt]);let Pt=0;if(_t<V&&bt<Q)for(ut>rt==ut>-rt?(ot=W-((J=rt+W)-rt),rt=H[++_t]):(ot=W-((J=ut+W)-ut),ut=X[++bt]),W=J,ot!==0&&(Y[Pt++]=ot);_t<V&&bt<Q;)ut>rt==ut>-rt?(ot=W-((J=W+rt)-(ht=J-W))+(rt-ht),rt=H[++_t]):(ot=W-((J=W+ut)-(ht=J-W))+(ut-ht),ut=X[++bt]),W=J,ot!==0&&(Y[Pt++]=ot);for(;_t<V;)ot=W-((J=W+rt)-(ht=J-W))+(rt-ht),rt=H[++_t],W=J,ot!==0&&(Y[Pt++]=ot);for(;bt<Q;)ot=W-((J=W+ut)-(ht=J-W))+(ut-ht),ut=X[++bt],W=J,ot!==0&&(Y[Pt++]=ot);return W===0&&Pt!==0||(Y[Pt++]=W),Pt}function f(V){return new Float64Array(V)}const a=33306690738754716e-32,g=22204460492503146e-32,_=11093356479670487e-47,x=f(4),M=f(8),O=f(12),z=f(16),F=f(4);n.orient2d=function(V,H,Q,X,Y,W){const J=(H-W)*(Q-Y),ot=(V-Y)*(X-W),ht=J-ot;if(J===0||ot===0||J>0!=ot>0)return ht;const rt=Math.abs(J+ot);return Math.abs(ht)>=a*rt?ht:-(function(ut,_t,bt,Pt,re,ye,fe){let kt,Ot,St,jt,Vt,pt,Tt,$t,Yt,se,le,Ae,Ie,Wt,Pe,we,ce,rn;const je=ut-re,nn=bt-re,tn=_t-ye,Tn=Pt-ye;Vt=(Pe=($t=je-(Tt=(pt=134217729*je)-(pt-je)))*(se=Tn-(Yt=(pt=134217729*Tn)-(pt-Tn)))-((Wt=je*Tn)-Tt*Yt-$t*Yt-Tt*se))-(le=Pe-(ce=($t=tn-(Tt=(pt=134217729*tn)-(pt-tn)))*(se=nn-(Yt=(pt=134217729*nn)-(pt-nn)))-((we=tn*nn)-Tt*Yt-$t*Yt-Tt*se))),x[0]=Pe-(le+Vt)+(Vt-ce),Vt=(Ie=Wt-((Ae=Wt+le)-(Vt=Ae-Wt))+(le-Vt))-(le=Ie-we),x[1]=Ie-(le+Vt)+(Vt-we),Vt=(rn=Ae+le)-Ae,x[2]=Ae-(rn-Vt)+(le-Vt),x[3]=rn;let an=(function(Yn,cn){let Wi=cn[0];for(let si=1;si<Yn;si++)Wi+=cn[si];return Wi})(4,x),In=g*fe;if(an>=In||-an>=In||(kt=ut-(je+(Vt=ut-je))+(Vt-re),St=bt-(nn+(Vt=bt-nn))+(Vt-re),Ot=_t-(tn+(Vt=_t-tn))+(Vt-ye),jt=Pt-(Tn+(Vt=Pt-Tn))+(Vt-ye),kt===0&&Ot===0&&St===0&&jt===0)||(In=_*fe+r*Math.abs(an),(an+=je*jt+Tn*kt-(tn*St+nn*Ot))>=In||-an>=In))return an;Vt=(Pe=($t=kt-(Tt=(pt=134217729*kt)-(pt-kt)))*(se=Tn-(Yt=(pt=134217729*Tn)-(pt-Tn)))-((Wt=kt*Tn)-Tt*Yt-$t*Yt-Tt*se))-(le=Pe-(ce=($t=Ot-(Tt=(pt=134217729*Ot)-(pt-Ot)))*(se=nn-(Yt=(pt=134217729*nn)-(pt-nn)))-((we=Ot*nn)-Tt*Yt-$t*Yt-Tt*se))),F[0]=Pe-(le+Vt)+(Vt-ce),Vt=(Ie=Wt-((Ae=Wt+le)-(Vt=Ae-Wt))+(le-Vt))-(le=Ie-we),F[1]=Ie-(le+Vt)+(Vt-we),Vt=(rn=Ae+le)-Ae,F[2]=Ae-(rn-Vt)+(le-Vt),F[3]=rn;const _e=l(4,x,4,F,M);Vt=(Pe=($t=je-(Tt=(pt=134217729*je)-(pt-je)))*(se=jt-(Yt=(pt=134217729*jt)-(pt-jt)))-((Wt=je*jt)-Tt*Yt-$t*Yt-Tt*se))-(le=Pe-(ce=($t=tn-(Tt=(pt=134217729*tn)-(pt-tn)))*(se=St-(Yt=(pt=134217729*St)-(pt-St)))-((we=tn*St)-Tt*Yt-$t*Yt-Tt*se))),F[0]=Pe-(le+Vt)+(Vt-ce),Vt=(Ie=Wt-((Ae=Wt+le)-(Vt=Ae-Wt))+(le-Vt))-(le=Ie-we),F[1]=Ie-(le+Vt)+(Vt-we),Vt=(rn=Ae+le)-Ae,F[2]=Ae-(rn-Vt)+(le-Vt),F[3]=rn;const Di=l(_e,M,4,F,O);Vt=(Pe=($t=kt-(Tt=(pt=134217729*kt)-(pt-kt)))*(se=jt-(Yt=(pt=134217729*jt)-(pt-jt)))-((Wt=kt*jt)-Tt*Yt-$t*Yt-Tt*se))-(le=Pe-(ce=($t=Ot-(Tt=(pt=134217729*Ot)-(pt-Ot)))*(se=St-(Yt=(pt=134217729*St)-(pt-St)))-((we=Ot*St)-Tt*Yt-$t*Yt-Tt*se))),F[0]=Pe-(le+Vt)+(Vt-ce),Vt=(Ie=Wt-((Ae=Wt+le)-(Vt=Ae-Wt))+(le-Vt))-(le=Ie-we),F[1]=Ie-(le+Vt)+(Vt-we),Vt=(rn=Ae+le)-Ae,F[2]=Ae-(rn-Vt)+(le-Vt),F[3]=rn;const Ri=l(Di,O,4,F,z);return z[Ri-1]})(V,H,Q,X,Y,W,rt)},n.orient2dfast=function(V,H,Q,X,Y,W){return(H-W)*(Q-Y)-(V-Y)*(X-W)},Object.defineProperty(n,"__esModule",{value:!0})})})(ay,ay.exports)),ay.exports}var JT;function P5(){if(JT)return fv.exports;JT=1;var t=v5(),e=S5,n=M5(),i=C5().orient2d;e.default&&(e=e.default),fv.exports=r,fv.exports.default=r;function r(W,J,ot){J=Math.max(0,J===void 0?2:J),ot=ot||0;var ht=z(W),rt=new t(16);rt.toBBox=function(Tt){return{minX:Tt[0],minY:Tt[1],maxX:Tt[0],maxY:Tt[1]}},rt.compareMinX=function(Tt,$t){return Tt[0]-$t[0]},rt.compareMinY=function(Tt,$t){return Tt[1]-$t[1]},rt.load(W);for(var ut=[],_t=0,bt;_t<ht.length;_t++){var Pt=ht[_t];rt.remove(Pt),bt=F(Pt,bt),ut.push(bt)}var re=new t(16);for(_t=0;_t<ut.length;_t++)re.insert(O(ut[_t]));for(var ye=J*J,fe=ot*ot;ut.length;){var kt=ut.shift(),Ot=kt.p,St=kt.next.p,jt=V(Ot,St);if(!(jt<fe)){var Vt=jt/ye;Pt=l(rt,kt.prev.p,Ot,St,kt.next.next.p,Vt,re),Pt&&Math.min(V(Pt,Ot),V(Pt,St))<=Vt&&(ut.push(kt),ut.push(F(Pt,kt)),rt.remove(Pt),re.remove(kt),re.insert(O(kt)),re.insert(O(kt.next)))}}kt=bt;var pt=[];do pt.push(kt.p),kt=kt.next;while(kt!==bt);return pt.push(kt.p),pt}function l(W,J,ot,ht,rt,ut,_t){for(var bt=new e([],f),Pt=W.data;Pt;){for(var re=0;re<Pt.children.length;re++){var ye=Pt.children[re],fe=Pt.leaf?H(ye,ot,ht):a(ot,ht,ye);fe>ut||bt.push({node:ye,dist:fe})}for(;bt.length&&!bt.peek().node.children;){var kt=bt.pop(),Ot=kt.node,St=H(Ot,J,ot),jt=H(Ot,ht,rt);if(kt.dist<St&&kt.dist<jt&&_(ot,Ot,_t)&&_(ht,Ot,_t))return Ot}Pt=bt.pop(),Pt&&(Pt=Pt.node)}return null}function f(W,J){return W.dist-J.dist}function a(W,J,ot){if(g(W,ot)||g(J,ot))return 0;var ht=Q(W[0],W[1],J[0],J[1],ot.minX,ot.minY,ot.maxX,ot.minY);if(ht===0)return 0;var rt=Q(W[0],W[1],J[0],J[1],ot.minX,ot.minY,ot.minX,ot.maxY);if(rt===0)return 0;var ut=Q(W[0],W[1],J[0],J[1],ot.maxX,ot.minY,ot.maxX,ot.maxY);if(ut===0)return 0;var _t=Q(W[0],W[1],J[0],J[1],ot.minX,ot.maxY,ot.maxX,ot.maxY);return _t===0?0:Math.min(ht,rt,ut,_t)}function g(W,J){return W[0]>=J.minX&&W[0]<=J.maxX&&W[1]>=J.minY&&W[1]<=J.maxY}function _(W,J,ot){for(var ht=Math.min(W[0],J[0]),rt=Math.min(W[1],J[1]),ut=Math.max(W[0],J[0]),_t=Math.max(W[1],J[1]),bt=ot.search({minX:ht,minY:rt,maxX:ut,maxY:_t}),Pt=0;Pt<bt.length;Pt++)if(M(bt[Pt].p,bt[Pt].next.p,W,J))return!1;return!0}function x(W,J,ot){return i(W[0],W[1],J[0],J[1],ot[0],ot[1])}function M(W,J,ot,ht){return W!==ht&&J!==ot&&x(W,J,ot)>0!=x(W,J,ht)>0&&x(ot,ht,W)>0!=x(ot,ht,J)>0}function O(W){var J=W.p,ot=W.next.p;return W.minX=Math.min(J[0],ot[0]),W.minY=Math.min(J[1],ot[1]),W.maxX=Math.max(J[0],ot[0]),W.maxY=Math.max(J[1],ot[1]),W}function z(W){for(var J=W[0],ot=W[0],ht=W[0],rt=W[0],ut=0;ut<W.length;ut++){var _t=W[ut];_t[0]<J[0]&&(J=_t),_t[0]>ht[0]&&(ht=_t),_t[1]<ot[1]&&(ot=_t),_t[1]>rt[1]&&(rt=_t)}var bt=[J,ot,ht,rt],Pt=bt.slice();for(ut=0;ut<W.length;ut++)n(W[ut],bt)||Pt.push(W[ut]);return Y(Pt)}function F(W,J){var ot={p:W,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return J?(ot.next=J.next,ot.prev=J,J.next.prev=ot,J.next=ot):(ot.prev=ot,ot.next=ot),ot}function V(W,J){var ot=W[0]-J[0],ht=W[1]-J[1];return ot*ot+ht*ht}function H(W,J,ot){var ht=J[0],rt=J[1],ut=ot[0]-ht,_t=ot[1]-rt;if(ut!==0||_t!==0){var bt=((W[0]-ht)*ut+(W[1]-rt)*_t)/(ut*ut+_t*_t);bt>1?(ht=ot[0],rt=ot[1]):bt>0&&(ht+=ut*bt,rt+=_t*bt)}return ut=W[0]-ht,_t=W[1]-rt,ut*ut+_t*_t}function Q(W,J,ot,ht,rt,ut,_t,bt){var Pt=ot-W,re=ht-J,ye=_t-rt,fe=bt-ut,kt=W-rt,Ot=J-ut,St=Pt*Pt+re*re,jt=Pt*ye+re*fe,Vt=ye*ye+fe*fe,pt=Pt*kt+re*Ot,Tt=ye*kt+fe*Ot,$t=St*Vt-jt*jt,Yt,se,le,Ae,Ie=$t,Wt=$t;$t===0?(se=0,Ie=1,Ae=Tt,Wt=Vt):(se=jt*Tt-Vt*pt,Ae=St*Tt-jt*pt,se<0?(se=0,Ae=Tt,Wt=Vt):se>Ie&&(se=Ie,Ae=Tt+jt,Wt=Vt)),Ae<0?(Ae=0,-pt<0?se=0:-pt>St?se=Ie:(se=-pt,Ie=St)):Ae>Wt&&(Ae=Wt,-pt+jt<0?se=0:-pt+jt>St?se=Ie:(se=-pt+jt,Ie=St)),Yt=se===0?0:se/Ie,le=Ae===0?0:Ae/Wt;var Pe=(1-Yt)*W+Yt*ot,we=(1-Yt)*J+Yt*ht,ce=(1-le)*rt+le*_t,rn=(1-le)*ut+le*bt,je=ce-Pe,nn=rn-we;return je*je+nn*nn}function X(W,J){return W[0]===J[0]?W[1]-J[1]:W[0]-J[0]}function Y(W){W.sort(X);for(var J=[],ot=0;ot<W.length;ot++){for(;J.length>=2&&x(J[J.length-2],J[J.length-1],W[ot])<=0;)J.pop();J.push(W[ot])}for(var ht=[],rt=W.length-1;rt>=0;rt--){for(;ht.length>=2&&x(ht[ht.length-2],ht[ht.length-1],W[rt])<=0;)ht.pop();ht.push(W[rt])}return ht.pop(),J.pop(),J.concat(ht)}return fv.exports}var k5=P5();const O5=Ou(k5);function D5(t,e={}){e.concavity=e.concavity||1/0;const n=[];if(tx(t,r=>{n.push([r[0],r[1]])}),!n.length)return null;const i=O5(n,e.concavity);return i.length>3?y5([i]):null}function tA(t,e={}){let n=0,i=0,r=0;return tx(t,function(l){n+=l[0],i+=l[1],r++},!0),mw([n/r,i/r],e.properties)}function z5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function L5(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function eO(t,e={}){switch(L5(t)){case"Point":return mw(z5(t),e.properties);case"Polygon":var n=[];tx(t,function(W){n.push(W)});var i=tA(t,{properties:e.properties}),r=i.geometry.coordinates,l=0,f=0,a=0,g,_,x,M,O,z,F,V,H=n.map(function(W){return[W[0]-r[0],W[1]-r[1]]});for(g=0;g<n.length-1;g++)_=H[g],M=_[0],z=_[1],x=H[g+1],O=x[0],F=x[1],V=M*F-O*z,a+=V,l+=(M+O)*V,f+=(z+F)*V;if(a===0)return i;var Q=a*.5,X=1/(6*Q);return mw([r[0]+X*l,r[1]+X*f],e.properties);default:var Y=D5(t);return Y?eO(Y,{properties:e.properties}):tA(t,{properties:e.properties})}}var nO=eO;const _m=["CTPRVN_CD","CTPRV_CD","CTP_CD","SIDO_CD","SIG_CD"],I5=["CTP_KOR_NM","SIDO_NM","CTP_ENG_NM","CTP_NM"],vb=["SIG_CD","SGG_CD","ADM_DR_CD"],eA=["SIG_KOR_NM","SGG_NM","ADM_DR_NM","SIG_NM"],R5=["CTPRVN_CD","UPPER_CD","SIDO_CD"],Gl=(t,e)=>{for(const n of e)if(t&&t[n]!=null)return t[n]},B5=t=>t==null?null:String(t).padStart(5,"0").slice(0,5),Df=[[32.5,124],[39.6,132.5]];function N5(){const t=AS();Z.useEffect(()=>{t.options.inertia=!1},[t]);const e=()=>{t.getBounds().intersects(Df)||t.panInsideBounds(Df,{animate:!1})};return pb("move",e),pb("zoom",e),pb("moveend",e),null}function j5(t,e=[]){const n=AS();Z.useEffect(()=>{const i=t.current;if(i)try{const r=i.getBounds();if(r&&r.isValid()){const l=Math.max(r.getSouth(),Df[0][0]),f=Math.max(r.getWest(),Df[0][1]),a=Math.min(r.getNorth(),Df[1][0]),g=Math.min(r.getEast(),Df[1][1]);n.fitBounds([[l,f],[a,g]],{padding:[24,24],paddingBottomRight:[24,80]})}}catch{}},e)}function F5({targetRef:t,deps:e}){return j5(t,e),null}const iO=[[-180,-90],[-180,90],[180,90],[180,-90],[-180,-90]],rO=t=>t?t.type==="Polygon"?t.coordinates:t.type==="MultiPolygon"?t.coordinates.flat():[]:[],U5=t=>{if(!t?.features)return null;const e=[];for(const n of t.features)e.push(...rO(n.geometry));return{type:"Feature",properties:{kind:"mask-korea"},geometry:{type:"Polygon",coordinates:[iO,...e]}}},V5=t=>{if(!t?.geometry)return null;const e=rO(t.geometry);return{type:"Feature",properties:{kind:"mask-sido"},geometry:{type:"Polygon",coordinates:[iO,...e]}}},$5={11:"",26:"",27:"",28:"",29:"",30:"",31:"",36:"",41:"",42:"",43:"",44:"",45:"",46:"",47:"",48:"",50:"",51:"",52:""},q5=t=>{const e=t?.properties||{},n=String(Gl(e,_m)||"");return $5[n]||Gl(e,I5)||" /"},gw={11:[37.5665,126.978],26:[35.1796,129.0756],27:[35.8714,128.6014],28:[37.4563,126.7052],29:[35.1595,126.8526],30:[36.3504,127.3845],31:[35.5384,129.3114],36:[36.48,127.289],41:[37.4138,127.5183],42:[37.8228,128.1555],43:[36.6357,127.4917],44:[36.5184,126.8],45:[35.817,127.111],46:[35.12,126.9],47:[36.4919,128.8889],48:[35.23,128.25],50:[33.4996,126.5312],51:[37.8228,128.1555],52:[35.817,127.111]},aO={11:[.08,-.1],28:[.04,-.08],36:[.02,.08],30:[-.02,.02],41:[.02,-.06],43:[0,0],44:[.02,.1],45:[.02,.12],46:[.02,.06],47:[0,0],48:[.05,-.1],26:[0,-.04],27:[.02,-.02],31:[0,.06],42:[0,0],50:[0,0],51:[0,0],52:[0,0]},dv=Object.entries(aO).sort(([t],[e])=>t.localeCompare(e)).map(([t,e])=>`${t}:${e[0].toFixed(3)},${e[1].toFixed(3)}`).join("|"),pv=Object.entries(gw).sort(([t],[e])=>t.localeCompare(e)).map(([t,e])=>`${t}:${e[0].toFixed(4)},${e[1].toFixed(4)}`).join("|");function H5(t){const e=String(Gl(t.properties,_m)||"");if(gw[e]){const[n,i]=gw[e];return[n,i]}try{const n=nO(t),[i,r]=n.geometry.coordinates;return[r,i]}catch{return null}}const xb="#e0e0e0",Z5=["#f3f8ff","#d9e7ff","#bed4ff","#9cbcff","#7699ff"],G5=["#fff7ec","#ffe3c4","#ffcd9b","#ffb373","#ff9243"],mv=(t,e)=>{if(!t.length)return 0;const n=(t.length-1)*e,i=Math.floor(n),r=n-i;return t[i+1]!==void 0?t[i]+(t[i+1]-t[i])*r:t[i]},nA=(t,e,n)=>{if(t==null||isNaN(t)||t<=0||!e||!e.length)return xb;const i=n==="gas"?G5:Z5,r=[...e].filter(_=>_>0).sort((_,x)=>_-x);if(!r.length)return xb;const l=mv(r,.2),f=mv(r,.4),a=mv(r,.6),g=mv(r,.8);return t<=l?i[0]:t<=f?i[1]:t<=a?i[2]:t<=g?i[3]:i[4]},$g=t=>{const e=String(t||"");return e.length!==6?e||"":`${e.slice(0,4)} ${e.slice(4)}`};function W5({onRegionSelect:t,allEnergyData:e,yearMonth:n="202506",energyType:i="electric",onEnergyTypeChange:r}){const[l,f]=Z.useState("sido"),[a,g]=Z.useState(null),[_,x]=Z.useState(""),[M,O]=Z.useState(null),[z,F]=Z.useState(null),[V,H]=Z.useState(null),[Q,X]=Z.useState(null),[Y,W]=Z.useState(null),J=Z.useRef(null);Z.useEffect(()=>{(async()=>{try{const St=await(await fetch("/korea/SIDO_MAP_2022.json")).json();O(St),X(U5(St))}catch{x(" /korea/SIDO_MAP_2022.json   .")}try{const St=await(await fetch("/korea/sgg.json")).json();F(St)}catch{x(Ot=>(Ot?Ot+" / ":"")+" /korea/sgg.json   .")}})()},[]),Z.useEffect(()=>{if(l!=="sgg")return;const Ot=a?.code;if(!Ot){H(null),W(null);return}const St=M?.features?.find(jt=>String(Gl(jt.properties,_m))===String(Ot))||null;if(W(St?V5(St):null),z?.features){const jt=z.features.filter(Vt=>{const pt=Vt.properties||{};let Tt=Gl(pt,R5);if(Tt==null){const $t=Gl(pt,vb);$t&&(Tt=String($t).slice(0,2))}return String(Tt)===String(Ot)});H(jt.length?{type:"FeatureCollection",features:jt}:null)}else H(null)},[l,a,z,M]);const ot=Z.useMemo(()=>l==="sido"?M:V,[l,M,V]),ht=Z.useMemo(()=>{if(!M?.features)return{};const Ot={};for(const St of M.features){const jt=String(Gl(St.properties,_m)||"");let Vt=H5(St)||[0,0];const pt=aO[jt];pt&&(Vt=[Vt[0]+pt[0],Vt[1]+pt[1]]),Ot[jt]=Vt}return Ot},[M,pv,dv]),rt=Array.isArray(e)?e:e?.items||[],ut=Z.useMemo(()=>rt.filter(Ot=>String(Ot?.yearMonth)===String(n)),[rt,n]),_t=Z.useMemo(()=>{const Ot={};for(const St of ut){const jt=B5(St?.countyId);if(!jt)continue;const Vt=Number(i==="gas"?St.useGas:St.useElect);!isNaN(Vt)&&Vt>0&&(Ot[jt]=(Ot[jt]??0)+Vt)}return Ot},[ut,i]),bt=Z.useMemo(()=>{const Ot={};return Object.entries(_t).forEach(([St,jt])=>{if(!jt||jt<=0)return;const Vt=String(St).slice(0,2);Ot[Vt]=(Ot[Vt]??0)+jt}),Ot},[_t]),Pt=Z.useMemo(()=>Object.values(l==="sido"?bt:_t).filter(St=>St>0),[l,bt,_t]);Z.useEffect(()=>{console.log("===== [MapKorea] DEBUG ====="),console.log("yearMonth:",n,"energyType:",i,"level:",l),console.log("rawData length:",rt.length),console.log("filtered length:",ut.length),console.log("sidoValue keys:",Object.keys(bt)),console.log("sggValue keys length:",Object.keys(_t).length)},[rt,ut,bt,_t,i,l,n]);const re=Ot=>{if(l==="sido"){const Vt=String(Gl(Ot.properties,_m)||""),pt=bt[Vt];return{weight:1,color:"#ffffff",fillOpacity:.92,fillColor:nA(pt,Pt,i)}}const St=String(Gl(Ot.properties,vb)||""),jt=_t[St];return{weight:1,color:"#ffffff",fillOpacity:.92,fillColor:nA(jt,Pt,i)}},ye=Ot=>{const St=Gl(Ot?.properties||{},eA)||" ";return`${a?.name||" /"} ${String(St).replace(/<br\/>/g," ")}`},fe=(Ot,St)=>{if(l==="sido"){const jt=String(Gl(Ot.properties,_m)||""),Vt=q5(Ot),pt=ht[jt];if(pt){const Tt=HT.tooltip({permanent:!0,direction:"center",className:"area-label"}).setContent(Vt).setLatLng(pt);St.bindTooltip(Tt),St.on("add",()=>{try{St.openTooltip()}catch{}})}St.on("mouseover",Tt=>{St.setStyle({weight:2,color:"#ffffff"}),St.bindPopup(`${Vt}<br/>${$g(n)}`).openPopup(Tt.latlng)}),St.on("mouseout",()=>{St.setStyle({weight:1,color:"#ffffff"}),St.closePopup()}),St.on("click",Tt=>{g({code:jt,name:Vt}),f("sgg"),St.bindPopup(`${Vt}<br/>${$g(n)}`).openPopup(Tt.latlng),t?.({cityId:Number(jt),cityName:Vt})}),St.on("add",()=>{try{St.getElement()?.classList?.add("cursor-pointer")}catch{}})}else{const jt=ye(Ot);try{const Vt=nO(Ot),[pt,Tt]=Vt.geometry.coordinates,$t=HT.tooltip({permanent:!0,direction:"center",className:"area-label sgg"}).setContent(jt.replace((a?.name||"")+" ","")).setLatLng([Tt,pt]);St.bindTooltip($t),St.on("add",()=>{try{St.openTooltip()}catch{}})}catch{}St.on("mouseover",Vt=>{St.setStyle({weight:2,color:"#ffffff"}),St.bindPopup(`${jt}<br/>${$g(n)}`).openPopup(Vt.latlng)}),St.on("mouseout",()=>{St.setStyle({weight:1,color:"#ffffff"}),St.closePopup()}),St.on("click",Vt=>{St.bindPopup(`${jt}<br/>${$g(n)}`).openPopup(Vt.latlng);const pt=String(Gl(Ot.properties,vb)||""),Tt=Gl(Ot.properties,eA);t?.({cityId:Number(a?.code),countyId:Number(pt),cityName:a?.name,countyName:Tt})})}},kt=()=>{f("sido"),g(null),H(null),W(null),t?.(null)};return xt.jsxs("div",{className:"map-host",children:[xt.jsxs("div",{className:"map-toolbar",children:[xt.jsxs("div",{className:"month-label",children:[" ",$g(n)," "]}),xt.jsxs("div",{className:"map-energy-buttons",children:[xt.jsx("button",{className:i==="electric"?"active-electric":"",onClick:()=>r?.("electric"),title:"  ",children:" "}),xt.jsx("button",{className:i==="gas"?"active-gas":"",onClick:()=>r?.("gas"),title:"  ",children:" "})]})]}),_&&xt.jsx("div",{className:"warn-box",children:_}),l==="sgg"&&xt.jsx("button",{className:"btn-back",onClick:kt,children:" / "}),xt.jsxs(f5,{bounds:Df,minZoom:6,maxZoom:13,maxBounds:Df,maxBoundsViscosity:1,inertia:!1,worldCopyJump:!1,zoomControl:!1,attributionControl:!1,zoomSnap:.25,zoomDelta:.25,wheelPxPerZoomLevel:220,wheelDebounceTime:40,style:{height:"100%",width:"100%"},children:[xt.jsx(gb,{name:"mask",style:{zIndex:400}}),xt.jsx(gb,{name:"gaps",style:{zIndex:405}}),xt.jsx(gb,{name:"polygons",style:{zIndex:410}}),xt.jsx(g5,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",noWrap:!0}),(l==="sgg"?Y:Q)&&xt.jsx(mb,{pane:"mask",data:l==="sgg"?Y:Q,style:{fillColor:"#ffffffff",fillOpacity:.6,color:"#0b1020",weight:0},interactive:!1}),ot&&xt.jsx(mb,{pane:"gaps",data:ot,style:{fillOpacity:0,color:"#ebdfd8ff",weight:l==="sido"?6:3,lineJoin:"round",lineCap:"round"},interactive:!1}),ot&&xt.jsx(mb,{pane:"polygons",ref:J,data:ot,style:re,onEachFeature:fe},l==="sido"?`polygons-sido-${pv}-${dv}`:`polygons-sgg-${a?.code||""}`),xt.jsx(F5,{targetRef:J,deps:[l,a?.code,ot?.features?.length,pv,dv,i,n]}),xt.jsx(N5,{})]},l==="sido"?`map-sido-${pv}-${dv}`:`map-sgg-${a?.code||""}`)]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Vy(t){return t+.5|0}const zf=(t,e,n)=>Math.max(Math.min(t,n),e);function sy(t){return zf(Vy(t*2.55),0,255)}function Bf(t){return zf(Vy(t*255),0,255)}function Th(t){return zf(Vy(t/2.55)/100,0,1)}function iA(t){return zf(Vy(t*100),0,100)}const Tu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yw=[..."0123456789ABCDEF"],Y5=t=>yw[t&15],X5=t=>yw[(t&240)>>4]+yw[t&15],gv=t=>(t&240)>>4===(t&15),K5=t=>gv(t.r)&&gv(t.g)&&gv(t.b)&&gv(t.a);function Q5(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Tu[t[1]]*17,g:255&Tu[t[2]]*17,b:255&Tu[t[3]]*17,a:e===5?Tu[t[4]]*17:255}:(e===7||e===9)&&(n={r:Tu[t[1]]<<4|Tu[t[2]],g:Tu[t[3]]<<4|Tu[t[4]],b:Tu[t[5]]<<4|Tu[t[6]],a:e===9?Tu[t[7]]<<4|Tu[t[8]]:255})),n}const J5=(t,e)=>t<255?e(t):"";function tN(t){var e=K5(t)?Y5:X5;return t?"#"+e(t.r)+e(t.g)+e(t.b)+J5(t.a,e):void 0}const eN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function sO(t,e,n){const i=e*Math.min(n,1-n),r=(l,f=(l+t/30)%12)=>n-i*Math.max(Math.min(f-3,9-f,1),-1);return[r(0),r(8),r(4)]}function nN(t,e,n){const i=(r,l=(r+t/60)%6)=>n-n*e*Math.max(Math.min(l,4-l,1),0);return[i(5),i(3),i(1)]}function iN(t,e,n){const i=sO(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function rN(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function MS(t){const n=t.r/255,i=t.g/255,r=t.b/255,l=Math.max(n,i,r),f=Math.min(n,i,r),a=(l+f)/2;let g,_,x;return l!==f&&(x=l-f,_=a>.5?x/(2-l-f):x/(l+f),g=rN(n,i,r,x,l),g=g*60+.5),[g|0,_||0,a]}function ES(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Bf)}function CS(t,e,n){return ES(sO,t,e,n)}function aN(t,e,n){return ES(iN,t,e,n)}function sN(t,e,n){return ES(nN,t,e,n)}function oO(t){return(t%360+360)%360}function oN(t){const e=eN.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?sy(+e[5]):Bf(+e[5]));const r=oO(+e[2]),l=+e[3]/100,f=+e[4]/100;return e[1]==="hwb"?i=aN(r,l,f):e[1]==="hsv"?i=sN(r,l,f):i=CS(r,l,f),{r:i[0],g:i[1],b:i[2],a:n}}function lN(t,e){var n=MS(t);n[0]=oO(n[0]+e),n=CS(n),t.r=n[0],t.g=n[1],t.b=n[2]}function uN(t){if(!t)return;const e=MS(t),n=e[0],i=iA(e[1]),r=iA(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Th(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const rA={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},aA={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function cN(){const t={},e=Object.keys(aA),n=Object.keys(rA);let i,r,l,f,a;for(i=0;i<e.length;i++){for(f=a=e[i],r=0;r<n.length;r++)l=n[r],a=a.replace(l,rA[l]);l=parseInt(aA[f],16),t[a]=[l>>16&255,l>>8&255,l&255]}return t}let yv;function hN(t){yv||(yv=cN(),yv.transparent=[0,0,0,0]);const e=yv[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const fN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function dN(t){const e=fN.exec(t);let n=255,i,r,l;if(e){if(e[7]!==i){const f=+e[7];n=e[8]?sy(f):zf(f*255,0,255)}return i=+e[1],r=+e[3],l=+e[5],i=255&(e[2]?sy(i):zf(i,0,255)),r=255&(e[4]?sy(r):zf(r,0,255)),l=255&(e[6]?sy(l):zf(l,0,255)),{r:i,g:r,b:l,a:n}}}function pN(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Th(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const bb=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,fm=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function mN(t,e,n){const i=fm(Th(t.r)),r=fm(Th(t.g)),l=fm(Th(t.b));return{r:Bf(bb(i+n*(fm(Th(e.r))-i))),g:Bf(bb(r+n*(fm(Th(e.g))-r))),b:Bf(bb(l+n*(fm(Th(e.b))-l))),a:t.a+n*(e.a-t.a)}}function _v(t,e,n){if(t){let i=MS(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=CS(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function lO(t,e){return t&&Object.assign(e||{},t)}function sA(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Bf(t[3]))):(e=lO(t,{r:0,g:0,b:0,a:1}),e.a=Bf(e.a)),e}function gN(t){return t.charAt(0)==="r"?dN(t):oN(t)}let uO=class _w{constructor(e){if(e instanceof _w)return e;const n=typeof e;let i;n==="object"?i=sA(e):n==="string"&&(i=Q5(e)||hN(e)||gN(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=lO(this._rgb);return e&&(e.a=Th(e.a)),e}set rgb(e){this._rgb=sA(e)}rgbString(){return this._valid?pN(this._rgb):void 0}hexString(){return this._valid?tN(this._rgb):void 0}hslString(){return this._valid?uN(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let l;const f=n===l?.5:n,a=2*f-1,g=i.a-r.a,_=((a*g===-1?a:(a+g)/(1+a*g))+1)/2;l=1-_,i.r=255&_*i.r+l*r.r+.5,i.g=255&_*i.g+l*r.g+.5,i.b=255&_*i.b+l*r.b+.5,i.a=f*i.a+(1-f)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=mN(this._rgb,e._rgb,n)),this}clone(){return new _w(this.rgb)}alpha(e){return this._rgb.a=Bf(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Vy(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return _v(this._rgb,2,e),this}darken(e){return _v(this._rgb,2,-e),this}saturate(e){return _v(this._rgb,1,e),this}desaturate(e){return _v(this._rgb,1,-e),this}rotate(e){return lN(this._rgb,e),this}};/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function bh(){}const yN=(()=>{let t=0;return()=>t++})();function mi(t){return t==null}function Gr(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ai(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ya(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Wl(t,e){return ya(t)?t:e}function Wn(t,e){return typeof t>"u"?e:t}const _N=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,cO=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ar(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function nr(t,e,n,i){let r,l,f;if(Gr(t))for(l=t.length,r=0;r<l;r++)e.call(n,t[r],r);else if(Ai(t))for(f=Object.keys(t),l=f.length,r=0;r<l;r++)e.call(n,t[f[r]],f[r])}function n0(t,e){let n,i,r,l;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],l=e[n],r.datasetIndex!==l.datasetIndex||r.index!==l.index)return!1;return!0}function i0(t){if(Gr(t))return t.map(i0);if(Ai(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=i0(t[n[r]]);return e}return t}function hO(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function vN(t,e,n,i){if(!hO(t))return;const r=e[t],l=n[t];Ai(r)&&Ai(l)?vy(r,l,i):e[t]=i0(l)}function vy(t,e,n){const i=Gr(e)?e:[e],r=i.length;if(!Ai(t))return t;n=n||{};const l=n.merger||vN;let f;for(let a=0;a<r;++a){if(f=i[a],!Ai(f))continue;const g=Object.keys(f);for(let _=0,x=g.length;_<x;++_)l(g[_],t,f,n)}return t}function fy(t,e){return vy(t,e,{merger:xN})}function xN(t,e,n){if(!hO(t))return;const i=e[t],r=n[t];Ai(i)&&Ai(r)?fy(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=i0(r))}const oA={"":t=>t,x:t=>t.x,y:t=>t.y};function bN(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function wN(t){const e=bN(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function jf(t,e){return(oA[e]||(oA[e]=wN(e)))(t)}function PS(t){return t.charAt(0).toUpperCase()+t.slice(1)}const xy=t=>typeof t<"u",Ff=t=>typeof t=="function",lA=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function SN(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Vi=Math.PI,jr=2*Vi,TN=jr+Vi,r0=Number.POSITIVE_INFINITY,AN=Vi/180,za=Vi/2,Dd=Vi/4,uA=Vi*2/3,Lf=Math.log10,Uc=Math.sign;function dy(t,e,n){return Math.abs(t-e)<n}function cA(t){const e=Math.round(t);t=dy(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Lf(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function MN(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,l)=>r-l).pop(),e}function EN(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Am(t){return!EN(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function CN(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function fO(t,e,n){let i,r,l;for(i=0,r=t.length;i<r;i++)l=t[i][n],isNaN(l)||(e.min=Math.min(e.min,l),e.max=Math.max(e.max,l))}function dc(t){return t*(Vi/180)}function kS(t){return t*(180/Vi)}function hA(t){if(!ya(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function dO(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let l=Math.atan2(i,n);return l<-.5*Vi&&(l+=jr),{angle:l,distance:r}}function vw(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function PN(t,e){return(t-e+TN)%jr-Vi}function Mo(t){return(t%jr+jr)%jr}function by(t,e,n,i){const r=Mo(t),l=Mo(e),f=Mo(n),a=Mo(l-r),g=Mo(f-r),_=Mo(r-l),x=Mo(r-f);return r===l||r===f||i&&l===f||a>g&&_<x}function As(t,e,n){return Math.max(e,Math.min(n,t))}function kN(t){return As(t,-32768,32767)}function Eh(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function OS(t,e,n){n=n||(f=>t[f]<e);let i=t.length-1,r=0,l;for(;i-r>1;)l=r+i>>1,n(l)?r=l:i=l;return{lo:r,hi:i}}const Ch=(t,e,n,i)=>OS(t,n,i?r=>{const l=t[r][e];return l<n||l===n&&t[r+1][e]===n}:r=>t[r][e]<n),ON=(t,e,n)=>OS(t,n,i=>t[i][e]>=n);function DN(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const pO=["push","pop","shift","splice","unshift"];function zN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),pO.forEach(n=>{const i="_onData"+PS(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...l){const f=r.apply(this,l);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...l)}),f}})})}function fA(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(pO.forEach(l=>{delete t[l]}),delete t._chartjs)}function mO(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const gO=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function yO(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,gO.call(window,()=>{i=!1,t.apply(e,n)}))}}function LN(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const DS=t=>t==="start"?"left":t==="end"?"right":"center",To=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,IN=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function _O(t,e,n){const i=e.length;let r=0,l=i;if(t._sorted){const{iScale:f,vScale:a,_parsed:g}=t,_=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,x=f.axis,{min:M,max:O,minDefined:z,maxDefined:F}=f.getUserBounds();if(z){if(r=Math.min(Ch(g,x,M).lo,n?i:Ch(e,x,f.getPixelForValue(M)).lo),_){const V=g.slice(0,r+1).reverse().findIndex(H=>!mi(H[a.axis]));r-=Math.max(0,V)}r=As(r,0,i-1)}if(F){let V=Math.max(Ch(g,f.axis,O,!0).hi+1,n?0:Ch(e,x,f.getPixelForValue(O),!0).hi+1);if(_){const H=g.slice(V-1).findIndex(Q=>!mi(Q[a.axis]));V+=Math.max(0,H)}l=As(V,r,i)-r}else l=i-r}return{start:r,count:l}}function vO(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const l=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),l}const vv=t=>t===0||t===1,dA=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*jr/n)),pA=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*jr/n)+1,py={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*za)+1,easeOutSine:t=>Math.sin(t*za),easeInOutSine:t=>-.5*(Math.cos(Vi*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>vv(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>vv(t)?t:dA(t,.075,.3),easeOutElastic:t=>vv(t)?t:pA(t,.075,.3),easeInOutElastic(t){return vv(t)?t:t<.5?.5*dA(t*2,.1125,.45):.5+.5*pA(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-py.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?py.easeInBounce(t*2)*.5:py.easeOutBounce(t*2-1)*.5+.5};function zS(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function mA(t){return zS(t)?t:new uO(t)}function wb(t){return zS(t)?t:new uO(t).saturate(.5).darken(.1).hexString()}const RN=["x","y","borderWidth","radius","tension"],BN=["color","borderColor","backgroundColor"];function NN(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:BN},numbers:{type:"number",properties:RN}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function jN(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const gA=new Map;function FN(t,e){e=e||{};const n=t+JSON.stringify(e);let i=gA.get(n);return i||(i=new Intl.NumberFormat(t,e),gA.set(n,i)),i}function $y(t,e,n){return FN(e,n).format(t)}const xO={values(t){return Gr(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,l=t;if(n.length>1){const _=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(_<1e-4||_>1e15)&&(r="scientific"),l=UN(t,n)}const f=Lf(Math.abs(l)),a=isNaN(f)?1:Math.max(Math.min(-1*Math.floor(f),20),0),g={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(g,this.options.ticks.format),$y(t,i,g)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Lf(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?xO.numeric.call(this,t,e,n):""}};function UN(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ex={formatters:xO};function VN(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ex.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Qd=Object.create(null),xw=Object.create(null);function my(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const l=n[i];t=t[l]||(t[l]=Object.create(null))}return t}function Sb(t,e,n){return typeof e=="string"?vy(my(t,e),n):vy(my(t,""),e)}class $N{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>wb(r.backgroundColor),this.hoverBorderColor=(i,r)=>wb(r.borderColor),this.hoverColor=(i,r)=>wb(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Sb(this,e,n)}get(e){return my(this,e)}describe(e,n){return Sb(xw,e,n)}override(e,n){return Sb(Qd,e,n)}route(e,n,i,r){const l=my(this,e),f=my(this,i),a="_"+n;Object.defineProperties(l,{[a]:{value:l[n],writable:!0},[n]:{enumerable:!0,get(){const g=this[a],_=f[r];return Ai(g)?Object.assign({},_,g):Wn(g,_)},set(g){this[a]=g}}})}apply(e){e.forEach(n=>n(this))}}var Wr=new $N({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[NN,jN,VN]);function qN(t){return!t||mi(t.size)||mi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function a0(t,e,n,i,r){let l=e[r];return l||(l=e[r]=t.measureText(r).width,n.push(r)),l>i&&(i=l),i}function HN(t,e,n,i){i=i||{};let r=i.data=i.data||{},l=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},l=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let f=0;const a=n.length;let g,_,x,M,O;for(g=0;g<a;g++)if(M=n[g],M!=null&&!Gr(M))f=a0(t,r,l,f,M);else if(Gr(M))for(_=0,x=M.length;_<x;_++)O=M[_],O!=null&&!Gr(O)&&(f=a0(t,r,l,f,O));t.restore();const z=l.length/2;if(z>n.length){for(g=0;g<z;g++)delete r[l[g]];l.splice(0,z)}return f}function zd(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function yA(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function bw(t,e,n,i){bO(t,e,n,i,null)}function bO(t,e,n,i,r){let l,f,a,g,_,x,M,O;const z=e.pointStyle,F=e.rotation,V=e.radius;let H=(F||0)*AN;if(z&&typeof z=="object"&&(l=z.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(H),t.drawImage(z,-z.width/2,-z.height/2,z.width,z.height),t.restore();return}if(!(isNaN(V)||V<=0)){switch(t.beginPath(),z){default:r?t.ellipse(n,i,r/2,V,0,0,jr):t.arc(n,i,V,0,jr),t.closePath();break;case"triangle":x=r?r/2:V,t.moveTo(n+Math.sin(H)*x,i-Math.cos(H)*V),H+=uA,t.lineTo(n+Math.sin(H)*x,i-Math.cos(H)*V),H+=uA,t.lineTo(n+Math.sin(H)*x,i-Math.cos(H)*V),t.closePath();break;case"rectRounded":_=V*.516,g=V-_,f=Math.cos(H+Dd)*g,M=Math.cos(H+Dd)*(r?r/2-_:g),a=Math.sin(H+Dd)*g,O=Math.sin(H+Dd)*(r?r/2-_:g),t.arc(n-M,i-a,_,H-Vi,H-za),t.arc(n+O,i-f,_,H-za,H),t.arc(n+M,i+a,_,H,H+za),t.arc(n-O,i+f,_,H+za,H+Vi),t.closePath();break;case"rect":if(!F){g=Math.SQRT1_2*V,x=r?r/2:g,t.rect(n-x,i-g,2*x,2*g);break}H+=Dd;case"rectRot":M=Math.cos(H)*(r?r/2:V),f=Math.cos(H)*V,a=Math.sin(H)*V,O=Math.sin(H)*(r?r/2:V),t.moveTo(n-M,i-a),t.lineTo(n+O,i-f),t.lineTo(n+M,i+a),t.lineTo(n-O,i+f),t.closePath();break;case"crossRot":H+=Dd;case"cross":M=Math.cos(H)*(r?r/2:V),f=Math.cos(H)*V,a=Math.sin(H)*V,O=Math.sin(H)*(r?r/2:V),t.moveTo(n-M,i-a),t.lineTo(n+M,i+a),t.moveTo(n+O,i-f),t.lineTo(n-O,i+f);break;case"star":M=Math.cos(H)*(r?r/2:V),f=Math.cos(H)*V,a=Math.sin(H)*V,O=Math.sin(H)*(r?r/2:V),t.moveTo(n-M,i-a),t.lineTo(n+M,i+a),t.moveTo(n+O,i-f),t.lineTo(n-O,i+f),H+=Dd,M=Math.cos(H)*(r?r/2:V),f=Math.cos(H)*V,a=Math.sin(H)*V,O=Math.sin(H)*(r?r/2:V),t.moveTo(n-M,i-a),t.lineTo(n+M,i+a),t.moveTo(n+O,i-f),t.lineTo(n-O,i+f);break;case"line":f=r?r/2:Math.cos(H)*V,a=Math.sin(H)*V,t.moveTo(n-f,i-a),t.lineTo(n+f,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(H)*(r?r/2:V),i+Math.sin(H)*V);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ph(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function nx(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ix(t){t.restore()}function ZN(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const l=(e.x+n.x)/2;t.lineTo(l,e.y),t.lineTo(l,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function GN(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function WN(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),mi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function YN(t,e,n,i,r){if(r.strikethrough||r.underline){const l=t.measureText(i),f=e-l.actualBoundingBoxLeft,a=e+l.actualBoundingBoxRight,g=n-l.actualBoundingBoxAscent,_=n+l.actualBoundingBoxDescent,x=r.strikethrough?(g+_)/2:_;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(f,x),t.lineTo(a,x),t.stroke()}}function XN(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Jd(t,e,n,i,r,l={}){const f=Gr(e)?e:[e],a=l.strokeWidth>0&&l.strokeColor!=="";let g,_;for(t.save(),t.font=r.string,WN(t,l),g=0;g<f.length;++g)_=f[g],l.backdrop&&XN(t,l.backdrop),a&&(l.strokeColor&&(t.strokeStyle=l.strokeColor),mi(l.strokeWidth)||(t.lineWidth=l.strokeWidth),t.strokeText(_,n,i,l.maxWidth)),t.fillText(_,n,i,l.maxWidth),YN(t,n,i,_,l),i+=Number(r.lineHeight);t.restore()}function wy(t,e){const{x:n,y:i,w:r,h:l,radius:f}=e;t.arc(n+f.topLeft,i+f.topLeft,f.topLeft,1.5*Vi,Vi,!0),t.lineTo(n,i+l-f.bottomLeft),t.arc(n+f.bottomLeft,i+l-f.bottomLeft,f.bottomLeft,Vi,za,!0),t.lineTo(n+r-f.bottomRight,i+l),t.arc(n+r-f.bottomRight,i+l-f.bottomRight,f.bottomRight,za,0,!0),t.lineTo(n+r,i+f.topRight),t.arc(n+r-f.topRight,i+f.topRight,f.topRight,0,-za,!0),t.lineTo(n+f.topLeft,i)}const KN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,QN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function JN(t,e){const n=(""+t).match(KN);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const t4=t=>+t||0;function LS(t,e){const n={},i=Ai(e),r=i?Object.keys(e):e,l=Ai(t)?i?f=>Wn(t[f],t[e[f]]):f=>t[f]:()=>t;for(const f of r)n[f]=t4(l(f));return n}function wO(t){return LS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Hd(t){return LS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Po(t){const e=wO(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function cs(t,e){t=t||{},e=e||Wr.font;let n=Wn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Wn(t.style,e.style);i&&!(""+i).match(QN)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Wn(t.family,e.family),lineHeight:JN(Wn(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Wn(t.weight,e.weight),string:""};return r.string=qN(r),r}function oy(t,e,n,i){let r,l,f;for(r=0,l=t.length;r<l;++r)if(f=t[r],f!==void 0&&f!==void 0)return f}function e4(t,e,n){const{min:i,max:r}=t,l=cO(e,(r-i)/2),f=(a,g)=>n&&a===0?0:a+g;return{min:f(i,-Math.abs(l)),max:f(r,l)}}function Vf(t,e){return Object.assign(Object.create(t),e)}function IS(t,e=[""],n,i,r=()=>t[0]){const l=n||t;typeof i>"u"&&(i=MO("_fallback",t));const f={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:l,_fallback:i,_getTarget:r,override:a=>IS([a,...t],e,l,i)};return new Proxy(f,{deleteProperty(a,g){return delete a[g],delete a._keys,delete t[0][g],!0},get(a,g){return TO(a,g,()=>u4(g,e,t,a))},getOwnPropertyDescriptor(a,g){return Reflect.getOwnPropertyDescriptor(a._scopes[0],g)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,g){return vA(a).includes(g)},ownKeys(a){return vA(a)},set(a,g,_){const x=a._storage||(a._storage=r());return a[g]=x[g]=_,delete a._keys,!0}})}function Mm(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:SO(t,i),setContext:l=>Mm(t,l,n,i),override:l=>Mm(t.override(l),e,n,i)};return new Proxy(r,{deleteProperty(l,f){return delete l[f],delete t[f],!0},get(l,f,a){return TO(l,f,()=>i4(l,f,a))},getOwnPropertyDescriptor(l,f){return l._descriptors.allKeys?Reflect.has(t,f)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,f)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(l,f){return Reflect.has(t,f)},ownKeys(){return Reflect.ownKeys(t)},set(l,f,a){return t[f]=a,delete l[f],!0}})}function SO(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Ff(n)?n:()=>n,isIndexable:Ff(i)?i:()=>i}}const n4=(t,e)=>t?t+PS(e):e,RS=(t,e)=>Ai(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function TO(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function i4(t,e,n){const{_proxy:i,_context:r,_subProxy:l,_descriptors:f}=t;let a=i[e];return Ff(a)&&f.isScriptable(e)&&(a=r4(e,a,t,n)),Gr(a)&&a.length&&(a=a4(e,a,t,f.isIndexable)),RS(e,a)&&(a=Mm(a,r,l&&l[e],f)),a}function r4(t,e,n,i){const{_proxy:r,_context:l,_subProxy:f,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let g=e(l,f||i);return a.delete(t),RS(t,g)&&(g=BS(r._scopes,r,t,g)),g}function a4(t,e,n,i){const{_proxy:r,_context:l,_subProxy:f,_descriptors:a}=n;if(typeof l.index<"u"&&i(t))return e[l.index%e.length];if(Ai(e[0])){const g=e,_=r._scopes.filter(x=>x!==g);e=[];for(const x of g){const M=BS(_,r,t,x);e.push(Mm(M,l,f&&f[t],a))}}return e}function AO(t,e,n){return Ff(t)?t(e,n):t}const s4=(t,e)=>t===!0?e:typeof t=="string"?jf(e,t):void 0;function o4(t,e,n,i,r){for(const l of e){const f=s4(n,l);if(f){t.add(f);const a=AO(f._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(f===!1&&typeof i<"u"&&n!==i)return null}return!1}function BS(t,e,n,i){const r=e._rootScopes,l=AO(e._fallback,n,i),f=[...t,...r],a=new Set;a.add(i);let g=_A(a,f,n,l||n,i);return g===null||typeof l<"u"&&l!==n&&(g=_A(a,f,l,g,i),g===null)?!1:IS(Array.from(a),[""],r,l,()=>l4(e,n,i))}function _A(t,e,n,i,r){for(;n;)n=o4(t,e,n,i,r);return n}function l4(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Gr(r)&&Ai(n)?n:r||{}}function u4(t,e,n,i){let r;for(const l of e)if(r=MO(n4(l,t),n),typeof r<"u")return RS(t,r)?BS(n,i,t,r):r}function MO(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function vA(t){let e=t._keys;return e||(e=t._keys=c4(t._scopes)),e}function c4(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function EO(t,e,n,i){const{iScale:r}=t,{key:l="r"}=this._parsing,f=new Array(i);let a,g,_,x;for(a=0,g=i;a<g;++a)_=a+n,x=e[_],f[a]={r:r.parse(jf(x,l),_)};return f}const h4=Number.EPSILON||1e-14,Em=(t,e)=>e<t.length&&!t[e].skip&&t[e],CO=t=>t==="x"?"y":"x";function f4(t,e,n,i){const r=t.skip?e:t,l=e,f=n.skip?e:n,a=vw(l,r),g=vw(f,l);let _=a/(a+g),x=g/(a+g);_=isNaN(_)?0:_,x=isNaN(x)?0:x;const M=i*_,O=i*x;return{previous:{x:l.x-M*(f.x-r.x),y:l.y-M*(f.y-r.y)},next:{x:l.x+O*(f.x-r.x),y:l.y+O*(f.y-r.y)}}}function d4(t,e,n){const i=t.length;let r,l,f,a,g,_=Em(t,0);for(let x=0;x<i-1;++x)if(g=_,_=Em(t,x+1),!(!g||!_)){if(dy(e[x],0,h4)){n[x]=n[x+1]=0;continue}r=n[x]/e[x],l=n[x+1]/e[x],a=Math.pow(r,2)+Math.pow(l,2),!(a<=9)&&(f=3/Math.sqrt(a),n[x]=r*f*e[x],n[x+1]=l*f*e[x])}}function p4(t,e,n="x"){const i=CO(n),r=t.length;let l,f,a,g=Em(t,0);for(let _=0;_<r;++_){if(f=a,a=g,g=Em(t,_+1),!a)continue;const x=a[n],M=a[i];f&&(l=(x-f[n])/3,a[`cp1${n}`]=x-l,a[`cp1${i}`]=M-l*e[_]),g&&(l=(g[n]-x)/3,a[`cp2${n}`]=x+l,a[`cp2${i}`]=M+l*e[_])}}function m4(t,e="x"){const n=CO(e),i=t.length,r=Array(i).fill(0),l=Array(i);let f,a,g,_=Em(t,0);for(f=0;f<i;++f)if(a=g,g=_,_=Em(t,f+1),!!g){if(_){const x=_[e]-g[e];r[f]=x!==0?(_[n]-g[n])/x:0}l[f]=a?_?Uc(r[f-1])!==Uc(r[f])?0:(r[f-1]+r[f])/2:r[f-1]:r[f]}d4(t,r,l),p4(t,l,e)}function xv(t,e,n){return Math.max(Math.min(t,n),e)}function g4(t,e){let n,i,r,l,f,a=Ph(t[0],e);for(n=0,i=t.length;n<i;++n)f=l,l=a,a=n<i-1&&Ph(t[n+1],e),l&&(r=t[n],f&&(r.cp1x=xv(r.cp1x,e.left,e.right),r.cp1y=xv(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=xv(r.cp2x,e.left,e.right),r.cp2y=xv(r.cp2y,e.top,e.bottom)))}function y4(t,e,n,i,r){let l,f,a,g;if(e.spanGaps&&(t=t.filter(_=>!_.skip)),e.cubicInterpolationMode==="monotone")m4(t,r);else{let _=i?t[t.length-1]:t[0];for(l=0,f=t.length;l<f;++l)a=t[l],g=f4(_,a,t[Math.min(l+1,f-(i?0:1))%f],e.tension),a.cp1x=g.previous.x,a.cp1y=g.previous.y,a.cp2x=g.next.x,a.cp2y=g.next.y,_=a}e.capBezierPoints&&g4(t,n)}function NS(){return typeof window<"u"&&typeof document<"u"}function jS(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function s0(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const rx=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function _4(t,e){return rx(t).getPropertyValue(e)}const v4=["top","right","bottom","left"];function Zd(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const l=v4[r];i[l]=parseFloat(t[e+"-"+l+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const x4=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function b4(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:l}=i;let f=!1,a,g;if(x4(r,l,t.target))a=r,g=l;else{const _=e.getBoundingClientRect();a=i.clientX-_.left,g=i.clientY-_.top,f=!0}return{x:a,y:g,box:f}}function Bd(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=rx(n),l=r.boxSizing==="border-box",f=Zd(r,"padding"),a=Zd(r,"border","width"),{x:g,y:_,box:x}=b4(t,n),M=f.left+(x&&a.left),O=f.top+(x&&a.top);let{width:z,height:F}=e;return l&&(z-=f.width+a.width,F-=f.height+a.height),{x:Math.round((g-M)/z*n.width/i),y:Math.round((_-O)/F*n.height/i)}}function w4(t,e,n){let i,r;if(e===void 0||n===void 0){const l=t&&jS(t);if(!l)e=t.clientWidth,n=t.clientHeight;else{const f=l.getBoundingClientRect(),a=rx(l),g=Zd(a,"border","width"),_=Zd(a,"padding");e=f.width-_.width-g.width,n=f.height-_.height-g.height,i=s0(a.maxWidth,l,"clientWidth"),r=s0(a.maxHeight,l,"clientHeight")}}return{width:e,height:n,maxWidth:i||r0,maxHeight:r||r0}}const If=t=>Math.round(t*10)/10;function S4(t,e,n,i){const r=rx(t),l=Zd(r,"margin"),f=s0(r.maxWidth,t,"clientWidth")||r0,a=s0(r.maxHeight,t,"clientHeight")||r0,g=w4(t,e,n);let{width:_,height:x}=g;if(r.boxSizing==="content-box"){const O=Zd(r,"border","width"),z=Zd(r,"padding");_-=z.width+O.width,x-=z.height+O.height}return _=Math.max(0,_-l.width),x=Math.max(0,i?_/i:x-l.height),_=If(Math.min(_,f,g.maxWidth)),x=If(Math.min(x,a,g.maxHeight)),_&&!x&&(x=If(_/2)),(e!==void 0||n!==void 0)&&i&&g.height&&x>g.height&&(x=g.height,_=If(Math.floor(x*i))),{width:_,height:x}}function xA(t,e,n){const i=e||1,r=If(t.height*i),l=If(t.width*i);t.height=If(t.height),t.width=If(t.width);const f=t.canvas;return f.style&&(n||!f.style.height&&!f.style.width)&&(f.style.height=`${t.height}px`,f.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||f.height!==r||f.width!==l?(t.currentDevicePixelRatio=i,f.height=r,f.width=l,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const T4=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};NS()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function bA(t,e){const n=_4(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Nd(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function A4(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function M4(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},l={x:e.cp1x,y:e.cp1y},f=Nd(t,r,n),a=Nd(r,l,n),g=Nd(l,e,n),_=Nd(f,a,n),x=Nd(a,g,n);return Nd(_,x,n)}const E4=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},C4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function wm(t,e,n){return t?E4(e,n):C4()}function PO(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function kO(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function OO(t){return t==="angle"?{between:by,compare:PN,normalize:Mo}:{between:Eh,compare:(e,n)=>e-n,normalize:e=>e}}function wA({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function P4(t,e,n){const{property:i,start:r,end:l}=n,{between:f,normalize:a}=OO(i),g=e.length;let{start:_,end:x,loop:M}=t,O,z;if(M){for(_+=g,x+=g,O=0,z=g;O<z&&f(a(e[_%g][i]),r,l);++O)_--,x--;_%=g,x%=g}return x<_&&(x+=g),{start:_,end:x,loop:M,style:t.style}}function DO(t,e,n){if(!n)return[t];const{property:i,start:r,end:l}=n,f=e.length,{compare:a,between:g,normalize:_}=OO(i),{start:x,end:M,loop:O,style:z}=P4(t,e,n),F=[];let V=!1,H=null,Q,X,Y;const W=()=>g(r,Y,Q)&&a(r,Y)!==0,J=()=>a(l,Q)===0||g(l,Y,Q),ot=()=>V||W(),ht=()=>!V||J();for(let rt=x,ut=x;rt<=M;++rt)X=e[rt%f],!X.skip&&(Q=_(X[i]),Q!==Y&&(V=g(Q,r,l),H===null&&ot()&&(H=a(Q,r)===0?rt:ut),H!==null&&ht()&&(F.push(wA({start:H,end:rt,loop:O,count:f,style:z})),H=null),ut=rt,Y=Q));return H!==null&&F.push(wA({start:H,end:M,loop:O,count:f,style:z})),F}function zO(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const l=DO(i[r],t.points,e);l.length&&n.push(...l)}return n}function k4(t,e,n,i){let r=0,l=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(l+=r);l>r&&t[l%e].skip;)l--;return l%=e,{start:r,end:l}}function O4(t,e,n,i){const r=t.length,l=[];let f=e,a=t[e],g;for(g=e+1;g<=n;++g){const _=t[g%r];_.skip||_.stop?a.skip||(i=!1,l.push({start:e%r,end:(g-1)%r,loop:i}),e=f=_.stop?g:null):(f=g,a.skip&&(e=g)),a=_}return f!==null&&l.push({start:e%r,end:f%r,loop:i}),l}function D4(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const l=!!t._loop,{start:f,end:a}=k4(n,r,l,i);if(i===!0)return SA(t,[{start:f,end:a,loop:l}],n,e);const g=a<f?a+r:a,_=!!t._fullLoop&&f===0&&a===r-1;return SA(t,O4(n,f,g,_),n,e)}function SA(t,e,n,i){return!i||!i.setContext||!n?e:z4(t,e,n,i)}function z4(t,e,n,i){const r=t._chart.getContext(),l=TA(t.options),{_datasetIndex:f,options:{spanGaps:a}}=t,g=n.length,_=[];let x=l,M=e[0].start,O=M;function z(F,V,H,Q){const X=a?-1:1;if(F!==V){for(F+=g;n[F%g].skip;)F-=X;for(;n[V%g].skip;)V+=X;F%g!==V%g&&(_.push({start:F%g,end:V%g,loop:H,style:Q}),x=Q,M=V%g)}}for(const F of e){M=a?M:F.start;let V=n[M%g],H;for(O=M+1;O<=F.end;O++){const Q=n[O%g];H=TA(i.setContext(Vf(r,{type:"segment",p0:V,p1:Q,p0DataIndex:(O-1)%g,p1DataIndex:O%g,datasetIndex:f}))),L4(H,x)&&z(M,O-1,F.loop,x),V=Q,x=H}M<O-1&&z(M,O-1,F.loop,x)}return _}function TA(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function L4(t,e){if(!e)return!1;const n=[],i=function(r,l){return zS(l)?(n.includes(l)||n.push(l),n.indexOf(l)):l};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function bv(t,e,n){return t.options.clip?t[n]:e[n]}function I4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:bv(n,e,"left"),right:bv(n,e,"right"),top:bv(i,e,"top"),bottom:bv(i,e,"bottom")}:e}function LO(t,e){const n=e._clip;if(n.disabled)return!1;const i=I4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class R4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const l=n.listeners[r],f=n.duration;l.forEach(a=>a({chart:e,initial:n.initial,numSteps:f,currentStep:Math.min(i-n.start,f)}))}_refresh(){this._request||(this._running=!0,this._request=gO.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const l=i.items;let f=l.length-1,a=!1,g;for(;f>=0;--f)g=l[f],g._active?(g._total>i.duration&&(i.duration=g._total),g.tick(e),a=!0):(l[f]=l[l.length-1],l.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),l.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=l.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wh=new R4;const AA="transparent",B4={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=mA(t||AA),r=i.valid&&mA(e||AA);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class N4{constructor(e,n,i,r){const l=n[i];r=oy([e.to,r,l,e.from]);const f=oy([e.from,l,r]);this._active=!0,this._fn=e.fn||B4[e.type||typeof f],this._easing=py[e.easing]||py.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=f,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],l=i-this._start,f=this._duration-l;this._start=i,this._duration=Math.floor(Math.max(f,e.duration)),this._total+=l,this._loop=!!e.loop,this._to=oy([e.to,n,r,e.from]),this._from=oy([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,l=this._from,f=this._loop,a=this._to;let g;if(this._active=l!==a&&(f||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=l;return}g=n/i%2,g=f&&g>1?2-g:g,g=this._easing(Math.min(1,Math.max(0,g))),this._target[r]=this._fn(l,a,g)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class IO{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ai(e))return;const n=Object.keys(Wr.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const l=e[r];if(!Ai(l))return;const f={};for(const a of n)f[a]=l[a];(Gr(l.properties)&&l.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,f)})})}_animateOptions(e,n){const i=n.options,r=F4(e,i);if(!r)return[];const l=this._createAnimations(r,i);return i.$shared&&j4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),l}_createAnimations(e,n){const i=this._properties,r=[],l=e.$animations||(e.$animations={}),f=Object.keys(n),a=Date.now();let g;for(g=f.length-1;g>=0;--g){const _=f[g];if(_.charAt(0)==="$")continue;if(_==="options"){r.push(...this._animateOptions(e,n));continue}const x=n[_];let M=l[_];const O=i.get(_);if(M)if(O&&M.active()){M.update(O,x,a);continue}else M.cancel();if(!O||!O.duration){e[_]=x;continue}l[_]=M=new N4(O,e,_,x),r.push(M)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return wh.add(this._chart,i),!0}}function j4(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const l=t[i[r]];l&&l.active()&&n.push(l.wait())}return Promise.all(n)}function F4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function MA(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,l=n.max===void 0?e:0;return{start:i?l:r,end:i?r:l}}function U4(t,e,n){if(n===!1)return!1;const i=MA(t,n),r=MA(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function V4(t){let e,n,i,r;return Ai(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function RO(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,l;for(r=0,l=i.length;r<l;++r)n.push(i[r].index);return n}function EA(t,e,n,i={}){const r=t.keys,l=i.mode==="single";let f,a,g,_;if(e===null)return;let x=!1;for(f=0,a=r.length;f<a;++f){if(g=+r[f],g===n){if(x=!0,i.all)continue;break}_=t.values[g],ya(_)&&(l||e===0||Uc(e)===Uc(_))&&(e+=_)}return!x&&!i.all?0:e}function $4(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",l=i.axis==="x"?"x":"y",f=Object.keys(t),a=new Array(f.length);let g,_,x;for(g=0,_=f.length;g<_;++g)x=f[g],a[g]={[r]:x,[l]:t[x]};return a}function Tb(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function q4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function H4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function Z4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function CA(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const l=t[r.index];if(n&&l>0||!n&&l<0)return r.index}return null}function PA(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:l,vScale:f,index:a}=i,g=l.axis,_=f.axis,x=q4(l,f,i),M=e.length;let O;for(let z=0;z<M;++z){const F=e[z],{[g]:V,[_]:H}=F,Q=F._stacks||(F._stacks={});O=Q[_]=Z4(r,x,V),O[a]=H,O._top=CA(O,f,!0,i.type),O._bottom=CA(O,f,!1,i.type);const X=O._visualValues||(O._visualValues={});X[a]=H}}function Ab(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function G4(t,e){return Vf(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function W4(t,e,n){return Vf(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function qg(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const l=r._stacks;if(!l||l[i]===void 0||l[i][n]===void 0)return;delete l[i][n],l[i]._visualValues!==void 0&&l[i]._visualValues[n]!==void 0&&delete l[i]._visualValues[n]}}}const Mb=t=>t==="reset"||t==="none",kA=(t,e)=>e?t:Object.assign({},t),Y4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:RO(n,!0),values:null};class $f{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Tb(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&qg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(M,O,z,F)=>M==="x"?O:M==="r"?F:z,l=n.xAxisID=Wn(i.xAxisID,Ab(e,"x")),f=n.yAxisID=Wn(i.yAxisID,Ab(e,"y")),a=n.rAxisID=Wn(i.rAxisID,Ab(e,"r")),g=n.indexAxis,_=n.iAxisID=r(g,l,f,a),x=n.vAxisID=r(g,f,l,a);n.xScale=this.getScaleForId(l),n.yScale=this.getScaleForId(f),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(_),n.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&fA(this._data,this),e._stacked&&qg(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Ai(n)){const r=this._cachedMeta;this._data=$4(n,r)}else if(i!==n){if(i){fA(i,this);const r=this._cachedMeta;qg(r),r._parsed=[]}n&&Object.isExtensible(n)&&zN(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const l=n._stacked;n._stacked=Tb(n.vScale,n),n.stack!==i.stack&&(r=!0,qg(n),n.stack=i.stack),this._resyncElements(e),(r||l!==n._stacked)&&(PA(this,n._parsed),n._stacked=Tb(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:l,_stacked:f}=i,a=l.axis;let g=e===0&&n===r.length?!0:i._sorted,_=e>0&&i._parsed[e-1],x,M,O;if(this._parsing===!1)i._parsed=r,i._sorted=!0,O=r;else{Gr(r[e])?O=this.parseArrayData(i,r,e,n):Ai(r[e])?O=this.parseObjectData(i,r,e,n):O=this.parsePrimitiveData(i,r,e,n);const z=()=>M[a]===null||_&&M[a]<_[a];for(x=0;x<n;++x)i._parsed[x+e]=M=O[x],g&&(z()&&(g=!1),_=M);i._sorted=g}f&&PA(this,O)}parsePrimitiveData(e,n,i,r){const{iScale:l,vScale:f}=e,a=l.axis,g=f.axis,_=l.getLabels(),x=l===f,M=new Array(r);let O,z,F;for(O=0,z=r;O<z;++O)F=O+i,M[O]={[a]:x||l.parse(_[F],F),[g]:f.parse(n[F],F)};return M}parseArrayData(e,n,i,r){const{xScale:l,yScale:f}=e,a=new Array(r);let g,_,x,M;for(g=0,_=r;g<_;++g)x=g+i,M=n[x],a[g]={x:l.parse(M[0],x),y:f.parse(M[1],x)};return a}parseObjectData(e,n,i,r){const{xScale:l,yScale:f}=e,{xAxisKey:a="x",yAxisKey:g="y"}=this._parsing,_=new Array(r);let x,M,O,z;for(x=0,M=r;x<M;++x)O=x+i,z=n[O],_[x]={x:l.parse(jf(z,a),O),y:f.parse(jf(z,g),O)};return _}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,l=this._cachedMeta,f=n[e.axis],a={keys:RO(r,!0),values:n._stacks[e.axis]._visualValues};return EA(a,f,l.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const l=i[n.axis];let f=l===null?NaN:l;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,f=EA(r,l,this._cachedMeta.index)),e.min=Math.min(e.min,f),e.max=Math.max(e.max,f)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,l=i._sorted&&e===i.iScale,f=r.length,a=this._getOtherScale(e),g=Y4(n,i,this.chart),_={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:M}=H4(a);let O,z;function F(){z=r[O];const V=z[a.axis];return!ya(z[e.axis])||x>V||M<V}for(O=0;O<f&&!(!F()&&(this.updateRangeFromParsed(_,e,z,g),l));++O);if(l){for(O=f-1;O>=0;--O)if(!F()){this.updateRangeFromParsed(_,e,z,g);break}}return _}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,l,f;for(r=0,l=n.length;r<l;++r)f=n[r][e.axis],ya(f)&&i.push(f);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,l=this.getParsed(e);return{label:i?""+i.getLabelForValue(l[i.axis]):"",value:r?""+r.getLabelForValue(l[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=V4(Wn(this.options.clip,U4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],l=n.chartArea,f=[],a=this._drawStart||0,g=this._drawCount||r.length-a,_=this.options.drawActiveElementsOnTop;let x;for(i.dataset&&i.dataset.draw(e,l,a,g),x=a;x<a+g;++x){const M=r[x];M.hidden||(M.active&&_?f.push(M):M.draw(e,l))}for(x=0;x<f.length;++x)f[x].draw(e,l)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let l;if(e>=0&&e<this._cachedMeta.data.length){const f=this._cachedMeta.data[e];l=f.$context||(f.$context=W4(this.getContext(),e,f)),l.parsed=this.getParsed(e),l.raw=r.data[e],l.index=l.dataIndex=e}else l=this.$context||(this.$context=G4(this.chart.getContext(),this.index)),l.dataset=r,l.index=l.datasetIndex=this.index;return l.active=!!n,l.mode=i,l}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",l=this._cachedDataOpts,f=e+"-"+n,a=l[f],g=this.enableOptionSharing&&xy(i);if(a)return kA(a,g);const _=this.chart.config,x=_.datasetElementScopeKeys(this._type,e),M=r?[`${e}Hover`,"hover",e,""]:[e,""],O=_.getOptionScopes(this.getDataset(),x),z=Object.keys(Wr.elements[e]),F=()=>this.getContext(i,r,n),V=_.resolveNamedOptions(O,z,F,M);return V.$shared&&(V.$shared=g,l[f]=Object.freeze(kA(V,g))),V}_resolveAnimations(e,n,i){const r=this.chart,l=this._cachedDataOpts,f=`animation-${n}`,a=l[f];if(a)return a;let g;if(r.options.animation!==!1){const x=this.chart.config,M=x.datasetAnimationScopeKeys(this._type,n),O=x.getOptionScopes(this.getDataset(),M);g=x.createResolver(O,this.getContext(e,i,n))}const _=new IO(r,g&&g.animations);return g&&g._cacheable&&(l[f]=Object.freeze(_)),_}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Mb(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,l=this.getSharedOptions(i),f=this.includeOptions(n,l)||l!==r;return this.updateSharedOptions(l,n,i),{sharedOptions:l,includeOptions:f}}updateElement(e,n,i,r){Mb(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!Mb(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const l=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(l)||l})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,g,_]of this._syncList)this[a](g,_);this._syncList=[];const r=i.length,l=n.length,f=Math.min(l,r);f&&this.parse(0,f),l>r?this._insertElements(r,l-r,e):l<r&&this._removeElements(l,r-l)}_insertElements(e,n,i=!0){const r=this._cachedMeta,l=r.data,f=e+n;let a;const g=_=>{for(_.length+=n,a=_.length-1;a>=f;a--)_[a]=_[a-n]};for(g(l),a=e;a<f;++a)l[a]=new this.dataElementType;this._parsing&&g(r._parsed),this.parse(e,n),i&&this.updateElements(l,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&qg(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function X4(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,l=n.length;r<l;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=mO(i.sort((r,l)=>r-l))}return t._cache.$bar}function K4(t){const e=t.iScale,n=X4(e,t.type);let i=e._length,r,l,f,a;const g=()=>{f===32767||f===-32768||(xy(a)&&(i=Math.min(i,Math.abs(f-a)||i)),a=f)};for(r=0,l=n.length;r<l;++r)f=e.getPixelForValue(n[r]),g();for(a=void 0,r=0,l=e.ticks.length;r<l;++r)f=e.getPixelForTick(r),g();return i}function Q4(t,e,n,i){const r=n.barThickness;let l,f;return mi(r)?(l=e.min*n.categoryPercentage,f=n.barPercentage):(l=r*i,f=1),{chunk:l/i,ratio:f,start:e.pixels[t]-l/2}}function J4(t,e,n,i){const r=e.pixels,l=r[t];let f=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const g=n.categoryPercentage;f===null&&(f=l-(a===null?e.end-e.start:a-l)),a===null&&(a=l+l-f);const _=l-(l-Math.min(f,a))/2*g;return{chunk:Math.abs(a-f)/2*g/i,ratio:n.barPercentage,start:_}}function tj(t,e,n,i){const r=n.parse(t[0],i),l=n.parse(t[1],i),f=Math.min(r,l),a=Math.max(r,l);let g=f,_=a;Math.abs(f)>Math.abs(a)&&(g=a,_=f),e[n.axis]=_,e._custom={barStart:g,barEnd:_,start:r,end:l,min:f,max:a}}function BO(t,e,n,i){return Gr(t)?tj(t,e,n,i):e[n.axis]=n.parse(t,i),e}function OA(t,e,n,i){const r=t.iScale,l=t.vScale,f=r.getLabels(),a=r===l,g=[];let _,x,M,O;for(_=n,x=n+i;_<x;++_)O=e[_],M={},M[r.axis]=a||r.parse(f[_],_),g.push(BO(O,M,l,_));return g}function Eb(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function ej(t,e,n){return t!==0?Uc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function nj(t){let e,n,i,r,l;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",l="start"):(r="start",l="end"),{start:n,end:i,reverse:e,top:r,bottom:l}}function ij(t,e,n,i){let r=e.borderSkipped;const l={};if(!r){t.borderSkipped=l;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:f,end:a,reverse:g,top:_,bottom:x}=nj(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=_:(n._bottom||0)===i?r=x:(l[DA(x,f,a,g)]=!0,r=_)),l[DA(r,f,a,g)]=!0,t.borderSkipped=l}function DA(t,e,n,i){return i?(t=rj(t,e,n),t=zA(t,n,e)):t=zA(t,e,n),t}function rj(t,e,n){return t===e?n:t===n?e:t}function zA(t,e,n){return t==="start"?e:t==="end"?n:t}function aj(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class sj extends $f{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,i,r){return OA(e,n,i,r)}parseArrayData(e,n,i,r){return OA(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:l,vScale:f}=e,{xAxisKey:a="x",yAxisKey:g="y"}=this._parsing,_=l.axis==="x"?a:g,x=f.axis==="x"?a:g,M=[];let O,z,F,V;for(O=i,z=i+r;O<z;++O)V=n[O],F={},F[l.axis]=l.parse(jf(V,_),O),M.push(BO(jf(V,x),F,f,O));return M}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const l=i._custom;l&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,l.min),e.max=Math.max(e.max,l.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,l=this.getParsed(e),f=l._custom,a=Eb(f)?"["+f.start+", "+f.end+"]":""+r.getLabelForValue(l[r.axis]);return{label:""+i.getLabelForValue(l[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const l=r==="reset",{index:f,_cachedMeta:{vScale:a}}=this,g=a.getBasePixel(),_=a.isHorizontal(),x=this._getRuler(),{sharedOptions:M,includeOptions:O}=this._getSharedOptions(n,r);for(let z=n;z<n+i;z++){const F=this.getParsed(z),V=l||mi(F[a.axis])?{base:g,head:g}:this._calculateBarValuePixels(z),H=this._calculateBarIndexPixels(z,x),Q=(F._stacks||{})[a.axis],X={horizontal:_,base:V.base,enableBorderRadius:!Q||Eb(F._custom)||f===Q._top||f===Q._bottom,x:_?V.head:H.center,y:_?H.center:V.head,height:_?H.size:Math.abs(V.size),width:_?Math.abs(V.size):H.size};O&&(X.options=M||this.resolveDataElementOptions(z,e[z].active?"active":r));const Y=X.options||e[z].options;ij(X,Y,Q,f),aj(X,Y,x.ratio),this.updateElement(e[z],z,X,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(x=>x.controller.options.grouped),l=i.options.stacked,f=[],a=this._cachedMeta.controller.getParsed(n),g=a&&a[i.axis],_=x=>{const M=x._parsed.find(z=>z[i.axis]===g),O=M&&M[x.vScale.axis];if(mi(O)||isNaN(O))return!0};for(const x of r)if(!(n!==void 0&&_(x))&&((l===!1||f.indexOf(x.stack)===-1||l===void 0&&x.stack===void 0)&&f.push(x.stack),x.index===e))break;return f.length||f.push(void 0),f}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[Wn(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,i){const r=this._getStacks(e,i),l=n!==void 0?r.indexOf(n):-1;return l===-1?r.length-1:l}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let l,f;for(l=0,f=n.data.length;l<f;++l)r.push(i.getPixelForValue(this.getParsed(l)[i.axis],l));const a=e.barThickness;return{min:a||K4(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:l,minBarLength:f}}=this,a=l||0,g=this.getParsed(e),_=g._custom,x=Eb(_);let M=g[n.axis],O=0,z=i?this.applyStack(n,g,i):M,F,V;z!==M&&(O=z-M,z=M),x&&(M=_.barStart,z=_.barEnd-_.barStart,M!==0&&Uc(M)!==Uc(_.barEnd)&&(O=0),O+=M);const H=!mi(l)&&!x?l:O;let Q=n.getPixelForValue(H);if(this.chart.getDataVisibility(e)?F=n.getPixelForValue(O+z):F=Q,V=F-Q,Math.abs(V)<f){V=ej(V,n,a)*f,M===a&&(Q-=V/2);const X=n.getPixelForDecimal(0),Y=n.getPixelForDecimal(1),W=Math.min(X,Y),J=Math.max(X,Y);Q=Math.max(Math.min(Q,J),W),F=Q+V,i&&!x&&(g._stacks[n.axis]._visualValues[r]=n.getValueForPixel(F)-n.getValueForPixel(Q))}if(Q===n.getPixelForValue(a)){const X=Uc(V)*n.getLineWidthForValue(a)/2;Q+=X,V-=X}return{size:V,base:Q,head:F,center:F+V/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,l=r.skipNull,f=Wn(r.maxBarThickness,1/0);let a,g;const _=this._getAxisCount();if(n.grouped){const x=l?this._getStackCount(e):n.stackCount,M=r.barThickness==="flex"?J4(e,n,r,x*_):Q4(e,n,r,x*_),O=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,z=this._getAxis().indexOf(Wn(O,this.getFirstScaleIdForIndexAxis())),F=this._getStackIndex(this.index,this._cachedMeta.stack,l?e:void 0)+z;a=M.start+M.chunk*F+M.chunk/2,g=Math.min(f,M.chunk*M.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),g=Math.min(f,n.min*n.ratio);return{base:a-g/2,head:a+g/2,center:a,size:g}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let l=0;for(;l<r;++l)this.getParsed(l)[n.axis]!==null&&!i[l].hidden&&i[l].draw(this._ctx)}}class oj extends $f{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,r){const l=super.parsePrimitiveData(e,n,i,r);for(let f=0;f<l.length;f++)l[f]._custom=this.resolveDataElementOptions(f+i).radius;return l}parseArrayData(e,n,i,r){const l=super.parseArrayData(e,n,i,r);for(let f=0;f<l.length;f++){const a=n[i+f];l[f]._custom=Wn(a[2],this.resolveDataElementOptions(f+i).radius)}return l}parseObjectData(e,n,i,r){const l=super.parseObjectData(e,n,i,r);for(let f=0;f<l.length;f++){const a=n[i+f];l[f]._custom=Wn(a&&a.r&&+a.r,this.resolveDataElementOptions(f+i).radius)}return l}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:l}=n,f=this.getParsed(e),a=r.getLabelForValue(f.x),g=l.getLabelForValue(f.y),_=f._custom;return{label:i[e]||"",value:"("+a+", "+g+(_?", "+_:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,r){const l=r==="reset",{iScale:f,vScale:a}=this._cachedMeta,{sharedOptions:g,includeOptions:_}=this._getSharedOptions(n,r),x=f.axis,M=a.axis;for(let O=n;O<n+i;O++){const z=e[O],F=!l&&this.getParsed(O),V={},H=V[x]=l?f.getPixelForDecimal(.5):f.getPixelForValue(F[x]),Q=V[M]=l?a.getBasePixel():a.getPixelForValue(F[M]);V.skip=isNaN(H)||isNaN(Q),_&&(V.options=g||this.resolveDataElementOptions(O,z.active?"active":r),l&&(V.options.radius=0)),this.updateElement(z,O,V,r)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const l=r.radius;return n!=="active"&&(r.radius=0),r.radius+=Wn(i&&i._custom,l),r}}function lj(t,e,n){let i=1,r=1,l=0,f=0;if(e<jr){const a=t,g=a+e,_=Math.cos(a),x=Math.sin(a),M=Math.cos(g),O=Math.sin(g),z=(Y,W,J)=>by(Y,a,g,!0)?1:Math.max(W,W*n,J,J*n),F=(Y,W,J)=>by(Y,a,g,!0)?-1:Math.min(W,W*n,J,J*n),V=z(0,_,M),H=z(za,x,O),Q=F(Vi,_,M),X=F(Vi+za,x,O);i=(V-Q)/2,r=(H-X)/2,l=-(V+Q)/2,f=-(H+X)/2}return{ratioX:i,ratioY:r,offsetX:l,offsetY:f}}class FS extends $f{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:i,textAlign:r,color:l,useBorderRadius:f,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((g,_)=>{const M=e.getDatasetMeta(0).controller.getStyle(_);return{text:g,fillStyle:M.backgroundColor,fontColor:l,hidden:!e.getDataVisibility(_),lineDash:M.borderDash,lineDashOffset:M.borderDashOffset,lineJoin:M.borderJoinStyle,lineWidth:M.borderWidth,strokeStyle:M.borderColor,textAlign:r,pointStyle:i,borderRadius:f&&(a||M.borderRadius),index:_}}):[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let l=g=>+i[g];if(Ai(i[e])){const{key:g="value"}=this._parsing;l=_=>+jf(i[_],g)}let f,a;for(f=e,a=e+n;f<a;++f)r._parsed[f]=l(f)}}_getRotation(){return dc(this.options.rotation-90)}_getCircumference(){return dc(this.options.circumference)}_getRotationExtents(){let e=jr,n=-jr;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,l=r._getRotation(),f=r._getCircumference();e=Math.min(e,l),n=Math.max(n,l+f)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,l=r.data,f=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-f)/2,0),g=Math.min(_N(this.options.cutout,a),1),_=this._getRingWeight(this.index),{circumference:x,rotation:M}=this._getRotationExtents(),{ratioX:O,ratioY:z,offsetX:F,offsetY:V}=lj(M,x,g),H=(i.width-f)/O,Q=(i.height-f)/z,X=Math.max(Math.min(H,Q)/2,0),Y=cO(this.options.radius,X),W=Math.max(Y*g,0),J=(Y-W)/this._getVisibleDatasetWeightTotal();this.offsetX=F*Y,this.offsetY=V*Y,r.total=this.calculateTotal(),this.outerRadius=Y-J*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-J*_,0),this.updateElements(l,0,l.length,e)}_circumference(e,n){const i=this.options,r=this._cachedMeta,l=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*l/jr)}updateElements(e,n,i,r){const l=r==="reset",f=this.chart,a=f.chartArea,_=f.options.animation,x=(a.left+a.right)/2,M=(a.top+a.bottom)/2,O=l&&_.animateScale,z=O?0:this.innerRadius,F=O?0:this.outerRadius,{sharedOptions:V,includeOptions:H}=this._getSharedOptions(n,r);let Q=this._getRotation(),X;for(X=0;X<n;++X)Q+=this._circumference(X,l);for(X=n;X<n+i;++X){const Y=this._circumference(X,l),W=e[X],J={x:x+this.offsetX,y:M+this.offsetY,startAngle:Q,endAngle:Q+Y,circumference:Y,outerRadius:F,innerRadius:z};H&&(J.options=V||this.resolveDataElementOptions(X,W.active?"active":r)),Q+=Y,this.updateElement(W,X,J,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,r;for(r=0;r<n.length;r++){const l=e._parsed[r];l!==null&&!isNaN(l)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(l))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?jr*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],l=$y(n._parsed[e],i.options.locale);return{label:r[e]||"",value:l}}getMaxBorderWidth(e){let n=0;const i=this.chart;let r,l,f,a,g;if(!e){for(r=0,l=i.data.datasets.length;r<l;++r)if(i.isDatasetVisible(r)){f=i.getDatasetMeta(r),e=f.data,a=f.controller;break}}if(!e)return 0;for(r=0,l=e.length;r<l;++r)g=a.resolveDataElementOptions(r),g.borderAlign!=="inner"&&(n=Math.max(n,g.borderWidth||0,g.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,r=e.length;i<r;++i){const l=this.resolveDataElementOptions(i);n=Math.max(n,l.offset||0,l.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(Wn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class NO extends $f{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:l}=n,f=this.chart._animationsDisabled;let{start:a,count:g}=_O(n,r,f);this._drawStart=a,this._drawCount=g,vO(n)&&(a=0,g=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!l._decimated,i.points=r;const _=this.resolveDatasetElementOptions(e);this.options.showLine||(_.borderWidth=0),_.segment=this.options.segment,this.updateElement(i,void 0,{animated:!f,options:_},e),this.updateElements(r,a,g,e)}updateElements(e,n,i,r){const l=r==="reset",{iScale:f,vScale:a,_stacked:g,_dataset:_}=this._cachedMeta,{sharedOptions:x,includeOptions:M}=this._getSharedOptions(n,r),O=f.axis,z=a.axis,{spanGaps:F,segment:V}=this.options,H=Am(F)?F:Number.POSITIVE_INFINITY,Q=this.chart._animationsDisabled||l||r==="none",X=n+i,Y=e.length;let W=n>0&&this.getParsed(n-1);for(let J=0;J<Y;++J){const ot=e[J],ht=Q?ot:{};if(J<n||J>=X){ht.skip=!0;continue}const rt=this.getParsed(J),ut=mi(rt[z]),_t=ht[O]=f.getPixelForValue(rt[O],J),bt=ht[z]=l||ut?a.getBasePixel():a.getPixelForValue(g?this.applyStack(a,rt,g):rt[z],J);ht.skip=isNaN(_t)||isNaN(bt)||ut,ht.stop=J>0&&Math.abs(rt[O]-W[O])>H,V&&(ht.parsed=rt,ht.raw=_.data[J]),M&&(ht.options=x||this.resolveDataElementOptions(J,ot.active?"active":r)),Q||this.updateElement(ot,J,ht,r),W=rt}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const l=r[0].size(this.resolveDataElementOptions(0)),f=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,l,f)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class jO extends $f{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((l,f)=>{const g=e.getDatasetMeta(0).controller.getStyle(f);return{text:l,fillStyle:g.backgroundColor,strokeStyle:g.borderColor,fontColor:r,lineWidth:g.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(f),index:f}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],l=$y(n._parsed[e].r,i.options.locale);return{label:r[e]||"",value:l}}parseObjectData(e,n,i,r){return EO.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,r)=>{const l=this.getParsed(r).r;!isNaN(l)&&this.chart.getDataVisibility(r)&&(l<n.min&&(n.min=l),l>n.max&&(n.max=l))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,r=Math.min(n.right-n.left,n.bottom-n.top),l=Math.max(r/2,0),f=Math.max(i.cutoutPercentage?l/100*i.cutoutPercentage:1,0),a=(l-f)/e.getVisibleDatasetCount();this.outerRadius=l-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,r){const l=r==="reset",f=this.chart,g=f.options.animation,_=this._cachedMeta.rScale,x=_.xCenter,M=_.yCenter,O=_.getIndexAngle(0)-.5*Vi;let z=O,F;const V=360/this.countVisibleElements();for(F=0;F<n;++F)z+=this._computeAngle(F,r,V);for(F=n;F<n+i;F++){const H=e[F];let Q=z,X=z+this._computeAngle(F,r,V),Y=f.getDataVisibility(F)?_.getDistanceFromCenterForValue(this.getParsed(F).r):0;z=X,l&&(g.animateScale&&(Y=0),g.animateRotate&&(Q=X=O));const W={x,y:M,innerRadius:0,outerRadius:Y,startAngle:Q,endAngle:X,options:this.resolveDataElementOptions(F,H.active?"active":r)};this.updateElement(H,F,W,r)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?dc(this.resolveDataElementOptions(e,n).angle||i):0}}class uj extends FS{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class cj extends $f{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,r){return EO.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta,i=n.dataset,r=n.data||[],l=n.iScale.getLabels();if(i.points=r,e!=="resize"){const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0);const a={_loop:!0,_fullLoop:l.length===r.length,options:f};this.updateElement(i,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,n,i,r){const l=this._cachedMeta.rScale,f=r==="reset";for(let a=n;a<n+i;a++){const g=e[a],_=this.resolveDataElementOptions(a,g.active?"active":r),x=l.getPointPositionForValue(a,this.getParsed(a).r),M=f?l.xCenter:x.x,O=f?l.yCenter:x.y,z={x:M,y:O,angle:x.angle,skip:isNaN(M)||isNaN(O),options:_};this.updateElement(g,a,z,r)}}}class hj extends $f{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:l}=n,f=this.getParsed(e),a=r.getLabelForValue(f.x),g=l.getLabelForValue(f.y);return{label:i[e]||"",value:"("+a+", "+g+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:l,count:f}=_O(n,i,r);if(this._drawStart=l,this._drawCount=f,vO(n)&&(l=0,f=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:g}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!g._decimated,a.points=i;const _=this.resolveDatasetElementOptions(e);_.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:_},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,l,f,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,r){const l=r==="reset",{iScale:f,vScale:a,_stacked:g,_dataset:_}=this._cachedMeta,x=this.resolveDataElementOptions(n,r),M=this.getSharedOptions(x),O=this.includeOptions(r,M),z=f.axis,F=a.axis,{spanGaps:V,segment:H}=this.options,Q=Am(V)?V:Number.POSITIVE_INFINITY,X=this.chart._animationsDisabled||l||r==="none";let Y=n>0&&this.getParsed(n-1);for(let W=n;W<n+i;++W){const J=e[W],ot=this.getParsed(W),ht=X?J:{},rt=mi(ot[F]),ut=ht[z]=f.getPixelForValue(ot[z],W),_t=ht[F]=l||rt?a.getBasePixel():a.getPixelForValue(g?this.applyStack(a,ot,g):ot[F],W);ht.skip=isNaN(ut)||isNaN(_t)||rt,ht.stop=W>0&&Math.abs(ot[z]-Y[z])>Q,H&&(ht.parsed=ot,ht.raw=_.data[W]),O&&(ht.options=M||this.resolveDataElementOptions(W,J.active?"active":r)),X||this.updateElement(J,W,ht,r),Y=ot}this.updateSharedOptions(M,r,x)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let g=n.length-1;g>=0;--g)a=Math.max(a,n[g].size(this.resolveDataElementOptions(g))/2);return a>0&&a}const i=e.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const l=n[0].size(this.resolveDataElementOptions(0)),f=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,l,f)/2}}var fj=Object.freeze({__proto__:null,BarController:sj,BubbleController:oj,DoughnutController:FS,LineController:NO,PieController:uj,PolarAreaController:jO,RadarController:cj,ScatterController:hj});function Ld(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class US{static override(e){Object.assign(US.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ld()}parse(){return Ld()}format(){return Ld()}add(){return Ld()}diff(){return Ld()}startOf(){return Ld()}endOf(){return Ld()}}var dj={_date:US};function pj(t,e,n,i){const{controller:r,data:l,_sorted:f}=t,a=r._cachedMeta.iScale,g=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&f&&l.length){const _=a._reversePixels?ON:Ch;if(i){if(r._sharedOptions){const x=l[0],M=typeof x.getRange=="function"&&x.getRange(e);if(M){const O=_(l,e,n-M),z=_(l,e,n+M);return{lo:O.lo,hi:z.hi}}}}else{const x=_(l,e,n);if(g){const{vScale:M}=r._cachedMeta,{_parsed:O}=t,z=O.slice(0,x.lo+1).reverse().findIndex(V=>!mi(V[M.axis]));x.lo-=Math.max(0,z);const F=O.slice(x.hi).findIndex(V=>!mi(V[M.axis]));x.hi+=Math.max(0,F)}return x}}return{lo:0,hi:l.length-1}}function ax(t,e,n,i,r){const l=t.getSortedVisibleDatasetMetas(),f=n[e];for(let a=0,g=l.length;a<g;++a){const{index:_,data:x}=l[a],{lo:M,hi:O}=pj(l[a],e,f,r);for(let z=M;z<=O;++z){const F=x[z];F.skip||i(F,_,z)}}}function mj(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const l=e?Math.abs(i.x-r.x):0,f=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(f,2))}}function Cb(t,e,n,i,r){const l=[];return!r&&!t.isPointInArea(e)||ax(t,n,e,function(a,g,_){!r&&!Ph(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&l.push({element:a,datasetIndex:g,index:_})},!0),l}function gj(t,e,n,i){let r=[];function l(f,a,g){const{startAngle:_,endAngle:x}=f.getProps(["startAngle","endAngle"],i),{angle:M}=dO(f,{x:e.x,y:e.y});by(M,_,x)&&r.push({element:f,datasetIndex:a,index:g})}return ax(t,n,e,l),r}function yj(t,e,n,i,r,l){let f=[];const a=mj(n);let g=Number.POSITIVE_INFINITY;function _(x,M,O){const z=x.inRange(e.x,e.y,r);if(i&&!z)return;const F=x.getCenterPoint(r);if(!(!!l||t.isPointInArea(F))&&!z)return;const H=a(e,F);H<g?(f=[{element:x,datasetIndex:M,index:O}],g=H):H===g&&f.push({element:x,datasetIndex:M,index:O})}return ax(t,n,e,_),f}function Pb(t,e,n,i,r,l){return!l&&!t.isPointInArea(e)?[]:n==="r"&&!i?gj(t,e,n,r):yj(t,e,n,i,r,l)}function LA(t,e,n,i,r){const l=[],f=n==="x"?"inXRange":"inYRange";let a=!1;return ax(t,n,e,(g,_,x)=>{g[f]&&g[f](e[n],r)&&(l.push({element:g,datasetIndex:_,index:x}),a=a||g.inRange(e.x,e.y,r))}),i&&!a?[]:l}var _j={modes:{index(t,e,n,i){const r=Bd(e,t),l=n.axis||"x",f=n.includeInvisible||!1,a=n.intersect?Cb(t,r,l,i,f):Pb(t,r,l,!1,i,f),g=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(_=>{const x=a[0].index,M=_.data[x];M&&!M.skip&&g.push({element:M,datasetIndex:_.index,index:x})}),g):[]},dataset(t,e,n,i){const r=Bd(e,t),l=n.axis||"xy",f=n.includeInvisible||!1;let a=n.intersect?Cb(t,r,l,i,f):Pb(t,r,l,!1,i,f);if(a.length>0){const g=a[0].datasetIndex,_=t.getDatasetMeta(g).data;a=[];for(let x=0;x<_.length;++x)a.push({element:_[x],datasetIndex:g,index:x})}return a},point(t,e,n,i){const r=Bd(e,t),l=n.axis||"xy",f=n.includeInvisible||!1;return Cb(t,r,l,i,f)},nearest(t,e,n,i){const r=Bd(e,t),l=n.axis||"xy",f=n.includeInvisible||!1;return Pb(t,r,l,n.intersect,i,f)},x(t,e,n,i){const r=Bd(e,t);return LA(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Bd(e,t);return LA(t,r,"y",n.intersect,i)}}};const FO=["left","top","right","bottom"];function Hg(t,e){return t.filter(n=>n.pos===e)}function IA(t,e){return t.filter(n=>FO.indexOf(n.pos)===-1&&n.box.axis===e)}function Zg(t,e){return t.sort((n,i)=>{const r=e?i:n,l=e?n:i;return r.weight===l.weight?r.index-l.index:r.weight-l.weight})}function vj(t){const e=[];let n,i,r,l,f,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:l,options:{stack:f,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:l,horizontal:r.isHorizontal(),weight:r.weight,stack:f&&l+f,stackWeight:a});return e}function xj(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:l}=n;if(!i||!FO.includes(r))continue;const f=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});f.count++,f.weight+=l}return e}function bj(t,e){const n=xj(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let l,f,a;for(l=0,f=t.length;l<f;++l){a=t[l];const{fullSize:g}=a.box,_=n[a.stack],x=_&&a.stackWeight/_.weight;a.horizontal?(a.width=x?x*i:g&&e.availableWidth,a.height=r):(a.width=i,a.height=x?x*r:g&&e.availableHeight)}return n}function wj(t){const e=vj(t),n=Zg(e.filter(_=>_.box.fullSize),!0),i=Zg(Hg(e,"left"),!0),r=Zg(Hg(e,"right")),l=Zg(Hg(e,"top"),!0),f=Zg(Hg(e,"bottom")),a=IA(e,"x"),g=IA(e,"y");return{fullSize:n,leftAndTop:i.concat(l),rightAndBottom:r.concat(g).concat(f).concat(a),chartArea:Hg(e,"chartArea"),vertical:i.concat(r).concat(g),horizontal:l.concat(f).concat(a)}}function RA(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function UO(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Sj(t,e,n,i){const{pos:r,box:l}=n,f=t.maxPadding;if(!Ai(r)){n.size&&(t[r]-=n.size);const M=i[n.stack]||{size:0,count:1};M.size=Math.max(M.size,n.horizontal?l.height:l.width),n.size=M.size/M.count,t[r]+=n.size}l.getPadding&&UO(f,l.getPadding());const a=Math.max(0,e.outerWidth-RA(f,t,"left","right")),g=Math.max(0,e.outerHeight-RA(f,t,"top","bottom")),_=a!==t.w,x=g!==t.h;return t.w=a,t.h=g,n.horizontal?{same:_,other:x}:{same:x,other:_}}function Tj(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Aj(t,e){const n=e.maxPadding;function i(r){const l={left:0,top:0,right:0,bottom:0};return r.forEach(f=>{l[f]=Math.max(e[f],n[f])}),l}return i(t?["left","right"]:["top","bottom"])}function ly(t,e,n,i){const r=[];let l,f,a,g,_,x;for(l=0,f=t.length,_=0;l<f;++l){a=t[l],g=a.box,g.update(a.width||e.w,a.height||e.h,Aj(a.horizontal,e));const{same:M,other:O}=Sj(e,n,a,i);_|=M&&r.length,x=x||O,g.fullSize||r.push(a)}return _&&ly(r,e,n,i)||x}function wv(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function BA(t,e,n,i){const r=n.padding;let{x:l,y:f}=e;for(const a of t){const g=a.box,_=i[a.stack]||{placed:0,weight:1},x=a.stackWeight/_.weight||1;if(a.horizontal){const M=e.w*x,O=_.size||g.height;xy(_.start)&&(f=_.start),g.fullSize?wv(g,r.left,f,n.outerWidth-r.right-r.left,O):wv(g,e.left+_.placed,f,M,O),_.start=f,_.placed+=M,f=g.bottom}else{const M=e.h*x,O=_.size||g.width;xy(_.start)&&(l=_.start),g.fullSize?wv(g,l,r.top,O,n.outerHeight-r.bottom-r.top):wv(g,l,e.top+_.placed,O,M),_.start=l,_.placed+=M,l=g.right}}e.x=l,e.y=f}var Co={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Po(t.options.layout.padding),l=Math.max(e-r.width,0),f=Math.max(n-r.height,0),a=wj(t.boxes),g=a.vertical,_=a.horizontal;nr(t.boxes,V=>{typeof V.beforeLayout=="function"&&V.beforeLayout()});const x=g.reduce((V,H)=>H.box.options&&H.box.options.display===!1?V:V+1,0)||1,M=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:l,availableHeight:f,vBoxMaxWidth:l/2/x,hBoxMaxHeight:f/2}),O=Object.assign({},r);UO(O,Po(i));const z=Object.assign({maxPadding:O,w:l,h:f,x:r.left,y:r.top},r),F=bj(g.concat(_),M);ly(a.fullSize,z,M,F),ly(g,z,M,F),ly(_,z,M,F)&&ly(g,z,M,F),Tj(z),BA(a.leftAndTop,z,M,F),z.x+=z.w,z.y+=z.h,BA(a.rightAndBottom,z,M,F),t.chartArea={left:z.left,top:z.top,right:z.left+z.w,bottom:z.top+z.h,height:z.h,width:z.w},nr(a.chartArea,V=>{const H=V.box;Object.assign(H,t.chartArea),H.update(z.w,z.h,{left:0,top:0,right:0,bottom:0})})}};class VO{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class Mj extends VO{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Gv="$chartjs",Ej={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},NA=t=>t===null||t==="";function Cj(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Gv]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",NA(r)){const l=bA(t,"width");l!==void 0&&(t.width=l)}if(NA(i))if(t.style.height==="")t.height=t.width/(e||2);else{const l=bA(t,"height");l!==void 0&&(t.height=l)}return t}const $O=T4?{passive:!0}:!1;function Pj(t,e,n){t&&t.addEventListener(e,n,$O)}function kj(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,$O)}function Oj(t,e){const n=Ej[t.type]||t.type,{x:i,y:r}=Bd(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function o0(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Dj(t,e,n){const i=t.canvas,r=new MutationObserver(l=>{let f=!1;for(const a of l)f=f||o0(a.addedNodes,i),f=f&&!o0(a.removedNodes,i);f&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function zj(t,e,n){const i=t.canvas,r=new MutationObserver(l=>{let f=!1;for(const a of l)f=f||o0(a.removedNodes,i),f=f&&!o0(a.addedNodes,i);f&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Sy=new Map;let jA=0;function qO(){const t=window.devicePixelRatio;t!==jA&&(jA=t,Sy.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Lj(t,e){Sy.size||window.addEventListener("resize",qO),Sy.set(t,e)}function Ij(t){Sy.delete(t),Sy.size||window.removeEventListener("resize",qO)}function Rj(t,e,n){const i=t.canvas,r=i&&jS(i);if(!r)return;const l=yO((a,g)=>{const _=r.clientWidth;n(a,g),_<r.clientWidth&&n()},window),f=new ResizeObserver(a=>{const g=a[0],_=g.contentRect.width,x=g.contentRect.height;_===0&&x===0||l(_,x)});return f.observe(r),Lj(t,l),f}function kb(t,e,n){n&&n.disconnect(),e==="resize"&&Ij(t)}function Bj(t,e,n){const i=t.canvas,r=yO(l=>{t.ctx!==null&&n(Oj(l,t))},t);return Pj(i,e,r),r}class Nj extends VO{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Cj(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Gv])return!1;const i=n[Gv].initial;["height","width"].forEach(l=>{const f=i[l];mi(f)?n.removeAttribute(l):n.setAttribute(l,f)});const r=i.style||{};return Object.keys(r).forEach(l=>{n.style[l]=r[l]}),n.width=n.width,delete n[Gv],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),f={attach:Dj,detach:zj,resize:Rj}[n]||Bj;r[n]=f(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:kb,detach:kb,resize:kb}[n]||kj)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return S4(e,n,i,r)}isAttached(e){const n=e&&jS(e);return!!(n&&n.isConnected)}}function jj(t){return!NS()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Mj:Nj}let $h=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Am(this.x)&&Am(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(l=>{r[l]=i[l]&&i[l].active()?i[l]._to:this[l]}),r}};function Fj(t,e){const n=t.options.ticks,i=Uj(t),r=Math.min(n.maxTicksLimit||i,i),l=n.major.enabled?$j(e):[],f=l.length,a=l[0],g=l[f-1],_=[];if(f>r)return qj(e,_,l,f/r),_;const x=Vj(l,e,r);if(f>0){let M,O;const z=f>1?Math.round((g-a)/(f-1)):null;for(Sv(e,_,x,mi(z)?0:a-z,a),M=0,O=f-1;M<O;M++)Sv(e,_,x,l[M],l[M+1]);return Sv(e,_,x,g,mi(z)?e.length:g+z),_}return Sv(e,_,x),_}function Uj(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function Vj(t,e,n){const i=Hj(t),r=e.length/n;if(!i)return Math.max(r,1);const l=MN(i);for(let f=0,a=l.length-1;f<a;f++){const g=l[f];if(g>r)return g}return Math.max(r,1)}function $j(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function qj(t,e,n,i){let r=0,l=n[0],f;for(i=Math.ceil(i),f=0;f<t.length;f++)f===l&&(e.push(t[f]),r++,l=n[r*i])}function Sv(t,e,n,i,r){const l=Wn(i,0),f=Math.min(Wn(r,t.length),t.length);let a=0,g,_,x;for(n=Math.ceil(n),r&&(g=r-i,n=g/Math.floor(g/n)),x=l;x<0;)a++,x=Math.round(l+a*n);for(_=Math.max(l,0);_<f;_++)_===x&&(e.push(t[_]),a++,x=Math.round(l+a*n))}function Hj(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const Zj=t=>t==="left"?"right":t==="right"?"left":t,FA=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,UA=(t,e)=>Math.min(e||t,t);function VA(t,e){const n=[],i=t.length/e,r=t.length;let l=0;for(;l<r;l+=i)n.push(t[Math.floor(l)]);return n}function Gj(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),l=t._startPixel,f=t._endPixel,a=1e-6;let g=t.getPixelForTick(r),_;if(!(n&&(i===1?_=Math.max(g-l,f-g):e===0?_=(t.getPixelForTick(1)-g)/2:_=(g-t.getPixelForTick(r-1))/2,g+=r<e?_:-_,g<l-a||g>f+a)))return g}function Wj(t,e){nr(t,n=>{const i=n.gc,r=i.length/2;let l;if(r>e){for(l=0;l<r;++l)delete n.data[i[l]];i.splice(0,r)}})}function Gg(t){return t.drawTicks?t.tickLength:0}function $A(t,e){if(!t.display)return 0;const n=cs(t.font,e),i=Po(t.padding);return(Gr(t.text)?t.text.length:1)*n.lineHeight+i.height}function Yj(t,e){return Vf(t,{scale:e,type:"scale"})}function Xj(t,e,n){return Vf(t,{tick:n,index:e,type:"tick"})}function Kj(t,e,n){let i=DS(t);return(n&&e!=="right"||!n&&e==="right")&&(i=Zj(i)),i}function Qj(t,e,n,i){const{top:r,left:l,bottom:f,right:a,chart:g}=t,{chartArea:_,scales:x}=g;let M=0,O,z,F;const V=f-r,H=a-l;if(t.isHorizontal()){if(z=To(i,l,a),Ai(n)){const Q=Object.keys(n)[0],X=n[Q];F=x[Q].getPixelForValue(X)+V-e}else n==="center"?F=(_.bottom+_.top)/2+V-e:F=FA(t,n,e);O=a-l}else{if(Ai(n)){const Q=Object.keys(n)[0],X=n[Q];z=x[Q].getPixelForValue(X)-H+e}else n==="center"?z=(_.left+_.right)/2-H+e:z=FA(t,n,e);F=To(i,f,r),M=n==="left"?-za:za}return{titleX:z,titleY:F,maxWidth:O,rotation:M}}class op extends $h{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Wl(e,Number.POSITIVE_INFINITY),n=Wl(n,Number.NEGATIVE_INFINITY),i=Wl(i,Number.POSITIVE_INFINITY),r=Wl(r,Number.NEGATIVE_INFINITY),{min:Wl(e,i),max:Wl(n,r),minDefined:ya(e),maxDefined:ya(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:l}=this.getUserBounds(),f;if(r&&l)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let g=0,_=a.length;g<_;++g)f=a[g].controller.getMinMax(this,e),r||(n=Math.min(n,f.min)),l||(i=Math.max(i,f.max));return n=l&&n>i?i:n,i=r&&n>i?n:i,{min:Wl(n,Wl(i,n)),max:Wl(i,Wl(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ar(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:l,ticks:f}=this.options,a=f.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=e4(this,l,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const g=a<this.ticks.length;this._convertTicksToLabels(g?VA(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),f.display&&(f.autoSkip||f.source==="auto")&&(this.ticks=Fj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),g&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ar(this.options.afterUpdate,[this])}beforeSetDimensions(){Ar(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ar(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ar(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ar(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,l;for(i=0,r=e.length;i<r;i++)l=e[i],l.label=Ar(n.callback,[l.value,i,e],this)}afterTickToLabelConversion(){Ar(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ar(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=UA(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,l=n.maxRotation;let f=r,a,g,_;if(!this._isVisible()||!n.display||r>=l||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const x=this._getLabelSizes(),M=x.widest.width,O=x.highest.height,z=As(this.chart.width-M,0,this.maxWidth);a=e.offset?this.maxWidth/i:z/(i-1),M+6>a&&(a=z/(i-(e.offset?.5:1)),g=this.maxHeight-Gg(e.grid)-n.padding-$A(e.title,this.chart.options.font),_=Math.sqrt(M*M+O*O),f=kS(Math.min(Math.asin(As((x.highest.height+6)/a,-1,1)),Math.asin(As(g/_,-1,1))-Math.asin(As(O/_,-1,1)))),f=Math.max(r,Math.min(l,f))),this.labelRotation=f}afterCalculateLabelRotation(){Ar(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ar(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:l}}=this,f=this._isVisible(),a=this.isHorizontal();if(f){const g=$A(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Gg(l)+g):(e.height=this.maxHeight,e.width=Gg(l)+g),i.display&&this.ticks.length){const{first:_,last:x,widest:M,highest:O}=this._getLabelSizes(),z=i.padding*2,F=dc(this.labelRotation),V=Math.cos(F),H=Math.sin(F);if(a){const Q=i.mirror?0:H*M.width+V*O.height;e.height=Math.min(this.maxHeight,e.height+Q+z)}else{const Q=i.mirror?0:V*M.width+H*O.height;e.width=Math.min(this.maxWidth,e.width+Q+z)}this._calculatePadding(_,x,H,V)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:l,padding:f},position:a}=this.options,g=this.labelRotation!==0,_=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const x=this.getPixelForTick(0)-this.left,M=this.right-this.getPixelForTick(this.ticks.length-1);let O=0,z=0;g?_?(O=r*e.width,z=i*n.height):(O=i*e.height,z=r*n.width):l==="start"?z=n.width:l==="end"?O=e.width:l!=="inner"&&(O=e.width/2,z=n.width/2),this.paddingLeft=Math.max((O-x+f)*this.width/(this.width-x),0),this.paddingRight=Math.max((z-M+f)*this.width/(this.width-M),0)}else{let x=n.height/2,M=e.height/2;l==="start"?(x=0,M=e.height):l==="end"&&(x=n.height,M=0),this.paddingTop=x+f,this.paddingBottom=M+f}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ar(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)mi(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=VA(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:l}=this,f=[],a=[],g=Math.floor(n/UA(n,i));let _=0,x=0,M,O,z,F,V,H,Q,X,Y,W,J;for(M=0;M<n;M+=g){if(F=e[M].label,V=this._resolveTickFontOptions(M),r.font=H=V.string,Q=l[H]=l[H]||{data:{},gc:[]},X=V.lineHeight,Y=W=0,!mi(F)&&!Gr(F))Y=a0(r,Q.data,Q.gc,Y,F),W=X;else if(Gr(F))for(O=0,z=F.length;O<z;++O)J=F[O],!mi(J)&&!Gr(J)&&(Y=a0(r,Q.data,Q.gc,Y,J),W+=X);f.push(Y),a.push(W),_=Math.max(Y,_),x=Math.max(W,x)}Wj(l,n);const ot=f.indexOf(_),ht=a.indexOf(x),rt=ut=>({width:f[ut]||0,height:a[ut]||0});return{first:rt(0),last:rt(n-1),widest:rt(ot),highest:rt(ht),widths:f,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return kN(this._alignToPixels?zd(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=Xj(this.getContext(),e,i))}return this.$context||(this.$context=Yj(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=dc(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),l=this._getLabelSizes(),f=e.autoSkipPadding||0,a=l?l.widest.width+f:0,g=l?l.highest.height+f:0;return this.isHorizontal()?g*i>a*r?a/i:g/r:g*r<a*i?g/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:l,position:f,border:a}=r,g=l.offset,_=this.isHorizontal(),M=this.ticks.length+(g?1:0),O=Gg(l),z=[],F=a.setContext(this.getContext()),V=F.display?F.width:0,H=V/2,Q=function(kt){return zd(i,kt,V)};let X,Y,W,J,ot,ht,rt,ut,_t,bt,Pt,re;if(f==="top")X=Q(this.bottom),ht=this.bottom-O,ut=X-H,bt=Q(e.top)+H,re=e.bottom;else if(f==="bottom")X=Q(this.top),bt=e.top,re=Q(e.bottom)-H,ht=X+H,ut=this.top+O;else if(f==="left")X=Q(this.right),ot=this.right-O,rt=X-H,_t=Q(e.left)+H,Pt=e.right;else if(f==="right")X=Q(this.left),_t=e.left,Pt=Q(e.right)-H,ot=X+H,rt=this.left+O;else if(n==="x"){if(f==="center")X=Q((e.top+e.bottom)/2+.5);else if(Ai(f)){const kt=Object.keys(f)[0],Ot=f[kt];X=Q(this.chart.scales[kt].getPixelForValue(Ot))}bt=e.top,re=e.bottom,ht=X+H,ut=ht+O}else if(n==="y"){if(f==="center")X=Q((e.left+e.right)/2);else if(Ai(f)){const kt=Object.keys(f)[0],Ot=f[kt];X=Q(this.chart.scales[kt].getPixelForValue(Ot))}ot=X-H,rt=ot-O,_t=e.left,Pt=e.right}const ye=Wn(r.ticks.maxTicksLimit,M),fe=Math.max(1,Math.ceil(M/ye));for(Y=0;Y<M;Y+=fe){const kt=this.getContext(Y),Ot=l.setContext(kt),St=a.setContext(kt),jt=Ot.lineWidth,Vt=Ot.color,pt=St.dash||[],Tt=St.dashOffset,$t=Ot.tickWidth,Yt=Ot.tickColor,se=Ot.tickBorderDash||[],le=Ot.tickBorderDashOffset;W=Gj(this,Y,g),W!==void 0&&(J=zd(i,W,jt),_?ot=rt=_t=Pt=J:ht=ut=bt=re=J,z.push({tx1:ot,ty1:ht,tx2:rt,ty2:ut,x1:_t,y1:bt,x2:Pt,y2:re,width:jt,color:Vt,borderDash:pt,borderDashOffset:Tt,tickWidth:$t,tickColor:Yt,tickBorderDash:se,tickBorderDashOffset:le}))}return this._ticksLength=M,this._borderValue=X,z}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:l}=i,f=this.isHorizontal(),a=this.ticks,{align:g,crossAlign:_,padding:x,mirror:M}=l,O=Gg(i.grid),z=O+x,F=M?-x:z,V=-dc(this.labelRotation),H=[];let Q,X,Y,W,J,ot,ht,rt,ut,_t,bt,Pt,re="middle";if(r==="top")ot=this.bottom-F,ht=this._getXAxisLabelAlignment();else if(r==="bottom")ot=this.top+F,ht=this._getXAxisLabelAlignment();else if(r==="left"){const fe=this._getYAxisLabelAlignment(O);ht=fe.textAlign,J=fe.x}else if(r==="right"){const fe=this._getYAxisLabelAlignment(O);ht=fe.textAlign,J=fe.x}else if(n==="x"){if(r==="center")ot=(e.top+e.bottom)/2+z;else if(Ai(r)){const fe=Object.keys(r)[0],kt=r[fe];ot=this.chart.scales[fe].getPixelForValue(kt)+z}ht=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")J=(e.left+e.right)/2-z;else if(Ai(r)){const fe=Object.keys(r)[0],kt=r[fe];J=this.chart.scales[fe].getPixelForValue(kt)}ht=this._getYAxisLabelAlignment(O).textAlign}n==="y"&&(g==="start"?re="top":g==="end"&&(re="bottom"));const ye=this._getLabelSizes();for(Q=0,X=a.length;Q<X;++Q){Y=a[Q],W=Y.label;const fe=l.setContext(this.getContext(Q));rt=this.getPixelForTick(Q)+l.labelOffset,ut=this._resolveTickFontOptions(Q),_t=ut.lineHeight,bt=Gr(W)?W.length:1;const kt=bt/2,Ot=fe.color,St=fe.textStrokeColor,jt=fe.textStrokeWidth;let Vt=ht;f?(J=rt,ht==="inner"&&(Q===X-1?Vt=this.options.reverse?"left":"right":Q===0?Vt=this.options.reverse?"right":"left":Vt="center"),r==="top"?_==="near"||V!==0?Pt=-bt*_t+_t/2:_==="center"?Pt=-ye.highest.height/2-kt*_t+_t:Pt=-ye.highest.height+_t/2:_==="near"||V!==0?Pt=_t/2:_==="center"?Pt=ye.highest.height/2-kt*_t:Pt=ye.highest.height-bt*_t,M&&(Pt*=-1),V!==0&&!fe.showLabelBackdrop&&(J+=_t/2*Math.sin(V))):(ot=rt,Pt=(1-bt)*_t/2);let pt;if(fe.showLabelBackdrop){const Tt=Po(fe.backdropPadding),$t=ye.heights[Q],Yt=ye.widths[Q];let se=Pt-Tt.top,le=0-Tt.left;switch(re){case"middle":se-=$t/2;break;case"bottom":se-=$t;break}switch(ht){case"center":le-=Yt/2;break;case"right":le-=Yt;break;case"inner":Q===X-1?le-=Yt:Q>0&&(le-=Yt/2);break}pt={left:le,top:se,width:Yt+Tt.width,height:$t+Tt.height,color:fe.backdropColor}}H.push({label:W,font:ut,textOffset:Pt,options:{rotation:V,color:Ot,strokeColor:St,strokeWidth:jt,textAlign:Vt,textBaseline:re,translation:[J,ot],backdrop:pt}})}return H}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-dc(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:l}}=this.options,f=this._getLabelSizes(),a=e+l,g=f.widest.width;let _,x;return n==="left"?r?(x=this.right+l,i==="near"?_="left":i==="center"?(_="center",x+=g/2):(_="right",x+=g)):(x=this.right-a,i==="near"?_="right":i==="center"?(_="center",x-=g/2):(_="left",x=this.left)):n==="right"?r?(x=this.left+l,i==="near"?_="right":i==="center"?(_="center",x-=g/2):(_="left",x-=g)):(x=this.left+a,i==="near"?_="left":i==="center"?(_="center",x+=g/2):(_="right",x=this.right)):_="right",{textAlign:_,x}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:l,height:f}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,l,f),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(l=>l.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let l,f;const a=(g,_,x)=>{!x.width||!x.color||(i.save(),i.lineWidth=x.width,i.strokeStyle=x.color,i.setLineDash(x.borderDash||[]),i.lineDashOffset=x.borderDashOffset,i.beginPath(),i.moveTo(g.x,g.y),i.lineTo(_.x,_.y),i.stroke(),i.restore())};if(n.display)for(l=0,f=r.length;l<f;++l){const g=r[l];n.drawOnChartArea&&a({x:g.x1,y:g.y1},{x:g.x2,y:g.y2},g),n.drawTicks&&a({x:g.tx1,y:g.ty1},{x:g.tx2,y:g.ty2},{color:g.tickColor,width:g.tickWidth,borderDash:g.tickBorderDash,borderDashOffset:g.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,l=i.setContext(this.getContext()),f=i.display?l.width:0;if(!f)return;const a=r.setContext(this.getContext(0)).lineWidth,g=this._borderValue;let _,x,M,O;this.isHorizontal()?(_=zd(e,this.left,f)-f/2,x=zd(e,this.right,a)+a/2,M=O=g):(M=zd(e,this.top,f)-f/2,O=zd(e,this.bottom,a)+a/2,_=x=g),n.save(),n.lineWidth=l.width,n.strokeStyle=l.color,n.beginPath(),n.moveTo(_,M),n.lineTo(x,O),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&nx(i,r);const l=this.getLabelItems(e);for(const f of l){const a=f.options,g=f.font,_=f.label,x=f.textOffset;Jd(i,_,0,x,g,a)}r&&ix(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const l=cs(i.font),f=Po(i.padding),a=i.align;let g=l.lineHeight/2;n==="bottom"||n==="center"||Ai(n)?(g+=f.bottom,Gr(i.text)&&(g+=l.lineHeight*(i.text.length-1))):g+=f.top;const{titleX:_,titleY:x,maxWidth:M,rotation:O}=Qj(this,g,n,a);Jd(e,i.text,0,0,l,{color:i.color,maxWidth:M,rotation:O,textAlign:Kj(a,n,r),textBaseline:"middle",translation:[_,x]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Wn(e.grid&&e.grid.z,-1),r=Wn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==op.prototype.draw?[{z:n,draw:l=>{this.draw(l)}}]:[{z:i,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let l,f;for(l=0,f=n.length;l<f;++l){const a=n[l];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return cs(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Tv{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;e6(n)&&(i=this.register(n));const r=this.items,l=e.id,f=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+e);return l in r||(r[l]=e,Jj(e,f,i),this.override&&Wr.override(e.id,e.overrides)),f}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Wr[r]&&(delete Wr[r][i],this.override&&delete Qd[i])}}function Jj(t,e,n){const i=vy(Object.create(null),[n?Wr.get(n):{},Wr.get(e),t.defaults]);Wr.set(e,i),t.defaultRoutes&&t6(e,t.defaultRoutes),t.descriptors&&Wr.describe(e,t.descriptors)}function t6(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),l=[t].concat(i).join("."),f=e[n].split("."),a=f.pop(),g=f.join(".");Wr.route(l,r,g,a)})}function e6(t){return"id"in t&&"defaults"in t}class n6{constructor(){this.controllers=new Tv($f,"datasets",!0),this.elements=new Tv($h,"elements"),this.plugins=new Tv(Object,"plugins"),this.scales=new Tv(op,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const l=i||this._getRegistryForType(r);i||l.isForType(r)||l===this.plugins&&r.id?this._exec(e,l,r):nr(r,f=>{const a=i||this._getRegistryForType(f);this._exec(e,a,f)})})}_exec(e,n,i){const r=PS(e);Ar(i["before"+r],[],i),n[e](i),Ar(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Nc=new n6;class i6{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const l=r?this._descriptors(e).filter(r):this._descriptors(e),f=this._notify(l,e,n,i);return n==="afterDestroy"&&(this._notify(l,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),f}_notify(e,n,i,r){r=r||{};for(const l of e){const f=l.plugin,a=f[i],g=[n,r,l.options];if(Ar(a,g,f)===!1&&r.cancelable)return!1}return!0}invalidate(){mi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=Wn(i.options&&i.options.plugins,{}),l=r6(i);return r===!1&&!n?[]:s6(e,l,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(l,f)=>l.filter(a=>!f.some(g=>a.plugin.id===g.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function r6(t){const e={},n=[],i=Object.keys(Nc.plugins.items);for(let l=0;l<i.length;l++)n.push(Nc.getPlugin(i[l]));const r=t.plugins||[];for(let l=0;l<r.length;l++){const f=r[l];n.indexOf(f)===-1&&(n.push(f),e[f.id]=!0)}return{plugins:n,localIds:e}}function a6(t,e){return!e&&t===!1?null:t===!0?{}:t}function s6(t,{plugins:e,localIds:n},i,r){const l=[],f=t.getContext();for(const a of e){const g=a.id,_=a6(i[g],r);_!==null&&l.push({plugin:a,options:o6(t.config,{plugin:a,local:n[g]},_,f)})}return l}function o6(t,{plugin:e,local:n},i,r){const l=t.pluginScopeKeys(e),f=t.getOptionScopes(i,l);return n&&e.defaults&&f.push(e.defaults),t.createResolver(f,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ww(t,e){const n=Wr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function l6(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function u6(t,e){return t===e?"_index_":"_value_"}function qA(t){if(t==="x"||t==="y"||t==="r")return t}function c6(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Sw(t,...e){if(qA(t))return t;for(const n of e){const i=n.axis||c6(n.position)||t.length>1&&qA(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function HA(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function h6(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return HA(t,"x",n[0])||HA(t,"y",n[0])}return{}}function f6(t,e){const n=Qd[t.type]||{scales:{}},i=e.scales||{},r=ww(t.type,e),l=Object.create(null);return Object.keys(i).forEach(f=>{const a=i[f];if(!Ai(a))return console.error(`Invalid scale configuration for scale: ${f}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${f}`);const g=Sw(f,a,h6(f,t),Wr.scales[a.type]),_=u6(g,r),x=n.scales||{};l[f]=fy(Object.create(null),[{axis:g},a,x[g],x[_]])}),t.data.datasets.forEach(f=>{const a=f.type||t.type,g=f.indexAxis||ww(a,e),x=(Qd[a]||{}).scales||{};Object.keys(x).forEach(M=>{const O=l6(M,g),z=f[O+"AxisID"]||O;l[z]=l[z]||Object.create(null),fy(l[z],[{axis:O},i[z],x[M]])})}),Object.keys(l).forEach(f=>{const a=l[f];fy(a,[Wr.scales[a.type],Wr.scale])}),l}function HO(t){const e=t.options||(t.options={});e.plugins=Wn(e.plugins,{}),e.scales=f6(t,e)}function ZO(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function d6(t){return t=t||{},t.data=ZO(t.data),HO(t),t}const ZA=new Map,GO=new Set;function Av(t,e){let n=ZA.get(t);return n||(n=e(),ZA.set(t,n),GO.add(n)),n}const Wg=(t,e,n)=>{const i=jf(e,n);i!==void 0&&t.add(i)};class p6{constructor(e){this._config=d6(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ZO(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),HO(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Av(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Av(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Av(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Av(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:l}=this,f=this._cachedScopes(e,i),a=f.get(n);if(a)return a;const g=new Set;n.forEach(x=>{e&&(g.add(e),x.forEach(M=>Wg(g,e,M))),x.forEach(M=>Wg(g,r,M)),x.forEach(M=>Wg(g,Qd[l]||{},M)),x.forEach(M=>Wg(g,Wr,M)),x.forEach(M=>Wg(g,xw,M))});const _=Array.from(g);return _.length===0&&_.push(Object.create(null)),GO.has(n)&&f.set(n,_),_}chartOptionScopes(){const{options:e,type:n}=this;return[e,Qd[n]||{},Wr.datasets[n]||{},{type:n},Wr,xw]}resolveNamedOptions(e,n,i,r=[""]){const l={$shared:!0},{resolver:f,subPrefixes:a}=GA(this._resolverCache,e,r);let g=f;if(g6(f,n)){l.$shared=!1,i=Ff(i)?i():i;const _=this.createResolver(e,i,a);g=Mm(f,i,_)}for(const _ of n)l[_]=g[_];return l}createResolver(e,n,i=[""],r){const{resolver:l}=GA(this._resolverCache,e,i);return Ai(n)?Mm(l,n,void 0,r):l}}function GA(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let l=i.get(r);return l||(l={resolver:IS(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,l)),l}const m6=t=>Ai(t)&&Object.getOwnPropertyNames(t).some(e=>Ff(t[e]));function g6(t,e){const{isScriptable:n,isIndexable:i}=SO(t);for(const r of e){const l=n(r),f=i(r),a=(f||l)&&t[r];if(l&&(Ff(a)||m6(a))||f&&Gr(a))return!0}return!1}var y6="4.5.1";const _6=["top","bottom","left","right","chartArea"];function WA(t,e){return t==="top"||t==="bottom"||_6.indexOf(t)===-1&&e==="x"}function YA(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function XA(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ar(n&&n.onComplete,[t],e)}function v6(t){const e=t.chart,n=e.options.animation;Ar(n&&n.onProgress,[t],e)}function WO(t){return NS()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Wv={},KA=t=>{const e=WO(t);return Object.values(Wv).filter(n=>n.canvas===e).pop()};function x6(t,e,n){const i=Object.keys(t);for(const r of i){const l=+r;if(l>=e){const f=t[r];delete t[r],(n>0||l>e)&&(t[l+n]=f)}}}function b6(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}let Bm=class{static defaults=Wr;static instances=Wv;static overrides=Qd;static registry=Nc;static version=y6;static getChart=KA;static register(...e){Nc.add(...e),QA()}static unregister(...e){Nc.remove(...e),QA()}constructor(e,n){const i=this.config=new p6(n),r=WO(e),l=KA(r);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const f=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||jj(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,f.aspectRatio),g=a&&a.canvas,_=g&&g.height,x=g&&g.width;if(this.id=yN(),this.ctx=a,this.canvas=g,this.width=x,this.height=_,this._options=f,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new i6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=LN(M=>this.update(M),f.resizeDelay||0),this._dataChanges=[],Wv[this.id]=this,!a||!g){console.error("Failed to create chart: can't acquire context from the given item");return}wh.listen(this,"complete",XA),wh.listen(this,"progress",v6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:l}=this;return mi(e)?n&&l?l:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Nc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xA(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return yA(this.canvas,this.ctx),this}stop(){return wh.stop(this),this}resize(e,n){wh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,l=i.maintainAspectRatio&&this.aspectRatio,f=this.platform.getMaximumSize(r,e,n,l),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),g=this.width?"resize":"attach";this.width=f.width,this.height=f.height,this._aspectRatio=this.aspectRatio,xA(this,a,!0)&&(this.notifyPlugins("resize",{size:f}),Ar(i.onResize,[this,f],this),this.attached&&this._doResize(g)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};nr(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((f,a)=>(f[a]=!1,f),{});let l=[];n&&(l=l.concat(Object.keys(n).map(f=>{const a=n[f],g=Sw(f,a),_=g==="r",x=g==="x";return{options:a,dposition:_?"chartArea":x?"bottom":"left",dtype:_?"radialLinear":x?"category":"linear"}}))),nr(l,f=>{const a=f.options,g=a.id,_=Sw(g,a),x=Wn(a.type,f.dtype);(a.position===void 0||WA(a.position,_)!==WA(f.dposition))&&(a.position=f.dposition),r[g]=!0;let M=null;if(g in i&&i[g].type===x)M=i[g];else{const O=Nc.getScale(x);M=new O({id:g,type:x,ctx:this.ctx,chart:this}),i[M.id]=M}M.init(a,e)}),nr(r,(f,a)=>{f||delete i[a]}),nr(i,f=>{Co.configure(this,f,f.options),Co.addBox(this,f)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,l)=>r.index-l.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(YA("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(l=>l===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const l=n[i];let f=this.getDatasetMeta(i);const a=l.type||this.config.type;if(f.type&&f.type!==a&&(this._destroyDatasetMeta(i),f=this.getDatasetMeta(i)),f.type=a,f.indexAxis=l.indexAxis||ww(a,this.options),f.order=l.order||0,f.index=i,f.label=""+l.label,f.visible=this.isDatasetVisible(i),f.controller)f.controller.updateIndex(i),f.controller.linkScales();else{const g=Nc.getController(a),{datasetElementType:_,dataElementType:x}=Wr.datasets[a];Object.assign(g,{dataElementType:Nc.getElement(x),datasetElementType:_&&Nc.getElement(_)}),f.controller=new g(this,i),e.push(f.controller)}}return this._updateMetasets(),e}_resetElements(){nr(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let f=0;for(let _=0,x=this.data.datasets.length;_<x;_++){const{controller:M}=this.getDatasetMeta(_),O=!r&&l.indexOf(M)===-1;M.buildOrUpdateElements(O),f=Math.max(+M.getMaxOverflow(),f)}f=this._minPadding=i.layout.autoPadding?f:0,this._updateLayout(f),r||nr(l,_=>{_.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(YA("z","_idx"));const{_active:a,_lastEvent:g}=this;g?this._eventHandler(g,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){nr(this.scales,e=>{Co.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!lA(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:l}of n){const f=i==="_removeElements"?-l:l;x6(e,r,f)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=l=>new Set(e.filter(f=>f[0]===l).map((f,a)=>a+","+f.splice(1).join(","))),r=i(0);for(let l=1;l<n;l++)if(!lA(r,i(l)))return;return Array.from(r).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Co.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],nr(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,l)=>{r._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Ff(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wh.has(this)?this.attached&&!wh.running(this)&&wh.start(this):(this.draw(),XA({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,l;for(r=0,l=n.length;r<l;++r){const f=n[r];(!e||f.visible)&&i.push(f)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=LO(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&nx(n,r),e.controller.draw(),r&&ix(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Ph(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const l=_j.modes[n];return typeof l=="function"?l(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(l=>l&&l._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Vf(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",l=this.getDatasetMeta(e),f=l.controller._resolveAnimations(void 0,r);xy(n)?(l.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),f.update(l,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),wh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),yA(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Wv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(l,f)=>{n.addEventListener(this,l,f),e[l]=f},r=(l,f,a)=>{l.offsetX=f,l.offsetY=a,this._eventHandler(l)};nr(this.options.events,l=>i(l,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(g,_)=>{n.addEventListener(this,g,_),e[g]=_},r=(g,_)=>{e[g]&&(n.removeEventListener(this,g,_),delete e[g])},l=(g,_)=>{this.canvas&&this.resize(g,_)};let f;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",l),i("detach",f)};f=()=>{this.attached=!1,r("resize",l),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():f()}unbindEvents(){nr(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},nr(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let l,f,a,g;for(n==="dataset"&&(l=this.getDatasetMeta(e[0].datasetIndex),l.controller["_"+r+"DatasetHoverStyle"]()),a=0,g=e.length;a<g;++a){f=e[a];const _=f&&this.getDatasetMeta(f.datasetIndex).controller;_&&_[r+"HoverStyle"](f.element,f.datasetIndex,f.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:l,index:f})=>{const a=this.getDatasetMeta(l);if(!a)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:a.data[f],index:f}});!n0(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,l=(g,_)=>g.filter(x=>!_.some(M=>x.datasetIndex===M.datasetIndex&&x.index===M.index)),f=l(n,e),a=i?e:l(e,n);f.length&&this.updateHoverStyle(f,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=f=>(f.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const l=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(l||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:l}=this,f=n,a=this._getActiveElements(e,r,i,f),g=SN(e),_=b6(e,this._lastEvent,i,g);i&&(this._lastEvent=null,Ar(l.onHover,[e,a,this],this),g&&Ar(l.onClick,[e,a,this],this));const x=!n0(a,r);return(x||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=_,x}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const l=this.options.hover;return this.getElementsAtEventForMode(e,l.mode,l,r)}};function QA(){return nr(Bm.instances,t=>t._plugins.invalidate())}function w6(t,e,n){const{startAngle:i,x:r,y:l,outerRadius:f,innerRadius:a,options:g}=e,{borderWidth:_,borderJoinStyle:x}=g,M=Math.min(_/f,Mo(i-n));if(t.beginPath(),t.arc(r,l,f-_/2,i+M/2,n-M/2),a>0){const O=Math.min(_/a,Mo(i-n));t.arc(r,l,a+_/2,n-O/2,i+O/2,!0)}else{const O=Math.min(_/2,f*Mo(i-n));if(x==="round")t.arc(r,l,O,n-Vi/2,i+Vi/2,!0);else if(x==="bevel"){const z=2*O*O,F=-z*Math.cos(n+Vi/2)+r,V=-z*Math.sin(n+Vi/2)+l,H=z*Math.cos(i+Vi/2)+r,Q=z*Math.sin(i+Vi/2)+l;t.lineTo(F,V),t.lineTo(H,Q)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function S6(t,e,n){const{startAngle:i,pixelMargin:r,x:l,y:f,outerRadius:a,innerRadius:g}=e;let _=r/a;t.beginPath(),t.arc(l,f,a,i-_,n+_),g>r?(_=r/g,t.arc(l,f,g,n+_,i-_,!0)):t.arc(l,f,r,n+za,i-za),t.closePath(),t.clip()}function T6(t){return LS(t,["outerStart","outerEnd","innerStart","innerEnd"])}function A6(t,e,n,i){const r=T6(t.options.borderRadius),l=(n-e)/2,f=Math.min(l,i*e/2),a=g=>{const _=(n-Math.min(l,g))*i/2;return As(g,0,Math.min(l,_))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:As(r.innerStart,0,f),innerEnd:As(r.innerEnd,0,f)}}function dm(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function l0(t,e,n,i,r,l){const{x:f,y:a,startAngle:g,pixelMargin:_,innerRadius:x}=e,M=Math.max(e.outerRadius+i+n-_,0),O=x>0?x+i+n+_:0;let z=0;const F=r-g;if(i){const fe=x>0?x-i:0,kt=M>0?M-i:0,Ot=(fe+kt)/2,St=Ot!==0?F*Ot/(Ot+i):F;z=(F-St)/2}const V=Math.max(.001,F*M-n/Vi)/M,H=(F-V)/2,Q=g+H+z,X=r-H-z,{outerStart:Y,outerEnd:W,innerStart:J,innerEnd:ot}=A6(e,O,M,X-Q),ht=M-Y,rt=M-W,ut=Q+Y/ht,_t=X-W/rt,bt=O+J,Pt=O+ot,re=Q+J/bt,ye=X-ot/Pt;if(t.beginPath(),l){const fe=(ut+_t)/2;if(t.arc(f,a,M,ut,fe),t.arc(f,a,M,fe,_t),W>0){const jt=dm(rt,_t,f,a);t.arc(jt.x,jt.y,W,_t,X+za)}const kt=dm(Pt,X,f,a);if(t.lineTo(kt.x,kt.y),ot>0){const jt=dm(Pt,ye,f,a);t.arc(jt.x,jt.y,ot,X+za,ye+Math.PI)}const Ot=(X-ot/O+(Q+J/O))/2;if(t.arc(f,a,O,X-ot/O,Ot,!0),t.arc(f,a,O,Ot,Q+J/O,!0),J>0){const jt=dm(bt,re,f,a);t.arc(jt.x,jt.y,J,re+Math.PI,Q-za)}const St=dm(ht,Q,f,a);if(t.lineTo(St.x,St.y),Y>0){const jt=dm(ht,ut,f,a);t.arc(jt.x,jt.y,Y,Q-za,ut)}}else{t.moveTo(f,a);const fe=Math.cos(ut)*M+f,kt=Math.sin(ut)*M+a;t.lineTo(fe,kt);const Ot=Math.cos(_t)*M+f,St=Math.sin(_t)*M+a;t.lineTo(Ot,St)}t.closePath()}function M6(t,e,n,i,r){const{fullCircles:l,startAngle:f,circumference:a}=e;let g=e.endAngle;if(l){l0(t,e,n,i,g,r);for(let _=0;_<l;++_)t.fill();isNaN(a)||(g=f+(a%jr||jr))}return l0(t,e,n,i,g,r),t.fill(),g}function E6(t,e,n,i,r){const{fullCircles:l,startAngle:f,circumference:a,options:g}=e,{borderWidth:_,borderJoinStyle:x,borderDash:M,borderDashOffset:O,borderRadius:z}=g,F=g.borderAlign==="inner";if(!_)return;t.setLineDash(M||[]),t.lineDashOffset=O,F?(t.lineWidth=_*2,t.lineJoin=x||"round"):(t.lineWidth=_,t.lineJoin=x||"bevel");let V=e.endAngle;if(l){l0(t,e,n,i,V,r);for(let H=0;H<l;++H)t.stroke();isNaN(a)||(V=f+(a%jr||jr))}F&&S6(t,e,V),g.selfJoin&&V-f>=Vi&&z===0&&x!=="miter"&&w6(t,e,V),l||(l0(t,e,n,i,V,r),t.stroke())}class C6 extends $h{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.getProps(["x","y"],i),{angle:l,distance:f}=dO(r,{x:e,y:n}),{startAngle:a,endAngle:g,innerRadius:_,outerRadius:x,circumference:M}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),O=(this.options.spacing+this.options.borderWidth)/2,z=Wn(M,g-a),F=by(l,a,g)&&a!==g,V=z>=jr||F,H=Eh(f,_+O,x+O);return V&&H}getCenterPoint(e){const{x:n,y:i,startAngle:r,endAngle:l,innerRadius:f,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:g,spacing:_}=this.options,x=(r+l)/2,M=(f+a+_+g)/2;return{x:n+Math.cos(x)*M,y:i+Math.sin(x)*M}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,r=(n.offset||0)/4,l=(n.spacing||0)/2,f=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>jr?Math.floor(i/jr):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const g=1-Math.sin(Math.min(Vi,i||0)),_=r*g;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,M6(e,this,_,l,f),E6(e,this,_,l,f),e.restore()}}function YO(t,e,n=e){t.lineCap=Wn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Wn(n.borderDash,e.borderDash)),t.lineDashOffset=Wn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Wn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Wn(n.borderWidth,e.borderWidth),t.strokeStyle=Wn(n.borderColor,e.borderColor)}function P6(t,e,n){t.lineTo(n.x,n.y)}function k6(t){return t.stepped?ZN:t.tension||t.cubicInterpolationMode==="monotone"?GN:P6}function XO(t,e,n={}){const i=t.length,{start:r=0,end:l=i-1}=n,{start:f,end:a}=e,g=Math.max(r,f),_=Math.min(l,a),x=r<f&&l<f||r>a&&l>a;return{count:i,start:g,loop:e.loop,ilen:_<g&&!x?i+_-g:_-g}}function O6(t,e,n,i){const{points:r,options:l}=e,{count:f,start:a,loop:g,ilen:_}=XO(r,n,i),x=k6(l);let{move:M=!0,reverse:O}=i||{},z,F,V;for(z=0;z<=_;++z)F=r[(a+(O?_-z:z))%f],!F.skip&&(M?(t.moveTo(F.x,F.y),M=!1):x(t,V,F,O,l.stepped),V=F);return g&&(F=r[(a+(O?_:0))%f],x(t,V,F,O,l.stepped)),!!g}function D6(t,e,n,i){const r=e.points,{count:l,start:f,ilen:a}=XO(r,n,i),{move:g=!0,reverse:_}=i||{};let x=0,M=0,O,z,F,V,H,Q;const X=W=>(f+(_?a-W:W))%l,Y=()=>{V!==H&&(t.lineTo(x,H),t.lineTo(x,V),t.lineTo(x,Q))};for(g&&(z=r[X(0)],t.moveTo(z.x,z.y)),O=0;O<=a;++O){if(z=r[X(O)],z.skip)continue;const W=z.x,J=z.y,ot=W|0;ot===F?(J<V?V=J:J>H&&(H=J),x=(M*x+W)/++M):(Y(),t.lineTo(W,J),F=ot,M=0,V=H=J),Q=J}Y()}function Tw(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?D6:O6}function z6(t){return t.stepped?A4:t.tension||t.cubicInterpolationMode==="monotone"?M4:Nd}function L6(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),YO(t,e.options),t.stroke(r)}function I6(t,e,n,i){const{segments:r,options:l}=e,f=Tw(e);for(const a of r)YO(t,l,a.style),t.beginPath(),f(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const R6=typeof Path2D=="function";function B6(t,e,n,i){R6&&!e.options.segment?L6(t,e,n,i):I6(t,e,n,i)}class qy extends $h{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;y4(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=D4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],l=this.points,f=zO(this,{property:n,start:r,end:r});if(!f.length)return;const a=[],g=z6(i);let _,x;for(_=0,x=f.length;_<x;++_){const{start:M,end:O}=f[_],z=l[M],F=l[O];if(z===F){a.push(z);continue}const V=Math.abs((r-z[n])/(F[n]-z[n])),H=g(z,F,V,i.stepped);H[n]=e[n],a.push(H)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Tw(this)(e,this,n,i)}path(e,n,i){const r=this.segments,l=Tw(this);let f=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)f&=l(e,this,a,{start:n,end:n+i-1});return!!f}draw(e,n,i,r){const l=this.options||{};(this.points||[]).length&&l.borderWidth&&(e.save(),B6(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function JA(t,e,n,i){const r=t.options,{[n]:l}=t.getProps([n],i);return Math.abs(e-l)<r.radius+r.hitRadius}class KO extends $h{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.options,{x:l,y:f}=this.getProps(["x","y"],i);return Math.pow(e-l,2)+Math.pow(n-f,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,n){return JA(this,e,"x",n)}inYRange(e,n){return JA(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!Ph(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,bw(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function QO(t,e){const{x:n,y:i,base:r,width:l,height:f}=t.getProps(["x","y","base","width","height"],e);let a,g,_,x,M;return t.horizontal?(M=f/2,a=Math.min(n,r),g=Math.max(n,r),_=i-M,x=i+M):(M=l/2,a=n-M,g=n+M,_=Math.min(i,r),x=Math.max(i,r)),{left:a,top:_,right:g,bottom:x}}function Rf(t,e,n,i){return t?0:As(e,n,i)}function N6(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,l=wO(i);return{t:Rf(r.top,l.top,0,n),r:Rf(r.right,l.right,0,e),b:Rf(r.bottom,l.bottom,0,n),l:Rf(r.left,l.left,0,e)}}function j6(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,l=Hd(r),f=Math.min(e,n),a=t.borderSkipped,g=i||Ai(r);return{topLeft:Rf(!g||a.top||a.left,l.topLeft,0,f),topRight:Rf(!g||a.top||a.right,l.topRight,0,f),bottomLeft:Rf(!g||a.bottom||a.left,l.bottomLeft,0,f),bottomRight:Rf(!g||a.bottom||a.right,l.bottomRight,0,f)}}function F6(t){const e=QO(t),n=e.right-e.left,i=e.bottom-e.top,r=N6(t,n/2,i/2),l=j6(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:l},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,l.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(r.b,r.r))}}}}function Ob(t,e,n,i){const r=e===null,l=n===null,a=t&&!(r&&l)&&QO(t,i);return a&&(r||Eh(e,a.left,a.right))&&(l||Eh(n,a.top,a.bottom))}function U6(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function V6(t,e){t.rect(e.x,e.y,e.w,e.h)}function Db(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,l=(t.x+t.w!==n.x+n.w?e:0)-i,f=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+l,h:t.h+f,radius:t.radius}}class $6 extends $h{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:l,outer:f}=F6(this),a=U6(f.radius)?wy:V6;e.save(),(f.w!==l.w||f.h!==l.h)&&(e.beginPath(),a(e,Db(f,n,l)),e.clip(),a(e,Db(l,-n,f)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Db(l,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return Ob(this,e,n,i)}inXRange(e,n){return Ob(this,e,null,n)}inYRange(e,n){return Ob(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:l}=this.getProps(["x","y","base","horizontal"],e);return{x:l?(n+r)/2:n,y:l?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var q6=Object.freeze({__proto__:null,ArcElement:C6,BarElement:$6,LineElement:qy,PointElement:KO});const Aw=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],tM=Aw.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function JO(t){return Aw[t%Aw.length]}function tD(t){return tM[t%tM.length]}function H6(t,e){return t.borderColor=JO(e),t.backgroundColor=tD(e),++e}function Z6(t,e){return t.backgroundColor=t.data.map(()=>JO(e++)),e}function G6(t,e){return t.backgroundColor=t.data.map(()=>tD(e++)),e}function W6(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof FS?e=Z6(n,e):r instanceof jO?e=G6(n,e):r&&(e=H6(n,e))}}function eM(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Y6(t){return t&&(t.borderColor||t.backgroundColor)}function X6(){return Wr.borderColor!=="rgba(0,0,0,0.1)"||Wr.backgroundColor!=="rgba(0,0,0,0.1)"}var K6={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:l}=r,f=eM(i)||Y6(r)||l&&eM(l)||X6();if(!n.forceOverride&&f)return;const a=W6(t);i.forEach(a)}};function Q6(t,e,n,i,r){const l=r.samples||i;if(l>=n)return t.slice(e,e+n);const f=[],a=(n-2)/(l-2);let g=0;const _=e+n-1;let x=e,M,O,z,F,V;for(f[g++]=t[x],M=0;M<l-2;M++){let H=0,Q=0,X;const Y=Math.floor((M+1)*a)+1+e,W=Math.min(Math.floor((M+2)*a)+1,n)+e,J=W-Y;for(X=Y;X<W;X++)H+=t[X].x,Q+=t[X].y;H/=J,Q/=J;const ot=Math.floor(M*a)+1+e,ht=Math.min(Math.floor((M+1)*a)+1,n)+e,{x:rt,y:ut}=t[x];for(z=F=-1,X=ot;X<ht;X++)F=.5*Math.abs((rt-H)*(t[X].y-ut)-(rt-t[X].x)*(Q-ut)),F>z&&(z=F,O=t[X],V=X);f[g++]=O,x=V}return f[g++]=t[_],f}function J6(t,e,n,i){let r=0,l=0,f,a,g,_,x,M,O,z,F,V;const H=[],Q=e+n-1,X=t[e].x,W=t[Q].x-X;for(f=e;f<e+n;++f){a=t[f],g=(a.x-X)/W*i,_=a.y;const J=g|0;if(J===x)_<F?(F=_,M=f):_>V&&(V=_,O=f),r=(l*r+a.x)/++l;else{const ot=f-1;if(!mi(M)&&!mi(O)){const ht=Math.min(M,O),rt=Math.max(M,O);ht!==z&&ht!==ot&&H.push({...t[ht],x:r}),rt!==z&&rt!==ot&&H.push({...t[rt],x:r})}f>0&&ot!==z&&H.push(t[ot]),H.push(a),x=J,l=0,F=V=_,M=O=z=f}}return H}function eD(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function nM(t){t.data.datasets.forEach(e=>{eD(e)})}function tF(t,e){const n=e.length;let i=0,r;const{iScale:l}=t,{min:f,max:a,minDefined:g,maxDefined:_}=l.getUserBounds();return g&&(i=As(Ch(e,l.axis,f).lo,0,n-1)),_?r=As(Ch(e,l.axis,a).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var eF={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){nM(t);return}const i=t.width;t.data.datasets.forEach((r,l)=>{const{_data:f,indexAxis:a}=r,g=t.getDatasetMeta(l),_=f||r.data;if(oy([a,t.options.indexAxis])==="y"||!g.controller.supportsDecimation)return;const x=t.scales[g.xAxisID];if(x.type!=="linear"&&x.type!=="time"||t.options.parsing)return;let{start:M,count:O}=tF(g,_);const z=n.threshold||4*i;if(O<=z){eD(r);return}mi(f)&&(r._data=_,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(V){this._data=V}}));let F;switch(n.algorithm){case"lttb":F=Q6(_,M,O,i,n);break;case"min-max":F=J6(_,M,O,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=F})},destroy(t){nM(t)}};function nF(t,e,n){const i=t.segments,r=t.points,l=e.points,f=[];for(const a of i){let{start:g,end:_}=a;_=sx(g,_,r);const x=Mw(n,r[g],r[_],a.loop);if(!e.segments){f.push({source:a,target:x,start:r[g],end:r[_]});continue}const M=zO(e,x);for(const O of M){const z=Mw(n,l[O.start],l[O.end],O.loop),F=DO(a,r,z);for(const V of F)f.push({source:V,target:O,start:{[n]:iM(x,z,"start",Math.max)},end:{[n]:iM(x,z,"end",Math.min)}})}}return f}function Mw(t,e,n,i){if(i)return;let r=e[t],l=n[t];return t==="angle"&&(r=Mo(r),l=Mo(l)),{property:t,start:r,end:l}}function iF(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,l=[];return e.segments.forEach(({start:f,end:a})=>{a=sx(f,a,r);const g=r[f],_=r[a];i!==null?(l.push({x:g.x,y:i}),l.push({x:_.x,y:i})):n!==null&&(l.push({x:n,y:g.y}),l.push({x:n,y:_.y}))}),l}function sx(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function iM(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function nD(t,e){let n=[],i=!1;return Gr(t)?(i=!0,n=t):n=iF(t,e),n.length?new qy({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function rM(t){return t&&t.fill!==!1}function rF(t,e,n){let r=t[e].fill;const l=[e];let f;if(!n)return r;for(;r!==!1&&l.indexOf(r)===-1;){if(!ya(r))return r;if(f=t[r],!f)return!1;if(f.visible)return r;l.push(r),r=f.fill}return!1}function aF(t,e,n){const i=uF(t);if(Ai(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return ya(r)&&Math.floor(r)===r?sF(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function sF(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function oF(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ai(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function lF(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:Ai(t)?i=t.value:i=e.getBaseValue(),i}function uF(t){const e=t.options,n=e.fill;let i=Wn(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function cF(t){const{scale:e,index:n,line:i}=t,r=[],l=i.segments,f=i.points,a=hF(e,n);a.push(nD({x:null,y:e.bottom},i));for(let g=0;g<l.length;g++){const _=l[g];for(let x=_.start;x<=_.end;x++)fF(r,f[x],a)}return new qy({points:r,options:{}})}function hF(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const l=i[r];if(l.index===e)break;l.hidden||n.unshift(l.dataset)}return n}function fF(t,e,n){const i=[];for(let r=0;r<n.length;r++){const l=n[r],{first:f,last:a,point:g}=dF(l,e,"x");if(!(!g||f&&a)){if(f)i.unshift(g);else if(t.push(g),!a)break}}t.push(...i)}function dF(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],l=t.segments,f=t.points;let a=!1,g=!1;for(let _=0;_<l.length;_++){const x=l[_],M=f[x.start][n],O=f[x.end][n];if(Eh(r,M,O)){a=r===M,g=r===O;break}}return{first:a,last:g,point:i}}class iD{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:r,y:l,radius:f}=this;return n=n||{start:0,end:jr},e.arc(r,l,f,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:r}=this,l=e.angle;return{x:n+Math.cos(l)*r,y:i+Math.sin(l)*r,angle:l}}}function pF(t){const{chart:e,fill:n,line:i}=t;if(ya(n))return mF(e,n);if(n==="stack")return cF(t);if(n==="shape")return!0;const r=gF(t);return r instanceof iD?r:nD(r,i)}function mF(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function gF(t){return(t.scale||{}).getPointPositionForValue?_F(t):yF(t)}function yF(t){const{scale:e={},fill:n}=t,i=oF(n,e);if(ya(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function _F(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,l=i.reverse?e.max:e.min,f=lF(n,e,l),a=[];if(i.grid.circular){const g=e.getPointPositionForValue(0,l);return new iD({x:g.x,y:g.y,radius:e.getDistanceFromCenterForValue(f)})}for(let g=0;g<r;++g)a.push(e.getPointPositionForValue(g,f));return a}function zb(t,e,n){const i=pF(e),{chart:r,index:l,line:f,scale:a,axis:g}=e,_=f.options,x=_.fill,M=_.backgroundColor,{above:O=M,below:z=M}=x||{},F=r.getDatasetMeta(l),V=LO(r,F);i&&f.points.length&&(nx(t,n),vF(t,{line:f,target:i,above:O,below:z,area:n,scale:a,axis:g,clip:V}),ix(t))}function vF(t,e){const{line:n,target:i,above:r,below:l,area:f,scale:a,clip:g}=e,_=n._loop?"angle":e.axis;t.save();let x=l;l!==r&&(_==="x"?(aM(t,i,f.top),Lb(t,{line:n,target:i,color:r,scale:a,property:_,clip:g}),t.restore(),t.save(),aM(t,i,f.bottom)):_==="y"&&(sM(t,i,f.left),Lb(t,{line:n,target:i,color:l,scale:a,property:_,clip:g}),t.restore(),t.save(),sM(t,i,f.right),x=r)),Lb(t,{line:n,target:i,color:x,scale:a,property:_,clip:g}),t.restore()}function aM(t,e,n){const{segments:i,points:r}=e;let l=!0,f=!1;t.beginPath();for(const a of i){const{start:g,end:_}=a,x=r[g],M=r[sx(g,_,r)];l?(t.moveTo(x.x,x.y),l=!1):(t.lineTo(x.x,n),t.lineTo(x.x,x.y)),f=!!e.pathSegment(t,a,{move:f}),f?t.closePath():t.lineTo(M.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function sM(t,e,n){const{segments:i,points:r}=e;let l=!0,f=!1;t.beginPath();for(const a of i){const{start:g,end:_}=a,x=r[g],M=r[sx(g,_,r)];l?(t.moveTo(x.x,x.y),l=!1):(t.lineTo(n,x.y),t.lineTo(x.x,x.y)),f=!!e.pathSegment(t,a,{move:f}),f?t.closePath():t.lineTo(n,M.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Lb(t,e){const{line:n,target:i,property:r,color:l,scale:f,clip:a}=e,g=nF(n,i,r);for(const{source:_,target:x,start:M,end:O}of g){const{style:{backgroundColor:z=l}={}}=_,F=i!==!0;t.save(),t.fillStyle=z,xF(t,f,a,F&&Mw(r,M,O)),t.beginPath();const V=!!n.pathSegment(t,_);let H;if(F){V?t.closePath():oM(t,i,O,r);const Q=!!i.pathSegment(t,x,{move:V,reverse:!0});H=V&&Q,H||oM(t,i,M,r)}t.closePath(),t.fill(H?"evenodd":"nonzero"),t.restore()}}function xF(t,e,n,i){const r=e.chart.chartArea,{property:l,start:f,end:a}=i||{};if(l==="x"||l==="y"){let g,_,x,M;l==="x"?(g=f,_=r.top,x=a,M=r.bottom):(g=r.left,_=f,x=r.right,M=a),t.beginPath(),n&&(g=Math.max(g,n.left),x=Math.min(x,n.right),_=Math.max(_,n.top),M=Math.min(M,n.bottom)),t.rect(g,_,x-g,M-_),t.clip()}}function oM(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var bF={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let l,f,a,g;for(f=0;f<i;++f)l=t.getDatasetMeta(f),a=l.dataset,g=null,a&&a.options&&a instanceof qy&&(g={visible:t.isDatasetVisible(f),index:f,fill:aF(a,f,i),chart:t,axis:l.controller.options.indexAxis,scale:l.vScale,line:a}),l.$filler=g,r.push(g);for(f=0;f<i;++f)g=r[f],!(!g||g.fill===!1)&&(g.fill=rF(r,f,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),l=t.chartArea;for(let f=r.length-1;f>=0;--f){const a=r[f].$filler;a&&(a.line.updateControlPoints(l,a.axis),i&&a.fill&&zb(t.ctx,a,l))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const l=i[r].$filler;rM(l)&&zb(t.ctx,l,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!rM(i)||n.drawTime!=="beforeDatasetDraw"||zb(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const lM=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},wF=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class uM extends $h{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ar(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=cs(i.font),l=r.size,f=this._computeTitleHeight(),{boxWidth:a,itemHeight:g}=lM(i,l);let _,x;n.font=r.string,this.isHorizontal()?(_=this.maxWidth,x=this._fitRows(f,l,a,g)+10):(x=this.maxHeight,_=this._fitCols(f,r,a,g)+10),this.width=Math.min(_,e.maxWidth||this.maxWidth),this.height=Math.min(x,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:l,maxWidth:f,options:{labels:{padding:a}}}=this,g=this.legendHitBoxes=[],_=this.lineWidths=[0],x=r+a;let M=e;l.textAlign="left",l.textBaseline="middle";let O=-1,z=-x;return this.legendItems.forEach((F,V)=>{const H=i+n/2+l.measureText(F.text).width;(V===0||_[_.length-1]+H+2*a>f)&&(M+=x,_[_.length-(V>0?0:1)]=0,z+=x,O++),g[V]={left:0,top:z,row:O,width:H,height:r},_[_.length-1]+=H+a}),M}_fitCols(e,n,i,r){const{ctx:l,maxHeight:f,options:{labels:{padding:a}}}=this,g=this.legendHitBoxes=[],_=this.columnSizes=[],x=f-e;let M=a,O=0,z=0,F=0,V=0;return this.legendItems.forEach((H,Q)=>{const{itemWidth:X,itemHeight:Y}=SF(i,n,l,H,r);Q>0&&z+Y+2*a>x&&(M+=O+a,_.push({width:O,height:z}),F+=O+a,V++,O=z=0),g[Q]={left:F,top:z,col:V,width:X,height:Y},O=Math.max(O,X),z+=Y+a}),M+=O,_.push({width:O,height:z}),M}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:l}}=this,f=wm(l,this.left,this.width);if(this.isHorizontal()){let a=0,g=To(i,this.left+r,this.right-this.lineWidths[a]);for(const _ of n)a!==_.row&&(a=_.row,g=To(i,this.left+r,this.right-this.lineWidths[a])),_.top+=this.top+e+r,_.left=f.leftForLtr(f.x(g),_.width),g+=_.width+r}else{let a=0,g=To(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const _ of n)_.col!==a&&(a=_.col,g=To(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),_.top=g,_.left+=this.left+r,_.left=f.leftForLtr(f.x(_.left),_.width),g+=_.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;nx(e,this),this._draw(),ix(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:l,labels:f}=e,a=Wr.color,g=wm(e.rtl,this.left,this.width),_=cs(f.font),{padding:x}=f,M=_.size,O=M/2;let z;this.drawTitle(),r.textAlign=g.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=_.string;const{boxWidth:F,boxHeight:V,itemHeight:H}=lM(f,M),Q=function(ot,ht,rt){if(isNaN(F)||F<=0||isNaN(V)||V<0)return;r.save();const ut=Wn(rt.lineWidth,1);if(r.fillStyle=Wn(rt.fillStyle,a),r.lineCap=Wn(rt.lineCap,"butt"),r.lineDashOffset=Wn(rt.lineDashOffset,0),r.lineJoin=Wn(rt.lineJoin,"miter"),r.lineWidth=ut,r.strokeStyle=Wn(rt.strokeStyle,a),r.setLineDash(Wn(rt.lineDash,[])),f.usePointStyle){const _t={radius:V*Math.SQRT2/2,pointStyle:rt.pointStyle,rotation:rt.rotation,borderWidth:ut},bt=g.xPlus(ot,F/2),Pt=ht+O;bO(r,_t,bt,Pt,f.pointStyleWidth&&F)}else{const _t=ht+Math.max((M-V)/2,0),bt=g.leftForLtr(ot,F),Pt=Hd(rt.borderRadius);r.beginPath(),Object.values(Pt).some(re=>re!==0)?wy(r,{x:bt,y:_t,w:F,h:V,radius:Pt}):r.rect(bt,_t,F,V),r.fill(),ut!==0&&r.stroke()}r.restore()},X=function(ot,ht,rt){Jd(r,rt.text,ot,ht+H/2,_,{strikethrough:rt.hidden,textAlign:g.textAlign(rt.textAlign)})},Y=this.isHorizontal(),W=this._computeTitleHeight();Y?z={x:To(l,this.left+x,this.right-i[0]),y:this.top+x+W,line:0}:z={x:this.left+x,y:To(l,this.top+W+x,this.bottom-n[0].height),line:0},PO(this.ctx,e.textDirection);const J=H+x;this.legendItems.forEach((ot,ht)=>{r.strokeStyle=ot.fontColor,r.fillStyle=ot.fontColor;const rt=r.measureText(ot.text).width,ut=g.textAlign(ot.textAlign||(ot.textAlign=f.textAlign)),_t=F+O+rt;let bt=z.x,Pt=z.y;g.setWidth(this.width),Y?ht>0&&bt+_t+x>this.right&&(Pt=z.y+=J,z.line++,bt=z.x=To(l,this.left+x,this.right-i[z.line])):ht>0&&Pt+J>this.bottom&&(bt=z.x=bt+n[z.line].width+x,z.line++,Pt=z.y=To(l,this.top+W+x,this.bottom-n[z.line].height));const re=g.x(bt);if(Q(re,Pt,ot),bt=IN(ut,bt+F+O,Y?bt+_t:this.right,e.rtl),X(g.x(bt),Pt,ot),Y)z.x+=_t+x;else if(typeof ot.text!="string"){const ye=_.lineHeight;z.y+=rD(ot,ye)+x}else z.y+=J}),kO(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=cs(n.font),r=Po(n.padding);if(!n.display)return;const l=wm(e.rtl,this.left,this.width),f=this.ctx,a=n.position,g=i.size/2,_=r.top+g;let x,M=this.left,O=this.width;if(this.isHorizontal())O=Math.max(...this.lineWidths),x=this.top+_,M=To(e.align,M,this.right-O);else{const F=this.columnSizes.reduce((V,H)=>Math.max(V,H.height),0);x=_+To(e.align,this.top,this.bottom-F-e.labels.padding-this._computeTitleHeight())}const z=To(a,M,M+O);f.textAlign=l.textAlign(DS(a)),f.textBaseline="middle",f.strokeStyle=n.color,f.fillStyle=n.color,f.font=i.string,Jd(f,n.text,z,x,i)}_computeTitleHeight(){const e=this.options.title,n=cs(e.font),i=Po(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,l;if(Eh(e,this.left,this.right)&&Eh(n,this.top,this.bottom)){for(l=this.legendHitBoxes,i=0;i<l.length;++i)if(r=l[i],Eh(e,r.left,r.left+r.width)&&Eh(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!MF(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,l=wF(r,i);r&&!l&&Ar(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!l&&Ar(n.onHover,[e,i,this],this)}else i&&Ar(n.onClick,[e,i,this],this)}}function SF(t,e,n,i,r){const l=TF(i,t,e,n),f=AF(r,i,e.lineHeight);return{itemWidth:l,itemHeight:f}}function TF(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((l,f)=>l.length>f.length?l:f)),e+n.size/2+i.measureText(r).width}function AF(t,e,n){let i=t;return typeof e.text!="string"&&(i=rD(e,n)),i}function rD(t,e){const n=t.text?t.text.length:0;return e*n}function MF(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var aD={id:"legend",_element:uM,start(t,e,n){const i=t.legend=new uM({ctx:t.ctx,options:n,chart:t});Co.configure(t,i,n),Co.addBox(t,i)},stop(t){Co.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Co.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:l,useBorderRadius:f,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(g=>{const _=g.controller.getStyle(n?0:void 0),x=Po(_.borderWidth);return{text:e[g.index].label,fillStyle:_.backgroundColor,fontColor:l,hidden:!g.visible,lineCap:_.borderCapStyle,lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:_.borderColor,pointStyle:i||_.pointStyle,rotation:_.rotation,textAlign:r||_.textAlign,borderRadius:f&&(a||_.borderRadius),datasetIndex:g.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class VS extends $h{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Gr(i.text)?i.text.length:1;this._padding=Po(i.padding);const l=r*cs(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:l,options:f}=this,a=f.align;let g=0,_,x,M;return this.isHorizontal()?(x=To(a,i,l),M=n+e,_=l-i):(f.position==="left"?(x=i+e,M=To(a,r,n),g=Vi*-.5):(x=l-e,M=To(a,n,r),g=Vi*.5),_=r-n),{titleX:x,titleY:M,maxWidth:_,rotation:g}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=cs(n.font),l=i.lineHeight/2+this._padding.top,{titleX:f,titleY:a,maxWidth:g,rotation:_}=this._drawArgs(l);Jd(e,n.text,0,0,i,{color:n.color,maxWidth:g,rotation:_,textAlign:DS(n.align),textBaseline:"middle",translation:[f,a]})}}function EF(t,e){const n=new VS({ctx:t.ctx,options:e,chart:t});Co.configure(t,n,e),Co.addBox(t,n),t.titleBlock=n}var sD={id:"title",_element:VS,start(t,e,n){EF(t,n)},stop(t){const e=t.titleBlock;Co.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Co.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mv=new WeakMap;var CF={id:"subtitle",start(t,e,n){const i=new VS({ctx:t.ctx,options:n,chart:t});Co.configure(t,i,n),Co.addBox(t,i),Mv.set(t,i)},stop(t){Co.removeBox(t,Mv.get(t)),Mv.delete(t)},beforeUpdate(t,e,n){const i=Mv.get(t);Co.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const uy={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,l=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const g=a.tooltipPosition();i.add(g.x),r+=g.y,++l}}return l===0||i.size===0?!1:{x:[...i].reduce((a,g)=>a+g)/i.size,y:r/l}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,l,f,a;for(l=0,f=t.length;l<f;++l){const g=t[l].element;if(g&&g.hasValue()){const _=g.getCenterPoint(),x=vw(e,_);x<r&&(r=x,a=g)}}if(a){const g=a.tooltipPosition();n=g.x,i=g.y}return{x:n,y:i}}};function Bc(t,e){return e&&(Gr(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Sh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function PF(t,e){const{element:n,datasetIndex:i,index:r}=e,l=t.getDatasetMeta(i).controller,{label:f,value:a}=l.getLabelAndValue(r);return{chart:t,label:f,parsed:l.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:l.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function cM(t,e){const n=t.chart.ctx,{body:i,footer:r,title:l}=t,{boxWidth:f,boxHeight:a}=e,g=cs(e.bodyFont),_=cs(e.titleFont),x=cs(e.footerFont),M=l.length,O=r.length,z=i.length,F=Po(e.padding);let V=F.height,H=0,Q=i.reduce((W,J)=>W+J.before.length+J.lines.length+J.after.length,0);if(Q+=t.beforeBody.length+t.afterBody.length,M&&(V+=M*_.lineHeight+(M-1)*e.titleSpacing+e.titleMarginBottom),Q){const W=e.displayColors?Math.max(a,g.lineHeight):g.lineHeight;V+=z*W+(Q-z)*g.lineHeight+(Q-1)*e.bodySpacing}O&&(V+=e.footerMarginTop+O*x.lineHeight+(O-1)*e.footerSpacing);let X=0;const Y=function(W){H=Math.max(H,n.measureText(W).width+X)};return n.save(),n.font=_.string,nr(t.title,Y),n.font=g.string,nr(t.beforeBody.concat(t.afterBody),Y),X=e.displayColors?f+2+e.boxPadding:0,nr(i,W=>{nr(W.before,Y),nr(W.lines,Y),nr(W.after,Y)}),X=0,n.font=x.string,nr(t.footer,Y),n.restore(),H+=F.width,{width:H,height:V}}function kF(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function OF(t,e,n,i){const{x:r,width:l}=i,f=n.caretSize+n.caretPadding;if(t==="left"&&r+l+f>e.width||t==="right"&&r-l-f<0)return!0}function DF(t,e,n,i){const{x:r,width:l}=n,{width:f,chartArea:{left:a,right:g}}=t;let _="center";return i==="center"?_=r<=(a+g)/2?"left":"right":r<=l/2?_="left":r>=f-l/2&&(_="right"),OF(_,t,e,n)&&(_="center"),_}function hM(t,e,n){const i=n.yAlign||e.yAlign||kF(t,n);return{xAlign:n.xAlign||e.xAlign||DF(t,e,n,i),yAlign:i}}function zF(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function LF(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function fM(t,e,n,i){const{caretSize:r,caretPadding:l,cornerRadius:f}=t,{xAlign:a,yAlign:g}=n,_=r+l,{topLeft:x,topRight:M,bottomLeft:O,bottomRight:z}=Hd(f);let F=zF(e,a);const V=LF(e,g,_);return g==="center"?a==="left"?F+=_:a==="right"&&(F-=_):a==="left"?F-=Math.max(x,O)+r:a==="right"&&(F+=Math.max(M,z)+r),{x:As(F,0,i.width-e.width),y:As(V,0,i.height-e.height)}}function Ev(t,e,n){const i=Po(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function dM(t){return Bc([],Sh(t))}function IF(t,e,n){return Vf(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function pM(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const oD={beforeTitle:bh,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:bh,beforeBody:bh,beforeLabel:bh,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return mi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:bh,afterBody:bh,beforeFooter:bh,footer:bh,afterFooter:bh};function _l(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?oD[e].call(n,i):r}let mM=class extends $h{static positioners=uy;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,l=new IO(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=IF(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=_l(i,"beforeTitle",this,e),l=_l(i,"title",this,e),f=_l(i,"afterTitle",this,e);let a=[];return a=Bc(a,Sh(r)),a=Bc(a,Sh(l)),a=Bc(a,Sh(f)),a}getBeforeBody(e,n){return dM(_l(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return nr(e,l=>{const f={before:[],lines:[],after:[]},a=pM(i,l);Bc(f.before,Sh(_l(a,"beforeLabel",this,l))),Bc(f.lines,_l(a,"label",this,l)),Bc(f.after,Sh(_l(a,"afterLabel",this,l))),r.push(f)}),r}getAfterBody(e,n){return dM(_l(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=_l(i,"beforeFooter",this,e),l=_l(i,"footer",this,e),f=_l(i,"afterFooter",this,e);let a=[];return a=Bc(a,Sh(r)),a=Bc(a,Sh(l)),a=Bc(a,Sh(f)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],l=[],f=[];let a=[],g,_;for(g=0,_=n.length;g<_;++g)a.push(PF(this.chart,n[g]));return e.filter&&(a=a.filter((x,M,O)=>e.filter(x,M,O,i))),e.itemSort&&(a=a.sort((x,M)=>e.itemSort(x,M,i))),nr(a,x=>{const M=pM(e.callbacks,x);r.push(_l(M,"labelColor",this,x)),l.push(_l(M,"labelPointStyle",this,x)),f.push(_l(M,"labelTextColor",this,x))}),this.labelColors=r,this.labelPointStyles=l,this.labelTextColors=f,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let l,f=[];if(!r.length)this.opacity!==0&&(l={opacity:0});else{const a=uy[i.position].call(this,r,this._eventPosition);f=this._createItems(i),this.title=this.getTitle(f,i),this.beforeBody=this.getBeforeBody(f,i),this.body=this.getBody(f,i),this.afterBody=this.getAfterBody(f,i),this.footer=this.getFooter(f,i);const g=this._size=cM(this,i),_=Object.assign({},a,g),x=hM(this.chart,i,_),M=fM(i,_,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,l={opacity:1,x:M.x,y:M.y,width:g.width,height:g.height,caretX:a.x,caretY:a.y}}this._tooltipItems=f,this.$context=void 0,l&&this._resolveAnimations().update(this,l),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const l=this.getCaretPosition(e,i,r);n.lineTo(l.x1,l.y1),n.lineTo(l.x2,l.y2),n.lineTo(l.x3,l.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:l}=this,{caretSize:f,cornerRadius:a}=i,{topLeft:g,topRight:_,bottomLeft:x,bottomRight:M}=Hd(a),{x:O,y:z}=e,{width:F,height:V}=n;let H,Q,X,Y,W,J;return l==="center"?(W=z+V/2,r==="left"?(H=O,Q=H-f,Y=W+f,J=W-f):(H=O+F,Q=H+f,Y=W-f,J=W+f),X=H):(r==="left"?Q=O+Math.max(g,x)+f:r==="right"?Q=O+F-Math.max(_,M)-f:Q=this.caretX,l==="top"?(Y=z,W=Y-f,H=Q-f,X=Q+f):(Y=z+V,W=Y+f,H=Q+f,X=Q-f),J=Y),{x1:H,x2:Q,x3:X,y1:Y,y2:W,y3:J}}drawTitle(e,n,i){const r=this.title,l=r.length;let f,a,g;if(l){const _=wm(i.rtl,this.x,this.width);for(e.x=Ev(this,i.titleAlign,i),n.textAlign=_.textAlign(i.titleAlign),n.textBaseline="middle",f=cs(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=f.string,g=0;g<l;++g)n.fillText(r[g],_.x(e.x),e.y+f.lineHeight/2),e.y+=f.lineHeight+a,g+1===l&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,l){const f=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:g,boxWidth:_}=l,x=cs(l.bodyFont),M=Ev(this,"left",l),O=r.x(M),z=g<x.lineHeight?(x.lineHeight-g)/2:0,F=n.y+z;if(l.usePointStyle){const V={radius:Math.min(_,g)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},H=r.leftForLtr(O,_)+_/2,Q=F+g/2;e.strokeStyle=l.multiKeyBackground,e.fillStyle=l.multiKeyBackground,bw(e,V,H,Q),e.strokeStyle=f.borderColor,e.fillStyle=f.backgroundColor,bw(e,V,H,Q)}else{e.lineWidth=Ai(f.borderWidth)?Math.max(...Object.values(f.borderWidth)):f.borderWidth||1,e.strokeStyle=f.borderColor,e.setLineDash(f.borderDash||[]),e.lineDashOffset=f.borderDashOffset||0;const V=r.leftForLtr(O,_),H=r.leftForLtr(r.xPlus(O,1),_-2),Q=Hd(f.borderRadius);Object.values(Q).some(X=>X!==0)?(e.beginPath(),e.fillStyle=l.multiKeyBackground,wy(e,{x:V,y:F,w:_,h:g,radius:Q}),e.fill(),e.stroke(),e.fillStyle=f.backgroundColor,e.beginPath(),wy(e,{x:H,y:F+1,w:_-2,h:g-2,radius:Q}),e.fill()):(e.fillStyle=l.multiKeyBackground,e.fillRect(V,F,_,g),e.strokeRect(V,F,_,g),e.fillStyle=f.backgroundColor,e.fillRect(H,F+1,_-2,g-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:l,bodyAlign:f,displayColors:a,boxHeight:g,boxWidth:_,boxPadding:x}=i,M=cs(i.bodyFont);let O=M.lineHeight,z=0;const F=wm(i.rtl,this.x,this.width),V=function(rt){n.fillText(rt,F.x(e.x+z),e.y+O/2),e.y+=O+l},H=F.textAlign(f);let Q,X,Y,W,J,ot,ht;for(n.textAlign=f,n.textBaseline="middle",n.font=M.string,e.x=Ev(this,H,i),n.fillStyle=i.bodyColor,nr(this.beforeBody,V),z=a&&H!=="right"?f==="center"?_/2+x:_+2+x:0,W=0,ot=r.length;W<ot;++W){for(Q=r[W],X=this.labelTextColors[W],n.fillStyle=X,nr(Q.before,V),Y=Q.lines,a&&Y.length&&(this._drawColorBox(n,e,W,F,i),O=Math.max(M.lineHeight,g)),J=0,ht=Y.length;J<ht;++J)V(Y[J]),O=M.lineHeight;nr(Q.after,V)}z=0,O=M.lineHeight,nr(this.afterBody,V),e.y-=l}drawFooter(e,n,i){const r=this.footer,l=r.length;let f,a;if(l){const g=wm(i.rtl,this.x,this.width);for(e.x=Ev(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=g.textAlign(i.footerAlign),n.textBaseline="middle",f=cs(i.footerFont),n.fillStyle=i.footerColor,n.font=f.string,a=0;a<l;++a)n.fillText(r[a],g.x(e.x),e.y+f.lineHeight/2),e.y+=f.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:l,yAlign:f}=this,{x:a,y:g}=e,{width:_,height:x}=i,{topLeft:M,topRight:O,bottomLeft:z,bottomRight:F}=Hd(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+M,g),f==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+_-O,g),n.quadraticCurveTo(a+_,g,a+_,g+O),f==="center"&&l==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+_,g+x-F),n.quadraticCurveTo(a+_,g+x,a+_-F,g+x),f==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+z,g+x),n.quadraticCurveTo(a,g+x,a,g+x-z),f==="center"&&l==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,g+M),n.quadraticCurveTo(a,g,a+M,g),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,l=i&&i.y;if(r||l){const f=uy[e.position].call(this,this._active,this._eventPosition);if(!f)return;const a=this._size=cM(this,e),g=Object.assign({},f,this._size),_=hM(n,e,g),x=fM(e,g,_,n);(r._to!==x.x||l._to!==x.y)&&(this.xAlign=_.xAlign,this.yAlign=_.yAlign,this.width=a.width,this.height=a.height,this.caretX=f.x,this.caretY=f.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},l={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const f=Po(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(l,e,r,n),PO(e,n.textDirection),l.y+=f.top,this.drawTitle(l,e,n),this.drawBody(l,e,n),this.drawFooter(l,e,n),kO(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:g})=>{const _=this.chart.getDatasetMeta(a);if(!_)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:_.data[g],index:g}}),l=!n0(i,r),f=this._positionChanged(r,n);(l||f)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,l=this._active||[],f=this._getActiveElements(e,l,n,i),a=this._positionChanged(f,e),g=n||!n0(f,l)||a;return g&&(this._active=f,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),g}_getActiveElements(e,n,i,r){const l=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const f=this.chart.getElementsAtEventForMode(e,l.mode,l,i);return l.reverse&&f.reverse(),f}_positionChanged(e,n){const{caretX:i,caretY:r,options:l}=this,f=uy[l.position].call(this,e,n);return f!==!1&&(i!==f.x||r!==f.y)}};var lD={id:"tooltip",_element:mM,positioners:uy,afterInit(t,e,n){n&&(t.tooltip=new mM({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:oD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},RF=Object.freeze({__proto__:null,Colors:K6,Decimation:eF,Filler:bF,Legend:aD,SubTitle:CF,Title:sD,Tooltip:lD});const BF=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function NF(t,e,n,i){const r=t.indexOf(e);if(r===-1)return BF(t,e,n,i);const l=t.lastIndexOf(e);return r!==l?n:r}const jF=(t,e)=>t===null?null:As(Math.round(t),0,e);function gM(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class uD extends op{static id="category";static defaults={ticks:{callback:gM}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:l}of n)i[r]===l&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(mi(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:NF(i,e,Wn(n,e),this._addedLabels),jF(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let l=this.getLabels();l=e===0&&n===l.length-1?l:l.slice(e,n+1),this._valueRange=Math.max(l.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let f=e;f<=n;f++)r.push({value:f});return r}getLabelForValue(e){return gM.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function FF(t,e){const n=[],{bounds:r,step:l,min:f,max:a,precision:g,count:_,maxTicks:x,maxDigits:M,includeBounds:O}=t,z=l||1,F=x-1,{min:V,max:H}=e,Q=!mi(f),X=!mi(a),Y=!mi(_),W=(H-V)/(M+1);let J=cA((H-V)/F/z)*z,ot,ht,rt,ut;if(J<1e-14&&!Q&&!X)return[{value:V},{value:H}];ut=Math.ceil(H/J)-Math.floor(V/J),ut>F&&(J=cA(ut*J/F/z)*z),mi(g)||(ot=Math.pow(10,g),J=Math.ceil(J*ot)/ot),r==="ticks"?(ht=Math.floor(V/J)*J,rt=Math.ceil(H/J)*J):(ht=V,rt=H),Q&&X&&l&&CN((a-f)/l,J/1e3)?(ut=Math.round(Math.min((a-f)/J,x)),J=(a-f)/ut,ht=f,rt=a):Y?(ht=Q?f:ht,rt=X?a:rt,ut=_-1,J=(rt-ht)/ut):(ut=(rt-ht)/J,dy(ut,Math.round(ut),J/1e3)?ut=Math.round(ut):ut=Math.ceil(ut));const _t=Math.max(hA(J),hA(ht));ot=Math.pow(10,mi(g)?_t:g),ht=Math.round(ht*ot)/ot,rt=Math.round(rt*ot)/ot;let bt=0;for(Q&&(O&&ht!==f?(n.push({value:f}),ht<f&&bt++,dy(Math.round((ht+bt*J)*ot)/ot,f,yM(f,W,t))&&bt++):ht<f&&bt++);bt<ut;++bt){const Pt=Math.round((ht+bt*J)*ot)/ot;if(X&&Pt>a)break;n.push({value:Pt})}return X&&O&&rt!==a?n.length&&dy(n[n.length-1].value,a,yM(a,W,t))?n[n.length-1].value=a:n.push({value:a}):(!X||rt===a)&&n.push({value:rt}),n}function yM(t,e,{horizontal:n,minRotation:i}){const r=dc(i),l=(n?Math.sin(r):Math.cos(r))||.001,f=.75*e*(""+t).length;return Math.min(e/l,f)}class u0 extends op{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return mi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:l}=this;const f=g=>r=n?r:g,a=g=>l=i?l:g;if(e){const g=Uc(r),_=Uc(l);g<0&&_<0?a(0):g>0&&_>0&&f(0)}if(r===l){let g=l===0?1:Math.abs(l*.05);a(l+g),e||f(r-g)}this.min=r,this.max=l}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},l=this._range||this,f=FF(r,l);return e.bounds==="ticks"&&fO(f,this,"value"),e.reverse?(f.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),f}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return $y(e,this.chart.options.locale,this.options.ticks.format)}}class cD extends u0{static id="linear";static defaults={ticks:{callback:ex.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ya(e)?e:0,this.max=ya(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=dc(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,l.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Ty=t=>Math.floor(Lf(t)),Id=(t,e)=>Math.pow(10,Ty(t)+e);function _M(t){return t/Math.pow(10,Ty(t))===1}function vM(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function UF(t,e){const n=e-t;let i=Ty(n);for(;vM(t,e,i)>10;)i++;for(;vM(t,e,i)<10;)i--;return Math.min(i,Ty(t))}function VF(t,{min:e,max:n}){e=Wl(t.min,e);const i=[],r=Ty(e);let l=UF(e,n),f=l<0?Math.pow(10,Math.abs(l)):1;const a=Math.pow(10,l),g=r>l?Math.pow(10,r):0,_=Math.round((e-g)*f)/f,x=Math.floor((e-g)/a/10)*a*10;let M=Math.floor((_-x)/Math.pow(10,l)),O=Wl(t.min,Math.round((g+x+M*Math.pow(10,l))*f)/f);for(;O<n;)i.push({value:O,major:_M(O),significand:M}),M>=10?M=M<15?15:20:M++,M>=20&&(l++,M=2,f=l>=0?1:f),O=Math.round((g+x+M*Math.pow(10,l))*f)/f;const z=Wl(t.max,O);return i.push({value:z,major:_M(z),significand:M}),i}class $F extends op{static id="logarithmic";static defaults={ticks:{callback:ex.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=u0.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return ya(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ya(e)?Math.max(0,e):null,this.max=ya(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ya(this._userMin)&&(this.min=e===Id(this.min,0)?Id(this.min,-1):Id(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const l=a=>i=e?i:a,f=a=>r=n?r:a;i===r&&(i<=0?(l(1),f(10)):(l(Id(i,-1)),f(Id(r,1)))),i<=0&&l(Id(r,-1)),r<=0&&f(Id(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=VF(n,this);return e.bounds==="ticks"&&fO(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":$y(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Lf(e),this._valueRange=Lf(this.max)-Lf(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Lf(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}function Ew(t){const e=t.ticks;if(e.display&&t.display){const n=Po(e.backdropPadding);return Wn(e.font&&e.font.size,Wr.font.size)+n.height}return 0}function qF(t,e,n){return n=Gr(n)?n:[n],{w:HN(t,e.string,n),h:n.length*e.lineHeight}}function xM(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function HF(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],l=t._pointLabels.length,f=t.options.pointLabels,a=f.centerPointLabels?Vi/l:0;for(let g=0;g<l;g++){const _=f.setContext(t.getPointLabelContext(g));r[g]=_.padding;const x=t.getPointPosition(g,t.drawingArea+r[g],a),M=cs(_.font),O=qF(t.ctx,M,t._pointLabels[g]);i[g]=O;const z=Mo(t.getIndexAngle(g)+a),F=Math.round(kS(z)),V=xM(F,x.x,O.w,0,180),H=xM(F,x.y,O.h,90,270);ZF(n,e,z,V,H)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=YF(t,i,r)}function ZF(t,e,n,i,r){const l=Math.abs(Math.sin(n)),f=Math.abs(Math.cos(n));let a=0,g=0;i.start<e.l?(a=(e.l-i.start)/l,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/l,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(g=(e.t-r.start)/f,t.t=Math.min(t.t,e.t-g)):r.end>e.b&&(g=(r.end-e.b)/f,t.b=Math.max(t.b,e.b+g))}function GF(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:l,padding:f,size:a}=n,g=t.getPointPosition(e,i+r+f,l),_=Math.round(kS(Mo(g.angle+za))),x=QF(g.y,a.h,_),M=XF(_),O=KF(g.x,a.w,M);return{visible:!0,x:g.x,y:x,textAlign:M,left:O,top:x,right:O+a.w,bottom:x+a.h}}function WF(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:l}=t;return!(Ph({x:n,y:i},e)||Ph({x:n,y:l},e)||Ph({x:r,y:i},e)||Ph({x:r,y:l},e))}function YF(t,e,n){const i=[],r=t._pointLabels.length,l=t.options,{centerPointLabels:f,display:a}=l.pointLabels,g={extra:Ew(l)/2,additionalAngle:f?Vi/r:0};let _;for(let x=0;x<r;x++){g.padding=n[x],g.size=e[x];const M=GF(t,x,g);i.push(M),a==="auto"&&(M.visible=WF(M,_),M.visible&&(_=M))}return i}function XF(t){return t===0||t===180?"center":t<180?"left":"right"}function KF(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function QF(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function JF(t,e,n){const{left:i,top:r,right:l,bottom:f}=n,{backdropColor:a}=e;if(!mi(a)){const g=Hd(e.borderRadius),_=Po(e.backdropPadding);t.fillStyle=a;const x=i-_.left,M=r-_.top,O=l-i+_.width,z=f-r+_.height;Object.values(g).some(F=>F!==0)?(t.beginPath(),wy(t,{x,y:M,w:O,h:z,radius:g}),t.fill()):t.fillRect(x,M,O,z)}}function t8(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const l=t._pointLabelItems[r];if(!l.visible)continue;const f=i.setContext(t.getPointLabelContext(r));JF(n,f,l);const a=cs(f.font),{x:g,y:_,textAlign:x}=l;Jd(n,t._pointLabels[r],g,_+a.lineHeight/2,a,{color:f.color,textAlign:x,textBaseline:"middle"})}}function hD(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,jr);else{let l=t.getPointPosition(0,e);r.moveTo(l.x,l.y);for(let f=1;f<i;f++)l=t.getPointPosition(f,e),r.lineTo(l.x,l.y)}}function e8(t,e,n,i,r){const l=t.ctx,f=e.circular,{color:a,lineWidth:g}=e;!f&&!i||!a||!g||n<0||(l.save(),l.strokeStyle=a,l.lineWidth=g,l.setLineDash(r.dash||[]),l.lineDashOffset=r.dashOffset,l.beginPath(),hD(t,n,f,i),l.closePath(),l.stroke(),l.restore())}function n8(t,e,n){return Vf(t,{label:n,index:e,type:"pointLabel"})}class i8 extends u0{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ex.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Po(Ew(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ya(e)&&!isNaN(e)?e:0,this.max=ya(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ew(this.options))}generateTickLabels(e){u0.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=Ar(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?HF(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=jr/(this._pointLabels.length||1),i=this.options.startAngle||0;return Mo(e*n+dc(i))}getDistanceFromCenterForValue(e){if(mi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(mi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return n8(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-za+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:l}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:l}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),hD(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:l}=n,f=this._pointLabels.length;let a,g,_;if(n.pointLabels.display&&t8(this,f),r.display&&this.ticks.forEach((x,M)=>{if(M!==0||M===0&&this.min<0){g=this.getDistanceFromCenterForValue(x.value);const O=this.getContext(M),z=r.setContext(O),F=l.setContext(O);e8(this,z,g,f,F)}}),i.display){for(e.save(),a=f-1;a>=0;a--){const x=i.setContext(this.getPointLabelContext(a)),{color:M,lineWidth:O}=x;!O||!M||(e.lineWidth=O,e.strokeStyle=M,e.setLineDash(x.borderDash),e.lineDashOffset=x.borderDashOffset,g=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),_=this.getPointPosition(a,g),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(_.x,_.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let l,f;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,g)=>{if(g===0&&this.min>=0&&!n.reverse)return;const _=i.setContext(this.getContext(g)),x=cs(_.font);if(l=this.getDistanceFromCenterForValue(this.ticks[g].value),_.showLabelBackdrop){e.font=x.string,f=e.measureText(a.label).width,e.fillStyle=_.backdropColor;const M=Po(_.backdropPadding);e.fillRect(-f/2-M.left,-l-x.size/2-M.top,f+M.width,x.size+M.height)}Jd(e,a.label,0,-l,x,{color:_.color,strokeColor:_.textStrokeColor,strokeWidth:_.textStrokeWidth})}),e.restore()}drawTitle(){}}const ox={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},xl=Object.keys(ox);function bM(t,e){return t-e}function wM(t,e){if(mi(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:l}=t._parseOpts;let f=e;return typeof i=="function"&&(f=i(f)),ya(f)||(f=typeof i=="string"?n.parse(f,i):n.parse(f)),f===null?null:(r&&(f=r==="week"&&(Am(l)||l===!0)?n.startOf(f,"isoWeek",l):n.startOf(f,r)),+f)}function SM(t,e,n,i){const r=xl.length;for(let l=xl.indexOf(t);l<r-1;++l){const f=ox[xl[l]],a=f.steps?f.steps:Number.MAX_SAFE_INTEGER;if(f.common&&Math.ceil((n-e)/(a*f.size))<=i)return xl[l]}return xl[r-1]}function r8(t,e,n,i,r){for(let l=xl.length-1;l>=xl.indexOf(n);l--){const f=xl[l];if(ox[f].common&&t._adapter.diff(r,i,f)>=e-1)return f}return xl[n?xl.indexOf(n):0]}function a8(t){for(let e=xl.indexOf(t)+1,n=xl.length;e<n;++e)if(ox[xl[e]].common)return xl[e]}function TM(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=OS(n,e),l=n[i]>=e?n[i]:n[r];t[l]=!0}}function s8(t,e,n,i){const r=t._adapter,l=+r.startOf(e[0].value,i),f=e[e.length-1].value;let a,g;for(a=l;a<=f;a=+r.add(a,1,i))g=n[a],g>=0&&(e[g].major=!0);return e}function AM(t,e,n){const i=[],r={},l=e.length;let f,a;for(f=0;f<l;++f)a=e[f],r[a]=f,i.push({value:a,major:!1});return l===0||!n?i:s8(t,i,r,n)}class Cw extends op{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new dj._date(e.adapters.date);r.init(n),fy(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:wM(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:l,minDefined:f,maxDefined:a}=this.getUserBounds();function g(_){!f&&!isNaN(_.min)&&(r=Math.min(r,_.min)),!a&&!isNaN(_.max)&&(l=Math.max(l,_.max))}(!f||!a)&&(g(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&g(this.getMinMax(!1))),r=ya(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),l=ya(l)&&!isNaN(l)?l:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,l-1),this.max=Math.max(r+1,l)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const l=this.min,f=this.max,a=DN(r,l,f);return this._unit=n.unit||(i.autoSkip?SM(n.minUnit,this.min,this.max,this._getLabelCapacity(l)):r8(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:a8(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),AM(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,l;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,l=this.getDecimalForValue(e[e.length-1]),e.length===1?i=l:i=(l-this.getDecimalForValue(e[e.length-2]))/2);const f=e.length<3?.5:.25;n=As(n,0,f),i=As(i,0,f),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,l=r.time,f=l.unit||SM(l.minUnit,n,i,this._getLabelCapacity(n)),a=Wn(r.ticks.stepSize,1),g=f==="week"?l.isoWeekday:!1,_=Am(g)||g===!0,x={};let M=n,O,z;if(_&&(M=+e.startOf(M,"isoWeek",g)),M=+e.startOf(M,_?"day":f),e.diff(i,n,f)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+f);const F=r.ticks.source==="data"&&this.getDataTimestamps();for(O=M,z=0;O<i;O=+e.add(O,a,f),z++)TM(x,O,F);return(O===i||r.bounds==="ticks"||z===1)&&TM(x,O,F),Object.keys(x).sort(bM).map(V=>+V)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,l=this._unit,f=n||r[l];return this._adapter.format(e,f)}_tickFormatFunction(e,n,i,r){const l=this.options,f=l.ticks.callback;if(f)return Ar(f,[e,n,i],this);const a=l.time.displayFormats,g=this._unit,_=this._majorUnit,x=g&&a[g],M=_&&a[_],O=i[n],z=_&&M&&O&&O.major;return this._adapter.format(e,r||(z?M:x))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=dc(this.isHorizontal()?n.maxRotation:n.minRotation),l=Math.cos(r),f=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*l+a*f,h:i*f+a*l}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,l=this._tickFormatFunction(e,0,AM(this,[e],this._majorUnit),r),f=this._getLabelSize(l),a=Math.floor(this.isHorizontal()?this.width/f.w:this.height/f.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(wM(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return mO(e.sort(bM))}}function Cv(t,e,n){let i=0,r=t.length-1,l,f,a,g;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Ch(t,"pos",e)),{pos:l,time:a}=t[i],{pos:f,time:g}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Ch(t,"time",e)),{time:l,pos:a}=t[i],{time:f,pos:g}=t[r]);const _=f-l;return _?a+(g-a)*(e-l)/_:a}class o8 extends Cw{static id="timeseries";static defaults=Cw.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Cv(n,this.min),this._tableRange=Cv(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],l=[];let f,a,g,_,x;for(f=0,a=e.length;f<a;++f)_=e[f],_>=n&&_<=i&&r.push(_);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(f=0,a=r.length;f<a;++f)x=r[f+1],g=r[f-1],_=r[f],Math.round((x+g)/2)!==_&&l.push({time:_,pos:f/(a-1)});return l}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,l)=>r-l)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Cv(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Cv(this._table,i*this._tableRange+this._minPos,!0)}}var l8=Object.freeze({__proto__:null,CategoryScale:uD,LinearScale:cD,LogarithmicScale:$F,RadialLinearScale:i8,TimeScale:Cw,TimeSeriesScale:o8});const u8=[fj,q6,RF,l8];Bm.register(...u8);const c8=.4541,h8=.202,f8=t=>t==null||isNaN(t)?"0":Number(t).toLocaleString("ko-KR");function Ib(t,e,n="UNKNOWN"){console.log(`
===== [makeMonthlyAverage: ${n}] =====`),console.log(`   : ${t.length}`);const i={};t.forEach((l,f)=>{const a=String(l.yearMonth).trim(),g=e(l);i[a]||(i[a]=[]),i[a].push(g),f<5&&console.log(`  - sample[${f}]: ym=${a}, value=${g}, cityId=${l.cityId}, countyId=${l.countyId}`)}),console.log(`   : ${Object.keys(i).length}`),console.log("  ( 10):",Object.keys(i).slice(0,10));const r={};return Object.keys(i).sort().forEach(l=>{const f=i[l],a=f.reduce((g,_)=>g+_,0)/f.length;r[l]=a,console.log(`    ${n} | ${l} | count=${f.length} | sum=${f.reduce((g,_)=>g+_,0)} | avg=${a}`)}),console.log(`===== [END makeMonthlyAverage: ${n}] =====
`),r}function d8(t,e,n){console.log(`
===== [makeNationalSigunguAverage ] =====`),console.log("   :",e);const i={};return t.forEach(r=>{const l=String(r.yearMonth).trim(),f=n(r);i[l]=f/e,console.log(`     | ${l} | =${f} / ${e} = ${i[l]}`)}),console.log(`===== [END makeNationalSigunguAverage] =====
`),i}function p8({selectedRegion:t,selectedRegionData:e,nationalData:n,sidoData:i,energyType:r,mainTab:l}){const f=Z.useRef(null),a=Z.useRef(null);return Z.useEffect(()=>{if(!e||e.length===0)return;const _=(e.items||e).filter(rt=>{const ut=Number(String(rt.yearMonth).trim());return ut>=202001&&ut<=202506});if(_.length===0)return;const x=[];for(let rt=2020;rt<=2025;rt++)for(let ut=1;ut<=12;ut++){const _t=`${rt}${String(ut).padStart(2,"0")}`;if(x.push(_t),_t==="202506")break}const M=rt=>Number(r==="electric"?rt.useElect||0:rt.useGas||0),z=l==="co2"?rt=>M(rt)*(r==="electric"?c8:h8):M;let F=[],V=[],H="",Q="";if(l==="co2"?(H="  (tCO)",Q="tCO"):r==="electric"?(H="  (MWh)",Q="MWh"):(H="  ()",Q=""),t)if(t.countyId){const rt=Number(t.countyId),ut={};_.forEach(bt=>{Number(bt.countyId)===rt&&(ut[bt.yearMonth]=z(bt))}),F=x.map(bt=>ut[bt]??0);const _t=Ib(i,z,l==="co2"?`${t.cityName} CO2`:`${t.cityName} `);V=x.map(bt=>_t[bt]??0)}else{const rt=Ib(i,z,l==="co2"?`${t.cityName} CO2`:`${t.cityName} `);F=x.map(bt=>rt[bt]??0);const _t=d8(n,253,z);V=x.map(bt=>_t[bt]??0)}else{const rt=Ib(n,z,l==="co2"?" CO2":" ");F=x.map(ut=>rt[ut]??0),V=[]}a.current&&a.current.destroy();const X=f.current.getContext("2d"),Y=t?t.countyId?t.countyName:t.cityName:"",W=H,J=`${Y} ${W}`,ot=t?t.countyId?`${t.cityName}  ${W}`:`  ${W}`:"",ht=[];V.length>0?(ht.push({label:ot,data:V,borderColor:"#60a5fa",backgroundColor:"rgba(148, 163, 184, 0.35)",fill:!0,tension:.35,borderWidth:2,pointRadius:0,pointHoverRadius:3}),ht.push({label:J,data:F,borderColor:"#fb923c",backgroundColor:"rgba(252, 211, 77, 0.25)",fill:!0,tension:.35,borderWidth:2,borderDash:[6,4],pointRadius:2,pointHoverRadius:4})):ht.push({label:J,data:F,borderColor:"#3b82f6",backgroundColor:"rgba(191, 219, 254, 0.4)",fill:!0,tension:.35,borderWidth:2,pointRadius:2,pointHoverRadius:4}),a.current=new Bm(X,{type:"line",data:{labels:x,datasets:ht},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:900,easing:"easeOutCubic"},animations:{y:{duration:900,easing:"easeOutCubic",from:rt=>{if(rt.type==="data"&&rt.mode==="default")return rt.chart.scales.y.getPixelForValue(0)}},x:{duration:700,easing:"easeOutQuad"}},interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",align:"center",labels:{boxWidth:24,boxHeight:12,padding:16,color:"#4b5563",font:{size:12,family:"'Noto Sans KR', system-ui, -apple-system, BlinkMacSystemFont"}}},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.92)",borderRadius:8,padding:10,titleColor:"#e5e7eb",bodyColor:"#f9fafb",displayColors:!0,callbacks:{label:rt=>{const ut=rt.dataset.label||"",_t=rt.parsed.y;return`${ut}: ${f8(_t)} ${Q}`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:Q}}}}})},[t,e,n,i,r,l]),xt.jsx("div",{style:{width:"100%",height:"420px",paddingTop:"8px"},children:xt.jsx("canvas",{ref:f,style:{width:"100%",height:"100%"}})})}function m8(){const[t,e]=Z.useState(null),[n,i]=Z.useState([]),[r,l]=Z.useState([]),[f,a]=Z.useState("electric"),[g,_]=Z.useState("energy"),[x,M]=Z.useState([]),[O,z]=Z.useState([]),[F,V]=Z.useState(!0),H=["11","26","27","28","29","30","31","36","41","51","43","44","52","46","47","48","50"];return Z.useEffect(()=>{(async()=>{try{V(!0),M([]);const X=await(await fetch("/api/energy?cityId=0&countyId=0")).json(),Y=Array.isArray(X?.items)?X.items:Array.isArray(X)?X:[];console.log("[Dashboard] nationwide sample:",Y.slice(0,10)),M(Y),i(Y)}catch(Q){console.error("    :",Q)}finally{V(!1)}})()},[]),Z.useEffect(()=>{(async()=>{try{const Q=H.map(W=>fetch(`/api/energy?cityId=${W}`).then(J=>J.json())),X=await Promise.all(Q),Y=[];X.forEach((W,J)=>{const ot=Array.isArray(W?.items)?W.items:Array.isArray(W)?W:[];console.log(`[Dashboard] mapEnergyData =${H[J]} =`,ot.length),Y.push(...ot)}),console.log("[Dashboard] mapEnergyData  :",Y.length),z(Y)}catch(Q){console.error("    :",Q)}})()},[]),Z.useEffect(()=>{if(!t){i(x),l([]);return}let Q="/api/energy";const X=Number(t.cityId),Y=Number(t.countyId);X&&Y?Q+=`?cityId=${X}&countyId=${Y}`:X&&(Q+=`?cityId=${X}`),(async()=>{try{const J=await(await fetch(Q)).json(),ot=Array.isArray(J?.items)?J.items:Array.isArray(J)?J:[];if(i(ot),X){const rt=await(await fetch(`/api/energy?cityId=${X}&countyId=0`)).json(),ut=Array.isArray(rt?.items)?rt.items:Array.isArray(rt)?rt:[];l(ut)}else l([])}catch(W){console.error("    :",W)}})()},[t,x]),F?xt.jsxs("div",{className:"dashboard",children:[xt.jsx("h1",{children:"  "}),xt.jsx("p",{children:"   ..."})]}):xt.jsxs("div",{className:"dashboard",children:[xt.jsx("h1",{children:"  "}),xt.jsx("p",{children:"  ,  ,         ."}),xt.jsxs("div",{className:"dashboard-grid",children:[xt.jsxs("div",{className:"card map",children:[xt.jsx("h3",{children:"   (2025 6 )"}),xt.jsx("div",{className:"panel-body",style:{height:500},children:xt.jsx(W5,{onRegionSelect:e,allEnergyData:O,yearMonth:"202506",energyType:f,onEnergyTypeChange:a})})]}),xt.jsxs("div",{className:"card chart",children:[xt.jsx("h3",{children:t?`${t.cityName||""} ${t.countyName||""}`.trim():"  /  "}),xt.jsxs("div",{className:"main-tabs",children:[xt.jsx("button",{className:g==="energy"?"active":"",onClick:()=>_("energy"),children:" "}),xt.jsx("button",{className:g==="co2"?"active":"",onClick:()=>_("co2"),children:" "})]}),xt.jsxs("div",{className:"sub-tabs",children:[xt.jsx("button",{className:f==="electric"?"active":"",onClick:()=>a("electric"),children:"  (MWh)"}),xt.jsx("button",{className:f==="gas"?"active":"",onClick:()=>a("gas"),children:"  ()"})]}),xt.jsx(p8,{selectedRegion:t,selectedRegionData:n,nationalData:x,sidoData:r,energyType:f,mainTab:g})]}),xt.jsxs("div",{className:"card chart",children:[xt.jsx("h3",{children:"~2030   "}),xt.jsx("div",{className:"chart-placeholder",children:"   "})]}),xt.jsxs("div",{className:"card chart",children:[xt.jsx("h3",{children:"~2030   "}),xt.jsx("div",{className:"chart-placeholder",children:"   "})]})]})]})}const g8="_wrap_1mvqb_3",y8="_container_1mvqb_5",_8="_header_1mvqb_11",v8="_layout_1mvqb_19",x8="_side_1mvqb_37",b8="_filterCard_1mvqb_41",w8="_cardTitle_1mvqb_55",S8="_formRow_1mvqb_59",T8="_label_1mvqb_65",A8="_selectBig_1mvqb_71",M8="_select_1mvqb_71",E8="_sep_1mvqb_111",C8="_card_1mvqb_55",P8="_cardHead_1mvqb_139",k8="_cardSub_1mvqb_143",O8="_panel_1mvqb_149",pi={wrap:g8,container:y8,header:_8,layout:v8,side:x8,filterCard:b8,cardTitle:w8,formRow:S8,label:T8,selectBig:A8,select:M8,sep:E8,card:C8,cardHead:P8,cardSub:k8,panel:O8},D8="modulepreload",z8=function(t,e){return new URL(t,e).href},MM={},L8=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let _=function(x){return Promise.all(x.map(M=>Promise.resolve(M).then(O=>({status:"fulfilled",value:O}),O=>({status:"rejected",reason:O}))))};const f=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),g=a?.nonce||a?.getAttribute("nonce");r=_(n.map(x=>{if(x=z8(x,i),x in MM)return;MM[x]=!0;const M=x.endsWith(".css"),O=M?'[rel="stylesheet"]':"";if(i)for(let F=f.length-1;F>=0;F--){const V=f[F];if(V.href===x&&(!M||V.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${O}`))return;const z=document.createElement("link");if(z.rel=M?"stylesheet":D8,M||(z.as="script"),z.crossOrigin="",z.href=x,g&&z.setAttribute("nonce",g),document.head.appendChild(z),M)return new Promise((F,V)=>{z.addEventListener("load",F),z.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${x}`)))})}))}function l(f){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=f,window.dispatchEvent(a),!a.defaultPrevented)throw f}return r.then(f=>{for(const a of f||[])a.status==="rejected"&&l(a.reason);return e().catch(l)})},I8=Z.createContext(null);function R8(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,i=Array.isArray(t)?t[1]:t?t.y:0,r=Array.isArray(e)?e[0]:e?e.x:0,l=Array.isArray(e)?e[1]:e?e.y:0;return n===r&&i===l}function Xl(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Xl(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(const r of n)if(!e.hasOwnProperty(r)||!Xl(t[r],e[r]))return!1;return!0}return!1}function B8(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function EM(t,e){if(!t.getProjection)return;const n=t.getProjection(),i=e.getProjection();Xl(n,i)||e.setProjection(n)}function CM(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function PM(t,e){const n=e.viewState||e;let i=!1;if("zoom"in n){const r=t.zoom;t.zoom=n.zoom,i=i||r!==t.zoom}if("bearing"in n){const r=t.bearing;t.bearing=n.bearing,i=i||r!==t.bearing}if("pitch"in n){const r=t.pitch;t.pitch=n.pitch,i=i||r!==t.pitch}if(n.padding&&!t.isPaddingEqual(n.padding)&&(i=!0,t.padding=n.padding),"longitude"in n&&"latitude"in n){const r=t.center;t.center=new r.constructor(n.longitude,n.latitude),i=i||r!==t.center}return i}const N8=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function kM(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const i of t.layers)e[i.id]=i;const n=t.layers.map(i=>{let r=null;"interactive"in i&&(r=Object.assign({},i),delete r.interactive);const l=e[i.ref];if(l){r=r||Object.assign({},i),delete r.ref;for(const f of N8)f in l&&(r[f]=l[f])}return r||i});return{...t,layers:n}}var OM={};const DM={version:8,sources:{},layers:[]},zM={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Rb={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},LM={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},j8=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],F8=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Cm{constructor(e,n,i){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=r=>{const l=this.props[LM[r.type]];l?l(r):r.type==="error"&&console.error(r.error)},this._onPointerEvent=r=>{(r.type==="mousemove"||r.type==="mouseout")&&this._updateHover(r);const l=this.props[zM[r.type]];l&&(this.props.interactiveLayerIds&&r.type!=="mouseover"&&r.type!=="mouseout"&&(r.features=this._hoveredFeatures||this._queryRenderedFeatures(r.point)),l(r),delete r.features)},this._onCameraEvent=r=>{if(!this._internalUpdate){const l=this.props[Rb[r.type]];l&&l(r)}r.type in this._deferredEvents&&(this._deferredEvents[r.type]=!1)},this._MapClass=e,this.props=n,this._initialize(i)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const i=this._updateSettings(e,n);i&&this._createShadowTransform(this._map);const r=this._updateSize(e),l=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(i||r||l&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const i=Cm.savedMaps.pop();if(!i)return null;const r=i.map,l=r.getContainer();for(n.className=l.className;l.childNodes.length>0;)n.appendChild(l.childNodes[0]);r._container=n;const f=r._resizeObserver;f&&(f.disconnect(),f.observe(n)),i.setProps({...e,styleDiffing:!1}),r.resize();const{initialViewState:a}=e;return a&&(a.bounds?r.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):i._updateViewState(a,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",()=>r.fire("load")),r._update(),i}_initialize(e){const{props:n}=this,{mapStyle:i=DM}=n,r={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||U8()||null,container:e,style:kM(i)},l=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[l.longitude||0,l.latitude||0],zoom:l.zoom||0,pitch:l.pitch||0,bearing:l.bearing||0}),n.gl){const x=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=x,n.gl)}const f=new this._MapClass(r);l.padding&&f.setPadding(l.padding),n.cursor&&(f.getCanvas().style.cursor=n.cursor),this._createShadowTransform(f);const a=f._render;f._render=x=>{this._inRender=!0,a.call(f,x),this._inRender=!1};const g=f._renderTaskQueue.run;f._renderTaskQueue.run=x=>{g.call(f._renderTaskQueue,x),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const _=f.fire;f.fire=this._fireEvent.bind(this,_),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>{this._updateStyleComponents(this.props,{}),EM(f.transform,this._renderTransform)}),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const x in zM)f.on(x,this._onPointerEvent);for(const x in Rb)f.on(x,this._onCameraEvent);for(const x in LM)f.on(x,this._onEvent);this._map=f}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n?.remove(),Cm.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=B8(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const i=this._map;if(n.width!==i.transform.width||n.height!==i.transform.height)return i.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const i=this._map,r=this._renderTransform,{zoom:l,pitch:f,bearing:a}=r,g=i.isMoving();g&&(r.cameraElevationReference="sea");const _=PM(r,{...CM(i.transform),...e});if(g&&(r.cameraElevationReference="ground"),_&&n){const x=this._deferredEvents;x.move=!0,x.zoom||(x.zoom=l!==r.zoom),x.rotate||(x.rotate=a!==r.bearing),x.pitch||(x.pitch=f!==r.pitch)}return g||PM(i.transform,e),_}_updateSettings(e,n){const i=this._map;let r=!1;for(const l of j8)if(l in e&&!Xl(e[l],n[l])){r=!0;const f=i[`set${l[0].toUpperCase()}${l.slice(1)}`];f?.call(i,e[l])}return r}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:i=DM,styleDiffing:r=!0}=e,l={diff:r};return"localIdeographFontFamily"in e&&(l.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(kM(i),l),!0}return!1}_updateStyleComponents(e,n){const i=this._map;let r=!1;return i.isStyleLoaded()&&("light"in e&&i.setLight&&!Xl(e.light,n.light)&&(r=!0,i.setLight(e.light)),"fog"in e&&i.setFog&&!Xl(e.fog,n.fog)&&(r=!0,i.setFog(e.fog)),"terrain"in e&&i.setTerrain&&!Xl(e.terrain,n.terrain)&&(!e.terrain||i.getSource(e.terrain.source))&&(r=!0,i.setTerrain(e.terrain))),r}_updateHandlers(e,n){var i,r;const l=this._map;let f=!1;for(const a of F8){const g=(i=e[a])!==null&&i!==void 0?i:!0,_=(r=n[a])!==null&&r!==void 0?r:!0;Xl(g,_)||(f=!0,g?l[a].enable(g):l[a].disable())}return f}_queryRenderedFeatures(e){const n=this._map,i=n.transform,{interactiveLayerIds:r=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:r.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=i}}_updateHover(e){var n;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const l=e.type,f=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(e.point),g=a.length>0;!g&&f&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,g&&!f&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=l}else this._hoveredFeatures=null}_fireEvent(e,n,i){const r=this._map,l=r.transform,f=typeof n=="string"?n:n.type;return f==="move"&&this._updateViewState(this.props,!1),f in Rb&&(typeof n=="object"&&(n.viewState=CM(l)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,n,i),r.transform=l,r):(e.call(r,n,i),r)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const i in this._deferredEvents)this._deferredEvents[i]&&e.fire(i);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{EM(this._renderTransform,n),e.transform=n}}}Cm.savedMaps=[];function U8(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||OM.MapboxAccessToken}catch{}try{t=t||OM.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const V8=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function $8(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:i=>{const r=e.transform;e.transform=t.transform;const l=e.project(i);return e.transform=r,l},unproject:i=>{const r=e.transform;e.transform=t.transform;const l=e.unproject(i);return e.transform=r,l},queryTerrainElevation:(i,r)=>{const l=e.transform;e.transform=t.transform;const f=e.queryTerrainElevation(i,r);return e.transform=l,f},queryRenderedFeatures:(i,r)=>{const l=e.transform;e.transform=t.transform;const f=e.queryRenderedFeatures(i,r);return e.transform=l,f}};for(const i of q8(e))!(i in n)&&!V8.includes(i)&&(n[i]=e[i].bind(e));return n}function q8(t){const e=new Set;let n=t;for(;n;){for(const i of Object.getOwnPropertyNames(n))i[0]!=="_"&&typeof t[i]=="function"&&i!=="fire"&&i!=="setEventedParent"&&e.add(i);n=Object.getPrototypeOf(n)}return Array.from(e)}const H8=typeof document<"u"?Z.useLayoutEffect:Z.useEffect,Z8=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function G8(t,e){for(const i of Z8)i in e&&(t[i]=e[i]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,i=>{i&&console.error(i)},!0)}const Nm=Z.createContext(null);function W8(t,e,n){const i=Z.useContext(I8),[r,l]=Z.useState(null),f=Z.useRef(),{current:a}=Z.useRef({mapLib:null,map:null});Z.useEffect(()=>{const x=t.mapLib;let M=!0,O;return Promise.resolve(x||n).then(z=>{if(!M)return;if(!z)throw new Error("Invalid mapLib");const F="Map"in z?z:z.default;if(!F.Map)throw new Error("Invalid mapLib");if(G8(F,t),!F.supported||F.supported(t))t.reuseMaps&&(O=Cm.reuse(t,f.current)),O||(O=new Cm(F.Map,t,f.current)),a.map=$8(O),a.mapLib=F,l(O),i?.onMapMount(a.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(z=>{const{onError:F}=t;F?F({type:"error",target:null,originalEvent:null,error:z}):console.error(z)}),()=>{M=!1,O&&(i?.onMapUnmount(t.id),t.reuseMaps?O.recycle():O.destroy())}},[]),H8(()=>{r&&r.setProps(t)}),Z.useImperativeHandle(e,()=>a.map,[r]);const g=Z.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),_={height:"100%"};return Z.createElement("div",{id:t.id,ref:f,style:g},r&&Z.createElement(Nm.Provider,{value:a},Z.createElement("div",{"mapboxgl-children":"",style:_},t.children)))}const Y8=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function lp(t,e){if(!t||!e)return;const n=t.style;for(const i in e){const r=e[i];Number.isFinite(r)&&!Y8.test(i)?n[i]=`${r}px`:n[i]=r}}function X8(t,e){const{map:n,mapLib:i}=Z.useContext(Nm),r=Z.useRef({props:t});r.current.props=t;const l=Z.useMemo(()=>{let V=!1;Z.Children.forEach(t.children,X=>{X&&(V=!0)});const H={...t,element:V?document.createElement("div"):null},Q=new i.Marker(H);return Q.setLngLat([t.longitude,t.latitude]),Q.getElement().addEventListener("click",X=>{var Y,W;(W=(Y=r.current.props).onClick)===null||W===void 0||W.call(Y,{type:"click",target:Q,originalEvent:X})}),Q.on("dragstart",X=>{var Y,W;const J=X;J.lngLat=l.getLngLat(),(W=(Y=r.current.props).onDragStart)===null||W===void 0||W.call(Y,J)}),Q.on("drag",X=>{var Y,W;const J=X;J.lngLat=l.getLngLat(),(W=(Y=r.current.props).onDrag)===null||W===void 0||W.call(Y,J)}),Q.on("dragend",X=>{var Y,W;const J=X;J.lngLat=l.getLngLat(),(W=(Y=r.current.props).onDragEnd)===null||W===void 0||W.call(Y,J)}),Q},[]);Z.useEffect(()=>(l.addTo(n.getMap()),()=>{l.remove()}),[]);const{longitude:f,latitude:a,offset:g,style:_,draggable:x=!1,popup:M=null,rotation:O=0,rotationAlignment:z="auto",pitchAlignment:F="auto"}=t;return Z.useEffect(()=>{lp(l.getElement(),_)},[_]),Z.useImperativeHandle(e,()=>l,[]),(l.getLngLat().lng!==f||l.getLngLat().lat!==a)&&l.setLngLat([f,a]),g&&!R8(l.getOffset(),g)&&l.setOffset(g),l.isDraggable()!==x&&l.setDraggable(x),l.getRotation()!==O&&l.setRotation(O),l.getRotationAlignment()!==z&&l.setRotationAlignment(z),l.getPitchAlignment()!==F&&l.setPitchAlignment(F),l.getPopup()!==M&&l.setPopup(M),Fy.createPortal(t.children,l.getElement())}Z.memo(Z.forwardRef(X8));function IM(t){return new Set(t?t.trim().split(/\s+/):[])}function K8(t,e){const{map:n,mapLib:i}=Z.useContext(Nm),r=Z.useMemo(()=>document.createElement("div"),[]),l=Z.useRef({props:t});l.current.props=t;const f=Z.useMemo(()=>{const a={...t},g=new i.Popup(a);return g.setLngLat([t.longitude,t.latitude]),g.once("open",_=>{var x,M;(M=(x=l.current.props).onOpen)===null||M===void 0||M.call(x,_)}),g},[]);if(Z.useEffect(()=>{const a=g=>{var _,x;(x=(_=l.current.props).onClose)===null||x===void 0||x.call(_,g)};return f.on("close",a),f.setDOMContent(r).addTo(n.getMap()),()=>{f.off("close",a),f.isOpen()&&f.remove()}},[]),Z.useEffect(()=>{lp(f.getElement(),t.style)},[t.style]),Z.useImperativeHandle(e,()=>f,[]),f.isOpen()&&((f.getLngLat().lng!==t.longitude||f.getLngLat().lat!==t.latitude)&&f.setLngLat([t.longitude,t.latitude]),t.offset&&!Xl(f.options.offset,t.offset)&&f.setOffset(t.offset),(f.options.anchor!==t.anchor||f.options.maxWidth!==t.maxWidth)&&(f.options.anchor=t.anchor,f.setMaxWidth(t.maxWidth)),f.options.className!==t.className)){const a=IM(f.options.className),g=IM(t.className);for(const _ of a)g.has(_)||f.removeClassName(_);for(const _ of g)a.has(_)||f.addClassName(_);f.options.className=t.className}return Fy.createPortal(t.children,r)}Z.memo(Z.forwardRef(K8));function Hy(t,e,n,i){const r=Z.useContext(Nm),l=Z.useMemo(()=>t(r),[]);return Z.useEffect(()=>{const f=e,a=null,g=typeof e=="function"?e:null,{map:_}=r;return _.hasControl(l)||(_.addControl(l,f?.position),a&&a(r)),()=>{g&&g(r),_.hasControl(l)&&_.removeControl(l)}},[]),l}function Q8(t){const e=Hy(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return Z.useEffect(()=>{lp(e._container,t.style)},[t.style]),null}Z.memo(Q8);function J8(t){const e=Hy(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return Z.useEffect(()=>{lp(e._controlContainer,t.style)},[t.style]),null}Z.memo(J8);function tU(t,e){const n=Z.useRef({props:t}),i=Hy(({mapLib:r})=>{const l=new r.GeolocateControl(t),f=l._setupUI;return l._setupUI=a=>{l._container.hasChildNodes()||f(a)},l.on("geolocate",a=>{var g,_;(_=(g=n.current.props).onGeolocate)===null||_===void 0||_.call(g,a)}),l.on("error",a=>{var g,_;(_=(g=n.current.props).onError)===null||_===void 0||_.call(g,a)}),l.on("outofmaxbounds",a=>{var g,_;(_=(g=n.current.props).onOutOfMaxBounds)===null||_===void 0||_.call(g,a)}),l.on("trackuserlocationstart",a=>{var g,_;(_=(g=n.current.props).onTrackUserLocationStart)===null||_===void 0||_.call(g,a)}),l.on("trackuserlocationend",a=>{var g,_;(_=(g=n.current.props).onTrackUserLocationEnd)===null||_===void 0||_.call(g,a)}),l},{position:t.position});return n.current.props=t,Z.useImperativeHandle(e,()=>i,[]),Z.useEffect(()=>{lp(i._container,t.style)},[t.style]),null}Z.memo(Z.forwardRef(tU));function eU(t){const e=Hy(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return Z.useEffect(()=>{lp(e._container,t.style)},[t.style]),null}const nU=Z.memo(eU);function iU(t){const e=Hy(({mapLib:l})=>new l.ScaleControl(t),{position:t.position}),n=Z.useRef(t),i=n.current;n.current=t;const{style:r}=t;return t.maxWidth!==void 0&&t.maxWidth!==i.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==i.unit&&e.setUnit(t.unit),Z.useEffect(()=>{lp(e._container,r)},[r]),null}Z.memo(iU);function c0(t,e){if(!t)throw new Error(e)}function rU(t,e,n,i){if(c0(n.id===i.id,"layer id changed"),c0(n.type===i.type,"layer type changed"),n.type==="custom"||i.type==="custom")return;const{layout:r={},paint:l={},filter:f,minzoom:a,maxzoom:g,beforeId:_}=n;if(_!==i.beforeId&&t.moveLayer(e,_),r!==i.layout){const x=i.layout||{};for(const M in r)Xl(r[M],x[M])||t.setLayoutProperty(e,M,r[M]);for(const M in x)r.hasOwnProperty(M)||t.setLayoutProperty(e,M,void 0)}if(l!==i.paint){const x=i.paint||{};for(const M in l)Xl(l[M],x[M])||t.setPaintProperty(e,M,l[M]);for(const M in x)l.hasOwnProperty(M)||t.setPaintProperty(e,M,void 0)}Xl(f,i.filter)||t.setFilter(e,f),(a!==i.minzoom||g!==i.maxzoom)&&t.setLayerZoomRange(e,a,g)}function aU(t,e,n){if(t.style&&t.style._loaded&&(!("source"in n)||t.getSource(n.source))){const i={...n,id:e};delete i.beforeId,t.addLayer(i,n.beforeId)}}let sU=0;function oU(t){const e=Z.useContext(Nm).map.getMap(),n=Z.useRef(t),[,i]=Z.useState(0),r=Z.useMemo(()=>t.id||`jsx-layer-${sU++}`,[]);if(Z.useEffect(()=>{if(e){const f=()=>i(a=>a+1);return e.on("styledata",f),f(),()=>{e.off("styledata",f),e.style&&e.style._loaded&&e.getLayer(r)&&e.removeLayer(r)}}},[e]),e&&e.style&&e.getLayer(r))try{rU(e,r,t,n.current)}catch(f){console.warn(f)}else aU(e,r,t);return n.current=t,null}let lU=0;function uU(t,e,n){if(t.style&&t.style._loaded){const i={...n};return delete i.id,delete i.children,t.addSource(e,i),t.getSource(e)}return null}function cU(t,e,n){c0(e.id===n.id,"source id changed"),c0(e.type===n.type,"source type changed");let i="",r=0;for(const f in e)f!=="children"&&f!=="id"&&!Xl(n[f],e[f])&&(i=f,r++);if(!r)return;const l=e.type;l==="geojson"?t.setData(e.data):l==="image"?t.updateImage({url:e.url,coordinates:e.coordinates}):"setCoordinates"in t&&r===1&&i==="coordinates"?t.setCoordinates(e.coordinates):"setUrl"in t&&i==="url"?t.setUrl(e.url):"setTiles"in t&&i==="tiles"?t.setTiles(e.tiles):console.warn(`Unable to update <Source> prop: ${i}`)}function hU(t){const e=Z.useContext(Nm).map.getMap(),n=Z.useRef(t),[,i]=Z.useState(0),r=Z.useMemo(()=>t.id||`jsx-source-${lU++}`,[]);Z.useEffect(()=>{if(e){const f=()=>setTimeout(()=>i(a=>a+1),0);return e.on("styledata",f),f(),()=>{var a;if(e.off("styledata",f),e.style&&e.style._loaded&&e.getSource(r)){const g=(a=e.getStyle())===null||a===void 0?void 0:a.layers;if(g)for(const _ of g)_.source===r&&e.removeLayer(_.id);e.removeSource(r)}}}},[e]);let l=e&&e.style&&e.getSource(r);return l?cU(l,t,n.current):l=uU(e,r,t),n.current=t,l&&Z.Children.map(t.children,f=>f&&Z.cloneElement(f,{source:r}))||null}const fU=L8(()=>Promise.resolve().then(()=>vU),[],import.meta.url),dU=Z.forwardRef(function(e,n){return W8(e,n,fU)}),pU=nU,mU=oU,gU=hU;var Yv={exports:{}},yU=Yv.exports,RM;function _U(){return RM||(RM=1,(function(t,e){(function(n,i){t.exports=i()})(yU,(function(){var n,i,r;function l(a,g){if(!n)n=g;else if(!i)i=g;else{var _="var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk);",x={};n(x),r=g(x),typeof window<"u"&&(r.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}l(["exports"],(function(a){function g(c,s,d,v){return new(d||(d=Promise))((function(T,P){function k(G){try{U(v.next(G))}catch(tt){P(tt)}}function R(G){try{U(v.throw(G))}catch(tt){P(tt)}}function U(G){var tt;G.done?T(G.value):(tt=G.value,tt instanceof d?tt:new d((function(st){st(tt)}))).then(k,R)}U((v=v.apply(c,s||[])).next())}))}function _(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var x=M;function M(c,s){this.x=c,this.y=s}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,s){return this.clone()._rotateAround(c,s)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var s=c.x-this.x,d=c.y-this.y;return s*s+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult:function(c){var s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var s=Math.cos(c),d=Math.sin(c),v=d*this.x+s*this.y;return this.x=s*this.x-d*this.y,this.y=v,this},_rotateAround:function(c,s){var d=Math.cos(c),v=Math.sin(c),T=s.y+v*(this.x-s.x)+d*(this.y-s.y);return this.x=s.x+d*(this.x-s.x)-v*(this.y-s.y),this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},M.convert=function(c){return c instanceof M?c:Array.isArray(c)?new M(c[0],c[1]):c};var O=_(x),z=F;function F(c,s,d,v){this.cx=3*c,this.bx=3*(d-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(v-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=d,this.p2y=v}F.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(s===void 0&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var d=c,v=0;v<8;v++){var T=this.sampleCurveX(d)-c;if(Math.abs(T)<s)return d;var P=this.sampleCurveDerivativeX(d);if(Math.abs(P)<1e-6)break;d-=T/P}var k=0,R=1;for(d=c,v=0;v<20&&(T=this.sampleCurveX(d),!(Math.abs(T-c)<s));v++)c>T?k=d:R=d,d=.5*(R-k)+k;return d},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};var V=_(z);let H,Q;function X(){return H==null&&(H=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),H}function Y(){if(Q==null&&(Q=!1,X())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let v=0;v<25;v++){const T=4*v;s.fillStyle=`rgb(${T},${T+1},${T+2})`,s.fillRect(v%5,Math.floor(v/5),1,1)}const d=s.getImageData(0,0,5,5).data;for(let v=0;v<100;v++)if(v%4!=3&&d[v]!==v){Q=!0;break}}}return Q||!1}function W(c,s,d,v){const T=new V(c,s,d,v);return function(P){return T.solve(P)}}const J=W(.25,.1,.25,1);function ot(c,s,d){return Math.min(d,Math.max(s,c))}function ht(c,s,d){const v=d-s,T=((c-s)%v+v)%v+s;return T===s?d:T}function rt(c,...s){for(const d of s)for(const v in d)c[v]=d[v];return c}let ut=1;function _t(c,s,d){const v={};for(const T in c)v[T]=s.call(d||this,c[T],T,c);return v}function bt(c,s,d){const v={};for(const T in c)s.call(d||this,c[T],T,c)&&(v[T]=c[T]);return v}function Pt(c){return Array.isArray(c)?c.map(Pt):typeof c=="object"&&c?_t(c,Pt):c}const re={};function ye(c){re[c]||(typeof console<"u"&&console.warn(c),re[c]=!0)}function fe(c,s,d){return(d.y-c.y)*(s.x-c.x)>(s.y-c.y)*(d.x-c.x)}function kt(c){let s=0;for(let d,v,T=0,P=c.length,k=P-1;T<P;k=T++)d=c[T],v=c[k],s+=(v.x-d.x)*(d.y+v.y);return s}function Ot(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let St=null;function jt(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function pt(c,s,d,v,T){return g(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const P=new VideoFrame(c,{timestamp:0});try{const k=P?.format;if(!k||!k.startsWith("BGR")&&!k.startsWith("RGB"))throw new Error(`Unrecognized format ${k}`);const R=k.startsWith("BGR"),U=new Uint8ClampedArray(v*T*4);if(yield P.copyTo(U,(function(G,tt,st,ct,gt){const yt=4*Math.max(-tt,0),Ct=(Math.max(0,st)-st)*ct*4+yt,Bt=4*ct,Ut=Math.max(0,tt),Jt=Math.max(0,st);return{rect:{x:Ut,y:Jt,width:Math.min(G.width,tt+ct)-Ut,height:Math.min(G.height,st+gt)-Jt},layout:[{offset:Ct,stride:Bt}]}})(c,s,d,v,T)),R)for(let G=0;G<U.length;G+=4){const tt=U[G];U[G]=U[G+2],U[G+2]=tt}return U}finally{P.close()}}))}let Tt,$t,Yt,se;const le={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const s=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(c,s=0){return this.getImageCanvasContext(c).getImageData(-s,-s,c.width+2*s,c.height+2*s)},getImageCanvasContext(c){const s=window.document.createElement("canvas"),d=s.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return s.width=c.width,s.height=c.height,d.drawImage(c,0,0,c.width,c.height),d},resolveURL:c=>(Yt||(Yt=document.createElement("a")),Yt.href=c,Yt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(se==null&&(se=matchMedia("(prefers-reduced-motion: reduce)")),se.matches)}},Ae={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ie extends Error{constructor(s,d,v,T){super(`AJAXError: ${d} (${s}): ${v}`),this.status=s,this.statusText=d,this.url=v,this.body=T}}const Wt=Ot()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Pe=c=>Ae.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))];function we(c,s){const d=new AbortController,v=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,cache:c.cache,referrer:Wt(),signal:d.signal});let T=!1,P=!1;return c.type==="json"&&v.headers.set("Accept","application/json"),P||fetch(v).then((k=>k.ok?(R=>{(c.type==="arrayBuffer"||c.type==="image"?R.arrayBuffer():c.type==="json"?R.json():R.text()).then((U=>{P||(T=!0,s(null,U,R.headers.get("Cache-Control"),R.headers.get("Expires")))})).catch((U=>{P||s(new Error(U.message))}))})(k):k.blob().then((R=>s(new Ie(k.status,k.statusText,c.url,R)))))).catch((k=>{k.code!==20&&s(new Error(k.message))})),{cancel:()=>{P=!0,T||d.abort()}}}const ce=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(Ot()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s);if(!Ot())return(Pe(c.url)||we)(c,s)}if(!(/^file:/.test(d=c.url)||/^file:/.test(Wt())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return we(c,s);if(Ot()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s,void 0,!0)}var d;return(function(v,T){const P=new XMLHttpRequest;P.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(P.responseType="arraybuffer");for(const k in v.headers)P.setRequestHeader(k,v.headers[k]);return v.type==="json"&&(P.responseType="text",P.setRequestHeader("Accept","application/json")),P.withCredentials=v.credentials==="include",P.onerror=()=>{T(new Error(P.statusText))},P.onload=()=>{if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let k=P.response;if(v.type==="json")try{k=JSON.parse(P.response)}catch(R){return T(R)}T(null,k,P.getResponseHeader("Cache-Control"),P.getResponseHeader("Expires"))}else{const k=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});T(new Ie(P.status,P.statusText,v.url,k))}},P.send(v.body),{cancel:()=>P.abort()}})(c,s)},rn=function(c,s){return ce(rt(c,{type:"arrayBuffer"}),s)};function je(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const s=new URL(c),d=window.location;return s.protocol===d.protocol&&s.host===d.host}function nn(c,s,d){d[c]&&d[c].indexOf(s)!==-1||(d[c]=d[c]||[],d[c].push(s))}function tn(c,s,d){if(d&&d[c]){const v=d[c].indexOf(s);v!==-1&&d[c].splice(v,1)}}class Tn{constructor(s,d={}){rt(this,d),this.type=s}}class an extends Tn{constructor(s,d={}){super("error",rt({error:s},d))}}class In{on(s,d){return this._listeners=this._listeners||{},nn(s,d,this._listeners),this}off(s,d){return tn(s,d,this._listeners),tn(s,d,this._oneTimeListeners),this}once(s,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},nn(s,d,this._oneTimeListeners),this):new Promise((v=>this.once(s,v)))}fire(s,d){typeof s=="string"&&(s=new Tn(s,d||{}));const v=s.type;if(this.listens(v)){s.target=this;const T=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const R of T)R.call(this,s);const P=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const R of P)tn(v,R,this._oneTimeListeners),R.call(this,s);const k=this._eventedParent;k&&(rt(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(s))}else s instanceof an&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,d){return this._eventedParent=s,this._eventedParentData=d,this}}var _e={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Di=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ri(c,s){const d={};for(const v in c)v!=="ref"&&(d[v]=c[v]);return Di.forEach((v=>{v in s&&(d[v]=s[v])})),d}function Yn(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let d=0;d<c.length;d++)if(!Yn(c[d],s[d]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(const d in c)if(!Yn(c[d],s[d]))return!1;return!0}return c===s}const cn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Wi(c,s,d){d.push({command:cn.addSource,args:[c,s[c]]})}function si(c,s,d){s.push({command:cn.removeSource,args:[c]}),d[c]=!0}function Bi(c,s,d,v){si(c,d,v),Wi(c,s,d)}function Ur(c,s,d){let v;for(v in c[d])if(Object.prototype.hasOwnProperty.call(c[d],v)&&v!=="data"&&!Yn(c[d][v],s[d][v]))return!1;for(v in s[d])if(Object.prototype.hasOwnProperty.call(s[d],v)&&v!=="data"&&!Yn(c[d][v],s[d][v]))return!1;return!0}function Xs(c,s,d,v,T,P){let k;for(k in s=s||{},c=c||{})Object.prototype.hasOwnProperty.call(c,k)&&(Yn(c[k],s[k])||d.push({command:P,args:[v,k,s[k],T]}));for(k in s)Object.prototype.hasOwnProperty.call(s,k)&&!Object.prototype.hasOwnProperty.call(c,k)&&(Yn(c[k],s[k])||d.push({command:P,args:[v,k,s[k],T]}))}function Xa(c){return c.id}function va(c,s){return c[s.id]=s,c}class Be{constructor(s,d,v,T){this.message=(s?`${s}: `:"")+v,T&&(this.identifier=T),d!=null&&d.__line__&&(this.line=d.__line__)}}function dr(c,...s){for(const d of s)for(const v in d)c[v]=d[v];return c}class Un extends Error{constructor(s,d){super(d),this.message=d,this.key=s}}class xa{constructor(s,d=[]){this.parent=s,this.bindings={};for(const[v,T]of d)this.bindings[v]=T}concat(s){return new xa(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const pr={kind:"null"},Ue={kind:"number"},Dn={kind:"string"},wn={kind:"boolean"},Er={kind:"color"},La={kind:"object"},bn={kind:"value"},ba={kind:"collator"},Dt={kind:"formatted"},lt={kind:"padding"},ft={kind:"resolvedImage"},wt={kind:"variableAnchorOffsetCollection"};function Lt(c,s){return{kind:"array",itemType:c,N:s}}function It(c){if(c.kind==="array"){const s=It(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const te=[pr,Ue,Dn,wn,Er,Dt,La,Lt(bn),lt,ft,wt];function Zt(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Zt(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const d of te)if(!Zt(d,s))return null}}return`Expected ${It(c)} but found ${It(s)} instead.`}function Ft(c,s){return s.some((d=>d.kind===c.kind))}function Xt(c,s){return s.some((d=>d==="null"?c===null:d==="array"?Array.isArray(c):d==="object"?c&&!Array.isArray(c)&&typeof c=="object":d===typeof c))}function xe(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}const ie=.96422,Ee=.82521,hn=4/29,dn=6/29,He=3*dn*dn,Je=dn*dn*dn,_n=Math.PI/180,Vn=180/Math.PI;function gi(c){return(c%=360)<0&&(c+=360),c}function Kn([c,s,d,v]){let T,P;const k=wr((.2225045*(c=Hn(c))+.7168786*(s=Hn(s))+.0606169*(d=Hn(d)))/1);c===s&&s===d?T=P=k:(T=wr((.4360747*c+.3850649*s+.1430804*d)/ie),P=wr((.0139322*c+.0971045*s+.7141733*d)/Ee));const R=116*k-16;return[R<0?0:R,500*(T-k),200*(k-P),v]}function Hn(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function wr(c){return c>Je?Math.pow(c,1/3):c/He+hn}function Mi([c,s,d,v]){let T=(c+16)/116,P=isNaN(s)?T:T+s/500,k=isNaN(d)?T:T-d/200;return T=1*rr(T),P=ie*rr(P),k=Ee*rr(k),[Ni(3.1338561*P-1.6168667*T-.4906146*k),Ni(-.9787684*P+1.9161415*T+.033454*k),Ni(.0719453*P-.2289914*T+1.4052427*k),v]}function Ni(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function rr(c){return c>dn?c*c*c:He*(c-hn)}function Cr(c){return parseInt(c.padEnd(2,c),16)/255}function Tl(c,s){return Ji(s?c/100:c,0,1)}function Ji(c,s,d){return Math.min(Math.max(s,c),d)}function Al(c){return!c.some(Number.isNaN)}const Qh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Qn{constructor(s,d,v,T=1,P=!0){this.r=s,this.g=d,this.b=v,this.a=T,P||(this.r*=T,this.g*=T,this.b*=T,T||this.overwriteGetter("rgb",[s,d,v,T]))}static parse(s){if(s instanceof Qn)return s;if(typeof s!="string")return;const d=(function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const T=Qh[v];if(T){const[k,R,U]=T;return[k/255,R/255,U/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const k=v.length<6?1:2;let R=1;return[Cr(v.slice(R,R+=k)),Cr(v.slice(R,R+=k)),Cr(v.slice(R,R+=k)),Cr(v.slice(R,R+k)||"ff")]}if(v.startsWith("rgb")){const k=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[R,U,G,tt,st,ct,gt,yt,Ct,Bt,Ut,Jt]=k,Ht=[tt||" ",gt||" ",Bt].join("");if(Ht==="  "||Ht==="  /"||Ht===",,"||Ht===",,,"){const ee=[G,ct,Ct].join(""),ne=ee==="%%%"?100:ee===""?255:0;if(ne){const Me=[Ji(+U/ne,0,1),Ji(+st/ne,0,1),Ji(+yt/ne,0,1),Ut?Tl(+Ut,Jt):1];if(Al(Me))return Me}}return}}const P=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[k,R,U,G,tt,st,ct,gt,yt]=P,Ct=[U||" ",tt||" ",ct].join("");if(Ct==="  "||Ct==="  /"||Ct===",,"||Ct===",,,"){const Bt=[+R,Ji(+G,0,100),Ji(+st,0,100),gt?Tl(+gt,yt):1];if(Al(Bt))return(function([Ut,Jt,Ht,ee]){function ne(Me){const Fe=(Me+Ut/30)%12,ln=Jt*Math.min(Ht,1-Ht);return Ht-ln*Math.max(-1,Math.min(Fe-3,9-Fe,1))}return Ut=gi(Ut),Jt/=100,Ht/=100,[ne(0),ne(8),ne(4),ee]})(Bt)}}})(s);return d?new Qn(...d,!1):void 0}get rgb(){const{r:s,g:d,b:v,a:T}=this,P=T||1/0;return this.overwriteGetter("rgb",[s/P,d/P,v/P,T])}get hcl(){return this.overwriteGetter("hcl",(function(s){const[d,v,T,P]=Kn(s),k=Math.sqrt(v*v+T*T);return[Math.round(1e4*k)?gi(Math.atan2(T,v)*Vn):NaN,k,d,P]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Kn(this.rgb))}overwriteGetter(s,d){return Object.defineProperty(this,s,{value:d}),d}toString(){const[s,d,v,T]=this.rgb;return`rgba(${[s,d,v].map((P=>Math.round(255*P))).join(",")},${T})`}}Qn.black=new Qn(0,0,0,1),Qn.white=new Qn(1,1,1,1),Qn.transparent=new Qn(0,0,0,0),Qn.red=new Qn(1,0,0,1);class Ks{constructor(s,d,v){this.sensitivity=s?d?"variant":"case":d?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,d){return this.collator.compare(s,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class nl{constructor(s,d,v,T,P){this.text=s,this.image=d,this.scale=v,this.fontStack=T,this.textColor=P}}class Vr{constructor(s){this.sections=s}static fromString(s){return new Vr([new nl(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((s=>s.text.length!==0||s.image&&s.image.name.length!==0))}static factory(s){return s instanceof Vr?s:Vr.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map((s=>s.text)).join("")}}class wa{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof wa)return s;if(typeof s=="number")return new wa([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const d of s)if(typeof d!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new wa(s)}}toString(){return JSON.stringify(this.values)}}const zu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class kn{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof kn)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let d=0;d<s.length;d+=2){const v=s[d],T=s[d+1];if(typeof v!="string"||!zu.has(v)||!Array.isArray(T)||T.length!==2||typeof T[0]!="number"||typeof T[1]!="number")return}return new kn(s)}}toString(){return JSON.stringify(this.values)}}class Rn{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Rn({name:s,available:!1}):null}}function Sa(c,s,d,v){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof d=="number"&&d>=0&&d<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[c,s,d,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[c,s,d,v]:[c,s,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ar(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Qn||c instanceof Ks||c instanceof Vr||c instanceof wa||c instanceof kn||c instanceof Rn)return!0;if(Array.isArray(c)){for(const s of c)if(!ar(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!ar(c[s]))return!1;return!0}return!1}function yi(c){if(c===null)return pr;if(typeof c=="string")return Dn;if(typeof c=="boolean")return wn;if(typeof c=="number")return Ue;if(c instanceof Qn)return Er;if(c instanceof Ks)return ba;if(c instanceof Vr)return Dt;if(c instanceof wa)return lt;if(c instanceof kn)return wt;if(c instanceof Rn)return ft;if(Array.isArray(c)){const s=c.length;let d;for(const v of c){const T=yi(v);if(d){if(d===T)continue;d=bn;break}d=T}return Lt(d||bn,s)}return La}function ni(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof Qn||c instanceof Vr||c instanceof wa||c instanceof kn||c instanceof Rn?c.toString():JSON.stringify(c)}class An{constructor(s,d){this.type=s,this.value=d}static parse(s,d){if(s.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!ar(s[1]))return d.error("invalid value");const v=s[1];let T=yi(v);const P=d.expectedType;return T.kind!=="array"||T.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(T=P),new An(T,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class zn{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const ko={string:Dn,number:Ue,boolean:wn,object:La};class Ta{constructor(s,d){this.type=s,this.args=d}static parse(s,d){if(s.length<2)return d.error("Expected at least one argument.");let v,T=1;const P=s[0];if(P==="array"){let R,U;if(s.length>2){const G=s[1];if(typeof G!="string"||!(G in ko)||G==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);R=ko[G],T++}else R=bn;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return d.error('The length argument to "array" must be a positive integer literal',2);U=s[2],T++}v=Lt(R,U)}else{if(!ko[P])throw new Error(`Types doesn't contain name = ${P}`);v=ko[P]}const k=[];for(;T<s.length;T++){const R=d.parse(s[T],T,bn);if(!R)return null;k.push(R)}return new Ta(v,k)}evaluate(s){for(let d=0;d<this.args.length;d++){const v=this.args[d].evaluate(s);if(!Zt(this.type,yi(v)))return v;if(d===this.args.length-1)throw new zn(`Expected value to be of type ${It(this.type)}, but found ${It(yi(v))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every((s=>s.outputDefined()))}}const qi={"to-boolean":wn,"to-color":Er,"to-number":Ue,"to-string":Dn};class Qs{constructor(s,d){this.type=s,this.args=d}static parse(s,d){if(s.length<2)return d.error("Expected at least one argument.");const v=s[0];if(!qi[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&s.length!==2)return d.error("Expected one argument.");const T=qi[v],P=[];for(let k=1;k<s.length;k++){const R=d.parse(s[k],k,bn);if(!R)return null;P.push(R)}return new Qs(T,P)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let d,v;for(const T of this.args){if(d=T.evaluate(s),v=null,d instanceof Qn)return d;if(typeof d=="string"){const P=s.parseColor(d);if(P)return P}else if(Array.isArray(d)&&(v=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:Sa(d[0],d[1],d[2],d[3]),!v))return new Qn(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new zn(v||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const v of this.args){d=v.evaluate(s);const T=wa.parse(d);if(T)return T}throw new zn(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const v of this.args){d=v.evaluate(s);const T=kn.parse(d);if(T)return T}throw new zn(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const v of this.args){if(d=v.evaluate(s),d===null)return 0;const T=Number(d);if(!isNaN(T))return T}throw new zn(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return Vr.fromString(ni(this.args[0].evaluate(s)));case"resolvedImage":return Rn.fromString(ni(this.args[0].evaluate(s)));default:return ni(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every((s=>s.outputDefined()))}}const eu=["Unknown","Point","LineString","Polygon"];class Cs{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?eu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let d=this._parseColorCache[s];return d||(d=this._parseColorCache[s]=Qn.parse(s)),d}}class Ci{constructor(s,d,v=[],T,P=new xa,k=[]){this.registry=s,this.path=v,this.key=v.map((R=>`[${R}]`)).join(""),this.scope=P,this.errors=k,this.expectedType=T,this._isConstant=d}parse(s,d,v,T,P={}){return d?this.concat(d,v,T)._parse(s,P):this._parse(s,P)}_parse(s,d){function v(T,P,k){return k==="assert"?new Ta(P,[T]):k==="coerce"?new Qs(P,[T]):T}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const T=s[0];if(typeof T!="string")return this.error(`Expression name must be a string, but found ${typeof T} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const P=this.registry[T];if(P){let k=P.parse(s,this);if(!k)return null;if(this.expectedType){const R=this.expectedType,U=k.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||U.kind!=="value")if(R.kind!=="color"&&R.kind!=="formatted"&&R.kind!=="resolvedImage"||U.kind!=="value"&&U.kind!=="string")if(R.kind!=="padding"||U.kind!=="value"&&U.kind!=="number"&&U.kind!=="array")if(R.kind!=="variableAnchorOffsetCollection"||U.kind!=="value"&&U.kind!=="array"){if(this.checkSubtype(R,U))return null}else k=v(k,R,d.typeAnnotation||"coerce");else k=v(k,R,d.typeAnnotation||"coerce");else k=v(k,R,d.typeAnnotation||"coerce");else k=v(k,R,d.typeAnnotation||"assert")}if(!(k instanceof An)&&k.type.kind!=="resolvedImage"&&this._isConstant(k)){const R=new Cs;try{k=new An(k.type,k.evaluate(R))}catch(U){return this.error(U.message),null}}return k}return this.error(`Unknown expression "${T}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,d,v){const T=typeof s=="number"?this.path.concat(s):this.path,P=v?this.scope.concat(v):this.scope;return new Ci(this.registry,this._isConstant,T,d||null,P,this.errors)}error(s,...d){const v=`${this.key}${d.map((T=>`[${T}]`)).join("")}`;this.errors.push(new Un(v,s))}checkSubtype(s,d){const v=Zt(s,d);return v&&this.error(v),v}}class Ps{constructor(s,d,v){this.type=ba,this.locale=v,this.caseSensitive=s,this.diacriticSensitive=d}static parse(s,d){if(s.length!==2)return d.error("Expected one argument.");const v=s[1];if(typeof v!="object"||Array.isArray(v))return d.error("Collator options argument must be an object.");const T=d.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,wn);if(!T)return null;const P=d.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,wn);if(!P)return null;let k=null;return v.locale&&(k=d.parse(v.locale,1,Dn),!k)?null:new Ps(T,P,k)}evaluate(s){return new Ks(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const Ka=8192;function ms(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function Ml(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function El(c,s){const d=(180+c[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,T=Math.pow(2,s.z);return[Math.round(d*T*Ka),Math.round(v*T*Ka)]}function gc(c,s,d){const v=c[0]-s[0],T=c[1]-s[1],P=c[0]-d[0],k=c[1]-d[1];return v*k-P*T==0&&v*P<=0&&T*k<=0}function Cl(c,s){let d=!1;for(let k=0,R=s.length;k<R;k++){const U=s[k];for(let G=0,tt=U.length;G<tt-1;G++){if(gc(c,U[G],U[G+1]))return!1;(T=U[G])[1]>(v=c)[1]!=(P=U[G+1])[1]>v[1]&&v[0]<(P[0]-T[0])*(v[1]-T[1])/(P[1]-T[1])+T[0]&&(d=!d)}}var v,T,P;return d}function nu(c,s){for(let d=0;d<s.length;d++)if(Cl(c,s[d]))return!0;return!1}function yc(c,s,d,v){const T=v[0]-d[0],P=v[1]-d[1],k=(c[0]-d[0])*P-T*(c[1]-d[1]),R=(s[0]-d[0])*P-T*(s[1]-d[1]);return k>0&&R<0||k<0&&R>0}function iu(c,s,d){for(const G of d)for(let tt=0;tt<G.length-1;++tt)if((R=[(k=G[tt+1])[0]-(P=G[tt])[0],k[1]-P[1]])[0]*(U=[(T=s)[0]-(v=c)[0],T[1]-v[1]])[1]-R[1]*U[0]!=0&&yc(v,T,P,k)&&yc(P,k,v,T))return!0;var v,T,P,k,R,U;return!1}function Qa(c,s){for(let d=0;d<c.length;++d)if(!Cl(c[d],s))return!1;for(let d=0;d<c.length-1;++d)if(iu(c[d],c[d+1],s))return!1;return!0}function Lu(c,s){for(let d=0;d<s.length;d++)if(Qa(c,s[d]))return!0;return!1}function il(c,s,d){const v=[];for(let T=0;T<c.length;T++){const P=[];for(let k=0;k<c[T].length;k++){const R=El(c[T][k],d);ms(s,R),P.push(R)}v.push(P)}return v}function Pl(c,s,d){const v=[];for(let T=0;T<c.length;T++){const P=il(c[T],s,d);v.push(P)}return v}function Mn(c,s,d,v){if(c[0]<d[0]||c[0]>d[2]){const T=.5*v;let P=c[0]-d[0]>T?-v:d[0]-c[0]>T?v:0;P===0&&(P=c[0]-d[2]>T?-v:d[2]-c[0]>T?v:0),c[0]+=P}ms(s,c)}function Ja(c,s,d,v){const T=Math.pow(2,v.z)*Ka,P=[v.x*Ka,v.y*Ka],k=[];for(const R of c)for(const U of R){const G=[U.x+P[0],U.y+P[1]];Mn(G,s,d,T),k.push(G)}return k}function _i(c,s,d,v){const T=Math.pow(2,v.z)*Ka,P=[v.x*Ka,v.y*Ka],k=[];for(const U of c){const G=[];for(const tt of U){const st=[tt.x+P[0],tt.y+P[1]];ms(s,st),G.push(st)}k.push(G)}if(s[2]-s[0]<=T/2){(R=s)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const U of k)for(const G of U)Mn(G,s,d,T)}var R;return k}class Oo{constructor(s,d){this.type=wn,this.geojson=s,this.geometries=d}static parse(s,d){if(s.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(ar(s[1])){const v=s[1];if(v.type==="FeatureCollection")for(let T=0;T<v.features.length;++T){const P=v.features[T].geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new Oo(v,v.features[T].geometry)}else if(v.type==="Feature"){const T=v.geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new Oo(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new Oo(v,v)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return(function(d,v){const T=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],k=d.canonicalID();if(v.type==="Polygon"){const R=il(v.coordinates,P,k),U=Ja(d.geometry(),T,P,k);if(!Ml(T,P))return!1;for(const G of U)if(!Cl(G,R))return!1}if(v.type==="MultiPolygon"){const R=Pl(v.coordinates,P,k),U=Ja(d.geometry(),T,P,k);if(!Ml(T,P))return!1;for(const G of U)if(!nu(G,R))return!1}return!0})(s,this.geometries);if(s.geometryType()==="LineString")return(function(d,v){const T=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],k=d.canonicalID();if(v.type==="Polygon"){const R=il(v.coordinates,P,k),U=_i(d.geometry(),T,P,k);if(!Ml(T,P))return!1;for(const G of U)if(!Qa(G,R))return!1}if(v.type==="MultiPolygon"){const R=Pl(v.coordinates,P,k),U=_i(d.geometry(),T,P,k);if(!Ml(T,P))return!1;for(const G of U)if(!Lu(G,R))return!1}return!0})(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Js{constructor(s,d){this.type=d.type,this.name=s,this.boundExpression=d}static parse(s,d){if(s.length!==2||typeof s[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const v=s[1];return d.scope.has(v)?new Js(v,d.scope.get(v)):d.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class sr{constructor(s,d,v,T){this.name=s,this.type=d,this._evaluate=v,this.args=T}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,d){const v=s[0],T=sr.definitions[v];if(!T)return d.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const P=Array.isArray(T)?T[0]:T.type,k=Array.isArray(T)?[[T[1],T[2]]]:T.overloads,R=k.filter((([G])=>!Array.isArray(G)||G.length===s.length-1));let U=null;for(const[G,tt]of R){U=new Ci(d.registry,rl,d.path,null,d.scope);const st=[];let ct=!1;for(let gt=1;gt<s.length;gt++){const yt=s[gt],Ct=Array.isArray(G)?G[gt-1]:G.type,Bt=U.parse(yt,1+st.length,Ct);if(!Bt){ct=!0;break}st.push(Bt)}if(!ct)if(Array.isArray(G)&&G.length!==st.length)U.error(`Expected ${G.length} arguments, but found ${st.length} instead.`);else{for(let gt=0;gt<st.length;gt++){const yt=Array.isArray(G)?G[gt]:G.type,Ct=st[gt];U.concat(gt+1).checkSubtype(yt,Ct.type)}if(U.errors.length===0)return new sr(v,P,tt,st)}}if(R.length===1)d.errors.push(...U.errors);else{const G=(R.length?R:k).map((([st])=>{return ct=st,Array.isArray(ct)?`(${ct.map(It).join(", ")})`:`(${It(ct.type)}...)`;var ct})).join(" | "),tt=[];for(let st=1;st<s.length;st++){const ct=d.parse(s[st],1+tt.length);if(!ct)return null;tt.push(It(ct.type))}d.error(`Expected arguments of type ${G}, but found (${tt.join(", ")}) instead.`)}return null}static register(s,d){sr.definitions=d;for(const v in d)s[v]=sr}}function rl(c){if(c instanceof Js)return rl(c.boundExpression);if(c instanceof sr&&c.name==="error"||c instanceof Ps||c instanceof Oo)return!1;const s=c instanceof Qs||c instanceof Ta;let d=!0;return c.eachChild((v=>{d=s?d&&rl(v):d&&v instanceof An})),!!d&&Ia(c)&&to(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ia(c){if(c instanceof sr&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Oo)return!1;let s=!0;return c.eachChild((d=>{s&&!Ia(d)&&(s=!1)})),s}function Ra(c){if(c instanceof sr&&c.name==="feature-state")return!1;let s=!0;return c.eachChild((d=>{s&&!Ra(d)&&(s=!1)})),s}function to(c,s){if(c instanceof sr&&s.indexOf(c.name)>=0)return!1;let d=!0;return c.eachChild((v=>{d&&!to(v,s)&&(d=!1)})),d}function Hi(c,s){const d=c.length-1;let v,T,P=0,k=d,R=0;for(;P<=k;)if(R=Math.floor((P+k)/2),v=c[R],T=c[R+1],v<=s){if(R===d||s<T)return R;P=R+1}else{if(!(v>s))throw new zn("Input is not a number.");k=R-1}return 0}class Aa{constructor(s,d,v){this.type=s,this.input=d,this.labels=[],this.outputs=[];for(const[T,P]of v)this.labels.push(T),this.outputs.push(P)}static parse(s,d){if(s.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return d.error("Expected an even number of arguments.");const v=d.parse(s[1],1,Ue);if(!v)return null;const T=[];let P=null;d.expectedType&&d.expectedType.kind!=="value"&&(P=d.expectedType);for(let k=1;k<s.length;k+=2){const R=k===1?-1/0:s[k],U=s[k+1],G=k,tt=k+1;if(typeof R!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(T.length&&T[T.length-1][0]>=R)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',G);const st=d.parse(U,tt,P);if(!st)return null;P=P||st.type,T.push([R,st])}return new Aa(P,v,T)}evaluate(s){const d=this.labels,v=this.outputs;if(d.length===1)return v[0].evaluate(s);const T=this.input.evaluate(s);if(T<=d[0])return v[0].evaluate(s);const P=d.length;return T>=d[P-1]?v[P-1].evaluate(s):v[Hi(d,T)].evaluate(s)}eachChild(s){s(this.input);for(const d of this.outputs)s(d)}outputDefined(){return this.outputs.every((s=>s.outputDefined()))}}function Bn(c,s,d){return c+d*(s-c)}function al(c,s,d){return c.map(((v,T)=>Bn(v,s[T],d)))}const Ba={number:Bn,color:function(c,s,d,v="rgb"){switch(v){case"rgb":{const[T,P,k,R]=al(c.rgb,s.rgb,d);return new Qn(T,P,k,R,!1)}case"hcl":{const[T,P,k,R]=c.hcl,[U,G,tt,st]=s.hcl;let ct,gt;if(isNaN(T)||isNaN(U))isNaN(T)?isNaN(U)?ct=NaN:(ct=U,k!==1&&k!==0||(gt=G)):(ct=T,tt!==1&&tt!==0||(gt=P));else{let Jt=U-T;U>T&&Jt>180?Jt-=360:U<T&&T-U>180&&(Jt+=360),ct=T+d*Jt}const[yt,Ct,Bt,Ut]=(function([Jt,Ht,ee,ne]){return Jt=isNaN(Jt)?0:Jt*_n,Mi([ee,Math.cos(Jt)*Ht,Math.sin(Jt)*Ht,ne])})([ct,gt??Bn(P,G,d),Bn(k,tt,d),Bn(R,st,d)]);return new Qn(yt,Ct,Bt,Ut,!1)}case"lab":{const[T,P,k,R]=Mi(al(c.lab,s.lab,d));return new Qn(T,P,k,R,!1)}}},array:al,padding:function(c,s,d){return new wa(al(c.values,s.values,d))},variableAnchorOffsetCollection:function(c,s,d){const v=c.values,T=s.values;if(v.length!==T.length)throw new zn(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${s.toString()}`);const P=[];for(let k=0;k<v.length;k+=2){if(v[k]!==T[k])throw new zn(`Cannot interpolate values containing mismatched anchors. from[${k}]: ${v[k]}, to[${k}]: ${T[k]}`);P.push(v[k]);const[R,U]=v[k+1],[G,tt]=T[k+1];P.push([Bn(R,G,d),Bn(U,tt,d)])}return new kn(P)}};class zi{constructor(s,d,v,T,P){this.type=s,this.operator=d,this.interpolation=v,this.input=T,this.labels=[],this.outputs=[];for(const[k,R]of P)this.labels.push(k),this.outputs.push(R)}static interpolationFactor(s,d,v,T){let P=0;if(s.name==="exponential")P=ks(d,s.base,v,T);else if(s.name==="linear")P=ks(d,1,v,T);else if(s.name==="cubic-bezier"){const k=s.controlPoints;P=new V(k[0],k[1],k[2],k[3]).solve(ks(d,1,v,T))}return P}static parse(s,d){let[v,T,P,...k]=s;if(!Array.isArray(T)||T.length===0)return d.error("Expected an interpolation type expression.",1);if(T[0]==="linear")T={name:"linear"};else if(T[0]==="exponential"){const G=T[1];if(typeof G!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);T={name:"exponential",base:G}}else{if(T[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(T[0])}`,1,0);{const G=T.slice(1);if(G.length!==4||G.some((tt=>typeof tt!="number"||tt<0||tt>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);T={name:"cubic-bezier",controlPoints:G}}}if(s.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(P=d.parse(P,2,Ue),!P)return null;const R=[];let U=null;v==="interpolate-hcl"||v==="interpolate-lab"?U=Er:d.expectedType&&d.expectedType.kind!=="value"&&(U=d.expectedType);for(let G=0;G<k.length;G+=2){const tt=k[G],st=k[G+1],ct=G+3,gt=G+4;if(typeof tt!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(R.length&&R[R.length-1][0]>=tt)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ct);const yt=d.parse(st,gt,U);if(!yt)return null;U=U||yt.type,R.push([tt,yt])}return xe(U,Ue)||xe(U,Er)||xe(U,lt)||xe(U,wt)||xe(U,Lt(Ue))?new zi(U,v,T,P,R):d.error(`Type ${It(U)} is not interpolatable.`)}evaluate(s){const d=this.labels,v=this.outputs;if(d.length===1)return v[0].evaluate(s);const T=this.input.evaluate(s);if(T<=d[0])return v[0].evaluate(s);const P=d.length;if(T>=d[P-1])return v[P-1].evaluate(s);const k=Hi(d,T),R=zi.interpolationFactor(this.interpolation,T,d[k],d[k+1]),U=v[k].evaluate(s),G=v[k+1].evaluate(s);switch(this.operator){case"interpolate":return Ba[this.type.kind](U,G,R);case"interpolate-hcl":return Ba.color(U,G,R,"hcl");case"interpolate-lab":return Ba.color(U,G,R,"lab")}}eachChild(s){s(this.input);for(const d of this.outputs)s(d)}outputDefined(){return this.outputs.every((s=>s.outputDefined()))}}function ks(c,s,d,v){const T=v-d,P=c-d;return T===0?0:s===1?P/T:(Math.pow(s,P)-1)/(Math.pow(s,T)-1)}class kl{constructor(s,d){this.type=s,this.args=d}static parse(s,d){if(s.length<2)return d.error("Expectected at least one argument.");let v=null;const T=d.expectedType;T&&T.kind!=="value"&&(v=T);const P=[];for(const R of s.slice(1)){const U=d.parse(R,1+P.length,v,void 0,{typeAnnotation:"omit"});if(!U)return null;v=v||U.type,P.push(U)}if(!v)throw new Error("No output type");const k=T&&P.some((R=>Zt(T,R.type)));return new kl(k?bn:v,P)}evaluate(s){let d,v=null,T=0;for(const P of this.args)if(T++,v=P.evaluate(s),v&&v instanceof Rn&&!v.available&&(d||(d=v.name),v=null,T===this.args.length&&(v=d)),v!==null)break;return v}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every((s=>s.outputDefined()))}}class Do{constructor(s,d){this.type=d.type,this.bindings=[].concat(s),this.result=d}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const d of this.bindings)s(d[1]);s(this.result)}static parse(s,d){if(s.length<4)return d.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const v=[];for(let P=1;P<s.length-1;P+=2){const k=s[P];if(typeof k!="string")return d.error(`Expected string, but found ${typeof k} instead.`,P);if(/[^a-zA-Z0-9_]/.test(k))return d.error("Variable names must contain only alphanumeric characters or '_'.",P);const R=d.parse(s[P+1],P+1);if(!R)return null;v.push([k,R])}const T=d.parse(s[s.length-1],s.length-1,d.expectedType,v);return T?new Do(v,T):null}outputDefined(){return this.result.outputDefined()}}class Jn{constructor(s,d,v){this.type=s,this.index=d,this.input=v}static parse(s,d){if(s.length!==3)return d.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const v=d.parse(s[1],1,Ue),T=d.parse(s[2],2,Lt(d.expectedType||bn));return v&&T?new Jn(T.type.itemType,v,T):null}evaluate(s){const d=this.index.evaluate(s),v=this.input.evaluate(s);if(d<0)throw new zn(`Array index out of bounds: ${d} < 0.`);if(d>=v.length)throw new zn(`Array index out of bounds: ${d} > ${v.length-1}.`);if(d!==Math.floor(d))throw new zn(`Array index must be an integer, but found ${d} instead.`);return v[d]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class Iu{constructor(s,d){this.type=wn,this.needle=s,this.haystack=d}static parse(s,d){if(s.length!==3)return d.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const v=d.parse(s[1],1,bn),T=d.parse(s[2],2,bn);return v&&T?Ft(v.type,[wn,Dn,Ue,pr,bn])?new Iu(v,T):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${It(v.type)} instead`):null}evaluate(s){const d=this.needle.evaluate(s),v=this.haystack.evaluate(s);if(!v)return!1;if(!Xt(d,["boolean","string","number","null"]))throw new zn(`Expected first argument to be of type boolean, string, number or null, but found ${It(yi(d))} instead.`);if(!Xt(v,["string","array"]))throw new zn(`Expected second argument to be of type array or string, but found ${It(yi(v))} instead.`);return v.indexOf(d)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class sa{constructor(s,d,v){this.type=Ue,this.needle=s,this.haystack=d,this.fromIndex=v}static parse(s,d){if(s.length<=2||s.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const v=d.parse(s[1],1,bn),T=d.parse(s[2],2,bn);if(!v||!T)return null;if(!Ft(v.type,[wn,Dn,Ue,pr,bn]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${It(v.type)} instead`);if(s.length===4){const P=d.parse(s[3],3,Ue);return P?new sa(v,T,P):null}return new sa(v,T)}evaluate(s){const d=this.needle.evaluate(s),v=this.haystack.evaluate(s);if(!Xt(d,["boolean","string","number","null"]))throw new zn(`Expected first argument to be of type boolean, string, number or null, but found ${It(yi(d))} instead.`);if(!Xt(v,["string","array"]))throw new zn(`Expected second argument to be of type array or string, but found ${It(yi(v))} instead.`);if(this.fromIndex){const T=this.fromIndex.evaluate(s);return v.indexOf(d,T)}return v.indexOf(d)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class Os{constructor(s,d,v,T,P,k){this.inputType=s,this.type=d,this.input=v,this.cases=T,this.outputs=P,this.otherwise=k}static parse(s,d){if(s.length<5)return d.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return d.error("Expected an even number of arguments.");let v,T;d.expectedType&&d.expectedType.kind!=="value"&&(T=d.expectedType);const P={},k=[];for(let G=2;G<s.length-1;G+=2){let tt=s[G];const st=s[G+1];Array.isArray(tt)||(tt=[tt]);const ct=d.concat(G);if(tt.length===0)return ct.error("Expected at least one branch label.");for(const yt of tt){if(typeof yt!="number"&&typeof yt!="string")return ct.error("Branch labels must be numbers or strings.");if(typeof yt=="number"&&Math.abs(yt)>Number.MAX_SAFE_INTEGER)return ct.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof yt=="number"&&Math.floor(yt)!==yt)return ct.error("Numeric branch labels must be integer values.");if(v){if(ct.checkSubtype(v,yi(yt)))return null}else v=yi(yt);if(P[String(yt)]!==void 0)return ct.error("Branch labels must be unique.");P[String(yt)]=k.length}const gt=d.parse(st,G,T);if(!gt)return null;T=T||gt.type,k.push(gt)}const R=d.parse(s[1],1,bn);if(!R)return null;const U=d.parse(s[s.length-1],s.length-1,T);return U?R.type.kind!=="value"&&d.concat(1).checkSubtype(v,R.type)?null:new Os(v,T,R,P,k,U):null}evaluate(s){const d=this.input.evaluate(s);return(yi(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every((s=>s.outputDefined()))&&this.otherwise.outputDefined()}}class Ol{constructor(s,d,v){this.type=s,this.branches=d,this.otherwise=v}static parse(s,d){if(s.length<4)return d.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return d.error("Expected an odd number of arguments.");let v;d.expectedType&&d.expectedType.kind!=="value"&&(v=d.expectedType);const T=[];for(let k=1;k<s.length-1;k+=2){const R=d.parse(s[k],k,wn);if(!R)return null;const U=d.parse(s[k+1],k+1,v);if(!U)return null;T.push([R,U]),v=v||U.type}const P=d.parse(s[s.length-1],s.length-1,v);if(!P)return null;if(!v)throw new Error("Can't infer output type");return new Ol(v,T,P)}evaluate(s){for(const[d,v]of this.branches)if(d.evaluate(s))return v.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[d,v]of this.branches)s(d),s(v);s(this.otherwise)}outputDefined(){return this.branches.every((([s,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}}class Ru{constructor(s,d,v,T){this.type=s,this.input=d,this.beginIndex=v,this.endIndex=T}static parse(s,d){if(s.length<=2||s.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const v=d.parse(s[1],1,bn),T=d.parse(s[2],2,Ue);if(!v||!T)return null;if(!Ft(v.type,[Lt(bn),Dn,bn]))return d.error(`Expected first argument to be of type array or string, but found ${It(v.type)} instead`);if(s.length===4){const P=d.parse(s[3],3,Ue);return P?new Ru(v.type,v,T,P):null}return new Ru(v.type,v,T)}evaluate(s){const d=this.input.evaluate(s),v=this.beginIndex.evaluate(s);if(!Xt(d,["string","array"]))throw new zn(`Expected first argument to be of type array or string, but found ${It(yi(d))} instead.`);if(this.endIndex){const T=this.endIndex.evaluate(s);return d.slice(v,T)}return d.slice(v)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function _c(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Jh(c,s,d,v){return v.compare(s,d)===0}function Dl(c,s,d){const v=c!=="=="&&c!=="!=";return class fD{constructor(P,k,R){this.type=wn,this.lhs=P,this.rhs=k,this.collator=R,this.hasUntypedArgument=P.type.kind==="value"||k.type.kind==="value"}static parse(P,k){if(P.length!==3&&P.length!==4)return k.error("Expected two or three arguments.");const R=P[0];let U=k.parse(P[1],1,bn);if(!U)return null;if(!_c(R,U.type))return k.concat(1).error(`"${R}" comparisons are not supported for type '${It(U.type)}'.`);let G=k.parse(P[2],2,bn);if(!G)return null;if(!_c(R,G.type))return k.concat(2).error(`"${R}" comparisons are not supported for type '${It(G.type)}'.`);if(U.type.kind!==G.type.kind&&U.type.kind!=="value"&&G.type.kind!=="value")return k.error(`Cannot compare types '${It(U.type)}' and '${It(G.type)}'.`);v&&(U.type.kind==="value"&&G.type.kind!=="value"?U=new Ta(G.type,[U]):U.type.kind!=="value"&&G.type.kind==="value"&&(G=new Ta(U.type,[G])));let tt=null;if(P.length===4){if(U.type.kind!=="string"&&G.type.kind!=="string"&&U.type.kind!=="value"&&G.type.kind!=="value")return k.error("Cannot use collator to compare non-string types.");if(tt=k.parse(P[3],3,ba),!tt)return null}return new fD(U,G,tt)}evaluate(P){const k=this.lhs.evaluate(P),R=this.rhs.evaluate(P);if(v&&this.hasUntypedArgument){const U=yi(k),G=yi(R);if(U.kind!==G.kind||U.kind!=="string"&&U.kind!=="number")throw new zn(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${U.kind}, ${G.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const U=yi(k),G=yi(R);if(U.kind!=="string"||G.kind!=="string")return s(P,k,R)}return this.collator?d(P,k,R,this.collator.evaluate(P)):s(P,k,R)}eachChild(P){P(this.lhs),P(this.rhs),this.collator&&P(this.collator)}outputDefined(){return!0}}}const Yc=Dl("==",(function(c,s,d){return s===d}),Jh),Gf=Dl("!=",(function(c,s,d){return s!==d}),(function(c,s,d,v){return!Jh(0,s,d,v)})),Xc=Dl("<",(function(c,s,d){return s<d}),(function(c,s,d,v){return v.compare(s,d)<0})),Wf=Dl(">",(function(c,s,d){return s>d}),(function(c,s,d,v){return v.compare(s,d)>0})),eo=Dl("<=",(function(c,s,d){return s<=d}),(function(c,s,d,v){return v.compare(s,d)<=0})),Yf=Dl(">=",(function(c,s,d){return s>=d}),(function(c,s,d,v){return v.compare(s,d)>=0}));class Bu{constructor(s,d,v,T,P){this.type=Dn,this.number=s,this.locale=d,this.currency=v,this.minFractionDigits=T,this.maxFractionDigits=P}static parse(s,d){if(s.length!==3)return d.error("Expected two arguments.");const v=d.parse(s[1],1,Ue);if(!v)return null;const T=s[2];if(typeof T!="object"||Array.isArray(T))return d.error("NumberFormat options argument must be an object.");let P=null;if(T.locale&&(P=d.parse(T.locale,1,Dn),!P))return null;let k=null;if(T.currency&&(k=d.parse(T.currency,1,Dn),!k))return null;let R=null;if(T["min-fraction-digits"]&&(R=d.parse(T["min-fraction-digits"],1,Ue),!R))return null;let U=null;return T["max-fraction-digits"]&&(U=d.parse(T["max-fraction-digits"],1,Ue),!U)?null:new Bu(v,P,k,R,U)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Ds{constructor(s){this.type=Dt,this.sections=s}static parse(s,d){if(s.length<2)return d.error("Expected at least one argument.");const v=s[1];if(!Array.isArray(v)&&typeof v=="object")return d.error("First argument must be an image or text section.");const T=[];let P=!1;for(let k=1;k<=s.length-1;++k){const R=s[k];if(P&&typeof R=="object"&&!Array.isArray(R)){P=!1;let U=null;if(R["font-scale"]&&(U=d.parse(R["font-scale"],1,Ue),!U))return null;let G=null;if(R["text-font"]&&(G=d.parse(R["text-font"],1,Lt(Dn)),!G))return null;let tt=null;if(R["text-color"]&&(tt=d.parse(R["text-color"],1,Er),!tt))return null;const st=T[T.length-1];st.scale=U,st.font=G,st.textColor=tt}else{const U=d.parse(s[k],1,bn);if(!U)return null;const G=U.type.kind;if(G!=="string"&&G!=="value"&&G!=="null"&&G!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,T.push({content:U,scale:null,font:null,textColor:null})}}return new Ds(T)}evaluate(s){return new Vr(this.sections.map((d=>{const v=d.content.evaluate(s);return yi(v)===ft?new nl("",v,null,null,null):new nl(ni(v),null,d.scale?d.scale.evaluate(s):null,d.font?d.font.evaluate(s).join(","):null,d.textColor?d.textColor.evaluate(s):null)})))}eachChild(s){for(const d of this.sections)s(d.content),d.scale&&s(d.scale),d.font&&s(d.font),d.textColor&&s(d.textColor)}outputDefined(){return!1}}class vc{constructor(s){this.type=ft,this.input=s}static parse(s,d){if(s.length!==2)return d.error("Expected two arguments.");const v=d.parse(s[1],1,Dn);return v?new vc(v):d.error("No image name provided.")}evaluate(s){const d=this.input.evaluate(s),v=Rn.fromString(d);return v&&s.availableImages&&(v.available=s.availableImages.indexOf(d)>-1),v}eachChild(s){s(this.input)}outputDefined(){return!1}}class xc{constructor(s){this.type=Ue,this.input=s}static parse(s,d){if(s.length!==2)return d.error(`Expected 1 argument, but found ${s.length-1} instead.`);const v=d.parse(s[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${It(v.type)} instead.`):new xc(v):null}evaluate(s){const d=this.input.evaluate(s);if(typeof d=="string"||Array.isArray(d))return d.length;throw new zn(`Expected value to be of type string or array, but found ${It(yi(d))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const sl={"==":Yc,"!=":Gf,">":Wf,"<":Xc,">=":Yf,"<=":eo,array:Ta,at:Jn,boolean:Ta,case:Ol,coalesce:kl,collator:Ps,format:Ds,image:vc,in:Iu,"index-of":sa,interpolate:zi,"interpolate-hcl":zi,"interpolate-lab":zi,length:xc,let:Do,literal:An,match:Os,number:Ta,"number-format":Bu,object:Ta,slice:Ru,step:Aa,string:Ta,"to-boolean":Qs,"to-color":Qs,"to-number":Qs,"to-string":Qs,var:Js,within:Oo};function bc(c,[s,d,v,T]){s=s.evaluate(c),d=d.evaluate(c),v=v.evaluate(c);const P=T?T.evaluate(c):1,k=Sa(s,d,v,P);if(k)throw new zn(k);return new Qn(s/255,d/255,v/255,P,!1)}function Kc(c,s){return c in s}function wc(c,s){const d=s[c];return d===void 0?null:d}function zl(c){return{type:c}}function Qc(c){return{result:"success",value:c}}function no(c){return{result:"error",value:c}}function ru(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function Jc(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Sc(c){return!!c.expression&&c.expression.interpolated}function ti(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function vi(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function Xf(c){return c}function Nn(c,s){const d=s.type==="color",v=c.stops&&typeof c.stops[0][0]=="object",T=v||!(v||c.property!==void 0),P=c.type||(Sc(s)?"exponential":"interval");if(d||s.type==="padding"){const tt=d?Qn.parse:wa.parse;(c=dr({},c)).stops&&(c.stops=c.stops.map((st=>[st[0],tt(st[1])]))),c.default=tt(c.default?c.default:s.default)}if(c.colorSpace&&(k=c.colorSpace)!=="rgb"&&k!=="hcl"&&k!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var k;let R,U,G;if(P==="exponential")R=Nu;else if(P==="interval")R=xi;else if(P==="categorical"){R=Li,U=Object.create(null);for(const tt of c.stops)U[tt[0]]=tt[1];G=typeof c.stops[0][0]}else{if(P!=="identity")throw new Error(`Unknown function type "${P}"`);R=ju}if(v){const tt={},st=[];for(let yt=0;yt<c.stops.length;yt++){const Ct=c.stops[yt],Bt=Ct[0].zoom;tt[Bt]===void 0&&(tt[Bt]={zoom:Bt,type:c.type,property:c.property,default:c.default,stops:[]},st.push(Bt)),tt[Bt].stops.push([Ct[0].value,Ct[1]])}const ct=[];for(const yt of st)ct.push([tt[yt].zoom,Nn(tt[yt],s)]);const gt={name:"linear"};return{kind:"composite",interpolationType:gt,interpolationFactor:zi.interpolationFactor.bind(void 0,gt),zoomStops:ct.map((yt=>yt[0])),evaluate:({zoom:yt},Ct)=>Nu({stops:ct,base:c.base},s,yt).evaluate(yt,Ct)}}if(T){const tt=P==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:tt,interpolationFactor:zi.interpolationFactor.bind(void 0,tt),zoomStops:c.stops.map((st=>st[0])),evaluate:({zoom:st})=>R(c,s,st,U,G)}}return{kind:"source",evaluate(tt,st){const ct=st&&st.properties?st.properties[c.property]:void 0;return ct===void 0?$r(c.default,s.default):R(c,s,ct,U,G)}}}function $r(c,s,d){return c!==void 0?c:s!==void 0?s:d!==void 0?d:void 0}function Li(c,s,d,v,T){return $r(typeof d===T?v[d]:void 0,c.default,s.default)}function xi(c,s,d){if(ti(d)!=="number")return $r(c.default,s.default);const v=c.stops.length;if(v===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[v-1][0])return c.stops[v-1][1];const T=Hi(c.stops.map((P=>P[0])),d);return c.stops[T][1]}function Nu(c,s,d){const v=c.base!==void 0?c.base:1;if(ti(d)!=="number")return $r(c.default,s.default);const T=c.stops.length;if(T===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[T-1][0])return c.stops[T-1][1];const P=Hi(c.stops.map((tt=>tt[0])),d),k=(function(tt,st,ct,gt){const yt=gt-ct,Ct=tt-ct;return yt===0?0:st===1?Ct/yt:(Math.pow(st,Ct)-1)/(Math.pow(st,yt)-1)})(d,v,c.stops[P][0],c.stops[P+1][0]),R=c.stops[P][1],U=c.stops[P+1][1],G=Ba[s.type]||Xf;return typeof R.evaluate=="function"?{evaluate(...tt){const st=R.evaluate.apply(void 0,tt),ct=U.evaluate.apply(void 0,tt);if(st!==void 0&&ct!==void 0)return G(st,ct,k,c.colorSpace)}}:G(R,U,k,c.colorSpace)}function ju(c,s,d){switch(s.type){case"color":d=Qn.parse(d);break;case"formatted":d=Vr.fromString(d.toString());break;case"resolvedImage":d=Rn.fromString(d.toString());break;case"padding":d=wa.parse(d);break;default:ti(d)===s.type||s.type==="enum"&&s.values[d]||(d=void 0)}return $r(d,c.default,s.default)}sr.register(sl,{error:[{kind:"error"},[Dn],(c,[s])=>{throw new zn(s.evaluate(c))}],typeof:[Dn,[bn],(c,[s])=>It(yi(s.evaluate(c)))],"to-rgba":[Lt(Ue,4),[Er],(c,[s])=>{const[d,v,T,P]=s.evaluate(c).rgb;return[255*d,255*v,255*T,P]}],rgb:[Er,[Ue,Ue,Ue],bc],rgba:[Er,[Ue,Ue,Ue,Ue],bc],has:{type:wn,overloads:[[[Dn],(c,[s])=>Kc(s.evaluate(c),c.properties())],[[Dn,La],(c,[s,d])=>Kc(s.evaluate(c),d.evaluate(c))]]},get:{type:bn,overloads:[[[Dn],(c,[s])=>wc(s.evaluate(c),c.properties())],[[Dn,La],(c,[s,d])=>wc(s.evaluate(c),d.evaluate(c))]]},"feature-state":[bn,[Dn],(c,[s])=>wc(s.evaluate(c),c.featureState||{})],properties:[La,[],c=>c.properties()],"geometry-type":[Dn,[],c=>c.geometryType()],id:[bn,[],c=>c.id()],zoom:[Ue,[],c=>c.globals.zoom],"heatmap-density":[Ue,[],c=>c.globals.heatmapDensity||0],"line-progress":[Ue,[],c=>c.globals.lineProgress||0],accumulated:[bn,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Ue,zl(Ue),(c,s)=>{let d=0;for(const v of s)d+=v.evaluate(c);return d}],"*":[Ue,zl(Ue),(c,s)=>{let d=1;for(const v of s)d*=v.evaluate(c);return d}],"-":{type:Ue,overloads:[[[Ue,Ue],(c,[s,d])=>s.evaluate(c)-d.evaluate(c)],[[Ue],(c,[s])=>-s.evaluate(c)]]},"/":[Ue,[Ue,Ue],(c,[s,d])=>s.evaluate(c)/d.evaluate(c)],"%":[Ue,[Ue,Ue],(c,[s,d])=>s.evaluate(c)%d.evaluate(c)],ln2:[Ue,[],()=>Math.LN2],pi:[Ue,[],()=>Math.PI],e:[Ue,[],()=>Math.E],"^":[Ue,[Ue,Ue],(c,[s,d])=>Math.pow(s.evaluate(c),d.evaluate(c))],sqrt:[Ue,[Ue],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[Ue,[Ue],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[Ue,[Ue],(c,[s])=>Math.log(s.evaluate(c))],log2:[Ue,[Ue],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[Ue,[Ue],(c,[s])=>Math.sin(s.evaluate(c))],cos:[Ue,[Ue],(c,[s])=>Math.cos(s.evaluate(c))],tan:[Ue,[Ue],(c,[s])=>Math.tan(s.evaluate(c))],asin:[Ue,[Ue],(c,[s])=>Math.asin(s.evaluate(c))],acos:[Ue,[Ue],(c,[s])=>Math.acos(s.evaluate(c))],atan:[Ue,[Ue],(c,[s])=>Math.atan(s.evaluate(c))],min:[Ue,zl(Ue),(c,s)=>Math.min(...s.map((d=>d.evaluate(c))))],max:[Ue,zl(Ue),(c,s)=>Math.max(...s.map((d=>d.evaluate(c))))],abs:[Ue,[Ue],(c,[s])=>Math.abs(s.evaluate(c))],round:[Ue,[Ue],(c,[s])=>{const d=s.evaluate(c);return d<0?-Math.round(-d):Math.round(d)}],floor:[Ue,[Ue],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[Ue,[Ue],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[wn,[Dn,bn],(c,[s,d])=>c.properties()[s.value]===d.value],"filter-id-==":[wn,[bn],(c,[s])=>c.id()===s.value],"filter-type-==":[wn,[Dn],(c,[s])=>c.geometryType()===s.value],"filter-<":[wn,[Dn,bn],(c,[s,d])=>{const v=c.properties()[s.value],T=d.value;return typeof v==typeof T&&v<T}],"filter-id-<":[wn,[bn],(c,[s])=>{const d=c.id(),v=s.value;return typeof d==typeof v&&d<v}],"filter->":[wn,[Dn,bn],(c,[s,d])=>{const v=c.properties()[s.value],T=d.value;return typeof v==typeof T&&v>T}],"filter-id->":[wn,[bn],(c,[s])=>{const d=c.id(),v=s.value;return typeof d==typeof v&&d>v}],"filter-<=":[wn,[Dn,bn],(c,[s,d])=>{const v=c.properties()[s.value],T=d.value;return typeof v==typeof T&&v<=T}],"filter-id-<=":[wn,[bn],(c,[s])=>{const d=c.id(),v=s.value;return typeof d==typeof v&&d<=v}],"filter->=":[wn,[Dn,bn],(c,[s,d])=>{const v=c.properties()[s.value],T=d.value;return typeof v==typeof T&&v>=T}],"filter-id->=":[wn,[bn],(c,[s])=>{const d=c.id(),v=s.value;return typeof d==typeof v&&d>=v}],"filter-has":[wn,[bn],(c,[s])=>s.value in c.properties()],"filter-has-id":[wn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[wn,[Lt(Dn)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[wn,[Lt(bn)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[wn,[Dn,Lt(bn)],(c,[s,d])=>d.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[wn,[Dn,Lt(bn)],(c,[s,d])=>(function(v,T,P,k){for(;P<=k;){const R=P+k>>1;if(T[R]===v)return!0;T[R]>v?k=R-1:P=R+1}return!1})(c.properties()[s.value],d.value,0,d.value.length-1)],all:{type:wn,overloads:[[[wn,wn],(c,[s,d])=>s.evaluate(c)&&d.evaluate(c)],[zl(wn),(c,s)=>{for(const d of s)if(!d.evaluate(c))return!1;return!0}]]},any:{type:wn,overloads:[[[wn,wn],(c,[s,d])=>s.evaluate(c)||d.evaluate(c)],[zl(wn),(c,s)=>{for(const d of s)if(d.evaluate(c))return!0;return!1}]]},"!":[wn,[wn],(c,[s])=>!s.evaluate(c)],"is-supported-script":[wn,[Dn],(c,[s])=>{const d=c.globals&&c.globals.isSupportedScript;return!d||d(s.evaluate(c))}],upcase:[Dn,[Dn],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[Dn,[Dn],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[Dn,zl(bn),(c,s)=>s.map((d=>ni(d.evaluate(c)))).join("")],"resolved-locale":[Dn,[ba],(c,[s])=>s.evaluate(c).resolvedLocale()]});class au{constructor(s,d){var v;this.expression=s,this._warningHistory={},this._evaluator=new Cs,this._defaultValue=d?(v=d).type==="color"&&vi(v.default)?new Qn(0,0,0,0):v.type==="color"?Qn.parse(v.default)||null:v.type==="padding"?wa.parse(v.default)||null:v.type==="variableAnchorOffsetCollection"?kn.parse(v.default)||null:v.default===void 0?null:v.default:null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(s,d,v,T,P,k){return this._evaluator.globals=s,this._evaluator.feature=d,this._evaluator.featureState=v,this._evaluator.canonical=T,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)}evaluate(s,d,v,T,P,k){this._evaluator.globals=s,this._evaluator.feature=d||null,this._evaluator.featureState=v||null,this._evaluator.canonical=T,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=k||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new zn(`Expected value to be one of ${Object.keys(this._enumValues).map((U=>JSON.stringify(U))).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(R.message)),this._defaultValue}}}function Fu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in sl}function Uu(c,s){const d=new Ci(sl,rl,[],s?(function(T){const P={color:Er,string:Dn,number:Ue,enum:Dn,boolean:wn,formatted:Dt,padding:lt,resolvedImage:ft,variableAnchorOffsetCollection:wt};return T.type==="array"?Lt(P[T.value]||bn,T.length):P[T.type]})(s):void 0),v=d.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Qc(new au(v,s)):no(d.errors)}class Vu{constructor(s,d){this.kind=s,this._styleExpression=d,this.isStateDependent=s!=="constant"&&!Ra(d.expression)}evaluateWithoutErrorHandling(s,d,v,T,P,k){return this._styleExpression.evaluateWithoutErrorHandling(s,d,v,T,P,k)}evaluate(s,d,v,T,P,k){return this._styleExpression.evaluate(s,d,v,T,P,k)}}class zo{constructor(s,d,v,T){this.kind=s,this.zoomStops=v,this._styleExpression=d,this.isStateDependent=s!=="camera"&&!Ra(d.expression),this.interpolationType=T}evaluateWithoutErrorHandling(s,d,v,T,P,k){return this._styleExpression.evaluateWithoutErrorHandling(s,d,v,T,P,k)}evaluate(s,d,v,T,P,k){return this._styleExpression.evaluate(s,d,v,T,P,k)}interpolationFactor(s,d,v){return this.interpolationType?zi.interpolationFactor(this.interpolationType,s,d,v):0}}function ts(c,s){const d=Uu(c,s);if(d.result==="error")return d;const v=d.value.expression,T=Ia(v);if(!T&&!ru(s))return no([new Un("","data expressions not supported")]);const P=to(v,["zoom"]);if(!P&&!Jc(s))return no([new Un("","zoom expressions not supported")]);const k=$u(v);return k||P?k instanceof Un?no([k]):k instanceof zi&&!Sc(s)?no([new Un("",'"interpolate" expressions cannot be used with this property')]):Qc(k?new zo(T?"camera":"composite",d.value,k.labels,k instanceof zi?k.interpolation:void 0):new Vu(T?"constant":"source",d.value)):no([new Un("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class io{constructor(s,d){this._parameters=s,this._specification=d,dr(this,Nn(this._parameters,this._specification))}static deserialize(s){return new io(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function $u(c){let s=null;if(c instanceof Do)s=$u(c.result);else if(c instanceof kl){for(const d of c.args)if(s=$u(d),s)break}else(c instanceof Aa||c instanceof zi)&&c.input instanceof sr&&c.input.name==="zoom"&&(s=c);return s instanceof Un||c.eachChild((d=>{const v=$u(d);v instanceof Un?s=v:!s&&v?s=new Un("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&v&&s!==v&&(s=new Un("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),s}function Na(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!Na(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const tf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function gs(c){if(c==null)return{filter:()=>!0,needGeometry:!1};Na(c)||(c=ol(c));const s=Uu(c,tf);if(s.result==="error")throw new Error(s.value.map((d=>`${d.key}: ${d.message}`)).join(", "));return{filter:(d,v,T)=>s.value.evaluate(d,v,{},T),needGeometry:su(c)}}function qu(c,s){return c<s?-1:c>s?1:0}function su(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let s=1;s<c.length;s++)if(su(c[s]))return!0;return!1}function ol(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?Ll(c[1],c[2],"=="):s==="!="?ro(Ll(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Ll(c[1],c[2],s):s==="any"?(d=c.slice(1),["any"].concat(d.map(ol))):s==="all"?["all"].concat(c.slice(1).map(ol)):s==="none"?["all"].concat(c.slice(1).map(ol).map(ro)):s==="in"?th(c[1],c.slice(2)):s==="!in"?ro(th(c[1],c.slice(2))):s==="has"?zs(c[1]):s==="!has"?ro(zs(c[1])):s!=="within"||c;var d}function Ll(c,s,d){switch(c){case"$type":return[`filter-type-${d}`,s];case"$id":return[`filter-id-${d}`,s];default:return[`filter-${d}`,c,s]}}function th(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some((d=>typeof d!=typeof s[0]))?["filter-in-large",c,["literal",s.sort(qu)]]:["filter-in-small",c,["literal",s]]}}function zs(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function ro(c){return["!",c]}function Hu(c){const s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let T="[";for(const P of c)T+=`${Hu(P)},`;return`${T}]`}const d=Object.keys(c).sort();let v="{";for(let T=0;T<d.length;T++)v+=`${JSON.stringify(d[T])}:${Hu(c[d[T]])},`;return`${v}}`}function Il(c){let s="";for(const d of Di)s+=`/${Hu(c[d])}`;return s}function eh(c){const s=c.value;return s?[new Be(c.key,s,"constants have been deprecated as of v8")]:[]}function ui(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Rl(c){if(Array.isArray(c))return c.map(Rl);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const d in c)s[d]=Rl(c[d]);return s}return ui(c)}function Pr(c){const s=c.key,d=c.value,v=c.valueSpec||{},T=c.objectElementValidators||{},P=c.style,k=c.styleSpec,R=c.validateSpec;let U=[];const G=ti(d);if(G!=="object")return[new Be(s,d,`object expected, ${G} found`)];for(const tt in d){const st=tt.split(".")[0],ct=v[st]||v["*"];let gt;if(T[st])gt=T[st];else if(v[st])gt=R;else if(T["*"])gt=T["*"];else{if(!v["*"]){U.push(new Be(s,d[tt],`unknown property "${tt}"`));continue}gt=R}U=U.concat(gt({key:(s&&`${s}.`)+tt,value:d[tt],valueSpec:ct,style:P,styleSpec:k,object:d,objectKey:tt,validateSpec:R},d))}for(const tt in v)T[tt]||v[tt].required&&v[tt].default===void 0&&d[tt]===void 0&&U.push(new Be(s,d,`missing required property "${tt}"`));return U}function ou(c){const s=c.value,d=c.valueSpec,v=c.style,T=c.styleSpec,P=c.key,k=c.arrayElementValidator||c.validateSpec;if(ti(s)!=="array")return[new Be(P,s,`array expected, ${ti(s)} found`)];if(d.length&&s.length!==d.length)return[new Be(P,s,`array length ${d.length} expected, length ${s.length} found`)];if(d["min-length"]&&s.length<d["min-length"])return[new Be(P,s,`array length at least ${d["min-length"]} expected, length ${s.length} found`)];let R={type:d.value,values:d.values};T.$version<7&&(R.function=d.function),ti(d.value)==="object"&&(R=d.value);let U=[];for(let G=0;G<s.length;G++)U=U.concat(k({array:s,arrayIndex:G,value:s[G],valueSpec:R,validateSpec:c.validateSpec,style:v,styleSpec:T,key:`${P}[${G}]`}));return U}function es(c){const s=c.key,d=c.value,v=c.valueSpec;let T=ti(d);return T==="number"&&d!=d&&(T="NaN"),T!=="number"?[new Be(s,d,`number expected, ${T} found`)]:"minimum"in v&&d<v.minimum?[new Be(s,d,`${d} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&d>v.maximum?[new Be(s,d,`${d} is greater than the maximum value ${v.maximum}`)]:[]}function kr(c){const s=c.valueSpec,d=ui(c.value.type);let v,T,P,k={};const R=d!=="categorical"&&c.value.property===void 0,U=!R,G=ti(c.value.stops)==="array"&&ti(c.value.stops[0])==="array"&&ti(c.value.stops[0][0])==="object",tt=Pr({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(gt){if(d==="identity")return[new Be(gt.key,gt.value,'identity function may not have a "stops" property')];let yt=[];const Ct=gt.value;return yt=yt.concat(ou({key:gt.key,value:Ct,valueSpec:gt.valueSpec,validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec,arrayElementValidator:st})),ti(Ct)==="array"&&Ct.length===0&&yt.push(new Be(gt.key,Ct,"array must have at least one stop")),yt},default:function(gt){return gt.validateSpec({key:gt.key,value:gt.value,valueSpec:s,validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec})}}});return d==="identity"&&R&&tt.push(new Be(c.key,c.value,'missing required property "property"')),d==="identity"||c.value.stops||tt.push(new Be(c.key,c.value,'missing required property "stops"')),d==="exponential"&&c.valueSpec.expression&&!Sc(c.valueSpec)&&tt.push(new Be(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(U&&!ru(c.valueSpec)?tt.push(new Be(c.key,c.value,"property functions not supported")):R&&!Jc(c.valueSpec)&&tt.push(new Be(c.key,c.value,"zoom functions not supported"))),d!=="categorical"&&!G||c.value.property!==void 0||tt.push(new Be(c.key,c.value,'"property" property is required')),tt;function st(gt){let yt=[];const Ct=gt.value,Bt=gt.key;if(ti(Ct)!=="array")return[new Be(Bt,Ct,`array expected, ${ti(Ct)} found`)];if(Ct.length!==2)return[new Be(Bt,Ct,`array length 2 expected, length ${Ct.length} found`)];if(G){if(ti(Ct[0])!=="object")return[new Be(Bt,Ct,`object expected, ${ti(Ct[0])} found`)];if(Ct[0].zoom===void 0)return[new Be(Bt,Ct,"object stop key must have zoom")];if(Ct[0].value===void 0)return[new Be(Bt,Ct,"object stop key must have value")];if(P&&P>ui(Ct[0].zoom))return[new Be(Bt,Ct[0].zoom,"stop zoom values must appear in ascending order")];ui(Ct[0].zoom)!==P&&(P=ui(Ct[0].zoom),T=void 0,k={}),yt=yt.concat(Pr({key:`${Bt}[0]`,value:Ct[0],valueSpec:{zoom:{}},validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec,objectElementValidators:{zoom:es,value:ct}}))}else yt=yt.concat(ct({key:`${Bt}[0]`,value:Ct[0],validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec},Ct));return Fu(Rl(Ct[1]))?yt.concat([new Be(`${Bt}[1]`,Ct[1],"expressions are not allowed in function stops.")]):yt.concat(gt.validateSpec({key:`${Bt}[1]`,value:Ct[1],valueSpec:s,validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec}))}function ct(gt,yt){const Ct=ti(gt.value),Bt=ui(gt.value),Ut=gt.value!==null?gt.value:yt;if(v){if(Ct!==v)return[new Be(gt.key,Ut,`${Ct} stop domain type must match previous stop domain type ${v}`)]}else v=Ct;if(Ct!=="number"&&Ct!=="string"&&Ct!=="boolean")return[new Be(gt.key,Ut,"stop domain value must be a number, string, or boolean")];if(Ct!=="number"&&d!=="categorical"){let Jt=`number expected, ${Ct} found`;return ru(s)&&d===void 0&&(Jt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Be(gt.key,Ut,Jt)]}return d!=="categorical"||Ct!=="number"||isFinite(Bt)&&Math.floor(Bt)===Bt?d!=="categorical"&&Ct==="number"&&T!==void 0&&Bt<T?[new Be(gt.key,Ut,"stop domain values must appear in ascending order")]:(T=Bt,d==="categorical"&&Bt in k?[new Be(gt.key,Ut,"stop domain values must be unique")]:(k[Bt]=!0,[])):[new Be(gt.key,Ut,`integer expected, found ${Bt}`)]}}function ys(c){const s=(c.expressionContext==="property"?ts:Uu)(Rl(c.value),c.valueSpec);if(s.result==="error")return s.value.map((v=>new Be(`${c.key}${v.key}`,c.value,v.message)));const d=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!d.outputDefined())return[new Be(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Ra(d))return[new Be(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Ra(d))return[new Be(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!to(d,["zoom","feature-state"]))return[new Be(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Ia(d))return[new Be(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ll(c){const s=c.key,d=c.value,v=c.valueSpec,T=[];return Array.isArray(v.values)?v.values.indexOf(ui(d))===-1&&T.push(new Be(s,d,`expected one of [${v.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(v.values).indexOf(ui(d))===-1&&T.push(new Be(s,d,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(d)} found`)),T}function ao(c){return Na(Rl(c.value))?ys(dr({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Zu(c)}function Zu(c){const s=c.value,d=c.key;if(ti(s)!=="array")return[new Be(d,s,`array expected, ${ti(s)} found`)];const v=c.styleSpec;let T,P=[];if(s.length<1)return[new Be(d,s,"filter array must have at least 1 element")];switch(P=P.concat(ll({key:`${d}[0]`,value:s[0],valueSpec:v.filter_operator,style:c.style,styleSpec:c.styleSpec})),ui(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&ui(s[1])==="$type"&&P.push(new Be(d,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&P.push(new Be(d,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(T=ti(s[1]),T!=="string"&&P.push(new Be(`${d}[1]`,s[1],`string expected, ${T} found`)));for(let k=2;k<s.length;k++)T=ti(s[k]),ui(s[1])==="$type"?P=P.concat(ll({key:`${d}[${k}]`,value:s[k],valueSpec:v.geometry_type,style:c.style,styleSpec:c.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&P.push(new Be(`${d}[${k}]`,s[k],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let k=1;k<s.length;k++)P=P.concat(Zu({key:`${d}[${k}]`,value:s[k],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":T=ti(s[1]),s.length!==2?P.push(new Be(d,s,`filter array for "${s[0]}" operator must have 2 elements`)):T!=="string"&&P.push(new Be(`${d}[1]`,s[1],`string expected, ${T} found`));break;case"within":T=ti(s[1]),s.length!==2?P.push(new Be(d,s,`filter array for "${s[0]}" operator must have 2 elements`)):T!=="object"&&P.push(new Be(`${d}[1]`,s[1],`object expected, ${T} found`))}return P}function lu(c,s){const d=c.key,v=c.validateSpec,T=c.style,P=c.styleSpec,k=c.value,R=c.objectKey,U=P[`${s}_${c.layerType}`];if(!U)return[];const G=R.match(/^(.*)-transition$/);if(s==="paint"&&G&&U[G[1]]&&U[G[1]].transition)return v({key:d,value:k,valueSpec:P.transition,style:T,styleSpec:P});const tt=c.valueSpec||U[R];if(!tt)return[new Be(d,k,`unknown property "${R}"`)];let st;if(ti(k)==="string"&&ru(tt)&&!tt.tokens&&(st=/^{([^}]+)}$/.exec(k)))return[new Be(d,k,`"${R}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(st[1])} }\`.`)];const ct=[];return c.layerType==="symbol"&&(R==="text-field"&&T&&!T.glyphs&&ct.push(new Be(d,k,'use of "text-field" requires a style "glyphs" property')),R==="text-font"&&vi(Rl(k))&&ui(k.type)==="identity"&&ct.push(new Be(d,k,'"text-font" does not support identity functions'))),ct.concat(v({key:c.key,value:k,valueSpec:tt,style:T,styleSpec:P,expressionContext:"property",propertyType:s,propertyKey:R}))}function Lo(c){return lu(c,"paint")}function Gu(c){return lu(c,"layout")}function Io(c){let s=[];const d=c.value,v=c.key,T=c.style,P=c.styleSpec;d.type||d.ref||s.push(new Be(v,d,'either "type" or "ref" is required'));let k=ui(d.type);const R=ui(d.ref);if(d.id){const U=ui(d.id);for(let G=0;G<c.arrayIndex;G++){const tt=T.layers[G];ui(tt.id)===U&&s.push(new Be(v,d.id,`duplicate layer id "${d.id}", previously used at line ${tt.id.__line__}`))}}if("ref"in d){let U;["type","source","source-layer","filter","layout"].forEach((G=>{G in d&&s.push(new Be(v,d[G],`"${G}" is prohibited for ref layers`))})),T.layers.forEach((G=>{ui(G.id)===R&&(U=G)})),U?U.ref?s.push(new Be(v,d.ref,"ref cannot reference another ref layer")):k=ui(U.type):s.push(new Be(v,d.ref,`ref layer "${R}" not found`))}else if(k!=="background")if(d.source){const U=T.sources&&T.sources[d.source],G=U&&ui(U.type);U?G==="vector"&&k==="raster"?s.push(new Be(v,d.source,`layer "${d.id}" requires a raster source`)):G!=="raster-dem"&&k==="hillshade"?s.push(new Be(v,d.source,`layer "${d.id}" requires a raster-dem source`)):G==="raster"&&k!=="raster"?s.push(new Be(v,d.source,`layer "${d.id}" requires a vector source`)):G!=="vector"||d["source-layer"]?G==="raster-dem"&&k!=="hillshade"?s.push(new Be(v,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):k!=="line"||!d.paint||!d.paint["line-gradient"]||G==="geojson"&&U.lineMetrics||s.push(new Be(v,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Be(v,d,`layer "${d.id}" must specify a "source-layer"`)):s.push(new Be(v,d.source,`source "${d.source}" not found`))}else s.push(new Be(v,d,'missing required property "source"'));return s=s.concat(Pr({key:v,value:d,valueSpec:P.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${v}.type`,value:d.type,valueSpec:P.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:d,objectKey:"type"}),filter:ao,layout:U=>Pr({layer:d,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":G=>Gu(dr({layerType:k},G))}}),paint:U=>Pr({layer:d,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":G=>Lo(dr({layerType:k},G))}})}})),s}function ns(c){const s=c.value,d=c.key,v=ti(s);return v!=="string"?[new Be(d,s,`string expected, ${v} found`)]:[]}const Ro={promoteId:function({key:c,value:s}){if(ti(s)==="string")return ns({key:c,value:s});{const d=[];for(const v in s)d.push(...ns({key:`${c}.${v}`,value:s[v]}));return d}}};function qr(c){const s=c.value,d=c.key,v=c.styleSpec,T=c.style,P=c.validateSpec;if(!s.type)return[new Be(d,s,'"type" is required')];const k=ui(s.type);let R;switch(k){case"vector":case"raster":return R=Pr({key:d,value:s,valueSpec:v[`source_${k.replace("-","_")}`],style:c.style,styleSpec:v,objectElementValidators:Ro,validateSpec:P}),R;case"raster-dem":return R=(function(U){var G;const tt=(G=U.sourceName)!==null&&G!==void 0?G:"",st=U.value,ct=U.styleSpec,gt=ct.source_raster_dem,yt=U.style;let Ct=[];const Bt=ti(st);if(st===void 0)return Ct;if(Bt!=="object")return Ct.push(new Be("source_raster_dem",st,`object expected, ${Bt} found`)),Ct;const Ut=ui(st.encoding)==="custom",Jt=["redFactor","greenFactor","blueFactor","baseShift"],Ht=U.value.encoding?`"${U.value.encoding}"`:"Default";for(const ee in st)!Ut&&Jt.includes(ee)?Ct.push(new Be(ee,st[ee],`In "${tt}": "${ee}" is only valid when "encoding" is set to "custom". ${Ht} encoding found`)):gt[ee]?Ct=Ct.concat(U.validateSpec({key:ee,value:st[ee],valueSpec:gt[ee],validateSpec:U.validateSpec,style:yt,styleSpec:ct})):Ct.push(new Be(ee,st[ee],`unknown property "${ee}"`));return Ct})({sourceName:d,value:s,style:c.style,styleSpec:v,validateSpec:P}),R;case"geojson":if(R=Pr({key:d,value:s,valueSpec:v.source_geojson,style:T,styleSpec:v,validateSpec:P,objectElementValidators:Ro}),s.cluster)for(const U in s.clusterProperties){const[G,tt]=s.clusterProperties[U],st=typeof G=="string"?[G,["accumulated"],["get",U]]:G;R.push(...ys({key:`${d}.${U}.map`,value:tt,expressionContext:"cluster-map"})),R.push(...ys({key:`${d}.${U}.reduce`,value:st,expressionContext:"cluster-reduce"}))}return R;case"video":return Pr({key:d,value:s,valueSpec:v.source_video,style:T,validateSpec:P,styleSpec:v});case"image":return Pr({key:d,value:s,valueSpec:v.source_image,style:T,validateSpec:P,styleSpec:v});case"canvas":return[new Be(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ll({key:`${d}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function uu(c){const s=c.value,d=c.styleSpec,v=d.light,T=c.style;let P=[];const k=ti(s);if(s===void 0)return P;if(k!=="object")return P=P.concat([new Be("light",s,`object expected, ${k} found`)]),P;for(const R in s){const U=R.match(/^(.*)-transition$/);P=P.concat(U&&v[U[1]]&&v[U[1]].transition?c.validateSpec({key:R,value:s[R],valueSpec:d.transition,validateSpec:c.validateSpec,style:T,styleSpec:d}):v[R]?c.validateSpec({key:R,value:s[R],valueSpec:v[R],validateSpec:c.validateSpec,style:T,styleSpec:d}):[new Be(R,s[R],`unknown property "${R}"`)])}return P}function Bo(c){const s=c.value,d=c.styleSpec,v=d.terrain,T=c.style;let P=[];const k=ti(s);if(s===void 0)return P;if(k!=="object")return P=P.concat([new Be("terrain",s,`object expected, ${k} found`)]),P;for(const R in s)P=P.concat(v[R]?c.validateSpec({key:R,value:s[R],valueSpec:v[R],validateSpec:c.validateSpec,style:T,styleSpec:d}):[new Be(R,s[R],`unknown property "${R}"`)]);return P}function Bl(c){let s=[];const d=c.value,v=c.key;if(Array.isArray(d)){const T=[],P=[];for(const k in d)d[k].id&&T.includes(d[k].id)&&s.push(new Be(v,d,`all the sprites' ids must be unique, but ${d[k].id} is duplicated`)),T.push(d[k].id),d[k].url&&P.includes(d[k].url)&&s.push(new Be(v,d,`all the sprites' URLs must be unique, but ${d[k].url} is duplicated`)),P.push(d[k].url),s=s.concat(Pr({key:`${v}[${k}]`,value:d[k],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return ns({key:v,value:d})}const Wu={"*":()=>[],array:ou,boolean:function(c){const s=c.value,d=c.key,v=ti(s);return v!=="boolean"?[new Be(d,s,`boolean expected, ${v} found`)]:[]},number:es,color:function(c){const s=c.key,d=c.value,v=ti(d);return v!=="string"?[new Be(s,d,`color expected, ${v} found`)]:Qn.parse(String(d))?[]:[new Be(s,d,`color expected, "${d}" found`)]},constants:eh,enum:ll,filter:ao,function:kr,layer:Io,object:Pr,source:qr,light:uu,terrain:Bo,string:ns,formatted:function(c){return ns(c).length===0?[]:ys(c)},resolvedImage:function(c){return ns(c).length===0?[]:ys(c)},padding:function(c){const s=c.key,d=c.value;if(ti(d)==="array"){if(d.length<1||d.length>4)return[new Be(s,d,`padding requires 1 to 4 values; ${d.length} values found`)];const v={type:"number"};let T=[];for(let P=0;P<d.length;P++)T=T.concat(c.validateSpec({key:`${s}[${P}]`,value:d[P],validateSpec:c.validateSpec,valueSpec:v}));return T}return es({key:s,value:d,valueSpec:{}})},variableAnchorOffsetCollection:function(c){const s=c.key,d=c.value,v=ti(d),T=c.styleSpec;if(v!=="array"||d.length<1||d.length%2!=0)return[new Be(s,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let P=[];for(let k=0;k<d.length;k+=2)P=P.concat(ll({key:`${s}[${k}]`,value:d[k],valueSpec:T.layout_symbol["text-anchor"]})),P=P.concat(ou({key:`${s}[${k+1}]`,value:d[k+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:T}));return P},sprite:Bl};function No(c){const s=c.value,d=c.valueSpec,v=c.styleSpec;return c.validateSpec=No,d.expression&&vi(ui(s))?kr(c):d.expression&&Fu(Rl(s))?ys(c):d.type&&Wu[d.type]?Wu[d.type](c):Pr(dr({},c,{valueSpec:d.type?v[d.type]:d}))}function Xr(c){const s=c.value,d=c.key,v=ns(c);return v.length||(s.indexOf("{fontstack}")===-1&&v.push(new Be(d,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&v.push(new Be(d,s,'"glyphs" url must include a "{range}" token'))),v}function oa(c,s=_e){let d=[];return d=d.concat(No({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:No,objectElementValidators:{glyphs:Xr,"*":()=>[]}})),c.constants&&(d=d.concat(eh({key:"constants",value:c.constants}))),ul(d)}function so(c){return function(s){return c({...s,validateSpec:No})}}function ul(c){return[].concat(c).sort(((s,d)=>s.line-d.line))}function jo(c){return function(...s){return ul(c.apply(this,s))}}oa.source=jo(so(qr)),oa.sprite=jo(so(Bl)),oa.glyphs=jo(so(Xr)),oa.light=jo(so(uu)),oa.terrain=jo(so(Bo)),oa.layer=jo(so(Io)),oa.filter=jo(so(ao)),oa.paintProperty=jo(so(Lo)),oa.layoutProperty=jo(so(Gu));const oo=oa,Kf=oo.light,cl=oo.paintProperty,nh=oo.layoutProperty;function Ls(c,s){let d=!1;if(s&&s.length)for(const v of s)c.fire(new an(new Error(v.message))),d=!0;return d}class Kr{constructor(s,d,v){const T=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const k=new Int32Array(this.arrayBuffer);s=k[0],this.d=(d=k[1])+2*(v=k[2]);for(let U=0;U<this.d*this.d;U++){const G=k[3+U],tt=k[3+U+1];T.push(G===tt?null:k.subarray(G,tt))}const R=k[3+T.length+1];this.keys=k.subarray(k[3+T.length],R),this.bboxes=k.subarray(R),this.insert=this._insertReadonly}else{this.d=d+2*v;for(let k=0;k<this.d*this.d;k++)T.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=s,this.padding=v,this.scale=d/s,this.uid=0;const P=v/d*s;this.min=-P,this.max=s+P}insert(s,d,v,T,P){this._forEachCell(d,v,T,P,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(T),this.bboxes.push(P)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,d,v,T,P,k){this.cells[P].push(k)}query(s,d,v,T,P){const k=this.min,R=this.max;if(s<=k&&d<=k&&R<=v&&R<=T&&!P)return Array.prototype.slice.call(this.keys);{const U=[];return this._forEachCell(s,d,v,T,this._queryCell,U,{},P),U}}_queryCell(s,d,v,T,P,k,R,U){const G=this.cells[P];if(G!==null){const tt=this.keys,st=this.bboxes;for(let ct=0;ct<G.length;ct++){const gt=G[ct];if(R[gt]===void 0){const yt=4*gt;(U?U(st[yt+0],st[yt+1],st[yt+2],st[yt+3]):s<=st[yt+2]&&d<=st[yt+3]&&v>=st[yt+0]&&T>=st[yt+1])?(R[gt]=!0,k.push(tt[gt])):R[gt]=!1}}}}_forEachCell(s,d,v,T,P,k,R,U){const G=this._convertToCellCoord(s),tt=this._convertToCellCoord(d),st=this._convertToCellCoord(v),ct=this._convertToCellCoord(T);for(let gt=G;gt<=st;gt++)for(let yt=tt;yt<=ct;yt++){const Ct=this.d*yt+gt;if((!U||U(this._convertFromCellCoord(gt),this._convertFromCellCoord(yt),this._convertFromCellCoord(gt+1),this._convertFromCellCoord(yt+1)))&&P.call(this,s,d,v,T,Ct,k,R,U))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,d=3+this.cells.length+1+1;let v=0;for(let k=0;k<this.cells.length;k++)v+=this.cells[k].length;const T=new Int32Array(d+v+this.keys.length+this.bboxes.length);T[0]=this.extent,T[1]=this.n,T[2]=this.padding;let P=d;for(let k=0;k<s.length;k++){const R=s[k];T[3+k]=P,T.set(R,P),P+=R.length}return T[3+s.length]=P,T.set(this.keys,P),P+=this.keys.length,T[3+s.length+1]=P,T.set(this.bboxes,P),P+=this.bboxes.length,T.buffer}static serialize(s,d){const v=s.toArrayBuffer();return d&&d.push(v),{buffer:v}}static deserialize(s){return new Kr(s.buffer)}}const is={};function Ze(c,s,d={}){if(is[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),is[c]={klass:s,omit:d.omit||[],shallow:d.shallow||[]}}Ze("Object",Object),Ze("TransferableGridIndex",Kr),Ze("Color",Qn),Ze("Error",Error),Ze("AJAXError",Ie),Ze("ResolvedImage",Rn),Ze("StylePropertyFunction",io),Ze("StyleExpression",au,{omit:["_evaluator"]}),Ze("ZoomDependentExpression",zo),Ze("ZoomConstantExpression",Vu),Ze("CompoundExpression",sr,{omit:["_evaluate"]});for(const c in sl)sl[c]._classRegistryKey||Ze(`Expression_${c}`,sl[c]);function Qr(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Is(c,s){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(Qr(c)||jt(c))return s&&s.push(c),c;if(ArrayBuffer.isView(c)){const d=c;return s&&s.push(d.buffer),d}if(c instanceof ImageData)return s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const d=[];for(const v of c)d.push(Is(v,s));return d}if(typeof c=="object"){const d=c.constructor,v=d._classRegistryKey;if(!v)throw new Error("can't serialize object of unregistered class");if(!is[v])throw new Error(`${v} is not registered.`);const T=d.serialize?d.serialize(c,s):{};if(d.serialize){if(s&&T===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const P in c){if(!c.hasOwnProperty(P)||is[v].omit.indexOf(P)>=0)continue;const k=c[P];T[P]=is[v].shallow.indexOf(P)>=0?k:Is(k,s)}c instanceof Error&&(T.message=c.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return v!=="Object"&&(T.$name=v),T}throw new Error("can't serialize object of type "+typeof c)}function lo(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||Qr(c)||jt(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(lo);if(typeof c=="object"){const s=c.$name||"Object";if(!is[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:d}=is[s];if(!d)throw new Error(`can't deserialize unregistered class ${s}`);if(d.deserialize)return d.deserialize(c);const v=Object.create(d.prototype);for(const T of Object.keys(c)){if(T==="$name")continue;const P=c[T];v[T]=is[s].shallow.indexOf(T)>=0?P:lo(P)}return v}throw new Error("can't deserialize object of type "+typeof c)}class Fo{constructor(){this.first=!0}update(s,d){const v=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=d),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=v,!0))}}const Ye={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function _s(c){for(const s of c)if(Uo(s.charCodeAt(0)))return!0;return!1}function hl(c){for(const s of c)if(!Yu(s.charCodeAt(0)))return!1;return!0}function Yu(c){return!(Ye.Arabic(c)||Ye["Arabic Supplement"](c)||Ye["Arabic Extended-A"](c)||Ye["Arabic Presentation Forms-A"](c)||Ye["Arabic Presentation Forms-B"](c))}function Uo(c){return!(c!==746&&c!==747&&(c<4352||!(Ye["Bopomofo Extended"](c)||Ye.Bopomofo(c)||Ye["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Ye["CJK Compatibility Ideographs"](c)||Ye["CJK Compatibility"](c)||Ye["CJK Radicals Supplement"](c)||Ye["CJK Strokes"](c)||!(!Ye["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Ye["CJK Unified Ideographs Extension A"](c)||Ye["CJK Unified Ideographs"](c)||Ye["Enclosed CJK Letters and Months"](c)||Ye["Hangul Compatibility Jamo"](c)||Ye["Hangul Jamo Extended-A"](c)||Ye["Hangul Jamo Extended-B"](c)||Ye["Hangul Jamo"](c)||Ye["Hangul Syllables"](c)||Ye.Hiragana(c)||Ye["Ideographic Description Characters"](c)||Ye.Kanbun(c)||Ye["Kangxi Radicals"](c)||Ye["Katakana Phonetic Extensions"](c)||Ye.Katakana(c)&&c!==12540||!(!Ye["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Ye["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Ye["Unified Canadian Aboriginal Syllabics"](c)||Ye["Unified Canadian Aboriginal Syllabics Extended"](c)||Ye["Vertical Forms"](c)||Ye["Yijing Hexagram Symbols"](c)||Ye["Yi Syllables"](c)||Ye["Yi Radicals"](c))))}function ef(c){return!(Uo(c)||(function(s){return!!(Ye["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Ye["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Ye["Letterlike Symbols"](s)||Ye["Number Forms"](s)||Ye["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Ye["Control Pictures"](s)&&s!==9251||Ye["Optical Character Recognition"](s)||Ye["Enclosed Alphanumerics"](s)||Ye["Geometric Shapes"](s)||Ye["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Ye["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Ye["CJK Symbols and Punctuation"](s)||Ye.Katakana(s)||Ye["Private Use Area"](s)||Ye["CJK Compatibility Forms"](s)||Ye["Small Form Variants"](s)||Ye["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)})(c))}function Ma(c){return c>=1424&&c<=2303||Ye["Arabic Presentation Forms-A"](c)||Ye["Arabic Presentation Forms-B"](c)}function Xu(c,s){return!(!s&&Ma(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Ye.Khmer(c))}function uo(c){for(const s of c)if(Ma(s.charCodeAt(0)))return!0;return!1}const Ku="deferred",Nl="loading",Vo="loaded";let cu=null,la="unavailable",co=null;const p=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(la="error"),cu&&cu(c)};function w(){D.fire(new Tn("pluginStateChange",{pluginStatus:la,pluginURL:co}))}const D=new In,$=function(){return la},nt=function(){if(la!==Ku||!co)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");la=Nl,w(),co&&rn({url:co},(c=>{c?p(c):(la=Vo,w())}))},mt={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>la===Vo||mt.applyArabicShaping!=null,isLoading:()=>la===Nl,setState(c){if(!Ot())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");la=c.pluginStatus,co=c.pluginURL},isParsed(){if(!Ot())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return mt.applyArabicShaping!=null&&mt.processBidirectionalText!=null&&mt.processStyledBidirectionalText!=null},getPluginURL(){if(!Ot())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return co}};class Rt{constructor(s,d){this.zoom=s,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Fo,this.transition={})}isSupportedScript(s){return(function(d,v){for(const T of d)if(!Xu(T.charCodeAt(0),v))return!1;return!0})(s,mt.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,d=s-Math.floor(s),v=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*d}}}class ae{constructor(s,d){this.property=s,this.value=d,this.expression=(function(v,T){if(vi(v))return new io(v,T);if(Fu(v)){const P=ts(v,T);if(P.result==="error")throw new Error(P.value.map((k=>`${k.key}: ${k.message}`)).join(", "));return P.value}{let P=v;return T.type==="color"&&typeof v=="string"?P=Qn.parse(v):T.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?T.type==="variableAnchorOffsetCollection"&&Array.isArray(v)&&(P=kn.parse(v)):P=wa.parse(v),{kind:"constant",evaluate:()=>P}}})(d===void 0?s.specification.default:d,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,d,v){return this.property.possiblyEvaluate(this,s,d,v)}}class pe{constructor(s){this.property=s,this.value=new ae(s,void 0)}transitioned(s,d){return new Ke(this.property,this.value,d,rt({},s.transition,this.transition),s.now)}untransitioned(){return new Ke(this.property,this.value,null,{},0)}}class Oe{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return Pt(this._values[s].value.value)}setValue(s,d){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new pe(this._values[s].property)),this._values[s].value=new ae(this._values[s].property,d===null?void 0:Pt(d))}getTransition(s){return Pt(this._values[s].transition)}setTransition(s,d){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new pe(this._values[s].property)),this._values[s].transition=Pt(d)||void 0}serialize(){const s={};for(const d of Object.keys(this._values)){const v=this.getValue(d);v!==void 0&&(s[d]=v);const T=this.getTransition(d);T!==void 0&&(s[`${d}-transition`]=T)}return s}transitioned(s,d){const v=new yn(this._properties);for(const T of Object.keys(this._values))v._values[T]=this._values[T].transitioned(s,d._values[T]);return v}untransitioned(){const s=new yn(this._properties);for(const d of Object.keys(this._values))s._values[d]=this._values[d].untransitioned();return s}}class Ke{constructor(s,d,v,T,P){this.property=s,this.value=d,this.begin=P+T.delay||0,this.end=this.begin+T.duration||0,s.specification.transition&&(T.delay||T.duration)&&(this.prior=v)}possiblyEvaluate(s,d,v){const T=s.now||0,P=this.value.possiblyEvaluate(s,d,v),k=this.prior;if(k){if(T>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(T<this.begin)return k.possiblyEvaluate(s,d,v);{const R=(T-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(s,d,v),P,(function(U){if(U<=0)return 0;if(U>=1)return 1;const G=U*U,tt=G*U;return 4*(U<.5?tt:3*(U-G)+tt-.75)})(R))}}return P}}class yn{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,d,v){const T=new tr(this._properties);for(const P of Object.keys(this._values))T._values[P]=this._values[P].possiblyEvaluate(s,d,v);return T}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class $n{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return Pt(this._values[s].value)}setValue(s,d){this._values[s]=new ae(this._values[s].property,d===null?void 0:Pt(d))}serialize(){const s={};for(const d of Object.keys(this._values)){const v=this.getValue(d);v!==void 0&&(s[d]=v)}return s}possiblyEvaluate(s,d,v){const T=new tr(this._properties);for(const P of Object.keys(this._values))T._values[P]=this._values[P].possiblyEvaluate(s,d,v);return T}}class ci{constructor(s,d,v){this.property=s,this.value=d,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,d,v,T){return this.property.evaluate(this.value,this.parameters,s,d,v,T)}}class tr{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Qe{constructor(s){this.specification=s}possiblyEvaluate(s,d){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(d)}interpolate(s,d,v){const T=Ba[this.specification.type];return T?T(s,d,v):s}}class Ge{constructor(s,d){this.specification=s,this.overrides=d}possiblyEvaluate(s,d,v,T){return new ci(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(d,null,{},v,T)}:s.expression,d)}interpolate(s,d,v){if(s.value.kind!=="constant"||d.value.kind!=="constant")return s;if(s.value.value===void 0||d.value.value===void 0)return new ci(this,{kind:"constant",value:void 0},s.parameters);const T=Ba[this.specification.type];if(T){const P=T(s.value.value,d.value.value,v);return new ci(this,{kind:"constant",value:P},s.parameters)}return s}evaluate(s,d,v,T,P,k){return s.kind==="constant"?s.value:s.evaluate(d,v,T,P,k)}}class ri extends Ge{possiblyEvaluate(s,d,v,T){if(s.value===void 0)return new ci(this,{kind:"constant",value:void 0},d);if(s.expression.kind==="constant"){const P=s.expression.evaluate(d,null,{},v,T),k=s.property.specification.type==="resolvedImage"&&typeof P!="string"?P.name:P,R=this._calculate(k,k,k,d);return new ci(this,{kind:"constant",value:R},d)}if(s.expression.kind==="camera"){const P=this._calculate(s.expression.evaluate({zoom:d.zoom-1}),s.expression.evaluate({zoom:d.zoom}),s.expression.evaluate({zoom:d.zoom+1}),d);return new ci(this,{kind:"constant",value:P},d)}return new ci(this,s.expression,d)}evaluate(s,d,v,T,P,k){if(s.kind==="source"){const R=s.evaluate(d,v,T,P,k);return this._calculate(R,R,R,d)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(d.zoom)-1},v,T),s.evaluate({zoom:Math.floor(d.zoom)},v,T),s.evaluate({zoom:Math.floor(d.zoom)+1},v,T),d):s.value}_calculate(s,d,v,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:s,to:d}:{from:v,to:d}}interpolate(s){return s}}class Xn{constructor(s){this.specification=s}possiblyEvaluate(s,d,v,T){if(s.value!==void 0){if(s.expression.kind==="constant"){const P=s.expression.evaluate(d,null,{},v,T);return this._calculate(P,P,P,d)}return this._calculate(s.expression.evaluate(new Rt(Math.floor(d.zoom-1),d)),s.expression.evaluate(new Rt(Math.floor(d.zoom),d)),s.expression.evaluate(new Rt(Math.floor(d.zoom+1),d)),d)}}_calculate(s,d,v,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:s,to:d}:{from:v,to:d}}interpolate(s){return s}}class ho{constructor(s){this.specification=s}possiblyEvaluate(s,d,v,T){return!!s.expression.evaluate(d,null,{},v,T)}interpolate(){return!1}}class oi{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in s){const v=s[d];v.specification.overridable&&this.overridableProperties.push(d);const T=this.defaultPropertyValues[d]=new ae(v,void 0),P=this.defaultTransitionablePropertyValues[d]=new pe(v);this.defaultTransitioningPropertyValues[d]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=T.possiblyEvaluate({})}}}Ze("DataDrivenProperty",Ge),Ze("DataConstantProperty",Qe),Ze("CrossFadedDataDrivenProperty",ri),Ze("CrossFadedProperty",Xn),Ze("ColorRampProperty",ho);const hu="-transition";class Or extends In{constructor(s,d){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),d.layout&&(this._unevaluatedLayout=new $n(d.layout)),d.paint)){this._transitionablePaint=new Oe(d.paint);for(const v in s.paint)this.setPaintProperty(v,s.paint[v],{validate:!1});for(const v in s.layout)this.setLayoutProperty(v,s.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tr(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,d,v={}){d!=null&&this._validate(nh,`layers.${this.id}.layout.${s}`,s,d,v)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,d):this.visibility=d)}getPaintProperty(s){return s.endsWith(hu)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,d,v={}){if(d!=null&&this._validate(cl,`layers.${this.id}.paint.${s}`,s,d,v))return!1;if(s.endsWith(hu))return this._transitionablePaint.setTransition(s.slice(0,-11),d||void 0),!1;{const T=this._transitionablePaint._values[s],P=T.property.specification["property-type"]==="cross-faded-data-driven",k=T.value.isDataDriven(),R=T.value;this._transitionablePaint.setValue(s,d),this._handleSpecialPaintPropertyUpdate(s);const U=this._transitionablePaint._values[s].value;return U.isDataDriven()||k||P||this._handleOverridablePaintPropertyUpdate(s,R,U)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,d,v){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,d){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,d)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),bt(s,((d,v)=>!(d===void 0||v==="layout"&&!Object.keys(d).length||v==="paint"&&!Object.keys(d).length)))}_validate(s,d,v,T,P={}){return(!P||P.validate!==!1)&&Ls(this,s.call(oo,{key:d,layerType:this.type,objectKey:v,value:T,styleSpec:_e,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const d=this.paint.get(s);if(d instanceof ci&&ru(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const Tc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ii{constructor(s,d){this._structArray=s,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class hi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,d){return s._trim(),d&&(s.isTransferred=!0,d.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const d=Object.create(this.prototype);return d.arrayBuffer=s.arrayBuffer,d.length=s.length,d.capacity=s.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function bi(c,s=1){let d=0,v=0;return{members:c.map((T=>{const P=Tc[T.type].BYTES_PER_ELEMENT,k=d=fl(d,Math.max(s,P)),R=T.components||1;return v=Math.max(v,P),d+=P*R,{name:T.name,type:T.type,components:R,offset:k}})),size:fl(d,Math.max(v,s)),alignment:s}}function fl(c,s){return Math.ceil(c/s)*s}class $o extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d){const v=this.length;return this.resize(v+1),this.emplace(v,s,d)}emplace(s,d,v){const T=2*s;return this.int16[T+0]=d,this.int16[T+1]=v,s}}$o.prototype.bytesPerElement=4,Ze("StructArrayLayout2i4",$o);class qo extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,s,d,v)}emplace(s,d,v,T){const P=3*s;return this.int16[P+0]=d,this.int16[P+1]=v,this.int16[P+2]=T,s}}qo.prototype.bytesPerElement=6,Ze("StructArrayLayout3i6",qo);class ja extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v,T){const P=this.length;return this.resize(P+1),this.emplace(P,s,d,v,T)}emplace(s,d,v,T,P){const k=4*s;return this.int16[k+0]=d,this.int16[k+1]=v,this.int16[k+2]=T,this.int16[k+3]=P,s}}ja.prototype.bytesPerElement=8,Ze("StructArrayLayout4i8",ja);class Rs extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k){const R=this.length;return this.resize(R+1),this.emplace(R,s,d,v,T,P,k)}emplace(s,d,v,T,P,k,R){const U=6*s;return this.int16[U+0]=d,this.int16[U+1]=v,this.int16[U+2]=T,this.int16[U+3]=P,this.int16[U+4]=k,this.int16[U+5]=R,s}}Rs.prototype.bytesPerElement=12,Ze("StructArrayLayout2i4i12",Rs);class dl extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k){const R=this.length;return this.resize(R+1),this.emplace(R,s,d,v,T,P,k)}emplace(s,d,v,T,P,k,R){const U=4*s,G=8*s;return this.int16[U+0]=d,this.int16[U+1]=v,this.uint8[G+4]=T,this.uint8[G+5]=P,this.uint8[G+6]=k,this.uint8[G+7]=R,s}}dl.prototype.bytesPerElement=8,Ze("StructArrayLayout2i4ub8",dl);class vs extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d){const v=this.length;return this.resize(v+1),this.emplace(v,s,d)}emplace(s,d,v){const T=2*s;return this.float32[T+0]=d,this.float32[T+1]=v,s}}vs.prototype.bytesPerElement=8,Ze("StructArrayLayout2f8",vs);class ih extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k,R,U,G,tt){const st=this.length;return this.resize(st+1),this.emplace(st,s,d,v,T,P,k,R,U,G,tt)}emplace(s,d,v,T,P,k,R,U,G,tt,st){const ct=10*s;return this.uint16[ct+0]=d,this.uint16[ct+1]=v,this.uint16[ct+2]=T,this.uint16[ct+3]=P,this.uint16[ct+4]=k,this.uint16[ct+5]=R,this.uint16[ct+6]=U,this.uint16[ct+7]=G,this.uint16[ct+8]=tt,this.uint16[ct+9]=st,s}}ih.prototype.bytesPerElement=20,Ze("StructArrayLayout10ui20",ih);class rh extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k,R,U,G,tt,st,ct){const gt=this.length;return this.resize(gt+1),this.emplace(gt,s,d,v,T,P,k,R,U,G,tt,st,ct)}emplace(s,d,v,T,P,k,R,U,G,tt,st,ct,gt){const yt=12*s;return this.int16[yt+0]=d,this.int16[yt+1]=v,this.int16[yt+2]=T,this.int16[yt+3]=P,this.uint16[yt+4]=k,this.uint16[yt+5]=R,this.uint16[yt+6]=U,this.uint16[yt+7]=G,this.int16[yt+8]=tt,this.int16[yt+9]=st,this.int16[yt+10]=ct,this.int16[yt+11]=gt,s}}rh.prototype.bytesPerElement=24,Ze("StructArrayLayout4i4ui4i24",rh);class ei extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,s,d,v)}emplace(s,d,v,T){const P=3*s;return this.float32[P+0]=d,this.float32[P+1]=v,this.float32[P+2]=T,s}}ei.prototype.bytesPerElement=12,Ze("StructArrayLayout3f12",ei);class E extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const d=this.length;return this.resize(d+1),this.emplace(d,s)}emplace(s,d){return this.uint32[1*s+0]=d,s}}E.prototype.bytesPerElement=4,Ze("StructArrayLayout1ul4",E);class u extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k,R,U,G){const tt=this.length;return this.resize(tt+1),this.emplace(tt,s,d,v,T,P,k,R,U,G)}emplace(s,d,v,T,P,k,R,U,G,tt){const st=10*s,ct=5*s;return this.int16[st+0]=d,this.int16[st+1]=v,this.int16[st+2]=T,this.int16[st+3]=P,this.int16[st+4]=k,this.int16[st+5]=R,this.uint32[ct+3]=U,this.uint16[st+8]=G,this.uint16[st+9]=tt,s}}u.prototype.bytesPerElement=20,Ze("StructArrayLayout6i1ul2ui20",u);class m extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k){const R=this.length;return this.resize(R+1),this.emplace(R,s,d,v,T,P,k)}emplace(s,d,v,T,P,k,R){const U=6*s;return this.int16[U+0]=d,this.int16[U+1]=v,this.int16[U+2]=T,this.int16[U+3]=P,this.int16[U+4]=k,this.int16[U+5]=R,s}}m.prototype.bytesPerElement=12,Ze("StructArrayLayout2i2i2i12",m);class b extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P){const k=this.length;return this.resize(k+1),this.emplace(k,s,d,v,T,P)}emplace(s,d,v,T,P,k){const R=4*s,U=8*s;return this.float32[R+0]=d,this.float32[R+1]=v,this.float32[R+2]=T,this.int16[U+6]=P,this.int16[U+7]=k,s}}b.prototype.bytesPerElement=16,Ze("StructArrayLayout2f1f2i16",b);class A extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v,T){const P=this.length;return this.resize(P+1),this.emplace(P,s,d,v,T)}emplace(s,d,v,T,P){const k=12*s,R=3*s;return this.uint8[k+0]=d,this.uint8[k+1]=v,this.float32[R+1]=T,this.float32[R+2]=P,s}}A.prototype.bytesPerElement=12,Ze("StructArrayLayout2ub2f12",A);class C extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,s,d,v)}emplace(s,d,v,T){const P=3*s;return this.uint16[P+0]=d,this.uint16[P+1]=v,this.uint16[P+2]=T,s}}C.prototype.bytesPerElement=6,Ze("StructArrayLayout3ui6",C);class B extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k,R,U,G,tt,st,ct,gt,yt,Ct,Bt,Ut){const Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,s,d,v,T,P,k,R,U,G,tt,st,ct,gt,yt,Ct,Bt,Ut)}emplace(s,d,v,T,P,k,R,U,G,tt,st,ct,gt,yt,Ct,Bt,Ut,Jt){const Ht=24*s,ee=12*s,ne=48*s;return this.int16[Ht+0]=d,this.int16[Ht+1]=v,this.uint16[Ht+2]=T,this.uint16[Ht+3]=P,this.uint32[ee+2]=k,this.uint32[ee+3]=R,this.uint32[ee+4]=U,this.uint16[Ht+10]=G,this.uint16[Ht+11]=tt,this.uint16[Ht+12]=st,this.float32[ee+7]=ct,this.float32[ee+8]=gt,this.uint8[ne+36]=yt,this.uint8[ne+37]=Ct,this.uint8[ne+38]=Bt,this.uint32[ee+10]=Ut,this.int16[Ht+22]=Jt,s}}B.prototype.bytesPerElement=48,Ze("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",B);class j extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v,T,P,k,R,U,G,tt,st,ct,gt,yt,Ct,Bt,Ut,Jt,Ht,ee,ne,Me,Fe,ln,Xe,We,Ve,en){const qe=this.length;return this.resize(qe+1),this.emplace(qe,s,d,v,T,P,k,R,U,G,tt,st,ct,gt,yt,Ct,Bt,Ut,Jt,Ht,ee,ne,Me,Fe,ln,Xe,We,Ve,en)}emplace(s,d,v,T,P,k,R,U,G,tt,st,ct,gt,yt,Ct,Bt,Ut,Jt,Ht,ee,ne,Me,Fe,ln,Xe,We,Ve,en,qe){const Re=32*s,pn=16*s;return this.int16[Re+0]=d,this.int16[Re+1]=v,this.int16[Re+2]=T,this.int16[Re+3]=P,this.int16[Re+4]=k,this.int16[Re+5]=R,this.int16[Re+6]=U,this.int16[Re+7]=G,this.uint16[Re+8]=tt,this.uint16[Re+9]=st,this.uint16[Re+10]=ct,this.uint16[Re+11]=gt,this.uint16[Re+12]=yt,this.uint16[Re+13]=Ct,this.uint16[Re+14]=Bt,this.uint16[Re+15]=Ut,this.uint16[Re+16]=Jt,this.uint16[Re+17]=Ht,this.uint16[Re+18]=ee,this.uint16[Re+19]=ne,this.uint16[Re+20]=Me,this.uint16[Re+21]=Fe,this.uint16[Re+22]=ln,this.uint32[pn+12]=Xe,this.float32[pn+13]=We,this.float32[pn+14]=Ve,this.uint16[Re+30]=en,this.uint16[Re+31]=qe,s}}j.prototype.bytesPerElement=64,Ze("StructArrayLayout8i15ui1ul2f2ui64",j);class q extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const d=this.length;return this.resize(d+1),this.emplace(d,s)}emplace(s,d){return this.float32[1*s+0]=d,s}}q.prototype.bytesPerElement=4,Ze("StructArrayLayout1f4",q);class K extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,s,d,v)}emplace(s,d,v,T){const P=3*s;return this.uint16[6*s+0]=d,this.float32[P+1]=v,this.float32[P+2]=T,s}}K.prototype.bytesPerElement=12,Ze("StructArrayLayout1ui2f12",K);class et extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,s,d,v)}emplace(s,d,v,T){const P=4*s;return this.uint32[2*s+0]=d,this.uint16[P+2]=v,this.uint16[P+3]=T,s}}et.prototype.bytesPerElement=8,Ze("StructArrayLayout1ul2ui8",et);class it extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,d){const v=this.length;return this.resize(v+1),this.emplace(v,s,d)}emplace(s,d,v){const T=2*s;return this.uint16[T+0]=d,this.uint16[T+1]=v,s}}it.prototype.bytesPerElement=4,Ze("StructArrayLayout2ui4",it);class dt extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const d=this.length;return this.resize(d+1),this.emplace(d,s)}emplace(s,d){return this.uint16[1*s+0]=d,s}}dt.prototype.bytesPerElement=2,Ze("StructArrayLayout1ui2",dt);class Et extends hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,d,v,T){const P=this.length;return this.resize(P+1),this.emplace(P,s,d,v,T)}emplace(s,d,v,T,P){const k=4*s;return this.float32[k+0]=d,this.float32[k+1]=v,this.float32[k+2]=T,this.float32[k+3]=P,s}}Et.prototype.bytesPerElement=16,Ze("StructArrayLayout4f16",Et);class Mt extends Ii{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new O(this.anchorPointX,this.anchorPointY)}}Mt.prototype.size=20;class zt extends u{get(s){return new Mt(this,s)}}Ze("CollisionBoxArray",zt);class At extends Ii{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}At.prototype.size=48;class Gt extends B{get(s){return new At(this,s)}}Ze("PlacedSymbolArray",Gt);class ue extends Ii{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ue.prototype.size=64;class Nt extends j{get(s){return new ue(this,s)}}Ze("SymbolInstanceArray",Nt);class Kt extends q{getoffsetX(s){return this.float32[1*s+0]}}Ze("GlyphOffsetArray",Kt);class he extends qo{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Ze("SymbolLineVertexArray",he);class me extends Ii{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}me.prototype.size=12;class Se extends K{get(s){return new me(this,s)}}Ze("TextAnchorOffsetArray",Se);class Le extends Ii{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Le.prototype.size=8;class ke extends et{get(s){return new Le(this,s)}}Ze("FeatureIndexArray",ke);class Ne extends $o{}class sn extends $o{}class qn extends $o{}class $e extends Rs{}class fn extends dl{}class on extends vs{}class Ei extends ih{}class Ln extends rh{}class Pn extends ei{}class Fn extends E{}class Yi extends m{}class Pi extends A{}class ua extends C{}class er extends it{}const Sr=bi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Hr}=Sr;class ji{constructor(s=[]){this.segments=s}prepareSegment(s,d,v,T){let P=this.segments[this.segments.length-1];return s>ji.MAX_VERTEX_ARRAY_LENGTH&&ye(`Max vertices per segment is ${ji.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!P||P.vertexLength+s>ji.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==T)&&(P={vertexOffset:d.length,primitiveOffset:v.length,vertexLength:0,primitiveLength:0},T!==void 0&&(P.sortKey=T),this.segments.push(P)),P}get(){return this.segments}destroy(){for(const s of this.segments)for(const d in s.vaos)s.vaos[d].destroy()}static simpleSegment(s,d,v,T){return new ji([{vertexOffset:s,primitiveOffset:d,vertexLength:v,primitiveLength:T,vaos:{},sortKey:0}])}}function fo(c,s){return 256*(c=ot(Math.floor(c),0,255))+ot(Math.floor(s),0,255)}ji.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ze("SegmentVector",ji);const Ea=bi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var rs={exports:{}},Ho={exports:{}};Ho.exports=function(c,s){var d,v,T,P,k,R,U,G;for(v=c.length-(d=3&c.length),T=s,k=3432918353,R=461845907,G=0;G<v;)U=255&c.charCodeAt(G)|(255&c.charCodeAt(++G))<<8|(255&c.charCodeAt(++G))<<16|(255&c.charCodeAt(++G))<<24,++G,T=27492+(65535&(P=5*(65535&(T=(T^=U=(65535&(U=(U=(65535&U)*k+(((U>>>16)*k&65535)<<16)&4294967295)<<15|U>>>17))*R+(((U>>>16)*R&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(P>>>16)&65535)<<16);switch(U=0,d){case 3:U^=(255&c.charCodeAt(G+2))<<16;case 2:U^=(255&c.charCodeAt(G+1))<<8;case 1:T^=U=(65535&(U=(U=(65535&(U^=255&c.charCodeAt(G)))*k+(((U>>>16)*k&65535)<<16)&4294967295)<<15|U>>>17))*R+(((U>>>16)*R&65535)<<16)&4294967295}return T^=c.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0};var fu=Ho.exports,ca={exports:{}};ca.exports=function(c,s){for(var d,v=c.length,T=s^v,P=0;v>=4;)d=1540483477*(65535&(d=255&c.charCodeAt(P)|(255&c.charCodeAt(++P))<<8|(255&c.charCodeAt(++P))<<16|(255&c.charCodeAt(++P))<<24))+((1540483477*(d>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),v-=4,++P;switch(v){case 3:T^=(255&c.charCodeAt(P+2))<<16;case 2:T^=(255&c.charCodeAt(P+1))<<8;case 1:T=1540483477*(65535&(T^=255&c.charCodeAt(P)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0};var Dr=fu,Jr=ca.exports;rs.exports=Dr,rs.exports.murmur3=Dr,rs.exports.murmur2=Jr;var du=_(rs.exports);class mr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,d,v,T){this.ids.push(or(s)),this.positions.push(d,v,T)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=or(s);let v=0,T=this.ids.length-1;for(;v<T;){const k=v+T>>1;this.ids[k]>=d?T=k:v=k+1}const P=[];for(;this.ids[v]===d;)P.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return P}static serialize(s,d){const v=new Float64Array(s.ids),T=new Uint32Array(s.positions);return Ca(v,T,0,v.length-1),d&&d.push(v.buffer,T.buffer),{ids:v,positions:T}}static deserialize(s){const d=new mr;return d.ids=s.ids,d.positions=s.positions,d.indexed=!0,d}}function or(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:du(String(c))}function Ca(c,s,d,v){for(;d<v;){const T=c[d+v>>1];let P=d-1,k=v+1;for(;;){do P++;while(c[P]<T);do k--;while(c[k]>T);if(P>=k)break;gr(c,P,k),gr(s,3*P,3*k),gr(s,3*P+1,3*k+1),gr(s,3*P+2,3*k+2)}k-d<v-k?(Ca(c,s,d,k),d=k+1):(Ca(c,s,k+1,v),v=k)}}function gr(c,s,d){const v=c[s];c[s]=c[d],c[d]=v}Ze("FeaturePositionMap",mr);class jl{constructor(s,d){this.gl=s.gl,this.location=d}}class Ac extends jl{constructor(s,d){super(s,d),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class xs extends jl{constructor(s,d){super(s,d),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class Bs extends jl{constructor(s,d){super(s,d),this.current=Qn.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const pu=new Float32Array(16);function ah(c){return[fo(255*c.r,255*c.g),fo(255*c.b,255*c.a)]}class Zo{constructor(s,d,v){this.value=s,this.uniformNames=d.map((T=>`u_${T}`)),this.type=v}setUniform(s,d,v){s.set(v.constantOr(this.value))}getBinding(s,d,v){return this.type==="color"?new Bs(s,d):new Ac(s,d)}}class bs{constructor(s,d){this.uniformNames=d.map((v=>`u_${v}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=s.tlbr}setUniform(s,d,v,T){const P=T==="u_pattern_to"?this.patternTo:T==="u_pattern_from"?this.patternFrom:T==="u_pixel_ratio_to"?this.pixelRatioTo:T==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&s.set(P)}getBinding(s,d,v){return v.substr(0,9)==="u_pattern"?new xs(s,d):new Ac(s,d)}}class Tr{constructor(s,d,v,T){this.expression=s,this.type=v,this.maxValue=0,this.paintVertexAttributes=d.map((P=>({name:`a_${P}`,type:"Float32",components:v==="color"?2:1,offset:0}))),this.paintVertexArray=new T}populatePaintArray(s,d,v,T,P){const k=this.paintVertexArray.length,R=this.expression.evaluate(new Rt(0),d,{},T,[],P);this.paintVertexArray.resize(s),this._setPaintValue(k,s,R)}updatePaintArray(s,d,v,T){const P=this.expression.evaluate({zoom:0},v,T);this._setPaintValue(s,d,P)}_setPaintValue(s,d,v){if(this.type==="color"){const T=ah(v);for(let P=s;P<d;P++)this.paintVertexArray.emplace(P,T[0],T[1])}else{for(let T=s;T<d;T++)this.paintVertexArray.emplace(T,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class wi{constructor(s,d,v,T,P,k){this.expression=s,this.uniformNames=d.map((R=>`u_${R}_t`)),this.type=v,this.useIntegerZoom=T,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=d.map((R=>({name:`a_${R}`,type:"Float32",components:v==="color"?4:2,offset:0}))),this.paintVertexArray=new k}populatePaintArray(s,d,v,T,P){const k=this.expression.evaluate(new Rt(this.zoom),d,{},T,[],P),R=this.expression.evaluate(new Rt(this.zoom+1),d,{},T,[],P),U=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(U,s,k,R)}updatePaintArray(s,d,v,T){const P=this.expression.evaluate({zoom:this.zoom},v,T),k=this.expression.evaluate({zoom:this.zoom+1},v,T);this._setPaintValue(s,d,P,k)}_setPaintValue(s,d,v,T){if(this.type==="color"){const P=ah(v),k=ah(T);for(let R=s;R<d;R++)this.paintVertexArray.emplace(R,P[0],P[1],k[0],k[1])}else{for(let P=s;P<d;P++)this.paintVertexArray.emplace(P,v,T);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(T))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,d){const v=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,T=ot(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);s.set(T)}getBinding(s,d,v){return new Ac(s,d)}}class Ns{constructor(s,d,v,T,P,k){this.expression=s,this.type=d,this.useIntegerZoom=v,this.zoom=T,this.layerId=k,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P}populatePaintArray(s,d,v){const T=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(T,s,d.patterns&&d.patterns[this.layerId],v)}updatePaintArray(s,d,v,T,P){this._setPaintValues(s,d,v.patterns&&v.patterns[this.layerId],P)}_setPaintValues(s,d,v,T){if(!T||!v)return;const{min:P,mid:k,max:R}=v,U=T[P],G=T[k],tt=T[R];if(U&&G&&tt)for(let st=s;st<d;st++)this.zoomInPaintVertexArray.emplace(st,G.tl[0],G.tl[1],G.br[0],G.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],G.pixelRatio,U.pixelRatio),this.zoomOutPaintVertexArray.emplace(st,G.tl[0],G.tl[1],G.br[0],G.br[1],tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],G.pixelRatio,tt.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Ea.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Ea.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Go{constructor(s,d,v){this.binders={},this._buffers=[];const T=[];for(const P in s.paint._values){if(!v(P))continue;const k=s.paint.get(P);if(!(k instanceof ci&&ru(k.property.specification)))continue;const R=Xi(P,s.type),U=k.value,G=k.property.specification.type,tt=k.property.useIntegerZoom,st=k.property.specification["property-type"],ct=st==="cross-faded"||st==="cross-faded-data-driven";if(U.kind==="constant")this.binders[P]=ct?new bs(U.value,R):new Zo(U.value,R,G),T.push(`/u_${P}`);else if(U.kind==="source"||ct){const gt=ta(P,G,"source");this.binders[P]=ct?new Ns(U,G,tt,d,gt,s.id):new Tr(U,R,G,gt),T.push(`/a_${P}`)}else{const gt=ta(P,G,"composite");this.binders[P]=new wi(U,R,G,tt,d,gt),T.push(`/z_${P}`)}}this.cacheKey=T.sort().join("")}getMaxValue(s){const d=this.binders[s];return d instanceof Tr||d instanceof wi?d.maxValue:0}populatePaintArrays(s,d,v,T,P){for(const k in this.binders){const R=this.binders[k];(R instanceof Tr||R instanceof wi||R instanceof Ns)&&R.populatePaintArray(s,d,v,T,P)}}setConstantPatternPositions(s,d){for(const v in this.binders){const T=this.binders[v];T instanceof bs&&T.setConstantPatternPositions(s,d)}}updatePaintArrays(s,d,v,T,P){let k=!1;for(const R in s){const U=d.getPositions(R);for(const G of U){const tt=v.feature(G.index);for(const st in this.binders){const ct=this.binders[st];if((ct instanceof Tr||ct instanceof wi||ct instanceof Ns)&&ct.expression.isStateDependent===!0){const gt=T.paint.get(st);ct.expression=gt.value,ct.updatePaintArray(G.start,G.end,tt,s[R],P),k=!0}}}}return k}defines(){const s=[];for(const d in this.binders){const v=this.binders[d];(v instanceof Zo||v instanceof bs)&&s.push(...v.uniformNames.map((T=>`#define HAS_UNIFORM_${T}`)))}return s}getBinderAttributes(){const s=[];for(const d in this.binders){const v=this.binders[d];if(v instanceof Tr||v instanceof wi)for(let T=0;T<v.paintVertexAttributes.length;T++)s.push(v.paintVertexAttributes[T].name);else if(v instanceof Ns)for(let T=0;T<Ea.members.length;T++)s.push(Ea.members[T].name)}return s}getBinderUniforms(){const s=[];for(const d in this.binders){const v=this.binders[d];if(v instanceof Zo||v instanceof bs||v instanceof wi)for(const T of v.uniformNames)s.push(T)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,d){const v=[];for(const T in this.binders){const P=this.binders[T];if(P instanceof Zo||P instanceof bs||P instanceof wi){for(const k of P.uniformNames)if(d[k]){const R=P.getBinding(s,d[k],k);v.push({name:k,property:T,binding:R})}}}return v}setUniforms(s,d,v,T){for(const{name:P,property:k,binding:R}of d)this.binders[k].setUniform(R,T,v.get(k),P)}updatePaintBuffers(s){this._buffers=[];for(const d in this.binders){const v=this.binders[d];if(s&&v instanceof Ns){const T=s.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;T&&this._buffers.push(T)}else(v instanceof Tr||v instanceof wi)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(s){for(const d in this.binders){const v=this.binders[d];(v instanceof Tr||v instanceof wi||v instanceof Ns)&&v.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const d=this.binders[s];(d instanceof Tr||d instanceof wi||d instanceof Ns)&&d.destroy()}}}class En{constructor(s,d,v=(()=>!0)){this.programConfigurations={};for(const T of s)this.programConfigurations[T.id]=new Go(T,d,v);this.needsUpload=!1,this._featureMap=new mr,this._bufferOffset=0}populatePaintArrays(s,d,v,T,P,k){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(s,d,T,P,k);d.id!==void 0&&this._featureMap.add(d.id,v,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,d,v,T){for(const P of v)this.needsUpload=this.programConfigurations[P.id].updatePaintArrays(s,this._featureMap,d,P,T)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function Xi(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function ta(c,s,d){const v={color:{source:vs,composite:Et},number:{source:q,composite:vs}},T=(function(P){return{"line-pattern":{source:Ei,composite:Ei},"fill-pattern":{source:Ei,composite:Ei},"fill-extrusion-pattern":{source:Ei,composite:Ei}}[P]})(c);return T&&T[d]||v[s][d]}Ze("ConstantBinder",Zo),Ze("CrossFadedConstantBinder",bs),Ze("SourceExpressionBinder",Tr),Ze("CrossFadedCompositeBinder",Ns),Ze("CompositeExpressionBinder",wi),Ze("ProgramConfiguration",Go,{omit:["_buffers"]}),Ze("ProgramConfigurationSet",En);const yr=8192,Mc=Math.pow(2,14)-1,Ec=-Mc-1;function mu(c){const s=yr/c.extent,d=c.loadGeometry();for(let v=0;v<d.length;v++){const T=d[v];for(let P=0;P<T.length;P++){const k=T[P],R=Math.round(k.x*s),U=Math.round(k.y*s);k.x=ot(R,Ec,Mc),k.y=ot(U,Ec,Mc),(R<k.x||R>k.x+1||U<k.y||U>k.y+1)&&ye("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Fl(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?mu(c):[]}}function Qu(c,s,d,v,T){c.emplaceBack(2*s+(v+1)/2,2*d+(T+1)/2)}class Ym{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new sn,this.indexArray=new ua,this.segments=new ji,this.programConfigurations=new En(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(s,d,v){const T=this.layers[0],P=[];let k=null,R=!1;T.type==="circle"&&(k=T.layout.get("circle-sort-key"),R=!k.isConstant());for(const{feature:U,id:G,index:tt,sourceLayerIndex:st}of s){const ct=this.layers[0]._featureFilter.needGeometry,gt=Fl(U,ct);if(!this.layers[0]._featureFilter.filter(new Rt(this.zoom),gt,v))continue;const yt=R?k.evaluate(gt,{},v):void 0,Ct={id:G,properties:U.properties,type:U.type,sourceLayerIndex:st,index:tt,geometry:ct?gt.geometry:mu(U),patterns:{},sortKey:yt};P.push(Ct)}R&&P.sort(((U,G)=>U.sortKey-G.sortKey));for(const U of P){const{geometry:G,index:tt,sourceLayerIndex:st}=U,ct=s[tt].feature;this.addFeature(U,G,tt,v),d.featureIndex.insert(ct,G,tt,st,this.index)}}update(s,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Hr),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,d,v,T){for(const P of d)for(const k of P){const R=k.x,U=k.y;if(R<0||R>=yr||U<0||U>=yr)continue;const G=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),tt=G.vertexLength;Qu(this.layoutVertexArray,R,U,-1,-1),Qu(this.layoutVertexArray,R,U,1,-1),Qu(this.layoutVertexArray,R,U,1,1),Qu(this.layoutVertexArray,R,U,-1,1),this.indexArray.emplaceBack(tt,tt+1,tt+2),this.indexArray.emplaceBack(tt,tt+3,tt+2),G.vertexLength+=4,G.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,{},T)}}function zr(c,s){for(let d=0;d<c.length;d++)if(ha(s,c[d]))return!0;for(let d=0;d<s.length;d++)if(ha(c,s[d]))return!0;return!!fp(c,s)}function Xm(c,s,d){return!!ha(c,s)||!!Qf(s,c,d)}function hp(c,s){if(c.length===1)return pp(s,c[0]);for(let d=0;d<s.length;d++){const v=s[d];for(let T=0;T<v.length;T++)if(ha(c,v[T]))return!0}for(let d=0;d<c.length;d++)if(pp(s,c[d]))return!0;for(let d=0;d<s.length;d++)if(fp(c,s[d]))return!0;return!1}function a_(c,s,d){if(c.length>1){if(fp(c,s))return!0;for(let v=0;v<s.length;v++)if(Qf(s[v],c,d))return!0}for(let v=0;v<c.length;v++)if(Qf(c[v],s,d))return!0;return!1}function fp(c,s){if(c.length===0||s.length===0)return!1;for(let d=0;d<c.length-1;d++){const v=c[d],T=c[d+1];for(let P=0;P<s.length-1;P++)if(Vx(v,T,s[P],s[P+1]))return!0}return!1}function Vx(c,s,d,v){return fe(c,d,v)!==fe(s,d,v)&&fe(c,s,d)!==fe(c,s,v)}function Qf(c,s,d){const v=d*d;if(s.length===1)return c.distSqr(s[0])<v;for(let T=1;T<s.length;T++)if(dp(c,s[T-1],s[T])<v)return!0;return!1}function dp(c,s,d){const v=s.distSqr(d);if(v===0)return c.distSqr(s);const T=((c.x-s.x)*(d.x-s.x)+(c.y-s.y)*(d.y-s.y))/v;return c.distSqr(T<0?s:T>1?d:d.sub(s)._mult(T)._add(s))}function pp(c,s){let d,v,T,P=!1;for(let k=0;k<c.length;k++){d=c[k];for(let R=0,U=d.length-1;R<d.length;U=R++)v=d[R],T=d[U],v.y>s.y!=T.y>s.y&&s.x<(T.x-v.x)*(s.y-v.y)/(T.y-v.y)+v.x&&(P=!P)}return P}function ha(c,s){let d=!1;for(let v=0,T=c.length-1;v<c.length;T=v++){const P=c[v],k=c[T];P.y>s.y!=k.y>s.y&&s.x<(k.x-P.x)*(s.y-P.y)/(k.y-P.y)+P.x&&(d=!d)}return d}function ea(c,s,d){const v=d[0],T=d[2];if(c.x<v.x&&s.x<v.x||c.x>T.x&&s.x>T.x||c.y<v.y&&s.y<v.y||c.y>T.y&&s.y>T.y)return!1;const P=fe(c,s,d[0]);return P!==fe(c,s,d[1])||P!==fe(c,s,d[2])||P!==fe(c,s,d[3])}function Cc(c,s,d){const v=s.paint.get(c).value;return v.kind==="constant"?v.value:d.programConfigurations.get(s.id).getMaxValue(c)}function Pc(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function sh(c,s,d,v,T){if(!s[0]&&!s[1])return c;const P=O.convert(s)._mult(T);d==="viewport"&&P._rotate(-v);const k=[];for(let R=0;R<c.length;R++)k.push(c[R].sub(P));return k}let mp,gu;Ze("CircleBucket",Ym,{omit:["layers"]});var gp={get paint(){return gu=gu||new oi({"circle-radius":new Ge(_e.paint_circle["circle-radius"]),"circle-color":new Ge(_e.paint_circle["circle-color"]),"circle-blur":new Ge(_e.paint_circle["circle-blur"]),"circle-opacity":new Ge(_e.paint_circle["circle-opacity"]),"circle-translate":new Qe(_e.paint_circle["circle-translate"]),"circle-translate-anchor":new Qe(_e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qe(_e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qe(_e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ge(_e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ge(_e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ge(_e.paint_circle["circle-stroke-opacity"])})},get layout(){return mp=mp||new oi({"circle-sort-key":new Ge(_e.layout_circle["circle-sort-key"])})}},Fa=1e-6,kc=typeof Float32Array<"u"?Float32Array:Array;function yp(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Km(c,s,d){var v=s[0],T=s[1],P=s[2],k=s[3],R=s[4],U=s[5],G=s[6],tt=s[7],st=s[8],ct=s[9],gt=s[10],yt=s[11],Ct=s[12],Bt=s[13],Ut=s[14],Jt=s[15],Ht=d[0],ee=d[1],ne=d[2],Me=d[3];return c[0]=Ht*v+ee*R+ne*st+Me*Ct,c[1]=Ht*T+ee*U+ne*ct+Me*Bt,c[2]=Ht*P+ee*G+ne*gt+Me*Ut,c[3]=Ht*k+ee*tt+ne*yt+Me*Jt,c[4]=(Ht=d[4])*v+(ee=d[5])*R+(ne=d[6])*st+(Me=d[7])*Ct,c[5]=Ht*T+ee*U+ne*ct+Me*Bt,c[6]=Ht*P+ee*G+ne*gt+Me*Ut,c[7]=Ht*k+ee*tt+ne*yt+Me*Jt,c[8]=(Ht=d[8])*v+(ee=d[9])*R+(ne=d[10])*st+(Me=d[11])*Ct,c[9]=Ht*T+ee*U+ne*ct+Me*Bt,c[10]=Ht*P+ee*G+ne*gt+Me*Ut,c[11]=Ht*k+ee*tt+ne*yt+Me*Jt,c[12]=(Ht=d[12])*v+(ee=d[13])*R+(ne=d[14])*st+(Me=d[15])*Ct,c[13]=Ht*T+ee*U+ne*ct+Me*Bt,c[14]=Ht*P+ee*G+ne*gt+Me*Ut,c[15]=Ht*k+ee*tt+ne*yt+Me*Jt,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var nf,s_=Km;function Jf(c,s,d){var v=s[0],T=s[1],P=s[2],k=s[3];return c[0]=d[0]*v+d[4]*T+d[8]*P+d[12]*k,c[1]=d[1]*v+d[5]*T+d[9]*P+d[13]*k,c[2]=d[2]*v+d[6]*T+d[10]*P+d[14]*k,c[3]=d[3]*v+d[7]*T+d[11]*P+d[15]*k,c}nf=new kc(4),kc!=Float32Array&&(nf[0]=0,nf[1]=0,nf[2]=0,nf[3]=0);class o_ extends Or{constructor(s){super(s,gp)}createBucket(s){return new Ym(s)}queryRadius(s){const d=s;return Cc("circle-radius",this,d)+Cc("circle-stroke-width",this,d)+Pc(this.paint.get("circle-translate"))}queryIntersectsFeature(s,d,v,T,P,k,R,U){const G=sh(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),k.angle,R),tt=this.paint.get("circle-radius").evaluate(d,v)+this.paint.get("circle-stroke-width").evaluate(d,v),st=this.paint.get("circle-pitch-alignment")==="map",ct=st?G:(function(yt,Ct){return yt.map((Bt=>_p(Bt,Ct)))})(G,U),gt=st?tt*R:tt;for(const yt of T)for(const Ct of yt){const Bt=st?Ct:_p(Ct,U);let Ut=gt;const Jt=Jf([],[Ct.x,Ct.y,0,1],U);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ut*=Jt[3]/k.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ut*=k.cameraToCenterDistance/Jt[3]),Xm(ct,Bt,Ut))return!0}return!1}}function _p(c,s){const d=Jf([],[c.x,c.y,0,1],s);return new O(d[0]/d[3],d[1]/d[3])}class Qm extends Ym{}let l_;Ze("HeatmapBucket",Qm,{omit:["layers"]});var u_={get paint(){return l_=l_||new oi({"heatmap-radius":new Ge(_e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ge(_e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qe(_e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ho(_e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qe(_e.paint_heatmap["heatmap-opacity"])})}};function vp(c,{width:s,height:d},v,T){if(T){if(T instanceof Uint8ClampedArray)T=new Uint8Array(T.buffer);else if(T.length!==s*d*v)throw new RangeError(`mismatched image size. expected: ${T.length} but got: ${s*d*v}`)}else T=new Uint8Array(s*d*v);return c.width=s,c.height=d,c.data=T,c}function Jm(c,{width:s,height:d},v){if(s===c.width&&d===c.height)return;const T=vp({},{width:s,height:d},v);td(c,T,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,d)},v),c.width=s,c.height=d,c.data=T.data}function td(c,s,d,v,T,P){if(T.width===0||T.height===0)return s;if(T.width>c.width||T.height>c.height||d.x>c.width-T.width||d.y>c.height-T.height)throw new RangeError("out of range source coordinates for image copy");if(T.width>s.width||T.height>s.height||v.x>s.width-T.width||v.y>s.height-T.height)throw new RangeError("out of range destination coordinates for image copy");const k=c.data,R=s.data;if(k===R)throw new Error("srcData equals dstData, so image is already copied");for(let U=0;U<T.height;U++){const G=((d.y+U)*c.width+d.x)*P,tt=((v.y+U)*s.width+v.x)*P;for(let st=0;st<T.width*P;st++)R[tt+st]=k[G+st]}return s}class rf{constructor(s,d){vp(this,s,1,d)}resize(s){Jm(this,s,1)}clone(){return new rf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,d,v,T,P){td(s,d,v,T,P,1)}}class po{constructor(s,d){vp(this,s,4,d)}resize(s){Jm(this,s,4)}replace(s,d){d?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new po({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,d,v,T,P){td(s,d,v,T,P,4)}}function tg(c){const s={},d=c.resolution||256,v=c.clips?c.clips.length:1,T=c.image||new po({width:d,height:v});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const P=(k,R,U)=>{s[c.evaluationKey]=U;const G=c.expression.evaluate(s);T.data[k+R+0]=Math.floor(255*G.r/G.a),T.data[k+R+1]=Math.floor(255*G.g/G.a),T.data[k+R+2]=Math.floor(255*G.b/G.a),T.data[k+R+3]=Math.floor(255*G.a)};if(c.clips)for(let k=0,R=0;k<v;++k,R+=4*d)for(let U=0,G=0;U<d;U++,G+=4){const tt=U/(d-1),{start:st,end:ct}=c.clips[k];P(R,G,st*(1-tt)+ct*tt)}else for(let k=0,R=0;k<d;k++,R+=4)P(0,R,k/(d-1));return T}Ze("AlphaImage",rf),Ze("RGBAImage",po);class c_ extends Or{createBucket(s){return new Qm(s)}constructor(s){super(s,u_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=tg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let eg;var $x={get paint(){return eg=eg||new oi({"hillshade-illumination-direction":new Qe(_e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qe(_e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qe(_e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qe(_e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qe(_e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qe(_e.paint_hillshade["hillshade-accent-color"])})}};class h_ extends Or{constructor(s){super(s,$x)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const af=bi([{name:"a_pos",components:2,type:"Int16"}],4),{members:f_}=af;var sf={exports:{}};function oh(c,s,d){d=d||2;var v,T,P,k,R,U,G,tt=s&&s.length,st=tt?s[0]*d:c.length,ct=ng(c,0,st,d,!0),gt=[];if(!ct||ct.next===ct.prev)return gt;if(tt&&(ct=(function(Ct,Bt,Ut,Jt){var Ht,ee,ne,Me=[];for(Ht=0,ee=Bt.length;Ht<ee;Ht++)(ne=ng(Ct,Bt[Ht]*Jt,Ht<ee-1?Bt[Ht+1]*Jt:Ct.length,Jt,!1))===ne.next&&(ne.steiner=!0),Me.push(rg(ne));for(Me.sort(y_),Ht=0;Ht<Me.length;Ht++)Ut=ig(Me[Ht],Ut);return Ut})(c,s,ct,d)),c.length>80*d){v=P=c[0],T=k=c[1];for(var yt=d;yt<st;yt+=d)(R=c[yt])<v&&(v=R),(U=c[yt+1])<T&&(T=U),R>P&&(P=R),U>k&&(k=U);G=(G=Math.max(P-v,k-T))!==0?32767/G:0}return ed(ct,gt,d,v,T,G,0),gt}function ng(c,s,d,v,T){var P,k;if(T===uh(c,s,d,v)>0)for(P=s;P<d;P+=v)k=x_(P,c[P],c[P+1],k);else for(P=d-v;P>=s;P-=v)k=x_(P,c[P],c[P+1],k);return k&&of(k,k.next)&&(id(k),k=k.next),k}function Ju(c,s){if(!c)return c;s||(s=c);var d,v=c;do if(d=!1,v.steiner||!of(v,v.next)&&Lr(v.prev,v,v.next)!==0)v=v.next;else{if(id(v),(v=s=v.prev)===v.next)break;d=!0}while(d||v!==s);return s}function ed(c,s,d,v,T,P,k){if(c){!k&&P&&(function(tt,st,ct,gt){var yt=tt;do yt.z===0&&(yt.z=xp(yt.x,yt.y,st,ct,gt)),yt.prevZ=yt.prev,yt.nextZ=yt.next,yt=yt.next;while(yt!==tt);yt.prevZ.nextZ=null,yt.prevZ=null,(function(Ct){var Bt,Ut,Jt,Ht,ee,ne,Me,Fe,ln=1;do{for(Ut=Ct,Ct=null,ee=null,ne=0;Ut;){for(ne++,Jt=Ut,Me=0,Bt=0;Bt<ln&&(Me++,Jt=Jt.nextZ);Bt++);for(Fe=ln;Me>0||Fe>0&&Jt;)Me!==0&&(Fe===0||!Jt||Ut.z<=Jt.z)?(Ht=Ut,Ut=Ut.nextZ,Me--):(Ht=Jt,Jt=Jt.nextZ,Fe--),ee?ee.nextZ=Ht:Ct=Ht,Ht.prevZ=ee,ee=Ht;Ut=Jt}ee.nextZ=null,ln*=2}while(ne>1)})(yt)})(c,v,T,P);for(var R,U,G=c;c.prev!==c.next;)if(R=c.prev,U=c.next,P?p_(c,v,T,P):d_(c))s.push(R.i/d|0),s.push(c.i/d|0),s.push(U.i/d|0),id(c),c=U.next,G=U.next;else if((c=U)===G){k?k===1?ed(c=m_(Ju(c),s,d),s,d,v,T,P,2):k===2&&g_(c,s,d,v,T,P):ed(Ju(c),s,d,v,T,P,1);break}}}function d_(c){var s=c.prev,d=c,v=c.next;if(Lr(s,d,v)>=0)return!1;for(var T=s.x,P=d.x,k=v.x,R=s.y,U=d.y,G=v.y,tt=T<P?T<k?T:k:P<k?P:k,st=R<U?R<G?R:G:U<G?U:G,ct=T>P?T>k?T:k:P>k?P:k,gt=R>U?R>G?R:G:U>G?U:G,yt=v.next;yt!==s;){if(yt.x>=tt&&yt.x<=ct&&yt.y>=st&&yt.y<=gt&&lh(T,R,P,U,k,G,yt.x,yt.y)&&Lr(yt.prev,yt,yt.next)>=0)return!1;yt=yt.next}return!0}function p_(c,s,d,v){var T=c.prev,P=c,k=c.next;if(Lr(T,P,k)>=0)return!1;for(var R=T.x,U=P.x,G=k.x,tt=T.y,st=P.y,ct=k.y,gt=R<U?R<G?R:G:U<G?U:G,yt=tt<st?tt<ct?tt:ct:st<ct?st:ct,Ct=R>U?R>G?R:G:U>G?U:G,Bt=tt>st?tt>ct?tt:ct:st>ct?st:ct,Ut=xp(gt,yt,s,d,v),Jt=xp(Ct,Bt,s,d,v),Ht=c.prevZ,ee=c.nextZ;Ht&&Ht.z>=Ut&&ee&&ee.z<=Jt;){if(Ht.x>=gt&&Ht.x<=Ct&&Ht.y>=yt&&Ht.y<=Bt&&Ht!==T&&Ht!==k&&lh(R,tt,U,st,G,ct,Ht.x,Ht.y)&&Lr(Ht.prev,Ht,Ht.next)>=0||(Ht=Ht.prevZ,ee.x>=gt&&ee.x<=Ct&&ee.y>=yt&&ee.y<=Bt&&ee!==T&&ee!==k&&lh(R,tt,U,st,G,ct,ee.x,ee.y)&&Lr(ee.prev,ee,ee.next)>=0))return!1;ee=ee.nextZ}for(;Ht&&Ht.z>=Ut;){if(Ht.x>=gt&&Ht.x<=Ct&&Ht.y>=yt&&Ht.y<=Bt&&Ht!==T&&Ht!==k&&lh(R,tt,U,st,G,ct,Ht.x,Ht.y)&&Lr(Ht.prev,Ht,Ht.next)>=0)return!1;Ht=Ht.prevZ}for(;ee&&ee.z<=Jt;){if(ee.x>=gt&&ee.x<=Ct&&ee.y>=yt&&ee.y<=Bt&&ee!==T&&ee!==k&&lh(R,tt,U,st,G,ct,ee.x,ee.y)&&Lr(ee.prev,ee,ee.next)>=0)return!1;ee=ee.nextZ}return!0}function m_(c,s,d){var v=c;do{var T=v.prev,P=v.next.next;!of(T,P)&&ag(T,v,v.next,P)&&uf(T,P)&&uf(P,T)&&(s.push(T.i/d|0),s.push(v.i/d|0),s.push(P.i/d|0),id(v),id(v.next),v=c=P),v=v.next}while(v!==c);return Ju(v)}function g_(c,s,d,v,T,P){var k=c;do{for(var R=k.next.next;R!==k.prev;){if(k.i!==R.i&&v_(k,R)){var U=sg(k,R);return k=Ju(k,k.next),U=Ju(U,U.next),ed(k,s,d,v,T,P,0),void ed(U,s,d,v,T,P,0)}R=R.next}k=k.next}while(k!==c)}function y_(c,s){return c.x-s.x}function ig(c,s){var d=(function(T,P){var k,R=P,U=T.x,G=T.y,tt=-1/0;do{if(G<=R.y&&G>=R.next.y&&R.next.y!==R.y){var st=R.x+(G-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(st<=U&&st>tt&&(tt=st,k=R.x<R.next.x?R:R.next,st===U))return k}R=R.next}while(R!==P);if(!k)return null;var ct,gt=k,yt=k.x,Ct=k.y,Bt=1/0;R=k;do U>=R.x&&R.x>=yt&&U!==R.x&&lh(G<Ct?U:tt,G,yt,Ct,G<Ct?tt:U,G,R.x,R.y)&&(ct=Math.abs(G-R.y)/(U-R.x),uf(R,T)&&(ct<Bt||ct===Bt&&(R.x>k.x||R.x===k.x&&__(k,R)))&&(k=R,Bt=ct)),R=R.next;while(R!==gt);return k})(c,s);if(!d)return s;var v=sg(d,c);return Ju(v,v.next),Ju(d,d.next)}function __(c,s){return Lr(c.prev,c,s.prev)<0&&Lr(s.next,c,c.next)<0}function xp(c,s,d,v,T){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-d)*T|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-v)*T|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function rg(c){var s=c,d=c;do(s.x<d.x||s.x===d.x&&s.y<d.y)&&(d=s),s=s.next;while(s!==c);return d}function lh(c,s,d,v,T,P,k,R){return(T-k)*(s-R)>=(c-k)*(P-R)&&(c-k)*(v-R)>=(d-k)*(s-R)&&(d-k)*(P-R)>=(T-k)*(v-R)}function v_(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!(function(d,v){var T=d;do{if(T.i!==d.i&&T.next.i!==d.i&&T.i!==v.i&&T.next.i!==v.i&&ag(T,T.next,d,v))return!0;T=T.next}while(T!==d);return!1})(c,s)&&(uf(c,s)&&uf(s,c)&&(function(d,v){var T=d,P=!1,k=(d.x+v.x)/2,R=(d.y+v.y)/2;do T.y>R!=T.next.y>R&&T.next.y!==T.y&&k<(T.next.x-T.x)*(R-T.y)/(T.next.y-T.y)+T.x&&(P=!P),T=T.next;while(T!==d);return P})(c,s)&&(Lr(c.prev,c,s.prev)||Lr(c,s.prev,s))||of(c,s)&&Lr(c.prev,c,c.next)>0&&Lr(s.prev,s,s.next)>0)}function Lr(c,s,d){return(s.y-c.y)*(d.x-s.x)-(s.x-c.x)*(d.y-s.y)}function of(c,s){return c.x===s.x&&c.y===s.y}function ag(c,s,d,v){var T=lf(Lr(c,s,d)),P=lf(Lr(c,s,v)),k=lf(Lr(d,v,c)),R=lf(Lr(d,v,s));return T!==P&&k!==R||!(T!==0||!nd(c,d,s))||!(P!==0||!nd(c,v,s))||!(k!==0||!nd(d,c,v))||!(R!==0||!nd(d,s,v))}function nd(c,s,d){return s.x<=Math.max(c.x,d.x)&&s.x>=Math.min(c.x,d.x)&&s.y<=Math.max(c.y,d.y)&&s.y>=Math.min(c.y,d.y)}function lf(c){return c>0?1:c<0?-1:0}function uf(c,s){return Lr(c.prev,c,c.next)<0?Lr(c,s,c.next)>=0&&Lr(c,c.prev,s)>=0:Lr(c,s,c.prev)<0||Lr(c,c.next,s)<0}function sg(c,s){var d=new bp(c.i,c.x,c.y),v=new bp(s.i,s.x,s.y),T=c.next,P=s.prev;return c.next=s,s.prev=c,d.next=T,T.prev=d,v.next=d,d.prev=v,P.next=v,v.prev=P,v}function x_(c,s,d,v){var T=new bp(c,s,d);return v?(T.next=v.next,T.prev=v,v.next.prev=T,v.next=T):(T.prev=T,T.next=T),T}function id(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function bp(c,s,d){this.i=c,this.x=s,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function uh(c,s,d,v){for(var T=0,P=s,k=d-v;P<d;P+=v)T+=(c[k]-c[P])*(c[P+1]+c[k+1]),k=P;return T}sf.exports=oh,sf.exports.default=oh,oh.deviation=function(c,s,d,v){var T=s&&s.length,P=Math.abs(uh(c,0,T?s[0]*d:c.length,d));if(T)for(var k=0,R=s.length;k<R;k++)P-=Math.abs(uh(c,s[k]*d,k<R-1?s[k+1]*d:c.length,d));var U=0;for(k=0;k<v.length;k+=3){var G=v[k]*d,tt=v[k+1]*d,st=v[k+2]*d;U+=Math.abs((c[G]-c[st])*(c[tt+1]-c[G+1])-(c[G]-c[tt])*(c[st+1]-c[G+1]))}return P===0&&U===0?0:Math.abs((U-P)/P)},oh.flatten=function(c){for(var s=c[0][0].length,d={vertices:[],holes:[],dimensions:s},v=0,T=0;T<c.length;T++){for(var P=0;P<c[T].length;P++)for(var k=0;k<s;k++)d.vertices.push(c[T][P][k]);T>0&&d.holes.push(v+=c[T-1].length)}return d};var wp=_(sf.exports);function Sp(c,s,d,v,T){og(c,s,d,v||c.length-1,T||rd)}function og(c,s,d,v,T){for(;v>d;){if(v-d>600){var P=v-d+1,k=s-d+1,R=Math.log(P),U=.5*Math.exp(2*R/3),G=.5*Math.sqrt(R*U*(P-U)/P)*(k-P/2<0?-1:1);og(c,s,Math.max(d,Math.floor(s-k*U/P+G)),Math.min(v,Math.floor(s+(P-k)*U/P+G)),T)}var tt=c[s],st=d,ct=v;for(cf(c,d,s),T(c[v],tt)>0&&cf(c,d,v);st<ct;){for(cf(c,st,ct),st++,ct--;T(c[st],tt)<0;)st++;for(;T(c[ct],tt)>0;)ct--}T(c[d],tt)===0?cf(c,d,ct):cf(c,++ct,v),ct<=s&&(d=ct+1),s<=ct&&(v=ct-1)}}function cf(c,s,d){var v=c[s];c[s]=c[d],c[d]=v}function rd(c,s){return c<s?-1:c>s?1:0}function Tp(c,s){const d=c.length;if(d<=1)return[c];const v=[];let T,P;for(let k=0;k<d;k++){const R=kt(c[k]);R!==0&&(c[k].area=Math.abs(R),P===void 0&&(P=R<0),P===R<0?(T&&v.push(T),T=[c[k]]):T.push(c[k]))}if(T&&v.push(T),s>1)for(let k=0;k<v.length;k++)v[k].length<=s||(Sp(v[k],s,1,v[k].length-1,lg),v[k]=v[k].slice(0,s));return v}function lg(c,s){return s.area-c.area}function Ap(c,s,d){const v=d.patternDependencies;let T=!1;for(const P of s){const k=P.paint.get(`${c}-pattern`);k.isConstant()||(T=!0);const R=k.constantOr(null);R&&(T=!0,v[R.to]=!0,v[R.from]=!0)}return T}function ad(c,s,d,v,T){const P=T.patternDependencies;for(const k of s){const R=k.paint.get(`${c}-pattern`).value;if(R.kind!=="constant"){let U=R.evaluate({zoom:v-1},d,{},T.availableImages),G=R.evaluate({zoom:v},d,{},T.availableImages),tt=R.evaluate({zoom:v+1},d,{},T.availableImages);U=U&&U.name?U.name:U,G=G&&G.name?G.name:G,tt=tt&&tt.name?tt.name:tt,P[U]=!0,P[G]=!0,P[tt]=!0,d.patterns[k.id]={min:U,mid:G,max:tt}}}return d}class sd{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qn,this.indexArray=new ua,this.indexArray2=new er,this.programConfigurations=new En(s.layers,s.zoom),this.segments=new ji,this.segments2=new ji,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(s,d,v){this.hasPattern=Ap("fill",this.layers,d);const T=this.layers[0].layout.get("fill-sort-key"),P=!T.isConstant(),k=[];for(const{feature:R,id:U,index:G,sourceLayerIndex:tt}of s){const st=this.layers[0]._featureFilter.needGeometry,ct=Fl(R,st);if(!this.layers[0]._featureFilter.filter(new Rt(this.zoom),ct,v))continue;const gt=P?T.evaluate(ct,{},v,d.availableImages):void 0,yt={id:U,properties:R.properties,type:R.type,sourceLayerIndex:tt,index:G,geometry:st?ct.geometry:mu(R),patterns:{},sortKey:gt};k.push(yt)}P&&k.sort(((R,U)=>R.sortKey-U.sortKey));for(const R of k){const{geometry:U,index:G,sourceLayerIndex:tt}=R;if(this.hasPattern){const st=ad("fill",this.layers,R,this.zoom,d);this.patternFeatures.push(st)}else this.addFeature(R,U,G,v,{});d.featureIndex.insert(s[G].feature,U,G,tt,this.index)}}update(s,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,v)}addFeatures(s,d,v){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,d,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,f_),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,d,v,T,P){for(const k of Tp(d,500)){let R=0;for(const gt of k)R+=gt.length;const U=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray),G=U.vertexLength,tt=[],st=[];for(const gt of k){if(gt.length===0)continue;gt!==k[0]&&st.push(tt.length/2);const yt=this.segments2.prepareSegment(gt.length,this.layoutVertexArray,this.indexArray2),Ct=yt.vertexLength;this.layoutVertexArray.emplaceBack(gt[0].x,gt[0].y),this.indexArray2.emplaceBack(Ct+gt.length-1,Ct),tt.push(gt[0].x),tt.push(gt[0].y);for(let Bt=1;Bt<gt.length;Bt++)this.layoutVertexArray.emplaceBack(gt[Bt].x,gt[Bt].y),this.indexArray2.emplaceBack(Ct+Bt-1,Ct+Bt),tt.push(gt[Bt].x),tt.push(gt[Bt].y);yt.vertexLength+=gt.length,yt.primitiveLength+=gt.length}const ct=wp(tt,st);for(let gt=0;gt<ct.length;gt+=3)this.indexArray.emplaceBack(G+ct[gt],G+ct[gt+1],G+ct[gt+2]);U.vertexLength+=R,U.primitiveLength+=ct.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,P,T)}}let ug,cg;Ze("FillBucket",sd,{omit:["layers","patternFeatures"]});var ch={get paint(){return cg=cg||new oi({"fill-antialias":new Qe(_e.paint_fill["fill-antialias"]),"fill-opacity":new Ge(_e.paint_fill["fill-opacity"]),"fill-color":new Ge(_e.paint_fill["fill-color"]),"fill-outline-color":new Ge(_e.paint_fill["fill-outline-color"]),"fill-translate":new Qe(_e.paint_fill["fill-translate"]),"fill-translate-anchor":new Qe(_e.paint_fill["fill-translate-anchor"]),"fill-pattern":new ri(_e.paint_fill["fill-pattern"])})},get layout(){return ug=ug||new oi({"fill-sort-key":new Ge(_e.layout_fill["fill-sort-key"])})}};class b_ extends Or{constructor(s){super(s,ch)}recalculate(s,d){super.recalculate(s,d);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new sd(s)}queryRadius(){return Pc(this.paint.get("fill-translate"))}queryIntersectsFeature(s,d,v,T,P,k,R){return hp(sh(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),k.angle,R),T)}isTileClipped(){return!0}}const w_=bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),S_=bi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Mp}=w_;var tc={},hg=x,fg=hh;function hh(c,s,d,v,T){this.properties={},this.extent=d,this.type=0,this._pbf=c,this._geometry=-1,this._keys=v,this._values=T,c.readFields(qx,this,s)}function qx(c,s,d){c==1?s.id=d.readVarint():c==2?(function(v,T){for(var P=v.readVarint()+v.pos;v.pos<P;){var k=T._keys[v.readVarint()],R=T._values[v.readVarint()];T.properties[k]=R}})(d,s):c==3?s.type=d.readVarint():c==4&&(s._geometry=d.pos)}function dg(c){for(var s,d,v=0,T=0,P=c.length,k=P-1;T<P;k=T++)v+=((d=c[k]).x-(s=c[T]).x)*(s.y+d.y);return v}hh.types=["Unknown","Point","LineString","Polygon"],hh.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var s,d=c.readVarint()+c.pos,v=1,T=0,P=0,k=0,R=[];c.pos<d;){if(T<=0){var U=c.readVarint();v=7&U,T=U>>3}if(T--,v===1||v===2)P+=c.readSVarint(),k+=c.readSVarint(),v===1&&(s&&R.push(s),s=[]),s.push(new hg(P,k));else{if(v!==7)throw new Error("unknown command "+v);s&&s.push(s[0].clone())}}return s&&R.push(s),R},hh.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var s=c.readVarint()+c.pos,d=1,v=0,T=0,P=0,k=1/0,R=-1/0,U=1/0,G=-1/0;c.pos<s;){if(v<=0){var tt=c.readVarint();d=7&tt,v=tt>>3}if(v--,d===1||d===2)(T+=c.readSVarint())<k&&(k=T),T>R&&(R=T),(P+=c.readSVarint())<U&&(U=P),P>G&&(G=P);else if(d!==7)throw new Error("unknown command "+d)}return[k,U,R,G]},hh.prototype.toGeoJSON=function(c,s,d){var v,T,P=this.extent*Math.pow(2,d),k=this.extent*c,R=this.extent*s,U=this.loadGeometry(),G=hh.types[this.type];function tt(gt){for(var yt=0;yt<gt.length;yt++){var Ct=gt[yt];gt[yt]=[360*(Ct.x+k)/P-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ct.y+R)/P)*Math.PI/180))-90]}}switch(this.type){case 1:var st=[];for(v=0;v<U.length;v++)st[v]=U[v][0];tt(U=st);break;case 2:for(v=0;v<U.length;v++)tt(U[v]);break;case 3:for(U=(function(gt){var yt=gt.length;if(yt<=1)return[gt];for(var Ct,Bt,Ut=[],Jt=0;Jt<yt;Jt++){var Ht=dg(gt[Jt]);Ht!==0&&(Bt===void 0&&(Bt=Ht<0),Bt===Ht<0?(Ct&&Ut.push(Ct),Ct=[gt[Jt]]):Ct.push(gt[Jt]))}return Ct&&Ut.push(Ct),Ut})(U),v=0;v<U.length;v++)for(T=0;T<U[v].length;T++)tt(U[v][T])}U.length===1?U=U[0]:G="Multi"+G;var ct={type:"Feature",geometry:{type:G,coordinates:U},properties:this.properties};return"id"in this&&(ct.id=this.id),ct};var fa=fg,Ua=pg;function pg(c,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(T_,this,s),this.length=this._features.length}function T_(c,s,d){c===15?s.version=d.readVarint():c===1?s.name=d.readString():c===5?s.extent=d.readVarint():c===2?s._features.push(d.pos):c===3?s._keys.push(d.readString()):c===4&&s._values.push((function(v){for(var T=null,P=v.readVarint()+v.pos;v.pos<P;){var k=v.readVarint()>>3;T=k===1?v.readString():k===2?v.readFloat():k===3?v.readDouble():k===4?v.readVarint64():k===5?v.readVarint():k===6?v.readSVarint():k===7?v.readBoolean():null}return T})(d))}pg.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var s=this._pbf.readVarint()+this._pbf.pos;return new fa(this._pbf,s,this.extent,this._keys,this._values)};var A_=Ua;function M_(c,s,d){if(c===3){var v=new A_(d,d.readVarint()+d.pos);v.length&&(s[v.name]=v)}}tc.VectorTile=function(c,s){this.layers=c.readFields(M_,{},s)},tc.VectorTileFeature=fg,tc.VectorTileLayer=Ua;const od=tc.VectorTileFeature.types,Ep=Math.pow(2,13);function Oc(c,s,d,v,T,P,k,R){c.emplaceBack(s,d,2*Math.floor(v*Ep)+k,T*Ep*2,P*Ep*2,Math.round(R))}class Cp{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new $e,this.centroidVertexArray=new Ne,this.indexArray=new ua,this.programConfigurations=new En(s.layers,s.zoom),this.segments=new ji,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(s,d,v){this.features=[],this.hasPattern=Ap("fill-extrusion",this.layers,d);for(const{feature:T,id:P,index:k,sourceLayerIndex:R}of s){const U=this.layers[0]._featureFilter.needGeometry,G=Fl(T,U);if(!this.layers[0]._featureFilter.filter(new Rt(this.zoom),G,v))continue;const tt={id:P,sourceLayerIndex:R,index:k,geometry:U?G.geometry:mu(T),properties:T.properties,type:T.type,patterns:{}};this.hasPattern?this.features.push(ad("fill-extrusion",this.layers,tt,this.zoom,d)):this.addFeature(tt,tt.geometry,k,v,{}),d.featureIndex.insert(T,tt.geometry,k,R,this.index,!0)}}addFeatures(s,d,v){for(const T of this.features){const{geometry:P}=T;this.addFeature(T,P,T.index,d,v)}}update(s,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Mp),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,S_.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,d,v,T,P){const k={x:0,y:0,vertexCount:0};for(const R of Tp(d,500)){let U=0;for(const yt of R)U+=yt.length;let G=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const yt of R){if(yt.length===0||Pp(yt))continue;let Ct=0;for(let Bt=0;Bt<yt.length;Bt++){const Ut=yt[Bt];if(Bt>=1){const Jt=yt[Bt-1];if(!Hx(Ut,Jt)){G.vertexLength+4>ji.MAX_VERTEX_ARRAY_LENGTH&&(G=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ht=Ut.sub(Jt)._perp()._unit(),ee=Jt.dist(Ut);Ct+ee>32768&&(Ct=0),Oc(this.layoutVertexArray,Ut.x,Ut.y,Ht.x,Ht.y,0,0,Ct),Oc(this.layoutVertexArray,Ut.x,Ut.y,Ht.x,Ht.y,0,1,Ct),k.x+=2*Ut.x,k.y+=2*Ut.y,k.vertexCount+=2,Ct+=ee,Oc(this.layoutVertexArray,Jt.x,Jt.y,Ht.x,Ht.y,0,0,Ct),Oc(this.layoutVertexArray,Jt.x,Jt.y,Ht.x,Ht.y,0,1,Ct),k.x+=2*Jt.x,k.y+=2*Jt.y,k.vertexCount+=2;const ne=G.vertexLength;this.indexArray.emplaceBack(ne,ne+2,ne+1),this.indexArray.emplaceBack(ne+1,ne+2,ne+3),G.vertexLength+=4,G.primitiveLength+=2}}}}if(G.vertexLength+U>ji.MAX_VERTEX_ARRAY_LENGTH&&(G=this.segments.prepareSegment(U,this.layoutVertexArray,this.indexArray)),od[s.type]!=="Polygon")continue;const tt=[],st=[],ct=G.vertexLength;for(const yt of R)if(yt.length!==0){yt!==R[0]&&st.push(tt.length/2);for(let Ct=0;Ct<yt.length;Ct++){const Bt=yt[Ct];Oc(this.layoutVertexArray,Bt.x,Bt.y,0,0,1,1,0),k.x+=Bt.x,k.y+=Bt.y,k.vertexCount+=1,tt.push(Bt.x),tt.push(Bt.y)}}const gt=wp(tt,st);for(let yt=0;yt<gt.length;yt+=3)this.indexArray.emplaceBack(ct+gt[yt],ct+gt[yt+2],ct+gt[yt+1]);G.primitiveLength+=gt.length/3,G.vertexLength+=U}for(let R=0;R<k.vertexCount;R++)this.centroidVertexArray.emplaceBack(Math.floor(k.x/k.vertexCount),Math.floor(k.y/k.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,P,T)}}function Hx(c,s){return c.x===s.x&&(c.x<0||c.x>yr)||c.y===s.y&&(c.y<0||c.y>yr)}function Pp(c){return c.every((s=>s.x<0))||c.every((s=>s.x>yr))||c.every((s=>s.y<0))||c.every((s=>s.y>yr))}let kp;Ze("FillExtrusionBucket",Cp,{omit:["layers","features"]});var E_={get paint(){return kp=kp||new oi({"fill-extrusion-opacity":new Qe(_e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ge(_e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qe(_e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qe(_e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ri(_e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ge(_e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ge(_e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qe(_e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class C_ extends Or{constructor(s){super(s,E_)}createBucket(s){return new Cp(s)}queryRadius(){return Pc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(s,d,v,T,P,k,R,U){const G=sh(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),k.angle,R),tt=this.paint.get("fill-extrusion-height").evaluate(d,v),st=this.paint.get("fill-extrusion-base").evaluate(d,v),ct=(function(yt,Ct,Bt,Ut){const Jt=[];for(const Ht of yt){const ee=[Ht.x,Ht.y,0,1];Jf(ee,ee,Ct),Jt.push(new O(ee[0]/ee[3],ee[1]/ee[3]))}return Jt})(G,U),gt=(function(yt,Ct,Bt,Ut){const Jt=[],Ht=[],ee=Ut[8]*Ct,ne=Ut[9]*Ct,Me=Ut[10]*Ct,Fe=Ut[11]*Ct,ln=Ut[8]*Bt,Xe=Ut[9]*Bt,We=Ut[10]*Bt,Ve=Ut[11]*Bt;for(const en of yt){const qe=[],Re=[];for(const pn of en){const un=pn.x,jn=pn.y,Ki=Ut[0]*un+Ut[4]*jn+Ut[12],Qi=Ut[1]*un+Ut[5]*jn+Ut[13],na=Ut[2]*un+Ut[6]*jn+Ut[14],qs=Ut[3]*un+Ut[7]*jn+Ut[15],Ss=na+Me,Zr=qs+Fe,cr=Ki+ln,Pa=Qi+Xe,as=na+We,$a=qs+Ve,ia=new O((Ki+ee)/Zr,(Qi+ne)/Zr);ia.z=Ss/Zr,qe.push(ia);const ra=new O(cr/$a,Pa/$a);ra.z=as/$a,Re.push(ra)}Jt.push(qe),Ht.push(Re)}return[Jt,Ht]})(T,st,tt,U);return(function(yt,Ct,Bt){let Ut=1/0;hp(Bt,Ct)&&(Ut=Op(Bt,Ct[0]));for(let Jt=0;Jt<Ct.length;Jt++){const Ht=Ct[Jt],ee=yt[Jt];for(let ne=0;ne<Ht.length-1;ne++){const Me=Ht[ne],Fe=[Me,Ht[ne+1],ee[ne+1],ee[ne],Me];zr(Bt,Fe)&&(Ut=Math.min(Ut,Op(Bt,Fe)))}}return Ut!==1/0&&Ut})(gt[0],gt[1],ct)}}function hf(c,s){return c.x*s.x+c.y*s.y}function Op(c,s){if(c.length===1){let d=0;const v=s[d++];let T;for(;!T||v.equals(T);)if(T=s[d++],!T)return 1/0;for(;d<s.length;d++){const P=s[d],k=c[0],R=T.sub(v),U=P.sub(v),G=k.sub(v),tt=hf(R,R),st=hf(R,U),ct=hf(U,U),gt=hf(G,R),yt=hf(G,U),Ct=tt*ct-st*st,Bt=(ct*gt-st*yt)/Ct,Ut=(tt*yt-st*gt)/Ct,Jt=v.z*(1-Bt-Ut)+T.z*Bt+P.z*Ut;if(isFinite(Jt))return Jt}return 1/0}{let d=1/0;for(const v of s)d=Math.min(d,v.z);return d}}const mg=bi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:gg}=mg,P_=bi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:yg}=P_,Dp=tc.VectorTileFeature.types,_g=Math.cos(Math.PI/180*37.5),vg=Math.pow(2,14)/.5;class ld{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new fn,this.layoutVertexArray2=new on,this.indexArray=new ua,this.programConfigurations=new En(s.layers,s.zoom),this.segments=new ji,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(s,d,v){this.hasPattern=Ap("line",this.layers,d);const T=this.layers[0].layout.get("line-sort-key"),P=!T.isConstant(),k=[];for(const{feature:R,id:U,index:G,sourceLayerIndex:tt}of s){const st=this.layers[0]._featureFilter.needGeometry,ct=Fl(R,st);if(!this.layers[0]._featureFilter.filter(new Rt(this.zoom),ct,v))continue;const gt=P?T.evaluate(ct,{},v):void 0,yt={id:U,properties:R.properties,type:R.type,sourceLayerIndex:tt,index:G,geometry:st?ct.geometry:mu(R),patterns:{},sortKey:gt};k.push(yt)}P&&k.sort(((R,U)=>R.sortKey-U.sortKey));for(const R of k){const{geometry:U,index:G,sourceLayerIndex:tt}=R;if(this.hasPattern){const st=ad("line",this.layers,R,this.zoom,d);this.patternFeatures.push(st)}else this.addFeature(R,U,G,v,{});d.featureIndex.insert(s[G].feature,U,G,tt,this.index)}}update(s,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,d,this.stateDependentLayers,v)}addFeatures(s,d,v){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,d,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,yg)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,gg),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,d,v,T,P){const k=this.layers[0].layout,R=k.get("line-join").evaluate(s,{}),U=k.get("line-cap"),G=k.get("line-miter-limit"),tt=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const st of d)this.addLine(st,s,R,U,G,tt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,P,T)}addLine(s,d,v,T,P,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ut=0;Ut<s.length-1;Ut++)this.totalDistance+=s[Ut].dist(s[Ut+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=Dp[d.type]==="Polygon";let U=s.length;for(;U>=2&&s[U-1].equals(s[U-2]);)U--;let G=0;for(;G<U-1&&s[G].equals(s[G+1]);)G++;if(U<(R?3:2))return;v==="bevel"&&(P=1.05);const tt=this.overscaling<=16?15*yr/(512*this.overscaling):0,st=this.segments.prepareSegment(10*U,this.layoutVertexArray,this.indexArray);let ct,gt,yt,Ct,Bt;this.e1=this.e2=-1,R&&(ct=s[U-2],Bt=s[G].sub(ct)._unit()._perp());for(let Ut=G;Ut<U;Ut++){if(yt=Ut===U-1?R?s[G+1]:void 0:s[Ut+1],yt&&s[Ut].equals(yt))continue;Bt&&(Ct=Bt),ct&&(gt=ct),ct=s[Ut],Bt=yt?yt.sub(ct)._unit()._perp():Ct,Ct=Ct||Bt;let Jt=Ct.add(Bt);Jt.x===0&&Jt.y===0||Jt._unit();const Ht=Ct.x*Bt.x+Ct.y*Bt.y,ee=Jt.x*Bt.x+Jt.y*Bt.y,ne=ee!==0?1/ee:1/0,Me=2*Math.sqrt(2-2*ee),Fe=ee<_g&&gt&&yt,ln=Ct.x*Bt.y-Ct.y*Bt.x>0;if(Fe&&Ut>G){const Ve=ct.dist(gt);if(Ve>2*tt){const en=ct.sub(ct.sub(gt)._mult(tt/Ve)._round());this.updateDistance(gt,en),this.addCurrentVertex(en,Ct,0,0,st),gt=en}}const Xe=gt&&yt;let We=Xe?v:R?"butt":T;if(Xe&&We==="round"&&(ne<k?We="miter":ne<=2&&(We="fakeround")),We==="miter"&&ne>P&&(We="bevel"),We==="bevel"&&(ne>2&&(We="flipbevel"),ne<P&&(We="miter")),gt&&this.updateDistance(gt,ct),We==="miter")Jt._mult(ne),this.addCurrentVertex(ct,Jt,0,0,st);else if(We==="flipbevel"){if(ne>100)Jt=Bt.mult(-1);else{const Ve=ne*Ct.add(Bt).mag()/Ct.sub(Bt).mag();Jt._perp()._mult(Ve*(ln?-1:1))}this.addCurrentVertex(ct,Jt,0,0,st),this.addCurrentVertex(ct,Jt.mult(-1),0,0,st)}else if(We==="bevel"||We==="fakeround"){const Ve=-Math.sqrt(ne*ne-1),en=ln?Ve:0,qe=ln?0:Ve;if(gt&&this.addCurrentVertex(ct,Ct,en,qe,st),We==="fakeround"){const Re=Math.round(180*Me/Math.PI/20);for(let pn=1;pn<Re;pn++){let un=pn/Re;if(un!==.5){const Ki=un-.5;un+=un*Ki*(un-1)*((1.0904+Ht*(Ht*(3.55645-1.43519*Ht)-3.2452))*Ki*Ki+(.848013+Ht*(.215638*Ht-1.06021)))}const jn=Bt.sub(Ct)._mult(un)._add(Ct)._unit()._mult(ln?-1:1);this.addHalfVertex(ct,jn.x,jn.y,!1,ln,0,st)}}yt&&this.addCurrentVertex(ct,Bt,-en,-qe,st)}else if(We==="butt")this.addCurrentVertex(ct,Jt,0,0,st);else if(We==="square"){const Ve=gt?1:-1;this.addCurrentVertex(ct,Jt,Ve,Ve,st)}else We==="round"&&(gt&&(this.addCurrentVertex(ct,Ct,0,0,st),this.addCurrentVertex(ct,Ct,1,1,st,!0)),yt&&(this.addCurrentVertex(ct,Bt,-1,-1,st,!0),this.addCurrentVertex(ct,Bt,0,0,st)));if(Fe&&Ut<U-1){const Ve=ct.dist(yt);if(Ve>2*tt){const en=ct.add(yt.sub(ct)._mult(tt/Ve)._round());this.updateDistance(ct,en),this.addCurrentVertex(en,Bt,0,0,st),ct=en}}}}addCurrentVertex(s,d,v,T,P,k=!1){const R=d.y*T-d.x,U=-d.y-d.x*T;this.addHalfVertex(s,d.x+d.y*v,d.y-d.x*v,k,!1,v,P),this.addHalfVertex(s,R,U,k,!0,-T,P),this.distance>vg/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,d,v,T,P,k))}addHalfVertex({x:s,y:d},v,T,P,k,R,U){const G=.5*(this.lineClips?this.scaledDistance*(vg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(P?1:0),(d<<1)+(k?1:0),Math.round(63*v)+128,Math.round(63*T)+128,1+(R===0?0:R<0?-1:1)|(63&G)<<2,G>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const tt=U.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,tt),U.primitiveLength++),k?this.e2=tt:this.e1=tt}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,d){this.distance+=s.dist(d),this.updateScaledDistance()}}let xg,yu;Ze("LineBucket",ld,{omit:["layers","patternFeatures"]});var zp={get paint(){return yu=yu||new oi({"line-opacity":new Ge(_e.paint_line["line-opacity"]),"line-color":new Ge(_e.paint_line["line-color"]),"line-translate":new Qe(_e.paint_line["line-translate"]),"line-translate-anchor":new Qe(_e.paint_line["line-translate-anchor"]),"line-width":new Ge(_e.paint_line["line-width"]),"line-gap-width":new Ge(_e.paint_line["line-gap-width"]),"line-offset":new Ge(_e.paint_line["line-offset"]),"line-blur":new Ge(_e.paint_line["line-blur"]),"line-dasharray":new Xn(_e.paint_line["line-dasharray"]),"line-pattern":new ri(_e.paint_line["line-pattern"]),"line-gradient":new ho(_e.paint_line["line-gradient"])})},get layout(){return xg=xg||new oi({"line-cap":new Qe(_e.layout_line["line-cap"]),"line-join":new Ge(_e.layout_line["line-join"]),"line-miter-limit":new Qe(_e.layout_line["line-miter-limit"]),"line-round-limit":new Qe(_e.layout_line["line-round-limit"]),"line-sort-key":new Ge(_e.layout_line["line-sort-key"])})}};class Zx extends Ge{possiblyEvaluate(s,d){return d=new Rt(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(s,d)}evaluate(s,d,v,T){return d=rt({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(s,d,v,T)}}let ud;class ec extends Or{constructor(s){super(s,zp),this.gradientVersion=0,ud||(ud=new Zx(zp.paint.properties["line-width"].specification),ud.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!(function(v){return v._styleExpression!==void 0})(d)&&d._styleExpression.expression instanceof Aa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,d){super.recalculate(s,d),this.paint._values["line-floorwidth"]=ud.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new ld(s)}queryRadius(s){const d=s,v=Lp(Cc("line-width",this,d),Cc("line-gap-width",this,d)),T=Cc("line-offset",this,d);return v/2+Math.abs(T)+Pc(this.paint.get("line-translate"))}queryIntersectsFeature(s,d,v,T,P,k,R){const U=sh(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),k.angle,R),G=R/2*Lp(this.paint.get("line-width").evaluate(d,v),this.paint.get("line-gap-width").evaluate(d,v)),tt=this.paint.get("line-offset").evaluate(d,v);return tt&&(T=(function(st,ct){const gt=[];for(let yt=0;yt<st.length;yt++){const Ct=st[yt],Bt=[];for(let Ut=0;Ut<Ct.length;Ut++){const Jt=Ct[Ut-1],Ht=Ct[Ut],ee=Ct[Ut+1],ne=Ut===0?new O(0,0):Ht.sub(Jt)._unit()._perp(),Me=Ut===Ct.length-1?new O(0,0):ee.sub(Ht)._unit()._perp(),Fe=ne._add(Me)._unit(),ln=Fe.x*Me.x+Fe.y*Me.y;ln!==0&&Fe._mult(1/ln),Bt.push(Fe._mult(ct)._add(Ht))}gt.push(Bt)}return gt})(T,tt*R)),(function(st,ct,gt){for(let yt=0;yt<ct.length;yt++){const Ct=ct[yt];if(st.length>=3){for(let Bt=0;Bt<Ct.length;Bt++)if(ha(st,Ct[Bt]))return!0}if(a_(st,Ct,gt))return!0}return!1})(U,T,G)}isTileClipped(){return!0}}function Lp(c,s){return s>0?s+2*c:c}const k_=bi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ip=bi([{name:"a_projected_pos",components:3,type:"Float32"}],4);bi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const cd=bi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);bi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lr=bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Gx=bi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Wx(c,s,d){return c.sections.forEach((v=>{v.text=(function(T,P,k){const R=P.layout.get("text-transform").evaluate(k,{});return R==="uppercase"?T=T.toLocaleUpperCase():R==="lowercase"&&(T=T.toLocaleLowerCase()),mt.applyArabicShaping&&(T=mt.applyArabicShaping(T)),T})(v.text,s,d)})),c}bi([{name:"triangle",components:3,type:"Uint16"}]),bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),bi([{type:"Float32",name:"offsetX"}]),bi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),bi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const ff={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var _r=24,nc=fi,bg=function(c,s,d,v,T){var P,k,R=8*T-v-1,U=(1<<R)-1,G=U>>1,tt=-7,st=T-1,ct=-1,gt=c[s+st];for(st+=ct,P=gt&(1<<-tt)-1,gt>>=-tt,tt+=R;tt>0;P=256*P+c[s+st],st+=ct,tt-=8);for(k=P&(1<<-tt)-1,P>>=-tt,tt+=v;tt>0;k=256*k+c[s+st],st+=ct,tt-=8);if(P===0)P=1-G;else{if(P===U)return k?NaN:1/0*(gt?-1:1);k+=Math.pow(2,v),P-=G}return(gt?-1:1)*k*Math.pow(2,P-v)},wg=function(c,s,d,v,T,P){var k,R,U,G=8*P-T-1,tt=(1<<G)-1,st=tt>>1,ct=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,gt=0,yt=1,Ct=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(R=isNaN(s)?1:0,k=tt):(k=Math.floor(Math.log(s)/Math.LN2),s*(U=Math.pow(2,-k))<1&&(k--,U*=2),(s+=k+st>=1?ct/U:ct*Math.pow(2,1-st))*U>=2&&(k++,U/=2),k+st>=tt?(R=0,k=tt):k+st>=1?(R=(s*U-1)*Math.pow(2,T),k+=st):(R=s*Math.pow(2,st-1)*Math.pow(2,T),k=0));T>=8;c[d+gt]=255&R,gt+=yt,R/=256,T-=8);for(k=k<<T|R,G+=T;G>0;c[d+gt]=255&k,gt+=yt,k/=256,G-=8);c[d+gt-yt]|=128*Ct};function fi(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}fi.Varint=0,fi.Fixed64=1,fi.Bytes=2,fi.Fixed32=5;var pl=4294967296,Sg=1/pl,Rp=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _u(c){return c.type===fi.Bytes?c.readVarint()+c.pos:c.pos+1}function Dc(c,s,d){return d?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}function Bp(c,s,d){var v=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));d.realloc(v);for(var T=d.pos-1;T>=c;T--)d.buf[T+v]=d.buf[T]}function Np(c,s){for(var d=0;d<c.length;d++)s.writeVarint(c[d])}function O_(c,s){for(var d=0;d<c.length;d++)s.writeSVarint(c[d])}function ic(c,s){for(var d=0;d<c.length;d++)s.writeFloat(c[d])}function da(c,s){for(var d=0;d<c.length;d++)s.writeDouble(c[d])}function Tg(c,s){for(var d=0;d<c.length;d++)s.writeBoolean(c[d])}function D_(c,s){for(var d=0;d<c.length;d++)s.writeFixed32(c[d])}function Va(c,s){for(var d=0;d<c.length;d++)s.writeSFixed32(c[d])}function Yx(c,s){for(var d=0;d<c.length;d++)s.writeFixed64(c[d])}function z_(c,s){for(var d=0;d<c.length;d++)s.writeSFixed64(c[d])}function hd(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+16777216*c[s+3]}function Zi(c,s,d){c[d]=s,c[d+1]=s>>>8,c[d+2]=s>>>16,c[d+3]=s>>>24}function js(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+(c[s+3]<<24)}fi.prototype={destroy:function(){this.buf=null},readFields:function(c,s,d){for(d=d||this.length;this.pos<d;){var v=this.readVarint(),T=v>>3,P=this.pos;this.type=7&v,c(T,s,this),this.pos===P&&this.skip(v)}return s},readMessage:function(c,s){return this.readFields(c,s,this.readVarint()+this.pos)},readFixed32:function(){var c=hd(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=js(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=hd(this.buf,this.pos)+hd(this.buf,this.pos+4)*pl;return this.pos+=8,c},readSFixed64:function(){var c=hd(this.buf,this.pos)+js(this.buf,this.pos+4)*pl;return this.pos+=8,c},readFloat:function(){var c=bg(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=bg(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var s,d,v=this.buf;return s=127&(d=v[this.pos++]),d<128?s:(s|=(127&(d=v[this.pos++]))<<7,d<128?s:(s|=(127&(d=v[this.pos++]))<<14,d<128?s:(s|=(127&(d=v[this.pos++]))<<21,d<128?s:(function(T,P,k){var R,U,G=k.buf;if(R=(112&(U=G[k.pos++]))>>4,U<128||(R|=(127&(U=G[k.pos++]))<<3,U<128)||(R|=(127&(U=G[k.pos++]))<<10,U<128)||(R|=(127&(U=G[k.pos++]))<<17,U<128)||(R|=(127&(U=G[k.pos++]))<<24,U<128)||(R|=(1&(U=G[k.pos++]))<<31,U<128))return Dc(T,R,P);throw new Error("Expected varint not more than 10 bytes")})(s|=(15&(d=v[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,s=this.pos;return this.pos=c,c-s>=12&&Rp?(function(d,v,T){return Rp.decode(d.subarray(v,T))})(this.buf,s,c):(function(d,v,T){for(var P="",k=v;k<T;){var R,U,G,tt=d[k],st=null,ct=tt>239?4:tt>223?3:tt>191?2:1;if(k+ct>T)break;ct===1?tt<128&&(st=tt):ct===2?(192&(R=d[k+1]))==128&&(st=(31&tt)<<6|63&R)<=127&&(st=null):ct===3?(U=d[k+2],(192&(R=d[k+1]))==128&&(192&U)==128&&((st=(15&tt)<<12|(63&R)<<6|63&U)<=2047||st>=55296&&st<=57343)&&(st=null)):ct===4&&(U=d[k+2],G=d[k+3],(192&(R=d[k+1]))==128&&(192&U)==128&&(192&G)==128&&((st=(15&tt)<<18|(63&R)<<12|(63&U)<<6|63&G)<=65535||st>=1114112)&&(st=null)),st===null?(st=65533,ct=1):st>65535&&(st-=65536,P+=String.fromCharCode(st>>>10&1023|55296),st=56320|1023&st),P+=String.fromCharCode(st),k+=ct}return P})(this.buf,s,c)},readBytes:function(){var c=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,c);return this.pos=c,s},readPackedVarint:function(c,s){if(this.type!==fi.Bytes)return c.push(this.readVarint(s));var d=_u(this);for(c=c||[];this.pos<d;)c.push(this.readVarint(s));return c},readPackedSVarint:function(c){if(this.type!==fi.Bytes)return c.push(this.readSVarint());var s=_u(this);for(c=c||[];this.pos<s;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==fi.Bytes)return c.push(this.readBoolean());var s=_u(this);for(c=c||[];this.pos<s;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==fi.Bytes)return c.push(this.readFloat());var s=_u(this);for(c=c||[];this.pos<s;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==fi.Bytes)return c.push(this.readDouble());var s=_u(this);for(c=c||[];this.pos<s;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==fi.Bytes)return c.push(this.readFixed32());var s=_u(this);for(c=c||[];this.pos<s;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==fi.Bytes)return c.push(this.readSFixed32());var s=_u(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==fi.Bytes)return c.push(this.readFixed64());var s=_u(this);for(c=c||[];this.pos<s;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==fi.Bytes)return c.push(this.readSFixed64());var s=_u(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed64());return c},skip:function(c){var s=7&c;if(s===fi.Varint)for(;this.buf[this.pos++]>127;);else if(s===fi.Bytes)this.pos=this.readVarint()+this.pos;else if(s===fi.Fixed32)this.pos+=4;else{if(s!==fi.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(c,s){this.writeVarint(c<<3|s)},realloc:function(c){for(var s=this.length||16;s<this.pos+c;)s*=2;if(s!==this.length){var d=new Uint8Array(s);d.set(this.buf),this.buf=d,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Zi(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Zi(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Zi(this.buf,-1&c,this.pos),Zi(this.buf,Math.floor(c*Sg),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Zi(this.buf,-1&c,this.pos),Zi(this.buf,Math.floor(c*Sg),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?(function(s,d){var v,T;if(s>=0?(v=s%4294967296|0,T=s/4294967296|0):(T=~(-s/4294967296),4294967295^(v=~(-s%4294967296))?v=v+1|0:(v=0,T=T+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),(function(P,k,R){R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,R.buf[R.pos]=127&(P>>>=7)})(v,0,d),(function(P,k){var R=(7&P)<<4;k.buf[k.pos++]|=R|((P>>>=3)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P)))))})(T,d)})(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var s=this.pos;this.pos=(function(v,T,P){for(var k,R,U=0;U<T.length;U++){if((k=T.charCodeAt(U))>55295&&k<57344){if(!R){k>56319||U+1===T.length?(v[P++]=239,v[P++]=191,v[P++]=189):R=k;continue}if(k<56320){v[P++]=239,v[P++]=191,v[P++]=189,R=k;continue}k=R-55296<<10|k-56320|65536,R=null}else R&&(v[P++]=239,v[P++]=191,v[P++]=189,R=null);k<128?v[P++]=k:(k<2048?v[P++]=k>>6|192:(k<65536?v[P++]=k>>12|224:(v[P++]=k>>18|240,v[P++]=k>>12&63|128),v[P++]=k>>6&63|128),v[P++]=63&k|128)}return P})(this.buf,c,this.pos);var d=this.pos-s;d>=128&&Bp(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeFloat:function(c){this.realloc(4),wg(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),wg(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var s=c.length;this.writeVarint(s),this.realloc(s);for(var d=0;d<s;d++)this.buf[this.pos++]=c[d]},writeRawMessage:function(c,s){this.pos++;var d=this.pos;c(s,this);var v=this.pos-d;v>=128&&Bp(d,v,this),this.pos=d-1,this.writeVarint(v),this.pos+=v},writeMessage:function(c,s,d){this.writeTag(c,fi.Bytes),this.writeRawMessage(s,d)},writePackedVarint:function(c,s){s.length&&this.writeMessage(c,Np,s)},writePackedSVarint:function(c,s){s.length&&this.writeMessage(c,O_,s)},writePackedBoolean:function(c,s){s.length&&this.writeMessage(c,Tg,s)},writePackedFloat:function(c,s){s.length&&this.writeMessage(c,ic,s)},writePackedDouble:function(c,s){s.length&&this.writeMessage(c,da,s)},writePackedFixed32:function(c,s){s.length&&this.writeMessage(c,D_,s)},writePackedSFixed32:function(c,s){s.length&&this.writeMessage(c,Va,s)},writePackedFixed64:function(c,s){s.length&&this.writeMessage(c,Yx,s)},writePackedSFixed64:function(c,s){s.length&&this.writeMessage(c,z_,s)},writeBytesField:function(c,s){this.writeTag(c,fi.Bytes),this.writeBytes(s)},writeFixed32Field:function(c,s){this.writeTag(c,fi.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(c,s){this.writeTag(c,fi.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(c,s){this.writeTag(c,fi.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(c,s){this.writeTag(c,fi.Fixed64),this.writeSFixed64(s)},writeVarintField:function(c,s){this.writeTag(c,fi.Varint),this.writeVarint(s)},writeSVarintField:function(c,s){this.writeTag(c,fi.Varint),this.writeSVarint(s)},writeStringField:function(c,s){this.writeTag(c,fi.Bytes),this.writeString(s)},writeFloatField:function(c,s){this.writeTag(c,fi.Fixed32),this.writeFloat(s)},writeDoubleField:function(c,s){this.writeTag(c,fi.Fixed64),this.writeDouble(s)},writeBooleanField:function(c,s){this.writeVarintField(c,!!s)}};var Ul=_(nc);const jp=3;function L_(c,s,d){c===1&&d.readMessage(I_,s)}function I_(c,s,d){if(c===3){const{id:v,bitmap:T,width:P,height:k,left:R,top:U,advance:G}=d.readMessage(Xx,{});s.push({id:v,bitmap:new rf({width:P+2*jp,height:k+2*jp},T),metrics:{width:P,height:k,left:R,top:U,advance:G}})}}function Xx(c,s,d){c===1?s.id=d.readVarint():c===2?s.bitmap=d.readBytes():c===3?s.width=d.readVarint():c===4?s.height=d.readVarint():c===5?s.left=d.readSVarint():c===6?s.top=d.readSVarint():c===7&&(s.advance=d.readVarint())}const fd=jp;function Fs(c){let s=0,d=0;for(const k of c)s+=k.w*k.h,d=Math.max(d,k.w);c.sort(((k,R)=>R.h-k.h));const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),d),h:1/0}];let T=0,P=0;for(const k of c)for(let R=v.length-1;R>=0;R--){const U=v[R];if(!(k.w>U.w||k.h>U.h)){if(k.x=U.x,k.y=U.y,P=Math.max(P,k.y+k.h),T=Math.max(T,k.x+k.w),k.w===U.w&&k.h===U.h){const G=v.pop();R<v.length&&(v[R]=G)}else k.h===U.h?(U.x+=k.w,U.w-=k.w):k.w===U.w?(U.y+=k.h,U.h-=k.h):(v.push({x:U.x+k.w,y:U.y,w:U.w-k.w,h:k.h}),U.y+=k.h,U.h-=k.h);break}}return{w:T,h:P,fill:s/(T*P)||0}}const vr=1;class Fp{constructor(s,{pixelRatio:d,version:v,stretchX:T,stretchY:P,content:k}){this.paddedRect=s,this.pixelRatio=d,this.stretchX=T,this.stretchY=P,this.content=k,this.version=v}get tl(){return[this.paddedRect.x+vr,this.paddedRect.y+vr]}get br(){return[this.paddedRect.x+this.paddedRect.w-vr,this.paddedRect.y+this.paddedRect.h-vr]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*vr)/this.pixelRatio,(this.paddedRect.h-2*vr)/this.pixelRatio]}}class Us{constructor(s,d){const v={},T={};this.haveRenderCallbacks=[];const P=[];this.addImages(s,v,P),this.addImages(d,T,P);const{w:k,h:R}=Fs(P),U=new po({width:k||1,height:R||1});for(const G in s){const tt=s[G],st=v[G].paddedRect;po.copy(tt.data,U,{x:0,y:0},{x:st.x+vr,y:st.y+vr},tt.data)}for(const G in d){const tt=d[G],st=T[G].paddedRect,ct=st.x+vr,gt=st.y+vr,yt=tt.data.width,Ct=tt.data.height;po.copy(tt.data,U,{x:0,y:0},{x:ct,y:gt},tt.data),po.copy(tt.data,U,{x:0,y:Ct-1},{x:ct,y:gt-1},{width:yt,height:1}),po.copy(tt.data,U,{x:0,y:0},{x:ct,y:gt+Ct},{width:yt,height:1}),po.copy(tt.data,U,{x:yt-1,y:0},{x:ct-1,y:gt},{width:1,height:Ct}),po.copy(tt.data,U,{x:0,y:0},{x:ct+yt,y:gt},{width:1,height:Ct})}this.image=U,this.iconPositions=v,this.patternPositions=T}addImages(s,d,v){for(const T in s){const P=s[T],k={x:0,y:0,w:P.data.width+2*vr,h:P.data.height+2*vr};v.push(k),d[T]=new Fp(k,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(T)}}patchUpdatedImages(s,d){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in s.updatedImages)this.patchUpdatedImage(this.iconPositions[v],s.getImage(v),d),this.patchUpdatedImage(this.patternPositions[v],s.getImage(v),d)}patchUpdatedImage(s,d,v){if(!s||!d||s.version===d.version)return;s.version=d.version;const[T,P]=s.tl;v.update(d.data,void 0,{x:T,y:P})}}var rc;Ze("ImagePosition",Fp),Ze("ImageAtlas",Us),a.ai=void 0,(rc=a.ai||(a.ai={}))[rc.none=0]="none",rc[rc.horizontal=1]="horizontal",rc[rc.vertical=2]="vertical",rc[rc.horizontalOnly=3]="horizontalOnly";const Wo=-17;class Vl{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,d){const v=new Vl;return v.scale=s||1,v.fontStack=d,v}static forImage(s){const d=new Vl;return d.imageName=s,d}}class mo{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,d){const v=new mo;for(let T=0;T<s.sections.length;T++){const P=s.sections[T];P.image?v.addImageSection(P):v.addTextSection(P,d)}return v}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=(function(s){let d="";for(let v=0;v<s.length;v++){const T=s.charCodeAt(v+1)||null,P=s.charCodeAt(v-1)||null;d+=T&&ef(T)&&!ff[s[v+1]]||P&&ef(P)&&!ff[s[v-1]]||!ff[s[v]]?s[v]:ff[s[v]]}return d})(this.text)}trim(){let s=0;for(let v=0;v<this.text.length&&pf[this.text.charCodeAt(v)];v++)s++;let d=this.text.length;for(let v=this.text.length-1;v>=0&&v>=s&&pf[this.text.charCodeAt(v)];v--)d--;this.text=this.text.substring(s,d),this.sectionIndex=this.sectionIndex.slice(s,d)}substring(s,d){const v=new mo;return v.text=this.text.substring(s,d),v.sectionIndex=this.sectionIndex.slice(s,d),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((s,d)=>Math.max(s,this.sections[d].scale)),0)}addTextSection(s,d){this.text+=s.text,this.sections.push(Vl.forText(s.scale,s.fontStack||d));const v=this.sections.length-1;for(let T=0;T<s.text.length;++T)this.sectionIndex.push(v)}addImageSection(s){const d=s.image?s.image.name:"";if(d.length===0)return void ye("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(Vl.forImage(d)),this.sectionIndex.push(this.sections.length-1)):ye("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function df(c,s,d,v,T,P,k,R,U,G,tt,st,ct,gt,yt,Ct){const Bt=mo.fromFeature(c,T);let Ut;st===a.ai.vertical&&Bt.verticalizePunctuation();const{processBidirectionalText:Jt,processStyledBidirectionalText:Ht}=mt;if(Jt&&Bt.sections.length===1){Ut=[];const Me=Jt(Bt.toString(),Up(Bt,G,P,s,v,gt,yt));for(const Fe of Me){const ln=new mo;ln.text=Fe,ln.sections=Bt.sections;for(let Xe=0;Xe<Fe.length;Xe++)ln.sectionIndex.push(0);Ut.push(ln)}}else if(Ht){Ut=[];const Me=Ht(Bt.text,Bt.sectionIndex,Up(Bt,G,P,s,v,gt,yt));for(const Fe of Me){const ln=new mo;ln.text=Fe[0],ln.sectionIndex=Fe[1],ln.sections=Bt.sections,Ut.push(ln)}}else Ut=(function(Me,Fe){const ln=[],Xe=Me.text;let We=0;for(const Ve of Fe)ln.push(Me.substring(We,Ve)),We=Ve;return We<Xe.length&&ln.push(Me.substring(We,Xe.length)),ln})(Bt,Up(Bt,G,P,s,v,gt,yt));const ee=[],ne={positionedLines:ee,text:Bt.toString(),top:tt[1],bottom:tt[1],left:tt[0],right:tt[0],writingMode:st,iconsInText:!1,verticalizable:!1};return(function(Me,Fe,ln,Xe,We,Ve,en,qe,Re,pn,un,jn){let Ki=0,Qi=Wo,na=0,qs=0;const Ss=qe==="right"?1:qe==="left"?0:.5;let Zr=0;for(const ia of We){ia.trim();const ra=ia.getMaxScale(),qa=(ra-1)*_r,Ha={positionedGlyphs:[],lineOffset:0};Me.positionedLines[Zr]=Ha;const ka=Ha.positionedGlyphs;let Hs=0;if(!ia.length()){Qi+=Ve,++Zr;continue}for(let Rr=0;Rr<ia.length();Rr++){const Zn=ia.getSection(Rr),Za=ia.getSectionIndex(Rr),Oa=ia.getCharCode(Rr);let xr=0,Br=null,gl=null,xo=null,ss=_r;const yl=!(Re===a.ai.horizontal||!un&&!Uo(Oa)||un&&(pf[Oa]||(cr=Oa,Ye.Arabic(cr)||Ye["Arabic Supplement"](cr)||Ye["Arabic Extended-A"](cr)||Ye["Arabic Presentation Forms-A"](cr)||Ye["Arabic Presentation Forms-B"](cr))));if(Zn.imageName){const Yo=Xe[Zn.imageName];if(!Yo)continue;xo=Zn.imageName,Me.iconsInText=Me.iconsInText||!0,gl=Yo.paddedRect;const ma=Yo.displaySize;Zn.scale=Zn.scale*_r/jn,Br={width:ma[0],height:ma[1],left:vr,top:-fd,advance:yl?ma[1]:ma[0]},xr=qa+(_r-ma[1]*Zn.scale),ss=Br.advance;const Su=yl?ma[0]*Zn.scale-_r*ra:ma[1]*Zn.scale-_r*ra;Su>0&&Su>Hs&&(Hs=Su)}else{const Yo=ln[Zn.fontStack],ma=Yo&&Yo[Oa];if(ma&&ma.rect)gl=ma.rect,Br=ma.metrics;else{const Su=Fe[Zn.fontStack],Pd=Su&&Su[Oa];if(!Pd)continue;Br=Pd.metrics}xr=(ra-Zn.scale)*_r}yl?(Me.verticalizable=!0,ka.push({glyph:Oa,imageName:xo,x:Ki,y:Qi+xr,vertical:yl,scale:Zn.scale,fontStack:Zn.fontStack,sectionIndex:Za,metrics:Br,rect:gl}),Ki+=ss*Zn.scale+pn):(ka.push({glyph:Oa,imageName:xo,x:Ki,y:Qi+xr,vertical:yl,scale:Zn.scale,fontStack:Zn.fontStack,sectionIndex:Za,metrics:Br,rect:gl}),Ki+=Br.advance*Zn.scale+pn)}ka.length!==0&&(na=Math.max(Ki-pn,na),pd(ka,0,ka.length-1,Ss,Hs)),Ki=0;const hr=Ve*ra+Hs;Ha.lineOffset=Math.max(Hs,qa),Qi+=hr,qs=Math.max(hr,qs),++Zr}var cr;const Pa=Qi-Wo,{horizontalAlign:as,verticalAlign:$a}=Vp(en);(function(ia,ra,qa,Ha,ka,Hs,hr,Rr,Zn){const Za=(ra-qa)*ka;let Oa=0;Oa=Hs!==hr?-Rr*Ha-Wo:(-Ha*Zn+.5)*hr;for(const xr of ia)for(const Br of xr.positionedGlyphs)Br.x+=Za,Br.y+=Oa})(Me.positionedLines,Ss,as,$a,na,qs,Ve,Pa,We.length),Me.top+=-$a*Pa,Me.bottom=Me.top+Pa,Me.left+=-as*na,Me.right=Me.left+na})(ne,s,d,v,Ut,k,R,U,st,G,ct,Ct),!(function(Me){for(const Fe of Me)if(Fe.positionedGlyphs.length!==0)return!1;return!0})(ee)&&ne}const pf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$l={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Ag(c,s,d,v,T,P){if(s.imageName){const k=v[s.imageName];return k?k.displaySize[0]*s.scale*_r/P+T:0}{const k=d[s.fontStack],R=k&&k[c];return R?R.metrics.advance*s.scale+T:0}}function fh(c,s,d,v){const T=Math.pow(c-s,2);return v?c<s?T/2:2*T:T+Math.abs(d)*d}function dd(c,s,d){let v=0;return c===10&&(v-=1e4),d&&(v+=150),c!==40&&c!==65288||(v+=50),s!==41&&s!==65289||(v+=50),v}function mf(c,s,d,v,T,P){let k=null,R=fh(s,d,T,P);for(const U of v){const G=fh(s-U.x,d,T,P)+U.badness;G<=R&&(k=U,R=G)}return{index:c,x:s,priorBreak:k,badness:R}}function dh(c){return c?dh(c.priorBreak).concat(c.index):[]}function Up(c,s,d,v,T,P,k){if(P!=="point")return[];if(!c)return[];const R=[],U=(function(ct,gt,yt,Ct,Bt,Ut){let Jt=0;for(let Ht=0;Ht<ct.length();Ht++){const ee=ct.getSection(Ht);Jt+=Ag(ct.getCharCode(Ht),ee,Ct,Bt,gt,Ut)}return Jt/Math.max(1,Math.ceil(Jt/yt))})(c,s,d,v,T,k),G=c.text.indexOf("")>=0;let tt=0;for(let ct=0;ct<c.length();ct++){const gt=c.getSection(ct),yt=c.getCharCode(ct);if(pf[yt]||(tt+=Ag(yt,gt,v,T,s,k)),ct<c.length()-1){const Ct=!((st=yt)<11904||!(Ye["Bopomofo Extended"](st)||Ye.Bopomofo(st)||Ye["CJK Compatibility Forms"](st)||Ye["CJK Compatibility Ideographs"](st)||Ye["CJK Compatibility"](st)||Ye["CJK Radicals Supplement"](st)||Ye["CJK Strokes"](st)||Ye["CJK Symbols and Punctuation"](st)||Ye["CJK Unified Ideographs Extension A"](st)||Ye["CJK Unified Ideographs"](st)||Ye["Enclosed CJK Letters and Months"](st)||Ye["Halfwidth and Fullwidth Forms"](st)||Ye.Hiragana(st)||Ye["Ideographic Description Characters"](st)||Ye["Kangxi Radicals"](st)||Ye["Katakana Phonetic Extensions"](st)||Ye.Katakana(st)||Ye["Vertical Forms"](st)||Ye["Yi Radicals"](st)||Ye["Yi Syllables"](st)));($l[yt]||Ct||gt.imageName)&&R.push(mf(ct+1,tt,U,R,dd(yt,c.getCharCode(ct+1),Ct&&G),!1))}}var st;return dh(mf(c.length(),tt,U,R,0,!0))}function Vp(c){let s=.5,d=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:s,verticalAlign:d}}function pd(c,s,d,v,T){if(!v&&!T)return;const P=c[d],k=(c[d].x+P.metrics.advance*P.scale)*v;for(let R=s;R<=d;R++)c[R].x-=k,c[R].y+=T}function R_(c,s,d){const{horizontalAlign:v,verticalAlign:T}=Vp(d),P=s[0]-c.displaySize[0]*v,k=s[1]-c.displaySize[1]*T;return{image:c,top:k,bottom:k+c.displaySize[1],left:P,right:P+c.displaySize[0]}}function md(c,s,d,v,T,P){const k=c.image;let R;if(k.content){const Bt=k.content,Ut=k.pixelRatio||1;R=[Bt[0]/Ut,Bt[1]/Ut,k.displaySize[0]-Bt[2]/Ut,k.displaySize[1]-Bt[3]/Ut]}const U=s.left*P,G=s.right*P;let tt,st,ct,gt;d==="width"||d==="both"?(gt=T[0]+U-v[3],st=T[0]+G+v[1]):(gt=T[0]+(U+G-k.displaySize[0])/2,st=gt+k.displaySize[0]);const yt=s.top*P,Ct=s.bottom*P;return d==="height"||d==="both"?(tt=T[1]+yt-v[0],ct=T[1]+Ct+v[2]):(tt=T[1]+(yt+Ct-k.displaySize[1])/2,ct=tt+k.displaySize[1]),{image:k,top:tt,right:st,bottom:ct,left:gt,collisionPadding:R}}const gf=255,vu=128,zc=gf*vu;function ki(c,s){const{expression:d}=s;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Rt(c+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:T}=d;let P=0;for(;P<v.length&&v[P]<=c;)P++;P=Math.max(0,P-1);let k=P;for(;k<v.length&&v[k]<c+1;)k++;k=Math.min(v.length-1,k);const R=v[P],U=v[k];return d.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:U,interpolationType:T}:{kind:"camera",minZoom:R,maxZoom:U,minSize:d.evaluate(new Rt(R)),maxSize:d.evaluate(new Rt(U)),interpolationType:T}}}function Gi(c,s,d){let v="never";const T=c.get(s);return T?v=T:c.get(d)&&(v="always"),v}const ai=tc.VectorTileFeature.types,li=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Oi(c,s,d,v,T,P,k,R,U,G,tt,st,ct){const gt=R?Math.min(zc,Math.round(R[0])):0,yt=R?Math.min(zc,Math.round(R[1])):0;c.emplaceBack(s,d,Math.round(32*v),Math.round(32*T),P,k,(gt<<1)+(U?1:0),yt,16*G,16*tt,256*st,256*ct)}function Vs(c,s,d){c.emplaceBack(s.x,s.y,d),c.emplaceBack(s.x,s.y,d),c.emplaceBack(s.x,s.y,d),c.emplaceBack(s.x,s.y,d)}function Lc(c){for(const s of c.sections)if(uo(s.text))return!0;return!1}class Ic{constructor(s){this.layoutVertexArray=new Ln,this.indexArray=new ua,this.programConfigurations=s,this.segments=new ji,this.dynamicLayoutVertexArray=new Pn,this.opacityVertexArray=new Fn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Gt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,d,v,T){this.isEmpty()||(v&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,k_.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,Ip.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,li,!0),this.opacityVertexBuffer.itemSize=1),(v||T)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ze("SymbolBuffers",Ic);class gd{constructor(s,d,v){this.layoutVertexArray=new s,this.layoutAttributes=d,this.indexArray=new v,this.segments=new ji,this.collisionVertexArray=new Pi}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,cd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ze("CollisionBuffers",gd);class go{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((k=>k.id)),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=yp([]),this.placementViewportMatrix=yp([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ki(this.zoom,d["text-size"]),this.iconSizeData=ki(this.zoom,d["icon-size"]);const v=this.layers[0].layout,T=v.get("symbol-sort-key"),P=v.get("symbol-z-order");this.canOverlap=Gi(v,"text-overlap","text-allow-overlap")!=="never"||Gi(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&!T.isConstant(),this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map((k=>a.ai[k]))),this.stateDependentLayerIds=this.layers.filter((k=>k.isStateDependent())).map((k=>k.id)),this.sourceID=s.sourceID}createArrays(){this.text=new Ic(new En(this.layers,this.zoom,(s=>/^text/.test(s)))),this.icon=new Ic(new En(this.layers,this.zoom,(s=>/^icon/.test(s)))),this.glyphOffsetArray=new Kt,this.lineVertexArray=new he,this.symbolInstances=new Nt,this.textAnchorOffsets=new Se}calculateGlyphDependencies(s,d,v,T,P){for(let k=0;k<s.length;k++)if(d[s.charCodeAt(k)]=!0,(v||T)&&P){const R=ff[s.charAt(k)];R&&(d[R.charCodeAt(0)]=!0)}}populate(s,d,v){const T=this.layers[0],P=T.layout,k=P.get("text-font"),R=P.get("text-field"),U=P.get("icon-image"),G=(R.value.kind!=="constant"||R.value.value instanceof Vr&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),tt=U.value.kind!=="constant"||!!U.value.value||Object.keys(U.parameters).length>0,st=P.get("symbol-sort-key");if(this.features=[],!G&&!tt)return;const ct=d.iconDependencies,gt=d.glyphDependencies,yt=d.availableImages,Ct=new Rt(this.zoom);for(const{feature:Bt,id:Ut,index:Jt,sourceLayerIndex:Ht}of s){const ee=T._featureFilter.needGeometry,ne=Fl(Bt,ee);if(!T._featureFilter.filter(Ct,ne,v))continue;let Me,Fe;if(ee||(ne.geometry=mu(Bt)),G){const Xe=T.getValueAndResolveTokens("text-field",ne,v,yt),We=Vr.factory(Xe);Lc(We)&&(this.hasRTLText=!0),(!this.hasRTLText||$()==="unavailable"||this.hasRTLText&&mt.isParsed())&&(Me=Wx(We,T,ne))}if(tt){const Xe=T.getValueAndResolveTokens("icon-image",ne,v,yt);Fe=Xe instanceof Rn?Xe:Rn.fromString(Xe)}if(!Me&&!Fe)continue;const ln=this.sortFeaturesByKey?st.evaluate(ne,{},v):void 0;if(this.features.push({id:Ut,text:Me,icon:Fe,index:Jt,sourceLayerIndex:Ht,geometry:ne.geometry,properties:Bt.properties,type:ai[Bt.type],sortKey:ln}),Fe&&(ct[Fe.name]=!0),Me){const Xe=k.evaluate(ne,{},v).join(","),We=P.get("text-rotation-alignment")!=="viewport"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const Ve of Me.sections)if(Ve.image)ct[Ve.image.name]=!0;else{const en=_s(Me.toString()),qe=Ve.fontStack||Xe,Re=gt[qe]=gt[qe]||{};this.calculateGlyphDependencies(Ve.text,Re,We,this.allowVerticalPlacement,en)}}}P.get("symbol-placement")==="line"&&(this.features=(function(Bt){const Ut={},Jt={},Ht=[];let ee=0;function ne(Xe){Ht.push(Bt[Xe]),ee++}function Me(Xe,We,Ve){const en=Jt[Xe];return delete Jt[Xe],Jt[We]=en,Ht[en].geometry[0].pop(),Ht[en].geometry[0]=Ht[en].geometry[0].concat(Ve[0]),en}function Fe(Xe,We,Ve){const en=Ut[We];return delete Ut[We],Ut[Xe]=en,Ht[en].geometry[0].shift(),Ht[en].geometry[0]=Ve[0].concat(Ht[en].geometry[0]),en}function ln(Xe,We,Ve){const en=Ve?We[0][We[0].length-1]:We[0][0];return`${Xe}:${en.x}:${en.y}`}for(let Xe=0;Xe<Bt.length;Xe++){const We=Bt[Xe],Ve=We.geometry,en=We.text?We.text.toString():null;if(!en){ne(Xe);continue}const qe=ln(en,Ve),Re=ln(en,Ve,!0);if(qe in Jt&&Re in Ut&&Jt[qe]!==Ut[Re]){const pn=Fe(qe,Re,Ve),un=Me(qe,Re,Ht[pn].geometry);delete Ut[qe],delete Jt[Re],Jt[ln(en,Ht[un].geometry,!0)]=un,Ht[pn].geometry=null}else qe in Jt?Me(qe,Re,Ve):Re in Ut?Fe(qe,Re,Ve):(ne(Xe),Ut[qe]=ee-1,Jt[Re]=ee-1)}return Ht.filter((Xe=>Xe.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Bt,Ut)=>Bt.sortKey-Ut.sortKey))}update(s,d,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,d,this.layers,v),this.icon.programConfigurations.updatePaintArrays(s,d,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,d){const v=this.lineVertexArray.length;if(s.segment!==void 0){let T=s.dist(d[s.segment+1]),P=s.dist(d[s.segment]);const k={};for(let R=s.segment+1;R<d.length;R++)k[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:T},R<d.length-1&&(T+=d[R+1].dist(d[R]));for(let R=s.segment||0;R>=0;R--)k[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:P},R>0&&(P+=d[R-1].dist(d[R]));for(let R=0;R<d.length;R++){const U=k[R];this.lineVertexArray.emplaceBack(U.x,U.y,U.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(s,d,v,T,P,k,R,U,G,tt,st,ct){const gt=s.indexArray,yt=s.layoutVertexArray,Ct=s.segments.prepareSegment(4*d.length,yt,gt,this.canOverlap?k.sortKey:void 0),Bt=this.glyphOffsetArray.length,Ut=Ct.vertexLength,Jt=this.allowVerticalPlacement&&R===a.ai.vertical?Math.PI/2:0,Ht=k.text&&k.text.sections;for(let ee=0;ee<d.length;ee++){const{tl:ne,tr:Me,bl:Fe,br:ln,tex:Xe,pixelOffsetTL:We,pixelOffsetBR:Ve,minFontScaleX:en,minFontScaleY:qe,glyphOffset:Re,isSDF:pn,sectionIndex:un}=d[ee],jn=Ct.vertexLength,Ki=Re[1];Oi(yt,U.x,U.y,ne.x,Ki+ne.y,Xe.x,Xe.y,v,pn,We.x,We.y,en,qe),Oi(yt,U.x,U.y,Me.x,Ki+Me.y,Xe.x+Xe.w,Xe.y,v,pn,Ve.x,We.y,en,qe),Oi(yt,U.x,U.y,Fe.x,Ki+Fe.y,Xe.x,Xe.y+Xe.h,v,pn,We.x,Ve.y,en,qe),Oi(yt,U.x,U.y,ln.x,Ki+ln.y,Xe.x+Xe.w,Xe.y+Xe.h,v,pn,Ve.x,Ve.y,en,qe),Vs(s.dynamicLayoutVertexArray,U,Jt),gt.emplaceBack(jn,jn+1,jn+2),gt.emplaceBack(jn+1,jn+2,jn+3),Ct.vertexLength+=4,Ct.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Re[0]),ee!==d.length-1&&un===d[ee+1].sectionIndex||s.programConfigurations.populatePaintArrays(yt.length,k,k.index,{},ct,Ht&&Ht[un])}s.placedSymbolArray.emplaceBack(U.x,U.y,Bt,this.glyphOffsetArray.length-Bt,Ut,G,tt,U.segment,v?v[0]:0,v?v[1]:0,T[0],T[1],R,0,!1,0,st)}_addCollisionDebugVertex(s,d,v,T,P,k){return d.emplaceBack(0,0),s.emplaceBack(v.x,v.y,T,P,Math.round(k.x),Math.round(k.y))}addCollisionDebugVertices(s,d,v,T,P,k,R){const U=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),G=U.vertexLength,tt=P.layoutVertexArray,st=P.collisionVertexArray,ct=R.anchorX,gt=R.anchorY;this._addCollisionDebugVertex(tt,st,k,ct,gt,new O(s,d)),this._addCollisionDebugVertex(tt,st,k,ct,gt,new O(v,d)),this._addCollisionDebugVertex(tt,st,k,ct,gt,new O(v,T)),this._addCollisionDebugVertex(tt,st,k,ct,gt,new O(s,T)),U.vertexLength+=4;const yt=P.indexArray;yt.emplaceBack(G,G+1),yt.emplaceBack(G+1,G+2),yt.emplaceBack(G+2,G+3),yt.emplaceBack(G+3,G),U.primitiveLength+=4}addDebugCollisionBoxes(s,d,v,T){for(let P=s;P<d;P++){const k=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,T?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gd(Yi,lr.members,er),this.iconCollisionBox=new gd(Yi,lr.members,er);for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(s,d,v,T,P,k,R,U,G){const tt={};for(let st=d;st<v;st++){const ct=s.get(st);tt.textBox={x1:ct.x1,y1:ct.y1,x2:ct.x2,y2:ct.y2,anchorPointX:ct.anchorPointX,anchorPointY:ct.anchorPointY},tt.textFeatureIndex=ct.featureIndex;break}for(let st=T;st<P;st++){const ct=s.get(st);tt.verticalTextBox={x1:ct.x1,y1:ct.y1,x2:ct.x2,y2:ct.y2,anchorPointX:ct.anchorPointX,anchorPointY:ct.anchorPointY},tt.verticalTextFeatureIndex=ct.featureIndex;break}for(let st=k;st<R;st++){const ct=s.get(st);tt.iconBox={x1:ct.x1,y1:ct.y1,x2:ct.x2,y2:ct.y2,anchorPointX:ct.anchorPointX,anchorPointY:ct.anchorPointY},tt.iconFeatureIndex=ct.featureIndex;break}for(let st=U;st<G;st++){const ct=s.get(st);tt.verticalIconBox={x1:ct.x1,y1:ct.y1,x2:ct.x2,y2:ct.y2,anchorPointX:ct.anchorPointX,anchorPointY:ct.anchorPointY},tt.verticalIconFeatureIndex=ct.featureIndex;break}return tt}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const v=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,d){const v=s.placedSymbolArray.get(d),T=v.vertexStartIndex+4*v.numGlyphs;for(let P=v.vertexStartIndex;P<T;P+=4)s.indexArray.emplaceBack(P,P+1,P+2),s.indexArray.emplaceBack(P+1,P+2,P+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(s),v=Math.cos(s),T=[],P=[],k=[];for(let R=0;R<this.symbolInstances.length;++R){k.push(R);const U=this.symbolInstances.get(R);T.push(0|Math.round(d*U.anchorX+v*U.anchorY)),P.push(U.featureIndex)}return k.sort(((R,U)=>T[R]-T[U]||P[U]-P[R])),k}addToSortKeyRanges(s,d){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===d?v.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const v=this.symbolInstances.get(d);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach(((T,P,k)=>{T>=0&&k.indexOf(T)===P&&this.addIndicesForPlacedSymbol(this.text,T)})),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Ir,ac;Ze("SymbolBucket",go,{omit:["layers","collisionBoxArray","features","compareText"]}),go.MAX_GLYPHS=65535,go.addDynamicAttributes=Vs;var sc={get paint(){return ac=ac||new oi({"icon-opacity":new Ge(_e.paint_symbol["icon-opacity"]),"icon-color":new Ge(_e.paint_symbol["icon-color"]),"icon-halo-color":new Ge(_e.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ge(_e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ge(_e.paint_symbol["icon-halo-blur"]),"icon-translate":new Qe(_e.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qe(_e.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ge(_e.paint_symbol["text-opacity"]),"text-color":new Ge(_e.paint_symbol["text-color"],{runtimeType:Er,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Ge(_e.paint_symbol["text-halo-color"]),"text-halo-width":new Ge(_e.paint_symbol["text-halo-width"]),"text-halo-blur":new Ge(_e.paint_symbol["text-halo-blur"]),"text-translate":new Qe(_e.paint_symbol["text-translate"]),"text-translate-anchor":new Qe(_e.paint_symbol["text-translate-anchor"])})},get layout(){return Ir=Ir||new oi({"symbol-placement":new Qe(_e.layout_symbol["symbol-placement"]),"symbol-spacing":new Qe(_e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qe(_e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ge(_e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qe(_e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qe(_e.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Qe(_e.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Qe(_e.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qe(_e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qe(_e.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ge(_e.layout_symbol["icon-size"]),"icon-text-fit":new Qe(_e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qe(_e.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ge(_e.layout_symbol["icon-image"]),"icon-rotate":new Ge(_e.layout_symbol["icon-rotate"]),"icon-padding":new Ge(_e.layout_symbol["icon-padding"]),"icon-keep-upright":new Qe(_e.layout_symbol["icon-keep-upright"]),"icon-offset":new Ge(_e.layout_symbol["icon-offset"]),"icon-anchor":new Ge(_e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qe(_e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qe(_e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qe(_e.layout_symbol["text-rotation-alignment"]),"text-field":new Ge(_e.layout_symbol["text-field"]),"text-font":new Ge(_e.layout_symbol["text-font"]),"text-size":new Ge(_e.layout_symbol["text-size"]),"text-max-width":new Ge(_e.layout_symbol["text-max-width"]),"text-line-height":new Qe(_e.layout_symbol["text-line-height"]),"text-letter-spacing":new Ge(_e.layout_symbol["text-letter-spacing"]),"text-justify":new Ge(_e.layout_symbol["text-justify"]),"text-radial-offset":new Ge(_e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qe(_e.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ge(_e.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ge(_e.layout_symbol["text-anchor"]),"text-max-angle":new Qe(_e.layout_symbol["text-max-angle"]),"text-writing-mode":new Qe(_e.layout_symbol["text-writing-mode"]),"text-rotate":new Ge(_e.layout_symbol["text-rotate"]),"text-padding":new Qe(_e.layout_symbol["text-padding"]),"text-keep-upright":new Qe(_e.layout_symbol["text-keep-upright"]),"text-transform":new Ge(_e.layout_symbol["text-transform"]),"text-offset":new Ge(_e.layout_symbol["text-offset"]),"text-allow-overlap":new Qe(_e.layout_symbol["text-allow-overlap"]),"text-overlap":new Qe(_e.layout_symbol["text-overlap"]),"text-ignore-placement":new Qe(_e.layout_symbol["text-ignore-placement"]),"text-optional":new Qe(_e.layout_symbol["text-optional"])})}};class $p{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:pr,this.defaultValue=s}evaluate(s){if(s.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(s.formattedSection))return d.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ze("FormatSectionOverride",$p,{omit:["defaultValue"]});class ws extends Or{constructor(s){super(s,sc)}recalculate(s,d){if(super.recalculate(s,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const T=[];for(const P of v)T.indexOf(P)<0&&T.push(P);this.layout._values["text-writing-mode"]=T}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,d,v,T){const P=this.layout.get(s).evaluate(d,{},v,T),k=this._unevaluatedLayout._values[s];return k.isDataDriven()||Fu(k.value)||!P?P:(function(R,U){return U.replace(/{([^{}]+)}/g,((G,tt)=>R&&tt in R?String(R[tt]):""))})(d.properties,P)}createBucket(s){return new go(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of sc.paint.overridableProperties){if(!ws.hasPaintOverride(this.layout,s))continue;const d=this.paint.get(s),v=new $p(d),T=new au(v,d.property.specification);let P=null;P=d.value.kind==="constant"||d.value.kind==="source"?new Vu("source",T):new zo("composite",T,d.value.zoomStops),this.paint._values[s]=new ci(d.property,P,d.parameters)}}_handleOverridablePaintPropertyUpdate(s,d,v){return!(!this.layout||d.isDataDriven()||v.isDataDriven())&&ws.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,d){const v=s.get("text-field"),T=sc.paint.properties[d];let P=!1;const k=R=>{for(const U of R)if(T.overrides&&T.overrides.hasOverride(U))return void(P=!0)};if(v.value.kind==="constant"&&v.value.value instanceof Vr)k(v.value.value.sections);else if(v.value.kind==="source"){const R=G=>{P||(G instanceof An&&yi(G.value)===Dt?k(G.value.sections):G instanceof Ds?k(G.sections):G.eachChild(R))},U=v.value;U._styleExpression&&R(U._styleExpression.expression)}return P}}let ph;var yd={get paint(){return ph=ph||new oi({"background-color":new Qe(_e.paint_background["background-color"]),"background-pattern":new Xn(_e.paint_background["background-pattern"]),"background-opacity":new Qe(_e.paint_background["background-opacity"])})}};class yo extends Or{constructor(s){super(s,yd)}}let qp;var Hp={get paint(){return qp=qp||new oi({"raster-opacity":new Qe(_e.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qe(_e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qe(_e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qe(_e.paint_raster["raster-brightness-max"]),"raster-saturation":new Qe(_e.paint_raster["raster-saturation"]),"raster-contrast":new Qe(_e.paint_raster["raster-contrast"]),"raster-resampling":new Qe(_e.paint_raster["raster-resampling"]),"raster-fade-duration":new Qe(_e.paint_raster["raster-fade-duration"])})}};class B_ extends Or{constructor(s){super(s,Hp)}}class Zp extends Or{constructor(s){super(s,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Gp{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const xu=63710088e-1;class ur{constructor(s,d){if(isNaN(s)||isNaN(d))throw new Error(`Invalid LngLat object: (${s}, ${d})`);if(this.lng=+s,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ur(ht(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const d=Math.PI/180,v=this.lat*d,T=s.lat*d,P=Math.sin(v)*Math.sin(T)+Math.cos(v)*Math.cos(T)*Math.cos((s.lng-this.lng)*d);return xu*Math.acos(Math.min(P,1))}static convert(s){if(s instanceof ur)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new ur(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new ur(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const oc=2*Math.PI*xu;function mh(c){return oc*Math.cos(c*Math.PI/180)}function bu(c){return(180+c)/360}function Wp(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function Yp(c,s){return c/mh(s)}function Mg(c){return 360*c-180}function gh(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class yf{constructor(s,d,v=0){this.x=+s,this.y=+d,this.z=+v}static fromLngLat(s,d=0){const v=ur.convert(s);return new yf(bu(v.lng),Wp(v.lat),Yp(d,v.lat))}toLngLat(){return new ur(Mg(this.x),gh(this.y))}toAltitude(){return this.z*mh(gh(this.y))}meterInMercatorCoordinateUnits(){return 1/oc*(s=gh(this.y),1/Math.cos(s*Math.PI/180));var s}}function _o(c,s,d){var v=2*Math.PI*6378137/256/Math.pow(2,d);return[c*v-2*Math.PI*6378137/2,s*v-2*Math.PI*6378137/2]}class Xp{constructor(s,d,v){if(s<0||s>25||v<0||v>=Math.pow(2,s)||d<0||d>=Math.pow(2,s))throw new Error(`x=${d}, y=${v}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=d,this.y=v,this.key=_f(0,s,s,d,v)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,d,v){const T=(k=this.y,R=this.z,U=_o(256*(P=this.x),256*(k=Math.pow(2,R)-k-1),R),G=_o(256*(P+1),256*(k+1),R),U[0]+","+U[1]+","+G[0]+","+G[1]);var P,k,R,U,G;const tt=(function(st,ct,gt){let yt,Ct="";for(let Bt=st;Bt>0;Bt--)yt=1<<Bt-1,Ct+=(ct&yt?1:0)+(gt&yt?2:0);return Ct})(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,tt).replace(/{bbox-epsg-3857}/g,T)}isChildOf(s){const d=this.z-s.z;return d>0&&s.x===this.x>>d&&s.y===this.y>>d}getTilePoint(s){const d=Math.pow(2,this.z);return new O((s.x*d-this.x)*yr,(s.y*d-this.y)*yr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class $s{constructor(s,d){this.wrap=s,this.canonical=d,this.key=_f(s,d.z,d.z,d.x,d.y)}}class vo{constructor(s,d,v,T,P){if(s<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${v}`);this.overscaledZ=s,this.wrap=d,this.canonical=new Xp(v,+T,+P),this.key=_f(d,s,v,T,P)}clone(){return new vo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-s;return s>this.canonical.z?new vo(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new vo(s,this.wrap,s,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(s,d){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-s;return s>this.canonical.z?_f(this.wrap*+d,s,this.canonical.z,this.canonical.x,this.canonical.y):_f(this.wrap*+d,s,s,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const d=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>d&&s.canonical.y===this.canonical.y>>d}children(s){if(this.overscaledZ>=s)return[new vo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,v=2*this.canonical.x,T=2*this.canonical.y;return[new vo(d,this.wrap,d,v,T),new vo(d,this.wrap,d,v+1,T),new vo(d,this.wrap,d,v,T+1),new vo(d,this.wrap,d,v+1,T+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new vo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new vo(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new $s(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new yf(s.x-this.wrap,s.y))}}function _f(c,s,d,v,T){(c*=2)<0&&(c=-1*c-1);const P=1<<d;return(P*P*c+P*T+v).toString(36)+d.toString(36)+s.toString(36)}Ze("CanonicalTileID",Xp),Ze("OverscaledTileID",vo,{omit:["posMatrix"]});class N_{constructor(s,d,v,T=1,P=1,k=1,R=0){if(this.uid=s,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void ye(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const U=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=T,this.greenFactor=P,this.blueFactor=k,this.baseShift=R;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let G=0;G<U;G++)this.data[this._idx(-1,G)]=this.data[this._idx(0,G)],this.data[this._idx(U,G)]=this.data[this._idx(U-1,G)],this.data[this._idx(G,-1)]=this.data[this._idx(G,0)],this.data[this._idx(G,U)]=this.data[this._idx(G,U-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(U,-1)]=this.data[this._idx(U-1,0)],this.data[this._idx(-1,U)]=this.data[this._idx(0,U-1)],this.data[this._idx(U,U)]=this.data[this._idx(U-1,U-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let G=0;G<U;G++)for(let tt=0;tt<U;tt++){const st=this.get(G,tt);st>this.max&&(this.max=st),st<this.min&&(this.min=st)}}get(s,d){const v=new Uint8Array(this.data.buffer),T=4*this._idx(s,d);return this.unpack(v[T],v[T+1],v[T+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,d){if(s<-1||s>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(s+1)}unpack(s,d,v){return s*this.redFactor+d*this.greenFactor+v*this.blueFactor-this.baseShift}getPixels(){return new po({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,d,v){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let T=d*this.dim,P=d*this.dim+this.dim,k=v*this.dim,R=v*this.dim+this.dim;switch(d){case-1:T=P-1;break;case 1:P=T+1}switch(v){case-1:k=R-1;break;case 1:R=k+1}const U=-d*this.dim,G=-v*this.dim;for(let tt=k;tt<R;tt++)for(let st=T;st<P;st++)this.data[this._idx(st,tt)]=s.data[this._idx(st+U,tt+G)]}}Ze("DEMData",N_);class lc{constructor(s){this._stringToNumber={},this._numberToString=[];for(let d=0;d<s.length;d++){const v=s[d];this._stringToNumber[v]=d,this._numberToString[d]=v}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class _d{constructor(s,d,v,T,P){this.type="Feature",this._vectorTileFeature=s,s._z=d,s._x=v,s._y=T,this.properties=s.properties,this.id=P}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(s[d]=this[d]);return s}}class Kp{constructor(s,d){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Kr(yr,16,0),this.grid3D=new Kr(yr,16,0),this.featureIndexArray=new ke,this.promoteId=d}insert(s,d,v,T,P,k){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,T,P);const U=k?this.grid3D:this.grid;for(let G=0;G<d.length;G++){const tt=d[G],st=[1/0,1/0,-1/0,-1/0];for(let ct=0;ct<tt.length;ct++){const gt=tt[ct];st[0]=Math.min(st[0],gt.x),st[1]=Math.min(st[1],gt.y),st[2]=Math.max(st[2],gt.x),st[3]=Math.max(st[3],gt.y)}st[0]<yr&&st[1]<yr&&st[2]>=0&&st[3]>=0&&U.insert(R,st[0],st[1],st[2],st[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new tc.VectorTile(new Ul(this.rawTileData)).layers,this.sourceLayerCoder=new lc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,d,v,T){this.loadVTLayers();const P=s.params||{},k=yr/s.tileSize/s.scale,R=gs(P.filter),U=s.queryGeometry,G=s.queryPadding*k,tt=Eg(U),st=this.grid.query(tt.minX-G,tt.minY-G,tt.maxX+G,tt.maxY+G),ct=Eg(s.cameraQueryGeometry),gt=this.grid3D.query(ct.minX-G,ct.minY-G,ct.maxX+G,ct.maxY+G,((Bt,Ut,Jt,Ht)=>(function(ee,ne,Me,Fe,ln){for(const We of ee)if(ne<=We.x&&Me<=We.y&&Fe>=We.x&&ln>=We.y)return!0;const Xe=[new O(ne,Me),new O(ne,ln),new O(Fe,ln),new O(Fe,Me)];if(ee.length>2){for(const We of Xe)if(ha(ee,We))return!0}for(let We=0;We<ee.length-1;We++)if(ea(ee[We],ee[We+1],Xe))return!0;return!1})(s.cameraQueryGeometry,Bt-G,Ut-G,Jt+G,Ht+G)));for(const Bt of gt)st.push(Bt);st.sort(j_);const yt={};let Ct;for(let Bt=0;Bt<st.length;Bt++){const Ut=st[Bt];if(Ut===Ct)continue;Ct=Ut;const Jt=this.featureIndexArray.get(Ut);let Ht=null;this.loadMatchingFeature(yt,Jt.bucketIndex,Jt.sourceLayerIndex,Jt.featureIndex,R,P.layers,P.availableImages,d,v,T,((ee,ne,Me)=>(Ht||(Ht=mu(ee)),ne.queryIntersectsFeature(U,ee,Me,Ht,this.z,s.transform,k,s.pixelPosMatrix))))}return yt}loadMatchingFeature(s,d,v,T,P,k,R,U,G,tt,st){const ct=this.bucketLayerIDs[d];if(k&&!(function(Bt,Ut){for(let Jt=0;Jt<Bt.length;Jt++)if(Ut.indexOf(Bt[Jt])>=0)return!0;return!1})(k,ct))return;const gt=this.sourceLayerCoder.decode(v),yt=this.vtLayers[gt].feature(T);if(P.needGeometry){const Bt=Fl(yt,!0);if(!P.filter(new Rt(this.tileID.overscaledZ),Bt,this.tileID.canonical))return}else if(!P.filter(new Rt(this.tileID.overscaledZ),yt))return;const Ct=this.getId(yt,gt);for(let Bt=0;Bt<ct.length;Bt++){const Ut=ct[Bt];if(k&&k.indexOf(Ut)<0)continue;const Jt=U[Ut];if(!Jt)continue;let Ht={};Ct&&tt&&(Ht=tt.getState(Jt.sourceLayer||"_geojsonTileLayer",Ct));const ee=rt({},G[Ut]);ee.paint=yh(ee.paint,Jt.paint,yt,Ht,R),ee.layout=yh(ee.layout,Jt.layout,yt,Ht,R);const ne=!st||st(yt,Jt,Ht);if(!ne)continue;const Me=new _d(yt,this.z,this.x,this.y,Ct);Me.layer=ee;let Fe=s[Ut];Fe===void 0&&(Fe=s[Ut]=[]),Fe.push({featureIndex:T,feature:Me,intersectionZ:ne})}}lookupSymbolFeatures(s,d,v,T,P,k,R,U){const G={};this.loadVTLayers();const tt=gs(P);for(const st of s)this.loadMatchingFeature(G,v,T,st,tt,k,R,U,d);return G}hasLayer(s){for(const d of this.bucketLayerIDs)for(const v of d)if(s===v)return!0;return!1}getId(s,d){let v=s.id;return this.promoteId&&(v=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof v=="boolean"&&(v=Number(v))),v}}function yh(c,s,d,v,T){return _t(c,((P,k)=>{const R=s instanceof tr?s.get(k):null;return R&&R.evaluate?R.evaluate(d,v,T):R}))}function Eg(c){let s=1/0,d=1/0,v=-1/0,T=-1/0;for(const P of c)s=Math.min(s,P.x),d=Math.min(d,P.y),v=Math.max(v,P.x),T=Math.max(T,P.y);return{minX:s,minY:d,maxX:v,maxY:T}}function j_(c,s){return s-c}function Cg(c,s,d,v,T){const P=[];for(let k=0;k<c.length;k++){const R=c[k];let U;for(let G=0;G<R.length-1;G++){let tt=R[G],st=R[G+1];tt.x<s&&st.x<s||(tt.x<s?tt=new O(s,tt.y+(s-tt.x)/(st.x-tt.x)*(st.y-tt.y))._round():st.x<s&&(st=new O(s,tt.y+(s-tt.x)/(st.x-tt.x)*(st.y-tt.y))._round()),tt.y<d&&st.y<d||(tt.y<d?tt=new O(tt.x+(d-tt.y)/(st.y-tt.y)*(st.x-tt.x),d)._round():st.y<d&&(st=new O(tt.x+(d-tt.y)/(st.y-tt.y)*(st.x-tt.x),d)._round()),tt.x>=v&&st.x>=v||(tt.x>=v?tt=new O(v,tt.y+(v-tt.x)/(st.x-tt.x)*(st.y-tt.y))._round():st.x>=v&&(st=new O(v,tt.y+(v-tt.x)/(st.x-tt.x)*(st.y-tt.y))._round()),tt.y>=T&&st.y>=T||(tt.y>=T?tt=new O(tt.x+(T-tt.y)/(st.y-tt.y)*(st.x-tt.x),T)._round():st.y>=T&&(st=new O(tt.x+(T-tt.y)/(st.y-tt.y)*(st.x-tt.x),T)._round()),U&&tt.equals(U[U.length-1])||(U=[tt],P.push(U)),U.push(st)))))}}return P}Ze("FeatureIndex",Kp,{omit:["rawTileData","sourceLayerCoder"]});class uc extends O{constructor(s,d,v,T){super(s,d),this.angle=v,T!==void 0&&(this.segment=T)}clone(){return new uc(this.x,this.y,this.angle,this.segment)}}function vd(c,s,d,v,T){if(s.segment===void 0||d===0)return!0;let P=s,k=s.segment+1,R=0;for(;R>-d/2;){if(k--,k<0)return!1;R-=c[k].dist(P),P=c[k]}R+=c[k].dist(c[k+1]),k++;const U=[];let G=0;for(;R<d/2;){const tt=c[k],st=c[k+1];if(!st)return!1;let ct=c[k-1].angleTo(tt)-tt.angleTo(st);for(ct=Math.abs((ct+3*Math.PI)%(2*Math.PI)-Math.PI),U.push({distance:R,angleDelta:ct}),G+=ct;R-U[0].distance>v;)G-=U.shift().angleDelta;if(G>T)return!1;k++,R+=tt.dist(st)}return!0}function Qp(c){let s=0;for(let d=0;d<c.length-1;d++)s+=c[d].dist(c[d+1]);return s}function F_(c,s,d){return c?.6*s*d:0}function U_(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function Kx(c,s,d,v,T,P){const k=F_(d,T,P),R=U_(d,v)*P;let U=0;const G=Qp(c)/2;for(let tt=0;tt<c.length-1;tt++){const st=c[tt],ct=c[tt+1],gt=st.dist(ct);if(U+gt>G){const yt=(G-U)/gt,Ct=Ba.number(st.x,ct.x,yt),Bt=Ba.number(st.y,ct.y,yt),Ut=new uc(Ct,Bt,ct.angleTo(st),tt);return Ut._round(),!k||vd(c,Ut,R,k,s)?Ut:void 0}U+=gt}}function V_(c,s,d,v,T,P,k,R,U){const G=F_(v,P,k),tt=U_(v,T),st=tt*k,ct=c[0].x===0||c[0].x===U||c[0].y===0||c[0].y===U;return s-st<s/4&&(s=st+s/4),Pg(c,ct?s/2*R%s:(tt/2+2*P)*k*R%s,s,G,d,st,ct,!1,U)}function Pg(c,s,d,v,T,P,k,R,U){const G=P/2,tt=Qp(c);let st=0,ct=s-d,gt=[];for(let yt=0;yt<c.length-1;yt++){const Ct=c[yt],Bt=c[yt+1],Ut=Ct.dist(Bt),Jt=Bt.angleTo(Ct);for(;ct+d<st+Ut;){ct+=d;const Ht=(ct-st)/Ut,ee=Ba.number(Ct.x,Bt.x,Ht),ne=Ba.number(Ct.y,Bt.y,Ht);if(ee>=0&&ee<U&&ne>=0&&ne<U&&ct-G>=0&&ct+G<=tt){const Me=new uc(ee,ne,Jt,yt);Me._round(),v&&!vd(c,Me,P,v,T)||gt.push(Me)}}st+=Ut}return R||gt.length||k||(gt=Pg(c,st/2,d,v,T,P,k,!0,U)),gt}Ze("Anchor",uc);const ql=vr;function xd(c,s,d,v){const T=[],P=c.image,k=P.pixelRatio,R=P.paddedRect.w-2*ql,U=P.paddedRect.h-2*ql,G=c.right-c.left,tt=c.bottom-c.top,st=P.stretchX||[[0,R]],ct=P.stretchY||[[0,U]],gt=(Ve,en)=>Ve+en[1]-en[0],yt=st.reduce(gt,0),Ct=ct.reduce(gt,0),Bt=R-yt,Ut=U-Ct;let Jt=0,Ht=yt,ee=0,ne=Ct,Me=0,Fe=Bt,ln=0,Xe=Ut;if(P.content&&v){const Ve=P.content;Jt=bd(st,0,Ve[0]),ee=bd(ct,0,Ve[1]),Ht=bd(st,Ve[0],Ve[2]),ne=bd(ct,Ve[1],Ve[3]),Me=Ve[0]-Jt,ln=Ve[1]-ee,Fe=Ve[2]-Ve[0]-Ht,Xe=Ve[3]-Ve[1]-ne}const We=(Ve,en,qe,Re)=>{const pn=wd(Ve.stretch-Jt,Ht,G,c.left),un=Sd(Ve.fixed-Me,Fe,Ve.stretch,yt),jn=wd(en.stretch-ee,ne,tt,c.top),Ki=Sd(en.fixed-ln,Xe,en.stretch,Ct),Qi=wd(qe.stretch-Jt,Ht,G,c.left),na=Sd(qe.fixed-Me,Fe,qe.stretch,yt),qs=wd(Re.stretch-ee,ne,tt,c.top),Ss=Sd(Re.fixed-ln,Xe,Re.stretch,Ct),Zr=new O(pn,jn),cr=new O(Qi,jn),Pa=new O(Qi,qs),as=new O(pn,qs),$a=new O(un/k,Ki/k),ia=new O(na/k,Ss/k),ra=s*Math.PI/180;if(ra){const ka=Math.sin(ra),Hs=Math.cos(ra),hr=[Hs,-ka,ka,Hs];Zr._matMult(hr),cr._matMult(hr),as._matMult(hr),Pa._matMult(hr)}const qa=Ve.stretch+Ve.fixed,Ha=en.stretch+en.fixed;return{tl:Zr,tr:cr,bl:as,br:Pa,tex:{x:P.paddedRect.x+ql+qa,y:P.paddedRect.y+ql+Ha,w:qe.stretch+qe.fixed-qa,h:Re.stretch+Re.fixed-Ha},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$a,pixelOffsetBR:ia,minFontScaleX:Fe/k/G,minFontScaleY:Xe/k/tt,isSDF:d}};if(v&&(P.stretchX||P.stretchY)){const Ve=kg(st,Bt,yt),en=kg(ct,Ut,Ct);for(let qe=0;qe<Ve.length-1;qe++){const Re=Ve[qe],pn=Ve[qe+1];for(let un=0;un<en.length-1;un++)T.push(We(Re,en[un],pn,en[un+1]))}}else T.push(We({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:U+1}));return T}function bd(c,s,d){let v=0;for(const T of c)v+=Math.max(s,Math.min(d,T[1]))-Math.max(s,Math.min(d,T[0]));return v}function kg(c,s,d){const v=[{fixed:-ql,stretch:0}];for(const[T,P]of c){const k=v[v.length-1];v.push({fixed:T-k.stretch,stretch:k.stretch}),v.push({fixed:T-k.stretch,stretch:k.stretch+(P-T)})}return v.push({fixed:s+ql,stretch:d}),v}function wd(c,s,d,v){return c/s*d+v}function Sd(c,s,d,v){return c-s*d/v}class Td{constructor(s,d,v,T,P,k,R,U,G,tt){if(this.boxStartIndex=s.length,G){let st=k.top,ct=k.bottom;const gt=k.collisionPadding;gt&&(st-=gt[1],ct+=gt[3]);let yt=ct-st;yt>0&&(yt=Math.max(10,yt),this.circleDiameter=yt)}else{let st=k.top*R-U[0],ct=k.bottom*R+U[2],gt=k.left*R-U[3],yt=k.right*R+U[1];const Ct=k.collisionPadding;if(Ct&&(gt-=Ct[0]*R,st-=Ct[1]*R,yt+=Ct[2]*R,ct+=Ct[3]*R),tt){const Bt=new O(gt,st),Ut=new O(yt,st),Jt=new O(gt,ct),Ht=new O(yt,ct),ee=tt*Math.PI/180;Bt._rotate(ee),Ut._rotate(ee),Jt._rotate(ee),Ht._rotate(ee),gt=Math.min(Bt.x,Ut.x,Jt.x,Ht.x),yt=Math.max(Bt.x,Ut.x,Jt.x,Ht.x),st=Math.min(Bt.y,Ut.y,Jt.y,Ht.y),ct=Math.max(Bt.y,Ut.y,Jt.y,Ht.y)}s.emplaceBack(d.x,d.y,gt,st,yt,ct,v,T,P)}this.boxEndIndex=s.length}}class $_{constructor(s=[],d=Jp){if(this.data=s,this.length=this.data.length,this.compare=d,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:d,compare:v}=this,T=d[s];for(;s>0;){const P=s-1>>1,k=d[P];if(v(T,k)>=0)break;d[s]=k,s=P}d[s]=T}_down(s){const{data:d,compare:v}=this,T=this.length>>1,P=d[s];for(;s<T;){let k=1+(s<<1),R=d[k];const U=k+1;if(U<this.length&&v(d[U],R)<0&&(k=U,R=d[U]),v(R,P)>=0)break;d[s]=R,s=k}d[s]=P}}function Jp(c,s){return c<s?-1:c>s?1:0}function q_(c,s=1,d=!1){let v=1/0,T=1/0,P=-1/0,k=-1/0;const R=c[0];for(let gt=0;gt<R.length;gt++){const yt=R[gt];(!gt||yt.x<v)&&(v=yt.x),(!gt||yt.y<T)&&(T=yt.y),(!gt||yt.x>P)&&(P=yt.x),(!gt||yt.y>k)&&(k=yt.y)}const U=Math.min(P-v,k-T);let G=U/2;const tt=new $_([],H_);if(U===0)return new O(v,T);for(let gt=v;gt<P;gt+=U)for(let yt=T;yt<k;yt+=U)tt.push(new Si(gt+G,yt+G,G,c));let st=(function(gt){let yt=0,Ct=0,Bt=0;const Ut=gt[0];for(let Jt=0,Ht=Ut.length,ee=Ht-1;Jt<Ht;ee=Jt++){const ne=Ut[Jt],Me=Ut[ee],Fe=ne.x*Me.y-Me.x*ne.y;Ct+=(ne.x+Me.x)*Fe,Bt+=(ne.y+Me.y)*Fe,yt+=3*Fe}return new Si(Ct/yt,Bt/yt,0,gt)})(c),ct=tt.length;for(;tt.length;){const gt=tt.pop();(gt.d>st.d||!st.d)&&(st=gt,d&&console.log("found best %d after %d probes",Math.round(1e4*gt.d)/1e4,ct)),gt.max-st.d<=s||(G=gt.h/2,tt.push(new Si(gt.p.x-G,gt.p.y-G,G,c)),tt.push(new Si(gt.p.x+G,gt.p.y-G,G,c)),tt.push(new Si(gt.p.x-G,gt.p.y+G,G,c)),tt.push(new Si(gt.p.x+G,gt.p.y+G,G,c)),ct+=4)}return d&&(console.log(`num probes: ${ct}`),console.log(`best distance: ${st.d}`)),st.p}function H_(c,s){return s.max-c.max}function Si(c,s,d,v){this.p=new O(c,s),this.h=d,this.d=(function(T,P){let k=!1,R=1/0;for(let U=0;U<P.length;U++){const G=P[U];for(let tt=0,st=G.length,ct=st-1;tt<st;ct=tt++){const gt=G[tt],yt=G[ct];gt.y>T.y!=yt.y>T.y&&T.x<(yt.x-gt.x)*(T.y-gt.y)/(yt.y-gt.y)+gt.x&&(k=!k),R=Math.min(R,dp(T,gt,yt))}}return(k?1:-1)*Math.sqrt(R)})(this.p,v),this.max=this.d+this.h*Math.SQRT2}var pa;a.aq=void 0,(pa=a.aq||(a.aq={}))[pa.center=1]="center",pa[pa.left=2]="left",pa[pa.right=3]="right",pa[pa.top=4]="top",pa[pa.bottom=5]="bottom",pa[pa["top-left"]=6]="top-left",pa[pa["top-right"]=7]="top-right",pa[pa["bottom-left"]=8]="bottom-left",pa[pa["bottom-right"]=9]="bottom-right";const Rc=7,tm=Number.POSITIVE_INFINITY;function Z_(c,s){return s[1]!==tm?(function(d,v,T){let P=0,k=0;switch(v=Math.abs(v),T=Math.abs(T),d){case"top-right":case"top-left":case"top":k=T-Rc;break;case"bottom-right":case"bottom-left":case"bottom":k=-T+Rc}switch(d){case"top-right":case"bottom-right":case"right":P=-v;break;case"top-left":case"bottom-left":case"left":P=v}return[P,k]})(c,s[0],s[1]):(function(d,v){let T=0,P=0;v<0&&(v=0);const k=v/Math.SQRT2;switch(d){case"top-right":case"top-left":P=k-Rc;break;case"bottom-right":case"bottom-left":P=-k+Rc;break;case"bottom":P=-v+Rc;break;case"top":P=v-Rc}switch(d){case"top-right":case"bottom-right":T=-k;break;case"top-left":case"bottom-left":T=k;break;case"left":T=v;break;case"right":T=-v}return[T,P]})(c,s[0])}function G_(c,s,d){var v;const T=c.layout,P=(v=T.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(s,{},d);if(P){const R=P.values,U=[];for(let G=0;G<R.length;G+=2){const tt=U[G]=R[G],st=R[G+1].map((ct=>ct*_r));tt.startsWith("top")?st[1]-=Rc:tt.startsWith("bottom")&&(st[1]+=Rc),U[G+1]=st}return new kn(U)}const k=T.get("text-variable-anchor");if(k){let R;R=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[T.get("text-radial-offset").evaluate(s,{},d)*_r,tm]:T.get("text-offset").evaluate(s,{},d).map((G=>G*_r));const U=[];for(const G of k)U.push(G,Z_(G,R));return new kn(U)}return null}function Og(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function em(c,s,d,v,T,P,k,R,U,G,tt){let st=P.textMaxSize.evaluate(s,{});st===void 0&&(st=k);const ct=c.layers[0].layout,gt=ct.get("icon-offset").evaluate(s,{},tt),yt=nm(d.horizontal),Ct=k/24,Bt=c.tilePixelRatio*Ct,Ut=c.tilePixelRatio*st/24,Jt=c.tilePixelRatio*R,Ht=c.tilePixelRatio*ct.get("symbol-spacing"),ee=ct.get("text-padding")*c.tilePixelRatio,ne=(function(Re,pn,un,jn=1){const Ki=Re.get("icon-padding").evaluate(pn,{},un),Qi=Ki&&Ki.values;return[Qi[0]*jn,Qi[1]*jn,Qi[2]*jn,Qi[3]*jn]})(ct,s,tt,c.tilePixelRatio),Me=ct.get("text-max-angle")/180*Math.PI,Fe=ct.get("text-rotation-alignment")!=="viewport"&&ct.get("symbol-placement")!=="point",ln=ct.get("icon-rotation-alignment")==="map"&&ct.get("symbol-placement")!=="point",Xe=ct.get("symbol-placement"),We=Ht/2,Ve=ct.get("icon-text-fit");let en;v&&Ve!=="none"&&(c.allowVerticalPlacement&&d.vertical&&(en=md(v,d.vertical,Ve,ct.get("icon-text-fit-padding"),gt,Ct)),yt&&(v=md(v,yt,Ve,ct.get("icon-text-fit-padding"),gt,Ct)));const qe=(Re,pn)=>{pn.x<0||pn.x>=yr||pn.y<0||pn.y>=yr||(function(un,jn,Ki,Qi,na,qs,Ss,Zr,cr,Pa,as,$a,ia,ra,qa,Ha,ka,Hs,hr,Rr,Zn,Za,Oa,xr,Br){const gl=un.addToLineVertexArray(jn,Ki);let xo,ss,yl,Yo,ma=0,Su=0,Pd=0,W_=0,zg=-1,Lg=-1;const cc={};let Y_=du("");if(un.allowVerticalPlacement&&Qi.vertical){const os=Zr.layout.get("text-rotate").evaluate(Zn,{},xr)+90;yl=new Td(cr,jn,Pa,as,$a,Qi.vertical,ia,ra,qa,os),Ss&&(Yo=new Td(cr,jn,Pa,as,$a,Ss,ka,Hs,qa,os))}if(na){const os=Zr.layout.get("icon-rotate").evaluate(Zn,{}),wo=Zr.layout.get("icon-text-fit")!=="none",vh=xd(na,os,Oa,wo),Xo=Ss?xd(Ss,os,Oa,wo):void 0;ss=new Td(cr,jn,Pa,as,$a,na,ka,Hs,!1,os),ma=4*vh.length;const xh=un.iconSizeData;let Ko=null;xh.kind==="source"?(Ko=[vu*Zr.layout.get("icon-size").evaluate(Zn,{})],Ko[0]>zc&&ye(`${un.layerIds[0]}: Value for "icon-size" is >= ${gf}. Reduce your "icon-size".`)):xh.kind==="composite"&&(Ko=[vu*Za.compositeIconSizes[0].evaluate(Zn,{},xr),vu*Za.compositeIconSizes[1].evaluate(Zn,{},xr)],(Ko[0]>zc||Ko[1]>zc)&&ye(`${un.layerIds[0]}: Value for "icon-size" is >= ${gf}. Reduce your "icon-size".`)),un.addSymbols(un.icon,vh,Ko,Rr,hr,Zn,a.ai.none,jn,gl.lineStartIndex,gl.lineLength,-1,xr),zg=un.icon.placedSymbolArray.length-1,Xo&&(Su=4*Xo.length,un.addSymbols(un.icon,Xo,Ko,Rr,hr,Zn,a.ai.vertical,jn,gl.lineStartIndex,gl.lineLength,-1,xr),Lg=un.icon.placedSymbolArray.length-1)}const X_=Object.keys(Qi.horizontal);for(const os of X_){const wo=Qi.horizontal[os];if(!xo){Y_=du(wo.text);const Xo=Zr.layout.get("text-rotate").evaluate(Zn,{},xr);xo=new Td(cr,jn,Pa,as,$a,wo,ia,ra,qa,Xo)}const vh=wo.positionedLines.length===1;if(Pd+=_h(un,jn,wo,qs,Zr,qa,Zn,Ha,gl,Qi.vertical?a.ai.horizontal:a.ai.horizontalOnly,vh?X_:[os],cc,zg,Za,xr),vh)break}Qi.vertical&&(W_+=_h(un,jn,Qi.vertical,qs,Zr,qa,Zn,Ha,gl,a.ai.vertical,["vertical"],cc,Lg,Za,xr));const K_=xo?xo.boxStartIndex:un.collisionBoxArray.length,xf=xo?xo.boxEndIndex:un.collisionBoxArray.length,kd=yl?yl.boxStartIndex:un.collisionBoxArray.length,Q_=yl?yl.boxEndIndex:un.collisionBoxArray.length,Jx=ss?ss.boxStartIndex:un.collisionBoxArray.length,bf=ss?ss.boxEndIndex:un.collisionBoxArray.length,Od=Yo?Yo.boxStartIndex:un.collisionBoxArray.length,J_=Yo?Yo.boxEndIndex:un.collisionBoxArray.length;let bo=-1;const wf=(os,wo)=>os&&os.circleDiameter?Math.max(os.circleDiameter,wo):wo;bo=wf(xo,bo),bo=wf(yl,bo),bo=wf(ss,bo),bo=wf(Yo,bo);const um=bo>-1?1:0;um&&(bo*=Br/_r),un.glyphOffsetArray.length>=go.MAX_GLYPHS&&ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Zn.sortKey!==void 0&&un.addToSortKeyRanges(un.symbolInstances.length,Zn.sortKey);const cm=G_(Zr,Zn,xr),[tv,ev]=(function(os,wo){const vh=os.length,Xo=wo?.values;if(Xo?.length>0)for(let xh=0;xh<Xo.length;xh+=2){const Ko=Xo[xh+1];os.emplaceBack(a.aq[Xo[xh]],Ko[0],Ko[1])}return[vh,os.length]})(un.textAnchorOffsets,cm);un.symbolInstances.emplaceBack(jn.x,jn.y,cc.right>=0?cc.right:-1,cc.center>=0?cc.center:-1,cc.left>=0?cc.left:-1,cc.vertical||-1,zg,Lg,Y_,K_,xf,kd,Q_,Jx,bf,Od,J_,Pa,Pd,W_,ma,Su,um,0,ia,bo,tv,ev)})(c,pn,Re,d,v,T,en,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,Bt,[ee,ee,ee,ee],Fe,U,Jt,ne,ln,gt,s,P,G,tt,k)};if(Xe==="line")for(const Re of Cg(s.geometry,0,0,yr,yr)){const pn=V_(Re,Ht,Me,d.vertical||yt,v,24,Ut,c.overscaling,yr);for(const un of pn)yt&&im(c,yt.text,We,un)||qe(Re,un)}else if(Xe==="line-center"){for(const Re of s.geometry)if(Re.length>1){const pn=Kx(Re,Me,d.vertical||yt,v,24,Ut);pn&&qe(Re,pn)}}else if(s.type==="Polygon")for(const Re of Tp(s.geometry,0)){const pn=q_(Re,16);qe(Re[0],new uc(pn.x,pn.y,0))}else if(s.type==="LineString")for(const Re of s.geometry)qe(Re,new uc(Re[0].x,Re[0].y,0));else if(s.type==="Point")for(const Re of s.geometry)for(const pn of Re)qe([pn],new uc(pn.x,pn.y,0))}function _h(c,s,d,v,T,P,k,R,U,G,tt,st,ct,gt,yt){const Ct=(function(Jt,Ht,ee,ne,Me,Fe,ln,Xe){const We=ne.layout.get("text-rotate").evaluate(Fe,{})*Math.PI/180,Ve=[];for(const en of Ht.positionedLines)for(const qe of en.positionedGlyphs){if(!qe.rect)continue;const Re=qe.rect||{};let pn=fd+1,un=!0,jn=1,Ki=0;const Qi=(Me||Xe)&&qe.vertical,na=qe.metrics.advance*qe.scale/2;if(Xe&&Ht.verticalizable&&(Ki=en.lineOffset/2-(qe.imageName?-(_r-qe.metrics.width*qe.scale)/2:(qe.scale-1)*_r)),qe.imageName){const Rr=ln[qe.imageName];un=Rr.sdf,jn=Rr.pixelRatio,pn=vr/jn}const qs=Me?[qe.x+na,qe.y]:[0,0];let Ss=Me?[0,0]:[qe.x+na+ee[0],qe.y+ee[1]-Ki],Zr=[0,0];Qi&&(Zr=Ss,Ss=[0,0]);const cr=qe.metrics.isDoubleResolution?2:1,Pa=(qe.metrics.left-pn)*qe.scale-na+Ss[0],as=(-qe.metrics.top-pn)*qe.scale+Ss[1],$a=Pa+Re.w/cr*qe.scale/jn,ia=as+Re.h/cr*qe.scale/jn,ra=new O(Pa,as),qa=new O($a,as),Ha=new O(Pa,ia),ka=new O($a,ia);if(Qi){const Rr=new O(-na,na-Wo),Zn=-Math.PI/2,Za=_r/2-na,Oa=new O(5-Wo-Za,-(qe.imageName?Za:0)),xr=new O(...Zr);ra._rotateAround(Zn,Rr)._add(Oa)._add(xr),qa._rotateAround(Zn,Rr)._add(Oa)._add(xr),Ha._rotateAround(Zn,Rr)._add(Oa)._add(xr),ka._rotateAround(Zn,Rr)._add(Oa)._add(xr)}if(We){const Rr=Math.sin(We),Zn=Math.cos(We),Za=[Zn,-Rr,Rr,Zn];ra._matMult(Za),qa._matMult(Za),Ha._matMult(Za),ka._matMult(Za)}const Hs=new O(0,0),hr=new O(0,0);Ve.push({tl:ra,tr:qa,bl:Ha,br:ka,tex:Re,writingMode:Ht.writingMode,glyphOffset:qs,sectionIndex:qe.sectionIndex,isSDF:un,pixelOffsetTL:Hs,pixelOffsetBR:hr,minFontScaleX:0,minFontScaleY:0})}return Ve})(0,d,R,T,P,k,v,c.allowVerticalPlacement),Bt=c.textSizeData;let Ut=null;Bt.kind==="source"?(Ut=[vu*T.layout.get("text-size").evaluate(k,{})],Ut[0]>zc&&ye(`${c.layerIds[0]}: Value for "text-size" is >= ${gf}. Reduce your "text-size".`)):Bt.kind==="composite"&&(Ut=[vu*gt.compositeTextSizes[0].evaluate(k,{},yt),vu*gt.compositeTextSizes[1].evaluate(k,{},yt)],(Ut[0]>zc||Ut[1]>zc)&&ye(`${c.layerIds[0]}: Value for "text-size" is >= ${gf}. Reduce your "text-size".`)),c.addSymbols(c.text,Ct,Ut,R,P,k,G,s,U.lineStartIndex,U.lineLength,ct,yt);for(const Jt of tt)st[Jt]=c.text.placedSymbolArray.length-1;return 4*Ct.length}function nm(c){for(const s in c)return c[s];return null}function im(c,s,d,v){const T=c.compareText;if(s in T){const P=T[s];for(let k=P.length-1;k>=0;k--)if(v.dist(P[k])<d)return!0}else T[s]=[];return T[s].push(v),!1}const rm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class wu{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,v]=new Uint8Array(s,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const T=v>>4;if(T!==1)throw new Error(`Got v${T} data when expected v1.`);const P=rm[15&v];if(!P)throw new Error("Unrecognized array type.");const[k]=new Uint16Array(s,2,1),[R]=new Uint32Array(s,4,1);return new wu(R,k,P,s)}constructor(s,d=64,v=Float64Array,T){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=v,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const P=rm.indexOf(this.ArrayType),k=2*s*this.ArrayType.BYTES_PER_ELEMENT,R=s*this.IndexArrayType.BYTES_PER_ELEMENT,U=(8-R%8)%8;if(P<0)throw new Error(`Unexpected typed array class: ${v}.`);T&&T instanceof ArrayBuffer?(this.data=T,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+R+U,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+k+R+U),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+R+U,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+P]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=s)}add(s,d){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=s,this.coords[this._pos++]=d,v}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return ml(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,d,v,T){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:P,coords:k,nodeSize:R}=this,U=[0,P.length-1,0],G=[];for(;U.length;){const tt=U.pop()||0,st=U.pop()||0,ct=U.pop()||0;if(st-ct<=R){for(let Bt=ct;Bt<=st;Bt++){const Ut=k[2*Bt],Jt=k[2*Bt+1];Ut>=s&&Ut<=v&&Jt>=d&&Jt<=T&&G.push(P[Bt])}continue}const gt=ct+st>>1,yt=k[2*gt],Ct=k[2*gt+1];yt>=s&&yt<=v&&Ct>=d&&Ct<=T&&G.push(P[gt]),(tt===0?s<=yt:d<=Ct)&&(U.push(ct),U.push(gt-1),U.push(1-tt)),(tt===0?v>=yt:T>=Ct)&&(U.push(gt+1),U.push(st),U.push(1-tt))}return G}within(s,d,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:P,nodeSize:k}=this,R=[0,T.length-1,0],U=[],G=v*v;for(;R.length;){const tt=R.pop()||0,st=R.pop()||0,ct=R.pop()||0;if(st-ct<=k){for(let Bt=ct;Bt<=st;Bt++)Dg(P[2*Bt],P[2*Bt+1],s,d)<=G&&U.push(T[Bt]);continue}const gt=ct+st>>1,yt=P[2*gt],Ct=P[2*gt+1];Dg(yt,Ct,s,d)<=G&&U.push(T[gt]),(tt===0?s-v<=yt:d-v<=Ct)&&(R.push(ct),R.push(gt-1),R.push(1-tt)),(tt===0?s+v>=yt:d+v>=Ct)&&(R.push(gt+1),R.push(st),R.push(1-tt))}return U}}function ml(c,s,d,v,T,P){if(T-v<=d)return;const k=v+T>>1;vf(c,s,k,v,T,P),ml(c,s,d,v,k-1,1-P),ml(c,s,d,k+1,T,1-P)}function vf(c,s,d,v,T,P){for(;T>v;){if(T-v>600){const G=T-v+1,tt=d-v+1,st=Math.log(G),ct=.5*Math.exp(2*st/3),gt=.5*Math.sqrt(st*ct*(G-ct)/G)*(tt-G/2<0?-1:1);vf(c,s,d,Math.max(v,Math.floor(d-tt*ct/G+gt)),Math.min(T,Math.floor(d+(G-tt)*ct/G+gt)),P)}const k=s[2*d+P];let R=v,U=T;for(Ad(c,s,v,d),s[2*T+P]>k&&Ad(c,s,v,T);R<U;){for(Ad(c,s,R,U),R++,U--;s[2*R+P]<k;)R++;for(;s[2*U+P]>k;)U--}s[2*v+P]===k?Ad(c,s,v,U):(U++,Ad(c,s,U,T)),U<=d&&(v=U+1),d<=U&&(T=U-1)}}function Ad(c,s,d,v){am(c,d,v),am(s,2*d,2*v),am(s,2*d+1,2*v+1)}function am(c,s,d){const v=c[s];c[s]=c[d],c[d]=v}function Dg(c,s,d,v){const T=c-d,P=s-v;return T*T+P*P}var sm;a.bh=void 0,(sm=a.bh||(a.bh={})).create="create",sm.load="load",sm.fullLoad="fullLoad";let Md=null,Ed=[];const Cd=1e3/60,om="loadTime",lm="fullLoadTime",Qx={mark(c){performance.mark(c)},frame(c){const s=c;Md!=null&&Ed.push(s-Md),Md=s},clearMetrics(){Md=null,Ed=[],performance.clearMeasures(om),performance.clearMeasures(lm);for(const c in a.bh)performance.clearMarks(a.bh[c])},getPerformanceMetrics(){performance.measure(om,a.bh.create,a.bh.load),performance.measure(lm,a.bh.create,a.bh.fullLoad);const c=performance.getEntriesByName(om)[0].duration,s=performance.getEntriesByName(lm)[0].duration,d=Ed.length,v=1/(Ed.reduce(((P,k)=>P+k),0)/d/1e3),T=Ed.filter((P=>P>Cd)).reduce(((P,k)=>P+(k-Cd)/Cd),0);return{loadTime:c,fullLoadTime:s,fps:v,percentDroppedFrames:T/(d+T)*100,totalFrames:d}}};a.$=function(c,s,d){var v,T,P,k,R,U,G,tt,st,ct,gt,yt,Ct=d[0],Bt=d[1],Ut=d[2];return s===c?(c[12]=s[0]*Ct+s[4]*Bt+s[8]*Ut+s[12],c[13]=s[1]*Ct+s[5]*Bt+s[9]*Ut+s[13],c[14]=s[2]*Ct+s[6]*Bt+s[10]*Ut+s[14],c[15]=s[3]*Ct+s[7]*Bt+s[11]*Ut+s[15]):(T=s[1],P=s[2],k=s[3],R=s[4],U=s[5],G=s[6],tt=s[7],st=s[8],ct=s[9],gt=s[10],yt=s[11],c[0]=v=s[0],c[1]=T,c[2]=P,c[3]=k,c[4]=R,c[5]=U,c[6]=G,c[7]=tt,c[8]=st,c[9]=ct,c[10]=gt,c[11]=yt,c[12]=v*Ct+R*Bt+st*Ut+s[12],c[13]=T*Ct+U*Bt+ct*Ut+s[13],c[14]=P*Ct+G*Bt+gt*Ut+s[14],c[15]=k*Ct+tt*Bt+yt*Ut+s[15]),c},a.A=kc,a.B=Ba,a.C=class{constructor(c,s,d){this.receive=v=>{const T=v.data,P=T.id;if(P&&(!T.targetMapId||this.mapId===T.targetMapId))if(T.type==="<cancel>"){delete this.tasks[P];const k=this.cancelCallbacks[P];delete this.cancelCallbacks[P],k&&k()}else Ot()||T.mustQueue?(this.tasks[P]=T,this.taskQueue.push(P),this.invoker.trigger()):this.processTask(P,T)},this.process=()=>{if(!this.taskQueue.length)return;const v=this.taskQueue.shift(),T=this.tasks[v];delete this.tasks[v],this.taskQueue.length&&this.invoker.trigger(),T&&this.processTask(v,T)},this.target=c,this.parent=s,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new Gp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ot()?c:window}send(c,s,d,v,T=!1){const P=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[P]=d);const k=[],R={id:P,type:c,hasCallback:!!d,targetMapId:v,mustQueue:T,sourceMapId:this.mapId,data:Is(s,k)};return this.target.postMessage(R,{transfer:k}),{cancel:()=>{d&&delete this.callbacks[P],this.target.postMessage({id:P,type:"<cancel>",targetMapId:v,sourceMapId:this.mapId})}}}processTask(c,s){if(s.type==="<response>"){const d=this.callbacks[c];delete this.callbacks[c],d&&(s.error?d(lo(s.error)):d(null,lo(s.data)))}else{let d=!1;const v=[],T=s.hasCallback?(R,U)=>{d=!0,delete this.cancelCallbacks[c];const G={id:c,type:"<response>",sourceMapId:this.mapId,error:R?Is(R):null,data:Is(U,v)};this.target.postMessage(G,{transfer:v})}:R=>{d=!0};let P=null;const k=lo(s.data);if(this.parent[s.type])P=this.parent[s.type](s.sourceMapId,k,T);else if("getWorkerSource"in this.parent){const R=s.type.split(".");P=this.parent.getWorkerSource(s.sourceMapId,R[0],k.source)[R[1]](k,T)}else T(new Error(`Could not find function ${s.type}`));!d&&P&&P.cancel&&(this.cancelCallbacks[c]=P.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.D=Qe,a.E=In,a.F=function(c,s){const d={};for(let v=0;v<s.length;v++){const T=s[v];T in c&&(d[T]=c[T])}return d},a.G=bu,a.H=Wp,a.I=Fp,a.J=X,a.K=Y,a.L=ur,a.M=pt,a.N=yr,a.O=vo,a.P=O,a.Q=bi,a.R=po,a.S=ji,a.T=Oe,a.U=yf,a.V=class extends ja{},a.W=Xp,a.X=function(c,s){const d=window.document.createElement("video");d.muted=!0,d.onloadstart=function(){s(null,d)};for(let v=0;v<c.length;v++){const T=window.document.createElement("source");je(c[v])||(d.crossOrigin="Anonymous"),T.src=c[v],d.appendChild(T)}return{cancel:()=>{}}},a.Y=Be,a.Z=function(){var c=new kc(16);return kc!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},a._=g,a.a=jt,a.a$=class extends dt{},a.a0=function(c,s,d){var v=d[0],T=d[1],P=d[2];return c[0]=s[0]*v,c[1]=s[1]*v,c[2]=s[2]*v,c[3]=s[3]*v,c[4]=s[4]*T,c[5]=s[5]*T,c[6]=s[6]*T,c[7]=s[7]*T,c[8]=s[8]*P,c[9]=s[9]*P,c[10]=s[10]*P,c[11]=s[11]*P,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},a.a1=Km,a.a2=function(){return ut++},a.a3=zt,a.a4=go,a.a5=function(){mt.isLoading()||mt.isLoaded()||$()!=="deferred"||nt()},a.a6=gs,a.a7=Fl,a.a8=Rt,a.a9=_d,a.aA=p,a.aB=function(c){c=c.slice();const s=Object.create(null);for(let d=0;d<c.length;d++)s[c[d].id]=c[d];for(let d=0;d<c.length;d++)"ref"in c[d]&&(c[d]=Ri(c[d],s[c[d].ref]));return c},a.aC=function(c){if(c.type==="custom")return new Zp(c);switch(c.type){case"background":return new yo(c);case"circle":return new o_(c);case"fill":return new b_(c);case"fill-extrusion":return new C_(c);case"heatmap":return new c_(c);case"hillshade":return new h_(c);case"line":return new ec(c);case"raster":return new B_(c);case"symbol":return new ws(c)}},a.aD=Pt,a.aE=function(c,s){if(!c)return[{command:cn.setStyle,args:[s]}];let d=[];try{if(!Yn(c.version,s.version))return[{command:cn.setStyle,args:[s]}];Yn(c.center,s.center)||d.push({command:cn.setCenter,args:[s.center]}),Yn(c.zoom,s.zoom)||d.push({command:cn.setZoom,args:[s.zoom]}),Yn(c.bearing,s.bearing)||d.push({command:cn.setBearing,args:[s.bearing]}),Yn(c.pitch,s.pitch)||d.push({command:cn.setPitch,args:[s.pitch]}),Yn(c.sprite,s.sprite)||d.push({command:cn.setSprite,args:[s.sprite]}),Yn(c.glyphs,s.glyphs)||d.push({command:cn.setGlyphs,args:[s.glyphs]}),Yn(c.transition,s.transition)||d.push({command:cn.setTransition,args:[s.transition]}),Yn(c.light,s.light)||d.push({command:cn.setLight,args:[s.light]});const v={},T=[];(function(k,R,U,G){let tt;for(tt in R=R||{},k=k||{})Object.prototype.hasOwnProperty.call(k,tt)&&(Object.prototype.hasOwnProperty.call(R,tt)||si(tt,U,G));for(tt in R)Object.prototype.hasOwnProperty.call(R,tt)&&(Object.prototype.hasOwnProperty.call(k,tt)?Yn(k[tt],R[tt])||(k[tt].type==="geojson"&&R[tt].type==="geojson"&&Ur(k,R,tt)?U.push({command:cn.setGeoJSONSourceData,args:[tt,R[tt].data]}):Bi(tt,R,U,G)):Wi(tt,R,U))})(c.sources,s.sources,T,v);const P=[];c.layers&&c.layers.forEach((k=>{v[k.source]?d.push({command:cn.removeLayer,args:[k.id]}):P.push(k)})),d=d.concat(T),(function(k,R,U){R=R||[];const G=(k=k||[]).map(Xa),tt=R.map(Xa),st=k.reduce(va,{}),ct=R.reduce(va,{}),gt=G.slice(),yt=Object.create(null);let Ct,Bt,Ut,Jt,Ht,ee,ne;for(Ct=0,Bt=0;Ct<G.length;Ct++)Ut=G[Ct],Object.prototype.hasOwnProperty.call(ct,Ut)?Bt++:(U.push({command:cn.removeLayer,args:[Ut]}),gt.splice(gt.indexOf(Ut,Bt),1));for(Ct=0,Bt=0;Ct<tt.length;Ct++)Ut=tt[tt.length-1-Ct],gt[gt.length-1-Ct]!==Ut&&(Object.prototype.hasOwnProperty.call(st,Ut)?(U.push({command:cn.removeLayer,args:[Ut]}),gt.splice(gt.lastIndexOf(Ut,gt.length-Bt),1)):Bt++,ee=gt[gt.length-Ct],U.push({command:cn.addLayer,args:[ct[Ut],ee]}),gt.splice(gt.length-Ct,0,Ut),yt[Ut]=!0);for(Ct=0;Ct<tt.length;Ct++)if(Ut=tt[Ct],Jt=st[Ut],Ht=ct[Ut],!yt[Ut]&&!Yn(Jt,Ht))if(Yn(Jt.source,Ht.source)&&Yn(Jt["source-layer"],Ht["source-layer"])&&Yn(Jt.type,Ht.type)){for(ne in Xs(Jt.layout,Ht.layout,U,Ut,null,cn.setLayoutProperty),Xs(Jt.paint,Ht.paint,U,Ut,null,cn.setPaintProperty),Yn(Jt.filter,Ht.filter)||U.push({command:cn.setFilter,args:[Ut,Ht.filter]}),Yn(Jt.minzoom,Ht.minzoom)&&Yn(Jt.maxzoom,Ht.maxzoom)||U.push({command:cn.setLayerZoomRange,args:[Ut,Ht.minzoom,Ht.maxzoom]}),Jt)Object.prototype.hasOwnProperty.call(Jt,ne)&&ne!=="layout"&&ne!=="paint"&&ne!=="filter"&&ne!=="metadata"&&ne!=="minzoom"&&ne!=="maxzoom"&&(ne.indexOf("paint.")===0?Xs(Jt[ne],Ht[ne],U,Ut,ne.slice(6),cn.setPaintProperty):Yn(Jt[ne],Ht[ne])||U.push({command:cn.setLayerProperty,args:[Ut,ne,Ht[ne]]}));for(ne in Ht)Object.prototype.hasOwnProperty.call(Ht,ne)&&!Object.prototype.hasOwnProperty.call(Jt,ne)&&ne!=="layout"&&ne!=="paint"&&ne!=="filter"&&ne!=="metadata"&&ne!=="minzoom"&&ne!=="maxzoom"&&(ne.indexOf("paint.")===0?Xs(Jt[ne],Ht[ne],U,Ut,ne.slice(6),cn.setPaintProperty):Yn(Jt[ne],Ht[ne])||U.push({command:cn.setLayerProperty,args:[Ut,ne,Ht[ne]]}))}else U.push({command:cn.removeLayer,args:[Ut]}),ee=gt[gt.lastIndexOf(Ut)+1],U.push({command:cn.addLayer,args:[Ht,ee]})})(P,s.layers,d)}catch(v){console.warn("Unable to compute style diff:",v),d=[{command:cn.setStyle,args:[s]}]}return d},a.aF=function(c){const s=[],d=c.id;return d===void 0&&s.push({message:`layers.${d}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${d}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),s},a.aG=function c(s,d){if(Array.isArray(s)){if(!Array.isArray(d)||s.length!==d.length)return!1;for(let v=0;v<s.length;v++)if(!c(s[v],d[v]))return!1;return!0}if(typeof s=="object"&&s!==null&&d!==null){if(typeof d!="object"||Object.keys(s).length!==Object.keys(d).length)return!1;for(const v in s)if(!c(s[v],d[v]))return!1;return!0}return s===d},a.aH=_t,a.aI=bt,a.aJ=D,a.aK=function(c){return c({pluginStatus:la,pluginURL:co}),D.on("pluginStateChange",c),c},a.aL=class extends jl{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},a.aM=Ac,a.aN=class extends jl{constructor(c,s){super(c,s),this.current=pu}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},a.aO=xs,a.aP=class extends jl{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},a.aQ=class extends jl{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},a.aR=Bs,a.aS=function(c,s,d,v,T,P,k){var R=1/(s-d),U=1/(v-T),G=1/(P-k);return c[0]=-2*R,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*U,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*G,c[11]=0,c[12]=(s+d)*R,c[13]=(T+v)*U,c[14]=(k+P)*G,c[15]=1,c},a.aT=Qn,a.aU=s_,a.aV=class extends b{},a.aW=Gx,a.aX=class extends C{},a.aY=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},a.aZ=tg,a.a_=Ne,a.aa=function(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,v,T,P)=>{const k=T||P;return s[v]=!k||k.toLowerCase(),""})),s["max-age"]){const d=parseInt(s["max-age"],10);isNaN(d)?delete s["max-age"]:s["max-age"]=d}return s},a.ab=function(c,s){const d=[];for(const v in c)v in s||d.push(v);return d},a.ac=function(c){if(St==null){const s=c.navigator?c.navigator.userAgent:null;St=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return St},a.ad=ot,a.ae=function(c,s,d){var v=Math.sin(d),T=Math.cos(d),P=s[0],k=s[1],R=s[2],U=s[3],G=s[4],tt=s[5],st=s[6],ct=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=P*T+G*v,c[1]=k*T+tt*v,c[2]=R*T+st*v,c[3]=U*T+ct*v,c[4]=G*T-P*v,c[5]=tt*T-k*v,c[6]=st*T-R*v,c[7]=ct*T-U*v,c},a.af=function(c){var s=new kc(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},a.ag=Jf,a.ah=function(c,s){let d=0,v=0;if(c.kind==="constant")v=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:T,minZoom:P,maxZoom:k}=c,R=T?ot(zi.interpolationFactor(T,s,P,k),0,1):0;c.kind==="camera"?v=Ba.number(c.minSize,c.maxSize,R):d=R}return{uSizeT:d,uSize:v}},a.aj=function(c,{uSize:s,uSizeT:d},{lowerSize:v,upperSize:T}){return c.kind==="source"?v/vu:c.kind==="composite"?Ba.number(v/vu,T/vu,d):s},a.ak=Vs,a.al=function(c,s,d,v){const T=s.y-c.y,P=s.x-c.x,k=v.y-d.y,R=v.x-d.x,U=k*P-R*T;if(U===0)return null;const G=(R*(c.y-d.y)-k*(c.x-d.x))/U;return new O(c.x+G*P,c.y+G*T)},a.am=Cg,a.an=zr,a.ao=yp,a.ap=_r,a.ar=Gi,a.as=function(c,s){var d=s[0],v=s[1],T=s[2],P=s[3],k=s[4],R=s[5],U=s[6],G=s[7],tt=s[8],st=s[9],ct=s[10],gt=s[11],yt=s[12],Ct=s[13],Bt=s[14],Ut=s[15],Jt=d*R-v*k,Ht=d*U-T*k,ee=d*G-P*k,ne=v*U-T*R,Me=v*G-P*R,Fe=T*G-P*U,ln=tt*Ct-st*yt,Xe=tt*Bt-ct*yt,We=tt*Ut-gt*yt,Ve=st*Bt-ct*Ct,en=st*Ut-gt*Ct,qe=ct*Ut-gt*Bt,Re=Jt*qe-Ht*en+ee*Ve+ne*We-Me*Xe+Fe*ln;return Re?(c[0]=(R*qe-U*en+G*Ve)*(Re=1/Re),c[1]=(T*en-v*qe-P*Ve)*Re,c[2]=(Ct*Fe-Bt*Me+Ut*ne)*Re,c[3]=(ct*Me-st*Fe-gt*ne)*Re,c[4]=(U*We-k*qe-G*Xe)*Re,c[5]=(d*qe-T*We+P*Xe)*Re,c[6]=(Bt*ee-yt*Fe-Ut*Ht)*Re,c[7]=(tt*Fe-ct*ee+gt*Ht)*Re,c[8]=(k*en-R*We+G*ln)*Re,c[9]=(v*We-d*en-P*ln)*Re,c[10]=(yt*Me-Ct*ee+Ut*Jt)*Re,c[11]=(st*ee-tt*Me-gt*Jt)*Re,c[12]=(R*Xe-k*Ve-U*ln)*Re,c[13]=(d*Ve-v*Xe+T*ln)*Re,c[14]=(Ct*Ht-yt*ne-Bt*Jt)*Re,c[15]=(tt*ne-st*Ht+ct*Jt)*Re,c):null},a.at=Og,a.au=Vp,a.av=wu,a.aw=function(){const c={},s=_e.$version;for(const d in _e.$root){const v=_e.$root[d];if(v.required){let T=null;T=d==="version"?s:v.type==="array"?[]:{},T!=null&&(c[d]=T)}}return c},a.ax=cn,a.ay=Fo,a.az=Wt,a.b=function(c,s){const d=new Blob([new Uint8Array(c)],{type:"image/png"});createImageBitmap(d).then((v=>{s(null,v)})).catch((v=>{s(new Error(`Could not load image because of ${v.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))},a.b0=ua,a.b1=function(c,s){var d=c[0],v=c[1],T=c[2],P=c[3],k=c[4],R=c[5],U=c[6],G=c[7],tt=c[8],st=c[9],ct=c[10],gt=c[11],yt=c[12],Ct=c[13],Bt=c[14],Ut=c[15],Jt=s[0],Ht=s[1],ee=s[2],ne=s[3],Me=s[4],Fe=s[5],ln=s[6],Xe=s[7],We=s[8],Ve=s[9],en=s[10],qe=s[11],Re=s[12],pn=s[13],un=s[14],jn=s[15];return Math.abs(d-Jt)<=Fa*Math.max(1,Math.abs(d),Math.abs(Jt))&&Math.abs(v-Ht)<=Fa*Math.max(1,Math.abs(v),Math.abs(Ht))&&Math.abs(T-ee)<=Fa*Math.max(1,Math.abs(T),Math.abs(ee))&&Math.abs(P-ne)<=Fa*Math.max(1,Math.abs(P),Math.abs(ne))&&Math.abs(k-Me)<=Fa*Math.max(1,Math.abs(k),Math.abs(Me))&&Math.abs(R-Fe)<=Fa*Math.max(1,Math.abs(R),Math.abs(Fe))&&Math.abs(U-ln)<=Fa*Math.max(1,Math.abs(U),Math.abs(ln))&&Math.abs(G-Xe)<=Fa*Math.max(1,Math.abs(G),Math.abs(Xe))&&Math.abs(tt-We)<=Fa*Math.max(1,Math.abs(tt),Math.abs(We))&&Math.abs(st-Ve)<=Fa*Math.max(1,Math.abs(st),Math.abs(Ve))&&Math.abs(ct-en)<=Fa*Math.max(1,Math.abs(ct),Math.abs(en))&&Math.abs(gt-qe)<=Fa*Math.max(1,Math.abs(gt),Math.abs(qe))&&Math.abs(yt-Re)<=Fa*Math.max(1,Math.abs(yt),Math.abs(Re))&&Math.abs(Ct-pn)<=Fa*Math.max(1,Math.abs(Ct),Math.abs(pn))&&Math.abs(Bt-un)<=Fa*Math.max(1,Math.abs(Bt),Math.abs(un))&&Math.abs(Ut-jn)<=Fa*Math.max(1,Math.abs(Ut),Math.abs(jn))},a.b2=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},a.b3=function(c,s,d){return c[0]=s[0]*d[0],c[1]=s[1]*d[1],c[2]=s[2]*d[2],c[3]=s[3]*d[3],c},a.b4=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]*s[3]},a.b5=ht,a.b6=$s,a.b7=Yp,a.b8=function(c,s,d,v,T){var P,k=1/Math.tan(s/2);return c[0]=k/d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=k,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,T!=null&&T!==1/0?(c[10]=(T+v)*(P=1/(v-T)),c[14]=2*T*v*P):(c[10]=-1,c[14]=-2*v),c},a.b9=function(c,s,d){var v=Math.sin(d),T=Math.cos(d),P=s[4],k=s[5],R=s[6],U=s[7],G=s[8],tt=s[9],st=s[10],ct=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=P*T+G*v,c[5]=k*T+tt*v,c[6]=R*T+st*v,c[7]=U*T+ct*v,c[8]=G*T-P*v,c[9]=tt*T-k*v,c[10]=st*T-R*v,c[11]=ct*T-U*v,c},a.bA=x,a.bB=nc,a.bC=Uu,a.bD=mt,a.ba=W,a.bb=J,a.bc=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},a.bd=class extends qo{},a.be=xu,a.bf=Mg,a.bg=Qx,a.bi=Ie,a.bj=function(c,s,d=!1){if(la===Ku||la===Nl||la===Vo)throw new Error("setRTLTextPlugin cannot be called multiple times.");co=le.resolveURL(c),la=Ku,cu=s,w(),d||nt()},a.bk=$,a.bl=function(c,s){const d={};for(let T=0;T<c.length;T++){const P=s&&s[c[T].id]||Il(c[T]);s&&(s[c[T].id]=P);let k=d[P];k||(k=d[P]=[]),k.push(c[T])}const v=[];for(const T in d)v.push(d[T]);return v},a.bm=Ze,a.bn=lc,a.bo=Kp,a.bp=Us,a.bq=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=yr/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0],d=s.layout,v=s._unevaluatedLayout._values,T={layoutIconSize:v["icon-size"].possiblyEvaluate(new Rt(c.bucket.zoom+1),c.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Rt(c.bucket.zoom+1),c.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Rt(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:G,maxZoom:tt}=c.bucket.textSizeData;T.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Rt(G),c.canonical),v["text-size"].possiblyEvaluate(new Rt(tt),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:G,maxZoom:tt}=c.bucket.iconSizeData;T.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Rt(G),c.canonical),v["icon-size"].possiblyEvaluate(new Rt(tt),c.canonical)]}const P=d.get("text-line-height")*_r,k=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",R=d.get("text-keep-upright"),U=d.get("text-size");for(const G of c.bucket.features){const tt=d.get("text-font").evaluate(G,{},c.canonical).join(","),st=U.evaluate(G,{},c.canonical),ct=T.layoutTextSize.evaluate(G,{},c.canonical),gt=T.layoutIconSize.evaluate(G,{},c.canonical),yt={horizontal:{},vertical:void 0},Ct=G.text;let Bt,Ut=[0,0];if(Ct){const ee=Ct.toString(),ne=d.get("text-letter-spacing").evaluate(G,{},c.canonical)*_r,Me=hl(ee)?ne:0,Fe=d.get("text-anchor").evaluate(G,{},c.canonical),ln=G_(s,G,c.canonical);if(!ln){const qe=d.get("text-radial-offset").evaluate(G,{},c.canonical);Ut=qe?Z_(Fe,[qe*_r,tm]):d.get("text-offset").evaluate(G,{},c.canonical).map((Re=>Re*_r))}let Xe=k?"center":d.get("text-justify").evaluate(G,{},c.canonical);const We=d.get("symbol-placement"),Ve=We==="point"?d.get("text-max-width").evaluate(G,{},c.canonical)*_r:0,en=()=>{c.bucket.allowVerticalPlacement&&_s(ee)&&(yt.vertical=df(Ct,c.glyphMap,c.glyphPositions,c.imagePositions,tt,Ve,P,Fe,"left",Me,Ut,a.ai.vertical,!0,We,ct,st))};if(!k&&ln){const qe=new Set;if(Xe==="auto")for(let pn=0;pn<ln.values.length;pn+=2)qe.add(Og(ln.values[pn]));else qe.add(Xe);let Re=!1;for(const pn of qe)if(!yt.horizontal[pn])if(Re)yt.horizontal[pn]=yt.horizontal[0];else{const un=df(Ct,c.glyphMap,c.glyphPositions,c.imagePositions,tt,Ve,P,"center",pn,Me,Ut,a.ai.horizontal,!1,We,ct,st);un&&(yt.horizontal[pn]=un,Re=un.positionedLines.length===1)}en()}else{Xe==="auto"&&(Xe=Og(Fe));const qe=df(Ct,c.glyphMap,c.glyphPositions,c.imagePositions,tt,Ve,P,Fe,Xe,Me,Ut,a.ai.horizontal,!1,We,ct,st);qe&&(yt.horizontal[Xe]=qe),en(),_s(ee)&&k&&R&&(yt.vertical=df(Ct,c.glyphMap,c.glyphPositions,c.imagePositions,tt,Ve,P,Fe,Xe,Me,Ut,a.ai.vertical,!1,We,ct,st))}}let Jt=!1;if(G.icon&&G.icon.name){const ee=c.imageMap[G.icon.name];ee&&(Bt=R_(c.imagePositions[G.icon.name],d.get("icon-offset").evaluate(G,{},c.canonical),d.get("icon-anchor").evaluate(G,{},c.canonical)),Jt=!!ee.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Jt:c.bucket.sdfIcons!==Jt&&ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ee.pixelRatio!==c.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Ht=nm(yt.horizontal)||yt.vertical;c.bucket.iconsInText=!!Ht&&Ht.iconsInText,(Ht||Bt)&&em(c.bucket,G,yt,Bt,c.imageMap,T,ct,gt,Ut,Jt,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},a.br=ld,a.bs=sd,a.bt=Cp,a.bu=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},a.bv=Ul,a.bw=tc,a.bx=function(c,s,d,v,T){return g(this,void 0,void 0,(function*(){if(Y())try{return yield pt(c,s,d,v,T)}catch{}return(function(P,k,R,U,G){const tt=P.width,st=P.height;Tt&&$t||(Tt=new OffscreenCanvas(tt,st),$t=Tt.getContext("2d",{willReadFrequently:!0})),Tt.width=tt,Tt.height=st,$t.drawImage(P,0,0,tt,st);const ct=$t.getImageData(k,R,U,G);return $t.clearRect(0,0,tt,st),ct.data})(c,s,d,v,T)}))},a.by=N_,a.bz=_,a.c=Ae,a.d=function(c,s){const d=new Image;d.onload=()=>{s(null,d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame((()=>{d.src=Vt}))},d.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(c)],{type:"image/png"});d.src=c.byteLength?URL.createObjectURL(v):Vt},a.e=rt,a.f=function(c,s){return ce(rt(c,{type:"json"}),s)},a.g=Pe,a.h=le,a.i=Ot,a.j=an,a.k=Tn,a.l=rn,a.m=ce,a.n=function(c){return new Ul(c).readFields(L_,[])},a.o=function(c,s,d){if(!c.length)return d(null,[]);let v=c.length;const T=new Array(c.length);let P=null;c.forEach(((k,R)=>{s(k,((U,G)=>{U&&(P=U),T[R]=G,--v==0&&d(P,T)}))}))},a.p=Fs,a.q=rf,a.r=oi,a.s=je,a.t=Kf,a.u=Ye,a.v=_e,a.w=ye,a.x=Ls,a.y=oo,a.z=function([c,s,d]){return s+=90,s*=Math.PI/180,d*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(d),y:c*Math.sin(s)*Math.sin(d),z:c*Math.cos(d)}}})),l(["./shared"],(function(a){class g{constructor(lt){this.keyCache={},lt&&this.replace(lt)}replace(lt){this._layerConfigs={},this._layers={},this.update(lt,[])}update(lt,ft){for(const Lt of lt){this._layerConfigs[Lt.id]=Lt;const It=this._layers[Lt.id]=a.aC(Lt);It._featureFilter=a.a6(It.filter),this.keyCache[Lt.id]&&delete this.keyCache[Lt.id]}for(const Lt of ft)delete this.keyCache[Lt],delete this._layerConfigs[Lt],delete this._layers[Lt];this.familiesBySource={};const wt=a.bl(Object.values(this._layerConfigs),this.keyCache);for(const Lt of wt){const It=Lt.map((ie=>this._layers[ie.id])),te=It[0];if(te.visibility==="none")continue;const Zt=te.source||"";let Ft=this.familiesBySource[Zt];Ft||(Ft=this.familiesBySource[Zt]={});const Xt=te.sourceLayer||"_geojsonTileLayer";let xe=Ft[Xt];xe||(xe=Ft[Xt]=[]),xe.push(It)}}}class _{constructor(lt){const ft={},wt=[];for(const Zt in lt){const Ft=lt[Zt],Xt=ft[Zt]={};for(const xe in Ft){const ie=Ft[+xe];if(!ie||ie.bitmap.width===0||ie.bitmap.height===0)continue;const Ee={x:0,y:0,w:ie.bitmap.width+2,h:ie.bitmap.height+2};wt.push(Ee),Xt[xe]={rect:Ee,metrics:ie.metrics}}}const{w:Lt,h:It}=a.p(wt),te=new a.q({width:Lt||1,height:It||1});for(const Zt in lt){const Ft=lt[Zt];for(const Xt in Ft){const xe=Ft[+Xt];if(!xe||xe.bitmap.width===0||xe.bitmap.height===0)continue;const ie=ft[Zt][Xt].rect;a.q.copy(xe.bitmap,te,{x:0,y:0},{x:ie.x+1,y:ie.y+1},xe.bitmap)}}this.image=te,this.positions=ft}}a.bm("GlyphAtlas",_);class x{constructor(lt){this.tileID=new a.O(lt.tileID.overscaledZ,lt.tileID.wrap,lt.tileID.canonical.z,lt.tileID.canonical.x,lt.tileID.canonical.y),this.uid=lt.uid,this.zoom=lt.zoom,this.pixelRatio=lt.pixelRatio,this.tileSize=lt.tileSize,this.source=lt.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=lt.showCollisionBoxes,this.collectResourceTiming=!!lt.collectResourceTiming,this.returnDependencies=!!lt.returnDependencies,this.promoteId=lt.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(lt,ft,wt,Lt,It){this.status="parsing",this.data=lt,this.collisionBoxArray=new a.a3;const te=new a.bn(Object.keys(lt.layers).sort()),Zt=new a.bo(this.tileID,this.promoteId);Zt.bucketLayerIDs=[];const Ft={},Xt={featureIndex:Zt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:wt},xe=ft.familiesBySource[this.source];for(const Kn in xe){const Hn=lt.layers[Kn];if(!Hn)continue;Hn.version===1&&a.w(`Vector tile source "${this.source}" layer "${Kn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wr=te.encode(Kn),Mi=[];for(let Ni=0;Ni<Hn.length;Ni++){const rr=Hn.feature(Ni),Cr=Zt.getId(rr,Kn);Mi.push({feature:rr,id:Cr,index:Ni,sourceLayerIndex:wr})}for(const Ni of xe[Kn]){const rr=Ni[0];rr.source!==this.source&&a.w(`layer.source = ${rr.source} does not equal this.source = ${this.source}`),rr.minzoom&&this.zoom<Math.floor(rr.minzoom)||rr.maxzoom&&this.zoom>=rr.maxzoom||rr.visibility!=="none"&&(M(Ni,this.zoom,wt),(Ft[rr.id]=rr.createBucket({index:Zt.bucketLayerIDs.length,layers:Ni,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wr,sourceID:this.source})).populate(Mi,Xt,this.tileID.canonical),Zt.bucketLayerIDs.push(Ni.map((Cr=>Cr.id))))}}let ie,Ee,hn,dn;const He=a.aH(Xt.glyphDependencies,(Kn=>Object.keys(Kn).map(Number)));this.inFlightDependencies.forEach((Kn=>Kn?.cancel())),this.inFlightDependencies=[];const Je=++this.dependencySentinel;Object.keys(He).length?this.inFlightDependencies.push(Lt.send("getGlyphs",{uid:this.uid,stacks:He,source:this.source,tileID:this.tileID,type:"glyphs"},((Kn,Hn)=>{Je===this.dependencySentinel&&(ie||(ie=Kn,Ee=Hn,gi.call(this)))}))):Ee={};const _n=Object.keys(Xt.iconDependencies);_n.length?this.inFlightDependencies.push(Lt.send("getImages",{icons:_n,source:this.source,tileID:this.tileID,type:"icons"},((Kn,Hn)=>{Je===this.dependencySentinel&&(ie||(ie=Kn,hn=Hn,gi.call(this)))}))):hn={};const Vn=Object.keys(Xt.patternDependencies);function gi(){if(ie)return It(ie);if(Ee&&hn&&dn){const Kn=new _(Ee),Hn=new a.bp(hn,dn);for(const wr in Ft){const Mi=Ft[wr];Mi instanceof a.a4?(M(Mi.layers,this.zoom,wt),a.bq({bucket:Mi,glyphMap:Ee,glyphPositions:Kn.positions,imageMap:hn,imagePositions:Hn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Mi.hasPattern&&(Mi instanceof a.br||Mi instanceof a.bs||Mi instanceof a.bt)&&(M(Mi.layers,this.zoom,wt),Mi.addFeatures(Xt,this.tileID.canonical,Hn.patternPositions))}this.status="done",It(null,{buckets:Object.values(Ft).filter((wr=>!wr.isEmpty())),featureIndex:Zt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Kn.image,imageAtlas:Hn,glyphMap:this.returnDependencies?Ee:null,iconMap:this.returnDependencies?hn:null,glyphPositions:this.returnDependencies?Kn.positions:null})}}Vn.length?this.inFlightDependencies.push(Lt.send("getImages",{icons:Vn,source:this.source,tileID:this.tileID,type:"patterns"},((Kn,Hn)=>{Je===this.dependencySentinel&&(ie||(ie=Kn,dn=Hn,gi.call(this)))}))):dn={},gi.call(this)}}function M(Dt,lt,ft){const wt=new a.a8(lt);for(const Lt of Dt)Lt.recalculate(wt,ft)}function O(Dt,lt){const ft=a.l(Dt.request,((wt,Lt,It,te)=>{if(wt)lt(wt);else if(Lt)try{const Zt=new a.bw.VectorTile(new a.bv(Lt));lt(null,{vectorTile:Zt,rawData:Lt,cacheControl:It,expires:te})}catch(Zt){const Ft=new Uint8Array(Lt);let Xt=`Unable to parse the tile at ${Dt.request.url}, `;Xt+=Ft[0]===31&&Ft[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Zt.messge}`,lt(new Error(Xt))}}));return()=>{ft.cancel(),lt()}}class z{constructor(lt,ft,wt,Lt){this.actor=lt,this.layerIndex=ft,this.availableImages=wt,this.loadVectorData=Lt||O,this.fetching={},this.loading={},this.loaded={}}loadTile(lt,ft){const wt=lt.uid;this.loading||(this.loading={});const Lt=!!(lt&&lt.request&&lt.request.collectResourceTiming)&&new a.bu(lt.request),It=this.loading[wt]=new x(lt);It.abort=this.loadVectorData(lt,((te,Zt)=>{if(delete this.loading[wt],te||!Zt)return It.status="done",this.loaded[wt]=It,ft(te);const Ft=Zt.rawData,Xt={};Zt.expires&&(Xt.expires=Zt.expires),Zt.cacheControl&&(Xt.cacheControl=Zt.cacheControl);const xe={};if(Lt){const ie=Lt.finish();ie&&(xe.resourceTiming=JSON.parse(JSON.stringify(ie)))}It.vectorTile=Zt.vectorTile,It.parse(Zt.vectorTile,this.layerIndex,this.availableImages,this.actor,((ie,Ee)=>{if(delete this.fetching[wt],ie||!Ee)return ft(ie);ft(null,a.e({rawTileData:Ft.slice(0)},Ee,Xt,xe))})),this.loaded=this.loaded||{},this.loaded[wt]=It,this.fetching[wt]={rawTileData:Ft,cacheControl:Xt,resourceTiming:xe}}))}reloadTile(lt,ft){const wt=this.loaded,Lt=lt.uid;if(wt&&wt[Lt]){const It=wt[Lt];It.showCollisionBoxes=lt.showCollisionBoxes,It.status==="parsing"?It.parse(It.vectorTile,this.layerIndex,this.availableImages,this.actor,((te,Zt)=>{if(te||!Zt)return ft(te,Zt);let Ft;if(this.fetching[Lt]){const{rawTileData:Xt,cacheControl:xe,resourceTiming:ie}=this.fetching[Lt];delete this.fetching[Lt],Ft=a.e({rawTileData:Xt.slice(0)},Zt,xe,ie)}else Ft=Zt;ft(null,Ft)})):It.status==="done"&&(It.vectorTile?It.parse(It.vectorTile,this.layerIndex,this.availableImages,this.actor,ft):ft())}}abortTile(lt,ft){const wt=this.loading,Lt=lt.uid;wt&&wt[Lt]&&wt[Lt].abort&&(wt[Lt].abort(),delete wt[Lt]),ft()}removeTile(lt,ft){const wt=this.loaded,Lt=lt.uid;wt&&wt[Lt]&&delete wt[Lt],ft()}}class F{constructor(){this.loaded={}}loadTile(lt,ft){return a._(this,void 0,void 0,(function*(){const{uid:wt,encoding:Lt,rawImageData:It,redFactor:te,greenFactor:Zt,blueFactor:Ft,baseShift:Xt}=lt,xe=It.width+2,ie=It.height+2,Ee=a.a(It)?new a.R({width:xe,height:ie},yield a.bx(It,-1,-1,xe,ie)):It,hn=new a.by(wt,Ee,Lt,te,Zt,Ft,Xt);this.loaded=this.loaded||{},this.loaded[wt]=hn,ft(null,hn)}))}removeTile(lt){const ft=this.loaded,wt=lt.uid;ft&&ft[wt]&&delete ft[wt]}}function V(Dt,lt){if(Dt.length!==0){H(Dt[0],lt);for(var ft=1;ft<Dt.length;ft++)H(Dt[ft],!lt)}}function H(Dt,lt){for(var ft=0,wt=0,Lt=0,It=Dt.length,te=It-1;Lt<It;te=Lt++){var Zt=(Dt[Lt][0]-Dt[te][0])*(Dt[te][1]+Dt[Lt][1]),Ft=ft+Zt;wt+=Math.abs(ft)>=Math.abs(Zt)?ft-Ft+Zt:Zt-Ft+ft,ft=Ft}ft+wt>=0!=!!lt&&Dt.reverse()}var Q=a.bz((function Dt(lt,ft){var wt,Lt=lt&&lt.type;if(Lt==="FeatureCollection")for(wt=0;wt<lt.features.length;wt++)Dt(lt.features[wt],ft);else if(Lt==="GeometryCollection")for(wt=0;wt<lt.geometries.length;wt++)Dt(lt.geometries[wt],ft);else if(Lt==="Feature")Dt(lt.geometry,ft);else if(Lt==="Polygon")V(lt.coordinates,ft);else if(Lt==="MultiPolygon")for(wt=0;wt<lt.coordinates.length;wt++)V(lt.coordinates[wt],ft);return lt}));const X=a.bw.VectorTileFeature.prototype.toGeoJSON;var Y={exports:{}},W=a.bA,J=a.bw.VectorTileFeature,ot=ht;function ht(Dt,lt){this.options=lt||{},this.features=Dt,this.length=Dt.length}function rt(Dt,lt){this.id=typeof Dt.id=="number"?Dt.id:void 0,this.type=Dt.type,this.rawGeometry=Dt.type===1?[Dt.geometry]:Dt.geometry,this.properties=Dt.tags,this.extent=lt||4096}ht.prototype.feature=function(Dt){return new rt(this.features[Dt],this.options.extent)},rt.prototype.loadGeometry=function(){var Dt=this.rawGeometry;this.geometry=[];for(var lt=0;lt<Dt.length;lt++){for(var ft=Dt[lt],wt=[],Lt=0;Lt<ft.length;Lt++)wt.push(new W(ft[Lt][0],ft[Lt][1]));this.geometry.push(wt)}return this.geometry},rt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Dt=this.geometry,lt=1/0,ft=-1/0,wt=1/0,Lt=-1/0,It=0;It<Dt.length;It++)for(var te=Dt[It],Zt=0;Zt<te.length;Zt++){var Ft=te[Zt];lt=Math.min(lt,Ft.x),ft=Math.max(ft,Ft.x),wt=Math.min(wt,Ft.y),Lt=Math.max(Lt,Ft.y)}return[lt,wt,ft,Lt]},rt.prototype.toGeoJSON=J.prototype.toGeoJSON;var ut=a.bB,_t=ot;function bt(Dt){var lt=new ut;return(function(ft,wt){for(var Lt in ft.layers)wt.writeMessage(3,Pt,ft.layers[Lt])})(Dt,lt),lt.finish()}function Pt(Dt,lt){var ft;lt.writeVarintField(15,Dt.version||1),lt.writeStringField(1,Dt.name||""),lt.writeVarintField(5,Dt.extent||4096);var wt={keys:[],values:[],keycache:{},valuecache:{}};for(ft=0;ft<Dt.length;ft++)wt.feature=Dt.feature(ft),lt.writeMessage(2,re,wt);var Lt=wt.keys;for(ft=0;ft<Lt.length;ft++)lt.writeStringField(3,Lt[ft]);var It=wt.values;for(ft=0;ft<It.length;ft++)lt.writeMessage(4,St,It[ft])}function re(Dt,lt){var ft=Dt.feature;ft.id!==void 0&&lt.writeVarintField(1,ft.id),lt.writeMessage(2,ye,Dt),lt.writeVarintField(3,ft.type),lt.writeMessage(4,Ot,ft)}function ye(Dt,lt){var ft=Dt.feature,wt=Dt.keys,Lt=Dt.values,It=Dt.keycache,te=Dt.valuecache;for(var Zt in ft.properties){var Ft=ft.properties[Zt],Xt=It[Zt];if(Ft!==null){Xt===void 0&&(wt.push(Zt),It[Zt]=Xt=wt.length-1),lt.writeVarint(Xt);var xe=typeof Ft;xe!=="string"&&xe!=="boolean"&&xe!=="number"&&(Ft=JSON.stringify(Ft));var ie=xe+":"+Ft,Ee=te[ie];Ee===void 0&&(Lt.push(Ft),te[ie]=Ee=Lt.length-1),lt.writeVarint(Ee)}}}function fe(Dt,lt){return(lt<<3)+(7&Dt)}function kt(Dt){return Dt<<1^Dt>>31}function Ot(Dt,lt){for(var ft=Dt.loadGeometry(),wt=Dt.type,Lt=0,It=0,te=ft.length,Zt=0;Zt<te;Zt++){var Ft=ft[Zt],Xt=1;wt===1&&(Xt=Ft.length),lt.writeVarint(fe(1,Xt));for(var xe=wt===3?Ft.length-1:Ft.length,ie=0;ie<xe;ie++){ie===1&&wt!==1&&lt.writeVarint(fe(2,xe-1));var Ee=Ft[ie].x-Lt,hn=Ft[ie].y-It;lt.writeVarint(kt(Ee)),lt.writeVarint(kt(hn)),Lt+=Ee,It+=hn}wt===3&&lt.writeVarint(fe(7,1))}}function St(Dt,lt){var ft=typeof Dt;ft==="string"?lt.writeStringField(1,Dt):ft==="boolean"?lt.writeBooleanField(7,Dt):ft==="number"&&(Dt%1!=0?lt.writeDoubleField(3,Dt):Dt<0?lt.writeSVarintField(6,Dt):lt.writeVarintField(5,Dt))}Y.exports=bt,Y.exports.fromVectorTileJs=bt,Y.exports.fromGeojsonVt=function(Dt,lt){lt=lt||{};var ft={};for(var wt in Dt)ft[wt]=new _t(Dt[wt].features,lt),ft[wt].name=wt,ft[wt].version=lt.version,ft[wt].extent=lt.extent;return bt({layers:ft})},Y.exports.GeoJSONWrapper=_t;var jt=a.bz(Y.exports);const Vt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Dt=>Dt},pt=Math.fround||(Tt=new Float32Array(1),Dt=>(Tt[0]=+Dt,Tt[0]));var Tt;const $t=3,Yt=5,se=6;class le{constructor(lt){this.options=Object.assign(Object.create(Vt),lt),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(lt){const{log:ft,minZoom:wt,maxZoom:Lt}=this.options;ft&&console.time("total time");const It=`prepare ${lt.length} points`;ft&&console.time(It),this.points=lt;const te=[];for(let Ft=0;Ft<lt.length;Ft++){const Xt=lt[Ft];if(!Xt.geometry)continue;const[xe,ie]=Xt.geometry.coordinates,Ee=pt(Wt(xe)),hn=pt(Pe(ie));te.push(Ee,hn,1/0,Ft,-1,1),this.options.reduce&&te.push(0)}let Zt=this.trees[Lt+1]=this._createTree(te);ft&&console.timeEnd(It);for(let Ft=Lt;Ft>=wt;Ft--){const Xt=+Date.now();Zt=this.trees[Ft]=this._createTree(this._cluster(Zt,Ft)),ft&&console.log("z%d: %d clusters in %dms",Ft,Zt.numItems,+Date.now()-Xt)}return ft&&console.timeEnd("total time"),this}getClusters(lt,ft){let wt=((lt[0]+180)%360+360)%360-180;const Lt=Math.max(-90,Math.min(90,lt[1]));let It=lt[2]===180?180:((lt[2]+180)%360+360)%360-180;const te=Math.max(-90,Math.min(90,lt[3]));if(lt[2]-lt[0]>=360)wt=-180,It=180;else if(wt>It){const ie=this.getClusters([wt,Lt,180,te],ft),Ee=this.getClusters([-180,Lt,It,te],ft);return ie.concat(Ee)}const Zt=this.trees[this._limitZoom(ft)],Ft=Zt.range(Wt(wt),Pe(te),Wt(It),Pe(Lt)),Xt=Zt.data,xe=[];for(const ie of Ft){const Ee=this.stride*ie;xe.push(Xt[Ee+Yt]>1?Ae(Xt,Ee,this.clusterProps):this.points[Xt[Ee+$t]])}return xe}getChildren(lt){const ft=this._getOriginId(lt),wt=this._getOriginZoom(lt),Lt="No cluster with the specified id.",It=this.trees[wt];if(!It)throw new Error(Lt);const te=It.data;if(ft*this.stride>=te.length)throw new Error(Lt);const Zt=this.options.radius/(this.options.extent*Math.pow(2,wt-1)),Ft=It.within(te[ft*this.stride],te[ft*this.stride+1],Zt),Xt=[];for(const xe of Ft){const ie=xe*this.stride;te[ie+4]===lt&&Xt.push(te[ie+Yt]>1?Ae(te,ie,this.clusterProps):this.points[te[ie+$t]])}if(Xt.length===0)throw new Error(Lt);return Xt}getLeaves(lt,ft,wt){const Lt=[];return this._appendLeaves(Lt,lt,ft=ft||10,wt=wt||0,0),Lt}getTile(lt,ft,wt){const Lt=this.trees[this._limitZoom(lt)],It=Math.pow(2,lt),{extent:te,radius:Zt}=this.options,Ft=Zt/te,Xt=(wt-Ft)/It,xe=(wt+1+Ft)/It,ie={features:[]};return this._addTileFeatures(Lt.range((ft-Ft)/It,Xt,(ft+1+Ft)/It,xe),Lt.data,ft,wt,It,ie),ft===0&&this._addTileFeatures(Lt.range(1-Ft/It,Xt,1,xe),Lt.data,It,wt,It,ie),ft===It-1&&this._addTileFeatures(Lt.range(0,Xt,Ft/It,xe),Lt.data,-1,wt,It,ie),ie.features.length?ie:null}getClusterExpansionZoom(lt){let ft=this._getOriginZoom(lt)-1;for(;ft<=this.options.maxZoom;){const wt=this.getChildren(lt);if(ft++,wt.length!==1)break;lt=wt[0].properties.cluster_id}return ft}_appendLeaves(lt,ft,wt,Lt,It){const te=this.getChildren(ft);for(const Zt of te){const Ft=Zt.properties;if(Ft&&Ft.cluster?It+Ft.point_count<=Lt?It+=Ft.point_count:It=this._appendLeaves(lt,Ft.cluster_id,wt,Lt,It):It<Lt?It++:lt.push(Zt),lt.length===wt)break}return It}_createTree(lt){const ft=new a.av(lt.length/this.stride|0,this.options.nodeSize,Float32Array);for(let wt=0;wt<lt.length;wt+=this.stride)ft.add(lt[wt],lt[wt+1]);return ft.finish(),ft.data=lt,ft}_addTileFeatures(lt,ft,wt,Lt,It,te){for(const Zt of lt){const Ft=Zt*this.stride,Xt=ft[Ft+Yt]>1;let xe,ie,Ee;if(Xt)xe=Ie(ft,Ft,this.clusterProps),ie=ft[Ft],Ee=ft[Ft+1];else{const He=this.points[ft[Ft+$t]];xe=He.properties;const[Je,_n]=He.geometry.coordinates;ie=Wt(Je),Ee=Pe(_n)}const hn={type:1,geometry:[[Math.round(this.options.extent*(ie*It-wt)),Math.round(this.options.extent*(Ee*It-Lt))]],tags:xe};let dn;dn=Xt||this.options.generateId?ft[Ft+$t]:this.points[ft[Ft+$t]].id,dn!==void 0&&(hn.id=dn),te.features.push(hn)}}_limitZoom(lt){return Math.max(this.options.minZoom,Math.min(Math.floor(+lt),this.options.maxZoom+1))}_cluster(lt,ft){const{radius:wt,extent:Lt,reduce:It,minPoints:te}=this.options,Zt=wt/(Lt*Math.pow(2,ft)),Ft=lt.data,Xt=[],xe=this.stride;for(let ie=0;ie<Ft.length;ie+=xe){if(Ft[ie+2]<=ft)continue;Ft[ie+2]=ft;const Ee=Ft[ie],hn=Ft[ie+1],dn=lt.within(Ft[ie],Ft[ie+1],Zt),He=Ft[ie+Yt];let Je=He;for(const _n of dn){const Vn=_n*xe;Ft[Vn+2]>ft&&(Je+=Ft[Vn+Yt])}if(Je>He&&Je>=te){let _n,Vn=Ee*He,gi=hn*He,Kn=-1;const Hn=((ie/xe|0)<<5)+(ft+1)+this.points.length;for(const wr of dn){const Mi=wr*xe;if(Ft[Mi+2]<=ft)continue;Ft[Mi+2]=ft;const Ni=Ft[Mi+Yt];Vn+=Ft[Mi]*Ni,gi+=Ft[Mi+1]*Ni,Ft[Mi+4]=Hn,It&&(_n||(_n=this._map(Ft,ie,!0),Kn=this.clusterProps.length,this.clusterProps.push(_n)),It(_n,this._map(Ft,Mi)))}Ft[ie+4]=Hn,Xt.push(Vn/Je,gi/Je,1/0,Hn,-1,Je),It&&Xt.push(Kn)}else{for(let _n=0;_n<xe;_n++)Xt.push(Ft[ie+_n]);if(Je>1)for(const _n of dn){const Vn=_n*xe;if(!(Ft[Vn+2]<=ft)){Ft[Vn+2]=ft;for(let gi=0;gi<xe;gi++)Xt.push(Ft[Vn+gi])}}}}return Xt}_getOriginId(lt){return lt-this.points.length>>5}_getOriginZoom(lt){return(lt-this.points.length)%32}_map(lt,ft,wt){if(lt[ft+Yt]>1){const te=this.clusterProps[lt[ft+se]];return wt?Object.assign({},te):te}const Lt=this.points[lt[ft+$t]].properties,It=this.options.map(Lt);return wt&&It===Lt?Object.assign({},It):It}}function Ae(Dt,lt,ft){return{type:"Feature",id:Dt[lt+$t],properties:Ie(Dt,lt,ft),geometry:{type:"Point",coordinates:[(wt=Dt[lt],360*(wt-.5)),we(Dt[lt+1])]}};var wt}function Ie(Dt,lt,ft){const wt=Dt[lt+Yt],Lt=wt>=1e4?`${Math.round(wt/1e3)}k`:wt>=1e3?Math.round(wt/100)/10+"k":wt,It=Dt[lt+se],te=It===-1?{}:Object.assign({},ft[It]);return Object.assign(te,{cluster:!0,cluster_id:Dt[lt+$t],point_count:wt,point_count_abbreviated:Lt})}function Wt(Dt){return Dt/360+.5}function Pe(Dt){const lt=Math.sin(Dt*Math.PI/180),ft=.5-.25*Math.log((1+lt)/(1-lt))/Math.PI;return ft<0?0:ft>1?1:ft}function we(Dt){const lt=(180-360*Dt)*Math.PI/180;return 360*Math.atan(Math.exp(lt))/Math.PI-90}function ce(Dt,lt,ft,wt){for(var Lt,It=wt,te=ft-lt>>1,Zt=ft-lt,Ft=Dt[lt],Xt=Dt[lt+1],xe=Dt[ft],ie=Dt[ft+1],Ee=lt+3;Ee<ft;Ee+=3){var hn=rn(Dt[Ee],Dt[Ee+1],Ft,Xt,xe,ie);if(hn>It)Lt=Ee,It=hn;else if(hn===It){var dn=Math.abs(Ee-te);dn<Zt&&(Lt=Ee,Zt=dn)}}It>wt&&(Lt-lt>3&&ce(Dt,lt,Lt,wt),Dt[Lt+2]=It,ft-Lt>3&&ce(Dt,Lt,ft,wt))}function rn(Dt,lt,ft,wt,Lt,It){var te=Lt-ft,Zt=It-wt;if(te!==0||Zt!==0){var Ft=((Dt-ft)*te+(lt-wt)*Zt)/(te*te+Zt*Zt);Ft>1?(ft=Lt,wt=It):Ft>0&&(ft+=te*Ft,wt+=Zt*Ft)}return(te=Dt-ft)*te+(Zt=lt-wt)*Zt}function je(Dt,lt,ft,wt){var Lt={id:Dt===void 0?null:Dt,type:lt,geometry:ft,tags:wt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(It){var te=It.geometry,Zt=It.type;if(Zt==="Point"||Zt==="MultiPoint"||Zt==="LineString")nn(It,te);else if(Zt==="Polygon"||Zt==="MultiLineString")for(var Ft=0;Ft<te.length;Ft++)nn(It,te[Ft]);else if(Zt==="MultiPolygon")for(Ft=0;Ft<te.length;Ft++)for(var Xt=0;Xt<te[Ft].length;Xt++)nn(It,te[Ft][Xt])})(Lt),Lt}function nn(Dt,lt){for(var ft=0;ft<lt.length;ft+=3)Dt.minX=Math.min(Dt.minX,lt[ft]),Dt.minY=Math.min(Dt.minY,lt[ft+1]),Dt.maxX=Math.max(Dt.maxX,lt[ft]),Dt.maxY=Math.max(Dt.maxY,lt[ft+1])}function tn(Dt,lt,ft,wt){if(lt.geometry){var Lt=lt.geometry.coordinates,It=lt.geometry.type,te=Math.pow(ft.tolerance/((1<<ft.maxZoom)*ft.extent),2),Zt=[],Ft=lt.id;if(ft.promoteId?Ft=lt.properties[ft.promoteId]:ft.generateId&&(Ft=wt||0),It==="Point")Tn(Lt,Zt);else if(It==="MultiPoint")for(var Xt=0;Xt<Lt.length;Xt++)Tn(Lt[Xt],Zt);else if(It==="LineString")an(Lt,Zt,te,!1);else if(It==="MultiLineString"){if(ft.lineMetrics){for(Xt=0;Xt<Lt.length;Xt++)an(Lt[Xt],Zt=[],te,!1),Dt.push(je(Ft,"LineString",Zt,lt.properties));return}In(Lt,Zt,te,!1)}else if(It==="Polygon")In(Lt,Zt,te,!0);else{if(It!=="MultiPolygon"){if(It==="GeometryCollection"){for(Xt=0;Xt<lt.geometry.geometries.length;Xt++)tn(Dt,{id:Ft,geometry:lt.geometry.geometries[Xt],properties:lt.properties},ft,wt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Xt=0;Xt<Lt.length;Xt++){var xe=[];In(Lt[Xt],xe,te,!0),Zt.push(xe)}}Dt.push(je(Ft,It,Zt,lt.properties))}}function Tn(Dt,lt){lt.push(_e(Dt[0])),lt.push(Di(Dt[1])),lt.push(0)}function an(Dt,lt,ft,wt){for(var Lt,It,te=0,Zt=0;Zt<Dt.length;Zt++){var Ft=_e(Dt[Zt][0]),Xt=Di(Dt[Zt][1]);lt.push(Ft),lt.push(Xt),lt.push(0),Zt>0&&(te+=wt?(Lt*Xt-Ft*It)/2:Math.sqrt(Math.pow(Ft-Lt,2)+Math.pow(Xt-It,2))),Lt=Ft,It=Xt}var xe=lt.length-3;lt[2]=1,ce(lt,0,xe,ft),lt[xe+2]=1,lt.size=Math.abs(te),lt.start=0,lt.end=lt.size}function In(Dt,lt,ft,wt){for(var Lt=0;Lt<Dt.length;Lt++){var It=[];an(Dt[Lt],It,ft,wt),lt.push(It)}}function _e(Dt){return Dt/360+.5}function Di(Dt){var lt=Math.sin(Dt*Math.PI/180),ft=.5-.25*Math.log((1+lt)/(1-lt))/Math.PI;return ft<0?0:ft>1?1:ft}function Ri(Dt,lt,ft,wt,Lt,It,te,Zt){if(wt/=lt,It>=(ft/=lt)&&te<wt)return Dt;if(te<ft||It>=wt)return null;for(var Ft=[],Xt=0;Xt<Dt.length;Xt++){var xe=Dt[Xt],ie=xe.geometry,Ee=xe.type,hn=Lt===0?xe.minX:xe.minY,dn=Lt===0?xe.maxX:xe.maxY;if(hn>=ft&&dn<wt)Ft.push(xe);else if(!(dn<ft||hn>=wt)){var He=[];if(Ee==="Point"||Ee==="MultiPoint")Yn(ie,He,ft,wt,Lt);else if(Ee==="LineString")cn(ie,He,ft,wt,Lt,!1,Zt.lineMetrics);else if(Ee==="MultiLineString")si(ie,He,ft,wt,Lt,!1);else if(Ee==="Polygon")si(ie,He,ft,wt,Lt,!0);else if(Ee==="MultiPolygon")for(var Je=0;Je<ie.length;Je++){var _n=[];si(ie[Je],_n,ft,wt,Lt,!0),_n.length&&He.push(_n)}if(He.length){if(Zt.lineMetrics&&Ee==="LineString"){for(Je=0;Je<He.length;Je++)Ft.push(je(xe.id,Ee,He[Je],xe.tags));continue}Ee!=="LineString"&&Ee!=="MultiLineString"||(He.length===1?(Ee="LineString",He=He[0]):Ee="MultiLineString"),Ee!=="Point"&&Ee!=="MultiPoint"||(Ee=He.length===3?"Point":"MultiPoint"),Ft.push(je(xe.id,Ee,He,xe.tags))}}}return Ft.length?Ft:null}function Yn(Dt,lt,ft,wt,Lt){for(var It=0;It<Dt.length;It+=3){var te=Dt[It+Lt];te>=ft&&te<=wt&&(lt.push(Dt[It]),lt.push(Dt[It+1]),lt.push(Dt[It+2]))}}function cn(Dt,lt,ft,wt,Lt,It,te){for(var Zt,Ft,Xt=Wi(Dt),xe=Lt===0?Ur:Xs,ie=Dt.start,Ee=0;Ee<Dt.length-3;Ee+=3){var hn=Dt[Ee],dn=Dt[Ee+1],He=Dt[Ee+2],Je=Dt[Ee+3],_n=Dt[Ee+4],Vn=Lt===0?hn:dn,gi=Lt===0?Je:_n,Kn=!1;te&&(Zt=Math.sqrt(Math.pow(hn-Je,2)+Math.pow(dn-_n,2))),Vn<ft?gi>ft&&(Ft=xe(Xt,hn,dn,Je,_n,ft),te&&(Xt.start=ie+Zt*Ft)):Vn>wt?gi<wt&&(Ft=xe(Xt,hn,dn,Je,_n,wt),te&&(Xt.start=ie+Zt*Ft)):Bi(Xt,hn,dn,He),gi<ft&&Vn>=ft&&(Ft=xe(Xt,hn,dn,Je,_n,ft),Kn=!0),gi>wt&&Vn<=wt&&(Ft=xe(Xt,hn,dn,Je,_n,wt),Kn=!0),!It&&Kn&&(te&&(Xt.end=ie+Zt*Ft),lt.push(Xt),Xt=Wi(Dt)),te&&(ie+=Zt)}var Hn=Dt.length-3;hn=Dt[Hn],dn=Dt[Hn+1],He=Dt[Hn+2],(Vn=Lt===0?hn:dn)>=ft&&Vn<=wt&&Bi(Xt,hn,dn,He),Hn=Xt.length-3,It&&Hn>=3&&(Xt[Hn]!==Xt[0]||Xt[Hn+1]!==Xt[1])&&Bi(Xt,Xt[0],Xt[1],Xt[2]),Xt.length&&lt.push(Xt)}function Wi(Dt){var lt=[];return lt.size=Dt.size,lt.start=Dt.start,lt.end=Dt.end,lt}function si(Dt,lt,ft,wt,Lt,It){for(var te=0;te<Dt.length;te++)cn(Dt[te],lt,ft,wt,Lt,It,!1)}function Bi(Dt,lt,ft,wt){Dt.push(lt),Dt.push(ft),Dt.push(wt)}function Ur(Dt,lt,ft,wt,Lt,It){var te=(It-lt)/(wt-lt);return Dt.push(It),Dt.push(ft+(Lt-ft)*te),Dt.push(1),te}function Xs(Dt,lt,ft,wt,Lt,It){var te=(It-ft)/(Lt-ft);return Dt.push(lt+(wt-lt)*te),Dt.push(It),Dt.push(1),te}function Xa(Dt,lt){for(var ft=[],wt=0;wt<Dt.length;wt++){var Lt,It=Dt[wt],te=It.type;if(te==="Point"||te==="MultiPoint"||te==="LineString")Lt=va(It.geometry,lt);else if(te==="MultiLineString"||te==="Polygon"){Lt=[];for(var Zt=0;Zt<It.geometry.length;Zt++)Lt.push(va(It.geometry[Zt],lt))}else if(te==="MultiPolygon")for(Lt=[],Zt=0;Zt<It.geometry.length;Zt++){for(var Ft=[],Xt=0;Xt<It.geometry[Zt].length;Xt++)Ft.push(va(It.geometry[Zt][Xt],lt));Lt.push(Ft)}ft.push(je(It.id,te,Lt,It.tags))}return ft}function va(Dt,lt){var ft=[];ft.size=Dt.size,Dt.start!==void 0&&(ft.start=Dt.start,ft.end=Dt.end);for(var wt=0;wt<Dt.length;wt+=3)ft.push(Dt[wt]+lt,Dt[wt+1],Dt[wt+2]);return ft}function Be(Dt,lt){if(Dt.transformed)return Dt;var ft,wt,Lt,It=1<<Dt.z,te=Dt.x,Zt=Dt.y;for(ft=0;ft<Dt.features.length;ft++){var Ft=Dt.features[ft],Xt=Ft.geometry,xe=Ft.type;if(Ft.geometry=[],xe===1)for(wt=0;wt<Xt.length;wt+=2)Ft.geometry.push(dr(Xt[wt],Xt[wt+1],lt,It,te,Zt));else for(wt=0;wt<Xt.length;wt++){var ie=[];for(Lt=0;Lt<Xt[wt].length;Lt+=2)ie.push(dr(Xt[wt][Lt],Xt[wt][Lt+1],lt,It,te,Zt));Ft.geometry.push(ie)}}return Dt.transformed=!0,Dt}function dr(Dt,lt,ft,wt,Lt,It){return[Math.round(ft*(Dt*wt-Lt)),Math.round(ft*(lt*wt-It))]}function Un(Dt,lt,ft,wt,Lt){for(var It=lt===Lt.maxZoom?0:Lt.tolerance/((1<<lt)*Lt.extent),te={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ft,y:wt,z:lt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Zt=0;Zt<Dt.length;Zt++){te.numFeatures++,xa(te,Dt[Zt],It,Lt);var Ft=Dt[Zt].minX,Xt=Dt[Zt].minY,xe=Dt[Zt].maxX,ie=Dt[Zt].maxY;Ft<te.minX&&(te.minX=Ft),Xt<te.minY&&(te.minY=Xt),xe>te.maxX&&(te.maxX=xe),ie>te.maxY&&(te.maxY=ie)}return te}function xa(Dt,lt,ft,wt){var Lt=lt.geometry,It=lt.type,te=[];if(It==="Point"||It==="MultiPoint")for(var Zt=0;Zt<Lt.length;Zt+=3)te.push(Lt[Zt]),te.push(Lt[Zt+1]),Dt.numPoints++,Dt.numSimplified++;else if(It==="LineString")pr(te,Lt,Dt,ft,!1,!1);else if(It==="MultiLineString"||It==="Polygon")for(Zt=0;Zt<Lt.length;Zt++)pr(te,Lt[Zt],Dt,ft,It==="Polygon",Zt===0);else if(It==="MultiPolygon")for(var Ft=0;Ft<Lt.length;Ft++){var Xt=Lt[Ft];for(Zt=0;Zt<Xt.length;Zt++)pr(te,Xt[Zt],Dt,ft,!0,Zt===0)}if(te.length){var xe=lt.tags||null;if(It==="LineString"&&wt.lineMetrics){for(var ie in xe={},lt.tags)xe[ie]=lt.tags[ie];xe.mapbox_clip_start=Lt.start/Lt.size,xe.mapbox_clip_end=Lt.end/Lt.size}var Ee={geometry:te,type:It==="Polygon"||It==="MultiPolygon"?3:It==="LineString"||It==="MultiLineString"?2:1,tags:xe};lt.id!==null&&(Ee.id=lt.id),Dt.features.push(Ee)}}function pr(Dt,lt,ft,wt,Lt,It){var te=wt*wt;if(wt>0&&lt.size<(Lt?te:wt))ft.numPoints+=lt.length/3;else{for(var Zt=[],Ft=0;Ft<lt.length;Ft+=3)(wt===0||lt[Ft+2]>te)&&(ft.numSimplified++,Zt.push(lt[Ft]),Zt.push(lt[Ft+1])),ft.numPoints++;Lt&&(function(Xt,xe){for(var ie=0,Ee=0,hn=Xt.length,dn=hn-2;Ee<hn;dn=Ee,Ee+=2)ie+=(Xt[Ee]-Xt[dn])*(Xt[Ee+1]+Xt[dn+1]);if(ie>0===xe)for(Ee=0,hn=Xt.length;Ee<hn/2;Ee+=2){var He=Xt[Ee],Je=Xt[Ee+1];Xt[Ee]=Xt[hn-2-Ee],Xt[Ee+1]=Xt[hn-1-Ee],Xt[hn-2-Ee]=He,Xt[hn-1-Ee]=Je}})(Zt,It),Dt.push(Zt)}}function Ue(Dt,lt){var ft=(lt=this.options=(function(Lt,It){for(var te in It)Lt[te]=It[te];return Lt})(Object.create(this.options),lt)).debug;if(ft&&console.time("preprocess data"),lt.maxZoom<0||lt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(lt.promoteId&&lt.generateId)throw new Error("promoteId and generateId cannot be used together.");var wt=(function(Lt,It){var te=[];if(Lt.type==="FeatureCollection")for(var Zt=0;Zt<Lt.features.length;Zt++)tn(te,Lt.features[Zt],It,Zt);else tn(te,Lt.type==="Feature"?Lt:{geometry:Lt},It);return te})(Dt,lt);this.tiles={},this.tileCoords=[],ft&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",lt.indexMaxZoom,lt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),wt=(function(Lt,It){var te=It.buffer/It.extent,Zt=Lt,Ft=Ri(Lt,1,-1-te,te,0,-1,2,It),Xt=Ri(Lt,1,1-te,2+te,0,-1,2,It);return(Ft||Xt)&&(Zt=Ri(Lt,1,-te,1+te,0,-1,2,It)||[],Ft&&(Zt=Xa(Ft,1).concat(Zt)),Xt&&(Zt=Zt.concat(Xa(Xt,-1)))),Zt})(wt,lt),wt.length&&this.splitTile(wt,0,0,0),ft&&(wt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Dn(Dt,lt,ft){return 32*((1<<Dt)*ft+lt)+Dt}function wn(Dt,lt){return lt?Dt.properties[lt]:Dt.id}function Er(Dt,lt){if(Dt==null)return!0;if(Dt.type==="Feature")return wn(Dt,lt)!=null;if(Dt.type==="FeatureCollection"){const ft=new Set;for(const wt of Dt.features){const Lt=wn(wt,lt);if(Lt==null||ft.has(Lt))return!1;ft.add(Lt)}return!0}return!1}function La(Dt,lt){const ft=new Map;if(Dt!=null)if(Dt.type==="Feature")ft.set(wn(Dt,lt),Dt);else for(const wt of Dt.features)ft.set(wn(wt,lt),wt);return ft}Ue.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ue.prototype.splitTile=function(Dt,lt,ft,wt,Lt,It,te){for(var Zt=[Dt,lt,ft,wt],Ft=this.options,Xt=Ft.debug;Zt.length;){wt=Zt.pop(),ft=Zt.pop(),lt=Zt.pop(),Dt=Zt.pop();var xe=1<<lt,ie=Dn(lt,ft,wt),Ee=this.tiles[ie];if(!Ee&&(Xt>1&&console.time("creation"),Ee=this.tiles[ie]=Un(Dt,lt,ft,wt,Ft),this.tileCoords.push({z:lt,x:ft,y:wt}),Xt)){Xt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",lt,ft,wt,Ee.numFeatures,Ee.numPoints,Ee.numSimplified),console.timeEnd("creation"));var hn="z"+lt;this.stats[hn]=(this.stats[hn]||0)+1,this.total++}if(Ee.source=Dt,Lt){if(lt===Ft.maxZoom||lt===Lt)continue;var dn=1<<Lt-lt;if(ft!==Math.floor(It/dn)||wt!==Math.floor(te/dn))continue}else if(lt===Ft.indexMaxZoom||Ee.numPoints<=Ft.indexMaxPoints)continue;if(Ee.source=null,Dt.length!==0){Xt>1&&console.time("clipping");var He,Je,_n,Vn,gi,Kn,Hn=.5*Ft.buffer/Ft.extent,wr=.5-Hn,Mi=.5+Hn,Ni=1+Hn;He=Je=_n=Vn=null,gi=Ri(Dt,xe,ft-Hn,ft+Mi,0,Ee.minX,Ee.maxX,Ft),Kn=Ri(Dt,xe,ft+wr,ft+Ni,0,Ee.minX,Ee.maxX,Ft),Dt=null,gi&&(He=Ri(gi,xe,wt-Hn,wt+Mi,1,Ee.minY,Ee.maxY,Ft),Je=Ri(gi,xe,wt+wr,wt+Ni,1,Ee.minY,Ee.maxY,Ft),gi=null),Kn&&(_n=Ri(Kn,xe,wt-Hn,wt+Mi,1,Ee.minY,Ee.maxY,Ft),Vn=Ri(Kn,xe,wt+wr,wt+Ni,1,Ee.minY,Ee.maxY,Ft),Kn=null),Xt>1&&console.timeEnd("clipping"),Zt.push(He||[],lt+1,2*ft,2*wt),Zt.push(Je||[],lt+1,2*ft,2*wt+1),Zt.push(_n||[],lt+1,2*ft+1,2*wt),Zt.push(Vn||[],lt+1,2*ft+1,2*wt+1)}}},Ue.prototype.getTile=function(Dt,lt,ft){var wt=this.options,Lt=wt.extent,It=wt.debug;if(Dt<0||Dt>24)return null;var te=1<<Dt,Zt=Dn(Dt,lt=(lt%te+te)%te,ft);if(this.tiles[Zt])return Be(this.tiles[Zt],Lt);It>1&&console.log("drilling down to z%d-%d-%d",Dt,lt,ft);for(var Ft,Xt=Dt,xe=lt,ie=ft;!Ft&&Xt>0;)Xt--,xe=Math.floor(xe/2),ie=Math.floor(ie/2),Ft=this.tiles[Dn(Xt,xe,ie)];return Ft&&Ft.source?(It>1&&console.log("found parent tile z%d-%d-%d",Xt,xe,ie),It>1&&console.time("drilling down"),this.splitTile(Ft.source,Xt,xe,ie,Dt,lt,ft),It>1&&console.timeEnd("drilling down"),this.tiles[Zt]?Be(this.tiles[Zt],Lt):null):null};class bn extends z{constructor(lt,ft,wt,Lt){super(lt,ft,wt),this._dataUpdateable=new Map,this.loadGeoJSON=(It,te)=>{const{promoteId:Zt}=It;if(It.request)return a.f(It.request,((Ft,Xt,xe,ie)=>{this._dataUpdateable=Er(Xt,Zt)?La(Xt,Zt):void 0,te(Ft,Xt,xe,ie)}));if(typeof It.data=="string")try{const Ft=JSON.parse(It.data);this._dataUpdateable=Er(Ft,Zt)?La(Ft,Zt):void 0,te(null,Ft)}catch{te(new Error(`Input data given to '${It.source}' is not a valid GeoJSON object.`))}else It.dataDiff?this._dataUpdateable?((function(Ft,Xt,xe){var ie,Ee,hn,dn;if(Xt.removeAll&&Ft.clear(),Xt.remove)for(const He of Xt.remove)Ft.delete(He);if(Xt.add)for(const He of Xt.add){const Je=wn(He,xe);Je!=null&&Ft.set(Je,He)}if(Xt.update)for(const He of Xt.update){let Je=Ft.get(He.id);if(Je==null)continue;const _n=!He.removeAllProperties&&(((ie=He.removeProperties)===null||ie===void 0?void 0:ie.length)>0||((Ee=He.addOrUpdateProperties)===null||Ee===void 0?void 0:Ee.length)>0);if((He.newGeometry||He.removeAllProperties||_n)&&(Je=Object.assign({},Je),Ft.set(He.id,Je),_n&&(Je.properties=Object.assign({},Je.properties))),He.newGeometry&&(Je.geometry=He.newGeometry),He.removeAllProperties)Je.properties={};else if(((hn=He.removeProperties)===null||hn===void 0?void 0:hn.length)>0)for(const Vn of He.removeProperties)Object.prototype.hasOwnProperty.call(Je.properties,Vn)&&delete Je.properties[Vn];if(((dn=He.addOrUpdateProperties)===null||dn===void 0?void 0:dn.length)>0)for(const{key:Vn,value:gi}of He.addOrUpdateProperties)Je.properties[Vn]=gi}})(this._dataUpdateable,It.dataDiff,Zt),te(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):te(new Error(`Cannot update existing geojson data in ${It.source}`)):te(new Error(`Input data given to '${It.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Lt&&(this.loadGeoJSON=Lt)}loadGeoJSONTile(lt,ft){const wt=lt.tileID.canonical;if(!this._geoJSONIndex)return ft(null,null);const Lt=this._geoJSONIndex.getTile(wt.z,wt.x,wt.y);if(!Lt)return ft(null,null);const It=new class{constructor(Zt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.N,this.length=Zt.length,this._features=Zt}feature(Zt){return new class{constructor(Ft){this._feature=Ft,this.extent=a.N,this.type=Ft.type,this.properties=Ft.tags,"id"in Ft&&!isNaN(Ft.id)&&(this.id=parseInt(Ft.id,10))}loadGeometry(){if(this._feature.type===1){const Ft=[];for(const Xt of this._feature.geometry)Ft.push([new a.P(Xt[0],Xt[1])]);return Ft}{const Ft=[];for(const Xt of this._feature.geometry){const xe=[];for(const ie of Xt)xe.push(new a.P(ie[0],ie[1]));Ft.push(xe)}return Ft}}toGeoJSON(Ft,Xt,xe){return X.call(this,Ft,Xt,xe)}}(this._features[Zt])}}(Lt.features);let te=jt(It);te.byteOffset===0&&te.byteLength===te.buffer.byteLength||(te=new Uint8Array(te)),ft(null,{vectorTile:It,rawData:te.buffer})}loadData(lt,ft){var wt;(wt=this._pendingRequest)===null||wt===void 0||wt.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Lt=!!(lt&&lt.request&&lt.request.collectResourceTiming)&&new a.bu(lt.request);this._pendingCallback=ft,this._pendingRequest=this.loadGeoJSON(lt,((It,te)=>{if(delete this._pendingCallback,delete this._pendingRequest,It||!te)return ft(It);if(typeof te!="object")return ft(new Error(`Input data given to '${lt.source}' is not a valid GeoJSON object.`));{Q(te,!0);try{if(lt.filter){const Ft=a.bC(lt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ft.result==="error")throw new Error(Ft.value.map((xe=>`${xe.key}: ${xe.message}`)).join(", "));te={type:"FeatureCollection",features:te.features.filter((xe=>Ft.value.evaluate({zoom:0},xe)))}}this._geoJSONIndex=lt.cluster?new le((function({superclusterOptions:Ft,clusterProperties:Xt}){if(!Xt||!Ft)return Ft;const xe={},ie={},Ee={accumulated:null,zoom:0},hn={properties:null},dn=Object.keys(Xt);for(const He of dn){const[Je,_n]=Xt[He],Vn=a.bC(_n),gi=a.bC(typeof Je=="string"?[Je,["accumulated"],["get",He]]:Je);xe[He]=Vn.value,ie[He]=gi.value}return Ft.map=He=>{hn.properties=He;const Je={};for(const _n of dn)Je[_n]=xe[_n].evaluate(Ee,hn);return Je},Ft.reduce=(He,Je)=>{hn.properties=Je;for(const _n of dn)Ee.accumulated=He[_n],He[_n]=ie[_n].evaluate(Ee,hn)},Ft})(lt)).load(te.features):(function(Ft,Xt){return new Ue(Ft,Xt)})(te,lt.geojsonVtOptions)}catch(Ft){return ft(Ft)}this.loaded={};const Zt={};if(Lt){const Ft=Lt.finish();Ft&&(Zt.resourceTiming={},Zt.resourceTiming[lt.source]=JSON.parse(JSON.stringify(Ft)))}ft(null,Zt)}}))}reloadTile(lt,ft){const wt=this.loaded;return wt&&wt[lt.uid]?super.reloadTile(lt,ft):this.loadTile(lt,ft)}removeSource(lt,ft){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ft()}getClusterExpansionZoom(lt,ft){try{ft(null,this._geoJSONIndex.getClusterExpansionZoom(lt.clusterId))}catch(wt){ft(wt)}}getClusterChildren(lt,ft){try{ft(null,this._geoJSONIndex.getChildren(lt.clusterId))}catch(wt){ft(wt)}}getClusterLeaves(lt,ft){try{ft(null,this._geoJSONIndex.getLeaves(lt.clusterId,lt.limit,lt.offset))}catch(wt){ft(wt)}}}class ba{constructor(lt){this.self=lt,this.actor=new a.C(lt,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:z,geojson:bn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ft,wt)=>{if(this.workerSourceTypes[ft])throw new Error(`Worker source with name "${ft}" already registered.`);this.workerSourceTypes[ft]=wt},this.self.registerRTLTextPlugin=ft=>{if(a.bD.isParsed())throw new Error("RTL text plugin already registered.");a.bD.applyArabicShaping=ft.applyArabicShaping,a.bD.processBidirectionalText=ft.processBidirectionalText,a.bD.processStyledBidirectionalText=ft.processStyledBidirectionalText}}setReferrer(lt,ft){this.referrer=ft}setImages(lt,ft,wt){this.availableImages[lt]=ft;for(const Lt in this.workerSources[lt]){const It=this.workerSources[lt][Lt];for(const te in It)It[te].availableImages=ft}wt()}setLayers(lt,ft,wt){this.getLayerIndex(lt).replace(ft),wt()}updateLayers(lt,ft,wt){this.getLayerIndex(lt).update(ft.layers,ft.removedIds),wt()}loadTile(lt,ft,wt){this.getWorkerSource(lt,ft.type,ft.source).loadTile(ft,wt)}loadDEMTile(lt,ft,wt){this.getDEMWorkerSource(lt,ft.source).loadTile(ft,wt)}reloadTile(lt,ft,wt){this.getWorkerSource(lt,ft.type,ft.source).reloadTile(ft,wt)}abortTile(lt,ft,wt){this.getWorkerSource(lt,ft.type,ft.source).abortTile(ft,wt)}removeTile(lt,ft,wt){this.getWorkerSource(lt,ft.type,ft.source).removeTile(ft,wt)}removeDEMTile(lt,ft){this.getDEMWorkerSource(lt,ft.source).removeTile(ft)}removeSource(lt,ft,wt){if(!this.workerSources[lt]||!this.workerSources[lt][ft.type]||!this.workerSources[lt][ft.type][ft.source])return;const Lt=this.workerSources[lt][ft.type][ft.source];delete this.workerSources[lt][ft.type][ft.source],Lt.removeSource!==void 0?Lt.removeSource(ft,wt):wt()}loadWorkerSource(lt,ft,wt){try{this.self.importScripts(ft.url),wt()}catch(Lt){wt(Lt.toString())}}syncRTLPluginState(lt,ft,wt){try{a.bD.setState(ft);const Lt=a.bD.getPluginURL();if(a.bD.isLoaded()&&!a.bD.isParsed()&&Lt!=null){this.self.importScripts(Lt);const It=a.bD.isParsed();wt(It?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Lt}`),It)}}catch(Lt){wt(Lt.toString())}}getAvailableImages(lt){let ft=this.availableImages[lt];return ft||(ft=[]),ft}getLayerIndex(lt){let ft=this.layerIndexes[lt];return ft||(ft=this.layerIndexes[lt]=new g),ft}getWorkerSource(lt,ft,wt){return this.workerSources[lt]||(this.workerSources[lt]={}),this.workerSources[lt][ft]||(this.workerSources[lt][ft]={}),this.workerSources[lt][ft][wt]||(this.workerSources[lt][ft][wt]=new this.workerSourceTypes[ft]({send:(Lt,It,te)=>{this.actor.send(Lt,It,te,lt)}},this.getLayerIndex(lt),this.getAvailableImages(lt))),this.workerSources[lt][ft][wt]}getDEMWorkerSource(lt,ft){return this.demWorkerSources[lt]||(this.demWorkerSources[lt]={}),this.demWorkerSources[lt][ft]||(this.demWorkerSources[lt][ft]=new F),this.demWorkerSources[lt][ft]}}return a.i()&&(self.worker=new ba(self)),ba})),l(["./shared"],(function(a){var g="3.6.2";class _{static testProp(u){if(!_.docStyle)return u[0];for(let m=0;m<u.length;m++)if(u[m]in _.docStyle)return u[m];return u[0]}static create(u,m,b){const A=window.document.createElement(u);return m!==void 0&&(A.className=m),b&&b.appendChild(A),A}static createNS(u,m){return window.document.createElementNS(u,m)}static disableDrag(){_.docStyle&&_.selectProp&&(_.userSelect=_.docStyle[_.selectProp],_.docStyle[_.selectProp]="none")}static enableDrag(){_.docStyle&&_.selectProp&&(_.docStyle[_.selectProp]=_.userSelect)}static setTransform(u,m){u.style[_.transformProp]=m}static addEventListener(u,m,b,A={}){u.addEventListener(m,b,"passive"in A?A:A.capture)}static removeEventListener(u,m,b,A={}){u.removeEventListener(m,b,"passive"in A?A:A.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",_.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",_.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",_.suppressClickInternal,!0)}),0)}static mousePos(u,m){const b=u.getBoundingClientRect();return new a.P(m.clientX-b.left-u.clientLeft,m.clientY-b.top-u.clientTop)}static touchPos(u,m){const b=u.getBoundingClientRect(),A=[];for(let C=0;C<m.length;C++)A.push(new a.P(m[C].clientX-b.left-u.clientLeft,m[C].clientY-b.top-u.clientTop));return A}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}_.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,_.selectProp=_.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),_.transformProp=_.testProp(["transform","WebkitTransform"]);const x={supported:!1,testSupport:function(E){!z&&O&&(F?V(E):M=E)}};let M,O,z=!1,F=!1;function V(E){const u=E.createTexture();E.bindTexture(E.TEXTURE_2D,u);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,O),E.isContextLost())return;x.supported=!0}catch{}E.deleteTexture(u),z=!0}var H,Q;typeof document<"u"&&(O=document.createElement("img"),O.onload=function(){M&&V(M),M=null,F=!0},O.onerror=function(){z=!0,M=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(E){let u,m,b,A;E.resetRequestQueue=()=>{u=[],m=0,b=0,A={}},E.addThrottleControl=K=>{const et=b++;return A[et]=K,et},E.removeThrottleControl=K=>{delete A[K],j()},E.getImage=(K,et,it=!0)=>{x.supported&&(K.headers||(K.headers={}),K.headers.accept="image/webp,*/*");const dt={requestParameters:K,supportImageRefresh:it,callback:et,cancelled:!1,completed:!1,cancel:()=>{dt.completed||dt.cancelled||(dt.cancelled=!0,dt.innerRequest&&(dt.innerRequest.cancel(),m--),j())}};return u.push(dt),j(),dt};const C=K=>{const{requestParameters:et,supportImageRefresh:it,callback:dt}=K;return a.e(et,{type:"image"}),(it!==!1||a.i()||a.g(et.url)||et.headers&&!Object.keys(et.headers).reduce(((Et,Mt)=>Et&&Mt==="accept"),!0)?a.m:q)(et,((Et,Mt,zt,At)=>{B(K,dt,Et,Mt,zt,At)}))},B=(K,et,it,dt,Et,Mt)=>{it?et(it):dt instanceof HTMLImageElement||a.a(dt)?et(null,dt):dt&&((zt,At)=>{typeof createImageBitmap=="function"?a.b(zt,At):a.d(zt,At)})(dt,((zt,At)=>{zt!=null?et(zt):At!=null&&et(null,At,{cacheControl:Et,expires:Mt})})),K.cancelled||(K.completed=!0,m--,j())},j=()=>{const K=(()=>{const et=Object.keys(A);let it=!1;if(et.length>0){for(const dt of et)if(it=A[dt](),it)break}return it})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let et=m;et<K&&u.length>0;et++){const it=u.shift();if(it.cancelled){et--;continue}const dt=C(it);m++,it.innerRequest=dt}},q=(K,et)=>{const it=new Image,dt=K.url;let Et=!1;const Mt=K.credentials;return Mt&&Mt==="include"?it.crossOrigin="use-credentials":(Mt&&Mt==="same-origin"||!a.s(dt))&&(it.crossOrigin="anonymous"),it.fetchPriority="high",it.onload=()=>{et(null,it),it.onerror=it.onload=null},it.onerror=()=>{Et||et(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),it.onerror=it.onload=null},it.src=dt,{cancel:()=>{Et=!0,it.src=""}}}})(H||(H={})),H.resetRequestQueue(),(function(E){E.Glyphs="Glyphs",E.Image="Image",E.Source="Source",E.SpriteImage="SpriteImage",E.SpriteJSON="SpriteJSON",E.Style="Style",E.Tile="Tile",E.Unknown="Unknown"})(Q||(Q={}));class X{constructor(u){this._transformRequestFn=u}transformRequest(u,m){return this._transformRequestFn&&this._transformRequestFn(u,m)||{url:u}}normalizeSpriteURL(u,m,b){const A=(function(C){const B=C.match(Y);if(!B)throw new Error(`Unable to parse URL "${C}"`);return{protocol:B[1],authority:B[2],path:B[3]||"/",params:B[4]?B[4].split("&"):[]}})(u);return A.path+=`${m}${b}`,(function(C){const B=C.params.length?`?${C.params.join("&")}`:"";return`${C.protocol}://${C.authority}${C.path}${B}`})(A)}setTransformRequest(u){this._transformRequestFn=u}}const Y=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function W(E){var u=new a.A(3);return u[0]=E[0],u[1]=E[1],u[2]=E[2],u}var J,ot=function(E,u,m){return E[0]=u[0]-m[0],E[1]=u[1]-m[1],E[2]=u[2]-m[2],E};J=new a.A(3),a.A!=Float32Array&&(J[0]=0,J[1]=0,J[2]=0);var ht=function(E){var u=E[0],m=E[1];return u*u+m*m};function rt(E){const u=[];if(typeof E=="string")u.push({id:"default",url:E});else if(E&&E.length>0){const m=[];for(const{id:b,url:A}of E){const C=`${b}${A}`;m.indexOf(C)===-1&&(m.push(C),u.push({id:b,url:A}))}}return u}function ut(E,u,m,b,A){if(b)return void E(b);if(A!==Object.values(u).length||A!==Object.values(m).length)return;const C={};for(const B in u){C[B]={};const j=a.h.getImageCanvasContext(m[B]),q=u[B];for(const K in q){const{width:et,height:it,x:dt,y:Et,sdf:Mt,pixelRatio:zt,stretchX:At,stretchY:Gt,content:ue}=q[K];C[B][K]={data:null,pixelRatio:zt,sdf:Mt,stretchX:At,stretchY:Gt,content:ue,spriteData:{width:et,height:it,x:dt,y:Et,context:j}}}}E(null,C)}(function(){var E=new a.A(2);a.A!=Float32Array&&(E[0]=0,E[1]=0)})();class _t{constructor(u,m,b,A){this.context=u,this.format=b,this.texture=u.gl.createTexture(),this.update(m,A)}update(u,m,b){const{width:A,height:C}=u,B=!(this.size&&this.size[0]===A&&this.size[1]===C||b),{context:j}=this,{gl:q}=j;if(this.useMipmap=!!(m&&m.useMipmap),q.bindTexture(q.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===q.RGBA&&(!m||m.premultiply!==!1)),B)this.size=[A,C],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.a(u)?q.texImage2D(q.TEXTURE_2D,0,this.format,this.format,q.UNSIGNED_BYTE,u):q.texImage2D(q.TEXTURE_2D,0,this.format,A,C,0,this.format,q.UNSIGNED_BYTE,u.data);else{const{x:K,y:et}=b||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.a(u)?q.texSubImage2D(q.TEXTURE_2D,0,K,et,q.RGBA,q.UNSIGNED_BYTE,u):q.texSubImage2D(q.TEXTURE_2D,0,K,et,A,C,q.RGBA,q.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&q.generateMipmap(q.TEXTURE_2D)}bind(u,m,b){const{context:A}=this,{gl:C}=A;C.bindTexture(C.TEXTURE_2D,this.texture),b!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=C.LINEAR),u!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,u),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,b||u),this.filter=u),m!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,m),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,m),this.wrap=m)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function bt(E){const{userImage:u}=E;return!!(u&&u.render&&u.render())&&(E.data.replace(new Uint8Array(u.data.buffer)),!0)}class Pt extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:m,callback:b}of this.requestors)this._notify(m,b);this.requestors=[]}}getImage(u){const m=this.images[u];if(m&&!m.data&&m.spriteData){const b=m.spriteData;m.data=new a.R({width:b.width,height:b.height},b.context.getImageData(b.x,b.y,b.width,b.height).data),m.spriteData=null}return m}addImage(u,m){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,m)&&(this.images[u]=m)}_validate(u,m){let b=!0;const A=m.data||m.spriteData;return this._validateStretch(m.stretchX,A&&A.width)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchX" value`))),b=!1),this._validateStretch(m.stretchY,A&&A.height)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchY" value`))),b=!1),this._validateContent(m.content,m)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "content" value`))),b=!1),b}_validateStretch(u,m){if(!u)return!0;let b=0;for(const A of u){if(A[0]<b||A[1]<A[0]||m<A[1])return!1;b=A[1]}return!0}_validateContent(u,m){if(!u)return!0;if(u.length!==4)return!1;const b=m.spriteData,A=b&&b.width||m.data.width,C=b&&b.height||m.data.height;return!(u[0]<0||A<u[0]||u[1]<0||C<u[1]||u[2]<0||A<u[2]||u[3]<0||C<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,m,b=!0){const A=this.getImage(u);if(b&&(A.data.width!==m.data.width||A.data.height!==m.data.height))throw new Error(`size mismatch between old image (${A.data.width}x${A.data.height}) and new image (${m.data.width}x${m.data.height}).`);m.version=A.version+1,this.images[u]=m,this.updatedImages[u]=!0}removeImage(u){const m=this.images[u];delete this.images[u],delete this.patterns[u],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,m){let b=!0;if(!this.isLoaded())for(const A of u)this.images[A]||(b=!1);this.isLoaded()||b?this._notify(u,m):this.requestors.push({ids:u,callback:m})}_notify(u,m){const b={};for(const A of u){let C=this.getImage(A);C||(this.fire(new a.k("styleimagemissing",{id:A})),C=this.getImage(A)),C?b[A]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:a.w(`Image "${A}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,b)}getPixelSize(){const{width:u,height:m}=this.atlasImage;return{width:u,height:m}}getPattern(u){const m=this.patterns[u],b=this.getImage(u);if(!b)return null;if(m&&m.position.version===b.version)return m.position;if(m)m.position.version=b.version;else{const A={w:b.data.width+2,h:b.data.height+2,x:0,y:0},C=new a.I(A,b);this.patterns[u]={bin:A,position:C}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const m=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new _t(u,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const C in this.patterns)u.push(this.patterns[C].bin);const{w:m,h:b}=a.p(u),A=this.atlasImage;A.resize({width:m||1,height:b||1});for(const C in this.patterns){const{bin:B}=this.patterns[C],j=B.x+1,q=B.y+1,K=this.getImage(C).data,et=K.width,it=K.height;a.R.copy(K,A,{x:0,y:0},{x:j,y:q},{width:et,height:it}),a.R.copy(K,A,{x:0,y:it-1},{x:j,y:q-1},{width:et,height:1}),a.R.copy(K,A,{x:0,y:0},{x:j,y:q+it},{width:et,height:1}),a.R.copy(K,A,{x:et-1,y:0},{x:j-1,y:q},{width:1,height:it}),a.R.copy(K,A,{x:0,y:0},{x:j+et,y:q},{width:1,height:it})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const m of u){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const b=this.getImage(m);b||a.w(`Image with ID: "${m}" was not found`),bt(b)&&this.updateImage(m,b)}}}const re=1e20;function ye(E,u,m,b,A,C,B,j,q){for(let K=u;K<u+b;K++)fe(E,m*C+K,C,A,B,j,q);for(let K=m;K<m+A;K++)fe(E,K*C+u,1,b,B,j,q)}function fe(E,u,m,b,A,C,B){C[0]=0,B[0]=-re,B[1]=re,A[0]=E[u];for(let j=1,q=0,K=0;j<b;j++){A[j]=E[u+j*m];const et=j*j;do{const it=C[q];K=(A[j]-A[it]+et-it*it)/(j-it)/2}while(K<=B[q]&&--q>-1);q++,C[q]=j,B[q]=K,B[q+1]=re}for(let j=0,q=0;j<b;j++){for(;B[q+1]<j;)q++;const K=C[q],et=j-K;E[u+j*m]=A[K]+et*et}}class kt{constructor(u,m){this.requestManager=u,this.localIdeographFontFamily=m,this.entries={}}setURL(u){this.url=u}getGlyphs(u,m){const b=[];for(const A in u)for(const C of u[A])b.push({stack:A,id:C});a.o(b,(({stack:A,id:C},B)=>{let j=this.entries[A];j||(j=this.entries[A]={glyphs:{},requests:{},ranges:{}});let q=j.glyphs[C];if(q!==void 0)return void B(null,{stack:A,id:C,glyph:q});if(q=this._tinySDF(j,A,C),q)return j.glyphs[C]=q,void B(null,{stack:A,id:C,glyph:q});const K=Math.floor(C/256);if(256*K>65535)return void B(new Error("glyphs > 65535 not supported"));if(j.ranges[K])return void B(null,{stack:A,id:C,glyph:q});if(!this.url)return void B(new Error("glyphsUrl is not set"));let et=j.requests[K];et||(et=j.requests[K]=[],kt.loadGlyphRange(A,K,this.url,this.requestManager,((it,dt)=>{if(dt){for(const Et in dt)this._doesCharSupportLocalGlyph(+Et)||(j.glyphs[+Et]=dt[+Et]);j.ranges[K]=!0}for(const Et of et)Et(it,dt);delete j.requests[K]}))),et.push(((it,dt)=>{it?B(it):dt&&B(null,{stack:A,id:C,glyph:dt[C]||null})}))}),((A,C)=>{if(A)m(A);else if(C){const B={};for(const{stack:j,id:q,glyph:K}of C)(B[j]||(B[j]={}))[q]=K&&{id:K.id,bitmap:K.bitmap.clone(),metrics:K.metrics};m(null,B)}}))}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(a.u["CJK Unified Ideographs"](u)||a.u["Hangul Syllables"](u)||a.u.Hiragana(u)||a.u.Katakana(u))}_tinySDF(u,m,b){const A=this.localIdeographFontFamily;if(!A||!this._doesCharSupportLocalGlyph(b))return;let C=u.tinySDF;if(!C){let j="400";/bold/i.test(m)?j="900":/medium/i.test(m)?j="500":/light/i.test(m)&&(j="200"),C=u.tinySDF=new kt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:A,fontWeight:j})}const B=C.draw(String.fromCharCode(b));return{id:b,bitmap:new a.q({width:B.width||60,height:B.height||60},B.data),metrics:{width:B.glyphWidth/2||24,height:B.glyphHeight/2||24,left:B.glyphLeft/2+.5||0,top:B.glyphTop/2-27.5||-8,advance:B.glyphAdvance/2||24,isDoubleResolution:!0}}}}kt.loadGlyphRange=function(E,u,m,b,A){const C=256*u,B=C+255,j=b.transformRequest(m.replace("{fontstack}",E).replace("{range}",`${C}-${B}`),Q.Glyphs);a.l(j,((q,K)=>{if(q)A(q);else if(K){const et={};for(const it of a.n(K))et[it.id]=it;A(null,et)}}))},kt.TinySDF=class{constructor({fontSize:E=24,buffer:u=3,radius:m=8,cutoff:b=.25,fontFamily:A="sans-serif",fontWeight:C="normal",fontStyle:B="normal"}={}){this.buffer=u,this.cutoff=b,this.radius=m;const j=this.size=E+4*u,q=this._createCanvas(j),K=this.ctx=q.getContext("2d",{willReadFrequently:!0});K.font=`${B} ${C} ${E}px ${A}`,K.textBaseline="alphabetic",K.textAlign="left",K.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(E){const u=document.createElement("canvas");return u.width=u.height=E,u}draw(E){const{width:u,actualBoundingBoxAscent:m,actualBoundingBoxDescent:b,actualBoundingBoxLeft:A,actualBoundingBoxRight:C}=this.ctx.measureText(E),B=Math.ceil(m),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(C-A))),q=Math.min(this.size-this.buffer,B+Math.ceil(b)),K=j+2*this.buffer,et=q+2*this.buffer,it=Math.max(K*et,0),dt=new Uint8ClampedArray(it),Et={data:dt,width:K,height:et,glyphWidth:j,glyphHeight:q,glyphTop:B,glyphLeft:0,glyphAdvance:u};if(j===0||q===0)return Et;const{ctx:Mt,buffer:zt,gridInner:At,gridOuter:Gt}=this;Mt.clearRect(zt,zt,j,q),Mt.fillText(E,zt,zt+B);const ue=Mt.getImageData(zt,zt,j,q);Gt.fill(re,0,it),At.fill(0,0,it);for(let Nt=0;Nt<q;Nt++)for(let Kt=0;Kt<j;Kt++){const he=ue.data[4*(Nt*j+Kt)+3]/255;if(he===0)continue;const me=(Nt+zt)*K+Kt+zt;if(he===1)Gt[me]=0,At[me]=re;else{const Se=.5-he;Gt[me]=Se>0?Se*Se:0,At[me]=Se<0?Se*Se:0}}ye(Gt,0,0,K,et,K,this.f,this.v,this.z),ye(At,zt,zt,j,q,K,this.f,this.v,this.z);for(let Nt=0;Nt<it;Nt++){const Kt=Math.sqrt(Gt[Nt])-Math.sqrt(At[Nt]);dt[Nt]=Math.round(255-255*(Kt/this.radius+this.cutoff))}return Et}};class Ot{constructor(){this.specification=a.v.light.position}possiblyEvaluate(u,m){return a.z(u.expression.evaluate(m))}interpolate(u,m,b){return{x:a.B.number(u.x,m.x,b),y:a.B.number(u.y,m.y,b),z:a.B.number(u.z,m.z,b)}}}let St;class jt extends a.E{constructor(u){super(),St=St||new a.r({anchor:new a.D(a.v.light.anchor),position:new Ot,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(St),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,m={}){if(!this._validate(a.t,u,m))for(const b in u){const A=u[b];b.endsWith("-transition")?this._transitionable.setTransition(b.slice(0,-11),A):this._transitionable.setValue(b,A)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,b){return(!b||b.validate!==!1)&&a.x(this,u.call(a.y,a.e({value:m,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}}class Vt{constructor(u,m){this.width=u,this.height=m,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,m){const b=u.join(",")+String(m);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(u,m)),this.dashEntry[b]}getDashRanges(u,m,b){const A=[];let C=u.length%2==1?-u[u.length-1]*b:0,B=u[0]*b,j=!0;A.push({left:C,right:B,isDash:j,zeroLength:u[0]===0});let q=u[0];for(let K=1;K<u.length;K++){j=!j;const et=u[K];C=q*b,q+=et,B=q*b,A.push({left:C,right:B,isDash:j,zeroLength:et===0})}return A}addRoundDash(u,m,b){const A=m/2;for(let C=-b;C<=b;C++){const B=this.width*(this.nextRow+b+C);let j=0,q=u[j];for(let K=0;K<this.width;K++){K/q.right>1&&(q=u[++j]);const et=Math.abs(K-q.left),it=Math.abs(K-q.right),dt=Math.min(et,it);let Et;const Mt=C/b*(A+1);if(q.isDash){const zt=A-Math.abs(Mt);Et=Math.sqrt(dt*dt+zt*zt)}else Et=A-Math.sqrt(dt*dt+Mt*Mt);this.data[B+K]=Math.max(0,Math.min(255,Et+128))}}}addRegularDash(u){for(let j=u.length-1;j>=0;--j){const q=u[j],K=u[j+1];q.zeroLength?u.splice(j,1):K&&K.isDash===q.isDash&&(K.left=q.left,u.splice(j,1))}const m=u[0],b=u[u.length-1];m.isDash===b.isDash&&(m.left=b.left-this.width,b.right=m.right+this.width);const A=this.width*this.nextRow;let C=0,B=u[C];for(let j=0;j<this.width;j++){j/B.right>1&&(B=u[++C]);const q=Math.abs(j-B.left),K=Math.abs(j-B.right),et=Math.min(q,K);this.data[A+j]=Math.max(0,Math.min(255,(B.isDash?et:-et)+128))}}addDash(u,m){const b=m?7:0,A=2*b+1;if(this.nextRow+A>this.height)return a.w("LineAtlas out of space"),null;let C=0;for(let j=0;j<u.length;j++)C+=u[j];if(C!==0){const j=this.width/C,q=this.getDashRanges(u,this.width,j);m?this.addRoundDash(q,j,b):this.addRegularDash(q)}const B={y:(this.nextRow+b+.5)/this.height,height:2*b/this.height,width:C};return this.nextRow+=A,this.dirty=!0,B}bind(u){const m=u.gl;this.texture?(m.bindTexture(m.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,m.texSubImage2D(m.TEXTURE_2D,0,0,0,this.width,this.height,m.ALPHA,m.UNSIGNED_BYTE,this.data))):(this.texture=m.createTexture(),m.bindTexture(m.TEXTURE_2D,this.texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texImage2D(m.TEXTURE_2D,0,m.ALPHA,this.width,this.height,0,m.ALPHA,m.UNSIGNED_BYTE,this.data))}}class pt{constructor(u,m,b){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=b;const A=this.workerPool.acquire(b);for(let C=0;C<A.length;C++){const B=new a.C(A[C],m,b);B.name=`Worker ${C}`,this.actors.push(B)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,m,b){a.o(this.actors,((A,C)=>{A.send(u,m,C)}),b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach((m=>{m.remove()})),this.actors=[],u&&this.workerPool.release(this.id)}}function Tt(E,u,m){const b=function(A,C){if(A)return m(A);if(C){const B=a.F(a.e(C,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);C.vector_layers&&(B.vectorLayers=C.vector_layers,B.vectorLayerIds=B.vectorLayers.map((j=>j.id))),m(null,B)}};return E.url?a.f(u.transformRequest(E.url,Q.Source),b):a.h.frame((()=>b(null,E)))}class $t{constructor(u,m){u&&(m?this.setSouthWest(u).setNorthEast(m):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof a.L?new a.L(u.lng,u.lat):a.L.convert(u),this}setSouthWest(u){return this._sw=u instanceof a.L?new a.L(u.lng,u.lat):a.L.convert(u),this}extend(u){const m=this._sw,b=this._ne;let A,C;if(u instanceof a.L)A=u,C=u;else{if(!(u instanceof $t))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend($t.convert(u)):this.extend(a.L.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(a.L.convert(u)):this;if(A=u._sw,C=u._ne,!A||!C)return this}return m||b?(m.lng=Math.min(A.lng,m.lng),m.lat=Math.min(A.lat,m.lat),b.lng=Math.max(C.lng,b.lng),b.lat=Math.max(C.lat,b.lat)):(this._sw=new a.L(A.lng,A.lat),this._ne=new a.L(C.lng,C.lat)),this}getCenter(){return new a.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.L(this.getWest(),this.getNorth())}getSouthEast(){return new a.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:m,lat:b}=a.L.convert(u);let A=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(A=this._sw.lng>=m&&m>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&A}static convert(u){return u instanceof $t?u:u&&new $t(u)}static fromLngLat(u,m=0){const b=360*m/40075017,A=b/Math.cos(Math.PI/180*u.lat);return new $t(new a.L(u.lng-A,u.lat-b),new a.L(u.lng+A,u.lat+b))}}class Yt{constructor(u,m,b){this.bounds=$t.convert(this.validateBounds(u)),this.minzoom=m||0,this.maxzoom=b||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const m=Math.pow(2,u.z),b=Math.floor(a.G(this.bounds.getWest())*m),A=Math.floor(a.H(this.bounds.getNorth())*m),C=Math.ceil(a.G(this.bounds.getEast())*m),B=Math.ceil(a.H(this.bounds.getSouth())*m);return u.x>=b&&u.x<C&&u.y>=A&&u.y<B}}class se extends a.E{constructor(u,m,b,A){if(super(),this.load=()=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Tt(this._options,this.map._requestManager,((C,B)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),C?this.fire(new a.j(C)):B&&(a.e(this,B),B.bounds&&(this.tileBounds=new Yt(B.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}))},this.serialize=()=>a.e({},this._options),this.id=u,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.F(m,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(A)}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.load()}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}setUrl(u){return this.setSourceProperty((()=>{this.url=u,this._options.url=u})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(u,m){const b=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),A={request:this.map._requestManager.transformRequest(b,Q.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function C(B,j){return delete u.request,u.aborted?m(null):B&&B.status!==404?m(B):(j&&j.resourceTiming&&(u.resourceTiming=j.resourceTiming),this.map._refreshExpiredTiles&&j&&u.setExpiryData(j),u.loadVectorData(j,this.map.painter),m(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}A.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=m:u.request=u.actor.send("reloadTile",A,C.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",A,C.bind(this)))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class le extends a.E{constructor(u,m,b,A){super(),this.id=u,this.dispatcher=b,this.setEventedParent(A),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},m),a.e(this,a.F(m,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Tt(this._options,this.map._requestManager,((u,m)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new a.j(u)):m&&(a.e(this,m),m.bounds&&(this.tileBounds=new Yt(m.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.load()}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}serialize(){return a.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,m){const b=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.request=H.getImage(this.map._requestManager.transformRequest(b,Q.Tile),((A,C,B)=>{if(delete u.request,u.aborted)u.state="unloaded",m(null);else if(A)u.state="errored",m(A);else if(C){this.map._refreshExpiredTiles&&B&&u.setExpiryData(B);const j=this.map.painter.context,q=j.gl;u.texture=this.map.painter.getTileTexture(C.width),u.texture?u.texture.update(C,{useMipmap:!0}):(u.texture=new _t(j,C,q.RGBA,{useMipmap:!0}),u.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),j.extTextureFilterAnisotropic&&q.texParameterf(q.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax)),u.state="loaded",m(null)}}),this.map._refreshExpiredTiles)}abortTile(u,m){u.request&&(u.request.cancel(),delete u.request),m()}unloadTile(u,m){u.texture&&this.map.painter.saveTileTexture(u.texture),m()}hasTransition(){return!1}}class Ae extends le{constructor(u,m,b,A){super(u,m,b,A),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox",this.redFactor=m.redFactor,this.greenFactor=m.greenFactor,this.blueFactor=m.blueFactor,this.baseShift=m.baseShift}loadTile(u,m){const b=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),A=this.map._requestManager.transformRequest(b,Q.Tile);function C(B,j){B&&(u.state="errored",m(B)),j&&(u.dem=j,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded",m(null))}u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.request=H.getImage(A,((B,j,q)=>a._(this,void 0,void 0,(function*(){if(delete u.request,u.aborted)u.state="unloaded",m(null);else if(B)u.state="errored",m(B);else if(j){this.map._refreshExpiredTiles&&u.setExpiryData(q);const K=a.a(j)&&a.J()?j:yield(function(it){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.K()){const dt=it.width+2,Et=it.height+2;try{return new a.R({width:dt,height:Et},yield a.M(it,-1,-1,dt,Et))}catch{}}return a.h.getImageData(it,1)}))})(j),et={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:K,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",et,C))}}))),this.map._refreshExpiredTiles)}_getNeighboringTiles(u){const m=u.canonical,b=Math.pow(2,m.z),A=(m.x-1+b)%b,C=m.x===0?u.wrap-1:u.wrap,B=(m.x+1+b)%b,j=m.x+1===b?u.wrap+1:u.wrap,q={};return q[new a.O(u.overscaledZ,C,m.z,A,m.y).key]={backfilled:!1},q[new a.O(u.overscaledZ,j,m.z,B,m.y).key]={backfilled:!1},m.y>0&&(q[new a.O(u.overscaledZ,C,m.z,A,m.y-1).key]={backfilled:!1},q[new a.O(u.overscaledZ,u.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},q[new a.O(u.overscaledZ,j,m.z,B,m.y-1).key]={backfilled:!1}),m.y+1<b&&(q[new a.O(u.overscaledZ,C,m.z,A,m.y+1).key]={backfilled:!1},q[new a.O(u.overscaledZ,u.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},q[new a.O(u.overscaledZ,j,m.z,B,m.y+1).key]={backfilled:!1}),q}unloadTile(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})}}class Ie extends a.E{constructor(u,m,b,A){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>a.e({},this._options,{type:this.type,data:this._data}),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=b.getActor(),this.setEventedParent(A),this._data=m.data,this._options=a.e({},m),this._collectResourceTiming=m.collectResourceTiming,m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId;const C=a.N/this.tileSize;this.workerOptions=a.e({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:(m.buffer!==void 0?m.buffer:128)*C,tolerance:(m.tolerance!==void 0?m.tolerance:.375)*C,extent:a.N,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:m.clusterMaxZoom!==void 0?m.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,m.clusterMinPoints||2),extent:a.N,radius:(m.clusterRadius||50)*C,log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){return this._updateWorkerData(u),this}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u&&(u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=u.clusterRadius),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=u.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(u,m){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},m),this}getClusterChildren(u,m){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},m),this}getClusterLeaves(u,m,b,A){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:m,offset:b},A),this}_updateWorkerData(u){const m=a.e({},this.workerOptions);u?m.dataDiff=u:typeof this._data=="string"?(m.request=this.map._requestManager.transformRequest(a.h.resolveURL(this._data),Q.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,m,((b,A)=>{if(this._pendingLoads--,this._removed||A&&A.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let C=null;if(A&&A.resourceTiming&&A.resourceTiming[this.id]&&(C=A.resourceTiming[this.id].slice(0)),b)return void this.fire(new a.j(b));const B={dataType:"source"};this._collectResourceTiming&&C&&C.length>0&&a.e(B,{resourceTiming:C}),this.fire(new a.k("data",Object.assign(Object.assign({},B),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},B),{sourceDataType:"content"})))}))}loaded(){return this._pendingLoads===0}loadTile(u,m){const b=u.actor?"reloadTile":"loadTile";u.actor=this.actor;const A={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.request=this.actor.send(b,A,((C,B)=>(delete u.request,u.unloadVectorData(),u.aborted?m(null):C?m(C):(u.loadVectorData(B,this.map.painter,b==="reloadTile"),m(null)))))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0}unloadTile(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Wt=a.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Pe extends a.E{constructor(u,m,b,A){super(),this.load=(C,B)=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=H.getImage(this.map._requestManager.transformRequest(this.url,Q.Image),((j,q)=>{this._request=null,this._loaded=!0,j?this.fire(new a.j(j)):q&&(this.image=q,C&&(this.coordinates=C),B&&B(),this._finishLoading())}))},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const C=this.map.painter.context,B=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Wt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new _t(C,this.image,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE));let j=!1;for(const q in this.tiles){const K=this.tiles[q];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture,j=!0)}j&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=u,this.dispatcher=b,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(A),this.options=m}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=u.url,this.load(u.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(u){this.coordinates=u;const m=u.map(a.U.fromLngLat);this.tileID=(function(A){let C=1/0,B=1/0,j=-1/0,q=-1/0;for(const dt of A)C=Math.min(C,dt.x),B=Math.min(B,dt.y),j=Math.max(j,dt.x),q=Math.max(q,dt.y);const K=Math.max(j-C,q-B),et=Math.max(0,Math.floor(-Math.log(K)/Math.LN2)),it=Math.pow(2,et);return new a.W(et,Math.floor((C+j)/2*it),Math.floor((B+q)/2*it))})(m),this.minzoom=this.maxzoom=this.tileID.z;const b=m.map((A=>this.tileID.getTilePoint(A)._round()));return this._boundsArray=new a.V,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,a.N,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,a.N),this._boundsArray.emplaceBack(b[2].x,b[2].y,a.N,a.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(u,m){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},m(null)):(u.state="errored",m(null))}hasTransition(){return!1}}class we extends Pe{constructor(u,m,b,A){super(u,m,b,A),this.load=()=>{this._loaded=!1;const C=this.options;this.urls=[];for(const B of C.urls)this.urls.push(this.map._requestManager.transformRequest(B,Q.Source).url);a.X(this.urls,((B,j)=>{this._loaded=!0,B?this.fire(new a.j(B)):j&&(this.video=j,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const C=this.map.painter.context,B=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Wt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE),B.texSubImage2D(B.TEXTURE_2D,0,0,0,B.RGBA,B.UNSIGNED_BYTE,this.video)):(this.texture=new _t(C,this.video,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE));let j=!1;for(const q in this.tiles){const K=this.tiles[q];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture,j=!0)}j&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=m}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const m=this.video.seekable;u<m.start(0)||u>m.end(0)?this.fire(new a.j(new a.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${m.start(0)} and ${m.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class ce extends Pe{constructor(u,m,b,A){super(u,m,b,A),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let C=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,C=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,C=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const B=this.map.painter.context,j=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Wt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?(C||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new _t(B,this.canvas,j.RGBA,{premultiply:!0});let q=!1;for(const K in this.tiles){const et=this.tiles[K];et.state!=="loaded"&&(et.state="loaded",et.texture=this.texture,q=!0)}q&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some((C=>!Array.isArray(C)||C.length!==2||C.some((B=>typeof B!="number"))))||this.fire(new a.j(new a.Y(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.Y(`sources.${u}`,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new a.j(new a.Y(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.Y(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.Y(`sources.${u}`,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const rn={},je=E=>{switch(E){case"geojson":return Ie;case"image":return Pe;case"raster":return le;case"raster-dem":return Ae;case"vector":return se;case"video":return we;case"canvas":return ce}return rn[E]};function nn(E,u){const m=a.Z();return a.$(m,m,[1,1,0]),a.a0(m,m,[.5*E.width,.5*E.height,1]),a.a1(m,m,E.calculatePosMatrix(u.toUnwrapped()))}function tn(E,u,m,b,A,C){const B=(function(it,dt,Et){if(it)for(const Mt of it){const zt=dt[Mt];if(zt&&zt.source===Et&&zt.type==="fill-extrusion")return!0}else for(const Mt in dt){const zt=dt[Mt];if(zt.source===Et&&zt.type==="fill-extrusion")return!0}return!1})(A&&A.layers,u,E.id),j=C.maxPitchScaleFactor(),q=E.tilesIn(b,j,B);q.sort(Tn);const K=[];for(const it of q)K.push({wrappedTileID:it.tileID.wrapped().key,queryResults:it.tile.queryRenderedFeatures(u,m,E._state,it.queryGeometry,it.cameraQueryGeometry,it.scale,A,C,j,nn(E.transform,it.tileID))});const et=(function(it){const dt={},Et={};for(const Mt of it){const zt=Mt.queryResults,At=Mt.wrappedTileID,Gt=Et[At]=Et[At]||{};for(const ue in zt){const Nt=zt[ue],Kt=Gt[ue]=Gt[ue]||{},he=dt[ue]=dt[ue]||[];for(const me of Nt)Kt[me.featureIndex]||(Kt[me.featureIndex]=!0,he.push(me))}}return dt})(K);for(const it in et)et[it].forEach((dt=>{const Et=dt.feature,Mt=E.getFeatureState(Et.layer["source-layer"],Et.id);Et.source=Et.layer.source,Et.layer["source-layer"]&&(Et.sourceLayer=Et.layer["source-layer"]),Et.state=Mt}));return et}function Tn(E,u){const m=E.tileID,b=u.tileID;return m.overscaledZ-b.overscaledZ||m.canonical.y-b.canonical.y||m.wrap-b.wrap||m.canonical.x-b.canonical.x}class an{constructor(u,m){this.timeAdded=0,this.fadeEndTime=0,this.tileID=u,this.uid=a.a2(),this.uses=0,this.tileSize=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const m=u+this.timeAdded;m<this.fadeEndTime||(this.fadeEndTime=m)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,m,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=(function(A,C){const B={};if(!C)return B;for(const j of A){const q=j.layerIds.map((K=>C.getLayer(K))).filter(Boolean);if(q.length!==0){j.layers=q,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map((K=>q.filter((et=>et.id===K))[0])));for(const K of q)B[K.id]=j}}return B})(u.buckets,m.style),this.hasSymbolBuckets=!1;for(const A in this.buckets){const C=this.buckets[A];if(C instanceof a.a4){if(this.hasSymbolBuckets=!0,!b)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const A in this.buckets){const C=this.buckets[A];if(C instanceof a.a4&&C.hasRTLText){this.hasRTLText=!0,a.a5();break}}this.queryPadding=0;for(const A in this.buckets){const C=this.buckets[A];this.queryPadding=Math.max(this.queryPadding,m.style.getLayer(A).queryRadius(C))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new a.a3}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const b in this.buckets){const A=this.buckets[b];A.uploadPending()&&A.upload(u)}const m=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _t(u,this.imageAtlas.image,m.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _t(u,this.glyphAtlasImage,m.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,m,b,A,C,B,j,q,K,et){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:A,cameraQueryGeometry:C,scale:B,tileSize:this.tileSize,pixelPosMatrix:et,transform:q,params:j,queryPadding:this.queryPadding*K},u,m,b):{}}querySourceFeatures(u,m){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const A=b.loadVTLayers(),C=m&&m.sourceLayer?m.sourceLayer:"",B=A._geojsonTileLayer||A[C];if(!B)return;const j=a.a6(m&&m.filter),{z:q,x:K,y:et}=this.tileID.canonical,it={z:q,x:K,y:et};for(let dt=0;dt<B.length;dt++){const Et=B.feature(dt);if(j.needGeometry){const At=a.a7(Et,!0);if(!j.filter(new a.a8(this.tileID.overscaledZ),At,this.tileID.canonical))continue}else if(!j.filter(new a.a8(this.tileID.overscaledZ),Et))continue;const Mt=b.getId(Et,C),zt=new a.a9(Et,q,K,et,Mt);zt.tile=it,u.push(zt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const m=this.expirationTime;if(u.cacheControl){const b=a.aa(u.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const b=Date.now();let A=!1;if(this.expirationTime>b)A=!1;else if(m)if(this.expirationTime<m)A=!0;else{const C=this.expirationTime-m;C?this.expirationTime=b+Math.max(C,3e4):A=!0}else A=!0;A?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,m){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const A in this.buckets){if(!m.style.hasLayer(A))continue;const C=this.buckets[A],B=C.layers[0].sourceLayer||"_geojsonTileLayer",j=b[B],q=u[B];if(!j||!q||Object.keys(q).length===0)continue;C.update(q,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const K=m&&m.style&&m.style.getLayer(A);K&&(this.queryPadding=Math.max(this.queryPadding,K.queryRadius(C)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=a.h.now()+u}setDependencies(u,m){const b={};for(const A of m)b[A]=!0;this.dependencies[u]=b}hasDependency(u,m){for(const b of u){const A=this.dependencies[b];if(A){for(const C of m)if(A[C])return!0}}return!1}}class In{constructor(u,m){this.max=u,this.onRemove=m,this.reset()}reset(){for(const u in this.data)for(const m of this.data[u])m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value);return this.data={},this.order=[],this}add(u,m,b){const A=u.wrapped().key;this.data[A]===void 0&&(this.data[A]=[]);const C={value:m,timeout:void 0};if(b!==void 0&&(C.timeout=setTimeout((()=>{this.remove(u,C)}),b)),this.data[A].push(C),this.order.push(A),this.order.length>this.max){const B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const m=this.data[u].shift();return m.timeout&&clearTimeout(m.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),m.value}getByKey(u){const m=this.data[u];return m?m[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,m){if(!this.has(u))return this;const b=u.wrapped().key,A=m===void 0?0:this.data[b].indexOf(m),C=this.data[b][A];return this.data[b].splice(A,1),C.timeout&&clearTimeout(C.timeout),this.data[b].length===0&&delete this.data[b],this.onRemove(C.value),this.order.splice(this.order.indexOf(b),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}filter(u){const m=[];for(const b in this.data)for(const A of this.data[b])u(A.value)||m.push(A);for(const b of m)this.remove(b.value.tileID,b)}}class _e{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,m,b){const A=String(m);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][A]=this.stateChanges[u][A]||{},a.e(this.stateChanges[u][A],b),this.deletedStates[u]===null){this.deletedStates[u]={};for(const C in this.state[u])C!==A&&(this.deletedStates[u][C]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][A]===null){this.deletedStates[u][A]={};for(const C in this.state[u][A])b[C]||(this.deletedStates[u][A][C]=null)}else for(const C in b)this.deletedStates[u]&&this.deletedStates[u][A]&&this.deletedStates[u][A][C]===null&&delete this.deletedStates[u][A][C]}removeFeatureState(u,m,b){if(this.deletedStates[u]===null)return;const A=String(m);if(this.deletedStates[u]=this.deletedStates[u]||{},b&&m!==void 0)this.deletedStates[u][A]!==null&&(this.deletedStates[u][A]=this.deletedStates[u][A]||{},this.deletedStates[u][A][b]=null);else if(m!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][A])for(b in this.deletedStates[u][A]={},this.stateChanges[u][A])this.deletedStates[u][A][b]=null;else this.deletedStates[u][A]=null;else this.deletedStates[u]=null}getState(u,m){const b=String(m),A=a.e({},(this.state[u]||{})[b],(this.stateChanges[u]||{})[b]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const C=this.deletedStates[u][m];if(C===null)return{};for(const B in C)delete A[B]}return A}initializeTileState(u,m){u.setFeatureState(this.state,m)}coalesceChanges(u,m){const b={};for(const A in this.stateChanges){this.state[A]=this.state[A]||{};const C={};for(const B in this.stateChanges[A])this.state[A][B]||(this.state[A][B]={}),a.e(this.state[A][B],this.stateChanges[A][B]),C[B]=this.state[A][B];b[A]=C}for(const A in this.deletedStates){this.state[A]=this.state[A]||{};const C={};if(this.deletedStates[A]===null)for(const B in this.state[A])C[B]={},this.state[A][B]={};else for(const B in this.deletedStates[A]){if(this.deletedStates[A][B]===null)this.state[A][B]={};else for(const j of Object.keys(this.deletedStates[A][B]))delete this.state[A][B][j];C[B]=this.state[A][B]}b[A]=b[A]||{},a.e(b[A],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(const A in u)u[A].setFeatureState(b,m)}}class Di extends a.E{constructor(u,m,b){super(),this.id=u,this.dispatcher=b,this.on("data",(A=>{A.dataType==="source"&&A.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&A.dataType==="source"&&A.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((A,C,B,j)=>{const q=new(je(C.type))(A,C,B,j);if(q.id!==A)throw new Error(`Expected Source id to be ${A} instead of ${q.id}`);return q})(u,m,b,this),this._tiles={},this._cache=new In(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new _e,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u in this._tiles){const m=this._tiles[u];if(m.state!=="loaded"&&m.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,m){return this._source.loadTile(u,m)}_unloadTile(u){if(this._source.unloadTile)return this._source.unloadTile(u,(()=>{}))}_abortTile(u){this._source.abortTile&&this._source.abortTile(u,(()=>{})),this._source.fire(new a.k("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const m in this._tiles){const b=this._tiles[m];b.upload(u),b.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((u=>u.tileID)).sort(Ri).map((u=>u.key))}getRenderableIds(u){const m=[];for(const b in this._tiles)this._isIdRenderable(b,u)&&m.push(this._tiles[b]);return u?m.sort(((b,A)=>{const C=b.tileID,B=A.tileID,j=new a.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),q=new a.P(B.canonical.x,B.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-B.overscaledZ||q.y-j.y||q.x-j.x})).map((b=>b.tileID.key)):m.map((b=>b.tileID)).sort(Ri).map((b=>b.key))}hasRenderableParent(u){const m=this.findLoadedParent(u,0);return!!m&&this._isIdRenderable(m.tileID.key)}_isIdRenderable(u,m){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(m||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,m){const b=this._tiles[u];b&&(b.state!=="loading"&&(b.state=m),this._loadTile(b,this._tileLoaded.bind(this,b,u,m)))}_tileLoaded(u,m,b,A){if(A)return u.state="errored",void(A.status!==404?this._source.fire(new a.j(A,{tile:u})):this.update(this.transform,this.terrain));u.timeAdded=a.h.now(),b==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(m,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const m=this.getRenderableIds();for(let A=0;A<m.length;A++){const C=m[A];if(u.neighboringTiles&&u.neighboringTiles[C]){const B=this.getTileByID(C);b(u,B),b(B,u)}}function b(A,C){A.needsHillshadePrepare=!0,A.needsTerrainPrepare=!0;let B=C.tileID.canonical.x-A.tileID.canonical.x;const j=C.tileID.canonical.y-A.tileID.canonical.y,q=Math.pow(2,A.tileID.canonical.z),K=C.tileID.key;B===0&&j===0||Math.abs(j)>1||(Math.abs(B)>1&&(Math.abs(B+q)===1?B+=q:Math.abs(B-q)===1&&(B-=q)),C.dem&&A.dem&&(A.dem.backfillBorder(C.dem,B,j),A.neighboringTiles&&A.neighboringTiles[K]&&(A.neighboringTiles[K].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,m,b,A){for(const C in this._tiles){let B=this._tiles[C];if(A[C]||!B.hasData()||B.tileID.overscaledZ<=m||B.tileID.overscaledZ>b)continue;let j=B.tileID;for(;B&&B.tileID.overscaledZ>m+1;){const K=B.tileID.scaledTo(B.tileID.overscaledZ-1);B=this._tiles[K.key],B&&B.hasData()&&(j=K)}let q=j;for(;q.overscaledZ>m;)if(q=q.scaledTo(q.overscaledZ-1),u[q.key]){A[j.key]=j;break}}}findLoadedParent(u,m){if(u.key in this._loadedParentTiles){const b=this._loadedParentTiles[u.key];return b&&b.tileID.overscaledZ>=m?b:null}for(let b=u.overscaledZ-1;b>=m;b--){const A=u.scaledTo(b),C=this._getLoadedTile(A);if(C)return C}}_getLoadedTile(u){const m=this._tiles[u.key];return m&&m.hasData()?m:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const m=Math.ceil(u.width/this._source.tileSize)+1,b=Math.ceil(u.height/this._source.tileSize)+1,A=Math.floor(m*b*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,A):A;this._cache.setMaxSize(C)}handleWrapJump(u){const m=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,m){const b={};for(const A in this._tiles){const C=this._tiles[A];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+m),b[C.tileID.key]=C}this._tiles=b;for(const A in this._timers)clearTimeout(this._timers[A]),delete this._timers[A];for(const A in this._tiles)this._setTileReloadTimer(A,this._tiles[A])}}update(u,m){if(this.transform=u,this.terrain=m,!this._sourceLoaded||this._paused)return;let b;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?b=u.getVisibleUnwrappedCoordinates(this._source.tileID).map((et=>new a.O(et.canonical.z,et.wrap,et.canonical.z,et.canonical.x,et.canonical.y))):(b=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:m}),this._source.hasTile&&(b=b.filter((et=>this._source.hasTile(et))))):b=[];const A=u.coveringZoomLevel(this._source),C=Math.max(A-Di.maxOverzooming,this._source.minzoom),B=Math.max(A+Di.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const et={};for(const it of b)if(it.canonical.z>this._source.minzoom){const dt=it.scaledTo(it.canonical.z-1);et[dt.key]=dt;const Et=it.scaledTo(Math.max(this._source.minzoom,Math.min(it.canonical.z,5)));et[Et.key]=Et}b=b.concat(Object.values(et))}const j=b.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,j&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const q=this._updateRetainedTiles(b,A);if(Yn(this._source.type)){const et={},it={},dt=Object.keys(q),Et=a.h.now();for(const Mt of dt){const zt=q[Mt],At=this._tiles[Mt];if(!At||At.fadeEndTime!==0&&At.fadeEndTime<=Et)continue;const Gt=this.findLoadedParent(zt,C);Gt&&(this._addTile(Gt.tileID),et[Gt.tileID.key]=Gt.tileID),it[Mt]=zt}this._retainLoadedChildren(it,A,B,q);for(const Mt in et)q[Mt]||(this._coveredTiles[Mt]=!0,q[Mt]=et[Mt]);if(m){const Mt={},zt={};for(const At of b)this._tiles[At.key].hasData()?Mt[At.key]=At:zt[At.key]=At;for(const At in zt){const Gt=zt[At].children(this._source.maxzoom);this._tiles[Gt[0].key]&&this._tiles[Gt[1].key]&&this._tiles[Gt[2].key]&&this._tiles[Gt[3].key]&&(Mt[Gt[0].key]=q[Gt[0].key]=Gt[0],Mt[Gt[1].key]=q[Gt[1].key]=Gt[1],Mt[Gt[2].key]=q[Gt[2].key]=Gt[2],Mt[Gt[3].key]=q[Gt[3].key]=Gt[3],delete zt[At])}for(const At in zt){const Gt=this.findLoadedParent(zt[At],this._source.minzoom);if(Gt){Mt[Gt.tileID.key]=q[Gt.tileID.key]=Gt.tileID;for(const ue in Mt)Mt[ue].isChildOf(Gt.tileID)&&delete Mt[ue]}}for(const At in this._tiles)Mt[At]||(this._coveredTiles[At]=!0)}}for(const et in q)this._tiles[et].clearFadeHold();const K=a.ab(this._tiles,q);for(const et of K){const it=this._tiles[et];it.hasSymbolBuckets&&!it.holdingForFade()?it.setHoldDuration(this.map._fadeDuration):it.hasSymbolBuckets&&!it.symbolFadeFinished()||this._removeTile(et)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,m){const b={},A={},C=Math.max(m-Di.maxOverzooming,this._source.minzoom),B=Math.max(m+Di.maxUnderzooming,this._source.minzoom),j={};for(const q of u){const K=this._addTile(q);b[q.key]=q,K.hasData()||m<this._source.maxzoom&&(j[q.key]=q)}this._retainLoadedChildren(j,m,B,b);for(const q of u){let K=this._tiles[q.key];if(K.hasData())continue;if(m+1>this._source.maxzoom){const it=q.children(this._source.maxzoom)[0],dt=this.getTile(it);if(dt&&dt.hasData()){b[it.key]=it;continue}}else{const it=q.children(this._source.maxzoom);if(b[it[0].key]&&b[it[1].key]&&b[it[2].key]&&b[it[3].key])continue}let et=K.wasRequested();for(let it=q.overscaledZ-1;it>=C;--it){const dt=q.scaledTo(it);if(A[dt.key])break;if(A[dt.key]=!0,K=this.getTile(dt),!K&&et&&(K=this._addTile(dt)),K){const Et=K.hasData();if((et||Et)&&(b[dt.key]=dt),et=K.wasRequested(),Et)break}}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const m=[];let b,A=this._tiles[u].tileID;for(;A.overscaledZ>0;){if(A.key in this._loadedParentTiles){b=this._loadedParentTiles[A.key];break}m.push(A.key);const C=A.scaledTo(A.overscaledZ-1);if(b=this._getLoadedTile(C),b)break;A=C}for(const C of m)this._loadedParentTiles[C]=b}}_addTile(u){let m=this._tiles[u.key];if(m)return m;m=this._cache.getAndRemove(u),m&&(this._setTileReloadTimer(u.key,m),m.tileID=u,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,m)));const b=m;return m||(m=new an(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(m,this._tileLoaded.bind(this,m,u.key,m.state))),m.uses++,this._tiles[u.key]=m,b||this._source.fire(new a.k("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m}_setTileReloadTimer(u,m){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const b=m.getExpiryTimeout();b&&(this._timers[u]=setTimeout((()=>{this._reloadTile(u,"expired"),delete this._timers[u]}),b))}_removeTile(u){const m=this._tiles[u];m&&(m.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,m,b){const A=[],C=this.transform;if(!C)return A;const B=b?C.getCameraQueryGeometry(u):u,j=u.map((Mt=>C.pointCoordinate(Mt,this.terrain))),q=B.map((Mt=>C.pointCoordinate(Mt,this.terrain))),K=this.getIds();let et=1/0,it=1/0,dt=-1/0,Et=-1/0;for(const Mt of q)et=Math.min(et,Mt.x),it=Math.min(it,Mt.y),dt=Math.max(dt,Mt.x),Et=Math.max(Et,Mt.y);for(let Mt=0;Mt<K.length;Mt++){const zt=this._tiles[K[Mt]];if(zt.holdingForFade())continue;const At=zt.tileID,Gt=Math.pow(2,C.zoom-zt.tileID.overscaledZ),ue=m*zt.queryPadding*a.N/zt.tileSize/Gt,Nt=[At.getTilePoint(new a.U(et,it)),At.getTilePoint(new a.U(dt,Et))];if(Nt[0].x-ue<a.N&&Nt[0].y-ue<a.N&&Nt[1].x+ue>=0&&Nt[1].y+ue>=0){const Kt=j.map((me=>At.getTilePoint(me))),he=q.map((me=>At.getTilePoint(me)));A.push({tile:zt,tileID:At,queryGeometry:Kt,cameraQueryGeometry:he,scale:Gt})}}return A}getVisibleCoordinates(u){const m=this.getRenderableIds(u).map((b=>this._tiles[b].tileID));for(const b of m)b.posMatrix=this.transform.calculatePosMatrix(b.toUnwrapped());return m}hasTransition(){if(this._source.hasTransition())return!0;if(Yn(this._source.type)){const u=a.h.now();for(const m in this._tiles)if(this._tiles[m].fadeEndTime>=u)return!0}return!1}setFeatureState(u,m,b){this._state.updateState(u=u||"_geojsonTileLayer",m,b)}removeFeatureState(u,m,b){this._state.removeFeatureState(u=u||"_geojsonTileLayer",m,b)}getFeatureState(u,m){return this._state.getState(u=u||"_geojsonTileLayer",m)}setDependencies(u,m,b){const A=this._tiles[u];A&&A.setDependencies(m,b)}reloadTilesForDependencies(u,m){for(const b in this._tiles)this._tiles[b].hasDependency(u,m)&&this._reloadTile(b,"reloading");this._cache.filter((b=>!b.hasDependency(u,m)))}}function Ri(E,u){const m=Math.abs(2*E.wrap)-+(E.wrap<0),b=Math.abs(2*u.wrap)-+(u.wrap<0);return E.overscaledZ-u.overscaledZ||b-m||u.canonical.y-E.canonical.y||u.canonical.x-E.canonical.x}function Yn(E){return E==="raster"||E==="image"||E==="video"}Di.maxOverzooming=10,Di.maxUnderzooming=3;const cn="mapboxgl_preloaded_worker_pool";class Wi{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<Wi.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach((m=>{m.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[cn]}numActive(){return Object.keys(this.active).length}}const si=Math.floor(a.h.hardwareConcurrency/2);let Bi;function Ur(){return Bi||(Bi=new Wi),Bi}Wi.workerCount=a.ac(globalThis)?Math.max(Math.min(si,3),1):1;class Xs{constructor(u,m){this.reset(u,m)}reset(u,m){this.points=u||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=a.ad(u,0,1);let m=1,b=this._distances[m];const A=u*this.paddedLength+this.padding;for(;b<A&&m<this._distances.length;)b=this._distances[++m];const C=m-1,B=this._distances[C],j=b-B,q=j>0?(A-B)/j:0;return this.points[C].mult(1-q).add(this.points[m].mult(q))}}function Xa(E,u){let m=!0;return E==="always"||E!=="never"&&u!=="never"||(m=!1),m}class va{constructor(u,m,b){const A=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(u/b),this.yCellCount=Math.ceil(m/b);for(let B=0;B<this.xCellCount*this.yCellCount;B++)A.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=m,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,m,b,A,C){this._forEachCell(m,b,A,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(A),this.bboxes.push(C)}insertCircle(u,m,b,A){this._forEachCell(m-A,b-A,m+A,b+A,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(m),this.circles.push(b),this.circles.push(A)}_insertBoxCell(u,m,b,A,C,B){this.boxCells[C].push(B)}_insertCircleCell(u,m,b,A,C,B){this.circleCells[C].push(B)}_query(u,m,b,A,C,B,j){if(b<0||u>this.width||A<0||m>this.height)return[];const q=[];if(u<=0&&m<=0&&this.width<=b&&this.height<=A){if(C)return[{key:null,x1:u,y1:m,x2:b,y2:A}];for(let K=0;K<this.boxKeys.length;K++)q.push({key:this.boxKeys[K],x1:this.bboxes[4*K],y1:this.bboxes[4*K+1],x2:this.bboxes[4*K+2],y2:this.bboxes[4*K+3]});for(let K=0;K<this.circleKeys.length;K++){const et=this.circles[3*K],it=this.circles[3*K+1],dt=this.circles[3*K+2];q.push({key:this.circleKeys[K],x1:et-dt,y1:it-dt,x2:et+dt,y2:it+dt})}}else this._forEachCell(u,m,b,A,this._queryCell,q,{hitTest:C,overlapMode:B,seenUids:{box:{},circle:{}}},j);return q}query(u,m,b,A){return this._query(u,m,b,A,!1,null)}hitTest(u,m,b,A,C,B){return this._query(u,m,b,A,!0,C,B).length>0}hitTestCircle(u,m,b,A,C){const B=u-b,j=u+b,q=m-b,K=m+b;if(j<0||B>this.width||K<0||q>this.height)return!1;const et=[];return this._forEachCell(B,q,j,K,this._queryCellCircle,et,{hitTest:!0,overlapMode:A,circle:{x:u,y:m,radius:b},seenUids:{box:{},circle:{}}},C),et.length>0}_queryCell(u,m,b,A,C,B,j,q){const{seenUids:K,hitTest:et,overlapMode:it}=j,dt=this.boxCells[C];if(dt!==null){const Mt=this.bboxes;for(const zt of dt)if(!K.box[zt]){K.box[zt]=!0;const At=4*zt,Gt=this.boxKeys[zt];if(u<=Mt[At+2]&&m<=Mt[At+3]&&b>=Mt[At+0]&&A>=Mt[At+1]&&(!q||q(Gt))&&(!et||!Xa(it,Gt.overlapMode))&&(B.push({key:Gt,x1:Mt[At],y1:Mt[At+1],x2:Mt[At+2],y2:Mt[At+3]}),et))return!0}}const Et=this.circleCells[C];if(Et!==null){const Mt=this.circles;for(const zt of Et)if(!K.circle[zt]){K.circle[zt]=!0;const At=3*zt,Gt=this.circleKeys[zt];if(this._circleAndRectCollide(Mt[At],Mt[At+1],Mt[At+2],u,m,b,A)&&(!q||q(Gt))&&(!et||!Xa(it,Gt.overlapMode))){const ue=Mt[At],Nt=Mt[At+1],Kt=Mt[At+2];if(B.push({key:Gt,x1:ue-Kt,y1:Nt-Kt,x2:ue+Kt,y2:Nt+Kt}),et)return!0}}}return!1}_queryCellCircle(u,m,b,A,C,B,j,q){const{circle:K,seenUids:et,overlapMode:it}=j,dt=this.boxCells[C];if(dt!==null){const Mt=this.bboxes;for(const zt of dt)if(!et.box[zt]){et.box[zt]=!0;const At=4*zt,Gt=this.boxKeys[zt];if(this._circleAndRectCollide(K.x,K.y,K.radius,Mt[At+0],Mt[At+1],Mt[At+2],Mt[At+3])&&(!q||q(Gt))&&!Xa(it,Gt.overlapMode))return B.push(!0),!0}}const Et=this.circleCells[C];if(Et!==null){const Mt=this.circles;for(const zt of Et)if(!et.circle[zt]){et.circle[zt]=!0;const At=3*zt,Gt=this.circleKeys[zt];if(this._circlesCollide(Mt[At],Mt[At+1],Mt[At+2],K.x,K.y,K.radius)&&(!q||q(Gt))&&!Xa(it,Gt.overlapMode))return B.push(!0),!0}}}_forEachCell(u,m,b,A,C,B,j,q){const K=this._convertToXCellCoord(u),et=this._convertToYCellCoord(m),it=this._convertToXCellCoord(b),dt=this._convertToYCellCoord(A);for(let Et=K;Et<=it;Et++)for(let Mt=et;Mt<=dt;Mt++)if(C.call(this,u,m,b,A,this.xCellCount*Mt+Et,B,j,q))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,m,b,A,C,B){const j=A-u,q=C-m,K=b+B;return K*K>j*j+q*q}_circleAndRectCollide(u,m,b,A,C,B,j){const q=(B-A)/2,K=Math.abs(u-(A+q));if(K>q+b)return!1;const et=(j-C)/2,it=Math.abs(m-(C+et));if(it>et+b)return!1;if(K<=q||it<=et)return!0;const dt=K-q,Et=it-et;return dt*dt+Et*Et<=b*b}}function Be(E,u,m,b,A){const C=a.Z();return u?(a.a0(C,C,[1/A,1/A,1]),m||a.ae(C,C,b.angle)):a.a1(C,b.labelPlaneMatrix,E),C}function dr(E,u,m,b,A){if(u){const C=a.af(E);return a.a0(C,C,[A,A,1]),m||a.ae(C,C,-b.angle),C}return b.glCoordMatrix}function Un(E,u,m){let b;m?(b=[E.x,E.y,m(E.x,E.y),1],a.ag(b,b,u)):(b=[E.x,E.y,0,1],Lt(b,b,u));const A=b[3];return{point:new a.P(b[0]/A,b[1]/A),signedDistanceFromCamera:A}}function xa(E,u){return .5+E/u*.5}function pr(E,u){const m=E[0]/E[3],b=E[1]/E[3];return m>=-u[0]&&m<=u[0]&&b>=-u[1]&&b<=u[1]}function Ue(E,u,m,b,A,C,B,j,q,K){const et=b?E.textSizeData:E.iconSizeData,it=a.ah(et,m.transform.zoom),dt=[256/m.width*2+1,256/m.height*2+1],Et=b?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;Et.clear();const Mt=E.lineVertexArray,zt=b?E.text.placedSymbolArray:E.icon.placedSymbolArray,At=m.transform.width/m.transform.height;let Gt=!1;for(let ue=0;ue<zt.length;ue++){const Nt=zt.get(ue);if(Nt.hidden||Nt.writingMode===a.ai.vertical&&!Gt){wt(Nt.numGlyphs,Et);continue}let Kt;if(Gt=!1,K?(Kt=[Nt.anchorX,Nt.anchorY,K(Nt.anchorX,Nt.anchorY),1],a.ag(Kt,Kt,u)):(Kt=[Nt.anchorX,Nt.anchorY,0,1],Lt(Kt,Kt,u)),!pr(Kt,dt)){wt(Nt.numGlyphs,Et);continue}const he=xa(m.transform.cameraToCenterDistance,Kt[3]),me=a.aj(et,it,Nt),Se=B?me/he:me*he,Le=new a.P(Nt.anchorX,Nt.anchorY),ke=Un(Le,A,K).point,Ne={projections:{},offsets:{}},sn=Er(Nt,Se,!1,j,u,A,C,E.glyphOffsetArray,Mt,Et,ke,Le,Ne,At,q,K);Gt=sn.useVertical,(sn.notEnoughRoom||Gt||sn.needsFlipping&&Er(Nt,Se,!0,j,u,A,C,E.glyphOffsetArray,Mt,Et,ke,Le,Ne,At,q,K).notEnoughRoom)&&wt(Nt.numGlyphs,Et)}b?E.text.dynamicLayoutVertexBuffer.updateData(Et):E.icon.dynamicLayoutVertexBuffer.updateData(Et)}function Dn(E,u,m,b,A,C,B,j,q,K,et,it,dt){const Et=j.glyphStartIndex+j.numGlyphs,Mt=j.lineStartIndex,zt=j.lineStartIndex+j.lineLength,At=u.getoffsetX(j.glyphStartIndex),Gt=u.getoffsetX(Et-1),ue=lt(E*At,m,b,A,C,B,j.segment,Mt,zt,q,K,et,it,dt);if(!ue)return null;const Nt=lt(E*Gt,m,b,A,C,B,j.segment,Mt,zt,q,K,et,it,dt);return Nt?{first:ue,last:Nt}:null}function wn(E,u,m,b){return E===a.ai.horizontal&&Math.abs(m.y-u.y)>Math.abs(m.x-u.x)*b?{useVertical:!0}:(E===a.ai.vertical?u.y<m.y:u.x>m.x)?{needsFlipping:!0}:null}function Er(E,u,m,b,A,C,B,j,q,K,et,it,dt,Et,Mt,zt){const At=u/24,Gt=E.lineOffsetX*At,ue=E.lineOffsetY*At;let Nt;if(E.numGlyphs>1){const Kt=E.glyphStartIndex+E.numGlyphs,he=E.lineStartIndex,me=E.lineStartIndex+E.lineLength,Se=Dn(At,j,Gt,ue,m,et,it,E,q,C,dt,Mt,zt);if(!Se)return{notEnoughRoom:!0};const Le=Un(Se.first.point,B,zt).point,ke=Un(Se.last.point,B,zt).point;if(b&&!m){const Ne=wn(E.writingMode,Le,ke,Et);if(Ne)return Ne}Nt=[Se.first];for(let Ne=E.glyphStartIndex+1;Ne<Kt-1;Ne++)Nt.push(lt(At*j.getoffsetX(Ne),Gt,ue,m,et,it,E.segment,he,me,q,C,dt,Mt,zt));Nt.push(Se.last)}else{if(b&&!m){const he=Un(it,A,zt).point,me=E.lineStartIndex+E.segment+1,Se=new a.P(q.getx(me),q.gety(me)),Le=Un(Se,A,zt),ke=Le.signedDistanceFromCamera>0?Le.point:La(it,Se,he,1,A,zt),Ne=wn(E.writingMode,he,ke,Et);if(Ne)return Ne}const Kt=lt(At*j.getoffsetX(E.glyphStartIndex),Gt,ue,m,et,it,E.segment,E.lineStartIndex,E.lineStartIndex+E.lineLength,q,C,dt,Mt,zt);if(!Kt)return{notEnoughRoom:!0};Nt=[Kt]}for(const Kt of Nt)a.ak(K,Kt.point,Kt.angle);return{}}function La(E,u,m,b,A,C){const B=Un(E.add(E.sub(u)._unit()),A,C).point,j=m.sub(B);return m.add(j._mult(b/j.mag()))}function bn(E,u){const{projectionCache:m,lineVertexArray:b,labelPlaneMatrix:A,tileAnchorPoint:C,distanceFromAnchor:B,getElevation:j,previousVertex:q,direction:K,absOffsetX:et}=u;if(m.projections[E])return m.projections[E];const it=new a.P(b.getx(E),b.gety(E)),dt=Un(it,A,j);if(dt.signedDistanceFromCamera>0)return m.projections[E]=dt.point,dt.point;const Et=E-K;return La(B===0?C:new a.P(b.getx(Et),b.gety(Et)),it,q,et-B+1,A,j)}function ba(E,u,m){return E._unit()._perp()._mult(u*m)}function Dt(E,u,m,b,A,C,B,j){const{projectionCache:q,direction:K}=j;if(q.offsets[E])return q.offsets[E];const et=m.add(u);if(E+K<b||E+K>=A)return q.offsets[E]=et,et;const it=bn(E+K,j),dt=ba(it.sub(m),B,K),Et=m.add(dt),Mt=it.add(dt);return q.offsets[E]=a.al(C,et,Et,Mt)||et,q.offsets[E]}function lt(E,u,m,b,A,C,B,j,q,K,et,it,dt,Et){const Mt=b?E-u:E+u;let zt=Mt>0?1:-1,At=0;b&&(zt*=-1,At=Math.PI),zt<0&&(At+=Math.PI);let Gt,ue,Nt=zt>0?j+B:j+B+1,Kt=A,he=A,me=0,Se=0;const Le=Math.abs(Mt),ke=[];let Ne;for(;me+Se<=Le;){if(Nt+=zt,Nt<j||Nt>=q)return null;me+=Se,he=Kt,ue=Gt;const $e={projectionCache:it,lineVertexArray:K,labelPlaneMatrix:et,tileAnchorPoint:C,distanceFromAnchor:me,getElevation:Et,previousVertex:he,direction:zt,absOffsetX:Le};if(Kt=bn(Nt,$e),m===0)ke.push(he),Ne=Kt.sub(he);else{let fn;const on=Kt.sub(he);fn=on.mag()===0?ba(bn(Nt+zt,$e).sub(Kt),m,zt):ba(on,m,zt),ue||(ue=he.add(fn)),Gt=Dt(Nt,fn,Kt,j,q,ue,m,$e),ke.push(ue),Ne=Gt.sub(ue)}Se=Ne.mag()}const sn=Ne._mult((Le-me)/Se)._add(ue||he),qn=At+Math.atan2(Kt.y-he.y,Kt.x-he.x);return ke.push(sn),{point:sn,angle:dt?qn:0,path:ke}}const ft=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function wt(E,u){for(let m=0;m<E;m++){const b=u.length;u.resize(b+4),u.float32.set(ft,3*b)}}function Lt(E,u,m){const b=u[0],A=u[1];return E[0]=m[0]*b+m[4]*A+m[12],E[1]=m[1]*b+m[5]*A+m[13],E[3]=m[3]*b+m[7]*A+m[15],E}const It=100;class te{constructor(u,m=new va(u.width+200,u.height+200,25),b=new va(u.width+200,u.height+200,25)){this.transform=u,this.grid=m,this.ignoredGrid=b,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+It,this.screenBottomBoundary=u.height+It,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,m,b,A,C,B){const j=this.projectAndGetPerspectiveRatio(A,u.anchorPointX,u.anchorPointY,B),q=b*j.perspectiveRatio,K=u.x1*q+j.point.x,et=u.y1*q+j.point.y,it=u.x2*q+j.point.x,dt=u.y2*q+j.point.y;return!this.isInsideGrid(K,et,it,dt)||m!=="always"&&this.grid.hitTest(K,et,it,dt,m,C)||j.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[K,et,it,dt],offscreen:this.isOffscreen(K,et,it,dt)}}placeCollisionCircles(u,m,b,A,C,B,j,q,K,et,it,dt,Et,Mt){const zt=[],At=new a.P(m.anchorX,m.anchorY),Gt=Un(At,B,Mt),ue=xa(this.transform.cameraToCenterDistance,Gt.signedDistanceFromCamera),Nt=(et?C/ue:C*ue)/a.ap,Kt=Un(At,j,Mt).point,he=Dn(Nt,A,m.lineOffsetX*Nt,m.lineOffsetY*Nt,!1,Kt,At,m,b,j,{projections:{},offsets:{}},!1,Mt);let me=!1,Se=!1,Le=!0;if(he){const ke=.5*dt*ue+Et,Ne=new a.P(-100,-100),sn=new a.P(this.screenRightBoundary,this.screenBottomBoundary),qn=new Xs,$e=he.first,fn=he.last;let on=[];for(let Pn=$e.path.length-1;Pn>=1;Pn--)on.push($e.path[Pn]);for(let Pn=1;Pn<fn.path.length;Pn++)on.push(fn.path[Pn]);const Ei=2.5*ke;if(q){const Pn=on.map((Fn=>Un(Fn,q,Mt)));on=Pn.some((Fn=>Fn.signedDistanceFromCamera<=0))?[]:Pn.map((Fn=>Fn.point))}let Ln=[];if(on.length>0){const Pn=on[0].clone(),Fn=on[0].clone();for(let Yi=1;Yi<on.length;Yi++)Pn.x=Math.min(Pn.x,on[Yi].x),Pn.y=Math.min(Pn.y,on[Yi].y),Fn.x=Math.max(Fn.x,on[Yi].x),Fn.y=Math.max(Fn.y,on[Yi].y);Ln=Pn.x>=Ne.x&&Fn.x<=sn.x&&Pn.y>=Ne.y&&Fn.y<=sn.y?[on]:Fn.x<Ne.x||Pn.x>sn.x||Fn.y<Ne.y||Pn.y>sn.y?[]:a.am([on],Ne.x,Ne.y,sn.x,sn.y)}for(const Pn of Ln){qn.reset(Pn,.25*ke);let Fn=0;Fn=qn.length<=.5*ke?1:Math.ceil(qn.paddedLength/Ei)+1;for(let Yi=0;Yi<Fn;Yi++){const Pi=Yi/Math.max(Fn-1,1),ua=qn.lerp(Pi),er=ua.x+It,Sr=ua.y+It;zt.push(er,Sr,ke,0);const Hr=er-ke,ji=Sr-ke,fo=er+ke,Ea=Sr+ke;if(Le=Le&&this.isOffscreen(Hr,ji,fo,Ea),Se=Se||this.isInsideGrid(Hr,ji,fo,Ea),u!=="always"&&this.grid.hitTestCircle(er,Sr,ke,u,it)&&(me=!0,!K))return{circles:[],offscreen:!1,collisionDetected:me}}}}return{circles:!K&&me||!Se||ue<this.perspectiveRatioCutoff?[]:zt,offscreen:Le,collisionDetected:me}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let b=1/0,A=1/0,C=-1/0,B=-1/0;for(const et of u){const it=new a.P(et.x+It,et.y+It);b=Math.min(b,it.x),A=Math.min(A,it.y),C=Math.max(C,it.x),B=Math.max(B,it.y),m.push(it)}const j=this.grid.query(b,A,C,B).concat(this.ignoredGrid.query(b,A,C,B)),q={},K={};for(const et of j){const it=et.key;if(q[it.bucketInstanceId]===void 0&&(q[it.bucketInstanceId]={}),q[it.bucketInstanceId][it.featureIndex])continue;const dt=[new a.P(et.x1,et.y1),new a.P(et.x2,et.y1),new a.P(et.x2,et.y2),new a.P(et.x1,et.y2)];a.an(m,dt)&&(q[it.bucketInstanceId][it.featureIndex]=!0,K[it.bucketInstanceId]===void 0&&(K[it.bucketInstanceId]=[]),K[it.bucketInstanceId].push(it.featureIndex))}return K}insertCollisionBox(u,m,b,A,C,B){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:A,featureIndex:C,collisionGroupID:B,overlapMode:m},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,m,b,A,C,B){const j=b?this.ignoredGrid:this.grid,q={bucketInstanceId:A,featureIndex:C,collisionGroupID:B,overlapMode:m};for(let K=0;K<u.length;K+=4)j.insertCircle(q,u[K],u[K+1],u[K+2])}projectAndGetPerspectiveRatio(u,m,b,A){let C;return A?(C=[m,b,A(m,b),1],a.ag(C,C,u)):(C=[m,b,0,1],Lt(C,C,u)),{point:new a.P((C[0]/C[3]+1)/2*this.transform.width+It,(-C[1]/C[3]+1)/2*this.transform.height+It),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}}isOffscreen(u,m,b,A){return b<It||u>=this.screenRightBoundary||A<It||m>this.screenBottomBoundary}isInsideGrid(u,m,b,A){return b>=0&&u<this.gridRightBoundary&&A>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const u=a.ao([]);return a.$(u,u,[-100,-100,0]),u}}function Zt(E,u,m){return u*(a.N/(E.tileSize*Math.pow(2,m-E.tileID.overscaledZ)))}class Ft{constructor(u,m,b,A){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?m:-m))):A&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class Xt{constructor(u,m,b,A,C){this.text=new Ft(u?u.text:null,m,b,C),this.icon=new Ft(u?u.icon:null,m,A,C)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class xe{constructor(u,m,b){this.text=u,this.icon=m,this.skipFade=b}}class ie{constructor(){this.invProjMatrix=a.Z(),this.viewportMatrix=a.Z(),this.circles=[]}}class Ee{constructor(u,m,b,A,C){this.bucketInstanceId=u,this.featureIndex=m,this.sourceLayerIndex=b,this.bucketIndex=A,this.tileID=C}}class hn{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const m=++this.maxGroupID;this.collisionGroups[u]={ID:m,predicate:b=>b.collisionGroupID===m}}return this.collisionGroups[u]}}function dn(E,u,m,b,A){const{horizontalAlign:C,verticalAlign:B}=a.au(E);return new a.P(-(C-.5)*u+b[0]*A,-(B-.5)*m+b[1]*A)}function He(E,u,m,b,A,C){const{x1:B,x2:j,y1:q,y2:K,anchorPointX:et,anchorPointY:it}=E,dt=new a.P(u,m);return b&&dt._rotate(A?C:-C),{x1:B+dt.x,y1:q+dt.y,x2:j+dt.x,y2:K+dt.y,anchorPointX:et,anchorPointY:it}}class Je{constructor(u,m,b,A,C){this.transform=u.clone(),this.terrain=m,this.collisionIndex=new te(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new hn(A),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,m,b,A){const C=b.getBucket(m),B=b.latestFeatureIndex;if(!C||!B||m.id!==C.layerIds[0])return;const j=b.collisionBoxArray,q=C.layers[0].layout,K=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),et=b.tileSize/a.N,it=this.transform.calculatePosMatrix(b.tileID.toUnwrapped()),dt=q.get("text-pitch-alignment")==="map",Et=q.get("text-rotation-alignment")==="map",Mt=Zt(b,1,this.transform.zoom),zt=Be(it,dt,Et,this.transform,Mt);let At=null;if(dt){const ue=dr(it,dt,Et,this.transform,Mt);At=a.a1([],this.transform.labelPlaneMatrix,ue)}this.retainedQueryData[C.bucketInstanceId]=new Ee(C.bucketInstanceId,B,C.sourceLayerIndex,C.index,b.tileID);const Gt={bucket:C,layout:q,posMatrix:it,textLabelPlaneMatrix:zt,labelToScreenMatrix:At,scale:K,textPixelRatio:et,holdingForFade:b.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:a.ah(C.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(A)for(const ue of C.sortKeyRanges){const{sortKey:Nt,symbolInstanceStart:Kt,symbolInstanceEnd:he}=ue;u.push({sortKey:Nt,symbolInstanceStart:Kt,symbolInstanceEnd:he,parameters:Gt})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Gt})}attemptAnchorPlacement(u,m,b,A,C,B,j,q,K,et,it,dt,Et,Mt,zt,At){const Gt=a.aq[u.textAnchor],ue=[u.textOffset0,u.textOffset1],Nt=dn(Gt,b,A,ue,C),Kt=this.collisionIndex.placeCollisionBox(He(m,Nt.x,Nt.y,B,j,this.transform.angle),it,q,K,et.predicate,At);if((!zt||this.collisionIndex.placeCollisionBox(He(zt,Nt.x,Nt.y,B,j,this.transform.angle),it,q,K,et.predicate,At).box.length!==0)&&Kt.box.length>0){let he;if(this.prevPlacement&&this.prevPlacement.variableOffsets[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID].text&&(he=this.prevPlacement.variableOffsets[dt.crossTileID].anchor),dt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[dt.crossTileID]={textOffset:ue,width:b,height:A,anchor:Gt,textBoxScale:C,prevAnchor:he},this.markUsedJustification(Et,Gt,dt,Mt),Et.allowVerticalPlacement&&(this.markUsedOrientation(Et,Mt,dt),this.placedOrientations[dt.crossTileID]=Mt),{shift:Nt,placedGlyphBoxes:Kt}}}placeLayerBucketPart(u,m,b){const{bucket:A,layout:C,posMatrix:B,textLabelPlaneMatrix:j,labelToScreenMatrix:q,textPixelRatio:K,holdingForFade:et,collisionBoxArray:it,partiallyEvaluatedTextSize:dt,collisionGroup:Et}=u.parameters,Mt=C.get("text-optional"),zt=C.get("icon-optional"),At=a.ar(C,"text-overlap","text-allow-overlap"),Gt=At==="always",ue=a.ar(C,"icon-overlap","icon-allow-overlap"),Nt=ue==="always",Kt=C.get("text-rotation-alignment")==="map",he=C.get("text-pitch-alignment")==="map",me=C.get("icon-text-fit")!=="none",Se=C.get("symbol-z-order")==="viewport-y",Le=Gt&&(Nt||!A.hasIconData()||zt),ke=Nt&&(Gt||!A.hasTextData()||Mt);!A.collisionArrays&&it&&A.deserializeCollisionBoxes(it);const Ne=this.retainedQueryData[A.bucketInstanceId].tileID,sn=this.terrain?($e,fn)=>this.terrain.getElevation(Ne,$e,fn):null,qn=($e,fn)=>{var on,Ei;if(m[$e.crossTileID])return;if(et)return void(this.placements[$e.crossTileID]=new xe(!1,!1,!1));let Ln=!1,Pn=!1,Fn=!0,Yi=null,Pi={box:null,offscreen:null},ua={box:null},er=null,Sr=null,Hr=null,ji=0,fo=0,Ea=0;fn.textFeatureIndex?ji=fn.textFeatureIndex:$e.useRuntimeCollisionCircles&&(ji=$e.featureIndex),fn.verticalTextFeatureIndex&&(fo=fn.verticalTextFeatureIndex);const rs=fn.textBox;if(rs){const ca=mr=>{let or=a.ai.horizontal;if(A.allowVerticalPlacement&&!mr&&this.prevPlacement){const Ca=this.prevPlacement.placedOrientations[$e.crossTileID];Ca&&(this.placedOrientations[$e.crossTileID]=Ca,or=Ca,this.markUsedOrientation(A,or,$e))}return or},Dr=(mr,or)=>{if(A.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&fn.verticalTextBox){for(const Ca of A.writingModes)if(Ca===a.ai.vertical?(Pi=or(),ua=Pi):Pi=mr(),Pi&&Pi.box&&Pi.box.length)break}else Pi=mr()},Jr=$e.textAnchorOffsetStartIndex,du=$e.textAnchorOffsetEndIndex;if(du===Jr){const mr=(or,Ca)=>{const gr=this.collisionIndex.placeCollisionBox(or,At,K,B,Et.predicate,sn);return gr&&gr.box&&gr.box.length&&(this.markUsedOrientation(A,Ca,$e),this.placedOrientations[$e.crossTileID]=Ca),gr};Dr((()=>mr(rs,a.ai.horizontal)),(()=>{const or=fn.verticalTextBox;return A.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&or?mr(or,a.ai.vertical):{box:null,offscreen:null}})),ca(Pi&&Pi.box&&Pi.box.length)}else{let mr=a.aq[(Ei=(on=this.prevPlacement)===null||on===void 0?void 0:on.variableOffsets[$e.crossTileID])===null||Ei===void 0?void 0:Ei.anchor];const or=(gr,jl,Ac)=>{const xs=gr.x2-gr.x1,Bs=gr.y2-gr.y1,pu=$e.textBoxScale,ah=me&&ue==="never"?jl:null;let Zo={box:[],offscreen:!1},bs=At==="never"?1:2,Tr="never";mr&&bs++;for(let wi=0;wi<bs;wi++){for(let Ns=Jr;Ns<du;Ns++){const Go=A.textAnchorOffsets.get(Ns);if(mr&&Go.textAnchor!==mr)continue;const En=this.attemptAnchorPlacement(Go,gr,xs,Bs,pu,Kt,he,K,B,Et,Tr,$e,A,Ac,ah,sn);if(En&&(Zo=En.placedGlyphBoxes,Zo&&Zo.box&&Zo.box.length))return Ln=!0,Yi=En.shift,Zo}mr?mr=null:Tr=At}return Zo};Dr((()=>or(rs,fn.iconBox,a.ai.horizontal)),(()=>{const gr=fn.verticalTextBox;return A.allowVerticalPlacement&&!(Pi&&Pi.box&&Pi.box.length)&&$e.numVerticalGlyphVertices>0&&gr?or(gr,fn.verticalIconBox,a.ai.vertical):{box:null,offscreen:null}})),Pi&&(Ln=Pi.box,Fn=Pi.offscreen);const Ca=ca(Pi&&Pi.box);if(!Ln&&this.prevPlacement){const gr=this.prevPlacement.variableOffsets[$e.crossTileID];gr&&(this.variableOffsets[$e.crossTileID]=gr,this.markUsedJustification(A,gr.anchor,$e,Ca))}}}if(er=Pi,Ln=er&&er.box&&er.box.length>0,Fn=er&&er.offscreen,$e.useRuntimeCollisionCircles){const ca=A.text.placedSymbolArray.get($e.centerJustifiedTextSymbolIndex),Dr=a.aj(A.textSizeData,dt,ca),Jr=C.get("text-padding");Sr=this.collisionIndex.placeCollisionCircles(At,ca,A.lineVertexArray,A.glyphOffsetArray,Dr,B,j,q,b,he,Et.predicate,$e.collisionCircleDiameter,Jr,sn),Sr.circles.length&&Sr.collisionDetected&&!b&&a.w("Collisions detected, but collision boxes are not shown"),Ln=Gt||Sr.circles.length>0&&!Sr.collisionDetected,Fn=Fn&&Sr.offscreen}if(fn.iconFeatureIndex&&(Ea=fn.iconFeatureIndex),fn.iconBox){const ca=Dr=>{const Jr=me&&Yi?He(Dr,Yi.x,Yi.y,Kt,he,this.transform.angle):Dr;return this.collisionIndex.placeCollisionBox(Jr,ue,K,B,Et.predicate,sn)};ua&&ua.box&&ua.box.length&&fn.verticalIconBox?(Hr=ca(fn.verticalIconBox),Pn=Hr.box.length>0):(Hr=ca(fn.iconBox),Pn=Hr.box.length>0),Fn=Fn&&Hr.offscreen}const Ho=Mt||$e.numHorizontalGlyphVertices===0&&$e.numVerticalGlyphVertices===0,fu=zt||$e.numIconVertices===0;if(Ho||fu?fu?Ho||(Pn=Pn&&Ln):Ln=Pn&&Ln:Pn=Ln=Pn&&Ln,Ln&&er&&er.box&&this.collisionIndex.insertCollisionBox(er.box,At,C.get("text-ignore-placement"),A.bucketInstanceId,ua&&ua.box&&fo?fo:ji,Et.ID),Pn&&Hr&&this.collisionIndex.insertCollisionBox(Hr.box,ue,C.get("icon-ignore-placement"),A.bucketInstanceId,Ea,Et.ID),Sr&&(Ln&&this.collisionIndex.insertCollisionCircles(Sr.circles,At,C.get("text-ignore-placement"),A.bucketInstanceId,ji,Et.ID),b)){const ca=A.bucketInstanceId;let Dr=this.collisionCircleArrays[ca];Dr===void 0&&(Dr=this.collisionCircleArrays[ca]=new ie);for(let Jr=0;Jr<Sr.circles.length;Jr+=4)Dr.circles.push(Sr.circles[Jr+0]),Dr.circles.push(Sr.circles[Jr+1]),Dr.circles.push(Sr.circles[Jr+2]),Dr.circles.push(Sr.collisionDetected?1:0)}if($e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(A.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$e.crossTileID]=new xe(Ln||Le,Pn||ke,Fn||A.justReloaded),m[$e.crossTileID]=!0};if(Se){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const $e=A.getSortedSymbolIndexes(this.transform.angle);for(let fn=$e.length-1;fn>=0;--fn){const on=$e[fn];qn(A.symbolInstances.get(on),A.collisionArrays[on])}}else for(let $e=u.symbolInstanceStart;$e<u.symbolInstanceEnd;$e++)qn(A.symbolInstances.get($e),A.collisionArrays[$e]);if(b&&A.bucketInstanceId in this.collisionCircleArrays){const $e=this.collisionCircleArrays[A.bucketInstanceId];a.as($e.invProjMatrix,B),$e.viewportMatrix=this.collisionIndex.getViewportMatrix()}A.justReloaded=!1}markUsedJustification(u,m,b,A){let C;C=A===a.ai.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[a.at(m)];const B=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const j of B)j>=0&&(u.text.placedSymbolArray.get(j).crossTileID=C>=0&&j!==C?0:b.crossTileID)}markUsedOrientation(u,m,b){const A=m===a.ai.horizontal||m===a.ai.horizontalOnly?m:0,C=m===a.ai.vertical?m:0,B=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const j of B)u.text.placedSymbolArray.get(j).placedOrientation=A;b.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=C)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let b=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const A=m?m.symbolFadeChange(u):1,C=m?m.opacities:{},B=m?m.variableOffsets:{},j=m?m.placedOrientations:{};for(const q in this.placements){const K=this.placements[q],et=C[q];et?(this.opacities[q]=new Xt(et,A,K.text,K.icon),b=b||K.text!==et.text.placed||K.icon!==et.icon.placed):(this.opacities[q]=new Xt(null,A,K.text,K.icon,K.skipFade),b=b||K.text||K.icon)}for(const q in C){const K=C[q];if(!this.opacities[q]){const et=new Xt(K,A,!1,!1);et.isHidden()||(this.opacities[q]=et,b=b||K.text.placed||K.icon.placed)}}for(const q in B)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=B[q]);for(const q in j)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=j[q]);if(m&&m.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:u)}updateLayerOpacities(u,m){const b={};for(const A of m){const C=A.getBucket(u);C&&A.latestFeatureIndex&&u.id===C.layerIds[0]&&this.updateBucketOpacities(C,b,A.collisionBoxArray)}}updateBucketOpacities(u,m,b){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const A=u.layers[0],C=A.layout,B=new Xt(null,0,!1,!1,!0),j=C.get("text-allow-overlap"),q=C.get("icon-allow-overlap"),K=A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"),et=C.get("text-rotation-alignment")==="map",it=C.get("text-pitch-alignment")==="map",dt=C.get("icon-text-fit")!=="none",Et=new Xt(null,0,j&&(q||!u.hasIconData()||C.get("icon-optional")),q&&(j||!u.hasTextData()||C.get("text-optional")),!0);!u.collisionArrays&&b&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(b);const Mt=(zt,At,Gt)=>{for(let ue=0;ue<At/4;ue++)zt.opacityVertexArray.emplaceBack(Gt);zt.hasVisibleVertices=zt.hasVisibleVertices||Gt!==Cr};for(let zt=0;zt<u.symbolInstances.length;zt++){const At=u.symbolInstances.get(zt),{numHorizontalGlyphVertices:Gt,numVerticalGlyphVertices:ue,crossTileID:Nt}=At;let Kt=this.opacities[Nt];m[Nt]?Kt=B:Kt||(Kt=Et,this.opacities[Nt]=Kt),m[Nt]=!0;const he=At.numIconVertices>0,me=this.placedOrientations[At.crossTileID],Se=me===a.ai.vertical,Le=me===a.ai.horizontal||me===a.ai.horizontalOnly;if(Gt>0||ue>0){const ke=rr(Kt.text);Mt(u.text,Gt,Se?Cr:ke),Mt(u.text,ue,Le?Cr:ke);const Ne=Kt.text.isHidden();[At.rightJustifiedTextSymbolIndex,At.centerJustifiedTextSymbolIndex,At.leftJustifiedTextSymbolIndex].forEach(($e=>{$e>=0&&(u.text.placedSymbolArray.get($e).hidden=Ne||Se?1:0)})),At.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(At.verticalPlacedTextSymbolIndex).hidden=Ne||Le?1:0);const sn=this.variableOffsets[At.crossTileID];sn&&this.markUsedJustification(u,sn.anchor,At,me);const qn=this.placedOrientations[At.crossTileID];qn&&(this.markUsedJustification(u,"left",At,qn),this.markUsedOrientation(u,qn,At))}if(he){const ke=rr(Kt.icon),Ne=!(dt&&At.verticalPlacedIconSymbolIndex&&Se);At.placedIconSymbolIndex>=0&&(Mt(u.icon,At.numIconVertices,Ne?ke:Cr),u.icon.placedSymbolArray.get(At.placedIconSymbolIndex).hidden=Kt.icon.isHidden()),At.verticalPlacedIconSymbolIndex>=0&&(Mt(u.icon,At.numVerticalIconVertices,Ne?Cr:ke),u.icon.placedSymbolArray.get(At.verticalPlacedIconSymbolIndex).hidden=Kt.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const ke=u.collisionArrays[zt];if(ke){let Ne=new a.P(0,0);if(ke.textBox||ke.verticalTextBox){let qn=!0;if(K){const $e=this.variableOffsets[Nt];$e?(Ne=dn($e.anchor,$e.width,$e.height,$e.textOffset,$e.textBoxScale),et&&Ne._rotate(it?this.transform.angle:-this.transform.angle)):qn=!1}ke.textBox&&_n(u.textCollisionBox.collisionVertexArray,Kt.text.placed,!qn||Se,Ne.x,Ne.y),ke.verticalTextBox&&_n(u.textCollisionBox.collisionVertexArray,Kt.text.placed,!qn||Le,Ne.x,Ne.y)}const sn=!!(!Le&&ke.verticalIconBox);ke.iconBox&&_n(u.iconCollisionBox.collisionVertexArray,Kt.icon.placed,sn,dt?Ne.x:0,dt?Ne.y:0),ke.verticalIconBox&&_n(u.iconCollisionBox.collisionVertexArray,Kt.icon.placed,!sn,dt?Ne.x:0,dt?Ne.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const zt=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=zt.invProjMatrix,u.placementViewportMatrix=zt.viewportMatrix,u.collisionCircleArray=zt.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,m){const b=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*b>u}setStale(){this.stale=!0}}function _n(E,u,m,b,A){E.emplaceBack(u?1:0,m?1:0,b||0,A||0),E.emplaceBack(u?1:0,m?1:0,b||0,A||0),E.emplaceBack(u?1:0,m?1:0,b||0,A||0),E.emplaceBack(u?1:0,m?1:0,b||0,A||0)}const Vn=Math.pow(2,25),gi=Math.pow(2,24),Kn=Math.pow(2,17),Hn=Math.pow(2,16),wr=Math.pow(2,9),Mi=Math.pow(2,8),Ni=Math.pow(2,1);function rr(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;const u=E.placed?1:0,m=Math.floor(127*E.opacity);return m*Vn+u*gi+m*Kn+u*Hn+m*wr+u*Mi+m*Ni+u}const Cr=0;class Tl{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,m,b,A,C){const B=this._bucketParts;for(;this._currentTileIndex<u.length;)if(m.getBucketParts(B,A,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort(((j,q)=>j.sortKey-q.sortKey)));this._currentPartIndex<B.length;)if(m.placeLayerBucketPart(B[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,C())return!0;return!1}}class Ji{constructor(u,m,b,A,C,B,j,q){this.placement=new Je(u,m,B,j,q),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=A,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(u,m,b){const A=a.h.now(),C=()=>!this._forceFullPlacement&&a.h.now()-A>2;for(;this._currentPlacementIndex>=0;){const B=m[u[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=j)&&(!B.maxzoom||B.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new Tl(B)),this._inProgressLayer.continuePlacement(b[B.source],this.placement,this._showCollisionBoxes,B,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const Al=512/a.N/2;class Qh{constructor(u,m,b){this.tileID=u,this.bucketInstanceId=b,this._symbolsByKey={};const A=new Map;for(let C=0;C<m.length;C++){const B=m.get(C),j=B.key,q=A.get(j);q?q.push(B):A.set(j,[B])}for(const[C,B]of A){const j={positions:B.map((q=>({x:Math.floor(q.anchorX*Al),y:Math.floor(q.anchorY*Al)}))),crossTileIDs:B.map((q=>q.crossTileID))};if(j.positions.length>128){const q=new a.av(j.positions.length,16,Uint16Array);for(const{x:K,y:et}of j.positions)q.add(K,et);q.finish(),delete j.positions,j.index=q}this._symbolsByKey[C]=j}}getScaledCoordinates(u,m){const{x:b,y:A,z:C}=this.tileID.canonical,{x:B,y:j,z:q}=m.canonical,K=Al/Math.pow(2,q-C),et=(j*a.N+u.anchorY)*K,it=A*a.N*Al;return{x:Math.floor((B*a.N+u.anchorX)*K-b*a.N*Al),y:Math.floor(et-it)}}findMatches(u,m,b){const A=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z);for(let C=0;C<u.length;C++){const B=u.get(C);if(B.crossTileID)continue;const j=this._symbolsByKey[B.key];if(!j)continue;const q=this.getScaledCoordinates(B,m);if(j.index){const K=j.index.range(q.x-A,q.y-A,q.x+A,q.y+A).sort();for(const et of K){const it=j.crossTileIDs[et];if(!b[it]){b[it]=!0,B.crossTileID=it;break}}}else if(j.positions)for(let K=0;K<j.positions.length;K++){const et=j.positions[K],it=j.crossTileIDs[K];if(Math.abs(et.x-q.x)<=A&&Math.abs(et.y-q.y)<=A&&!b[it]){b[it]=!0,B.crossTileID=it;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:u})=>u))}}class Qn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ks{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const m=Math.round((u-this.lng)/360);if(m!==0)for(const b in this.indexes){const A=this.indexes[b],C={};for(const B in A){const j=A[B];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+m),C[j.tileID.key]=j}this.indexes[b]=C}this.lng=u}addBucket(u,m,b){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let C=0;C<m.symbolInstances.length;C++)m.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const A=this.usedCrossTileIDs[u.overscaledZ];for(const C in this.indexes){const B=this.indexes[C];if(Number(C)>u.overscaledZ)for(const j in B){const q=B[j];q.tileID.isChildOf(u)&&q.findMatches(m.symbolInstances,u,A)}else{const j=B[u.scaledTo(Number(C)).key];j&&j.findMatches(m.symbolInstances,u,A)}}for(let C=0;C<m.symbolInstances.length;C++){const B=m.symbolInstances.get(C);B.crossTileID||(B.crossTileID=b.generate(),A[B.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Qh(u,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(u,m){for(const b of m.getCrossTileIDsLists())for(const A of b)delete this.usedCrossTileIDs[u][A]}removeStaleBuckets(u){let m=!1;for(const b in this.indexes){const A=this.indexes[b];for(const C in A)u[A[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,A[C]),delete A[C],m=!0)}return m}}class nl{constructor(){this.layerIndexes={},this.crossTileIDs=new Qn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,m,b){let A=this.layerIndexes[u.id];A===void 0&&(A=this.layerIndexes[u.id]=new Ks);let C=!1;const B={};A.handleWrapJump(b);for(const j of m){const q=j.getBucket(u);q&&u.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),A.addBucket(j.tileID,q,this.crossTileIDs)&&(C=!0),B[q.bucketInstanceId]=!0)}return A.removeStaleBuckets(B)&&(C=!0),C}pruneUnusedLayers(u){const m={};u.forEach((b=>{m[b]=!0}));for(const b in this.layerIndexes)m[b]||delete this.layerIndexes[b]}}const Vr=(E,u)=>a.x(E,u&&u.filter((m=>m.identifier!=="source.canvas"))),wa=a.F(a.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),zu=a.F(a.ax,["setCenter","setZoom","setBearing","setPitch"]),kn=a.aw();class Rn extends a.E{constructor(u,m={}){super(),this.map=u,this.dispatcher=new pt(Ur(),this,u._getMapId()),this.imageManager=new Pt,this.imageManager.setEventedParent(this),this.glyphManager=new kt(u._requestManager,m.localIdeographFontFamily),this.lineAtlas=new Vt(256,512),this.crossTileSymbolIndex=new nl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.az());const b=this;this._rtlTextPluginCallback=Rn.registerForPluginStateChange((A=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:A.pluginStatus,pluginURL:A.pluginURL},((C,B)=>{if(a.aA(C),B&&B.every((j=>j)))for(const j in b.sourceCaches){const q=b.sourceCaches[j].getSource().type;q!=="vector"&&q!=="geojson"||b.sourceCaches[j].reload()}}))})),this.on("data",(A=>{if(A.dataType!=="source"||A.sourceDataType!=="metadata")return;const C=this.sourceCaches[A.sourceId];if(!C)return;const B=C.getSource();if(B&&B.vectorLayerIds)for(const j in this._layers){const q=this._layers[j];q.source===B.id&&this._validateLayer(q)}}))}loadURL(u,m={},b){this.fire(new a.k("dataloading",{dataType:"style"})),m.validate=typeof m.validate!="boolean"||m.validate;const A=this.map._requestManager.transformRequest(u,Q.Style);this._request=a.f(A,((C,B)=>{this._request=null,C?this.fire(new a.j(C)):B&&this._load(B,m,b)}))}loadJSON(u,m={},b){this.fire(new a.k("dataloading",{dataType:"style"})),this._request=a.h.frame((()=>{this._request=null,m.validate=m.validate!==!1,this._load(u,m,b)}))}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(kn,{validate:!1})}_load(u,m,b){var A;const C=m.transformStyle?m.transformStyle(b,u):u;if(!m.validate||!Vr(this,a.y(C))){this._loaded=!0,this.stylesheet=C;for(const B in C.sources)this.addSource(B,C.sources[B],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs),this._createLayers(),this.light=new jt(this.stylesheet.light),this.map.setTerrain((A=this.stylesheet.terrain)!==null&&A!==void 0?A:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const u=a.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",u),this._order=u.map((m=>m.id)),this._layers={},this._serializedLayers=null;for(const m of u){const b=a.aC(m);b.setEventedParent(this,{layer:{id:m.id}}),this._layers[m.id]=b}}_loadSprite(u,m=!1,b=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=(function(A,C,B,j){const q=rt(A),K=q.length,et=B>1?"@2x":"",it={},dt={},Et={};for(const{id:Mt,url:zt}of q){const At=C.transformRequest(C.normalizeSpriteURL(zt,et,".json"),Q.SpriteJSON),Gt=`${Mt}_${At.url}`;it[Gt]=a.f(At,((Kt,he)=>{delete it[Gt],dt[Mt]=he,ut(j,dt,Et,Kt,K)}));const ue=C.transformRequest(C.normalizeSpriteURL(zt,et,".png"),Q.SpriteImage),Nt=`${Mt}_${ue.url}`;it[Nt]=H.getImage(ue,((Kt,he)=>{delete it[Nt],Et[Mt]=he,ut(j,dt,Et,Kt,K)}))}return{cancel(){for(const Mt of Object.values(it))Mt.cancel()}}})(u,this.map._requestManager,this.map.getPixelRatio(),((A,C)=>{if(this._spriteRequest=null,A)this.fire(new a.j(A));else if(C)for(const B in C){this._spritesImagesIds[B]=[];const j=this._spritesImagesIds[B]?this._spritesImagesIds[B].filter((q=>!(q in C))):[];for(const q of j)this.imageManager.removeImage(q),this._changedImages[q]=!0;for(const q in C[B]){const K=B==="default"?q:`${B}:${q}`;this._spritesImagesIds[B].push(K),K in this.imageManager.images?this.imageManager.updateImage(K,C[B][q],!1):this.imageManager.addImage(K,C[B][q]),m&&(this._changedImages[K]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),m&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),b&&b(A)}))}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(u){const m=this.sourceCaches[u.source];if(!m)return;const b=u.sourceLayer;if(!b)return;const A=m.getSource();(A.type==="geojson"||A.vectorLayerIds&&A.vectorLayerIds.indexOf(b)===-1)&&this.fire(new a.j(new Error(`Source layer "${b}" does not exist on source "${A.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u){const m=this._serializedAllLayers();if(!u||u.length===0)return Object.values(m);const b=[];for(const A of u)m[A]&&b.push(m[A]);return b}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const m=Object.keys(this._layers);for(const b of m){const A=this._layers[b];A.type!=="custom"&&(u[b]=A.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const m=this._changed;if(this._changed){const A=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(A.length||C.length)&&this._updateWorkerLayers(A,C);for(const B in this._updatedSources){const j=this._updatedSources[B];if(j==="reload")this._reloadSource(B);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(B)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const B in this._updatedPaintProps)this._layers[B].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const b={};for(const A in this.sourceCaches){const C=this.sourceCaches[A];b[A]=C.used,C.used=!1}for(const A of this._order){const C=this._layers[A];C.recalculate(u,this._availableImages),!C.isHidden(u.zoom)&&C.source&&(this.sourceCaches[C.source].used=!0)}for(const A in b){const C=this.sourceCaches[A];b[A]!==C.used&&C.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:A}))}this.light.recalculate(u),this.z=u.zoom,m&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const m in this.sourceCaches)this.sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(u),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,m={}){this._checkLoaded();const b=this.serialize();if(u=m.transformStyle?m.transformStyle(b,u):u,Vr(this,a.y(u)))return!1;(u=a.aD(u)).layers=a.aB(u.layers);const A=a.aE(b,u).filter((B=>!(B.command in zu)));if(A.length===0)return!1;const C=A.filter((B=>!(B.command in wa)));if(C.length>0)throw new Error(`Unimplemented: ${C.map((B=>B.command)).join(", ")}.`);for(const B of A)B.command!=="setTransition"&&this[B.command].apply(this,B.args);return this.stylesheet=u,this._serializedLayers=null,!0}addImage(u,m){if(this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,m),this._afterImageUpdated(u)}updateImage(u,m){this.imageManager.updateImage(u,m)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,m,b={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(a.y.source,`sources.${u}`,m,null,b))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const A=this.sourceCaches[u]=new Di(u,m,this.dispatcher);A.style=this,A.setEventedParent(this,(()=>({isSourceLoaded:A.loaded(),source:A.serialize(),sourceId:u}))),A.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===u)return this.fire(new a.j(new Error(`Source "${u}" cannot be removed while layer "${b}" is using it.`)));const m=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],m.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),m.setEventedParent(null),m.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,m){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const b=this.sourceCaches[u].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(m),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,m,b={}){this._checkLoaded();const A=u.id;if(this.getLayer(A))return void this.fire(new a.j(new Error(`Layer "${A}" already exists on this map.`)));let C;if(u.type==="custom"){if(Vr(this,a.aF(u)))return;C=a.aC(u)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(A,u.source),u=a.aD(u),u=a.e(u,{source:A})),this._validate(a.y.layer,`layers.${A}`,u,{arrayIndex:-1},b))return;C=a.aC(u),this._validateLayer(C),C.setEventedParent(this,{layer:{id:A}})}const B=m?this._order.indexOf(m):this._order.length;if(m&&B===-1)this.fire(new a.j(new Error(`Cannot add layer "${A}" before non-existing layer "${m}".`)));else{if(this._order.splice(B,0,A),this._layerOrderChanged=!0,this._layers[A]=C,this._removedLayers[A]&&C.source&&C.type!=="custom"){const j=this._removedLayers[A];delete this._removedLayers[A],j.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map)}}moveLayer(u,m){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new a.j(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===m)return;const b=this._order.indexOf(u);this._order.splice(b,1);const A=m?this._order.indexOf(m):this._order.length;m&&A===-1?this.fire(new a.j(new Error(`Cannot move layer "${u}" before non-existing layer "${m}".`))):(this._order.splice(A,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const m=this._layers[u];if(!m)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${u}".`)));m.setEventedParent(null);const b=this._order.indexOf(u);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=m,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],m.onRemove&&m.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,m,b){this._checkLoaded();const A=this.getLayer(u);A?A.minzoom===m&&A.maxzoom===b||(m!=null&&(A.minzoom=m),b!=null&&(A.maxzoom=b),this._updateLayer(A)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,m,b={}){this._checkLoaded();const A=this.getLayer(u);if(A){if(!a.aG(A.filter,m))return m==null?(A.filter=void 0,void this._updateLayer(A)):void(this._validate(a.y.filter,`layers.${A.id}.filter`,m,null,b)||(A.filter=a.aD(m),this._updateLayer(A)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return a.aD(this.getLayer(u).filter)}setLayoutProperty(u,m,b,A={}){this._checkLoaded();const C=this.getLayer(u);C?a.aG(C.getLayoutProperty(m),b)||(C.setLayoutProperty(m,b,A),this._updateLayer(C)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,m){const b=this.getLayer(u);if(b)return b.getLayoutProperty(m);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,m,b,A={}){this._checkLoaded();const C=this.getLayer(u);C?a.aG(C.getPaintProperty(m),b)||(C.setPaintProperty(m,b,A)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,m){return this.getLayer(u).getPaintProperty(m)}setFeatureState(u,m){this._checkLoaded();const b=u.source,A=u.sourceLayer,C=this.sourceCaches[b];if(C===void 0)return void this.fire(new a.j(new Error(`The source '${b}' does not exist in the map's style.`)));const B=C.getSource().type;B==="geojson"&&A?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):B!=="vector"||A?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),C.setFeatureState(A,u.id,m)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,m){this._checkLoaded();const b=u.source,A=this.sourceCaches[b];if(A===void 0)return void this.fire(new a.j(new Error(`The source '${b}' does not exist in the map's style.`)));const C=A.getSource().type,B=C==="vector"?u.sourceLayer:void 0;C!=="vector"||B?m&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):A.removeFeatureState(B,u.id,m):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const m=u.source,b=u.sourceLayer,A=this.sourceCaches[m];if(A!==void 0)return A.getSource().type!=="vector"||b?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),A.getFeatureState(b,u.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=a.aH(this.sourceCaches,(C=>C.serialize())),m=this._serializeByIds(this._order),b=this.map.getTerrain()||void 0,A=this.stylesheet;return a.aI({version:A.version,name:A.name,metadata:A.metadata,light:A.light,center:A.center,zoom:A.zoom,bearing:A.bearing,pitch:A.pitch,sprite:A.sprite,glyphs:A.glyphs,transition:A.transition,sources:u,layers:m,terrain:b},(C=>C!==void 0))}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const m=B=>this._layers[B].type==="fill-extrusion",b={},A=[];for(let B=this._order.length-1;B>=0;B--){const j=this._order[B];if(m(j)){b[j]=B;for(const q of u){const K=q[j];if(K)for(const et of K)A.push(et)}}}A.sort(((B,j)=>j.intersectionZ-B.intersectionZ));const C=[];for(let B=this._order.length-1;B>=0;B--){const j=this._order[B];if(m(j))for(let q=A.length-1;q>=0;q--){const K=A[q].feature;if(b[K.layer.id]<B)break;C.push(K),A.pop()}else for(const q of u){const K=q[j];if(K)for(const et of K)C.push(et.feature)}}return C}queryRenderedFeatures(u,m,b){m&&m.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",m.filter,null,m);const A={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const j of m.layers){const q=this._layers[j];if(!q)return this.fire(new a.j(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];A[q.source]=!0}}const C=[];m.availableImages=this._availableImages;const B=this._serializedAllLayers();for(const j in this.sourceCaches)m.layers&&!A[j]||C.push(tn(this.sourceCaches[j],this._layers,B,u,m,b));return this.placement&&C.push((function(j,q,K,et,it,dt,Et){const Mt={},zt=dt.queryRenderedSymbols(et),At=[];for(const Gt of Object.keys(zt).map(Number))At.push(Et[Gt]);At.sort(Tn);for(const Gt of At){const ue=Gt.featureIndex.lookupSymbolFeatures(zt[Gt.bucketInstanceId],q,Gt.bucketIndex,Gt.sourceLayerIndex,it.filter,it.layers,it.availableImages,j);for(const Nt in ue){const Kt=Mt[Nt]=Mt[Nt]||[],he=ue[Nt];he.sort(((me,Se)=>{const Le=Gt.featureSortOrder;if(Le){const ke=Le.indexOf(me.featureIndex);return Le.indexOf(Se.featureIndex)-ke}return Se.featureIndex-me.featureIndex}));for(const me of he)Kt.push(me)}}for(const Gt in Mt)Mt[Gt].forEach((ue=>{const Nt=ue.feature,Kt=K[j[Gt].source].getFeatureState(Nt.layer["source-layer"],Nt.id);Nt.source=Nt.layer.source,Nt.layer["source-layer"]&&(Nt.sourceLayer=Nt.layer["source-layer"]),Nt.state=Kt}));return Mt})(this._layers,B,this.sourceCaches,u,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(u,m){m&&m.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",m.filter,null,m);const b=this.sourceCaches[u];return b?(function(A,C){const B=A.getRenderableIds().map((K=>A.getTileByID(K))),j=[],q={};for(let K=0;K<B.length;K++){const et=B[K],it=et.tileID.canonical.key;q[it]||(q[it]=!0,et.querySourceFeatures(j,C))}return j})(b,m):[]}addSourceType(u,m,b){return je(u)?b(new Error(`A source type called "${u}" already exists.`)):(((A,C)=>{rn[A]=C})(u,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:m.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(u,m={}){this._checkLoaded();const b=this.light.getLight();let A=!1;for(const B in u)if(!a.aG(u[B],b[B])){A=!0;break}if(!A)return;const C={now:a.h.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,m),this.light.updateTransitions(C)}_validate(u,m,b,A,C={}){return(!C||C.validate!==!1)&&Vr(this,u.call(a.y,a.e({key:m,style:this.serialize(),value:b,styleSpec:a.v},A)))}_remove(u=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const m in this._layers)this._layers[m].setEventedParent(null);for(const m in this.sourceCaches){const b=this.sourceCaches[m];b.setEventedParent(null),b.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(u)}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const m in this.sourceCaches)this.sourceCaches[m].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,m,b,A,C=!1){let B=!1,j=!1;const q={};for(const K of this._order){const et=this._layers[K];if(et.type!=="symbol")continue;if(!q[et.source]){const dt=this.sourceCaches[et.source];q[et.source]=dt.getRenderableIds(!0).map((Et=>dt.getTileByID(Et))).sort(((Et,Mt)=>Mt.tileID.overscaledZ-Et.tileID.overscaledZ||(Et.tileID.isLessThan(Mt.tileID)?-1:1)))}const it=this.crossTileSymbolIndex.addLayer(et,q[et.source],u.center.lng);B=B||it}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((C=C||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.h.now(),u.zoom))&&(this.pauseablePlacement=new Ji(u,this.map.terrain,this._order,C,m,b,A,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.h.now()),j=!0),B&&this.pauseablePlacement.placement.setStale()),j||B)for(const K of this._order){const et=this._layers[K];et.type==="symbol"&&this.placement.updateLayerOpacities(et,q[et.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.h.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,m,b){this.imageManager.getImages(m.icons,b),this._updateTilesForChangedImages();const A=this.sourceCaches[m.source];A&&A.setDependencies(m.tileID.key,m.type,m.icons)}getGlyphs(u,m,b){this.glyphManager.getGlyphs(m.stacks,b);const A=this.sourceCaches[m.source];A&&A.setDependencies(m.tileID.key,m.type,[""])}getResource(u,m,b){return a.m(m,b)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,m={}){this._checkLoaded(),u&&this._validate(a.y.glyphs,"glyphs",u,null,m)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}addSprite(u,m,b={},A){this._checkLoaded();const C=[{id:u,url:m}],B=[...rt(this.stylesheet.sprite),...C];this._validate(a.y.sprite,"sprite",B,null,b)||(this.stylesheet.sprite=B,this._loadSprite(C,!0,A))}removeSprite(u){this._checkLoaded();const m=rt(this.stylesheet.sprite);if(m.find((b=>b.id===u))){if(this._spritesImagesIds[u])for(const b of this._spritesImagesIds[u])this.imageManager.removeImage(b),this._changedImages[b]=!0;m.splice(m.findIndex((b=>b.id===u)),1),this.stylesheet.sprite=m.length>0?m:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return rt(this.stylesheet.sprite)}setSprite(u,m={},b){this._checkLoaded(),u&&this._validate(a.y.sprite,"sprite",u,null,m)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,b):(this._unloadSprite(),b&&b(null)))}}Rn.registerForPluginStateChange=a.aK;var Sa=a.Q([{name:"a_pos",type:"Int16",components:2}]),ar="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const yi={prelude:ni(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:ni(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ni(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ni(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ni("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ni(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:ni(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ni("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ni("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ni("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ni(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:ni(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:ni(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:ni(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ni(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ni(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ni(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ni(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ni(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ni(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ni(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ni(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ni(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ni(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ni(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ni(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ni("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ar),terrainDepth:ni("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ar),terrainCoords:ni("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ar)};function ni(E,u){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=u.match(/attribute ([\w]+) ([\w]+)/g),A=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=C?C.concat(A):A,j={};return{fragmentSource:E=E.replace(m,((q,K,et,it,dt)=>(j[dt]=!0,K==="define"?`
#ifndef HAS_UNIFORM_u_${dt}
varying ${et} ${it} ${dt};
#else
uniform ${et} ${it} u_${dt};
#endif
`:`
#ifdef HAS_UNIFORM_u_${dt}
    ${et} ${it} ${dt} = u_${dt};
#endif
`))),vertexSource:u=u.replace(m,((q,K,et,it,dt)=>{const Et=it==="float"?"vec2":"vec4",Mt=dt.match(/color/)?"color":Et;return j[dt]?K==="define"?`
#ifndef HAS_UNIFORM_u_${dt}
uniform lowp float u_${dt}_t;
attribute ${et} ${Et} a_${dt};
varying ${et} ${it} ${dt};
#else
uniform ${et} ${it} u_${dt};
#endif
`:Mt==="vec4"?`
#ifndef HAS_UNIFORM_u_${dt}
    ${dt} = a_${dt};
#else
    ${et} ${it} ${dt} = u_${dt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${dt}
    ${dt} = unpack_mix_${Mt}(a_${dt}, u_${dt}_t);
#else
    ${et} ${it} ${dt} = u_${dt};
#endif
`:K==="define"?`
#ifndef HAS_UNIFORM_u_${dt}
uniform lowp float u_${dt}_t;
attribute ${et} ${Et} a_${dt};
#else
uniform ${et} ${it} u_${dt};
#endif
`:Mt==="vec4"?`
#ifndef HAS_UNIFORM_u_${dt}
    ${et} ${it} ${dt} = a_${dt};
#else
    ${et} ${it} ${dt} = u_${dt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${dt}
    ${et} ${it} ${dt} = unpack_mix_${Mt}(a_${dt}, u_${dt}_t);
#else
    ${et} ${it} ${dt} = u_${dt};
#endif
`})),staticAttributes:b,staticUniforms:B}}class An{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,m,b,A,C,B,j,q,K){this.context=u;let et=this.boundPaintVertexBuffers.length!==A.length;for(let it=0;!et&&it<A.length;it++)this.boundPaintVertexBuffers[it]!==A[it]&&(et=!0);!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==b||et||this.boundIndexBuffer!==C||this.boundVertexOffset!==B||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==q||this.boundDynamicVertexBuffer3!==K?this.freshBind(m,b,A,C,B,j,q,K):(u.bindVertexArray.set(this.vao),j&&j.bind(),C&&C.dynamicDraw&&C.bind(),q&&q.bind(),K&&K.bind())}freshBind(u,m,b,A,C,B,j,q){const K=u.numAttributes,et=this.context,it=et.gl;this.vao&&this.destroy(),this.vao=et.createVertexArray(),et.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=A,this.boundVertexOffset=C,this.boundDynamicVertexBuffer=B,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=q,m.enableAttributes(it,u);for(const dt of b)dt.enableAttributes(it,u);B&&B.enableAttributes(it,u),j&&j.enableAttributes(it,u),q&&q.enableAttributes(it,u),m.bind(),m.setVertexAttribPointers(it,u,C);for(const dt of b)dt.bind(),dt.setVertexAttribPointers(it,u,C);B&&(B.bind(),B.setVertexAttribPointers(it,u,C)),A&&A.bind(),j&&(j.bind(),j.setVertexAttribPointers(it,u,C)),q&&(q.bind(),q.setVertexAttribPointers(it,u,C)),et.currentNumAttributes=K}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function zn(E){const u=[];for(let m=0;m<E.length;m++){if(E[m]===null)continue;const b=E[m].split(" ");u.push(b.pop())}return u}class ko{constructor(u,m,b,A,C,B){const j=u.gl;this.program=j.createProgram();const q=zn(m.staticAttributes),K=b?b.getBinderAttributes():[],et=q.concat(K),it=yi.prelude.staticUniforms?zn(yi.prelude.staticUniforms):[],dt=m.staticUniforms?zn(m.staticUniforms):[],Et=b?b.getBinderUniforms():[],Mt=it.concat(dt).concat(Et),zt=[];for(const me of Mt)zt.indexOf(me)<0&&zt.push(me);const At=b?b.defines():[];C&&At.push("#define OVERDRAW_INSPECTOR;"),B&&At.push("#define TERRAIN3D;");const Gt=At.concat(yi.prelude.fragmentSource,m.fragmentSource).join(`
`),ue=At.concat(yi.prelude.vertexSource,m.vertexSource).join(`
`),Nt=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Nt,Gt),j.compileShader(Nt),!j.getShaderParameter(Nt,j.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${j.getShaderInfoLog(Nt)}`);j.attachShader(this.program,Nt);const Kt=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Kt,ue),j.compileShader(Kt),!j.getShaderParameter(Kt,j.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${j.getShaderInfoLog(Kt)}`);j.attachShader(this.program,Kt),this.attributes={};const he={};this.numAttributes=et.length;for(let me=0;me<this.numAttributes;me++)et[me]&&(j.bindAttribLocation(this.program,me,et[me]),this.attributes[et[me]]=me);if(j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw new Error(`Program failed to link: ${j.getProgramInfoLog(this.program)}`);j.deleteShader(Kt),j.deleteShader(Nt);for(let me=0;me<zt.length;me++){const Se=zt[me];if(Se&&!he[Se]){const Le=j.getUniformLocation(this.program,Se);Le&&(he[Se]=Le)}}this.fixedUniforms=A(u,he),this.terrainUniforms=((me,Se)=>({u_depth:new a.aL(me,Se.u_depth),u_terrain:new a.aL(me,Se.u_terrain),u_terrain_dim:new a.aM(me,Se.u_terrain_dim),u_terrain_matrix:new a.aN(me,Se.u_terrain_matrix),u_terrain_unpack:new a.aO(me,Se.u_terrain_unpack),u_terrain_exaggeration:new a.aM(me,Se.u_terrain_exaggeration)}))(u,he),this.binderUniforms=b?b.getUniforms(u,he):[]}draw(u,m,b,A,C,B,j,q,K,et,it,dt,Et,Mt,zt,At,Gt,ue){const Nt=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(b),u.setStencilMode(A),u.setColorMode(C),u.setCullFace(B),q){u.activeTexture.set(Nt.TEXTURE2),Nt.bindTexture(Nt.TEXTURE_2D,q.depthTexture),u.activeTexture.set(Nt.TEXTURE3),Nt.bindTexture(Nt.TEXTURE_2D,q.texture);for(const he in this.terrainUniforms)this.terrainUniforms[he].set(q[he])}for(const he in this.fixedUniforms)this.fixedUniforms[he].set(j[he]);zt&&zt.setUniforms(u,this.binderUniforms,Et,{zoom:Mt});let Kt=0;switch(m){case Nt.LINES:Kt=2;break;case Nt.TRIANGLES:Kt=3;break;case Nt.LINE_STRIP:Kt=1}for(const he of dt.get()){const me=he.vaos||(he.vaos={});(me[K]||(me[K]=new An)).bind(u,this,et,zt?zt.getPaintVertexBuffers():[],it,he.vertexOffset,At,Gt,ue),Nt.drawElements(m,he.primitiveLength*Kt,Nt.UNSIGNED_SHORT,he.primitiveOffset*Kt*2)}}}function Ta(E,u,m){const b=1/Zt(m,1,u.transform.tileZoom),A=Math.pow(2,m.tileID.overscaledZ),C=m.tileSize*Math.pow(2,u.transform.tileZoom)/A,B=C*(m.tileID.canonical.x+m.tileID.wrap*A),j=C*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[b,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[B>>16,j>>16],u_pixel_coord_lower:[65535&B,65535&j]}}const qi=(E,u,m,b)=>{const A=u.style.light,C=A.properties.get("position"),B=[C.x,C.y,C.z],j=(function(){var K=new a.A(9);return a.A!=Float32Array&&(K[1]=0,K[2]=0,K[3]=0,K[5]=0,K[6]=0,K[7]=0),K[0]=1,K[4]=1,K[8]=1,K})();A.properties.get("anchor")==="viewport"&&(function(K,et){var it=Math.sin(et),dt=Math.cos(et);K[0]=dt,K[1]=it,K[2]=0,K[3]=-it,K[4]=dt,K[5]=0,K[6]=0,K[7]=0,K[8]=1})(j,-u.transform.angle),(function(K,et,it){var dt=et[0],Et=et[1],Mt=et[2];K[0]=dt*it[0]+Et*it[3]+Mt*it[6],K[1]=dt*it[1]+Et*it[4]+Mt*it[7],K[2]=dt*it[2]+Et*it[5]+Mt*it[8]})(B,B,j);const q=A.properties.get("color");return{u_matrix:E,u_lightpos:B,u_lightintensity:A.properties.get("intensity"),u_lightcolor:[q.r,q.g,q.b],u_vertical_gradient:+m,u_opacity:b}},Qs=(E,u,m,b,A,C,B)=>a.e(qi(E,u,m,b),Ta(C,u,B),{u_height_factor:-Math.pow(2,A.overscaledZ)/B.tileSize/8}),eu=E=>({u_matrix:E}),Cs=(E,u,m,b)=>a.e(eu(E),Ta(m,u,b)),Ci=(E,u)=>({u_matrix:E,u_world:u}),Ps=(E,u,m,b,A)=>a.e(Cs(E,u,m,b),{u_world:A}),Ka=(E,u,m,b)=>{const A=E.transform;let C,B;if(b.paint.get("circle-pitch-alignment")==="map"){const j=Zt(m,1,A.zoom);C=!0,B=[j,j]}else C=!1,B=A.pixelsToGLUnits;return{u_camera_to_center_distance:A.cameraToCenterDistance,u_scale_with_map:+(b.paint.get("circle-pitch-scale")==="map"),u_matrix:E.translatePosMatrix(u.posMatrix,m,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:B}},ms=(E,u,m)=>{const b=Zt(m,1,u.zoom),A=Math.pow(2,u.zoom-m.tileID.overscaledZ),C=m.tileID.overscaleFactor();return{u_matrix:E,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[u.pixelsToGLUnits[0]/(b*A),u.pixelsToGLUnits[1]/(b*A)],u_overscale_factor:C}},Ml=(E,u,m=1)=>({u_matrix:E,u_color:u,u_overlay:0,u_overlay_scale:m}),El=E=>({u_matrix:E}),gc=(E,u,m,b)=>({u_matrix:E,u_extrude_scale:Zt(u,1,m),u_intensity:b});function Cl(E,u){const m=Math.pow(2,u.canonical.z),b=u.canonical.y;return[new a.U(0,b/m).toLngLat().lat,new a.U(0,(b+1)/m).toLngLat().lat]}const nu=(E,u,m,b)=>{const A=E.transform;return{u_matrix:il(E,u,m,b),u_ratio:1/Zt(u,1,A.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]]}},yc=(E,u,m,b,A)=>a.e(nu(E,u,m,A),{u_image:0,u_image_height:b}),iu=(E,u,m,b,A)=>{const C=E.transform,B=Lu(u,C);return{u_matrix:il(E,u,m,A),u_texsize:u.imageAtlasTexture.size,u_ratio:1/Zt(u,1,C.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[B,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},Qa=(E,u,m,b,A,C)=>{const B=E.lineAtlas,j=Lu(u,E.transform),q=m.layout.get("line-cap")==="round",K=B.getDash(b.from,q),et=B.getDash(b.to,q),it=K.width*A.fromScale,dt=et.width*A.toScale;return a.e(nu(E,u,m,C),{u_patternscale_a:[j/it,-K.height/2],u_patternscale_b:[j/dt,-et.height/2],u_sdfgamma:B.width/(256*Math.min(it,dt)*E.pixelRatio)/2,u_image:0,u_tex_y_a:K.y,u_tex_y_b:et.y,u_mix:A.t})};function Lu(E,u){return 1/Zt(E,1,u.tileZoom)}function il(E,u,m,b){return E.translatePosMatrix(b?b.posMatrix:u.tileID.posMatrix,u,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}const Pl=(E,u,m,b,A)=>{return{u_matrix:E,u_tl_parent:u,u_scale_parent:m,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*A.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:A.paint.get("raster-brightness-min"),u_brightness_high:A.paint.get("raster-brightness-max"),u_saturation_factor:(B=A.paint.get("raster-saturation"),B>0?1-1/(1.001-B):-B),u_contrast_factor:(C=A.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:Mn(A.paint.get("raster-hue-rotate"))};var C,B};function Mn(E){E*=Math.PI/180;const u=Math.sin(E),m=Math.cos(E);return[(2*m+1)/3,(-Math.sqrt(3)*u-m+1)/3,(Math.sqrt(3)*u-m+1)/3]}const Ja=(E,u,m,b,A,C,B,j,q,K)=>{const et=A.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:et.cameraToCenterDistance,u_pitch:et.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:et.width/et.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:B,u_coord_matrix:j,u_is_text:+q,u_pitch_with_map:+b,u_texsize:K,u_texture:0}},_i=(E,u,m,b,A,C,B,j,q,K,et)=>{const it=A.transform;return a.e(Ja(E,u,m,b,A,C,B,j,q,K),{u_gamma_scale:b?Math.cos(it._pitch)*it.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:1})},Oo=(E,u,m,b,A,C,B,j,q,K)=>a.e(_i(E,u,m,b,A,C,B,j,!0,q),{u_texsize_icon:K,u_texture_icon:1}),Js=(E,u,m)=>({u_matrix:E,u_opacity:u,u_color:m}),sr=(E,u,m,b,A,C)=>a.e((function(B,j,q,K){const et=q.imageManager.getPattern(B.from.toString()),it=q.imageManager.getPattern(B.to.toString()),{width:dt,height:Et}=q.imageManager.getPixelSize(),Mt=Math.pow(2,K.tileID.overscaledZ),zt=K.tileSize*Math.pow(2,q.transform.tileZoom)/Mt,At=zt*(K.tileID.canonical.x+K.tileID.wrap*Mt),Gt=zt*K.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:et.tl,u_pattern_br_a:et.br,u_pattern_tl_b:it.tl,u_pattern_br_b:it.br,u_texsize:[dt,Et],u_mix:j.t,u_pattern_size_a:et.displaySize,u_pattern_size_b:it.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/Zt(K,1,q.transform.tileZoom),u_pixel_coord_upper:[At>>16,Gt>>16],u_pixel_coord_lower:[65535&At,65535&Gt]}})(b,C,m,A),{u_matrix:E,u_opacity:u}),rl={fillExtrusion:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_lightpos:new a.aP(E,u.u_lightpos),u_lightintensity:new a.aM(E,u.u_lightintensity),u_lightcolor:new a.aP(E,u.u_lightcolor),u_vertical_gradient:new a.aM(E,u.u_vertical_gradient),u_opacity:new a.aM(E,u.u_opacity)}),fillExtrusionPattern:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_lightpos:new a.aP(E,u.u_lightpos),u_lightintensity:new a.aM(E,u.u_lightintensity),u_lightcolor:new a.aP(E,u.u_lightcolor),u_vertical_gradient:new a.aM(E,u.u_vertical_gradient),u_height_factor:new a.aM(E,u.u_height_factor),u_image:new a.aL(E,u.u_image),u_texsize:new a.aQ(E,u.u_texsize),u_pixel_coord_upper:new a.aQ(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(E,u.u_pixel_coord_lower),u_scale:new a.aP(E,u.u_scale),u_fade:new a.aM(E,u.u_fade),u_opacity:new a.aM(E,u.u_opacity)}),fill:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix)}),fillPattern:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_image:new a.aL(E,u.u_image),u_texsize:new a.aQ(E,u.u_texsize),u_pixel_coord_upper:new a.aQ(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(E,u.u_pixel_coord_lower),u_scale:new a.aP(E,u.u_scale),u_fade:new a.aM(E,u.u_fade)}),fillOutline:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_world:new a.aQ(E,u.u_world)}),fillOutlinePattern:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_world:new a.aQ(E,u.u_world),u_image:new a.aL(E,u.u_image),u_texsize:new a.aQ(E,u.u_texsize),u_pixel_coord_upper:new a.aQ(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(E,u.u_pixel_coord_lower),u_scale:new a.aP(E,u.u_scale),u_fade:new a.aM(E,u.u_fade)}),circle:(E,u)=>({u_camera_to_center_distance:new a.aM(E,u.u_camera_to_center_distance),u_scale_with_map:new a.aL(E,u.u_scale_with_map),u_pitch_with_map:new a.aL(E,u.u_pitch_with_map),u_extrude_scale:new a.aQ(E,u.u_extrude_scale),u_device_pixel_ratio:new a.aM(E,u.u_device_pixel_ratio),u_matrix:new a.aN(E,u.u_matrix)}),collisionBox:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_camera_to_center_distance:new a.aM(E,u.u_camera_to_center_distance),u_pixels_to_tile_units:new a.aM(E,u.u_pixels_to_tile_units),u_extrude_scale:new a.aQ(E,u.u_extrude_scale),u_overscale_factor:new a.aM(E,u.u_overscale_factor)}),collisionCircle:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_inv_matrix:new a.aN(E,u.u_inv_matrix),u_camera_to_center_distance:new a.aM(E,u.u_camera_to_center_distance),u_viewport_size:new a.aQ(E,u.u_viewport_size)}),debug:(E,u)=>({u_color:new a.aR(E,u.u_color),u_matrix:new a.aN(E,u.u_matrix),u_overlay:new a.aL(E,u.u_overlay),u_overlay_scale:new a.aM(E,u.u_overlay_scale)}),clippingMask:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix)}),heatmap:(E,u)=>({u_extrude_scale:new a.aM(E,u.u_extrude_scale),u_intensity:new a.aM(E,u.u_intensity),u_matrix:new a.aN(E,u.u_matrix)}),heatmapTexture:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_world:new a.aQ(E,u.u_world),u_image:new a.aL(E,u.u_image),u_color_ramp:new a.aL(E,u.u_color_ramp),u_opacity:new a.aM(E,u.u_opacity)}),hillshade:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_image:new a.aL(E,u.u_image),u_latrange:new a.aQ(E,u.u_latrange),u_light:new a.aQ(E,u.u_light),u_shadow:new a.aR(E,u.u_shadow),u_highlight:new a.aR(E,u.u_highlight),u_accent:new a.aR(E,u.u_accent)}),hillshadePrepare:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_image:new a.aL(E,u.u_image),u_dimension:new a.aQ(E,u.u_dimension),u_zoom:new a.aM(E,u.u_zoom),u_unpack:new a.aO(E,u.u_unpack)}),line:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_ratio:new a.aM(E,u.u_ratio),u_device_pixel_ratio:new a.aM(E,u.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(E,u.u_units_to_pixels)}),lineGradient:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_ratio:new a.aM(E,u.u_ratio),u_device_pixel_ratio:new a.aM(E,u.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(E,u.u_units_to_pixels),u_image:new a.aL(E,u.u_image),u_image_height:new a.aM(E,u.u_image_height)}),linePattern:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_texsize:new a.aQ(E,u.u_texsize),u_ratio:new a.aM(E,u.u_ratio),u_device_pixel_ratio:new a.aM(E,u.u_device_pixel_ratio),u_image:new a.aL(E,u.u_image),u_units_to_pixels:new a.aQ(E,u.u_units_to_pixels),u_scale:new a.aP(E,u.u_scale),u_fade:new a.aM(E,u.u_fade)}),lineSDF:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_ratio:new a.aM(E,u.u_ratio),u_device_pixel_ratio:new a.aM(E,u.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(E,u.u_units_to_pixels),u_patternscale_a:new a.aQ(E,u.u_patternscale_a),u_patternscale_b:new a.aQ(E,u.u_patternscale_b),u_sdfgamma:new a.aM(E,u.u_sdfgamma),u_image:new a.aL(E,u.u_image),u_tex_y_a:new a.aM(E,u.u_tex_y_a),u_tex_y_b:new a.aM(E,u.u_tex_y_b),u_mix:new a.aM(E,u.u_mix)}),raster:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_tl_parent:new a.aQ(E,u.u_tl_parent),u_scale_parent:new a.aM(E,u.u_scale_parent),u_buffer_scale:new a.aM(E,u.u_buffer_scale),u_fade_t:new a.aM(E,u.u_fade_t),u_opacity:new a.aM(E,u.u_opacity),u_image0:new a.aL(E,u.u_image0),u_image1:new a.aL(E,u.u_image1),u_brightness_low:new a.aM(E,u.u_brightness_low),u_brightness_high:new a.aM(E,u.u_brightness_high),u_saturation_factor:new a.aM(E,u.u_saturation_factor),u_contrast_factor:new a.aM(E,u.u_contrast_factor),u_spin_weights:new a.aP(E,u.u_spin_weights)}),symbolIcon:(E,u)=>({u_is_size_zoom_constant:new a.aL(E,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(E,u.u_is_size_feature_constant),u_size_t:new a.aM(E,u.u_size_t),u_size:new a.aM(E,u.u_size),u_camera_to_center_distance:new a.aM(E,u.u_camera_to_center_distance),u_pitch:new a.aM(E,u.u_pitch),u_rotate_symbol:new a.aL(E,u.u_rotate_symbol),u_aspect_ratio:new a.aM(E,u.u_aspect_ratio),u_fade_change:new a.aM(E,u.u_fade_change),u_matrix:new a.aN(E,u.u_matrix),u_label_plane_matrix:new a.aN(E,u.u_label_plane_matrix),u_coord_matrix:new a.aN(E,u.u_coord_matrix),u_is_text:new a.aL(E,u.u_is_text),u_pitch_with_map:new a.aL(E,u.u_pitch_with_map),u_texsize:new a.aQ(E,u.u_texsize),u_texture:new a.aL(E,u.u_texture)}),symbolSDF:(E,u)=>({u_is_size_zoom_constant:new a.aL(E,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(E,u.u_is_size_feature_constant),u_size_t:new a.aM(E,u.u_size_t),u_size:new a.aM(E,u.u_size),u_camera_to_center_distance:new a.aM(E,u.u_camera_to_center_distance),u_pitch:new a.aM(E,u.u_pitch),u_rotate_symbol:new a.aL(E,u.u_rotate_symbol),u_aspect_ratio:new a.aM(E,u.u_aspect_ratio),u_fade_change:new a.aM(E,u.u_fade_change),u_matrix:new a.aN(E,u.u_matrix),u_label_plane_matrix:new a.aN(E,u.u_label_plane_matrix),u_coord_matrix:new a.aN(E,u.u_coord_matrix),u_is_text:new a.aL(E,u.u_is_text),u_pitch_with_map:new a.aL(E,u.u_pitch_with_map),u_texsize:new a.aQ(E,u.u_texsize),u_texture:new a.aL(E,u.u_texture),u_gamma_scale:new a.aM(E,u.u_gamma_scale),u_device_pixel_ratio:new a.aM(E,u.u_device_pixel_ratio),u_is_halo:new a.aL(E,u.u_is_halo)}),symbolTextAndIcon:(E,u)=>({u_is_size_zoom_constant:new a.aL(E,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(E,u.u_is_size_feature_constant),u_size_t:new a.aM(E,u.u_size_t),u_size:new a.aM(E,u.u_size),u_camera_to_center_distance:new a.aM(E,u.u_camera_to_center_distance),u_pitch:new a.aM(E,u.u_pitch),u_rotate_symbol:new a.aL(E,u.u_rotate_symbol),u_aspect_ratio:new a.aM(E,u.u_aspect_ratio),u_fade_change:new a.aM(E,u.u_fade_change),u_matrix:new a.aN(E,u.u_matrix),u_label_plane_matrix:new a.aN(E,u.u_label_plane_matrix),u_coord_matrix:new a.aN(E,u.u_coord_matrix),u_is_text:new a.aL(E,u.u_is_text),u_pitch_with_map:new a.aL(E,u.u_pitch_with_map),u_texsize:new a.aQ(E,u.u_texsize),u_texsize_icon:new a.aQ(E,u.u_texsize_icon),u_texture:new a.aL(E,u.u_texture),u_texture_icon:new a.aL(E,u.u_texture_icon),u_gamma_scale:new a.aM(E,u.u_gamma_scale),u_device_pixel_ratio:new a.aM(E,u.u_device_pixel_ratio),u_is_halo:new a.aL(E,u.u_is_halo)}),background:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_opacity:new a.aM(E,u.u_opacity),u_color:new a.aR(E,u.u_color)}),backgroundPattern:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_opacity:new a.aM(E,u.u_opacity),u_image:new a.aL(E,u.u_image),u_pattern_tl_a:new a.aQ(E,u.u_pattern_tl_a),u_pattern_br_a:new a.aQ(E,u.u_pattern_br_a),u_pattern_tl_b:new a.aQ(E,u.u_pattern_tl_b),u_pattern_br_b:new a.aQ(E,u.u_pattern_br_b),u_texsize:new a.aQ(E,u.u_texsize),u_mix:new a.aM(E,u.u_mix),u_pattern_size_a:new a.aQ(E,u.u_pattern_size_a),u_pattern_size_b:new a.aQ(E,u.u_pattern_size_b),u_scale_a:new a.aM(E,u.u_scale_a),u_scale_b:new a.aM(E,u.u_scale_b),u_pixel_coord_upper:new a.aQ(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(E,u.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aM(E,u.u_tile_units_to_pixels)}),terrain:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_texture:new a.aL(E,u.u_texture),u_ele_delta:new a.aM(E,u.u_ele_delta)}),terrainDepth:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_ele_delta:new a.aM(E,u.u_ele_delta)}),terrainCoords:(E,u)=>({u_matrix:new a.aN(E,u.u_matrix),u_texture:new a.aL(E,u.u_texture),u_terrain_coords_id:new a.aM(E,u.u_terrain_coords_id),u_ele_delta:new a.aM(E,u.u_ele_delta)})};class Ia{constructor(u,m,b){this.context=u;const A=u.gl;this.buffer=A.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),A.bufferData(A.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?A.DYNAMIC_DRAW:A.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ra={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class to{constructor(u,m,b,A){this.length=m.length,this.attributes=b,this.itemSize=m.bytesPerElement,this.dynamicDraw=A,this.context=u;const C=u.gl;this.buffer=C.createBuffer(),u.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,m){for(let b=0;b<this.attributes.length;b++){const A=m.attributes[this.attributes[b].name];A!==void 0&&u.enableVertexAttribArray(A)}}setVertexAttribPointers(u,m,b){for(let A=0;A<this.attributes.length;A++){const C=this.attributes[A],B=m.attributes[C.name];B!==void 0&&u.vertexAttribPointer(B,C.components,u[Ra[C.type]],!1,this.itemSize,C.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Hi=new WeakMap;function Aa(E){var u;if(Hi.has(E))return Hi.get(E);{const m=(u=E.getParameter(E.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return Hi.set(E,m),m}}class Bn{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class al extends Bn{getDefault(){return a.aT.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Ba extends Bn{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class zi extends Bn{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class ks extends Bn{getDefault(){return[!0,!0,!0,!0]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class kl extends Bn{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Do extends Bn{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class Jn extends Bn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const m=this.current;(u.func!==m.func||u.ref!==m.ref||u.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Iu extends Bn{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class sa extends Bn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=u,this.dirty=!1}}class Os extends Bn{getDefault(){return[0,1]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Ol extends Bn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=u,this.dirty=!1}}class Ru extends Bn{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class _c extends Bn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.BLEND):m.disable(m.BLEND),this.current=u,this.dirty=!1}}class Jh extends Bn{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class Dl extends Bn{getDefault(){return a.aT.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Yc extends Bn{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Gf extends Bn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=u,this.dirty=!1}}class Xc extends Bn{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class Wf extends Bn{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class eo extends Bn{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class Yf extends Bn{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Bu extends Bn{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Ds extends Bn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class vc extends Bn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class xc extends Bn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class sl extends Bn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class bc extends Bn{getDefault(){return null}set(u){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Kc extends Bn{getDefault(){return null}set(u){var m;if(u===this.current&&!this.dirty)return;const b=this.gl;Aa(b)?b.bindVertexArray(u):(m=b.getExtension("OES_vertex_array_object"))===null||m===void 0||m.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class wc extends Bn{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class zl extends Bn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Qc extends Bn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class no extends Bn{constructor(u,m){super(u),this.context=u,this.parent=m}getDefault(){return null}}class ru extends no{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class Jc extends no{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Sc extends no{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class ti{constructor(u,m,b,A,C){this.context=u,this.width=m,this.height=b;const B=u.gl,j=this.framebuffer=B.createFramebuffer();if(this.colorAttachment=new ru(u,j),A)this.depthAttachment=C?new Sc(u,j):new Jc(u,j);else if(C)throw new Error("Stencil cannot be setted without depth");if(B.checkFramebufferStatus(B.FRAMEBUFFER)!==B.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,m=this.colorAttachment.get();if(m&&u.deleteTexture(m),this.depthAttachment){const b=this.depthAttachment.get();b&&u.deleteRenderbuffer(b)}u.deleteFramebuffer(this.framebuffer)}}class vi{constructor(u,m,b){this.blendFunction=u,this.blendColor=m,this.mask=b}}vi.Replace=[1,0],vi.disabled=new vi(vi.Replace,a.aT.transparent,[!1,!1,!1,!1]),vi.unblended=new vi(vi.Replace,a.aT.transparent,[!0,!0,!0,!0]),vi.alphaBlended=new vi([1,771],a.aT.transparent,[!0,!0,!0,!0]);class Xf{constructor(u){var m,b;if(this.gl=u,this.clearColor=new al(this),this.clearDepth=new Ba(this),this.clearStencil=new zi(this),this.colorMask=new ks(this),this.depthMask=new kl(this),this.stencilMask=new Do(this),this.stencilFunc=new Jn(this),this.stencilOp=new Iu(this),this.stencilTest=new sa(this),this.depthRange=new Os(this),this.depthTest=new Ol(this),this.depthFunc=new Ru(this),this.blend=new _c(this),this.blendFunc=new Jh(this),this.blendColor=new Dl(this),this.blendEquation=new Yc(this),this.cullFace=new Gf(this),this.cullFaceSide=new Xc(this),this.frontFace=new Wf(this),this.program=new eo(this),this.activeTexture=new Yf(this),this.viewport=new Bu(this),this.bindFramebuffer=new Ds(this),this.bindRenderbuffer=new vc(this),this.bindTexture=new xc(this),this.bindVertexBuffer=new sl(this),this.bindElementBuffer=new bc(this),this.bindVertexArray=new Kc(this),this.pixelStoreUnpack=new wc(this),this.pixelStoreUnpackPremultiplyAlpha=new zl(this),this.pixelStoreUnpackFlipY=new Qc(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),Aa(u)){this.HALF_FLOAT=u.HALF_FLOAT;const A=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(m=u.RGBA16F)!==null&&m!==void 0?m:A?.RGBA16F_EXT,this.RGB16F=(b=u.RGB16F)!==null&&b!==void 0?b:A?.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const A=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=A?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,m){return new Ia(this,u,m)}createVertexBuffer(u,m,b){return new to(this,u,m,b)}createRenderbuffer(u,m,b){const A=this.gl,C=A.createRenderbuffer();return this.bindRenderbuffer.set(C),A.renderbufferStorage(A.RENDERBUFFER,u,m,b),this.bindRenderbuffer.set(null),C}createFramebuffer(u,m,b,A){return new ti(this,u,m,b,A)}clear({color:u,depth:m,stencil:b}){const A=this.gl;let C=0;u&&(C|=A.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(C|=A.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),b!==void 0&&(C|=A.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),A.clear(C)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){a.aG(u.blendFunction,vi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return Aa(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var m;return Aa(this.gl)?this.gl.deleteVertexArray(u):(m=this.gl.getExtension("OES_vertex_array_object"))===null||m===void 0?void 0:m.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}class Nn{constructor(u,m,b){this.func=u,this.mask=m,this.range=b}}Nn.ReadOnly=!1,Nn.ReadWrite=!0,Nn.disabled=new Nn(519,Nn.ReadOnly,[0,1]);const $r=7680;class Li{constructor(u,m,b,A,C,B){this.test=u,this.ref=m,this.mask=b,this.fail=A,this.depthFail=C,this.pass=B}}Li.disabled=new Li({func:519,mask:0},0,0,$r,$r,$r);class xi{constructor(u,m,b){this.enable=u,this.mode=m,this.frontFace=b}}let Nu;function ju(E,u,m,b,A,C,B){const j=E.context,q=j.gl,K=E.useProgram("collisionBox"),et=[];let it=0,dt=0;for(let Nt=0;Nt<b.length;Nt++){const Kt=b[Nt],he=u.getTile(Kt),me=he.getBucket(m);if(!me)continue;let Se=Kt.posMatrix;A[0]===0&&A[1]===0||(Se=E.translatePosMatrix(Kt.posMatrix,he,A,C));const Le=B?me.textCollisionBox:me.iconCollisionBox,ke=me.collisionCircleArray;if(ke.length>0){const Ne=a.Z(),sn=Se;a.aU(Ne,me.placementInvProjMatrix,E.transform.glCoordMatrix),a.aU(Ne,Ne,me.placementViewportMatrix),et.push({circleArray:ke,circleOffset:dt,transform:sn,invTransform:Ne,coord:Kt}),it+=ke.length/4,dt=it}Le&&K.draw(j,q.LINES,Nn.disabled,Li.disabled,E.colorModeForRenderPass(),xi.disabled,ms(Se,E.transform,he),E.style.map.terrain&&E.style.map.terrain.getTerrainData(Kt),m.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,null,E.transform.zoom,null,null,Le.collisionVertexBuffer)}if(!B||!et.length)return;const Et=E.useProgram("collisionCircle"),Mt=new a.aV;Mt.resize(4*it),Mt._trim();let zt=0;for(const Nt of et)for(let Kt=0;Kt<Nt.circleArray.length/4;Kt++){const he=4*Kt,me=Nt.circleArray[he+0],Se=Nt.circleArray[he+1],Le=Nt.circleArray[he+2],ke=Nt.circleArray[he+3];Mt.emplace(zt++,me,Se,Le,ke,0),Mt.emplace(zt++,me,Se,Le,ke,1),Mt.emplace(zt++,me,Se,Le,ke,2),Mt.emplace(zt++,me,Se,Le,ke,3)}(!Nu||Nu.length<2*it)&&(Nu=(function(Nt){const Kt=2*Nt,he=new a.aX;he.resize(Kt),he._trim();for(let me=0;me<Kt;me++){const Se=6*me;he.uint16[Se+0]=4*me+0,he.uint16[Se+1]=4*me+1,he.uint16[Se+2]=4*me+2,he.uint16[Se+3]=4*me+2,he.uint16[Se+4]=4*me+3,he.uint16[Se+5]=4*me+0}return he})(it));const At=j.createIndexBuffer(Nu,!0),Gt=j.createVertexBuffer(Mt,a.aW.members,!0);for(const Nt of et){const Kt={u_matrix:Nt.transform,u_inv_matrix:Nt.invTransform,u_camera_to_center_distance:(ue=E.transform).cameraToCenterDistance,u_viewport_size:[ue.width,ue.height]};Et.draw(j,q.TRIANGLES,Nn.disabled,Li.disabled,E.colorModeForRenderPass(),xi.disabled,Kt,E.style.map.terrain&&E.style.map.terrain.getTerrainData(Nt.coord),m.id,Gt,At,a.S.simpleSegment(0,2*Nt.circleOffset,Nt.circleArray.length,Nt.circleArray.length/2),null,E.transform.zoom,null,null,null)}var ue;Gt.destroy(),At.destroy()}xi.disabled=new xi(!1,1029,2305),xi.backCCW=new xi(!0,1029,2305);const au=a.ao(new Float32Array(16));function Fu(E,u,m,b,A,C){const{horizontalAlign:B,verticalAlign:j}=a.au(E);return new a.P((-(B-.5)*u/A+b[0])*C,(-(j-.5)*m/A+b[1])*C)}function Uu(E,u,m,b,A,C,B,j,q,K,et){const it=E.text.placedSymbolArray,dt=E.text.dynamicLayoutVertexArray,Et=E.icon.dynamicLayoutVertexArray,Mt={};dt.clear();for(let zt=0;zt<it.length;zt++){const At=it.get(zt),Gt=At.hidden||!At.crossTileID||E.allowVerticalPlacement&&!At.placedOrientation?null:b[At.crossTileID];if(Gt){const ue=new a.P(At.anchorX,At.anchorY),Nt=Un(ue,m?B:C,et),Kt=xa(A.cameraToCenterDistance,Nt.signedDistanceFromCamera);let he=a.aj(E.textSizeData,q,At)*Kt/a.ap;m&&(he*=E.tilePixelRatio/j);const{width:me,height:Se,anchor:Le,textOffset:ke,textBoxScale:Ne}=Gt,sn=Fu(Le,me,Se,ke,Ne,he),qn=m?Un(ue.add(sn),C,et).point:Nt.point.add(u?sn.rotate(-A.angle):sn),$e=E.allowVerticalPlacement&&At.placedOrientation===a.ai.vertical?Math.PI/2:0;for(let fn=0;fn<At.numGlyphs;fn++)a.ak(dt,qn,$e);K&&At.associatedIconIndex>=0&&(Mt[At.associatedIconIndex]={shiftedAnchor:qn,angle:$e})}else wt(At.numGlyphs,dt)}if(K){Et.clear();const zt=E.icon.placedSymbolArray;for(let At=0;At<zt.length;At++){const Gt=zt.get(At);if(Gt.hidden)wt(Gt.numGlyphs,Et);else{const ue=Mt[At];if(ue)for(let Nt=0;Nt<Gt.numGlyphs;Nt++)a.ak(Et,ue.shiftedAnchor,ue.angle);else wt(Gt.numGlyphs,Et)}}E.icon.dynamicLayoutVertexBuffer.updateData(Et)}E.text.dynamicLayoutVertexBuffer.updateData(dt)}function Vu(E,u,m){return m.iconsInText&&u?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function zo(E,u,m,b,A,C,B,j,q,K,et,it){const dt=E.context,Et=dt.gl,Mt=E.transform,zt=j==="map",At=q==="map",Gt=j!=="viewport"&&m.layout.get("symbol-placement")!=="point",ue=zt&&!At&&!Gt,Nt=!m.layout.get("symbol-sort-key").isConstant();let Kt=!1;const he=E.depthModeForSublayer(0,Nn.ReadOnly),me=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Se=[];for(const Le of b){const ke=u.getTile(Le),Ne=ke.getBucket(m);if(!Ne)continue;const sn=A?Ne.text:Ne.icon;if(!sn||!sn.segments.get().length||!sn.hasVisibleVertices)continue;const qn=sn.programConfigurations.get(m.id),$e=A||Ne.sdfIcons,fn=A?Ne.textSizeData:Ne.iconSizeData,on=At||Mt.pitch!==0,Ei=E.useProgram(Vu($e,A,Ne),qn),Ln=a.ah(fn,Mt.zoom),Pn=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Le);let Fn,Yi,Pi,ua,er=[0,0],Sr=null;if(A)Yi=ke.glyphAtlasTexture,Pi=Et.LINEAR,Fn=ke.glyphAtlasTexture.size,Ne.iconsInText&&(er=ke.imageAtlasTexture.size,Sr=ke.imageAtlasTexture,ua=on||E.options.rotating||E.options.zooming||fn.kind==="composite"||fn.kind==="camera"?Et.LINEAR:Et.NEAREST);else{const mr=m.layout.get("icon-size").constantOr(0)!==1||Ne.iconsNeedLinear;Yi=ke.imageAtlasTexture,Pi=$e||E.options.rotating||E.options.zooming||mr||on?Et.LINEAR:Et.NEAREST,Fn=ke.imageAtlasTexture.size}const Hr=Zt(ke,1,E.transform.zoom),ji=Be(Le.posMatrix,At,zt,E.transform,Hr),fo=dr(Le.posMatrix,At,zt,E.transform,Hr),Ea=me&&Ne.hasTextData(),rs=m.layout.get("icon-text-fit")!=="none"&&Ea&&Ne.hasIconData();if(Gt){const mr=E.style.map.terrain?(Ca,gr)=>E.style.map.terrain.getElevation(Le,Ca,gr):null,or=m.layout.get("text-rotation-alignment")==="map";Ue(Ne,Le.posMatrix,E,A,ji,fo,At,K,or,mr)}const Ho=E.translatePosMatrix(Le.posMatrix,ke,C,B),fu=Gt||A&&me||rs?au:ji,ca=E.translatePosMatrix(fo,ke,C,B,!0),Dr=$e&&m.paint.get(A?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Jr;Jr=$e?Ne.iconsInText?Oo(fn.kind,Ln,ue,At,E,Ho,fu,ca,Fn,er):_i(fn.kind,Ln,ue,At,E,Ho,fu,ca,A,Fn):Ja(fn.kind,Ln,ue,At,E,Ho,fu,ca,A,Fn);const du={program:Ei,buffers:sn,uniformValues:Jr,atlasTexture:Yi,atlasTextureIcon:Sr,atlasInterpolation:Pi,atlasInterpolationIcon:ua,isSDF:$e,hasHalo:Dr};if(Nt&&Ne.canOverlap){Kt=!0;const mr=sn.segments.get();for(const or of mr)Se.push({segments:new a.S([or]),sortKey:or.sortKey,state:du,terrainData:Pn})}else Se.push({segments:sn.segments,sortKey:0,state:du,terrainData:Pn})}Kt&&Se.sort(((Le,ke)=>Le.sortKey-ke.sortKey));for(const Le of Se){const ke=Le.state;if(dt.activeTexture.set(Et.TEXTURE0),ke.atlasTexture.bind(ke.atlasInterpolation,Et.CLAMP_TO_EDGE),ke.atlasTextureIcon&&(dt.activeTexture.set(Et.TEXTURE1),ke.atlasTextureIcon&&ke.atlasTextureIcon.bind(ke.atlasInterpolationIcon,Et.CLAMP_TO_EDGE)),ke.isSDF){const Ne=ke.uniformValues;ke.hasHalo&&(Ne.u_is_halo=1,ts(ke.buffers,Le.segments,m,E,ke.program,he,et,it,Ne,Le.terrainData)),Ne.u_is_halo=0}ts(ke.buffers,Le.segments,m,E,ke.program,he,et,it,ke.uniformValues,Le.terrainData)}}function ts(E,u,m,b,A,C,B,j,q,K){const et=b.context;A.draw(et,et.gl.TRIANGLES,C,B,j,xi.disabled,q,K,m.id,E.layoutVertexBuffer,E.indexBuffer,u,m.paint,b.transform.zoom,E.programConfigurations.get(m.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function io(E,u,m,b,A){if(!m||!b||!b.imageAtlas)return;const C=b.imageAtlas.patternPositions;let B=C[m.to.toString()],j=C[m.from.toString()];if(!B&&j&&(B=j),!j&&B&&(j=B),!B||!j){const q=A.getPaintProperty(u);B=C[q],j=C[q]}B&&j&&E.setConstantPatternPositions(B,j)}function $u(E,u,m,b,A,C,B){const j=E.context.gl,q="fill-pattern",K=m.paint.get(q),et=K&&K.constantOr(1),it=m.getCrossfadeParameters();let dt,Et,Mt,zt,At;B?(Et=et&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",dt=j.LINES):(Et=et?"fillPattern":"fill",dt=j.TRIANGLES);const Gt=K.constantOr(null);for(const ue of b){const Nt=u.getTile(ue);if(et&&!Nt.patternsLoaded())continue;const Kt=Nt.getBucket(m);if(!Kt)continue;const he=Kt.programConfigurations.get(m.id),me=E.useProgram(Et,he),Se=E.style.map.terrain&&E.style.map.terrain.getTerrainData(ue);et&&(E.context.activeTexture.set(j.TEXTURE0),Nt.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),he.updatePaintBuffers(it)),io(he,q,Gt,Nt,m);const Le=Se?ue:null,ke=E.translatePosMatrix(Le?Le.posMatrix:ue.posMatrix,Nt,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(B){zt=Kt.indexBuffer2,At=Kt.segments2;const Ne=[j.drawingBufferWidth,j.drawingBufferHeight];Mt=Et==="fillOutlinePattern"&&et?Ps(ke,E,it,Nt,Ne):Ci(ke,Ne)}else zt=Kt.indexBuffer,At=Kt.segments,Mt=et?Cs(ke,E,it,Nt):eu(ke);me.draw(E.context,dt,A,E.stencilModeForClipping(ue),C,xi.disabled,Mt,Se,m.id,Kt.layoutVertexBuffer,zt,At,m.paint,E.transform.zoom,he)}}function Na(E,u,m,b,A,C,B){const j=E.context,q=j.gl,K="fill-extrusion-pattern",et=m.paint.get(K),it=et.constantOr(1),dt=m.getCrossfadeParameters(),Et=m.paint.get("fill-extrusion-opacity"),Mt=et.constantOr(null);for(const zt of b){const At=u.getTile(zt),Gt=At.getBucket(m);if(!Gt)continue;const ue=E.style.map.terrain&&E.style.map.terrain.getTerrainData(zt),Nt=Gt.programConfigurations.get(m.id),Kt=E.useProgram(it?"fillExtrusionPattern":"fillExtrusion",Nt);it&&(E.context.activeTexture.set(q.TEXTURE0),At.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Nt.updatePaintBuffers(dt)),io(Nt,K,Mt,At,m);const he=E.translatePosMatrix(zt.posMatrix,At,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),me=m.paint.get("fill-extrusion-vertical-gradient"),Se=it?Qs(he,E,me,Et,zt,dt,At):qi(he,E,me,Et);Kt.draw(j,j.gl.TRIANGLES,A,C,B,xi.backCCW,Se,ue,m.id,Gt.layoutVertexBuffer,Gt.indexBuffer,Gt.segments,m.paint,E.transform.zoom,Nt,E.style.map.terrain&&Gt.centroidVertexBuffer)}}function tf(E,u,m,b,A,C,B){const j=E.context,q=j.gl,K=m.fbo;if(!K)return;const et=E.useProgram("hillshade"),it=E.style.map.terrain&&E.style.map.terrain.getTerrainData(u);j.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,K.colorAttachment.get()),et.draw(j,q.TRIANGLES,A,C,B,xi.disabled,((dt,Et,Mt,zt)=>{const At=Mt.paint.get("hillshade-shadow-color"),Gt=Mt.paint.get("hillshade-highlight-color"),ue=Mt.paint.get("hillshade-accent-color");let Nt=Mt.paint.get("hillshade-illumination-direction")*(Math.PI/180);Mt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Nt-=dt.transform.angle);const Kt=!dt.options.moving;return{u_matrix:zt?zt.posMatrix:dt.transform.calculatePosMatrix(Et.tileID.toUnwrapped(),Kt),u_image:0,u_latrange:Cl(0,Et.tileID),u_light:[Mt.paint.get("hillshade-exaggeration"),Nt],u_shadow:At,u_highlight:Gt,u_accent:ue}})(E,m,b,it?u:null),it,b.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}function gs(E,u,m,b,A,C){const B=E.context,j=B.gl,q=u.dem;if(q&&q.data){const K=q.dim,et=q.stride,it=q.getPixels();if(B.activeTexture.set(j.TEXTURE1),B.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||E.getTileTexture(et),u.demTexture){const Et=u.demTexture;Et.update(it,{premultiply:!1}),Et.bind(j.NEAREST,j.CLAMP_TO_EDGE)}else u.demTexture=new _t(B,it,j.RGBA,{premultiply:!1}),u.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);B.activeTexture.set(j.TEXTURE0);let dt=u.fbo;if(!dt){const Et=new _t(B,{width:K,height:K,data:null},j.RGBA);Et.bind(j.LINEAR,j.CLAMP_TO_EDGE),dt=u.fbo=B.createFramebuffer(K,K,!0,!1),dt.colorAttachment.set(Et.texture)}B.bindFramebuffer.set(dt.framebuffer),B.viewport.set([0,0,K,K]),E.useProgram("hillshadePrepare").draw(B,j.TRIANGLES,b,A,C,xi.disabled,((Et,Mt)=>{const zt=Mt.stride,At=a.Z();return a.aS(At,0,a.N,-a.N,0,0,1),a.$(At,At,[0,-a.N,0]),{u_matrix:At,u_image:1,u_dimension:[zt,zt],u_zoom:Et.overscaledZ,u_unpack:Mt.getUnpackVector()}})(u.tileID,q),null,m.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function qu(E,u,m,b,A,C){const B=b.paint.get("raster-fade-duration");if(!C&&B>0){const j=a.h.now(),q=(j-E.timeAdded)/B,K=u?(j-u.timeAdded)/B:-1,et=m.getSource(),it=A.coveringZoomLevel({tileSize:et.tileSize,roundZoom:et.roundZoom}),dt=!u||Math.abs(u.tileID.overscaledZ-it)>Math.abs(E.tileID.overscaledZ-it),Et=dt&&E.refreshedUponExpiration?1:a.ad(dt?q:1-K,0,1);return E.refreshedUponExpiration&&q>=1&&(E.refreshedUponExpiration=!1),u?{opacity:1,mix:1-Et}:{opacity:Et,mix:0}}return{opacity:1,mix:0}}const su=new a.aT(1,0,0,1),ol=new a.aT(0,1,0,1),Ll=new a.aT(0,0,1,1),th=new a.aT(1,0,1,1),zs=new a.aT(0,1,1,1);function ro(E,u,m,b){Il(E,0,u+m/2,E.transform.width,m,b)}function Hu(E,u,m,b){Il(E,u-m/2,0,m,E.transform.height,b)}function Il(E,u,m,b,A,C){const B=E.context,j=B.gl;j.enable(j.SCISSOR_TEST),j.scissor(u*E.pixelRatio,m*E.pixelRatio,b*E.pixelRatio,A*E.pixelRatio),B.clear({color:C}),j.disable(j.SCISSOR_TEST)}function eh(E,u,m){const b=E.context,A=b.gl,C=m.posMatrix,B=E.useProgram("debug"),j=Nn.disabled,q=Li.disabled,K=E.colorModeForRenderPass(),et="$debug",it=E.style.map.terrain&&E.style.map.terrain.getTerrainData(m);b.activeTexture.set(A.TEXTURE0);const dt=u.getTileByID(m.key).latestRawTileData,Et=Math.floor((dt&&dt.byteLength||0)/1024),Mt=u.getTile(m).tileSize,zt=512/Math.min(Mt,512)*(m.overscaledZ/E.transform.zoom)*.5;let At=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(At+=` => ${m.overscaledZ}`),(function(Gt,ue){Gt.initDebugOverlayCanvas();const Nt=Gt.debugOverlayCanvas,Kt=Gt.context.gl,he=Gt.debugOverlayCanvas.getContext("2d");he.clearRect(0,0,Nt.width,Nt.height),he.shadowColor="white",he.shadowBlur=2,he.lineWidth=1.5,he.strokeStyle="white",he.textBaseline="top",he.font="bold 36px Open Sans, sans-serif",he.fillText(ue,5,5),he.strokeText(ue,5,5),Gt.debugOverlayTexture.update(Nt),Gt.debugOverlayTexture.bind(Kt.LINEAR,Kt.CLAMP_TO_EDGE)})(E,`${At} ${Et}kB`),B.draw(b,A.TRIANGLES,j,q,vi.alphaBlended,xi.disabled,Ml(C,a.aT.transparent,zt),null,et,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),B.draw(b,A.LINE_STRIP,j,q,K,xi.disabled,Ml(C,a.aT.red),it,et,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function ui(E,u,m){const b=E.context,A=b.gl,C=E.colorModeForRenderPass(),B=new Nn(A.LEQUAL,Nn.ReadWrite,E.depthRangeFor3D),j=E.useProgram("terrain"),q=u.getTerrainMesh();b.bindFramebuffer.set(null),b.viewport.set([0,0,E.width,E.height]);for(const K of m){const et=E.renderToTexture.getTexture(K),it=u.getTerrainData(K.tileID);b.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,et.texture);const dt={u_matrix:E.transform.calculatePosMatrix(K.tileID.toUnwrapped()),u_texture:0,u_ele_delta:u.getMeshFrameDelta(E.transform.zoom)};j.draw(b,A.TRIANGLES,B,Li.disabled,C,xi.backCCW,dt,it,"terrain",q.vertexBuffer,q.indexBuffer,q.segments)}}class Rl{constructor(u,m){this.context=new Xf(u),this.transform=m,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.Z(),renderTime:0},this.setup(),this.numSublayers=Di.maxUnderzooming+Di.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new nl}resize(u,m,b){if(this.width=Math.floor(u*b),this.height=Math.floor(m*b),this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const A of this.style._order)this.style._layers[A].resize()}setup(){const u=this.context,m=new a.a_;m.emplaceBack(0,0),m.emplaceBack(a.N,0),m.emplaceBack(0,a.N),m.emplaceBack(a.N,a.N),this.tileExtentBuffer=u.createVertexBuffer(m,Sa.members),this.tileExtentSegments=a.S.simpleSegment(0,0,4,2);const b=new a.a_;b.emplaceBack(0,0),b.emplaceBack(a.N,0),b.emplaceBack(0,a.N),b.emplaceBack(a.N,a.N),this.debugBuffer=u.createVertexBuffer(b,Sa.members),this.debugSegments=a.S.simpleSegment(0,0,4,5);const A=new a.V;A.emplaceBack(0,0,0,0),A.emplaceBack(a.N,0,a.N,0),A.emplaceBack(0,a.N,0,a.N),A.emplaceBack(a.N,a.N,a.N,a.N),this.rasterBoundsBuffer=u.createVertexBuffer(A,Wt.members),this.rasterBoundsSegments=a.S.simpleSegment(0,0,4,2);const C=new a.a_;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(C,Sa.members),this.viewportSegments=a.S.simpleSegment(0,0,4,2);const B=new a.a$;B.emplaceBack(0),B.emplaceBack(1),B.emplaceBack(3),B.emplaceBack(2),B.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(B);const j=new a.b0;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(j);const q=this.context.gl;this.stencilClearMode=new Li({func:q.ALWAYS,mask:0},0,255,q.ZERO,q.ZERO,q.ZERO)}clearStencil(){const u=this.context,m=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=a.Z();a.aS(b,0,this.width,this.height,0,0,1),a.a0(b,b,[m.drawingBufferWidth,m.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,m.TRIANGLES,Nn.disabled,this.stencilClearMode,vi.disabled,xi.disabled,El(b),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,m){if(this.currentStencilSource===u.source||!u.isTileClipped()||!m||!m.length)return;this.currentStencilSource=u.source;const b=this.context,A=b.gl;this.nextStencilID+m.length>256&&this.clearStencil(),b.setColorMode(vi.disabled),b.setDepthMode(Nn.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const B of m){const j=this._tileClippingMaskIDs[B.key]=this.nextStencilID++,q=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B);C.draw(b,A.TRIANGLES,Nn.disabled,new Li({func:A.ALWAYS,mask:0},j,255,A.KEEP,A.KEEP,A.REPLACE),vi.disabled,xi.disabled,El(B.posMatrix),q,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,m=this.context.gl;return new Li({func:m.NOTEQUAL,mask:255},u,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(u){const m=this.context.gl;return new Li({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(u){const m=this.context.gl,b=u.sort(((B,j)=>j.overscaledZ-B.overscaledZ)),A=b[b.length-1].overscaledZ,C=b[0].overscaledZ-A+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const B={};for(let j=0;j<C;j++)B[j+A]=new Li({func:m.GEQUAL,mask:255},j+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=C,[B,b]}return[{[A]:Li.disabled},b]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new vi([u.CONSTANT_COLOR,u.ONE],new a.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?vi.unblended:vi.alphaBlended}depthModeForSublayer(u,m,b){if(!this.opaquePassEnabledForLayer())return Nn.disabled;const A=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Nn(b||this.context.gl.LEQUAL,m,[A,A])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,m){this.style=u,this.options=m,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(a.h.now()),this.imageManager.beginFrame();const b=this.style._order,A=this.style.sourceCaches,C={},B={},j={};for(const q in A){const K=A[q];K.used&&K.prepare(this.context),C[q]=K.getVisibleCoordinates(),B[q]=C[q].slice().reverse(),j[q]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let q=0;q<b.length;q++)if(this.style._layers[b[q]].is3D()){this.opaquePassCutoff=q;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const q=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||q.length)&&(a.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(K,et){const it=K.context,dt=it.gl,Et=vi.unblended,Mt=new Nn(dt.LEQUAL,Nn.ReadWrite,[0,1]),zt=et.getTerrainMesh(),At=et.sourceCache.getRenderableTiles(),Gt=K.useProgram("terrainDepth");it.bindFramebuffer.set(et.getFramebuffer("depth").framebuffer),it.viewport.set([0,0,K.width/devicePixelRatio,K.height/devicePixelRatio]),it.clear({color:a.aT.transparent,depth:1});for(const ue of At){const Nt=et.getTerrainData(ue.tileID),Kt={u_matrix:K.transform.calculatePosMatrix(ue.tileID.toUnwrapped()),u_ele_delta:et.getMeshFrameDelta(K.transform.zoom)};Gt.draw(it,dt.TRIANGLES,Mt,Li.disabled,Et,xi.backCCW,Kt,Nt,"terrain",zt.vertexBuffer,zt.indexBuffer,zt.segments)}it.bindFramebuffer.set(null),it.viewport.set([0,0,K.width,K.height])})(this,this.style.map.terrain),(function(K,et){const it=K.context,dt=it.gl,Et=vi.unblended,Mt=new Nn(dt.LEQUAL,Nn.ReadWrite,[0,1]),zt=et.getTerrainMesh(),At=et.getCoordsTexture(),Gt=et.sourceCache.getRenderableTiles(),ue=K.useProgram("terrainCoords");it.bindFramebuffer.set(et.getFramebuffer("coords").framebuffer),it.viewport.set([0,0,K.width/devicePixelRatio,K.height/devicePixelRatio]),it.clear({color:a.aT.transparent,depth:1}),et.coordsIndex=[];for(const Nt of Gt){const Kt=et.getTerrainData(Nt.tileID);it.activeTexture.set(dt.TEXTURE0),dt.bindTexture(dt.TEXTURE_2D,At.texture);const he={u_matrix:K.transform.calculatePosMatrix(Nt.tileID.toUnwrapped()),u_terrain_coords_id:(255-et.coordsIndex.length)/255,u_texture:0,u_ele_delta:et.getMeshFrameDelta(K.transform.zoom)};ue.draw(it,dt.TRIANGLES,Mt,Li.disabled,Et,xi.backCCW,he,Kt,"terrain",zt.vertexBuffer,zt.indexBuffer,zt.segments),et.coordsIndex.push(Nt.tileID.key)}it.bindFramebuffer.set(null),it.viewport.set([0,0,K.width,K.height])})(this,this.style.map.terrain))}this.renderPass="offscreen";for(const q of b){const K=this.style._layers[q];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const et=B[K.source];(K.type==="custom"||et.length)&&this.renderLayer(this,A[K.source],K,et)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:m.showOverdrawInspector?a.aT.black:a.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const q=this.style._layers[b[this.currentLayer]],K=A[q.source],et=C[q.source];this._renderTileClippingMasks(q,et),this.renderLayer(this,K,q,et)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const q=this.style._layers[b[this.currentLayer]],K=A[q.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(q))continue;const et=(q.type==="symbol"?j:B)[q.source];this._renderTileClippingMasks(q,C[q.source]),this.renderLayer(this,K,q,et)}if(this.options.showTileBoundaries){const q=(function(K,et){let it=null;const dt=Object.values(K._layers).flatMap((At=>At.source&&!At.isHidden(et)?[K.sourceCaches[At.source]]:[])),Et=dt.filter((At=>At.getSource().type==="vector")),Mt=dt.filter((At=>At.getSource().type!=="vector")),zt=At=>{(!it||it.getSource().maxzoom<At.getSource().maxzoom)&&(it=At)};return Et.forEach((At=>zt(At))),it||Mt.forEach((At=>zt(At))),it})(this.style,this.transform.zoom);q&&(function(K,et,it){for(let dt=0;dt<it.length;dt++)eh(K,et,it[dt])})(this,q,q.getVisibleCoordinates())}this.options.showPadding&&(function(q){const K=q.transform.padding;ro(q,q.transform.height-(K.top||0),3,su),ro(q,K.bottom||0,3,ol),Hu(q,K.left||0,3,Ll),Hu(q,q.transform.width-(K.right||0),3,th);const et=q.transform.centerPoint;(function(it,dt,Et,Mt){Il(it,dt-1,Et-10,2,20,Mt),Il(it,dt-10,Et-1,20,2,Mt)})(q,et.x,q.transform.height-et.y,zs)})(this),this.context.setDefault()}renderLayer(u,m,b,A){if(!b.isHidden(this.transform.zoom)&&(b.type==="background"||b.type==="custom"||(A||[]).length))switch(this.id=b.id,b.type){case"symbol":(function(C,B,j,q,K){if(C.renderPass!=="translucent")return;const et=Li.disabled,it=C.colorModeForRenderPass();(j._unevaluatedLayout.hasValue("text-variable-anchor")||j._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(dt,Et,Mt,zt,At,Gt,ue){const Nt=Et.transform,Kt=At==="map",he=Gt==="map";for(const me of dt){const Se=zt.getTile(me),Le=Se.getBucket(Mt);if(!Le||!Le.text||!Le.text.segments.get().length)continue;const ke=a.ah(Le.textSizeData,Nt.zoom),Ne=Zt(Se,1,Et.transform.zoom),sn=Be(me.posMatrix,he,Kt,Et.transform,Ne),qn=Mt.layout.get("icon-text-fit")!=="none"&&Le.hasIconData();if(ke){const $e=Math.pow(2,Nt.zoom-Se.tileID.overscaledZ);Uu(Le,Kt,he,ue,Nt,sn,me.posMatrix,$e,ke,qn,Et.style.map.terrain?(fn,on)=>Et.style.map.terrain.getElevation(me,fn,on):null)}}})(q,C,j,B,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),K),j.paint.get("icon-opacity").constantOr(1)!==0&&zo(C,B,j,q,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),et,it),j.paint.get("text-opacity").constantOr(1)!==0&&zo(C,B,j,q,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),et,it),B.map.showCollisionBoxes&&(ju(C,B,j,q,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),ju(C,B,j,q,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))})(u,m,b,A,this.style.placement.variableOffsets);break;case"circle":(function(C,B,j,q){if(C.renderPass!=="translucent")return;const K=j.paint.get("circle-opacity"),et=j.paint.get("circle-stroke-width"),it=j.paint.get("circle-stroke-opacity"),dt=!j.layout.get("circle-sort-key").isConstant();if(K.constantOr(1)===0&&(et.constantOr(1)===0||it.constantOr(1)===0))return;const Et=C.context,Mt=Et.gl,zt=C.depthModeForSublayer(0,Nn.ReadOnly),At=Li.disabled,Gt=C.colorModeForRenderPass(),ue=[];for(let Nt=0;Nt<q.length;Nt++){const Kt=q[Nt],he=B.getTile(Kt),me=he.getBucket(j);if(!me)continue;const Se=me.programConfigurations.get(j.id),Le=C.useProgram("circle",Se),ke=me.layoutVertexBuffer,Ne=me.indexBuffer,sn=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Kt),qn={programConfiguration:Se,program:Le,layoutVertexBuffer:ke,indexBuffer:Ne,uniformValues:Ka(C,Kt,he,j),terrainData:sn};if(dt){const $e=me.segments.get();for(const fn of $e)ue.push({segments:new a.S([fn]),sortKey:fn.sortKey,state:qn})}else ue.push({segments:me.segments,sortKey:0,state:qn})}dt&&ue.sort(((Nt,Kt)=>Nt.sortKey-Kt.sortKey));for(const Nt of ue){const{programConfiguration:Kt,program:he,layoutVertexBuffer:me,indexBuffer:Se,uniformValues:Le,terrainData:ke}=Nt.state;he.draw(Et,Mt.TRIANGLES,zt,At,Gt,xi.disabled,Le,ke,j.id,me,Se,Nt.segments,j.paint,C.transform.zoom,Kt)}})(u,m,b,A);break;case"heatmap":(function(C,B,j,q){if(j.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){const K=C.context,et=K.gl,it=Li.disabled,dt=new vi([et.ONE,et.ONE],a.aT.transparent,[!0,!0,!0,!0]);(function(Et,Mt,zt){const At=Et.gl;Et.activeTexture.set(At.TEXTURE1),Et.viewport.set([0,0,Mt.width/4,Mt.height/4]);let Gt=zt.heatmapFbo;if(Gt)At.bindTexture(At.TEXTURE_2D,Gt.colorAttachment.get()),Et.bindFramebuffer.set(Gt.framebuffer);else{const ue=At.createTexture();At.bindTexture(At.TEXTURE_2D,ue),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_S,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_T,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MIN_FILTER,At.LINEAR),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MAG_FILTER,At.LINEAR),Gt=zt.heatmapFbo=Et.createFramebuffer(Mt.width/4,Mt.height/4,!1,!1),(function(Nt,Kt,he,me){var Se,Le;const ke=Nt.gl,Ne=(Se=Nt.HALF_FLOAT)!==null&&Se!==void 0?Se:ke.UNSIGNED_BYTE,sn=(Le=Nt.RGBA16F)!==null&&Le!==void 0?Le:ke.RGBA;ke.texImage2D(ke.TEXTURE_2D,0,sn,Kt.width/4,Kt.height/4,0,ke.RGBA,Ne,null),me.colorAttachment.set(he)})(Et,Mt,ue,Gt)}})(K,C,j),K.clear({color:a.aT.transparent});for(let Et=0;Et<q.length;Et++){const Mt=q[Et];if(B.hasRenderableParent(Mt))continue;const zt=B.getTile(Mt),At=zt.getBucket(j);if(!At)continue;const Gt=At.programConfigurations.get(j.id),ue=C.useProgram("heatmap",Gt),{zoom:Nt}=C.transform;ue.draw(K,et.TRIANGLES,Nn.disabled,it,dt,xi.disabled,gc(Mt.posMatrix,zt,Nt,j.paint.get("heatmap-intensity")),null,j.id,At.layoutVertexBuffer,At.indexBuffer,At.segments,j.paint,C.transform.zoom,Gt)}K.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),(function(K,et){const it=K.context,dt=it.gl,Et=et.heatmapFbo;if(!Et)return;it.activeTexture.set(dt.TEXTURE0),dt.bindTexture(dt.TEXTURE_2D,Et.colorAttachment.get()),it.activeTexture.set(dt.TEXTURE1);let Mt=et.colorRampTexture;Mt||(Mt=et.colorRampTexture=new _t(it,et.colorRamp,dt.RGBA)),Mt.bind(dt.LINEAR,dt.CLAMP_TO_EDGE),K.useProgram("heatmapTexture").draw(it,dt.TRIANGLES,Nn.disabled,Li.disabled,K.colorModeForRenderPass(),xi.disabled,((zt,At,Gt,ue)=>{const Nt=a.Z();a.aS(Nt,0,zt.width,zt.height,0,0,1);const Kt=zt.context.gl;return{u_matrix:Nt,u_world:[Kt.drawingBufferWidth,Kt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:At.paint.get("heatmap-opacity")}})(K,et),null,et.id,K.viewportBuffer,K.quadTriangleIndexBuffer,K.viewportSegments,et.paint,K.transform.zoom)})(C,j))})(u,m,b,A);break;case"line":(function(C,B,j,q){if(C.renderPass!=="translucent")return;const K=j.paint.get("line-opacity"),et=j.paint.get("line-width");if(K.constantOr(1)===0||et.constantOr(1)===0)return;const it=C.depthModeForSublayer(0,Nn.ReadOnly),dt=C.colorModeForRenderPass(),Et=j.paint.get("line-dasharray"),Mt=j.paint.get("line-pattern"),zt=Mt.constantOr(1),At=j.paint.get("line-gradient"),Gt=j.getCrossfadeParameters(),ue=zt?"linePattern":Et?"lineSDF":At?"lineGradient":"line",Nt=C.context,Kt=Nt.gl;let he=!0;for(const me of q){const Se=B.getTile(me);if(zt&&!Se.patternsLoaded())continue;const Le=Se.getBucket(j);if(!Le)continue;const ke=Le.programConfigurations.get(j.id),Ne=C.context.program.get(),sn=C.useProgram(ue,ke),qn=he||sn.program!==Ne,$e=C.style.map.terrain&&C.style.map.terrain.getTerrainData(me),fn=Mt.constantOr(null);if(fn&&Se.imageAtlas){const Ln=Se.imageAtlas,Pn=Ln.patternPositions[fn.to.toString()],Fn=Ln.patternPositions[fn.from.toString()];Pn&&Fn&&ke.setConstantPatternPositions(Pn,Fn)}const on=$e?me:null,Ei=zt?iu(C,Se,j,Gt,on):Et?Qa(C,Se,j,Et,Gt,on):At?yc(C,Se,j,Le.lineClipsArray.length,on):nu(C,Se,j,on);if(zt)Nt.activeTexture.set(Kt.TEXTURE0),Se.imageAtlasTexture.bind(Kt.LINEAR,Kt.CLAMP_TO_EDGE),ke.updatePaintBuffers(Gt);else if(Et&&(qn||C.lineAtlas.dirty))Nt.activeTexture.set(Kt.TEXTURE0),C.lineAtlas.bind(Nt);else if(At){const Ln=Le.gradients[j.id];let Pn=Ln.texture;if(j.gradientVersion!==Ln.version){let Fn=256;if(j.stepInterpolant){const Yi=B.getSource().maxzoom,Pi=me.canonical.z===Yi?Math.ceil(1<<C.transform.maxZoom-me.canonical.z):1;Fn=a.ad(a.aY(Le.maxLineLength/a.N*1024*Pi),256,Nt.maxTextureSize)}Ln.gradient=a.aZ({expression:j.gradientExpression(),evaluationKey:"lineProgress",resolution:Fn,image:Ln.gradient||void 0,clips:Le.lineClipsArray}),Ln.texture?Ln.texture.update(Ln.gradient):Ln.texture=new _t(Nt,Ln.gradient,Kt.RGBA),Ln.version=j.gradientVersion,Pn=Ln.texture}Nt.activeTexture.set(Kt.TEXTURE0),Pn.bind(j.stepInterpolant?Kt.NEAREST:Kt.LINEAR,Kt.CLAMP_TO_EDGE)}sn.draw(Nt,Kt.TRIANGLES,it,C.stencilModeForClipping(me),dt,xi.disabled,Ei,$e,j.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,j.paint,C.transform.zoom,ke,Le.layoutVertexBuffer2),he=!1}})(u,m,b,A);break;case"fill":(function(C,B,j,q){const K=j.paint.get("fill-color"),et=j.paint.get("fill-opacity");if(et.constantOr(1)===0)return;const it=C.colorModeForRenderPass(),dt=j.paint.get("fill-pattern"),Et=C.opaquePassEnabledForLayer()&&!dt.constantOr(1)&&K.constantOr(a.aT.transparent).a===1&&et.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===Et){const Mt=C.depthModeForSublayer(1,C.renderPass==="opaque"?Nn.ReadWrite:Nn.ReadOnly);$u(C,B,j,q,Mt,it,!1)}if(C.renderPass==="translucent"&&j.paint.get("fill-antialias")){const Mt=C.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,Nn.ReadOnly);$u(C,B,j,q,Mt,it,!0)}})(u,m,b,A);break;case"fill-extrusion":(function(C,B,j,q){const K=j.paint.get("fill-extrusion-opacity");if(K!==0&&C.renderPass==="translucent"){const et=new Nn(C.context.gl.LEQUAL,Nn.ReadWrite,C.depthRangeFor3D);if(K!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))Na(C,B,j,q,et,Li.disabled,vi.disabled),Na(C,B,j,q,et,C.stencilModeFor3D(),C.colorModeForRenderPass());else{const it=C.colorModeForRenderPass();Na(C,B,j,q,et,Li.disabled,it)}}})(u,m,b,A);break;case"hillshade":(function(C,B,j,q){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const K=C.context,et=C.depthModeForSublayer(0,Nn.ReadOnly),it=C.colorModeForRenderPass(),[dt,Et]=C.renderPass==="translucent"?C.stencilConfigForOverlap(q):[{},q];for(const Mt of Et){const zt=B.getTile(Mt);zt.needsHillshadePrepare!==void 0&&zt.needsHillshadePrepare&&C.renderPass==="offscreen"?gs(C,zt,j,et,Li.disabled,it):C.renderPass==="translucent"&&tf(C,Mt,zt,j,et,dt[Mt.overscaledZ],it)}K.viewport.set([0,0,C.width,C.height])})(u,m,b,A);break;case"raster":(function(C,B,j,q){if(C.renderPass!=="translucent"||j.paint.get("raster-opacity")===0||!q.length)return;const K=C.context,et=K.gl,it=B.getSource(),dt=C.useProgram("raster"),Et=C.colorModeForRenderPass(),[Mt,zt]=it instanceof Pe?[{},q]:C.stencilConfigForOverlap(q),At=zt[zt.length-1].overscaledZ,Gt=!C.options.moving;for(const ue of zt){const Nt=C.depthModeForSublayer(ue.overscaledZ-At,j.paint.get("raster-opacity")===1?Nn.ReadWrite:Nn.ReadOnly,et.LESS),Kt=B.getTile(ue);Kt.registerFadeDuration(j.paint.get("raster-fade-duration"));const he=B.findLoadedParent(ue,0),me=qu(Kt,he,B,j,C.transform,C.style.map.terrain);let Se,Le;const ke=j.paint.get("raster-resampling")==="nearest"?et.NEAREST:et.LINEAR;K.activeTexture.set(et.TEXTURE0),Kt.texture.bind(ke,et.CLAMP_TO_EDGE,et.LINEAR_MIPMAP_NEAREST),K.activeTexture.set(et.TEXTURE1),he?(he.texture.bind(ke,et.CLAMP_TO_EDGE,et.LINEAR_MIPMAP_NEAREST),Se=Math.pow(2,he.tileID.overscaledZ-Kt.tileID.overscaledZ),Le=[Kt.tileID.canonical.x*Se%1,Kt.tileID.canonical.y*Se%1]):Kt.texture.bind(ke,et.CLAMP_TO_EDGE,et.LINEAR_MIPMAP_NEAREST);const Ne=C.style.map.terrain&&C.style.map.terrain.getTerrainData(ue),sn=Ne?ue:null,qn=sn?sn.posMatrix:C.transform.calculatePosMatrix(ue.toUnwrapped(),Gt),$e=Pl(qn,Le||[0,0],Se||1,me,j);it instanceof Pe?dt.draw(K,et.TRIANGLES,Nt,Li.disabled,Et,xi.disabled,$e,Ne,j.id,it.boundsBuffer,C.quadTriangleIndexBuffer,it.boundsSegments):dt.draw(K,et.TRIANGLES,Nt,Mt[ue.overscaledZ],Et,xi.disabled,$e,Ne,j.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}})(u,m,b,A);break;case"background":(function(C,B,j,q){const K=j.paint.get("background-color"),et=j.paint.get("background-opacity");if(et===0)return;const it=C.context,dt=it.gl,Et=C.transform,Mt=Et.tileSize,zt=j.paint.get("background-pattern");if(C.isPatternMissing(zt))return;const At=!zt&&K.a===1&&et===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==At)return;const Gt=Li.disabled,ue=C.depthModeForSublayer(0,At==="opaque"?Nn.ReadWrite:Nn.ReadOnly),Nt=C.colorModeForRenderPass(),Kt=C.useProgram(zt?"backgroundPattern":"background"),he=q||Et.coveringTiles({tileSize:Mt,terrain:C.style.map.terrain});zt&&(it.activeTexture.set(dt.TEXTURE0),C.imageManager.bind(C.context));const me=j.getCrossfadeParameters();for(const Se of he){const Le=q?Se.posMatrix:C.transform.calculatePosMatrix(Se.toUnwrapped()),ke=zt?sr(Le,et,C,zt,{tileID:Se,tileSize:Mt},me):Js(Le,et,K),Ne=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Se);Kt.draw(it,dt.TRIANGLES,ue,Gt,Nt,xi.disabled,ke,Ne,j.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}})(u,0,b,A);break;case"custom":(function(C,B,j){const q=C.context,K=j.implementation;if(C.renderPass==="offscreen"){const et=K.prerender;et&&(C.setCustomLayerDefaults(),q.setColorMode(C.colorModeForRenderPass()),et.call(K,q.gl,C.transform.customLayerMatrix()),q.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),q.setColorMode(C.colorModeForRenderPass()),q.setStencilMode(Li.disabled);const et=K.renderingMode==="3d"?new Nn(C.context.gl.LEQUAL,Nn.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,Nn.ReadOnly);q.setDepthMode(et),K.render(q.gl,C.transform.customLayerMatrix()),q.setDirty(),C.setBaseState(),q.bindFramebuffer.set(null)}})(u,0,b)}}translatePosMatrix(u,m,b,A,C){if(!b[0]&&!b[1])return u;const B=C?A==="map"?this.transform.angle:0:A==="viewport"?-this.transform.angle:0;if(B){const K=Math.sin(B),et=Math.cos(B);b=[b[0]*et-b[1]*K,b[0]*K+b[1]*et]}const j=[C?b[0]:Zt(m,b[0],this.transform.zoom),C?b[1]:Zt(m,b[1],this.transform.zoom),0],q=new Float32Array(16);return a.$(q,u,j),q}saveTileTexture(u){const m=this._tileTextures[u.size[0]];m?m.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const m=this._tileTextures[u];return m&&m.length>0?m.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const m=this.imageManager.getPattern(u.from.toString()),b=this.imageManager.getPattern(u.to.toString());return!m||!b}useProgram(u,m){this.cache=this.cache||{};const b=u+(m?m.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[b]||(this.cache[b]=new ko(this.context,yi[u],m,rl[u],this._showOverdrawInspector,this.style.map.terrain)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new _t(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:m}=this.context.gl;return this.width!==u||this.height!==m}}class Pr{constructor(u,m){this.points=u,this.planes=m}static fromInvProjectionMatrix(u,m,b){const A=Math.pow(2,b),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((j=>{const q=1/(j=a.ag([],j,u))[3]/m*A;return a.b3(j,j,[q,q,1/j[3],q])})),B=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((j=>{const q=(function(dt,Et){var Mt=Et[0],zt=Et[1],At=Et[2],Gt=Mt*Mt+zt*zt+At*At;return Gt>0&&(Gt=1/Math.sqrt(Gt)),dt[0]=Et[0]*Gt,dt[1]=Et[1]*Gt,dt[2]=Et[2]*Gt,dt})([],(function(dt,Et,Mt){var zt=Et[0],At=Et[1],Gt=Et[2],ue=Mt[0],Nt=Mt[1],Kt=Mt[2];return dt[0]=At*Kt-Gt*Nt,dt[1]=Gt*ue-zt*Kt,dt[2]=zt*Nt-At*ue,dt})([],ot([],C[j[0]],C[j[1]]),ot([],C[j[2]],C[j[1]]))),K=-((et=q)[0]*(it=C[j[1]])[0]+et[1]*it[1]+et[2]*it[2]);var et,it;return q.concat(K)}));return new Pr(C,B)}}class ou{constructor(u,m){this.min=u,this.max=m,this.center=(function(b,A,C){return b[0]=.5*A[0],b[1]=.5*A[1],b[2]=.5*A[2],b})([],(function(b,A,C){return b[0]=A[0]+C[0],b[1]=A[1]+C[1],b[2]=A[2]+C[2],b})([],this.min,this.max))}quadrant(u){const m=[u%2==0,u<2],b=W(this.min),A=W(this.max);for(let C=0;C<m.length;C++)b[C]=m[C]?this.min[C]:this.center[C],A[C]=m[C]?this.center[C]:this.max[C];return A[2]=this.max[2],new ou(b,A)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const m=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let b=!0;for(let A=0;A<u.planes.length;A++){const C=u.planes[A];let B=0;for(let j=0;j<m.length;j++)a.b4(C,m[j])>=0&&B++;if(B===0)return 0;B!==m.length&&(b=!1)}if(b)return 2;for(let A=0;A<3;A++){let C=Number.MAX_VALUE,B=-Number.MAX_VALUE;for(let j=0;j<u.points.length;j++){const q=u.points[j][A]-this.min[A];C=Math.min(C,q),B=Math.max(B,q)}if(B<0||C>this.max[A]-this.min[A])return 0}return 1}}class es{constructor(u=0,m=0,b=0,A=0){if(isNaN(u)||u<0||isNaN(m)||m<0||isNaN(b)||b<0||isNaN(A)||A<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=m,this.left=b,this.right=A}interpolate(u,m,b){return m.top!=null&&u.top!=null&&(this.top=a.B.number(u.top,m.top,b)),m.bottom!=null&&u.bottom!=null&&(this.bottom=a.B.number(u.bottom,m.bottom,b)),m.left!=null&&u.left!=null&&(this.left=a.B.number(u.left,m.left,b)),m.right!=null&&u.right!=null&&(this.right=a.B.number(u.right,m.right,b)),this}getCenter(u,m){const b=a.ad((this.left+u-this.right)/2,0,u),A=a.ad((this.top+m-this.bottom)/2,0,m);return new a.P(b,A)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new es(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class kr{constructor(u,m,b,A,C){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=C===void 0||!!C,this._minZoom=u||0,this._maxZoom=m||22,this._minPitch=b??0,this._maxPitch=A??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new es,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const u=new kr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.apply(this),u}apply(u){this.tileSize=u.tileSize,this.latRange=u.latRange,this.width=u.width,this.height=u.height,this._center=u._center,this._elevation=u._elevation,this._minEleveationForCurrentTile=u._minEleveationForCurrentTile,this.zoom=u.zoom,this.angle=u.angle,this._fov=u._fov,this._pitch=u._pitch,this._unmodified=u._unmodified,this._edgeInsets=u._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const m=-a.b5(u,-180,180)*Math.PI/180;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=(function(){var b=new a.A(4);return a.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b})(),(function(b,A,C){var B=A[0],j=A[1],q=A[2],K=A[3],et=Math.sin(C),it=Math.cos(C);b[0]=B*it+q*et,b[1]=j*it+K*et,b[2]=B*-et+q*it,b[3]=j*-et+K*it})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const m=a.ad(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const m=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._zoom=m,this.tileZoom=Math.max(0,Math.floor(m)),this.scale=this.zoomScale(m),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,m,b){this._unmodified=!1,this._edgeInsets.interpolate(u,m,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const m=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(u){const m=[new a.b6(0,u)];if(this._renderWorldCopies){const b=this.pointCoordinate(new a.P(0,0)),A=this.pointCoordinate(new a.P(this.width,0)),C=this.pointCoordinate(new a.P(this.width,this.height)),B=this.pointCoordinate(new a.P(0,this.height)),j=Math.floor(Math.min(b.x,A.x,C.x,B.x)),q=Math.floor(Math.max(b.x,A.x,C.x,B.x)),K=1;for(let et=j-K;et<=q+K;et++)et!==0&&m.push(new a.b6(et,u))}return m}coveringTiles(u){var m,b;let A=this.coveringZoomLevel(u);const C=A;if(u.minzoom!==void 0&&A<u.minzoom)return[];u.maxzoom!==void 0&&A>u.maxzoom&&(A=u.maxzoom);const B=this.pointCoordinate(this.getCameraPoint()),j=a.U.fromLngLat(this.center),q=Math.pow(2,A),K=[q*B.x,q*B.y,0],et=[q*j.x,q*j.y,0],it=Pr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,A);let dt=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(dt=A);const Et=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,Mt=Nt=>({aabb:new ou([Nt*q,0,0],[(Nt+1)*q,q,0]),zoom:0,x:0,y:0,wrap:Nt,fullyVisible:!1}),zt=[],At=[],Gt=A,ue=u.reparseOverscaled?C:A;if(this._renderWorldCopies)for(let Nt=1;Nt<=3;Nt++)zt.push(Mt(-Nt)),zt.push(Mt(Nt));for(zt.push(Mt(0));zt.length>0;){const Nt=zt.pop(),Kt=Nt.x,he=Nt.y;let me=Nt.fullyVisible;if(!me){const sn=Nt.aabb.intersects(it);if(sn===0)continue;me=sn===2}const Se=u.terrain?K:et,Le=Nt.aabb.distanceX(Se),ke=Nt.aabb.distanceY(Se),Ne=Math.max(Math.abs(Le),Math.abs(ke));if(Nt.zoom===Gt||Ne>Et+(1<<Gt-Nt.zoom)-2&&Nt.zoom>=dt){const sn=Gt-Nt.zoom,qn=K[0]-.5-(Kt<<sn),$e=K[1]-.5-(he<<sn);At.push({tileID:new a.O(Nt.zoom===Gt?ue:Nt.zoom,Nt.wrap,Nt.zoom,Kt,he),distanceSq:ht([et[0]-.5-Kt,et[1]-.5-he]),tileDistanceToCamera:Math.sqrt(qn*qn+$e*$e)})}else for(let sn=0;sn<4;sn++){const qn=(Kt<<1)+sn%2,$e=(he<<1)+(sn>>1),fn=Nt.zoom+1;let on=Nt.aabb.quadrant(sn);if(u.terrain){const Ei=new a.O(fn,Nt.wrap,fn,qn,$e),Ln=u.terrain.getMinMaxElevation(Ei),Pn=(m=Ln.minElevation)!==null&&m!==void 0?m:this.elevation,Fn=(b=Ln.maxElevation)!==null&&b!==void 0?b:this.elevation;on=new ou([on.min[0],on.min[1],Pn],[on.max[0],on.max[1],Fn])}zt.push({aabb:on,zoom:fn,x:qn,y:$e,wrap:Nt.wrap,fullyVisible:me})}}return At.sort(((Nt,Kt)=>Nt.distanceSq-Kt.distanceSq)).map((Nt=>Nt.tileID))}resize(u,m){this.width=u,this.height=m,this.pixelsToGLUnits=[2/u,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const m=a.ad(u.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.P(a.G(u.lng)*this.worldSize,a.H(m)*this.worldSize)}unproject(u){return new a.U(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const m=this.pointLocation(this.centerPoint,u),b=u.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-b))return;const A=this.getCameraPosition(),C=a.U.fromLngLat(A.lngLat,A.altitude),B=a.U.fromLngLat(m,b),j=C.x-B.x,q=C.y-B.y,K=C.z-B.z,et=Math.sqrt(j*j+q*q+K*K),it=this.scaleZoom(this.cameraToCenterDistance/et/this.tileSize);this._elevation=b,this._center=m,this.zoom=it}setLocationAtPoint(u,m){const b=this.pointCoordinate(m),A=this.pointCoordinate(this.centerPoint),C=this.locationCoordinate(u),B=new a.U(C.x-(b.x-A.x),C.y-(b.y-A.y));this.center=this.coordinateLocation(B),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,m){return m?this.coordinatePoint(this.locationCoordinate(u),m.getElevationForLngLatZoom(u,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,m){return this.coordinateLocation(this.pointCoordinate(u,m))}locationCoordinate(u){return a.U.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,m){if(m){const dt=m.pointCoordinate(u);if(dt!=null)return dt}const b=[u.x,u.y,0,1],A=[u.x,u.y,1,1];a.ag(b,b,this.pixelMatrixInverse),a.ag(A,A,this.pixelMatrixInverse);const C=b[3],B=A[3],j=b[1]/C,q=A[1]/B,K=b[2]/C,et=A[2]/B,it=K===et?0:(0-K)/(et-K);return new a.U(a.B.number(b[0]/C,A[0]/B,it)/this.worldSize,a.B.number(j,q,it)/this.worldSize)}coordinatePoint(u,m=0,b=this.pixelMatrix){const A=[u.x*this.worldSize,u.y*this.worldSize,m,1];return a.ag(A,A,b),new a.P(A[0]/A[3],A[1]/A[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new $t().extend(this.pointLocation(new a.P(0,u))).extend(this.pointLocation(new a.P(this.width,u))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new $t([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(u,m=!1){const b=u.key,A=m?this._alignedPosMatrixCache:this._posMatrixCache;if(A[b])return A[b];const C=u.canonical,B=this.worldSize/this.zoomScale(C.z),j=C.x+Math.pow(2,C.z)*u.wrap,q=a.ao(new Float64Array(16));return a.$(q,q,[j*B,C.y*B,0]),a.a0(q,q,[B/a.N,B/a.N,1]),a.a1(q,m?this.alignedProjMatrix:this.projMatrix,q),A[b]=new Float32Array(q),A[b]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let u,m,b,A,C=-90,B=90,j=-180,q=180;const K=this.size,et=this._unmodified;if(this.latRange){const Et=this.latRange;C=a.H(Et[1])*this.worldSize,B=a.H(Et[0])*this.worldSize,u=B-C<K.y?K.y/(B-C):0}if(this.lngRange){const Et=this.lngRange;j=a.b5(a.G(Et[0])*this.worldSize,0,this.worldSize),q=a.b5(a.G(Et[1])*this.worldSize,0,this.worldSize),q<j&&(q+=this.worldSize),m=q-j<K.x?K.x/(q-j):0}const it=this.point,dt=Math.max(m||0,u||0);if(dt)return this.center=this.unproject(new a.P(m?(q+j)/2:it.x,u?(B+C)/2:it.y)),this.zoom+=this.scaleZoom(dt),this._unmodified=et,void(this._constraining=!1);if(this.latRange){const Et=it.y,Mt=K.y/2;Et-Mt<C&&(A=C+Mt),Et+Mt>B&&(A=B-Mt)}if(this.lngRange){const Et=(j+q)/2,Mt=a.b5(it.x,Et-this.worldSize/2,Et+this.worldSize/2),zt=K.x/2;Mt-zt<j&&(b=j+zt),Mt+zt>q&&(b=q-zt)}b===void 0&&A===void 0||(this.center=this.unproject(new a.P(b!==void 0?b:it.x,A!==void 0?A:it.y)).wrap()),this._unmodified=et,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,m=this.point.x,b=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b7(1,this.center.lat)*this.worldSize;let A=a.ao(new Float64Array(16));a.a0(A,A,[this.width/2,-this.height/2,1]),a.$(A,A,[1,-1,0]),this.labelPlaneMatrix=A,A=a.ao(new Float64Array(16)),a.a0(A,A,[1,-1,1]),a.$(A,A,[-1,-1,0]),a.a0(A,A,[2/this.width,2/this.height,1]),this.glCoordMatrix=A;const C=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),B=Math.min(this.elevation,this._minEleveationForCurrentTile),j=C-B*this._pixelPerMeter/Math.cos(this._pitch),q=B<0?j:C,K=Math.PI/2+this._pitch,et=this._fov*(.5+u.y/this.height),it=Math.sin(et)*q/Math.sin(a.ad(Math.PI-K-et,.01,Math.PI-.01)),dt=this.getHorizon(),Et=2*Math.atan(dt/this.cameraToCenterDistance)*(.5+u.y/(2*dt)),Mt=Math.sin(Et)*q/Math.sin(a.ad(Math.PI-K-Et,.01,Math.PI-.01)),zt=Math.min(it,Mt),At=1.01*(Math.cos(Math.PI/2-this._pitch)*zt+q),Gt=this.height/50;A=new Float64Array(16),a.b8(A,this._fov,this.width/this.height,Gt,At),A[8]=2*-u.x/this.width,A[9]=2*u.y/this.height,a.a0(A,A,[1,-1,1]),a.$(A,A,[0,0,-this.cameraToCenterDistance]),a.b9(A,A,this._pitch),a.ae(A,A,this.angle),a.$(A,A,[-m,-b,0]),this.mercatorMatrix=a.a0([],A,[this.worldSize,this.worldSize,this.worldSize]),a.a0(A,A,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.a1(new Float64Array(16),this.labelPlaneMatrix,A),a.$(A,A,[0,0,-this.elevation]),this.projMatrix=A,this.invProjMatrix=a.as([],A),this.pixelMatrix3D=a.a1(new Float64Array(16),this.labelPlaneMatrix,A);const ue=this.width%2/2,Nt=this.height%2/2,Kt=Math.cos(this.angle),he=Math.sin(this.angle),me=m-Math.round(m)+Kt*ue+he*Nt,Se=b-Math.round(b)+Kt*Nt+he*ue,Le=new Float64Array(A);if(a.$(Le,Le,[me>.5?me-1:me,Se>.5?Se-1:Se,0]),this.alignedProjMatrix=Le,A=a.as(new Float64Array(16),this.pixelMatrix),!A)throw new Error("failed to invert matrix");this.pixelMatrixInverse=A,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new a.P(0,0)),m=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.ag(m,m,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,u))}getCameraQueryGeometry(u){const m=this.getCameraPoint();if(u.length===1)return[u[0],m];{let b=m.x,A=m.y,C=m.x,B=m.y;for(const j of u)b=Math.min(b,j.x),A=Math.min(A,j.y),C=Math.max(C,j.x),B=Math.max(B,j.y);return[new a.P(b,A),new a.P(C,A),new a.P(C,B),new a.P(b,B),new a.P(b,A)]}}}function ys(E,u){let m,b=!1,A=null,C=null;const B=()=>{A=null,b&&(E.apply(C,m),A=setTimeout(B,u),b=!1)};return(...j)=>(b=!0,C=this,m=j,A||B(),A)}class ll{constructor(u){this._getCurrentHash=()=>{const m=window.location.hash.replace("#","");if(this._hashName){let b;return m.split("&").map((A=>A.split("="))).forEach((A=>{A[0]===this._hashName&&(b=A)})),(b&&b[1]||"").split("/")}return m.split("/")},this._onHashChange=()=>{const m=this._getCurrentHash();if(m.length>=3&&!m.some((b=>isNaN(b)))){const b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:b,pitch:+(m[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const m=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,m)}catch{}},this._updateHash=ys(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const m=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,A=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,A),B=Math.round(m.lng*C)/C,j=Math.round(m.lat*C)/C,q=this._map.getBearing(),K=this._map.getPitch();let et="";if(et+=u?`/${B}/${j}/${b}`:`${b}/${j}/${B}`,(q||K)&&(et+="/"+Math.round(10*q)/10),K&&(et+=`/${Math.round(K)}`),this._hashName){const it=this._hashName;let dt=!1;const Et=window.location.hash.slice(1).split("&").map((Mt=>{const zt=Mt.split("=")[0];return zt===it?(dt=!0,`${zt}=${et}`):Mt})).filter((Mt=>Mt));return dt||Et.push(`${it}=${et}`),`#${Et.join("&")}`}return`#${et}`}}const ao={linearity:.3,easing:a.ba(0,0,.3,1)},Zu=a.e({deceleration:2500,maxSpeed:1400},ao),lu=a.e({deceleration:20,maxSpeed:1400},ao),Lo=a.e({deceleration:1e3,maxSpeed:360},ao),Gu=a.e({deceleration:1e3,maxSpeed:90},ao);class Io{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.h.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,m=a.h.now();for(;u.length>0&&m-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const m={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)m.zoom+=C.zoomDelta||0,m.bearing+=C.bearingDelta||0,m.pitch+=C.pitchDelta||0,C.panDelta&&m.pan._add(C.panDelta),C.around&&(m.around=C.around),C.pinchAround&&(m.pinchAround=C.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,A={};if(m.pan.mag()){const C=Ro(m.pan.mag(),b,a.e({},Zu,u||{}));A.offset=m.pan.mult(C.amount/m.pan.mag()),A.center=this._map.transform.center,ns(A,C)}if(m.zoom){const C=Ro(m.zoom,b,lu);A.zoom=this._map.transform.zoom+C.amount,ns(A,C)}if(m.bearing){const C=Ro(m.bearing,b,Lo);A.bearing=this._map.transform.bearing+a.ad(C.amount,-179,179),ns(A,C)}if(m.pitch){const C=Ro(m.pitch,b,Gu);A.pitch=this._map.transform.pitch+C.amount,ns(A,C)}if(A.zoom||A.bearing){const C=m.pinchAround===void 0?m.around:m.pinchAround;A.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),a.e(A,{noMoveStart:!0})}}function ns(E,u){(!E.duration||E.duration<u.duration)&&(E.duration=u.duration,E.easing=u.easing)}function Ro(E,u,m){const{maxSpeed:b,linearity:A,deceleration:C}=m,B=a.ad(E*A/(u/1e3),-b,b),j=Math.abs(B)/(C*A);return{easing:m.easing,duration:1e3*j,amount:B*(j/2)}}class qr extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b,A={}){const C=_.mousePos(m.getCanvasContainer(),b),B=m.unproject(C);super(u,a.e({point:C,lngLat:B,originalEvent:b},A)),this._defaultPrevented=!1,this.target=m}}class uu extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b){const A=u==="touchend"?b.changedTouches:b.touches,C=_.touchPos(m.getCanvasContainer(),A),B=C.map((q=>m.unproject(q))),j=C.reduce(((q,K,et,it)=>q.add(K.div(it.length))),new a.P(0,0));super(u,{points:C,point:j,lngLats:B,lngLat:m.unproject(j),originalEvent:b}),this._defaultPrevented=!1}}class Bo extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b){super(u,{originalEvent:b}),this._defaultPrevented=!1}}class Bl{constructor(u,m){this._map=u,this._clickTolerance=m.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new Bo(u.type,this._map,u))}mousedown(u,m){return this._mousedownPos=m,this._firePreventable(new qr(u.type,this._map,u))}mouseup(u){this._map.fire(new qr(u.type,this._map,u))}click(u,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new qr(u.type,this._map,u))}dblclick(u){return this._firePreventable(new qr(u.type,this._map,u))}mouseover(u){this._map.fire(new qr(u.type,this._map,u))}mouseout(u){this._map.fire(new qr(u.type,this._map,u))}touchstart(u){return this._firePreventable(new uu(u.type,this._map,u))}touchmove(u){this._map.fire(new uu(u.type,this._map,u))}touchend(u){this._map.fire(new uu(u.type,this._map,u))}touchcancel(u){this._map.fire(new uu(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wu{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new qr(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new qr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new qr(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class No{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.pointLocation(a.P.convert(u),this._map.terrain)}}class Xr{constructor(u,m){this._map=u,this._tr=new No(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,m){this.isEnabled()&&u.shiftKey&&u.button===0&&(_.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(u,m){if(!this._active)return;const b=m;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const A=this._startPos;this._lastPos=b,this._box||(this._box=_.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const C=Math.min(A.x,b.x),B=Math.max(A.x,b.x),j=Math.min(A.y,b.y),q=Math.max(A.y,b.y);_.setTransform(this._box,`translate(${C}px,${j}px)`),this._box.style.width=B-C+"px",this._box.style.height=q-j+"px"}mouseupWindow(u,m){if(!this._active||u.button!==0)return;const b=this._startPos,A=m;if(this.reset(),_.suppressClick(),b.x!==A.x||b.y!==A.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:u})),{cameraAnimation:C=>C.fitScreenCoordinates(b,A,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,m){return this._map.fire(new a.k(u,{originalEvent:m}))}}function oa(E,u){if(E.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${u.length}`);const m={};for(let b=0;b<E.length;b++)m[E[b].identifier]=u[b];return m}class so{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,m,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),b.length===this.numTouches&&(this.centroid=(function(A){const C=new a.P(0,0);for(const B of A)C._add(B);return C.div(A.length)})(m),this.touches=oa(b,m)))}touchmove(u,m,b){if(this.aborted||!this.centroid)return;const A=oa(b,m);for(const C in this.touches){const B=A[C];(!B||B.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(u,m,b){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const A=!this.aborted&&this.centroid;if(this.reset(),A)return A}}}class ul{constructor(u){this.singleTap=new so(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,m,b){this.singleTap.touchstart(u,m,b)}touchmove(u,m,b){this.singleTap.touchmove(u,m,b)}touchend(u,m,b){const A=this.singleTap.touchend(u,m,b);if(A){const C=u.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(A)<30;if(C&&B||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=A,this.count===this.numTaps)return this.reset(),A}}}class jo{constructor(u){this._tr=new No(u),this._zoomIn=new ul({numTouches:1,numTaps:2}),this._zoomOut=new ul({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,m,b){this._zoomIn.touchstart(u,m,b),this._zoomOut.touchstart(u,m,b)}touchmove(u,m,b){this._zoomIn.touchmove(u,m,b),this._zoomOut.touchmove(u,m,b)}touchend(u,m,b){const A=this._zoomIn.touchend(u,m,b),C=this._zoomOut.touchend(u,m,b),B=this._tr;return A?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:B.zoom+1,around:B.unproject(A)},{originalEvent:u})}):C?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:B.zoom-1,around:B.unproject(C)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oo{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const m=this._moveFunction(...u);if(m.bearingDelta||m.pitchDelta||m.around||m.panDelta)return this._active=!0,m}dragStart(u,m){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=m.length?m[0]:m,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,m){if(!this.isEnabled())return;const b=this._lastPoint;if(!b)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const A=m.length?m[0]:m;return!this._moved&&A.dist(b)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=A,this._move(b,A))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&_.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Kf={0:1,2:2};class cl{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const m=_.mouseButton(u);this._eventButton=m}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!(function(m,b){const A=Kf[b];return m.buttons===void 0||(m.buttons&A)!==A})(u,this._eventButton)}isValidEndEvent(u){return _.mouseButton(u)===this._eventButton}}class nh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}const Ls=E=>{E.mousedown=E.dragStart,E.mousemoveWindow=E.dragMove,E.mouseup=E.dragEnd,E.contextmenu=function(u){u.preventDefault()}},Kr=({enable:E,clickTolerance:u,bearingDegreesPerPixelMoved:m=.8})=>{const b=new cl({checkCorrectEvent:A=>_.mouseButton(A)===0&&A.ctrlKey||_.mouseButton(A)===2});return new oo({clickTolerance:u,move:(A,C)=>({bearingDelta:(C.x-A.x)*m}),moveStateManager:b,enable:E,assignEvents:Ls})},is=({enable:E,clickTolerance:u,pitchDegreesPerPixelMoved:m=-.5})=>{const b=new cl({checkCorrectEvent:A=>_.mouseButton(A)===0&&A.ctrlKey||_.mouseButton(A)===2});return new oo({clickTolerance:u,move:(A,C)=>({pitchDelta:(C.y-A.y)*m}),moveStateManager:b,enable:E,assignEvents:Ls})};class Ze{constructor(u,m){this._minTouches=u.cooperativeGestures?2:1,this._clickTolerance=u.clickTolerance||1,this._map=m,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0),setTimeout((()=>{this._cancelCooperativeMessage=!1}),200)}touchstart(u,m,b){return this._calculateTransform(u,m,b)}touchmove(u,m,b){if(this._map._cooperativeGestures&&(this._minTouches===2&&b.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(u,!1,b.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(b.length<this._minTouches))return u.preventDefault(),this._calculateTransform(u,m,b)}touchend(u,m,b){this._calculateTransform(u,m,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,m,b){b.length>0&&(this._active=!0);const A=oa(b,m),C=new a.P(0,0),B=new a.P(0,0);let j=0;for(const K in A){const et=A[K],it=this._touches[K];it&&(C._add(et),B._add(et.sub(it)),j++,A[K]=et)}if(this._touches=A,j<this._minTouches||!B.mag())return;const q=B.div(j);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(j),panDelta:q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,m,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([m[0],m[1]]))}touchmove(u,m,b){if(!this._firstTwoTouches)return;u.preventDefault();const[A,C]=this._firstTwoTouches,B=Is(b,m,A),j=Is(b,m,C);if(!B||!j)return;const q=this._aroundCenter?null:B.add(j).div(2);return this._move([B,j],q,u)}touchend(u,m,b){if(!this._firstTwoTouches)return;const[A,C]=this._firstTwoTouches,B=Is(b,m,A),j=Is(b,m,C);B&&j||(this._active&&_.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Is(E,u,m){for(let b=0;b<E.length;b++)if(E[b].identifier===m)return u[b]}function lo(E,u){return Math.log(E/u)/Math.LN2}class Fo extends Qr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,m){const b=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(lo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:lo(this._distance,b),pinchAround:m}}}function Ye(E,u){return 180*E.angleWith(u)/Math.PI}class _s extends Qr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,m){const b=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ye(this._vector,b),pinchAround:m}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const m=25/(Math.PI*this._minDiameter)*360,b=Ye(u,this._startVector);return Math.abs(b)<m}}function hl(E){return Math.abs(E.y)>Math.abs(E.x)}class Yu extends Qr{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,m,b){super.touchstart(u,m,b),this._currentTouchCount=b.length}_start(u){this._lastPoints=u,hl(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,m,b){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const A=u[0].sub(this._lastPoints[0]),C=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(A,C,b.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(A.y+C.y)/2*-.5}):void 0}gestureBeginsVertically(u,m,b){if(this._valid!==void 0)return this._valid;const A=u.mag()>=2,C=m.mag()>=2;if(!A&&!C)return;if(!A||!C)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const B=u.y>0==m.y>0;return hl(u)&&hl(m)&&B}}const Uo={panStep:100,bearingStep:15,pitchStep:10};class ef{constructor(u){this._tr=new No(u);const m=Uo;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let m=0,b=0,A=0,C=0,B=0;switch(u.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:u.shiftKey?b=-1:(u.preventDefault(),C=-1);break;case 39:u.shiftKey?b=1:(u.preventDefault(),C=1);break;case 38:u.shiftKey?A=1:(u.preventDefault(),B=-1);break;case 40:u.shiftKey?A=-1:(u.preventDefault(),B=1);break;default:return}return this._rotationDisabled&&(b=0,A=0),{cameraAnimation:j=>{const q=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:Ma,zoom:m?Math.round(q.zoom)+m*(u.shiftKey?2:1):q.zoom,bearing:q.bearing+b*this._bearingStep,pitch:q.pitch+A*this._pitchStep,offset:[-C*this._panStep,-B*this._panStep],center:q.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ma(E){return E*(2-E)}const Xu=4.000244140625;class uo{constructor(u,m){this._onTimeout=b=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},this._map=u,this._tr=new No(u),this._el=u.getCanvasContainer(),this._triggerRenderFrame=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!u[this._map._metaKey])return;u.preventDefault()}let m=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const b=a.h.now(),A=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,m!==0&&m%Xu==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":A>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(A*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),u.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=u,this._delta-=m,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=_.mousePos(this._el,u),b=this._tr;this._around=a.L.convert(this._aroundCenter?b.center:b.unproject(m)),this._aroundPoint=b.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>Xu?this._wheelZoomRate:this._defaultZoomRate;let q=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&q!==0&&(q=1/q);const K=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(K*q))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,b=this._startZoom,A=this._easing;let C,B=!1;if(this._type==="wheel"&&b&&A){const j=Math.min((a.h.now()-this._lastWheelEventTime)/200,1),q=A(j);C=a.B.number(b,m,q),j<1?this._frameId||(this._frameId=!0):B=!0}else C=m,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!B,zoomDelta:C-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let m=a.bb;if(this._prevEase){const b=this._prevEase,A=(a.h.now()-b.start)/b.duration,C=b.easing(A+.01)-b.easing(A),B=.27/Math.sqrt(C*C+1e-4)*.01,j=Math.sqrt(.0729-B*B);m=a.ba(B,j,.25,1)}return this._prevEase={start:a.h.now(),duration:u,easing:m},m}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ku{constructor(u,m){this._clickZoom=u,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Nl{constructor(u){this._tr=new No(u),this.reset()}reset(){this._active=!1}dblclick(u,m){return u.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(m)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vo{constructor(){this._tap=new ul({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,m,b){if(!this._swipePoint)if(this._tapTime){const A=m[0],C=u.timeStamp-this._tapTime<500,B=this._tapPoint.dist(A)<30;C&&B?b.length>0&&(this._swipePoint=A,this._swipeTouch=b[0].identifier):this.reset()}else this._tap.touchstart(u,m,b)}touchmove(u,m,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const A=m[0],C=A.y-this._swipePoint.y;return this._swipePoint=A,u.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(u,m,b)}touchend(u,m,b){if(this._tapTime)this._swipePoint&&b.length===0&&this.reset();else{const A=this._tap.touchend(u,m,b);A&&(this._tapTime=u.timeStamp,this._tapPoint=A)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cu{constructor(u,m,b){this._el=u,this._mousePan=m,this._touchPan=b}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class la{constructor(u,m,b){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=m,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class co{constructor(u,m,b,A){this._el=u,this._touchZoom=m,this._touchRotate=b,this._tapDragZoom=A,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const p=E=>E.zoom||E.drag||E.pitch||E.rotate;class w extends a.k{}function D(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class ${constructor(u,m){this.handleWindowEvent=A=>{this.handleEvent(A,`${A.type}Window`)},this.handleEvent=(A,C)=>{if(A.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const B=A.type==="renderFrame"?void 0:A,j={needsRenderFrame:!1},q={},K={},et=A.touches,it=et?this._getMapTouches(et):void 0,dt=it?_.touchPos(this._el,it):_.mousePos(this._el,A);for(const{handlerName:zt,handler:At,allowed:Gt}of this._handlers){if(!At.isEnabled())continue;let ue;this._blockedByActive(K,Gt,zt)?At.reset():At[C||A.type]&&(ue=At[C||A.type](A,dt,it),this.mergeHandlerResult(j,q,ue,zt,B),ue&&ue.needsRenderFrame&&this._triggerRenderFrame()),(ue||At.isActive())&&(K[zt]=At)}const Et={};for(const zt in this._previousActiveHandlers)K[zt]||(Et[zt]=B);this._previousActiveHandlers=K,(Object.keys(Et).length||D(j))&&(this._changes.push([j,q,Et]),this._triggerRenderFrame()),(Object.keys(K).length||D(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Mt}=j;Mt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Mt(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Io(u),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(m);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[A,C,B]of this._listeners)_.addEventListener(A,C,A===document?this.handleWindowEvent:this.handleEvent,B)}destroy(){for(const[u,m,b]of this._listeners)_.removeEventListener(u,m,u===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(u){const m=this._map,b=m.getCanvasContainer();this._add("mapEvent",new Bl(m,u));const A=m.boxZoom=new Xr(m,u);this._add("boxZoom",A),u.interactive&&u.boxZoom&&A.enable();const C=new jo(m),B=new Nl(m);m.doubleClickZoom=new Ku(B,C),this._add("tapZoom",C),this._add("clickZoom",B),u.interactive&&u.doubleClickZoom&&m.doubleClickZoom.enable();const j=new Vo;this._add("tapDragZoom",j);const q=m.touchPitch=new Yu(m);this._add("touchPitch",q),u.interactive&&u.touchPitch&&m.touchPitch.enable(u.touchPitch);const K=Kr(u),et=is(u);m.dragRotate=new la(u,K,et),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",et,["mouseRotate"]),u.interactive&&u.dragRotate&&m.dragRotate.enable();const it=(({enable:Gt,clickTolerance:ue})=>{const Nt=new cl({checkCorrectEvent:Kt=>_.mouseButton(Kt)===0&&!Kt.ctrlKey});return new oo({clickTolerance:ue,move:(Kt,he)=>({around:he,panDelta:he.sub(Kt)}),activateOnStart:!0,moveStateManager:Nt,enable:Gt,assignEvents:Ls})})(u),dt=new Ze(u,m);m.dragPan=new cu(b,it,dt),this._add("mousePan",it),this._add("touchPan",dt,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&m.dragPan.enable(u.dragPan);const Et=new _s,Mt=new Fo;m.touchZoomRotate=new co(b,Mt,Et,j),this._add("touchRotate",Et,["touchPan","touchZoom"]),this._add("touchZoom",Mt,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&m.touchZoomRotate.enable(u.touchZoomRotate);const zt=m.scrollZoom=new uo(m,(()=>this._triggerRenderFrame()));this._add("scrollZoom",zt,["mousePan"]),u.interactive&&u.scrollZoom&&m.scrollZoom.enable(u.scrollZoom);const At=m.keyboard=new ef(m);this._add("keyboard",At),u.interactive&&u.keyboard&&m.keyboard.enable(),this._add("blockableMapEvent",new Wu(m))}_add(u,m,b){this._handlers.push({handlerName:u,handler:m,allowed:b}),this._handlersById[u]=m}stop(u){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!p(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,m,b){for(const A in u)if(A!==b&&(!m||m.indexOf(A)<0))return!0;return!1}_getMapTouches(u){const m=[];for(const b of u)this._el.contains(b.target)&&m.push(b);return m}mergeHandlerResult(u,m,b,A,C){if(!b)return;a.e(u,b);const B={handlerName:A,originalEvent:b.originalEvent||C};b.zoomDelta!==void 0&&(m.zoom=B),b.panDelta!==void 0&&(m.drag=B),b.pitchDelta!==void 0&&(m.pitch=B),b.bearingDelta!==void 0&&(m.rotate=B)}_applyChanges(){const u={},m={},b={};for(const[A,C,B]of this._changes)A.panDelta&&(u.panDelta=(u.panDelta||new a.P(0,0))._add(A.panDelta)),A.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+A.zoomDelta),A.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+A.bearingDelta),A.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+A.pitchDelta),A.around!==void 0&&(u.around=A.around),A.pinchAround!==void 0&&(u.pinchAround=A.pinchAround),A.noInertia&&(u.noInertia=A.noInertia),a.e(m,C),a.e(b,B);this._updateMapTransform(u,m,b),this._changes=[]}_updateMapTransform(u,m,b){const A=this._map,C=A._getTransformForUpdate(),B=A.terrain;if(!(D(u)||B&&this._terrainMovement))return this._fireEvents(m,b,!0);let{panDelta:j,zoomDelta:q,bearingDelta:K,pitchDelta:et,around:it,pinchAround:dt}=u;dt!==void 0&&(it=dt),A._stop(!0),it=it||A.transform.centerPoint;const Et=C.pointLocation(j?it.sub(j):it);K&&(C.bearing+=K),et&&(C.pitch+=et),q&&(C.zoom+=q),B?this._terrainMovement||!m.drag&&!m.zoom?m.drag&&this._terrainMovement?C.center=C.pointLocation(C.centerPoint.sub(j)):C.setLocationAtPoint(Et,it):(this._terrainMovement=!0,this._map._elevationFreeze=!0,C.setLocationAtPoint(Et,it),this._map.once("moveend",(()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,C.recalculateZoom(A.terrain)}))):C.setLocationAtPoint(Et,it),A._applyUpdatedTransform(C),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(m,b,!0)}_fireEvents(u,m,b){const A=p(this._eventsInProgress),C=p(u),B={};for(const et in u){const{originalEvent:it}=u[et];this._eventsInProgress[et]||(B[`${et}start`]=it),this._eventsInProgress[et]=u[et]}!A&&C&&this._fireEvent("movestart",C.originalEvent);for(const et in B)this._fireEvent(et,B[et]);C&&this._fireEvent("move",C.originalEvent);for(const et in u){const{originalEvent:it}=u[et];this._fireEvent(et,it)}const j={};let q;for(const et in this._eventsInProgress){const{handlerName:it,originalEvent:dt}=this._eventsInProgress[et];this._handlersById[it].isActive()||(delete this._eventsInProgress[et],q=m[it]||dt,j[`${et}end`]=q)}for(const et in j)this._fireEvent(et,j[et]);const K=p(this._eventsInProgress);if(b&&(A||C)&&!K){this._updatingCamera=!0;const et=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),it=dt=>dt!==0&&-this._bearingSnap<dt&&dt<this._bearingSnap;!et||!et.essential&&a.h.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:q})),it(this._map.getBearing())&&this._map.resetNorth()):(it(et.bearing||this._map.getBearing())&&(et.bearing=0),et.freezeElevation=!0,this._map.easeTo(et,{originalEvent:q})),this._updatingCamera=!1}}_fireEvent(u,m){this._map.fire(new a.k(u,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((u=>{delete this._frameId,this.handleEvent(new w("renderFrame",{timeStamp:u})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class nt extends a.E{constructor(u,m){super(),this._renderFrameCallback=()=>{const b=Math.min((a.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=m.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new a.L(this.transform.center.lng,this.transform.center.lat)}setCenter(u,m){return this.jumpTo({center:u},m)}panBy(u,m,b){return u=a.P.convert(u).mult(-1),this.panTo(this.transform.center,a.e({offset:u},m),b)}panTo(u,m,b){return this.easeTo(a.e({center:u},m),b)}getZoom(){return this.transform.zoom}setZoom(u,m){return this.jumpTo({zoom:u},m),this}zoomTo(u,m,b){return this.easeTo(a.e({zoom:u},m),b)}zoomIn(u,m){return this.zoomTo(this.getZoom()+1,u,m),this}zoomOut(u,m){return this.zoomTo(this.getZoom()-1,u,m),this}getBearing(){return this.transform.bearing}setBearing(u,m){return this.jumpTo({bearing:u},m),this}getPadding(){return this.transform.padding}setPadding(u,m){return this.jumpTo({padding:u},m),this}rotateTo(u,m,b){return this.easeTo(a.e({bearing:u},m),b)}resetNorth(u,m){return this.rotateTo(0,a.e({duration:1e3},u),m),this}resetNorthPitch(u,m){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},u),m),this}snapToNorth(u,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,m):this}getPitch(){return this.transform.pitch}setPitch(u,m){return this.jumpTo({pitch:u},m),this}cameraForBounds(u,m){u=$t.convert(u);const b=m&&m.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),b,m)}_cameraForBoxAndBearing(u,m,b,A){const C={top:0,bottom:0,right:0,left:0};if(typeof(A=a.e({padding:C,offset:[0,0],maxZoom:this.transform.maxZoom},A)).padding=="number"){const he=A.padding;A.padding={top:he,bottom:he,right:he,left:he}}A.padding=a.e(C,A.padding);const B=this.transform,j=B.padding,q=B.project(a.L.convert(u)),K=B.project(a.L.convert(m)),et=q.rotate(-b*Math.PI/180),it=K.rotate(-b*Math.PI/180),dt=new a.P(Math.max(et.x,it.x),Math.max(et.y,it.y)),Et=new a.P(Math.min(et.x,it.x),Math.min(et.y,it.y)),Mt=dt.sub(Et),zt=(B.width-(j.left+j.right+A.padding.left+A.padding.right))/Mt.x,At=(B.height-(j.top+j.bottom+A.padding.top+A.padding.bottom))/Mt.y;if(At<0||zt<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Gt=Math.min(B.scaleZoom(B.scale*Math.min(zt,At)),A.maxZoom),ue=a.P.convert(A.offset),Nt=new a.P((A.padding.left-A.padding.right)/2,(A.padding.top-A.padding.bottom)/2).rotate(b*Math.PI/180),Kt=ue.add(Nt).mult(B.scale/B.zoomScale(Gt));return{center:B.unproject(q.add(K).div(2).sub(Kt)),zoom:Gt,bearing:b}}fitBounds(u,m,b){return this._fitInternal(this.cameraForBounds(u,m),m,b)}fitScreenCoordinates(u,m,b,A,C){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(u)),this.transform.pointLocation(a.P.convert(m)),b,A),A,C)}_fitInternal(u,m,b){return u?(delete(m=a.e(u,m)).padding,m.linear?this.easeTo(m,b):this.flyTo(m,b)):this}jumpTo(u,m){this.stop();const b=this._getTransformForUpdate();let A=!1,C=!1,B=!1;return"zoom"in u&&b.zoom!==+u.zoom&&(A=!0,b.zoom=+u.zoom),u.center!==void 0&&(b.center=a.L.convert(u.center)),"bearing"in u&&b.bearing!==+u.bearing&&(C=!0,b.bearing=+u.bearing),"pitch"in u&&b.pitch!==+u.pitch&&(B=!0,b.pitch=+u.pitch),u.padding==null||b.isPaddingEqual(u.padding)||(b.padding=u.padding),this._applyUpdatedTransform(b),this.fire(new a.k("movestart",m)).fire(new a.k("move",m)),A&&this.fire(new a.k("zoomstart",m)).fire(new a.k("zoom",m)).fire(new a.k("zoomend",m)),C&&this.fire(new a.k("rotatestart",m)).fire(new a.k("rotate",m)).fire(new a.k("rotateend",m)),B&&this.fire(new a.k("pitchstart",m)).fire(new a.k("pitch",m)).fire(new a.k("pitchend",m)),this.fire(new a.k("moveend",m))}calculateCameraOptionsFromTo(u,m,b,A=0){const C=a.U.fromLngLat(u,m),B=a.U.fromLngLat(b,A),j=B.x-C.x,q=B.y-C.y,K=B.z-C.z,et=Math.hypot(j,q,K);if(et===0)throw new Error("Can't calculate camera options with same From and To");const it=Math.hypot(j,q),dt=this.transform.scaleZoom(this.transform.cameraToCenterDistance/et/this.transform.tileSize),Et=180*Math.atan2(j,-q)/Math.PI;let Mt=180*Math.acos(it/et)/Math.PI;return Mt=K<0?90-Mt:90+Mt,{center:B.toLngLat(),zoom:dt,pitch:Mt,bearing:Et}}easeTo(u,m){this._stop(!1,u.easeId),((u=a.e({offset:[0,0],duration:500,easing:a.bb},u)).animate===!1||!u.essential&&a.h.prefersReducedMotion)&&(u.duration=0);const b=this._getTransformForUpdate(),A=this.getZoom(),C=this.getBearing(),B=this.getPitch(),j=this.getPadding(),q="zoom"in u?+u.zoom:A,K="bearing"in u?this._normalizeBearing(u.bearing,C):C,et="pitch"in u?+u.pitch:B,it="padding"in u?u.padding:b.padding,dt=a.P.convert(u.offset);let Et=b.centerPoint.add(dt);const Mt=b.pointLocation(Et),zt=a.L.convert(u.center||Mt);this._normalizeCenter(zt);const At=b.project(Mt),Gt=b.project(zt).sub(At),ue=b.zoomScale(q-A);let Nt,Kt;u.around&&(Nt=a.L.convert(u.around),Kt=b.locationPoint(Nt));const he={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||q!==A,this._rotating=this._rotating||C!==K,this._pitching=this._pitching||et!==B,this._padding=!b.isPaddingEqual(it),this._easeId=u.easeId,this._prepareEase(m,u.noMoveStart,he),this.terrain&&this._prepareElevation(zt),this._ease((me=>{if(this._zooming&&(b.zoom=a.B.number(A,q,me)),this._rotating&&(b.bearing=a.B.number(C,K,me)),this._pitching&&(b.pitch=a.B.number(B,et,me)),this._padding&&(b.interpolatePadding(j,it,me),Et=b.centerPoint.add(dt)),this.terrain&&!u.freezeElevation&&this._updateElevation(me),Nt)b.setLocationAtPoint(Nt,Kt);else{const Se=b.zoomScale(b.zoom-A),Le=q>A?Math.min(2,ue):Math.max(.5,ue),ke=Math.pow(Le,1-me),Ne=b.unproject(At.add(Gt.mult(me*ke)).mult(Se));b.setLocationAtPoint(b.renderWorldCopies?Ne.wrap():Ne,Et)}this._applyUpdatedTransform(b),this._fireMoveEvents(m)}),(me=>{this.terrain&&this._finalizeElevation(),this._afterEase(m,me)}),u),this}_prepareEase(u,m,b={}){this._moving=!0,m||b.moving||this.fire(new a.k("movestart",u)),this._zooming&&!b.zooming&&this.fire(new a.k("zoomstart",u)),this._rotating&&!b.rotating&&this.fire(new a.k("rotatestart",u)),this._pitching&&!b.pitching&&this.fire(new a.k("pitchstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const m=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&m!==this._elevationTarget){const b=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(b-(m-(b*u+this._elevationStart))/(1-u)),this._elevationTarget=m}this.transform.elevation=a.B.number(this._elevationStart,this._elevationTarget,u)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(u){if(!this.transformCameraUpdate)return;const m=u.clone(),{center:b,zoom:A,pitch:C,bearing:B,elevation:j}=this.transformCameraUpdate(m);b&&(m.center=b),A!==void 0&&(m.zoom=A),C!==void 0&&(m.pitch=C),B!==void 0&&(m.bearing=B),j!==void 0&&(m.elevation=j),this.transform.apply(m)}_fireMoveEvents(u){this.fire(new a.k("move",u)),this._zooming&&this.fire(new a.k("zoom",u)),this._rotating&&this.fire(new a.k("rotate",u)),this._pitching&&this.fire(new a.k("pitch",u))}_afterEase(u,m){if(this._easeId&&m&&this._easeId===m)return;delete this._easeId;const b=this._zooming,A=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new a.k("zoomend",u)),A&&this.fire(new a.k("rotateend",u)),C&&this.fire(new a.k("pitchend",u)),this.fire(new a.k("moveend",u))}flyTo(u,m){if(!u.essential&&a.h.prefersReducedMotion){const on=a.F(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(on,m)}this.stop(),u=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.bb},u);const b=this._getTransformForUpdate(),A=this.getZoom(),C=this.getBearing(),B=this.getPitch(),j=this.getPadding(),q="zoom"in u?a.ad(+u.zoom,b.minZoom,b.maxZoom):A,K="bearing"in u?this._normalizeBearing(u.bearing,C):C,et="pitch"in u?+u.pitch:B,it="padding"in u?u.padding:b.padding,dt=b.zoomScale(q-A),Et=a.P.convert(u.offset);let Mt=b.centerPoint.add(Et);const zt=b.pointLocation(Mt),At=a.L.convert(u.center||zt);this._normalizeCenter(At);const Gt=b.project(zt),ue=b.project(At).sub(Gt);let Nt=u.curve;const Kt=Math.max(b.width,b.height),he=Kt/dt,me=ue.mag();if("minZoom"in u){const on=a.ad(Math.min(u.minZoom,A,q),b.minZoom,b.maxZoom),Ei=Kt/b.zoomScale(on-A);Nt=Math.sqrt(Ei/me*2)}const Se=Nt*Nt;function Le(on){const Ei=(he*he-Kt*Kt+(on?-1:1)*Se*Se*me*me)/(2*(on?he:Kt)*Se*me);return Math.log(Math.sqrt(Ei*Ei+1)-Ei)}function ke(on){return(Math.exp(on)-Math.exp(-on))/2}function Ne(on){return(Math.exp(on)+Math.exp(-on))/2}const sn=Le(!1);let qn=function(on){return Ne(sn)/Ne(sn+Nt*on)},$e=function(on){return Kt*((Ne(sn)*(ke(Ei=sn+Nt*on)/Ne(Ei))-ke(sn))/Se)/me;var Ei},fn=(Le(!0)-sn)/Nt;if(Math.abs(me)<1e-6||!isFinite(fn)){if(Math.abs(Kt-he)<1e-6)return this.easeTo(u,m);const on=he<Kt?-1:1;fn=Math.abs(Math.log(he/Kt))/Nt,$e=function(){return 0},qn=function(Ei){return Math.exp(on*Nt*Ei)}}return u.duration="duration"in u?+u.duration:1e3*fn/("screenSpeed"in u?+u.screenSpeed/Nt:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=C!==K,this._pitching=et!==B,this._padding=!b.isPaddingEqual(it),this._prepareEase(m,!1),this.terrain&&this._prepareElevation(At),this._ease((on=>{const Ei=on*fn,Ln=1/qn(Ei);b.zoom=on===1?q:A+b.scaleZoom(Ln),this._rotating&&(b.bearing=a.B.number(C,K,on)),this._pitching&&(b.pitch=a.B.number(B,et,on)),this._padding&&(b.interpolatePadding(j,it,on),Mt=b.centerPoint.add(Et)),this.terrain&&!u.freezeElevation&&this._updateElevation(on);const Pn=on===1?At:b.unproject(Gt.add(ue.mult($e(Ei))).mult(Ln));b.setLocationAtPoint(b.renderWorldCopies?Pn.wrap():Pn,Mt),this._applyUpdatedTransform(b),this._fireMoveEvents(m)}),(()=>{this.terrain&&this._finalizeElevation(),this._afterEase(m)}),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,m)}if(!u){const b=this.handlers;b&&b.stop(!1)}return this}_ease(u,m,b){b.animate===!1||b.duration===0?(u(1),m()):(this._easeStart=a.h.now(),this._easeOptions=b,this._onEaseFrame=u,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,m){u=a.b5(u,-180,180);const b=Math.abs(u-m);return Math.abs(u-360-m)<b&&(u-=360),Math.abs(u+360-m)<b&&(u+=360),u}_normalizeCenter(u){const m=this.transform;if(!m.renderWorldCopies||m.lngRange)return;const b=u.lng-m.center.lng;u.lng+=b>180?-360:b<-180?360:0}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(a.L.convert(u),this.transform.tileZoom)-this.transform.elevation:null}}class mt{constructor(u={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=m=>{!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"&&m.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options&&this.options.compact,this._container=_.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=_.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,m){const b=this._map._getUIString(`AttributionControl.${m}`);u.title=b,u.setAttribute("aria-label",b)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map((A=>typeof A!="string"?"":A))):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const A=this._map.style.stylesheet;this.styleOwner=A.owner,this.styleId=A.id}const m=this._map.style.sourceCaches;for(const A in m){const C=m[A];if(C.used||C.usedForTerrain){const B=C.getSource();B.attribution&&u.indexOf(B.attribution)<0&&u.push(B.attribution)}}u=u.filter((A=>String(A).trim())),u.sort(((A,C)=>A.length-C.length)),u=u.filter(((A,C)=>{for(let B=C+1;B<u.length;B++)if(u[B].indexOf(A)>=0)return!1;return!0}));const b=u.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,u.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Rt{constructor(u={}){this._updateCompact=()=>{const m=this._container.children;if(m.length){const b=m[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&b.classList.add("maplibregl-compact"):b.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=_.create("div","maplibregl-ctrl");const m=_.create("a","maplibregl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://maplibre.org/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){_.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ae{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const m=++this._id;return this._queue.push({callback:u,id:m,cancelled:!1}),m}remove(u){const m=this._currentlyRunning,b=m?this._queue.concat(m):this._queue;for(const A of b)if(A.id===u)return void(A.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const m=this._currentlyRunning=this._queue;this._queue=[];for(const b of m)if(!b.cancelled&&(b.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const pe={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Oe=a.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Ke extends a.E{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(u,m){this.sourceCache.update(u,m),this._renderableTilesKeys=[];const b={};for(const A of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:m}))b[A.key]=!0,this._renderableTilesKeys.push(A.key),this._tiles[A.key]||(A.posMatrix=new Float64Array(16),a.aS(A.posMatrix,0,a.N,0,a.N,0,1),this._tiles[A.key]=new an(A,this.tileSize));for(const A in this._tiles)b[A]||delete this._tiles[A]}freeRtt(u){for(const m in this._tiles){const b=this._tiles[m];(!u||b.tileID.equals(u)||b.tileID.isChildOf(u)||u.isChildOf(b.tileID))&&(b.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((u=>this.getTileByID(u)))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const m={};for(const b of this._renderableTilesKeys){const A=this._tiles[b].tileID;if(A.canonical.equals(u.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16),a.aS(C.posMatrix,0,a.N,0,a.N,0,1),m[b]=C}else if(A.canonical.isChildOf(u.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16);const B=A.canonical.z-u.canonical.z,j=A.canonical.x-(A.canonical.x>>B<<B),q=A.canonical.y-(A.canonical.y>>B<<B),K=a.N>>B;a.aS(C.posMatrix,0,K,0,K,0,1),a.$(C.posMatrix,C.posMatrix,[-j*K,-q*K,0]),m[b]=C}else if(u.canonical.isChildOf(A.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16);const B=u.canonical.z-A.canonical.z,j=u.canonical.x-(u.canonical.x>>B<<B),q=u.canonical.y-(u.canonical.y>>B<<B),K=a.N>>B;a.aS(C.posMatrix,0,a.N,0,a.N,0,1),a.$(C.posMatrix,C.posMatrix,[j*K,q*K,0]),a.a0(C.posMatrix,C.posMatrix,[1/2**B,1/2**B,0]),m[b]=C}}return m}getSourceTile(u,m){const b=this.sourceCache._source;let A=u.overscaledZ-this.deltaZoom;if(A>b.maxzoom&&(A=b.maxzoom),A<b.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(A).key);let C=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!C||!C.dem)&&m)for(;A>=b.minzoom&&(!C||!C.dem);)C=this.sourceCache.getTileByID(u.scaledTo(A--).key);return C}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter((m=>m.timeAdded>=u))}}class yn{constructor(u,m,b){this.painter=u,this.sourceCache=new Ke(m),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,m,b,A=a.N){var C;if(!(m>=0&&m<A&&b>=0&&b<A))return 0;const B=this.getTerrainData(u),j=(C=B.tile)===null||C===void 0?void 0:C.dem;if(!j)return 0;const q=(function(Mt,zt,At){var Gt=zt[0],ue=zt[1];return Mt[0]=At[0]*Gt+At[4]*ue+At[12],Mt[1]=At[1]*Gt+At[5]*ue+At[13],Mt})([],[m/A*a.N,b/A*a.N],B.u_terrain_matrix),K=[q[0]*j.dim,q[1]*j.dim],et=Math.floor(K[0]),it=Math.floor(K[1]),dt=K[0]-et,Et=K[1]-it;return j.get(et,it)*(1-dt)*(1-Et)+j.get(et+1,it)*dt*(1-Et)+j.get(et,it+1)*(1-dt)*Et+j.get(et+1,it+1)*dt*Et}getElevationForLngLatZoom(u,m){const{tileID:b,mercatorX:A,mercatorY:C}=this._getOverscaledTileIDFromLngLatZoom(u,m);return this.getElevation(b,A%a.N,C%a.N,a.N)}getElevation(u,m,b,A=a.N){return this.getDEMElevation(u,m,b,A)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const A=this.painter.context,C=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new _t(A,C,A.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new _t(A,new a.R({width:1,height:1}),A.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(A.gl.NEAREST,A.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ao([])}const m=this.sourceCache.getSourceTile(u,!0);if(m&&m.dem&&(!m.demTexture||m.needsTerrainPrepare)){const A=this.painter.context;m.demTexture=this.painter.getTileTexture(m.dem.stride),m.demTexture?m.demTexture.update(m.dem.getPixels(),{premultiply:!1}):m.demTexture=new _t(A,m.dem.getPixels(),A.gl.RGBA,{premultiply:!1}),m.demTexture.bind(A.gl.NEAREST,A.gl.CLAMP_TO_EDGE),m.needsTerrainPrepare=!1}const b=m&&m+m.tileID.key+u.key;if(b&&!this._demMatrixCache[b]){const A=this.sourceCache.sourceCache._source.maxzoom;let C=u.canonical.z-m.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=A?C=u.canonical.z-A:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const B=u.canonical.x-(u.canonical.x>>C<<C),j=u.canonical.y-(u.canonical.y>>C<<C),q=a.bc(new Float64Array(16),[1/(a.N<<C),1/(a.N<<C),0]);a.$(q,q,[B*a.N,j*a.N,0]),this._demMatrixCache[u.key]={matrix:q,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:m&&m.dem&&m.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:m&&m.dem&&m.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(m&&m.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:m}}getFramebuffer(u){const m=this.painter,b=m.width/devicePixelRatio,A=m.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===A||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new _t(m.context,{width:b,height:A,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new _t(m.context,{width:b,height:A,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=m.context.createFramebuffer(b,A,!0,!1),this._fbo.depthAttachment.set(m.context.createRenderbuffer(m.context.gl.DEPTH_COMPONENT16,b,A))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const m=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let C=0,B=0;C<this._coordsTextureSize;C++)for(let j=0;j<this._coordsTextureSize;j++,B+=4)m[B+0]=255&j,m[B+1]=255&C,m[B+2]=j>>8<<4|C>>8,m[B+3]=0;const b=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(m.buffer)),A=new _t(u,b,u.gl.RGBA,{premultiply:!1});return A.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=A,A}pointCoordinate(u){const m=new Uint8Array(4),b=this.painter.context,A=b.gl;b.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),A.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,A.RGBA,A.UNSIGNED_BYTE,m),b.bindFramebuffer.set(null);const C=m[0]+(m[2]>>4<<8),B=m[1]+((15&m[2])<<8),j=this.coordsIndex[255-m[3]],q=j&&this.sourceCache.getTileByID(j);if(!q)return null;const K=this._coordsTextureSize,et=(1<<q.tileID.canonical.z)*K;return new a.U(this._allowMercatorOverflow(u,(q.tileID.canonical.x*K+C)/et),(q.tileID.canonical.y*K+B)/et,this.getElevation(q.tileID,C,B,K))}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.painter.context,m=new a.bd,b=new a.b0,A=this.meshSize,C=a.N/A,B=A*A;for(let it=0;it<=A;it++)for(let dt=0;dt<=A;dt++)m.emplaceBack(dt*C,it*C,0);for(let it=0;it<B;it+=A+1)for(let dt=0;dt<A;dt++)b.emplaceBack(dt+it,A+dt+it+1,A+dt+it+2),b.emplaceBack(dt+it,A+dt+it+2,dt+it+1);const j=m.length,q=j+2*(A+1);for(const it of[0,1])for(let dt=0;dt<=A;dt++)for(const Et of[0,1])m.emplaceBack(dt*C,it*a.N,Et);for(let it=0;it<2*A;it+=2)b.emplaceBack(q+it,q+it+1,q+it+3),b.emplaceBack(q+it,q+it+3,q+it+2),b.emplaceBack(j+it,j+it+3,j+it+1),b.emplaceBack(j+it,j+it+2,j+it+3);const K=m.length,et=K+2*(A+1);for(const it of[0,1])for(let dt=0;dt<=A;dt++)for(const Et of[0,1])m.emplaceBack(it*a.N,dt*C,Et);for(let it=0;it<2*A;it+=2)b.emplaceBack(K+it,K+it+1,K+it+3),b.emplaceBack(K+it,K+it+3,K+it+2),b.emplaceBack(et+it,et+it+3,et+it+1),b.emplaceBack(et+it,et+it+2,et+it+3);return this._mesh={indexBuffer:u.createIndexBuffer(b),vertexBuffer:u.createVertexBuffer(m,Oe.members),segments:a.S.simpleSegment(0,0,m.length,b.length)},this._mesh}getMeshFrameDelta(u){return 2*Math.PI*a.be/Math.pow(2,u)/5}getMinTileElevationForLngLatZoom(u,m){var b;const{tileID:A}=this._getOverscaledTileIDFromLngLatZoom(u,m);return(b=this.getMinMaxElevation(A).minElevation)!==null&&b!==void 0?b:0}getMinMaxElevation(u){const m=this.getTerrainData(u).tile,b={minElevation:null,maxElevation:null};return m&&m.dem&&(b.minElevation=m.dem.min*this.exaggeration,b.maxElevation=m.dem.max*this.exaggeration),b}_getOverscaledTileIDFromLngLatZoom(u,m){const b=a.U.fromLngLat(u.wrap()),A=(1<<m)*a.N,C=b.x*A,B=b.y*A,j=Math.floor(C/a.N),q=Math.floor(B/a.N);return{tileID:new a.O(m,0,m,j,q),mercatorX:C,mercatorY:B}}_allowMercatorOverflow(u,m){const b=u.x<this.painter.width/2;let A=a.bf(m);const C=this.painter.transform.center.lng;return b&&Math.sign(A)>0&&Math.sign(C)<0||!b&&Math.sign(A)<0&&Math.sign(C)>0?(A=360*Math.sign(C)+A,a.G(A)):m}}class $n{constructor(u,m,b){this._context=u,this._size=m,this._tileSize=b,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const m=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),b=new _t(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return b.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),m.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),m.colorAttachment.set(b.texture),{id:u,fbo:m,texture:b,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((m=>u.id!==m)),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const m of this._recentlyUsed)if(!this._objects[m].inUse)return this._objects[m];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((u=>!u.inUse))===!1}}const ci={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class tr{constructor(u,m){this.painter=u,this.terrain=m,this.pool=new $n(u.context,30,m.sourceCache.tileSize*m.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,m){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=u._order.filter((b=>!u._layers[b].isHidden(m))),this._coordsDescendingInv={};for(const b in u.sourceCaches){this._coordsDescendingInv[b]={};const A=u.sourceCaches[b].getVisibleCoordinates();for(const C of A){const B=this.terrain.sourceCache.getTerrainCoords(C);for(const j in B)this._coordsDescendingInv[b][j]||(this._coordsDescendingInv[b][j]=[]),this._coordsDescendingInv[b][j].push(B[j])}}this._coordsDescendingInvStr={};for(const b of u._order){const A=u._layers[b],C=A.source;if(ci[A.type]&&!this._coordsDescendingInvStr[C]){this._coordsDescendingInvStr[C]={};for(const B in this._coordsDescendingInv[C])this._coordsDescendingInvStr[C][B]=this._coordsDescendingInv[C][B].map((j=>j.key)).sort().join()}}for(const b of this._renderableTiles)for(const A in this._coordsDescendingInvStr){const C=this._coordsDescendingInvStr[A][b.tileID.key];C&&C!==b.rttCoords[A]&&(b.rtt=[])}}renderLayer(u){if(u.isHidden(this.painter.transform.zoom))return!1;const m=u.type,b=this.painter,A=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(ci[m]&&(this._prevType&&ci[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(u.id),!A))return!0;if(ci[this._prevType]||ci[m]&&A){this._prevType=m;const C=this._stacks.length-1,B=this._stacks[C]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(ui(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[C]){const K=this.pool.getObjectForId(j.rtt[C].id);if(K.stamp===j.rtt[C].stamp){this.pool.useObject(K);continue}}const q=this.pool.getOrCreateFreeObject();this.pool.useObject(q),this.pool.stampObject(q),j.rtt[C]={id:q.id,stamp:q.stamp},b.context.bindFramebuffer.set(q.fbo.framebuffer),b.context.clear({color:a.aT.transparent,stencil:0}),b.currentStencilSource=void 0;for(let K=0;K<B.length;K++){const et=b.style._layers[B[K]],it=et.source?this._coordsDescendingInv[et.source][j.tileID.key]:[j.tileID];b.context.viewport.set([0,0,q.fbo.width,q.fbo.height]),b._renderTileClippingMasks(et,it),b.renderLayer(b,b.style.sourceCaches[et.source],et,it),et.source&&(j.rttCoords[et.source]=this._coordsDescendingInvStr[et.source][j.tileID.key])}}return ui(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ci[m]}return!1}}const Qe=g,Ge={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},ri=E=>{E.touchstart=E.dragStart,E.touchmoveWindow=E.dragMove,E.touchend=E.dragEnd},Xn={showCompass:!0,showZoom:!0,visualizePitch:!1};class ho{constructor(u,m,b=!1){this.mousedown=B=>{this.startMouse(a.e({},B,{ctrlKey:!0,preventDefault:()=>B.preventDefault()}),_.mousePos(this.element,B)),_.addEventListener(window,"mousemove",this.mousemove),_.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=B=>{this.moveMouse(B,_.mousePos(this.element,B))},this.mouseup=B=>{this.mouseRotate.dragEnd(B),this.mousePitch&&this.mousePitch.dragEnd(B),this.offTemp()},this.touchstart=B=>{B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,B.targetTouches)[0],this.startTouch(B,this._startPos),_.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.addEventListener(window,"touchend",this.touchend))},this.touchmove=B=>{B.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,B.targetTouches)[0],this.moveTouch(B,this._lastPos))},this.touchend=B=>{B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const A=u.dragRotate._mouseRotate.getClickTolerance(),C=u.dragRotate._mousePitch.getClickTolerance();this.element=m,this.mouseRotate=Kr({clickTolerance:A,enable:!0}),this.touchRotate=(({enable:B,clickTolerance:j,bearingDegreesPerPixelMoved:q=.8})=>{const K=new nh;return new oo({clickTolerance:j,move:(et,it)=>({bearingDelta:(it.x-et.x)*q}),moveStateManager:K,enable:B,assignEvents:ri})})({clickTolerance:A,enable:!0}),this.map=u,b&&(this.mousePitch=is({clickTolerance:C,enable:!0}),this.touchPitch=(({enable:B,clickTolerance:j,pitchDegreesPerPixelMoved:q=-.5})=>{const K=new nh;return new oo({clickTolerance:j,move:(et,it)=>({pitchDelta:(it.y-et.y)*q}),moveStateManager:K,enable:B,assignEvents:ri})})({clickTolerance:C,enable:!0})),_.addEventListener(m,"mousedown",this.mousedown),_.addEventListener(m,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(m,"touchcancel",this.reset)}startMouse(u,m){this.mouseRotate.dragStart(u,m),this.mousePitch&&this.mousePitch.dragStart(u,m),_.disableDrag()}startTouch(u,m){this.touchRotate.dragStart(u,m),this.touchPitch&&this.touchPitch.dragStart(u,m),_.disableDrag()}moveMouse(u,m){const b=this.map,{bearingDelta:A}=this.mouseRotate.dragMove(u,m)||{};if(A&&b.setBearing(b.getBearing()+A),this.mousePitch){const{pitchDelta:C}=this.mousePitch.dragMove(u,m)||{};C&&b.setPitch(b.getPitch()+C)}}moveTouch(u,m){const b=this.map,{bearingDelta:A}=this.touchRotate.dragMove(u,m)||{};if(A&&b.setBearing(b.getBearing()+A),this.touchPitch){const{pitchDelta:C}=this.touchPitch.dragMove(u,m)||{};C&&b.setPitch(b.getPitch()+C)}}off(){const u=this.element;_.removeEventListener(u,"mousedown",this.mousedown),_.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend),_.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){_.enableDrag(),_.removeEventListener(window,"mousemove",this.mousemove),_.removeEventListener(window,"mouseup",this.mouseup),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend)}}let oi;function hu(E,u,m){if(E=new a.L(E.lng,E.lat),u){const b=new a.L(E.lng-360,E.lat),A=new a.L(E.lng+360,E.lat),C=m.locationPoint(E).distSqr(u);m.locationPoint(b).distSqr(u)<C?E=b:m.locationPoint(A).distSqr(u)<C&&(E=A)}for(;Math.abs(E.lng-m.center.lng)>180;){const b=m.locationPoint(E);if(b.x>=0&&b.y>=0&&b.x<=m.width&&b.y<=m.height)break;E.lng>m.center.lng?E.lng-=360:E.lng+=360}return E}const Or={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Tc(E,u,m){const b=E.classList;for(const A in Or)b.remove(`maplibregl-${m}-anchor-${A}`);b.add(`maplibregl-${m}-anchor-${u}`)}class Ii extends a.E{constructor(u){if(super(),this._onKeyPress=m=>{const b=m.code,A=m.charCode||m.keyCode;b!=="Space"&&b!=="Enter"&&A!==32&&A!==13||this.togglePopup()},this._onMapClick=m=>{const b=m.originalEvent.target,A=this._element;this._popup&&(b===A||A.contains(b))&&this.togglePopup()},this._update=m=>{if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();(m?.type==="terrain"||m?.type==="render"&&!b)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=hu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let A="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?A=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(A=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),m&&m.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,`${Or[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${A}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout((()=>{const B=this._map.unproject(this._pos),j=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=B.distanceTo(this._lngLat)>20*j?"0.2":"1.0",this._opacityTimeout=null}),100))},this._onMove=m=>{if(!this._isDragging){const b=this._clickTolerance||this._map._clickTolerance;this._isDragging=m.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=m=>{this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._pointerdownPos=m.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=a.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");const m=_.createNS("http://www.w3.org/2000/svg","svg"),b=41,A=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${b}px`),m.setAttributeNS(null,"width",`${A}px`),m.setAttributeNS(null,"viewBox",`0 0 ${A} ${b}`);const C=_.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"stroke","none"),C.setAttributeNS(null,"stroke-width","1"),C.setAttributeNS(null,"fill","none"),C.setAttributeNS(null,"fill-rule","evenodd");const B=_.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const j=_.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Gt of q){const ue=_.createNS("http://www.w3.org/2000/svg","ellipse");ue.setAttributeNS(null,"opacity","0.04"),ue.setAttributeNS(null,"cx","10.5"),ue.setAttributeNS(null,"cy","5.80029008"),ue.setAttributeNS(null,"rx",Gt.rx),ue.setAttributeNS(null,"ry",Gt.ry),j.appendChild(ue)}const K=_.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill",this._color);const et=_.createNS("http://www.w3.org/2000/svg","path");et.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),K.appendChild(et);const it=_.createNS("http://www.w3.org/2000/svg","g");it.setAttributeNS(null,"opacity","0.25"),it.setAttributeNS(null,"fill","#000000");const dt=_.createNS("http://www.w3.org/2000/svg","path");dt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),it.appendChild(dt);const Et=_.createNS("http://www.w3.org/2000/svg","g");Et.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Et.setAttributeNS(null,"fill","#FFFFFF");const Mt=_.createNS("http://www.w3.org/2000/svg","g");Mt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const zt=_.createNS("http://www.w3.org/2000/svg","circle");zt.setAttributeNS(null,"fill","#000000"),zt.setAttributeNS(null,"opacity","0.25"),zt.setAttributeNS(null,"cx","5.5"),zt.setAttributeNS(null,"cy","5.5"),zt.setAttributeNS(null,"r","5.4999962");const At=_.createNS("http://www.w3.org/2000/svg","circle");At.setAttributeNS(null,"fill","#FFFFFF"),At.setAttributeNS(null,"cx","5.5"),At.setAttributeNS(null,"cy","5.5"),At.setAttributeNS(null,"r","5.4999962"),Mt.appendChild(zt),Mt.appendChild(At),B.appendChild(j),B.appendChild(K),B.appendChild(it),B.appendChild(Et),B.appendChild(Mt),m.appendChild(B),m.setAttributeNS(null,"height",b*this._scale+"px"),m.setAttributeNS(null,"width",A*this._scale+"px"),this._element.appendChild(m),this._offset=a.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(m=>{m.preventDefault()})),this._element.addEventListener("mousedown",(m=>{m.preventDefault()})),Tc(this._element,this._anchor,"marker"),u&&u.className)for(const m of u.className.split(" "))this._element.classList.add(m);this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=a.L.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const A=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[A,-1*(38.1-13.5+A)],"bottom-right":[-A,-1*(38.1-13.5+A)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(u){return this._offset=a.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const hi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let bi=0,fl=!1;const $o={maxWidth:100,unit:"metric"};function qo(E,u,m){const b=m&&m.maxWidth||100,A=E._container.clientHeight/2,C=E.unproject([0,A]),B=E.unproject([b,A]),j=C.distanceTo(B);if(m&&m.unit==="imperial"){const q=3.2808*j;q>5280?ja(u,b,q/5280,E._getUIString("ScaleControl.Miles")):ja(u,b,q,E._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?ja(u,b,j/1852,E._getUIString("ScaleControl.NauticalMiles")):j>=1e3?ja(u,b,j/1e3,E._getUIString("ScaleControl.Kilometers")):ja(u,b,j,E._getUIString("ScaleControl.Meters"))}function ja(E,u,m,b){const A=(function(C){const B=Math.pow(10,`${Math.floor(C)}`.length-1);let j=C/B;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:(function(q){const K=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*K)/K})(j),B*j})(m);E.style.width=u*(A/m)+"px",E.innerHTML=`${A}&nbsp;${b}`}const Rs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},dl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function vs(E){if(E){if(typeof E=="number"){const u=Math.round(Math.abs(E)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,E),"top-left":new a.P(u,u),"top-right":new a.P(-u,u),bottom:new a.P(0,-E),"bottom-left":new a.P(u,-u),"bottom-right":new a.P(-u,-u),left:new a.P(E,0),right:new a.P(-E,0)}}if(E instanceof a.P||Array.isArray(E)){const u=a.P.convert(E);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:a.P.convert(E.center||[0,0]),top:a.P.convert(E.top||[0,0]),"top-left":a.P.convert(E["top-left"]||[0,0]),"top-right":a.P.convert(E["top-right"]||[0,0]),bottom:a.P.convert(E.bottom||[0,0]),"bottom-left":a.P.convert(E["bottom-left"]||[0,0]),"bottom-right":a.P.convert(E["bottom-right"]||[0,0]),left:a.P.convert(E.left||[0,0]),right:a.P.convert(E.right||[0,0])}}return vs(new a.P(0,0))}const ih={extend:(E,...u)=>a.e(E,...u),run(E){E()},logToElement(E,u=!1,m="log"){const b=window.document.getElementById(m);b&&(u&&(b.innerHTML=""),b.innerHTML+=`<br>${E}`)}},rh=g;class ei{static get version(){return rh}static get workerCount(){return Wi.workerCount}static set workerCount(u){Wi.workerCount=u}static get maxParallelImageRequests(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(u){a.c.MAX_PARALLEL_IMAGE_REQUESTS=u}static get workerUrl(){return a.c.WORKER_URL}static set workerUrl(u){a.c.WORKER_URL=u}static addProtocol(u,m){a.c.REGISTERED_PROTOCOLS[u]=m}static removeProtocol(u){delete a.c.REGISTERED_PROTOCOLS[u]}}return ei.Map=class extends nt{constructor(E){if(a.bg.mark(a.bh.create),(E=a.e({},Ge,E)).minZoom!=null&&E.maxZoom!=null&&E.minZoom>E.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(E.minPitch!=null&&E.maxPitch!=null&&E.minPitch>E.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(E.minPitch!=null&&E.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(E.maxPitch!=null&&E.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new kr(E.minZoom,E.maxZoom,E.minPitch,E.maxPitch,E.renderWorldCopies),{bearingSnap:E.bearingSnap}),this._cooperativeGesturesOnWheel=u=>{this._onCooperativeGesture(u,u[this._metaKey],1)},this._contextLost=u=>{u.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=E.interactive,this._cooperativeGestures=E.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=E.maxTileCacheSize,this._maxTileCacheZoomLevels=E.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=E.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=E.preserveDrawingBuffer,this._antialias=E.antialias,this._trackResize=E.trackResize,this._bearingSnap=E.bearingSnap,this._refreshExpiredTiles=E.refreshExpiredTiles,this._fadeDuration=E.fadeDuration,this._crossSourceCollisions=E.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=E.collectResourceTiming,this._renderTaskQueue=new ae,this._controls=[],this._mapId=a.a2(),this._locale=a.e({},pe,E.locale),this._clickTolerance=E.clickTolerance,this._overridePixelRatio=E.pixelRatio,this._maxCanvasSize=E.maxCanvasSize,this.transformCameraUpdate=E.transformCameraUpdate,this._imageQueueHandle=H.addThrottleControl((()=>this.isMoving())),this._requestManager=new X(E.transformRequest),typeof E.container=="string"){if(this._container=document.getElementById(E.container),!this._container)throw new Error(`Container '${E.container}' not found.`)}else{if(!(E.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=E.container}if(E.maxBounds&&this.setMaxBounds(E.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const m=ys((b=>{this._trackResize&&!this._removed&&this.resize(b)._update()}),50);this._resizeObserver=new ResizeObserver((b=>{u?m(b):u=!0})),this._resizeObserver.observe(this._container)}this.handlers=new $(this,E),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=E.hash&&new ll(typeof E.hash=="string"&&E.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),E.bounds&&(this.resize(),this.fitBounds(E.bounds,a.e({},E.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=E.localIdeographFontFamily,this._validateStyle=E.validateStyle,E.style&&this.setStyle(E.style,{localIdeographFontFamily:E.localIdeographFontFamily}),E.attributionControl&&this.addControl(new mt({customAttribution:E.customAttribution})),E.maplibreLogo&&this.addControl(new Rt,E.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(u=>{this._update(u.dataType==="style"),this.fire(new a.k(`${u.dataType}data`,u))})),this.on("dataloading",(u=>{this.fire(new a.k(`${u.dataType}dataloading`,u))})),this.on("dataabort",(u=>{this.fire(new a.k("sourcedataabort",u))}))}_getMapId(){return this._mapId}addControl(E,u){if(u===void 0&&(u=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=E.onAdd(this);this._controls.push(E);const b=this._controlPositions[u];return u.indexOf("bottom")!==-1?b.insertBefore(m,b.firstChild):b.appendChild(m),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(E);return u>-1&&this._controls.splice(u,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}calculateCameraOptionsFromTo(E,u,m,b){return b==null&&this.terrain&&(b=this.terrain.getElevationForLngLatZoom(m,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(E,u,m,b)}resize(E){var u;const m=this._containerDimensions(),b=m[0],A=m[1],C=this._getClampedPixelRatio(b,A);if(this._resizeCanvas(b,A,C),this.painter.resize(b,A,C),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const q=this._getClampedPixelRatio(b,A);this._resizeCanvas(b,A,q),this.painter.resize(b,A,q)}this.transform.resize(b,A),(u=this._requestedCameraState)===null||u===void 0||u.resize(b,A);const B=!this._moving;return B&&(this.stop(),this.fire(new a.k("movestart",E)).fire(new a.k("move",E))),this.fire(new a.k("resize",E)),B&&this.fire(new a.k("moveend",E)),this}_getClampedPixelRatio(E,u){const{0:m,1:b}=this._maxCanvasSize,A=this.getPixelRatio(),C=E*A,B=u*A;return Math.min(C>m?m/C:1,B>b?b/B:1)*A}getPixelRatio(){var E;return(E=this._overridePixelRatio)!==null&&E!==void 0?E:devicePixelRatio}setPixelRatio(E){this._overridePixelRatio=E,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds($t.convert(E)),this._update()}setMinZoom(E){if((E=E??-2)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E??22)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(E){return this._cooperativeGestures=E,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(E){return this.transform.locationPoint(a.L.convert(E),this.style&&this.terrain)}unproject(E){return this.transform.pointLocation(a.P.convert(E),this.terrain)}isMoving(){var E;return this._moving||((E=this.handlers)===null||E===void 0?void 0:E.isMoving())}isZooming(){var E;return this._zooming||((E=this.handlers)===null||E===void 0?void 0:E.isZooming())}isRotating(){var E;return this._rotating||((E=this.handlers)===null||E===void 0?void 0:E.isRotating())}_createDelegatedListener(E,u,m){if(E==="mouseenter"||E==="mouseover"){let b=!1;return{layer:u,listener:m,delegates:{mousemove:C=>{const B=this.getLayer(u)?this.queryRenderedFeatures(C.point,{layers:[u]}):[];B.length?b||(b=!0,m.call(this,new qr(E,this,C.originalEvent,{features:B}))):b=!1},mouseout:()=>{b=!1}}}}if(E==="mouseleave"||E==="mouseout"){let b=!1;return{layer:u,listener:m,delegates:{mousemove:B=>{(this.getLayer(u)?this.queryRenderedFeatures(B.point,{layers:[u]}):[]).length?b=!0:b&&(b=!1,m.call(this,new qr(E,this,B.originalEvent)))},mouseout:B=>{b&&(b=!1,m.call(this,new qr(E,this,B.originalEvent)))}}}}{const b=A=>{const C=this.getLayer(u)?this.queryRenderedFeatures(A.point,{layers:[u]}):[];C.length&&(A.features=C,m.call(this,A),delete A.features)};return{layer:u,listener:m,delegates:{[E]:b}}}}on(E,u,m){if(m===void 0)return super.on(E,u);const b=this._createDelegatedListener(E,u,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(b);for(const A in b.delegates)this.on(A,b.delegates[A]);return this}once(E,u,m){if(m===void 0)return super.once(E,u);const b=this._createDelegatedListener(E,u,m);for(const A in b.delegates)this.once(A,b.delegates[A]);return this}off(E,u,m){return m===void 0?super.off(E,u):(this._delegatedListeners&&this._delegatedListeners[E]&&(b=>{const A=this._delegatedListeners[E];for(let C=0;C<A.length;C++){const B=A[C];if(B.layer===u&&B.listener===m){for(const j in B.delegates)this.off(j,B.delegates[j]);return A.splice(C,1),this}}})(),this)}queryRenderedFeatures(E,u){if(!this.style)return[];let m;const b=E instanceof a.P||Array.isArray(E),A=b?E:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(b?{}:E)||{},A instanceof a.P||typeof A[0]=="number")m=[a.P.convert(A)];else{const C=a.P.convert(A[0]),B=a.P.convert(A[1]);m=[C,new a.P(B.x,C.y),B,new a.P(C.x,B.y),C]}return this.style.queryRenderedFeatures(m,u,this.transform)}querySourceFeatures(E,u){return this.style.querySourceFeatures(E,u)}setStyle(E,u){return(u=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(E,u))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){const u=this._locale[E];if(u==null)throw new Error(`Missing UI string '${E}'`);return u}_updateStyle(E,u){if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(E,u)));const m=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!E)),E?(this.style=new Rn(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E,u,m):this.style.loadJSON(E,u,m),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Rn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,u){if(typeof E=="string"){const m=this._requestManager.transformRequest(E,Q.Style);a.f(m,((b,A)=>{b?this.fire(new a.j(b)):A&&this._updateDiff(A,u)}))}else typeof E=="object"&&this._updateDiff(E,u)}_updateDiff(E,u){try{this.style.setState(E,u)&&this._update(!0)}catch(m){a.w(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(E,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(E,u){return this._lazyInitEmptyStyle(),this.style.addSource(E,u),this._update(!0)}isSourceLoaded(E){const u=this.style&&this.style.sourceCaches[E];if(u!==void 0)return u.loaded();this.fire(new a.j(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),E){const u=this.style.sourceCaches[E.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${E.source}`);for(const m in this.style._layers){const b=this.style._layers[m];b.type==="hillshade"&&b.source===E.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new yn(this.painter,u,E),this.painter.renderToTexture=new tr(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=m=>{m.dataType==="style"?this.terrain.sourceCache.freeRtt():m.dataType==="source"&&m.tile&&(m.sourceId!==E.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(m.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:E})),this}getTerrain(){var E,u;return(u=(E=this.terrain)===null||E===void 0?void 0:E.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const E=this.style&&this.style.sourceCaches;for(const u in E){const m=E[u]._tiles;for(const b in m){const A=m[b];if(A.state!=="loaded"&&A.state!=="errored")return!1}}return!0}addSourceType(E,u,m){return this._lazyInitEmptyStyle(),this.style.addSourceType(E,u,m)}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,u,m={}){const{pixelRatio:b=1,sdf:A=!1,stretchX:C,stretchY:B,content:j}=m;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||a.a(u))){if(u.width===void 0||u.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:q,height:K,data:et}=u,it=u;return this.style.addImage(E,{data:new a.R({width:q,height:K},new Uint8Array(et)),pixelRatio:b,stretchX:C,stretchY:B,content:j,sdf:A,version:0,userImage:it}),it.onAdd&&it.onAdd(this,E),this}}{const{width:q,height:K,data:et}=a.h.getImageData(u);this.style.addImage(E,{data:new a.R({width:q,height:K},et),pixelRatio:b,stretchX:C,stretchY:B,content:j,sdf:A,version:0})}}updateImage(E,u){const m=this.style.getImage(E);if(!m)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=u instanceof HTMLImageElement||a.a(u)?a.h.getImageData(u):u,{width:A,height:C,data:B}=b;if(A===void 0||C===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(A!==m.data.width||C!==m.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(u instanceof HTMLImageElement||a.a(u));return m.data.replace(B,j),this.style.updateImage(E,m),this}getImage(E){return this.style.getImage(E)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E,u){H.getImage(this._requestManager.transformRequest(E,Q.Image),u)}listImages(){return this.style.listImages()}addLayer(E,u){return this._lazyInitEmptyStyle(),this.style.addLayer(E,u),this._update(!0)}moveLayer(E,u){return this.style.moveLayer(E,u),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(E,u,m){return this.style.setLayerZoomRange(E,u,m),this._update(!0)}setFilter(E,u,m={}){return this.style.setFilter(E,u,m),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,u,m,b={}){return this.style.setPaintProperty(E,u,m,b),this._update(!0)}getPaintProperty(E,u){return this.style.getPaintProperty(E,u)}setLayoutProperty(E,u,m,b={}){return this.style.setLayoutProperty(E,u,m,b),this._update(!0)}getLayoutProperty(E,u){return this.style.getLayoutProperty(E,u)}setGlyphs(E,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(E,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(E,u,m={}){return this._lazyInitEmptyStyle(),this.style.addSprite(E,u,m,(b=>{b||this._update(!0)})),this}removeSprite(E){return this._lazyInitEmptyStyle(),this.style.removeSprite(E),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(E,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(E,u,(m=>{m||this._update(!0)})),this}setLight(E,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(E,u){return this.style.setFeatureState(E,u),this._update()}removeFeatureState(E,u){return this.style.removeFeatureState(E,u),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,u=0;return this._container&&(E=this._container.clientWidth||400,u=this._container.clientHeight||300),[E,u]}_setupContainer(){const E=this._container;E.classList.add("maplibregl-map");const u=this._canvasContainer=_.create("div","maplibregl-canvas-container",E);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=_.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const m=this._containerDimensions(),b=this._getClampedPixelRatio(m[0],m[1]);this._resizeCanvas(m[0],m[1],b);const A=this._controlContainer=_.create("div","maplibregl-control-container",E),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((B=>{C[B]=_.create("div",`maplibregl-ctrl-${B} `,A)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=_.create("div","maplibregl-cooperative-gesture-screen",this._container);let E=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(E=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${E}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){_.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(E,u,m){this._canvas.width=Math.floor(m*E),this._canvas.height=Math.floor(m*u),this._canvas.style.width=`${E}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const E={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let u=null;this._canvas.addEventListener("webglcontextcreationerror",(b=>{u={requestedAttributes:E},b&&(u.statusMessage=b.statusMessage,u.type=b.type)}),{once:!0});const m=this._canvas.getContext("webgl2",E)||this._canvas.getContext("webgl",E);if(!m){const b="Failed to initialize WebGL";throw u?(u.message=b,new Error(JSON.stringify(u))):new Error(b)}this.painter=new Rl(m,this.transform),x.testSupport(m)}_onCooperativeGesture(E,u,m){return!u&&m<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){const u=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let m=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const A=this.transform.zoom,C=a.h.now();this.style.zoomHistory.update(A,C);const B=new a.a8(A,{now:C,fadeDuration:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),j=B.crossFadingFactor();j===1&&j===this._crossFadingFactor||(m=!0,this._crossFadingFactor=j),this.style.update(B)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,u,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:u,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bg.mark(a.bh.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||m)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,a.bg.mark(a.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var E;this._hash&&this._hash.remove();for(const m of this._controls)m.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(E=this._resizeObserver)===null||E===void 0||E.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),_.remove(this._canvasContainer),_.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),a.bg.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.h.frame((E=>{a.bg.frame(E),this._frame=null,this._render(E)})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}get version(){return Qe}getCameraTargetElevation(){return this.transform.elevation}},ei.NavigationControl=class{constructor(E){this._updateZoomButtons=()=>{const u=this._map.getZoom(),m=u===this._map.getMaxZoom(),b=u===this._map.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())},this._rotateCompassArrow=()=>{const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=u},this._setButtonTitle=(u,m)=>{const b=this._map._getUIString(`NavigationControl.${m}`);u.title=b,u.setAttribute("aria-label",b)},this.options=a.e({},Xn,E),this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(u=>this._map.zoomIn({},{originalEvent:u}))),_.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(u=>this._map.zoomOut({},{originalEvent:u}))),_.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})})),this._compassIcon=_.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ho(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,u){const m=_.create("button",E,this._container);return m.type="button",m.addEventListener("click",u),m}},ei.GeolocateControl=class extends a.E{constructor(E){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",u)),this._finish()}},this._updateCamera=u=>{const m=new a.L(u.coords.longitude,u.coords.latitude),b=u.coords.accuracy,A=this._map.getBearing(),C=a.e({bearing:A},this.options.fitBoundsOptions),B=$t.fromLngLat(m,b);this._map.fitBounds(B,C,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const m=new a.L(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=u=>{if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&fl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=u=>{if(this._map){if(this._container.addEventListener("contextmenu",(m=>m.preventDefault())),this._geolocateButton=_.create("button","maplibregl-ctrl-geolocate",this._container),_.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",u===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{const m=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ii({element:this._dotElement}),this._circleElement=_.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ii({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(m=>{m.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m.originalEvent&&m.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")))}))}},this.options=a.e({},hi,E)}onAdd(E){return this._map=E,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),(function(u,m=!1){oi===void 0||m?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then((b=>{oi=b.state!=="denied",u(oi)})).catch((()=>{oi=!!window.navigator.geolocation,u(oi)})):(oi=!!window.navigator.geolocation,u(oi)):u(oi)})(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,bi=0,fl=!1}_isOutOfMapMaxBounds(E){const u=this._map.getMaxBounds(),m=E.coords;return u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const E=this._map.getBounds(),u=E.getSouthEast(),m=E.getNorthEast(),b=u.distanceTo(m),A=Math.ceil(this._accuracy/(b/this._map._container.clientHeight)*2);this._circleElement.style.width=`${A}px`,this._circleElement.style.height=`${A}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":bi--,fl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),bi++,bi>1?(E={maximumAge:6e5,timeout:0},fl=!0):(E=this.options.positionOptions,fl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},ei.AttributionControl=mt,ei.LogoControl=Rt,ei.ScaleControl=class{constructor(E){this._onMove=()=>{qo(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,qo(this._map,this._container,this.options)},this.options=a.e({},$o,E)}getDefaultPosition(){return"bottom-left"}onAdd(E){return this._map=E,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},ei.FullscreenControl=class extends a.E{constructor(E={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){_.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const E=this._fullscreenButton=_.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);_.create("span","maplibregl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},ei.TerrainControl=class{constructor(E){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=E}onAdd(E){return this._map=E,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=_.create("button","maplibregl-ctrl-terrain",this._container),_.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){_.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},ei.Popup=class extends a.E{constructor(E){super(),this.remove=()=>(this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.k("close")),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=_.create("div","maplibregl-popup",this._map.getContainer()),this._tip=_.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const B of this.options.className.split(" "))this._container.classList.add(B);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=hu(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!u)return;const m=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);let b=this.options.anchor;const A=vs(this.options.offset);if(!b){const B=this._container.offsetWidth,j=this._container.offsetHeight;let q;q=m.y+A.bottom.y<j?["top"]:m.y>this._map.transform.height-j?["bottom"]:[],m.x<B/2?q.push("left"):m.x>this._map.transform.width-B/2&&q.push("right"),b=q.length===0?"bottom":q.join("-")}const C=m.add(A[b]).round();_.setTransform(this._container,`${Or[b]} translate(${C.x}px,${C.y}px)`),Tc(this._container,b,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Rs),E)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=a.L.convert(E),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){const u=document.createDocumentFragment(),m=document.createElement("body");let b;for(m.innerHTML=E;b=m.firstChild,b;)u.appendChild(b);return this.setDOMContent(u)}getMaxWidth(){var E;return(E=this._container)===null||E===void 0?void 0:E.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){this._container&&this._container.classList.add(E)}removeClassName(E){this._container&&this._container.classList.remove(E)}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}_createCloseButton(){this.options.closeButton&&(this._closeButton=_.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const E=this._container.querySelector(dl);E&&E.focus()}},ei.Marker=Ii,ei.Style=Rn,ei.LngLat=a.L,ei.LngLatBounds=$t,ei.Point=a.P,ei.MercatorCoordinate=a.U,ei.Evented=a.E,ei.AJAXError=a.bi,ei.config=a.c,ei.CanvasSource=ce,ei.GeoJSONSource=Ie,ei.ImageSource=Pe,ei.RasterDEMTileSource=Ae,ei.RasterTileSource=le,ei.VectorTileSource=se,ei.VideoSource=we,ei.setRTLTextPlugin=a.bj,ei.getRTLTextPluginStatus=a.bk,ei.prewarm=function(){Ur().acquire(cn)},ei.clearPrewarmedResources=function(){const E=Bi;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(cn),Bi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},ih.extend(ei,{isSafari:a.ac,getPerformanceMetrics:a.bg.getPerformanceMetrics}),ei}));var f=r;return f}))})(Yv)),Yv.exports}var dD=_U();const pD=Ou(dD),vU=Dk({__proto__:null,default:pD},[dD]);var Xv={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var xU=Xv.exports,BM;function bU(){return BM||(BM=1,(function(t,e){((n,i)=>{t.exports=i()})(xU,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r,l=!i.document&&!!i.postMessage,f=i.IS_PAPA_WORKER||!1,a={},g=0,_={};function x(rt){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(ut){var _t=J(ut);_t.chunkSize=parseInt(_t.chunkSize),ut.step||ut.chunk||(_t.chunkSize=null),this._handle=new V(_t),(this._handle.streamer=this)._config=_t}).call(this,rt),this.parseChunk=function(ut,_t){var bt=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<bt){let re=this._config.newline;re||(Pt=this._config.quoteChar||'"',re=this._handle.guessLineEndings(ut,Pt)),ut=[...ut.split(re).slice(bt)].join(re)}this.isFirstChunk&&ht(this._config.beforeFirstChunk)&&(Pt=this._config.beforeFirstChunk(ut))!==void 0&&(ut=Pt),this.isFirstChunk=!1,this._halted=!1;var bt=this._partialLine+ut,Pt=(this._partialLine="",this._handle.parse(bt,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(ut=Pt.meta.cursor,bt=(this._finished||(this._partialLine=bt.substring(ut-this._baseIndex),this._baseIndex=ut),Pt&&Pt.data&&(this._rowCount+=Pt.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)i.postMessage({results:Pt,workerId:_.WORKER_ID,finished:bt});else if(ht(this._config.chunk)&&!_t){if(this._config.chunk(Pt,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Pt=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Pt.data),this._completeResults.errors=this._completeResults.errors.concat(Pt.errors),this._completeResults.meta=Pt.meta),this._completed||!bt||!ht(this._config.complete)||Pt&&Pt.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),bt||Pt&&Pt.meta.paused||this._nextChunk(),Pt}this._halted=!0},this._sendError=function(ut){ht(this._config.error)?this._config.error(ut):f&&this._config.error&&i.postMessage({workerId:_.WORKER_ID,error:ut,finished:!1})}}function M(rt){var ut;(rt=rt||{}).chunkSize||(rt.chunkSize=_.RemoteChunkSize),x.call(this,rt),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(_t){this._input=_t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(ut=new XMLHttpRequest,this._config.withCredentials&&(ut.withCredentials=this._config.withCredentials),l||(ut.onload=ot(this._chunkLoaded,this),ut.onerror=ot(this._chunkError,this)),ut.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var _t,bt=this._config.downloadRequestHeaders;for(_t in bt)ut.setRequestHeader(_t,bt[_t])}var Pt;this._config.chunkSize&&(Pt=this._start+this._config.chunkSize-1,ut.setRequestHeader("Range","bytes="+this._start+"-"+Pt));try{ut.send(this._config.downloadRequestBody)}catch(re){this._chunkError(re.message)}l&&ut.status===0&&this._chunkError()}},this._chunkLoaded=function(){ut.readyState===4&&(ut.status<200||400<=ut.status?this._chunkError():(this._start+=this._config.chunkSize||ut.responseText.length,this._finished=!this._config.chunkSize||this._start>=(_t=>(_t=_t.getResponseHeader("Content-Range"))!==null?parseInt(_t.substring(_t.lastIndexOf("/")+1)):-1)(ut),this.parseChunk(ut.responseText)))},this._chunkError=function(_t){_t=ut.statusText||_t,this._sendError(new Error(_t))}}function O(rt){(rt=rt||{}).chunkSize||(rt.chunkSize=_.LocalChunkSize),x.call(this,rt);var ut,_t,bt=typeof FileReader<"u";this.stream=function(Pt){this._input=Pt,_t=Pt.slice||Pt.webkitSlice||Pt.mozSlice,bt?((ut=new FileReader).onload=ot(this._chunkLoaded,this),ut.onerror=ot(this._chunkError,this)):ut=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Pt=this._input,re=(this._config.chunkSize&&(re=Math.min(this._start+this._config.chunkSize,this._input.size),Pt=_t.call(Pt,this._start,re)),ut.readAsText(Pt,this._config.encoding));bt||this._chunkLoaded({target:{result:re}})},this._chunkLoaded=function(Pt){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Pt.target.result)},this._chunkError=function(){this._sendError(ut.error)}}function z(rt){var ut;x.call(this,rt=rt||{}),this.stream=function(_t){return ut=_t,this._nextChunk()},this._nextChunk=function(){var _t,bt;if(!this._finished)return _t=this._config.chunkSize,ut=_t?(bt=ut.substring(0,_t),ut.substring(_t)):(bt=ut,""),this._finished=!ut,this.parseChunk(bt)}}function F(rt){x.call(this,rt=rt||{});var ut=[],_t=!0,bt=!1;this.pause=function(){x.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){x.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Pt){this._input=Pt,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){bt&&ut.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),ut.length?this.parseChunk(ut.shift()):_t=!0},this._streamData=ot(function(Pt){try{ut.push(typeof Pt=="string"?Pt:Pt.toString(this._config.encoding)),_t&&(_t=!1,this._checkIsFinished(),this.parseChunk(ut.shift()))}catch(re){this._streamError(re)}},this),this._streamError=ot(function(Pt){this._streamCleanUp(),this._sendError(Pt)},this),this._streamEnd=ot(function(){this._streamCleanUp(),bt=!0,this._streamData("")},this),this._streamCleanUp=ot(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function V(rt){var ut,_t,bt,Pt,re=Math.pow(2,53),ye=-re,fe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,kt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Ot=this,St=0,jt=0,Vt=!1,pt=!1,Tt=[],$t={data:[],errors:[],meta:{}};function Yt(Ie){return rt.skipEmptyLines==="greedy"?Ie.join("").trim()==="":Ie.length===1&&Ie[0].length===0}function se(){if($t&&bt&&(Ae("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_.DefaultDelimiter+"'"),bt=!1),rt.skipEmptyLines&&($t.data=$t.data.filter(function(we){return!Yt(we)})),le()){let we=function(ce,rn){ht(rt.transformHeader)&&(ce=rt.transformHeader(ce,rn)),Tt.push(ce)};if($t)if(Array.isArray($t.data[0])){for(var Ie=0;le()&&Ie<$t.data.length;Ie++)$t.data[Ie].forEach(we);$t.data.splice(0,1)}else $t.data.forEach(we)}function Wt(we,ce){for(var rn=rt.header?{}:[],je=0;je<we.length;je++){var nn=je,tn=we[je],tn=((Tn,an)=>(In=>(rt.dynamicTypingFunction&&rt.dynamicTyping[In]===void 0&&(rt.dynamicTyping[In]=rt.dynamicTypingFunction(In)),(rt.dynamicTyping[In]||rt.dynamicTyping)===!0))(Tn)?an==="true"||an==="TRUE"||an!=="false"&&an!=="FALSE"&&((In=>{if(fe.test(In)&&(In=parseFloat(In),ye<In&&In<re))return 1})(an)?parseFloat(an):kt.test(an)?new Date(an):an===""?null:an):an)(nn=rt.header?je>=Tt.length?"__parsed_extra":Tt[je]:nn,tn=rt.transform?rt.transform(tn,nn):tn);nn==="__parsed_extra"?(rn[nn]=rn[nn]||[],rn[nn].push(tn)):rn[nn]=tn}return rt.header&&(je>Tt.length?Ae("FieldMismatch","TooManyFields","Too many fields: expected "+Tt.length+" fields but parsed "+je,jt+ce):je<Tt.length&&Ae("FieldMismatch","TooFewFields","Too few fields: expected "+Tt.length+" fields but parsed "+je,jt+ce)),rn}var Pe;$t&&(rt.header||rt.dynamicTyping||rt.transform)&&(Pe=1,!$t.data.length||Array.isArray($t.data[0])?($t.data=$t.data.map(Wt),Pe=$t.data.length):$t.data=Wt($t.data,0),rt.header&&$t.meta&&($t.meta.fields=Tt),jt+=Pe)}function le(){return rt.header&&Tt.length===0}function Ae(Ie,Wt,Pe,we){Ie={type:Ie,code:Wt,message:Pe},we!==void 0&&(Ie.row=we),$t.errors.push(Ie)}ht(rt.step)&&(Pt=rt.step,rt.step=function(Ie){$t=Ie,le()?se():(se(),$t.data.length!==0&&(St+=Ie.data.length,rt.preview&&St>rt.preview?_t.abort():($t.data=$t.data[0],Pt($t,Ot))))}),this.parse=function(Ie,Wt,Pe){var we=rt.quoteChar||'"',we=(rt.newline||(rt.newline=this.guessLineEndings(Ie,we)),bt=!1,rt.delimiter?ht(rt.delimiter)&&(rt.delimiter=rt.delimiter(Ie),$t.meta.delimiter=rt.delimiter):((we=((ce,rn,je,nn,tn)=>{var Tn,an,In,_e;tn=tn||[",","	","|",";",_.RECORD_SEP,_.UNIT_SEP];for(var Di=0;Di<tn.length;Di++){for(var Ri,Yn=tn[Di],cn=0,Wi=0,si=0,Bi=(In=void 0,new Q({comments:nn,delimiter:Yn,newline:rn,preview:10}).parse(ce)),Ur=0;Ur<Bi.data.length;Ur++)je&&Yt(Bi.data[Ur])?si++:(Ri=Bi.data[Ur].length,Wi+=Ri,In===void 0?In=Ri:0<Ri&&(cn+=Math.abs(Ri-In),In=Ri));0<Bi.data.length&&(Wi/=Bi.data.length-si),(an===void 0||cn<=an)&&(_e===void 0||_e<Wi)&&1.99<Wi&&(an=cn,Tn=Yn,_e=Wi)}return{successful:!!(rt.delimiter=Tn),bestDelimiter:Tn}})(Ie,rt.newline,rt.skipEmptyLines,rt.comments,rt.delimitersToGuess)).successful?rt.delimiter=we.bestDelimiter:(bt=!0,rt.delimiter=_.DefaultDelimiter),$t.meta.delimiter=rt.delimiter),J(rt));return rt.preview&&rt.header&&we.preview++,ut=Ie,_t=new Q(we),$t=_t.parse(ut,Wt,Pe),se(),Vt?{meta:{paused:!0}}:$t||{meta:{paused:!1}}},this.paused=function(){return Vt},this.pause=function(){Vt=!0,_t.abort(),ut=ht(rt.chunk)?"":ut.substring(_t.getCharIndex())},this.resume=function(){Ot.streamer._halted?(Vt=!1,Ot.streamer.parseChunk(ut,!0)):setTimeout(Ot.resume,3)},this.aborted=function(){return pt},this.abort=function(){pt=!0,_t.abort(),$t.meta.aborted=!0,ht(rt.complete)&&rt.complete($t),ut=""},this.guessLineEndings=function(ce,we){ce=ce.substring(0,1048576);var we=new RegExp(H(we)+"([^]*?)"+H(we),"gm"),Pe=(ce=ce.replace(we,"")).split("\r"),we=ce.split(`
`),ce=1<we.length&&we[0].length<Pe[0].length;if(Pe.length===1||ce)return`
`;for(var rn=0,je=0;je<Pe.length;je++)Pe[je][0]===`
`&&rn++;return rn>=Pe.length/2?`\r
`:"\r"}}function H(rt){return rt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Q(rt){var ut=(rt=rt||{}).delimiter,_t=rt.newline,bt=rt.comments,Pt=rt.step,re=rt.preview,ye=rt.fastMode,fe=null,kt=!1,Ot=rt.quoteChar==null?'"':rt.quoteChar,St=Ot;if(rt.escapeChar!==void 0&&(St=rt.escapeChar),(typeof ut!="string"||-1<_.BAD_DELIMITERS.indexOf(ut))&&(ut=","),bt===ut)throw new Error("Comment character same as delimiter");bt===!0?bt="#":(typeof bt!="string"||-1<_.BAD_DELIMITERS.indexOf(bt))&&(bt=!1),_t!==`
`&&_t!=="\r"&&_t!==`\r
`&&(_t=`
`);var jt=0,Vt=!1;this.parse=function(pt,Tt,$t){if(typeof pt!="string")throw new Error("Input must be a string");var Yt=pt.length,se=ut.length,le=_t.length,Ae=bt.length,Ie=ht(Pt),Wt=[],Pe=[],we=[],ce=jt=0;if(!pt)return cn();if(ye||ye!==!1&&pt.indexOf(Ot)===-1){for(var rn=pt.split(_t),je=0;je<rn.length;je++){if(we=rn[je],jt+=we.length,je!==rn.length-1)jt+=_t.length;else if($t)return cn();if(!bt||we.substring(0,Ae)!==bt){if(Ie){if(Wt=[],_e(we.split(ut)),Wi(),Vt)return cn()}else _e(we.split(ut));if(re&&re<=je)return Wt=Wt.slice(0,re),cn(!0)}}return cn()}for(var nn=pt.indexOf(ut,jt),tn=pt.indexOf(_t,jt),Tn=new RegExp(H(St)+H(Ot),"g"),an=pt.indexOf(Ot,jt);;)if(pt[jt]===Ot)for(an=jt,jt++;;){if((an=pt.indexOf(Ot,an+1))===-1)return $t||Pe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Wt.length,index:jt}),Ri();if(an===Yt-1)return Ri(pt.substring(jt,an).replace(Tn,Ot));if(Ot===St&&pt[an+1]===St)an++;else if(Ot===St||an===0||pt[an-1]!==St){nn!==-1&&nn<an+1&&(nn=pt.indexOf(ut,an+1));var In=Di((tn=tn!==-1&&tn<an+1?pt.indexOf(_t,an+1):tn)===-1?nn:Math.min(nn,tn));if(pt.substr(an+1+In,se)===ut){we.push(pt.substring(jt,an).replace(Tn,Ot)),pt[jt=an+1+In+se]!==Ot&&(an=pt.indexOf(Ot,jt)),nn=pt.indexOf(ut,jt),tn=pt.indexOf(_t,jt);break}if(In=Di(tn),pt.substring(an+1+In,an+1+In+le)===_t){if(we.push(pt.substring(jt,an).replace(Tn,Ot)),Yn(an+1+In+le),nn=pt.indexOf(ut,jt),an=pt.indexOf(Ot,jt),Ie&&(Wi(),Vt))return cn();if(re&&Wt.length>=re)return cn(!0);break}Pe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Wt.length,index:jt}),an++}}else if(bt&&we.length===0&&pt.substring(jt,jt+Ae)===bt){if(tn===-1)return cn();jt=tn+le,tn=pt.indexOf(_t,jt),nn=pt.indexOf(ut,jt)}else if(nn!==-1&&(nn<tn||tn===-1))we.push(pt.substring(jt,nn)),jt=nn+se,nn=pt.indexOf(ut,jt);else{if(tn===-1)break;if(we.push(pt.substring(jt,tn)),Yn(tn+le),Ie&&(Wi(),Vt))return cn();if(re&&Wt.length>=re)return cn(!0)}return Ri();function _e(si){Wt.push(si),ce=jt}function Di(si){var Bi=0;return Bi=si!==-1&&(si=pt.substring(an+1,si))&&si.trim()===""?si.length:Bi}function Ri(si){return $t||(si===void 0&&(si=pt.substring(jt)),we.push(si),jt=Yt,_e(we),Ie&&Wi()),cn()}function Yn(si){jt=si,_e(we),we=[],tn=pt.indexOf(_t,jt)}function cn(si){if(rt.header&&!Tt&&Wt.length&&!kt){var Bi=Wt[0],Ur=Object.create(null),Xs=new Set(Bi);let Xa=!1;for(let va=0;va<Bi.length;va++){let Be=Bi[va];if(Ur[Be=ht(rt.transformHeader)?rt.transformHeader(Be,va):Be]){let dr,Un=Ur[Be];for(;dr=Be+"_"+Un,Un++,Xs.has(dr););Xs.add(dr),Bi[va]=dr,Ur[Be]++,Xa=!0,(fe=fe===null?{}:fe)[dr]=Be}else Ur[Be]=1,Bi[va]=Be;Xs.add(Be)}Xa&&console.warn("Duplicate headers found and renamed."),kt=!0}return{data:Wt,errors:Pe,meta:{delimiter:ut,linebreak:_t,aborted:Vt,truncated:!!si,cursor:ce+(Tt||0),renamedHeaders:fe}}}function Wi(){Pt(cn()),Wt=[],Pe=[]}},this.abort=function(){Vt=!0},this.getCharIndex=function(){return jt}}function X(rt){var ut=rt.data,_t=a[ut.workerId],bt=!1;if(ut.error)_t.userError(ut.error,ut.file);else if(ut.results&&ut.results.data){var Pt={abort:function(){bt=!0,Y(ut.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:W,resume:W};if(ht(_t.userStep)){for(var re=0;re<ut.results.data.length&&(_t.userStep({data:ut.results.data[re],errors:ut.results.errors,meta:ut.results.meta},Pt),!bt);re++);delete ut.results}else ht(_t.userChunk)&&(_t.userChunk(ut.results,Pt,ut.file),delete ut.results)}ut.finished&&!bt&&Y(ut.workerId,ut.results)}function Y(rt,ut){var _t=a[rt];ht(_t.userComplete)&&_t.userComplete(ut),_t.terminate(),delete a[rt]}function W(){throw new Error("Not implemented.")}function J(rt){if(typeof rt!="object"||rt===null)return rt;var ut,_t=Array.isArray(rt)?[]:{};for(ut in rt)_t[ut]=J(rt[ut]);return _t}function ot(rt,ut){return function(){rt.apply(ut,arguments)}}function ht(rt){return typeof rt=="function"}return _.parse=function(rt,ut){var _t=(ut=ut||{}).dynamicTyping||!1;if(ht(_t)&&(ut.dynamicTypingFunction=_t,_t={}),ut.dynamicTyping=_t,ut.transform=!!ht(ut.transform)&&ut.transform,!ut.worker||!_.WORKERS_SUPPORTED)return _t=null,_.NODE_STREAM_INPUT,typeof rt=="string"?(rt=(bt=>bt.charCodeAt(0)!==65279?bt:bt.slice(1))(rt),_t=new(ut.download?M:z)(ut)):rt.readable===!0&&ht(rt.read)&&ht(rt.on)?_t=new F(ut):(i.File&&rt instanceof File||rt instanceof Object)&&(_t=new O(ut)),_t.stream(rt);(_t=(()=>{var bt;return!!_.WORKERS_SUPPORTED&&(bt=(()=>{var Pt=i.URL||i.webkitURL||null,re=n.toString();return _.BLOB_URL||(_.BLOB_URL=Pt.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",re,")();"],{type:"text/javascript"})))})(),(bt=new i.Worker(bt)).onmessage=X,bt.id=g++,a[bt.id]=bt)})()).userStep=ut.step,_t.userChunk=ut.chunk,_t.userComplete=ut.complete,_t.userError=ut.error,ut.step=ht(ut.step),ut.chunk=ht(ut.chunk),ut.complete=ht(ut.complete),ut.error=ht(ut.error),delete ut.worker,_t.postMessage({input:rt,config:ut,workerId:_t.id})},_.unparse=function(rt,ut){var _t=!1,bt=!0,Pt=",",re=`\r
`,ye='"',fe=ye+ye,kt=!1,Ot=null,St=!1,jt=((()=>{if(typeof ut=="object"){if(typeof ut.delimiter!="string"||_.BAD_DELIMITERS.filter(function(Tt){return ut.delimiter.indexOf(Tt)!==-1}).length||(Pt=ut.delimiter),typeof ut.quotes!="boolean"&&typeof ut.quotes!="function"&&!Array.isArray(ut.quotes)||(_t=ut.quotes),typeof ut.skipEmptyLines!="boolean"&&typeof ut.skipEmptyLines!="string"||(kt=ut.skipEmptyLines),typeof ut.newline=="string"&&(re=ut.newline),typeof ut.quoteChar=="string"&&(ye=ut.quoteChar),typeof ut.header=="boolean"&&(bt=ut.header),Array.isArray(ut.columns)){if(ut.columns.length===0)throw new Error("Option columns is empty");Ot=ut.columns}ut.escapeChar!==void 0&&(fe=ut.escapeChar+ye),ut.escapeFormulae instanceof RegExp?St=ut.escapeFormulae:typeof ut.escapeFormulae=="boolean"&&ut.escapeFormulae&&(St=/^[=+\-@\t\r].*$/)}})(),new RegExp(H(ye),"g"));if(typeof rt=="string"&&(rt=JSON.parse(rt)),Array.isArray(rt)){if(!rt.length||Array.isArray(rt[0]))return Vt(null,rt,kt);if(typeof rt[0]=="object")return Vt(Ot||Object.keys(rt[0]),rt,kt)}else if(typeof rt=="object")return typeof rt.data=="string"&&(rt.data=JSON.parse(rt.data)),Array.isArray(rt.data)&&(rt.fields||(rt.fields=rt.meta&&rt.meta.fields||Ot),rt.fields||(rt.fields=Array.isArray(rt.data[0])?rt.fields:typeof rt.data[0]=="object"?Object.keys(rt.data[0]):[]),Array.isArray(rt.data[0])||typeof rt.data[0]=="object"||(rt.data=[rt.data])),Vt(rt.fields||[],rt.data||[],kt);throw new Error("Unable to serialize unrecognized input");function Vt(Tt,$t,Yt){var se="",le=(typeof Tt=="string"&&(Tt=JSON.parse(Tt)),typeof $t=="string"&&($t=JSON.parse($t)),Array.isArray(Tt)&&0<Tt.length),Ae=!Array.isArray($t[0]);if(le&&bt){for(var Ie=0;Ie<Tt.length;Ie++)0<Ie&&(se+=Pt),se+=pt(Tt[Ie],Ie);0<$t.length&&(se+=re)}for(var Wt=0;Wt<$t.length;Wt++){var Pe=(le?Tt:$t[Wt]).length,we=!1,ce=le?Object.keys($t[Wt]).length===0:$t[Wt].length===0;if(Yt&&!le&&(we=Yt==="greedy"?$t[Wt].join("").trim()==="":$t[Wt].length===1&&$t[Wt][0].length===0),Yt==="greedy"&&le){for(var rn=[],je=0;je<Pe;je++){var nn=Ae?Tt[je]:je;rn.push($t[Wt][nn])}we=rn.join("").trim()===""}if(!we){for(var tn=0;tn<Pe;tn++){0<tn&&!ce&&(se+=Pt);var Tn=le&&Ae?Tt[tn]:tn;se+=pt($t[Wt][Tn],tn)}Wt<$t.length-1&&(!Yt||0<Pe&&!ce)&&(se+=re)}}return se}function pt(Tt,$t){var Yt,se;return Tt==null?"":Tt.constructor===Date?JSON.stringify(Tt).slice(1,25):(se=!1,St&&typeof Tt=="string"&&St.test(Tt)&&(Tt="'"+Tt,se=!0),Yt=Tt.toString().replace(jt,fe),(se=se||_t===!0||typeof _t=="function"&&_t(Tt,$t)||Array.isArray(_t)&&_t[$t]||((le,Ae)=>{for(var Ie=0;Ie<Ae.length;Ie++)if(-1<le.indexOf(Ae[Ie]))return!0;return!1})(Yt,_.BAD_DELIMITERS)||-1<Yt.indexOf(Pt)||Yt.charAt(0)===" "||Yt.charAt(Yt.length-1)===" ")?ye+Yt+ye:Yt)}},_.RECORD_SEP="",_.UNIT_SEP="",_.BYTE_ORDER_MARK="\uFEFF",_.BAD_DELIMITERS=["\r",`
`,'"',_.BYTE_ORDER_MARK],_.WORKERS_SUPPORTED=!l&&!!i.Worker,_.NODE_STREAM_INPUT=1,_.LocalChunkSize=10485760,_.RemoteChunkSize=5242880,_.DefaultDelimiter=",",_.Parser=Q,_.ParserHandle=V,_.NetworkStreamer=M,_.FileStreamer=O,_.StringStreamer=z,_.ReadableStreamStreamer=F,i.jQuery&&((r=i.jQuery).fn.parse=function(rt){var ut=rt.config||{},_t=[];return this.each(function(re){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var ye=0;ye<this.files.length;ye++)_t.push({file:this.files[ye],inputElem:this,instanceConfig:r.extend({},ut)})}),bt(),this;function bt(){if(_t.length===0)ht(rt.complete)&&rt.complete();else{var re,ye,fe,kt,Ot=_t[0];if(ht(rt.before)){var St=rt.before(Ot.file,Ot.inputElem);if(typeof St=="object"){if(St.action==="abort")return re="AbortError",ye=Ot.file,fe=Ot.inputElem,kt=St.reason,void(ht(rt.error)&&rt.error({name:re},ye,fe,kt));if(St.action==="skip")return void Pt();typeof St.config=="object"&&(Ot.instanceConfig=r.extend(Ot.instanceConfig,St.config))}else if(St==="skip")return void Pt()}var jt=Ot.instanceConfig.complete;Ot.instanceConfig.complete=function(Vt){ht(jt)&&jt(Vt,Ot.file,Ot.inputElem),Pt()},_.parse(Ot.file,Ot.instanceConfig)}}function Pt(){_t.splice(0,1),bt()}}),f&&(i.onmessage=function(rt){rt=rt.data,_.WORKER_ID===void 0&&rt&&(_.WORKER_ID=rt.workerId),typeof rt.input=="string"?i.postMessage({workerId:_.WORKER_ID,results:_.parse(rt.input,rt.config),finished:!0}):(i.File&&rt.input instanceof File||rt.input instanceof Object)&&(rt=_.parse(rt.input,rt.config))&&i.postMessage({workerId:_.WORKER_ID,results:rt,finished:!0})}),(M.prototype=Object.create(x.prototype)).constructor=M,(O.prototype=Object.create(x.prototype)).constructor=O,(z.prototype=Object.create(z.prototype)).constructor=z,(F.prototype=Object.create(x.prototype)).constructor=F,_})})(Xv)),Xv.exports}var wU=bU();const SU=Ou(wU),TU=`
.heatbox { display:flex; flex-direction:column; gap:10px; height:100%; }
.hb-legend { display:flex; gap:8px; align-items:center; font-size:12px; color:#666; }
.hb-legend i { display:inline-block; width:160px; height:10px; border-radius:999px; }
.hb-monthbar { display:flex; gap:4px; align-items:center; padding:8px 0; }
.hb-m { min-width:36px; height:28px; border:1px solid #e5e7eb; background:#fff; border-radius:6px; font-size:13px; cursor:pointer; }
.hb-m[disabled] { opacity:.35; cursor:not-allowed; }
.hb-m.active { background:#ffedd5; border-color:#fdba74; font-weight:700; }
.hb-btn { height:28px; padding:0 10px; border:1px solid #ddd; border-radius:8px; background:#fff; cursor:pointer; font-size:12px; }
.hb-warn { margin-top:6px; padding:10px 12px; border:1px solid #ffe58f; background:#fffbe6; border-radius:8px; color:#8b5e00; font-size:13px; }
`,Pv=t=>t<10?`0${t}`:String(t),NM=t=>String(t??"").replace(/\D+/g,""),AU=t=>`${t.slice(0,4)}-${t.slice(4,6)}`,Bb=t=>String(t??"").toLowerCase().replace(/\([^)]*\)/g,"").replace(/[^\w-]+/g," ").replace(/\s+/g,"").trim(),Yg={ym:["","","","yyyymm","ym","month","","","(yyyymm)"],sgg5:["","sigcd","sggcd","adm_drcd","adm_cd5","sig_cd5","code"],law10:["","10","adm_cd","","","hid_cd"],elec:["","","","","electricity","mwh","elec"],gas:["","","gas","gj","citygas",""]},Xg=(t,e)=>{const n=t.map(i=>[i,Bb(i)]);for(const i of e){const r=n.find(([,l])=>l===Bb(i));if(r)return r[0]}for(const i of e){const r=n.find(([,l])=>l.includes(Bb(i)));if(r)return r[0]}return null};function MU(t){const e=(i,r)=>{for(const l of i)if(typeof l[0]=="number"){const[f,a]=l;r.minX=Math.min(r.minX,f),r.maxX=Math.max(r.maxX,f),r.minY=Math.min(r.minY,a),r.maxY=Math.max(r.maxY,a)}else e(l,r)};if(!t)return null;const n={minX:999,maxX:-999,minY:999,maxY:-999};if(t.type==="Polygon")e(t.coordinates,n);else if(t.type==="MultiPolygon")e(t.coordinates,n);else return null;return[(n.minX+n.maxX)/2,(n.minY+n.maxY)/2]}function mD({csvUrl:t="/__2020-2025__v2.csv",sggGeoUrl:e="/korea/sgg.json",forceYmKey:n,forceSggKey:i,forceElecKey:r,forceGasKey:l,year:f,metric:a="elec",autoPlay:g=!1,intervalMs:_=900}){const[x,M]=Z.useState(""),[O]=Z.useState(!0),[z,F]=Z.useState([]),[V,H]=Z.useState(0),[Q,X]=Z.useState(g),[Y]=Z.useState(1),W=String(f??""),J=z[V]||"-",ot=Z.useRef(new Map),ht=Z.useRef({elec:new Map,gas:new Map}),[rt,ut]=Z.useState(!1);Z.useEffect(()=>{(async()=>{try{const fe=await fetch(e);if(!fe.ok)throw new Error(`HTTP ${fe.status}`);const kt=await fe.json(),Ot=new Map;for(const St of kt.features||[]){const jt=St.properties||{},Vt=jt.SIG_CD??jt.SGG_CD??jt.ADM_DR_CD??jt.code??jt.sig_cd??jt.sgg_cd;if(!Vt)continue;const pt=String(Vt).padStart(5,"0").slice(0,5),Tt=MU(St.geometry);Tt&&Ot.set(pt,Tt)}ot.current=Ot,ut(!0),Ot.size||M(" sgg.json   .")}catch(fe){console.error(fe),M(" /korea/sgg.json  ")}})()},[e]),Z.useEffect(()=>{if(!rt){console.log(" centers    CSV ");return}(async()=>{try{const fe=await fetch(t,{cache:"no-cache"});if(!fe.ok)throw new Error(`HTTP ${fe.status}`);let kt=await fe.text();if(/<!doctype|<html/i.test(kt.slice(0,200)))throw new Error("CSV_URL_RETURNED_HTML");kt=kt.replace(/^\uFEFF/,"");const Ot=SU.parse(kt,{header:!0,skipEmptyLines:"greedy",dynamicTyping:!0,transformHeader:ce=>String(ce).replace(/\([^)]*\)/g,"").replace(/\t/g," ").replace(/\s+/g," ").trim()}),St=Array.isArray(Ot.data)?Ot.data:[];if(!St.length){M(" CSV .");return}const jt=Ot.meta.fields||Object.keys(St[0]),Vt={ymKey:Xg(jt,Yg.ym),sgg5Key:Xg(jt,Yg.sgg5),law10Key:Xg(jt,Yg.law10),elecKey:Xg(jt,Yg.elec),gasKey:Xg(jt,Yg.gas)},pt=n||Vt.ymKey,Tt=i||Vt.sgg5Key||Vt.law10Key,$t=r||Vt.elecKey,Yt=l||Vt.gasKey;if(!pt||!Tt||!$t&&!Yt){M(" CSV   (//). props  .");return}const se=ce=>ce==null||ce===""?null:typeof ce=="number"?ce:Number(String(ce).replace(/,/g,"")),le=ot.current,Ae=new Map,Ie=new Map,Wt=new Set;for(const ce of St){const rn=ce[pt],je=NM(String(rn??""));if(je.length<6)continue;const nn=AU(je.slice(0,6));Wt.add(nn);const tn=NM(String(ce[Tt]??"")).slice(0,5).padStart(5,"0"),Tn=le.get(tn);if(!Tn)continue;const an=se(ce[$t]),In=se(ce[Yt]);Number.isFinite(an)&&(Ae.has(nn)||Ae.set(nn,[]),Ae.get(nn).push({lng:Tn[0],lat:Tn[1],value:an})),Number.isFinite(In)&&(Ie.has(nn)||Ie.set(nn,[]),Ie.get(nn).push({lng:Tn[0],lat:Tn[1],value:In}))}ht.current={elec:Ae,gas:Ie};const Pe=Array.from(Wt).sort();F(Pe);const we=W||Pe[0]?.slice(0,4);if(we){const ce=Pe.find(je=>je.startsWith(String(we)))||Pe[0],rn=Pe.findIndex(je=>je===ce);rn>=0&&H(rn)}M(Pe.length?"":" CSV     .")}catch(fe){console.error(fe),M(" CSV / ")}})()},[t,n,i,r,l,rt,W]);const _t=Z.useMemo(()=>{if(!W)return[];const fe=ht.current[a];return fe?Array.from(fe.keys()).filter(kt=>kt.startsWith(W)).sort():[]},[a,W]);Z.useEffect(()=>{if(!(!W||z.length===0)&&_t.length!==0&&!_t.includes(J)){const fe=_t[0],kt=z.findIndex(Ot=>Ot===fe);kt>=0&&H(kt)}},[W,a,z,_t]),Z.useEffect(()=>{if(!Q||_t.length===0)return;const fe=_t,kt=J;let Ot=fe.indexOf(kt);Ot<0&&(Ot=0);const St=Math.max(150,_/(Y||1)),jt=setInterval(()=>{const Vt=Ot+1;if(Vt>=fe.length){X(!1);return}const pt=fe[Vt],Tt=z.findIndex($t=>$t===pt);Tt>=0&&H(Tt)},St);return()=>clearInterval(jt)},[Q,_t,J,z,_,Y]);const bt=Z.useMemo(()=>{const kt=ht.current[a]?.get(J)||[];let Ot=1;return O&&kt.length&&(Ot=kt.reduce((St,jt)=>jt.value>St?jt.value:St,0)||1),{type:"FeatureCollection",features:kt.map(St=>({type:"Feature",geometry:{type:"Point",coordinates:[St.lng,St.lat]},properties:{w:O?Math.max(.05,St.value/Ot):St.value}}))}},[a,O,J]),Pt=Z.useMemo(()=>({"heatmap-radius":["interpolate",["linear"],["zoom"],5,18,7,28,10,40],"heatmap-intensity":1,"heatmap-opacity":.9,"heatmap-weight":["coalesce",["get","w"],0],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(47,128,237,0)",.2,"rgb(86,204,242)",.4,"rgb(255,209,102)",.6,"rgb(252,163,17)",1,"rgb(230,57,70)"]}),[]),re=fe=>{if(!W)return;const kt=`${W}-${Pv(fe)}`,Ot=z.findIndex(St=>St===kt);Ot>=0&&H(Ot)},ye=Z.useMemo(()=>{const fe=new Set(_t),kt={};for(let Ot=1;Ot<=12;Ot++)kt[Ot]=fe.has(`${W}-${Pv(Ot)}`);return kt},[W,_t]);return xt.jsxs("div",{className:"heatbox",style:{height:"100%"},children:[xt.jsx("style",{children:TU}),xt.jsxs("div",{className:"hb-legend",children:[xt.jsx("button",{className:"hb-btn",onClick:()=>X(fe=>!fe),title:" ",children:Q?" ":" "}),xt.jsx("span",{style:{marginLeft:6}}),xt.jsx("span",{style:{marginLeft:"auto"},children:""}),xt.jsx("i",{style:{background:"linear-gradient(90deg,#2f80ed,#56ccf2,#ffd166,#fca311,#e63946)"}}),xt.jsx("span",{children:""})]}),xt.jsx("div",{style:{flex:1,minHeight:360},children:xt.jsxs(dU,{mapLib:pD,initialViewState:{longitude:127.8,latitude:36.3,zoom:6.2,minZoom:5.8,maxZoom:13},mapStyle:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",reuseMaps:!0,style:{height:"100%",width:"100%"},children:[xt.jsx(pU,{position:"bottom-right"}),xt.jsx(gU,{id:"heat-src",type:"geojson",data:bt}),xt.jsx(mU,{id:"heat-lyr",type:"heatmap",source:"heat-src",paint:Pt})]})}),xt.jsx("div",{className:"hb-monthbar",children:Array.from({length:12},(fe,kt)=>kt+1).map(fe=>{const kt=ye[fe],Ot=kt&&J!=="-"&&J===`${W}-${Pv(fe)}`;return xt.jsxs("button",{className:`hb-m ${Ot?"active":""}`,disabled:!kt,onClick:()=>kt&&re(fe),title:kt?`${W}-${Pv(fe)}`:" ",children:[fe,""]},fe)})}),x&&xt.jsx("div",{className:"hb-warn",children:x})]})}function EU(t){const e=t.replace(/\/$/,"");return e.endsWith("/api")?e:`${e}/api`}function CU(t){const e=String(t??"").match(/(\d{4})\D*?(\d{1,2})/);return e?`${e[1]}${e[2].padStart(2,"0")}`:null}async function PU({apiBase:t,year:e}){const n=EU(t),i=[`${n}/emission/country?year=${e}`,`${n}/emission/country`,`${n}/emission?cityId=0&countyId=0`];let r=null;for(const a of i)try{const g=await fetch(a);if(!g.ok)continue;const _=await g.json();if(r=Array.isArray(_?.items)?_.items:Array.isArray(_)?_:null,r&&r.length)break}catch{}if(!r)return{elec:Array(12).fill(0),gas:Array(12).fill(0)};const l=Array(12).fill(0),f=Array(12).fill(0);for(const a of r){const g=gD(a),_=CU(Nb(g,["YEAR_MONTH","yearMonth","YM","ym"]));if(!_||_.slice(0,4)!==String(e))continue;const x=Number(_.slice(4,6));if(!Number.isFinite(x)||x<1||x>12)continue;const M=jM(Nb(g,["ELEC_CO2EQ","elecCo2eq","elecEmission","ELEC_EMISSION","elecCo2"])),O=jM(Nb(g,["GAS_CO2EQ","gasCo2eq","gasEmission","GAS_EMISSION","gasCo2"]));l[x-1]+=M,f[x-1]+=O}return{elec:l,gas:f}}function gD(t,e="",n={}){for(const[i,r]of Object.entries(t||{})){const l=e?`${e}.${i}`:i;r&&typeof r=="object"&&!Array.isArray(r)?gD(r,l,n):n[l]=r}return n}function Nb(t,e){for(const n of e)if(n in t)return t[n]}const jM=t=>{const e=Number(t);return Number.isFinite(e)?e:0};function FM({title:t,unit:e,data:n,color:i="#2a84ff"}){const r=Math.max(1,...n.map(f=>Number(f)||0)),l=["1","2","3","4","5","6","7","8","9","10","11","12"];return xt.jsxs("div",{style:{border:"1px solid #e6e8ef",borderRadius:12,padding:"12px 12px 10px",background:"#fff",marginTop:12},children:[xt.jsxs("div",{style:{fontSize:13,fontWeight:700,marginBottom:8},children:[t," ",xt.jsxs("span",{style:{color:"#889",fontWeight:500},children:["(",e,")"]})]}),xt.jsx("div",{style:{height:140,display:"flex",alignItems:"flex-end",gap:6},children:n.map((f,a)=>{const g=Math.round((Number(f)||0)/r*120);return xt.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[xt.jsx("div",{title:`${l[a]}: ${Number(f).toLocaleString()}`,style:{width:14,height:g,borderRadius:4,background:i,opacity:.9}}),xt.jsx("div",{style:{fontSize:10,color:"#777",marginTop:4},children:l[a]})]},a)})})]})}function kU(){const t=Z.useMemo(()=>new Date,[]),[e,n]=Z.useState(t.getFullYear()),[i,r]=Z.useState("elec"),l="/api",f=Z.useMemo(()=>{const z=t.getFullYear(),F=z-5;return Array.from({length:z-F+1},(V,H)=>z-H)},[t]),[a,g]=Z.useState(Array(12).fill(0)),[_,x]=Z.useState(Array(12).fill(0)),[M,O]=Z.useState(!1);return Z.useEffect(()=>{let z=!0;return(async()=>{try{O(!0);const F=await PU({apiBase:l,year:e});if(!z)return;g(F.elec),x(F.gas)}finally{z&&O(!1)}})(),()=>{z=!1}},[l,e]),xt.jsx("div",{className:pi.wrap,children:xt.jsxs("div",{className:pi.container,children:[xt.jsxs("header",{className:pi.header,children:[xt.jsx("h1",{children:"  "}),xt.jsx("p",{children:"            ."})]}),xt.jsxs("div",{className:pi.layout,children:[xt.jsxs("aside",{className:pi.side,children:[xt.jsxs("div",{className:pi.filterCard,children:[xt.jsx("div",{className:pi.cardTitle,children:"  "}),xt.jsxs("div",{className:pi.formRow,children:[xt.jsx("label",{className:pi.label,children:""}),xt.jsx("select",{className:pi.selectBig,value:e,onChange:z=>n(Number(z.target.value)),children:f.map(z=>xt.jsxs("option",{value:z,children:[z,""]},z))})]}),xt.jsx("div",{className:pi.sep}),xt.jsx("div",{className:pi.cardTitle,children:" "}),xt.jsxs("div",{className:pi.formRow,children:[xt.jsx("label",{className:pi.label,children:""}),xt.jsxs("select",{className:pi.select,value:i,onChange:z=>r(z.target.value),children:[xt.jsx("option",{value:"elec",children:" "}),xt.jsx("option",{value:"gas",children:" "})]})]})]}),xt.jsxs("div",{style:{marginTop:8},children:[xt.jsx(FM,{title:"    ",unit:" tCOeq ()",data:a,color:"#2a84ff"}),xt.jsx(FM,{title:"    ",unit:" tCOeq ()",data:_,color:"#ff7a00"}),M&&xt.jsx("div",{style:{fontSize:12,color:"#666",marginTop:6},children:"    "})]})]}),xt.jsxs("section",{className:pi.card,children:[xt.jsx("div",{className:pi.cardHead,children:xt.jsx("h3",{children:"   ()"})}),xt.jsx("div",{className:pi.panel,style:{height:720},children:xt.jsx(mD,{apiBase:l,year:e,metric:i,autoPlay:!1,intervalMs:900,sggGeoUrl:"/korea/sgg.json",initialZoomStep:-1})})]})]})]})})}function yD(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=yD(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Fr(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=yD(t))&&(i&&(i+=" "),i+=e);return i}var OU=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function $S(t){if(typeof t!="string")return!1;var e=OU;return e.includes(t)}var DU=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function _D(t){if(typeof t!="string")return!1;var e=DU;return e.includes(t)}function vD(t){return typeof t=="string"&&t.startsWith("data-")}function pc(t){var e=Object.entries(t).filter(n=>{var[i]=n;return _D(i)||vD(i)});return Object.fromEntries(e)}function lx(t){if(t==null)return null;if(Z.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return pc(e)}return typeof t=="object"&&!Array.isArray(t)?pc(t):null}function Cu(t){var e=Object.entries(t).filter(n=>{var[i]=n;return _D(i)||vD(i)||$S(i)});return Object.fromEntries(e)}function zU(t){return t==null?null:Z.isValidElement(t)?Cu(t.props):typeof t=="object"&&!Array.isArray(t)?Cu(t):null}var LU=["children","width","height","viewBox","className","style","title","desc"];function Pw(){return Pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pw.apply(null,arguments)}function IU(t,e){if(t==null)return{};var n,i,r=RU(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function RU(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var xD=Z.forwardRef((t,e)=>{var{children:n,width:i,height:r,viewBox:l,className:f,style:a,title:g,desc:_}=t,x=IU(t,LU),M=l||{width:i,height:r,x:0,y:0},O=Fr("recharts-surface",f);return Z.createElement("svg",Pw({},Cu(x),{className:O,width:i,height:r,style:a,viewBox:"".concat(M.x," ").concat(M.y," ").concat(M.width," ").concat(M.height),ref:e}),Z.createElement("title",null,g),Z.createElement("desc",null,_),n)}),BU=["children","className"];function kw(){return kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},kw.apply(null,arguments)}function NU(t,e){if(t==null)return{};var n,i,r=jU(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jU(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var qc=Z.forwardRef((t,e)=>{var{children:n,className:i}=t,r=NU(t,BU),l=Fr("recharts-layer",i);return Z.createElement("g",kw({className:l},Cu(r),{ref:e}),n)}),FU=Z.createContext(null);function ga(t){return function(){return t}}const Ow=Math.PI,Dw=2*Ow,jd=1e-6,UU=Dw-jd;function bD(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function VU(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return bD;const n=10**e;return function(i){this._+=i[0];for(let r=1,l=i.length;r<l;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class $U{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?bD:VU(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,l,f){this._append`C${+e},${+n},${+i},${+r},${this._x1=+l},${this._y1=+f}`}arcTo(e,n,i,r,l){if(e=+e,n=+n,i=+i,r=+r,l=+l,l<0)throw new Error(`negative radius: ${l}`);let f=this._x1,a=this._y1,g=i-e,_=r-n,x=f-e,M=a-n,O=x*x+M*M;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(O>jd)if(!(Math.abs(M*g-_*x)>jd)||!l)this._append`L${this._x1=e},${this._y1=n}`;else{let z=i-f,F=r-a,V=g*g+_*_,H=z*z+F*F,Q=Math.sqrt(V),X=Math.sqrt(O),Y=l*Math.tan((Ow-Math.acos((V+O-H)/(2*Q*X)))/2),W=Y/X,J=Y/Q;Math.abs(W-1)>jd&&this._append`L${e+W*x},${n+W*M}`,this._append`A${l},${l},0,0,${+(M*z>x*F)},${this._x1=e+J*g},${this._y1=n+J*_}`}}arc(e,n,i,r,l,f){if(e=+e,n=+n,i=+i,f=!!f,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),g=i*Math.sin(r),_=e+a,x=n+g,M=1^f,O=f?r-l:l-r;this._x1===null?this._append`M${_},${x}`:(Math.abs(this._x1-_)>jd||Math.abs(this._y1-x)>jd)&&this._append`L${_},${x}`,i&&(O<0&&(O=O%Dw+Dw),O>UU?this._append`A${i},${i},0,1,${M},${e-a},${n-g}A${i},${i},0,1,${M},${this._x1=_},${this._y1=x}`:O>jd&&this._append`A${i},${i},0,${+(O>=Ow)},${M},${this._x1=e+i*Math.cos(l)},${this._y1=n+i*Math.sin(l)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function wD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new $U(e)}function qS(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function SD(t){this._context=t}SD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ux(t){return new SD(t)}function TD(t){return t[0]}function AD(t){return t[1]}function MD(t,e){var n=ga(!0),i=null,r=ux,l=null,f=wD(a);t=typeof t=="function"?t:t===void 0?TD:ga(t),e=typeof e=="function"?e:e===void 0?AD:ga(e);function a(g){var _,x=(g=qS(g)).length,M,O=!1,z;for(i==null&&(l=r(z=f())),_=0;_<=x;++_)!(_<x&&n(M=g[_],_,g))===O&&((O=!O)?l.lineStart():l.lineEnd()),O&&l.point(+t(M,_,g),+e(M,_,g));if(z)return l=null,z+""||null}return a.x=function(g){return arguments.length?(t=typeof g=="function"?g:ga(+g),a):t},a.y=function(g){return arguments.length?(e=typeof g=="function"?g:ga(+g),a):e},a.defined=function(g){return arguments.length?(n=typeof g=="function"?g:ga(!!g),a):n},a.curve=function(g){return arguments.length?(r=g,i!=null&&(l=r(i)),a):r},a.context=function(g){return arguments.length?(g==null?i=l=null:l=r(i=g),a):i},a}function kv(t,e,n){var i=null,r=ga(!0),l=null,f=ux,a=null,g=wD(_);t=typeof t=="function"?t:t===void 0?TD:ga(+t),e=typeof e=="function"?e:ga(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?AD:ga(+n);function _(M){var O,z,F,V=(M=qS(M)).length,H,Q=!1,X,Y=new Array(V),W=new Array(V);for(l==null&&(a=f(X=g())),O=0;O<=V;++O){if(!(O<V&&r(H=M[O],O,M))===Q)if(Q=!Q)z=O,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),F=O-1;F>=z;--F)a.point(Y[F],W[F]);a.lineEnd(),a.areaEnd()}Q&&(Y[O]=+t(H,O,M),W[O]=+e(H,O,M),a.point(i?+i(H,O,M):Y[O],n?+n(H,O,M):W[O]))}if(X)return a=null,X+""||null}function x(){return MD().defined(r).curve(f).context(l)}return _.x=function(M){return arguments.length?(t=typeof M=="function"?M:ga(+M),i=null,_):t},_.x0=function(M){return arguments.length?(t=typeof M=="function"?M:ga(+M),_):t},_.x1=function(M){return arguments.length?(i=M==null?null:typeof M=="function"?M:ga(+M),_):i},_.y=function(M){return arguments.length?(e=typeof M=="function"?M:ga(+M),n=null,_):e},_.y0=function(M){return arguments.length?(e=typeof M=="function"?M:ga(+M),_):e},_.y1=function(M){return arguments.length?(n=M==null?null:typeof M=="function"?M:ga(+M),_):n},_.lineX0=_.lineY0=function(){return x().x(t).y(e)},_.lineY1=function(){return x().x(t).y(n)},_.lineX1=function(){return x().x(i).y(e)},_.defined=function(M){return arguments.length?(r=typeof M=="function"?M:ga(!!M),_):r},_.curve=function(M){return arguments.length?(f=M,l!=null&&(a=f(l)),_):f},_.context=function(M){return arguments.length?(M==null?l=a=null:a=f(l=M),_):l},_}class ED{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function qU(t){return new ED(t,!0)}function HU(t){return new ED(t,!1)}function h0(){}function f0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function CD(t){this._context=t}CD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:f0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:f0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ZU(t){return new CD(t)}function PD(t){this._context=t}PD.prototype={areaStart:h0,areaEnd:h0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:f0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function GU(t){return new PD(t)}function kD(t){this._context=t}kD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:f0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function WU(t){return new kD(t)}function OD(t){this._context=t}OD.prototype={areaStart:h0,areaEnd:h0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function YU(t){return new OD(t)}function UM(t){return t<0?-1:1}function VM(t,e,n){var i=t._x1-t._x0,r=e-t._x1,l=(t._y1-t._y0)/(i||r<0&&-0),f=(n-t._y1)/(r||i<0&&-0),a=(l*r+f*i)/(i+r);return(UM(l)+UM(f))*Math.min(Math.abs(l),Math.abs(f),.5*Math.abs(a))||0}function $M(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function jb(t,e,n){var i=t._x0,r=t._y0,l=t._x1,f=t._y1,a=(l-i)/3;t._context.bezierCurveTo(i+a,r+a*e,l-a,f-a*n,l,f)}function d0(t){this._context=t}d0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jb(this,this._t0,$M(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,jb(this,$M(this,n=VM(this,t,e)),n);break;default:jb(this,this._t0,n=VM(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function DD(t){this._context=new zD(t)}(DD.prototype=Object.create(d0.prototype)).point=function(t,e){d0.prototype.point.call(this,e,t)};function zD(t){this._context=t}zD.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,l){this._context.bezierCurveTo(e,t,i,n,l,r)}};function XU(t){return new d0(t)}function KU(t){return new DD(t)}function LD(t){this._context=t}LD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=qM(t),r=qM(e),l=0,f=1;f<n;++l,++f)this._context.bezierCurveTo(i[0][l],r[0][l],i[1][l],r[1][l],t[f],e[f]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function qM(t){var e,n=t.length-1,i,r=new Array(n),l=new Array(n),f=new Array(n);for(r[0]=0,l[0]=2,f[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,l[e]=4,f[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,l[n-1]=7,f[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/l[e-1],l[e]-=i,f[e]-=i*f[e-1];for(r[n-1]=f[n-1]/l[n-1],e=n-2;e>=0;--e)r[e]=(f[e]-r[e+1])/l[e];for(l[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)l[e]=2*t[e+1]-r[e+1];return[r,l]}function QU(t){return new LD(t)}function cx(t,e){this._context=t,this._t=e}cx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function JU(t){return new cx(t,.5)}function tV(t){return new cx(t,0)}function eV(t){return new cx(t,1)}function Pm(t,e){if((f=t.length)>1)for(var n=1,i,r,l=t[e[0]],f,a=l.length;n<f;++n)for(r=l,l=t[e[n]],i=0;i<a;++i)l[i][1]+=l[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function zw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function nV(t,e){return t[e]}function iV(t){const e=[];return e.key=t,e}function rV(){var t=ga([]),e=zw,n=Pm,i=nV;function r(l){var f=Array.from(t.apply(this,arguments),iV),a,g=f.length,_=-1,x;for(const M of l)for(a=0,++_;a<g;++a)(f[a][_]=[0,+i(M,f[a].key,_,l)]).data=M;for(a=0,x=qS(e(f));a<g;++a)f[x[a]].index=a;return n(f,x),f}return r.keys=function(l){return arguments.length?(t=typeof l=="function"?l:ga(Array.from(l)),r):t},r.value=function(l){return arguments.length?(i=typeof l=="function"?l:ga(+l),r):i},r.order=function(l){return arguments.length?(e=l==null?zw:typeof l=="function"?l:ga(Array.from(l)),r):e},r.offset=function(l){return arguments.length?(n=l??Pm,r):n},r}function aV(t,e){if((i=t.length)>0){for(var n,i,r=0,l=t[0].length,f;r<l;++r){for(f=n=0;n<i;++n)f+=t[n][r][1]||0;if(f)for(n=0;n<i;++n)t[n][r][1]/=f}Pm(t,e)}}function sV(t,e){if((r=t.length)>0){for(var n=0,i=t[e[0]],r,l=i.length;n<l;++n){for(var f=0,a=0;f<r;++f)a+=t[f][n][1]||0;i[n][1]+=i[n][0]=-a/2}Pm(t,e)}}function oV(t,e){if(!(!((f=t.length)>0)||!((l=(r=t[e[0]]).length)>0))){for(var n=0,i=1,r,l,f;i<l;++i){for(var a=0,g=0,_=0;a<f;++a){for(var x=t[e[a]],M=x[i][1]||0,O=x[i-1][1]||0,z=(M-O)/2,F=0;F<a;++F){var V=t[e[F]],H=V[i][1]||0,Q=V[i-1][1]||0;z+=H-Q}g+=M,_+=z*M}r[i-1][1]+=r[i-1][0]=n,g&&(n-=_/g)}r[i-1][1]+=r[i-1][0]=n,Pm(t,e)}}var Fb={},Ub={},HM;function lV(){return HM||(HM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(Ub)),Ub}var Vb={},ZM;function ID(){return ZM||(ZM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(Vb)),Vb}var $b={},GM;function HS(){return GM||(GM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})($b)),$b}var qb={},Hb={},WM;function uV(){return WM||(WM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}t.toString=e})(Hb)),Hb}var YM;function ZS(){return YM||(YM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uV(),n=HS();function i(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const l=[],f=r.length;if(f===0)return l;let a=0,g="",_="",x=!1;for(r.charCodeAt(0)===46&&(l.push(""),a++);a<f;){const M=r[a];_?M==="\\"&&a+1<f?(a++,g+=r[a]):M===_?_="":g+=M:x?M==='"'||M==="'"?_=M:M==="]"?(x=!1,l.push(g),g=""):g+=M:M==="["?(x=!0,g&&(l.push(g),g="")):M==="."?g&&(l.push(g),g=""):g+=M,a++}return g&&l.push(g),l}t.toPath=i})(qb)),qb}var XM;function GS(){return XM||(XM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lV(),n=ID(),i=HS(),r=ZS();function l(a,g,_){if(a==null)return _;switch(typeof g){case"string":{if(e.isUnsafeProperty(g))return _;const x=a[g];return x===void 0?n.isDeepKey(g)?l(a,r.toPath(g),_):_:x}case"number":case"symbol":{typeof g=="number"&&(g=i.toKey(g));const x=a[g];return x===void 0?_:x}default:{if(Array.isArray(g))return f(a,g,_);if(Object.is(g?.valueOf(),-0)?g="-0":g=String(g),e.isUnsafeProperty(g))return _;const x=a[g];return x===void 0?_:x}}}function f(a,g,_){if(g.length===0)return _;let x=a;for(let M=0;M<g.length;M++){if(x==null||e.isUnsafeProperty(g[M]))return _;x=x[g[M]]}return x===void 0?_:x}t.get=l})(Fb)),Fb}var Zb,KM;function cV(){return KM||(KM=1,Zb=GS().get),Zb}var hV=cV();const hx=Ou(hV);var Mu=t=>t===0?0:t>0?1:-1,mc=t=>typeof t=="number"&&t!=+t,Rh=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,xn=t=>(typeof t=="number"||t instanceof Number)&&!mc(t),Hc=t=>xn(t)||typeof t=="string",fV=0,Ay=t=>{var e=++fV;return"".concat(t||"").concat(e)},Uf=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xn(e)&&typeof e!="string")return i;var l;if(Rh(e)){if(n==null)return i;var f=e.indexOf("%");l=n*parseFloat(e.slice(0,f))/100}else l=+e;return mc(l)&&(l=i),r&&n!=null&&l>n&&(l=n),l},RD=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},i=0;i<e;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1};function jc(t,e,n){return xn(t)&&xn(e)?t+n*(e-t):e}function BD(t,e,n){if(!(!t||!t.length))return t.find(i=>i&&(typeof e=="function"?e(i):hx(i,e))===n)}var Ws=t=>t===null||typeof t>"u",WS=t=>Ws(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function dV(t){return t!=null}function jm(){}var ND=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,YS=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(Z.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(r=>{$S(r)&&(i[r]=(l=>n[r](n,l)))}),i},pV=(t,e,n)=>i=>(t(e,n,i),null),mV=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var i=null;return Object.keys(t).forEach(r=>{var l=t[r];$S(r)&&typeof l=="function"&&(i||(i={}),i[r]=pV(l,e,n))}),i};function QM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function gV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QM(Object(n),!0).forEach(function(i){yV(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yV(t,e,n){return(e=_V(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _V(t){var e=vV(t,"string");return typeof e=="symbol"?e:e+""}function vV(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tu(t,e){var n=gV({},t),i=e,r=Object.keys(e),l=r.reduce((f,a)=>(f[a]===void 0&&i[a]!==void 0&&(f[a]=i[a]),f),n);return l}var Gb={},Wb={},JM;function xV(){return JM||(JM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){const r=new Map;for(let l=0;l<n.length;l++){const f=n[l],a=i(f);r.has(a)||r.set(a,f)}return Array.from(r.values())}t.uniqBy=e})(Wb)),Wb}var Yb={},tE;function jD(){return tE||(tE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(Yb)),Yb}var Xb={},Kb={},Qb={},eE;function bV(){return eE||(eE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(Qb)),Qb}var nE;function XS(){return nE||(nE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bV();function n(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}t.isArrayLike=n})(Kb)),Kb}var Jb={},iE;function wV(){return iE||(iE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(Jb)),Jb}var rE;function SV(){return rE||(rE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XS(),n=wV();function i(r){return n.isObjectLike(r)&&e.isArrayLike(r)}t.isArrayLikeObject=i})(Xb)),Xb}var t1={},e1={},aE;function TV(){return aE||(aE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GS();function n(i){return function(r){return e.get(r,i)}}t.property=n})(e1)),e1}var n1={},i1={},r1={},a1={},sE;function FD(){return sE||(sE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(a1)),a1}var s1={},oE;function UD(){return oE||(oE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(s1)),s1}var o1={},lE;function VD(){return lE||(lE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}t.eq=e})(o1)),o1}var uE;function AV(){return uE||(uE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FD(),n=UD(),i=VD();function r(x,M,O){return typeof O!="function"?r(x,M,()=>{}):l(x,M,function z(F,V,H,Q,X,Y){const W=O(F,V,H,Q,X,Y);return W!==void 0?!!W:l(F,V,z,Y)},new Map)}function l(x,M,O,z){if(M===x)return!0;switch(typeof M){case"object":return f(x,M,O,z);case"function":return Object.keys(M).length>0?l(x,{...M},O,z):i.eq(x,M);default:return e.isObject(x)?typeof M=="string"?M==="":!0:i.eq(x,M)}}function f(x,M,O,z){if(M==null)return!0;if(Array.isArray(M))return g(x,M,O,z);if(M instanceof Map)return a(x,M,O,z);if(M instanceof Set)return _(x,M,O,z);const F=Object.keys(M);if(x==null)return F.length===0;if(F.length===0)return!0;if(z?.has(M))return z.get(M)===x;z?.set(M,x);try{for(let V=0;V<F.length;V++){const H=F[V];if(!n.isPrimitive(x)&&!(H in x)||M[H]===void 0&&x[H]!==void 0||M[H]===null&&x[H]!==null||!O(x[H],M[H],H,x,M,z))return!1}return!0}finally{z?.delete(M)}}function a(x,M,O,z){if(M.size===0)return!0;if(!(x instanceof Map))return!1;for(const[F,V]of M.entries()){const H=x.get(F);if(O(H,V,F,x,M,z)===!1)return!1}return!0}function g(x,M,O,z){if(M.length===0)return!0;if(!Array.isArray(x))return!1;const F=new Set;for(let V=0;V<M.length;V++){const H=M[V];let Q=!1;for(let X=0;X<x.length;X++){if(F.has(X))continue;const Y=x[X];let W=!1;if(O(Y,H,V,x,M,z)&&(W=!0),W){F.add(X),Q=!0;break}}if(!Q)return!1}return!0}function _(x,M,O,z){return M.size===0?!0:x instanceof Set?g([...x],[...M],O,z):!1}t.isMatchWith=r,t.isSetMatch=_})(r1)),r1}var cE;function $D(){return cE||(cE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AV();function n(i,r){return e.isMatchWith(i,r,()=>{})}t.isMatch=n})(i1)),i1}var l1={},u1={},c1={},hE;function MV(){return hE||(hE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}t.getSymbols=e})(c1)),c1}var h1={},fE;function qD(){return fE||(fE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(h1)),h1}var f1={},dE;function HD(){return dE||(dE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",i="[object Number]",r="[object Boolean]",l="[object Arguments]",f="[object Symbol]",a="[object Date]",g="[object Map]",_="[object Set]",x="[object Array]",M="[object Function]",O="[object ArrayBuffer]",z="[object Object]",F="[object Error]",V="[object DataView]",H="[object Uint8Array]",Q="[object Uint8ClampedArray]",X="[object Uint16Array]",Y="[object Uint32Array]",W="[object BigUint64Array]",J="[object Int8Array]",ot="[object Int16Array]",ht="[object Int32Array]",rt="[object BigInt64Array]",ut="[object Float32Array]",_t="[object Float64Array]";t.argumentsTag=l,t.arrayBufferTag=O,t.arrayTag=x,t.bigInt64ArrayTag=rt,t.bigUint64ArrayTag=W,t.booleanTag=r,t.dataViewTag=V,t.dateTag=a,t.errorTag=F,t.float32ArrayTag=ut,t.float64ArrayTag=_t,t.functionTag=M,t.int16ArrayTag=ot,t.int32ArrayTag=ht,t.int8ArrayTag=J,t.mapTag=g,t.numberTag=i,t.objectTag=z,t.regexpTag=e,t.setTag=_,t.stringTag=n,t.symbolTag=f,t.uint16ArrayTag=X,t.uint32ArrayTag=Y,t.uint8ArrayTag=H,t.uint8ClampedArrayTag=Q})(f1)),f1}var d1={},pE;function EV(){return pE||(pE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(d1)),d1}var mE;function ZD(){return mE||(mE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MV(),n=qD(),i=HD(),r=UD(),l=EV();function f(x,M){return a(x,void 0,x,new Map,M)}function a(x,M,O,z=new Map,F=void 0){const V=F?.(x,M,O,z);if(V!==void 0)return V;if(r.isPrimitive(x))return x;if(z.has(x))return z.get(x);if(Array.isArray(x)){const H=new Array(x.length);z.set(x,H);for(let Q=0;Q<x.length;Q++)H[Q]=a(x[Q],Q,O,z,F);return Object.hasOwn(x,"index")&&(H.index=x.index),Object.hasOwn(x,"input")&&(H.input=x.input),H}if(x instanceof Date)return new Date(x.getTime());if(x instanceof RegExp){const H=new RegExp(x.source,x.flags);return H.lastIndex=x.lastIndex,H}if(x instanceof Map){const H=new Map;z.set(x,H);for(const[Q,X]of x)H.set(Q,a(X,Q,O,z,F));return H}if(x instanceof Set){const H=new Set;z.set(x,H);for(const Q of x)H.add(a(Q,void 0,O,z,F));return H}if(typeof Buffer<"u"&&Buffer.isBuffer(x))return x.subarray();if(l.isTypedArray(x)){const H=new(Object.getPrototypeOf(x)).constructor(x.length);z.set(x,H);for(let Q=0;Q<x.length;Q++)H[Q]=a(x[Q],Q,O,z,F);return H}if(x instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&x instanceof SharedArrayBuffer)return x.slice(0);if(x instanceof DataView){const H=new DataView(x.buffer.slice(0),x.byteOffset,x.byteLength);return z.set(x,H),g(H,x,O,z,F),H}if(typeof File<"u"&&x instanceof File){const H=new File([x],x.name,{type:x.type});return z.set(x,H),g(H,x,O,z,F),H}if(typeof Blob<"u"&&x instanceof Blob){const H=new Blob([x],{type:x.type});return z.set(x,H),g(H,x,O,z,F),H}if(x instanceof Error){const H=new x.constructor;return z.set(x,H),H.message=x.message,H.name=x.name,H.stack=x.stack,H.cause=x.cause,g(H,x,O,z,F),H}if(x instanceof Boolean){const H=new Boolean(x.valueOf());return z.set(x,H),g(H,x,O,z,F),H}if(x instanceof Number){const H=new Number(x.valueOf());return z.set(x,H),g(H,x,O,z,F),H}if(x instanceof String){const H=new String(x.valueOf());return z.set(x,H),g(H,x,O,z,F),H}if(typeof x=="object"&&_(x)){const H=Object.create(Object.getPrototypeOf(x));return z.set(x,H),g(H,x,O,z,F),H}return x}function g(x,M,O=x,z,F){const V=[...Object.keys(M),...e.getSymbols(M)];for(let H=0;H<V.length;H++){const Q=V[H],X=Object.getOwnPropertyDescriptor(x,Q);(X==null||X.writable)&&(x[Q]=a(M[Q],Q,O,z,F))}}function _(x){switch(n.getTag(x)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=f,t.cloneDeepWithImpl=a,t.copyProperties=g})(u1)),u1}var gE;function CV(){return gE||(gE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZD();function n(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}t.cloneDeep=n})(l1)),l1}var yE;function PV(){return yE||(yE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$D(),n=CV();function i(r){return r=n.cloneDeep(r),l=>e.isMatch(l,r)}t.matches=i})(n1)),n1}var p1={},m1={},g1={},_E;function kV(){return _E||(_E=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZD(),n=HD();function i(r,l){return e.cloneDeepWith(r,(f,a,g,_)=>{const x=l?.(f,a,g,_);if(x!==void 0)return x;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case n.numberTag:case n.stringTag:case n.booleanTag:{const M=new r.constructor(r?.valueOf());return e.copyProperties(M,r),M}case n.argumentsTag:{const M={};return e.copyProperties(M,r),M.length=r.length,M[Symbol.iterator]=r[Symbol.iterator],M}default:return}})}t.cloneDeepWith=i})(g1)),g1}var vE;function OV(){return vE||(vE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kV();function n(i){return e.cloneDeepWith(i)}t.cloneDeep=n})(m1)),m1}var y1={},_1={},xE;function GD(){return xE||(xE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}t.isIndex=n})(_1)),_1}var v1={},bE;function DV(){return bE||(bE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qD();function n(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}t.isArguments=n})(v1)),v1}var wE;function zV(){return wE||(wE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ID(),n=GD(),i=DV(),r=ZS();function l(f,a){let g;if(Array.isArray(a)?g=a:typeof a=="string"&&e.isDeepKey(a)&&f?.[a]==null?g=r.toPath(a):g=[a],g.length===0)return!1;let _=f;for(let x=0;x<g.length;x++){const M=g[x];if((_==null||!Object.hasOwn(_,M))&&!((Array.isArray(_)||i.isArguments(_))&&n.isIndex(M)&&M<_.length))return!1;_=_[M]}return!0}t.has=l})(y1)),y1}var SE;function LV(){return SE||(SE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$D(),n=HS(),i=OV(),r=GS(),l=zV();function f(a,g){switch(typeof a){case"object":{Object.is(a?.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return g=i.cloneDeep(g),function(_){const x=r.get(_,a);return x===void 0?l.has(_,a):g===void 0?x===void 0:e.isMatch(x,g)}}t.matchesProperty=f})(p1)),p1}var TE;function IV(){return TE||(TE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jD(),n=TV(),i=PV(),r=LV();function l(f){if(f==null)return e.identity;switch(typeof f){case"function":return f;case"object":return Array.isArray(f)&&f.length===2?r.matchesProperty(f[0],f[1]):i.matches(f);case"string":case"symbol":case"number":return n.property(f)}}t.iteratee=l})(t1)),t1}var AE;function RV(){return AE||(AE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xV(),n=jD(),i=SV(),r=IV();function l(f,a=n.identity){return i.isArrayLikeObject(f)?e.uniqBy(Array.from(f),r.iteratee(a)):[]}t.uniqBy=l})(Gb)),Gb}var x1,ME;function BV(){return ME||(ME=1,x1=RV().uniqBy),x1}var NV=BV();const EE=Ou(NV);function jV(t,e,n){return e===!0?EE(t,n):typeof e=="function"?EE(t,e):t}var b1={exports:{}},w1={},S1={exports:{}},T1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function FV(){if(CE)return T1;CE=1;var t=Lm();function e(M,O){return M===O&&(M!==0||1/M===1/O)||M!==M&&O!==O}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,l=t.useLayoutEffect,f=t.useDebugValue;function a(M,O){var z=O(),F=i({inst:{value:z,getSnapshot:O}}),V=F[0].inst,H=F[1];return l(function(){V.value=z,V.getSnapshot=O,g(V)&&H({inst:V})},[M,z,O]),r(function(){return g(V)&&H({inst:V}),M(function(){g(V)&&H({inst:V})})},[M]),f(z),z}function g(M){var O=M.getSnapshot;M=M.value;try{var z=O();return!n(M,z)}catch{return!0}}function _(M,O){return O()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_:a;return T1.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:x,T1}var PE;function UV(){return PE||(PE=1,S1.exports=FV()),S1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function VV(){if(kE)return w1;kE=1;var t=Lm(),e=UV();function n(_,x){return _===x&&(_!==0||1/_===1/x)||_!==_&&x!==x}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,l=t.useRef,f=t.useEffect,a=t.useMemo,g=t.useDebugValue;return w1.useSyncExternalStoreWithSelector=function(_,x,M,O,z){var F=l(null);if(F.current===null){var V={hasValue:!1,value:null};F.current=V}else V=F.current;F=a(function(){function Q(ot){if(!X){if(X=!0,Y=ot,ot=O(ot),z!==void 0&&V.hasValue){var ht=V.value;if(z(ht,ot))return W=ht}return W=ot}if(ht=W,i(Y,ot))return ht;var rt=O(ot);return z!==void 0&&z(ht,rt)?(Y=ot,ht):(Y=ot,W=rt)}var X=!1,Y,W,J=M===void 0?null:M;return[function(){return Q(x())},J===null?void 0:function(){return Q(J())}]},[x,M,O,z]);var H=r(_,F[0],F[1]);return f(function(){V.hasValue=!0,V.value=H},[H]),g(H),H},w1}var OE;function $V(){return OE||(OE=1,b1.exports=VV()),b1.exports}var qV=$V(),KS=Z.createContext(null),HV=t=>t,Ms=()=>{var t=Z.useContext(KS);return t?t.store.dispatch:HV},Kv=()=>{},ZV=()=>Kv,GV=(t,e)=>t===e;function Cn(t){var e=Z.useContext(KS);return qV.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:ZV,e?e.store.getState:Kv,e?e.store.getState:Kv,e?t:Kv,GV)}function WV(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function YV(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function XV(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var DE=t=>Array.isArray(t)?t:[t];function KV(t){const e=Array.isArray(t[0])?t[0]:t;return XV(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function QV(t,e){const n=[],{length:i}=t;for(let r=0;r<i;r++)n.push(t[r].apply(null,e));return n}var JV=class{constructor(t){this.value=t}deref(){return this.value}},t$=typeof WeakRef<"u"?WeakRef:JV,e$=0,zE=1;function Ov(){return{s:e$,v:void 0,o:null,p:null}}function WD(t,e={}){let n=Ov();const{resultEqualityCheck:i}=e;let r,l=0;function f(){let a=n;const{length:g}=arguments;for(let M=0,O=g;M<O;M++){const z=arguments[M];if(typeof z=="function"||typeof z=="object"&&z!==null){let F=a.o;F===null&&(a.o=F=new WeakMap);const V=F.get(z);V===void 0?(a=Ov(),F.set(z,a)):a=V}else{let F=a.p;F===null&&(a.p=F=new Map);const V=F.get(z);V===void 0?(a=Ov(),F.set(z,a)):a=V}}const _=a;let x;if(a.s===zE)x=a.v;else if(x=t.apply(null,arguments),l++,i){const M=r?.deref?.()??r;M!=null&&i(M,x)&&(x=M,l!==0&&l--),r=typeof x=="object"&&x!==null||typeof x=="function"?new t$(x):x}return _.s=zE,_.v=x,x}return f.clearCache=()=>{n=Ov(),f.resetResultsCount()},f.resultsCount=()=>l,f.resetResultsCount=()=>{l=0},f}function n$(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...r)=>{let l=0,f=0,a,g={},_=r.pop();typeof _=="object"&&(g=_,_=r.pop()),WV(_,`createSelector expects an output function after the inputs, but received: [${typeof _}]`);const x={...n,...g},{memoize:M,memoizeOptions:O=[],argsMemoize:z=WD,argsMemoizeOptions:F=[]}=x,V=DE(O),H=DE(F),Q=KV(r),X=M(function(){return l++,_.apply(null,arguments)},...V),Y=z(function(){f++;const J=QV(Q,arguments);return a=X.apply(null,J),a},...H);return Object.assign(Y,{resultFunc:_,memoizedResultFunc:X,dependencies:Q,dependencyRecomputations:()=>f,resetDependencyRecomputations:()=>{f=0},lastResult:()=>a,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:M,argsMemoize:z})};return Object.assign(i,{withTypes:()=>i}),i}var Te=n$(WD),i$=Object.assign((t,e=Te)=>{YV(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(l=>t[l]);return e(i,(...l)=>l.reduce((f,a,g)=>(f[n[g]]=a,f),{}))},{withTypes:()=>i$}),A1={},M1={},E1={},LE;function r$(){return LE||(LE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,r,l)=>{if(i!==r){const f=e(i),a=e(r);if(f===a&&f===0){if(i<r)return l==="desc"?1:-1;if(i>r)return l==="desc"?-1:1}return l==="desc"?a-f:f-a}return 0};t.compareValues=n})(E1)),E1}var C1={},P1={},IE;function YD(){return IE||(IE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(P1)),P1}var RE;function a$(){return RE||(RE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YD(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(l,f){return Array.isArray(l)?!1:typeof l=="number"||typeof l=="boolean"||l==null||e.isSymbol(l)?!0:typeof l=="string"&&(i.test(l)||!n.test(l))||f!=null&&Object.hasOwn(f,l)}t.isKey=r})(C1)),C1}var BE;function s$(){return BE||(BE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r$(),n=a$(),i=ZS();function r(l,f,a,g){if(l==null)return[];a=g?void 0:a,Array.isArray(l)||(l=Object.values(l)),Array.isArray(f)||(f=f==null?[null]:[f]),f.length===0&&(f=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(z=>String(z));const _=(z,F)=>{let V=z;for(let H=0;H<F.length&&V!=null;++H)V=V[F[H]];return V},x=(z,F)=>F==null||z==null?F:typeof z=="object"&&"key"in z?Object.hasOwn(F,z.key)?F[z.key]:_(F,z.path):typeof z=="function"?z(F):Array.isArray(z)?_(F,z):typeof F=="object"?F[z]:F,M=f.map(z=>(Array.isArray(z)&&z.length===1&&(z=z[0]),z==null||typeof z=="function"||Array.isArray(z)||n.isKey(z)?z:{key:z,path:i.toPath(z)}));return l.map(z=>({original:z,criteria:M.map(F=>x(F,z))})).slice().sort((z,F)=>{for(let V=0;V<M.length;V++){const H=e.compareValues(z.criteria[V],F.criteria[V],a[V]);if(H!==0)return H}return 0}).map(z=>z.original)}t.orderBy=r})(M1)),M1}var k1={},NE;function o$(){return NE||(NE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i=1){const r=[],l=Math.floor(i),f=(a,g)=>{for(let _=0;_<a.length;_++){const x=a[_];Array.isArray(x)&&g<l?f(x,g+1):r.push(x)}};return f(n,0),r}t.flatten=e})(k1)),k1}var O1={},jE;function XD(){return jE||(jE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GD(),n=XS(),i=FD(),r=VD();function l(f,a,g){return i.isObject(g)&&(typeof a=="number"&&n.isArrayLike(g)&&e.isIndex(a)&&a<g.length||typeof a=="string"&&a in g)?r.eq(g[a],f):!1}t.isIterateeCall=l})(O1)),O1}var FE;function l$(){return FE||(FE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=s$(),n=o$(),i=XD();function r(l,...f){const a=f.length;return a>1&&i.isIterateeCall(l,f[0],f[1])?f=[]:a>2&&i.isIterateeCall(f[0],f[1],f[2])&&(f=[f[0]]),e.orderBy(l,n.flatten(f),["asc"])}t.sortBy=r})(A1)),A1}var D1,UE;function u$(){return UE||(UE=1,D1=l$().sortBy),D1}var c$=u$();const fx=Ou(c$);var KD=t=>t.legend.settings,h$=t=>t.legend.size,f$=t=>t.legend.payload;Te([f$,KD],(t,e)=>{var{itemSorter:n}=e,i=t.flat(1);return n?fx(i,n):i});var Dv=1;function d$(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=Z.useState({height:0,left:0,top:0,width:0}),i=Z.useCallback(r=>{if(r!=null){var l=r.getBoundingClientRect(),f={height:l.height,left:l.left,top:l.top,width:l.width};(Math.abs(f.height-e.height)>Dv||Math.abs(f.left-e.left)>Dv||Math.abs(f.top-e.top)>Dv||Math.abs(f.width-e.width)>Dv)&&n({height:f.height,left:f.left,top:f.top,width:f.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,i]}function Zs(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var p$=typeof Symbol=="function"&&Symbol.observable||"@@observable",VE=p$,z1=()=>Math.random().toString(36).substring(7).split("").join("."),m$={INIT:`@@redux/INIT${z1()}`,REPLACE:`@@redux/REPLACE${z1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${z1()}`},p0=m$;function QS(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function QD(t,e,n){if(typeof t!="function")throw new Error(Zs(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Zs(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Zs(1));return n(QD)(t,e)}let i=t,r=e,l=new Map,f=l,a=0,g=!1;function _(){f===l&&(f=new Map,l.forEach((H,Q)=>{f.set(Q,H)}))}function x(){if(g)throw new Error(Zs(3));return r}function M(H){if(typeof H!="function")throw new Error(Zs(4));if(g)throw new Error(Zs(5));let Q=!0;_();const X=a++;return f.set(X,H),function(){if(Q){if(g)throw new Error(Zs(6));Q=!1,_(),f.delete(X),l=null}}}function O(H){if(!QS(H))throw new Error(Zs(7));if(typeof H.type>"u")throw new Error(Zs(8));if(typeof H.type!="string")throw new Error(Zs(17));if(g)throw new Error(Zs(9));try{g=!0,r=i(r,H)}finally{g=!1}return(l=f).forEach(X=>{X()}),H}function z(H){if(typeof H!="function")throw new Error(Zs(10));i=H,O({type:p0.REPLACE})}function F(){const H=M;return{subscribe(Q){if(typeof Q!="object"||Q===null)throw new Error(Zs(11));function X(){const W=Q;W.next&&W.next(x())}return X(),{unsubscribe:H(X)}},[VE](){return this}}}return O({type:p0.INIT}),{dispatch:O,subscribe:M,getState:x,replaceReducer:z,[VE]:F}}function g$(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:p0.INIT})>"u")throw new Error(Zs(12));if(typeof n(void 0,{type:p0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zs(13))})}function JD(t){const e=Object.keys(t),n={};for(let l=0;l<e.length;l++){const f=e[l];typeof t[f]=="function"&&(n[f]=t[f])}const i=Object.keys(n);let r;try{g$(n)}catch(l){r=l}return function(f={},a){if(r)throw r;let g=!1;const _={};for(let x=0;x<i.length;x++){const M=i[x],O=n[M],z=f[M],F=O(z,a);if(typeof F>"u")throw a&&a.type,new Error(Zs(14));_[M]=F,g=g||F!==z}return g=g||i.length!==Object.keys(f).length,g?_:f}}function m0(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function y$(...t){return e=>(n,i)=>{const r=e(n,i);let l=()=>{throw new Error(Zs(15))};const f={getState:r.getState,dispatch:(g,..._)=>l(g,..._)},a=t.map(g=>g(f));return l=m0(...a)(r.dispatch),{...r,dispatch:l}}}function tz(t){return QS(t)&&"type"in t&&typeof t.type=="string"}var ez=Symbol.for("immer-nothing"),$E=Symbol.for("immer-draftable"),Jl=Symbol.for("immer-state");function hc(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var My=Object.getPrototypeOf;function tp(t){return!!t&&!!t[Jl]}function Bh(t){return t?nz(t)||Array.isArray(t)||!!t[$E]||!!t.constructor?.[$E]||Zy(t)||px(t):!1}var _$=Object.prototype.constructor.toString(),qE=new WeakMap;function nz(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=qE.get(n);return i===void 0&&(i=Function.toString.call(n),qE.set(n,i)),i===_$}function g0(t,e,n=!0){dx(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function dx(t){const e=t[Jl];return e?e.type_:Array.isArray(t)?1:Zy(t)?2:px(t)?3:0}function Lw(t,e){return dx(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function iz(t,e,n){const i=dx(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function v$(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Zy(t){return t instanceof Map}function px(t){return t instanceof Set}function Fd(t){return t.copy_||t.base_}function Iw(t,e){if(Zy(t))return new Map(t);if(px(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=nz(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[Jl];let r=Reflect.ownKeys(i);for(let l=0;l<r.length;l++){const f=r[l],a=i[f];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(i[f]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[f]})}return Object.create(My(t),i)}else{const i=My(t);if(i!==null&&n)return{...t};const r=Object.create(i);return Object.assign(r,t)}}function JS(t,e=!1){return mx(t)||tp(t)||!Bh(t)||(dx(t)>1&&Object.defineProperties(t,{set:zv,add:zv,clear:zv,delete:zv}),Object.freeze(t),e&&Object.values(t).forEach(n=>JS(n,!0))),t}function x$(){hc(2)}var zv={value:x$};function mx(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var b$={};function ep(t){const e=b$[t];return e||hc(0,t),e}var Ey;function rz(){return Ey}function w$(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function HE(t,e){e&&(ep("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Rw(t){Bw(t),t.drafts_.forEach(S$),t.drafts_=null}function Bw(t){t===Ey&&(Ey=t.parent_)}function ZE(t){return Ey=w$(Ey,t)}function S$(t){const e=t[Jl];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function GE(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Jl].modified_&&(Rw(e),hc(4)),Bh(t)&&(t=y0(e,t),e.parent_||_0(e,t)),e.patches_&&ep("Patches").generateReplacementPatches_(n[Jl].base_,t,e.patches_,e.inversePatches_)):t=y0(e,n,[]),Rw(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==ez?t:void 0}function y0(t,e,n){if(mx(e))return e;const i=t.immer_.shouldUseStrictIteration(),r=e[Jl];if(!r)return g0(e,(l,f)=>WE(t,r,e,l,f,n),i),e;if(r.scope_!==t)return e;if(!r.modified_)return _0(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const l=r.copy_;let f=l,a=!1;r.type_===3&&(f=new Set(l),l.clear(),a=!0),g0(f,(g,_)=>WE(t,r,l,g,_,n,a),i),_0(t,l,!1),n&&t.patches_&&ep("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function WE(t,e,n,i,r,l,f){if(r==null||typeof r!="object"&&!f)return;const a=mx(r);if(!(a&&!f)){if(tp(r)){const g=l&&e&&e.type_!==3&&!Lw(e.assigned_,i)?l.concat(i):void 0,_=y0(t,r,g);if(iz(n,i,_),tp(_))t.canAutoFreeze_=!1;else return}else f&&n.add(r);if(Bh(r)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&a)return;y0(t,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(Zy(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&_0(t,r)}}}function _0(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&JS(e,n)}function T$(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:rz(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,l=t2;n&&(r=[i],l=Cy);const{revoke:f,proxy:a}=Proxy.revocable(r,l);return i.draft_=a,i.revoke_=f,a}var t2={get(t,e){if(e===Jl)return t;const n=Fd(t);if(!Lw(n,e))return A$(t,n,e);const i=n[e];return t.finalized_||!Bh(i)?i:i===L1(t.base_,e)?(I1(t),t.copy_[e]=jw(i,t)):i},has(t,e){return e in Fd(t)},ownKeys(t){return Reflect.ownKeys(Fd(t))},set(t,e,n){const i=az(Fd(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=L1(Fd(t),e),l=r?.[Jl];if(l&&l.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(v$(n,r)&&(n!==void 0||Lw(t.base_,e)))return!0;I1(t),Nw(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return L1(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,I1(t),Nw(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Fd(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){hc(11)},getPrototypeOf(t){return My(t.base_)},setPrototypeOf(){hc(12)}},Cy={};g0(t2,(t,e)=>{Cy[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Cy.deleteProperty=function(t,e){return Cy.set.call(this,t,e,void 0)};Cy.set=function(t,e,n){return t2.set.call(this,t[0],e,n,t[0])};function L1(t,e){const n=t[Jl];return(n?Fd(n):t)[e]}function A$(t,e,n){const i=az(e,n);return i?"value"in i?i.value:i.get?.call(t.draft_):void 0}function az(t,e){if(!(e in t))return;let n=My(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=My(n)}}function Nw(t){t.modified_||(t.modified_=!0,t.parent_&&Nw(t.parent_))}function I1(t){t.copy_||(t.copy_=Iw(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var M$=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const l=n;n=e;const f=this;return function(g=l,..._){return f.produce(g,x=>n.call(this,x,..._))}}typeof n!="function"&&hc(6),i!==void 0&&typeof i!="function"&&hc(7);let r;if(Bh(e)){const l=ZE(this),f=jw(e,void 0);let a=!0;try{r=n(f),a=!1}finally{a?Rw(l):Bw(l)}return HE(l,i),GE(r,l)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===ez&&(r=void 0),this.autoFreeze_&&JS(r,!0),i){const l=[],f=[];ep("Patches").generateReplacementPatches_(e,r,l,f),i(l,f)}return r}else hc(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(f,...a)=>this.produceWithPatches(f,g=>e(g,...a));let i,r;return[this.produce(e,n,(f,a)=>{i=f,r=a}),i,r]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Bh(t)||hc(8),tp(t)&&(t=zh(t));const e=ZE(this),n=jw(t,void 0);return n[Jl].isManual_=!0,Bw(e),n}finishDraft(t,e){const n=t&&t[Jl];(!n||!n.isManual_)&&hc(9);const{scope_:i}=n;return HE(i,e),GE(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const i=ep("Patches").applyPatches_;return tp(t)?i(t,e):this.produce(t,r=>i(r,e))}};function jw(t,e){const n=Zy(t)?ep("MapSet").proxyMap_(t,e):px(t)?ep("MapSet").proxySet_(t,e):T$(t,e);return(e?e.scope_:rz()).drafts_.push(n),n}function zh(t){return tp(t)||hc(10,t),sz(t)}function sz(t){if(!Bh(t)||mx(t))return t;const e=t[Jl];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Iw(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=Iw(t,!0);return g0(n,(r,l)=>{iz(n,r,sz(l))},i),e&&(e.finalized_=!1),n}var Fw=new M$,oz=Fw.produce,E$=Fw.setUseStrictIteration.bind(Fw);function lz(t){return({dispatch:n,getState:i})=>r=>l=>typeof l=="function"?l(n,i,t):r(l)}var C$=lz(),P$=lz,k$=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?m0:m0.apply(null,arguments)};function Pu(t,e){function n(...i){if(e){let r=e(...i);if(!r)throw new Error(Ql(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>tz(i)&&i.type===t,n}var uz=class cy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,cy.prototype)}static get[Symbol.species](){return cy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new cy(...e[0].concat(this)):new cy(...e.concat(this))}};function YE(t){return Bh(t)?oz(t,()=>{}):t}function Lv(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function O$(t){return typeof t=="boolean"}var D$=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:l=!0}=e??{};let f=new uz;return n&&(O$(n)?f.push(C$):f.push(P$(n.extraArgument))),f},cz="RTK_autoBatch",us=()=>t=>({payload:t,meta:{[cz]:!0}}),XE=t=>e=>{setTimeout(e,t)},hz=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let r=!0,l=!1,f=!1;const a=new Set,g=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:XE(10):t.type==="callback"?t.queueNotification:XE(t.timeout),_=()=>{f=!1,l&&(l=!1,a.forEach(x=>x()))};return Object.assign({},i,{subscribe(x){const M=()=>r&&x(),O=i.subscribe(M);return a.add(x),()=>{O(),a.delete(x)}},dispatch(x){try{return r=!x?.meta?.[cz],l=!r,l&&(f||(f=!0,g(_))),i.dispatch(x)}finally{r=!0}}})},z$=t=>function(n){const{autoBatch:i=!0}=n??{};let r=new uz(t);return i&&r.push(hz(typeof i=="object"?i:void 0)),r};function L$(t){const e=D$(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:l=void 0,enhancers:f=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(QS(n))a=JD(n);else throw new Error(Ql(1));let g;typeof i=="function"?g=i(e):g=e();let _=m0;r&&(_=k$({trace:!1,...typeof r=="object"&&r}));const x=y$(...g),M=z$(x);let O=typeof f=="function"?f(M):M();const z=_(...O);return QD(a,l,z)}function fz(t){const e={},n=[];let i;const r={addCase(l,f){const a=typeof l=="string"?l:l.type;if(!a)throw new Error(Ql(28));if(a in e)throw new Error(Ql(29));return e[a]=f,r},addAsyncThunk(l,f){return f.pending&&(e[l.pending.type]=f.pending),f.rejected&&(e[l.rejected.type]=f.rejected),f.fulfilled&&(e[l.fulfilled.type]=f.fulfilled),f.settled&&n.push({matcher:l.settled,reducer:f.settled}),r},addMatcher(l,f){return n.push({matcher:l,reducer:f}),r},addDefaultCase(l){return i=l,r}};return t(r),[e,n,i]}E$(!1);function I$(t){return typeof t=="function"}function R$(t,e){let[n,i,r]=fz(e),l;if(I$(t))l=()=>YE(t());else{const a=YE(t);l=()=>a}function f(a=l(),g){let _=[n[g.type],...i.filter(({matcher:x})=>x(g)).map(({reducer:x})=>x)];return _.filter(x=>!!x).length===0&&(_=[r]),_.reduce((x,M)=>{if(M)if(tp(x)){const z=M(x,g);return z===void 0?x:z}else{if(Bh(x))return oz(x,O=>M(O,g));{const O=M(x,g);if(O===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return O}}return x},a)}return f.getInitialState=l,f}var B$="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",N$=(t=21)=>{let e="",n=t;for(;n--;)e+=B$[Math.random()*64|0];return e},j$=Symbol.for("rtk-slice-createasyncthunk");function F$(t,e){return`${t}/${e}`}function U$({creators:t}={}){const e=t?.asyncThunk?.[j$];return function(i){const{name:r,reducerPath:l=r}=i;if(!r)throw new Error(Ql(11));const f=(typeof i.reducers=="function"?i.reducers($$()):i.reducers)||{},a=Object.keys(f),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},_={addCase(Y,W){const J=typeof Y=="string"?Y:Y.type;if(!J)throw new Error(Ql(12));if(J in g.sliceCaseReducersByType)throw new Error(Ql(13));return g.sliceCaseReducersByType[J]=W,_},addMatcher(Y,W){return g.sliceMatchers.push({matcher:Y,reducer:W}),_},exposeAction(Y,W){return g.actionCreators[Y]=W,_},exposeCaseReducer(Y,W){return g.sliceCaseReducersByName[Y]=W,_}};a.forEach(Y=>{const W=f[Y],J={reducerName:Y,type:F$(r,Y),createNotation:typeof i.reducers=="function"};H$(W)?G$(J,W,_,e):q$(J,W,_)});function x(){const[Y={},W=[],J=void 0]=typeof i.extraReducers=="function"?fz(i.extraReducers):[i.extraReducers],ot={...Y,...g.sliceCaseReducersByType};return R$(i.initialState,ht=>{for(let rt in ot)ht.addCase(rt,ot[rt]);for(let rt of g.sliceMatchers)ht.addMatcher(rt.matcher,rt.reducer);for(let rt of W)ht.addMatcher(rt.matcher,rt.reducer);J&&ht.addDefaultCase(J)})}const M=Y=>Y,O=new Map,z=new WeakMap;let F;function V(Y,W){return F||(F=x()),F(Y,W)}function H(){return F||(F=x()),F.getInitialState()}function Q(Y,W=!1){function J(ht){let rt=ht[Y];return typeof rt>"u"&&W&&(rt=Lv(z,J,H)),rt}function ot(ht=M){const rt=Lv(O,W,()=>new WeakMap);return Lv(rt,ht,()=>{const ut={};for(const[_t,bt]of Object.entries(i.selectors??{}))ut[_t]=V$(bt,ht,()=>Lv(z,ht,H),W);return ut})}return{reducerPath:Y,getSelectors:ot,get selectors(){return ot(J)},selectSlice:J}}const X={name:r,reducer:V,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:H,...Q(l),injectInto(Y,{reducerPath:W,...J}={}){const ot=W??l;return Y.inject({reducerPath:ot,reducer:V},J),{...X,...Q(ot,!0)}}};return X}}function V$(t,e,n,i){function r(l,...f){let a=e(l);return typeof a>"u"&&i&&(a=n()),t(a,...f)}return r.unwrapped=t,r}var wl=U$();function $$(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function q$({type:t,reducerName:e,createNotation:n},i,r){let l,f;if("reducer"in i){if(n&&!Z$(i))throw new Error(Ql(17));l=i.reducer,f=i.prepare}else l=i;r.addCase(t,l).exposeCaseReducer(e,l).exposeAction(e,f?Pu(t,f):Pu(t))}function H$(t){return t._reducerDefinitionType==="asyncThunk"}function Z$(t){return t._reducerDefinitionType==="reducerWithPrepare"}function G$({type:t,reducerName:e},n,i,r){if(!r)throw new Error(Ql(18));const{payloadCreator:l,fulfilled:f,pending:a,rejected:g,settled:_,options:x}=n,M=r(t,l,x);i.exposeAction(e,M),f&&i.addCase(M.fulfilled,f),a&&i.addCase(M.pending,a),g&&i.addCase(M.rejected,g),_&&i.addMatcher(M.settled,_),i.exposeCaseReducer(e,{fulfilled:f||Iv,pending:a||Iv,rejected:g||Iv,settled:_||Iv})}function Iv(){}var W$="task",dz="listener",pz="completed",e2="cancelled",Y$=`task-${e2}`,X$=`task-${pz}`,Uw=`${dz}-${e2}`,K$=`${dz}-${pz}`,gx=class{constructor(t){this.code=t,this.message=`${W$} ${e2} (reason: ${t})`}name="TaskAbortError";message},n2=(t,e)=>{if(typeof t!="function")throw new TypeError(Ql(32))},v0=()=>{},mz=(t,e=v0)=>(t.catch(e),t),gz=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Gd=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Wd=t=>{if(t.aborted){const{reason:e}=t;throw new gx(e)}};function yz(t,e){let n=v0;return new Promise((i,r)=>{const l=()=>r(new gx(t.reason));if(t.aborted){l();return}n=gz(t,l),e.finally(()=>n()).then(i,r)}).finally(()=>{n=v0})}var Q$=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof gx?"cancelled":"rejected",error:n}}finally{e?.()}},x0=t=>e=>mz(yz(t,e).then(n=>(Wd(t),n))),_z=t=>{const e=x0(t);return n=>e(new Promise(i=>setTimeout(i,n)))},{assign:Sm}=Object,KE={},yx="listenerMiddleware",J$=(t,e)=>{const n=i=>gz(t,()=>Gd(i,t.reason));return(i,r)=>{n2(i);const l=new AbortController;n(l);const f=Q$(async()=>{Wd(t),Wd(l.signal);const a=await i({pause:x0(l.signal),delay:_z(l.signal),signal:l.signal});return Wd(l.signal),a},()=>Gd(l,X$));return r?.autoJoin&&e.push(f.catch(v0)),{result:x0(t)(f),cancel(){Gd(l,Y$)}}}},tq=(t,e)=>{const n=async(i,r)=>{Wd(e);let l=()=>{};const a=[new Promise((g,_)=>{let x=t({predicate:i,effect:(M,O)=>{O.unsubscribe(),g([M,O.getState(),O.getOriginalState()])}});l=()=>{x(),_()}})];r!=null&&a.push(new Promise(g=>setTimeout(g,r,null)));try{const g=await yz(e,Promise.race(a));return Wd(e),g}finally{l()}};return(i,r)=>mz(n(i,r))},vz=t=>{let{type:e,actionCreator:n,matcher:i,predicate:r,effect:l}=t;if(e)r=Pu(e).match;else if(n)e=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(Ql(21));return n2(l),{predicate:r,type:e,effect:l}},xz=Sm(t=>{const{type:e,predicate:n,effect:i}=vz(t);return{id:N$(),effect:i,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ql(22))}}},{withTypes:()=>xz}),QE=(t,e)=>{const{type:n,effect:i,predicate:r}=vz(e);return Array.from(t.values()).find(l=>(typeof n=="string"?l.type===n:l.predicate===r)&&l.effect===i)},Vw=t=>{t.pending.forEach(e=>{Gd(e,Uw)})},eq=(t,e)=>()=>{for(const n of e.keys())Vw(n);t.clear()},JE=(t,e,n)=>{try{t(e,n)}catch(i){setTimeout(()=>{throw i},0)}},bz=Sm(Pu(`${yx}/add`),{withTypes:()=>bz}),nq=Pu(`${yx}/removeAll`),wz=Sm(Pu(`${yx}/remove`),{withTypes:()=>wz}),iq=(...t)=>{console.error(`${yx}/error`,...t)},Gy=(t={})=>{const e=new Map,n=new Map,i=z=>{const F=n.get(z)??0;n.set(z,F+1)},r=z=>{const F=n.get(z)??1;F===1?n.delete(z):n.set(z,F-1)},{extra:l,onError:f=iq}=t;n2(f);const a=z=>(z.unsubscribe=()=>e.delete(z.id),e.set(z.id,z),F=>{z.unsubscribe(),F?.cancelActive&&Vw(z)}),g=z=>{const F=QE(e,z)??xz(z);return a(F)};Sm(g,{withTypes:()=>g});const _=z=>{const F=QE(e,z);return F&&(F.unsubscribe(),z.cancelActive&&Vw(F)),!!F};Sm(_,{withTypes:()=>_});const x=async(z,F,V,H)=>{const Q=new AbortController,X=tq(g,Q.signal),Y=[];try{z.pending.add(Q),i(z),await Promise.resolve(z.effect(F,Sm({},V,{getOriginalState:H,condition:(W,J)=>X(W,J).then(Boolean),take:X,delay:_z(Q.signal),pause:x0(Q.signal),extra:l,signal:Q.signal,fork:J$(Q.signal,Y),unsubscribe:z.unsubscribe,subscribe:()=>{e.set(z.id,z)},cancelActiveListeners:()=>{z.pending.forEach((W,J,ot)=>{W!==Q&&(Gd(W,Uw),ot.delete(W))})},cancel:()=>{Gd(Q,Uw),z.pending.delete(Q)},throwIfCancelled:()=>{Wd(Q.signal)}})))}catch(W){W instanceof gx||JE(f,W,{raisedBy:"effect"})}finally{await Promise.all(Y),Gd(Q,K$),r(z),z.pending.delete(Q)}},M=eq(e,n);return{middleware:z=>F=>V=>{if(!tz(V))return F(V);if(bz.match(V))return g(V.payload);if(nq.match(V)){M();return}if(wz.match(V))return _(V.payload);let H=z.getState();const Q=()=>{if(H===KE)throw new Error(Ql(23));return H};let X;try{if(X=F(V),e.size>0){const Y=z.getState(),W=Array.from(e.values());for(const J of W){let ot=!1;try{ot=J.predicate(V,Y,H)}catch(ht){ot=!1,JE(f,ht,{raisedBy:"predicate"})}ot&&x(J,V,z,Q)}}}finally{H=KE}return X},startListening:g,stopListening:_,clearListeners:M}};function Ql(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var rq={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Sz=wl({name:"chartLayout",initialState:rq,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,i,r,l;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,t.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,t.margin.left=(l=e.payload.left)!==null&&l!==void 0?l:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:aq,setLayout:sq,setChartSize:oq,setScale:lq}=Sz.actions,uq=Sz.reducer;function Tz(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function tC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function vm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tC(Object(n),!0).forEach(function(i){cq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cq(t,e,n){return(e=hq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hq(t){var e=fq(t,"string");return typeof e=="symbol"?e:e+""}function fq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tl(t,e,n){return Ws(t)||Ws(e)?n:Hc(e)?hx(t,e,n):typeof e=="function"?e(t):n}var dq=(t,e,n)=>{if(e&&n){var{width:i,height:r}=n,{align:l,verticalAlign:f,layout:a}=e;if((a==="vertical"||a==="horizontal"&&f==="middle")&&l!=="center"&&xn(t[l]))return vm(vm({},t),{},{[l]:t[l]+(i||0)});if((a==="horizontal"||a==="vertical"&&l==="center")&&f!=="middle"&&xn(t[f]))return vm(vm({},t),{},{[f]:t[f]+(r||0)})}return t},qh=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Az=(t,e,n,i)=>{if(i)return t.map(a=>a.coordinate);var r,l,f=t.map(a=>(a.coordinate===e&&(r=!0),a.coordinate===n&&(l=!0),a.coordinate));return r||f.push(e),l||f.push(n),f},Mz=(t,e,n)=>{if(!t)return null;var{duplicateDomain:i,type:r,range:l,scale:f,realScaleType:a,isCategorical:g,categoricalDomain:_,tickCount:x,ticks:M,niceTicks:O,axisType:z}=t;if(!f)return null;var F=a==="scaleBand"&&f.bandwidth?f.bandwidth()/2:2,V=r==="category"&&f.bandwidth?f.bandwidth()/F:0;if(V=z==="angleAxis"&&l&&l.length>=2?Mu(l[0]-l[1])*2*V:V,M||O){var H=(M||O||[]).map((Q,X)=>{var Y=i?i.indexOf(Q):Q;return{coordinate:f(Y)+V,value:Q,offset:V,index:X}});return H.filter(Q=>!mc(Q.coordinate))}return g&&_?_.map((Q,X)=>({coordinate:f(Q)+V,value:Q,index:X,offset:V})):f.ticks&&x!=null?f.ticks(x).map((Q,X)=>({coordinate:f(Q)+V,value:Q,offset:V,index:X})):f.domain().map((Q,X)=>({coordinate:f(Q)+V,value:i?i[Q]:Q,index:X,offset:V}))},eC=1e-4,pq=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,i=t.range(),r=Math.min(i[0],i[1])-eC,l=Math.max(i[0],i[1])+eC,f=t(e[0]),a=t(e[n-1]);(f<r||f>l||a<r||a>l)&&t.domain([e[0],e[n-1]])}},mq=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var r=0,l=0,f=0;f<e;++f){var a=mc(t[f][n][1])?t[f][n][0]:t[f][n][1];a>=0?(t[f][n][0]=r,t[f][n][1]=r+a,r=t[f][n][1]):(t[f][n][0]=l,t[f][n][1]=l+a,l=t[f][n][1])}},gq=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var r=0,l=0;l<e;++l){var f=mc(t[l][n][1])?t[l][n][0]:t[l][n][1];f>=0?(t[l][n][0]=r,t[l][n][1]=r+f,r=t[l][n][1]):(t[l][n][0]=0,t[l][n][1]=0)}},yq={sign:mq,expand:aV,none:Pm,silhouette:sV,wiggle:oV,positive:gq},_q=(t,e,n)=>{var i=yq[n],r=rV().keys(e).value((l,f)=>Number(tl(l,f,0))).order(zw).offset(i);return r(t)};function vq(t){return t==null?void 0:String(t)}function nC(t){var{axis:e,ticks:n,bandSize:i,entry:r,index:l,dataKey:f}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ws(r[e.dataKey])){var a=BD(n,"value",r[e.dataKey]);if(a)return a.coordinate+i/2}return n[l]?n[l].coordinate+i/2:null}var g=tl(r,Ws(f)?e.dataKey:f);return Ws(g)?null:e.scale(g)}var xq=t=>{var e=t.flat(2).filter(xn);return[Math.min(...e),Math.max(...e)]},bq=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],wq=(t,e,n)=>{if(t!=null)return bq(Object.keys(t).reduce((i,r)=>{var l=t[r],{stackedData:f}=l,a=f.reduce((g,_)=>{var x=Tz(_,e,n),M=xq(x);return[Math.min(g[0],M[0]),Math.max(g[1],M[1])]},[1/0,-1/0]);return[Math.min(a[0],i[0]),Math.max(a[1],i[1])]},[1/0,-1/0]))},iC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,b0=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&e&&e.length>=2){for(var r=fx(e,x=>x.coordinate),l=1/0,f=1,a=r.length;f<a;f++){var g=r[f],_=r[f-1];l=Math.min((g.coordinate||0)-(_.coordinate||0),l)}return l===1/0?0:l}return n?void 0:0};function aC(t){var{tooltipEntrySettings:e,dataKey:n,payload:i,value:r,name:l}=t;return vm(vm({},e),{},{dataKey:n,payload:i,value:r,name:l})}function Ez(t,e){if(t)return String(t);if(typeof e=="string")return e}var Sq=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Tq=(t,e)=>e==="centric"?t.angle:t.radius,Hh=t=>t.layout.width,Zh=t=>t.layout.height,Aq=t=>t.layout.scale,Cz=t=>t.layout.margin,_x=Te(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),vx=Te(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Mq="data-recharts-item-index",Eq="data-recharts-item-data-key",Wy=60;function sC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Rv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sC(Object(n),!0).forEach(function(i){Cq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Cq(t,e,n){return(e=Pq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pq(t){var e=kq(t,"string");return typeof e=="symbol"?e:e+""}function kq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oq=t=>t.brush.height;function Dq(t){var e=vx(t);return e.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Wy;return n+r}return n},0)}function zq(t){var e=vx(t);return e.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Wy;return n+r}return n},0)}function Lq(t){var e=_x(t);return e.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function Iq(t){var e=_x(t);return e.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var Ys=Te([Hh,Zh,Cz,Oq,Dq,zq,Lq,Iq,KD,h$],(t,e,n,i,r,l,f,a,g,_)=>{var x={left:(n.left||0)+r,right:(n.right||0)+l},M={top:(n.top||0)+f,bottom:(n.bottom||0)+a},O=Rv(Rv({},M),x),z=O.bottom;O.bottom+=i,O=dq(O,g,_);var F=t-O.left-O.right,V=e-O.top-O.bottom;return Rv(Rv({brushBottom:z},O),{},{width:Math.max(F,0),height:Math.max(V,0)})}),Rq=Te(Ys,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),Pz=Te(Hh,Zh,(t,e)=>({x:0,y:0,width:t,height:e})),Bq=Z.createContext(null),Sl=()=>Z.useContext(Bq)!=null,xx=t=>t.brush,bx=Te([xx,Ys,Cz],(t,e,n)=>({height:t.height,x:xn(t.x)?t.x:e.left,y:xn(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:xn(t.width)?t.width:e.width})),R1={},B1={},N1={},oC;function Nq(){return oC||(oC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i,{signal:r,edges:l}={}){let f,a=null;const g=l!=null&&l.includes("leading"),_=l==null||l.includes("trailing"),x=()=>{a!==null&&(n.apply(f,a),f=void 0,a=null)},M=()=>{_&&x(),V()};let O=null;const z=()=>{O!=null&&clearTimeout(O),O=setTimeout(()=>{O=null,M()},i)},F=()=>{O!==null&&(clearTimeout(O),O=null)},V=()=>{F(),f=void 0,a=null},H=()=>{x()},Q=function(...X){if(r?.aborted)return;f=this,a=X;const Y=O==null;z(),g&&Y&&x()};return Q.schedule=z,Q.cancel=V,Q.flush=H,r?.addEventListener("abort",V,{once:!0}),Q}t.debounce=e})(N1)),N1}var lC;function jq(){return lC||(lC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nq();function n(i,r=0,l={}){typeof l!="object"&&(l={});const{leading:f=!1,trailing:a=!0,maxWait:g}=l,_=Array(2);f&&(_[0]="leading"),a&&(_[1]="trailing");let x,M=null;const O=e.debounce(function(...V){x=i.apply(this,V),M=null},r,{edges:_}),z=function(...V){return g!=null&&(M===null&&(M=Date.now()),Date.now()-M>=g)?(x=i.apply(this,V),M=Date.now(),O.cancel(),O.schedule(),x):(O.apply(this,V),x)},F=()=>(O.flush(),x);return z.cancel=O.cancel,z.flush=F,z}t.debounce=n})(B1)),B1}var uC;function Fq(){return uC||(uC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jq();function n(i,r=0,l={}){const{leading:f=!0,trailing:a=!0}=l;return e.debounce(i,r,{leading:f,maxWait:r,trailing:a})}t.throttle=n})(R1)),R1}var j1,cC;function Uq(){return cC||(cC=1,j1=Fq().throttle),j1}var Vq=Uq();const $q=Ou(Vq);var w0=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),l=2;l<i;l++)r[l-2]=arguments[l]},kz=(t,e,n)=>{var{width:i="100%",height:r="100%",aspect:l,maxHeight:f}=n,a=Rh(i)?t:Number(i),g=Rh(r)?e:Number(r);return l&&l>0&&(a?g=a/l:g&&(a=g*l),f&&g!=null&&g>f&&(g=f)),{calculatedWidth:a,calculatedHeight:g}},qq={width:0,height:0,overflow:"visible"},Hq={width:0,overflowX:"visible"},Zq={height:0,overflowY:"visible"},Gq={},Wq=t=>{var{width:e,height:n}=t,i=Rh(e),r=Rh(n);return i&&r?qq:i?Hq:r?Zq:Gq};function Yq(t){var{width:e,height:n,aspect:i}=t,r=e,l=n;return r===void 0&&l===void 0?(r="100%",l="100%"):r===void 0?r=i&&i>0?void 0:"100%":l===void 0&&(l=i&&i>0?void 0:"100%"),{width:r,height:l}}function _a(t){return Number.isFinite(t)}function Zc(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function $w(){return $w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$w.apply(null,arguments)}function hC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function fC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hC(Object(n),!0).forEach(function(i){Xq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Xq(t,e,n){return(e=Kq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kq(t){var e=Qq(t,"string");return typeof e=="symbol"?e:e+""}function Qq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oz=Z.createContext({width:-1,height:-1});function Jq(t){return Zc(t.width)&&Zc(t.height)}function Dz(t){var{children:e,width:n,height:i}=t,r=Z.useMemo(()=>({width:n,height:i}),[n,i]);return Jq(r)?Z.createElement(Oz.Provider,{value:r},e):null}var i2=()=>Z.useContext(Oz),t9=Z.forwardRef((t,e)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:r,height:l,minWidth:f=0,minHeight:a,maxHeight:g,children:_,debounce:x=0,id:M,className:O,onResize:z,style:F={}}=t,V=Z.useRef(null),H=Z.useRef();H.current=z,Z.useImperativeHandle(e,()=>V.current);var[Q,X]=Z.useState({containerWidth:i.width,containerHeight:i.height}),Y=Z.useCallback((rt,ut)=>{X(_t=>{var bt=Math.round(rt),Pt=Math.round(ut);return _t.containerWidth===bt&&_t.containerHeight===Pt?_t:{containerWidth:bt,containerHeight:Pt}})},[]);Z.useEffect(()=>{if(V.current==null||typeof ResizeObserver>"u")return jm;var rt=Pt=>{var re,{width:ye,height:fe}=Pt[0].contentRect;Y(ye,fe),(re=H.current)===null||re===void 0||re.call(H,ye,fe)};x>0&&(rt=$q(rt,x,{trailing:!0,leading:!1}));var ut=new ResizeObserver(rt),{width:_t,height:bt}=V.current.getBoundingClientRect();return Y(_t,bt),ut.observe(V.current),()=>{ut.disconnect()}},[Y,x]);var{containerWidth:W,containerHeight:J}=Q;w0(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:ot,calculatedHeight:ht}=kz(W,J,{width:r,height:l,aspect:n,maxHeight:g});return w0(ot!=null&&ot>0||ht!=null&&ht>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ot,ht,r,l,f,a,n),Z.createElement("div",{id:M?"".concat(M):void 0,className:Fr("recharts-responsive-container",O),style:fC(fC({},F),{},{width:r,height:l,minWidth:f,minHeight:a,maxHeight:g}),ref:V},Z.createElement("div",{style:Wq({width:r,height:l})},Z.createElement(Dz,{width:ot,height:ht},_)))}),zz=Z.forwardRef((t,e)=>{var n=i2();if(Zc(n.width)&&Zc(n.height))return t.children;var{width:i,height:r}=Yq({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:l,calculatedHeight:f}=kz(void 0,void 0,{width:i,height:r,aspect:t.aspect,maxHeight:t.maxHeight});return xn(l)&&xn(f)?Z.createElement(Dz,{width:l,height:f},t.children):Z.createElement(t9,$w({},t,{width:i,height:r,ref:e}))});function Lz(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var wx=()=>{var t,e=Sl(),n=Cn(Rq),i=Cn(bx),r=(t=Cn(xx))===null||t===void 0?void 0:t.padding;return!e||!i||!r?n:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},e9={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Iz=()=>{var t;return(t=Cn(Ys))!==null&&t!==void 0?t:e9},Rz=()=>Cn(Hh),Bz=()=>Cn(Zh),Mr=t=>t.layout.layoutType,Sx=()=>Cn(Mr),n9=()=>{var t=Sx();return t!==void 0},Tx=t=>{var e=Ms(),n=Sl(),{width:i,height:r}=t,l=i2(),f=i,a=r;return l&&(f=l.width>0?l.width:i,a=l.height>0?l.height:r),Z.useEffect(()=>{!n&&Zc(f)&&Zc(a)&&e(oq({width:f,height:a}))},[e,n,f,a]),null},i9={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Nz=wl({name:"legend",initialState:i9,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:us()},removeLegendPayload:{reducer(t,e){var n=zh(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:us()}}}),{setLegendSize:Bet,setLegendSettings:Net,addLegendPayload:r9,removeLegendPayload:a9}=Nz.actions,s9=Nz.reducer;function qw(){return qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qw.apply(null,arguments)}function dC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function F1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dC(Object(n),!0).forEach(function(i){o9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function o9(t,e,n){return(e=l9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l9(t){var e=u9(t,"string");return typeof e=="symbol"?e:e+""}function u9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c9(t){return Array.isArray(t)&&Hc(t[0])&&Hc(t[1])?t.join(" ~ "):t}var h9=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:i={},labelStyle:r={},payload:l,formatter:f,itemSorter:a,wrapperClassName:g,labelClassName:_,label:x,labelFormatter:M,accessibilityLayer:O=!1}=t,z=()=>{if(l&&l.length){var J={padding:0,margin:0},ot=(a?fx(l,a):l).map((ht,rt)=>{if(ht.type==="none")return null;var ut=ht.formatter||f||c9,{value:_t,name:bt}=ht,Pt=_t,re=bt;if(ut){var ye=ut(_t,bt,ht,rt,l);if(Array.isArray(ye))[Pt,re]=ye;else if(ye!=null)Pt=ye;else return null}var fe=F1({display:"block",paddingTop:4,paddingBottom:4,color:ht.color||"#000"},i);return Z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(rt),style:fe},Hc(re)?Z.createElement("span",{className:"recharts-tooltip-item-name"},re):null,Hc(re)?Z.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,Z.createElement("span",{className:"recharts-tooltip-item-value"},Pt),Z.createElement("span",{className:"recharts-tooltip-item-unit"},ht.unit||""))});return Z.createElement("ul",{className:"recharts-tooltip-item-list",style:J},ot)}return null},F=F1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),V=F1({margin:0},r),H=!Ws(x),Q=H?x:"",X=Fr("recharts-default-tooltip",g),Y=Fr("recharts-tooltip-label",_);H&&M&&l!==void 0&&l!==null&&(Q=M(x,l));var W=O?{role:"status","aria-live":"assertive"}:{};return Z.createElement("div",qw({className:X,style:F},W),Z.createElement("p",{className:Y,style:V},Z.isValidElement(Q)?Q:"".concat(Q)),z())},Kg="recharts-tooltip-wrapper",f9={visibility:"hidden"};function d9(t){var{coordinate:e,translateX:n,translateY:i}=t;return Fr(Kg,{["".concat(Kg,"-right")]:xn(n)&&e&&xn(e.x)&&n>=e.x,["".concat(Kg,"-left")]:xn(n)&&e&&xn(e.x)&&n<e.x,["".concat(Kg,"-bottom")]:xn(i)&&e&&xn(e.y)&&i>=e.y,["".concat(Kg,"-top")]:xn(i)&&e&&xn(e.y)&&i<e.y})}function pC(t){var{allowEscapeViewBox:e,coordinate:n,key:i,offsetTopLeft:r,position:l,reverseDirection:f,tooltipDimension:a,viewBox:g,viewBoxDimension:_}=t;if(l&&xn(l[i]))return l[i];var x=n[i]-a-(r>0?r:0),M=n[i]+r;if(e[i])return f[i]?x:M;var O=g[i];if(O==null)return 0;if(f[i]){var z=x,F=O;return z<F?Math.max(M,O):Math.max(x,O)}if(_==null)return 0;var V=M+a,H=O+_;return V>H?Math.max(x,O):Math.max(M,O)}function p9(t){var{translateX:e,translateY:n,useTranslate3d:i}=t;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function m9(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:i,position:r,reverseDirection:l,tooltipBox:f,useTranslate3d:a,viewBox:g}=t,_,x,M;return f.height>0&&f.width>0&&n?(x=pC({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:r,reverseDirection:l,tooltipDimension:f.width,viewBox:g,viewBoxDimension:g.width}),M=pC({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:r,reverseDirection:l,tooltipDimension:f.height,viewBox:g,viewBoxDimension:g.height}),_=p9({translateX:x,translateY:M,useTranslate3d:a})):_=f9,{cssProperties:_,cssClasses:d9({translateX:x,translateY:M,coordinate:n})}}function mC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Bv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mC(Object(n),!0).forEach(function(i){Hw(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Hw(t,e,n){return(e=g9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g9(t){var e=y9(t,"string");return typeof e=="symbol"?e:e+""}function y9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class _9 extends Z.PureComponent{constructor(){super(...arguments),Hw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Hw(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,i,r,l;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(r=(l=this.props.coordinate)===null||l===void 0?void 0:l.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:i,animationEasing:r,children:l,coordinate:f,hasPayload:a,isAnimationActive:g,offset:_,position:x,reverseDirection:M,useTranslate3d:O,viewBox:z,wrapperStyle:F,lastBoundingBox:V,innerRef:H,hasPortalFromProps:Q}=this.props,{cssClasses:X,cssProperties:Y}=m9({allowEscapeViewBox:n,coordinate:f,offsetTopLeft:_,position:x,reverseDirection:M,tooltipBox:{height:V.height,width:V.width},useTranslate3d:O,viewBox:z}),W=Q?{}:Bv(Bv({transition:g&&e?"transform ".concat(i,"ms ").concat(r):void 0},Y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),J=Bv(Bv({},W),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},F);return Z.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:X,style:J,ref:H},l)}}var v9=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Fm={devToolsEnabled:!1,isSsr:v9()},jz=()=>{var t;return(t=Cn(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Zw(){return Zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zw.apply(null,arguments)}function gC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function yC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gC(Object(n),!0).forEach(function(i){x9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function x9(t,e,n){return(e=b9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b9(t){var e=w9(t,"string");return typeof e=="symbol"?e:e+""}function w9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _C={curveBasisClosed:GU,curveBasisOpen:WU,curveBasis:ZU,curveBumpX:qU,curveBumpY:HU,curveLinearClosed:YU,curveLinear:ux,curveMonotoneX:XU,curveMonotoneY:KU,curveNatural:QU,curveStep:JU,curveStepAfter:eV,curveStepBefore:tV},S0=t=>_a(t.x)&&_a(t.y),vC=t=>t.base!=null&&S0(t.base)&&S0(t),Qg=t=>t.x,Jg=t=>t.y,S9=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(WS(t));return(n==="curveMonotone"||n==="curveBump")&&e?_C["".concat(n).concat(e==="vertical"?"Y":"X")]:_C[n]||ux},T9=t=>{var{type:e="linear",points:n=[],baseLine:i,layout:r,connectNulls:l=!1}=t,f=S9(e,r),a=l?n.filter(S0):n,g;if(Array.isArray(i)){var _=n.map((z,F)=>yC(yC({},z),{},{base:i[F]}));r==="vertical"?g=kv().y(Jg).x1(Qg).x0(z=>z.base.x):g=kv().x(Qg).y1(Jg).y0(z=>z.base.y);var x=g.defined(vC).curve(f),M=l?_.filter(vC):_;return x(M)}r==="vertical"&&xn(i)?g=kv().y(Jg).x1(Qg).x0(i):xn(i)?g=kv().x(Qg).y1(Jg).y0(i):g=MD().x(Qg).y(Jg);var O=g.defined(S0).curve(f);return O(a)},Qv=t=>{var{className:e,points:n,path:i,pathRef:r}=t;if((!n||!n.length)&&!i)return null;var l=n&&n.length?T9(t):i;return Z.createElement("path",Zw({},pc(t),YS(t),{className:Fr("recharts-curve",e),d:l===null?void 0:l,ref:r}))},A9=["x","y","top","left","width","height","className"];function Gw(){return Gw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Gw.apply(null,arguments)}function xC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function M9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xC(Object(n),!0).forEach(function(i){E9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function E9(t,e,n){return(e=C9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C9(t){var e=P9(t,"string");return typeof e=="symbol"?e:e+""}function P9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function k9(t,e){if(t==null)return{};var n,i,r=O9(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function O9(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var D9=(t,e,n,i,r,l)=>"M".concat(t,",").concat(r,"v").concat(i,"M").concat(l,",").concat(e,"h").concat(n),z9=t=>{var{x:e=0,y:n=0,top:i=0,left:r=0,width:l=0,height:f=0,className:a}=t,g=k9(t,A9),_=M9({x:e,y:n,top:i,left:r,width:l,height:f},g);return!xn(e)||!xn(n)||!xn(l)||!xn(f)||!xn(i)||!xn(r)?null:Z.createElement("path",Gw({},Cu(_),{className:Fr("recharts-cross",a),d:D9(e,n,l,f,i,r)}))};function L9(t,e,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-r:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-r,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function bC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function wC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bC(Object(n),!0).forEach(function(i){I9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function I9(t,e,n){return(e=R9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R9(t){var e=B9(t,"string");return typeof e=="symbol"?e:e+""}function B9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N9=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),j9=(t,e,n)=>t.map(i=>"".concat(N9(i)," ").concat(e,"ms ").concat(n)).join(","),F9=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,i)=>n.filter(r=>i.includes(r))),Py=(t,e)=>Object.keys(e).reduce((n,i)=>wC(wC({},n),{},{[i]:t(i,e[i])}),{});function SC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ls(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SC(Object(n),!0).forEach(function(i){U9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function U9(t,e,n){return(e=V9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V9(t){var e=$9(t,"string");return typeof e=="symbol"?e:e+""}function $9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var T0=(t,e,n)=>t+(e-t)*n,Ww=t=>{var{from:e,to:n}=t;return e!==n},Fz=(t,e,n)=>{var i=Py((r,l)=>{if(Ww(l)){var[f,a]=t(l.from,l.to,l.velocity);return ls(ls({},l),{},{from:f,velocity:a})}return l},e);return n<1?Py((r,l)=>Ww(l)?ls(ls({},l),{},{velocity:T0(l.velocity,i[r].velocity,n),from:T0(l.from,i[r].from,n)}):l,e):Fz(t,i,n-1)};function q9(t,e,n,i,r,l){var f,a=i.reduce((O,z)=>ls(ls({},O),{},{[z]:{from:t[z],velocity:0,to:e[z]}}),{}),g=()=>Py((O,z)=>z.from,a),_=()=>!Object.values(a).filter(Ww).length,x=null,M=O=>{f||(f=O);var z=O-f,F=z/n.dt;a=Fz(n,a,F),r(ls(ls(ls({},t),e),g())),f=O,_()||(x=l.setTimeout(M))};return()=>(x=l.setTimeout(M),()=>{var O;(O=x)===null||O===void 0||O()})}function H9(t,e,n,i,r,l,f){var a=null,g=r.reduce((M,O)=>ls(ls({},M),{},{[O]:[t[O],e[O]]}),{}),_,x=M=>{_||(_=M);var O=(M-_)/i,z=Py((V,H)=>T0(...H,n(O)),g);if(l(ls(ls(ls({},t),e),z)),O<1)a=f.setTimeout(x);else{var F=Py((V,H)=>T0(...H,n(1)),g);l(ls(ls(ls({},t),e),F))}};return()=>(a=f.setTimeout(x),()=>{var M;(M=a)===null||M===void 0||M()})}const Z9=(t,e,n,i,r,l)=>{var f=F9(t,e);return n==null?()=>(r(ls(ls({},t),e)),()=>{}):n.isStepper===!0?q9(t,e,n,f,r,l):H9(t,e,n,i,f,r,l)};var A0=1e-4,Uz=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Vz=(t,e)=>t.map((n,i)=>n*e**i).reduce((n,i)=>n+i),TC=(t,e)=>n=>{var i=Uz(t,e);return Vz(i,n)},G9=(t,e)=>n=>{var i=Uz(t,e),r=[...i.map((l,f)=>l*f).slice(1),0];return Vz(r,n)},W9=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r,l=n[0].split("(");if(l[0]==="cubic-bezier"&&((r=l[1])===null||r===void 0?void 0:r.split(")")[0].split(",").length)===4){var f=l[1].split(")")[0].split(",").map(a=>parseFloat(a));return[f[0],f[1],f[2],f[3]]}}}return n.length===4?n:[0,0,1,1]},Y9=(t,e,n,i)=>{var r=TC(t,n),l=TC(e,i),f=G9(t,n),a=_=>_>1?1:_<0?0:_,g=_=>{for(var x=_>1?1:_,M=x,O=0;O<8;++O){var z=r(M)-x,F=f(M);if(Math.abs(z-x)<A0||F<A0)return l(M);M=a(M-z/F)}return l(M)};return g.isStepper=!1,g},AC=function(){return Y9(...W9(...arguments))},X9=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:r=17}=e,l=(f,a,g)=>{var _=-(f-a)*n,x=g*i,M=g+(_-x)*r/1e3,O=g*r/1e3+f;return Math.abs(O-a)<A0&&Math.abs(M)<A0?[a,0]:[O,M]};return l.isStepper=!0,l.dt=r,l},K9=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return AC(t);case"spring":return X9();default:if(t.split("(")[0]==="cubic-bezier")return AC(t)}return typeof t=="function"?t:null};function Q9(t){var e,n=()=>null,i=!1,r=null,l=f=>{if(!i){if(Array.isArray(f)){if(!f.length)return;var a=f,[g,..._]=a;if(typeof g=="number"){r=t.setTimeout(l.bind(null,_),g);return}l(g),r=t.setTimeout(l.bind(null,_));return}typeof f=="string"&&(e=f,n(e)),typeof f=="object"&&(e=f,n(e)),typeof f=="function"&&f()}};return{stop:()=>{i=!0},start:f=>{i=!1,r&&(r(),r=null),l(f)},subscribe:f=>(n=f,()=>{n=()=>null}),getTimeoutController:()=>t}}class J9{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,l=f=>{f-i>=n?e(f):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(l))};return r=requestAnimationFrame(l),()=>{r!=null&&cancelAnimationFrame(r)}}}function t7(){return Q9(new J9)}var e7=Z.createContext(t7);function n7(t,e){var n=Z.useContext(e7);return Z.useMemo(()=>e??n(t),[t,e,n])}var i7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},MC={t:0},U1={t:1};function $z(t){var e=tu(t,i7),{isActive:n,canBegin:i,duration:r,easing:l,begin:f,onAnimationEnd:a,onAnimationStart:g,children:_}=e,x=n7(e.animationId,e.animationManager),[M,O]=Z.useState(n?MC:U1),z=Z.useRef(null);return Z.useEffect(()=>{n||O(U1)},[n]),Z.useEffect(()=>{if(!n||!i)return jm;var F=Z9(MC,U1,K9(l),r,O,x.getTimeoutController()),V=()=>{z.current=F()};return x.start([g,f,V,r,a]),()=>{x.stop(),z.current&&z.current(),a()}},[n,i,r,l,f,g,a,x]),_(M.t)}function qz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=Z.useRef(Ay(e)),i=Z.useRef(t);return i.current!==t&&(n.current=Ay(e),i.current=t),n.current}var r7=["radius"],a7=["radius"];function EC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function CC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EC(Object(n),!0).forEach(function(i){s7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function s7(t,e,n){return(e=o7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o7(t){var e=l7(t,"string");return typeof e=="symbol"?e:e+""}function l7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M0(){return M0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},M0.apply(null,arguments)}function PC(t,e){if(t==null)return{};var n,i,r=u7(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function u7(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var kC=(t,e,n,i,r)=>{var l=Math.min(Math.abs(n)/2,Math.abs(i)/2),f=i>=0?1:-1,a=n>=0?1:-1,g=i>=0&&n>=0||i<0&&n<0?1:0,_;if(l>0&&r instanceof Array){for(var x=[0,0,0,0],M=0,O=4;M<O;M++)x[M]=r[M]>l?l:r[M];_="M".concat(t,",").concat(e+f*x[0]),x[0]>0&&(_+="A ".concat(x[0],",").concat(x[0],",0,0,").concat(g,",").concat(t+a*x[0],",").concat(e)),_+="L ".concat(t+n-a*x[1],",").concat(e),x[1]>0&&(_+="A ".concat(x[1],",").concat(x[1],",0,0,").concat(g,`,
        `).concat(t+n,",").concat(e+f*x[1])),_+="L ".concat(t+n,",").concat(e+i-f*x[2]),x[2]>0&&(_+="A ".concat(x[2],",").concat(x[2],",0,0,").concat(g,`,
        `).concat(t+n-a*x[2],",").concat(e+i)),_+="L ".concat(t+a*x[3],",").concat(e+i),x[3]>0&&(_+="A ".concat(x[3],",").concat(x[3],",0,0,").concat(g,`,
        `).concat(t,",").concat(e+i-f*x[3])),_+="Z"}else if(l>0&&r===+r&&r>0){var z=Math.min(l,r);_="M ".concat(t,",").concat(e+f*z,`
            A `).concat(z,",").concat(z,",0,0,").concat(g,",").concat(t+a*z,",").concat(e,`
            L `).concat(t+n-a*z,",").concat(e,`
            A `).concat(z,",").concat(z,",0,0,").concat(g,",").concat(t+n,",").concat(e+f*z,`
            L `).concat(t+n,",").concat(e+i-f*z,`
            A `).concat(z,",").concat(z,",0,0,").concat(g,",").concat(t+n-a*z,",").concat(e+i,`
            L `).concat(t+a*z,",").concat(e+i,`
            A `).concat(z,",").concat(z,",0,0,").concat(g,",").concat(t,",").concat(e+i-f*z," Z")}else _="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return _},OC={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},c7=t=>{var e=tu(t,OC),n=Z.useRef(null),[i,r]=Z.useState(-1);Z.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Ot=n.current.getTotalLength();Ot&&r(Ot)}catch{}},[]);var{x:l,y:f,width:a,height:g,radius:_,className:x}=e,{animationEasing:M,animationDuration:O,animationBegin:z,isAnimationActive:F,isUpdateAnimationActive:V}=e,H=Z.useRef(a),Q=Z.useRef(g),X=Z.useRef(l),Y=Z.useRef(f),W=Z.useMemo(()=>({x:l,y:f,width:a,height:g,radius:_}),[l,f,a,g,_]),J=qz(W,"rectangle-");if(l!==+l||f!==+f||a!==+a||g!==+g||a===0||g===0)return null;var ot=Fr("recharts-rectangle",x);if(!V){var ht=Cu(e),{radius:rt}=ht,ut=PC(ht,r7);return Z.createElement("path",M0({},ut,{radius:typeof _=="number"?_:void 0,className:ot,d:kC(l,f,a,g,_)}))}var _t=H.current,bt=Q.current,Pt=X.current,re=Y.current,ye="0px ".concat(i===-1?1:i,"px"),fe="".concat(i,"px 0px"),kt=j9(["strokeDasharray"],O,typeof M=="string"?M:OC.animationEasing);return Z.createElement($z,{animationId:J,key:J,canBegin:i>0,duration:O,easing:M,isActive:V,begin:z},Ot=>{var St=jc(_t,a,Ot),jt=jc(bt,g,Ot),Vt=jc(Pt,l,Ot),pt=jc(re,f,Ot);n.current&&(H.current=St,Q.current=jt,X.current=Vt,Y.current=pt);var Tt;F?Ot>0?Tt={transition:kt,strokeDasharray:fe}:Tt={strokeDasharray:ye}:Tt={strokeDasharray:fe};var $t=Cu(e),{radius:Yt}=$t,se=PC($t,a7);return Z.createElement("path",M0({},se,{radius:typeof _=="number"?_:void 0,className:ot,d:kC(Vt,pt,St,jt,_),ref:n,style:CC(CC({},Tt),e.style)}))})};function DC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function zC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DC(Object(n),!0).forEach(function(i){h7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function h7(t,e,n){return(e=f7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f7(t){var e=d7(t,"string");return typeof e=="symbol"?e:e+""}function d7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E0=Math.PI/180,p7=t=>t*180/Math.PI,Gs=(t,e,n,i)=>({x:t+Math.cos(-E0*i)*n,y:e+Math.sin(-E0*i)*n}),m7=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},g7=(t,e)=>{var{x:n,y:i}=t,{x:r,y:l}=e;return Math.sqrt((n-r)**2+(i-l)**2)},y7=(t,e)=>{var{x:n,y:i}=t,{cx:r,cy:l}=e,f=g7({x:n,y:i},{x:r,y:l});if(f<=0)return{radius:f,angle:0};var a=(n-r)/f,g=Math.acos(a);return i>l&&(g=2*Math.PI-g),{radius:f,angle:p7(g),angleInRadian:g}},_7=t=>{var{startAngle:e,endAngle:n}=t,i=Math.floor(e/360),r=Math.floor(n/360),l=Math.min(i,r);return{startAngle:e-l*360,endAngle:n-l*360}},v7=(t,e)=>{var{startAngle:n,endAngle:i}=e,r=Math.floor(n/360),l=Math.floor(i/360),f=Math.min(r,l);return t+f*360},x7=(t,e)=>{var{chartX:n,chartY:i}=t,{radius:r,angle:l}=y7({x:n,y:i},e),{innerRadius:f,outerRadius:a}=e;if(r<f||r>a||r===0)return null;var{startAngle:g,endAngle:_}=_7(e),x=l,M;if(g<=_){for(;x>_;)x-=360;for(;x<g;)x+=360;M=x>=g&&x<=_}else{for(;x>g;)x-=360;for(;x<_;)x+=360;M=x>=_&&x<=g}return M?zC(zC({},e),{},{radius:r,angle:v7(x,e)}):null};function Hz(t){var{cx:e,cy:n,radius:i,startAngle:r,endAngle:l}=t,f=Gs(e,n,i,r),a=Gs(e,n,i,l);return{points:[f,a],cx:e,cy:n,radius:i,startAngle:r,endAngle:l}}function Yw(){return Yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yw.apply(null,arguments)}var b7=(t,e)=>{var n=Mu(e-t),i=Math.min(Math.abs(e-t),359.999);return n*i},Nv=t=>{var{cx:e,cy:n,radius:i,angle:r,sign:l,isExternal:f,cornerRadius:a,cornerIsExternal:g}=t,_=a*(f?1:-1)+i,x=Math.asin(a/_)/E0,M=g?r:r+l*x,O=Gs(e,n,_,M),z=Gs(e,n,i,M),F=g?r-l*x:r,V=Gs(e,n,_*Math.cos(x*E0),F);return{center:O,circleTangency:z,lineTangency:V,theta:x}},Zz=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:l,endAngle:f}=t,a=b7(l,f),g=l+a,_=Gs(e,n,r,l),x=Gs(e,n,r,g),M="M ".concat(_.x,",").concat(_.y,`
    A `).concat(r,",").concat(r,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(l>g),`,
    `).concat(x.x,",").concat(x.y,`
  `);if(i>0){var O=Gs(e,n,i,l),z=Gs(e,n,i,g);M+="L ".concat(z.x,",").concat(z.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(l<=g),`,
            `).concat(O.x,",").concat(O.y," Z")}else M+="L ".concat(e,",").concat(n," Z");return M},w7=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,cornerRadius:l,forceCornerRadius:f,cornerIsExternal:a,startAngle:g,endAngle:_}=t,x=Mu(_-g),{circleTangency:M,lineTangency:O,theta:z}=Nv({cx:e,cy:n,radius:r,angle:g,sign:x,cornerRadius:l,cornerIsExternal:a}),{circleTangency:F,lineTangency:V,theta:H}=Nv({cx:e,cy:n,radius:r,angle:_,sign:-x,cornerRadius:l,cornerIsExternal:a}),Q=a?Math.abs(g-_):Math.abs(g-_)-z-H;if(Q<0)return f?"M ".concat(O.x,",").concat(O.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):Zz({cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:g,endAngle:_});var X="M ".concat(O.x,",").concat(O.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(M.x,",").concat(M.y,`
    A`).concat(r,",").concat(r,",0,").concat(+(Q>180),",").concat(+(x<0),",").concat(F.x,",").concat(F.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(V.x,",").concat(V.y,`
  `);if(i>0){var{circleTangency:Y,lineTangency:W,theta:J}=Nv({cx:e,cy:n,radius:i,angle:g,sign:x,isExternal:!0,cornerRadius:l,cornerIsExternal:a}),{circleTangency:ot,lineTangency:ht,theta:rt}=Nv({cx:e,cy:n,radius:i,angle:_,sign:-x,isExternal:!0,cornerRadius:l,cornerIsExternal:a}),ut=a?Math.abs(g-_):Math.abs(g-_)-J-rt;if(ut<0&&l===0)return"".concat(X,"L").concat(e,",").concat(n,"Z");X+="L".concat(ht.x,",").concat(ht.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(ot.x,",").concat(ot.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ut>180),",").concat(+(x>0),",").concat(Y.x,",").concat(Y.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(W.x,",").concat(W.y,"Z")}else X+="L".concat(e,",").concat(n,"Z");return X},S7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},T7=t=>{var e=tu(t,S7),{cx:n,cy:i,innerRadius:r,outerRadius:l,cornerRadius:f,forceCornerRadius:a,cornerIsExternal:g,startAngle:_,endAngle:x,className:M}=e;if(l<r||_===x)return null;var O=Fr("recharts-sector",M),z=l-r,F=Uf(f,z,0,!0),V;return F>0&&Math.abs(_-x)<360?V=w7({cx:n,cy:i,innerRadius:r,outerRadius:l,cornerRadius:Math.min(F,z/2),forceCornerRadius:a,cornerIsExternal:g,startAngle:_,endAngle:x}):V=Zz({cx:n,cy:i,innerRadius:r,outerRadius:l,startAngle:_,endAngle:x}),Z.createElement("path",Yw({},Cu(e),{className:O,d:V}))};function A7(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(ND(e)){if(t==="centric"){var{cx:i,cy:r,innerRadius:l,outerRadius:f,angle:a}=e,g=Gs(i,r,l,a),_=Gs(i,r,f,a);return[{x:g.x,y:g.y},{x:_.x,y:_.y}]}return Hz(e)}}var V1={},$1={},q1={},LC;function M7(){return LC||(LC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YD();function n(i){return e.isSymbol(i)?NaN:Number(i)}t.toNumber=n})(q1)),q1}var IC;function E7(){return IC||(IC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=M7();function n(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}t.toFinite=n})($1)),$1}var RC;function C7(){return RC||(RC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XD(),n=E7();function i(r,l,f){f&&typeof f!="number"&&e.isIterateeCall(r,l,f)&&(l=f=void 0),r=n.toFinite(r),l===void 0?(l=r,r=0):l=n.toFinite(l),f=f===void 0?r<l?1:-1:n.toFinite(f);const a=Math.max(Math.ceil((l-r)/(f||1)),0),g=new Array(a);for(let _=0;_<a;_++)g[_]=r,r+=f;return g}t.range=i})(V1)),V1}var H1,BC;function P7(){return BC||(BC=1,H1=C7().range),H1}var k7=P7();const Gz=Ou(k7);function Nf(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function O7(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function r2(t){let e,n,i;t.length!==2?(e=Nf,n=(a,g)=>Nf(t(a),g),i=(a,g)=>t(a)-g):(e=t===Nf||t===O7?t:D7,n=t,i=t);function r(a,g,_=0,x=a.length){if(_<x){if(e(g,g)!==0)return x;do{const M=_+x>>>1;n(a[M],g)<0?_=M+1:x=M}while(_<x)}return _}function l(a,g,_=0,x=a.length){if(_<x){if(e(g,g)!==0)return x;do{const M=_+x>>>1;n(a[M],g)<=0?_=M+1:x=M}while(_<x)}return _}function f(a,g,_=0,x=a.length){const M=r(a,g,_,x-1);return M>_&&i(a[M-1],g)>-i(a[M],g)?M-1:M}return{left:r,center:f,right:l}}function D7(){return 0}function Wz(t){return t===null?NaN:+t}function*z7(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const L7=r2(Nf),Yy=L7.right;r2(Wz).center;class NC extends Map{constructor(e,n=B7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(jC(this,e))}has(e){return super.has(jC(this,e))}set(e,n){return super.set(I7(this,e),n)}delete(e){return super.delete(R7(this,e))}}function jC({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function I7({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function R7({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function B7(t){return t!==null&&typeof t=="object"?t.valueOf():t}function N7(t=Nf){if(t===Nf)return Yz;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function Yz(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const j7=Math.sqrt(50),F7=Math.sqrt(10),U7=Math.sqrt(2);function C0(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),l=i/Math.pow(10,r),f=l>=j7?10:l>=F7?5:l>=U7?2:1;let a,g,_;return r<0?(_=Math.pow(10,-r)/f,a=Math.round(t*_),g=Math.round(e*_),a/_<t&&++a,g/_>e&&--g,_=-_):(_=Math.pow(10,r)*f,a=Math.round(t/_),g=Math.round(e/_),a*_<t&&++a,g*_>e&&--g),g<a&&.5<=n&&n<2?C0(t,e,n*2):[a,g,_]}function Xw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,l,f]=i?C0(e,t,n):C0(t,e,n);if(!(l>=r))return[];const a=l-r+1,g=new Array(a);if(i)if(f<0)for(let _=0;_<a;++_)g[_]=(l-_)/-f;else for(let _=0;_<a;++_)g[_]=(l-_)*f;else if(f<0)for(let _=0;_<a;++_)g[_]=(r+_)/-f;else for(let _=0;_<a;++_)g[_]=(r+_)*f;return g}function Kw(t,e,n){return e=+e,t=+t,n=+n,C0(t,e,n)[2]}function Qw(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?Kw(e,t,n):Kw(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function FC(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function UC(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function Xz(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?Yz:N7(r);i>n;){if(i-n>600){const g=i-n+1,_=e-n+1,x=Math.log(g),M=.5*Math.exp(2*x/3),O=.5*Math.sqrt(x*M*(g-M)/g)*(_-g/2<0?-1:1),z=Math.max(n,Math.floor(e-_*M/g+O)),F=Math.min(i,Math.floor(e+(g-_)*M/g+O));Xz(t,e,z,F,r)}const l=t[e];let f=n,a=i;for(ty(t,n,e),r(t[i],l)>0&&ty(t,n,i);f<a;){for(ty(t,f,a),++f,--a;r(t[f],l)<0;)++f;for(;r(t[a],l)>0;)--a}r(t[n],l)===0?ty(t,n,a):(++a,ty(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}return t}function ty(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function V7(t,e,n){if(t=Float64Array.from(z7(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return UC(t);if(e>=1)return FC(t);var i,r=(i-1)*e,l=Math.floor(r),f=FC(Xz(t,l).subarray(0,l+1)),a=UC(t.subarray(l+1));return f+(a-f)*(r-l)}}function $7(t,e,n=Wz){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,l=Math.floor(r),f=+n(t[l],l,t),a=+n(t[l+1],l+1,t);return f+(a-f)*(r-l)}}function q7(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,l=new Array(r);++i<r;)l[i]=t+i*n;return l}function Du(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Gh(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Jw=Symbol("implicit");function a2(){var t=new NC,e=[],n=[],i=Jw;function r(l){let f=t.get(l);if(f===void 0){if(i!==Jw)return i;t.set(l,f=e.push(l)-1)}return n[f%n.length]}return r.domain=function(l){if(!arguments.length)return e.slice();e=[],t=new NC;for(const f of l)t.has(f)||t.set(f,e.push(f)-1);return r},r.range=function(l){return arguments.length?(n=Array.from(l),r):n.slice()},r.unknown=function(l){return arguments.length?(i=l,r):i},r.copy=function(){return a2(e,n).unknown(i)},Du.apply(r,arguments),r}function s2(){var t=a2().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,l,f,a=!1,g=0,_=0,x=.5;delete t.unknown;function M(){var O=e().length,z=r<i,F=z?r:i,V=z?i:r;l=(V-F)/Math.max(1,O-g+_*2),a&&(l=Math.floor(l)),F+=(V-F-l*(O-g))*x,f=l*(1-g),a&&(F=Math.round(F),f=Math.round(f));var H=q7(O).map(function(Q){return F+l*Q});return n(z?H.reverse():H)}return t.domain=function(O){return arguments.length?(e(O),M()):e()},t.range=function(O){return arguments.length?([i,r]=O,i=+i,r=+r,M()):[i,r]},t.rangeRound=function(O){return[i,r]=O,i=+i,r=+r,a=!0,M()},t.bandwidth=function(){return f},t.step=function(){return l},t.round=function(O){return arguments.length?(a=!!O,M()):a},t.padding=function(O){return arguments.length?(g=Math.min(1,_=+O),M()):g},t.paddingInner=function(O){return arguments.length?(g=Math.min(1,O),M()):g},t.paddingOuter=function(O){return arguments.length?(_=+O,M()):_},t.align=function(O){return arguments.length?(x=Math.max(0,Math.min(1,O)),M()):x},t.copy=function(){return s2(e(),[i,r]).round(a).paddingInner(g).paddingOuter(_).align(x)},Du.apply(M(),arguments)}function Kz(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Kz(e())},t}function H7(){return Kz(s2.apply(null,arguments).paddingInner(1))}function o2(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Qz(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Xy(){}var ky=.7,P0=1/ky,Tm="\\s*([+-]?\\d+)\\s*",Oy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Z7=/^#([0-9a-f]{3,8})$/,G7=new RegExp(`^rgb\\(${Tm},${Tm},${Tm}\\)$`),W7=new RegExp(`^rgb\\(${Vc},${Vc},${Vc}\\)$`),Y7=new RegExp(`^rgba\\(${Tm},${Tm},${Tm},${Oy}\\)$`),X7=new RegExp(`^rgba\\(${Vc},${Vc},${Vc},${Oy}\\)$`),K7=new RegExp(`^hsl\\(${Oy},${Vc},${Vc}\\)$`),Q7=new RegExp(`^hsla\\(${Oy},${Vc},${Vc},${Oy}\\)$`),VC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o2(Xy,Dy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:$C,formatHex:$C,formatHex8:J7,formatHsl:tH,formatRgb:qC,toString:qC});function $C(){return this.rgb().formatHex()}function J7(){return this.rgb().formatHex8()}function tH(){return Jz(this).formatHsl()}function qC(){return this.rgb().formatRgb()}function Dy(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Z7.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?HC(e):n===3?new bl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?jv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?jv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=G7.exec(t))?new bl(e[1],e[2],e[3],1):(e=W7.exec(t))?new bl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Y7.exec(t))?jv(e[1],e[2],e[3],e[4]):(e=X7.exec(t))?jv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=K7.exec(t))?WC(e[1],e[2]/100,e[3]/100,1):(e=Q7.exec(t))?WC(e[1],e[2]/100,e[3]/100,e[4]):VC.hasOwnProperty(t)?HC(VC[t]):t==="transparent"?new bl(NaN,NaN,NaN,0):null}function HC(t){return new bl(t>>16&255,t>>8&255,t&255,1)}function jv(t,e,n,i){return i<=0&&(t=e=n=NaN),new bl(t,e,n,i)}function eH(t){return t instanceof Xy||(t=Dy(t)),t?(t=t.rgb(),new bl(t.r,t.g,t.b,t.opacity)):new bl}function tS(t,e,n,i){return arguments.length===1?eH(t):new bl(t,e,n,i??1)}function bl(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}o2(bl,tS,Qz(Xy,{brighter(t){return t=t==null?P0:Math.pow(P0,t),new bl(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ky:Math.pow(ky,t),new bl(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bl(Yd(this.r),Yd(this.g),Yd(this.b),k0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZC,formatHex:ZC,formatHex8:nH,formatRgb:GC,toString:GC}));function ZC(){return`#${Vd(this.r)}${Vd(this.g)}${Vd(this.b)}`}function nH(){return`#${Vd(this.r)}${Vd(this.g)}${Vd(this.b)}${Vd((isNaN(this.opacity)?1:this.opacity)*255)}`}function GC(){const t=k0(this.opacity);return`${t===1?"rgb(":"rgba("}${Yd(this.r)}, ${Yd(this.g)}, ${Yd(this.b)}${t===1?")":`, ${t})`}`}function k0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Yd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vd(t){return t=Yd(t),(t<16?"0":"")+t.toString(16)}function WC(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fc(t,e,n,i)}function Jz(t){if(t instanceof fc)return new fc(t.h,t.s,t.l,t.opacity);if(t instanceof Xy||(t=Dy(t)),!t)return new fc;if(t instanceof fc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),l=Math.max(e,n,i),f=NaN,a=l-r,g=(l+r)/2;return a?(e===l?f=(n-i)/a+(n<i)*6:n===l?f=(i-e)/a+2:f=(e-n)/a+4,a/=g<.5?l+r:2-l-r,f*=60):a=g>0&&g<1?0:f,new fc(f,a,g,t.opacity)}function iH(t,e,n,i){return arguments.length===1?Jz(t):new fc(t,e,n,i??1)}function fc(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}o2(fc,iH,Qz(Xy,{brighter(t){return t=t==null?P0:Math.pow(P0,t),new fc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ky:Math.pow(ky,t),new fc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new bl(Z1(t>=240?t-240:t+120,r,i),Z1(t,r,i),Z1(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new fc(YC(this.h),Fv(this.s),Fv(this.l),k0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=k0(this.opacity);return`${t===1?"hsl(":"hsla("}${YC(this.h)}, ${Fv(this.s)*100}%, ${Fv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function YC(t){return t=(t||0)%360,t<0?t+360:t}function Fv(t){return Math.max(0,Math.min(1,t||0))}function Z1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const l2=t=>()=>t;function rH(t,e){return function(n){return t+n*e}}function aH(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function sH(t){return(t=+t)==1?tL:function(e,n){return n-e?aH(e,n,t):l2(isNaN(e)?n:e)}}function tL(t,e){var n=e-t;return n?rH(t,n):l2(isNaN(t)?e:t)}const XC=(function t(e){var n=sH(e);function i(r,l){var f=n((r=tS(r)).r,(l=tS(l)).r),a=n(r.g,l.g),g=n(r.b,l.b),_=tL(r.opacity,l.opacity);return function(x){return r.r=f(x),r.g=a(x),r.b=g(x),r.opacity=_(x),r+""}}return i.gamma=t,i})(1);function oH(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(l){for(r=0;r<n;++r)i[r]=t[r]*(1-l)+e[r]*l;return i}}function lH(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function uH(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),l=new Array(n),f;for(f=0;f<i;++f)r[f]=Um(t[f],e[f]);for(;f<n;++f)l[f]=e[f];return function(a){for(f=0;f<i;++f)l[f]=r[f](a);return l}}function cH(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function O0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function hH(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Um(t[r],e[r]):i[r]=e[r];return function(l){for(r in n)i[r]=n[r](l);return i}}var eS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,G1=new RegExp(eS.source,"g");function fH(t){return function(){return t}}function dH(t){return function(e){return t(e)+""}}function pH(t,e){var n=eS.lastIndex=G1.lastIndex=0,i,r,l,f=-1,a=[],g=[];for(t=t+"",e=e+"";(i=eS.exec(t))&&(r=G1.exec(e));)(l=r.index)>n&&(l=e.slice(n,l),a[f]?a[f]+=l:a[++f]=l),(i=i[0])===(r=r[0])?a[f]?a[f]+=r:a[++f]=r:(a[++f]=null,g.push({i:f,x:O0(i,r)})),n=G1.lastIndex;return n<e.length&&(l=e.slice(n),a[f]?a[f]+=l:a[++f]=l),a.length<2?g[0]?dH(g[0].x):fH(e):(e=g.length,function(_){for(var x=0,M;x<e;++x)a[(M=g[x]).i]=M.x(_);return a.join("")})}function Um(t,e){var n=typeof e,i;return e==null||n==="boolean"?l2(e):(n==="number"?O0:n==="string"?(i=Dy(e))?(e=i,XC):pH:e instanceof Dy?XC:e instanceof Date?cH:lH(e)?oH:Array.isArray(e)?uH:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?hH:O0)(t,e)}function u2(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function mH(t,e){e===void 0&&(e=t,t=Um);for(var n=0,i=e.length-1,r=e[0],l=new Array(i<0?0:i);n<i;)l[n]=t(r,r=e[++n]);return function(f){var a=Math.max(0,Math.min(i-1,Math.floor(f*=i)));return l[a](f-a)}}function gH(t){return function(){return t}}function D0(t){return+t}var KC=[0,1];function Qo(t){return t}function nS(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:gH(isNaN(e)?NaN:.5)}function yH(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function _H(t,e,n){var i=t[0],r=t[1],l=e[0],f=e[1];return r<i?(i=nS(r,i),l=n(f,l)):(i=nS(i,r),l=n(l,f)),function(a){return l(i(a))}}function vH(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),l=new Array(i),f=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++f<i;)r[f]=nS(t[f],t[f+1]),l[f]=n(e[f],e[f+1]);return function(a){var g=Yy(t,a,1,i)-1;return l[g](r[g](a))}}function Ky(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ax(){var t=KC,e=KC,n=Um,i,r,l,f=Qo,a,g,_;function x(){var O=Math.min(t.length,e.length);return f!==Qo&&(f=yH(t[0],t[O-1])),a=O>2?vH:_H,g=_=null,M}function M(O){return O==null||isNaN(O=+O)?l:(g||(g=a(t.map(i),e,n)))(i(f(O)))}return M.invert=function(O){return f(r((_||(_=a(e,t.map(i),O0)))(O)))},M.domain=function(O){return arguments.length?(t=Array.from(O,D0),x()):t.slice()},M.range=function(O){return arguments.length?(e=Array.from(O),x()):e.slice()},M.rangeRound=function(O){return e=Array.from(O),n=u2,x()},M.clamp=function(O){return arguments.length?(f=O?!0:Qo,x()):f!==Qo},M.interpolate=function(O){return arguments.length?(n=O,x()):n},M.unknown=function(O){return arguments.length?(l=O,M):l},function(O,z){return i=O,r=z,x()}}function c2(){return Ax()(Qo,Qo)}function xH(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function z0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function km(t){return t=z0(Math.abs(t)),t?t[1]:NaN}function bH(t,e){return function(n,i){for(var r=n.length,l=[],f=0,a=t[0],g=0;r>0&&a>0&&(g+a+1>i&&(a=Math.max(1,i-g)),l.push(n.substring(r-=a,r+a)),!((g+=a+1)>i));)a=t[f=(f+1)%t.length];return l.reverse().join(e)}}function wH(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var SH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zy(t){if(!(e=SH.exec(t)))throw new Error("invalid format: "+t);var e;return new h2({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}zy.prototype=h2.prototype;function h2(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}h2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function TH(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var eL;function AH(t,e){var n=z0(t,e);if(!n)return t+"";var i=n[0],r=n[1],l=r-(eL=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,f=i.length;return l===f?i:l>f?i+new Array(l-f+1).join("0"):l>0?i.slice(0,l)+"."+i.slice(l):"0."+new Array(1-l).join("0")+z0(t,Math.max(0,e+l-1))[0]}function QC(t,e){var n=z0(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const JC={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:xH,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>QC(t*100,e),r:QC,s:AH,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function tP(t){return t}var eP=Array.prototype.map,nP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function MH(t){var e=t.grouping===void 0||t.thousands===void 0?tP:bH(eP.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?tP:wH(eP.call(t.numerals,String)),f=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",g=t.nan===void 0?"NaN":t.nan+"";function _(M){M=zy(M);var O=M.fill,z=M.align,F=M.sign,V=M.symbol,H=M.zero,Q=M.width,X=M.comma,Y=M.precision,W=M.trim,J=M.type;J==="n"?(X=!0,J="g"):JC[J]||(Y===void 0&&(Y=12),W=!0,J="g"),(H||O==="0"&&z==="=")&&(H=!0,O="0",z="=");var ot=V==="$"?n:V==="#"&&/[boxX]/.test(J)?"0"+J.toLowerCase():"",ht=V==="$"?i:/[%p]/.test(J)?f:"",rt=JC[J],ut=/[defgprs%]/.test(J);Y=Y===void 0?6:/[gprs]/.test(J)?Math.max(1,Math.min(21,Y)):Math.max(0,Math.min(20,Y));function _t(bt){var Pt=ot,re=ht,ye,fe,kt;if(J==="c")re=rt(bt)+re,bt="";else{bt=+bt;var Ot=bt<0||1/bt<0;if(bt=isNaN(bt)?g:rt(Math.abs(bt),Y),W&&(bt=TH(bt)),Ot&&+bt==0&&F!=="+"&&(Ot=!1),Pt=(Ot?F==="("?F:a:F==="-"||F==="("?"":F)+Pt,re=(J==="s"?nP[8+eL/3]:"")+re+(Ot&&F==="("?")":""),ut){for(ye=-1,fe=bt.length;++ye<fe;)if(kt=bt.charCodeAt(ye),48>kt||kt>57){re=(kt===46?r+bt.slice(ye+1):bt.slice(ye))+re,bt=bt.slice(0,ye);break}}}X&&!H&&(bt=e(bt,1/0));var St=Pt.length+bt.length+re.length,jt=St<Q?new Array(Q-St+1).join(O):"";switch(X&&H&&(bt=e(jt+bt,jt.length?Q-re.length:1/0),jt=""),z){case"<":bt=Pt+bt+re+jt;break;case"=":bt=Pt+jt+bt+re;break;case"^":bt=jt.slice(0,St=jt.length>>1)+Pt+bt+re+jt.slice(St);break;default:bt=jt+Pt+bt+re;break}return l(bt)}return _t.toString=function(){return M+""},_t}function x(M,O){var z=_((M=zy(M),M.type="f",M)),F=Math.max(-8,Math.min(8,Math.floor(km(O)/3)))*3,V=Math.pow(10,-F),H=nP[8+F/3];return function(Q){return z(V*Q)+H}}return{format:_,formatPrefix:x}}var Uv,f2,nL;EH({thousands:",",grouping:[3],currency:["$",""]});function EH(t){return Uv=MH(t),f2=Uv.format,nL=Uv.formatPrefix,Uv}function CH(t){return Math.max(0,-km(Math.abs(t)))}function PH(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(km(e)/3)))*3-km(Math.abs(t)))}function kH(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,km(e)-km(t))+1}function iL(t,e,n,i){var r=Qw(t,e,n),l;switch(i=zy(i??",f"),i.type){case"s":{var f=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(l=PH(r,f))&&(i.precision=l),nL(i,f)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(l=kH(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=l-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(l=CH(r))&&(i.precision=l-(i.type==="%")*2);break}}return f2(i)}function qf(t){var e=t.domain;return t.ticks=function(n){var i=e();return Xw(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return iL(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,l=i.length-1,f=i[r],a=i[l],g,_,x=10;for(a<f&&(_=f,f=a,a=_,_=r,r=l,l=_);x-- >0;){if(_=Kw(f,a,n),_===g)return i[r]=f,i[l]=a,e(i);if(_>0)f=Math.floor(f/_)*_,a=Math.ceil(a/_)*_;else if(_<0)f=Math.ceil(f*_)/_,a=Math.floor(a*_)/_;else break;g=_}return t},t}function rL(){var t=c2();return t.copy=function(){return Ky(t,rL())},Du.apply(t,arguments),qf(t)}function aL(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,D0),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return aL(t).unknown(e)},t=arguments.length?Array.from(t,D0):[0,1],qf(n)}function sL(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],l=t[i],f;return l<r&&(f=n,n=i,i=f,f=r,r=l,l=f),t[n]=e.floor(r),t[i]=e.ceil(l),t}function iP(t){return Math.log(t)}function rP(t){return Math.exp(t)}function OH(t){return-Math.log(-t)}function DH(t){return-Math.exp(-t)}function zH(t){return isFinite(t)?+("1e"+t):t<0?0:t}function LH(t){return t===10?zH:t===Math.E?Math.exp:e=>Math.pow(t,e)}function IH(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function aP(t){return(e,n)=>-t(-e,n)}function d2(t){const e=t(iP,rP),n=e.domain;let i=10,r,l;function f(){return r=IH(i),l=LH(i),n()[0]<0?(r=aP(r),l=aP(l),t(OH,DH)):t(iP,rP),e}return e.base=function(a){return arguments.length?(i=+a,f()):i},e.domain=function(a){return arguments.length?(n(a),f()):n()},e.ticks=a=>{const g=n();let _=g[0],x=g[g.length-1];const M=x<_;M&&([_,x]=[x,_]);let O=r(_),z=r(x),F,V;const H=a==null?10:+a;let Q=[];if(!(i%1)&&z-O<H){if(O=Math.floor(O),z=Math.ceil(z),_>0){for(;O<=z;++O)for(F=1;F<i;++F)if(V=O<0?F/l(-O):F*l(O),!(V<_)){if(V>x)break;Q.push(V)}}else for(;O<=z;++O)for(F=i-1;F>=1;--F)if(V=O>0?F/l(-O):F*l(O),!(V<_)){if(V>x)break;Q.push(V)}Q.length*2<H&&(Q=Xw(_,x,H))}else Q=Xw(O,z,Math.min(z-O,H)).map(l);return M?Q.reverse():Q},e.tickFormat=(a,g)=>{if(a==null&&(a=10),g==null&&(g=i===10?"s":","),typeof g!="function"&&(!(i%1)&&(g=zy(g)).precision==null&&(g.trim=!0),g=f2(g)),a===1/0)return g;const _=Math.max(1,i*a/e.ticks().length);return x=>{let M=x/l(Math.round(r(x)));return M*i<i-.5&&(M*=i),M<=_?g(x):""}},e.nice=()=>n(sL(n(),{floor:a=>l(Math.floor(r(a))),ceil:a=>l(Math.ceil(r(a)))})),e}function oL(){const t=d2(Ax()).domain([1,10]);return t.copy=()=>Ky(t,oL()).base(t.base()),Du.apply(t,arguments),t}function sP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function oP(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function p2(t){var e=1,n=t(sP(e),oP(e));return n.constant=function(i){return arguments.length?t(sP(e=+i),oP(e)):e},qf(n)}function lL(){var t=p2(Ax());return t.copy=function(){return Ky(t,lL()).constant(t.constant())},Du.apply(t,arguments)}function lP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function RH(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function BH(t){return t<0?-t*t:t*t}function m2(t){var e=t(Qo,Qo),n=1;function i(){return n===1?t(Qo,Qo):n===.5?t(RH,BH):t(lP(n),lP(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},qf(e)}function g2(){var t=m2(Ax());return t.copy=function(){return Ky(t,g2()).exponent(t.exponent())},Du.apply(t,arguments),t}function NH(){return g2.apply(null,arguments).exponent(.5)}function uP(t){return Math.sign(t)*t*t}function jH(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function uL(){var t=c2(),e=[0,1],n=!1,i;function r(l){var f=jH(t(l));return isNaN(f)?i:n?Math.round(f):f}return r.invert=function(l){return t.invert(uP(l))},r.domain=function(l){return arguments.length?(t.domain(l),r):t.domain()},r.range=function(l){return arguments.length?(t.range((e=Array.from(l,D0)).map(uP)),r):e.slice()},r.rangeRound=function(l){return r.range(l).round(!0)},r.round=function(l){return arguments.length?(n=!!l,r):n},r.clamp=function(l){return arguments.length?(t.clamp(l),r):t.clamp()},r.unknown=function(l){return arguments.length?(i=l,r):i},r.copy=function(){return uL(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},Du.apply(r,arguments),qf(r)}function cL(){var t=[],e=[],n=[],i;function r(){var f=0,a=Math.max(1,e.length);for(n=new Array(a-1);++f<a;)n[f-1]=$7(t,f/a);return l}function l(f){return f==null||isNaN(f=+f)?i:e[Yy(n,f)]}return l.invertExtent=function(f){var a=e.indexOf(f);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},l.domain=function(f){if(!arguments.length)return t.slice();t=[];for(let a of f)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Nf),r()},l.range=function(f){return arguments.length?(e=Array.from(f),r()):e.slice()},l.unknown=function(f){return arguments.length?(i=f,l):i},l.quantiles=function(){return n.slice()},l.copy=function(){return cL().domain(t).range(e).unknown(i)},Du.apply(l,arguments)}function hL(){var t=0,e=1,n=1,i=[.5],r=[0,1],l;function f(g){return g!=null&&g<=g?r[Yy(i,g,0,n)]:l}function a(){var g=-1;for(i=new Array(n);++g<n;)i[g]=((g+1)*e-(g-n)*t)/(n+1);return f}return f.domain=function(g){return arguments.length?([t,e]=g,t=+t,e=+e,a()):[t,e]},f.range=function(g){return arguments.length?(n=(r=Array.from(g)).length-1,a()):r.slice()},f.invertExtent=function(g){var _=r.indexOf(g);return _<0?[NaN,NaN]:_<1?[t,i[0]]:_>=n?[i[n-1],e]:[i[_-1],i[_]]},f.unknown=function(g){return arguments.length&&(l=g),f},f.thresholds=function(){return i.slice()},f.copy=function(){return hL().domain([t,e]).range(r).unknown(l)},Du.apply(qf(f),arguments)}function fL(){var t=[.5],e=[0,1],n,i=1;function r(l){return l!=null&&l<=l?e[Yy(t,l,0,i)]:n}return r.domain=function(l){return arguments.length?(t=Array.from(l),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(l){return arguments.length?(e=Array.from(l),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(l){var f=e.indexOf(l);return[t[f-1],t[f]]},r.unknown=function(l){return arguments.length?(n=l,r):n},r.copy=function(){return fL().domain(t).range(e).unknown(n)},Du.apply(r,arguments)}const W1=new Date,Y1=new Date;function hs(t,e,n,i){function r(l){return t(l=arguments.length===0?new Date:new Date(+l)),l}return r.floor=l=>(t(l=new Date(+l)),l),r.ceil=l=>(t(l=new Date(l-1)),e(l,1),t(l),l),r.round=l=>{const f=r(l),a=r.ceil(l);return l-f<a-l?f:a},r.offset=(l,f)=>(e(l=new Date(+l),f==null?1:Math.floor(f)),l),r.range=(l,f,a)=>{const g=[];if(l=r.ceil(l),a=a==null?1:Math.floor(a),!(l<f)||!(a>0))return g;let _;do g.push(_=new Date(+l)),e(l,a),t(l);while(_<l&&l<f);return g},r.filter=l=>hs(f=>{if(f>=f)for(;t(f),!l(f);)f.setTime(f-1)},(f,a)=>{if(f>=f)if(a<0)for(;++a<=0;)for(;e(f,-1),!l(f););else for(;--a>=0;)for(;e(f,1),!l(f););}),n&&(r.count=(l,f)=>(W1.setTime(+l),Y1.setTime(+f),t(W1),t(Y1),Math.floor(n(W1,Y1))),r.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?r.filter(i?f=>i(f)%l===0:f=>r.count(0,f)%l===0):r)),r}const L0=hs(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);L0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?hs(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):L0);L0.range;const kh=1e3,Eu=kh*60,Oh=Eu*60,Nh=Oh*24,y2=Nh*7,cP=Nh*30,X1=Nh*365,$d=hs(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*kh)},(t,e)=>(e-t)/kh,t=>t.getUTCSeconds());$d.range;const _2=hs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*kh)},(t,e)=>{t.setTime(+t+e*Eu)},(t,e)=>(e-t)/Eu,t=>t.getMinutes());_2.range;const v2=hs(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Eu)},(t,e)=>(e-t)/Eu,t=>t.getUTCMinutes());v2.range;const x2=hs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*kh-t.getMinutes()*Eu)},(t,e)=>{t.setTime(+t+e*Oh)},(t,e)=>(e-t)/Oh,t=>t.getHours());x2.range;const b2=hs(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Oh)},(t,e)=>(e-t)/Oh,t=>t.getUTCHours());b2.range;const Qy=hs(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Eu)/Nh,t=>t.getDate()-1);Qy.range;const Mx=hs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nh,t=>t.getUTCDate()-1);Mx.range;const dL=hs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nh,t=>Math.floor(t/Nh));dL.range;function up(t){return hs(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Eu)/y2)}const Ex=up(0),I0=up(1),FH=up(2),UH=up(3),Om=up(4),VH=up(5),$H=up(6);Ex.range;I0.range;FH.range;UH.range;Om.range;VH.range;$H.range;function cp(t){return hs(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/y2)}const Cx=cp(0),R0=cp(1),qH=cp(2),HH=cp(3),Dm=cp(4),ZH=cp(5),GH=cp(6);Cx.range;R0.range;qH.range;HH.range;Dm.range;ZH.range;GH.range;const w2=hs(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());w2.range;const S2=hs(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());S2.range;const jh=hs(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());jh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:hs(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});jh.range;const Fh=hs(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Fh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:hs(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Fh.range;function pL(t,e,n,i,r,l){const f=[[$d,1,kh],[$d,5,5*kh],[$d,15,15*kh],[$d,30,30*kh],[l,1,Eu],[l,5,5*Eu],[l,15,15*Eu],[l,30,30*Eu],[r,1,Oh],[r,3,3*Oh],[r,6,6*Oh],[r,12,12*Oh],[i,1,Nh],[i,2,2*Nh],[n,1,y2],[e,1,cP],[e,3,3*cP],[t,1,X1]];function a(_,x,M){const O=x<_;O&&([_,x]=[x,_]);const z=M&&typeof M.range=="function"?M:g(_,x,M),F=z?z.range(_,+x+1):[];return O?F.reverse():F}function g(_,x,M){const O=Math.abs(x-_)/M,z=r2(([,,H])=>H).right(f,O);if(z===f.length)return t.every(Qw(_/X1,x/X1,M));if(z===0)return L0.every(Math.max(Qw(_,x,M),1));const[F,V]=f[O/f[z-1][2]<f[z][2]/O?z-1:z];return F.every(V)}return[a,g]}const[WH,YH]=pL(Fh,S2,Cx,dL,b2,v2),[XH,KH]=pL(jh,w2,Ex,Qy,x2,_2);function K1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Q1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ey(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function QH(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,l=t.days,f=t.shortDays,a=t.months,g=t.shortMonths,_=ny(r),x=iy(r),M=ny(l),O=iy(l),z=ny(f),F=iy(f),V=ny(a),H=iy(a),Q=ny(g),X=iy(g),Y={a:Ot,A:St,b:jt,B:Vt,c:null,d:gP,e:gP,f:bZ,g:OZ,G:zZ,H:_Z,I:vZ,j:xZ,L:mL,m:wZ,M:SZ,p:pt,q:Tt,Q:vP,s:xP,S:TZ,u:AZ,U:MZ,V:EZ,w:CZ,W:PZ,x:null,X:null,y:kZ,Y:DZ,Z:LZ,"%":_P},W={a:$t,A:Yt,b:se,B:le,c:null,d:yP,e:yP,f:NZ,g:WZ,G:XZ,H:IZ,I:RZ,j:BZ,L:yL,m:jZ,M:FZ,p:Ae,q:Ie,Q:vP,s:xP,S:UZ,u:VZ,U:$Z,V:qZ,w:HZ,W:ZZ,x:null,X:null,y:GZ,Y:YZ,Z:KZ,"%":_P},J={a:_t,A:bt,b:Pt,B:re,c:ye,d:pP,e:pP,f:pZ,g:dP,G:fP,H:mP,I:mP,j:cZ,L:dZ,m:uZ,M:hZ,p:ut,q:lZ,Q:gZ,s:yZ,S:fZ,u:iZ,U:rZ,V:aZ,w:nZ,W:sZ,x:fe,X:kt,y:dP,Y:fP,Z:oZ,"%":mZ};Y.x=ot(n,Y),Y.X=ot(i,Y),Y.c=ot(e,Y),W.x=ot(n,W),W.X=ot(i,W),W.c=ot(e,W);function ot(Wt,Pe){return function(we){var ce=[],rn=-1,je=0,nn=Wt.length,tn,Tn,an;for(we instanceof Date||(we=new Date(+we));++rn<nn;)Wt.charCodeAt(rn)===37&&(ce.push(Wt.slice(je,rn)),(Tn=hP[tn=Wt.charAt(++rn)])!=null?tn=Wt.charAt(++rn):Tn=tn==="e"?" ":"0",(an=Pe[tn])&&(tn=an(we,Tn)),ce.push(tn),je=rn+1);return ce.push(Wt.slice(je,rn)),ce.join("")}}function ht(Wt,Pe){return function(we){var ce=ey(1900,void 0,1),rn=rt(ce,Wt,we+="",0),je,nn;if(rn!=we.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(Pe&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(je=Q1(ey(ce.y,0,1)),nn=je.getUTCDay(),je=nn>4||nn===0?R0.ceil(je):R0(je),je=Mx.offset(je,(ce.V-1)*7),ce.y=je.getUTCFullYear(),ce.m=je.getUTCMonth(),ce.d=je.getUTCDate()+(ce.w+6)%7):(je=K1(ey(ce.y,0,1)),nn=je.getDay(),je=nn>4||nn===0?I0.ceil(je):I0(je),je=Qy.offset(je,(ce.V-1)*7),ce.y=je.getFullYear(),ce.m=je.getMonth(),ce.d=je.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),nn="Z"in ce?Q1(ey(ce.y,0,1)).getUTCDay():K1(ey(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(nn+5)%7:ce.w+ce.U*7-(nn+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,Q1(ce)):K1(ce)}}function rt(Wt,Pe,we,ce){for(var rn=0,je=Pe.length,nn=we.length,tn,Tn;rn<je;){if(ce>=nn)return-1;if(tn=Pe.charCodeAt(rn++),tn===37){if(tn=Pe.charAt(rn++),Tn=J[tn in hP?Pe.charAt(rn++):tn],!Tn||(ce=Tn(Wt,we,ce))<0)return-1}else if(tn!=we.charCodeAt(ce++))return-1}return ce}function ut(Wt,Pe,we){var ce=_.exec(Pe.slice(we));return ce?(Wt.p=x.get(ce[0].toLowerCase()),we+ce[0].length):-1}function _t(Wt,Pe,we){var ce=z.exec(Pe.slice(we));return ce?(Wt.w=F.get(ce[0].toLowerCase()),we+ce[0].length):-1}function bt(Wt,Pe,we){var ce=M.exec(Pe.slice(we));return ce?(Wt.w=O.get(ce[0].toLowerCase()),we+ce[0].length):-1}function Pt(Wt,Pe,we){var ce=Q.exec(Pe.slice(we));return ce?(Wt.m=X.get(ce[0].toLowerCase()),we+ce[0].length):-1}function re(Wt,Pe,we){var ce=V.exec(Pe.slice(we));return ce?(Wt.m=H.get(ce[0].toLowerCase()),we+ce[0].length):-1}function ye(Wt,Pe,we){return rt(Wt,e,Pe,we)}function fe(Wt,Pe,we){return rt(Wt,n,Pe,we)}function kt(Wt,Pe,we){return rt(Wt,i,Pe,we)}function Ot(Wt){return f[Wt.getDay()]}function St(Wt){return l[Wt.getDay()]}function jt(Wt){return g[Wt.getMonth()]}function Vt(Wt){return a[Wt.getMonth()]}function pt(Wt){return r[+(Wt.getHours()>=12)]}function Tt(Wt){return 1+~~(Wt.getMonth()/3)}function $t(Wt){return f[Wt.getUTCDay()]}function Yt(Wt){return l[Wt.getUTCDay()]}function se(Wt){return g[Wt.getUTCMonth()]}function le(Wt){return a[Wt.getUTCMonth()]}function Ae(Wt){return r[+(Wt.getUTCHours()>=12)]}function Ie(Wt){return 1+~~(Wt.getUTCMonth()/3)}return{format:function(Wt){var Pe=ot(Wt+="",Y);return Pe.toString=function(){return Wt},Pe},parse:function(Wt){var Pe=ht(Wt+="",!1);return Pe.toString=function(){return Wt},Pe},utcFormat:function(Wt){var Pe=ot(Wt+="",W);return Pe.toString=function(){return Wt},Pe},utcParse:function(Wt){var Pe=ht(Wt+="",!0);return Pe.toString=function(){return Wt},Pe}}}var hP={"-":"",_:" ",0:"0"},Es=/^\s*\d+/,JH=/^%/,tZ=/[\\^$*+?|[\]().{}]/g;function $i(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",l=r.length;return i+(l<n?new Array(n-l+1).join(e)+r:r)}function eZ(t){return t.replace(tZ,"\\$&")}function ny(t){return new RegExp("^(?:"+t.map(eZ).join("|")+")","i")}function iy(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function nZ(t,e,n){var i=Es.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function iZ(t,e,n){var i=Es.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function rZ(t,e,n){var i=Es.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function aZ(t,e,n){var i=Es.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function sZ(t,e,n){var i=Es.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function fP(t,e,n){var i=Es.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function dP(t,e,n){var i=Es.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function oZ(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function lZ(t,e,n){var i=Es.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function uZ(t,e,n){var i=Es.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function pP(t,e,n){var i=Es.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function cZ(t,e,n){var i=Es.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function mP(t,e,n){var i=Es.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function hZ(t,e,n){var i=Es.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function fZ(t,e,n){var i=Es.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function dZ(t,e,n){var i=Es.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function pZ(t,e,n){var i=Es.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function mZ(t,e,n){var i=JH.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function gZ(t,e,n){var i=Es.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function yZ(t,e,n){var i=Es.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function gP(t,e){return $i(t.getDate(),e,2)}function _Z(t,e){return $i(t.getHours(),e,2)}function vZ(t,e){return $i(t.getHours()%12||12,e,2)}function xZ(t,e){return $i(1+Qy.count(jh(t),t),e,3)}function mL(t,e){return $i(t.getMilliseconds(),e,3)}function bZ(t,e){return mL(t,e)+"000"}function wZ(t,e){return $i(t.getMonth()+1,e,2)}function SZ(t,e){return $i(t.getMinutes(),e,2)}function TZ(t,e){return $i(t.getSeconds(),e,2)}function AZ(t){var e=t.getDay();return e===0?7:e}function MZ(t,e){return $i(Ex.count(jh(t)-1,t),e,2)}function gL(t){var e=t.getDay();return e>=4||e===0?Om(t):Om.ceil(t)}function EZ(t,e){return t=gL(t),$i(Om.count(jh(t),t)+(jh(t).getDay()===4),e,2)}function CZ(t){return t.getDay()}function PZ(t,e){return $i(I0.count(jh(t)-1,t),e,2)}function kZ(t,e){return $i(t.getFullYear()%100,e,2)}function OZ(t,e){return t=gL(t),$i(t.getFullYear()%100,e,2)}function DZ(t,e){return $i(t.getFullYear()%1e4,e,4)}function zZ(t,e){var n=t.getDay();return t=n>=4||n===0?Om(t):Om.ceil(t),$i(t.getFullYear()%1e4,e,4)}function LZ(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$i(e/60|0,"0",2)+$i(e%60,"0",2)}function yP(t,e){return $i(t.getUTCDate(),e,2)}function IZ(t,e){return $i(t.getUTCHours(),e,2)}function RZ(t,e){return $i(t.getUTCHours()%12||12,e,2)}function BZ(t,e){return $i(1+Mx.count(Fh(t),t),e,3)}function yL(t,e){return $i(t.getUTCMilliseconds(),e,3)}function NZ(t,e){return yL(t,e)+"000"}function jZ(t,e){return $i(t.getUTCMonth()+1,e,2)}function FZ(t,e){return $i(t.getUTCMinutes(),e,2)}function UZ(t,e){return $i(t.getUTCSeconds(),e,2)}function VZ(t){var e=t.getUTCDay();return e===0?7:e}function $Z(t,e){return $i(Cx.count(Fh(t)-1,t),e,2)}function _L(t){var e=t.getUTCDay();return e>=4||e===0?Dm(t):Dm.ceil(t)}function qZ(t,e){return t=_L(t),$i(Dm.count(Fh(t),t)+(Fh(t).getUTCDay()===4),e,2)}function HZ(t){return t.getUTCDay()}function ZZ(t,e){return $i(R0.count(Fh(t)-1,t),e,2)}function GZ(t,e){return $i(t.getUTCFullYear()%100,e,2)}function WZ(t,e){return t=_L(t),$i(t.getUTCFullYear()%100,e,2)}function YZ(t,e){return $i(t.getUTCFullYear()%1e4,e,4)}function XZ(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Dm(t):Dm.ceil(t),$i(t.getUTCFullYear()%1e4,e,4)}function KZ(){return"+0000"}function _P(){return"%"}function vP(t){return+t}function xP(t){return Math.floor(+t/1e3)}var pm,vL,xL;QZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function QZ(t){return pm=QH(t),vL=pm.format,pm.parse,xL=pm.utcFormat,pm.utcParse,pm}function JZ(t){return new Date(t)}function tG(t){return t instanceof Date?+t:+new Date(+t)}function T2(t,e,n,i,r,l,f,a,g,_){var x=c2(),M=x.invert,O=x.domain,z=_(".%L"),F=_(":%S"),V=_("%I:%M"),H=_("%I %p"),Q=_("%a %d"),X=_("%b %d"),Y=_("%B"),W=_("%Y");function J(ot){return(g(ot)<ot?z:a(ot)<ot?F:f(ot)<ot?V:l(ot)<ot?H:i(ot)<ot?r(ot)<ot?Q:X:n(ot)<ot?Y:W)(ot)}return x.invert=function(ot){return new Date(M(ot))},x.domain=function(ot){return arguments.length?O(Array.from(ot,tG)):O().map(JZ)},x.ticks=function(ot){var ht=O();return t(ht[0],ht[ht.length-1],ot??10)},x.tickFormat=function(ot,ht){return ht==null?J:_(ht)},x.nice=function(ot){var ht=O();return(!ot||typeof ot.range!="function")&&(ot=e(ht[0],ht[ht.length-1],ot??10)),ot?O(sL(ht,ot)):x},x.copy=function(){return Ky(x,T2(t,e,n,i,r,l,f,a,g,_))},x}function eG(){return Du.apply(T2(XH,KH,jh,w2,Ex,Qy,x2,_2,$d,vL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nG(){return Du.apply(T2(WH,YH,Fh,S2,Cx,Mx,b2,v2,$d,xL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Px(){var t=0,e=1,n,i,r,l,f=Qo,a=!1,g;function _(M){return M==null||isNaN(M=+M)?g:f(r===0?.5:(M=(l(M)-n)*r,a?Math.max(0,Math.min(1,M)):M))}_.domain=function(M){return arguments.length?([t,e]=M,n=l(t=+t),i=l(e=+e),r=n===i?0:1/(i-n),_):[t,e]},_.clamp=function(M){return arguments.length?(a=!!M,_):a},_.interpolator=function(M){return arguments.length?(f=M,_):f};function x(M){return function(O){var z,F;return arguments.length?([z,F]=O,f=M(z,F),_):[f(0),f(1)]}}return _.range=x(Um),_.rangeRound=x(u2),_.unknown=function(M){return arguments.length?(g=M,_):g},function(M){return l=M,n=M(t),i=M(e),r=n===i?0:1/(i-n),_}}function Hf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function bL(){var t=qf(Px()(Qo));return t.copy=function(){return Hf(t,bL())},Gh.apply(t,arguments)}function wL(){var t=d2(Px()).domain([1,10]);return t.copy=function(){return Hf(t,wL()).base(t.base())},Gh.apply(t,arguments)}function SL(){var t=p2(Px());return t.copy=function(){return Hf(t,SL()).constant(t.constant())},Gh.apply(t,arguments)}function A2(){var t=m2(Px());return t.copy=function(){return Hf(t,A2()).exponent(t.exponent())},Gh.apply(t,arguments)}function iG(){return A2.apply(null,arguments).exponent(.5)}function TL(){var t=[],e=Qo;function n(i){if(i!=null&&!isNaN(i=+i))return e((Yy(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let r of i)r!=null&&!isNaN(r=+r)&&t.push(r);return t.sort(Nf),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,r)=>e(r/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,l)=>V7(t,l/i))},n.copy=function(){return TL(e).domain(t)},Gh.apply(n,arguments)}function kx(){var t=0,e=.5,n=1,i=1,r,l,f,a,g,_=Qo,x,M=!1,O;function z(V){return isNaN(V=+V)?O:(V=.5+((V=+x(V))-l)*(i*V<i*l?a:g),_(M?Math.max(0,Math.min(1,V)):V))}z.domain=function(V){return arguments.length?([t,e,n]=V,r=x(t=+t),l=x(e=+e),f=x(n=+n),a=r===l?0:.5/(l-r),g=l===f?0:.5/(f-l),i=l<r?-1:1,z):[t,e,n]},z.clamp=function(V){return arguments.length?(M=!!V,z):M},z.interpolator=function(V){return arguments.length?(_=V,z):_};function F(V){return function(H){var Q,X,Y;return arguments.length?([Q,X,Y]=H,_=mH(V,[Q,X,Y]),z):[_(0),_(.5),_(1)]}}return z.range=F(Um),z.rangeRound=F(u2),z.unknown=function(V){return arguments.length?(O=V,z):O},function(V){return x=V,r=V(t),l=V(e),f=V(n),a=r===l?0:.5/(l-r),g=l===f?0:.5/(f-l),i=l<r?-1:1,z}}function AL(){var t=qf(kx()(Qo));return t.copy=function(){return Hf(t,AL())},Gh.apply(t,arguments)}function ML(){var t=d2(kx()).domain([.1,1,10]);return t.copy=function(){return Hf(t,ML()).base(t.base())},Gh.apply(t,arguments)}function EL(){var t=p2(kx());return t.copy=function(){return Hf(t,EL()).constant(t.constant())},Gh.apply(t,arguments)}function M2(){var t=m2(kx());return t.copy=function(){return Hf(t,M2()).exponent(t.exponent())},Gh.apply(t,arguments)}function rG(){return M2.apply(null,arguments).exponent(.5)}const hy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:s2,scaleDiverging:AL,scaleDivergingLog:ML,scaleDivergingPow:M2,scaleDivergingSqrt:rG,scaleDivergingSymlog:EL,scaleIdentity:aL,scaleImplicit:Jw,scaleLinear:rL,scaleLog:oL,scaleOrdinal:a2,scalePoint:H7,scalePow:g2,scaleQuantile:cL,scaleQuantize:hL,scaleRadial:uL,scaleSequential:bL,scaleSequentialLog:wL,scaleSequentialPow:A2,scaleSequentialQuantile:TL,scaleSequentialSqrt:iG,scaleSequentialSymlog:SL,scaleSqrt:NH,scaleSymlog:lL,scaleThreshold:fL,scaleTime:eG,scaleUtc:nG,tickFormat:iL},Symbol.toStringTag,{value:"Module"}));var Zf=t=>t.chartData,aG=Te([Zf],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),E2=(t,e,n,i)=>i?aG(t):Zf(t);function np(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(_a(e)&&_a(n))return!0}return!1}function bP(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function CL(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,i]=t,r,l;if(_a(n))r=n;else if(typeof n=="function")return;if(_a(i))l=i;else if(typeof i=="function")return;var f=[r,l];if(np(f))return f}}function sG(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var i=t(e,n);if(np(i))return bP(i,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[r,l]=t,f,a;if(r==="auto")e!=null&&(f=Math.min(...e));else if(xn(r))f=r;else if(typeof r=="function")try{e!=null&&(f=r(e?.[0]))}catch{}else if(typeof r=="string"&&iC.test(r)){var g=iC.exec(r);if(g==null||e==null)f=void 0;else{var _=+g[1];f=e[0]-_}}else f=e?.[0];if(l==="auto")e!=null&&(a=Math.max(...e));else if(xn(l))a=l;else if(typeof l=="function")try{e!=null&&(a=l(e?.[1]))}catch{}else if(typeof l=="string"&&rC.test(l)){var x=rC.exec(l);if(x==null||e==null)a=void 0;else{var M=+x[1];a=e[1]+M}}else a=e?.[1];var O=[f,a];if(np(O))return e==null?O:bP(O,e,n)}}}var Vm=1e9,oG={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},P2,Yr=!0,ku="[DecimalError] ",Xd=ku+"Invalid argument: ",C2=ku+"Exponent out of range: ",$m=Math.floor,Ud=Math.pow,lG=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Kl,Ts=1e7,Nr=7,PL=9007199254740991,B0=$m(PL/Nr),mn={};mn.absoluteValue=mn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};mn.comparedTo=mn.cmp=function(t){var e,n,i,r,l=this;if(t=new l.constructor(t),l.s!==t.s)return l.s||-t.s;if(l.e!==t.e)return l.e>t.e^l.s<0?1:-1;for(i=l.d.length,r=t.d.length,e=0,n=i<r?i:r;e<n;++e)if(l.d[e]!==t.d[e])return l.d[e]>t.d[e]^l.s<0?1:-1;return i===r?0:i>r^l.s<0?1:-1};mn.decimalPlaces=mn.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Nr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};mn.dividedBy=mn.div=function(t){return Lh(this,new this.constructor(t))};mn.dividedToIntegerBy=mn.idiv=function(t){var e=this,n=e.constructor;return br(Lh(e,new n(t),0,1),n.precision)};mn.equals=mn.eq=function(t){return!this.cmp(t)};mn.exponent=function(){return Ya(this)};mn.greaterThan=mn.gt=function(t){return this.cmp(t)>0};mn.greaterThanOrEqualTo=mn.gte=function(t){return this.cmp(t)>=0};mn.isInteger=mn.isint=function(){return this.e>this.d.length-2};mn.isNegative=mn.isneg=function(){return this.s<0};mn.isPositive=mn.ispos=function(){return this.s>0};mn.isZero=function(){return this.s===0};mn.lessThan=mn.lt=function(t){return this.cmp(t)<0};mn.lessThanOrEqualTo=mn.lte=function(t){return this.cmp(t)<1};mn.logarithm=mn.log=function(t){var e,n=this,i=n.constructor,r=i.precision,l=r+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(Kl))throw Error(ku+"NaN");if(n.s<1)throw Error(ku+(n.s?"NaN":"-Infinity"));return n.eq(Kl)?new i(0):(Yr=!1,e=Lh(Ly(n,l),Ly(t,l),l),Yr=!0,br(e,r))};mn.minus=mn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?DL(e,t):kL(e,(t.s=-t.s,t))};mn.modulo=mn.mod=function(t){var e,n=this,i=n.constructor,r=i.precision;if(t=new i(t),!t.s)throw Error(ku+"NaN");return n.s?(Yr=!1,e=Lh(n,t,0,1).times(t),Yr=!0,n.minus(e)):br(new i(n),r)};mn.naturalExponential=mn.exp=function(){return OL(this)};mn.naturalLogarithm=mn.ln=function(){return Ly(this)};mn.negated=mn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};mn.plus=mn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?kL(e,t):DL(e,(t.s=-t.s,t))};mn.precision=mn.sd=function(t){var e,n,i,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Xd+t);if(e=Ya(r)+1,i=r.d.length-1,n=i*Nr+1,i=r.d[i],i){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};mn.squareRoot=mn.sqrt=function(){var t,e,n,i,r,l,f,a=this,g=a.constructor;if(a.s<1){if(!a.s)return new g(0);throw Error(ku+"NaN")}for(t=Ya(a),Yr=!1,r=Math.sqrt(+a),r==0||r==1/0?(e=Fc(a.d),(e.length+t)%2==0&&(e+="0"),r=Math.sqrt(e),t=$m((t+1)/2)-(t<0||t%2),r==1/0?e="5e"+t:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new g(e)):i=new g(r.toString()),n=g.precision,r=f=n+3;;)if(l=i,i=l.plus(Lh(a,l,f+2)).times(.5),Fc(l.d).slice(0,f)===(e=Fc(i.d)).slice(0,f)){if(e=e.slice(f-3,f+1),r==f&&e=="4999"){if(br(l,n+1,0),l.times(l).eq(a)){i=l;break}}else if(e!="9999")break;f+=4}return Yr=!0,br(i,n)};mn.times=mn.mul=function(t){var e,n,i,r,l,f,a,g,_,x=this,M=x.constructor,O=x.d,z=(t=new M(t)).d;if(!x.s||!t.s)return new M(0);for(t.s*=x.s,n=x.e+t.e,g=O.length,_=z.length,g<_&&(l=O,O=z,z=l,f=g,g=_,_=f),l=[],f=g+_,i=f;i--;)l.push(0);for(i=_;--i>=0;){for(e=0,r=g+i;r>i;)a=l[r]+z[i]*O[r-i-1]+e,l[r--]=a%Ts|0,e=a/Ts|0;l[r]=(l[r]+e)%Ts|0}for(;!l[--f];)l.pop();return e?++n:l.shift(),t.d=l,t.e=n,Yr?br(t,M.precision):t};mn.toDecimalPlaces=mn.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Gc(t,0,Vm),e===void 0?e=i.rounding:Gc(e,0,8),br(n,t+Ya(n)+1,e))};mn.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=ip(i,!0):(Gc(t,0,Vm),e===void 0?e=r.rounding:Gc(e,0,8),i=br(new r(i),t+1,e),n=ip(i,!0,t+1)),n};mn.toFixed=function(t,e){var n,i,r=this,l=r.constructor;return t===void 0?ip(r):(Gc(t,0,Vm),e===void 0?e=l.rounding:Gc(e,0,8),i=br(new l(r),t+Ya(r)+1,e),n=ip(i.abs(),!1,t+Ya(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)};mn.toInteger=mn.toint=function(){var t=this,e=t.constructor;return br(new e(t),Ya(t)+1,e.rounding)};mn.toNumber=function(){return+this};mn.toPower=mn.pow=function(t){var e,n,i,r,l,f,a=this,g=a.constructor,_=12,x=+(t=new g(t));if(!t.s)return new g(Kl);if(a=new g(a),!a.s){if(t.s<1)throw Error(ku+"Infinity");return a}if(a.eq(Kl))return a;if(i=g.precision,t.eq(Kl))return br(a,i);if(e=t.e,n=t.d.length-1,f=e>=n,l=a.s,f){if((n=x<0?-x:x)<=PL){for(r=new g(Kl),e=Math.ceil(i/Nr+4),Yr=!1;n%2&&(r=r.times(a),SP(r.d,e)),n=$m(n/2),n!==0;)a=a.times(a),SP(a.d,e);return Yr=!0,t.s<0?new g(Kl).div(r):br(r,i)}}else if(l<0)throw Error(ku+"NaN");return l=l<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Yr=!1,r=t.times(Ly(a,i+_)),Yr=!0,r=OL(r),r.s=l,r};mn.toPrecision=function(t,e){var n,i,r=this,l=r.constructor;return t===void 0?(n=Ya(r),i=ip(r,n<=l.toExpNeg||n>=l.toExpPos)):(Gc(t,1,Vm),e===void 0?e=l.rounding:Gc(e,0,8),r=br(new l(r),t,e),n=Ya(r),i=ip(r,t<=n||n<=l.toExpNeg,t)),i};mn.toSignificantDigits=mn.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Gc(t,1,Vm),e===void 0?e=i.rounding:Gc(e,0,8)),br(new i(n),t,e)};mn.toString=mn.valueOf=mn.val=mn.toJSON=mn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ya(t),n=t.constructor;return ip(t,e<=n.toExpNeg||e>=n.toExpPos)};function kL(t,e){var n,i,r,l,f,a,g,_,x=t.constructor,M=x.precision;if(!t.s||!e.s)return e.s||(e=new x(t)),Yr?br(e,M):e;if(g=t.d,_=e.d,f=t.e,r=e.e,g=g.slice(),l=f-r,l){for(l<0?(i=g,l=-l,a=_.length):(i=_,r=f,a=g.length),f=Math.ceil(M/Nr),a=f>a?f+1:a+1,l>a&&(l=a,i.length=1),i.reverse();l--;)i.push(0);i.reverse()}for(a=g.length,l=_.length,a-l<0&&(l=a,i=_,_=g,g=i),n=0;l;)n=(g[--l]=g[l]+_[l]+n)/Ts|0,g[l]%=Ts;for(n&&(g.unshift(n),++r),a=g.length;g[--a]==0;)g.pop();return e.d=g,e.e=r,Yr?br(e,M):e}function Gc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Xd+t)}function Fc(t){var e,n,i,r=t.length-1,l="",f=t[0];if(r>0){for(l+=f,e=1;e<r;e++)i=t[e]+"",n=Nr-i.length,n&&(l+=Pf(n)),l+=i;f=t[e],i=f+"",n=Nr-i.length,n&&(l+=Pf(n))}else if(f===0)return"0";for(;f%10===0;)f/=10;return l+f}var Lh=(function(){function t(i,r){var l,f=0,a=i.length;for(i=i.slice();a--;)l=i[a]*r+f,i[a]=l%Ts|0,f=l/Ts|0;return f&&i.unshift(f),i}function e(i,r,l,f){var a,g;if(l!=f)g=l>f?1:-1;else for(a=g=0;a<l;a++)if(i[a]!=r[a]){g=i[a]>r[a]?1:-1;break}return g}function n(i,r,l){for(var f=0;l--;)i[l]-=f,f=i[l]<r[l]?1:0,i[l]=f*Ts+i[l]-r[l];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,l,f){var a,g,_,x,M,O,z,F,V,H,Q,X,Y,W,J,ot,ht,rt,ut=i.constructor,_t=i.s==r.s?1:-1,bt=i.d,Pt=r.d;if(!i.s)return new ut(i);if(!r.s)throw Error(ku+"Division by zero");for(g=i.e-r.e,ht=Pt.length,J=bt.length,z=new ut(_t),F=z.d=[],_=0;Pt[_]==(bt[_]||0);)++_;if(Pt[_]>(bt[_]||0)&&--g,l==null?X=l=ut.precision:f?X=l+(Ya(i)-Ya(r))+1:X=l,X<0)return new ut(0);if(X=X/Nr+2|0,_=0,ht==1)for(x=0,Pt=Pt[0],X++;(_<J||x)&&X--;_++)Y=x*Ts+(bt[_]||0),F[_]=Y/Pt|0,x=Y%Pt|0;else{for(x=Ts/(Pt[0]+1)|0,x>1&&(Pt=t(Pt,x),bt=t(bt,x),ht=Pt.length,J=bt.length),W=ht,V=bt.slice(0,ht),H=V.length;H<ht;)V[H++]=0;rt=Pt.slice(),rt.unshift(0),ot=Pt[0],Pt[1]>=Ts/2&&++ot;do x=0,a=e(Pt,V,ht,H),a<0?(Q=V[0],ht!=H&&(Q=Q*Ts+(V[1]||0)),x=Q/ot|0,x>1?(x>=Ts&&(x=Ts-1),M=t(Pt,x),O=M.length,H=V.length,a=e(M,V,O,H),a==1&&(x--,n(M,ht<O?rt:Pt,O))):(x==0&&(a=x=1),M=Pt.slice()),O=M.length,O<H&&M.unshift(0),n(V,M,H),a==-1&&(H=V.length,a=e(Pt,V,ht,H),a<1&&(x++,n(V,ht<H?rt:Pt,H))),H=V.length):a===0&&(x++,V=[0]),F[_++]=x,a&&V[0]?V[H++]=bt[W]||0:(V=[bt[W]],H=1);while((W++<J||V[0]!==void 0)&&X--)}return F[0]||F.shift(),z.e=g,br(z,f?l+Ya(z)+1:l)}})();function OL(t,e){var n,i,r,l,f,a,g=0,_=0,x=t.constructor,M=x.precision;if(Ya(t)>16)throw Error(C2+Ya(t));if(!t.s)return new x(Kl);for(Yr=!1,a=M,f=new x(.03125);t.abs().gte(.1);)t=t.times(f),_+=5;for(i=Math.log(Ud(2,_))/Math.LN10*2+5|0,a+=i,n=r=l=new x(Kl),x.precision=a;;){if(r=br(r.times(t),a),n=n.times(++g),f=l.plus(Lh(r,n,a)),Fc(f.d).slice(0,a)===Fc(l.d).slice(0,a)){for(;_--;)l=br(l.times(l),a);return x.precision=M,e==null?(Yr=!0,br(l,M)):l}l=f}}function Ya(t){for(var e=t.e*Nr,n=t.d[0];n>=10;n/=10)e++;return e}function J1(t,e,n){if(e>t.LN10.sd())throw Yr=!0,n&&(t.precision=n),Error(ku+"LN10 precision limit exceeded");return br(new t(t.LN10),e)}function Pf(t){for(var e="";t--;)e+="0";return e}function Ly(t,e){var n,i,r,l,f,a,g,_,x,M=1,O=10,z=t,F=z.d,V=z.constructor,H=V.precision;if(z.s<1)throw Error(ku+(z.s?"NaN":"-Infinity"));if(z.eq(Kl))return new V(0);if(e==null?(Yr=!1,_=H):_=e,z.eq(10))return e==null&&(Yr=!0),J1(V,_);if(_+=O,V.precision=_,n=Fc(F),i=n.charAt(0),l=Ya(z),Math.abs(l)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)z=z.times(t),n=Fc(z.d),i=n.charAt(0),M++;l=Ya(z),i>1?(z=new V("0."+n),l++):z=new V(i+"."+n.slice(1))}else return g=J1(V,_+2,H).times(l+""),z=Ly(new V(i+"."+n.slice(1)),_-O).plus(g),V.precision=H,e==null?(Yr=!0,br(z,H)):z;for(a=f=z=Lh(z.minus(Kl),z.plus(Kl),_),x=br(z.times(z),_),r=3;;){if(f=br(f.times(x),_),g=a.plus(Lh(f,new V(r),_)),Fc(g.d).slice(0,_)===Fc(a.d).slice(0,_))return a=a.times(2),l!==0&&(a=a.plus(J1(V,_+2,H).times(l+""))),a=Lh(a,new V(M),_),V.precision=H,e==null?(Yr=!0,br(a,H)):a;a=g,r+=2}}function wP(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,n=n-i-1,t.e=$m(n/Nr),t.d=[],i=(n+1)%Nr,n<0&&(i+=Nr),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=Nr;i<r;)t.d.push(+e.slice(i,i+=Nr));e=e.slice(i),i=Nr-e.length}else i-=r;for(;i--;)e+="0";if(t.d.push(+e),Yr&&(t.e>B0||t.e<-B0))throw Error(C2+n)}else t.s=0,t.e=0,t.d=[0];return t}function br(t,e,n){var i,r,l,f,a,g,_,x,M=t.d;for(f=1,l=M[0];l>=10;l/=10)f++;if(i=e-f,i<0)i+=Nr,r=e,_=M[x=0];else{if(x=Math.ceil((i+1)/Nr),l=M.length,x>=l)return t;for(_=l=M[x],f=1;l>=10;l/=10)f++;i%=Nr,r=i-Nr+f}if(n!==void 0&&(l=Ud(10,f-r-1),a=_/l%10|0,g=e<0||M[x+1]!==void 0||_%l,g=n<4?(a||g)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||g||n==6&&(i>0?r>0?_/Ud(10,f-r):0:M[x-1])%10&1||n==(t.s<0?8:7))),e<1||!M[0])return g?(l=Ya(t),M.length=1,e=e-l-1,M[0]=Ud(10,(Nr-e%Nr)%Nr),t.e=$m(-e/Nr)||0):(M.length=1,M[0]=t.e=t.s=0),t;if(i==0?(M.length=x,l=1,x--):(M.length=x+1,l=Ud(10,Nr-i),M[x]=r>0?(_/Ud(10,f-r)%Ud(10,r)|0)*l:0),g)for(;;)if(x==0){(M[0]+=l)==Ts&&(M[0]=1,++t.e);break}else{if(M[x]+=l,M[x]!=Ts)break;M[x--]=0,l=1}for(i=M.length;M[--i]===0;)M.pop();if(Yr&&(t.e>B0||t.e<-B0))throw Error(C2+Ya(t));return t}function DL(t,e){var n,i,r,l,f,a,g,_,x,M,O=t.constructor,z=O.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new O(t),Yr?br(e,z):e;if(g=t.d,M=e.d,i=e.e,_=t.e,g=g.slice(),f=_-i,f){for(x=f<0,x?(n=g,f=-f,a=M.length):(n=M,i=_,a=g.length),r=Math.max(Math.ceil(z/Nr),a)+2,f>r&&(f=r,n.length=1),n.reverse(),r=f;r--;)n.push(0);n.reverse()}else{for(r=g.length,a=M.length,x=r<a,x&&(a=r),r=0;r<a;r++)if(g[r]!=M[r]){x=g[r]<M[r];break}f=0}for(x&&(n=g,g=M,M=n,e.s=-e.s),a=g.length,r=M.length-a;r>0;--r)g[a++]=0;for(r=M.length;r>f;){if(g[--r]<M[r]){for(l=r;l&&g[--l]===0;)g[l]=Ts-1;--g[l],g[r]+=Ts}g[r]-=M[r]}for(;g[--a]===0;)g.pop();for(;g[0]===0;g.shift())--i;return g[0]?(e.d=g,e.e=i,Yr?br(e,z):e):new O(0)}function ip(t,e,n){var i,r=Ya(t),l=Fc(t.d),f=l.length;return e?(n&&(i=n-f)>0?l=l.charAt(0)+"."+l.slice(1)+Pf(i):f>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(r<0?"e":"e+")+r):r<0?(l="0."+Pf(-r-1)+l,n&&(i=n-f)>0&&(l+=Pf(i))):r>=f?(l+=Pf(r+1-f),n&&(i=n-r-1)>0&&(l=l+"."+Pf(i))):((i=r+1)<f&&(l=l.slice(0,i)+"."+l.slice(i)),n&&(i=n-f)>0&&(r+1===f&&(l+="."),l+=Pf(i))),t.s<0?"-"+l:l}function SP(t,e){if(t.length>e)return t.length=e,!0}function zL(t){var e,n,i;function r(l){var f=this;if(!(f instanceof r))return new r(l);if(f.constructor=r,l instanceof r){f.s=l.s,f.e=l.e,f.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(Xd+l);if(l>0)f.s=1;else if(l<0)l=-l,f.s=-1;else{f.s=0,f.e=0,f.d=[0];return}if(l===~~l&&l<1e7){f.e=0,f.d=[l];return}return wP(f,l.toString())}else if(typeof l!="string")throw Error(Xd+l);if(l.charCodeAt(0)===45?(l=l.slice(1),f.s=-1):f.s=1,lG.test(l))wP(f,l);else throw Error(Xd+l)}if(r.prototype=mn,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=zL,r.config=r.set=uG,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function uG(t){if(!t||typeof t!="object")throw Error(ku+"Object expected");var e,n,i,r=["precision",1,Vm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=t[n=r[e]])!==void 0)if($m(i)===i&&i>=r[e+1]&&i<=r[e+2])this[n]=i;else throw Error(Xd+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(Xd+n+": "+i);return this}var P2=zL(oG);Kl=new P2(1);const ir=P2;var cG=t=>t,LL={},IL=t=>t===LL,TP=t=>function e(){return arguments.length===0||arguments.length===1&&IL(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},RL=(t,e)=>t===1?e:TP(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var l=i.filter(f=>f!==LL).length;return l>=t?e(...i):RL(t-l,TP(function(){for(var f=arguments.length,a=new Array(f),g=0;g<f;g++)a[g]=arguments[g];var _=i.map(x=>IL(x)?a.shift():x);return e(..._,...a)}))}),Ox=t=>RL(t.length,t),iS=(t,e)=>{for(var n=[],i=t;i<e;++i)n[i-t]=i;return n},hG=Ox((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),fG=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return cG;var r=n.reverse(),l=r[0],f=r.slice(1);return function(){return f.reduce((a,g)=>g(a),l(...arguments))}},rS=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),BL=t=>{var e=null,n=null;return function(){for(var i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e&&r.every((f,a)=>{var g;return f===((g=e)===null||g===void 0?void 0:g[a])})||(e=r,n=t(...r)),n}};function NL(t){var e;return t===0?e=1:e=Math.floor(new ir(t).abs().log(10).toNumber())+1,e}function jL(t,e,n){for(var i=new ir(t),r=0,l=[];i.lt(e)&&r<1e5;)l.push(i.toNumber()),i=i.add(n),r++;return l}Ox((t,e,n)=>{var i=+t,r=+e;return i+n*(r-i)});Ox((t,e,n)=>{var i=e-+t;return i=i||1/0,(n-t)/i});Ox((t,e,n)=>{var i=e-+t;return i=i||1/0,Math.max(0,Math.min(1,(n-t)/i))});var FL=t=>{var[e,n]=t,[i,r]=[e,n];return e>n&&([i,r]=[n,e]),[i,r]},UL=(t,e,n)=>{if(t.lte(0))return new ir(0);var i=NL(t.toNumber()),r=new ir(10).pow(i),l=t.div(r),f=i!==1?.05:.1,a=new ir(Math.ceil(l.div(f).toNumber())).add(n).mul(f),g=a.mul(r);return e?new ir(g.toNumber()):new ir(Math.ceil(g.toNumber()))},dG=(t,e,n)=>{var i=new ir(1),r=new ir(t);if(!r.isint()&&n){var l=Math.abs(t);l<1?(i=new ir(10).pow(NL(t)-1),r=new ir(Math.floor(r.div(i).toNumber())).mul(i)):l>1&&(r=new ir(Math.floor(t)))}else t===0?r=new ir(Math.floor((e-1)/2)):n||(r=new ir(Math.floor(t)));var f=Math.floor((e-1)/2),a=fG(hG(g=>r.add(new ir(g-f).mul(i)).toNumber()),iS);return a(0,e)},VL=function(e,n,i,r){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(i-1)))return{step:new ir(0),tickMin:new ir(0),tickMax:new ir(0)};var f=UL(new ir(n).sub(e).div(i-1),r,l),a;e<=0&&n>=0?a=new ir(0):(a=new ir(e).add(n).div(2),a=a.sub(new ir(a).mod(f)));var g=Math.ceil(a.sub(e).div(f).toNumber()),_=Math.ceil(new ir(n).sub(a).div(f).toNumber()),x=g+_+1;return x>i?VL(e,n,i,r,l+1):(x<i&&(_=n>0?_+(i-x):_,g=n>0?g:g+(i-x)),{step:f,tickMin:a.sub(new ir(g).mul(f)),tickMax:a.add(new ir(_).mul(f))})};function pG(t){var[e,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(i,2),[f,a]=FL([e,n]);if(f===-1/0||a===1/0){var g=a===1/0?[f,...iS(0,i-1).map(()=>1/0)]:[...iS(0,i-1).map(()=>-1/0),a];return e>n?rS(g):g}if(f===a)return dG(f,i,r);var{step:_,tickMin:x,tickMax:M}=VL(f,a,l,r,0),O=jL(x,M.add(new ir(.1).mul(_)),_);return e>n?rS(O):O}function mG(t,e){var[n,i]=t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,f]=FL([n,i]);if(l===-1/0||f===1/0)return[n,i];if(l===f)return[l];var a=Math.max(e,2),g=UL(new ir(f).sub(l).div(a-1),r,0),_=[...jL(new ir(l),new ir(f),g),f];return r===!1&&(_=_.map(x=>Math.round(x))),n>i?rS(_):_}var gG=BL(pG),yG=BL(mG),_G=t=>t.rootProps.barCategoryGap,Dx=t=>t.rootProps.stackOffset,k2=t=>t.options.chartName,O2=t=>t.rootProps.syncId,$L=t=>t.rootProps.syncMethod,D2=t=>t.options.eventEmitter,vG=t=>t.rootProps.baseValue,Jo={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ah={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Yl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},zx=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},xG={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ah.angleAxisId,includeHidden:!1,name:void 0,reversed:Ah.reversed,scale:Ah.scale,tick:Ah.tick,tickCount:void 0,ticks:void 0,type:Ah.type,unit:void 0},bG={allowDataOverflow:Yl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yl.scale,tick:Yl.tick,tickCount:Yl.tickCount,ticks:void 0,type:Yl.type,unit:void 0},wG={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ah.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ah.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ah.scale,tick:Ah.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},SG={allowDataOverflow:Yl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yl.scale,tick:Yl.tick,tickCount:Yl.tickCount,ticks:void 0,type:"category",unit:void 0},z2=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?wG:xG,L2=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?SG:bG,Lx=t=>t.polarOptions,I2=Te([Hh,Zh,Ys],m7),qL=Te([Lx,I2],(t,e)=>{if(t!=null)return Uf(t.innerRadius,e,0)}),HL=Te([Lx,I2],(t,e)=>{if(t!=null)return Uf(t.outerRadius,e,e*.8)}),TG=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},ZL=Te([Lx],TG);Te([z2,ZL],zx);var GL=Te([I2,qL,HL],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Te([L2,GL],zx);var WL=Te([Mr,Lx,qL,HL,Hh,Zh],(t,e,n,i,r,l)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||i==null)){var{cx:f,cy:a,startAngle:g,endAngle:_}=e;return{cx:Uf(f,r,r/2),cy:Uf(a,l,l/2),innerRadius:n,outerRadius:i,startAngle:g,endAngle:_,clockWise:!1}}}),fs=(t,e)=>e,Ix=(t,e,n)=>n;function R2(t){return t?.id}function YL(t,e,n){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:l}=n,f=new Map;return t.forEach(a=>{var g,_=(g=a.data)!==null&&g!==void 0?g:i;if(!(_==null||_.length===0)){var x=R2(a);_.forEach((M,O)=>{var z=l==null||r?O:String(tl(M,l,null)),F=tl(M,a.dataKey,0),V;f.has(z)?V=f.get(z):V={},Object.assign(V,{[x]:F}),f.set(z,V)})}}),Array.from(f.values())}function B2(t){return t.stackId!=null&&t.dataKey!=null}var Rx=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Bx(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function AG(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var ds=t=>{var e=Mr(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},qm=t=>t.tooltip.settings.axisId;function AP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function N0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AP(Object(n),!0).forEach(function(i){MG(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function MG(t,e,n){return(e=EG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EG(t){var e=CG(t,"string");return typeof e=="symbol"?e:e+""}function CG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aS=[0,"auto"],Hl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},XL=(t,e)=>t.cartesianAxis.xAxis[e],Wh=(t,e)=>{var n=XL(t,e);return n??Hl},Zl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:aS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Wy},KL=(t,e)=>t.cartesianAxis.yAxis[e],Yh=(t,e)=>{var n=KL(t,e);return n??Zl},PG={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},N2=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??PG},el=(t,e,n)=>{switch(e){case"xAxis":return Wh(t,n);case"yAxis":return Yh(t,n);case"zAxis":return N2(t,n);case"angleAxis":return z2(t,n);case"radiusAxis":return L2(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},kG=(t,e,n)=>{switch(e){case"xAxis":return Wh(t,n);case"yAxis":return Yh(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Jy=(t,e,n)=>{switch(e){case"xAxis":return Wh(t,n);case"yAxis":return Yh(t,n);case"angleAxis":return z2(t,n);case"radiusAxis":return L2(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},QL=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function JL(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var tI=t=>t.graphicalItems.cartesianItems,OG=Te([fs,Ix],JL),eI=(t,e,n)=>t.filter(n).filter(i=>e?.includeHidden===!0?!0:!i.hide),t_=Te([tI,el,OG],eI,{memoizeOptions:{resultEqualityCheck:Bx}}),nI=Te([t_],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(B2)),iI=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),DG=Te([t_],iI),rI=t=>t.map(e=>e.data).filter(Boolean).flat(1),zG=Te([t_],rI,{memoizeOptions:{resultEqualityCheck:Bx}}),aI=(t,e)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=e;return t.length>0?t:n.slice(i,r+1)},j2=Te([zG,E2],aI),sI=(t,e,n)=>e?.dataKey!=null?t.map(i=>({value:tl(i,e.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>t.map(r=>({value:tl(r,i)}))):t.map(i=>({value:i})),Nx=Te([j2,el,t_],sI);function oI(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Jv(t){if(Hc(t)||t instanceof Date){var e=Number(t);if(_a(e))return e}}function MP(t){if(Array.isArray(t)){var e=[Jv(t[0]),Jv(t[1])];return np(e)?e:void 0}var n=Jv(t);if(n!=null)return[n,n]}function Uh(t){return t.map(Jv).filter(dV)}function LG(t,e,n){return!n||typeof e!="number"||mc(e)?[]:n.length?Uh(n.flatMap(i=>{var r=tl(t,i.dataKey),l,f;if(Array.isArray(r)?[l,f]=r:l=f=r,!(!_a(l)||!_a(f)))return[e-l,e+f]})):[]}var ps=t=>{var e=ds(t),n=qm(t);return Jy(t,e,n)},lI=Te([ps],t=>t?.dataKey),IG=Te([nI,E2,ps],YL),uI=(t,e,n)=>{var i={},r=e.reduce((l,f)=>(f.stackId==null||(l[f.stackId]==null&&(l[f.stackId]=[]),l[f.stackId].push(f)),l),i);return Object.fromEntries(Object.entries(r).map(l=>{var[f,a]=l,g=a.map(R2);return[f,{stackedData:_q(t,g,n),graphicalItems:a}]}))},sS=Te([IG,nI,Dx],uI),cI=(t,e,n,i)=>{var{dataStartIndex:r,dataEndIndex:l}=e;if(i==null&&n!=="zAxis"){var f=wq(t,r,l);if(!(f!=null&&f[0]===0&&f[1]===0))return f}},RG=Te([el],t=>t.allowDataOverflow),F2=t=>{var e;if(t==null||!("domain"in t))return aS;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=Uh(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:aS},hI=Te([el],F2),fI=Te([hI,RG],CL),BG=Te([sS,Zf,fs,fI],cI,{memoizeOptions:{resultEqualityCheck:Rx}}),U2=t=>t.errorBars,NG=(t,e,n)=>t.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>oI(n,i)),j0=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.filter(Boolean);if(r.length!==0){var l=r.flat(),f=Math.min(...l),a=Math.max(...l);return[f,a]}},dI=(t,e,n,i,r)=>{var l,f;if(n.length>0&&t.forEach(a=>{n.forEach(g=>{var _,x,M=(_=i[g.id])===null||_===void 0?void 0:_.filter(Q=>oI(r,Q)),O=tl(a,(x=e.dataKey)!==null&&x!==void 0?x:g.dataKey),z=LG(a,O,M);if(z.length>=2){var F=Math.min(...z),V=Math.max(...z);(l==null||F<l)&&(l=F),(f==null||V>f)&&(f=V)}var H=MP(O);H!=null&&(l=l==null?H[0]:Math.min(l,H[0]),f=f==null?H[1]:Math.max(f,H[1]))})}),e?.dataKey!=null&&t.forEach(a=>{var g=MP(tl(a,e.dataKey));g!=null&&(l=l==null?g[0]:Math.min(l,g[0]),f=f==null?g[1]:Math.max(f,g[1]))}),_a(l)&&_a(f))return[l,f]},jG=Te([j2,el,DG,U2,fs],dI,{memoizeOptions:{resultEqualityCheck:Rx}});function FG(t){var{value:e}=t;if(Hc(e)||e instanceof Date)return e}var UG=(t,e,n)=>{var i=t.map(FG).filter(r=>r!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&RD(i))?Gz(0,t.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},pI=t=>t.referenceElements.dots,Hm=(t,e,n)=>t.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===n:i.yAxisId===n),VG=Te([pI,fs,Ix],Hm),mI=t=>t.referenceElements.areas,$G=Te([mI,fs,Ix],Hm),gI=t=>t.referenceElements.lines,qG=Te([gI,fs,Ix],Hm),yI=(t,e)=>{var n=Uh(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},HG=Te(VG,fs,yI),_I=(t,e)=>{var n=Uh(t.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},ZG=Te([$G,fs],_I);function GG(t){var e;if(t.x!=null)return Uh([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.x);return n==null||n.length===0?[]:Uh(n)}function WG(t){var e;if(t.y!=null)return Uh([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.y);return n==null||n.length===0?[]:Uh(n)}var vI=(t,e)=>{var n=t.flatMap(i=>e==="xAxis"?GG(i):WG(i));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},YG=Te([qG,fs],vI),XG=Te(HG,YG,ZG,(t,e,n)=>j0(t,n,e)),xI=(t,e,n,i,r,l,f,a)=>{if(n!=null)return n;var g=f==="vertical"&&a==="xAxis"||f==="horizontal"&&a==="yAxis",_=g?j0(i,l,r):j0(l,r);return sG(e,_,t.allowDataOverflow)},KG=Te([el,hI,fI,BG,jG,XG,Mr,fs],xI,{memoizeOptions:{resultEqualityCheck:Rx}}),QG=[0,1],bI=(t,e,n,i,r,l,f)=>{if(!((t==null||n==null||n.length===0)&&f===void 0)){var{dataKey:a,type:g}=t,_=qh(e,l);if(_&&a==null){var x;return Gz(0,(x=n?.length)!==null&&x!==void 0?x:0)}return g==="category"?UG(i,t,_):r==="expand"?QG:f}},V2=Te([el,Mr,j2,Nx,Dx,fs,KG],bI),wI=(t,e,n,i,r)=>{if(t!=null){var{scale:l,type:f}=t;if(l==="auto")return e==="radial"&&r==="radiusAxis"?"band":e==="radial"&&r==="angleAxis"?"linear":f==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":f==="category"?"band":"linear";if(typeof l=="string"){var a="scale".concat(WS(l));return a in hy?a:"point"}}},e_=Te([el,Mr,QL,k2,fs],wI);function JG(t){if(t!=null){if(t in hy)return hy[t]();var e="scale".concat(WS(t));if(e in hy)return hy[e]()}}function $2(t,e,n,i){if(!(n==null||i==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(i);var r=JG(e);if(r!=null){var l=r.domain(n).range(i);return pq(l),l}}}var SI=(t,e,n)=>{var i=F2(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&np(t))return gG(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&np(t))return yG(t,e.tickCount,e.allowDecimals)}},q2=Te([V2,Jy,e_],SI),TI=(t,e,n,i)=>{if(i!=="angleAxis"&&t?.type==="number"&&np(e)&&Array.isArray(n)&&n.length>0){var r=e[0],l=n[0],f=e[1],a=n[n.length-1];return[Math.min(r,l),Math.max(f,a)]}return e},tW=Te([el,V2,q2,fs],TI),eW=Te(Nx,el,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,i=Array.from(Uh(t.map(a=>a.value))).sort((a,g)=>a-g);if(i.length<2)return 1/0;var r=i[i.length-1]-i[0];if(r===0)return 1/0;for(var l=0;l<i.length-1;l++){var f=i[l+1]-i[l];n=Math.min(n,f)}return n/r}}),AI=Te(eW,Mr,_G,Ys,(t,e,n,i)=>i,(t,e,n,i,r)=>{if(!_a(t))return 0;var l=e==="vertical"?i.height:i.width;if(r==="gap")return t*l/2;if(r==="no-gap"){var f=Uf(n,t*l),a=t*l/2;return a-f-(a-f)/l*f}return 0}),nW=(t,e)=>{var n=Wh(t,e);return n==null||typeof n.padding!="string"?0:AI(t,"xAxis",e,n.padding)},iW=(t,e)=>{var n=Yh(t,e);return n==null||typeof n.padding!="string"?0:AI(t,"yAxis",e,n.padding)},rW=Te(Wh,nW,(t,e)=>{var n,i;if(t==null)return{left:0,right:0};var{padding:r}=t;return typeof r=="string"?{left:e,right:e}:{left:((n=r.left)!==null&&n!==void 0?n:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),aW=Te(Yh,iW,(t,e)=>{var n,i;if(t==null)return{top:0,bottom:0};var{padding:r}=t;return typeof r=="string"?{top:e,bottom:e}:{top:((n=r.top)!==null&&n!==void 0?n:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),sW=Te([Ys,rW,bx,xx,(t,e,n)=>n],(t,e,n,i,r)=>{var{padding:l}=i;return r?[l.left,n.width-l.right]:[t.left+e.left,t.left+t.width-e.right]}),oW=Te([Ys,Mr,aW,bx,xx,(t,e,n)=>n],(t,e,n,i,r,l)=>{var{padding:f}=r;return l?[i.height-f.bottom,f.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),n_=(t,e,n,i)=>{var r;switch(e){case"xAxis":return sW(t,n,i);case"yAxis":return oW(t,n,i);case"zAxis":return(r=N2(t,n))===null||r===void 0?void 0:r.range;case"angleAxis":return ZL(t);case"radiusAxis":return GL(t,n);default:return}},MI=Te([el,n_],zx),Zm=Te([el,e_,tW,MI],$2);Te([t_,U2,fs],NG);function EI(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var jx=(t,e)=>e,Fx=(t,e,n)=>n,lW=Te(_x,jx,Fx,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(EI)),uW=Te(vx,jx,Fx,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(EI)),CI=(t,e)=>({width:t.width,height:e.height}),cW=(t,e)=>{var n=typeof e.width=="number"?e.width:Wy;return{width:n,height:t.height}},hW=Te(Ys,Wh,CI),fW=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},dW=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},pW=Te(Zh,Ys,lW,jx,Fx,(t,e,n,i,r)=>{var l={},f;return n.forEach(a=>{var g=CI(e,a);f==null&&(f=fW(e,i,t));var _=i==="top"&&!r||i==="bottom"&&r;l[a.id]=f-Number(_)*g.height,f+=(_?-1:1)*g.height}),l}),mW=Te(Hh,Ys,uW,jx,Fx,(t,e,n,i,r)=>{var l={},f;return n.forEach(a=>{var g=cW(e,a);f==null&&(f=dW(e,i,t));var _=i==="left"&&!r||i==="right"&&r;l[a.id]=f-Number(_)*g.width,f+=(_?-1:1)*g.width}),l}),gW=(t,e)=>{var n=Wh(t,e);if(n!=null)return pW(t,n.orientation,n.mirror)},yW=Te([Ys,Wh,gW,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:t.left,y:0}:{x:t.left,y:r}}}),_W=(t,e)=>{var n=Yh(t,e);if(n!=null)return mW(t,n.orientation,n.mirror)},vW=Te([Ys,Yh,_W,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:0,y:t.top}:{x:r,y:t.top}}}),xW=Te(Ys,Yh,(t,e)=>{var n=typeof e.width=="number"?e.width:Wy;return{width:n,height:t.height}}),PI=(t,e,n,i)=>{if(n!=null){var{allowDuplicatedCategory:r,type:l,dataKey:f}=n,a=qh(t,i),g=e.map(_=>_.value);if(f&&a&&l==="category"&&r&&RD(g))return g}},H2=Te([Mr,Nx,el,fs],PI),kI=(t,e,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:l}=n,f=qh(t,i);if(f&&(r==="number"||l!=="auto"))return e.map(a=>a.value)}},Z2=Te([Mr,Nx,Jy,fs],kI),EP=Te([Mr,kG,e_,Zm,H2,Z2,n_,q2,fs],(t,e,n,i,r,l,f,a,g)=>{if(e!=null){var _=qh(t,g);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:g,categoricalDomain:l,duplicateDomain:r,isCategorical:_,niceTicks:a,range:f,realScaleType:n,scale:i}}}),bW=(t,e,n,i,r,l,f,a,g)=>{if(!(e==null||i==null)){var _=qh(t,g),{type:x,ticks:M,tickCount:O}=e,z=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,F=x==="category"&&i.bandwidth?i.bandwidth()/z:0;F=g==="angleAxis"&&l!=null&&l.length>=2?Mu(l[0]-l[1])*2*F:F;var V=M||r;if(V){var H=V.map((Q,X)=>{var Y=f?f.indexOf(Q):Q;return{index:X,coordinate:i(Y)+F,value:Q,offset:F}});return H.filter(Q=>_a(Q.coordinate))}return _&&a?a.map((Q,X)=>({coordinate:i(Q)+F,value:Q,index:X,offset:F})).filter(Q=>_a(Q.coordinate)):i.ticks?i.ticks(O).map(Q=>({coordinate:i(Q)+F,value:Q,offset:F})):i.domain().map((Q,X)=>({coordinate:i(Q)+F,value:f?f[Q]:Q,index:X,offset:F}))}},OI=Te([Mr,Jy,e_,Zm,q2,n_,H2,Z2,fs],bW),wW=(t,e,n,i,r,l,f)=>{if(!(e==null||n==null||i==null||i[0]===i[1])){var a=qh(t,f),{tickCount:g}=e,_=0;return _=f==="angleAxis"&&i?.length>=2?Mu(i[0]-i[1])*2*_:_,a&&l?l.map((x,M)=>({coordinate:n(x)+_,value:x,index:M,offset:_})):n.ticks?n.ticks(g).map(x=>({coordinate:n(x)+_,value:x,offset:_})):n.domain().map((x,M)=>({coordinate:n(x)+_,value:r?r[x]:x,index:M,offset:_}))}},DI=Te([Mr,Jy,Zm,n_,H2,Z2,fs],wW),zI=Te(el,Zm,(t,e)=>{if(!(t==null||e==null))return N0(N0({},t),{},{scale:e})}),SW=Te([el,e_,V2,MI],$2);Te((t,e,n)=>N2(t,n),SW,(t,e)=>{if(!(t==null||e==null))return N0(N0({},t),{},{scale:e})});var TW=Te([Mr,_x,vx],(t,e,n)=>{switch(t){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),LI=t=>t.options.defaultTooltipEventType,II=t=>t.options.validateTooltipEventTypes;function RI(t,e,n){if(t==null)return e;var i=t?"axis":"item";return n==null?e:n.includes(i)?i:e}function G2(t,e){var n=LI(t),i=II(t);return RI(e,n,i)}function AW(t){return Cn(e=>G2(e,t))}var BI=(t,e)=>{var n,i=Number(e);if(!(mc(i)||e==null))return i>=0?t==null||(n=t[i])===null||n===void 0?void 0:n.value:void 0},MW=t=>t.tooltip.settings,Of={active:!1,index:null,dataKey:void 0,coordinate:void 0},EW={itemInteraction:{click:Of,hover:Of},axisInteraction:{click:Of,hover:Of},keyboardInteraction:Of,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},NI=wl({name:"tooltip",initialState:EW,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:us()},removeTooltipEntrySettings:{reducer(t,e){var n=zh(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:us()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:CW,removeTooltipEntrySettings:PW,setTooltipSettingsState:kW,setActiveMouseOverItemIndex:OW,mouseLeaveItem:jet,mouseLeaveChart:jI,setActiveClickItemIndex:Fet,setMouseOverAxisIndex:FI,setMouseClickAxisIndex:DW,setSyncInteraction:oS,setKeyboardInteraction:lS}=NI.actions,zW=NI.reducer;function CP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Vv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(n),!0).forEach(function(i){LW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function LW(t,e,n){return(e=IW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IW(t){var e=RW(t,"string");return typeof e=="symbol"?e:e+""}function RW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BW(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function NW(t){return t.index!=null}var UI=(t,e,n,i)=>{if(e==null)return Of;var r=BW(t,e,n);if(r==null)return Of;if(r.active)return r;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var l=t.settings.active===!0;if(NW(r)){if(l)return Vv(Vv({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i};return Vv(Vv({},Of),{},{coordinate:r.coordinate})},W2=(t,e)=>{var n=t?.index;if(n==null)return null;var i=Number(n);if(!_a(i))return n;var r=0,l=1/0;return e.length>0&&(l=e.length-1),String(Math.max(r,Math.min(i,l)))},VI=(t,e,n,i,r,l,f,a)=>{if(!(l==null||a==null)){var g=f[0],_=g==null?void 0:a(g.positions,l);if(_!=null)return _;var x=r?.[Number(l)];if(x)switch(n){case"horizontal":return{x:x.coordinate,y:(i.top+e)/2};default:return{x:(i.left+t)/2,y:x.coordinate}}}},$I=(t,e,n,i)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var r;return n==="hover"?r=t.itemInteraction.hover.dataKey:r=t.itemInteraction.click.dataKey,r==null&&i!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(l=>{var f;return((f=l.settings)===null||f===void 0?void 0:f.dataKey)===r})},i_=t=>t.options.tooltipPayloadSearcher,Gm=t=>t.tooltip;function PP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function kP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(n),!0).forEach(function(i){jW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jW(t,e,n){return(e=FW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FW(t){var e=UW(t,"string");return typeof e=="symbol"?e:e+""}function UW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VW(t,e){return t??e}var qI=(t,e,n,i,r,l,f)=>{if(!(e==null||l==null)){var{chartData:a,computedData:g,dataStartIndex:_,dataEndIndex:x}=n,M=[];return t.reduce((O,z)=>{var F,{dataDefinedOnItem:V,settings:H}=z,Q=VW(V,a),X=Array.isArray(Q)?Tz(Q,_,x):Q,Y=(F=H?.dataKey)!==null&&F!==void 0?F:i,W=H?.nameKey,J;if(i&&Array.isArray(X)&&!Array.isArray(X[0])&&f==="axis"?J=BD(X,i,r):J=l(X,e,g,W),Array.isArray(J))J.forEach(ht=>{var rt=kP(kP({},H),{},{name:ht.name,unit:ht.unit,color:void 0,fill:void 0});O.push(aC({tooltipEntrySettings:rt,dataKey:ht.dataKey,payload:ht.payload,value:tl(ht.payload,ht.dataKey),name:ht.name}))});else{var ot;O.push(aC({tooltipEntrySettings:H,dataKey:Y,payload:J,value:tl(J,Y),name:(ot=tl(J,W))!==null&&ot!==void 0?ot:H?.name}))}return O},M)}},Y2=Te([ps,Mr,QL,k2,ds],wI),$W=Te([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),qW=Te([ds,qm],JL),r_=Te([$W,ps,qW],eI,{memoizeOptions:{resultEqualityCheck:Bx}}),HW=Te([r_],t=>t.filter(B2)),ZW=Te([r_],rI,{memoizeOptions:{resultEqualityCheck:Bx}}),Wm=Te([ZW,Zf],aI),GW=Te([HW,Zf,ps],YL),X2=Te([Wm,ps,r_],sI),HI=Te([ps],F2),WW=Te([ps],t=>t.allowDataOverflow),ZI=Te([HI,WW],CL),YW=Te([r_],t=>t.filter(B2)),XW=Te([GW,YW,Dx],uI),KW=Te([XW,Zf,ds,ZI],cI),QW=Te([r_],iI),JW=Te([Wm,ps,QW,U2,ds],dI,{memoizeOptions:{resultEqualityCheck:Rx}}),tY=Te([pI,ds,qm],Hm),eY=Te([tY,ds],yI),nY=Te([mI,ds,qm],Hm),iY=Te([nY,ds],_I),rY=Te([gI,ds,qm],Hm),aY=Te([rY,ds],vI),sY=Te([eY,aY,iY],j0),oY=Te([ps,HI,ZI,KW,JW,sY,Mr,ds],xI),GI=Te([ps,Mr,Wm,X2,Dx,ds,oY],bI),lY=Te([GI,ps,Y2],SI),uY=Te([ps,GI,lY,ds],TI),WI=t=>{var e=ds(t),n=qm(t),i=!1;return n_(t,e,n,i)},YI=Te([ps,WI],zx),XI=Te([ps,Y2,uY,YI],$2),cY=Te([Mr,X2,ps,ds],PI),hY=Te([Mr,X2,ps,ds],kI),fY=(t,e,n,i,r,l,f,a)=>{if(e){var{type:g}=e,_=qh(t,a);if(i){var x=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,M=g==="category"&&i.bandwidth?i.bandwidth()/x:0;return M=a==="angleAxis"&&r!=null&&r?.length>=2?Mu(r[0]-r[1])*2*M:M,_&&f?f.map((O,z)=>({coordinate:i(O)+M,value:O,index:z,offset:M})):i.domain().map((O,z)=>({coordinate:i(O)+M,value:l?l[O]:O,index:z,offset:M}))}}},Xh=Te([Mr,ps,Y2,XI,WI,cY,hY,ds],fY),K2=Te([LI,II,MW],(t,e,n)=>RI(n.shared,t,e)),KI=t=>t.tooltip.settings.trigger,Q2=t=>t.tooltip.settings.defaultIndex,Ux=Te([Gm,K2,KI,Q2],UI),Iy=Te([Ux,Wm],W2),QI=Te([Xh,Iy],BI),dY=Te([Ux],t=>{if(t)return t.dataKey}),JI=Te([Gm,K2,KI,Q2],$I),pY=Te([Hh,Zh,Mr,Ys,Xh,Q2,JI,i_],VI),mY=Te([Ux,pY],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),gY=Te([Ux],t=>t.active),yY=Te([JI,Iy,Zf,lI,QI,i_,K2],qI),_Y=Te([yY],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function OP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function DP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OP(Object(n),!0).forEach(function(i){vY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vY(t,e,n){return(e=xY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xY(t){var e=bY(t,"string");return typeof e=="symbol"?e:e+""}function bY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wY=()=>Cn(ps),SY=()=>{var t=wY(),e=Cn(Xh),n=Cn(XI);return b0(!t||!n?void 0:DP(DP({},t),{},{scale:n}),e)};function zP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function mm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zP(Object(n),!0).forEach(function(i){TY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function TY(t,e,n){return(e=AY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AY(t){var e=MY(t,"string");return typeof e=="symbol"?e:e+""}function MY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EY=(t,e,n,i)=>{var r=e.find(l=>l&&l.index===n);if(r){if(t==="horizontal")return{x:r.coordinate,y:i.chartY};if(t==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},CY=(t,e,n,i)=>{var r=e.find(_=>_&&_.index===n);if(r){if(t==="centric"){var l=r.coordinate,{radius:f}=i;return mm(mm(mm({},i),Gs(i.cx,i.cy,f,l)),{},{angle:l,radius:f})}var a=r.coordinate,{angle:g}=i;return mm(mm(mm({},i),Gs(i.cx,i.cy,a,g)),{},{angle:g,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function PY(t,e){var{chartX:n,chartY:i}=t;return n>=e.left&&n<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var tR=(t,e,n,i,r)=>{var l,f=-1,a=(l=e?.length)!==null&&l!==void 0?l:0;if(a<=1||t==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var g=0;g<a;g++){var _=g>0?n[g-1].coordinate:n[a-1].coordinate,x=n[g].coordinate,M=g>=a-1?n[0].coordinate:n[g+1].coordinate,O=void 0;if(Mu(x-_)!==Mu(M-x)){var z=[];if(Mu(M-x)===Mu(r[1]-r[0])){O=M;var F=x+r[1]-r[0];z[0]=Math.min(F,(F+_)/2),z[1]=Math.max(F,(F+_)/2)}else{O=_;var V=M+r[1]-r[0];z[0]=Math.min(x,(V+x)/2),z[1]=Math.max(x,(V+x)/2)}var H=[Math.min(x,(O+x)/2),Math.max(x,(O+x)/2)];if(t>H[0]&&t<=H[1]||t>=z[0]&&t<=z[1]){({index:f}=n[g]);break}}else{var Q=Math.min(_,M),X=Math.max(_,M);if(t>(Q+x)/2&&t<=(X+x)/2){({index:f}=n[g]);break}}}else if(e){for(var Y=0;Y<a;Y++)if(Y===0&&t<=(e[Y].coordinate+e[Y+1].coordinate)/2||Y>0&&Y<a-1&&t>(e[Y].coordinate+e[Y-1].coordinate)/2&&t<=(e[Y].coordinate+e[Y+1].coordinate)/2||Y===a-1&&t>(e[Y].coordinate+e[Y-1].coordinate)/2){({index:f}=e[Y]);break}}return f},eR=()=>Cn(k2),J2=(t,e)=>e,nR=(t,e,n)=>n,tT=(t,e,n,i)=>i,kY=Te(Xh,t=>fx(t,e=>e.coordinate)),eT=Te([Gm,J2,nR,tT],UI),iR=Te([eT,Wm],W2),OY=(t,e,n)=>{if(e!=null){var i=Gm(t);return e==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},rR=Te([Gm,J2,nR,tT],$I),F0=Te([Hh,Zh,Mr,Ys,Xh,tT,rR,i_],VI),DY=Te([eT,F0],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),aR=Te([Xh,iR],BI),zY=Te([rR,iR,Zf,lI,aR,i_,J2],qI),LY=Te([eT],t=>({isActive:t.active,activeIndex:t.index})),IY=(t,e,n,i,r,l,f)=>{if(!(!t||!n||!i||!r)&&PY(t,f)){var a=Sq(t,e),g=tR(a,l,r,n,i),_=EY(e,r,g,t);return{activeIndex:String(g),activeCoordinate:_}}},RY=(t,e,n,i,r,l,f)=>{if(!(!t||!i||!r||!l||!n)){var a=x7(t,n);if(a){var g=Tq(a,e),_=tR(g,f,l,i,r),x=CY(e,l,_,a);return{activeIndex:String(_),activeCoordinate:x}}}},BY=(t,e,n,i,r,l,f,a)=>{if(!(!t||!e||!i||!r||!l))return e==="horizontal"||e==="vertical"?IY(t,e,i,r,l,f,a):RY(t,e,n,i,r,l,f)},NY=Te(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var i=t[e];if(i!=null)return n?i.panoramaElementId:i.elementId}}),jY=Te(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(i=>parseInt(i,10)).concat(Object.values(Jo)),n=Array.from(new Set(e));return n.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:AG}});function LP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function IP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LP(Object(n),!0).forEach(function(i){FY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function FY(t,e,n){return(e=UY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UY(t){var e=VY(t,"string");return typeof e=="symbol"?e:e+""}function VY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $Y={},qY={zIndexMap:Object.values(Jo).reduce((t,e)=>IP(IP({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),$Y)},HY=new Set(Object.values(Jo));function ZY(t){return HY.has(t)}var sR=wl({name:"zIndex",initialState:qY,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:us()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!ZY(n)&&delete t.zIndexMap[n])},prepare:us()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n,elementId:i,isPanorama:r}=e.payload;t.zIndexMap[n]?r?t.zIndexMap[n].panoramaElementId=i:t.zIndexMap[n].elementId=i:t.zIndexMap[n]={consumers:0,elementId:r?void 0:i,panoramaElementId:r?i:void 0}},prepare:us()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElementId=void 0:t.zIndexMap[n].elementId=void 0)},prepare:us()}}}),{registerZIndexPortal:GY,unregisterZIndexPortal:WY,registerZIndexPortalId:YY,unregisterZIndexPortalId:XY}=sR.actions,KY=sR.reducer;function Kh(t){var{zIndex:e,children:n}=t,i=n9(),r=i&&e!==void 0&&e!==0,l=Sl(),f=Ms();Z.useLayoutEffect(()=>r?(f(GY({zIndex:e})),()=>{f(WY({zIndex:e}))}):jm,[f,e,r]);var a=Cn(_=>NY(_,e,l));if(!r)return n;if(!a)return null;var g=document.getElementById(a);return g?Fy.createPortal(n,g):null}function uS(){return uS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},uS.apply(null,arguments)}function RP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function $v(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RP(Object(n),!0).forEach(function(i){QY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function QY(t,e,n){return(e=JY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JY(t){var e=tX(t,"string");return typeof e=="symbol"?e:e+""}function tX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eX(t){var{cursor:e,cursorComp:n,cursorProps:i}=t;return Z.isValidElement(e)?Z.cloneElement(e,i):Z.createElement(n,i)}function nX(t){var e,{coordinate:n,payload:i,index:r,offset:l,tooltipAxisBandSize:f,layout:a,cursor:g,tooltipEventType:_,chartName:x}=t,M=n,O=i,z=r;if(!g||!M||x!=="ScatterChart"&&_!=="axis")return null;var F,V,H;if(x==="ScatterChart")F=M,V=z9,H=Jo.cursorLine;else if(x==="BarChart")F=L9(a,M,l,f),V=c7,H=Jo.cursorRectangle;else if(a==="radial"&&ND(M)){var{cx:Q,cy:X,radius:Y,startAngle:W,endAngle:J}=Hz(M);F={cx:Q,cy:X,startAngle:W,endAngle:J,innerRadius:Y,outerRadius:Y},V=T7,H=Jo.cursorLine}else F={points:A7(a,M,l)},V=Qv,H=Jo.cursorLine;var ot=typeof g=="object"&&"className"in g?g.className:void 0,ht=$v($v($v($v({stroke:"#ccc",pointerEvents:"none"},l),F),lx(g)),{},{payload:O,payloadIndex:z,className:Fr("recharts-tooltip-cursor",ot)});return Z.createElement(Kh,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:H},Z.createElement(eX,{cursor:g,cursorComp:V,cursorProps:ht}))}function iX(t){var e=SY(),n=Iz(),i=Sx(),r=eR();return e==null||n==null||i==null||r==null?null:Z.createElement(nX,uS({},t,{offset:n,layout:i,tooltipAxisBandSize:e,chartName:r}))}var oR=Z.createContext(null),rX=()=>Z.useContext(oR),tw={exports:{}},BP;function aX(){return BP||(BP=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(g,_,x){this.fn=g,this.context=_,this.once=x||!1}function l(g,_,x,M,O){if(typeof x!="function")throw new TypeError("The listener must be a function");var z=new r(x,M||g,O),F=n?n+_:_;return g._events[F]?g._events[F].fn?g._events[F]=[g._events[F],z]:g._events[F].push(z):(g._events[F]=z,g._eventsCount++),g}function f(g,_){--g._eventsCount===0?g._events=new i:delete g._events[_]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var _=[],x,M;if(this._eventsCount===0)return _;for(M in x=this._events)e.call(x,M)&&_.push(n?M.slice(1):M);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(x)):_},a.prototype.listeners=function(_){var x=n?n+_:_,M=this._events[x];if(!M)return[];if(M.fn)return[M.fn];for(var O=0,z=M.length,F=new Array(z);O<z;O++)F[O]=M[O].fn;return F},a.prototype.listenerCount=function(_){var x=n?n+_:_,M=this._events[x];return M?M.fn?1:M.length:0},a.prototype.emit=function(_,x,M,O,z,F){var V=n?n+_:_;if(!this._events[V])return!1;var H=this._events[V],Q=arguments.length,X,Y;if(H.fn){switch(H.once&&this.removeListener(_,H.fn,void 0,!0),Q){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,x),!0;case 3:return H.fn.call(H.context,x,M),!0;case 4:return H.fn.call(H.context,x,M,O),!0;case 5:return H.fn.call(H.context,x,M,O,z),!0;case 6:return H.fn.call(H.context,x,M,O,z,F),!0}for(Y=1,X=new Array(Q-1);Y<Q;Y++)X[Y-1]=arguments[Y];H.fn.apply(H.context,X)}else{var W=H.length,J;for(Y=0;Y<W;Y++)switch(H[Y].once&&this.removeListener(_,H[Y].fn,void 0,!0),Q){case 1:H[Y].fn.call(H[Y].context);break;case 2:H[Y].fn.call(H[Y].context,x);break;case 3:H[Y].fn.call(H[Y].context,x,M);break;case 4:H[Y].fn.call(H[Y].context,x,M,O);break;default:if(!X)for(J=1,X=new Array(Q-1);J<Q;J++)X[J-1]=arguments[J];H[Y].fn.apply(H[Y].context,X)}}return!0},a.prototype.on=function(_,x,M){return l(this,_,x,M,!1)},a.prototype.once=function(_,x,M){return l(this,_,x,M,!0)},a.prototype.removeListener=function(_,x,M,O){var z=n?n+_:_;if(!this._events[z])return this;if(!x)return f(this,z),this;var F=this._events[z];if(F.fn)F.fn===x&&(!O||F.once)&&(!M||F.context===M)&&f(this,z);else{for(var V=0,H=[],Q=F.length;V<Q;V++)(F[V].fn!==x||O&&!F[V].once||M&&F[V].context!==M)&&H.push(F[V]);H.length?this._events[z]=H.length===1?H[0]:H:f(this,z)}return this},a.prototype.removeAllListeners=function(_){var x;return _?(x=n?n+_:_,this._events[x]&&f(this,x)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(tw)),tw.exports}var sX=aX();const oX=Ou(sX);var Ry=new oX,cS="recharts.syncEvent.tooltip",NP="recharts.syncEvent.brush";function lX(t,e){if(e){var n=Number.parseInt(e,10);if(!mc(n))return t?.[n]}}var uX={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},lR=wl({name:"options",initialState:uX,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),cX=lR.reducer,{createEventEmitter:hX}=lR.actions;function fX(t){return t.tooltip.syncInteraction}var dX={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},uR=wl({name:"chartData",initialState:dX,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:i}=e.payload;n!=null&&(t.dataStartIndex=n),i!=null&&(t.dataEndIndex=i)}}}),{setChartData:jP,setDataStartEndIndexes:pX,setComputedData:Uet}=uR.actions,mX=uR.reducer,gX=["x","y"];function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function gm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(i){yX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yX(t,e,n){return(e=_X(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _X(t){var e=vX(t,"string");return typeof e=="symbol"?e:e+""}function vX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xX(t,e){if(t==null)return{};var n,i,r=bX(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bX(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function wX(){var t=Cn(O2),e=Cn(D2),n=Ms(),i=Cn($L),r=Cn(Xh),l=Sx(),f=wx(),a=Cn(g=>g.rootProps.className);Z.useEffect(()=>{if(t==null)return jm;var g=(_,x,M)=>{if(e!==M&&t===_){if(i==="index"){var O;if(f&&x!==null&&x!==void 0&&(O=x.payload)!==null&&O!==void 0&&O.coordinate&&x.payload.sourceViewBox){var z=x.payload.coordinate,{x:F,y:V}=z,H=xX(z,gX),{x:Q,y:X,width:Y,height:W}=x.payload.sourceViewBox,J=gm(gm({},H),{},{x:f.x+(Y?(F-Q)/Y:0)*f.width,y:f.y+(W?(V-X)/W:0)*f.height});n(gm(gm({},x),{},{payload:gm(gm({},x.payload),{},{coordinate:J})}))}else n(x);return}if(r!=null){var ot;if(typeof i=="function"){var ht={activeTooltipIndex:x.payload.index==null?void 0:Number(x.payload.index),isTooltipActive:x.payload.active,activeIndex:x.payload.index==null?void 0:Number(x.payload.index),activeLabel:x.payload.label,activeDataKey:x.payload.dataKey,activeCoordinate:x.payload.coordinate},rt=i(r,ht);ot=r[rt]}else i==="value"&&(ot=r.find(kt=>String(kt.value)===x.payload.label));var{coordinate:ut}=x.payload;if(ot==null||x.payload.active===!1||ut==null||f==null){n(oS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:_t,y:bt}=ut,Pt=Math.min(_t,f.x+f.width),re=Math.min(bt,f.y+f.height),ye={x:l==="horizontal"?ot.coordinate:Pt,y:l==="horizontal"?re:ot.coordinate},fe=oS({active:x.payload.active,coordinate:ye,dataKey:x.payload.dataKey,index:String(ot.index),label:x.payload.label,sourceViewBox:x.payload.sourceViewBox});n(fe)}}};return Ry.on(cS,g),()=>{Ry.off(cS,g)}},[a,n,e,t,i,r,l,f])}function SX(){var t=Cn(O2),e=Cn(D2),n=Ms();Z.useEffect(()=>{if(t==null)return jm;var i=(r,l,f)=>{e!==f&&t===r&&n(pX(l))};return Ry.on(NP,i),()=>{Ry.off(NP,i)}},[n,e,t])}function TX(){var t=Ms();Z.useEffect(()=>{t(hX())},[t]),wX(),SX()}function AX(t,e,n,i,r,l){var f=Cn(z=>OY(z,t,e)),a=Cn(D2),g=Cn(O2),_=Cn($L),x=Cn(fX),M=x?.active,O=wx();Z.useEffect(()=>{if(!M&&g!=null&&a!=null){var z=oS({active:l,coordinate:n,dataKey:f,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:O});Ry.emit(cS,g,z,a)}},[M,n,f,r,i,a,g,_,l,O])}function UP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function VP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UP(Object(n),!0).forEach(function(i){MX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function MX(t,e,n){return(e=EX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EX(t){var e=CX(t,"string");return typeof e=="symbol"?e:e+""}function CX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PX(t){return t.dataKey}function kX(t,e){return Z.isValidElement(t)?Z.cloneElement(t,e):typeof t=="function"?Z.createElement(t,e):Z.createElement(h9,e)}var $P=[],OX={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Fm.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function cR(t){var e,n,i=tu(t,OX),{active:r,allowEscapeViewBox:l,animationDuration:f,animationEasing:a,content:g,filterNull:_,isAnimationActive:x,offset:M,payloadUniqBy:O,position:z,reverseDirection:F,useTranslate3d:V,wrapperStyle:H,cursor:Q,shared:X,trigger:Y,defaultIndex:W,portal:J,axisId:ot}=i,ht=Ms(),rt=typeof W=="number"?String(W):W;Z.useEffect(()=>{ht(kW({shared:X,trigger:Y,axisId:ot,active:r,defaultIndex:rt}))},[ht,X,Y,ot,r,rt]);var ut=wx(),_t=jz(),bt=AW(X),{activeIndex:Pt,isActive:re}=(e=Cn(Ae=>LY(Ae,bt,Y,rt)))!==null&&e!==void 0?e:{},ye=Cn(Ae=>zY(Ae,bt,Y,rt)),fe=Cn(Ae=>aR(Ae,bt,Y,rt)),kt=Cn(Ae=>DY(Ae,bt,Y,rt)),Ot=ye,St=rX(),jt=(n=r??re)!==null&&n!==void 0?n:!1,[Vt,pt]=d$([Ot,jt]),Tt=bt==="axis"?fe:void 0;AX(bt,Y,kt,Tt,Pt,jt);var $t=J??St;if($t==null||ut==null||bt==null)return null;var Yt=Ot??$P;jt||(Yt=$P),_&&Yt.length&&(Yt=jV(Yt.filter(Ae=>Ae.value!=null&&(Ae.hide!==!0||i.includeHidden)),O,PX));var se=Yt.length>0,le=Z.createElement(_9,{allowEscapeViewBox:l,animationDuration:f,animationEasing:a,isAnimationActive:x,active:jt,coordinate:kt,hasPayload:se,offset:M,position:z,reverseDirection:F,useTranslate3d:V,viewBox:ut,wrapperStyle:H,lastBoundingBox:Vt,innerRef:pt,hasPortalFromProps:!!J},kX(g,VP(VP({},i),{},{payload:Yt,label:Tt,active:jt,activeIndex:Pt,coordinate:kt,accessibilityLayer:_t})));return Z.createElement(Z.Fragment,null,Fy.createPortal(le,$t),jt&&Z.createElement(iX,{cursor:Q,tooltipEventType:bt,coordinate:kt,payload:Yt,index:Pt}))}function DX(t,e,n){return(e=zX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zX(t){var e=LX(t,"string");return typeof e=="symbol"?e:e+""}function LX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class IX{constructor(e){DX(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function qP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function RX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qP(Object(n),!0).forEach(function(i){BX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function BX(t,e,n){return(e=NX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NX(t){var e=jX(t,"string");return typeof e=="symbol"?e:e+""}function jX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FX={cacheSize:2e3,enableCache:!0},hR=RX({},FX),HP=new IX(hR.cacheSize),UX={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ZP="recharts_measurement_span";function VX(t,e){var n=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",l=e.fontStyle||"",f=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(l,"|").concat(f,"|").concat(a)}var GP=(t,e)=>{try{var n=document.getElementById(ZP);n||(n=document.createElement("span"),n.setAttribute("id",ZP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,UX,e),n.textContent="".concat(t);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},gy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Fm.isSsr)return{width:0,height:0};if(!hR.enableCache)return GP(e,n);var i=VX(e,n),r=HP.get(i);if(r)return r;var l=GP(e,n);return HP.set(i,l),l},WP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$X=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,fR={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},HX=Object.keys(fR),xm="NaN";function ZX(t,e){return t*fR[e]}class vl{static parse(e){var n,[,i,r]=(n=qX.exec(e))!==null&&n!==void 0?n:[];return new vl(parseFloat(i),r??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,mc(e)&&(this.unit=""),n!==""&&!$X.test(n)&&(this.num=NaN,this.unit=""),HX.includes(n)&&(this.num=ZX(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new vl(NaN,""):new vl(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new vl(NaN,""):new vl(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new vl(NaN,""):new vl(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new vl(NaN,""):new vl(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return mc(this.num)}}function dR(t){if(t.includes(xm))return xm;for(var e=t;e.includes("*")||e.includes("/");){var n,[,i,r,l]=(n=WP.exec(e))!==null&&n!==void 0?n:[],f=vl.parse(i??""),a=vl.parse(l??""),g=r==="*"?f.multiply(a):f.divide(a);if(g.isNaN())return xm;e=e.replace(WP,g.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var _,[,x,M,O]=(_=YP.exec(e))!==null&&_!==void 0?_:[],z=vl.parse(x??""),F=vl.parse(O??""),V=M==="+"?z.add(F):z.subtract(F);if(V.isNaN())return xm;e=e.replace(YP,V.toString())}return e}var XP=/\(([^()]*)\)/;function GX(t){for(var e=t,n;(n=XP.exec(e))!=null;){var[,i]=n;e=e.replace(XP,dR(i))}return e}function WX(t){var e=t.replace(/\s+/g,"");return e=GX(e),e=dR(e),e}function YX(t){try{return WX(t)}catch{return xm}}function ew(t){var e=YX(t.slice(5,-1));return e===xm?"":e}var XX=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],KX=["dx","dy","angle","className","breakAll"];function hS(){return hS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hS.apply(null,arguments)}function KP(t,e){if(t==null)return{};var n,i,r=QX(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function QX(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var pR=/[ \f\n\r\t\v\u2028\u2029]+/,mR=t=>{var{children:e,breakAll:n,style:i}=t;try{var r=[];Ws(e)||(n?r=e.toString().split(""):r=e.toString().split(pR));var l=r.map(a=>({word:a,width:gy(a,i).width})),f=n?0:gy("",i).width;return{wordsWithComputedWidth:l,spaceWidth:f}}catch{return null}};function JX(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var gR=(t,e,n,i)=>t.reduce((r,l)=>{var{word:f,width:a}=l,g=r[r.length-1];if(g&&a!=null&&(e==null||i||g.width+a+n<Number(e)))g.words.push(f),g.width+=a+n;else{var _={words:[f],width:a};r.push(_)}return r},[]),yR=t=>t.reduce((e,n)=>e.width>n.width?e:n),tK="",QP=(t,e,n,i,r,l,f,a)=>{var g=t.slice(0,e),_=mR({breakAll:n,style:i,children:g+tK});if(!_)return[!1,[]];var x=gR(_.wordsWithComputedWidth,l,f,a),M=x.length>r||yR(x).width>Number(l);return[M,x]},eK=(t,e,n,i,r)=>{var{maxLines:l,children:f,style:a,breakAll:g}=t,_=xn(l),x=String(f),M=gR(e,i,n,r);if(!_||r)return M;var O=M.length>l||yR(M).width>Number(i);if(!O)return M;for(var z=0,F=x.length-1,V=0,H;z<=F&&V<=x.length-1;){var Q=Math.floor((z+F)/2),X=Q-1,[Y,W]=QP(x,X,g,a,l,i,n,r),[J]=QP(x,Q,g,a,l,i,n,r);if(!Y&&!J&&(z=Q+1),Y&&J&&(F=Q-1),!Y&&J){H=W;break}V++}return H||M},JP=t=>{var e=Ws(t)?[]:t.toString().split(pR);return[{words:e,width:void 0}]},nK=t=>{var{width:e,scaleToFit:n,children:i,style:r,breakAll:l,maxLines:f}=t;if((e||n)&&!Fm.isSsr){var a,g,_=mR({breakAll:l,children:i,style:r});if(_){var{wordsWithComputedWidth:x,spaceWidth:M}=_;a=x,g=M}else return JP(i);return eK({breakAll:l,children:i,maxLines:f,style:r},a,g,e,!!n)}return JP(i)},_R="#808080",iK={breakAll:!1,capHeight:"0.71em",fill:_R,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},nT=Z.forwardRef((t,e)=>{var n=tu(t,iK),{x:i,y:r,lineHeight:l,capHeight:f,fill:a,scaleToFit:g,textAnchor:_,verticalAnchor:x}=n,M=KP(n,XX),O=Z.useMemo(()=>nK({breakAll:M.breakAll,children:M.children,maxLines:M.maxLines,scaleToFit:g,style:M.style,width:M.width}),[M.breakAll,M.children,M.maxLines,g,M.style,M.width]),{dx:z,dy:F,angle:V,className:H,breakAll:Q}=M,X=KP(M,KX);if(!Hc(i)||!Hc(r)||O.length===0)return null;var Y=Number(i)+(xn(z)?z:0),W=Number(r)+(xn(F)?F:0);if(!_a(Y)||!_a(W))return null;var J;switch(x){case"start":J=ew("calc(".concat(f,")"));break;case"middle":J=ew("calc(".concat((O.length-1)/2," * -").concat(l," + (").concat(f," / 2))"));break;default:J=ew("calc(".concat(O.length-1," * -").concat(l,")"));break}var ot=[];if(g){var ht=O[0].width,{width:rt}=M;ot.push("scale(".concat(xn(rt)&&xn(ht)?rt/ht:1,")"))}return V&&ot.push("rotate(".concat(V,", ").concat(Y,", ").concat(W,")")),ot.length&&(X.transform=ot.join(" ")),Z.createElement("text",hS({},Cu(X),{ref:e,x:Y,y:W,className:Fr("recharts-text",H),textAnchor:_,fill:a.includes("url")?_R:a}),O.map((ut,_t)=>{var bt=ut.words.join(Q?"":" ");return Z.createElement("tspan",{x:Y,dy:_t===0?J:l,key:"".concat(bt,"-").concat(_t)},bt)}))});nT.displayName="Text";var rK=["labelRef"];function aK(t,e){if(t==null)return{};var n,i,r=sK(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sK(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function tk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Da(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tk(Object(n),!0).forEach(function(i){oK(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function oK(t,e,n){return(e=lK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lK(t){var e=uK(t,"string");return typeof e=="symbol"?e:e+""}function uK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mh(){return Mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Mh.apply(null,arguments)}var vR=Z.createContext(null),cK=t=>{var{x:e,y:n,upperWidth:i,lowerWidth:r,width:l,height:f,children:a}=t,g=Z.useMemo(()=>({x:e,y:n,upperWidth:i,lowerWidth:r,width:l,height:f}),[e,n,i,r,l,f]);return Z.createElement(vR.Provider,{value:g},a)},xR=()=>{var t=Z.useContext(vR),e=wx();return t||Lz(e)},hK=Z.createContext(null),fK=()=>{var t=Z.useContext(hK),e=Cn(WL);return t||e},dK=t=>{var{value:e,formatter:n}=t,i=Ws(t.children)?e:t.children;return typeof n=="function"?n(i):i},iT=t=>t!=null&&typeof t=="function",pK=(t,e)=>{var n=Mu(e-t),i=Math.min(Math.abs(e-t),360);return n*i},mK=(t,e,n,i,r)=>{var{offset:l,className:f}=t,{cx:a,cy:g,innerRadius:_,outerRadius:x,startAngle:M,endAngle:O,clockWise:z}=r,F=(_+x)/2,V=pK(M,O),H=V>=0?1:-1,Q,X;switch(e){case"insideStart":Q=M+H*l,X=z;break;case"insideEnd":Q=O-H*l,X=!z;break;case"end":Q=O+H*l,X=z;break;default:throw new Error("Unsupported position ".concat(e))}X=V<=0?X:!X;var Y=Gs(a,g,F,Q),W=Gs(a,g,F,Q+(X?1:-1)*359),J="M".concat(Y.x,",").concat(Y.y,`
    A`).concat(F,",").concat(F,",0,1,").concat(X?0:1,`,
    `).concat(W.x,",").concat(W.y),ot=Ws(t.id)?Ay("recharts-radial-line-"):t.id;return Z.createElement("text",Mh({},i,{dominantBaseline:"central",className:Fr("recharts-radial-bar-label",f)}),Z.createElement("defs",null,Z.createElement("path",{id:ot,d:J})),Z.createElement("textPath",{xlinkHref:"#".concat(ot)},n))},gK=(t,e,n)=>{var{cx:i,cy:r,innerRadius:l,outerRadius:f,startAngle:a,endAngle:g}=t,_=(a+g)/2;if(n==="outside"){var{x,y:M}=Gs(i,r,f+e,_);return{x,y:M,textAnchor:x>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var O=(l+f)/2,{x:z,y:F}=Gs(i,r,O,_);return{x:z,y:F,textAnchor:"middle",verticalAnchor:"middle"}},fS=t=>"cx"in t&&xn(t.cx),yK=(t,e)=>{var{parentViewBox:n,offset:i,position:r}=t,l;n!=null&&!fS(n)&&(l=n);var{x:f,y:a,upperWidth:g,lowerWidth:_,height:x}=e,M=f,O=f+(g-_)/2,z=(M+O)/2,F=(g+_)/2,V=M+g/2,H=x>=0?1:-1,Q=H*i,X=H>0?"end":"start",Y=H>0?"start":"end",W=g>=0?1:-1,J=W*i,ot=W>0?"end":"start",ht=W>0?"start":"end";if(r==="top"){var rt={x:M+g/2,y:a-Q,textAnchor:"middle",verticalAnchor:X};return Da(Da({},rt),l?{height:Math.max(a-l.y,0),width:g}:{})}if(r==="bottom"){var ut={x:O+_/2,y:a+x+Q,textAnchor:"middle",verticalAnchor:Y};return Da(Da({},ut),l?{height:Math.max(l.y+l.height-(a+x),0),width:_}:{})}if(r==="left"){var _t={x:z-J,y:a+x/2,textAnchor:ot,verticalAnchor:"middle"};return Da(Da({},_t),l?{width:Math.max(_t.x-l.x,0),height:x}:{})}if(r==="right"){var bt={x:z+F+J,y:a+x/2,textAnchor:ht,verticalAnchor:"middle"};return Da(Da({},bt),l?{width:Math.max(l.x+l.width-bt.x,0),height:x}:{})}var Pt=l?{width:F,height:x}:{};return r==="insideLeft"?Da({x:z+J,y:a+x/2,textAnchor:ht,verticalAnchor:"middle"},Pt):r==="insideRight"?Da({x:z+F-J,y:a+x/2,textAnchor:ot,verticalAnchor:"middle"},Pt):r==="insideTop"?Da({x:M+g/2,y:a+Q,textAnchor:"middle",verticalAnchor:Y},Pt):r==="insideBottom"?Da({x:O+_/2,y:a+x-Q,textAnchor:"middle",verticalAnchor:X},Pt):r==="insideTopLeft"?Da({x:M+J,y:a+Q,textAnchor:ht,verticalAnchor:Y},Pt):r==="insideTopRight"?Da({x:M+g-J,y:a+Q,textAnchor:ot,verticalAnchor:Y},Pt):r==="insideBottomLeft"?Da({x:O+J,y:a+x-Q,textAnchor:ht,verticalAnchor:X},Pt):r==="insideBottomRight"?Da({x:O+_-J,y:a+x-Q,textAnchor:ot,verticalAnchor:X},Pt):r&&typeof r=="object"&&(xn(r.x)||Rh(r.x))&&(xn(r.y)||Rh(r.y))?Da({x:f+Uf(r.x,F),y:a+Uf(r.y,x),textAnchor:"end",verticalAnchor:"end"},Pt):Da({x:V,y:a+x/2,textAnchor:"middle",verticalAnchor:"middle"},Pt)},_K={offset:5,zIndex:Jo.label};function kf(t){var e=tu(t,_K),{viewBox:n,position:i,value:r,children:l,content:f,className:a="",textBreakAll:g,labelRef:_}=e,x=fK(),M=xR(),O=i==="center"?M:x??M,z,F,V;if(n==null?z=O:fS(n)?z=n:z=Lz(n),!z||Ws(r)&&Ws(l)&&!Z.isValidElement(f)&&typeof f!="function")return null;var H=Da(Da({},e),{},{viewBox:z});if(Z.isValidElement(f)){var{labelRef:Q}=H,X=aK(H,rK);return Z.cloneElement(f,X)}if(typeof f=="function"){if(F=Z.createElement(f,H),Z.isValidElement(F))return F}else F=dK(e);var Y=Cu(e);if(fS(z)){if(i==="insideStart"||i==="insideEnd"||i==="end")return mK(e,i,F,Y,z);V=gK(z,e.offset,e.position)}else V=yK(e,z);return Z.createElement(Kh,{zIndex:e.zIndex},Z.createElement(nT,Mh({ref:_,className:Fr("recharts-label",a)},Y,V,{textAnchor:JX(Y.textAnchor)?Y.textAnchor:V.textAnchor,breakAll:g}),F))}kf.displayName="Label";var vK=(t,e,n)=>{if(!t)return null;var i={viewBox:e,labelRef:n};return t===!0?Z.createElement(kf,Mh({key:"label-implicit"},i)):Hc(t)?Z.createElement(kf,Mh({key:"label-implicit",value:t},i)):Z.isValidElement(t)?t.type===kf?Z.cloneElement(t,Da({key:"label-implicit"},i)):Z.createElement(kf,Mh({key:"label-implicit",content:t},i)):iT(t)?Z.createElement(kf,Mh({key:"label-implicit",content:t},i)):t&&typeof t=="object"?Z.createElement(kf,Mh({},t,{key:"label-implicit"},i)):null};function xK(t){var{label:e,labelRef:n}=t,i=xR();return vK(e,i,n)||null}var nw={},iw={},ek;function bK(){return ek||(ek=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(iw)),iw}var rw={},nk;function wK(){return nk||(nk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(rw)),rw}var ik;function SK(){return ik||(ik=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bK(),n=wK(),i=XS();function r(l){if(i.isArrayLike(l))return e.last(n.toArray(l))}t.last=r})(nw)),nw}var aw,rk;function TK(){return rk||(rk=1,aw=SK().last),aw}var AK=TK();const MK=Ou(AK);var EK=["valueAccessor"],CK=["dataKey","clockWise","id","textBreakAll","zIndex"];function U0(){return U0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},U0.apply(null,arguments)}function ak(t,e){if(t==null)return{};var n,i,r=PK(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function PK(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var kK=t=>Array.isArray(t.value)?MK(t.value):t.value,bR=Z.createContext(void 0),OK=bR.Provider,wR=Z.createContext(void 0);wR.Provider;function DK(){return Z.useContext(bR)}function zK(){return Z.useContext(wR)}function t0(t){var{valueAccessor:e=kK}=t,n=ak(t,EK),{dataKey:i,clockWise:r,id:l,textBreakAll:f,zIndex:a}=n,g=ak(n,CK),_=DK(),x=zK(),M=_||x;return!M||!M.length?null:Z.createElement(Kh,{zIndex:a??Jo.label},Z.createElement(qc,{className:"recharts-label-list"},M.map((O,z)=>{var F,V=Ws(i)?e(O,z):tl(O&&O.payload,i),H=Ws(l)?{}:{id:"".concat(l,"-").concat(z)};return Z.createElement(kf,U0({key:"label-".concat(z)},Cu(O),g,H,{fill:(F=n.fill)!==null&&F!==void 0?F:O.fill,parentViewBox:O.parentViewBox,value:V,textBreakAll:f,viewBox:O.viewBox,index:z,zIndex:0}))})))}t0.displayName="LabelList";function LK(t){var{label:e}=t;return e?e===!0?Z.createElement(t0,{key:"labelList-implicit"}):Z.isValidElement(e)||iT(e)?Z.createElement(t0,{key:"labelList-implicit",content:e}):typeof e=="object"?Z.createElement(t0,U0({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function dS(){return dS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dS.apply(null,arguments)}var SR=t=>{var{cx:e,cy:n,r:i,className:r}=t,l=Fr("recharts-dot",r);return xn(e)&&xn(n)&&xn(i)?Z.createElement("circle",dS({},pc(t),YS(t),{className:l,cx:e,cy:n,r:i})):null},IK={radiusAxis:{},angleAxis:{}},TR=wl({name:"polarAxis",initialState:IK,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Vet,removeRadiusAxis:$et,addAngleAxis:qet,removeAngleAxis:Het}=TR.actions,RK=TR.reducer,AR=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0;function BK(t){var{fn:e,args:n}=t,i=Ms(),r=Sl();return Z.useLayoutEffect(()=>{if(!r){var l=e(n);return i(CW(l)),()=>{i(PW(l))}}},[e,n,i,r]),null}function NK(t){var{legendPayload:e}=t,n=Ms(),i=Sl();return Z.useLayoutEffect(()=>i?jm:(n(r9(e)),()=>{n(a9(e))}),[n,i,e]),null}var sw,jK=()=>{var[t]=Z.useState(()=>Ay("uid-"));return t},FK=(sw=g3.useId)!==null&&sw!==void 0?sw:jK;function MR(t,e){var n=FK();return e||(t?"".concat(t,"-").concat(n):n)}var UK=Z.createContext(void 0),VK=t=>{var{id:e,type:n,children:i}=t,r=MR("recharts-".concat(n),e);return Z.createElement(UK.Provider,{value:r},i(r))},$K={cartesianItems:[],polarItems:[]},ER=wl({name:"graphicalItems",initialState:$K,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:us()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:i}=e.payload,r=zh(t).cartesianItems.indexOf(n);r>-1&&(t.cartesianItems[r]=i)},prepare:us()},removeCartesianGraphicalItem:{reducer(t,e){var n=zh(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:us()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:us()},removePolarGraphicalItem:{reducer(t,e){var n=zh(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:us()}}}),{addCartesianGraphicalItem:qK,replaceCartesianGraphicalItem:HK,removeCartesianGraphicalItem:ZK,addPolarGraphicalItem:Zet,removePolarGraphicalItem:Get}=ER.actions,GK=ER.reducer;function WK(t){var e=Ms(),n=Z.useRef(null);return Z.useLayoutEffect(()=>{n.current===null?e(qK(t)):n.current!==t&&e(HK({prev:n.current,next:t})),n.current=t},[e,t]),Z.useLayoutEffect(()=>()=>{n.current&&(e(ZK(n.current)),n.current=null)},[e]),null}var YK=["points"];function sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ow(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sk(Object(n),!0).forEach(function(i){XK(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function XK(t,e,n){return(e=KK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KK(t){var e=QK(t,"string");return typeof e=="symbol"?e:e+""}function QK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V0(){return V0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},V0.apply(null,arguments)}function JK(t,e){if(t==null)return{};var n,i,r=tQ(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function tQ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function eQ(t){var{option:e,dotProps:n,className:i}=t;if(Z.isValidElement(e))return Z.cloneElement(e,n);if(typeof e=="function")return e(n);var r=Fr(i,typeof e!="boolean"?e.className:""),l=n??{},{points:f}=l,a=JK(l,YK);return Z.createElement(SR,V0({},a,{className:r}))}function nQ(t,e){return t==null?!1:e?!0:t.length===1}function iQ(t){var{points:e,dot:n,className:i,dotClassName:r,dataKey:l,baseProps:f,needClip:a,clipPathId:g,zIndex:_=Jo.scatter}=t;if(!nQ(e,n))return null;var x=AR(n),M=zU(n),O=e.map((F,V)=>{var H,Q,X=ow(ow(ow({r:3},f),M),{},{index:V,cx:(H=F.x)!==null&&H!==void 0?H:void 0,cy:(Q=F.y)!==null&&Q!==void 0?Q:void 0,dataKey:l,value:F.value,payload:F.payload,points:e});return Z.createElement(eQ,{key:"dot-".concat(V),option:n,dotProps:X,className:r})}),z={};return a&&g!=null&&(z.clipPath="url(#clipPath-".concat(x?"":"dots-").concat(g,")")),Z.createElement(Kh,{zIndex:_},Z.createElement(qc,V0({className:i},z),O))}function ok(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function lk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ok(Object(n),!0).forEach(function(i){rQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ok(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function rQ(t,e,n){return(e=aQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aQ(t){var e=sQ(t,"string");return typeof e=="symbol"?e:e+""}function sQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oQ={xAxis:{},yAxis:{},zAxis:{}},CR=wl({name:"cartesianAxis",initialState:oQ,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:us()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:us()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:us()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:us()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:us()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:us()},updateYAxisWidth(t,e){var{id:n,width:i}=e.payload,r=t.yAxis[n];if(r){var l=r.widthHistory||[];if(l.length===3&&l[0]===l[2]&&i===l[1]&&i!==r.width&&Math.abs(i-l[0])<=1)return;var f=[...l,i].slice(-3);t.yAxis[n]=lk(lk({},t.yAxis[n]),{},{width:i,widthHistory:f})}}}}),{addXAxis:lQ,removeXAxis:uQ,addYAxis:cQ,removeYAxis:hQ,addZAxis:Wet,removeZAxis:Yet,updateYAxisWidth:fQ}=CR.actions,dQ=CR.reducer,pQ=Te([Ys],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),mQ=Te([pQ,Hh,Zh],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),rT=()=>Cn(mQ),gQ=()=>Cn(_Y);function uk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function lw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uk(Object(n),!0).forEach(function(i){yQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yQ(t,e,n){return(e=_Q(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Q(t){var e=vQ(t,"string");return typeof e=="symbol"?e:e+""}function vQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xQ=t=>{var{point:e,childIndex:n,mainColor:i,activeDot:r,dataKey:l}=t;if(r===!1||e.x==null||e.y==null)return null;var f={index:n,dataKey:l,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},a=lw(lw(lw({},f),lx(r)),YS(r)),g;return Z.isValidElement(r)?g=Z.cloneElement(r,a):typeof r=="function"?g=r(a):g=Z.createElement(SR,a),Z.createElement(qc,{className:"recharts-active-dot"},g)};function ck(t){var{points:e,mainColor:n,activeDot:i,itemDataKey:r,zIndex:l=Jo.activeDot}=t,f=Cn(Iy),a=gQ();if(e==null||a==null)return null;var g=e.find(_=>a.includes(_.payload));return Ws(g)?null:Z.createElement(Kh,{zIndex:l},Z.createElement(xQ,{point:g,childIndex:Number(f),mainColor:n,dataKey:r,activeDot:i}))}var bQ={},PR=wl({name:"errorBars",initialState:bQ,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]||(t[n]=[]),t[n].push(i)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:i,next:r}=e.payload;t[n]&&(t[n]=t[n].map(l=>l.dataKey===i.dataKey&&l.direction===i.direction?r:l))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]&&(t[n]=t[n].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:Xet,replaceErrorBar:Ket,removeErrorBar:Qet}=PR.actions,wQ=PR.reducer;function kR(t,e){var n,i,r=Cn(_=>Wh(_,t)),l=Cn(_=>Yh(_,e)),f=(n=r?.allowDataOverflow)!==null&&n!==void 0?n:Hl.allowDataOverflow,a=(i=l?.allowDataOverflow)!==null&&i!==void 0?i:Zl.allowDataOverflow,g=f||a;return{needClip:g,needClipX:f,needClipY:a}}function SQ(t){var{xAxisId:e,yAxisId:n,clipPathId:i}=t,r=rT(),{needClipX:l,needClipY:f,needClip:a}=kR(e,n);if(!a||!r)return null;var{x:g,y:_,width:x,height:M}=r;return Z.createElement("clipPath",{id:"clipPath-".concat(i)},Z.createElement("rect",{x:l?g:g-x/2,y:f?_:_-M/2,width:l?x:x*2,height:f?M:M*2}))}var TQ=t=>{var{chartData:e}=t,n=Ms(),i=Sl();return Z.useEffect(()=>i?()=>{}:(n(jP(e)),()=>{n(jP(void 0))}),[e,n,i]),null},hk={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},OR=wl({name:"brush",initialState:hk,reducers:{setBrushSettings(t,e){return e.payload==null?hk:e.payload}}}),{setBrushSettings:Jet}=OR.actions,AQ=OR.reducer;function MQ(t,e,n){return(e=EQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EQ(t){var e=CQ(t,"string");return typeof e=="symbol"?e:e+""}function CQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class aT{static create(e){return new aT(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(i)switch(i){case"start":return this.scale(e);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+r}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(e)+l}default:return this.scale(e)}if(n){var f=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+f}return this.scale(e)}}isInRange(e){var n=this.range(),i=n[0],r=n[n.length-1];return i<=r?e>=i&&e<=r:e>=r&&e<=i}}MQ(aT,"EPS",1e-4);function PQ(t){return(t%180+180)%180}var kQ=function(e){var{width:n,height:i}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=PQ(r),f=l*Math.PI/180,a=Math.atan(i/n),g=f>a&&f<Math.PI-a?i/Math.sin(f):n/Math.cos(f);return Math.abs(g)},OQ={dots:[],areas:[],lines:[]},DR=wl({name:"referenceElements",initialState:OQ,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=zh(t).dots.findIndex(i=>i===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=zh(t).areas.findIndex(i=>i===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=zh(t).lines.findIndex(i=>i===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:tnt,removeDot:ent,addArea:nnt,removeArea:int,addLine:rnt,removeLine:ant}=DR.actions,DQ=DR.reducer,zQ=Z.createContext(void 0),LQ=t=>{var{children:e}=t,[n]=Z.useState("".concat(Ay("recharts"),"-clip")),i=rT();if(i==null)return null;var{x:r,y:l,width:f,height:a}=i;return Z.createElement(zQ.Provider,{value:n},Z.createElement("defs",null,Z.createElement("clipPath",{id:n},Z.createElement("rect",{x:r,y:l,height:a,width:f}))),e)};function zm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var i in e)if({}.hasOwnProperty.call(e,i)&&!{}.hasOwnProperty.call(t,i))return!1;return!0}function zR(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function IQ(t,e,n){var i={width:t.width+e.width,height:t.height+e.height};return kQ(i,n)}function RQ(t,e,n){var i=n==="width",{x:r,y:l,width:f,height:a}=t;return e===1?{start:i?r:l,end:i?r+f:l+a}:{start:i?r+f:l+a,end:i?r:l}}function $0(t,e,n,i,r){if(t*e<t*i||t*e>t*r)return!1;var l=n();return t*(e-t*l/2-i)>=0&&t*(e+t*l/2-r)<=0}function BQ(t,e){return zR(t,e+1)}function NQ(t,e,n,i,r){for(var l=(i||[]).slice(),{start:f,end:a}=e,g=0,_=1,x=f,M=function(){var F=i?.[g];if(F===void 0)return{v:zR(i,_)};var V=g,H,Q=()=>(H===void 0&&(H=n(F,V)),H),X=F.coordinate,Y=g===0||$0(t,X,Q,x,a);Y||(g=0,x=f,_+=1),Y&&(x=X+t*(Q()/2+r),g+=_)},O;_<=l.length;)if(O=M(),O)return O.v;return[]}function fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ao(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fk(Object(n),!0).forEach(function(i){jQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jQ(t,e,n){return(e=FQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FQ(t){var e=UQ(t,"string");return typeof e=="symbol"?e:e+""}function UQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VQ(t,e,n,i,r){for(var l=(i||[]).slice(),f=l.length,{start:a}=e,{end:g}=e,_=function(O){var z=l[O],F,V=()=>(F===void 0&&(F=n(z,O)),F);if(O===f-1){var H=t*(z.coordinate+t*V()/2-g);l[O]=z=Ao(Ao({},z),{},{tickCoord:H>0?z.coordinate-H*t:z.coordinate})}else l[O]=z=Ao(Ao({},z),{},{tickCoord:z.coordinate});if(z.tickCoord!=null){var Q=$0(t,z.tickCoord,V,a,g);Q&&(g=z.tickCoord-t*(V()/2+r),l[O]=Ao(Ao({},z),{},{isShow:!0}))}},x=f-1;x>=0;x--)_(x);return l}function $Q(t,e,n,i,r,l){var f=(i||[]).slice(),a=f.length,{start:g,end:_}=e;if(l){var x=i[a-1],M=n(x,a-1),O=t*(x.coordinate+t*M/2-_);if(f[a-1]=x=Ao(Ao({},x),{},{tickCoord:O>0?x.coordinate-O*t:x.coordinate}),x.tickCoord!=null){var z=$0(t,x.tickCoord,()=>M,g,_);z&&(_=x.tickCoord-t*(M/2+r),f[a-1]=Ao(Ao({},x),{},{isShow:!0}))}}for(var F=l?a-1:a,V=function(X){var Y=f[X],W,J=()=>(W===void 0&&(W=n(Y,X)),W);if(X===0){var ot=t*(Y.coordinate-t*J()/2-g);f[X]=Y=Ao(Ao({},Y),{},{tickCoord:ot<0?Y.coordinate-ot*t:Y.coordinate})}else f[X]=Y=Ao(Ao({},Y),{},{tickCoord:Y.coordinate});if(Y.tickCoord!=null){var ht=$0(t,Y.tickCoord,J,g,_);ht&&(g=Y.tickCoord+t*(J()/2+r),f[X]=Ao(Ao({},Y),{},{isShow:!0}))}},H=0;H<F;H++)V(H);return f}function sT(t,e,n){var{tick:i,ticks:r,viewBox:l,minTickGap:f,orientation:a,interval:g,tickFormatter:_,unit:x,angle:M}=t;if(!r||!r.length||!i)return[];if(xn(g)||Fm.isSsr){var O;return(O=BQ(r,xn(g)?g:0))!==null&&O!==void 0?O:[]}var z=[],F=a==="top"||a==="bottom"?"width":"height",V=x&&F==="width"?gy(x,{fontSize:e,letterSpacing:n}):{width:0,height:0},H=(Y,W)=>{var J=typeof _=="function"?_(Y.value,W):Y.value;return F==="width"?IQ(gy(J,{fontSize:e,letterSpacing:n}),V,M):gy(J,{fontSize:e,letterSpacing:n})[F]},Q=r.length>=2?Mu(r[1].coordinate-r[0].coordinate):1,X=RQ(l,Q,F);return g==="equidistantPreserveStart"?NQ(Q,X,H,r,f):(g==="preserveStart"||g==="preserveStartEnd"?z=$Q(Q,X,H,r,f,g==="preserveStartEnd"):z=VQ(Q,X,H,r,f),z.filter(Y=>Y.isShow))}var qQ=t=>{var{ticks:e,label:n,labelGapWithTick:i=5,tickSize:r=0,tickMargin:l=0}=t,f=0;if(e){Array.from(e).forEach(x=>{if(x){var M=x.getBoundingClientRect();M.width>f&&(f=M.width)}});var a=n?n.getBoundingClientRect().width:0,g=r+l,_=f+g+a+(n?i:0);return Math.round(_)}return 0},HQ=["axisLine","width","height","className","hide","ticks","axisType"],ZQ=["viewBox"],GQ=["viewBox"];function pS(t,e){if(t==null)return{};var n,i,r=WQ(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function WQ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function rp(){return rp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rp.apply(null,arguments)}function dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Wa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dk(Object(n),!0).forEach(function(i){YQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function YQ(t,e,n){return(e=XQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XQ(t){var e=KQ(t,"string");return typeof e=="symbol"?e:e+""}function KQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oT={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Jo.axis};function QQ(t){var{x:e,y:n,width:i,height:r,orientation:l,mirror:f,axisLine:a,otherSvgProps:g}=t;if(!a)return null;var _=Wa(Wa(Wa({},g),pc(a)),{},{fill:"none"});if(l==="top"||l==="bottom"){var x=+(l==="top"&&!f||l==="bottom"&&f);_=Wa(Wa({},_),{},{x1:e,y1:n+x*r,x2:e+i,y2:n+x*r})}else{var M=+(l==="left"&&!f||l==="right"&&f);_=Wa(Wa({},_),{},{x1:e+M*i,y1:n,x2:e+M*i,y2:n+r})}return Z.createElement("line",rp({},_,{className:Fr("recharts-cartesian-axis-line",hx(a,"className"))}))}function JQ(t,e,n,i,r,l,f,a,g){var _,x,M,O,z,F,V=a?-1:1,H=t.tickSize||f,Q=xn(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":_=x=t.coordinate,O=n+ +!a*r,M=O-V*H,F=M-V*g,z=Q;break;case"left":M=O=t.coordinate,x=e+ +!a*i,_=x-V*H,z=_-V*g,F=Q;break;case"right":M=O=t.coordinate,x=e+ +a*i,_=x+V*H,z=_+V*g,F=Q;break;default:_=x=t.coordinate,O=n+ +a*r,M=O+V*H,F=M+V*g,z=Q;break}return{line:{x1:_,y1:M,x2:x,y2:O},tick:{x:z,y:F}}}function tJ(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function eJ(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function nJ(t){var{option:e,tickProps:n,value:i}=t,r,l=Fr(n.className,"recharts-cartesian-axis-tick-value");if(Z.isValidElement(e))r=Z.cloneElement(e,Wa(Wa({},n),{},{className:l}));else if(typeof e=="function")r=e(Wa(Wa({},n),{},{className:l}));else{var f="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(f=Fr(f,e?.className)),r=Z.createElement(nT,rp({},n,{className:f}),i)}return r}var iJ=Z.forwardRef((t,e)=>{var{ticks:n=[],tick:i,tickLine:r,stroke:l,tickFormatter:f,unit:a,padding:g,tickTextProps:_,orientation:x,mirror:M,x:O,y:z,width:F,height:V,tickSize:H,tickMargin:Q,fontSize:X,letterSpacing:Y,getTicksConfig:W,events:J,axisType:ot}=t,ht=sT(Wa(Wa({},W),{},{ticks:n}),X,Y),rt=tJ(x,M),ut=eJ(x,M),_t=pc(W),bt=lx(i),Pt={};typeof r=="object"&&(Pt=r);var re=Wa(Wa({},_t),{},{fill:"none"},Pt),ye=ht.map(Ot=>Wa({entry:Ot},JQ(Ot,O,z,F,V,x,H,M,Q))),fe=ye.map(Ot=>{var{entry:St,line:jt}=Ot;return Z.createElement(qc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(St.value,"-").concat(St.coordinate,"-").concat(St.tickCoord)},r&&Z.createElement("line",rp({},re,jt,{className:Fr("recharts-cartesian-axis-tick-line",hx(r,"className"))})))}),kt=ye.map((Ot,St)=>{var{entry:jt,tick:Vt}=Ot,pt=Wa(Wa(Wa(Wa({textAnchor:rt,verticalAnchor:ut},_t),{},{stroke:"none",fill:l},bt),Vt),{},{index:St,payload:jt,visibleTicksCount:ht.length,tickFormatter:f,padding:g},_);return Z.createElement(qc,rp({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(jt.value,"-").concat(jt.coordinate,"-").concat(jt.tickCoord)},mV(J,jt,St)),i&&Z.createElement(nJ,{option:i,tickProps:pt,value:"".concat(typeof f=="function"?f(jt.value,St):jt.value).concat(a||"")}))});return Z.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(ot,"-ticks")},kt.length>0&&Z.createElement(Kh,{zIndex:Jo.label},Z.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(ot,"-tick-labels"),ref:e},kt)),fe.length>0&&Z.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(ot,"-tick-lines")},fe))}),rJ=Z.forwardRef((t,e)=>{var{axisLine:n,width:i,height:r,className:l,hide:f,ticks:a,axisType:g}=t,_=pS(t,HQ),[x,M]=Z.useState(""),[O,z]=Z.useState(""),F=Z.useRef(null);Z.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var H;return qQ({ticks:F.current,label:(H=t.labelRef)===null||H===void 0?void 0:H.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var V=Z.useCallback(H=>{if(H){var Q=H.getElementsByClassName("recharts-cartesian-axis-tick-value");F.current=Q;var X=Q[0];if(X){var Y=window.getComputedStyle(X),W=Y.fontSize,J=Y.letterSpacing;(W!==x||J!==O)&&(M(W),z(J))}}},[x,O]);return f||i!=null&&i<=0||r!=null&&r<=0?null:Z.createElement(Kh,{zIndex:t.zIndex},Z.createElement(qc,{className:Fr("recharts-cartesian-axis",l)},Z.createElement(QQ,{x:t.x,y:t.y,width:i,height:r,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:pc(t)}),Z.createElement(iJ,{ref:V,axisType:g,events:_,fontSize:x,getTicksConfig:t,height:t.height,letterSpacing:O,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:a,unit:t.unit,width:t.width,x:t.x,y:t.y}),Z.createElement(cK,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},Z.createElement(xK,{label:t.label,labelRef:t.labelRef}),t.children)))}),aJ=Z.memo(rJ,(t,e)=>{var{viewBox:n}=t,i=pS(t,ZQ),{viewBox:r}=e,l=pS(e,GQ);return zm(n,r)&&zm(i,l)}),lT=Z.forwardRef((t,e)=>{var n=tu(t,oT);return Z.createElement(aJ,rp({},n,{ref:e}))});lT.displayName="CartesianAxis";var sJ=["x1","y1","x2","y2","key"],oJ=["offset"],lJ=["xAxisId","yAxisId"],uJ=["xAxisId","yAxisId"];function pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Eo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pk(Object(n),!0).forEach(function(i){cJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cJ(t,e,n){return(e=hJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hJ(t){var e=fJ(t,"string");return typeof e=="symbol"?e:e+""}function fJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qd.apply(null,arguments)}function q0(t,e){if(t==null)return{};var n,i,r=dJ(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dJ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var pJ=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:i,y:r,width:l,height:f,ry:a}=t;return Z.createElement("rect",{x:i,y:r,ry:a,width:l,height:f,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function LR(t){var{option:e,lineItemProps:n}=t,i;if(Z.isValidElement(e))i=Z.cloneElement(e,n);else if(typeof e=="function")i=e(n);else{var r,{x1:l,y1:f,x2:a,y2:g,key:_}=n,x=q0(n,sJ),M=(r=pc(x))!==null&&r!==void 0?r:{},{offset:O}=M,z=q0(M,oJ);i=Z.createElement("line",qd({},z,{x1:l,y1:f,x2:a,y2:g,fill:"none",key:_}))}return i}function mJ(t){var{x:e,width:n,horizontal:i=!0,horizontalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:l,yAxisId:f}=t,a=q0(t,lJ),g=r.map((_,x)=>{var M=Eo(Eo({},a),{},{x1:e,y1:_,x2:e+n,y2:_,key:"line-".concat(x),index:x});return Z.createElement(LR,{key:"line-".concat(x),option:i,lineItemProps:M})});return Z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},g)}function gJ(t){var{y:e,height:n,vertical:i=!0,verticalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:l,yAxisId:f}=t,a=q0(t,uJ),g=r.map((_,x)=>{var M=Eo(Eo({},a),{},{x1:_,y1:e,x2:_,y2:e+n,key:"line-".concat(x),index:x});return Z.createElement(LR,{option:i,lineItemProps:M,key:"line-".concat(x)})});return Z.createElement("g",{className:"recharts-cartesian-grid-vertical"},g)}function yJ(t){var{horizontalFill:e,fillOpacity:n,x:i,y:r,width:l,height:f,horizontalPoints:a,horizontal:g=!0}=t;if(!g||!e||!e.length||a==null)return null;var _=a.map(M=>Math.round(M+r-r)).sort((M,O)=>M-O);r!==_[0]&&_.unshift(0);var x=_.map((M,O)=>{var z=!_[O+1],F=z?r+f-M:_[O+1]-M;if(F<=0)return null;var V=O%e.length;return Z.createElement("rect",{key:"react-".concat(O),y:M,x:i,height:F,width:l,stroke:"none",fill:e[V],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},x)}function _J(t){var{vertical:e=!0,verticalFill:n,fillOpacity:i,x:r,y:l,width:f,height:a,verticalPoints:g}=t;if(!e||!n||!n.length)return null;var _=g.map(M=>Math.round(M+r-r)).sort((M,O)=>M-O);r!==_[0]&&_.unshift(0);var x=_.map((M,O)=>{var z=!_[O+1],F=z?r+f-M:_[O+1]-M;if(F<=0)return null;var V=O%n.length;return Z.createElement("rect",{key:"react-".concat(O),x:M,y:l,width:F,height:a,stroke:"none",fill:n[V],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},x)}var vJ=(t,e)=>{var{xAxis:n,width:i,height:r,offset:l}=t;return Az(sT(Eo(Eo(Eo({},oT),n),{},{ticks:Mz(n),viewBox:{x:0,y:0,width:i,height:r}})),l.left,l.left+l.width,e)},xJ=(t,e)=>{var{yAxis:n,width:i,height:r,offset:l}=t;return Az(sT(Eo(Eo(Eo({},oT),n),{},{ticks:Mz(n),viewBox:{x:0,y:0,width:i,height:r}})),l.top,l.top+l.height,e)},bJ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Jo.grid};function uT(t){var e=Rz(),n=Bz(),i=Iz(),r=Eo(Eo({},tu(t,bJ)),{},{x:xn(t.x)?t.x:i.left,y:xn(t.y)?t.y:i.top,width:xn(t.width)?t.width:i.width,height:xn(t.height)?t.height:i.height}),{xAxisId:l,yAxisId:f,x:a,y:g,width:_,height:x,syncWithTicks:M,horizontalValues:O,verticalValues:z}=r,F=Sl(),V=Cn(ut=>EP(ut,"xAxis",l,F)),H=Cn(ut=>EP(ut,"yAxis",f,F));if(!Zc(_)||!Zc(x)||!xn(a)||!xn(g))return null;var Q=r.verticalCoordinatesGenerator||vJ,X=r.horizontalCoordinatesGenerator||xJ,{horizontalPoints:Y,verticalPoints:W}=r;if((!Y||!Y.length)&&typeof X=="function"){var J=O&&O.length,ot=X({yAxis:H?Eo(Eo({},H),{},{ticks:J?O:H.ticks}):void 0,width:e??_,height:n??x,offset:i},J?!0:M);w0(Array.isArray(ot),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof ot,"]")),Array.isArray(ot)&&(Y=ot)}if((!W||!W.length)&&typeof Q=="function"){var ht=z&&z.length,rt=Q({xAxis:V?Eo(Eo({},V),{},{ticks:ht?z:V.ticks}):void 0,width:e??_,height:n??x,offset:i},ht?!0:M);w0(Array.isArray(rt),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof rt,"]")),Array.isArray(rt)&&(W=rt)}return Z.createElement(Kh,{zIndex:r.zIndex},Z.createElement("g",{className:"recharts-cartesian-grid"},Z.createElement(pJ,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),Z.createElement(yJ,qd({},r,{horizontalPoints:Y})),Z.createElement(_J,qd({},r,{verticalPoints:W})),Z.createElement(mJ,qd({},r,{offset:i,horizontalPoints:Y,xAxis:V,yAxis:H})),Z.createElement(gJ,qd({},r,{offset:i,verticalPoints:W,xAxis:V,yAxis:H}))))}uT.displayName="CartesianGrid";function wJ(t){var e=lx(t),n=3,i=2;if(e!=null){var{r,strokeWidth:l}=e,f=Number(r),a=Number(l);return(Number.isNaN(f)||f<0)&&(f=n),(Number.isNaN(a)||a<0)&&(a=i),{r:f,strokeWidth:a}}return{r:n,strokeWidth:i}}var IR=(t,e,n,i)=>zI(t,"xAxis",e,i),RR=(t,e,n,i)=>DI(t,"xAxis",e,i),BR=(t,e,n,i)=>zI(t,"yAxis",n,i),NR=(t,e,n,i)=>DI(t,"yAxis",n,i),SJ=Te([Mr,IR,BR,RR,NR],(t,e,n,i,r)=>qh(t,"xAxis")?b0(e,i,!1):b0(n,r,!1)),TJ=(t,e,n,i,r)=>r,jR=Te([tI,TJ],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),AJ=(t,e,n,i,r)=>{var l,f=jR(t,e,n,i,r);if(f!=null){var a=Mr(t),g=qh(a,"xAxis"),_;if(g?_=sS(t,"yAxis",n,i):_=sS(t,"xAxis",e,i),_!=null){var{stackId:x}=f,M=R2(f);if(!(x==null||M==null)){var O=(l=_[x])===null||l===void 0?void 0:l.stackedData;return O?.find(z=>z.key===M)}}}},MJ=Te([Mr,IR,BR,RR,NR,AJ,E2,SJ,jR,vG],(t,e,n,i,r,l,f,a,g,_)=>{var{chartData:x,dataStartIndex:M,dataEndIndex:O}=f;if(!(g==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||i==null||r==null||i.length===0||r.length===0||a==null)){var{data:z}=g,F;if(z&&z.length>0?F=z:F=x?.slice(M,O+1),F!=null)return HJ({layout:t,xAxis:e,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataStartIndex:M,areaSettings:g,stackedData:l,displayedData:F,chartBaseValue:_,bandSize:a})}}),EJ=["id"],CJ=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Kd(){return Kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kd.apply(null,arguments)}function FR(t,e){if(t==null)return{};var n,i,r=PJ(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function PJ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function bm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mk(Object(n),!0).forEach(function(i){kJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function kJ(t,e,n){return(e=OJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OJ(t){var e=DJ(t,"string");return typeof e=="symbol"?e:e+""}function DJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H0(t,e){return t&&t!=="none"?t:e}var zJ=t=>{var{dataKey:e,name:n,stroke:i,fill:r,legendType:l,hide:f}=t;return[{inactive:f,dataKey:e,type:l,color:H0(i,r),value:Ez(n,e),payload:t}]};function LJ(t){var{dataKey:e,data:n,stroke:i,strokeWidth:r,fill:l,name:f,hide:a,unit:g}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:r,fill:l,dataKey:e,nameKey:void 0,name:Ez(f,e),hide:a,type:t.tooltipType,color:H0(i,l),unit:g}}}function IJ(t){var{clipPathId:e,points:n,props:i}=t,{needClip:r,dot:l,dataKey:f}=i,a=pc(i);return Z.createElement(iQ,{points:n,dot:l,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:f,baseProps:a,needClip:r,clipPathId:e})}function RJ(t){var{showLabels:e,children:n,points:i}=t,r=i.map(l=>{var f,a,g={x:(f=l.x)!==null&&f!==void 0?f:0,y:(a=l.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return bm(bm({},g),{},{value:l.value,payload:l.payload,parentViewBox:void 0,viewBox:g,fill:void 0})});return Z.createElement(OK,{value:e?r:void 0},n)}function gk(t){var{points:e,baseLine:n,needClip:i,clipPathId:r,props:l}=t,{layout:f,type:a,stroke:g,connectNulls:_,isRange:x}=l,{id:M}=l,O=FR(l,EJ),z=pc(O),F=Cu(O);return Z.createElement(Z.Fragment,null,e?.length>1&&Z.createElement(qc,{clipPath:i?"url(#clipPath-".concat(r,")"):void 0},Z.createElement(Qv,Kd({},F,{id:M,points:e,connectNulls:_,type:a,baseLine:n,layout:f,stroke:"none",className:"recharts-area-area"})),g!=="none"&&Z.createElement(Qv,Kd({},z,{className:"recharts-area-curve",layout:f,type:a,connectNulls:_,fill:"none",points:e})),g!=="none"&&x&&Z.createElement(Qv,Kd({},z,{className:"recharts-area-curve",layout:f,type:a,connectNulls:_,fill:"none",points:n}))),Z.createElement(IJ,{points:e,props:O,clipPathId:r}))}function BJ(t){var{alpha:e,baseLine:n,points:i,strokeWidth:r}=t,l=i[0].y,f=i[i.length-1].y;if(!_a(l)||!_a(f))return null;var a=e*Math.abs(l-f),g=Math.max(...i.map(_=>_.x||0));return xn(n)?g=Math.max(n,g):n&&Array.isArray(n)&&n.length&&(g=Math.max(...n.map(_=>_.x||0),g)),xn(g)?Z.createElement("rect",{x:0,y:l<f?l:l-a,width:g+(r?parseInt("".concat(r),10):1),height:Math.floor(a)}):null}function NJ(t){var{alpha:e,baseLine:n,points:i,strokeWidth:r}=t,l=i[0].x,f=i[i.length-1].x;if(!_a(l)||!_a(f))return null;var a=e*Math.abs(l-f),g=Math.max(...i.map(_=>_.y||0));return xn(n)?g=Math.max(n,g):n&&Array.isArray(n)&&n.length&&(g=Math.max(...n.map(_=>_.y||0),g)),xn(g)?Z.createElement("rect",{x:l<f?l:l-a,y:0,width:a,height:Math.floor(g+(r?parseInt("".concat(r),10):1))}):null}function jJ(t){var{alpha:e,layout:n,points:i,baseLine:r,strokeWidth:l}=t;return n==="vertical"?Z.createElement(BJ,{alpha:e,points:i,baseLine:r,strokeWidth:l}):Z.createElement(NJ,{alpha:e,points:i,baseLine:r,strokeWidth:l})}function FJ(t){var{needClip:e,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:l}=t,{points:f,baseLine:a,isAnimationActive:g,animationBegin:_,animationDuration:x,animationEasing:M,onAnimationStart:O,onAnimationEnd:z}=i,F=qz(i,"recharts-area-"),[V,H]=Z.useState(!1),Q=!V,X=Z.useCallback(()=>{typeof z=="function"&&z(),H(!1)},[z]),Y=Z.useCallback(()=>{typeof O=="function"&&O(),H(!0)},[O]),W=r.current,J=l.current;return Z.createElement(RJ,{showLabels:Q,points:f},i.children,Z.createElement($z,{animationId:F,begin:_,duration:x,isActive:g,easing:M,onAnimationEnd:X,onAnimationStart:Y,key:F},ot=>{if(W){var ht=W.length/f.length,rt=ot===1?f:f.map((_t,bt)=>{var Pt=Math.floor(bt*ht);if(W[Pt]){var re=W[Pt];return bm(bm({},_t),{},{x:jc(re.x,_t.x,ot),y:jc(re.y,_t.y,ot)})}return _t}),ut;return xn(a)?ut=jc(J,a,ot):Ws(a)||mc(a)?ut=jc(J,0,ot):ut=a.map((_t,bt)=>{var Pt=Math.floor(bt*ht);if(Array.isArray(J)&&J[Pt]){var re=J[Pt];return bm(bm({},_t),{},{x:jc(re.x,_t.x,ot),y:jc(re.y,_t.y,ot)})}return _t}),ot>0&&(r.current=rt,l.current=ut),Z.createElement(gk,{points:rt,baseLine:ut,needClip:e,clipPathId:n,props:i})}return ot>0&&(r.current=f,l.current=a),Z.createElement(qc,null,g&&Z.createElement("defs",null,Z.createElement("clipPath",{id:"animationClipPath-".concat(n)},Z.createElement(jJ,{alpha:ot,points:f,baseLine:a,layout:i.layout,strokeWidth:i.strokeWidth}))),Z.createElement(qc,{clipPath:"url(#animationClipPath-".concat(n,")")},Z.createElement(gk,{points:f,baseLine:a,needClip:e,clipPathId:n,props:i})))}),Z.createElement(LK,{label:i.label}))}function UJ(t){var{needClip:e,clipPathId:n,props:i}=t,r=Z.useRef(null),l=Z.useRef();return Z.createElement(FJ,{needClip:e,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:l})}class VJ extends Z.PureComponent{render(){var{hide:e,dot:n,points:i,className:r,top:l,left:f,needClip:a,xAxisId:g,yAxisId:_,width:x,height:M,id:O,baseLine:z,zIndex:F}=this.props;if(e)return null;var V=Fr("recharts-area",r),H=O,{r:Q,strokeWidth:X}=wJ(n),Y=AR(n),W=Q*2+X;return Z.createElement(Kh,{zIndex:F},Z.createElement(qc,{className:V},a&&Z.createElement("defs",null,Z.createElement(SQ,{clipPathId:H,xAxisId:g,yAxisId:_}),!Y&&Z.createElement("clipPath",{id:"clipPath-dots-".concat(H)},Z.createElement("rect",{x:f-W/2,y:l-W/2,width:x+W,height:M+W}))),Z.createElement(UJ,{needClip:a,clipPathId:H,props:this.props})),Z.createElement(ck,{points:i,mainColor:H0(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(z)&&Z.createElement(ck,{points:z,mainColor:H0(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var UR={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Fm.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0,zIndex:Jo.area};function $J(t){var e,n=tu(t,UR),{activeDot:i,animationBegin:r,animationDuration:l,animationEasing:f,connectNulls:a,dot:g,fill:_,fillOpacity:x,hide:M,isAnimationActive:O,legendType:z,stroke:F,xAxisId:V,yAxisId:H}=n,Q=FR(n,CJ),X=Sx(),Y=eR(),{needClip:W}=kR(V,H),J=Sl(),{points:ot,isRange:ht,baseLine:rt}=(e=Cn(ye=>MJ(ye,V,H,J,t.id)))!==null&&e!==void 0?e:{},ut=rT();if(X!=="horizontal"&&X!=="vertical"||ut==null||Y!=="AreaChart"&&Y!=="ComposedChart")return null;var{height:_t,width:bt,x:Pt,y:re}=ut;return!ot||!ot.length?null:Z.createElement(VJ,Kd({},Q,{activeDot:i,animationBegin:r,animationDuration:l,animationEasing:f,baseLine:rt,connectNulls:a,dot:g,fill:_,fillOpacity:x,height:_t,hide:M,layout:X,isAnimationActive:O,isRange:ht,legendType:z,needClip:W,points:ot,stroke:F,width:bt,left:Pt,top:re,xAxisId:V,yAxisId:H}))}var qJ=(t,e,n,i,r)=>{var l=n??e;if(xn(l))return l;var f=t==="horizontal"?r:i,a=f.scale.domain();if(f.type==="number"){var g=Math.max(a[0],a[1]),_=Math.min(a[0],a[1]);return l==="dataMin"?_:l==="dataMax"||g<0?g:Math.max(Math.min(a[0],a[1]),0)}return l==="dataMin"?a[0]:l==="dataMax"?a[1]:a[0]};function HJ(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:i},stackedData:r,layout:l,chartBaseValue:f,xAxis:a,yAxis:g,displayedData:_,dataStartIndex:x,xAxisTicks:M,yAxisTicks:O,bandSize:z}=t,F=r&&r.length,V=qJ(l,f,n,a,g),H=l==="horizontal",Q=!1,X=_.map((W,J)=>{var ot;F?ot=r[x+J]:(ot=tl(W,i),Array.isArray(ot)?Q=!0:ot=[V,ot]);var ht=ot[1]==null||F&&!e&&tl(W,i)==null;return H?{x:nC({axis:a,ticks:M,bandSize:z,entry:W,index:J}),y:ht?null:g.scale(ot[1]),value:ot,payload:W}:{x:ht?null:a.scale(ot[1]),y:nC({axis:g,ticks:O,bandSize:z,entry:W,index:J}),value:ot,payload:W}}),Y;return F||Q?Y=X.map(W=>{var J=Array.isArray(W.value)?W.value[0]:null;return H?{x:W.x,y:J!=null&&W.y!=null?g.scale(J):null,payload:W.payload}:{x:J!=null?a.scale(J):null,y:W.y,payload:W.payload}}):Y=H?g.scale(V):a.scale(V),{points:X,baseLine:Y,isRange:Q}}function ZJ(t){var e=tu(t,UR),n=Sl();return Z.createElement(VK,{id:e.id,type:"area"},i=>Z.createElement(Z.Fragment,null,Z.createElement(NK,{legendPayload:zJ(e)}),Z.createElement(BK,{fn:LJ,args:e}),Z.createElement(WK,{type:"area",id:i,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:vq(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),Z.createElement($J,Kd({},e,{id:i}))))}var cT=Z.memo(ZJ);cT.displayName="Area";var GJ=["dangerouslySetInnerHTML","ticks"],WJ=["id"],YJ=["domain"],XJ=["domain"];function mS(){return mS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mS.apply(null,arguments)}function Z0(t,e){if(t==null)return{};var n,i,r=KJ(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function KJ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function QJ(t){var e=Ms();return Z.useLayoutEffect(()=>(e(lQ(t)),()=>{e(uQ(t))}),[t,e]),null}var JJ=t=>{var{xAxisId:e,className:n}=t,i=Cn(Pz),r=Sl(),l="xAxis",f=Cn(H=>Zm(H,l,e,r)),a=Cn(H=>OI(H,l,e,r)),g=Cn(H=>hW(H,e)),_=Cn(H=>yW(H,e)),x=Cn(H=>XL(H,e));if(g==null||_==null||x==null)return null;var{dangerouslySetInnerHTML:M,ticks:O}=t,z=Z0(t,GJ),{id:F}=x,V=Z0(x,WJ);return Z.createElement(lT,mS({},z,V,{scale:f,x:_.x,y:_.y,width:g.width,height:g.height,className:Fr("recharts-".concat(l," ").concat(l),n),viewBox:i,ticks:a,axisType:l}))},ttt={allowDataOverflow:Hl.allowDataOverflow,allowDecimals:Hl.allowDecimals,allowDuplicatedCategory:Hl.allowDuplicatedCategory,height:Hl.height,hide:!1,mirror:Hl.mirror,orientation:Hl.orientation,padding:Hl.padding,reversed:Hl.reversed,scale:Hl.scale,tickCount:Hl.tickCount,type:Hl.type,xAxisId:0},ett=t=>{var e,n,i,r,l,f=tu(t,ttt);return Z.createElement(Z.Fragment,null,Z.createElement(QJ,{interval:(e=f.interval)!==null&&e!==void 0?e:"preserveEnd",id:f.xAxisId,scale:f.scale,type:f.type,padding:f.padding,allowDataOverflow:f.allowDataOverflow,domain:f.domain,dataKey:f.dataKey,allowDuplicatedCategory:f.allowDuplicatedCategory,allowDecimals:f.allowDecimals,tickCount:f.tickCount,includeHidden:(n=f.includeHidden)!==null&&n!==void 0?n:!1,reversed:f.reversed,ticks:f.ticks,height:f.height,orientation:f.orientation,mirror:f.mirror,hide:f.hide,unit:f.unit,name:f.name,angle:(i=f.angle)!==null&&i!==void 0?i:0,minTickGap:(r=f.minTickGap)!==null&&r!==void 0?r:5,tick:(l=f.tick)!==null&&l!==void 0?l:!0,tickFormatter:f.tickFormatter}),Z.createElement(JJ,f))},ntt=(t,e)=>{var{domain:n}=t,i=Z0(t,YJ),{domain:r}=e,l=Z0(e,XJ);return zm(i,l)?Array.isArray(n)&&n.length===2&&Array.isArray(r)&&r.length===2?n[0]===r[0]&&n[1]===r[1]:zm({domain:n},{domain:r}):!1},hT=Z.memo(ett,ntt);hT.displayName="XAxis";var itt=["dangerouslySetInnerHTML","ticks"],rtt=["id"],att=["domain"],stt=["domain"];function gS(){return gS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},gS.apply(null,arguments)}function G0(t,e){if(t==null)return{};var n,i,r=ott(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ott(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function ltt(t){var e=Ms();return Z.useLayoutEffect(()=>(e(cQ(t)),()=>{e(hQ(t))}),[t,e]),null}var utt=t=>{var{yAxisId:e,className:n,width:i,label:r}=t,l=Z.useRef(null),f=Z.useRef(null),a=Cn(Pz),g=Sl(),_=Ms(),x="yAxis",M=Cn(J=>Zm(J,x,e,g)),O=Cn(J=>xW(J,e)),z=Cn(J=>vW(J,e)),F=Cn(J=>OI(J,x,e,g)),V=Cn(J=>KL(J,e));if(Z.useLayoutEffect(()=>{if(!(i!=="auto"||!O||iT(r)||Z.isValidElement(r)||V==null)){var J=l.current;if(J){var ot=J.getCalculatedWidth();Math.round(O.width)!==Math.round(ot)&&_(fQ({id:e,width:ot}))}}},[F,O,_,r,e,i,V]),O==null||z==null||V==null)return null;var{dangerouslySetInnerHTML:H,ticks:Q}=t,X=G0(t,itt),{id:Y}=V,W=G0(V,rtt);return Z.createElement(lT,gS({},X,W,{ref:l,labelRef:f,scale:M,x:z.x,y:z.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:O.width,height:O.height,className:Fr("recharts-".concat(x," ").concat(x),n),viewBox:a,ticks:F,axisType:x}))},ctt={allowDataOverflow:Zl.allowDataOverflow,allowDecimals:Zl.allowDecimals,allowDuplicatedCategory:Zl.allowDuplicatedCategory,hide:!1,mirror:Zl.mirror,orientation:Zl.orientation,padding:Zl.padding,reversed:Zl.reversed,scale:Zl.scale,tickCount:Zl.tickCount,type:Zl.type,width:Zl.width,yAxisId:0},htt=t=>{var e,n,i,r,l,f=tu(t,ctt);return Z.createElement(Z.Fragment,null,Z.createElement(ltt,{interval:(e=f.interval)!==null&&e!==void 0?e:"preserveEnd",id:f.yAxisId,scale:f.scale,type:f.type,domain:f.domain,allowDataOverflow:f.allowDataOverflow,dataKey:f.dataKey,allowDuplicatedCategory:f.allowDuplicatedCategory,allowDecimals:f.allowDecimals,tickCount:f.tickCount,padding:f.padding,includeHidden:(n=f.includeHidden)!==null&&n!==void 0?n:!1,reversed:f.reversed,ticks:f.ticks,width:f.width,orientation:f.orientation,mirror:f.mirror,hide:f.hide,unit:f.unit,name:f.name,angle:(i=f.angle)!==null&&i!==void 0?i:0,minTickGap:(r=f.minTickGap)!==null&&r!==void 0?r:5,tick:(l=f.tick)!==null&&l!==void 0?l:!0,tickFormatter:f.tickFormatter}),Z.createElement(utt,f))},ftt=(t,e)=>{var{domain:n}=t,i=G0(t,att),{domain:r}=e,l=G0(e,stt);return zm(i,l)?Array.isArray(n)&&n.length===2&&Array.isArray(r)&&r.length===2?n[0]===r[0]&&n[1]===r[1]:zm({domain:n},{domain:r}):!1},fT=Z.memo(htt,ftt);fT.displayName="YAxis";var uw={exports:{}},cw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yk;function dtt(){if(yk)return cw;yk=1;var t=Lm();function e(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,r=t.useRef,l=t.useEffect,f=t.useMemo,a=t.useDebugValue;return cw.useSyncExternalStoreWithSelector=function(g,_,x,M,O){var z=r(null);if(z.current===null){var F={hasValue:!1,value:null};z.current=F}else F=z.current;z=f(function(){function H(J){if(!Q){if(Q=!0,X=J,J=M(J),O!==void 0&&F.hasValue){var ot=F.value;if(O(ot,J))return Y=ot}return Y=J}if(ot=Y,n(X,J))return ot;var ht=M(J);return O!==void 0&&O(ot,ht)?(X=J,ot):(X=J,Y=ht)}var Q=!1,X,Y,W=x===void 0?null:x;return[function(){return H(_())},W===null?void 0:function(){return H(W())}]},[_,x,M,O]);var V=i(g,z[0],z[1]);return l(function(){F.hasValue=!0,F.value=V},[V]),a(V),V},cw}var _k;function ptt(){return _k||(_k=1,uw.exports=dtt()),uw.exports}ptt();function mtt(t){t()}function gtt(){let t=null,e=null;return{clear(){t=null,e=null},notify(){mtt(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!i||t===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var vk={notify(){},get:()=>[]};function ytt(t,e){let n,i=vk,r=0,l=!1;function f(V){x();const H=i.subscribe(V);let Q=!1;return()=>{Q||(Q=!0,H(),M())}}function a(){i.notify()}function g(){F.onStateChange&&F.onStateChange()}function _(){return l}function x(){r++,n||(n=t.subscribe(g),i=gtt())}function M(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=vk)}function O(){l||(l=!0,x())}function z(){l&&(l=!1,M())}const F={addNestedSub:f,notifyNestedSubs:a,handleChangeWrapper:g,isSubscribed:_,trySubscribe:O,tryUnsubscribe:z,getListeners:()=>i};return F}var _tt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vtt=_tt(),xtt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",btt=xtt(),wtt=()=>vtt||btt?Z.useLayoutEffect:Z.useEffect,Stt=wtt(),Ttt=Symbol.for("react-redux-context"),Att=typeof globalThis<"u"?globalThis:{};function Mtt(){if(!Z.createContext)return{};const t=Att[Ttt]??=new Map;let e=t.get(Z.createContext);return e||(e=Z.createContext(null),t.set(Z.createContext,e)),e}var Ett=Mtt();function Ctt(t){const{children:e,context:n,serverState:i,store:r}=t,l=Z.useMemo(()=>{const g=ytt(r);return{store:r,subscription:g,getServerState:i?()=>i:void 0}},[r,i]),f=Z.useMemo(()=>r.getState(),[r]);Stt(()=>{const{subscription:g}=l;return g.onStateChange=g.notifyNestedSubs,g.trySubscribe(),f!==r.getState()&&g.notifyNestedSubs(),()=>{g.tryUnsubscribe(),g.onStateChange=void 0}},[l,f]);const a=n||Ett;return Z.createElement(a.Provider,{value:l},e)}var Ptt=Ctt,ktt=(t,e)=>e,dT=Te([ktt,Mr,WL,ds,YI,Xh,kY,Ys],BY),pT=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,i=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/i)}},VR=Pu("mouseClick"),$R=Gy();$R.startListening({actionCreator:VR,effect:(t,e)=>{var n=t.payload,i=dT(e.getState(),pT(n));i?.activeIndex!=null&&e.dispatch(DW({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var yS=Pu("mouseMove"),qR=Gy();qR.startListening({actionCreator:yS,effect:(t,e)=>{var n=t.payload,i=e.getState(),r=G2(i,i.tooltip.settings.shared),l=dT(i,pT(n));r==="axis"&&(l?.activeIndex!=null?e.dispatch(FI({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):e.dispatch(jI()))}});var xk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},HR=wl({name:"rootProps",initialState:xk,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:xk.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue}}}),Ott=HR.reducer,{updateOptions:Dtt}=HR.actions,ZR=wl({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:snt}=ZR.actions,ztt=ZR.reducer,GR=Pu("keyDown"),WR=Pu("focus"),mT=Gy();mT.startListening({actionCreator:GR,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip,l=t.payload;if(!(l!=="ArrowRight"&&l!=="ArrowLeft"&&l!=="Enter")){var f=Number(W2(r,Wm(n))),a=Xh(n);if(l==="Enter"){var g=F0(n,"axis","hover",String(r.index));e.dispatch(lS({active:!r.active,activeIndex:r.index,activeDataKey:r.dataKey,activeCoordinate:g}));return}var _=TW(n),x=_==="left-to-right"?1:-1,M=l==="ArrowRight"?1:-1,O=f+M*x;if(!(a==null||O>=a.length||O<0)){var z=F0(n,"axis","hover",String(O));e.dispatch(lS({active:!0,activeIndex:O.toString(),activeDataKey:void 0,activeCoordinate:z}))}}}}});mT.startListening({actionCreator:WR,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var l="0",f=F0(n,"axis","hover",String(l));e.dispatch(lS({activeDataKey:void 0,active:!0,activeIndex:l,activeCoordinate:f}))}}}});var Au=Pu("externalEvent"),YR=Gy();YR.startListening({actionCreator:Au,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),i={activeCoordinate:mY(n),activeDataKey:dY(n),activeIndex:Iy(n),activeLabel:QI(n),activeTooltipIndex:Iy(n),isTooltipActive:gY(n)};t.payload.handler(i,t.payload.reactEvent)}}});var Ltt=Te([Gm],t=>t.tooltipItemPayloads),Itt=Te([Ltt,i_,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,i)=>{var r=t.find(a=>a.settings.dataKey===i);if(r!=null){var{positions:l}=r;if(l!=null){var f=e(l,n);return f}}}),XR=Pu("touchMove"),KR=Gy();KR.startListening({actionCreator:XR,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var i=e.getState(),r=G2(i,i.tooltip.settings.shared);if(r==="axis"){var l=dT(i,pT({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));l?.activeIndex!=null&&e.dispatch(FI({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(r==="item"){var f,a=n.touches[0];if(document.elementFromPoint==null)return;var g=document.elementFromPoint(a.clientX,a.clientY);if(!g||!g.getAttribute)return;var _=g.getAttribute(Mq),x=(f=g.getAttribute(Eq))!==null&&f!==void 0?f:void 0,M=Itt(e.getState(),_,x);e.dispatch(OW({activeDataKey:x,activeIndex:_,activeCoordinate:M}))}}}});var Rtt=JD({brush:AQ,cartesianAxis:dQ,chartData:mX,errorBars:wQ,graphicalItems:GK,layout:uq,legend:s9,options:cX,polarAxis:RK,polarOptions:ztt,referenceElements:DQ,rootProps:Ott,tooltip:zW,zIndex:KY}),Btt=function(e){return L$({reducer:Rtt,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([$R.middleware,qR.middleware,mT.middleware,YR.middleware,KR.middleware]),enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(hz({type:"raf"}))},devTools:Fm.devToolsEnabled})};function Ntt(t){var{preloadedState:e,children:n,reduxStoreName:i}=t,r=Sl(),l=Z.useRef(null);if(r)return n;l.current==null&&(l.current=Btt(e));var f=KS;return Z.createElement(Ptt,{context:f,store:l.current},n)}function jtt(t){var{layout:e,margin:n}=t,i=Ms(),r=Sl();return Z.useEffect(()=>{r||(i(sq(e)),i(aq(n)))},[i,r,e,n]),null}function Ftt(t){var e=Ms();return Z.useEffect(()=>{e(Dtt(t))},[e,t]),null}function bk(t){var{zIndex:e,isPanorama:n}=t,i=n?"recharts-zindex-panorama-":"recharts-zindex-",r=MR("".concat(i).concat(e)),l=Ms();return Z.useLayoutEffect(()=>(l(YY({zIndex:e,elementId:r,isPanorama:n})),()=>{l(XY({zIndex:e,isPanorama:n}))}),[l,e,r,n]),Z.createElement("g",{id:r})}function wk(t){var{children:e,isPanorama:n}=t,i=Cn(jY);if(!i||i.length===0)return e;var r=i.filter(f=>f<0),l=i.filter(f=>f>0);return Z.createElement(Z.Fragment,null,r.map(f=>Z.createElement(bk,{key:f,zIndex:f,isPanorama:n})),e,l.map(f=>Z.createElement(bk,{key:f,zIndex:f,isPanorama:n})))}var Utt=["children"];function Vtt(t,e){if(t==null)return{};var n,i,r=$tt(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $tt(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function W0(){return W0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},W0.apply(null,arguments)}var qtt={width:"100%",height:"100%",display:"block"},Htt=Z.forwardRef((t,e)=>{var n=Rz(),i=Bz(),r=jz();if(!Zc(n)||!Zc(i))return null;var{children:l,otherAttributes:f,title:a,desc:g}=t,_,x;return f!=null&&(typeof f.tabIndex=="number"?_=f.tabIndex:_=r?0:void 0,typeof f.role=="string"?x=f.role:x=r?"application":void 0),Z.createElement(xD,W0({},f,{title:a,desc:g,role:x,tabIndex:_,width:n,height:i,style:qtt,ref:e}),l)}),Ztt=t=>{var{children:e}=t,n=Cn(bx);if(!n)return null;var{width:i,height:r,y:l,x:f}=n;return Z.createElement(xD,{width:i,height:r,x:f,y:l},e)},Sk=Z.forwardRef((t,e)=>{var{children:n}=t,i=Vtt(t,Utt),r=Sl();return r?Z.createElement(Ztt,null,Z.createElement(wk,{isPanorama:!0},n)):Z.createElement(Htt,W0({ref:e},i),Z.createElement(wk,{isPanorama:!1},n))});function Gtt(){var t=Ms(),[e,n]=Z.useState(null),i=Cn(Aq);return Z.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),l=r.width/e.offsetWidth;_a(l)&&l!==i&&t(lq(l))}},[e,t,i]),n}function Tk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Wtt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tk(Object(n),!0).forEach(function(i){Ytt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ytt(t,e,n){return(e=Xtt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xtt(t){var e=Ktt(t,"string");return typeof e=="symbol"?e:e+""}function Ktt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ap.apply(null,arguments)}var Qtt=()=>(TX(),null);function Y0(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Jtt=Z.forwardRef((t,e)=>{var n,i,r=Z.useRef(null),[l,f]=Z.useState({containerWidth:Y0((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:Y0((i=t.style)===null||i===void 0?void 0:i.height)}),a=Z.useCallback((_,x)=>{f(M=>{var O=Math.round(_),z=Math.round(x);return M.containerWidth===O&&M.containerHeight===z?M:{containerWidth:O,containerHeight:z}})},[]),g=Z.useCallback(_=>{if(typeof e=="function"&&e(_),_!=null&&typeof ResizeObserver<"u"){var{width:x,height:M}=_.getBoundingClientRect();a(x,M);var O=F=>{var{width:V,height:H}=F[0].contentRect;a(V,H)},z=new ResizeObserver(O);z.observe(_),r.current=z}},[e,a]);return Z.useEffect(()=>()=>{var _=r.current;_?.disconnect()},[a]),Z.createElement(Z.Fragment,null,Z.createElement(Tx,{width:l.containerWidth,height:l.containerHeight}),Z.createElement("div",ap({ref:g},t)))}),tet=Z.forwardRef((t,e)=>{var{width:n,height:i}=t,[r,l]=Z.useState({containerWidth:Y0(n),containerHeight:Y0(i)}),f=Z.useCallback((g,_)=>{l(x=>{var M=Math.round(g),O=Math.round(_);return x.containerWidth===M&&x.containerHeight===O?x:{containerWidth:M,containerHeight:O}})},[]),a=Z.useCallback(g=>{if(typeof e=="function"&&e(g),g!=null){var{width:_,height:x}=g.getBoundingClientRect();f(_,x)}},[e,f]);return Z.createElement(Z.Fragment,null,Z.createElement(Tx,{width:r.containerWidth,height:r.containerHeight}),Z.createElement("div",ap({ref:a},t)))}),eet=Z.forwardRef((t,e)=>{var{width:n,height:i}=t;return Z.createElement(Z.Fragment,null,Z.createElement(Tx,{width:n,height:i}),Z.createElement("div",ap({ref:e},t)))}),net=Z.forwardRef((t,e)=>{var{width:n,height:i}=t;return Rh(n)||Rh(i)?Z.createElement(tet,ap({},t,{ref:e})):Z.createElement(eet,ap({},t,{ref:e}))});function iet(t){return t===!0?Jtt:net}var ret=Z.forwardRef((t,e)=>{var{children:n,className:i,height:r,onClick:l,onContextMenu:f,onDoubleClick:a,onMouseDown:g,onMouseEnter:_,onMouseLeave:x,onMouseMove:M,onMouseUp:O,onTouchEnd:z,onTouchMove:F,onTouchStart:V,style:H,width:Q,responsive:X,dispatchTouchEvents:Y=!0}=t,W=Z.useRef(null),J=Ms(),[ot,ht]=Z.useState(null),[rt,ut]=Z.useState(null),_t=Gtt(),bt=i2(),Pt=bt?.width>0?bt.width:Q,re=bt?.height>0?bt.height:r,ye=Z.useCallback(Wt=>{_t(Wt),typeof e=="function"&&e(Wt),ht(Wt),ut(Wt),Wt!=null&&(W.current=Wt)},[_t,e,ht,ut]),fe=Z.useCallback(Wt=>{J(VR(Wt)),J(Au({handler:l,reactEvent:Wt}))},[J,l]),kt=Z.useCallback(Wt=>{J(yS(Wt)),J(Au({handler:_,reactEvent:Wt}))},[J,_]),Ot=Z.useCallback(Wt=>{J(jI()),J(Au({handler:x,reactEvent:Wt}))},[J,x]),St=Z.useCallback(Wt=>{J(yS(Wt)),J(Au({handler:M,reactEvent:Wt}))},[J,M]),jt=Z.useCallback(()=>{J(WR())},[J]),Vt=Z.useCallback(Wt=>{J(GR(Wt.key))},[J]),pt=Z.useCallback(Wt=>{J(Au({handler:f,reactEvent:Wt}))},[J,f]),Tt=Z.useCallback(Wt=>{J(Au({handler:a,reactEvent:Wt}))},[J,a]),$t=Z.useCallback(Wt=>{J(Au({handler:g,reactEvent:Wt}))},[J,g]),Yt=Z.useCallback(Wt=>{J(Au({handler:O,reactEvent:Wt}))},[J,O]),se=Z.useCallback(Wt=>{J(Au({handler:V,reactEvent:Wt}))},[J,V]),le=Z.useCallback(Wt=>{Y&&J(XR(Wt)),J(Au({handler:F,reactEvent:Wt}))},[J,Y,F]),Ae=Z.useCallback(Wt=>{J(Au({handler:z,reactEvent:Wt}))},[J,z]),Ie=iet(X);return Z.createElement(oR.Provider,{value:ot},Z.createElement(FU.Provider,{value:rt},Z.createElement(Ie,{width:Pt??H?.width,height:re??H?.height,className:Fr("recharts-wrapper",i),style:Wtt({position:"relative",cursor:"default",width:Pt,height:re},H),onClick:fe,onContextMenu:pt,onDoubleClick:Tt,onFocus:jt,onKeyDown:Vt,onMouseDown:$t,onMouseEnter:kt,onMouseLeave:Ot,onMouseMove:St,onMouseUp:Yt,onTouchEnd:Ae,onTouchMove:le,onTouchStart:se,ref:ye},Z.createElement(Qtt,null),n)))}),aet=["width","height","responsive","children","className","style","compact","title","desc"];function set(t,e){if(t==null)return{};var n,i,r=oet(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function oet(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var uet=Z.forwardRef((t,e)=>{var{width:n,height:i,responsive:r,children:l,className:f,style:a,compact:g,title:_,desc:x}=t,M=set(t,aet),O=pc(M);return g?Z.createElement(Z.Fragment,null,Z.createElement(Tx,{width:n,height:i}),Z.createElement(Sk,{otherAttributes:O,title:_,desc:x},l)):Z.createElement(ret,{className:f,style:a,width:n,height:i,responsive:r??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},Z.createElement(Sk,{otherAttributes:O,title:_,desc:x,ref:e},Z.createElement(LQ,null,l)))});function _S(){return _S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_S.apply(null,arguments)}var cet={top:5,right:5,bottom:5,left:5},het={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:cet,reverseStackOrder:!1,syncMethod:"index",responsive:!1},fet=Z.forwardRef(function(e,n){var i,r=tu(e.categoricalChartProps,het),{chartName:l,defaultTooltipEventType:f,validateTooltipEventTypes:a,tooltipPayloadSearcher:g,categoricalChartProps:_}=e,x={chartName:l,defaultTooltipEventType:f,validateTooltipEventTypes:a,tooltipPayloadSearcher:g,eventEmitter:void 0};return Z.createElement(Ntt,{preloadedState:{options:x},reduxStoreName:(i=_.id)!==null&&i!==void 0?i:l},Z.createElement(TQ,{chartData:_.data}),Z.createElement(jtt,{layout:r.layout,margin:r.margin}),Z.createElement(Ftt,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className}),Z.createElement(uet,_S({},r,{ref:n})))}),det=["axis"],QR=Z.forwardRef((t,e)=>Z.createElement(fet,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:det,tooltipPayloadSearcher:lX,categoricalChartProps:t,ref:e}));const Ga={11:{name:"",districts:{11110:"",11140:"",11170:"",11200:"",11215:"",11230:"",11260:"",11290:"",11305:"",11320:"",11350:"",11380:"",11410:"",11440:"",11470:"",11500:"",11530:"",11545:"",11560:"",11590:"",11620:"",11650:"",11680:"",11710:"",11740:""}},26:{name:"",districts:{26110:"",26140:"",26170:"",26200:"",26230:"",26260:"",26290:"",26320:"",26350:"",26380:"",26410:"",26440:"",26470:"",26500:"",26530:"",26710:""}},27:{name:"",districts:{27110:"",27140:"",27170:"",27200:"",27230:"",27260:"",27290:"",27710:"",27720:""}},28:{name:"",districts:{28110:"",28140:"",28177:"",28185:"",28200:"",28237:"",28245:"",28260:"",28710:"",28720:""}},29:{name:"",districts:{29110:"",29140:"",29155:"",29170:"",29200:""}},30:{name:"",districts:{30110:"",30140:"",30170:"",30200:"",30230:""}},31:{name:"",districts:{31110:"",31140:"",31170:"",31200:"",31710:""}},36:{name:"",districts:{36110:""}},41:{name:"",districts:{41111:" ",41113:" ",41115:" ",41117:" ",41131:" ",41133:" ",41135:" ",41150:"",41171:" ",41173:" ",41192:" ",41194:" ",41196:" ",41210:"",41220:"",41250:"",41271:" ",41273:" ",41281:" ",41285:" ",41287:" ",41290:"",41310:"",41360:"",41370:"",41390:"",41410:"",41430:"",41450:"",41461:" ",41463:" ",41465:" ",41480:"",41500:"",41550:"",41570:"",41590:"",41610:"",41630:"",41650:"",41670:"",41800:"",41820:"",41830:""}},43:{name:"",districts:{43111:" ",43112:" ",43113:" ",43114:" ",43130:"",43150:"",43720:"",43730:"",43740:"",43745:"",43750:"",43760:"",43770:"",43800:""}},44:{name:"",districts:{44131:" ",44133:" ",44150:"",44180:"",44200:"",44210:"",44230:"",44250:"",44270:"",44710:"",44760:"",44770:"",44790:"",44800:"",44810:"",44825:""}},46:{name:"",districts:{46110:"",46130:"",46150:"",46170:"",46230:"",46710:"",46720:"",46730:"",46770:"",46780:"",46790:"",46800:"",46810:"",46820:"",46830:"",46840:"",46860:"",46870:"",46880:"",46890:"",46900:"",46910:""}},47:{name:"",districts:{47111:" ",47113:" ",47130:"",47150:"",47170:"",47190:"",47210:"",47230:"",47250:"",47280:"",47290:"",47730:"",47750:"",47760:"",47770:"",47820:"",47830:"",47840:"",47850:"",47900:"",47920:"",47930:"",47940:""}},48:{name:"",districts:{48121:" ",48123:" ",48125:" ",48127:" ",48129:" ",48170:"",48220:"",48240:"",48250:"",48270:"",48310:"",48330:"",48720:"",48730:"",48740:"",48820:"",48840:"",48850:"",48860:"",48870:"",48880:"",48890:""}},50:{name:"",districts:{50110:"",50130:""}},51:{name:"",districts:{51110:"",51130:"",51150:"",51170:"",51190:"",51210:"",51230:"",51720:"",51730:"",51750:"",51760:"",51770:"",51780:"",51790:"",51800:"",51810:"",51820:"",51830:""}},52:{name:"",districts:{52111:" ",52113:" ",52130:"",52140:"",52180:"",52190:"",52210:"",52710:"",52720:"",52730:"",52740:"",52750:"",52770:"",52790:"",52800:""}}},pet=t=>t===0?"0":`${t/1e6}MWh`,Ak=[" ()","1","2","3","4","5","6","7","8","9","10","11","12"];function met(){const t="2020-01",e=new Date,n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=`${n}-${i}`,[l,f]=Z.useState("11"),[a,g]=Z.useState(r),[_,x]=Z.useState([]),[M,O]=Z.useState([]),[z,F]=Z.useState(0),[V,H]=Z.useState(""),Q=async()=>{if(!Ga[l]){x([]),O([]),F(0);return}const W=parseInt(a.split("-")[0],10),J=W*100+1,ot=W*100+12;try{const ht=await fetch(`/api/energy?cityId=${l}`);if(!ht.ok)throw new Error("API  .");const _t=(await ht.json()).items.filter(Tt=>!Tt.cityId||!Tt.yearMonth?!1:String(Tt.cityId)===String(l)&&Tt.yearMonth>=J&&Tt.yearMonth<=ot),bt=new Array(12).fill(0),Pt=["1","2","3","4","5","6","7","8","9","10","11","12"],re=new Map,ye=new Array(12).fill(0),fe=Ga[l].districts;Object.entries(fe).forEach(([Tt,$t])=>{re.set(Tt,{gu:$t,"1":"-","2":"-","3":"-","4":"-","5":"-","6":"-","7":"-","8":"-","9":"-","10":"-","11":"-","12":"-"})});const kt=V!=="";_t.forEach(Tt=>{const $t=String(Tt.countyId).trim(),Yt=Tt.yearMonth%100,se=Yt-1,le=`${Yt}`,Ae=Tt.useElect||0,Ie=Tt.useGas||0;let Wt;V===""?Wt=Ae:V===""?Wt=Ie:Wt=void 0,kt&&Wt!==void 0&&se>=0&&se<12&&(bt[se]+=Wt);const Pe=V===""?Ae:Ie;if(Wt===void 0&&V!=="")return;const we=Math.round(Pe/1e3);if(re.has($t)){const ce=re.get($t);if(!isNaN(we)&&we>0){const rn=ce[le]==="-"?0:ce[le];ce[le]=rn+we,re.set($t,ce),se>=0&&se<12&&(ye[se]+=we)}}});const Ot=Math.max(...bt),St=kt?Math.ceil(Ot*1.1/1e6)*1e6:1e6,jt=Pt.map((Tt,$t)=>({name:Tt,:bt[$t]}));O(jt),F(St);const pt={gu:`${Ga[l]?Ga[l].name:""} `};Pt.forEach((Tt,$t)=>{const Yt=ye[$t];pt[Tt]=Yt>0?Yt:"-"}),x([pt,...Array.from(re.values())])}catch(ht){console.error("API   :",ht),x([]),O([]),F(0)}},X=W=>{f(W.target.value)},Y=()=>xt.jsxs("table",{className:"stats-table",children:[xt.jsx("thead",{children:xt.jsx("tr",{children:Ak.map(W=>xt.jsx("th",{children:W},W))})}),xt.jsx("tbody",{children:_.map((W,J)=>xt.jsxs("tr",{style:{fontWeight:J===0?"bold":"normal",backgroundColor:J===0?"#f9f9f9":"transparent"},children:[xt.jsx("td",{children:W.gu}),Ak.slice(1).map(ot=>xt.jsx("td",{children:typeof W[ot]=="number"?W[ot].toLocaleString():W[ot]},ot))]},W.gu))})]});return xt.jsxs("div",{className:"stats-sidebar-layout",children:[xt.jsxs("aside",{className:"stats-sidebar",children:[xt.jsxs("div",{className:"sidebar-section",children:[xt.jsx("h4",{children:"  "}),xt.jsx("input",{type:"month",className:"stats-input",min:t,max:r,value:a,onChange:W=>g(W.target.value)})]}),xt.jsxs("div",{className:"sidebar-section",children:[xt.jsx("h4",{children:" "}),xt.jsx("label",{children:""}),xt.jsxs("select",{className:"stats-input",value:V,onChange:W=>H(W.target.value),children:[xt.jsx("option",{children:""}),xt.jsx("option",{value:"",children:"(MWh)"}),xt.jsx("option",{value:"",children:"(MWh)"})]}),xt.jsx("label",{children:""}),xt.jsx("select",{className:"stats-input",value:l,onChange:X,children:Object.keys(Ga).map(W=>xt.jsx("option",{value:W,children:Ga[W].name},W))})]}),xt.jsx("div",{className:"sidebar-section",children:xt.jsx("button",{className:"stats-button-primary",onClick:Q,children:" "})})]}),xt.jsxs("main",{className:"main-content",children:[xt.jsx("h2",{children:"  "}),xt.jsxs("div",{className:"chart-section",children:[xt.jsx("h3",{children:"   "}),xt.jsxs("p",{children:[Ga[l]?Ga[l].name:"..."," ",a.split("-")[0]," ",V===" "?"    .":V+"   "]}),xt.jsx("div",{className:"chart-container",children:xt.jsx(zz,{width:"100%",height:300,children:xt.jsxs(QR,{data:M,margin:{top:30,right:30,left:50,bottom:5},children:[xt.jsx(uT,{strokeDasharray:"3 3"}),xt.jsx(hT,{dataKey:"name",scale:"point",axisLine:!1,tickLine:!1,tick:{fontSize:13}}),xt.jsx(fT,{axisLine:!1,tickLine:!1,tickFormatter:pet,domain:[0,z],tickCount:5,tick:{fontSize:13},label:{value:"(MWh)",position:"top",offset:17,fontWeight:"bold",fontSize:14,fill:"#333"}}),xt.jsx(cR,{formatter:W=>[`${(W/1e3).toLocaleString()} kWh`,""]}),xt.jsx(cT,{type:"monotone",dataKey:"",stroke:"#ffbb40",fill:"#ffd54f",strokeWidth:2,activeDot:{r:6},dot:{r:4,fill:"#ffbb40"}})]})})})]}),xt.jsxs("div",{className:"table-section",children:[xt.jsx("h3",{children:Ga[l]?`${Ga[l].name} ${a.split("-")[0]}   `:"   "}),xt.jsx("p",{children:"      ."}),xt.jsx("div",{className:"stats-table-container",children:Y()})]})]})]})}const Mk=[" ()","1","2","3","4","5","6","7","8","9","10","11","12"];function get(){const t="2020-01",e=new Date,n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=`${n}-${i}`,[l,f]=Z.useState("11"),[a,g]=Z.useState(r),[_,x]=Z.useState([]),[M,O]=Z.useState([]),[z,F]=Z.useState(0),[V,H]=Z.useState(""),Q=async()=>{if(!Ga[l]){x([]),O([]),F(0);return}const W=parseInt(a.split("-")[0],10),J=W*100+1,ot=W*100+12,ht=.4541,rt=.204;try{const ut=await fetch(`/api/energy?cityId=${l}`);if(!ut.ok)throw new Error("API  .");const Pt=(await ut.json()).items.filter(Yt=>!Yt.cityId||!Yt.yearMonth?!1:String(Yt.cityId)===String(l)&&Yt.yearMonth>=J&&Yt.yearMonth<=ot),re=new Array(12).fill(0),ye=["1","2","3","4","5","6","7","8","9","10","11","12"],fe=new Map,kt=new Array(12).fill(0),Ot=Ga[l].districts;Object.entries(Ot).forEach(([Yt,se])=>{fe.set(Yt,{gu:se,"1":"-","2":"-","3":"-","4":"-","5":"-","6":"-","7":"-","8":"-","9":"-","10":"-","11":"-","12":"-"})}),Pt.forEach(Yt=>{const se=String(Yt.countyId).trim(),le=Yt.yearMonth%100,Ae=le-1,Ie=`${le}`,Wt=Yt.useElect||0,Pe=Yt.useGas||0;let we=0;if(V==="")we=Wt/1e6*ht;else if(V==="")we=Pe/1e6*rt;else if(V===""){const rn=Wt/1e6*ht,je=Pe/1e6*rt;we=rn+je}if(we>0&&Ae>=0&&Ae<12&&(re[Ae]+=we),we===0&&V!=="")return;const ce=parseFloat(we.toFixed(3));if(fe.has(se)){const rn=fe.get(se);if(!isNaN(ce)){const je=rn[Ie]==="-"?0:rn[Ie];rn[Ie]=je+ce,fe.set(se,rn),Ae>=0&&Ae<12&&(kt[Ae]+=ce)}}});const St=Math.max(...re),jt=St>0?Math.ceil(St*1.1*100)/100:1e3,Vt=ye.map((Yt,se)=>({name:Yt,:parseFloat(re[se].toFixed(2))}));O(Vt),F(jt);const pt=Array.from(fe.values()).map(Yt=>{const se={...Yt};return ye.forEach(le=>{typeof se[le]=="number"&&se[le]>0&&(se[le]=parseFloat(se[le].toFixed(3)))}),se}),$t={gu:`${Ga[l]?Ga[l].name:""} `};ye.forEach((Yt,se)=>{const le=kt[se];$t[Yt]=le>0?parseFloat(le.toFixed(3)):"-"}),x([$t,...pt])}catch(ut){console.error("API   :",ut),x([]),O([]),F(0)}},X=W=>{f(W.target.value)},Y=()=>xt.jsxs("table",{className:"stats-table",children:[xt.jsx("thead",{children:xt.jsx("tr",{children:Mk.map(W=>xt.jsx("th",{children:W},W))})}),xt.jsx("tbody",{children:_.map((W,J)=>xt.jsxs("tr",{style:{fontWeight:J===0?"bold":"normal",backgroundColor:J===0?"#f9f9f9":"transparent"},children:[xt.jsx("td",{children:W.gu}),Mk.slice(1).map(ot=>xt.jsx("td",{children:typeof W[ot]=="number"?W[ot].toLocaleString():W[ot]},ot))]},W.gu))})]});return xt.jsxs("div",{className:"stats-sidebar-layout",children:[xt.jsxs("aside",{className:"stats-sidebar",children:[xt.jsxs("div",{className:"sidebar-section",children:[xt.jsx("h4",{children:"  "}),xt.jsx("input",{type:"month",className:"stats-input",min:t,max:r,value:a,onChange:W=>g(W.target.value)})]}),xt.jsxs("div",{className:"sidebar-section",children:[xt.jsx("h4",{children:" "}),xt.jsx("label",{children:""}),xt.jsxs("select",{className:"stats-input",value:V,onChange:W=>H(W.target.value),children:[xt.jsx("option",{children:""}),xt.jsx("option",{value:"",children:" (tCO2eq)"}),xt.jsx("option",{value:"",children:" (tCO2eq)"})]}),xt.jsx("label",{children:""}),xt.jsx("select",{className:"stats-input",value:l,onChange:X,children:Object.keys(Ga).map(W=>xt.jsx("option",{value:W,children:Ga[W].name},W))})]}),xt.jsx("div",{className:"sidebar-section",children:xt.jsx("button",{className:"stats-button-primary",onClick:Q,children:" "})})]}),xt.jsxs("main",{className:"main-content",children:[xt.jsx("h2",{children:"  "}),xt.jsxs("div",{className:"chart-section",children:[xt.jsx("h3",{children:"  "}),xt.jsxs("p",{children:[Ga[l]?Ga[l].name:""," ",a.split("-")[0]," ",V," ",V===""?"":"","     "]}),xt.jsx("div",{className:"chart-container",children:xt.jsx(zz,{width:"100%",height:300,children:xt.jsxs(QR,{data:M,margin:{top:30,right:30,left:50,bottom:5},children:[xt.jsx(uT,{strokeDasharray:"3 3"}),xt.jsx(hT,{dataKey:"name",scale:"point",axisLine:!1,tickLine:!1,tick:{fontSize:13}}),xt.jsx(fT,{axisLine:!1,tickLine:!1,tickFormatter:W=>W.toLocaleString(),domain:[0,z],tickCount:5,tick:{fontSize:13},label:{value:"(tCO2eq)",position:"top",offset:17,fontWeight:"bold",fontSize:14,fill:"#333"}}),xt.jsx(cR,{formatter:W=>[`${W.toLocaleString()} tCO2eq`," "]}),xt.jsx(cT,{type:"monotone",dataKey:"",stroke:"#ffbb40",fill:"#ffd54f",strokeWidth:2,activeDot:{r:6},dot:{r:4,fill:"#ffbb40"}})]})})})]}),xt.jsxs("div",{className:"table-section",children:[xt.jsx("h3",{children:Ga[l]?`${Ga[l].name} ${a.split("-")[0]}   `:"   "}),xt.jsx("p",{children:"     ."}),xt.jsx("div",{className:"stats-table-container",children:Y()})]})]})]})}function yet(t){const e=t.replace(/\/$/,"");return e.endsWith("/api")?e:`${e}/api`}function _et(t){const e=String(t??"").match(/(\d{4})\D*?(\d{1,2})/);return e?`${e[1]}${e[2].padStart(2,"0")}`:null}async function vet({apiBase:t,year:e}){const n=yet(t),i=[`${n}/energy/country?year=${e}`,`${n}/energy/country`,`${n}/energy?cityId=0&countyId=0`];let r=null;for(const a of i)try{const g=await fetch(a);if(!g.ok)continue;const _=await g.json();if(r=Array.isArray(_?.items)?_.items:Array.isArray(_)?_:null,r&&r.length)break}catch{}if(!r)return{elec:Array(12).fill(0),gas:Array(12).fill(0)};const l=Array(12).fill(0),f=Array(12).fill(0);for(const a of r){const g=JR(a),_=_et(hw(g,["YEAR_MONTH","yearMonth","YM","ym"]));if(!_||_.slice(0,4)!==String(e))continue;const x=Number(_.slice(4,6));if(!Number.isFinite(x)||x<1||x>12)continue;const M=Ek(hw(g,["USE_ELECT","useElect","ELEC","elec","ELEC_KWH"])),O=Ek(hw(g,["USE_GAS","useGas","GAS","gas","GAS_M3"]));l[x-1]+=M,f[x-1]+=O}return{elec:l,gas:f}}function JR(t,e="",n={}){for(const[i,r]of Object.entries(t||{})){const l=e?`${e}.${i}`:i;r&&typeof r=="object"&&!Array.isArray(r)?JR(r,l,n):n[l]=r}return n}function hw(t,e){for(const n of e)if(n in t)return t[n]}const Ek=t=>{const e=Number(t);return Number.isFinite(e)?e:0};function Ck({title:t,unit:e,data:n,color:i="#2a84ff"}){const r=(n||[]).map(z=>Number(z)||0),l=Math.max(1,...r),f=z=>z>=1e12?{factor:1e12,suffix:""}:z>=1e8?{factor:1e8,suffix:""}:z>=1e4?{factor:1e4,suffix:""}:{factor:1,suffix:""},{factor:a,suffix:g}=f(l),_=r.map(z=>z/a),x=Math.max(1,..._),M=["1","2","3","4","5","6","7","8","9","10","11","12"],O=g?`${g}${e}`:e;return xt.jsxs("div",{style:{border:"1px solid #e6e8ef",borderRadius:12,padding:"14px 14px 12px",background:"#fff",marginTop:12},children:[xt.jsxs("div",{style:{fontSize:13,fontWeight:700,marginBottom:8},children:[t," ",xt.jsxs("span",{style:{color:"#889",fontWeight:500},children:["(",O,")"]})]}),xt.jsx("div",{style:{height:190,display:"flex",alignItems:"flex-end",gap:8},children:_.map((z,F)=>{const V=x>0?z/x:0,H=Math.round(V*130),Q=z>0?z.toLocaleString(void 0,{maximumFractionDigits:1}):"";return xt.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,minWidth:12},children:[xt.jsx("div",{style:{fontSize:11,color:"#555",marginBottom:4,minHeight:14,whiteSpace:"nowrap"},children:Q}),xt.jsx("div",{title:`${M[F]}: ${Q}`,style:{width:16,height:H,borderRadius:4,background:i,opacity:.9,transition:"height 0.2s ease"}}),xt.jsx("div",{style:{fontSize:10,color:"#777",marginTop:4},children:M[F]})]},F)})})]})}function xet(){const t=Z.useMemo(()=>new Date,[]),[e,n]=Z.useState(t.getFullYear()),[i,r]=Z.useState("elec"),l="/api",f=Z.useMemo(()=>{const z=t.getFullYear(),F=z-5;return Array.from({length:z-F+1},(V,H)=>z-H)},[t]),[a,g]=Z.useState(Array(12).fill(0)),[_,x]=Z.useState(Array(12).fill(0)),[M,O]=Z.useState(!1);return Z.useEffect(()=>{let z=!0;return(async()=>{try{O(!0);const F=await vet({apiBase:l,year:e});if(!z)return;g(F.elec),x(F.gas)}finally{z&&O(!1)}})(),()=>{z=!1}},[l,e]),xt.jsx("div",{className:pi.wrap,children:xt.jsxs("div",{className:pi.container,children:[xt.jsxs("header",{className:pi.header,children:[xt.jsx("h1",{children:"  "}),xt.jsx("p",{children:"               ."})]}),xt.jsxs("div",{className:pi.layout,children:[xt.jsxs("aside",{className:pi.side,children:[xt.jsxs("div",{className:pi.filterCard,children:[xt.jsx("div",{className:pi.cardTitle,children:"  "}),xt.jsxs("div",{className:pi.formRow,children:[xt.jsx("label",{className:pi.label,children:""}),xt.jsx("select",{className:pi.selectBig,value:e,onChange:z=>n(Number(z.target.value)),children:f.map(z=>xt.jsxs("option",{value:z,children:[z,""]},z))})]}),xt.jsx("div",{className:pi.sep}),xt.jsx("div",{className:pi.cardTitle,children:" "}),xt.jsxs("div",{className:pi.formRow,children:[xt.jsx("label",{className:pi.label,children:""}),xt.jsxs("select",{className:pi.select,value:i,onChange:z=>r(z.target.value),children:[xt.jsx("option",{value:"elec",children:"(kWh)"}),xt.jsx("option",{value:"gas",children:"(m)"})]})]})]}),xt.jsxs("div",{style:{marginTop:8},children:[xt.jsx(Ck,{title:"  ",unit:"MWh ( kWh)",data:a,color:"#2a84ff"}),xt.jsx(Ck,{title:"  ",unit:"m ( m)",data:_,color:"#ff7a00"}),M&&xt.jsx("div",{style:{fontSize:12,color:"#666",marginTop:6},children:"   "})]})]}),xt.jsxs("section",{className:pi.card,children:[xt.jsxs("div",{className:pi.cardHead,children:[xt.jsx("h3",{children:"  "}),xt.jsx("div",{className:pi.cardSub})]}),xt.jsx("div",{className:pi.panel,style:{height:720},children:xt.jsx(mD,{apiBase:l,year:e,metric:i,autoPlay:!1,intervalMs:900})})]})]})]})})}const t3="label";function Pk(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function bet(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function e3(t,e){t.labels=e}function n3(t,e,n=t3){const i=[];t.datasets=e.map(r=>{const l=t.datasets.find(f=>f[n]===r[n]);return!l||!r.data||i.includes(l)?{...r}:(i.push(l),Object.assign(l,r),l)})}function wet(t,e=t3){const n={labels:[],datasets:[]};return e3(n,t.labels),n3(n,t.datasets,e),n}function Tet(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:l,type:f,data:a,options:g,plugins:_=[],fallbackContent:x,updateMode:M,...O}=t,z=Z.useRef(null),F=Z.useRef(null),V=()=>{z.current&&(F.current=new Bm(z.current,{type:f,data:wet(a,l),options:g&&{...g},plugins:_}),Pk(e,F.current))},H=()=>{Pk(e,null),F.current&&(F.current.destroy(),F.current=null)};return Z.useEffect(()=>{!r&&F.current&&g&&bet(F.current,g)},[r,g]),Z.useEffect(()=>{!r&&F.current&&e3(F.current.config.data,a.labels)},[r,a.labels]),Z.useEffect(()=>{!r&&F.current&&a.datasets&&n3(F.current.config.data,a.datasets,l)},[r,a.datasets]),Z.useEffect(()=>{F.current&&(r?(H(),setTimeout(V)):F.current.update(M))},[r,g,a.labels,a.datasets,M]),Z.useEffect(()=>{F.current&&(H(),setTimeout(V))},[f]),Z.useEffect(()=>(V(),()=>H()),[]),xt.jsx("canvas",{ref:z,role:"img",height:n,width:i,...O,children:x})}const Aet=Z.forwardRef(Tet);function Met(t,e){return Bm.register(e),Z.forwardRef((n,i)=>xt.jsx(Aet,{...n,ref:i,type:t}))}const Eet=Met("line",NO),di={"scenario-page":"_scenario-page_qvlc3_1","scenario-header":"_scenario-header_qvlc3_19","scenario-controls":"_scenario-controls_qvlc3_55","control-group":"_control-group_qvlc3_75","slider-wrapper":"_slider-wrapper_qvlc3_133","slider-header":"_slider-header_qvlc3_145","slider-value":"_slider-value_qvlc3_171","scenario-main":"_scenario-main_qvlc3_197","chart-card":"_chart-card_qvlc3_207","chart-header":"_chart-header_qvlc3_227","chart-meta":"_chart-meta_qvlc3_259","chart-wrapper":"_chart-wrapper_qvlc3_283","stats-grid":"_stats-grid_qvlc3_295","stat-card":"_stat-card_qvlc3_307","stat-value":"_stat-value_qvlc3_343","stat-diff":"_stat-diff_qvlc3_355","stat-highlight":"_stat-highlight_qvlc3_365","distribution-bar":"_distribution-bar_qvlc3_375","reset-button":"_reset-button_qvlc3_409","helper-text":"_helper-text_qvlc3_453","error-box":"_error-box_qvlc3_463","loading-box":"_loading-box_qvlc3_479"};Bm.register(uD,cD,KO,qy,sD,lD,aD);const Cet=.4541,Pet=.202,ket=.3,ym={min:-50,max:50,step:1},Oet=t=>{const e=String(t??"");if(e.length!==6)return{label:e,year:null,month:null};const n=Number(e.slice(0,4)),i=Number(e.slice(4));return{label:`${n}-${String(i).padStart(2,"0")}`,year:n,month:i}},fw=(t,e)=>{const n=Number(t??0),i=Number(e??0);return n*Cet+i*Pet},kk=({cityId:t,countyId:e})=>{const n=new URLSearchParams;return e?(n.append("countyId",e),n):(t&&n.append("cityId",t),n)},Ok=(t,e,n)=>t.map(i=>{const{label:r,year:l,month:f}=Oet(i.yearMonth);return{label:r,year:l,month:f,electricity:Number(i[e]??0),gas:Number(i[n]??0)}}).filter(i=>i.year!=null).sort((i,r)=>i.label>r.label?1:-1);function Det(){const[t,e]=Z.useState("0"),[n,i]=Z.useState("0"),[r,l]=Z.useState(0),[f,a]=Z.useState(0),[g,_]=Z.useState([]),[x,M]=Z.useState([]),[O,z]=Z.useState(!1),[F,V]=Z.useState(null),H=Z.useRef(null);Z.useEffect(()=>{const St=new AbortController;return(async()=>{z(!0),V(null);try{const Vt=kk({cityId:t,countyId:n}),pt=kk({cityId:t,countyId:n}),[Tt,$t]=await Promise.all([fetch(`/api/energy${Vt.toString()?`?${Vt.toString()}`:""}`,{signal:St.signal,headers:{Accept:"application/json"}}),fetch(`/api/predict-energy${pt.toString()?`?${pt.toString()}`:""}`,{signal:St.signal,headers:{Accept:"application/json"}})]);if(!Tt.ok)throw new Error("   ");if(!$t.ok)throw new Error("   ");const Yt=await Tt.json(),se=await $t.json();_(Array.isArray(Yt.items)?Yt.items:[]),M(Array.isArray(se.items)?se.items:[])}catch(Vt){Vt.name!=="AbortError"&&(console.error(Vt),V(Vt.message||"    ."))}finally{z(!1)}})(),()=>St.abort()},[t,n]);const Q=Z.useMemo(()=>Ok(g,"useElect","useGas").filter(St=>St.year==null?!1:St.year<2025?!0:St.year===2025?(St.month??0)<=6:!1),[g]),X=Z.useMemo(()=>Q.map(St=>({...St,ghg:fw(St.electricity,St.gas)})),[Q]),Y=Z.useMemo(()=>X.length>0?X[X.length-1]:null,[X]),W=Z.useMemo(()=>Ok(x,"preElect","preGas"),[x]),J=Z.useMemo(()=>{const St=W.map(jt=>({...jt,ghg:fw(jt.electricity,jt.gas)})).sort((jt,Vt)=>jt.label>Vt.label?1:-1);return Y&&(St.some(Vt=>Vt.label===Y.label)||St.unshift({label:Y.label,year:Y.year,month:Y.month,electricity:Y.electricity,gas:Y.gas,ghg:Y.ghg})),St},[W,Y]),ot=Z.useMemo(()=>{const St=1+r/100,jt=1+f/100,Vt=W.map(pt=>{const Tt=pt.electricity*St,$t=pt.gas*jt;return{...pt,adjustedElectricity:Tt,adjustedGas:$t,ghg:fw(Tt,$t)}}).sort((pt,Tt)=>pt.label>Tt.label?1:-1);return Y&&(Vt.some(Tt=>Tt.label===Y.label)||Vt.unshift({label:Y.label,year:Y.year,month:Y.month,adjustedElectricity:Y.electricity,adjustedGas:Y.gas,ghg:Y.ghg})),Vt},[W,r,f,Y]),ht=Z.useMemo(()=>{const St=new Set([...X.map(jt=>jt.label),...J.map(jt=>jt.label),...ot.map(jt=>jt.label)]);return Array.from(St).sort((jt,Vt)=>jt>Vt?1:-1)},[X,J,ot]),rt=Z.useMemo(()=>{const St=new Map;return ht.forEach(jt=>{const[Vt,pt]=jt.split("-"),Tt=Number(Vt),$t=Number(pt);!Number.isNaN(Tt)&&!Number.isNaN($t)&&St.set(jt,Tt*100+$t)}),St},[ht]),ut=Z.useMemo(()=>{const St=new Map;return J.forEach(jt=>St.set(jt.label,jt)),St},[J]),_t=Z.useMemo(()=>{const St=new Map;return ot.forEach(jt=>St.set(jt.label,jt)),St},[ot]),bt=Z.useMemo(()=>!Y||Y.year==null||Y.month==null?null:Y.year*100+Y.month,[Y]),Pt=Z.useMemo(()=>{const St=[{label:"  (2020~2025)",data:ht.map(jt=>{const Vt=rt.get(jt);if(bt!=null&&Vt!=null&&Vt>bt)return null;const pt=X.find(Tt=>Tt.label===jt);return pt?pt.ghg:null}),borderColor:"#2563eb",backgroundColor:"rgba(37, 99, 235, 0.25)",borderWidth:2,tension:0,spanGaps:!1,pointRadius:3},{label:"  ()",data:ht.map(jt=>ut.get(jt)?.ghg??null),borderColor:"#fbbf24",backgroundColor:"rgba(251, 191, 36, 0.15)",borderWidth:2,borderDash:[6,4],pointRadius:3,tension:.3,cubicInterpolationMode:"monotone",spanGaps:!0},{label:"  ( )",data:ht.map(jt=>_t.get(jt)?.ghg??null),borderColor:"#f97316",backgroundColor:"rgba(249, 115, 22, 0.15)",borderWidth:2,borderDash:[8,6],pointRadius:3,tension:.3,cubicInterpolationMode:"monotone",spanGaps:!0}];return{labels:ht,datasets:St}},[ht,rt,bt,X,ut,_t]),re=Z.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:St=>{const jt=St.parsed.y??0;return`${St.dataset.label}: ${jt.toLocaleString("ko-KR",{minimumFractionDigits:2,maximumFractionDigits:2})} tCO`}}}},scales:{y:{title:{display:!0,text:"  (tCO)"},ticks:{callback:St=>Number(St).toLocaleString("ko-KR",{maximumFractionDigits:0})}},x:{ticks:{maxRotation:45,minRotation:30}}}}),[]),ye=Z.useMemo(()=>{const St=ot.reduce((Pe,we)=>Pe+we.ghg,0),jt=X.reduce((Pe,we)=>Pe+we.ghg,0),pt=(X[X.length-1]?.ghg??jt)*(1-ket),Tt=ot.filter(Pe=>Pe.year===2030).reduce((Pe,we)=>Pe+we.ghg,0),$t=Tt-pt,Yt=pt>0?pt/(Tt||pt)*100:0,se=ot.reduce((Pe,we)=>Pe+we.adjustedElectricity,0),le=ot.reduce((Pe,we)=>Pe+we.adjustedGas,0),Ae=se+le,Ie=Ae?se/Ae*100:0,Wt=Ae?le/Ae*100:0;return{totalPredictedGhG:St,target2030:pt,predicted2030:Tt,delta:$t,achievement:Yt,electricityPortion:Ie,gasPortion:Wt}},[ot,X]),fe=()=>{l(0),a(0)},kt=St=>{St.preventDefault();const jt=new FormData(St.target),Vt=jt.get("cityId")?.trim(),pt=jt.get("countyId")?.trim();e(Vt||""),i(pt||"")},Ot=()=>{e("0"),i("0"),H.current&&(H.current.cityId.value="0",H.current.countyId.value="0")};return xt.jsxs("section",{className:di["scenario-page"],children:[xt.jsxs("header",{className:di["scenario-header"],children:[xt.jsx("h1",{children:"  "}),xt.jsx("p",{children:"          . (2020~2025) (2025~2030)      ."})]}),xt.jsxs("form",{ref:H,className:di["scenario-controls"],onSubmit:kt,children:[xt.jsxs("div",{className:di["control-group"],children:[xt.jsx("label",{htmlFor:"cityId",children:" "}),xt.jsx("input",{id:"cityId",name:"cityId",type:"number",placeholder:": 11000 ( )",defaultValue:t}),xt.jsx("p",{className:di["helper-text"],children:"        .    ."})]}),xt.jsxs("div",{className:di["control-group"],children:[xt.jsx("label",{htmlFor:"countyId",children:"/ "}),xt.jsx("input",{id:"countyId",name:"countyId",type:"number",placeholder:": 11140 ( )",defaultValue:n}),xt.jsx("p",{className:di["helper-text"],children:"/       .     ."})]}),xt.jsxs("div",{className:di["slider-wrapper"],children:[xt.jsxs("div",{className:di["slider-header"],children:[xt.jsx("span",{children:"  "}),xt.jsxs("span",{className:di["slider-value"],children:[r>0?"+":"",r,"%"]})]}),xt.jsx("input",{type:"range",min:ym.min,max:ym.max,step:ym.step,value:r,onChange:St=>l(Number(St.target.value))})]}),xt.jsxs("div",{className:di["slider-wrapper"],children:[xt.jsxs("div",{className:di["slider-header"],children:[xt.jsx("span",{children:"  "}),xt.jsxs("span",{className:di["slider-value"],children:[f>0?"+":"",f,"%"]})]}),xt.jsx("input",{type:"range",min:ym.min,max:ym.max,step:ym.step,value:f,onChange:St=>a(Number(St.target.value))})]}),xt.jsxs("div",{className:di["control-group"],children:[xt.jsx("label",{children:""}),xt.jsx("button",{className:di["reset-button"],type:"submit",children:"  "}),xt.jsx("button",{className:di["reset-button"],type:"button",onClick:fe,style:{backgroundColor:"#d9480f"},children:" "}),xt.jsx("button",{className:di["reset-button"],type:"button",onClick:Ot,style:{backgroundColor:"#0f5132"},children:"  "})]})]}),O&&xt.jsx("div",{className:di["loading-box"],children:"  ..."}),F&&xt.jsx("div",{className:di["error-box"],children:F}),xt.jsxs("div",{className:di["scenario-main"],children:[xt.jsxs("div",{className:di["chart-card"],children:[xt.jsxs("div",{className:di["chart-header"],children:[xt.jsx("h2",{children:"  "}),xt.jsx("p",{children:"          . 2025    /      ."}),xt.jsxs("div",{className:di["chart-meta"],children:[xt.jsxs("span",{children:["  : ",xt.jsx("strong",{children:Y?.label??" "})]}),xt.jsxs("span",{children:["  : ",X.length]}),xt.jsxs("span",{children:["  : ",J.length]})]})]}),xt.jsx("div",{className:di["chart-wrapper"],style:{height:"420px"},children:xt.jsx(Eet,{data:Pt,options:re})})]}),xt.jsxs("div",{className:di["stats-grid"],children:[xt.jsxs("div",{className:di["stat-card"],children:[xt.jsx("h3",{children:"   "}),xt.jsxs("div",{className:di["stat-value"],children:[ye.totalPredictedGhG.toLocaleString("ko-KR",{minimumFractionDigits:2,maximumFractionDigits:2})," ","tCO"]}),xt.jsx("p",{className:di["helper-text"],children:"2025~2030   "})]}),xt.jsxs("div",{className:di["stat-card"],children:[xt.jsx("h3",{children:"2030  "}),xt.jsxs("div",{className:di["stat-value"],children:[ye.delta>=0?"+":"",ye.delta.toLocaleString("ko-KR",{minimumFractionDigits:2,maximumFractionDigits:2})," ","tCO"]}),xt.jsxs("p",{className:di["stat-diff"],children:[" :"," ",xt.jsxs("span",{className:di["stat-highlight"],children:[ye.target2030.toLocaleString("ko-KR",{minimumFractionDigits:2,maximumFractionDigits:2})," ","tCO"]})]}),xt.jsxs("p",{className:di["helper-text"],children:[": ",ye.achievement.toFixed(1),"%"]})]}),xt.jsxs("div",{className:di["stat-card"],children:[xt.jsx("h3",{children:" "}),xt.jsxs("div",{className:di["distribution-bar"],children:[xt.jsx("span",{style:{width:`${ye.electricityPortion}%`,background:"#2563eb"}}),xt.jsx("span",{style:{width:`${ye.gasPortion}%`,background:"#f97316"}})]}),xt.jsxs("p",{className:di["stat-diff"],children:[" ",ye.electricityPortion.toFixed(1),"%   ",ye.gasPortion.toFixed(1),"%"]}),xt.jsx("p",{className:di["helper-text"],children:"      ."})]})]})]})]})}function zet(){return xt.jsxs(RB,{children:[xt.jsx(GB,{}),xt.jsx("main",{className:"pt-20 min-h-[80vh] bg-[#fffbea]",children:xt.jsxs(dB,{children:[xt.jsx(Rd,{path:"/",element:xt.jsx(m8,{})}),xt.jsx(Rd,{path:"scenario",element:xt.jsx(Det,{})}),xt.jsx(Rd,{path:"gas-emission",element:xt.jsx(kU,{})}),xt.jsx(Rd,{path:"energy-usage",element:xt.jsx(xet,{})}),xt.jsx(Rd,{path:"usage-stats",element:xt.jsx(met,{})}),xt.jsx(Rd,{path:"gas-stats",element:xt.jsx(get,{})})]})}),xt.jsx(WB,{})]})}w3.createRoot(document.getElementById("root")).render(xt.jsx(Z.StrictMode,{children:xt.jsx(zet,{})}));
