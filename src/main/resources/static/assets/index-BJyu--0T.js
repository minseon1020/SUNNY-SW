function iD(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function yu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _B(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var $b={exports:{}},ly={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zM;function vB(){if(zM)return ly;zM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,s){var c=null;if(s!==void 0&&(c=""+s),r.key!==void 0&&(c=""+r.key),"key"in r){s={};for(var a in r)a!=="key"&&(s[a]=r[a])}else s=r;return r=s.ref,{$$typeof:t,type:i,key:c,ref:r!==void 0?r:null,props:s}}return ly.Fragment=e,ly.jsx=n,ly.jsxs=n,ly}var LM;function xB(){return LM||(LM=1,$b.exports=vB()),$b.exports}var vt=xB(),qb={exports:{}},oi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RM;function bB(){if(RM)return oi;RM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),O=Symbol.iterator;function I(ft){return ft===null||typeof ft!="object"?null:(ft=O&&ft[O]||ft["@@iterator"],typeof ft=="function"?ft:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,$={};function K(ft,Mt,Lt){this.props=ft,this.context=Mt,this.refs=$,this.updater=Lt||F}K.prototype.isReactComponent={},K.prototype.setState=function(ft,Mt){if(typeof ft!="object"&&typeof ft!="function"&&ft!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ft,Mt,"setState")},K.prototype.forceUpdate=function(ft){this.updater.enqueueForceUpdate(this,ft,"forceUpdate")};function Y(){}Y.prototype=K.prototype;function W(ft,Mt,Lt){this.props=ft,this.context=Mt,this.refs=$,this.updater=Lt||F}var X=W.prototype=new Y;X.constructor=W,V(X,K.prototype),X.isPureReactComponent=!0;var J=Array.isArray;function st(){}var ct={H:null,A:null,T:null,S:null},it=Object.prototype.hasOwnProperty;function ut(ft,Mt,Lt){var Xt=Lt.ref;return{$$typeof:t,type:ft,key:Mt,ref:Xt!==void 0?Xt:null,props:Lt}}function xt(ft,Mt){return ut(ft.type,Mt,ft.props)}function wt(ft){return typeof ft=="object"&&ft!==null&&ft.$$typeof===t}function St(ft){var Mt={"=":"=0",":":"=2"};return"$"+ft.replace(/[=:]/g,function(Lt){return Mt[Lt]})}var le=/\/+/g;function pe(ft,Mt){return typeof ft=="object"&&ft!==null&&ft.key!=null?St(""+ft.key):Mt.toString(36)}function Te(ft){switch(ft.status){case"fulfilled":return ft.value;case"rejected":throw ft.reason;default:switch(typeof ft.status=="string"?ft.then(st,st):(ft.status="pending",ft.then(function(Mt){ft.status==="pending"&&(ft.status="fulfilled",ft.value=Mt)},function(Mt){ft.status==="pending"&&(ft.status="rejected",ft.reason=Mt)})),ft.status){case"fulfilled":return ft.value;case"rejected":throw ft.reason}}throw ft}function Nt(ft,Mt,Lt,Xt,re){var ce=typeof ft;(ce==="undefined"||ce==="boolean")&&(ft=null);var Me=!1;if(ft===null)Me=!0;else switch(ce){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(ft.$$typeof){case t:case e:Me=!0;break;case x:return Me=ft._init,Nt(Me(ft._payload),Mt,Lt,Xt,re)}}if(Me)return re=re(ft),Me=Xt===""?"."+pe(ft,0):Xt,J(re)?(Lt="",Me!=null&&(Lt=Me.replace(le,"$&/")+"/"),Nt(re,Mt,Lt,"",function(Ce){return Ce})):re!=null&&(wt(re)&&(re=xt(re,Lt+(re.key==null||ft&&ft.key===re.key?"":(""+re.key).replace(le,"$&/")+"/")+Me)),Mt.push(re)),1;Me=0;var Ne=Xt===""?".":Xt+":";if(J(ft))for(var Gt=0;Gt<ft.length;Gt++)Xt=ft[Gt],ce=Ne+pe(Xt,Gt),Me+=Nt(Xt,Mt,Lt,ce,re);else if(Gt=I(ft),typeof Gt=="function")for(ft=Gt.call(ft),Gt=0;!(Xt=ft.next()).done;)Xt=Xt.value,ce=Ne+pe(Xt,Gt++),Me+=Nt(Xt,Mt,Lt,ce,re);else if(ce==="object"){if(typeof ft.then=="function")return Nt(Te(ft),Mt,Lt,Xt,re);throw Mt=String(ft),Error("Objects are not valid as a React child (found: "+(Mt==="[object Object]"?"object with keys {"+Object.keys(ft).join(", ")+"}":Mt)+"). If you meant to render a collection of children, use an array instead.")}return Me}function Ct(ft,Mt,Lt){if(ft==null)return ft;var Xt=[],re=0;return Nt(ft,Xt,"","",function(ce){return Mt.call(Lt,ce,re++)}),Xt}function Tt(ft){if(ft._status===-1){var Mt=ft._result;Mt=Mt(),Mt.then(function(Lt){(ft._status===0||ft._status===-1)&&(ft._status=1,ft._result=Lt)},function(Lt){(ft._status===0||ft._status===-1)&&(ft._status=2,ft._result=Lt)}),ft._status===-1&&(ft._status=0,ft._result=Mt)}if(ft._status===1)return ft._result.default;throw ft._result}var Bt=typeof reportError=="function"?reportError:function(ft){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Mt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ft=="object"&&ft!==null&&typeof ft.message=="string"?String(ft.message):String(ft),error:ft});if(!window.dispatchEvent(Mt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ft);return}console.error(ft)},$t={map:Ct,forEach:function(ft,Mt,Lt){Ct(ft,function(){Mt.apply(this,arguments)},Lt)},count:function(ft){var Mt=0;return Ct(ft,function(){Mt++}),Mt},toArray:function(ft){return Ct(ft,function(Mt){return Mt})||[]},only:function(ft){if(!wt(ft))throw Error("React.Children.only expected to receive a single React element child.");return ft}};return oi.Activity=E,oi.Children=$t,oi.Component=K,oi.Fragment=n,oi.Profiler=r,oi.PureComponent=W,oi.StrictMode=i,oi.Suspense=g,oi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ct,oi.__COMPILER_RUNTIME={__proto__:null,c:function(ft){return ct.H.useMemoCache(ft)}},oi.cache=function(ft){return function(){return ft.apply(null,arguments)}},oi.cacheSignal=function(){return null},oi.cloneElement=function(ft,Mt,Lt){if(ft==null)throw Error("The argument must be a React element, but you passed "+ft+".");var Xt=V({},ft.props),re=ft.key;if(Mt!=null)for(ce in Mt.key!==void 0&&(re=""+Mt.key),Mt)!it.call(Mt,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&Mt.ref===void 0||(Xt[ce]=Mt[ce]);var ce=arguments.length-2;if(ce===1)Xt.children=Lt;else if(1<ce){for(var Me=Array(ce),Ne=0;Ne<ce;Ne++)Me[Ne]=arguments[Ne+2];Xt.children=Me}return ut(ft.type,re,Xt)},oi.createContext=function(ft){return ft={$$typeof:c,_currentValue:ft,_currentValue2:ft,_threadCount:0,Provider:null,Consumer:null},ft.Provider=ft,ft.Consumer={$$typeof:s,_context:ft},ft},oi.createElement=function(ft,Mt,Lt){var Xt,re={},ce=null;if(Mt!=null)for(Xt in Mt.key!==void 0&&(ce=""+Mt.key),Mt)it.call(Mt,Xt)&&Xt!=="key"&&Xt!=="__self"&&Xt!=="__source"&&(re[Xt]=Mt[Xt]);var Me=arguments.length-2;if(Me===1)re.children=Lt;else if(1<Me){for(var Ne=Array(Me),Gt=0;Gt<Me;Gt++)Ne[Gt]=arguments[Gt+2];re.children=Ne}if(ft&&ft.defaultProps)for(Xt in Me=ft.defaultProps,Me)re[Xt]===void 0&&(re[Xt]=Me[Xt]);return ut(ft,ce,re)},oi.createRef=function(){return{current:null}},oi.forwardRef=function(ft){return{$$typeof:a,render:ft}},oi.isValidElement=wt,oi.lazy=function(ft){return{$$typeof:x,_payload:{_status:-1,_result:ft},_init:Tt}},oi.memo=function(ft,Mt){return{$$typeof:y,type:ft,compare:Mt===void 0?null:Mt}},oi.startTransition=function(ft){var Mt=ct.T,Lt={};ct.T=Lt;try{var Xt=ft(),re=ct.S;re!==null&&re(Lt,Xt),typeof Xt=="object"&&Xt!==null&&typeof Xt.then=="function"&&Xt.then(st,Bt)}catch(ce){Bt(ce)}finally{Mt!==null&&Lt.types!==null&&(Mt.types=Lt.types),ct.T=Mt}},oi.unstable_useCacheRefresh=function(){return ct.H.useCacheRefresh()},oi.use=function(ft){return ct.H.use(ft)},oi.useActionState=function(ft,Mt,Lt){return ct.H.useActionState(ft,Mt,Lt)},oi.useCallback=function(ft,Mt){return ct.H.useCallback(ft,Mt)},oi.useContext=function(ft){return ct.H.useContext(ft)},oi.useDebugValue=function(){},oi.useDeferredValue=function(ft,Mt){return ct.H.useDeferredValue(ft,Mt)},oi.useEffect=function(ft,Mt){return ct.H.useEffect(ft,Mt)},oi.useEffectEvent=function(ft){return ct.H.useEffectEvent(ft)},oi.useId=function(){return ct.H.useId()},oi.useImperativeHandle=function(ft,Mt,Lt){return ct.H.useImperativeHandle(ft,Mt,Lt)},oi.useInsertionEffect=function(ft,Mt){return ct.H.useInsertionEffect(ft,Mt)},oi.useLayoutEffect=function(ft,Mt){return ct.H.useLayoutEffect(ft,Mt)},oi.useMemo=function(ft,Mt){return ct.H.useMemo(ft,Mt)},oi.useOptimistic=function(ft,Mt){return ct.H.useOptimistic(ft,Mt)},oi.useReducer=function(ft,Mt,Lt){return ct.H.useReducer(ft,Mt,Lt)},oi.useRef=function(ft){return ct.H.useRef(ft)},oi.useState=function(ft){return ct.H.useState(ft)},oi.useSyncExternalStore=function(ft,Mt,Lt){return ct.H.useSyncExternalStore(ft,Mt,Lt)},oi.useTransition=function(){return ct.H.useTransition()},oi.version="19.2.0",oi}var NM;function ig(){return NM||(NM=1,qb.exports=bB()),qb.exports}var Z=ig();const Hy=yu(Z),wB=iD({__proto__:null,default:Hy},[Z]);var Hb={exports:{}},uy={},Zb={exports:{}},Gb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BM;function SB(){return BM||(BM=1,(function(t){function e(Nt,Ct){var Tt=Nt.length;Nt.push(Ct);t:for(;0<Tt;){var Bt=Tt-1>>>1,$t=Nt[Bt];if(0<r($t,Ct))Nt[Bt]=Ct,Nt[Tt]=$t,Tt=Bt;else break t}}function n(Nt){return Nt.length===0?null:Nt[0]}function i(Nt){if(Nt.length===0)return null;var Ct=Nt[0],Tt=Nt.pop();if(Tt!==Ct){Nt[0]=Tt;t:for(var Bt=0,$t=Nt.length,ft=$t>>>1;Bt<ft;){var Mt=2*(Bt+1)-1,Lt=Nt[Mt],Xt=Mt+1,re=Nt[Xt];if(0>r(Lt,Tt))Xt<$t&&0>r(re,Lt)?(Nt[Bt]=re,Nt[Xt]=Tt,Bt=Xt):(Nt[Bt]=Lt,Nt[Mt]=Tt,Bt=Mt);else if(Xt<$t&&0>r(re,Tt))Nt[Bt]=re,Nt[Xt]=Tt,Bt=Xt;else break t}}return Ct}function r(Nt,Ct){var Tt=Nt.sortIndex-Ct.sortIndex;return Tt!==0?Tt:Nt.id-Ct.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var c=Date,a=c.now();t.unstable_now=function(){return c.now()-a}}var g=[],y=[],x=1,E=null,O=3,I=!1,F=!1,V=!1,$=!1,K=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function X(Nt){for(var Ct=n(y);Ct!==null;){if(Ct.callback===null)i(y);else if(Ct.startTime<=Nt)i(y),Ct.sortIndex=Ct.expirationTime,e(g,Ct);else break;Ct=n(y)}}function J(Nt){if(V=!1,X(Nt),!F)if(n(g)!==null)F=!0,st||(st=!0,St());else{var Ct=n(y);Ct!==null&&Te(J,Ct.startTime-Nt)}}var st=!1,ct=-1,it=5,ut=-1;function xt(){return $?!0:!(t.unstable_now()-ut<it)}function wt(){if($=!1,st){var Nt=t.unstable_now();ut=Nt;var Ct=!0;try{t:{F=!1,V&&(V=!1,Y(ct),ct=-1),I=!0;var Tt=O;try{e:{for(X(Nt),E=n(g);E!==null&&!(E.expirationTime>Nt&&xt());){var Bt=E.callback;if(typeof Bt=="function"){E.callback=null,O=E.priorityLevel;var $t=Bt(E.expirationTime<=Nt);if(Nt=t.unstable_now(),typeof $t=="function"){E.callback=$t,X(Nt),Ct=!0;break e}E===n(g)&&i(g),X(Nt)}else i(g);E=n(g)}if(E!==null)Ct=!0;else{var ft=n(y);ft!==null&&Te(J,ft.startTime-Nt),Ct=!1}}break t}finally{E=null,O=Tt,I=!1}Ct=void 0}}finally{Ct?St():st=!1}}}var St;if(typeof W=="function")St=function(){W(wt)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,pe=le.port2;le.port1.onmessage=wt,St=function(){pe.postMessage(null)}}else St=function(){K(wt,0)};function Te(Nt,Ct){ct=K(function(){Nt(t.unstable_now())},Ct)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Nt){Nt.callback=null},t.unstable_forceFrameRate=function(Nt){0>Nt||125<Nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):it=0<Nt?Math.floor(1e3/Nt):5},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_next=function(Nt){switch(O){case 1:case 2:case 3:var Ct=3;break;default:Ct=O}var Tt=O;O=Ct;try{return Nt()}finally{O=Tt}},t.unstable_requestPaint=function(){$=!0},t.unstable_runWithPriority=function(Nt,Ct){switch(Nt){case 1:case 2:case 3:case 4:case 5:break;default:Nt=3}var Tt=O;O=Nt;try{return Ct()}finally{O=Tt}},t.unstable_scheduleCallback=function(Nt,Ct,Tt){var Bt=t.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?Bt+Tt:Bt):Tt=Bt,Nt){case 1:var $t=-1;break;case 2:$t=250;break;case 5:$t=1073741823;break;case 4:$t=1e4;break;default:$t=5e3}return $t=Tt+$t,Nt={id:x++,callback:Ct,priorityLevel:Nt,startTime:Tt,expirationTime:$t,sortIndex:-1},Tt>Bt?(Nt.sortIndex=Tt,e(y,Nt),n(g)===null&&Nt===n(y)&&(V?(Y(ct),ct=-1):V=!0,Te(J,Tt-Bt))):(Nt.sortIndex=$t,e(g,Nt),F||I||(F=!0,st||(st=!0,St()))),Nt},t.unstable_shouldYield=xt,t.unstable_wrapCallback=function(Nt){var Ct=O;return function(){var Tt=O;O=Ct;try{return Nt.apply(this,arguments)}finally{O=Tt}}}})(Gb)),Gb}var jM;function TB(){return jM||(jM=1,Zb.exports=SB()),Zb.exports}var Yb={exports:{}},qo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FM;function MB(){if(FM)return qo;FM=1;var t=ig();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(g,y,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:g,containerInfo:y,implementation:x}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return qo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,qo.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return s(g,y,null,x)},qo.flushSync=function(g){var y=c.T,x=i.p;try{if(c.T=null,i.p=2,g)return g()}finally{c.T=y,i.p=x,i.d.f()}},qo.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},qo.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},qo.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,E=a(x,y.crossOrigin),O=typeof y.integrity=="string"?y.integrity:void 0,I=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:O,fetchPriority:I}):x==="script"&&i.d.X(g,{crossOrigin:E,integrity:O,fetchPriority:I,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},qo.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=a(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},qo.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,E=a(x,y.crossOrigin);i.d.L(g,x,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},qo.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=a(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},qo.requestFormReset=function(g){i.d.r(g)},qo.unstable_batchedUpdates=function(g,y){return g(y)},qo.useFormState=function(g,y,x){return c.H.useFormState(g,y,x)},qo.useFormStatus=function(){return c.H.useHostTransitionStatus()},qo.version="19.2.0",qo}var UM;function rD(){if(UM)return Yb.exports;UM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yb.exports=MB(),Yb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VM;function EB(){if(VM)return uy;VM=1;var t=TB(),e=ig(),n=rD();function i(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)f+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var f=l,_=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(_=f.return),l=f.return;while(l)}return f.tag===3?_:null}function c(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function a(l){if(l.tag===31){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function g(l){if(s(l)!==l)throw Error(i(188))}function y(l){var f=l.alternate;if(!f){if(f=s(l),f===null)throw Error(i(188));return f!==l?null:l}for(var _=l,S=f;;){var z=_.return;if(z===null)break;var B=z.alternate;if(B===null){if(S=z.return,S!==null){_=S;continue}break}if(z.child===B.child){for(B=z.child;B;){if(B===_)return g(z),l;if(B===S)return g(z),f;B=B.sibling}throw Error(i(188))}if(_.return!==S.return)_=z,S=B;else{for(var at=!1,bt=z.child;bt;){if(bt===_){at=!0,_=z,S=B;break}if(bt===S){at=!0,S=z,_=B;break}bt=bt.sibling}if(!at){for(bt=B.child;bt;){if(bt===_){at=!0,_=B,S=z;break}if(bt===S){at=!0,S=B,_=z;break}bt=bt.sibling}if(!at)throw Error(i(189))}}if(_.alternate!==S)throw Error(i(190))}if(_.tag!==3)throw Error(i(188));return _.stateNode.current===_?l:f}function x(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=x(l),f!==null)return f;l=l.sibling}return null}var E=Object.assign,O=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),W=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),st=Symbol.for("react.suspense_list"),ct=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),ut=Symbol.for("react.activity"),xt=Symbol.for("react.memo_cache_sentinel"),wt=Symbol.iterator;function St(l){return l===null||typeof l!="object"?null:(l=wt&&l[wt]||l["@@iterator"],typeof l=="function"?l:null)}var le=Symbol.for("react.client.reference");function pe(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===le?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case V:return"Fragment";case K:return"Profiler";case $:return"StrictMode";case J:return"Suspense";case st:return"SuspenseList";case ut:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case F:return"Portal";case W:return l.displayName||"Context";case Y:return(l._context.displayName||"Context")+".Consumer";case X:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case ct:return f=l.displayName||null,f!==null?f:pe(l.type)||"Memo";case it:f=l._payload,l=l._init;try{return pe(l(f))}catch{}}return null}var Te=Array.isArray,Nt=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ct=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt={pending:!1,data:null,method:null,action:null},Bt=[],$t=-1;function ft(l){return{current:l}}function Mt(l){0>$t||(l.current=Bt[$t],Bt[$t]=null,$t--)}function Lt(l,f){$t++,Bt[$t]=l.current,l.current=f}var Xt=ft(null),re=ft(null),ce=ft(null),Me=ft(null);function Ne(l,f){switch(Lt(ce,f),Lt(re,l),Lt(Xt,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?$e(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=$e(f),l=xn(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Mt(Xt),Lt(Xt,l)}function Gt(){Mt(Xt),Mt(re),Mt(ce)}function Ce(l){l.memoizedState!==null&&Lt(Me,l);var f=Xt.current,_=xn(f,l.type);f!==_&&(Lt(re,l),Lt(Xt,_))}function Ee(l){re.current===l&&(Mt(Xt),Mt(re)),Me.current===l&&(Mt(Me),ry._currentValue=Tt)}var de,on;function Be(l){if(de===void 0)try{throw Error()}catch(_){var f=_.stack.trim().match(/\n( *(at )?)/);de=f&&f[1]||"",on=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+l+on}var ln=!1;function Xe(l,f){if(!l||ln)return"";ln=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(f){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(Ae){var we=Ae}Reflect.construct(l,[],je)}else{try{je.call()}catch(Ae){we=Ae}l.call(je.prototype)}}else{try{throw Error()}catch(Ae){we=Ae}(je=l())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(Ae){if(Ae&&we&&typeof Ae.stack=="string")return[Ae.stack,we.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=S.DetermineComponentFrameRoot(),at=B[0],bt=B[1];if(at&&bt){var Yt=at.split(`
`),be=bt.split(`
`);for(z=S=0;S<Yt.length&&!Yt[S].includes("DetermineComponentFrameRoot");)S++;for(;z<be.length&&!be[z].includes("DetermineComponentFrameRoot");)z++;if(S===Yt.length||z===be.length)for(S=Yt.length-1,z=be.length-1;1<=S&&0<=z&&Yt[S]!==be[z];)z--;for(;1<=S&&0<=z;S--,z--)if(Yt[S]!==be[z]){if(S!==1||z!==1)do if(S--,z--,0>z||Yt[S]!==be[z]){var Ie=`
`+Yt[S].replace(" at new "," at ");return l.displayName&&Ie.includes("<anonymous>")&&(Ie=Ie.replace("<anonymous>",l.displayName)),Ie}while(1<=S&&0<=z);break}}}finally{ln=!1,Error.prepareStackTrace=_}return(_=l?l.displayName||l.name:"")?Be(_):""}function Sn(l,f){switch(l.tag){case 26:case 27:case 5:return Be(l.type);case 16:return Be("Lazy");case 13:return l.child!==f&&f!==null?Be("Suspense Fallback"):Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return Xe(l.type,!1);case 11:return Xe(l.type.render,!1);case 1:return Xe(l.type,!0);case 31:return Be("Activity");default:return""}}function hn(l){try{var f="",_=null;do f+=Sn(l,_),_=l,l=l.return;while(l);return f}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var Rn=Object.prototype.hasOwnProperty,ge=t.unstable_scheduleCallback,Gn=t.unstable_cancelCallback,$i=t.unstable_shouldYield,ni=t.unstable_requestPaint,fn=t.unstable_now,Qi=t.unstable_getCurrentPriorityLevel,mi=t.unstable_ImmediatePriority,Ui=t.unstable_UserBlockingPriority,Dr=t.unstable_NormalPriority,ws=t.unstable_LowPriority,Oa=t.unstable_IdlePriority,Vr=t.log,Fe=t.unstable_setDisableYieldValue,yr=null,Yn=null;function ga(l){if(typeof Vr=="function"&&Fe(l),Yn&&typeof Yn.setStrictMode=="function")try{Yn.setStrictMode(yr,l)}catch{}}var _r=Math.clz32?Math.clz32:kn,Ze=Math.log,In=Math.LN2;function kn(l){return l>>>=0,l===0?32:31-(Ze(l)/In|0)|0}var Ir=256,ya=262144,Cn=4194304;function Gr(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function It(l,f,_){var S=l.pendingLanes;if(S===0)return 0;var z=0,B=l.suspendedLanes,at=l.pingedLanes;l=l.warmLanes;var bt=S&134217727;return bt!==0?(S=bt&~B,S!==0?z=Gr(S):(at&=bt,at!==0?z=Gr(at):_||(_=bt&~l,_!==0&&(z=Gr(_))))):(bt=S&~B,bt!==0?z=Gr(bt):at!==0?z=Gr(at):_||(_=S&~l,_!==0&&(z=Gr(_)))),z===0?0:f!==0&&f!==z&&(f&B)===0&&(B=z&-z,_=f&-f,B>=_||B===32&&(_&4194048)!==0)?f:z}function lt(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function dt(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Et(){var l=Cn;return Cn<<=1,(Cn&62914560)===0&&(Cn=4194304),l}function zt(l){for(var f=[],_=0;31>_;_++)f.push(l);return f}function jt(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ie(l,f,_,S,z,B){var at=l.pendingLanes;l.pendingLanes=_,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=_,l.entangledLanes&=_,l.errorRecoveryDisabledLanes&=_,l.shellSuspendCounter=0;var bt=l.entanglements,Yt=l.expirationTimes,be=l.hiddenUpdates;for(_=at&~_;0<_;){var Ie=31-_r(_),je=1<<Ie;bt[Ie]=0,Yt[Ie]=-1;var we=be[Ie];if(we!==null)for(be[Ie]=null,Ie=0;Ie<we.length;Ie++){var Ae=we[Ie];Ae!==null&&(Ae.lane&=-536870913)}_&=~je}S!==0&&Wt(l,S,0),B!==0&&z===0&&l.tag!==0&&(l.suspendedLanes|=B&~(at&~f))}function Wt(l,f,_){l.pendingLanes|=f,l.suspendedLanes&=~f;var S=31-_r(f);l.entangledLanes|=f,l.entanglements[S]=l.entanglements[S]|1073741824|_&261930}function qt(l,f){var _=l.entangledLanes|=f;for(l=l.entanglements;_;){var S=31-_r(_),z=1<<S;z&f|l[S]&f&&(l[S]|=f),_&=~z}}function Jt(l,f){var _=f&-f;return _=(_&42)!==0?1:Se(_),(_&(l.suspendedLanes|f))!==0?0:_}function Se(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function se(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Oe(){var l=Ct.p;return l!==0?l:(l=window.event,l===void 0?32:AM(l.type))}function yn(l,f){var _=Ct.p;try{return Ct.p=l,f()}finally{Ct.p=_}}var _n=Math.random().toString(36).slice(2),Ke="__reactFiber$"+_n,an="__reactProps$"+_n,Tn="__reactContainer$"+_n,Wn="__reactEvents$"+_n,gi="__reactListeners$"+_n,qn="__reactHandles$"+_n,Hn="__reactResources$"+_n,Ji="__reactMarker$"+_n;function yi(l){delete l[Ke],delete l[an],delete l[Wn],delete l[gi],delete l[qn]}function Oi(l){var f=l[Ke];if(f)return f;for(var _=l.parentNode;_;){if(f=_[Tn]||_[Ke]){if(_=f.alternate,f.child!==null||_!==null&&_.child!==null)for(l=_s(l);l!==null;){if(_=l[Ke])return _;l=_s(l)}return f}l=_,_=l.parentNode}return null}function hr(l){if(l=l[Ke]||l[Tn]){var f=l.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return l}return null}function zr(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(i(33))}function Fs(l){var f=l[Hn];return f||(f=l[Hn]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function ci(l){l[Ji]=!0}var as=new Set,Js={};function Un(l,f){Da(l,f),Da(l+"Capture",f)}function Da(l,f){for(Js[l]=f,l=0;l<f.length;l++)as.add(f[l])}var Yr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qi={},oa={};function Sl(l){return Rn.call(oa,l)?!0:Rn.call(qi,l)?!1:Yr.test(l)?oa[l]=!0:(qi[l]=!0,!1)}function On(l,f,_){if(Sl(f))if(_===null)l.removeAttribute(f);else{switch(typeof _){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var S=f.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+_)}}function An(l,f,_){if(_===null)l.removeAttribute(f);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+_)}}function $r(l,f,_,S){if(S===null)l.removeAttribute(_);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(_);return}l.setAttributeNS(f,_,""+S)}}function tr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function _i(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function ii(l,f,_){var S=Object.getOwnPropertyDescriptor(l.constructor.prototype,f);if(!l.hasOwnProperty(f)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var z=S.get,B=S.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return z.call(this)},set:function(at){_=""+at,B.call(this,at)}}),Object.defineProperty(l,f,{enumerable:S.enumerable}),{getValue:function(){return _},setValue:function(at){_=""+at},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function Pn(l){if(!l._valueTracker){var f=_i(l)?"checked":"value";l._valueTracker=ii(l,f,""+l[f])}}function zn(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var _=f.getValue(),S="";return l&&(S=_i(l)?l.checked?"true":"false":l.value),l=S,l!==_?(f.setValue(l),!0):!1}function la(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var _a=/[\n"\\]/g;function Hi(l){return l.replace(_a,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function ss(l,f,_,S,z,B,at,bt){l.name="",at!=null&&typeof at!="function"&&typeof at!="symbol"&&typeof at!="boolean"?l.type=at:l.removeAttribute("type"),f!=null?at==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+tr(f)):l.value!==""+tr(f)&&(l.value=""+tr(f)):at!=="submit"&&at!=="reset"||l.removeAttribute("value"),f!=null?Ss(l,at,tr(f)):_!=null?Ss(l,at,tr(_)):S!=null&&l.removeAttribute("value"),z==null&&B!=null&&(l.defaultChecked=!!B),z!=null&&(l.checked=z&&typeof z!="function"&&typeof z!="symbol"),bt!=null&&typeof bt!="function"&&typeof bt!="symbol"&&typeof bt!="boolean"?l.name=""+tr(bt):l.removeAttribute("name")}function Ko(l,f,_,S,z,B,at,bt){if(B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(l.type=B),f!=null||_!=null){if(!(B!=="submit"&&B!=="reset"||f!=null)){Pn(l);return}_=_!=null?""+tr(_):"",f=f!=null?""+tr(f):_,bt||f===l.value||(l.value=f),l.defaultValue=f}S=S??z,S=typeof S!="function"&&typeof S!="symbol"&&!!S,l.checked=bt?l.checked:!!S,l.defaultChecked=!!S,at!=null&&typeof at!="function"&&typeof at!="symbol"&&typeof at!="boolean"&&(l.name=at),Pn(l)}function Ss(l,f,_){f==="number"&&la(l.ownerDocument)===l||l.defaultValue===""+_||(l.defaultValue=""+_)}function Di(l,f,_,S){if(l=l.options,f){f={};for(var z=0;z<_.length;z++)f["$"+_[z]]=!0;for(_=0;_<l.length;_++)z=f.hasOwnProperty("$"+l[_].value),l[_].selected!==z&&(l[_].selected=z),z&&S&&(l[_].defaultSelected=!0)}else{for(_=""+tr(_),f=null,z=0;z<l.length;z++){if(l[z].value===_){l[z].selected=!0,S&&(l[z].defaultSelected=!0);return}f!==null||l[z].disabled||(f=l[z])}f!==null&&(f.selected=!0)}}function yt(l,f,_){if(f!=null&&(f=""+tr(f),f!==l.value&&(l.value=f),_==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=_!=null?""+tr(_):""}function At(l,f,_,S){if(f==null){if(S!=null){if(_!=null)throw Error(i(92));if(Te(S)){if(1<S.length)throw Error(i(93));S=S[0]}_=S}_==null&&(_=""),f=_}_=tr(f),l.defaultValue=_,S=l.textContent,S===_&&S!==""&&S!==null&&(l.value=S),Pn(l)}function Zt(l,f){if(f){var _=l.firstChild;if(_&&_===l.lastChild&&_.nodeType===3){_.nodeValue=f;return}}l.textContent=f}var ye=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ue(l,f,_){var S=f.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?S?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":S?l.setProperty(f,_):typeof _!="number"||_===0||ye.has(f)?f==="float"?l.cssFloat=_:l[f]=(""+_).trim():l[f]=_+"px"}function cn(l,f,_){if(f!=null&&typeof f!="object")throw Error(i(62));if(l=l.style,_!=null){for(var S in _)!_.hasOwnProperty(S)||f!=null&&f.hasOwnProperty(S)||(S.indexOf("--")===0?l.setProperty(S,""):S==="float"?l.cssFloat="":l[S]="");for(var z in f)S=f[z],f.hasOwnProperty(z)&&_[z]!==S&&Ue(l,z,S)}else for(var B in f)f.hasOwnProperty(B)&&Ue(l,B,f[B])}function Vn(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tr(l){return Sr.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function fr(){}var Yu=null;function Tl(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Zl=null,Nn=null;function Ts(l){var f=hr(l);if(f&&(l=f.stateNode)){var _=l[an]||null;t:switch(l=f.stateNode,f.type){case"input":if(ss(l,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),f=_.name,_.type==="radio"&&f!=null){for(_=l;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+Hi(""+f)+'"][type="radio"]'),f=0;f<_.length;f++){var S=_[f];if(S!==l&&S.form===l.form){var z=S[an]||null;if(!z)throw Error(i(90));ss(S,z.value,z.defaultValue,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name)}}for(f=0;f<_.length;f++)S=_[f],S.form===l.form&&zn(S)}break t;case"textarea":yt(l,_.value,_.defaultValue);break t;case"select":f=_.value,f!=null&&Di(l,!!_.multiple,f,!1)}}}var Ii=!1;function Qo(l,f,_){if(Ii)return l(f,_);Ii=!0;try{var S=l(f);return S}finally{if(Ii=!1,(Zl!==null||Nn!==null)&&(Ld(),Zl&&(f=Zl,l=Nn,Nn=Zl=null,Ts(f),l)))for(f=0;f<l.length;f++)Ts(l[f])}}function bo(l,f){var _=l.stateNode;if(_===null)return null;var S=_[an]||null;if(S===null)return null;_=S[f];t:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(l=l.type,S=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!S;break t;default:l=!1}if(l)return null;if(_&&typeof _!="function")throw Error(i(231,f,typeof _));return _}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ml=!1;if(Mr)try{var os={};Object.defineProperty(os,"passive",{get:function(){Ml=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{Ml=!1}var ls=null,wo=null,or=null;function Ya(){if(or)return or;var l,f=wo,_=f.length,S,z="value"in ls?ls.value:ls.textContent,B=z.length;for(l=0;l<_&&f[l]===z[l];l++);var at=_-l;for(S=1;S<=at&&f[_-S]===z[B-S];S++);return or=z.slice(l,1<S?1-S:void 0)}function Xn(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function El(){return!0}function us(){return!1}function Wi(l){function f(_,S,z,B,at){this._reactName=_,this._targetInst=z,this.type=S,this.nativeEvent=B,this.target=at,this.currentTarget=null;for(var bt in l)l.hasOwnProperty(bt)&&(_=l[bt],this[bt]=_?_(B):B[bt]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?El:us,this.isPropagationStopped=us,this}return E(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),f}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gl=Wi(to),Jo=E({},to,{view:0,detail:0}),hi=Wi(Jo),Wu,Ia,eo,Yl=E({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ic,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==eo&&(eo&&l.type==="mousemove"?(Wu=l.screenX-eo.screenX,Ia=l.screenY-eo.screenY):Ia=Wu=0,eo=l),Wu)},movementY:function(l){return"movementY"in l?l.movementY:Ia}}),Xu=Wi(Yl),kc=E({},Yl,{dataTransfer:0}),pf=Wi(kc),Wl=E({},Jo,{relatedTarget:0}),hh=Wi(Wl),cd=E({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),fh=Wi(cd),hd=E({},to,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),So=Wi(hd),fd=E({},to,{data:0}),Ku=Wi(fd),no={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Al(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=Dc[l])?!!f[l]:!1}function Ic(){return Al}var dh=E({},Jo,{key:function(l){if(l.key){var f=no[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=Xn(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Oc[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ic,charCode:function(l){return l.type==="keypress"?Xn(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Xn(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),zc=Wi(dh),Xl=E({},Yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ph=Wi(Xl),To=E({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ic}),vu=Wi(To),mh=E({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lc=Wi(mh),fi=E({},Yl,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),zi=Wi(fi),dd=E({},to,{newState:0,oldState:0}),Kn=Wi(dd),ua=[9,13,27,32],Xi=Mr&&"CompositionEvent"in window,Li=null;Mr&&"documentMode"in document&&(Li=document.documentMode);var Qu=Mr&&"TextEvent"in window&&!Li,Ju=Mr&&(!Xi||Li&&8<Li&&11>=Li),xu=" ",tc=!1;function ec(l,f){switch(l){case"keyup":return ua.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nc(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var tl=!1;function Ms(l,f){switch(l){case"compositionend":return nc(f);case"keypress":return f.which!==32?null:(tc=!0,xu);case"textInput":return l=f.data,l===xu&&tc?null:l;default:return null}}function Mo(l,f){if(tl)return l==="compositionend"||!Xi&&ec(l,f)?(l=Ya(),or=wo=ls=null,tl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Ju&&f.locale!=="ko"?null:f.data;default:return null}}var ic={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cs(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!ic[l.type]:f==="textarea"}function mf(l,f,_,S){Zl?Nn?Nn.push(S):Nn=[S]:Zl=S,f=_t(f,"onChange"),0<f.length&&(_=new Gl("onChange","change",null,_,S),l.push({event:_,listeners:f}))}var Us=null,rc=null;function bu(l){k(l,0)}function Cl(l){var f=zr(l);if(zn(f))return l}function Kl(l,f){if(l==="change")return f}var gh=!1;if(Mr){var io;if(Mr){var Eo="oninput"in document;if(!Eo){var ac=document.createElement("div");ac.setAttribute("oninput","return;"),Eo=typeof ac.oninput=="function"}io=Eo}else io=!1;gh=io&&(!document.documentMode||9<document.documentMode)}function Ql(){Us&&(Us.detachEvent("onpropertychange",yh),rc=Us=null)}function yh(l){if(l.propertyName==="value"&&Cl(rc)){var f=[];mf(f,rc,l,Tl(l)),Qo(bu,f)}}function Ti(l,f,_){l==="focusin"?(Ql(),Us=f,rc=_,Us.attachEvent("onpropertychange",yh)):l==="focusout"&&Ql()}function Jl(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Cl(rc)}function Wr(l,f){if(l==="click")return Cl(f)}function wu(l,f){if(l==="input"||l==="change")return Cl(f)}function Es(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var Xr=typeof Object.is=="function"?Object.is:Es;function Vs(l,f){if(Xr(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var _=Object.keys(l),S=Object.keys(f);if(_.length!==S.length)return!1;for(S=0;S<_.length;S++){var z=_[S];if(!Rn.call(f,z)||!Xr(l[z],f[z]))return!1}return!0}function Pl(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Ao(l,f){var _=Pl(l);l=0;for(var S;_;){if(_.nodeType===3){if(S=l+_.textContent.length,l<=f&&S>=f)return{node:_,offset:f-l};l=S}t:{for(;_;){if(_.nextSibling){_=_.nextSibling;break t}_=_.parentNode}_=void 0}_=Pl(_)}}function sc(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?sc(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function Su(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=la(l.document);f instanceof l.HTMLIFrameElement;){try{var _=typeof f.contentWindow.location.href=="string"}catch{_=!1}if(_)l=f.contentWindow;else break;f=la(l.document)}return f}function el(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var oc=Mr&&"documentMode"in document&&11>=document.documentMode,nl=null,As=null,il=null,ca=!1;function Tu(l,f,_){var S=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;ca||nl==null||nl!==la(S)||(S=nl,"selectionStart"in S&&el(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),il&&Vs(il,S)||(il=S,S=_t(As,"onSelect"),0<S.length&&(f=new Gl("onSelect","select",null,f,_),l.push({event:f,listeners:S}),f.target=nl)))}function rl(l,f){var _={};return _[l.toLowerCase()]=f.toLowerCase(),_["Webkit"+l]="webkit"+f,_["Moz"+l]="moz"+f,_}var tu={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionrun:rl("Transition","TransitionRun"),transitionstart:rl("Transition","TransitionStart"),transitioncancel:rl("Transition","TransitionCancel"),transitionend:rl("Transition","TransitionEnd")},lc={},al={};Mr&&(al=document.createElement("div").style,"AnimationEvent"in window||(delete tu.animationend.animation,delete tu.animationiteration.animation,delete tu.animationstart.animation),"TransitionEvent"in window||delete tu.transitionend.transition);function va(l){if(lc[l])return lc[l];if(!tu[l])return l;var f=tu[l],_;for(_ in f)if(f.hasOwnProperty(_)&&_ in al)return lc[l]=f[_];return l}var za=va("animationend"),Co=va("animationiteration"),kl=va("animationstart"),sl=va("transitionrun"),Po=va("transitionstart"),pd=va("transitioncancel"),Ol=va("transitionend"),_h=new Map,ro="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ro.push("scrollEnd");function xa(l,f){_h.set(l,f),Un(f,[l])}var Cs=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Qe=[],ba=0,ao=0;function ko(){for(var l=ba,f=ao=ba=0;f<l;){var _=Qe[f];Qe[f++]=null;var S=Qe[f];Qe[f++]=null;var z=Qe[f];Qe[f++]=null;var B=Qe[f];if(Qe[f++]=null,S!==null&&z!==null){var at=S.pending;at===null?z.next=z:(z.next=at.next,at.next=z),S.pending=z}B!==0&&Dl(_,z,B)}}function ol(l,f,_,S){Qe[ba++]=l,Qe[ba++]=f,Qe[ba++]=_,Qe[ba++]=S,ao|=S,l.lanes|=S,l=l.alternate,l!==null&&(l.lanes|=S)}function en(l,f,_,S){return ol(l,f,_,S),uc(l)}function $s(l,f){return ol(l,null,null,f),uc(l)}function Dl(l,f,_){l.lanes|=_;var S=l.alternate;S!==null&&(S.lanes|=_);for(var z=!1,B=l.return;B!==null;)B.childLanes|=_,S=B.alternate,S!==null&&(S.childLanes|=_),B.tag===22&&(l=B.stateNode,l===null||l._visibility&1||(z=!0)),l=B,B=B.return;return l.tag===3?(B=l.stateNode,z&&f!==null&&(z=31-_r(_),l=B.hiddenUpdates,S=l[z],S===null?l[z]=[f]:S.push(f),f.lane=_|536870912),B):null}function uc(l){if(50<Dh)throw Dh=0,Of=null,Error(i(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var ll={};function gf(l,f,_,S){this.tag=l,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wa(l,f,_,S){return new gf(l,f,_,S)}function cc(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Oo(l,f){var _=l.alternate;return _===null?(_=Wa(l.tag,f,l.key,l.mode),_.elementType=l.elementType,_.type=l.type,_.stateNode=l.stateNode,_.alternate=l,l.alternate=_):(_.pendingProps=f,_.type=l.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=l.flags&65011712,_.childLanes=l.childLanes,_.lanes=l.lanes,_.child=l.child,_.memoizedProps=l.memoizedProps,_.memoizedState=l.memoizedState,_.updateQueue=l.updateQueue,f=l.dependencies,_.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},_.sibling=l.sibling,_.index=l.index,_.ref=l.ref,_.refCleanup=l.refCleanup,_}function hc(l,f){l.flags&=65011714;var _=l.alternate;return _===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=_.childLanes,l.lanes=_.lanes,l.child=_.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=_.memoizedProps,l.memoizedState=_.memoizedState,l.updateQueue=_.updateQueue,l.type=_.type,f=_.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function eu(l,f,_,S,z,B){var at=0;if(S=l,typeof l=="function")cc(l)&&(at=1);else if(typeof l=="string")at=Ds(l,_,Xt.current)?26:l==="html"||l==="head"||l==="body"?27:5;else t:switch(l){case ut:return l=Wa(31,_,f,z),l.elementType=ut,l.lanes=B,l;case V:return ul(_.children,z,B,f);case $:at=8,z|=24;break;case K:return l=Wa(12,_,f,z|2),l.elementType=K,l.lanes=B,l;case J:return l=Wa(13,_,f,z),l.elementType=J,l.lanes=B,l;case st:return l=Wa(19,_,f,z),l.elementType=st,l.lanes=B,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case W:at=10;break t;case Y:at=9;break t;case X:at=11;break t;case ct:at=14;break t;case it:at=16,S=null;break t}at=29,_=Error(i(130,l===null?"null":typeof l,"")),S=null}return f=Wa(at,_,f,z),f.elementType=l,f.type=S,f.lanes=B,f}function ul(l,f,_,S){return l=Wa(7,l,S,f),l.lanes=_,l}function Mu(l,f,_){return l=Wa(6,l,null,f),l.lanes=_,l}function La(l){var f=Wa(18,null,null,0);return f.stateNode=l,f}function Do(l,f,_){return f=Wa(4,l.children!==null?l.children:[],l.key,f),f.lanes=_,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var p=new WeakMap;function w(l,f){if(typeof l=="object"&&l!==null){var _=p.get(l);return _!==void 0?_:(f={value:l,source:f,stack:hn(f)},p.set(l,f),f)}return{value:l,source:f,stack:hn(f)}}var D=[],q=0,nt=null,mt=0,Ft=[],ue=0,ve=null,Le=1,rn="";function Mn(l,f){D[q++]=mt,D[q++]=nt,nt=l,mt=f}function ri(l,f,_){Ft[ue++]=Le,Ft[ue++]=rn,Ft[ue++]=ve,ve=l;var S=Le;l=rn;var z=32-_r(S)-1;S&=~(1<<z),_+=1;var B=32-_r(f)+z;if(30<B){var at=z-z%5;B=(S&(1<<at)-1).toString(32),S>>=at,z-=at,Le=1<<32-_r(f)+z|_<<z|S,rn=B+l}else Le=1<<B|_<<z|S,rn=l}function Mi(l){l.return!==null&&(Mn(l,1),ri(l,1,0))}function vr(l){for(;l===nt;)nt=D[--q],D[q]=null,mt=D[--q],D[q]=null;for(;l===ve;)ve=Ft[--ue],Ft[ue]=null,rn=Ft[--ue],Ft[ue]=null,Le=Ft[--ue],Ft[ue]=null}function sn(l,f){Ft[ue++]=Le,Ft[ue++]=rn,Ft[ue++]=ve,Le=f.id,rn=f.overflow,ve=l}var Je=null,vi=null,ui=!1,Io=null,bi=!1,Eu=Error(i(519));function Kr(l){var f=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cl(w(f,l)),Eu}function Rc(l){var f=l.stateNode,_=l.type,S=l.memoizedProps;switch(f[Ke]=l,f[an]=S,_){case"dialog":R("cancel",f),R("close",f);break;case"iframe":case"object":case"embed":R("load",f);break;case"video":case"audio":for(_=0;_<T.length;_++)R(T[_],f);break;case"source":R("error",f);break;case"img":case"image":case"link":R("error",f),R("load",f);break;case"details":R("toggle",f);break;case"input":R("invalid",f),Ko(f,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":R("invalid",f);break;case"textarea":R("invalid",f),At(f,S.value,S.defaultValue,S.children)}_=S.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||f.textContent===""+_||S.suppressHydrationWarning===!0||ae(f.textContent,_)?(S.popover!=null&&(R("beforetoggle",f),R("toggle",f)),S.onScroll!=null&&R("scroll",f),S.onScrollEnd!=null&&R("scrollend",f),S.onClick!=null&&(f.onclick=fr),f=!0):f=!1,f||Kr(l,!0)}function Ki(l){for(Je=l.return;Je;)switch(Je.tag){case 5:case 31:case 13:bi=!1;return;case 27:case 3:bi=!0;return;default:Je=Je.return}}function Ei(l){if(l!==Je)return!1;if(!ui)return Ki(l),ui=!0,!1;var f=l.tag,_;if((_=f!==3&&f!==27)&&((_=f===5)&&(_=l.type,_=!(_!=="form"&&_!=="button")||gn(l.type,l.memoizedProps)),_=!_),_&&vi&&Kr(l),Ki(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));vi=si(l)}else if(f===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));vi=si(l)}else f===27?(f=vi,Pr(l.type)?(l=na,na=null,vi=l):vi=f):vi=Je?kr(l.stateNode.nextSibling):null;return!0}function Ri(){vi=Je=null,ui=!1}function Il(){var l=Io;return l!==null&&(Bo===null?Bo=l:Bo.push.apply(Bo,l),Io=null),l}function cl(l){Io===null?Io=[l]:Io.push(l)}var hl=ft(null),hs=null,so=null;function zl(l,f,_){Lt(hl,f._currentValue),f._currentValue=_}function qs(l){l._currentValue=hl.current,Mt(hl)}function vh(l,f,_){for(;l!==null;){var S=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),l===_)break;l=l.return}}function xh(l,f,_,S){var z=l.child;for(z!==null&&(z.return=l);z!==null;){var B=z.dependencies;if(B!==null){var at=z.child;B=B.firstContext;t:for(;B!==null;){var bt=B;B=z;for(var Yt=0;Yt<f.length;Yt++)if(bt.context===f[Yt]){B.lanes|=_,bt=B.alternate,bt!==null&&(bt.lanes|=_),vh(B.return,_,l),S||(at=null);break t}B=bt.next}}else if(z.tag===18){if(at=z.return,at===null)throw Error(i(341));at.lanes|=_,B=at.alternate,B!==null&&(B.lanes|=_),vh(at,_,l),at=null}else at=z.child;if(at!==null)at.return=z;else for(at=z;at!==null;){if(at===l){at=null;break}if(z=at.sibling,z!==null){z.return=at.return,at=z;break}at=at.return}z=at}}function di(l,f,_,S){l=null;for(var z=f,B=!1;z!==null;){if(!B){if((z.flags&524288)!==0)B=!0;else if((z.flags&262144)!==0)break}if(z.tag===10){var at=z.alternate;if(at===null)throw Error(i(387));if(at=at.memoizedProps,at!==null){var bt=z.type;Xr(z.pendingProps.value,at.value)||(l!==null?l.push(bt):l=[bt])}}else if(z===Me.current){if(at=z.alternate,at===null)throw Error(i(387));at.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(l!==null?l.push(ry):l=[ry])}z=z.return}l!==null&&xh(f,l,_,S),f.flags|=262144}function A(l){for(l=l.firstContext;l!==null;){if(!Xr(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function u(l){hs=l,so=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function m(l){return M(hs,l)}function b(l,f){return hs===null&&u(l),M(l,f)}function M(l,f){var _=f._currentValue;if(f={context:f,memoizedValue:_,next:null},so===null){if(l===null)throw Error(i(308));so=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else so=so.next=f;return _}var C=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(_,S){l.push(S)}};this.abort=function(){f.aborted=!0,l.forEach(function(_){return _()})}},N=t.unstable_scheduleCallback,j=t.unstable_NormalPriority,H={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Q(){return{controller:new C,data:new Map,refCount:0}}function et(l){l.refCount--,l.refCount===0&&N(j,function(){l.controller.abort()})}var rt=null,pt=0,Ot=0,kt=null;function Rt(l,f){if(rt===null){var _=rt=[];pt=0,Ot=Hd(),kt={status:"pending",value:void 0,then:function(S){_.push(S)}}}return pt++,f.then(Pt,Pt),f}function Pt(){if(--pt===0&&rt!==null){kt!==null&&(kt.status="fulfilled");var l=rt;rt=null,Ot=0,kt=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function Qt(l,f){var _=[],S={status:"pending",value:null,reason:null,then:function(z){_.push(z)}};return l.then(function(){S.status="fulfilled",S.value=f;for(var z=0;z<_.length;z++)(0,_[z])(f)},function(z){for(S.status="rejected",S.reason=z,z=0;z<_.length;z++)(0,_[z])(void 0)}),S}var fe=Nt.S;Nt.S=function(l,f){mv=fn(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&Rt(l,f),fe!==null&&fe(l,f)};var Vt=ft(null);function te(){var l=Vt.current;return l!==null?l:ur.pooledCache}function me(l,f){f===null?Lt(Vt,Vt.current):Lt(Vt,f.pool)}function xe(){var l=te();return l===null?null:{parent:H._currentValue,pool:l}}var Pe=Error(i(460)),Ve=Error(i(474)),ze=Error(i(542)),qe={then:function(){}};function dn(l){return l=l.status,l==="fulfilled"||l==="rejected"}function ai(l,f,_){switch(_=l[_],_===void 0?l.push(f):_!==f&&(f.then(fr,fr),f=_),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,Vi(l),l;default:if(typeof f.status=="string")f.then(fr,fr);else{if(l=ur,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=f,l.status="pending",l.then(function(S){if(f.status==="pending"){var z=f;z.status="fulfilled",z.value=S}},function(S){if(f.status==="pending"){var z=f;z.status="rejected",z.reason=S}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,Vi(l),l}throw vn=f,Pe}}function Ye(l){try{var f=l._init;return f(l._payload)}catch(_){throw _!==null&&typeof _=="object"&&typeof _.then=="function"?(vn=_,Pe):_}}var vn=null;function pn(){if(vn===null)throw Error(i(459));var l=vn;return vn=null,l}function Vi(l){if(l===Pe||l===ze)throw Error(i(483))}var Zn=null,Fn=0;function ei(l){var f=Fn;return Fn+=1,Zn===null&&(Zn=[]),ai(Zn,l,f)}function dr(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function Zi(l,f){throw f.$$typeof===O?Error(i(525)):(l=Object.prototype.toString.call(f),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function Ra(l){function f(he,ee){if(l){var _e=he.deletions;_e===null?(he.deletions=[ee],he.flags|=16):_e.push(ee)}}function _(he,ee){if(!l)return null;for(;ee!==null;)f(he,ee),ee=ee.sibling;return null}function S(he){for(var ee=new Map;he!==null;)he.key!==null?ee.set(he.key,he):ee.set(he.index,he),he=he.sibling;return ee}function z(he,ee){return he=Oo(he,ee),he.index=0,he.sibling=null,he}function B(he,ee,_e){return he.index=_e,l?(_e=he.alternate,_e!==null?(_e=_e.index,_e<ee?(he.flags|=67108866,ee):_e):(he.flags|=67108866,ee)):(he.flags|=1048576,ee)}function at(he){return l&&he.alternate===null&&(he.flags|=67108866),he}function bt(he,ee,_e,Re){return ee===null||ee.tag!==6?(ee=Mu(_e,he.mode,Re),ee.return=he,ee):(ee=z(ee,_e),ee.return=he,ee)}function Yt(he,ee,_e,Re){var Ln=_e.type;return Ln===V?Ie(he,ee,_e.props.children,Re,_e.key):ee!==null&&(ee.elementType===Ln||typeof Ln=="object"&&Ln!==null&&Ln.$$typeof===it&&Ye(Ln)===ee.type)?(ee=z(ee,_e.props),dr(ee,_e),ee.return=he,ee):(ee=eu(_e.type,_e.key,_e.props,null,he.mode,Re),dr(ee,_e),ee.return=he,ee)}function be(he,ee,_e,Re){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==_e.containerInfo||ee.stateNode.implementation!==_e.implementation?(ee=Do(_e,he.mode,Re),ee.return=he,ee):(ee=z(ee,_e.children||[]),ee.return=he,ee)}function Ie(he,ee,_e,Re,Ln){return ee===null||ee.tag!==7?(ee=ul(_e,he.mode,Re,Ln),ee.return=he,ee):(ee=z(ee,_e),ee.return=he,ee)}function je(he,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Mu(""+ee,he.mode,_e),ee.return=he,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:return _e=eu(ee.type,ee.key,ee.props,null,he.mode,_e),dr(_e,ee),_e.return=he,_e;case F:return ee=Do(ee,he.mode,_e),ee.return=he,ee;case it:return ee=Ye(ee),je(he,ee,_e)}if(Te(ee)||St(ee))return ee=ul(ee,he.mode,_e,null),ee.return=he,ee;if(typeof ee.then=="function")return je(he,ei(ee),_e);if(ee.$$typeof===W)return je(he,b(he,ee),_e);Zi(he,ee)}return null}function we(he,ee,_e,Re){var Ln=ee!==null?ee.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return Ln!==null?null:bt(he,ee,""+_e,Re);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case I:return _e.key===Ln?Yt(he,ee,_e,Re):null;case F:return _e.key===Ln?be(he,ee,_e,Re):null;case it:return _e=Ye(_e),we(he,ee,_e,Re)}if(Te(_e)||St(_e))return Ln!==null?null:Ie(he,ee,_e,Re,null);if(typeof _e.then=="function")return we(he,ee,ei(_e),Re);if(_e.$$typeof===W)return we(he,ee,b(he,_e),Re);Zi(he,_e)}return null}function Ae(he,ee,_e,Re,Ln){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return he=he.get(_e)||null,bt(ee,he,""+Re,Ln);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case I:return he=he.get(Re.key===null?_e:Re.key)||null,Yt(ee,he,Re,Ln);case F:return he=he.get(Re.key===null?_e:Re.key)||null,be(ee,he,Re,Ln);case it:return Re=Ye(Re),Ae(he,ee,_e,Re,Ln)}if(Te(Re)||St(Re))return he=he.get(_e)||null,Ie(ee,he,Re,Ln,null);if(typeof Re.then=="function")return Ae(he,ee,_e,ei(Re),Ln);if(Re.$$typeof===W)return Ae(he,ee,_e,b(ee,Re),Ln);Zi(ee,Re)}return null}function wn(he,ee,_e,Re){for(var Ln=null,nr=null,En=ee,pi=ee=0,ji=null;En!==null&&pi<_e.length;pi++){En.index>pi?(ji=En,En=null):ji=En.sibling;var ir=we(he,En,_e[pi],Re);if(ir===null){En===null&&(En=ji);break}l&&En&&ir.alternate===null&&f(he,En),ee=B(ir,ee,pi),nr===null?Ln=ir:nr.sibling=ir,nr=ir,En=ji}if(pi===_e.length)return _(he,En),ui&&Mn(he,pi),Ln;if(En===null){for(;pi<_e.length;pi++)En=je(he,_e[pi],Re),En!==null&&(ee=B(En,ee,pi),nr===null?Ln=En:nr.sibling=En,nr=En);return ui&&Mn(he,pi),Ln}for(En=S(En);pi<_e.length;pi++)ji=Ae(En,he,pi,_e[pi],Re),ji!==null&&(l&&ji.alternate!==null&&En.delete(ji.key===null?pi:ji.key),ee=B(ji,ee,pi),nr===null?Ln=ji:nr.sibling=ji,nr=ji);return l&&En.forEach(function(Uf){return f(he,Uf)}),ui&&Mn(he,pi),Ln}function $n(he,ee,_e,Re){if(_e==null)throw Error(i(151));for(var Ln=null,nr=null,En=ee,pi=ee=0,ji=null,ir=_e.next();En!==null&&!ir.done;pi++,ir=_e.next()){En.index>pi?(ji=En,En=null):ji=En.sibling;var Uf=we(he,En,ir.value,Re);if(Uf===null){En===null&&(En=ji);break}l&&En&&Uf.alternate===null&&f(he,En),ee=B(Uf,ee,pi),nr===null?Ln=Uf:nr.sibling=Uf,nr=Uf,En=ji}if(ir.done)return _(he,En),ui&&Mn(he,pi),Ln;if(En===null){for(;!ir.done;pi++,ir=_e.next())ir=je(he,ir.value,Re),ir!==null&&(ee=B(ir,ee,pi),nr===null?Ln=ir:nr.sibling=ir,nr=ir);return ui&&Mn(he,pi),Ln}for(En=S(En);!ir.done;pi++,ir=_e.next())ir=Ae(En,he,pi,ir.value,Re),ir!==null&&(l&&ir.alternate!==null&&En.delete(ir.key===null?pi:ir.key),ee=B(ir,ee,pi),nr===null?Ln=ir:nr.sibling=ir,nr=ir);return l&&En.forEach(function(yB){return f(he,yB)}),ui&&Mn(he,pi),Ln}function Or(he,ee,_e,Re){if(typeof _e=="object"&&_e!==null&&_e.type===V&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case I:t:{for(var Ln=_e.key;ee!==null;){if(ee.key===Ln){if(Ln=_e.type,Ln===V){if(ee.tag===7){_(he,ee.sibling),Re=z(ee,_e.props.children),Re.return=he,he=Re;break t}}else if(ee.elementType===Ln||typeof Ln=="object"&&Ln!==null&&Ln.$$typeof===it&&Ye(Ln)===ee.type){_(he,ee.sibling),Re=z(ee,_e.props),dr(Re,_e),Re.return=he,he=Re;break t}_(he,ee);break}else f(he,ee);ee=ee.sibling}_e.type===V?(Re=ul(_e.props.children,he.mode,Re,_e.key),Re.return=he,he=Re):(Re=eu(_e.type,_e.key,_e.props,null,he.mode,Re),dr(Re,_e),Re.return=he,he=Re)}return at(he);case F:t:{for(Ln=_e.key;ee!==null;){if(ee.key===Ln)if(ee.tag===4&&ee.stateNode.containerInfo===_e.containerInfo&&ee.stateNode.implementation===_e.implementation){_(he,ee.sibling),Re=z(ee,_e.children||[]),Re.return=he,he=Re;break t}else{_(he,ee);break}else f(he,ee);ee=ee.sibling}Re=Do(_e,he.mode,Re),Re.return=he,he=Re}return at(he);case it:return _e=Ye(_e),Or(he,ee,_e,Re)}if(Te(_e))return wn(he,ee,_e,Re);if(St(_e)){if(Ln=St(_e),typeof Ln!="function")throw Error(i(150));return _e=Ln.call(_e),$n(he,ee,_e,Re)}if(typeof _e.then=="function")return Or(he,ee,ei(_e),Re);if(_e.$$typeof===W)return Or(he,ee,b(he,_e),Re);Zi(he,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint"?(_e=""+_e,ee!==null&&ee.tag===6?(_(he,ee.sibling),Re=z(ee,_e),Re.return=he,he=Re):(_(he,ee),Re=Mu(_e,he.mode,Re),Re.return=he,he=Re),at(he)):_(he,ee)}return function(he,ee,_e,Re){try{Fn=0;var Ln=Or(he,ee,_e,Re);return Zn=null,Ln}catch(En){if(En===Pe||En===ze)throw En;var nr=Wa(29,En,null,he.mode);return nr.lanes=Re,nr.return=he,nr}finally{}}}var xr=Ra(!0),qr=Ra(!1),ha=!1;function er(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zo(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Xa(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ps(l,f,_){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(Gi&2)!==0){var z=S.pending;return z===null?f.next=f:(f.next=z.next,z.next=f),S.pending=f,f=uc(l),Dl(l,null,_),f}return ol(l,S,f,_),uc(l)}function fl(l,f,_){if(f=f.updateQueue,f!==null&&(f=f.shared,(_&4194048)!==0)){var S=f.lanes;S&=l.pendingLanes,_|=S,f.lanes=_,qt(l,_)}}function Au(l,f){var _=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,_===S)){var z=null,B=null;if(_=_.firstBaseUpdate,_!==null){do{var at={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};B===null?z=B=at:B=B.next=at,_=_.next}while(_!==null);B===null?z=B=f:B=B.next=f}else z=B=f;_={baseState:S.baseState,firstBaseUpdate:z,lastBaseUpdate:B,shared:S.shared,callbacks:S.callbacks},l.updateQueue=_;return}l=_.lastBaseUpdate,l===null?_.firstBaseUpdate=f:l.next=f,_.lastBaseUpdate=f}var Na=!1;function Qr(){if(Na){var l=kt;if(l!==null)throw l}}function wa(l,f,_,S){Na=!1;var z=l.updateQueue;ha=!1;var B=z.firstBaseUpdate,at=z.lastBaseUpdate,bt=z.shared.pending;if(bt!==null){z.shared.pending=null;var Yt=bt,be=Yt.next;Yt.next=null,at===null?B=be:at.next=be,at=Yt;var Ie=l.alternate;Ie!==null&&(Ie=Ie.updateQueue,bt=Ie.lastBaseUpdate,bt!==at&&(bt===null?Ie.firstBaseUpdate=be:bt.next=be,Ie.lastBaseUpdate=Yt))}if(B!==null){var je=z.baseState;at=0,Ie=be=Yt=null,bt=B;do{var we=bt.lane&-536870913,Ae=we!==bt.lane;if(Ae?(wi&we)===we:(S&we)===we){we!==0&&we===Ot&&(Na=!0),Ie!==null&&(Ie=Ie.next={lane:0,tag:bt.tag,payload:bt.payload,callback:null,next:null});t:{var wn=l,$n=bt;we=f;var Or=_;switch($n.tag){case 1:if(wn=$n.payload,typeof wn=="function"){je=wn.call(Or,je,we);break t}je=wn;break t;case 3:wn.flags=wn.flags&-65537|128;case 0:if(wn=$n.payload,we=typeof wn=="function"?wn.call(Or,je,we):wn,we==null)break t;je=E({},je,we);break t;case 2:ha=!0}}we=bt.callback,we!==null&&(l.flags|=64,Ae&&(l.flags|=8192),Ae=z.callbacks,Ae===null?z.callbacks=[we]:Ae.push(we))}else Ae={lane:we,tag:bt.tag,payload:bt.payload,callback:bt.callback,next:null},Ie===null?(be=Ie=Ae,Yt=je):Ie=Ie.next=Ae,at|=we;if(bt=bt.next,bt===null){if(bt=z.shared.pending,bt===null)break;Ae=bt,bt=Ae.next,Ae.next=null,z.lastBaseUpdate=Ae,z.shared.pending=null}}while(!0);Ie===null&&(Yt=je),z.baseState=Yt,z.firstBaseUpdate=be,z.lastBaseUpdate=Ie,B===null&&(z.shared.lanes=0),vc|=at,l.lanes=at,l.memoizedState=je}}function Cu(l,f){if(typeof l!="function")throw Error(i(191,l));l.call(f)}function Lr(l,f){var _=l.callbacks;if(_!==null)for(l.callbacks=null,l=0;l<_.length;l++)Cu(_[l],f)}var Er=ft(null),Ka=ft(0);function Rr(l,f){l=No,Lt(Ka,l),Lt(Er,f),No=l|f.baseLanes}function nu(){Lt(Ka,No),Lt(Er,Er.current)}function Nc(){No=Ka.current,Mt(Er),Mt(Ka)}var Hs=ft(null),oo=null;function Pu(l){var f=l.alternate;Lt(Ni,Ni.current&1),Lt(Hs,l),oo===null&&(f===null||Er.current!==null||f.memoizedState!==null)&&(oo=l)}function bh(l){Lt(Ni,Ni.current),Lt(Hs,l),oo===null&&(oo=l)}function dl(l){l.tag===22?(Lt(Ni,Ni.current),Lt(Hs,l),oo===null&&(oo=l)):Zs()}function Zs(){Lt(Ni,Ni.current),Lt(Hs,Hs.current)}function Hr(l){Mt(Hs),oo===l&&(oo=null),Mt(Ni)}var Ni=ft(0);function lo(l){for(var f=l;f!==null;){if(f.tag===13){var _=f.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||ys(_)||Ja(_)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var pl=0,Bn=null,pr=null,Sa=null,Nr=!1,Bc=!1,jc=!1,ku=0,iu=0,fc=null,_g=0;function Jr(){throw Error(i(321))}function vg(l,f){if(f===null)return!1;for(var _=0;_<f.length&&_<l.length;_++)if(!Xr(l[_],f[_]))return!1;return!0}function Dp(l,f,_,S,z,B){return pl=B,Bn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Nt.H=l===null||l.memoizedState===null?Hp:Og,jc=!1,B=_(S,z),jc=!1,Bc&&(B=Ip(f,_,S,z)),N_(l),B}function N_(l){Nt.H=bd;var f=pr!==null&&pr.next!==null;if(pl=0,Sa=pr=Bn=null,Nr=!1,iu=0,fc=null,f)throw Error(i(300));l===null||ja||(l=l.dependencies,l!==null&&A(l)&&(ja=!0))}function Ip(l,f,_,S){Bn=l;var z=0;do{if(Bc&&(fc=null),iu=0,Bc=!1,25<=z)throw Error(i(301));if(z+=1,Sa=pr=null,l.updateQueue!=null){var B=l.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}Nt.H=Zp,B=f(_,S)}while(Bc);return B}function Mb(){var l=Nt.H,f=l.useState()[0];return f=typeof f.then=="function"?Uc(f):f,l=l.useState()[0],(pr!==null?pr.memoizedState:null)!==l&&(Bn.flags|=1024),f}function md(){var l=ku!==0;return ku=0,l}function zp(l,f,_){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~_}function Lp(l){if(Nr){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}Nr=!1}pl=0,Sa=pr=Bn=null,Bc=!1,iu=ku=0,fc=null}function Ba(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sa===null?Bn.memoizedState=Sa=l:Sa=Sa.next=l,Sa}function Ta(){if(pr===null){var l=Bn.alternate;l=l!==null?l.memoizedState:null}else l=pr.next;var f=Sa===null?Bn.memoizedState:Sa.next;if(f!==null)Sa=f,pr=l;else{if(l===null)throw Bn.alternate===null?Error(i(467)):Error(i(310));pr=l,l={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},Sa===null?Bn.memoizedState=Sa=l:Sa=Sa.next=l}return Sa}function Fc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uc(l){var f=iu;return iu+=1,fc===null&&(fc=[]),l=ai(fc,l,f),f=Bn,(Sa===null?f.memoizedState:Sa.next)===null&&(f=f.alternate,Nt.H=f===null||f.memoizedState===null?Hp:Og),l}function wh(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Uc(l);if(l.$$typeof===W)return m(l)}throw Error(i(438,String(l)))}function Rp(l){var f=null,_=Bn.updateQueue;if(_!==null&&(f=_.memoCache),f==null){var S=Bn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(f={data:S.data.map(function(z){return z.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),_===null&&(_=Fc(),Bn.updateQueue=_),_.memoCache=f,_=f.data[f.index],_===void 0)for(_=f.data[f.index]=Array(l),S=0;S<l;S++)_[S]=xt;return f.index++,_}function Ou(l,f){return typeof f=="function"?f(l):f}function Np(l){var f=Ta();return fs(f,pr,l)}function fs(l,f,_){var S=l.queue;if(S===null)throw Error(i(311));S.lastRenderedReducer=_;var z=l.baseQueue,B=S.pending;if(B!==null){if(z!==null){var at=z.next;z.next=B.next,B.next=at}f.baseQueue=z=B,S.pending=null}if(B=l.baseState,z===null)l.memoizedState=B;else{f=z.next;var bt=at=null,Yt=null,be=f,Ie=!1;do{var je=be.lane&-536870913;if(je!==be.lane?(wi&je)===je:(pl&je)===je){var we=be.revertLane;if(we===0)Yt!==null&&(Yt=Yt.next={lane:0,revertLane:0,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),je===Ot&&(Ie=!0);else if((pl&we)===we){be=be.next,we===Ot&&(Ie=!0);continue}else je={lane:0,revertLane:be.revertLane,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},Yt===null?(bt=Yt=je,at=B):Yt=Yt.next=je,Bn.lanes|=we,vc|=we;je=be.action,jc&&_(B,je),B=be.hasEagerState?be.eagerState:_(B,je)}else we={lane:je,revertLane:be.revertLane,gesture:be.gesture,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},Yt===null?(bt=Yt=we,at=B):Yt=Yt.next=we,Bn.lanes|=je,vc|=je;be=be.next}while(be!==null&&be!==f);if(Yt===null?at=B:Yt.next=bt,!Xr(B,l.memoizedState)&&(ja=!0,Ie&&(_=kt,_!==null)))throw _;l.memoizedState=B,l.baseState=at,l.baseQueue=Yt,S.lastRenderedState=B}return z===null&&(S.lanes=0),[l.memoizedState,S.dispatch]}function Vc(l){var f=Ta(),_=f.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=l;var S=_.dispatch,z=_.pending,B=f.memoizedState;if(z!==null){_.pending=null;var at=z=z.next;do B=l(B,at.action),at=at.next;while(at!==z);Xr(B,f.memoizedState)||(ja=!0),f.memoizedState=B,f.baseQueue===null&&(f.baseState=B),_.lastRenderedState=B}return[B,S]}function Bp(l,f,_){var S=Bn,z=Ta(),B=ui;if(B){if(_===void 0)throw Error(i(407));_=_()}else _=f();var at=!Xr((pr||z).memoizedState,_);if(at&&(z.memoizedState=_,ja=!0),z=z.queue,dc(B_.bind(null,S,z,l),[l]),z.getSnapshot!==f||at||Sa!==null&&Sa.memoizedState.tag&1){if(S.flags|=2048,vf(9,{destroy:void 0},yf.bind(null,S,z,_,f),null),ur===null)throw Error(i(349));B||(pl&127)!==0||xg(S,f,_)}return _}function xg(l,f,_){l.flags|=16384,l={getSnapshot:f,value:_},f=Bn.updateQueue,f===null?(f=Fc(),Bn.updateQueue=f,f.stores=[l]):(_=f.stores,_===null?f.stores=[l]:_.push(l))}function yf(l,f,_,S){f.value=_,f.getSnapshot=S,gd(f)&&j_(l)}function B_(l,f,_){return _(function(){gd(f)&&j_(l)})}function gd(l){var f=l.getSnapshot;l=l.value;try{var _=f();return!Xr(l,_)}catch{return!0}}function j_(l){var f=$s(l,2);f!==null&&po(f,l,2)}function jp(l){var f=Ba();if(typeof l=="function"){var _=l;if(l=_(),jc){ga(!0);try{_()}finally{ga(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:l},f}function bg(l,f,_,S){return l.baseState=_,fs(l,pr,typeof S=="function"?S:Ou)}function F_(l,f,_,S,z){if(qp(l))throw Error(i(485));if(l=f.action,l!==null){var B={payload:z,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(at){B.listeners.push(at)}};Nt.T!==null?_(!0):B.isTransition=!1,S(B),_=f.pending,_===null?(B.next=f.pending=B,U_(f,B)):(B.next=_.next,f.pending=_.next=B)}}function U_(l,f){var _=f.action,S=f.payload,z=l.state;if(f.isTransition){var B=Nt.T,at={};Nt.T=at;try{var bt=_(z,S),Yt=Nt.S;Yt!==null&&Yt(at,bt),Fp(l,f,bt)}catch(be){yd(l,f,be)}finally{B!==null&&at.types!==null&&(B.types=at.types),Nt.T=B}}else try{B=_(z,S),Fp(l,f,B)}catch(be){yd(l,f,be)}}function Fp(l,f,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(S){wg(l,f,S)},function(S){return yd(l,f,S)}):wg(l,f,_)}function wg(l,f,_){f.status="fulfilled",f.value=_,_f(f),l.state=_,f=l.pending,f!==null&&(_=f.next,_===f?l.pending=null:(_=_.next,f.next=_,U_(l,_)))}function yd(l,f,_){var S=l.pending;if(l.pending=null,S!==null){S=S.next;do f.status="rejected",f.reason=_,_f(f),f=f.next;while(f!==S)}l.action=null}function _f(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function Lo(l,f){return f}function Sg(l,f){if(ui){var _=ur.formState;if(_!==null){t:{var S=Bn;if(ui){if(vi){e:{for(var z=vi,B=bi;z.nodeType!==8;){if(!B){z=null;break e}if(z=kr(z.nextSibling),z===null){z=null;break e}}B=z.data,z=B==="F!"||B==="F"?z:null}if(z){vi=kr(z.nextSibling),S=z.data==="F!";break t}}Kr(S)}S=!1}S&&(f=_[0])}}return _=Ba(),_.memoizedState=_.baseState=f,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:f},_.queue=S,_=Vp.bind(null,Bn,S),S.dispatch=_,S=jp(!1),B=$p.bind(null,Bn,!1,S.queue),S=Ba(),z={state:f,dispatch:null,action:l,pending:null},S.queue=z,_=F_.bind(null,Bn,z,B,_),z.dispatch=_,S.memoizedState=l,[f,_,!1]}function V_(l){var f=Ta();return Tg(f,pr,l)}function Tg(l,f,_){if(f=fs(l,f,Lo)[0],l=Np(Ou)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var S=Uc(f)}catch(at){throw at===Pe?ze:at}else S=f;f=Ta();var z=f.queue,B=z.dispatch;return _!==f.memoizedState&&(Bn.flags|=2048,vf(9,{destroy:void 0},Eb.bind(null,z,_),null)),[S,B,l]}function Eb(l,f){l.action=f}function $_(l){var f=Ta(),_=pr;if(_!==null)return Tg(f,_,l);Ta(),f=f.memoizedState,_=Ta();var S=_.queue.dispatch;return _.memoizedState=l,[f,S,!1]}function vf(l,f,_,S){return l={tag:l,create:_,deps:S,inst:f,next:null},f=Bn.updateQueue,f===null&&(f=Fc(),Bn.updateQueue=f),_=f.lastEffect,_===null?f.lastEffect=l.next=l:(S=_.next,_.next=l,l.next=S,f.lastEffect=l),l}function q_(){return Ta().memoizedState}function xf(l,f,_,S){var z=Ba();Bn.flags|=l,z.memoizedState=vf(1|f,{destroy:void 0},_,S===void 0?null:S)}function Sh(l,f,_,S){var z=Ta();S=S===void 0?null:S;var B=z.memoizedState.inst;pr!==null&&S!==null&&vg(S,pr.memoizedState.deps)?z.memoizedState=vf(f,B,_,S):(Bn.flags|=l,z.memoizedState=vf(1|f,B,_,S))}function Mg(l,f){xf(8390656,8,l,f)}function dc(l,f){Sh(2048,8,l,f)}function _d(l){Bn.flags|=4;var f=Bn.updateQueue;if(f===null)f=Fc(),Bn.updateQueue=f,f.events=[l];else{var _=f.events;_===null?f.events=[l]:_.push(l)}}function H_(l){var f=Ta().memoizedState;return _d({ref:f,nextImpl:l}),function(){if((Gi&2)!==0)throw Error(i(440));return f.impl.apply(void 0,arguments)}}function Z_(l,f){return Sh(4,2,l,f)}function G_(l,f){return Sh(4,4,l,f)}function Y_(l,f){if(typeof f=="function"){l=l();var _=f(l);return function(){typeof _=="function"?_():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function W_(l,f,_){_=_!=null?_.concat([l]):null,Sh(4,4,Y_.bind(null,f,l),_)}function Eg(){}function X_(l,f){var _=Ta();f=f===void 0?null:f;var S=_.memoizedState;return f!==null&&vg(f,S[1])?S[0]:(_.memoizedState=[l,f],l)}function Up(l,f){var _=Ta();f=f===void 0?null:f;var S=_.memoizedState;if(f!==null&&vg(f,S[1]))return S[0];if(S=l(),jc){ga(!0);try{l()}finally{ga(!1)}}return _.memoizedState=[S,f],S}function Ag(l,f,_){return _===void 0||(pl&1073741824)!==0&&(wi&261930)===0?l.memoizedState=f:(l.memoizedState=_,l=ym(),Bn.lanes|=l,vc|=l,_)}function Th(l,f,_,S){return Xr(_,f)?_:Er.current!==null?(l=Ag(l,_,S),Xr(l,f)||(ja=!0),l):(pl&42)===0||(pl&1073741824)!==0&&(wi&261930)===0?(ja=!0,l.memoizedState=_):(l=ym(),Bn.lanes|=l,vc|=l,f)}function K_(l,f,_,S,z){var B=Ct.p;Ct.p=B!==0&&8>B?B:8;var at=Nt.T,bt={};Nt.T=bt,$p(l,!1,f,_);try{var Yt=z(),be=Nt.S;if(be!==null&&be(bt,Yt),Yt!==null&&typeof Yt=="object"&&typeof Yt.then=="function"){var Ie=Qt(Yt,S);Mh(l,f,Ie,jo(l))}else Mh(l,f,S,jo(l))}catch(je){Mh(l,f,{then:function(){},status:"rejected",reason:je},jo())}finally{Ct.p=B,at!==null&&bt.types!==null&&(at.types=bt.types),Nt.T=at}}function ta(){}function bf(l,f,_,S){if(l.tag!==5)throw Error(i(476));var z=Cg(l).queue;K_(l,z,f,Tt,_===null?ta:function(){return vd(l),_(S)})}function Cg(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:Tt,baseState:Tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:Tt},next:null};var _={};return f.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:_},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function vd(l){var f=Cg(l);f.next===null&&(f=l.alternate.memoizedState),Mh(l,f.next.queue,{},jo())}function wf(){return m(ry)}function Sf(){return Ta().memoizedState}function Pg(){return Ta().memoizedState}function Q_(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var _=jo();l=Xa(_);var S=Ps(f,l,_);S!==null&&(po(S,f,_),fl(S,f,_)),f={cache:Q()},l.payload=f;return}f=f.return}}function xd(l,f,_){var S=jo();_={lane:S,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},qp(l)?kg(f,_):(_=en(l,f,_,S),_!==null&&(po(_,l,S),Tf(_,f,S)))}function Vp(l,f,_){var S=jo();Mh(l,f,_,S)}function Mh(l,f,_,S){var z={lane:S,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null};if(qp(l))kg(f,z);else{var B=l.alternate;if(l.lanes===0&&(B===null||B.lanes===0)&&(B=f.lastRenderedReducer,B!==null))try{var at=f.lastRenderedState,bt=B(at,_);if(z.hasEagerState=!0,z.eagerState=bt,Xr(bt,at))return ol(l,f,z,0),ur===null&&ko(),!1}catch{}finally{}if(_=en(l,f,z,S),_!==null)return po(_,l,S),Tf(_,f,S),!0}return!1}function $p(l,f,_,S){if(S={lane:2,revertLane:Hd(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},qp(l)){if(f)throw Error(i(479))}else f=en(l,_,S,2),f!==null&&po(f,l,2)}function qp(l){var f=l.alternate;return l===Bn||f!==null&&f===Bn}function kg(l,f){Bc=Nr=!0;var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}function Tf(l,f,_){if((_&4194048)!==0){var S=f.lanes;S&=l.pendingLanes,_|=S,f.lanes=_,qt(l,_)}}var bd={readContext:m,use:wh,useCallback:Jr,useContext:Jr,useEffect:Jr,useImperativeHandle:Jr,useLayoutEffect:Jr,useInsertionEffect:Jr,useMemo:Jr,useReducer:Jr,useRef:Jr,useState:Jr,useDebugValue:Jr,useDeferredValue:Jr,useTransition:Jr,useSyncExternalStore:Jr,useId:Jr,useHostTransitionStatus:Jr,useFormState:Jr,useActionState:Jr,useOptimistic:Jr,useMemoCache:Jr,useCacheRefresh:Jr};bd.useEffectEvent=Jr;var Hp={readContext:m,use:wh,useCallback:function(l,f){return Ba().memoizedState=[l,f===void 0?null:f],l},useContext:m,useEffect:Mg,useImperativeHandle:function(l,f,_){_=_!=null?_.concat([l]):null,xf(4194308,4,Y_.bind(null,f,l),_)},useLayoutEffect:function(l,f){return xf(4194308,4,l,f)},useInsertionEffect:function(l,f){xf(4,2,l,f)},useMemo:function(l,f){var _=Ba();f=f===void 0?null:f;var S=l();if(jc){ga(!0);try{l()}finally{ga(!1)}}return _.memoizedState=[S,f],S},useReducer:function(l,f,_){var S=Ba();if(_!==void 0){var z=_(f);if(jc){ga(!0);try{_(f)}finally{ga(!1)}}}else z=f;return S.memoizedState=S.baseState=z,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:z},S.queue=l,l=l.dispatch=xd.bind(null,Bn,l),[S.memoizedState,l]},useRef:function(l){var f=Ba();return l={current:l},f.memoizedState=l},useState:function(l){l=jp(l);var f=l.queue,_=Vp.bind(null,Bn,f);return f.dispatch=_,[l.memoizedState,_]},useDebugValue:Eg,useDeferredValue:function(l,f){var _=Ba();return Ag(_,l,f)},useTransition:function(){var l=jp(!1);return l=K_.bind(null,Bn,l.queue,!0,!1),Ba().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,_){var S=Bn,z=Ba();if(ui){if(_===void 0)throw Error(i(407));_=_()}else{if(_=f(),ur===null)throw Error(i(349));(wi&127)!==0||xg(S,f,_)}z.memoizedState=_;var B={value:_,getSnapshot:f};return z.queue=B,Mg(B_.bind(null,S,B,l),[l]),S.flags|=2048,vf(9,{destroy:void 0},yf.bind(null,S,B,_,f),null),_},useId:function(){var l=Ba(),f=ur.identifierPrefix;if(ui){var _=rn,S=Le;_=(S&~(1<<32-_r(S)-1)).toString(32)+_,f="_"+f+"R_"+_,_=ku++,0<_&&(f+="H"+_.toString(32)),f+="_"}else _=_g++,f="_"+f+"r_"+_.toString(32)+"_";return l.memoizedState=f},useHostTransitionStatus:wf,useFormState:Sg,useActionState:Sg,useOptimistic:function(l){var f=Ba();f.memoizedState=f.baseState=l;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=_,f=$p.bind(null,Bn,!0,_),_.dispatch=f,[l,f]},useMemoCache:Rp,useCacheRefresh:function(){return Ba().memoizedState=Q_.bind(null,Bn)},useEffectEvent:function(l){var f=Ba(),_={impl:l};return f.memoizedState=_,function(){if((Gi&2)!==0)throw Error(i(440));return _.impl.apply(void 0,arguments)}}},Og={readContext:m,use:wh,useCallback:X_,useContext:m,useEffect:dc,useImperativeHandle:W_,useInsertionEffect:Z_,useLayoutEffect:G_,useMemo:Up,useReducer:Np,useRef:q_,useState:function(){return Np(Ou)},useDebugValue:Eg,useDeferredValue:function(l,f){var _=Ta();return Th(_,pr.memoizedState,l,f)},useTransition:function(){var l=Np(Ou)[0],f=Ta().memoizedState;return[typeof l=="boolean"?l:Uc(l),f]},useSyncExternalStore:Bp,useId:Sf,useHostTransitionStatus:wf,useFormState:V_,useActionState:V_,useOptimistic:function(l,f){var _=Ta();return bg(_,pr,l,f)},useMemoCache:Rp,useCacheRefresh:Pg};Og.useEffectEvent=H_;var Zp={readContext:m,use:wh,useCallback:X_,useContext:m,useEffect:dc,useImperativeHandle:W_,useInsertionEffect:Z_,useLayoutEffect:G_,useMemo:Up,useReducer:Vc,useRef:q_,useState:function(){return Vc(Ou)},useDebugValue:Eg,useDeferredValue:function(l,f){var _=Ta();return pr===null?Ag(_,l,f):Th(_,pr.memoizedState,l,f)},useTransition:function(){var l=Vc(Ou)[0],f=Ta().memoizedState;return[typeof l=="boolean"?l:Uc(l),f]},useSyncExternalStore:Bp,useId:Sf,useHostTransitionStatus:wf,useFormState:$_,useActionState:$_,useOptimistic:function(l,f){var _=Ta();return pr!==null?bg(_,pr,l,f):(_.baseState=l,[l,_.queue.dispatch])},useMemoCache:Rp,useCacheRefresh:Pg};Zp.useEffectEvent=H_;function wd(l,f,_,S){f=l.memoizedState,_=_(S,f),_=_==null?f:E({},f,_),l.memoizedState=_,l.lanes===0&&(l.updateQueue.baseState=_)}var Sd={enqueueSetState:function(l,f,_){l=l._reactInternals;var S=jo(),z=Xa(S);z.payload=f,_!=null&&(z.callback=_),f=Ps(l,z,S),f!==null&&(po(f,l,S),fl(f,l,S))},enqueueReplaceState:function(l,f,_){l=l._reactInternals;var S=jo(),z=Xa(S);z.tag=1,z.payload=f,_!=null&&(z.callback=_),f=Ps(l,z,S),f!==null&&(po(f,l,S),fl(f,l,S))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var _=jo(),S=Xa(_);S.tag=2,f!=null&&(S.callback=f),f=Ps(l,S,_),f!==null&&(po(f,l,_),fl(f,l,_))}};function Dg(l,f,_,S,z,B,at){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,B,at):f.prototype&&f.prototype.isPureReactComponent?!Vs(_,S)||!Vs(z,B):!0}function Ig(l,f,_,S){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(_,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(_,S),f.state!==l&&Sd.enqueueReplaceState(f,f.state,null)}function Eh(l,f){var _=f;if("ref"in f){_={};for(var S in f)S!=="ref"&&(_[S]=f[S])}if(l=l.defaultProps){_===f&&(_=E({},_));for(var z in l)_[z]===void 0&&(_[z]=l[z])}return _}function J_(l){Cs(l)}function tv(l){console.error(l)}function ev(l){Cs(l)}function Gp(l,f){try{var _=l.onUncaughtError;_(f.value,{componentStack:f.stack})}catch(S){setTimeout(function(){throw S})}}function pc(l,f,_){try{var S=l.onCaughtError;S(_.value,{componentStack:_.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function zg(l,f,_){return _=Xa(_),_.tag=3,_.payload={element:null},_.callback=function(){Gp(l,f)},_}function Lg(l){return l=Xa(l),l.tag=3,l}function Ah(l,f,_,S){var z=_.type.getDerivedStateFromError;if(typeof z=="function"){var B=S.value;l.payload=function(){return z(B)},l.callback=function(){pc(f,_,S)}}var at=_.stateNode;at!==null&&typeof at.componentDidCatch=="function"&&(l.callback=function(){pc(f,_,S),typeof z!="function"&&(Lu===null?Lu=new Set([this]):Lu.add(this));var bt=S.stack;this.componentDidCatch(S.value,{componentStack:bt!==null?bt:""})})}function Ab(l,f,_,S,z){if(_.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(f=_.alternate,f!==null&&di(f,_,z,!0),_=Hs.current,_!==null){switch(_.tag){case 31:case 13:return oo===null?Rd():_.alternate===null&&ea===0&&(ea=3),_.flags&=-257,_.flags|=65536,_.lanes=z,S===qe?_.flags|=16384:(f=_.updateQueue,f===null?_.updateQueue=new Set([S]):f.add(S),Ua(l,S,z)),!1;case 22:return _.flags|=65536,S===qe?_.flags|=16384:(f=_.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([S])},_.updateQueue=f):(_=f.retryQueue,_===null?f.retryQueue=new Set([S]):_.add(S)),Ua(l,S,z)),!1}throw Error(i(435,_.tag))}return Ua(l,S,z),Rd(),!1}if(ui)return f=Hs.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=z,S!==Eu&&(l=Error(i(422),{cause:S}),cl(w(l,_)))):(S!==Eu&&(f=Error(i(423),{cause:S}),cl(w(f,_))),l=l.current.alternate,l.flags|=65536,z&=-z,l.lanes|=z,S=w(S,_),z=zg(l.stateNode,S,z),Au(l,z),ea!==4&&(ea=2)),!1;var B=Error(i(520),{cause:S});if(B=w(B,_),zd===null?zd=[B]:zd.push(B),ea!==4&&(ea=2),f===null)return!0;S=w(S,_),_=f;do{switch(_.tag){case 3:return _.flags|=65536,l=z&-z,_.lanes|=l,l=zg(_.stateNode,S,l),Au(_,l),!1;case 1:if(f=_.type,B=_.stateNode,(_.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Lu===null||!Lu.has(B))))return _.flags|=65536,z&=-z,_.lanes|=z,z=Lg(z),Ah(z,l,_,S),Au(_,z),!1}_=_.return}while(_!==null);return!1}var Rg=Error(i(461)),ja=!1;function ds(l,f,_,S){f.child=l===null?qr(f,null,_,S):xr(f,l.child,_,S)}function Ng(l,f,_,S,z){_=_.render;var B=f.ref;if("ref"in S){var at={};for(var bt in S)bt!=="ref"&&(at[bt]=S[bt])}else at=S;return u(f),S=Dp(l,f,_,at,B,z),bt=md(),l!==null&&!ja?(zp(l,f,z),Du(l,f,z)):(ui&&bt&&Mi(f),f.flags|=1,ds(l,f,S,z),f.child)}function nv(l,f,_,S,z){if(l===null){var B=_.type;return typeof B=="function"&&!cc(B)&&B.defaultProps===void 0&&_.compare===null?(f.tag=15,f.type=B,iv(l,f,B,S,z)):(l=eu(_.type,null,S,f,f.mode,z),l.ref=f.ref,l.return=f,f.child=l)}if(B=l.child,!tm(l,z)){var at=B.memoizedProps;if(_=_.compare,_=_!==null?_:Vs,_(at,S)&&l.ref===f.ref)return Du(l,f,z)}return f.flags|=1,l=Oo(B,S),l.ref=f.ref,l.return=f,f.child=l}function iv(l,f,_,S,z){if(l!==null){var B=l.memoizedProps;if(Vs(B,S)&&l.ref===f.ref)if(ja=!1,f.pendingProps=S=B,tm(l,z))(l.flags&131072)!==0&&(ja=!0);else return f.lanes=l.lanes,Du(l,f,z)}return Kp(l,f,_,S,z)}function rv(l,f,_,S){var z=S.children,B=l!==null?l.memoizedState:null;if(l===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((f.flags&128)!==0){if(B=B!==null?B.baseLanes|_:_,l!==null){for(S=f.child=l.child,z=0;S!==null;)z=z|S.lanes|S.childLanes,S=S.sibling;S=z&~B}else S=0,f.child=null;return Yp(l,f,B,_,S)}if((_&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&me(f,B!==null?B.cachePool:null),B!==null?Rr(f,B):nu(),dl(f);else return S=f.lanes=536870912,Yp(l,f,B!==null?B.baseLanes|_:_,_,S)}else B!==null?(me(f,B.cachePool),Rr(f,B),Zs(),f.memoizedState=null):(l!==null&&me(f,null),nu(),Zs());return ds(l,f,z,_),f.child}function Td(l,f){return l!==null&&l.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function Yp(l,f,_,S,z){var B=te();return B=B===null?null:{parent:H._currentValue,pool:B},f.memoizedState={baseLanes:_,cachePool:B},l!==null&&me(f,null),nu(),dl(f),l!==null&&di(l,f,S,!0),f.childLanes=z,null}function $c(l,f){return f=Jp({mode:f.mode,children:f.children},l.mode),f.ref=l.ref,l.child=f,f.return=l,f}function Wp(l,f,_){return xr(f,l.child,null,_),l=$c(f,f.pendingProps),l.flags|=2,Hr(f),f.memoizedState=null,l}function Cb(l,f,_){var S=f.pendingProps,z=(f.flags&128)!==0;if(f.flags&=-129,l===null){if(ui){if(S.mode==="hidden")return l=$c(f,S),f.lanes=536870912,Td(null,l);if(bh(f),(l=vi)?(l=gs(l,bi),l=l!==null&&l.data==="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:ve!==null?{id:Le,overflow:rn}:null,retryLane:536870912,hydrationErrors:null},_=La(l),_.return=f,f.child=_,Je=f,vi=null)):l=null,l===null)throw Kr(f);return f.lanes=536870912,null}return $c(f,S)}var B=l.memoizedState;if(B!==null){var at=B.dehydrated;if(bh(f),z)if(f.flags&256)f.flags&=-257,f=Wp(l,f,_);else if(f.memoizedState!==null)f.child=l.child,f.flags|=128,f=null;else throw Error(i(558));else if(ja||di(l,f,_,!1),z=(_&l.childLanes)!==0,ja||z){if(S=ur,S!==null&&(at=Jt(S,_),at!==0&&at!==B.retryLane))throw B.retryLane=at,$s(l,at),po(S,l,at),Rg;Rd(),f=Wp(l,f,_)}else l=B.treeContext,vi=kr(at.nextSibling),Je=f,ui=!0,Io=null,bi=!1,l!==null&&sn(f,l),f=$c(f,S),f.flags|=4096;return f}return l=Oo(l.child,{mode:S.mode,children:S.children}),l.ref=f.ref,f.child=l,l.return=f,l}function Xp(l,f){var _=f.ref;if(_===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(i(284));(l===null||l.ref!==_)&&(f.flags|=4194816)}}function Kp(l,f,_,S,z){return u(f),_=Dp(l,f,_,S,void 0,z),S=md(),l!==null&&!ja?(zp(l,f,z),Du(l,f,z)):(ui&&S&&Mi(f),f.flags|=1,ds(l,f,_,z),f.child)}function av(l,f,_,S,z,B){return u(f),f.updateQueue=null,_=Ip(f,S,_,z),N_(l),S=md(),l!==null&&!ja?(zp(l,f,B),Du(l,f,B)):(ui&&S&&Mi(f),f.flags|=1,ds(l,f,_,B),f.child)}function sv(l,f,_,S,z){if(u(f),f.stateNode===null){var B=ll,at=_.contextType;typeof at=="object"&&at!==null&&(B=m(at)),B=new _(S,B),f.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=Sd,f.stateNode=B,B._reactInternals=f,B=f.stateNode,B.props=S,B.state=f.memoizedState,B.refs={},er(f),at=_.contextType,B.context=typeof at=="object"&&at!==null?m(at):ll,B.state=f.memoizedState,at=_.getDerivedStateFromProps,typeof at=="function"&&(wd(f,_,at,S),B.state=f.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(at=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),at!==B.state&&Sd.enqueueReplaceState(B,B.state,null),wa(f,S,B,z),Qr(),B.state=f.memoizedState),typeof B.componentDidMount=="function"&&(f.flags|=4194308),S=!0}else if(l===null){B=f.stateNode;var bt=f.memoizedProps,Yt=Eh(_,bt);B.props=Yt;var be=B.context,Ie=_.contextType;at=ll,typeof Ie=="object"&&Ie!==null&&(at=m(Ie));var je=_.getDerivedStateFromProps;Ie=typeof je=="function"||typeof B.getSnapshotBeforeUpdate=="function",bt=f.pendingProps!==bt,Ie||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(bt||be!==at)&&Ig(f,B,S,at),ha=!1;var we=f.memoizedState;B.state=we,wa(f,S,B,z),Qr(),be=f.memoizedState,bt||we!==be||ha?(typeof je=="function"&&(wd(f,_,je,S),be=f.memoizedState),(Yt=ha||Dg(f,_,Yt,S,we,be,at))?(Ie||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(f.flags|=4194308)):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=be),B.props=S,B.state=be,B.context=at,S=Yt):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{B=f.stateNode,zo(l,f),at=f.memoizedProps,Ie=Eh(_,at),B.props=Ie,je=f.pendingProps,we=B.context,be=_.contextType,Yt=ll,typeof be=="object"&&be!==null&&(Yt=m(be)),bt=_.getDerivedStateFromProps,(be=typeof bt=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(at!==je||we!==Yt)&&Ig(f,B,S,Yt),ha=!1,we=f.memoizedState,B.state=we,wa(f,S,B,z),Qr();var Ae=f.memoizedState;at!==je||we!==Ae||ha||l!==null&&l.dependencies!==null&&A(l.dependencies)?(typeof bt=="function"&&(wd(f,_,bt,S),Ae=f.memoizedState),(Ie=ha||Dg(f,_,Ie,S,we,Ae,Yt)||l!==null&&l.dependencies!==null&&A(l.dependencies))?(be||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(S,Ae,Yt),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(S,Ae,Yt)),typeof B.componentDidUpdate=="function"&&(f.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof B.componentDidUpdate!="function"||at===l.memoizedProps&&we===l.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||at===l.memoizedProps&&we===l.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=Ae),B.props=S,B.state=Ae,B.context=Yt,S=Ie):(typeof B.componentDidUpdate!="function"||at===l.memoizedProps&&we===l.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||at===l.memoizedProps&&we===l.memoizedState||(f.flags|=1024),S=!1)}return B=S,Xp(l,f),S=(f.flags&128)!==0,B||S?(B=f.stateNode,_=S&&typeof _.getDerivedStateFromError!="function"?null:B.render(),f.flags|=1,l!==null&&S?(f.child=xr(f,l.child,null,z),f.child=xr(f,null,_,z)):ds(l,f,_,z),f.memoizedState=B.state,l=f.child):l=Du(l,f,z),l}function Mf(l,f,_,S){return Ri(),f.flags|=256,ds(l,f,_,S),f.child}var Qp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bg(l){return{baseLanes:l,cachePool:xe()}}function jg(l,f,_){return l=l!==null?l.childLanes&~_:0,f&&(l|=Gs),l}function ov(l,f,_){var S=f.pendingProps,z=!1,B=(f.flags&128)!==0,at;if((at=B)||(at=l!==null&&l.memoizedState===null?!1:(Ni.current&2)!==0),at&&(z=!0,f.flags&=-129),at=(f.flags&32)!==0,f.flags&=-33,l===null){if(ui){if(z?Pu(f):Zs(),(l=vi)?(l=gs(l,bi),l=l!==null&&l.data!=="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:ve!==null?{id:Le,overflow:rn}:null,retryLane:536870912,hydrationErrors:null},_=La(l),_.return=f,f.child=_,Je=f,vi=null)):l=null,l===null)throw Kr(f);return Ja(l)?f.lanes=32:f.lanes=536870912,null}var bt=S.children;return S=S.fallback,z?(Zs(),z=f.mode,bt=Jp({mode:"hidden",children:bt},z),S=ul(S,z,_,null),bt.return=f,S.return=f,bt.sibling=S,f.child=bt,S=f.child,S.memoizedState=Bg(_),S.childLanes=jg(l,at,_),f.memoizedState=Qp,Td(null,S)):(Pu(f),Fg(f,bt))}var Yt=l.memoizedState;if(Yt!==null&&(bt=Yt.dehydrated,bt!==null)){if(B)f.flags&256?(Pu(f),f.flags&=-257,f=Ug(l,f,_)):f.memoizedState!==null?(Zs(),f.child=l.child,f.flags|=128,f=null):(Zs(),bt=S.fallback,z=f.mode,S=Jp({mode:"visible",children:S.children},z),bt=ul(bt,z,_,null),bt.flags|=2,S.return=f,bt.return=f,S.sibling=bt,f.child=S,xr(f,l.child,null,_),S=f.child,S.memoizedState=Bg(_),S.childLanes=jg(l,at,_),f.memoizedState=Qp,f=Td(null,S));else if(Pu(f),Ja(bt)){if(at=bt.nextSibling&&bt.nextSibling.dataset,at)var be=at.dgst;at=be,S=Error(i(419)),S.stack="",S.digest=at,cl({value:S,source:null,stack:null}),f=Ug(l,f,_)}else if(ja||di(l,f,_,!1),at=(_&l.childLanes)!==0,ja||at){if(at=ur,at!==null&&(S=Jt(at,_),S!==0&&S!==Yt.retryLane))throw Yt.retryLane=S,$s(l,S),po(at,l,S),Rg;ys(bt)||Rd(),f=Ug(l,f,_)}else ys(bt)?(f.flags|=192,f.child=l.child,f=null):(l=Yt.treeContext,vi=kr(bt.nextSibling),Je=f,ui=!0,Io=null,bi=!1,l!==null&&sn(f,l),f=Fg(f,S.children),f.flags|=4096);return f}return z?(Zs(),bt=S.fallback,z=f.mode,Yt=l.child,be=Yt.sibling,S=Oo(Yt,{mode:"hidden",children:S.children}),S.subtreeFlags=Yt.subtreeFlags&65011712,be!==null?bt=Oo(be,bt):(bt=ul(bt,z,_,null),bt.flags|=2),bt.return=f,S.return=f,S.sibling=bt,f.child=S,Td(null,S),S=f.child,bt=l.child.memoizedState,bt===null?bt=Bg(_):(z=bt.cachePool,z!==null?(Yt=H._currentValue,z=z.parent!==Yt?{parent:Yt,pool:Yt}:z):z=xe(),bt={baseLanes:bt.baseLanes|_,cachePool:z}),S.memoizedState=bt,S.childLanes=jg(l,at,_),f.memoizedState=Qp,Td(l.child,S)):(Pu(f),_=l.child,l=_.sibling,_=Oo(_,{mode:"visible",children:S.children}),_.return=f,_.sibling=null,l!==null&&(at=f.deletions,at===null?(f.deletions=[l],f.flags|=16):at.push(l)),f.child=_,f.memoizedState=null,_)}function Fg(l,f){return f=Jp({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function Jp(l,f){return l=Wa(22,l,null,f),l.lanes=0,l}function Ug(l,f,_){return xr(f,l.child,null,_),l=Fg(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function Vg(l,f,_){l.lanes|=f;var S=l.alternate;S!==null&&(S.lanes|=f),vh(l.return,f,_)}function Md(l,f,_,S,z,B){var at=l.memoizedState;at===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:_,tailMode:z,treeForkCount:B}:(at.isBackwards=f,at.rendering=null,at.renderingStartTime=0,at.last=S,at.tail=_,at.tailMode=z,at.treeForkCount=B)}function $g(l,f,_){var S=f.pendingProps,z=S.revealOrder,B=S.tail;S=S.children;var at=Ni.current,bt=(at&2)!==0;if(bt?(at=at&1|2,f.flags|=128):at&=1,Lt(Ni,at),ds(l,f,S,_),S=ui?mt:0,!bt&&l!==null&&(l.flags&128)!==0)t:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Vg(l,_,f);else if(l.tag===19)Vg(l,_,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break t;for(;l.sibling===null;){if(l.return===null||l.return===f)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(z){case"forwards":for(_=f.child,z=null;_!==null;)l=_.alternate,l!==null&&lo(l)===null&&(z=_),_=_.sibling;_=z,_===null?(z=f.child,f.child=null):(z=_.sibling,_.sibling=null),Md(f,!1,z,_,B,S);break;case"backwards":case"unstable_legacy-backwards":for(_=null,z=f.child,f.child=null;z!==null;){if(l=z.alternate,l!==null&&lo(l)===null){f.child=z;break}l=z.sibling,z.sibling=_,_=z,z=l}Md(f,!0,_,null,B,S);break;case"together":Md(f,!1,null,null,void 0,S);break;default:f.memoizedState=null}return f.child}function Du(l,f,_){if(l!==null&&(f.dependencies=l.dependencies),vc|=f.lanes,(_&f.childLanes)===0)if(l!==null){if(di(l,f,_,!1),(_&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(i(153));if(f.child!==null){for(l=f.child,_=Oo(l,l.pendingProps),f.child=_,_.return=f;l.sibling!==null;)l=l.sibling,_=_.sibling=Oo(l,l.pendingProps),_.return=f;_.sibling=null}return f.child}function tm(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&A(l)))}function Pb(l,f,_){switch(f.tag){case 3:Ne(f,f.stateNode.containerInfo),zl(f,H,l.memoizedState.cache),Ri();break;case 27:case 5:Ce(f);break;case 4:Ne(f,f.stateNode.containerInfo);break;case 10:zl(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,bh(f),null;break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(Pu(f),f.flags|=128,null):(_&f.child.childLanes)!==0?ov(l,f,_):(Pu(f),l=Du(l,f,_),l!==null?l.sibling:null);Pu(f);break;case 19:var z=(l.flags&128)!==0;if(S=(_&f.childLanes)!==0,S||(di(l,f,_,!1),S=(_&f.childLanes)!==0),z){if(S)return $g(l,f,_);f.flags|=128}if(z=f.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Lt(Ni,Ni.current),S)break;return null;case 22:return f.lanes=0,rv(l,f,_,f.pendingProps);case 24:zl(f,H,l.memoizedState.cache)}return Du(l,f,_)}function Ed(l,f,_){if(l!==null)if(l.memoizedProps!==f.pendingProps)ja=!0;else{if(!tm(l,_)&&(f.flags&128)===0)return ja=!1,Pb(l,f,_);ja=(l.flags&131072)!==0}else ja=!1,ui&&(f.flags&1048576)!==0&&ri(f,mt,f.index);switch(f.lanes=0,f.tag){case 16:t:{var S=f.pendingProps;if(l=Ye(f.elementType),f.type=l,typeof l=="function")cc(l)?(S=Eh(l,S),f.tag=1,f=sv(null,f,l,S,_)):(f.tag=0,f=Kp(null,f,l,S,_));else{if(l!=null){var z=l.$$typeof;if(z===X){f.tag=11,f=Ng(null,f,l,S,_);break t}else if(z===ct){f.tag=14,f=nv(null,f,l,S,_);break t}}throw f=pe(l)||l,Error(i(306,f,""))}}return f;case 0:return Kp(l,f,f.type,f.pendingProps,_);case 1:return S=f.type,z=Eh(S,f.pendingProps),sv(l,f,S,z,_);case 3:t:{if(Ne(f,f.stateNode.containerInfo),l===null)throw Error(i(387));S=f.pendingProps;var B=f.memoizedState;z=B.element,zo(l,f),wa(f,S,null,_);var at=f.memoizedState;if(S=at.cache,zl(f,H,S),S!==B.cache&&xh(f,[H],_,!0),Qr(),S=at.element,B.isDehydrated)if(B={element:S,isDehydrated:!1,cache:at.cache},f.updateQueue.baseState=B,f.memoizedState=B,f.flags&256){f=Mf(l,f,S,_);break t}else if(S!==z){z=w(Error(i(424)),f),cl(z),f=Mf(l,f,S,_);break t}else{switch(l=f.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(vi=kr(l.firstChild),Je=f,ui=!0,Io=null,bi=!0,_=qr(f,null,S,_),f.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(Ri(),S===z){f=Du(l,f,_);break t}ds(l,f,S,_)}f=f.child}return f;case 26:return Xp(l,f),l===null?(_=Pv(f.type,null,f.pendingProps,null))?f.memoizedState=_:ui||(_=f.type,l=f.pendingProps,S=We(ce.current).createElement(_),S[Ke]=f,S[an]=l,He(S,_,l),ci(S),f.stateNode=S):f.memoizedState=Pv(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return Ce(f),l===null&&ui&&(S=f.stateNode=ts(f.type,f.pendingProps,ce.current),Je=f,bi=!0,z=vi,Pr(f.type)?(na=z,vi=kr(S.firstChild)):vi=z),ds(l,f,f.pendingProps.children,_),Xp(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&ui&&((z=S=vi)&&(S=Ea(S,f.type,f.pendingProps,bi),S!==null?(f.stateNode=S,Je=f,vi=kr(S.firstChild),bi=!1,z=!0):z=!1),z||Kr(f)),Ce(f),z=f.type,B=f.pendingProps,at=l!==null?l.memoizedProps:null,S=B.children,gn(z,B)?S=null:at!==null&&gn(z,at)&&(f.flags|=32),f.memoizedState!==null&&(z=Dp(l,f,Mb,null,null,_),ry._currentValue=z),Xp(l,f),ds(l,f,S,_),f.child;case 6:return l===null&&ui&&((l=_=vi)&&(_=Aa(_,f.pendingProps,bi),_!==null?(f.stateNode=_,Je=f,vi=null,l=!0):l=!1),l||Kr(f)),null;case 13:return ov(l,f,_);case 4:return Ne(f,f.stateNode.containerInfo),S=f.pendingProps,l===null?f.child=xr(f,null,S,_):ds(l,f,S,_),f.child;case 11:return Ng(l,f,f.type,f.pendingProps,_);case 7:return ds(l,f,f.pendingProps,_),f.child;case 8:return ds(l,f,f.pendingProps.children,_),f.child;case 12:return ds(l,f,f.pendingProps.children,_),f.child;case 10:return S=f.pendingProps,zl(f,f.type,S.value),ds(l,f,S.children,_),f.child;case 9:return z=f.type._context,S=f.pendingProps.children,u(f),z=m(z),S=S(z),f.flags|=1,ds(l,f,S,_),f.child;case 14:return nv(l,f,f.type,f.pendingProps,_);case 15:return iv(l,f,f.type,f.pendingProps,_);case 19:return $g(l,f,_);case 31:return Cb(l,f,_);case 22:return rv(l,f,_,f.pendingProps);case 24:return u(f),S=m(H),l===null?(z=te(),z===null&&(z=ur,B=Q(),z.pooledCache=B,B.refCount++,B!==null&&(z.pooledCacheLanes|=_),z=B),f.memoizedState={parent:S,cache:z},er(f),zl(f,H,z)):((l.lanes&_)!==0&&(zo(l,f),wa(f,null,null,_),Qr()),z=l.memoizedState,B=f.memoizedState,z.parent!==S?(z={parent:S,cache:S},f.memoizedState=z,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=z),zl(f,H,S)):(S=B.cache,zl(f,H,S),S!==z.cache&&xh(f,[H],_,!0))),ds(l,f,f.pendingProps.children,_),f.child;case 29:throw f.pendingProps}throw Error(i(156,f.tag))}function mc(l){l.flags|=4}function em(l,f,_,S,z){if((f=(l.mode&32)!==0)&&(f=!1),f){if(l.flags|=16777216,(z&335544128)===z)if(l.stateNode.complete)l.flags|=8192;else if(yv())l.flags|=8192;else throw vn=qe,Ve}else l.flags&=-16777217}function lv(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!$o(f))if(yv())l.flags|=8192;else throw vn=qe,Ve}function nm(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?Et():536870912,l.lanes|=f,kh|=f)}function Ad(l,f){if(!ui)switch(l.tailMode){case"hidden":f=l.tail;for(var _=null;f!==null;)f.alternate!==null&&(_=f),f=f.sibling;_===null?l.tail=null:_.sibling=null;break;case"collapsed":_=l.tail;for(var S=null;_!==null;)_.alternate!==null&&(S=_),_=_.sibling;S===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function Ar(l){var f=l.alternate!==null&&l.alternate.child===l.child,_=0,S=0;if(f)for(var z=l.child;z!==null;)_|=z.lanes|z.childLanes,S|=z.subtreeFlags&65011712,S|=z.flags&65011712,z.return=l,z=z.sibling;else for(z=l.child;z!==null;)_|=z.lanes|z.childLanes,S|=z.subtreeFlags,S|=z.flags,z.return=l,z=z.sibling;return l.subtreeFlags|=S,l.childLanes=_,f}function kb(l,f,_){var S=f.pendingProps;switch(vr(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(f),null;case 1:return Ar(f),null;case 3:return _=f.stateNode,S=null,l!==null&&(S=l.memoizedState.cache),f.memoizedState.cache!==S&&(f.flags|=2048),qs(H),Gt(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(l===null||l.child===null)&&(Ei(f)?mc(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Il())),Ar(f),null;case 26:var z=f.type,B=f.memoizedState;return l===null?(mc(f),B!==null?(Ar(f),lv(f,B)):(Ar(f),em(f,z,null,S,_))):B?B!==l.memoizedState?(mc(f),Ar(f),lv(f,B)):(Ar(f),f.flags&=-16777217):(l=l.memoizedProps,l!==S&&mc(f),Ar(f),em(f,z,l,S,_)),null;case 27:if(Ee(f),_=ce.current,z=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==S&&mc(f);else{if(!S){if(f.stateNode===null)throw Error(i(166));return Ar(f),null}l=Xt.current,Ei(f)?Rc(f):(l=ts(z,S,_),f.stateNode=l,mc(f))}return Ar(f),null;case 5:if(Ee(f),z=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==S&&mc(f);else{if(!S){if(f.stateNode===null)throw Error(i(166));return Ar(f),null}if(B=Xt.current,Ei(f))Rc(f);else{var at=We(ce.current);switch(B){case 1:B=at.createElementNS("http://www.w3.org/2000/svg",z);break;case 2:B=at.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;default:switch(z){case"svg":B=at.createElementNS("http://www.w3.org/2000/svg",z);break;case"math":B=at.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;case"script":B=at.createElement("div"),B.innerHTML="<script><\/script>",B=B.removeChild(B.firstChild);break;case"select":B=typeof S.is=="string"?at.createElement("select",{is:S.is}):at.createElement("select"),S.multiple?B.multiple=!0:S.size&&(B.size=S.size);break;default:B=typeof S.is=="string"?at.createElement(z,{is:S.is}):at.createElement(z)}}B[Ke]=f,B[an]=S;t:for(at=f.child;at!==null;){if(at.tag===5||at.tag===6)B.appendChild(at.stateNode);else if(at.tag!==4&&at.tag!==27&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===f)break t;for(;at.sibling===null;){if(at.return===null||at.return===f)break t;at=at.return}at.sibling.return=at.return,at=at.sibling}f.stateNode=B;t:switch(He(B,z,S),z){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break t;case"img":S=!0;break t;default:S=!1}S&&mc(f)}}return Ar(f),em(f,f.type,l===null?null:l.memoizedProps,f.pendingProps,_),null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==S&&mc(f);else{if(typeof S!="string"&&f.stateNode===null)throw Error(i(166));if(l=ce.current,Ei(f)){if(l=f.stateNode,_=f.memoizedProps,S=null,z=Je,z!==null)switch(z.tag){case 27:case 5:S=z.memoizedProps}l[Ke]=f,l=!!(l.nodeValue===_||S!==null&&S.suppressHydrationWarning===!0||ae(l.nodeValue,_)),l||Kr(f,!0)}else l=We(l).createTextNode(S),l[Ke]=f,f.stateNode=l}return Ar(f),null;case 31:if(_=f.memoizedState,l===null||l.memoizedState!==null){if(S=Ei(f),_!==null){if(l===null){if(!S)throw Error(i(318));if(l=f.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(557));l[Ke]=f}else Ri(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ar(f),l=!1}else _=Il(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=_),l=!0;if(!l)return f.flags&256?(Hr(f),f):(Hr(f),null);if((f.flags&128)!==0)throw Error(i(558))}return Ar(f),null;case 13:if(S=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(z=Ei(f),S!==null&&S.dehydrated!==null){if(l===null){if(!z)throw Error(i(318));if(z=f.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(i(317));z[Ke]=f}else Ri(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ar(f),z=!1}else z=Il(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=z),z=!0;if(!z)return f.flags&256?(Hr(f),f):(Hr(f),null)}return Hr(f),(f.flags&128)!==0?(f.lanes=_,f):(_=S!==null,l=l!==null&&l.memoizedState!==null,_&&(S=f.child,z=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(z=S.alternate.memoizedState.cachePool.pool),B=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(B=S.memoizedState.cachePool.pool),B!==z&&(S.flags|=2048)),_!==l&&_&&(f.child.flags|=8192),nm(f,f.updateQueue),Ar(f),null);case 4:return Gt(),l===null&&tt(f.stateNode.containerInfo),Ar(f),null;case 10:return qs(f.type),Ar(f),null;case 19:if(Mt(Ni),S=f.memoizedState,S===null)return Ar(f),null;if(z=(f.flags&128)!==0,B=S.rendering,B===null)if(z)Ad(S,!1);else{if(ea!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(B=lo(l),B!==null){for(f.flags|=128,Ad(S,!1),l=B.updateQueue,f.updateQueue=l,nm(f,l),f.subtreeFlags=0,l=_,_=f.child;_!==null;)hc(_,l),_=_.sibling;return Lt(Ni,Ni.current&1|2),ui&&Mn(f,S.treeForkCount),f.child}l=l.sibling}S.tail!==null&&fn()>dm&&(f.flags|=128,z=!0,Ad(S,!1),f.lanes=4194304)}else{if(!z)if(l=lo(B),l!==null){if(f.flags|=128,z=!0,l=l.updateQueue,f.updateQueue=l,nm(f,l),Ad(S,!0),S.tail===null&&S.tailMode==="hidden"&&!B.alternate&&!ui)return Ar(f),null}else 2*fn()-S.renderingStartTime>dm&&_!==536870912&&(f.flags|=128,z=!0,Ad(S,!1),f.lanes=4194304);S.isBackwards?(B.sibling=f.child,f.child=B):(l=S.last,l!==null?l.sibling=B:f.child=B,S.last=B)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=fn(),l.sibling=null,_=Ni.current,Lt(Ni,z?_&1|2:_&1),ui&&Mn(f,S.treeForkCount),l):(Ar(f),null);case 22:case 23:return Hr(f),Nc(),S=f.memoizedState!==null,l!==null?l.memoizedState!==null!==S&&(f.flags|=8192):S&&(f.flags|=8192),S?(_&536870912)!==0&&(f.flags&128)===0&&(Ar(f),f.subtreeFlags&6&&(f.flags|=8192)):Ar(f),_=f.updateQueue,_!==null&&nm(f,_.retryQueue),_=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(_=l.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==_&&(f.flags|=2048),l!==null&&Mt(Vt),null;case 24:return _=null,l!==null&&(_=l.memoizedState.cache),f.memoizedState.cache!==_&&(f.flags|=2048),qs(H),Ar(f),null;case 25:return null;case 30:return null}throw Error(i(156,f.tag))}function Ob(l,f){switch(vr(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return qs(H),Gt(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return Ee(f),null;case 31:if(f.memoizedState!==null){if(Hr(f),f.alternate===null)throw Error(i(340));Ri()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 13:if(Hr(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(i(340));Ri()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return Mt(Ni),null;case 4:return Gt(),null;case 10:return qs(f.type),null;case 22:case 23:return Hr(f),Nc(),l!==null&&Mt(Vt),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return qs(H),null;case 25:return null;default:return null}}function Ef(l,f){switch(vr(f),f.tag){case 3:qs(H),Gt();break;case 26:case 27:case 5:Ee(f);break;case 4:Gt();break;case 31:f.memoizedState!==null&&Hr(f);break;case 13:Hr(f);break;case 19:Mt(Ni);break;case 10:qs(f.type);break;case 22:case 23:Hr(f),Nc(),l!==null&&Mt(Vt);break;case 24:qs(H)}}function Br(l,f){try{var _=f.updateQueue,S=_!==null?_.lastEffect:null;if(S!==null){var z=S.next;_=z;do{if((_.tag&l)===l){S=void 0;var B=_.create,at=_.inst;S=B(),at.destroy=S}_=_.next}while(_!==z)}}catch(bt){Bi(f,f.return,bt)}}function gc(l,f,_){try{var S=f.updateQueue,z=S!==null?S.lastEffect:null;if(z!==null){var B=z.next;S=B;do{if((S.tag&l)===l){var at=S.inst,bt=at.destroy;if(bt!==void 0){at.destroy=void 0,z=f;var Yt=_,be=bt;try{be()}catch(Ie){Bi(z,Yt,Ie)}}}S=S.next}while(S!==B)}}catch(Ie){Bi(f,f.return,Ie)}}function qg(l){var f=l.updateQueue;if(f!==null){var _=l.stateNode;try{Lr(f,_)}catch(S){Bi(l,l.return,S)}}}function Hg(l,f,_){_.props=Eh(l.type,l.memoizedProps),_.state=l.memoizedState;try{_.componentWillUnmount()}catch(S){Bi(l,f,S)}}function Ai(l,f){try{var _=l.ref;if(_!==null){switch(l.tag){case 26:case 27:case 5:var S=l.stateNode;break;case 30:S=l.stateNode;break;default:S=l.stateNode}typeof _=="function"?l.refCleanup=_(S):_.current=S}}catch(z){Bi(l,f,z)}}function Ll(l,f){var _=l.ref,S=l.refCleanup;if(_!==null)if(typeof S=="function")try{S()}catch(z){Bi(l,f,z)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(z){Bi(l,f,z)}else _.current=null}function Zg(l){var f=l.type,_=l.memoizedProps,S=l.stateNode;try{t:switch(f){case"button":case"input":case"select":case"textarea":_.autoFocus&&S.focus();break t;case"img":_.src?S.src=_.src:_.srcSet&&(S.srcset=_.srcSet)}}catch(z){Bi(l,l.return,z)}}function im(l,f,_){try{var S=l.stateNode;mn(S,l.type,_,f),S[an]=f}catch(z){Bi(l,l.return,z)}}function Iu(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Pr(l.type)||l.tag===4}function qc(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Iu(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Pr(l.type)||l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function rm(l,f,_){var S=l.tag;if(S===5||S===6)l=l.stateNode,f?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(l,f):(f=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,f.appendChild(l),_=_._reactRootContainer,_!=null||f.onclick!==null||(f.onclick=fr));else if(S!==4&&(S===27&&Pr(l.type)&&(_=l.stateNode,f=null),l=l.child,l!==null))for(rm(l,f,_),l=l.sibling;l!==null;)rm(l,f,_),l=l.sibling}function am(l,f,_){var S=l.tag;if(S===5||S===6)l=l.stateNode,f?_.insertBefore(l,f):_.appendChild(l);else if(S!==4&&(S===27&&Pr(l.type)&&(_=l.stateNode),l=l.child,l!==null))for(am(l,f,_),l=l.sibling;l!==null;)am(l,f,_),l=l.sibling}function uv(l){var f=l.stateNode,_=l.memoizedProps;try{for(var S=l.type,z=f.attributes;z.length;)f.removeAttributeNode(z[0]);He(f,S,_),f[Ke]=l,f[an]=_}catch(B){Bi(l,l.return,B)}}var yc=!1,Fa=!1,Gg=!1,cv=typeof WeakSet=="function"?WeakSet:Set,ps=null;function Db(l,f){if(l=l.containerInfo,Ge=Rv,l=Su(l),el(l)){if("selectionStart"in l)var _={start:l.selectionStart,end:l.selectionEnd};else t:{_=(_=l.ownerDocument)&&_.defaultView||window;var S=_.getSelection&&_.getSelection();if(S&&S.rangeCount!==0){_=S.anchorNode;var z=S.anchorOffset,B=S.focusNode;S=S.focusOffset;try{_.nodeType,B.nodeType}catch{_=null;break t}var at=0,bt=-1,Yt=-1,be=0,Ie=0,je=l,we=null;e:for(;;){for(var Ae;je!==_||z!==0&&je.nodeType!==3||(bt=at+z),je!==B||S!==0&&je.nodeType!==3||(Yt=at+S),je.nodeType===3&&(at+=je.nodeValue.length),(Ae=je.firstChild)!==null;)we=je,je=Ae;for(;;){if(je===l)break e;if(we===_&&++be===z&&(bt=at),we===B&&++Ie===S&&(Yt=at),(Ae=je.nextSibling)!==null)break;je=we,we=je.parentNode}je=Ae}_=bt===-1||Yt===-1?null:{start:bt,end:Yt}}else _=null}_=_||{start:0,end:0}}else _=null;for(un={focusedElem:l,selectionRange:_},Rv=!1,ps=f;ps!==null;)if(f=ps,l=f.child,(f.subtreeFlags&1028)!==0&&l!==null)l.return=f,ps=l;else for(;ps!==null;){switch(f=ps,B=f.alternate,l=f.flags,f.tag){case 0:if((l&4)!==0&&(l=f.updateQueue,l=l!==null?l.events:null,l!==null))for(_=0;_<l.length;_++)z=l[_],z.ref.impl=z.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&B!==null){l=void 0,_=f,z=B.memoizedProps,B=B.memoizedState,S=_.stateNode;try{var wn=Eh(_.type,z);l=S.getSnapshotBeforeUpdate(wn,B),S.__reactInternalSnapshotBeforeUpdate=l}catch($n){Bi(_,_.return,$n)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,_=l.nodeType,_===9)ms(l);else if(_===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":ms(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=f.sibling,l!==null){l.return=f.return,ps=l;break}ps=f.return}}function hv(l,f,_){var S=_.flags;switch(_.tag){case 0:case 11:case 15:ml(l,_),S&4&&Br(5,_);break;case 1:if(ml(l,_),S&4)if(l=_.stateNode,f===null)try{l.componentDidMount()}catch(at){Bi(_,_.return,at)}else{var z=Eh(_.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(z,f,l.__reactInternalSnapshotBeforeUpdate)}catch(at){Bi(_,_.return,at)}}S&64&&qg(_),S&512&&Ai(_,_.return);break;case 3:if(ml(l,_),S&64&&(l=_.updateQueue,l!==null)){if(f=null,_.child!==null)switch(_.child.tag){case 27:case 5:f=_.child.stateNode;break;case 1:f=_.child.stateNode}try{Lr(l,f)}catch(at){Bi(_,_.return,at)}}break;case 27:f===null&&S&4&&uv(_);case 26:case 5:ml(l,_),f===null&&S&4&&Zg(_),S&512&&Ai(_,_.return);break;case 12:ml(l,_);break;case 31:ml(l,_),S&4&&fv(l,_);break;case 13:ml(l,_),S&4&&dv(l,_),S&64&&(l=_.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(_=Tv.bind(null,_),go(l,_))));break;case 22:if(S=_.memoizedState!==null||yc,!S){f=f!==null&&f.memoizedState!==null||Fa,z=yc;var B=Fa;yc=S,(Fa=f)&&!B?Ro(l,_,(_.subtreeFlags&8772)!==0):ml(l,_),yc=z,Fa=B}break;case 30:break;default:ml(l,_)}}function Cd(l){var f=l.alternate;f!==null&&(l.alternate=null,Cd(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&yi(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var lr=null,uo=!1;function ru(l,f,_){for(_=_.child;_!==null;)sm(l,f,_),_=_.sibling}function sm(l,f,_){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(yr,_)}catch{}switch(_.tag){case 26:Fa||Ll(_,f),ru(l,f,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:Fa||Ll(_,f);var S=lr,z=uo;Pr(_.type)&&(lr=_.stateNode,uo=!1),ru(l,f,_),Fr(_.stateNode),lr=S,uo=z;break;case 5:Fa||Ll(_,f);case 6:if(S=lr,z=uo,lr=null,ru(l,f,_),lr=S,uo=z,lr!==null)if(uo)try{(lr.nodeType===9?lr.body:lr.nodeName==="HTML"?lr.ownerDocument.body:lr).removeChild(_.stateNode)}catch(B){Bi(_,f,B)}else try{lr.removeChild(_.stateNode)}catch(B){Bi(_,f,B)}break;case 18:lr!==null&&(uo?(l=lr,Qa(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,_.stateNode),Dm(l)):Qa(lr,_.stateNode));break;case 4:S=lr,z=uo,lr=_.stateNode.containerInfo,uo=!0,ru(l,f,_),lr=S,uo=z;break;case 0:case 11:case 14:case 15:gc(2,_,f),Fa||gc(4,_,f),ru(l,f,_);break;case 1:Fa||(Ll(_,f),S=_.stateNode,typeof S.componentWillUnmount=="function"&&Hg(_,f,S)),ru(l,f,_);break;case 21:ru(l,f,_);break;case 22:Fa=(S=Fa)||_.memoizedState!==null,ru(l,f,_),Fa=S;break;default:ru(l,f,_)}}function fv(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Dm(l)}catch(_){Bi(f,f.return,_)}}}function dv(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Dm(l)}catch(_){Bi(f,f.return,_)}}function Ib(l){switch(l.tag){case 31:case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new cv),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new cv),f;default:throw Error(i(435,l.tag))}}function Pd(l,f){var _=Ib(l);f.forEach(function(S){if(!_.has(S)){_.add(S);var z=Mv.bind(null,l,S);S.then(z,z)}})}function co(l,f){var _=f.deletions;if(_!==null)for(var S=0;S<_.length;S++){var z=_[S],B=l,at=f,bt=at;t:for(;bt!==null;){switch(bt.tag){case 27:if(Pr(bt.type)){lr=bt.stateNode,uo=!1;break t}break;case 5:lr=bt.stateNode,uo=!1;break t;case 3:case 4:lr=bt.stateNode.containerInfo,uo=!0;break t}bt=bt.return}if(lr===null)throw Error(i(160));sm(B,at,z),lr=null,uo=!1,B=z.alternate,B!==null&&(B.return=null),z.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)om(f,l),f=f.sibling}var jr=null;function om(l,f){var _=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:co(f,l),ho(l),S&4&&(gc(3,l,l.return),Br(3,l),gc(5,l,l.return));break;case 1:co(f,l),ho(l),S&512&&(Fa||_===null||Ll(_,_.return)),S&64&&yc&&(l=l.updateQueue,l!==null&&(S=l.callbacks,S!==null&&(_=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=_===null?S:_.concat(S))));break;case 26:var z=jr;if(co(f,l),ho(l),S&512&&(Fa||_===null||Ll(_,_.return)),S&4){var B=_!==null?_.memoizedState:null;if(S=l.memoizedState,_===null)if(S===null)if(l.stateNode===null){t:{S=l.type,_=l.memoizedProps,z=z.ownerDocument||z;e:switch(S){case"title":B=z.getElementsByTagName("title")[0],(!B||B[Ji]||B[Ke]||B.namespaceURI==="http://www.w3.org/2000/svg"||B.hasAttribute("itemprop"))&&(B=z.createElement(S),z.head.insertBefore(B,z.querySelector("head > title"))),He(B,S,_),B[Ke]=l,ci(B),S=B;break t;case"link":var at=Dv("link","href",z).get(S+(_.href||""));if(at){for(var bt=0;bt<at.length;bt++)if(B=at[bt],B.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&B.getAttribute("rel")===(_.rel==null?null:_.rel)&&B.getAttribute("title")===(_.title==null?null:_.title)&&B.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){at.splice(bt,1);break e}}B=z.createElement(S),He(B,S,_),z.head.appendChild(B);break;case"meta":if(at=Dv("meta","content",z).get(S+(_.content||""))){for(bt=0;bt<at.length;bt++)if(B=at[bt],B.getAttribute("content")===(_.content==null?null:""+_.content)&&B.getAttribute("name")===(_.name==null?null:_.name)&&B.getAttribute("property")===(_.property==null?null:_.property)&&B.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&B.getAttribute("charset")===(_.charSet==null?null:_.charSet)){at.splice(bt,1);break e}}B=z.createElement(S),He(B,S,_),z.head.appendChild(B);break;default:throw Error(i(468,S))}B[Ke]=l,ci(B),S=B}l.stateNode=S}else Iv(z,l.type,l.stateNode);else l.stateNode=Ov(z,S,l.memoizedProps);else B!==S?(B===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):B.count--,S===null?Iv(z,l.type,l.stateNode):Ov(z,S,l.memoizedProps)):S===null&&l.stateNode!==null&&im(l,l.memoizedProps,_.memoizedProps)}break;case 27:co(f,l),ho(l),S&512&&(Fa||_===null||Ll(_,_.return)),_!==null&&S&4&&im(l,l.memoizedProps,_.memoizedProps);break;case 5:if(co(f,l),ho(l),S&512&&(Fa||_===null||Ll(_,_.return)),l.flags&32){z=l.stateNode;try{Zt(z,"")}catch(wn){Bi(l,l.return,wn)}}S&4&&l.stateNode!=null&&(z=l.memoizedProps,im(l,z,_!==null?_.memoizedProps:z)),S&1024&&(Gg=!0);break;case 6:if(co(f,l),ho(l),S&4){if(l.stateNode===null)throw Error(i(162));S=l.memoizedProps,_=l.stateNode;try{_.nodeValue=S}catch(wn){Bi(l,l.return,wn)}}break;case 3:if(Om=null,z=jr,jr=Uo(f.containerInfo),co(f,l),jr=z,ho(l),S&4&&_!==null&&_.memoizedState.isDehydrated)try{Dm(f.containerInfo)}catch(wn){Bi(l,l.return,wn)}Gg&&(Gg=!1,_c(l));break;case 4:S=jr,jr=Uo(l.stateNode.containerInfo),co(f,l),ho(l),jr=S;break;case 12:co(f,l),ho(l);break;case 31:co(f,l),ho(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Pd(l,S)));break;case 13:co(f,l),ho(l),l.child.flags&8192&&l.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(fm=fn()),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Pd(l,S)));break;case 22:z=l.memoizedState!==null;var Yt=_!==null&&_.memoizedState!==null,be=yc,Ie=Fa;if(yc=be||z,Fa=Ie||Yt,co(f,l),Fa=Ie,yc=be,ho(l),S&8192)t:for(f=l.stateNode,f._visibility=z?f._visibility&-2:f._visibility|1,z&&(_===null||Yt||yc||Fa||au(l)),_=null,f=l;;){if(f.tag===5||f.tag===26){if(_===null){Yt=_=f;try{if(B=Yt.stateNode,z)at=B.style,typeof at.setProperty=="function"?at.setProperty("display","none","important"):at.display="none";else{bt=Yt.stateNode;var je=Yt.memoizedProps.style,we=je!=null&&je.hasOwnProperty("display")?je.display:null;bt.style.display=we==null||typeof we=="boolean"?"":(""+we).trim()}}catch(wn){Bi(Yt,Yt.return,wn)}}}else if(f.tag===6){if(_===null){Yt=f;try{Yt.stateNode.nodeValue=z?"":Yt.memoizedProps}catch(wn){Bi(Yt,Yt.return,wn)}}}else if(f.tag===18){if(_===null){Yt=f;try{var Ae=Yt.stateNode;z?ks(Ae,!0):ks(Yt.stateNode,!1)}catch(wn){Bi(Yt,Yt.return,wn)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break t;for(;f.sibling===null;){if(f.return===null||f.return===l)break t;_===f&&(_=null),f=f.return}_===f&&(_=null),f.sibling.return=f.return,f=f.sibling}S&4&&(S=l.updateQueue,S!==null&&(_=S.retryQueue,_!==null&&(S.retryQueue=null,Pd(l,_))));break;case 19:co(f,l),ho(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Pd(l,S)));break;case 30:break;case 21:break;default:co(f,l),ho(l)}}function ho(l){var f=l.flags;if(f&2){try{for(var _,S=l.return;S!==null;){if(Iu(S)){_=S;break}S=S.return}if(_==null)throw Error(i(160));switch(_.tag){case 27:var z=_.stateNode,B=qc(l);am(l,B,z);break;case 5:var at=_.stateNode;_.flags&32&&(Zt(at,""),_.flags&=-33);var bt=qc(l);am(l,bt,at);break;case 3:case 4:var Yt=_.stateNode.containerInfo,be=qc(l);rm(l,be,Yt);break;default:throw Error(i(161))}}catch(Ie){Bi(l,l.return,Ie)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function _c(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;_c(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function ml(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)hv(l,f.alternate,f),f=f.sibling}function au(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:gc(4,f,f.return),au(f);break;case 1:Ll(f,f.return);var _=f.stateNode;typeof _.componentWillUnmount=="function"&&Hg(f,f.return,_),au(f);break;case 27:Fr(f.stateNode);case 26:case 5:Ll(f,f.return),au(f);break;case 22:f.memoizedState===null&&au(f);break;case 30:au(f);break;default:au(f)}l=l.sibling}}function Ro(l,f,_){for(_=_&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var S=f.alternate,z=l,B=f,at=B.flags;switch(B.tag){case 0:case 11:case 15:Ro(z,B,_),Br(4,B);break;case 1:if(Ro(z,B,_),S=B,z=S.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(be){Bi(S,S.return,be)}if(S=B,z=S.updateQueue,z!==null){var bt=S.stateNode;try{var Yt=z.shared.hiddenCallbacks;if(Yt!==null)for(z.shared.hiddenCallbacks=null,z=0;z<Yt.length;z++)Cu(Yt[z],bt)}catch(be){Bi(S,S.return,be)}}_&&at&64&&qg(B),Ai(B,B.return);break;case 27:uv(B);case 26:case 5:Ro(z,B,_),_&&S===null&&at&4&&Zg(B),Ai(B,B.return);break;case 12:Ro(z,B,_);break;case 31:Ro(z,B,_),_&&at&4&&fv(z,B);break;case 13:Ro(z,B,_),_&&at&4&&dv(z,B);break;case 22:B.memoizedState===null&&Ro(z,B,_),Ai(B,B.return);break;case 30:break;default:Ro(z,B,_)}f=f.sibling}}function Af(l,f){var _=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(_=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==_&&(l!=null&&l.refCount++,_!=null&&et(_))}function Cf(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&et(l))}function su(l,f,_,S){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Yg(l,f,_,S),f=f.sibling}function Yg(l,f,_,S){var z=f.flags;switch(f.tag){case 0:case 11:case 15:su(l,f,_,S),z&2048&&Br(9,f);break;case 1:su(l,f,_,S);break;case 3:su(l,f,_,S),z&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&et(l)));break;case 12:if(z&2048){su(l,f,_,S),l=f.stateNode;try{var B=f.memoizedProps,at=B.id,bt=B.onPostCommit;typeof bt=="function"&&bt(at,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Yt){Bi(f,f.return,Yt)}}else su(l,f,_,S);break;case 31:su(l,f,_,S);break;case 13:su(l,f,_,S);break;case 23:break;case 22:B=f.stateNode,at=f.alternate,f.memoizedState!==null?B._visibility&2?su(l,f,_,S):kd(l,f):B._visibility&2?su(l,f,_,S):(B._visibility|=2,Ch(l,f,_,S,(f.subtreeFlags&10256)!==0||!1)),z&2048&&Af(at,f);break;case 24:su(l,f,_,S),z&2048&&Cf(f.alternate,f);break;default:su(l,f,_,S)}}function Ch(l,f,_,S,z){for(z=z&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var B=l,at=f,bt=_,Yt=S,be=at.flags;switch(at.tag){case 0:case 11:case 15:Ch(B,at,bt,Yt,z),Br(8,at);break;case 23:break;case 22:var Ie=at.stateNode;at.memoizedState!==null?Ie._visibility&2?Ch(B,at,bt,Yt,z):kd(B,at):(Ie._visibility|=2,Ch(B,at,bt,Yt,z)),z&&be&2048&&Af(at.alternate,at);break;case 24:Ch(B,at,bt,Yt,z),z&&be&2048&&Cf(at.alternate,at);break;default:Ch(B,at,bt,Yt,z)}f=f.sibling}}function kd(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var _=l,S=f,z=S.flags;switch(S.tag){case 22:kd(_,S),z&2048&&Af(S.alternate,S);break;case 24:kd(_,S),z&2048&&Cf(S.alternate,S);break;default:kd(_,S)}f=f.sibling}}var Pf=8192;function Ph(l,f,_){if(l.subtreeFlags&Pf)for(l=l.child;l!==null;)lm(l,f,_),l=l.sibling}function lm(l,f,_){switch(l.tag){case 26:Ph(l,f,_),l.flags&Pf&&l.memoizedState!==null&&Lh(_,jr,l.memoizedState,l.memoizedProps);break;case 5:Ph(l,f,_);break;case 3:case 4:var S=jr;jr=Uo(l.stateNode.containerInfo),Ph(l,f,_),jr=S;break;case 22:l.memoizedState===null&&(S=l.alternate,S!==null&&S.memoizedState!==null?(S=Pf,Pf=16777216,Ph(l,f,_),Pf=S):Ph(l,f,_));break;default:Ph(l,f,_)}}function um(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function Od(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var _=0;_<f.length;_++){var S=f[_];ps=S,kf(S,l)}um(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)pv(l),l=l.sibling}function pv(l){switch(l.tag){case 0:case 11:case 15:Od(l),l.flags&2048&&gc(9,l,l.return);break;case 3:Od(l);break;case 12:Od(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,Dd(l)):Od(l);break;default:Od(l)}}function Dd(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var _=0;_<f.length;_++){var S=f[_];ps=S,kf(S,l)}um(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:gc(8,f,f.return),Dd(f);break;case 22:_=f.stateNode,_._visibility&2&&(_._visibility&=-3,Dd(f));break;default:Dd(f)}l=l.sibling}}function kf(l,f){for(;ps!==null;){var _=ps;switch(_.tag){case 0:case 11:case 15:gc(8,_,f);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var S=_.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:et(_.memoizedState.cache)}if(S=_.child,S!==null)S.return=_,ps=S;else t:for(_=l;ps!==null;){S=ps;var z=S.sibling,B=S.return;if(Cd(S),S===_){ps=null;break t}if(z!==null){z.return=B,ps=z;break t}ps=B}}}var zu={getCacheForType:function(l){var f=m(H),_=f.data.get(l);return _===void 0&&(_=l(),f.data.set(l,_)),_},cacheSignal:function(){return m(H).controller.signal}},Hc=typeof WeakMap=="function"?WeakMap:Map,Gi=0,ur=null,xi=null,wi=0,Yi=0,fo=null,Zc=!1,Gc=!1,Id=!1,No=0,ea=0,vc=0,xc=0,cm=0,Gs=0,kh=0,zd=null,Bo=null,hm=!1,fm=0,mv=0,dm=1/0,pm=null,Lu=null,Cr=0,bc=null,Oh=null,Ru=0,mm=0,gm=null,Wg=null,Dh=0,Of=null;function jo(){return(Gi&2)!==0&&wi!==0?wi&-wi:Nt.T!==null?Hd():Oe()}function ym(){if(Gs===0)if((wi&536870912)===0||ui){var l=ya;ya<<=1,(ya&3932160)===0&&(ya=262144),Gs=l}else Gs=536870912;return l=Hs.current,l!==null&&(l.flags|=32),Gs}function po(l,f,_){(l===ur&&(Yi===2||Yi===9)||l.cancelPendingCommit!==null)&&(Ih(l,0),wc(l,wi,Gs,!1)),jt(l,_),((Gi&2)===0||l!==ur)&&(l===ur&&((Gi&2)===0&&(xc|=_),ea===4&&wc(l,wi,Gs,!1)),Rl(l))}function Fo(l,f,_){if((Gi&6)!==0)throw Error(i(327));var S=!_&&(f&127)===0&&(f&l.expiredLanes)===0||lt(l,f),z=S?vv(l,f):vm(l,f,!0),B=S;do{if(z===0){Gc&&!S&&wc(l,f,0,!1);break}else{if(_=l.current.alternate,B&&!gv(_)){z=vm(l,f,!1),B=!1;continue}if(z===2){if(B=f,l.errorRecoveryDisabledLanes&B)var at=0;else at=l.pendingLanes&-536870913,at=at!==0?at:at&536870912?536870912:0;if(at!==0){f=at;t:{var bt=l;z=zd;var Yt=bt.current.memoizedState.isDehydrated;if(Yt&&(Ih(bt,at).flags|=256),at=vm(bt,at,!1),at!==2){if(Id&&!Yt){bt.errorRecoveryDisabledLanes|=B,xc|=B,z=4;break t}B=Bo,Bo=z,B!==null&&(Bo===null?Bo=B:Bo.push.apply(Bo,B))}z=at}if(B=!1,z!==2)continue}}if(z===1){Ih(l,0),wc(l,f,0,!0);break}t:{switch(S=l,B=z,B){case 0:case 1:throw Error(i(345));case 4:if((f&4194048)!==f)break;case 6:wc(S,f,Gs,!Zc);break t;case 2:Bo=null;break;case 3:case 5:break;default:throw Error(i(329))}if((f&62914560)===f&&(z=fm+300-fn(),10<z)){if(wc(S,f,Gs,!Zc),It(S,0,!0)!==0)break t;Ru=f,S.timeoutHandle=gr(Df.bind(null,S,_,Bo,pm,hm,f,Gs,xc,kh,Zc,B,"Throttled",-0,0),z);break t}Df(S,_,Bo,pm,hm,f,Gs,xc,kh,Zc,B,null,-0,0)}}break}while(!0);Rl(l)}function Df(l,f,_,S,z,B,at,bt,Yt,be,Ie,je,we,Ae){if(l.timeoutHandle=-1,je=f.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fr},lm(f,B,je);var wn=(B&62914560)===B?fm-fn():(B&4194048)===B?mv-fn():0;if(wn=Rh(je,wn),wn!==null){Ru=B,l.cancelPendingCommit=wn(Jg.bind(null,l,f,B,_,S,z,at,bt,Yt,Ie,je,null,we,Ae)),wc(l,B,at,!be);return}}Jg(l,f,B,_,S,z,at,bt,Yt)}function gv(l){for(var f=l;;){var _=f.tag;if((_===0||_===11||_===15)&&f.flags&16384&&(_=f.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var S=0;S<_.length;S++){var z=_[S],B=z.getSnapshot;z=z.value;try{if(!Xr(B(),z))return!1}catch{return!1}}if(_=f.child,f.subtreeFlags&16384&&_!==null)_.return=f,f=_;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function wc(l,f,_,S){f&=~cm,f&=~xc,l.suspendedLanes|=f,l.pingedLanes&=~f,S&&(l.warmLanes|=f),S=l.expirationTimes;for(var z=f;0<z;){var B=31-_r(z),at=1<<B;S[B]=-1,z&=~at}_!==0&&Wt(l,_,f)}function Ld(){return(Gi&6)===0?(If(0),!1):!0}function _m(){if(xi!==null){if(Yi===0)var l=xi.return;else l=xi,so=hs=null,Lp(l),Zn=null,Fn=0,l=xi;for(;l!==null;)Ef(l.alternate,l),l=l.return;xi=null}}function Ih(l,f){var _=l.timeoutHandle;_!==-1&&(l.timeoutHandle=-1,Ma(_)),_=l.cancelPendingCommit,_!==null&&(l.cancelPendingCommit=null,_()),Ru=0,_m(),ur=l,xi=_=Oo(l.current,null),wi=f,Yi=0,fo=null,Zc=!1,Gc=lt(l,f),Id=!1,kh=Gs=cm=xc=vc=ea=0,Bo=zd=null,hm=!1,(f&8)!==0&&(f|=f&32);var S=l.entangledLanes;if(S!==0)for(l=l.entanglements,S&=f;0<S;){var z=31-_r(S),B=1<<z;f|=l[z],S&=~B}return No=f,ko(),_}function Xg(l,f){Bn=null,Nt.H=bd,f===Pe||f===ze?(f=pn(),Yi=3):f===Ve?(f=pn(),Yi=4):Yi=f===Rg?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,fo=f,xi===null&&(ea=1,Gp(l,w(f,l.current)))}function yv(){var l=Hs.current;return l===null?!0:(wi&4194048)===wi?oo===null:(wi&62914560)===wi||(wi&536870912)!==0?l===oo:!1}function Kg(){var l=Nt.H;return Nt.H=bd,l===null?bd:l}function Sc(){var l=Nt.A;return Nt.A=zu,l}function Rd(){ea=4,Zc||(wi&4194048)!==wi&&Hs.current!==null||(Gc=!0),(vc&134217727)===0&&(xc&134217727)===0||ur===null||wc(ur,wi,Gs,!1)}function vm(l,f,_){var S=Gi;Gi|=2;var z=Kg(),B=Sc();(ur!==l||wi!==f)&&(pm=null,Ih(l,f)),f=!1;var at=ea;t:do try{if(Yi!==0&&xi!==null){var bt=xi,Yt=fo;switch(Yi){case 8:_m(),at=6;break t;case 3:case 2:case 9:case 6:Hs.current===null&&(f=!0);var be=Yi;if(Yi=0,fo=null,ou(l,bt,Yt,be),_&&Gc){at=0;break t}break;default:be=Yi,Yi=0,fo=null,ou(l,bt,Yt,be)}}_v(),at=ea;break}catch(Ie){Xg(l,Ie)}while(!0);return f&&l.shellSuspendCounter++,so=hs=null,Gi=S,Nt.H=z,Nt.A=B,xi===null&&(ur=null,wi=0,ko()),at}function _v(){for(;xi!==null;)xv(xi)}function vv(l,f){var _=Gi;Gi|=2;var S=Kg(),z=Sc();ur!==l||wi!==f?(pm=null,dm=fn()+500,Ih(l,f)):Gc=lt(l,f);t:do try{if(Yi!==0&&xi!==null){f=xi;var B=fo;e:switch(Yi){case 1:Yi=0,fo=null,ou(l,f,B,1);break;case 2:case 9:if(dn(B)){Yi=0,fo=null,Qg(f);break}f=function(){Yi!==2&&Yi!==9||ur!==l||(Yi=7),Rl(l)},B.then(f,f);break t;case 3:Yi=7;break t;case 4:Yi=5;break t;case 7:dn(B)?(Yi=0,fo=null,Qg(f)):(Yi=0,fo=null,ou(l,f,B,7));break;case 5:var at=null;switch(xi.tag){case 26:at=xi.memoizedState;case 5:case 27:var bt=xi;if(at?$o(at):bt.stateNode.complete){Yi=0,fo=null;var Yt=bt.sibling;if(Yt!==null)xi=Yt;else{var be=bt.return;be!==null?(xi=be,Nd(be)):xi=null}break e}}Yi=0,fo=null,ou(l,f,B,5);break;case 6:Yi=0,fo=null,ou(l,f,B,6);break;case 8:_m(),ea=6;break t;default:throw Error(i(462))}}zb();break}catch(Ie){Xg(l,Ie)}while(!0);return so=hs=null,Nt.H=S,Nt.A=z,Gi=_,xi!==null?0:(ur=null,wi=0,ko(),ea)}function zb(){for(;xi!==null&&!$i();)xv(xi)}function xv(l){var f=Ed(l.alternate,l,No);l.memoizedProps=l.pendingProps,f===null?Nd(l):xi=f}function Qg(l){var f=l,_=f.alternate;switch(f.tag){case 15:case 0:f=av(_,f,f.pendingProps,f.type,void 0,wi);break;case 11:f=av(_,f,f.pendingProps,f.type.render,f.ref,wi);break;case 5:Lp(f);default:Ef(_,f),f=xi=hc(f,No),f=Ed(_,f,No)}l.memoizedProps=l.pendingProps,f===null?Nd(l):xi=f}function ou(l,f,_,S){so=hs=null,Lp(f),Zn=null,Fn=0;var z=f.return;try{if(Ab(l,z,f,_,wi)){ea=1,Gp(l,w(_,l.current)),xi=null;return}}catch(B){if(z!==null)throw xi=z,B;ea=1,Gp(l,w(_,l.current)),xi=null;return}f.flags&32768?(ui||S===1?l=!0:Gc||(wi&536870912)!==0?l=!1:(Zc=l=!0,(S===2||S===9||S===3||S===6)&&(S=Hs.current,S!==null&&S.tag===13&&(S.flags|=16384))),Bd(f,l)):Nd(f)}function Nd(l){var f=l;do{if((f.flags&32768)!==0){Bd(f,Zc);return}l=f.return;var _=kb(f.alternate,f,No);if(_!==null){xi=_;return}if(f=f.sibling,f!==null){xi=f;return}xi=f=l}while(f!==null);ea===0&&(ea=5)}function Bd(l,f){do{var _=Ob(l.alternate,l);if(_!==null){_.flags&=32767,xi=_;return}if(_=l.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!f&&(l=l.sibling,l!==null)){xi=l;return}xi=l=_}while(l!==null);ea=6,xi=null}function Jg(l,f,_,S,z,B,at,bt,Yt){l.cancelPendingCommit=null;do xm();while(Cr!==0);if((Gi&6)!==0)throw Error(i(327));if(f!==null){if(f===l.current)throw Error(i(177));if(B=f.lanes|f.childLanes,B|=ao,ie(l,_,B,at,bt,Yt),l===ur&&(xi=ur=null,wi=0),Oh=f,bc=l,Ru=_,mm=B,gm=z,Wg=S,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,ty(Dr,function(){return wv(),null})):(l.callbackNode=null,l.callbackPriority=0),S=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||S){S=Nt.T,Nt.T=null,z=Ct.p,Ct.p=2,at=Gi,Gi|=4;try{Db(l,f,_)}finally{Gi=at,Ct.p=z,Nt.T=S}}Cr=1,jd(),Fd(),Ud()}}function jd(){if(Cr===1){Cr=0;var l=bc,f=Oh,_=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||_){_=Nt.T,Nt.T=null;var S=Ct.p;Ct.p=2;var z=Gi;Gi|=4;try{om(f,l);var B=un,at=Su(l.containerInfo),bt=B.focusedElem,Yt=B.selectionRange;if(at!==bt&&bt&&bt.ownerDocument&&sc(bt.ownerDocument.documentElement,bt)){if(Yt!==null&&el(bt)){var be=Yt.start,Ie=Yt.end;if(Ie===void 0&&(Ie=be),"selectionStart"in bt)bt.selectionStart=be,bt.selectionEnd=Math.min(Ie,bt.value.length);else{var je=bt.ownerDocument||document,we=je&&je.defaultView||window;if(we.getSelection){var Ae=we.getSelection(),wn=bt.textContent.length,$n=Math.min(Yt.start,wn),Or=Yt.end===void 0?$n:Math.min(Yt.end,wn);!Ae.extend&&$n>Or&&(at=Or,Or=$n,$n=at);var he=Ao(bt,$n),ee=Ao(bt,Or);if(he&&ee&&(Ae.rangeCount!==1||Ae.anchorNode!==he.node||Ae.anchorOffset!==he.offset||Ae.focusNode!==ee.node||Ae.focusOffset!==ee.offset)){var _e=je.createRange();_e.setStart(he.node,he.offset),Ae.removeAllRanges(),$n>Or?(Ae.addRange(_e),Ae.extend(ee.node,ee.offset)):(_e.setEnd(ee.node,ee.offset),Ae.addRange(_e))}}}}for(je=[],Ae=bt;Ae=Ae.parentNode;)Ae.nodeType===1&&je.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof bt.focus=="function"&&bt.focus(),bt=0;bt<je.length;bt++){var Re=je[bt];Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}}Rv=!!Ge,un=Ge=null}finally{Gi=z,Ct.p=S,Nt.T=_}}l.current=f,Cr=2}}function Fd(){if(Cr===2){Cr=0;var l=bc,f=Oh,_=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||_){_=Nt.T,Nt.T=null;var S=Ct.p;Ct.p=2;var z=Gi;Gi|=4;try{hv(l,f.alternate,f)}finally{Gi=z,Ct.p=S,Nt.T=_}}Cr=3}}function Ud(){if(Cr===4||Cr===3){Cr=0,ni();var l=bc,f=Oh,_=Ru,S=Wg;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Cr=5:(Cr=0,Oh=bc=null,bv(l,l.pendingLanes));var z=l.pendingLanes;if(z===0&&(Lu=null),se(_),f=f.stateNode,Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(yr,f,void 0,(f.current.flags&128)===128)}catch{}if(S!==null){f=Nt.T,z=Ct.p,Ct.p=2,Nt.T=null;try{for(var B=l.onRecoverableError,at=0;at<S.length;at++){var bt=S[at];B(bt.value,{componentStack:bt.stack})}}finally{Nt.T=f,Ct.p=z}}(Ru&3)!==0&&xm(),Rl(l),z=l.pendingLanes,(_&261930)!==0&&(z&42)!==0?l===Of?Dh++:(Dh=0,Of=l):Dh=0,If(0)}}function bv(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,et(f)))}function xm(){return jd(),Fd(),Ud(),wv()}function wv(){if(Cr!==5)return!1;var l=bc,f=mm;mm=0;var _=se(Ru),S=Nt.T,z=Ct.p;try{Ct.p=32>_?32:_,Nt.T=null,_=gm,gm=null;var B=bc,at=Ru;if(Cr=0,Oh=bc=null,Ru=0,(Gi&6)!==0)throw Error(i(331));var bt=Gi;if(Gi|=4,pv(B.current),Yg(B,B.current,at,_),Gi=bt,If(0,!1),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(yr,B)}catch{}return!0}finally{Ct.p=z,Nt.T=S,bv(l,f)}}function Sv(l,f,_){f=w(_,f),f=zg(l.stateNode,f,2),l=Ps(l,f,2),l!==null&&(jt(l,2),Rl(l))}function Bi(l,f,_){if(l.tag===3)Sv(l,l,_);else for(;f!==null;){if(f.tag===3){Sv(f,l,_);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Lu===null||!Lu.has(S))){l=w(_,l),_=Lg(2),S=Ps(f,_,2),S!==null&&(Ah(_,S,f,l),jt(S,2),Rl(S));break}}f=f.return}}function Ua(l,f,_){var S=l.pingCache;if(S===null){S=l.pingCache=new Hc;var z=new Set;S.set(f,z)}else z=S.get(f),z===void 0&&(z=new Set,S.set(f,z));z.has(_)||(Id=!0,z.add(_),l=Yc.bind(null,l,f,_),f.then(l,l))}function Yc(l,f,_){var S=l.pingCache;S!==null&&S.delete(f),l.pingedLanes|=l.suspendedLanes&_,l.warmLanes&=~_,ur===l&&(wi&_)===_&&(ea===4||ea===3&&(wi&62914560)===wi&&300>fn()-fm?(Gi&2)===0&&Ih(l,0):cm|=_,kh===wi&&(kh=0)),Rl(l)}function bm(l,f){f===0&&(f=Et()),l=$s(l,f),l!==null&&(jt(l,f),Rl(l))}function Tv(l){var f=l.memoizedState,_=0;f!==null&&(_=f.retryLane),bm(l,_)}function Mv(l,f){var _=0;switch(l.tag){case 31:case 13:var S=l.stateNode,z=l.memoizedState;z!==null&&(_=z.retryLane);break;case 19:S=l.stateNode;break;case 22:S=l.stateNode._retryCache;break;default:throw Error(i(314))}S!==null&&S.delete(f),bm(l,_)}function ty(l,f){return ge(l,f)}var wm=null,zh=null,Sm=!1,Tm=!1,Mm=!1,Nu=0;function Rl(l){l!==zh&&l.next===null&&(zh===null?wm=zh=l:zh=zh.next=l),Tm=!0,Sm||(Sm=!0,qd())}function If(l,f){if(!Mm&&Tm){Mm=!0;do for(var _=!1,S=wm;S!==null;){if(l!==0){var z=S.pendingLanes;if(z===0)var B=0;else{var at=S.suspendedLanes,bt=S.pingedLanes;B=(1<<31-_r(42|l)+1)-1,B&=z&~(at&~bt),B=B&201326741?B&201326741|1:B?B|2:0}B!==0&&(_=!0,$d(S,B))}else B=wi,B=It(S,S===ur?B:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(B&3)===0||lt(S,B)||(_=!0,$d(S,B));S=S.next}while(_);Mm=!1}}function Vd(){Em()}function Em(){Tm=Sm=!1;var l=0;Nu!==0&&mr()&&(l=Nu);for(var f=fn(),_=null,S=wm;S!==null;){var z=S.next,B=ey(S,f);B===0?(S.next=null,_===null?wm=z:_.next=z,z===null&&(zh=_)):(_=S,(l!==0||(B&3)!==0)&&(Tm=!0)),S=z}Cr!==0&&Cr!==5||If(l),Nu!==0&&(Nu=0)}function ey(l,f){for(var _=l.suspendedLanes,S=l.pingedLanes,z=l.expirationTimes,B=l.pendingLanes&-62914561;0<B;){var at=31-_r(B),bt=1<<at,Yt=z[at];Yt===-1?((bt&_)===0||(bt&S)!==0)&&(z[at]=dt(bt,f)):Yt<=f&&(l.expiredLanes|=bt),B&=~bt}if(f=ur,_=wi,_=It(l,l===f?_:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S=l.callbackNode,_===0||l===f&&(Yi===2||Yi===9)||l.cancelPendingCommit!==null)return S!==null&&S!==null&&Gn(S),l.callbackNode=null,l.callbackPriority=0;if((_&3)===0||lt(l,_)){if(f=_&-_,f===l.callbackPriority)return f;switch(S!==null&&Gn(S),se(_)){case 2:case 8:_=Ui;break;case 32:_=Dr;break;case 268435456:_=Oa;break;default:_=Dr}return S=Am.bind(null,l),_=ge(_,S),l.callbackPriority=f,l.callbackNode=_,f}return S!==null&&S!==null&&Gn(S),l.callbackPriority=2,l.callbackNode=null,2}function Am(l,f){if(Cr!==0&&Cr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var _=l.callbackNode;if(xm()&&l.callbackNode!==_)return null;var S=wi;return S=It(l,l===ur?S:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S===0?null:(Fo(l,S,f),ey(l,fn()),l.callbackNode!=null&&l.callbackNode===_?Am.bind(null,l):null)}function $d(l,f){if(xm())return null;Fo(l,f,!0)}function qd(){Ys(function(){(Gi&6)!==0?ge(mi,Vd):Em()})}function Hd(){if(Nu===0){var l=Ot;l===0&&(l=Ir,Ir<<=1,(Ir&261888)===0&&(Ir=256)),Nu=l}return Nu}function Cm(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Tr(""+l)}function Pm(l,f){var _=f.ownerDocument.createElement("input");return _.name=f.name,_.value=f.value,l.id&&_.setAttribute("form",l.id),f.parentNode.insertBefore(_,f),l=new FormData(l),_.parentNode.removeChild(_),l}function Lb(l,f,_,S,z){if(f==="submit"&&_&&_.stateNode===z){var B=Cm((z[an]||null).action),at=S.submitter;at&&(f=(f=at[an]||null)?Cm(f.formAction):at.getAttribute("formAction"),f!==null&&(B=f,at=null));var bt=new Gl("action","action",null,S,z);l.push({event:bt,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Nu!==0){var Yt=at?Pm(z,at):new FormData(z);bf(_,{pending:!0,data:Yt,method:z.method,action:B},null,Yt)}}else typeof B=="function"&&(bt.preventDefault(),Yt=at?Pm(z,at):new FormData(z),bf(_,{pending:!0,data:Yt,method:z.method,action:B},B,Yt))},currentTarget:z}]})}}for(var h=0;h<ro.length;h++){var o=ro[h],d=o.toLowerCase(),v=o[0].toUpperCase()+o.slice(1);xa(d,"on"+v)}xa(za,"onAnimationEnd"),xa(Co,"onAnimationIteration"),xa(kl,"onAnimationStart"),xa("dblclick","onDoubleClick"),xa("focusin","onFocus"),xa("focusout","onBlur"),xa(sl,"onTransitionRun"),xa(Po,"onTransitionStart"),xa(pd,"onTransitionCancel"),xa(Ol,"onTransitionEnd"),Da("onMouseEnter",["mouseout","mouseover"]),Da("onMouseLeave",["mouseout","mouseover"]),Da("onPointerEnter",["pointerout","pointerover"]),Da("onPointerLeave",["pointerout","pointerover"]),Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Un("onBeforeInput",["compositionend","keypress","textInput","paste"]),Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var T="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(T));function k(l,f){f=(f&4)!==0;for(var _=0;_<l.length;_++){var S=l[_],z=S.event;S=S.listeners;t:{var B=void 0;if(f)for(var at=S.length-1;0<=at;at--){var bt=S[at],Yt=bt.instance,be=bt.currentTarget;if(bt=bt.listener,Yt!==B&&z.isPropagationStopped())break t;B=bt,z.currentTarget=be;try{B(z)}catch(Ie){Cs(Ie)}z.currentTarget=null,B=Yt}else for(at=0;at<S.length;at++){if(bt=S[at],Yt=bt.instance,be=bt.currentTarget,bt=bt.listener,Yt!==B&&z.isPropagationStopped())break t;B=bt,z.currentTarget=be;try{B(z)}catch(Ie){Cs(Ie)}z.currentTarget=null,B=Yt}}}}function R(l,f){var _=f[Wn];_===void 0&&(_=f[Wn]=new Set);var S=l+"__bubble";_.has(S)||(ot(f,l,2,!1),_.add(S))}function U(l,f,_){var S=0;f&&(S|=4),ot(_,l,S,f)}var G="_reactListening"+Math.random().toString(36).slice(2);function tt(l){if(!l[G]){l[G]=!0,as.forEach(function(_){_!=="selectionchange"&&(P.has(_)||U(_,!1,l),U(_,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[G]||(f[G]=!0,U("selectionchange",!1,f))}}function ot(l,f,_,S){switch(AM(f)){case 2:var z=hB;break;case 8:z=fB;break;default:z=Bb}_=z.bind(null,f,_,l),z=void 0,!Ml||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(z=!0),S?z!==void 0?l.addEventListener(f,_,{capture:!0,passive:z}):l.addEventListener(f,_,!0):z!==void 0?l.addEventListener(f,_,{passive:z}):l.addEventListener(f,_,!1)}function ht(l,f,_,S,z){var B=S;if((f&1)===0&&(f&2)===0&&S!==null)t:for(;;){if(S===null)return;var at=S.tag;if(at===3||at===4){var bt=S.stateNode.containerInfo;if(bt===z)break;if(at===4)for(at=S.return;at!==null;){var Yt=at.tag;if((Yt===3||Yt===4)&&at.stateNode.containerInfo===z)return;at=at.return}for(;bt!==null;){if(at=Oi(bt),at===null)return;if(Yt=at.tag,Yt===5||Yt===6||Yt===26||Yt===27){S=B=at;continue t}bt=bt.parentNode}}S=S.return}Qo(function(){var be=B,Ie=Tl(_),je=[];t:{var we=_h.get(l);if(we!==void 0){var Ae=Gl,wn=l;switch(l){case"keypress":if(Xn(_)===0)break t;case"keydown":case"keyup":Ae=zc;break;case"focusin":wn="focus",Ae=hh;break;case"focusout":wn="blur",Ae=hh;break;case"beforeblur":case"afterblur":Ae=hh;break;case"click":if(_.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=Xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=pf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=vu;break;case za:case Co:case kl:Ae=fh;break;case Ol:Ae=Lc;break;case"scroll":case"scrollend":Ae=hi;break;case"wheel":Ae=zi;break;case"copy":case"cut":case"paste":Ae=So;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=ph;break;case"toggle":case"beforetoggle":Ae=Kn}var $n=(f&4)!==0,Or=!$n&&(l==="scroll"||l==="scrollend"),he=$n?we!==null?we+"Capture":null:we;$n=[];for(var ee=be,_e;ee!==null;){var Re=ee;if(_e=Re.stateNode,Re=Re.tag,Re!==5&&Re!==26&&Re!==27||_e===null||he===null||(Re=bo(ee,he),Re!=null&&$n.push(gt(ee,Re,_e))),Or)break;ee=ee.return}0<$n.length&&(we=new Ae(we,wn,null,_,Ie),je.push({event:we,listeners:$n}))}}if((f&7)===0){t:{if(we=l==="mouseover"||l==="pointerover",Ae=l==="mouseout"||l==="pointerout",we&&_!==Yu&&(wn=_.relatedTarget||_.fromElement)&&(Oi(wn)||wn[Tn]))break t;if((Ae||we)&&(we=Ie.window===Ie?Ie:(we=Ie.ownerDocument)?we.defaultView||we.parentWindow:window,Ae?(wn=_.relatedTarget||_.toElement,Ae=be,wn=wn?Oi(wn):null,wn!==null&&(Or=s(wn),$n=wn.tag,wn!==Or||$n!==5&&$n!==27&&$n!==6)&&(wn=null)):(Ae=null,wn=be),Ae!==wn)){if($n=Xu,Re="onMouseLeave",he="onMouseEnter",ee="mouse",(l==="pointerout"||l==="pointerover")&&($n=ph,Re="onPointerLeave",he="onPointerEnter",ee="pointer"),Or=Ae==null?we:zr(Ae),_e=wn==null?we:zr(wn),we=new $n(Re,ee+"leave",Ae,_,Ie),we.target=Or,we.relatedTarget=_e,Re=null,Oi(Ie)===be&&($n=new $n(he,ee+"enter",wn,_,Ie),$n.target=_e,$n.relatedTarget=Or,Re=$n),Or=Re,Ae&&wn)e:{for($n=Dt,he=Ae,ee=wn,_e=0,Re=he;Re;Re=$n(Re))_e++;Re=0;for(var Ln=ee;Ln;Ln=$n(Ln))Re++;for(;0<_e-Re;)he=$n(he),_e--;for(;0<Re-_e;)ee=$n(ee),Re--;for(;_e--;){if(he===ee||ee!==null&&he===ee.alternate){$n=he;break e}he=$n(he),ee=$n(ee)}$n=null}else $n=null;Ae!==null&&Ut(je,we,Ae,$n,!1),wn!==null&&Or!==null&&Ut(je,Or,wn,$n,!0)}}t:{if(we=be?zr(be):window,Ae=we.nodeName&&we.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&we.type==="file")var nr=Kl;else if(cs(we))if(gh)nr=wu;else{nr=Jl;var En=Ti}else Ae=we.nodeName,!Ae||Ae.toLowerCase()!=="input"||we.type!=="checkbox"&&we.type!=="radio"?be&&Vn(be.elementType)&&(nr=Kl):nr=Wr;if(nr&&(nr=nr(l,be))){mf(je,nr,_,Ie);break t}En&&En(l,we,be),l==="focusout"&&be&&we.type==="number"&&be.memoizedProps.value!=null&&Ss(we,"number",we.value)}switch(En=be?zr(be):window,l){case"focusin":(cs(En)||En.contentEditable==="true")&&(nl=En,As=be,il=null);break;case"focusout":il=As=nl=null;break;case"mousedown":ca=!0;break;case"contextmenu":case"mouseup":case"dragend":ca=!1,Tu(je,_,Ie);break;case"selectionchange":if(oc)break;case"keydown":case"keyup":Tu(je,_,Ie)}var pi;if(Xi)t:{switch(l){case"compositionstart":var ji="onCompositionStart";break t;case"compositionend":ji="onCompositionEnd";break t;case"compositionupdate":ji="onCompositionUpdate";break t}ji=void 0}else tl?ec(l,_)&&(ji="onCompositionEnd"):l==="keydown"&&_.keyCode===229&&(ji="onCompositionStart");ji&&(Ju&&_.locale!=="ko"&&(tl||ji!=="onCompositionStart"?ji==="onCompositionEnd"&&tl&&(pi=Ya()):(ls=Ie,wo="value"in ls?ls.value:ls.textContent,tl=!0)),En=_t(be,ji),0<En.length&&(ji=new Ku(ji,l,null,_,Ie),je.push({event:ji,listeners:En}),pi?ji.data=pi:(pi=nc(_),pi!==null&&(ji.data=pi)))),(pi=Qu?Ms(l,_):Mo(l,_))&&(ji=_t(be,"onBeforeInput"),0<ji.length&&(En=new Ku("onBeforeInput","beforeinput",null,_,Ie),je.push({event:En,listeners:ji}),En.data=pi)),Lb(je,l,be,_,Ie)}k(je,f)})}function gt(l,f,_){return{instance:l,listener:f,currentTarget:_}}function _t(l,f){for(var _=f+"Capture",S=[];l!==null;){var z=l,B=z.stateNode;if(z=z.tag,z!==5&&z!==26&&z!==27||B===null||(z=bo(l,_),z!=null&&S.unshift(gt(l,z,B)),z=bo(l,f),z!=null&&S.push(gt(l,z,B))),l.tag===3)return S;l=l.return}return[]}function Dt(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Ut(l,f,_,S,z){for(var B=f._reactName,at=[];_!==null&&_!==S;){var bt=_,Yt=bt.alternate,be=bt.stateNode;if(bt=bt.tag,Yt!==null&&Yt===S)break;bt!==5&&bt!==26&&bt!==27||be===null||(Yt=be,z?(be=bo(_,B),be!=null&&at.unshift(gt(_,be,Yt))):z||(be=bo(_,B),be!=null&&at.push(gt(_,be,Yt)))),_=_.return}at.length!==0&&l.push({event:f,listeners:at})}var Ht=/\r\n?/g,ne=/\u0000|\uFFFD/g;function Kt(l){return(typeof l=="string"?l:""+l).replace(Ht,`
`).replace(ne,"")}function ae(l,f){return f=Kt(f),Kt(l)===f}function oe(l,f,_,S,z,B){switch(_){case"children":typeof S=="string"?f==="body"||f==="textarea"&&S===""||Zt(l,S):(typeof S=="number"||typeof S=="bigint")&&f!=="body"&&Zt(l,""+S);break;case"className":An(l,"class",S);break;case"tabIndex":An(l,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":An(l,_,S);break;case"style":cn(l,S,B);break;case"data":if(f!=="object"){An(l,"data",S);break}case"src":case"href":if(S===""&&(f!=="a"||_!=="href")){l.removeAttribute(_);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(_);break}S=Tr(""+S),l.setAttribute(_,S);break;case"action":case"formAction":if(typeof S=="function"){l.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof B=="function"&&(_==="formAction"?(f!=="input"&&oe(l,f,"name",z.name,z,null),oe(l,f,"formEncType",z.formEncType,z,null),oe(l,f,"formMethod",z.formMethod,z,null),oe(l,f,"formTarget",z.formTarget,z,null)):(oe(l,f,"encType",z.encType,z,null),oe(l,f,"method",z.method,z,null),oe(l,f,"target",z.target,z,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(_);break}S=Tr(""+S),l.setAttribute(_,S);break;case"onClick":S!=null&&(l.onclick=fr);break;case"onScroll":S!=null&&R("scroll",l);break;case"onScrollEnd":S!=null&&R("scrollend",l);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(i(61));if(_=S.__html,_!=null){if(z.children!=null)throw Error(i(60));l.innerHTML=_}}break;case"multiple":l.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":l.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){l.removeAttribute("xlink:href");break}_=Tr(""+S),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(_,""+S):l.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(_,""):l.removeAttribute(_);break;case"capture":case"download":S===!0?l.setAttribute(_,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(_,S):l.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?l.setAttribute(_,S):l.removeAttribute(_);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?l.removeAttribute(_):l.setAttribute(_,S);break;case"popover":R("beforetoggle",l),R("toggle",l),On(l,"popover",S);break;case"xlinkActuate":$r(l,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":$r(l,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":$r(l,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":$r(l,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":$r(l,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":$r(l,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":$r(l,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":$r(l,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":$r(l,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":On(l,"is",S);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=sr.get(_)||_,On(l,_,S))}}function De(l,f,_,S,z,B){switch(_){case"style":cn(l,S,B);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(i(61));if(_=S.__html,_!=null){if(z.children!=null)throw Error(i(60));l.innerHTML=_}}break;case"children":typeof S=="string"?Zt(l,S):(typeof S=="number"||typeof S=="bigint")&&Zt(l,""+S);break;case"onScroll":S!=null&&R("scroll",l);break;case"onScrollEnd":S!=null&&R("scrollend",l);break;case"onClick":S!=null&&(l.onclick=fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Js.hasOwnProperty(_))t:{if(_[0]==="o"&&_[1]==="n"&&(z=_.endsWith("Capture"),f=_.slice(2,z?_.length-7:void 0),B=l[an]||null,B=B!=null?B[_]:null,typeof B=="function"&&l.removeEventListener(f,B,z),typeof S=="function")){typeof B!="function"&&B!==null&&(_ in l?l[_]=null:l.hasAttribute(_)&&l.removeAttribute(_)),l.addEventListener(f,S,z);break t}_ in l?l[_]=S:S===!0?l.setAttribute(_,""):On(l,_,S)}}}function He(l,f,_){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":R("error",l),R("load",l);var S=!1,z=!1,B;for(B in _)if(_.hasOwnProperty(B)){var at=_[B];if(at!=null)switch(B){case"src":S=!0;break;case"srcSet":z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:oe(l,f,B,at,_,null)}}z&&oe(l,f,"srcSet",_.srcSet,_,null),S&&oe(l,f,"src",_.src,_,null);return;case"input":R("invalid",l);var bt=B=at=z=null,Yt=null,be=null;for(S in _)if(_.hasOwnProperty(S)){var Ie=_[S];if(Ie!=null)switch(S){case"name":z=Ie;break;case"type":at=Ie;break;case"checked":Yt=Ie;break;case"defaultChecked":be=Ie;break;case"value":B=Ie;break;case"defaultValue":bt=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(i(137,f));break;default:oe(l,f,S,Ie,_,null)}}Ko(l,B,bt,Yt,be,at,z,!1);return;case"select":R("invalid",l),S=at=B=null;for(z in _)if(_.hasOwnProperty(z)&&(bt=_[z],bt!=null))switch(z){case"value":B=bt;break;case"defaultValue":at=bt;break;case"multiple":S=bt;default:oe(l,f,z,bt,_,null)}f=B,_=at,l.multiple=!!S,f!=null?Di(l,!!S,f,!1):_!=null&&Di(l,!!S,_,!0);return;case"textarea":R("invalid",l),B=z=S=null;for(at in _)if(_.hasOwnProperty(at)&&(bt=_[at],bt!=null))switch(at){case"value":S=bt;break;case"defaultValue":z=bt;break;case"children":B=bt;break;case"dangerouslySetInnerHTML":if(bt!=null)throw Error(i(91));break;default:oe(l,f,at,bt,_,null)}At(l,S,z,B);return;case"option":for(Yt in _)if(_.hasOwnProperty(Yt)&&(S=_[Yt],S!=null))switch(Yt){case"selected":l.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:oe(l,f,Yt,S,_,null)}return;case"dialog":R("beforetoggle",l),R("toggle",l),R("cancel",l),R("close",l);break;case"iframe":case"object":R("load",l);break;case"video":case"audio":for(S=0;S<T.length;S++)R(T[S],l);break;case"image":R("error",l),R("load",l);break;case"details":R("toggle",l);break;case"embed":case"source":case"link":R("error",l),R("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in _)if(_.hasOwnProperty(be)&&(S=_[be],S!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:oe(l,f,be,S,_,null)}return;default:if(Vn(f)){for(Ie in _)_.hasOwnProperty(Ie)&&(S=_[Ie],S!==void 0&&De(l,f,Ie,S,_,void 0));return}}for(bt in _)_.hasOwnProperty(bt)&&(S=_[bt],S!=null&&oe(l,f,bt,S,_,null))}function mn(l,f,_,S){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var z=null,B=null,at=null,bt=null,Yt=null,be=null,Ie=null;for(Ae in _){var je=_[Ae];if(_.hasOwnProperty(Ae)&&je!=null)switch(Ae){case"checked":break;case"value":break;case"defaultValue":Yt=je;default:S.hasOwnProperty(Ae)||oe(l,f,Ae,null,S,je)}}for(var we in S){var Ae=S[we];if(je=_[we],S.hasOwnProperty(we)&&(Ae!=null||je!=null))switch(we){case"type":B=Ae;break;case"name":z=Ae;break;case"checked":be=Ae;break;case"defaultChecked":Ie=Ae;break;case"value":at=Ae;break;case"defaultValue":bt=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,f));break;default:Ae!==je&&oe(l,f,we,Ae,S,je)}}ss(l,at,bt,Yt,be,Ie,B,z);return;case"select":Ae=at=bt=we=null;for(B in _)if(Yt=_[B],_.hasOwnProperty(B)&&Yt!=null)switch(B){case"value":break;case"multiple":Ae=Yt;default:S.hasOwnProperty(B)||oe(l,f,B,null,S,Yt)}for(z in S)if(B=S[z],Yt=_[z],S.hasOwnProperty(z)&&(B!=null||Yt!=null))switch(z){case"value":we=B;break;case"defaultValue":bt=B;break;case"multiple":at=B;default:B!==Yt&&oe(l,f,z,B,S,Yt)}f=bt,_=at,S=Ae,we!=null?Di(l,!!_,we,!1):!!S!=!!_&&(f!=null?Di(l,!!_,f,!0):Di(l,!!_,_?[]:"",!1));return;case"textarea":Ae=we=null;for(bt in _)if(z=_[bt],_.hasOwnProperty(bt)&&z!=null&&!S.hasOwnProperty(bt))switch(bt){case"value":break;case"children":break;default:oe(l,f,bt,null,S,z)}for(at in S)if(z=S[at],B=_[at],S.hasOwnProperty(at)&&(z!=null||B!=null))switch(at){case"value":we=z;break;case"defaultValue":Ae=z;break;case"children":break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(91));break;default:z!==B&&oe(l,f,at,z,S,B)}yt(l,we,Ae);return;case"option":for(var wn in _)if(we=_[wn],_.hasOwnProperty(wn)&&we!=null&&!S.hasOwnProperty(wn))switch(wn){case"selected":l.selected=!1;break;default:oe(l,f,wn,null,S,we)}for(Yt in S)if(we=S[Yt],Ae=_[Yt],S.hasOwnProperty(Yt)&&we!==Ae&&(we!=null||Ae!=null))switch(Yt){case"selected":l.selected=we&&typeof we!="function"&&typeof we!="symbol";break;default:oe(l,f,Yt,we,S,Ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $n in _)we=_[$n],_.hasOwnProperty($n)&&we!=null&&!S.hasOwnProperty($n)&&oe(l,f,$n,null,S,we);for(be in S)if(we=S[be],Ae=_[be],S.hasOwnProperty(be)&&we!==Ae&&(we!=null||Ae!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,f));break;default:oe(l,f,be,we,S,Ae)}return;default:if(Vn(f)){for(var Or in _)we=_[Or],_.hasOwnProperty(Or)&&we!==void 0&&!S.hasOwnProperty(Or)&&De(l,f,Or,void 0,S,we);for(Ie in S)we=S[Ie],Ae=_[Ie],!S.hasOwnProperty(Ie)||we===Ae||we===void 0&&Ae===void 0||De(l,f,Ie,we,S,Ae);return}}for(var he in _)we=_[he],_.hasOwnProperty(he)&&we!=null&&!S.hasOwnProperty(he)&&oe(l,f,he,null,S,we);for(je in S)we=S[je],Ae=_[je],!S.hasOwnProperty(je)||we===Ae||we==null&&Ae==null||oe(l,f,je,we,S,Ae)}function nn(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tn(){if(typeof performance.getEntriesByType=="function"){for(var l=0,f=0,_=performance.getEntriesByType("resource"),S=0;S<_.length;S++){var z=_[S],B=z.transferSize,at=z.initiatorType,bt=z.duration;if(B&&bt&&nn(at)){for(at=0,bt=z.responseEnd,S+=1;S<_.length;S++){var Yt=_[S],be=Yt.startTime;if(be>bt)break;var Ie=Yt.transferSize,je=Yt.initiatorType;Ie&&nn(je)&&(Yt=Yt.responseEnd,at+=Ie*(Yt<bt?1:(bt-be)/(Yt-be)))}if(--S,f+=8*(B+at)/(z.duration/1e3),l++,10<l)break}}if(0<l)return f/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var Ge=null,un=null;function We(l){return l.nodeType===9?l:l.ownerDocument}function $e(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xn(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function gn(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Qn=null;function mr(){var l=window.event;return l&&l.type==="popstate"?l===Qn?!1:(Qn=l,!0):(Qn=null,!1)}var gr=typeof setTimeout=="function"?setTimeout:void 0,Ma=typeof clearTimeout=="function"?clearTimeout:void 0,mo=typeof Promise=="function"?Promise:void 0,Ys=typeof queueMicrotask=="function"?queueMicrotask:typeof mo<"u"?function(l){return mo.resolve(null).then(l).catch(fa)}:gr;function fa(l){setTimeout(function(){throw l})}function Pr(l){return l==="head"}function Qa(l,f){var _=f,S=0;do{var z=_.nextSibling;if(l.removeChild(_),z&&z.nodeType===8)if(_=z.data,_==="/$"||_==="/&"){if(S===0){l.removeChild(z),Dm(f);return}S--}else if(_==="$"||_==="$?"||_==="$~"||_==="$!"||_==="&")S++;else if(_==="html")Fr(l.ownerDocument.documentElement);else if(_==="head"){_=l.ownerDocument.head,Fr(_);for(var B=_.firstChild;B;){var at=B.nextSibling,bt=B.nodeName;B[Ji]||bt==="SCRIPT"||bt==="STYLE"||bt==="LINK"&&B.rel.toLowerCase()==="stylesheet"||_.removeChild(B),B=at}}else _==="body"&&Fr(l.ownerDocument.body);_=z}while(_);Dm(f)}function ks(l,f){var _=l;l=0;do{var S=_.nextSibling;if(_.nodeType===1?f?(_._stashedDisplay=_.style.display,_.style.display="none"):(_.style.display=_._stashedDisplay||"",_.getAttribute("style")===""&&_.removeAttribute("style")):_.nodeType===3&&(f?(_._stashedText=_.nodeValue,_.nodeValue=""):_.nodeValue=_._stashedText||""),S&&S.nodeType===8)if(_=S.data,_==="/$"){if(l===0)break;l--}else _!=="$"&&_!=="$?"&&_!=="$~"&&_!=="$!"||l++;_=S}while(_)}function ms(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var _=f;switch(f=f.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":ms(_),yi(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}l.removeChild(_)}}function Ea(l,f,_,S){for(;l.nodeType===1;){var z=_;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!S&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(S){if(!l[Ji])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(B=l.getAttribute("rel"),B==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(B!==z.rel||l.getAttribute("href")!==(z.href==null||z.href===""?null:z.href)||l.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin)||l.getAttribute("title")!==(z.title==null?null:z.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(B=l.getAttribute("src"),(B!==(z.src==null?null:z.src)||l.getAttribute("type")!==(z.type==null?null:z.type)||l.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin))&&B&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var B=z.name==null?null:""+z.name;if(z.type==="hidden"&&l.getAttribute("name")===B)return l}else return l;if(l=kr(l.nextSibling),l===null)break}return null}function Aa(l,f,_){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!_||(l=kr(l.nextSibling),l===null))return null;return l}function gs(l,f){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=kr(l.nextSibling),l===null))return null;return l}function ys(l){return l.data==="$?"||l.data==="$~"}function Ja(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function go(l,f){var _=l.ownerDocument;if(l.data==="$~")l._reactRetry=f;else if(l.data!=="$?"||_.readyState!=="loading")f();else{var S=function(){f(),_.removeEventListener("DOMContentLoaded",S)};_.addEventListener("DOMContentLoaded",S),l._reactRetry=S}}function kr(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return l}var na=null;function si(l){l=l.nextSibling;for(var f=0;l;){if(l.nodeType===8){var _=l.data;if(_==="/$"||_==="/&"){if(f===0)return kr(l.nextSibling);f--}else _!=="$"&&_!=="$!"&&_!=="$?"&&_!=="$~"&&_!=="&"||f++}l=l.nextSibling}return null}function _s(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var _=l.data;if(_==="$"||_==="$!"||_==="$?"||_==="$~"||_==="&"){if(f===0)return l;f--}else _!=="/$"&&_!=="/&"||f++}l=l.previousSibling}return null}function ts(l,f,_){switch(f=We(_),l){case"html":if(l=f.documentElement,!l)throw Error(i(452));return l;case"head":if(l=f.head,!l)throw Error(i(453));return l;case"body":if(l=f.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function Fr(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);yi(l)}var ia=new Map,Nl=new Set;function Uo(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Os=Ct.d;Ct.d={f:Bl,r:gl,D:Zd,C:Ev,L:ny,m:iy,X:Av,S:Tc,M:Cv};function Bl(){var l=Os.f(),f=Ld();return l||f}function gl(l){var f=hr(l);f!==null&&f.tag===5&&f.type==="form"?vd(f):Os.r(l)}var Va=typeof document>"u"?null:document;function Bu(l,f,_){var S=Va;if(S&&typeof f=="string"&&f){var z=Hi(f);z='link[rel="'+l+'"][href="'+z+'"]',typeof _=="string"&&(z+='[crossorigin="'+_+'"]'),Nl.has(z)||(Nl.add(z),l={rel:l,crossOrigin:_,href:f},S.querySelector(z)===null&&(f=S.createElement("link"),He(f,"link",l),ci(f),S.head.appendChild(f)))}}function Zd(l){Os.D(l),Bu("dns-prefetch",l,null)}function Ev(l,f){Os.C(l,f),Bu("preconnect",l,f)}function ny(l,f,_){Os.L(l,f,_);var S=Va;if(S&&l&&f){var z='link[rel="preload"][as="'+Hi(f)+'"]';f==="image"&&_&&_.imageSrcSet?(z+='[imagesrcset="'+Hi(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(z+='[imagesizes="'+Hi(_.imageSizes)+'"]')):z+='[href="'+Hi(l)+'"]';var B=z;switch(f){case"style":B=zf(l);break;case"script":B=Lf(l)}ia.has(B)||(l=E({rel:"preload",href:f==="image"&&_&&_.imageSrcSet?void 0:l,as:f},_),ia.set(B,l),S.querySelector(z)!==null||f==="style"&&S.querySelector(Gd(B))||f==="script"&&S.querySelector(Yd(B))||(f=S.createElement("link"),He(f,"link",l),ci(f),S.head.appendChild(f)))}}function iy(l,f){Os.m(l,f);var _=Va;if(_&&l){var S=f&&typeof f.as=="string"?f.as:"script",z='link[rel="modulepreload"][as="'+Hi(S)+'"][href="'+Hi(l)+'"]',B=z;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":B=Lf(l)}if(!ia.has(B)&&(l=E({rel:"modulepreload",href:l},f),ia.set(B,l),_.querySelector(z)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(Yd(B)))return}S=_.createElement("link"),He(S,"link",l),ci(S),_.head.appendChild(S)}}}function Tc(l,f,_){Os.S(l,f,_);var S=Va;if(S&&l){var z=Fs(S).hoistableStyles,B=zf(l);f=f||"default";var at=z.get(B);if(!at){var bt={loading:0,preload:null};if(at=S.querySelector(Gd(B)))bt.loading=5;else{l=E({rel:"stylesheet",href:l,"data-precedence":f},_),(_=ia.get(B))&&Rf(l,_);var Yt=at=S.createElement("link");ci(Yt),He(Yt,"link",l),Yt._p=new Promise(function(be,Ie){Yt.onload=be,Yt.onerror=Ie}),Yt.addEventListener("load",function(){bt.loading|=1}),Yt.addEventListener("error",function(){bt.loading|=2}),bt.loading|=4,Vo(at,f,S)}at={type:"stylesheet",instance:at,count:1,state:bt},z.set(B,at)}}}function Av(l,f){Os.X(l,f);var _=Va;if(_&&l){var S=Fs(_).hoistableScripts,z=Lf(l),B=S.get(z);B||(B=_.querySelector(Yd(z)),B||(l=E({src:l,async:!0},f),(f=ia.get(z))&&km(l,f),B=_.createElement("script"),ci(B),He(B,"link",l),_.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},S.set(z,B))}}function Cv(l,f){Os.M(l,f);var _=Va;if(_&&l){var S=Fs(_).hoistableScripts,z=Lf(l),B=S.get(z);B||(B=_.querySelector(Yd(z)),B||(l=E({src:l,async:!0,type:"module"},f),(f=ia.get(z))&&km(l,f),B=_.createElement("script"),ci(B),He(B,"link",l),_.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},S.set(z,B))}}function Pv(l,f,_,S){var z=(z=ce.current)?Uo(z):null;if(!z)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(f=zf(_.href),_=Fs(z).hoistableStyles,S=_.get(f),S||(S={type:"style",instance:null,count:0,state:null},_.set(f,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){l=zf(_.href);var B=Fs(z).hoistableStyles,at=B.get(l);if(at||(z=z.ownerDocument||z,at={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},B.set(l,at),(B=z.querySelector(Gd(l)))&&!B._p&&(at.instance=B,at.state.loading=5),ia.has(l)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},ia.set(l,_),B||Rb(z,l,_,at.state))),f&&S===null)throw Error(i(528,""));return at}if(f&&S!==null)throw Error(i(529,""));return null;case"script":return f=_.async,_=_.src,typeof _=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Lf(_),_=Fs(z).hoistableScripts,S=_.get(f),S||(S={type:"script",instance:null,count:0,state:null},_.set(f,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function zf(l){return'href="'+Hi(l)+'"'}function Gd(l){return'link[rel="stylesheet"]['+l+"]"}function kv(l){return E({},l,{"data-precedence":l.precedence,precedence:null})}function Rb(l,f,_,S){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?S.loading=1:(f=l.createElement("link"),S.preload=f,f.addEventListener("load",function(){return S.loading|=1}),f.addEventListener("error",function(){return S.loading|=2}),He(f,"link",_),ci(f),l.head.appendChild(f))}function Lf(l){return'[src="'+Hi(l)+'"]'}function Yd(l){return"script[async]"+l}function Ov(l,f,_){if(f.count++,f.instance===null)switch(f.type){case"style":var S=l.querySelector('style[data-href~="'+Hi(_.href)+'"]');if(S)return f.instance=S,ci(S),S;var z=E({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return S=(l.ownerDocument||l).createElement("style"),ci(S),He(S,"style",z),Vo(S,_.precedence,l),f.instance=S;case"stylesheet":z=zf(_.href);var B=l.querySelector(Gd(z));if(B)return f.state.loading|=4,f.instance=B,ci(B),B;S=kv(_),(z=ia.get(z))&&Rf(S,z),B=(l.ownerDocument||l).createElement("link"),ci(B);var at=B;return at._p=new Promise(function(bt,Yt){at.onload=bt,at.onerror=Yt}),He(B,"link",S),f.state.loading|=4,Vo(B,_.precedence,l),f.instance=B;case"script":return B=Lf(_.src),(z=l.querySelector(Yd(B)))?(f.instance=z,ci(z),z):(S=_,(z=ia.get(B))&&(S=E({},_),km(S,z)),l=l.ownerDocument||l,z=l.createElement("script"),ci(z),He(z,"link",S),l.head.appendChild(z),f.instance=z);case"void":return null;default:throw Error(i(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(S=f.instance,f.state.loading|=4,Vo(S,_.precedence,l));return f.instance}function Vo(l,f,_){for(var S=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),z=S.length?S[S.length-1]:null,B=z,at=0;at<S.length;at++){var bt=S[at];if(bt.dataset.precedence===f)B=bt;else if(B!==z)break}B?B.parentNode.insertBefore(l,B.nextSibling):(f=_.nodeType===9?_.head:_,f.insertBefore(l,f.firstChild))}function Rf(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function km(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var Om=null;function Dv(l,f,_){if(Om===null){var S=new Map,z=Om=new Map;z.set(_,S)}else z=Om,S=z.get(_),S||(S=new Map,z.set(_,S));if(S.has(l))return S;for(S.set(l,null),_=_.getElementsByTagName(l),z=0;z<_.length;z++){var B=_[z];if(!(B[Ji]||B[Ke]||l==="link"&&B.getAttribute("rel")==="stylesheet")&&B.namespaceURI!=="http://www.w3.org/2000/svg"){var at=B.getAttribute(f)||"";at=l+at;var bt=S.get(at);bt?bt.push(B):S.set(at,[B])}}return S}function Iv(l,f,_){l=l.ownerDocument||l,l.head.insertBefore(_,f==="title"?l.querySelector("head > title"):null)}function Ds(l,f,_){if(_===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return l=f.disabled,typeof f.precedence=="string"&&l==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function $o(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function Lh(l,f,_,S){if(_.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var z=zf(S.href),B=f.querySelector(Gd(z));if(B){f=B._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(l.count++,l=_l.bind(l),f.then(l,l)),_.state.loading|=4,_.instance=B,ci(B);return}B=f.ownerDocument||f,S=kv(S),(z=ia.get(z))&&Rf(S,z),B=B.createElement("link"),ci(B);var at=B;at._p=new Promise(function(bt,Yt){at.onload=bt,at.onerror=Yt}),He(B,"link",S),_.instance=B}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(_,f),(f=_.state.preload)&&(_.state.loading&3)===0&&(l.count++,_=_l.bind(l),f.addEventListener("load",_),f.addEventListener("error",_))}}var yl=0;function Rh(l,f){return l.stylesheets&&l.count===0&&Lv(l,l.stylesheets),0<l.count||0<l.imgCount?function(_){var S=setTimeout(function(){if(l.stylesheets&&Lv(l,l.stylesheets),l.unsuspend){var B=l.unsuspend;l.unsuspend=null,B()}},6e4+f);0<l.imgBytes&&yl===0&&(yl=62500*tn());var z=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Lv(l,l.stylesheets),l.unsuspend)){var B=l.unsuspend;l.unsuspend=null,B()}},(l.imgBytes>yl?50:800)+f);return l.unsuspend=_,function(){l.unsuspend=null,clearTimeout(S),clearTimeout(z)}}:null}function _l(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lv(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var zv=null;function Lv(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,zv=new Map,f.forEach(uB,l),zv=null,_l.call(l))}function uB(l,f){if(!(f.state.loading&4)){var _=zv.get(l);if(_)var S=_.get(null);else{_=new Map,zv.set(l,_);for(var z=l.querySelectorAll("link[data-precedence],style[data-precedence]"),B=0;B<z.length;B++){var at=z[B];(at.nodeName==="LINK"||at.getAttribute("media")!=="not all")&&(_.set(at.dataset.precedence,at),S=at)}S&&_.set(null,S)}z=f.instance,at=z.getAttribute("data-precedence"),B=_.get(at)||S,B===S&&_.set(null,z),_.set(at,z),this.count++,S=_l.bind(this),z.addEventListener("load",S),z.addEventListener("error",S),B?B.parentNode.insertBefore(z,B.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(z,l.firstChild)),f.state.loading|=4}}var ry={$$typeof:W,Provider:null,Consumer:null,_currentValue:Tt,_currentValue2:Tt,_threadCount:0};function cB(l,f,_,S,z,B,at,bt,Yt){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.hiddenUpdates=zt(null),this.identifierPrefix=S,this.onUncaughtError=z,this.onCaughtError=B,this.onRecoverableError=at,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Yt,this.incompleteTransitions=new Map}function bM(l,f,_,S,z,B,at,bt,Yt,be,Ie,je){return l=new cB(l,f,_,at,Yt,be,Ie,je,bt),f=1,B===!0&&(f|=24),B=Wa(3,null,null,f),l.current=B,B.stateNode=l,f=Q(),f.refCount++,l.pooledCache=f,f.refCount++,B.memoizedState={element:S,isDehydrated:_,cache:f},er(B),l}function wM(l){return l?(l=ll,l):ll}function SM(l,f,_,S,z,B){z=wM(z),S.context===null?S.context=z:S.pendingContext=z,S=Xa(f),S.payload={element:_},B=B===void 0?null:B,B!==null&&(S.callback=B),_=Ps(l,S,f),_!==null&&(po(_,l,f),fl(_,l,f))}function TM(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var _=l.retryLane;l.retryLane=_!==0&&_<f?_:f}}function Nb(l,f){TM(l,f),(l=l.alternate)&&TM(l,f)}function MM(l){if(l.tag===13||l.tag===31){var f=$s(l,67108864);f!==null&&po(f,l,67108864),Nb(l,67108864)}}function EM(l){if(l.tag===13||l.tag===31){var f=jo();f=Se(f);var _=$s(l,f);_!==null&&po(_,l,f),Nb(l,f)}}var Rv=!0;function hB(l,f,_,S){var z=Nt.T;Nt.T=null;var B=Ct.p;try{Ct.p=2,Bb(l,f,_,S)}finally{Ct.p=B,Nt.T=z}}function fB(l,f,_,S){var z=Nt.T;Nt.T=null;var B=Ct.p;try{Ct.p=8,Bb(l,f,_,S)}finally{Ct.p=B,Nt.T=z}}function Bb(l,f,_,S){if(Rv){var z=jb(S);if(z===null)ht(l,f,S,Nv,_),CM(l,S);else if(pB(z,l,f,_,S))S.stopPropagation();else if(CM(l,S),f&4&&-1<dB.indexOf(l)){for(;z!==null;){var B=hr(z);if(B!==null)switch(B.tag){case 3:if(B=B.stateNode,B.current.memoizedState.isDehydrated){var at=Gr(B.pendingLanes);if(at!==0){var bt=B;for(bt.pendingLanes|=2,bt.entangledLanes|=2;at;){var Yt=1<<31-_r(at);bt.entanglements[1]|=Yt,at&=~Yt}Rl(B),(Gi&6)===0&&(dm=fn()+500,If(0))}}break;case 31:case 13:bt=$s(B,2),bt!==null&&po(bt,B,2),Ld(),Nb(B,2)}if(B=jb(S),B===null&&ht(l,f,S,Nv,_),B===z)break;z=B}z!==null&&S.stopPropagation()}else ht(l,f,S,null,_)}}function jb(l){return l=Tl(l),Fb(l)}var Nv=null;function Fb(l){if(Nv=null,l=Oi(l),l!==null){var f=s(l);if(f===null)l=null;else{var _=f.tag;if(_===13){if(l=c(f),l!==null)return l;l=null}else if(_===31){if(l=a(f),l!==null)return l;l=null}else if(_===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return Nv=l,null}function AM(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qi()){case mi:return 2;case Ui:return 8;case Dr:case ws:return 32;case Oa:return 268435456;default:return 32}default:return 32}}var Ub=!1,Nf=null,Bf=null,jf=null,ay=new Map,sy=new Map,Ff=[],dB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function CM(l,f){switch(l){case"focusin":case"focusout":Nf=null;break;case"dragenter":case"dragleave":Bf=null;break;case"mouseover":case"mouseout":jf=null;break;case"pointerover":case"pointerout":ay.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":sy.delete(f.pointerId)}}function oy(l,f,_,S,z,B){return l===null||l.nativeEvent!==B?(l={blockedOn:f,domEventName:_,eventSystemFlags:S,nativeEvent:B,targetContainers:[z]},f!==null&&(f=hr(f),f!==null&&MM(f)),l):(l.eventSystemFlags|=S,f=l.targetContainers,z!==null&&f.indexOf(z)===-1&&f.push(z),l)}function pB(l,f,_,S,z){switch(f){case"focusin":return Nf=oy(Nf,l,f,_,S,z),!0;case"dragenter":return Bf=oy(Bf,l,f,_,S,z),!0;case"mouseover":return jf=oy(jf,l,f,_,S,z),!0;case"pointerover":var B=z.pointerId;return ay.set(B,oy(ay.get(B)||null,l,f,_,S,z)),!0;case"gotpointercapture":return B=z.pointerId,sy.set(B,oy(sy.get(B)||null,l,f,_,S,z)),!0}return!1}function PM(l){var f=Oi(l.target);if(f!==null){var _=s(f);if(_!==null){if(f=_.tag,f===13){if(f=c(_),f!==null){l.blockedOn=f,yn(l.priority,function(){EM(_)});return}}else if(f===31){if(f=a(_),f!==null){l.blockedOn=f,yn(l.priority,function(){EM(_)});return}}else if(f===3&&_.stateNode.current.memoizedState.isDehydrated){l.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Bv(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var _=jb(l.nativeEvent);if(_===null){_=l.nativeEvent;var S=new _.constructor(_.type,_);Yu=S,_.target.dispatchEvent(S),Yu=null}else return f=hr(_),f!==null&&MM(f),l.blockedOn=_,!1;f.shift()}return!0}function kM(l,f,_){Bv(l)&&_.delete(f)}function mB(){Ub=!1,Nf!==null&&Bv(Nf)&&(Nf=null),Bf!==null&&Bv(Bf)&&(Bf=null),jf!==null&&Bv(jf)&&(jf=null),ay.forEach(kM),sy.forEach(kM)}function jv(l,f){l.blockedOn===f&&(l.blockedOn=null,Ub||(Ub=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,mB)))}var Fv=null;function OM(l){Fv!==l&&(Fv=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Fv===l&&(Fv=null);for(var f=0;f<l.length;f+=3){var _=l[f],S=l[f+1],z=l[f+2];if(typeof S!="function"){if(Fb(S||_)===null)continue;break}var B=hr(_);B!==null&&(l.splice(f,3),f-=3,bf(B,{pending:!0,data:z,method:_.method,action:S},S,z))}}))}function Dm(l){function f(Yt){return jv(Yt,l)}Nf!==null&&jv(Nf,l),Bf!==null&&jv(Bf,l),jf!==null&&jv(jf,l),ay.forEach(f),sy.forEach(f);for(var _=0;_<Ff.length;_++){var S=Ff[_];S.blockedOn===l&&(S.blockedOn=null)}for(;0<Ff.length&&(_=Ff[0],_.blockedOn===null);)PM(_),_.blockedOn===null&&Ff.shift();if(_=(l.ownerDocument||l).$$reactFormReplay,_!=null)for(S=0;S<_.length;S+=3){var z=_[S],B=_[S+1],at=z[an]||null;if(typeof B=="function")at||OM(_);else if(at){var bt=null;if(B&&B.hasAttribute("formAction")){if(z=B,at=B[an]||null)bt=at.formAction;else if(Fb(z)!==null)continue}else bt=at.action;typeof bt=="function"?_[S+1]=bt:(_.splice(S,3),S-=3),OM(_)}}}function DM(){function l(B){B.canIntercept&&B.info==="react-transition"&&B.intercept({handler:function(){return new Promise(function(at){return z=at})},focusReset:"manual",scroll:"manual"})}function f(){z!==null&&(z(),z=null),S||setTimeout(_,20)}function _(){if(!S&&!navigation.transition){var B=navigation.currentEntry;B&&B.url!=null&&navigation.navigate(B.url,{state:B.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,z=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(_,100),function(){S=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),z!==null&&(z(),z=null)}}}function Vb(l){this._internalRoot=l}Uv.prototype.render=Vb.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(i(409));var _=f.current,S=jo();SM(_,S,l,f,null,null)},Uv.prototype.unmount=Vb.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;SM(l.current,2,null,l,null,null),Ld(),f[Tn]=null}};function Uv(l){this._internalRoot=l}Uv.prototype.unstable_scheduleHydration=function(l){if(l){var f=Oe();l={blockedOn:null,target:l,priority:f};for(var _=0;_<Ff.length&&f!==0&&f<Ff[_].priority;_++);Ff.splice(_,0,l),_===0&&PM(l)}};var IM=e.version;if(IM!=="19.2.0")throw Error(i(527,IM,"19.2.0"));Ct.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=y(f),l=l!==null?x(l):null,l=l===null?null:l.stateNode,l};var gB={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Nt,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vv.isDisabled&&Vv.supportsFiber)try{yr=Vv.inject(gB),Yn=Vv}catch{}}return uy.createRoot=function(l,f){if(!r(l))throw Error(i(299));var _=!1,S="",z=J_,B=tv,at=ev;return f!=null&&(f.unstable_strictMode===!0&&(_=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(z=f.onUncaughtError),f.onCaughtError!==void 0&&(B=f.onCaughtError),f.onRecoverableError!==void 0&&(at=f.onRecoverableError)),f=bM(l,1,!1,null,null,_,S,null,z,B,at,DM),l[Tn]=f.current,tt(l),new Vb(f)},uy.hydrateRoot=function(l,f,_){if(!r(l))throw Error(i(299));var S=!1,z="",B=J_,at=tv,bt=ev,Yt=null;return _!=null&&(_.unstable_strictMode===!0&&(S=!0),_.identifierPrefix!==void 0&&(z=_.identifierPrefix),_.onUncaughtError!==void 0&&(B=_.onUncaughtError),_.onCaughtError!==void 0&&(at=_.onCaughtError),_.onRecoverableError!==void 0&&(bt=_.onRecoverableError),_.formState!==void 0&&(Yt=_.formState)),f=bM(l,1,!0,f,_??null,S,z,Yt,B,at,bt,DM),f.context=wM(null),_=f.current,S=jo(),S=Se(S),z=Xa(S),z.callback=null,Ps(_,z,S),_=S,f.current.lanes=_,jt(f,_),Rl(f),l[Tn]=f.current,tt(l),new Uv(f)},uy.version="19.2.0",uy}var $M;function AB(){if($M)return Hb.exports;$M=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hb.exports=EB(),Hb.exports}var CB=AB();/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qM="popstate";function PB(t={}){function e(i,r){let{pathname:s,search:c,hash:a}=i.location;return tS("",{pathname:s,search:c,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Zy(r)}return OB(e,n,null,t)}function Pa(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kB(){return Math.random().toString(36).substring(2,10)}function HM(t,e){return{usr:t.state,key:t.key,idx:e}}function tS(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?rg(e):e,state:n,key:e&&e.key||i||kB()}}function Zy({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function rg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function OB(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,c=r.history,a="POP",g=null,y=x();y==null&&(y=0,c.replaceState({...c.state,idx:y},""));function x(){return(c.state||{idx:null}).idx}function E(){a="POP";let $=x(),K=$==null?null:$-y;y=$,g&&g({action:a,location:V.location,delta:K})}function O($,K){a="PUSH";let Y=tS(V.location,$,K);y=x()+1;let W=HM(Y,y),X=V.createHref(Y);try{c.pushState(W,"",X)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;r.location.assign(X)}s&&g&&g({action:a,location:V.location,delta:1})}function I($,K){a="REPLACE";let Y=tS(V.location,$,K);y=x();let W=HM(Y,y),X=V.createHref(Y);c.replaceState(W,"",X),s&&g&&g({action:a,location:V.location,delta:0})}function F($){return DB($)}let V={get action(){return a},get location(){return t(r,c)},listen($){if(g)throw new Error("A history only accepts one active listener");return r.addEventListener(qM,E),g=$,()=>{r.removeEventListener(qM,E),g=null}},createHref($){return e(r,$)},createURL:F,encodeLocation($){let K=F($);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:O,replace:I,go($){return c.go($)}};return V}function DB(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Pa(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Zy(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function aD(t,e,n="/"){return IB(t,e,n,!1)}function IB(t,e,n,i){let r=typeof e=="string"?rg(e):e,s=Xh(r.pathname||"/",n);if(s==null)return null;let c=sD(t);zB(c);let a=null;for(let g=0;a==null&&g<c.length;++g){let y=HB(s);a=$B(c[g],y,i)}return a}function sD(t,e=[],n=[],i="",r=!1){let s=(c,a,g=r,y)=>{let x={relativePath:y===void 0?c.path||"":y,caseSensitive:c.caseSensitive===!0,childrenIndex:a,route:c};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(i)&&g)return;Pa(x.relativePath.startsWith(i),`Absolute route path "${x.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(i.length)}let E=Gh([i,x.relativePath]),O=n.concat(x);c.children&&c.children.length>0&&(Pa(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),sD(c.children,e,O,E,g)),!(c.path==null&&!c.index)&&e.push({path:E,score:UB(E,c.index),routesMeta:O})};return t.forEach((c,a)=>{if(c.path===""||!c.path?.includes("?"))s(c,a);else for(let g of oD(c.path))s(c,a,!0,g)}),e}function oD(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let c=oD(i.join("/")),a=[];return a.push(...c.map(g=>g===""?s:[s,g].join("/"))),r&&a.push(...c),a.map(g=>t.startsWith("/")&&g===""?"/":g)}function zB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:VB(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var LB=/^:[\w-]+$/,RB=3,NB=2,BB=1,jB=10,FB=-2,ZM=t=>t==="*";function UB(t,e){let n=t.split("/"),i=n.length;return n.some(ZM)&&(i+=FB),e&&(i+=NB),n.filter(r=>!ZM(r)).reduce((r,s)=>r+(LB.test(s)?RB:s===""?BB:jB),i)}function VB(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function $B(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",c=[];for(let a=0;a<i.length;++a){let g=i[a],y=a===i.length-1,x=s==="/"?e:e.slice(s.length)||"/",E=L0({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},x),O=g.route;if(!E&&y&&n&&!i[i.length-1].route.index&&(E=L0({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!E)return null;Object.assign(r,E.params),c.push({params:r,pathname:Gh([s,E.pathname]),pathnameBase:WB(Gh([s,E.pathnameBase])),route:O}),E.pathnameBase!=="/"&&(s=Gh([s,E.pathnameBase]))}return c}function L0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=qB(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],c=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((y,{paramName:x,isOptional:E},O)=>{if(x==="*"){let F=a[O]||"";c=s.slice(0,s.length-F.length).replace(/(.)\/+$/,"$1")}const I=a[O];return E&&!I?y[x]=void 0:y[x]=(I||"").replace(/%2F/g,"/"),y},{}),pathname:s,pathnameBase:c,pattern:t}}function qB(t,e=!1,n=!0){rh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,a,g)=>(i.push({paramName:a,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function HB(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rh(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Xh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function ZB(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?rg(t):t;return{pathname:n?n.startsWith("/")?n:GB(n,e):e,search:XB(i),hash:KB(r)}}function GB(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Wb(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YB(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lD(t){let e=YB(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function uD(t,e,n,i=!1){let r;typeof t=="string"?r=rg(t):(r={...t},Pa(!r.pathname||!r.pathname.includes("?"),Wb("?","pathname","search",r)),Pa(!r.pathname||!r.pathname.includes("#"),Wb("#","pathname","hash",r)),Pa(!r.search||!r.search.includes("#"),Wb("#","search","hash",r)));let s=t===""||r.pathname==="",c=s?"/":r.pathname,a;if(c==null)a=n;else{let E=e.length-1;if(!i&&c.startsWith("..")){let O=c.split("/");for(;O[0]==="..";)O.shift(),E-=1;r.pathname=O.join("/")}a=E>=0?e[E]:"/"}let g=ZB(r,a),y=c&&c!=="/"&&c.endsWith("/"),x=(s||c===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||x)&&(g.pathname+="/"),g}var Gh=t=>t.join("/").replace(/\/\/+/g,"/"),WB=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XB=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KB=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function QB(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cD=["POST","PUT","PATCH","DELETE"];new Set(cD);var JB=["GET",...cD];new Set(JB);var ag=Z.createContext(null);ag.displayName="DataRouter";var Dx=Z.createContext(null);Dx.displayName="DataRouterState";Z.createContext(!1);var hD=Z.createContext({isTransitioning:!1});hD.displayName="ViewTransition";var t5=Z.createContext(new Map);t5.displayName="Fetchers";var e5=Z.createContext(null);e5.displayName="Await";var ch=Z.createContext(null);ch.displayName="Navigation";var f_=Z.createContext(null);f_.displayName="Location";var rf=Z.createContext({outlet:null,matches:[],isDataRoute:!1});rf.displayName="Route";var m2=Z.createContext(null);m2.displayName="RouteError";function n5(t,{relative:e}={}){Pa(d_(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=Z.useContext(ch),{hash:r,pathname:s,search:c}=p_(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Gh([n,s])),i.createHref({pathname:a,search:c,hash:r})}function d_(){return Z.useContext(f_)!=null}function Tp(){return Pa(d_(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(f_).location}var fD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dD(t){Z.useContext(ch).static||Z.useLayoutEffect(t)}function i5(){let{isDataRoute:t}=Z.useContext(rf);return t?g5():r5()}function r5(){Pa(d_(),"useNavigate() may be used only in the context of a <Router> component.");let t=Z.useContext(ag),{basename:e,navigator:n}=Z.useContext(ch),{matches:i}=Z.useContext(rf),{pathname:r}=Tp(),s=JSON.stringify(lD(i)),c=Z.useRef(!1);return dD(()=>{c.current=!0}),Z.useCallback((g,y={})=>{if(rh(c.current,fD),!c.current)return;if(typeof g=="number"){n.go(g);return}let x=uD(g,JSON.parse(s),r,y.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Gh([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,s,r,t])}Z.createContext(null);function p_(t,{relative:e}={}){let{matches:n}=Z.useContext(rf),{pathname:i}=Tp(),r=JSON.stringify(lD(n));return Z.useMemo(()=>uD(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function a5(t,e){return pD(t,e)}function pD(t,e,n,i,r){Pa(d_(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=Z.useContext(ch),{matches:c}=Z.useContext(rf),a=c[c.length-1],g=a?a.params:{},y=a?a.pathname:"/",x=a?a.pathnameBase:"/",E=a&&a.route;{let Y=E&&E.path||"";mD(y,!E||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let O=Tp(),I;if(e){let Y=typeof e=="string"?rg(e):e;Pa(x==="/"||Y.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),I=Y}else I=O;let F=I.pathname||"/",V=F;if(x!=="/"){let Y=x.replace(/^\//,"").split("/");V="/"+F.replace(/^\//,"").split("/").slice(Y.length).join("/")}let $=aD(t,{pathname:V});rh(E||$!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),rh($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=c5($&&$.map(Y=>Object.assign({},Y,{params:Object.assign({},g,Y.params),pathname:Gh([x,s.encodeLocation?s.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?x:Gh([x,s.encodeLocation?s.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),c,n,i,r);return e&&K?Z.createElement(f_.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},K):K}function s5(){let t=m5(),e=QB(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:s},"ErrorBoundary")," or"," ",Z.createElement("code",{style:s},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},e),n?Z.createElement("pre",{style:r},n):null,c)}var o5=Z.createElement(s5,null),l5=class extends Z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?Z.createElement(rf.Provider,{value:this.props.routeContext},Z.createElement(m2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function u5({routeContext:t,match:e,children:n}){let i=Z.useContext(ag);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),Z.createElement(rf.Provider,{value:t},n)}function c5(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,c=n?.errors;if(c!=null){let y=s.findIndex(x=>x.route.id&&c?.[x.route.id]!==void 0);Pa(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),s=s.slice(0,Math.min(s.length,y+1))}let a=!1,g=-1;if(n)for(let y=0;y<s.length;y++){let x=s[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=y),x.route.id){let{loaderData:E,errors:O}=n,I=x.route.loader&&!E.hasOwnProperty(x.route.id)&&(!O||O[x.route.id]===void 0);if(x.route.lazy||I){a=!0,g>=0?s=s.slice(0,g+1):s=[s[0]];break}}}return s.reduceRight((y,x,E)=>{let O,I=!1,F=null,V=null;n&&(O=c&&x.route.id?c[x.route.id]:void 0,F=x.route.errorElement||o5,a&&(g<0&&E===0?(mD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,V=null):g===E&&(I=!0,V=x.route.hydrateFallbackElement||null)));let $=e.concat(s.slice(0,E+1)),K=()=>{let Y;return O?Y=F:I?Y=V:x.route.Component?Y=Z.createElement(x.route.Component,null):x.route.element?Y=x.route.element:Y=y,Z.createElement(u5,{match:x,routeContext:{outlet:y,matches:$,isDataRoute:n!=null},children:Y})};return n&&(x.route.ErrorBoundary||x.route.errorElement||E===0)?Z.createElement(l5,{location:n.location,revalidation:n.revalidation,component:F,error:O,children:K(),routeContext:{outlet:null,matches:$,isDataRoute:!0},unstable_onError:i}):K()},null)}function g2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h5(t){let e=Z.useContext(ag);return Pa(e,g2(t)),e}function f5(t){let e=Z.useContext(Dx);return Pa(e,g2(t)),e}function d5(t){let e=Z.useContext(rf);return Pa(e,g2(t)),e}function y2(t){let e=d5(t),n=e.matches[e.matches.length-1];return Pa(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function p5(){return y2("useRouteId")}function m5(){let t=Z.useContext(m2),e=f5("useRouteError"),n=y2("useRouteError");return t!==void 0?t:e.errors?.[n]}function g5(){let{router:t}=h5("useNavigate"),e=y2("useNavigate"),n=Z.useRef(!1);return dD(()=>{n.current=!0}),Z.useCallback(async(r,s={})=>{rh(n.current,fD),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var GM={};function mD(t,e,n){!e&&!GM[t]&&(GM[t]=!0,rh(!1,n))}Z.memo(y5);function y5({routes:t,future:e,state:n,unstable_onError:i}){return pD(t,void 0,n,i,e)}function Jd(t){Pa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _5({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){Pa(!d_(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),a=Z.useMemo(()=>({basename:c,navigator:r,static:s,future:{}}),[c,r,s]);typeof n=="string"&&(n=rg(n));let{pathname:g="/",search:y="",hash:x="",state:E=null,key:O="default"}=n,I=Z.useMemo(()=>{let F=Xh(g,c);return F==null?null:{location:{pathname:F,search:y,hash:x,state:E,key:O},navigationType:i}},[c,g,y,x,E,O,i]);return rh(I!=null,`<Router basename="${c}"> is not able to match the URL "${g}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:Z.createElement(ch.Provider,{value:a},Z.createElement(f_.Provider,{children:e,value:I}))}function v5({children:t,location:e}){return a5(eS(t),e)}function eS(t,e=[]){let n=[];return Z.Children.forEach(t,(i,r)=>{if(!Z.isValidElement(i))return;let s=[...e,r];if(i.type===Z.Fragment){n.push.apply(n,eS(i.props.children,s));return}Pa(i.type===Jd,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pa(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=eS(i.props.children,s)),n.push(c)}),n}var T0="get",M0="application/x-www-form-urlencoded";function Ix(t){return t!=null&&typeof t.tagName=="string"}function x5(t){return Ix(t)&&t.tagName.toLowerCase()==="button"}function b5(t){return Ix(t)&&t.tagName.toLowerCase()==="form"}function w5(t){return Ix(t)&&t.tagName.toLowerCase()==="input"}function S5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function T5(t,e){return t.button===0&&(!e||e==="_self")&&!S5(t)}var $v=null;function M5(){if($v===null)try{new FormData(document.createElement("form"),0),$v=!1}catch{$v=!0}return $v}var E5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xb(t){return t!=null&&!E5.has(t)?(rh(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${M0}"`),null):t}function A5(t,e){let n,i,r,s,c;if(b5(t)){let a=t.getAttribute("action");i=a?Xh(a,e):null,n=t.getAttribute("method")||T0,r=Xb(t.getAttribute("enctype"))||M0,s=new FormData(t)}else if(x5(t)||w5(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=t.getAttribute("formaction")||a.getAttribute("action");if(i=g?Xh(g,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||T0,r=Xb(t.getAttribute("formenctype"))||Xb(a.getAttribute("enctype"))||M0,s=new FormData(a,t),!M5()){let{name:y,type:x,value:E}=t;if(x==="image"){let O=y?`${y}.`:"";s.append(`${O}x`,"0"),s.append(`${O}y`,"0")}else y&&s.append(y,E)}}else{if(Ix(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=T0,i=null,r=M0,c=t}return s&&r==="text/plain"&&(c=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function C5(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Xh(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function P5(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function k5(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function O5(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let c=await P5(s,n);return c.links?c.links():[]}return[]}));return L5(i.flat(1).filter(k5).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function YM(t,e,n,i,r,s){let c=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,a=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return s==="assets"?e.filter((g,y)=>c(g,y)||a(g,y)):s==="data"?e.filter((g,y)=>{let x=i.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(c(g,y)||a(g,y))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function D5(t,e,{includeHydrateFallback:n}={}){return I5(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function I5(t){return[...new Set(t)]}function z5(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function L5(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(z5(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function gD(){let t=Z.useContext(ag);return _2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function R5(){let t=Z.useContext(Dx);return _2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var v2=Z.createContext(void 0);v2.displayName="FrameworkContext";function yD(){let t=Z.useContext(v2);return _2(t,"You must render this element inside a <HydratedRouter> element"),t}function N5(t,e){let n=Z.useContext(v2),[i,r]=Z.useState(!1),[s,c]=Z.useState(!1),{onFocus:a,onBlur:g,onMouseEnter:y,onMouseLeave:x,onTouchStart:E}=e,O=Z.useRef(null);Z.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let V=K=>{K.forEach(Y=>{c(Y.isIntersecting)})},$=new IntersectionObserver(V,{threshold:.5});return O.current&&$.observe(O.current),()=>{$.disconnect()}}},[t]),Z.useEffect(()=>{if(i){let V=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(V)}}},[i]);let I=()=>{r(!0)},F=()=>{r(!1),c(!1)};return n?t!=="intent"?[s,O,{}]:[s,O,{onFocus:cy(a,I),onBlur:cy(g,F),onMouseEnter:cy(y,I),onMouseLeave:cy(x,F),onTouchStart:cy(E,I)}]:[!1,O,{}]}function cy(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function B5({page:t,...e}){let{router:n}=gD(),i=Z.useMemo(()=>aD(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?Z.createElement(F5,{page:t,matches:i,...e}):null}function j5(t){let{manifest:e,routeModules:n}=yD(),[i,r]=Z.useState([]);return Z.useEffect(()=>{let s=!1;return O5(t,e,n).then(c=>{s||r(c)}),()=>{s=!0}},[t,e,n]),i}function F5({page:t,matches:e,...n}){let i=Tp(),{manifest:r,routeModules:s}=yD(),{basename:c}=gD(),{loaderData:a,matches:g}=R5(),y=Z.useMemo(()=>YM(t,e,g,r,i,"data"),[t,e,g,r,i]),x=Z.useMemo(()=>YM(t,e,g,r,i,"assets"),[t,e,g,r,i]),E=Z.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let F=new Set,V=!1;if(e.forEach(K=>{let Y=r.routes[K.route.id];!Y||!Y.hasLoader||(!y.some(W=>W.route.id===K.route.id)&&K.route.id in a&&s[K.route.id]?.shouldRevalidate||Y.hasClientLoader?V=!0:F.add(K.route.id))}),F.size===0)return[];let $=C5(t,c,"data");return V&&F.size>0&&$.searchParams.set("_routes",e.filter(K=>F.has(K.route.id)).map(K=>K.route.id).join(",")),[$.pathname+$.search]},[c,a,i,r,y,e,t,s]),O=Z.useMemo(()=>D5(x,r),[x,r]),I=j5(x);return Z.createElement(Z.Fragment,null,E.map(F=>Z.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...n})),O.map(F=>Z.createElement("link",{key:F,rel:"modulepreload",href:F,...n})),I.map(({key:F,link:V})=>Z.createElement("link",{key:F,nonce:n.nonce,...V})))}function U5(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var _D=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_D&&(window.__reactRouterVersion="7.9.5")}catch{}function V5({basename:t,children:e,window:n}){let i=Z.useRef();i.current==null&&(i.current=PB({window:n,v5Compat:!0}));let r=i.current,[s,c]=Z.useState({action:r.action,location:r.location}),a=Z.useCallback(g=>{Z.startTransition(()=>c(g))},[c]);return Z.useLayoutEffect(()=>r.listen(a),[r,a]),Z.createElement(_5,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var vD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$f=Z.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:c,state:a,target:g,to:y,preventScrollReset:x,viewTransition:E,...O},I){let{basename:F}=Z.useContext(ch),V=typeof y=="string"&&vD.test(y),$,K=!1;if(typeof y=="string"&&V&&($=y,_D))try{let ut=new URL(window.location.href),xt=y.startsWith("//")?new URL(ut.protocol+y):new URL(y),wt=Xh(xt.pathname,F);xt.origin===ut.origin&&wt!=null?y=wt+xt.search+xt.hash:K=!0}catch{rh(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=n5(y,{relative:r}),[W,X,J]=N5(i,O),st=Z5(y,{replace:c,state:a,target:g,preventScrollReset:x,relative:r,viewTransition:E});function ct(ut){e&&e(ut),ut.defaultPrevented||st(ut)}let it=Z.createElement("a",{...O,...J,href:$||Y,onClick:K||s?e:ct,ref:U5(I,X),target:g,"data-discover":!V&&n==="render"?"true":void 0});return W&&!V?Z.createElement(Z.Fragment,null,it,Z.createElement(B5,{page:Y})):it});$f.displayName="Link";var $5=Z.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:c,viewTransition:a,children:g,...y},x){let E=p_(c,{relative:y.relative}),O=Tp(),I=Z.useContext(Dx),{navigator:F,basename:V}=Z.useContext(ch),$=I!=null&&K5(E)&&a===!0,K=F.encodeLocation?F.encodeLocation(E).pathname:E.pathname,Y=O.pathname,W=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(Y=Y.toLowerCase(),W=W?W.toLowerCase():null,K=K.toLowerCase()),W&&V&&(W=Xh(W,V)||W);const X=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let J=Y===K||!r&&Y.startsWith(K)&&Y.charAt(X)==="/",st=W!=null&&(W===K||!r&&W.startsWith(K)&&W.charAt(K.length)==="/"),ct={isActive:J,isPending:st,isTransitioning:$},it=J?e:void 0,ut;typeof i=="function"?ut=i(ct):ut=[i,J?"active":null,st?"pending":null,$?"transitioning":null].filter(Boolean).join(" ");let xt=typeof s=="function"?s(ct):s;return Z.createElement($f,{...y,"aria-current":it,className:ut,ref:x,style:xt,to:c,viewTransition:a},typeof g=="function"?g(ct):g)});$5.displayName="NavLink";var q5=Z.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:c=T0,action:a,onSubmit:g,relative:y,preventScrollReset:x,viewTransition:E,...O},I)=>{let F=W5(),V=X5(a,{relative:y}),$=c.toLowerCase()==="get"?"get":"post",K=typeof a=="string"&&vD.test(a),Y=W=>{if(g&&g(W),W.defaultPrevented)return;W.preventDefault();let X=W.nativeEvent.submitter,J=X?.getAttribute("formmethod")||c;F(X||W.currentTarget,{fetcherKey:e,method:J,navigate:n,replace:r,state:s,relative:y,preventScrollReset:x,viewTransition:E})};return Z.createElement("form",{ref:I,method:$,action:V,onSubmit:i?g:Y,...O,"data-discover":!K&&t==="render"?"true":void 0})});q5.displayName="Form";function H5(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xD(t){let e=Z.useContext(ag);return Pa(e,H5(t)),e}function Z5(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:c}={}){let a=i5(),g=Tp(),y=p_(t,{relative:s});return Z.useCallback(x=>{if(T5(x,e)){x.preventDefault();let E=n!==void 0?n:Zy(g)===Zy(y);a(t,{replace:E,state:i,preventScrollReset:r,relative:s,viewTransition:c})}},[g,a,y,n,i,e,t,r,s,c])}var G5=0,Y5=()=>`__${String(++G5)}__`;function W5(){let{router:t}=xD("useSubmit"),{basename:e}=Z.useContext(ch),n=p5();return Z.useCallback(async(i,r={})=>{let{action:s,method:c,encType:a,formData:g,body:y}=A5(i,e);if(r.navigate===!1){let x=r.fetcherKey||Y5();await t.fetch(x,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:g,body:y,formMethod:r.method||c,formEncType:r.encType||a,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:g,body:y,formMethod:r.method||c,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function X5(t,{relative:e}={}){let{basename:n}=Z.useContext(ch),i=Z.useContext(rf);Pa(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...p_(t||".",{relative:e})},c=Tp();if(t==null){s.search=c.search;let a=new URLSearchParams(s.search),g=a.getAll("index");if(g.some(x=>x==="")){a.delete("index"),g.filter(E=>E).forEach(E=>a.append("index",E));let x=a.toString();s.search=x?`?${x}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Gh([n,s.pathname])),Zy(s)}function K5(t,{relative:e}={}){let n=Z.useContext(hD);Pa(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=xD("useViewTransitionState"),r=p_(t,{relative:e});if(!n.isTransitioning)return!1;let s=Xh(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=Xh(n.nextLocation.pathname,i)||n.nextLocation.pathname;return L0(r.pathname,c)!=null||L0(r.pathname,s)!=null}var m_=rD();const Q5=""+new URL("sun-A5krhKHx.png",import.meta.url).href;function J5(){const[t,e]=Z.useState(null);Z.useEffect(()=>{const r=()=>e(null);return document.addEventListener("click",r),()=>document.removeEventListener("click",r)},[]);const n=(r,s)=>{s.stopPropagation(),e(t===r?null:r)},i=r=>s=>{e(null)};return vt.jsxs("header",{className:"header",children:[vt.jsxs("div",{className:"header-left",children:[vt.jsx("img",{src:Q5,alt:" ",className:"logo"}),vt.jsxs("div",{className:"site-info",children:[vt.jsx("h2",{children:"NSE"}),vt.jsx("p",{children:"Nationwide Sunny Energy"})]})]}),vt.jsx("nav",{className:"nav",children:vt.jsxs("ul",{children:[vt.jsxs("li",{className:"dropdown nav-item",onClick:r=>n("main",r),children:[vt.jsx("span",{className:"dropdown-title",children:""}),t==="main"&&vt.jsx("div",{className:"dropdown-area",children:vt.jsx("div",{className:"dropdown-menu",children:vt.jsxs("ul",{children:[vt.jsx("li",{children:vt.jsx($f,{to:"/",onClick:i(),children:""})}),vt.jsx("li",{children:vt.jsx($f,{to:"/scenario",onClick:i(),children:"  "})})]})})})]}),vt.jsxs("li",{className:"dropdown nav-item",onClick:r=>n("status",r),children:[vt.jsx("span",{className:"dropdown-title",children:" "}),t==="status"&&vt.jsx("div",{className:"dropdown-area",children:vt.jsx("div",{className:"dropdown-menu",children:vt.jsxs("ul",{children:[vt.jsx("li",{children:vt.jsx($f,{to:"/energy-usage",onClick:i(),children:"  "})}),vt.jsx("li",{children:vt.jsx($f,{to:"/gas-emission",onClick:i(),children:"  "})})]})})})]}),vt.jsxs("li",{className:"dropdown nav-item",onClick:r=>n("stat",r),children:[vt.jsx("span",{className:"dropdown-title",children:" "}),t==="stat"&&vt.jsx("div",{className:"dropdown-area",children:vt.jsx("div",{className:"dropdown-menu",children:vt.jsxs("ul",{children:[vt.jsx("li",{children:vt.jsx($f,{to:"/usage-stats",onClick:i(),children:"  "})}),vt.jsx("li",{children:vt.jsx($f,{to:"/gas-stats",onClick:i(),children:"  "})})]})})})]})]})})]})}function t4(){return vt.jsx("footer",{className:"footer",children:vt.jsx("p",{children:" 2025   .   ."})})}function e4(t,e){const n=Z.useRef(e);Z.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const n4=1;function i4(t){return Object.freeze({__version:n4,map:t})}function r4(t,e){return Object.freeze({...t,...e})}const zx=Z.createContext(null);function Lx(){const t=Z.use(zx);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function a4(t){function e(n,i){const{instance:r,context:s}=t(n).current;Z.useImperativeHandle(i,()=>r);const{children:c}=n;return c==null?null:Hy.createElement(zx,{value:s},c)}return Z.forwardRef(e)}function s4(t){function e(n,i){const{instance:r}=t(n).current;return Z.useImperativeHandle(i,()=>r),null}return Z.forwardRef(e)}function bD(t,e){const n=Z.useRef(void 0);Z.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function x2(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var ky={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var o4=ky.exports,WM;function l4(){return WM||(WM=1,(function(t,e){(function(n,i){i(e)})(o4,(function(n){var i="1.9.4";function r(p){var w,D,q,nt;for(D=1,q=arguments.length;D<q;D++){nt=arguments[D];for(w in nt)p[w]=nt[w]}return p}var s=Object.create||(function(){function p(){}return function(w){return p.prototype=w,new p}})();function c(p,w){var D=Array.prototype.slice;if(p.bind)return p.bind.apply(p,D.call(arguments,1));var q=D.call(arguments,2);return function(){return p.apply(w,q.length?q.concat(D.call(arguments)):arguments)}}var a=0;function g(p){return"_leaflet_id"in p||(p._leaflet_id=++a),p._leaflet_id}function y(p,w,D){var q,nt,mt,Ft;return Ft=function(){q=!1,nt&&(mt.apply(D,nt),nt=!1)},mt=function(){q?nt=arguments:(p.apply(D,arguments),setTimeout(Ft,w),q=!0)},mt}function x(p,w,D){var q=w[1],nt=w[0],mt=q-nt;return p===q&&D?p:((p-nt)%mt+mt)%mt+nt}function E(){return!1}function O(p,w){if(w===!1)return p;var D=Math.pow(10,w===void 0?6:w);return Math.round(p*D)/D}function I(p){return p.trim?p.trim():p.replace(/^\s+|\s+$/g,"")}function F(p){return I(p).split(/\s+/)}function V(p,w){Object.prototype.hasOwnProperty.call(p,"options")||(p.options=p.options?s(p.options):{});for(var D in w)p.options[D]=w[D];return p.options}function $(p,w,D){var q=[];for(var nt in p)q.push(encodeURIComponent(D?nt.toUpperCase():nt)+"="+encodeURIComponent(p[nt]));return(!w||w.indexOf("?")===-1?"?":"&")+q.join("&")}var K=/\{ *([\w_ -]+) *\}/g;function Y(p,w){return p.replace(K,function(D,q){var nt=w[q];if(nt===void 0)throw new Error("No value provided for variable "+D);return typeof nt=="function"&&(nt=nt(w)),nt})}var W=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"};function X(p,w){for(var D=0;D<p.length;D++)if(p[D]===w)return D;return-1}var J="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function st(p){return window["webkit"+p]||window["moz"+p]||window["ms"+p]}var ct=0;function it(p){var w=+new Date,D=Math.max(0,16-(w-ct));return ct=w+D,window.setTimeout(p,D)}var ut=window.requestAnimationFrame||st("RequestAnimationFrame")||it,xt=window.cancelAnimationFrame||st("CancelAnimationFrame")||st("CancelRequestAnimationFrame")||function(p){window.clearTimeout(p)};function wt(p,w,D){if(D&&ut===it)p.call(w);else return ut.call(window,c(p,w))}function St(p){p&&xt.call(window,p)}var le={__proto__:null,extend:r,create:s,bind:c,get lastId(){return a},stamp:g,throttle:y,wrapNum:x,falseFn:E,formatNum:O,trim:I,splitWords:F,setOptions:V,getParamString:$,template:Y,isArray:W,indexOf:X,emptyImageUrl:J,requestFn:ut,cancelFn:xt,requestAnimFrame:wt,cancelAnimFrame:St};function pe(){}pe.extend=function(p){var w=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},D=w.__super__=this.prototype,q=s(D);q.constructor=w,w.prototype=q;for(var nt in this)Object.prototype.hasOwnProperty.call(this,nt)&&nt!=="prototype"&&nt!=="__super__"&&(w[nt]=this[nt]);return p.statics&&r(w,p.statics),p.includes&&(Te(p.includes),r.apply(null,[q].concat(p.includes))),r(q,p),delete q.statics,delete q.includes,q.options&&(q.options=D.options?s(D.options):{},r(q.options,p.options)),q._initHooks=[],q.callInitHooks=function(){if(!this._initHooksCalled){D.callInitHooks&&D.callInitHooks.call(this),this._initHooksCalled=!0;for(var mt=0,Ft=q._initHooks.length;mt<Ft;mt++)q._initHooks[mt].call(this)}},w},pe.include=function(p){var w=this.prototype.options;return r(this.prototype,p),p.options&&(this.prototype.options=w,this.mergeOptions(p.options)),this},pe.mergeOptions=function(p){return r(this.prototype.options,p),this},pe.addInitHook=function(p){var w=Array.prototype.slice.call(arguments,1),D=typeof p=="function"?p:function(){this[p].apply(this,w)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(D),this};function Te(p){if(!(typeof L>"u"||!L||!L.Mixin)){p=W(p)?p:[p];for(var w=0;w<p.length;w++)p[w]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Nt={on:function(p,w,D){if(typeof p=="object")for(var q in p)this._on(q,p[q],w);else{p=F(p);for(var nt=0,mt=p.length;nt<mt;nt++)this._on(p[nt],w,D)}return this},off:function(p,w,D){if(!arguments.length)delete this._events;else if(typeof p=="object")for(var q in p)this._off(q,p[q],w);else{p=F(p);for(var nt=arguments.length===1,mt=0,Ft=p.length;mt<Ft;mt++)nt?this._off(p[mt]):this._off(p[mt],w,D)}return this},_on:function(p,w,D,q){if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}if(this._listens(p,w,D)===!1){D===this&&(D=void 0);var nt={fn:w,ctx:D};q&&(nt.once=!0),this._events=this._events||{},this._events[p]=this._events[p]||[],this._events[p].push(nt)}},_off:function(p,w,D){var q,nt,mt;if(this._events&&(q=this._events[p],!!q)){if(arguments.length===1){if(this._firingCount)for(nt=0,mt=q.length;nt<mt;nt++)q[nt].fn=E;delete this._events[p];return}if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}var Ft=this._listens(p,w,D);if(Ft!==!1){var ue=q[Ft];this._firingCount&&(ue.fn=E,this._events[p]=q=q.slice()),q.splice(Ft,1)}}},fire:function(p,w,D){if(!this.listens(p,D))return this;var q=r({},w,{type:p,target:this,sourceTarget:w&&w.sourceTarget||this});if(this._events){var nt=this._events[p];if(nt){this._firingCount=this._firingCount+1||1;for(var mt=0,Ft=nt.length;mt<Ft;mt++){var ue=nt[mt],ve=ue.fn;ue.once&&this.off(p,ve,ue.ctx),ve.call(ue.ctx||this,q)}this._firingCount--}}return D&&this._propagateEvent(q),this},listens:function(p,w,D,q){typeof p!="string"&&console.warn('"string" type argument expected');var nt=w;typeof w!="function"&&(q=!!w,nt=void 0,D=void 0);var mt=this._events&&this._events[p];if(mt&&mt.length&&this._listens(p,nt,D)!==!1)return!0;if(q){for(var Ft in this._eventParents)if(this._eventParents[Ft].listens(p,w,D,q))return!0}return!1},_listens:function(p,w,D){if(!this._events)return!1;var q=this._events[p]||[];if(!w)return!!q.length;D===this&&(D=void 0);for(var nt=0,mt=q.length;nt<mt;nt++)if(q[nt].fn===w&&q[nt].ctx===D)return nt;return!1},once:function(p,w,D){if(typeof p=="object")for(var q in p)this._on(q,p[q],w,!0);else{p=F(p);for(var nt=0,mt=p.length;nt<mt;nt++)this._on(p[nt],w,D,!0)}return this},addEventParent:function(p){return this._eventParents=this._eventParents||{},this._eventParents[g(p)]=p,this},removeEventParent:function(p){return this._eventParents&&delete this._eventParents[g(p)],this},_propagateEvent:function(p){for(var w in this._eventParents)this._eventParents[w].fire(p.type,r({layer:p.target,propagatedFrom:p.target},p),!0)}};Nt.addEventListener=Nt.on,Nt.removeEventListener=Nt.clearAllEventListeners=Nt.off,Nt.addOneTimeEventListener=Nt.once,Nt.fireEvent=Nt.fire,Nt.hasEventListeners=Nt.listens;var Ct=pe.extend(Nt);function Tt(p,w,D){this.x=D?Math.round(p):p,this.y=D?Math.round(w):w}var Bt=Math.trunc||function(p){return p>0?Math.floor(p):Math.ceil(p)};Tt.prototype={clone:function(){return new Tt(this.x,this.y)},add:function(p){return this.clone()._add($t(p))},_add:function(p){return this.x+=p.x,this.y+=p.y,this},subtract:function(p){return this.clone()._subtract($t(p))},_subtract:function(p){return this.x-=p.x,this.y-=p.y,this},divideBy:function(p){return this.clone()._divideBy(p)},_divideBy:function(p){return this.x/=p,this.y/=p,this},multiplyBy:function(p){return this.clone()._multiplyBy(p)},_multiplyBy:function(p){return this.x*=p,this.y*=p,this},scaleBy:function(p){return new Tt(this.x*p.x,this.y*p.y)},unscaleBy:function(p){return new Tt(this.x/p.x,this.y/p.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Bt(this.x),this.y=Bt(this.y),this},distanceTo:function(p){p=$t(p);var w=p.x-this.x,D=p.y-this.y;return Math.sqrt(w*w+D*D)},equals:function(p){return p=$t(p),p.x===this.x&&p.y===this.y},contains:function(p){return p=$t(p),Math.abs(p.x)<=Math.abs(this.x)&&Math.abs(p.y)<=Math.abs(this.y)},toString:function(){return"Point("+O(this.x)+", "+O(this.y)+")"}};function $t(p,w,D){return p instanceof Tt?p:W(p)?new Tt(p[0],p[1]):p==null?p:typeof p=="object"&&"x"in p&&"y"in p?new Tt(p.x,p.y):new Tt(p,w,D)}function ft(p,w){if(p)for(var D=w?[p,w]:p,q=0,nt=D.length;q<nt;q++)this.extend(D[q])}ft.prototype={extend:function(p){var w,D;if(!p)return this;if(p instanceof Tt||typeof p[0]=="number"||"x"in p)w=D=$t(p);else if(p=Mt(p),w=p.min,D=p.max,!w||!D)return this;return!this.min&&!this.max?(this.min=w.clone(),this.max=D.clone()):(this.min.x=Math.min(w.x,this.min.x),this.max.x=Math.max(D.x,this.max.x),this.min.y=Math.min(w.y,this.min.y),this.max.y=Math.max(D.y,this.max.y)),this},getCenter:function(p){return $t((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,p)},getBottomLeft:function(){return $t(this.min.x,this.max.y)},getTopRight:function(){return $t(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(p){var w,D;return typeof p[0]=="number"||p instanceof Tt?p=$t(p):p=Mt(p),p instanceof ft?(w=p.min,D=p.max):w=D=p,w.x>=this.min.x&&D.x<=this.max.x&&w.y>=this.min.y&&D.y<=this.max.y},intersects:function(p){p=Mt(p);var w=this.min,D=this.max,q=p.min,nt=p.max,mt=nt.x>=w.x&&q.x<=D.x,Ft=nt.y>=w.y&&q.y<=D.y;return mt&&Ft},overlaps:function(p){p=Mt(p);var w=this.min,D=this.max,q=p.min,nt=p.max,mt=nt.x>w.x&&q.x<D.x,Ft=nt.y>w.y&&q.y<D.y;return mt&&Ft},isValid:function(){return!!(this.min&&this.max)},pad:function(p){var w=this.min,D=this.max,q=Math.abs(w.x-D.x)*p,nt=Math.abs(w.y-D.y)*p;return Mt($t(w.x-q,w.y-nt),$t(D.x+q,D.y+nt))},equals:function(p){return p?(p=Mt(p),this.min.equals(p.getTopLeft())&&this.max.equals(p.getBottomRight())):!1}};function Mt(p,w){return!p||p instanceof ft?p:new ft(p,w)}function Lt(p,w){if(p)for(var D=w?[p,w]:p,q=0,nt=D.length;q<nt;q++)this.extend(D[q])}Lt.prototype={extend:function(p){var w=this._southWest,D=this._northEast,q,nt;if(p instanceof re)q=p,nt=p;else if(p instanceof Lt){if(q=p._southWest,nt=p._northEast,!q||!nt)return this}else return p?this.extend(ce(p)||Xt(p)):this;return!w&&!D?(this._southWest=new re(q.lat,q.lng),this._northEast=new re(nt.lat,nt.lng)):(w.lat=Math.min(q.lat,w.lat),w.lng=Math.min(q.lng,w.lng),D.lat=Math.max(nt.lat,D.lat),D.lng=Math.max(nt.lng,D.lng)),this},pad:function(p){var w=this._southWest,D=this._northEast,q=Math.abs(w.lat-D.lat)*p,nt=Math.abs(w.lng-D.lng)*p;return new Lt(new re(w.lat-q,w.lng-nt),new re(D.lat+q,D.lng+nt))},getCenter:function(){return new re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new re(this.getNorth(),this.getWest())},getSouthEast:function(){return new re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(p){typeof p[0]=="number"||p instanceof re||"lat"in p?p=ce(p):p=Xt(p);var w=this._southWest,D=this._northEast,q,nt;return p instanceof Lt?(q=p.getSouthWest(),nt=p.getNorthEast()):q=nt=p,q.lat>=w.lat&&nt.lat<=D.lat&&q.lng>=w.lng&&nt.lng<=D.lng},intersects:function(p){p=Xt(p);var w=this._southWest,D=this._northEast,q=p.getSouthWest(),nt=p.getNorthEast(),mt=nt.lat>=w.lat&&q.lat<=D.lat,Ft=nt.lng>=w.lng&&q.lng<=D.lng;return mt&&Ft},overlaps:function(p){p=Xt(p);var w=this._southWest,D=this._northEast,q=p.getSouthWest(),nt=p.getNorthEast(),mt=nt.lat>w.lat&&q.lat<D.lat,Ft=nt.lng>w.lng&&q.lng<D.lng;return mt&&Ft},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(p,w){return p?(p=Xt(p),this._southWest.equals(p.getSouthWest(),w)&&this._northEast.equals(p.getNorthEast(),w)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Xt(p,w){return p instanceof Lt?p:new Lt(p,w)}function re(p,w,D){if(isNaN(p)||isNaN(w))throw new Error("Invalid LatLng object: ("+p+", "+w+")");this.lat=+p,this.lng=+w,D!==void 0&&(this.alt=+D)}re.prototype={equals:function(p,w){if(!p)return!1;p=ce(p);var D=Math.max(Math.abs(this.lat-p.lat),Math.abs(this.lng-p.lng));return D<=(w===void 0?1e-9:w)},toString:function(p){return"LatLng("+O(this.lat,p)+", "+O(this.lng,p)+")"},distanceTo:function(p){return Ne.distance(this,ce(p))},wrap:function(){return Ne.wrapLatLng(this)},toBounds:function(p){var w=180*p/40075017,D=w/Math.cos(Math.PI/180*this.lat);return Xt([this.lat-w,this.lng-D],[this.lat+w,this.lng+D])},clone:function(){return new re(this.lat,this.lng,this.alt)}};function ce(p,w,D){return p instanceof re?p:W(p)&&typeof p[0]!="object"?p.length===3?new re(p[0],p[1],p[2]):p.length===2?new re(p[0],p[1]):null:p==null?p:typeof p=="object"&&"lat"in p?new re(p.lat,"lng"in p?p.lng:p.lon,p.alt):w===void 0?null:new re(p,w,D)}var Me={latLngToPoint:function(p,w){var D=this.projection.project(p),q=this.scale(w);return this.transformation._transform(D,q)},pointToLatLng:function(p,w){var D=this.scale(w),q=this.transformation.untransform(p,D);return this.projection.unproject(q)},project:function(p){return this.projection.project(p)},unproject:function(p){return this.projection.unproject(p)},scale:function(p){return 256*Math.pow(2,p)},zoom:function(p){return Math.log(p/256)/Math.LN2},getProjectedBounds:function(p){if(this.infinite)return null;var w=this.projection.bounds,D=this.scale(p),q=this.transformation.transform(w.min,D),nt=this.transformation.transform(w.max,D);return new ft(q,nt)},infinite:!1,wrapLatLng:function(p){var w=this.wrapLng?x(p.lng,this.wrapLng,!0):p.lng,D=this.wrapLat?x(p.lat,this.wrapLat,!0):p.lat,q=p.alt;return new re(D,w,q)},wrapLatLngBounds:function(p){var w=p.getCenter(),D=this.wrapLatLng(w),q=w.lat-D.lat,nt=w.lng-D.lng;if(q===0&&nt===0)return p;var mt=p.getSouthWest(),Ft=p.getNorthEast(),ue=new re(mt.lat-q,mt.lng-nt),ve=new re(Ft.lat-q,Ft.lng-nt);return new Lt(ue,ve)}},Ne=r({},Me,{wrapLng:[-180,180],R:6371e3,distance:function(p,w){var D=Math.PI/180,q=p.lat*D,nt=w.lat*D,mt=Math.sin((w.lat-p.lat)*D/2),Ft=Math.sin((w.lng-p.lng)*D/2),ue=mt*mt+Math.cos(q)*Math.cos(nt)*Ft*Ft,ve=2*Math.atan2(Math.sqrt(ue),Math.sqrt(1-ue));return this.R*ve}}),Gt=6378137,Ce={R:Gt,MAX_LATITUDE:85.0511287798,project:function(p){var w=Math.PI/180,D=this.MAX_LATITUDE,q=Math.max(Math.min(D,p.lat),-D),nt=Math.sin(q*w);return new Tt(this.R*p.lng*w,this.R*Math.log((1+nt)/(1-nt))/2)},unproject:function(p){var w=180/Math.PI;return new re((2*Math.atan(Math.exp(p.y/this.R))-Math.PI/2)*w,p.x*w/this.R)},bounds:(function(){var p=Gt*Math.PI;return new ft([-p,-p],[p,p])})()};function Ee(p,w,D,q){if(W(p)){this._a=p[0],this._b=p[1],this._c=p[2],this._d=p[3];return}this._a=p,this._b=w,this._c=D,this._d=q}Ee.prototype={transform:function(p,w){return this._transform(p.clone(),w)},_transform:function(p,w){return w=w||1,p.x=w*(this._a*p.x+this._b),p.y=w*(this._c*p.y+this._d),p},untransform:function(p,w){return w=w||1,new Tt((p.x/w-this._b)/this._a,(p.y/w-this._d)/this._c)}};function de(p,w,D,q){return new Ee(p,w,D,q)}var on=r({},Ne,{code:"EPSG:3857",projection:Ce,transformation:(function(){var p=.5/(Math.PI*Ce.R);return de(p,.5,-p,.5)})()}),Be=r({},on,{code:"EPSG:900913"});function ln(p){return document.createElementNS("http://www.w3.org/2000/svg",p)}function Xe(p,w){var D="",q,nt,mt,Ft,ue,ve;for(q=0,mt=p.length;q<mt;q++){for(ue=p[q],nt=0,Ft=ue.length;nt<Ft;nt++)ve=ue[nt],D+=(nt?"L":"M")+ve.x+" "+ve.y;D+=w?se.svg?"z":"x":""}return D||"M0 0"}var Sn=document.documentElement.style,hn="ActiveXObject"in window,Rn=hn&&!document.addEventListener,ge="msLaunchUri"in navigator&&!("documentMode"in document),Gn=Se("webkit"),$i=Se("android"),ni=Se("android 2")||Se("android 3"),fn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qi=$i&&Se("Google")&&fn<537&&!("AudioNode"in window),mi=!!window.opera,Ui=!ge&&Se("chrome"),Dr=Se("gecko")&&!Gn&&!mi&&!hn,ws=!Ui&&Se("safari"),Oa=Se("phantom"),Vr="OTransition"in Sn,Fe=navigator.platform.indexOf("Win")===0,yr=hn&&"transition"in Sn,Yn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ni,ga="MozPerspective"in Sn,_r=!window.L_DISABLE_3D&&(yr||Yn||ga)&&!Vr&&!Oa,Ze=typeof orientation<"u"||Se("mobile"),In=Ze&&Gn,kn=Ze&&Yn,Ir=!window.PointerEvent&&window.MSPointerEvent,ya=!!(window.PointerEvent||Ir),Cn="ontouchstart"in window||!!window.TouchEvent,Gr=!window.L_NO_TOUCH&&(Cn||ya),It=Ze&&mi,lt=Ze&&Dr,dt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Et=(function(){var p=!1;try{var w=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("testPassiveEventSupport",E,w),window.removeEventListener("testPassiveEventSupport",E,w)}catch{}return p})(),zt=(function(){return!!document.createElement("canvas").getContext})(),jt=!!(document.createElementNS&&ln("svg").createSVGRect),ie=!!jt&&(function(){var p=document.createElement("div");return p.innerHTML="<svg/>",(p.firstChild&&p.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Wt=!jt&&(function(){try{var p=document.createElement("div");p.innerHTML='<v:shape adj="1"/>';var w=p.firstChild;return w.style.behavior="url(#default#VML)",w&&typeof w.adj=="object"}catch{return!1}})(),qt=navigator.platform.indexOf("Mac")===0,Jt=navigator.platform.indexOf("Linux")===0;function Se(p){return navigator.userAgent.toLowerCase().indexOf(p)>=0}var se={ie:hn,ielt9:Rn,edge:ge,webkit:Gn,android:$i,android23:ni,androidStock:Qi,opera:mi,chrome:Ui,gecko:Dr,safari:ws,phantom:Oa,opera12:Vr,win:Fe,ie3d:yr,webkit3d:Yn,gecko3d:ga,any3d:_r,mobile:Ze,mobileWebkit:In,mobileWebkit3d:kn,msPointer:Ir,pointer:ya,touch:Gr,touchNative:Cn,mobileOpera:It,mobileGecko:lt,retina:dt,passiveEvents:Et,canvas:zt,svg:jt,vml:Wt,inlineSvg:ie,mac:qt,linux:Jt},Oe=se.msPointer?"MSPointerDown":"pointerdown",yn=se.msPointer?"MSPointerMove":"pointermove",_n=se.msPointer?"MSPointerUp":"pointerup",Ke=se.msPointer?"MSPointerCancel":"pointercancel",an={touchstart:Oe,touchmove:yn,touchend:_n,touchcancel:Ke},Tn={touchstart:Fs,touchmove:zr,touchend:zr,touchcancel:zr},Wn={},gi=!1;function qn(p,w,D){return w==="touchstart"&&hr(),Tn[w]?(D=Tn[w].bind(this,D),p.addEventListener(an[w],D,!1),D):(console.warn("wrong event specified:",w),E)}function Hn(p,w,D){if(!an[w]){console.warn("wrong event specified:",w);return}p.removeEventListener(an[w],D,!1)}function Ji(p){Wn[p.pointerId]=p}function yi(p){Wn[p.pointerId]&&(Wn[p.pointerId]=p)}function Oi(p){delete Wn[p.pointerId]}function hr(){gi||(document.addEventListener(Oe,Ji,!0),document.addEventListener(yn,yi,!0),document.addEventListener(_n,Oi,!0),document.addEventListener(Ke,Oi,!0),gi=!0)}function zr(p,w){if(w.pointerType!==(w.MSPOINTER_TYPE_MOUSE||"mouse")){w.touches=[];for(var D in Wn)w.touches.push(Wn[D]);w.changedTouches=[w],p(w)}}function Fs(p,w){w.MSPOINTER_TYPE_TOUCH&&w.pointerType===w.MSPOINTER_TYPE_TOUCH&&or(w),zr(p,w)}function ci(p){var w={},D,q;for(q in p)D=p[q],w[q]=D&&D.bind?D.bind(p):D;return p=w,w.type="dblclick",w.detail=2,w.isTrusted=!1,w._simulated=!0,w}var as=200;function Js(p,w){p.addEventListener("dblclick",w);var D=0,q;function nt(mt){if(mt.detail!==1){q=mt.detail;return}if(!(mt.pointerType==="mouse"||mt.sourceCapabilities&&!mt.sourceCapabilities.firesTouchEvents)){var Ft=Xn(mt);if(!(Ft.some(function(ve){return ve instanceof HTMLLabelElement&&ve.attributes.for})&&!Ft.some(function(ve){return ve instanceof HTMLInputElement||ve instanceof HTMLSelectElement}))){var ue=Date.now();ue-D<=as?(q++,q===2&&w(ci(mt))):q=1,D=ue}}}return p.addEventListener("click",nt),{dblclick:w,simDblclick:nt}}function Un(p,w){p.removeEventListener("dblclick",w.dblclick),p.removeEventListener("click",w.simDblclick)}var Da=Ko(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Yr=Ko(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),qi=Yr==="webkitTransition"||Yr==="OTransition"?Yr+"End":"transitionend";function oa(p){return typeof p=="string"?document.getElementById(p):p}function Sl(p,w){var D=p.style[w]||p.currentStyle&&p.currentStyle[w];if((!D||D==="auto")&&document.defaultView){var q=document.defaultView.getComputedStyle(p,null);D=q?q[w]:null}return D==="auto"?null:D}function On(p,w,D){var q=document.createElement(p);return q.className=w||"",D&&D.appendChild(q),q}function An(p){var w=p.parentNode;w&&w.removeChild(p)}function $r(p){for(;p.firstChild;)p.removeChild(p.firstChild)}function tr(p){var w=p.parentNode;w&&w.lastChild!==p&&w.appendChild(p)}function _i(p){var w=p.parentNode;w&&w.firstChild!==p&&w.insertBefore(p,w.firstChild)}function ii(p,w){if(p.classList!==void 0)return p.classList.contains(w);var D=_a(p);return D.length>0&&new RegExp("(^|\\s)"+w+"(\\s|$)").test(D)}function Pn(p,w){if(p.classList!==void 0)for(var D=F(w),q=0,nt=D.length;q<nt;q++)p.classList.add(D[q]);else if(!ii(p,w)){var mt=_a(p);la(p,(mt?mt+" ":"")+w)}}function zn(p,w){p.classList!==void 0?p.classList.remove(w):la(p,I((" "+_a(p)+" ").replace(" "+w+" "," ")))}function la(p,w){p.className.baseVal===void 0?p.className=w:p.className.baseVal=w}function _a(p){return p.correspondingElement&&(p=p.correspondingElement),p.className.baseVal===void 0?p.className:p.className.baseVal}function Hi(p,w){"opacity"in p.style?p.style.opacity=w:"filter"in p.style&&ss(p,w)}function ss(p,w){var D=!1,q="DXImageTransform.Microsoft.Alpha";try{D=p.filters.item(q)}catch{if(w===1)return}w=Math.round(w*100),D?(D.Enabled=w!==100,D.Opacity=w):p.style.filter+=" progid:"+q+"(opacity="+w+")"}function Ko(p){for(var w=document.documentElement.style,D=0;D<p.length;D++)if(p[D]in w)return p[D];return!1}function Ss(p,w,D){var q=w||new Tt(0,0);p.style[Da]=(se.ie3d?"translate("+q.x+"px,"+q.y+"px)":"translate3d("+q.x+"px,"+q.y+"px,0)")+(D?" scale("+D+")":"")}function Di(p,w){p._leaflet_pos=w,se.any3d?Ss(p,w):(p.style.left=w.x+"px",p.style.top=w.y+"px")}function yt(p){return p._leaflet_pos||new Tt(0,0)}var At,Zt,ye;if("onselectstart"in document)At=function(){Nn(window,"selectstart",or)},Zt=function(){Ii(window,"selectstart",or)};else{var Ue=Ko(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);At=function(){if(Ue){var p=document.documentElement.style;ye=p[Ue],p[Ue]="none"}},Zt=function(){Ue&&(document.documentElement.style[Ue]=ye,ye=void 0)}}function cn(){Nn(window,"dragstart",or)}function Vn(){Ii(window,"dragstart",or)}var sr,Sr;function Tr(p){for(;p.tabIndex===-1;)p=p.parentNode;p.style&&(fr(),sr=p,Sr=p.style.outlineStyle,p.style.outlineStyle="none",Nn(window,"keydown",fr))}function fr(){sr&&(sr.style.outlineStyle=Sr,sr=void 0,Sr=void 0,Ii(window,"keydown",fr))}function Yu(p){do p=p.parentNode;while((!p.offsetWidth||!p.offsetHeight)&&p!==document.body);return p}function Tl(p){var w=p.getBoundingClientRect();return{x:w.width/p.offsetWidth||1,y:w.height/p.offsetHeight||1,boundingClientRect:w}}var Zl={__proto__:null,TRANSFORM:Da,TRANSITION:Yr,TRANSITION_END:qi,get:oa,getStyle:Sl,create:On,remove:An,empty:$r,toFront:tr,toBack:_i,hasClass:ii,addClass:Pn,removeClass:zn,setClass:la,getClass:_a,setOpacity:Hi,testProp:Ko,setTransform:Ss,setPosition:Di,getPosition:yt,get disableTextSelection(){return At},get enableTextSelection(){return Zt},disableImageDrag:cn,enableImageDrag:Vn,preventOutline:Tr,restoreOutline:fr,getSizedParentNode:Yu,getScale:Tl};function Nn(p,w,D,q){if(w&&typeof w=="object")for(var nt in w)Mr(p,nt,w[nt],D);else{w=F(w);for(var mt=0,Ft=w.length;mt<Ft;mt++)Mr(p,w[mt],D,q)}return this}var Ts="_leaflet_events";function Ii(p,w,D,q){if(arguments.length===1)Qo(p),delete p[Ts];else if(w&&typeof w=="object")for(var nt in w)Ml(p,nt,w[nt],D);else if(w=F(w),arguments.length===2)Qo(p,function(ue){return X(w,ue)!==-1});else for(var mt=0,Ft=w.length;mt<Ft;mt++)Ml(p,w[mt],D,q);return this}function Qo(p,w){for(var D in p[Ts]){var q=D.split(/\d/)[0];(!w||w(q))&&Ml(p,q,null,null,D)}}var bo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Mr(p,w,D,q){var nt=w+g(D)+(q?"_"+g(q):"");if(p[Ts]&&p[Ts][nt])return this;var mt=function(ue){return D.call(q||p,ue||window.event)},Ft=mt;!se.touchNative&&se.pointer&&w.indexOf("touch")===0?mt=qn(p,w,mt):se.touch&&w==="dblclick"?mt=Js(p,mt):"addEventListener"in p?w==="touchstart"||w==="touchmove"||w==="wheel"||w==="mousewheel"?p.addEventListener(bo[w]||w,mt,se.passiveEvents?{passive:!1}:!1):w==="mouseenter"||w==="mouseleave"?(mt=function(ue){ue=ue||window.event,to(p,ue)&&Ft(ue)},p.addEventListener(bo[w],mt,!1)):p.addEventListener(w,Ft,!1):p.attachEvent("on"+w,mt),p[Ts]=p[Ts]||{},p[Ts][nt]=mt}function Ml(p,w,D,q,nt){nt=nt||w+g(D)+(q?"_"+g(q):"");var mt=p[Ts]&&p[Ts][nt];if(!mt)return this;!se.touchNative&&se.pointer&&w.indexOf("touch")===0?Hn(p,w,mt):se.touch&&w==="dblclick"?Un(p,mt):"removeEventListener"in p?p.removeEventListener(bo[w]||w,mt,!1):p.detachEvent("on"+w,mt),p[Ts][nt]=null}function os(p){return p.stopPropagation?p.stopPropagation():p.originalEvent?p.originalEvent._stopped=!0:p.cancelBubble=!0,this}function ls(p){return Mr(p,"wheel",os),this}function wo(p){return Nn(p,"mousedown touchstart dblclick contextmenu",os),p._leaflet_disable_click=!0,this}function or(p){return p.preventDefault?p.preventDefault():p.returnValue=!1,this}function Ya(p){return or(p),os(p),this}function Xn(p){if(p.composedPath)return p.composedPath();for(var w=[],D=p.target;D;)w.push(D),D=D.parentNode;return w}function El(p,w){if(!w)return new Tt(p.clientX,p.clientY);var D=Tl(w),q=D.boundingClientRect;return new Tt((p.clientX-q.left)/D.x-w.clientLeft,(p.clientY-q.top)/D.y-w.clientTop)}var us=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Wi(p){return se.edge?p.wheelDeltaY/2:p.deltaY&&p.deltaMode===0?-p.deltaY/us:p.deltaY&&p.deltaMode===1?-p.deltaY*20:p.deltaY&&p.deltaMode===2?-p.deltaY*60:p.deltaX||p.deltaZ?0:p.wheelDelta?(p.wheelDeltaY||p.wheelDelta)/2:p.detail&&Math.abs(p.detail)<32765?-p.detail*20:p.detail?p.detail/-32765*60:0}function to(p,w){var D=w.relatedTarget;if(!D)return!0;try{for(;D&&D!==p;)D=D.parentNode}catch{return!1}return D!==p}var Gl={__proto__:null,on:Nn,off:Ii,stopPropagation:os,disableScrollPropagation:ls,disableClickPropagation:wo,preventDefault:or,stop:Ya,getPropagationPath:Xn,getMousePosition:El,getWheelDelta:Wi,isExternalTarget:to,addListener:Nn,removeListener:Ii},Jo=Ct.extend({run:function(p,w,D,q){this.stop(),this._el=p,this._inProgress=!0,this._duration=D||.25,this._easeOutPower=1/Math.max(q||.5,.2),this._startPos=yt(p),this._offset=w.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=wt(this._animate,this),this._step()},_step:function(p){var w=+new Date-this._startTime,D=this._duration*1e3;w<D?this._runFrame(this._easeOut(w/D),p):(this._runFrame(1),this._complete())},_runFrame:function(p,w){var D=this._startPos.add(this._offset.multiplyBy(p));w&&D._round(),Di(this._el,D),this.fire("step")},_complete:function(){St(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(p){return 1-Math.pow(1-p,this._easeOutPower)}}),hi=Ct.extend({options:{crs:on,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(p,w){w=V(this,w),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(p),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),w.maxBounds&&this.setMaxBounds(w.maxBounds),w.zoom!==void 0&&(this._zoom=this._limitZoom(w.zoom)),w.center&&w.zoom!==void 0&&this.setView(ce(w.center),w.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Yr&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Nn(this._proxy,qi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(p,w,D){if(w=w===void 0?this._zoom:this._limitZoom(w),p=this._limitCenter(ce(p),w,this.options.maxBounds),D=D||{},this._stop(),this._loaded&&!D.reset&&D!==!0){D.animate!==void 0&&(D.zoom=r({animate:D.animate},D.zoom),D.pan=r({animate:D.animate,duration:D.duration},D.pan));var q=this._zoom!==w?this._tryAnimatedZoom&&this._tryAnimatedZoom(p,w,D.zoom):this._tryAnimatedPan(p,D.pan);if(q)return clearTimeout(this._sizeTimer),this}return this._resetView(p,w,D.pan&&D.pan.noMoveStart),this},setZoom:function(p,w){return this._loaded?this.setView(this.getCenter(),p,{zoom:w}):(this._zoom=p,this)},zoomIn:function(p,w){return p=p||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+p,w)},zoomOut:function(p,w){return p=p||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-p,w)},setZoomAround:function(p,w,D){var q=this.getZoomScale(w),nt=this.getSize().divideBy(2),mt=p instanceof Tt?p:this.latLngToContainerPoint(p),Ft=mt.subtract(nt).multiplyBy(1-1/q),ue=this.containerPointToLatLng(nt.add(Ft));return this.setView(ue,w,{zoom:D})},_getBoundsCenterZoom:function(p,w){w=w||{},p=p.getBounds?p.getBounds():Xt(p);var D=$t(w.paddingTopLeft||w.padding||[0,0]),q=$t(w.paddingBottomRight||w.padding||[0,0]),nt=this.getBoundsZoom(p,!1,D.add(q));if(nt=typeof w.maxZoom=="number"?Math.min(w.maxZoom,nt):nt,nt===1/0)return{center:p.getCenter(),zoom:nt};var mt=q.subtract(D).divideBy(2),Ft=this.project(p.getSouthWest(),nt),ue=this.project(p.getNorthEast(),nt),ve=this.unproject(Ft.add(ue).divideBy(2).add(mt),nt);return{center:ve,zoom:nt}},fitBounds:function(p,w){if(p=Xt(p),!p.isValid())throw new Error("Bounds are not valid.");var D=this._getBoundsCenterZoom(p,w);return this.setView(D.center,D.zoom,w)},fitWorld:function(p){return this.fitBounds([[-90,-180],[90,180]],p)},panTo:function(p,w){return this.setView(p,this._zoom,{pan:w})},panBy:function(p,w){if(p=$t(p).round(),w=w||{},!p.x&&!p.y)return this.fire("moveend");if(w.animate!==!0&&!this.getSize().contains(p))return this._resetView(this.unproject(this.project(this.getCenter()).add(p)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Jo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),w.noMoveStart||this.fire("movestart"),w.animate!==!1){Pn(this._mapPane,"leaflet-pan-anim");var D=this._getMapPanePos().subtract(p).round();this._panAnim.run(this._mapPane,D,w.duration||.25,w.easeLinearity)}else this._rawPanBy(p),this.fire("move").fire("moveend");return this},flyTo:function(p,w,D){if(D=D||{},D.animate===!1||!se.any3d)return this.setView(p,w,D);this._stop();var q=this.project(this.getCenter()),nt=this.project(p),mt=this.getSize(),Ft=this._zoom;p=ce(p),w=w===void 0?Ft:w;var ue=Math.max(mt.x,mt.y),ve=ue*this.getZoomScale(Ft,w),Le=nt.distanceTo(q)||1,rn=1.42,Mn=rn*rn;function ri(Ki){var Ei=Ki?-1:1,Ri=Ki?ve:ue,Il=ve*ve-ue*ue+Ei*Mn*Mn*Le*Le,cl=2*Ri*Mn*Le,hl=Il/cl,hs=Math.sqrt(hl*hl+1)-hl,so=hs<1e-9?-18:Math.log(hs);return so}function Mi(Ki){return(Math.exp(Ki)-Math.exp(-Ki))/2}function vr(Ki){return(Math.exp(Ki)+Math.exp(-Ki))/2}function sn(Ki){return Mi(Ki)/vr(Ki)}var Je=ri(0);function vi(Ki){return ue*(vr(Je)/vr(Je+rn*Ki))}function ui(Ki){return ue*(vr(Je)*sn(Je+rn*Ki)-Mi(Je))/Mn}function Io(Ki){return 1-Math.pow(1-Ki,1.5)}var bi=Date.now(),Eu=(ri(1)-Je)/rn,Kr=D.duration?1e3*D.duration:1e3*Eu*.8;function Rc(){var Ki=(Date.now()-bi)/Kr,Ei=Io(Ki)*Eu;Ki<=1?(this._flyToFrame=wt(Rc,this),this._move(this.unproject(q.add(nt.subtract(q).multiplyBy(ui(Ei)/Le)),Ft),this.getScaleZoom(ue/vi(Ei),Ft),{flyTo:!0})):this._move(p,w)._moveEnd(!0)}return this._moveStart(!0,D.noMoveStart),Rc.call(this),this},flyToBounds:function(p,w){var D=this._getBoundsCenterZoom(p,w);return this.flyTo(D.center,D.zoom,w)},setMaxBounds:function(p){return p=Xt(p),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),p.isValid()?(this.options.maxBounds=p,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(p){var w=this.options.minZoom;return this.options.minZoom=p,this._loaded&&w!==p&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(p):this},setMaxZoom:function(p){var w=this.options.maxZoom;return this.options.maxZoom=p,this._loaded&&w!==p&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(p):this},panInsideBounds:function(p,w){this._enforcingBounds=!0;var D=this.getCenter(),q=this._limitCenter(D,this._zoom,Xt(p));return D.equals(q)||this.panTo(q,w),this._enforcingBounds=!1,this},panInside:function(p,w){w=w||{};var D=$t(w.paddingTopLeft||w.padding||[0,0]),q=$t(w.paddingBottomRight||w.padding||[0,0]),nt=this.project(this.getCenter()),mt=this.project(p),Ft=this.getPixelBounds(),ue=Mt([Ft.min.add(D),Ft.max.subtract(q)]),ve=ue.getSize();if(!ue.contains(mt)){this._enforcingBounds=!0;var Le=mt.subtract(ue.getCenter()),rn=ue.extend(mt).getSize().subtract(ve);nt.x+=Le.x<0?-rn.x:rn.x,nt.y+=Le.y<0?-rn.y:rn.y,this.panTo(this.unproject(nt),w),this._enforcingBounds=!1}return this},invalidateSize:function(p){if(!this._loaded)return this;p=r({animate:!1,pan:!0},p===!0?{animate:!0}:p);var w=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var D=this.getSize(),q=w.divideBy(2).round(),nt=D.divideBy(2).round(),mt=q.subtract(nt);return!mt.x&&!mt.y?this:(p.animate&&p.pan?this.panBy(mt):(p.pan&&this._rawPanBy(mt),this.fire("move"),p.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:w,newSize:D}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(p){if(p=this._locateOptions=r({timeout:1e4,watch:!1},p),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var w=c(this._handleGeolocationResponse,this),D=c(this._handleGeolocationError,this);return p.watch?this._locationWatchId=navigator.geolocation.watchPosition(w,D,p):navigator.geolocation.getCurrentPosition(w,D,p),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(p){if(this._container._leaflet_id){var w=p.code,D=p.message||(w===1?"permission denied":w===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:w,message:"Geolocation error: "+D+"."})}},_handleGeolocationResponse:function(p){if(this._container._leaflet_id){var w=p.coords.latitude,D=p.coords.longitude,q=new re(w,D),nt=q.toBounds(p.coords.accuracy*2),mt=this._locateOptions;if(mt.setView){var Ft=this.getBoundsZoom(nt);this.setView(q,mt.maxZoom?Math.min(Ft,mt.maxZoom):Ft)}var ue={latlng:q,bounds:nt,timestamp:p.timestamp};for(var ve in p.coords)typeof p.coords[ve]=="number"&&(ue[ve]=p.coords[ve]);this.fire("locationfound",ue)}},addHandler:function(p,w){if(!w)return this;var D=this[p]=new w(this);return this._handlers.push(D),this.options[p]&&D.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),An(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(St(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var p;for(p in this._layers)this._layers[p].remove();for(p in this._panes)An(this._panes[p]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(p,w){var D="leaflet-pane"+(p?" leaflet-"+p.replace("Pane","")+"-pane":""),q=On("div",D,w||this._mapPane);return p&&(this._panes[p]=q),q},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var p=this.getPixelBounds(),w=this.unproject(p.getBottomLeft()),D=this.unproject(p.getTopRight());return new Lt(w,D)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(p,w,D){p=Xt(p),D=$t(D||[0,0]);var q=this.getZoom()||0,nt=this.getMinZoom(),mt=this.getMaxZoom(),Ft=p.getNorthWest(),ue=p.getSouthEast(),ve=this.getSize().subtract(D),Le=Mt(this.project(ue,q),this.project(Ft,q)).getSize(),rn=se.any3d?this.options.zoomSnap:1,Mn=ve.x/Le.x,ri=ve.y/Le.y,Mi=w?Math.max(Mn,ri):Math.min(Mn,ri);return q=this.getScaleZoom(Mi,q),rn&&(q=Math.round(q/(rn/100))*(rn/100),q=w?Math.ceil(q/rn)*rn:Math.floor(q/rn)*rn),Math.max(nt,Math.min(mt,q))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Tt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(p,w){var D=this._getTopLeftPoint(p,w);return new ft(D,D.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(p){return this.options.crs.getProjectedBounds(p===void 0?this.getZoom():p)},getPane:function(p){return typeof p=="string"?this._panes[p]:p},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(p,w){var D=this.options.crs;return w=w===void 0?this._zoom:w,D.scale(p)/D.scale(w)},getScaleZoom:function(p,w){var D=this.options.crs;w=w===void 0?this._zoom:w;var q=D.zoom(p*D.scale(w));return isNaN(q)?1/0:q},project:function(p,w){return w=w===void 0?this._zoom:w,this.options.crs.latLngToPoint(ce(p),w)},unproject:function(p,w){return w=w===void 0?this._zoom:w,this.options.crs.pointToLatLng($t(p),w)},layerPointToLatLng:function(p){var w=$t(p).add(this.getPixelOrigin());return this.unproject(w)},latLngToLayerPoint:function(p){var w=this.project(ce(p))._round();return w._subtract(this.getPixelOrigin())},wrapLatLng:function(p){return this.options.crs.wrapLatLng(ce(p))},wrapLatLngBounds:function(p){return this.options.crs.wrapLatLngBounds(Xt(p))},distance:function(p,w){return this.options.crs.distance(ce(p),ce(w))},containerPointToLayerPoint:function(p){return $t(p).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(p){return $t(p).add(this._getMapPanePos())},containerPointToLatLng:function(p){var w=this.containerPointToLayerPoint($t(p));return this.layerPointToLatLng(w)},latLngToContainerPoint:function(p){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(p)))},mouseEventToContainerPoint:function(p){return El(p,this._container)},mouseEventToLayerPoint:function(p){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(p))},mouseEventToLatLng:function(p){return this.layerPointToLatLng(this.mouseEventToLayerPoint(p))},_initContainer:function(p){var w=this._container=oa(p);if(w){if(w._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Nn(w,"scroll",this._onScroll,this),this._containerId=g(w)},_initLayout:function(){var p=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,Pn(p,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var w=Sl(p,"position");w!=="absolute"&&w!=="relative"&&w!=="fixed"&&w!=="sticky"&&(p.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var p=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Di(this._mapPane,new Tt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Pn(p.markerPane,"leaflet-zoom-hide"),Pn(p.shadowPane,"leaflet-zoom-hide"))},_resetView:function(p,w,D){Di(this._mapPane,new Tt(0,0));var q=!this._loaded;this._loaded=!0,w=this._limitZoom(w),this.fire("viewprereset");var nt=this._zoom!==w;this._moveStart(nt,D)._move(p,w)._moveEnd(nt),this.fire("viewreset"),q&&this.fire("load")},_moveStart:function(p,w){return p&&this.fire("zoomstart"),w||this.fire("movestart"),this},_move:function(p,w,D,q){w===void 0&&(w=this._zoom);var nt=this._zoom!==w;return this._zoom=w,this._lastCenter=p,this._pixelOrigin=this._getNewPixelOrigin(p),q?D&&D.pinch&&this.fire("zoom",D):((nt||D&&D.pinch)&&this.fire("zoom",D),this.fire("move",D)),this},_moveEnd:function(p){return p&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return St(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(p){Di(this._mapPane,this._getMapPanePos().subtract(p))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(p){this._targets={},this._targets[g(this._container)]=this;var w=p?Ii:Nn;w(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&w(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(p?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){St(this._resizeRequest),this._resizeRequest=wt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var p=this._getMapPanePos();Math.max(Math.abs(p.x),Math.abs(p.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(p,w){for(var D=[],q,nt=w==="mouseout"||w==="mouseover",mt=p.target||p.srcElement,Ft=!1;mt;){if(q=this._targets[g(mt)],q&&(w==="click"||w==="preclick")&&this._draggableMoved(q)){Ft=!0;break}if(q&&q.listens(w,!0)&&(nt&&!to(mt,p)||(D.push(q),nt))||mt===this._container)break;mt=mt.parentNode}return!D.length&&!Ft&&!nt&&this.listens(w,!0)&&(D=[this]),D},_isClickDisabled:function(p){for(;p&&p!==this._container;){if(p._leaflet_disable_click)return!0;p=p.parentNode}},_handleDOMEvent:function(p){var w=p.target||p.srcElement;if(!(!this._loaded||w._leaflet_disable_events||p.type==="click"&&this._isClickDisabled(w))){var D=p.type;D==="mousedown"&&Tr(w),this._fireDOMEvent(p,D)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(p,w,D){if(p.type==="click"){var q=r({},p);q.type="preclick",this._fireDOMEvent(q,q.type,D)}var nt=this._findEventTargets(p,w);if(D){for(var mt=[],Ft=0;Ft<D.length;Ft++)D[Ft].listens(w,!0)&&mt.push(D[Ft]);nt=mt.concat(nt)}if(nt.length){w==="contextmenu"&&or(p);var ue=nt[0],ve={originalEvent:p};if(p.type!=="keypress"&&p.type!=="keydown"&&p.type!=="keyup"){var Le=ue.getLatLng&&(!ue._radius||ue._radius<=10);ve.containerPoint=Le?this.latLngToContainerPoint(ue.getLatLng()):this.mouseEventToContainerPoint(p),ve.layerPoint=this.containerPointToLayerPoint(ve.containerPoint),ve.latlng=Le?ue.getLatLng():this.layerPointToLatLng(ve.layerPoint)}for(Ft=0;Ft<nt.length;Ft++)if(nt[Ft].fire(w,ve,!0),ve.originalEvent._stopped||nt[Ft].options.bubblingMouseEvents===!1&&X(this._mouseEvents,w)!==-1)return}},_draggableMoved:function(p){return p=p.dragging&&p.dragging.enabled()?p:this,p.dragging&&p.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var p=0,w=this._handlers.length;p<w;p++)this._handlers[p].disable()},whenReady:function(p,w){return this._loaded?p.call(w||this,{target:this}):this.on("load",p,w),this},_getMapPanePos:function(){return yt(this._mapPane)||new Tt(0,0)},_moved:function(){var p=this._getMapPanePos();return p&&!p.equals([0,0])},_getTopLeftPoint:function(p,w){var D=p&&w!==void 0?this._getNewPixelOrigin(p,w):this.getPixelOrigin();return D.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(p,w){var D=this.getSize()._divideBy(2);return this.project(p,w)._subtract(D)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(p,w,D){var q=this._getNewPixelOrigin(D,w);return this.project(p,w)._subtract(q)},_latLngBoundsToNewLayerBounds:function(p,w,D){var q=this._getNewPixelOrigin(D,w);return Mt([this.project(p.getSouthWest(),w)._subtract(q),this.project(p.getNorthWest(),w)._subtract(q),this.project(p.getSouthEast(),w)._subtract(q),this.project(p.getNorthEast(),w)._subtract(q)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(p){return this.latLngToLayerPoint(p).subtract(this._getCenterLayerPoint())},_limitCenter:function(p,w,D){if(!D)return p;var q=this.project(p,w),nt=this.getSize().divideBy(2),mt=new ft(q.subtract(nt),q.add(nt)),Ft=this._getBoundsOffset(mt,D,w);return Math.abs(Ft.x)<=1&&Math.abs(Ft.y)<=1?p:this.unproject(q.add(Ft),w)},_limitOffset:function(p,w){if(!w)return p;var D=this.getPixelBounds(),q=new ft(D.min.add(p),D.max.add(p));return p.add(this._getBoundsOffset(q,w))},_getBoundsOffset:function(p,w,D){var q=Mt(this.project(w.getNorthEast(),D),this.project(w.getSouthWest(),D)),nt=q.min.subtract(p.min),mt=q.max.subtract(p.max),Ft=this._rebound(nt.x,-mt.x),ue=this._rebound(nt.y,-mt.y);return new Tt(Ft,ue)},_rebound:function(p,w){return p+w>0?Math.round(p-w)/2:Math.max(0,Math.ceil(p))-Math.max(0,Math.floor(w))},_limitZoom:function(p){var w=this.getMinZoom(),D=this.getMaxZoom(),q=se.any3d?this.options.zoomSnap:1;return q&&(p=Math.round(p/q)*q),Math.max(w,Math.min(D,p))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(p,w){var D=this._getCenterOffset(p)._trunc();return(w&&w.animate)!==!0&&!this.getSize().contains(D)?!1:(this.panBy(D,w),!0)},_createAnimProxy:function(){var p=this._proxy=On("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(p),this.on("zoomanim",function(w){var D=Da,q=this._proxy.style[D];Ss(this._proxy,this.project(w.center,w.zoom),this.getZoomScale(w.zoom,1)),q===this._proxy.style[D]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){An(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var p=this.getCenter(),w=this.getZoom();Ss(this._proxy,this.project(p,w),this.getZoomScale(w,1))},_catchTransitionEnd:function(p){this._animatingZoom&&p.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(p,w,D){if(this._animatingZoom)return!0;if(D=D||{},!this._zoomAnimated||D.animate===!1||this._nothingToAnimate()||Math.abs(w-this._zoom)>this.options.zoomAnimationThreshold)return!1;var q=this.getZoomScale(w),nt=this._getCenterOffset(p)._divideBy(1-1/q);return D.animate!==!0&&!this.getSize().contains(nt)?!1:(wt(function(){this._moveStart(!0,D.noMoveStart||!1)._animateZoom(p,w,!0)},this),!0)},_animateZoom:function(p,w,D,q){this._mapPane&&(D&&(this._animatingZoom=!0,this._animateToCenter=p,this._animateToZoom=w,Pn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:p,zoom:w,noUpdate:q}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Wu(p,w){return new hi(p,w)}var Ia=pe.extend({options:{position:"topright"},initialize:function(p){V(this,p)},getPosition:function(){return this.options.position},setPosition:function(p){var w=this._map;return w&&w.removeControl(this),this.options.position=p,w&&w.addControl(this),this},getContainer:function(){return this._container},addTo:function(p){this.remove(),this._map=p;var w=this._container=this.onAdd(p),D=this.getPosition(),q=p._controlCorners[D];return Pn(w,"leaflet-control"),D.indexOf("bottom")!==-1?q.insertBefore(w,q.firstChild):q.appendChild(w),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(An(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(p){this._map&&p&&p.screenX>0&&p.screenY>0&&this._map.getContainer().focus()}}),eo=function(p){return new Ia(p)};hi.include({addControl:function(p){return p.addTo(this),this},removeControl:function(p){return p.remove(),this},_initControlPos:function(){var p=this._controlCorners={},w="leaflet-",D=this._controlContainer=On("div",w+"control-container",this._container);function q(nt,mt){var Ft=w+nt+" "+w+mt;p[nt+mt]=On("div",Ft,D)}q("top","left"),q("top","right"),q("bottom","left"),q("bottom","right")},_clearControlPos:function(){for(var p in this._controlCorners)An(this._controlCorners[p]);An(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yl=Ia.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(p,w,D,q){return D<q?-1:q<D?1:0}},initialize:function(p,w,D){V(this,D),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var q in p)this._addLayer(p[q],q);for(q in w)this._addLayer(w[q],q,!0)},onAdd:function(p){this._initLayout(),this._update(),this._map=p,p.on("zoomend",this._checkDisabledLayers,this);for(var w=0;w<this._layers.length;w++)this._layers[w].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(p){return Ia.prototype.addTo.call(this,p),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(p,w){return this._addLayer(p,w),this._map?this._update():this},addOverlay:function(p,w){return this._addLayer(p,w,!0),this._map?this._update():this},removeLayer:function(p){p.off("add remove",this._onLayerChange,this);var w=this._getLayer(g(p));return w&&this._layers.splice(this._layers.indexOf(w),1),this._map?this._update():this},expand:function(){Pn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var p=this._map.getSize().y-(this._container.offsetTop+50);return p<this._section.clientHeight?(Pn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=p+"px"):zn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var p="leaflet-control-layers",w=this._container=On("div",p),D=this.options.collapsed;w.setAttribute("aria-haspopup",!0),wo(w),ls(w);var q=this._section=On("section",p+"-list");D&&(this._map.on("click",this.collapse,this),Nn(w,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var nt=this._layersLink=On("a",p+"-toggle",w);nt.href="#",nt.title="Layers",nt.setAttribute("role","button"),Nn(nt,{keydown:function(mt){mt.keyCode===13&&this._expandSafely()},click:function(mt){or(mt),this._expandSafely()}},this),D||this.expand(),this._baseLayersList=On("div",p+"-base",q),this._separator=On("div",p+"-separator",q),this._overlaysList=On("div",p+"-overlays",q),w.appendChild(q)},_getLayer:function(p){for(var w=0;w<this._layers.length;w++)if(this._layers[w]&&g(this._layers[w].layer)===p)return this._layers[w]},_addLayer:function(p,w,D){this._map&&p.on("add remove",this._onLayerChange,this),this._layers.push({layer:p,name:w,overlay:D}),this.options.sortLayers&&this._layers.sort(c(function(q,nt){return this.options.sortFunction(q.layer,nt.layer,q.name,nt.name)},this)),this.options.autoZIndex&&p.setZIndex&&(this._lastZIndex++,p.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;$r(this._baseLayersList),$r(this._overlaysList),this._layerControlInputs=[];var p,w,D,q,nt=0;for(D=0;D<this._layers.length;D++)q=this._layers[D],this._addItem(q),w=w||q.overlay,p=p||!q.overlay,nt+=q.overlay?0:1;return this.options.hideSingleBase&&(p=p&&nt>1,this._baseLayersList.style.display=p?"":"none"),this._separator.style.display=w&&p?"":"none",this},_onLayerChange:function(p){this._handlingClick||this._update();var w=this._getLayer(g(p.target)),D=w.overlay?p.type==="add"?"overlayadd":"overlayremove":p.type==="add"?"baselayerchange":null;D&&this._map.fire(D,w)},_createRadioElement:function(p,w){var D='<input type="radio" class="leaflet-control-layers-selector" name="'+p+'"'+(w?' checked="checked"':"")+"/>",q=document.createElement("div");return q.innerHTML=D,q.firstChild},_addItem:function(p){var w=document.createElement("label"),D=this._map.hasLayer(p.layer),q;p.overlay?(q=document.createElement("input"),q.type="checkbox",q.className="leaflet-control-layers-selector",q.defaultChecked=D):q=this._createRadioElement("leaflet-base-layers_"+g(this),D),this._layerControlInputs.push(q),q.layerId=g(p.layer),Nn(q,"click",this._onInputClick,this);var nt=document.createElement("span");nt.innerHTML=" "+p.name;var mt=document.createElement("span");w.appendChild(mt),mt.appendChild(q),mt.appendChild(nt);var Ft=p.overlay?this._overlaysList:this._baseLayersList;return Ft.appendChild(w),this._checkDisabledLayers(),w},_onInputClick:function(){if(!this._preventClick){var p=this._layerControlInputs,w,D,q=[],nt=[];this._handlingClick=!0;for(var mt=p.length-1;mt>=0;mt--)w=p[mt],D=this._getLayer(w.layerId).layer,w.checked?q.push(D):w.checked||nt.push(D);for(mt=0;mt<nt.length;mt++)this._map.hasLayer(nt[mt])&&this._map.removeLayer(nt[mt]);for(mt=0;mt<q.length;mt++)this._map.hasLayer(q[mt])||this._map.addLayer(q[mt]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var p=this._layerControlInputs,w,D,q=this._map.getZoom(),nt=p.length-1;nt>=0;nt--)w=p[nt],D=this._getLayer(w.layerId).layer,w.disabled=D.options.minZoom!==void 0&&q<D.options.minZoom||D.options.maxZoom!==void 0&&q>D.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var p=this._section;this._preventClick=!0,Nn(p,"click",or),this.expand();var w=this;setTimeout(function(){Ii(p,"click",or),w._preventClick=!1})}}),Xu=function(p,w,D){return new Yl(p,w,D)},kc=Ia.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(p){var w="leaflet-control-zoom",D=On("div",w+" leaflet-bar"),q=this.options;return this._zoomInButton=this._createButton(q.zoomInText,q.zoomInTitle,w+"-in",D,this._zoomIn),this._zoomOutButton=this._createButton(q.zoomOutText,q.zoomOutTitle,w+"-out",D,this._zoomOut),this._updateDisabled(),p.on("zoomend zoomlevelschange",this._updateDisabled,this),D},onRemove:function(p){p.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(p){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(p.shiftKey?3:1))},_zoomOut:function(p){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(p.shiftKey?3:1))},_createButton:function(p,w,D,q,nt){var mt=On("a",D,q);return mt.innerHTML=p,mt.href="#",mt.title=w,mt.setAttribute("role","button"),mt.setAttribute("aria-label",w),wo(mt),Nn(mt,"click",Ya),Nn(mt,"click",nt,this),Nn(mt,"click",this._refocusOnMap,this),mt},_updateDisabled:function(){var p=this._map,w="leaflet-disabled";zn(this._zoomInButton,w),zn(this._zoomOutButton,w),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||p._zoom===p.getMinZoom())&&(Pn(this._zoomOutButton,w),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||p._zoom===p.getMaxZoom())&&(Pn(this._zoomInButton,w),this._zoomInButton.setAttribute("aria-disabled","true"))}});hi.mergeOptions({zoomControl:!0}),hi.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new kc,this.addControl(this.zoomControl))});var pf=function(p){return new kc(p)},Wl=Ia.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(p){var w="leaflet-control-scale",D=On("div",w),q=this.options;return this._addScales(q,w+"-line",D),p.on(q.updateWhenIdle?"moveend":"move",this._update,this),p.whenReady(this._update,this),D},onRemove:function(p){p.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(p,w,D){p.metric&&(this._mScale=On("div",w,D)),p.imperial&&(this._iScale=On("div",w,D))},_update:function(){var p=this._map,w=p.getSize().y/2,D=p.distance(p.containerPointToLatLng([0,w]),p.containerPointToLatLng([this.options.maxWidth,w]));this._updateScales(D)},_updateScales:function(p){this.options.metric&&p&&this._updateMetric(p),this.options.imperial&&p&&this._updateImperial(p)},_updateMetric:function(p){var w=this._getRoundNum(p),D=w<1e3?w+" m":w/1e3+" km";this._updateScale(this._mScale,D,w/p)},_updateImperial:function(p){var w=p*3.2808399,D,q,nt;w>5280?(D=w/5280,q=this._getRoundNum(D),this._updateScale(this._iScale,q+" mi",q/D)):(nt=this._getRoundNum(w),this._updateScale(this._iScale,nt+" ft",nt/w))},_updateScale:function(p,w,D){p.style.width=Math.round(this.options.maxWidth*D)+"px",p.innerHTML=w},_getRoundNum:function(p){var w=Math.pow(10,(Math.floor(p)+"").length-1),D=p/w;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:1,w*D}}),hh=function(p){return new Wl(p)},cd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fh=Ia.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?cd+" ":"")+"Leaflet</a>"},initialize:function(p){V(this,p),this._attributions={}},onAdd:function(p){p.attributionControl=this,this._container=On("div","leaflet-control-attribution"),wo(this._container);for(var w in p._layers)p._layers[w].getAttribution&&this.addAttribution(p._layers[w].getAttribution());return this._update(),p.on("layeradd",this._addAttribution,this),this._container},onRemove:function(p){p.off("layeradd",this._addAttribution,this)},_addAttribution:function(p){p.layer.getAttribution&&(this.addAttribution(p.layer.getAttribution()),p.layer.once("remove",function(){this.removeAttribution(p.layer.getAttribution())},this))},setPrefix:function(p){return this.options.prefix=p,this._update(),this},addAttribution:function(p){return p?(this._attributions[p]||(this._attributions[p]=0),this._attributions[p]++,this._update(),this):this},removeAttribution:function(p){return p?(this._attributions[p]&&(this._attributions[p]--,this._update()),this):this},_update:function(){if(this._map){var p=[];for(var w in this._attributions)this._attributions[w]&&p.push(w);var D=[];this.options.prefix&&D.push(this.options.prefix),p.length&&D.push(p.join(", ")),this._container.innerHTML=D.join(' <span aria-hidden="true">|</span> ')}}});hi.mergeOptions({attributionControl:!0}),hi.addInitHook(function(){this.options.attributionControl&&new fh().addTo(this)});var hd=function(p){return new fh(p)};Ia.Layers=Yl,Ia.Zoom=kc,Ia.Scale=Wl,Ia.Attribution=fh,eo.layers=Xu,eo.zoom=pf,eo.scale=hh,eo.attribution=hd;var So=pe.extend({initialize:function(p){this._map=p},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});So.addTo=function(p,w){return p.addHandler(w,this),this};var fd={Events:Nt},Ku=se.touch?"touchstart mousedown":"mousedown",no=Ct.extend({options:{clickTolerance:3},initialize:function(p,w,D,q){V(this,q),this._element=p,this._dragStartTarget=w||p,this._preventOutline=D},enable:function(){this._enabled||(Nn(this._dragStartTarget,Ku,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(no._dragging===this&&this.finishDrag(!0),Ii(this._dragStartTarget,Ku,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(p){if(this._enabled&&(this._moved=!1,!ii(this._element,"leaflet-zoom-anim"))){if(p.touches&&p.touches.length!==1){no._dragging===this&&this.finishDrag();return}if(!(no._dragging||p.shiftKey||p.which!==1&&p.button!==1&&!p.touches)&&(no._dragging=this,this._preventOutline&&Tr(this._element),cn(),At(),!this._moving)){this.fire("down");var w=p.touches?p.touches[0]:p,D=Yu(this._element);this._startPoint=new Tt(w.clientX,w.clientY),this._startPos=yt(this._element),this._parentScale=Tl(D);var q=p.type==="mousedown";Nn(document,q?"mousemove":"touchmove",this._onMove,this),Nn(document,q?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(p){if(this._enabled){if(p.touches&&p.touches.length>1){this._moved=!0;return}var w=p.touches&&p.touches.length===1?p.touches[0]:p,D=new Tt(w.clientX,w.clientY)._subtract(this._startPoint);!D.x&&!D.y||Math.abs(D.x)+Math.abs(D.y)<this.options.clickTolerance||(D.x/=this._parentScale.x,D.y/=this._parentScale.y,or(p),this._moved||(this.fire("dragstart"),this._moved=!0,Pn(document.body,"leaflet-dragging"),this._lastTarget=p.target||p.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Pn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(D),this._moving=!0,this._lastEvent=p,this._updatePosition())}},_updatePosition:function(){var p={originalEvent:this._lastEvent};this.fire("predrag",p),Di(this._element,this._newPos),this.fire("drag",p)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(p){zn(document.body,"leaflet-dragging"),this._lastTarget&&(zn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ii(document,"mousemove touchmove",this._onMove,this),Ii(document,"mouseup touchend touchcancel",this._onUp,this),Vn(),Zt();var w=this._moved&&this._moving;this._moving=!1,no._dragging=!1,w&&this.fire("dragend",{noInertia:p,distance:this._newPos.distanceTo(this._startPos)})}});function Oc(p,w,D){var q,nt=[1,4,2,8],mt,Ft,ue,ve,Le,rn,Mn,ri;for(mt=0,rn=p.length;mt<rn;mt++)p[mt]._code=zi(p[mt],w);for(ue=0;ue<4;ue++){for(Mn=nt[ue],q=[],mt=0,rn=p.length,Ft=rn-1;mt<rn;Ft=mt++)ve=p[mt],Le=p[Ft],ve._code&Mn?Le._code&Mn||(ri=fi(Le,ve,Mn,w,D),ri._code=zi(ri,w),q.push(ri)):(Le._code&Mn&&(ri=fi(Le,ve,Mn,w,D),ri._code=zi(ri,w),q.push(ri)),q.push(ve));p=q}return p}function Dc(p,w){var D,q,nt,mt,Ft,ue,ve,Le,rn;if(!p||p.length===0)throw new Error("latlngs not passed");ua(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var Mn=ce([0,0]),ri=Xt(p),Mi=ri.getNorthWest().distanceTo(ri.getSouthWest())*ri.getNorthEast().distanceTo(ri.getNorthWest());Mi<1700&&(Mn=Al(p));var vr=p.length,sn=[];for(D=0;D<vr;D++){var Je=ce(p[D]);sn.push(w.project(ce([Je.lat-Mn.lat,Je.lng-Mn.lng])))}for(ue=ve=Le=0,D=0,q=vr-1;D<vr;q=D++)nt=sn[D],mt=sn[q],Ft=nt.y*mt.x-mt.y*nt.x,ve+=(nt.x+mt.x)*Ft,Le+=(nt.y+mt.y)*Ft,ue+=Ft*3;ue===0?rn=sn[0]:rn=[ve/ue,Le/ue];var vi=w.unproject($t(rn));return ce([vi.lat+Mn.lat,vi.lng+Mn.lng])}function Al(p){for(var w=0,D=0,q=0,nt=0;nt<p.length;nt++){var mt=ce(p[nt]);w+=mt.lat,D+=mt.lng,q++}return ce([w/q,D/q])}var Ic={__proto__:null,clipPolygon:Oc,polygonCenter:Dc,centroid:Al};function dh(p,w){if(!w||!p.length)return p.slice();var D=w*w;return p=vu(p,D),p=ph(p,D),p}function zc(p,w,D){return Math.sqrt(Kn(p,w,D,!0))}function Xl(p,w,D){return Kn(p,w,D)}function ph(p,w){var D=p.length,q=typeof Uint8Array<"u"?Uint8Array:Array,nt=new q(D);nt[0]=nt[D-1]=1,To(p,nt,w,0,D-1);var mt,Ft=[];for(mt=0;mt<D;mt++)nt[mt]&&Ft.push(p[mt]);return Ft}function To(p,w,D,q,nt){var mt=0,Ft,ue,ve;for(ue=q+1;ue<=nt-1;ue++)ve=Kn(p[ue],p[q],p[nt],!0),ve>mt&&(Ft=ue,mt=ve);mt>D&&(w[Ft]=1,To(p,w,D,q,Ft),To(p,w,D,Ft,nt))}function vu(p,w){for(var D=[p[0]],q=1,nt=0,mt=p.length;q<mt;q++)dd(p[q],p[nt])>w&&(D.push(p[q]),nt=q);return nt<mt-1&&D.push(p[mt-1]),D}var mh;function Lc(p,w,D,q,nt){var mt=q?mh:zi(p,D),Ft=zi(w,D),ue,ve,Le;for(mh=Ft;;){if(!(mt|Ft))return[p,w];if(mt&Ft)return!1;ue=mt||Ft,ve=fi(p,w,ue,D,nt),Le=zi(ve,D),ue===mt?(p=ve,mt=Le):(w=ve,Ft=Le)}}function fi(p,w,D,q,nt){var mt=w.x-p.x,Ft=w.y-p.y,ue=q.min,ve=q.max,Le,rn;return D&8?(Le=p.x+mt*(ve.y-p.y)/Ft,rn=ve.y):D&4?(Le=p.x+mt*(ue.y-p.y)/Ft,rn=ue.y):D&2?(Le=ve.x,rn=p.y+Ft*(ve.x-p.x)/mt):D&1&&(Le=ue.x,rn=p.y+Ft*(ue.x-p.x)/mt),new Tt(Le,rn,nt)}function zi(p,w){var D=0;return p.x<w.min.x?D|=1:p.x>w.max.x&&(D|=2),p.y<w.min.y?D|=4:p.y>w.max.y&&(D|=8),D}function dd(p,w){var D=w.x-p.x,q=w.y-p.y;return D*D+q*q}function Kn(p,w,D,q){var nt=w.x,mt=w.y,Ft=D.x-nt,ue=D.y-mt,ve=Ft*Ft+ue*ue,Le;return ve>0&&(Le=((p.x-nt)*Ft+(p.y-mt)*ue)/ve,Le>1?(nt=D.x,mt=D.y):Le>0&&(nt+=Ft*Le,mt+=ue*Le)),Ft=p.x-nt,ue=p.y-mt,q?Ft*Ft+ue*ue:new Tt(nt,mt)}function ua(p){return!W(p[0])||typeof p[0][0]!="object"&&typeof p[0][0]<"u"}function Xi(p){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ua(p)}function Li(p,w){var D,q,nt,mt,Ft,ue,ve,Le;if(!p||p.length===0)throw new Error("latlngs not passed");ua(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var rn=ce([0,0]),Mn=Xt(p),ri=Mn.getNorthWest().distanceTo(Mn.getSouthWest())*Mn.getNorthEast().distanceTo(Mn.getNorthWest());ri<1700&&(rn=Al(p));var Mi=p.length,vr=[];for(D=0;D<Mi;D++){var sn=ce(p[D]);vr.push(w.project(ce([sn.lat-rn.lat,sn.lng-rn.lng])))}for(D=0,q=0;D<Mi-1;D++)q+=vr[D].distanceTo(vr[D+1])/2;if(q===0)Le=vr[0];else for(D=0,mt=0;D<Mi-1;D++)if(Ft=vr[D],ue=vr[D+1],nt=Ft.distanceTo(ue),mt+=nt,mt>q){ve=(mt-q)/nt,Le=[ue.x-ve*(ue.x-Ft.x),ue.y-ve*(ue.y-Ft.y)];break}var Je=w.unproject($t(Le));return ce([Je.lat+rn.lat,Je.lng+rn.lng])}var Qu={__proto__:null,simplify:dh,pointToSegmentDistance:zc,closestPointOnSegment:Xl,clipSegment:Lc,_getEdgeIntersection:fi,_getBitCode:zi,_sqClosestPointOnSegment:Kn,isFlat:ua,_flat:Xi,polylineCenter:Li},Ju={project:function(p){return new Tt(p.lng,p.lat)},unproject:function(p){return new re(p.y,p.x)},bounds:new ft([-180,-90],[180,90])},xu={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ft([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(p){var w=Math.PI/180,D=this.R,q=p.lat*w,nt=this.R_MINOR/D,mt=Math.sqrt(1-nt*nt),Ft=mt*Math.sin(q),ue=Math.tan(Math.PI/4-q/2)/Math.pow((1-Ft)/(1+Ft),mt/2);return q=-D*Math.log(Math.max(ue,1e-10)),new Tt(p.lng*w*D,q)},unproject:function(p){for(var w=180/Math.PI,D=this.R,q=this.R_MINOR/D,nt=Math.sqrt(1-q*q),mt=Math.exp(-p.y/D),Ft=Math.PI/2-2*Math.atan(mt),ue=0,ve=.1,Le;ue<15&&Math.abs(ve)>1e-7;ue++)Le=nt*Math.sin(Ft),Le=Math.pow((1-Le)/(1+Le),nt/2),ve=Math.PI/2-2*Math.atan(mt*Le)-Ft,Ft+=ve;return new re(Ft*w,p.x*w/D)}},tc={__proto__:null,LonLat:Ju,Mercator:xu,SphericalMercator:Ce},ec=r({},Ne,{code:"EPSG:3395",projection:xu,transformation:(function(){var p=.5/(Math.PI*xu.R);return de(p,.5,-p,.5)})()}),nc=r({},Ne,{code:"EPSG:4326",projection:Ju,transformation:de(1/180,1,-1/180,.5)}),tl=r({},Me,{projection:Ju,transformation:de(1,0,-1,0),scale:function(p){return Math.pow(2,p)},zoom:function(p){return Math.log(p)/Math.LN2},distance:function(p,w){var D=w.lng-p.lng,q=w.lat-p.lat;return Math.sqrt(D*D+q*q)},infinite:!0});Me.Earth=Ne,Me.EPSG3395=ec,Me.EPSG3857=on,Me.EPSG900913=Be,Me.EPSG4326=nc,Me.Simple=tl;var Ms=Ct.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(p){return p.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(p){return p&&p.removeLayer(this),this},getPane:function(p){return this._map.getPane(p?this.options[p]||p:this.options.pane)},addInteractiveTarget:function(p){return this._map._targets[g(p)]=this,this},removeInteractiveTarget:function(p){return delete this._map._targets[g(p)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(p){var w=p.target;if(w.hasLayer(this)){if(this._map=w,this._zoomAnimated=w._zoomAnimated,this.getEvents){var D=this.getEvents();w.on(D,this),this.once("remove",function(){w.off(D,this)},this)}this.onAdd(w),this.fire("add"),w.fire("layeradd",{layer:this})}}});hi.include({addLayer:function(p){if(!p._layerAdd)throw new Error("The provided object is not a Layer.");var w=g(p);return this._layers[w]?this:(this._layers[w]=p,p._mapToAdd=this,p.beforeAdd&&p.beforeAdd(this),this.whenReady(p._layerAdd,p),this)},removeLayer:function(p){var w=g(p);return this._layers[w]?(this._loaded&&p.onRemove(this),delete this._layers[w],this._loaded&&(this.fire("layerremove",{layer:p}),p.fire("remove")),p._map=p._mapToAdd=null,this):this},hasLayer:function(p){return g(p)in this._layers},eachLayer:function(p,w){for(var D in this._layers)p.call(w,this._layers[D]);return this},_addLayers:function(p){p=p?W(p)?p:[p]:[];for(var w=0,D=p.length;w<D;w++)this.addLayer(p[w])},_addZoomLimit:function(p){(!isNaN(p.options.maxZoom)||!isNaN(p.options.minZoom))&&(this._zoomBoundLayers[g(p)]=p,this._updateZoomLevels())},_removeZoomLimit:function(p){var w=g(p);this._zoomBoundLayers[w]&&(delete this._zoomBoundLayers[w],this._updateZoomLevels())},_updateZoomLevels:function(){var p=1/0,w=-1/0,D=this._getZoomSpan();for(var q in this._zoomBoundLayers){var nt=this._zoomBoundLayers[q].options;p=nt.minZoom===void 0?p:Math.min(p,nt.minZoom),w=nt.maxZoom===void 0?w:Math.max(w,nt.maxZoom)}this._layersMaxZoom=w===-1/0?void 0:w,this._layersMinZoom=p===1/0?void 0:p,D!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Mo=Ms.extend({initialize:function(p,w){V(this,w),this._layers={};var D,q;if(p)for(D=0,q=p.length;D<q;D++)this.addLayer(p[D])},addLayer:function(p){var w=this.getLayerId(p);return this._layers[w]=p,this._map&&this._map.addLayer(p),this},removeLayer:function(p){var w=p in this._layers?p:this.getLayerId(p);return this._map&&this._layers[w]&&this._map.removeLayer(this._layers[w]),delete this._layers[w],this},hasLayer:function(p){var w=typeof p=="number"?p:this.getLayerId(p);return w in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(p){var w=Array.prototype.slice.call(arguments,1),D,q;for(D in this._layers)q=this._layers[D],q[p]&&q[p].apply(q,w);return this},onAdd:function(p){this.eachLayer(p.addLayer,p)},onRemove:function(p){this.eachLayer(p.removeLayer,p)},eachLayer:function(p,w){for(var D in this._layers)p.call(w,this._layers[D]);return this},getLayer:function(p){return this._layers[p]},getLayers:function(){var p=[];return this.eachLayer(p.push,p),p},setZIndex:function(p){return this.invoke("setZIndex",p)},getLayerId:function(p){return g(p)}}),ic=function(p,w){return new Mo(p,w)},cs=Mo.extend({addLayer:function(p){return this.hasLayer(p)?this:(p.addEventParent(this),Mo.prototype.addLayer.call(this,p),this.fire("layeradd",{layer:p}))},removeLayer:function(p){return this.hasLayer(p)?(p in this._layers&&(p=this._layers[p]),p.removeEventParent(this),Mo.prototype.removeLayer.call(this,p),this.fire("layerremove",{layer:p})):this},setStyle:function(p){return this.invoke("setStyle",p)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var p=new Lt;for(var w in this._layers){var D=this._layers[w];p.extend(D.getBounds?D.getBounds():D.getLatLng())}return p}}),mf=function(p,w){return new cs(p,w)},Us=pe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(p){V(this,p)},createIcon:function(p){return this._createIcon("icon",p)},createShadow:function(p){return this._createIcon("shadow",p)},_createIcon:function(p,w){var D=this._getIconUrl(p);if(!D){if(p==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var q=this._createImg(D,w&&w.tagName==="IMG"?w:null);return this._setIconStyles(q,p),(this.options.crossOrigin||this.options.crossOrigin==="")&&(q.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),q},_setIconStyles:function(p,w){var D=this.options,q=D[w+"Size"];typeof q=="number"&&(q=[q,q]);var nt=$t(q),mt=$t(w==="shadow"&&D.shadowAnchor||D.iconAnchor||nt&&nt.divideBy(2,!0));p.className="leaflet-marker-"+w+" "+(D.className||""),mt&&(p.style.marginLeft=-mt.x+"px",p.style.marginTop=-mt.y+"px"),nt&&(p.style.width=nt.x+"px",p.style.height=nt.y+"px")},_createImg:function(p,w){return w=w||document.createElement("img"),w.src=p,w},_getIconUrl:function(p){return se.retina&&this.options[p+"RetinaUrl"]||this.options[p+"Url"]}});function rc(p){return new Us(p)}var bu=Us.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(p){return typeof bu.imagePath!="string"&&(bu.imagePath=this._detectIconPath()),(this.options.imagePath||bu.imagePath)+Us.prototype._getIconUrl.call(this,p)},_stripUrl:function(p){var w=function(D,q,nt){var mt=q.exec(D);return mt&&mt[nt]};return p=w(p,/^url\((['"])?(.+)\1\)$/,2),p&&w(p,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var p=On("div","leaflet-default-icon-path",document.body),w=Sl(p,"background-image")||Sl(p,"backgroundImage");if(document.body.removeChild(p),w=this._stripUrl(w),w)return w;var D=document.querySelector('link[href$="leaflet.css"]');return D?D.href.substring(0,D.href.length-11-1):""}}),Cl=So.extend({initialize:function(p){this._marker=p},addHooks:function(){var p=this._marker._icon;this._draggable||(this._draggable=new no(p,p,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Pn(p,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(p){var w=this._marker,D=w._map,q=this._marker.options.autoPanSpeed,nt=this._marker.options.autoPanPadding,mt=yt(w._icon),Ft=D.getPixelBounds(),ue=D.getPixelOrigin(),ve=Mt(Ft.min._subtract(ue).add(nt),Ft.max._subtract(ue).subtract(nt));if(!ve.contains(mt)){var Le=$t((Math.max(ve.max.x,mt.x)-ve.max.x)/(Ft.max.x-ve.max.x)-(Math.min(ve.min.x,mt.x)-ve.min.x)/(Ft.min.x-ve.min.x),(Math.max(ve.max.y,mt.y)-ve.max.y)/(Ft.max.y-ve.max.y)-(Math.min(ve.min.y,mt.y)-ve.min.y)/(Ft.min.y-ve.min.y)).multiplyBy(q);D.panBy(Le,{animate:!1}),this._draggable._newPos._add(Le),this._draggable._startPos._add(Le),Di(w._icon,this._draggable._newPos),this._onDrag(p),this._panRequest=wt(this._adjustPan.bind(this,p))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(p){this._marker.options.autoPan&&(St(this._panRequest),this._panRequest=wt(this._adjustPan.bind(this,p)))},_onDrag:function(p){var w=this._marker,D=w._shadow,q=yt(w._icon),nt=w._map.layerPointToLatLng(q);D&&Di(D,q),w._latlng=nt,p.latlng=nt,p.oldLatLng=this._oldLatLng,w.fire("move",p).fire("drag",p)},_onDragEnd:function(p){St(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",p)}}),Kl=Ms.extend({options:{icon:new bu,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(p,w){V(this,w),this._latlng=ce(p)},onAdd:function(p){this._zoomAnimated=this._zoomAnimated&&p.options.markerZoomAnimation,this._zoomAnimated&&p.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(p){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&p.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(p){var w=this._latlng;return this._latlng=ce(p),this.update(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},setZIndexOffset:function(p){return this.options.zIndexOffset=p,this.update()},getIcon:function(){return this.options.icon},setIcon:function(p){return this.options.icon=p,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var p=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(p)}return this},_initIcon:function(){var p=this.options,w="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),D=p.icon.createIcon(this._icon),q=!1;D!==this._icon&&(this._icon&&this._removeIcon(),q=!0,p.title&&(D.title=p.title),D.tagName==="IMG"&&(D.alt=p.alt||"")),Pn(D,w),p.keyboard&&(D.tabIndex="0",D.setAttribute("role","button")),this._icon=D,p.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nn(D,"focus",this._panOnFocus,this);var nt=p.icon.createShadow(this._shadow),mt=!1;nt!==this._shadow&&(this._removeShadow(),mt=!0),nt&&(Pn(nt,w),nt.alt=""),this._shadow=nt,p.opacity<1&&this._updateOpacity(),q&&this.getPane().appendChild(this._icon),this._initInteraction(),nt&&mt&&this.getPane(p.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ii(this._icon,"focus",this._panOnFocus,this),An(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&An(this._shadow),this._shadow=null},_setPos:function(p){this._icon&&Di(this._icon,p),this._shadow&&Di(this._shadow,p),this._zIndex=p.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(p){this._icon&&(this._icon.style.zIndex=this._zIndex+p)},_animateZoom:function(p){var w=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center).round();this._setPos(w)},_initInteraction:function(){if(this.options.interactive&&(Pn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Cl)){var p=this.options.draggable;this.dragging&&(p=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Cl(this),p&&this.dragging.enable()}},setOpacity:function(p){return this.options.opacity=p,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var p=this.options.opacity;this._icon&&Hi(this._icon,p),this._shadow&&Hi(this._shadow,p)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var p=this._map;if(p){var w=this.options.icon.options,D=w.iconSize?$t(w.iconSize):$t(0,0),q=w.iconAnchor?$t(w.iconAnchor):$t(0,0);p.panInside(this._latlng,{paddingTopLeft:q,paddingBottomRight:D.subtract(q)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function gh(p,w){return new Kl(p,w)}var io=Ms.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(p){this._renderer=p.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(p){return V(this,p),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&p&&Object.prototype.hasOwnProperty.call(p,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Eo=io.extend({options:{fill:!0,radius:10},initialize:function(p,w){V(this,w),this._latlng=ce(p),this._radius=this.options.radius},setLatLng:function(p){var w=this._latlng;return this._latlng=ce(p),this.redraw(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(p){return this.options.radius=this._radius=p,this.redraw()},getRadius:function(){return this._radius},setStyle:function(p){var w=p&&p.radius||this._radius;return io.prototype.setStyle.call(this,p),this.setRadius(w),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var p=this._radius,w=this._radiusY||p,D=this._clickTolerance(),q=[p+D,w+D];this._pxBounds=new ft(this._point.subtract(q),this._point.add(q))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(p){return p.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ac(p,w){return new Eo(p,w)}var Ql=Eo.extend({initialize:function(p,w,D){if(typeof w=="number"&&(w=r({},D,{radius:w})),V(this,w),this._latlng=ce(p),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(p){return this._mRadius=p,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var p=[this._radius,this._radiusY||this._radius];return new Lt(this._map.layerPointToLatLng(this._point.subtract(p)),this._map.layerPointToLatLng(this._point.add(p)))},setStyle:io.prototype.setStyle,_project:function(){var p=this._latlng.lng,w=this._latlng.lat,D=this._map,q=D.options.crs;if(q.distance===Ne.distance){var nt=Math.PI/180,mt=this._mRadius/Ne.R/nt,Ft=D.project([w+mt,p]),ue=D.project([w-mt,p]),ve=Ft.add(ue).divideBy(2),Le=D.unproject(ve).lat,rn=Math.acos((Math.cos(mt*nt)-Math.sin(w*nt)*Math.sin(Le*nt))/(Math.cos(w*nt)*Math.cos(Le*nt)))/nt;(isNaN(rn)||rn===0)&&(rn=mt/Math.cos(Math.PI/180*w)),this._point=ve.subtract(D.getPixelOrigin()),this._radius=isNaN(rn)?0:ve.x-D.project([Le,p-rn]).x,this._radiusY=ve.y-Ft.y}else{var Mn=q.unproject(q.project(this._latlng).subtract([this._mRadius,0]));this._point=D.latLngToLayerPoint(this._latlng),this._radius=this._point.x-D.latLngToLayerPoint(Mn).x}this._updateBounds()}});function yh(p,w,D){return new Ql(p,w,D)}var Ti=io.extend({options:{smoothFactor:1,noClip:!1},initialize:function(p,w){V(this,w),this._setLatLngs(p)},getLatLngs:function(){return this._latlngs},setLatLngs:function(p){return this._setLatLngs(p),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(p){for(var w=1/0,D=null,q=Kn,nt,mt,Ft=0,ue=this._parts.length;Ft<ue;Ft++)for(var ve=this._parts[Ft],Le=1,rn=ve.length;Le<rn;Le++){nt=ve[Le-1],mt=ve[Le];var Mn=q(p,nt,mt,!0);Mn<w&&(w=Mn,D=q(p,nt,mt))}return D&&(D.distance=Math.sqrt(w)),D},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Li(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(p,w){return w=w||this._defaultShape(),p=ce(p),w.push(p),this._bounds.extend(p),this.redraw()},_setLatLngs:function(p){this._bounds=new Lt,this._latlngs=this._convertLatLngs(p)},_defaultShape:function(){return ua(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(p){for(var w=[],D=ua(p),q=0,nt=p.length;q<nt;q++)D?(w[q]=ce(p[q]),this._bounds.extend(w[q])):w[q]=this._convertLatLngs(p[q]);return w},_project:function(){var p=new ft;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,p),this._bounds.isValid()&&p.isValid()&&(this._rawPxBounds=p,this._updateBounds())},_updateBounds:function(){var p=this._clickTolerance(),w=new Tt(p,p);this._rawPxBounds&&(this._pxBounds=new ft([this._rawPxBounds.min.subtract(w),this._rawPxBounds.max.add(w)]))},_projectLatlngs:function(p,w,D){var q=p[0]instanceof re,nt=p.length,mt,Ft;if(q){for(Ft=[],mt=0;mt<nt;mt++)Ft[mt]=this._map.latLngToLayerPoint(p[mt]),D.extend(Ft[mt]);w.push(Ft)}else for(mt=0;mt<nt;mt++)this._projectLatlngs(p[mt],w,D)},_clipPoints:function(){var p=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}var w=this._parts,D,q,nt,mt,Ft,ue,ve;for(D=0,nt=0,mt=this._rings.length;D<mt;D++)for(ve=this._rings[D],q=0,Ft=ve.length;q<Ft-1;q++)ue=Lc(ve[q],ve[q+1],p,q,!0),ue&&(w[nt]=w[nt]||[],w[nt].push(ue[0]),(ue[1]!==ve[q+1]||q===Ft-2)&&(w[nt].push(ue[1]),nt++))}},_simplifyPoints:function(){for(var p=this._parts,w=this.options.smoothFactor,D=0,q=p.length;D<q;D++)p[D]=dh(p[D],w)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(p,w){var D,q,nt,mt,Ft,ue,ve=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(D=0,mt=this._parts.length;D<mt;D++)for(ue=this._parts[D],q=0,Ft=ue.length,nt=Ft-1;q<Ft;nt=q++)if(!(!w&&q===0)&&zc(p,ue[nt],ue[q])<=ve)return!0;return!1}});function Jl(p,w){return new Ti(p,w)}Ti._flat=Xi;var Wr=Ti.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(p){var w=Ti.prototype._convertLatLngs.call(this,p),D=w.length;return D>=2&&w[0]instanceof re&&w[0].equals(w[D-1])&&w.pop(),w},_setLatLngs:function(p){Ti.prototype._setLatLngs.call(this,p),ua(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ua(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var p=this._renderer._bounds,w=this.options.weight,D=new Tt(w,w);if(p=new ft(p.min.subtract(D),p.max.add(D)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}for(var q=0,nt=this._rings.length,mt;q<nt;q++)mt=Oc(this._rings[q],p,!0),mt.length&&this._parts.push(mt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(p){var w=!1,D,q,nt,mt,Ft,ue,ve,Le;if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(mt=0,ve=this._parts.length;mt<ve;mt++)for(D=this._parts[mt],Ft=0,Le=D.length,ue=Le-1;Ft<Le;ue=Ft++)q=D[Ft],nt=D[ue],q.y>p.y!=nt.y>p.y&&p.x<(nt.x-q.x)*(p.y-q.y)/(nt.y-q.y)+q.x&&(w=!w);return w||Ti.prototype._containsPoint.call(this,p,!0)}});function wu(p,w){return new Wr(p,w)}var Es=cs.extend({initialize:function(p,w){V(this,w),this._layers={},p&&this.addData(p)},addData:function(p){var w=W(p)?p:p.features,D,q,nt;if(w){for(D=0,q=w.length;D<q;D++)nt=w[D],(nt.geometries||nt.geometry||nt.features||nt.coordinates)&&this.addData(nt);return this}var mt=this.options;if(mt.filter&&!mt.filter(p))return this;var Ft=Xr(p,mt);return Ft?(Ft.feature=oc(p),Ft.defaultOptions=Ft.options,this.resetStyle(Ft),mt.onEachFeature&&mt.onEachFeature(p,Ft),this.addLayer(Ft)):this},resetStyle:function(p){return p===void 0?this.eachLayer(this.resetStyle,this):(p.options=r({},p.defaultOptions),this._setLayerStyle(p,this.options.style),this)},setStyle:function(p){return this.eachLayer(function(w){this._setLayerStyle(w,p)},this)},_setLayerStyle:function(p,w){p.setStyle&&(typeof w=="function"&&(w=w(p.feature)),p.setStyle(w))}});function Xr(p,w){var D=p.type==="Feature"?p.geometry:p,q=D?D.coordinates:null,nt=[],mt=w&&w.pointToLayer,Ft=w&&w.coordsToLatLng||Pl,ue,ve,Le,rn;if(!q&&!D)return null;switch(D.type){case"Point":return ue=Ft(q),Vs(mt,p,ue,w);case"MultiPoint":for(Le=0,rn=q.length;Le<rn;Le++)ue=Ft(q[Le]),nt.push(Vs(mt,p,ue,w));return new cs(nt);case"LineString":case"MultiLineString":return ve=Ao(q,D.type==="LineString"?0:1,Ft),new Ti(ve,w);case"Polygon":case"MultiPolygon":return ve=Ao(q,D.type==="Polygon"?1:2,Ft),new Wr(ve,w);case"GeometryCollection":for(Le=0,rn=D.geometries.length;Le<rn;Le++){var Mn=Xr({geometry:D.geometries[Le],type:"Feature",properties:p.properties},w);Mn&&nt.push(Mn)}return new cs(nt);case"FeatureCollection":for(Le=0,rn=D.features.length;Le<rn;Le++){var ri=Xr(D.features[Le],w);ri&&nt.push(ri)}return new cs(nt);default:throw new Error("Invalid GeoJSON object.")}}function Vs(p,w,D,q){return p?p(w,D):new Kl(D,q&&q.markersInheritOptions&&q)}function Pl(p){return new re(p[1],p[0],p[2])}function Ao(p,w,D){for(var q=[],nt=0,mt=p.length,Ft;nt<mt;nt++)Ft=w?Ao(p[nt],w-1,D):(D||Pl)(p[nt]),q.push(Ft);return q}function sc(p,w){return p=ce(p),p.alt!==void 0?[O(p.lng,w),O(p.lat,w),O(p.alt,w)]:[O(p.lng,w),O(p.lat,w)]}function Su(p,w,D,q){for(var nt=[],mt=0,Ft=p.length;mt<Ft;mt++)nt.push(w?Su(p[mt],ua(p[mt])?0:w-1,D,q):sc(p[mt],q));return!w&&D&&nt.length>0&&nt.push(nt[0].slice()),nt}function el(p,w){return p.feature?r({},p.feature,{geometry:w}):oc(w)}function oc(p){return p.type==="Feature"||p.type==="FeatureCollection"?p:{type:"Feature",properties:{},geometry:p}}var nl={toGeoJSON:function(p){return el(this,{type:"Point",coordinates:sc(this.getLatLng(),p)})}};Kl.include(nl),Ql.include(nl),Eo.include(nl),Ti.include({toGeoJSON:function(p){var w=!ua(this._latlngs),D=Su(this._latlngs,w?1:0,!1,p);return el(this,{type:(w?"Multi":"")+"LineString",coordinates:D})}}),Wr.include({toGeoJSON:function(p){var w=!ua(this._latlngs),D=w&&!ua(this._latlngs[0]),q=Su(this._latlngs,D?2:w?1:0,!0,p);return w||(q=[q]),el(this,{type:(D?"Multi":"")+"Polygon",coordinates:q})}}),Mo.include({toMultiPoint:function(p){var w=[];return this.eachLayer(function(D){w.push(D.toGeoJSON(p).geometry.coordinates)}),el(this,{type:"MultiPoint",coordinates:w})},toGeoJSON:function(p){var w=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(w==="MultiPoint")return this.toMultiPoint(p);var D=w==="GeometryCollection",q=[];return this.eachLayer(function(nt){if(nt.toGeoJSON){var mt=nt.toGeoJSON(p);if(D)q.push(mt.geometry);else{var Ft=oc(mt);Ft.type==="FeatureCollection"?q.push.apply(q,Ft.features):q.push(Ft)}}}),D?el(this,{geometries:q,type:"GeometryCollection"}):{type:"FeatureCollection",features:q}}});function As(p,w){return new Es(p,w)}var il=As,ca=Ms.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(p,w,D){this._url=p,this._bounds=Xt(w),V(this,D)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Pn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){An(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(p){return this.options.opacity=p,this._image&&this._updateOpacity(),this},setStyle:function(p){return p.opacity&&this.setOpacity(p.opacity),this},bringToFront:function(){return this._map&&tr(this._image),this},bringToBack:function(){return this._map&&_i(this._image),this},setUrl:function(p){return this._url=p,this._image&&(this._image.src=p),this},setBounds:function(p){return this._bounds=Xt(p),this._map&&this._reset(),this},getEvents:function(){var p={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var p=this._url.tagName==="IMG",w=this._image=p?this._url:On("img");if(Pn(w,"leaflet-image-layer"),this._zoomAnimated&&Pn(w,"leaflet-zoom-animated"),this.options.className&&Pn(w,this.options.className),w.onselectstart=E,w.onmousemove=E,w.onload=c(this.fire,this,"load"),w.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),p){this._url=w.src;return}w.src=this._url,w.alt=this.options.alt},_animateZoom:function(p){var w=this._map.getZoomScale(p.zoom),D=this._map._latLngBoundsToNewLayerBounds(this._bounds,p.zoom,p.center).min;Ss(this._image,D,w)},_reset:function(){var p=this._image,w=new ft(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),D=w.getSize();Di(p,w.min),p.style.width=D.x+"px",p.style.height=D.y+"px"},_updateOpacity:function(){Hi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var p=this.options.errorOverlayUrl;p&&this._url!==p&&(this._url=p,this._image.src=p)},getCenter:function(){return this._bounds.getCenter()}}),Tu=function(p,w,D){return new ca(p,w,D)},rl=ca.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var p=this._url.tagName==="VIDEO",w=this._image=p?this._url:On("video");if(Pn(w,"leaflet-image-layer"),this._zoomAnimated&&Pn(w,"leaflet-zoom-animated"),this.options.className&&Pn(w,this.options.className),w.onselectstart=E,w.onmousemove=E,w.onloadeddata=c(this.fire,this,"load"),p){for(var D=w.getElementsByTagName("source"),q=[],nt=0;nt<D.length;nt++)q.push(D[nt].src);this._url=D.length>0?q:[w.src];return}W(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(w.style,"objectFit")&&(w.style.objectFit="fill"),w.autoplay=!!this.options.autoplay,w.loop=!!this.options.loop,w.muted=!!this.options.muted,w.playsInline=!!this.options.playsInline;for(var mt=0;mt<this._url.length;mt++){var Ft=On("source");Ft.src=this._url[mt],w.appendChild(Ft)}}});function tu(p,w,D){return new rl(p,w,D)}var lc=ca.extend({_initImage:function(){var p=this._image=this._url;Pn(p,"leaflet-image-layer"),this._zoomAnimated&&Pn(p,"leaflet-zoom-animated"),this.options.className&&Pn(p,this.options.className),p.onselectstart=E,p.onmousemove=E}});function al(p,w,D){return new lc(p,w,D)}var va=Ms.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(p,w){p&&(p instanceof re||W(p))?(this._latlng=ce(p),V(this,w)):(V(this,p),this._source=w),this.options.content&&(this._content=this.options.content)},openOn:function(p){return p=arguments.length?p:this._source._map,p.hasLayer(this)||p.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(p){return this._map?this.close():(arguments.length?this._source=p:p=this._source,this._prepareOpen(),this.openOn(p._map)),this},onAdd:function(p){this._zoomAnimated=p._zoomAnimated,this._container||this._initLayout(),p._fadeAnimated&&Hi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),p._fadeAnimated&&Hi(this._container,1),this.bringToFront(),this.options.interactive&&(Pn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(p){p._fadeAnimated?(Hi(this._container,0),this._removeTimeout=setTimeout(c(An,void 0,this._container),200)):An(this._container),this.options.interactive&&(zn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(p){return this._latlng=ce(p),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(p){return this._content=p,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var p={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&tr(this._container),this},bringToBack:function(){return this._map&&_i(this._container),this},_prepareOpen:function(p){var w=this._source;if(!w._map)return!1;if(w instanceof cs){w=null;var D=this._source._layers;for(var q in D)if(D[q]._map){w=D[q];break}if(!w)return!1;this._source=w}if(!p)if(w.getCenter)p=w.getCenter();else if(w.getLatLng)p=w.getLatLng();else if(w.getBounds)p=w.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(p),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var p=this._contentNode,w=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof w=="string")p.innerHTML=w;else{for(;p.hasChildNodes();)p.removeChild(p.firstChild);p.appendChild(w)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var p=this._map.latLngToLayerPoint(this._latlng),w=$t(this.options.offset),D=this._getAnchor();this._zoomAnimated?Di(this._container,p.add(D)):w=w.add(p).add(D);var q=this._containerBottom=-w.y,nt=this._containerLeft=-Math.round(this._containerWidth/2)+w.x;this._container.style.bottom=q+"px",this._container.style.left=nt+"px"}},_getAnchor:function(){return[0,0]}});hi.include({_initOverlay:function(p,w,D,q){var nt=w;return nt instanceof p||(nt=new p(q).setContent(w)),D&&nt.setLatLng(D),nt}}),Ms.include({_initOverlay:function(p,w,D,q){var nt=D;return nt instanceof p?(V(nt,q),nt._source=this):(nt=w&&!q?w:new p(q,this),nt.setContent(D)),nt}});var za=va.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(p){return p=arguments.length?p:this._source._map,!p.hasLayer(this)&&p._popup&&p._popup.options.autoClose&&p.removeLayer(p._popup),p._popup=this,va.prototype.openOn.call(this,p)},onAdd:function(p){va.prototype.onAdd.call(this,p),p.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof io||this._source.on("preclick",os))},onRemove:function(p){va.prototype.onRemove.call(this,p),p.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof io||this._source.off("preclick",os))},getEvents:function(){var p=va.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(p.preclick=this.close),this.options.keepInView&&(p.moveend=this._adjustPan),p},_initLayout:function(){var p="leaflet-popup",w=this._container=On("div",p+" "+(this.options.className||"")+" leaflet-zoom-animated"),D=this._wrapper=On("div",p+"-content-wrapper",w);if(this._contentNode=On("div",p+"-content",D),wo(w),ls(this._contentNode),Nn(w,"contextmenu",os),this._tipContainer=On("div",p+"-tip-container",w),this._tip=On("div",p+"-tip",this._tipContainer),this.options.closeButton){var q=this._closeButton=On("a",p+"-close-button",w);q.setAttribute("role","button"),q.setAttribute("aria-label","Close popup"),q.href="#close",q.innerHTML='<span aria-hidden="true">&#215;</span>',Nn(q,"click",function(nt){or(nt),this.close()},this)}},_updateLayout:function(){var p=this._contentNode,w=p.style;w.width="",w.whiteSpace="nowrap";var D=p.offsetWidth;D=Math.min(D,this.options.maxWidth),D=Math.max(D,this.options.minWidth),w.width=D+1+"px",w.whiteSpace="",w.height="";var q=p.offsetHeight,nt=this.options.maxHeight,mt="leaflet-popup-scrolled";nt&&q>nt?(w.height=nt+"px",Pn(p,mt)):zn(p,mt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(p){var w=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center),D=this._getAnchor();Di(this._container,w.add(D))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var p=this._map,w=parseInt(Sl(this._container,"marginBottom"),10)||0,D=this._container.offsetHeight+w,q=this._containerWidth,nt=new Tt(this._containerLeft,-D-this._containerBottom);nt._add(yt(this._container));var mt=p.layerPointToContainerPoint(nt),Ft=$t(this.options.autoPanPadding),ue=$t(this.options.autoPanPaddingTopLeft||Ft),ve=$t(this.options.autoPanPaddingBottomRight||Ft),Le=p.getSize(),rn=0,Mn=0;mt.x+q+ve.x>Le.x&&(rn=mt.x+q-Le.x+ve.x),mt.x-rn-ue.x<0&&(rn=mt.x-ue.x),mt.y+D+ve.y>Le.y&&(Mn=mt.y+D-Le.y+ve.y),mt.y-Mn-ue.y<0&&(Mn=mt.y-ue.y),(rn||Mn)&&(this.options.keepInView&&(this._autopanning=!0),p.fire("autopanstart").panBy([rn,Mn]))}},_getAnchor:function(){return $t(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Co=function(p,w){return new za(p,w)};hi.mergeOptions({closePopupOnClick:!0}),hi.include({openPopup:function(p,w,D){return this._initOverlay(za,p,w,D).openOn(this),this},closePopup:function(p){return p=arguments.length?p:this._popup,p&&p.close(),this}}),Ms.include({bindPopup:function(p,w){return this._popup=this._initOverlay(za,this._popup,p,w),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(p){return this._popup&&(this instanceof cs||(this._popup._source=this),this._popup._prepareOpen(p||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(p){return this._popup&&this._popup.setContent(p),this},getPopup:function(){return this._popup},_openPopup:function(p){if(!(!this._popup||!this._map)){Ya(p);var w=p.layer||p.target;if(this._popup._source===w&&!(w instanceof io)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(p.latlng);return}this._popup._source=w,this.openPopup(p.latlng)}},_movePopup:function(p){this._popup.setLatLng(p.latlng)},_onKeyPress:function(p){p.originalEvent.keyCode===13&&this._openPopup(p)}});var kl=va.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(p){va.prototype.onAdd.call(this,p),this.setOpacity(this.options.opacity),p.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(p){va.prototype.onRemove.call(this,p),p.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var p=va.prototype.getEvents.call(this);return this.options.permanent||(p.preclick=this.close),p},_initLayout:function(){var p="leaflet-tooltip",w=p+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=On("div",w),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(p){var w,D,q=this._map,nt=this._container,mt=q.latLngToContainerPoint(q.getCenter()),Ft=q.layerPointToContainerPoint(p),ue=this.options.direction,ve=nt.offsetWidth,Le=nt.offsetHeight,rn=$t(this.options.offset),Mn=this._getAnchor();ue==="top"?(w=ve/2,D=Le):ue==="bottom"?(w=ve/2,D=0):ue==="center"?(w=ve/2,D=Le/2):ue==="right"?(w=0,D=Le/2):ue==="left"?(w=ve,D=Le/2):Ft.x<mt.x?(ue="right",w=0,D=Le/2):(ue="left",w=ve+(rn.x+Mn.x)*2,D=Le/2),p=p.subtract($t(w,D,!0)).add(rn).add(Mn),zn(nt,"leaflet-tooltip-right"),zn(nt,"leaflet-tooltip-left"),zn(nt,"leaflet-tooltip-top"),zn(nt,"leaflet-tooltip-bottom"),Pn(nt,"leaflet-tooltip-"+ue),Di(nt,p)},_updatePosition:function(){var p=this._map.latLngToLayerPoint(this._latlng);this._setPosition(p)},setOpacity:function(p){this.options.opacity=p,this._container&&Hi(this._container,p)},_animateZoom:function(p){var w=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center);this._setPosition(w)},_getAnchor:function(){return $t(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),sl=function(p,w){return new kl(p,w)};hi.include({openTooltip:function(p,w,D){return this._initOverlay(kl,p,w,D).openOn(this),this},closeTooltip:function(p){return p.close(),this}}),Ms.include({bindTooltip:function(p,w){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(kl,this._tooltip,p,w),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(p){if(!(!p&&this._tooltipHandlersAdded)){var w=p?"off":"on",D={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?D.add=this._openTooltip:(D.mouseover=this._openTooltip,D.mouseout=this.closeTooltip,D.click=this._openTooltip,this._map?this._addFocusListeners():D.add=this._addFocusListeners),this._tooltip.options.sticky&&(D.mousemove=this._moveTooltip),this[w](D),this._tooltipHandlersAdded=!p}},openTooltip:function(p){return this._tooltip&&(this instanceof cs||(this._tooltip._source=this),this._tooltip._prepareOpen(p)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(p){return this._tooltip&&this._tooltip.setContent(p),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(p){var w=typeof p.getElement=="function"&&p.getElement();w&&(Nn(w,"focus",function(){this._tooltip._source=p,this.openTooltip()},this),Nn(w,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(p){var w=typeof p.getElement=="function"&&p.getElement();w&&w.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(p){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var w=this;this._map.once("moveend",function(){w._openOnceFlag=!1,w._openTooltip(p)});return}this._tooltip._source=p.layer||p.target,this.openTooltip(this._tooltip.options.sticky?p.latlng:void 0)}},_moveTooltip:function(p){var w=p.latlng,D,q;this._tooltip.options.sticky&&p.originalEvent&&(D=this._map.mouseEventToContainerPoint(p.originalEvent),q=this._map.containerPointToLayerPoint(D),w=this._map.layerPointToLatLng(q)),this._tooltip.setLatLng(w)}});var Po=Us.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(p){var w=p&&p.tagName==="DIV"?p:document.createElement("div"),D=this.options;if(D.html instanceof Element?($r(w),w.appendChild(D.html)):w.innerHTML=D.html!==!1?D.html:"",D.bgPos){var q=$t(D.bgPos);w.style.backgroundPosition=-q.x+"px "+-q.y+"px"}return this._setIconStyles(w,"icon"),w},createShadow:function(){return null}});function pd(p){return new Po(p)}Us.Default=bu;var Ol=Ms.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(p){V(this,p)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(p){p._addZoomLimit(this)},onRemove:function(p){this._removeAllTiles(),An(this._container),p._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(tr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_i(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(p){return this.options.opacity=p,this._updateOpacity(),this},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var p=this._clampZoom(this._map.getZoom());p!==this._tileZoom&&(this._tileZoom=p,this._updateLevels()),this._update()}return this},getEvents:function(){var p={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),p.move=this._onMove),this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},createTile:function(){return document.createElement("div")},getTileSize:function(){var p=this.options.tileSize;return p instanceof Tt?p:new Tt(p,p)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(p){for(var w=this.getPane().children,D=-p(-1/0,1/0),q=0,nt=w.length,mt;q<nt;q++)mt=w[q].style.zIndex,w[q]!==this._container&&mt&&(D=p(D,+mt));isFinite(D)&&(this.options.zIndex=D+p(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Hi(this._container,this.options.opacity);var p=+new Date,w=!1,D=!1;for(var q in this._tiles){var nt=this._tiles[q];if(!(!nt.current||!nt.loaded)){var mt=Math.min(1,(p-nt.loaded)/200);Hi(nt.el,mt),mt<1?w=!0:(nt.active?D=!0:this._onOpaqueTile(nt),nt.active=!0)}}D&&!this._noPrune&&this._pruneTiles(),w&&(St(this._fadeFrame),this._fadeFrame=wt(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=On("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var p=this._tileZoom,w=this.options.maxZoom;if(p!==void 0){for(var D in this._levels)D=Number(D),this._levels[D].el.children.length||D===p?(this._levels[D].el.style.zIndex=w-Math.abs(p-D),this._onUpdateLevel(D)):(An(this._levels[D].el),this._removeTilesAtZoom(D),this._onRemoveLevel(D),delete this._levels[D]);var q=this._levels[p],nt=this._map;return q||(q=this._levels[p]={},q.el=On("div","leaflet-tile-container leaflet-zoom-animated",this._container),q.el.style.zIndex=w,q.origin=nt.project(nt.unproject(nt.getPixelOrigin()),p).round(),q.zoom=p,this._setZoomTransform(q,nt.getCenter(),nt.getZoom()),E(q.el.offsetWidth),this._onCreateLevel(q)),this._level=q,q}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var p,w,D=this._map.getZoom();if(D>this.options.maxZoom||D<this.options.minZoom){this._removeAllTiles();return}for(p in this._tiles)w=this._tiles[p],w.retain=w.current;for(p in this._tiles)if(w=this._tiles[p],w.current&&!w.active){var q=w.coords;this._retainParent(q.x,q.y,q.z,q.z-5)||this._retainChildren(q.x,q.y,q.z,q.z+2)}for(p in this._tiles)this._tiles[p].retain||this._removeTile(p)}},_removeTilesAtZoom:function(p){for(var w in this._tiles)this._tiles[w].coords.z===p&&this._removeTile(w)},_removeAllTiles:function(){for(var p in this._tiles)this._removeTile(p)},_invalidateAll:function(){for(var p in this._levels)An(this._levels[p].el),this._onRemoveLevel(Number(p)),delete this._levels[p];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(p,w,D,q){var nt=Math.floor(p/2),mt=Math.floor(w/2),Ft=D-1,ue=new Tt(+nt,+mt);ue.z=+Ft;var ve=this._tileCoordsToKey(ue),Le=this._tiles[ve];return Le&&Le.active?(Le.retain=!0,!0):(Le&&Le.loaded&&(Le.retain=!0),Ft>q?this._retainParent(nt,mt,Ft,q):!1)},_retainChildren:function(p,w,D,q){for(var nt=2*p;nt<2*p+2;nt++)for(var mt=2*w;mt<2*w+2;mt++){var Ft=new Tt(nt,mt);Ft.z=D+1;var ue=this._tileCoordsToKey(Ft),ve=this._tiles[ue];if(ve&&ve.active){ve.retain=!0;continue}else ve&&ve.loaded&&(ve.retain=!0);D+1<q&&this._retainChildren(nt,mt,D+1,q)}},_resetView:function(p){var w=p&&(p.pinch||p.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),w,w)},_animateZoom:function(p){this._setView(p.center,p.zoom,!0,p.noUpdate)},_clampZoom:function(p){var w=this.options;return w.minNativeZoom!==void 0&&p<w.minNativeZoom?w.minNativeZoom:w.maxNativeZoom!==void 0&&w.maxNativeZoom<p?w.maxNativeZoom:p},_setView:function(p,w,D,q){var nt=Math.round(w);this.options.maxZoom!==void 0&&nt>this.options.maxZoom||this.options.minZoom!==void 0&&nt<this.options.minZoom?nt=void 0:nt=this._clampZoom(nt);var mt=this.options.updateWhenZooming&&nt!==this._tileZoom;(!q||mt)&&(this._tileZoom=nt,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),nt!==void 0&&this._update(p),D||this._pruneTiles(),this._noPrune=!!D),this._setZoomTransforms(p,w)},_setZoomTransforms:function(p,w){for(var D in this._levels)this._setZoomTransform(this._levels[D],p,w)},_setZoomTransform:function(p,w,D){var q=this._map.getZoomScale(D,p.zoom),nt=p.origin.multiplyBy(q).subtract(this._map._getNewPixelOrigin(w,D)).round();se.any3d?Ss(p.el,nt,q):Di(p.el,nt)},_resetGrid:function(){var p=this._map,w=p.options.crs,D=this._tileSize=this.getTileSize(),q=this._tileZoom,nt=this._map.getPixelWorldBounds(this._tileZoom);nt&&(this._globalTileRange=this._pxBoundsToTileRange(nt)),this._wrapX=w.wrapLng&&!this.options.noWrap&&[Math.floor(p.project([0,w.wrapLng[0]],q).x/D.x),Math.ceil(p.project([0,w.wrapLng[1]],q).x/D.y)],this._wrapY=w.wrapLat&&!this.options.noWrap&&[Math.floor(p.project([w.wrapLat[0],0],q).y/D.x),Math.ceil(p.project([w.wrapLat[1],0],q).y/D.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(p){var w=this._map,D=w._animatingZoom?Math.max(w._animateToZoom,w.getZoom()):w.getZoom(),q=w.getZoomScale(D,this._tileZoom),nt=w.project(p,this._tileZoom).floor(),mt=w.getSize().divideBy(q*2);return new ft(nt.subtract(mt),nt.add(mt))},_update:function(p){var w=this._map;if(w){var D=this._clampZoom(w.getZoom());if(p===void 0&&(p=w.getCenter()),this._tileZoom!==void 0){var q=this._getTiledPixelBounds(p),nt=this._pxBoundsToTileRange(q),mt=nt.getCenter(),Ft=[],ue=this.options.keepBuffer,ve=new ft(nt.getBottomLeft().subtract([ue,-ue]),nt.getTopRight().add([ue,-ue]));if(!(isFinite(nt.min.x)&&isFinite(nt.min.y)&&isFinite(nt.max.x)&&isFinite(nt.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Le in this._tiles){var rn=this._tiles[Le].coords;(rn.z!==this._tileZoom||!ve.contains(new Tt(rn.x,rn.y)))&&(this._tiles[Le].current=!1)}if(Math.abs(D-this._tileZoom)>1){this._setView(p,D);return}for(var Mn=nt.min.y;Mn<=nt.max.y;Mn++)for(var ri=nt.min.x;ri<=nt.max.x;ri++){var Mi=new Tt(ri,Mn);if(Mi.z=this._tileZoom,!!this._isValidTile(Mi)){var vr=this._tiles[this._tileCoordsToKey(Mi)];vr?vr.current=!0:Ft.push(Mi)}}if(Ft.sort(function(Je,vi){return Je.distanceTo(mt)-vi.distanceTo(mt)}),Ft.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var sn=document.createDocumentFragment();for(ri=0;ri<Ft.length;ri++)this._addTile(Ft[ri],sn);this._level.el.appendChild(sn)}}}},_isValidTile:function(p){var w=this._map.options.crs;if(!w.infinite){var D=this._globalTileRange;if(!w.wrapLng&&(p.x<D.min.x||p.x>D.max.x)||!w.wrapLat&&(p.y<D.min.y||p.y>D.max.y))return!1}if(!this.options.bounds)return!0;var q=this._tileCoordsToBounds(p);return Xt(this.options.bounds).overlaps(q)},_keyToBounds:function(p){return this._tileCoordsToBounds(this._keyToTileCoords(p))},_tileCoordsToNwSe:function(p){var w=this._map,D=this.getTileSize(),q=p.scaleBy(D),nt=q.add(D),mt=w.unproject(q,p.z),Ft=w.unproject(nt,p.z);return[mt,Ft]},_tileCoordsToBounds:function(p){var w=this._tileCoordsToNwSe(p),D=new Lt(w[0],w[1]);return this.options.noWrap||(D=this._map.wrapLatLngBounds(D)),D},_tileCoordsToKey:function(p){return p.x+":"+p.y+":"+p.z},_keyToTileCoords:function(p){var w=p.split(":"),D=new Tt(+w[0],+w[1]);return D.z=+w[2],D},_removeTile:function(p){var w=this._tiles[p];w&&(An(w.el),delete this._tiles[p],this.fire("tileunload",{tile:w.el,coords:this._keyToTileCoords(p)}))},_initTile:function(p){Pn(p,"leaflet-tile");var w=this.getTileSize();p.style.width=w.x+"px",p.style.height=w.y+"px",p.onselectstart=E,p.onmousemove=E,se.ielt9&&this.options.opacity<1&&Hi(p,this.options.opacity)},_addTile:function(p,w){var D=this._getTilePos(p),q=this._tileCoordsToKey(p),nt=this.createTile(this._wrapCoords(p),c(this._tileReady,this,p));this._initTile(nt),this.createTile.length<2&&wt(c(this._tileReady,this,p,null,nt)),Di(nt,D),this._tiles[q]={el:nt,coords:p,current:!0},w.appendChild(nt),this.fire("tileloadstart",{tile:nt,coords:p})},_tileReady:function(p,w,D){w&&this.fire("tileerror",{error:w,tile:D,coords:p});var q=this._tileCoordsToKey(p);D=this._tiles[q],D&&(D.loaded=+new Date,this._map._fadeAnimated?(Hi(D.el,0),St(this._fadeFrame),this._fadeFrame=wt(this._updateOpacity,this)):(D.active=!0,this._pruneTiles()),w||(Pn(D.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:D.el,coords:p})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?wt(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(p){return p.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(p){var w=new Tt(this._wrapX?x(p.x,this._wrapX):p.x,this._wrapY?x(p.y,this._wrapY):p.y);return w.z=p.z,w},_pxBoundsToTileRange:function(p){var w=this.getTileSize();return new ft(p.min.unscaleBy(w).floor(),p.max.unscaleBy(w).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var p in this._tiles)if(!this._tiles[p].loaded)return!1;return!0}});function _h(p){return new Ol(p)}var ro=Ol.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(p,w){this._url=p,w=V(this,w),w.detectRetina&&se.retina&&w.maxZoom>0?(w.tileSize=Math.floor(w.tileSize/2),w.zoomReverse?(w.zoomOffset--,w.minZoom=Math.min(w.maxZoom,w.minZoom+1)):(w.zoomOffset++,w.maxZoom=Math.max(w.minZoom,w.maxZoom-1)),w.minZoom=Math.max(0,w.minZoom)):w.zoomReverse?w.minZoom=Math.min(w.maxZoom,w.minZoom):w.maxZoom=Math.max(w.minZoom,w.maxZoom),typeof w.subdomains=="string"&&(w.subdomains=w.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(p,w){return this._url===p&&w===void 0&&(w=!0),this._url=p,w||this.redraw(),this},createTile:function(p,w){var D=document.createElement("img");return Nn(D,"load",c(this._tileOnLoad,this,w,D)),Nn(D,"error",c(this._tileOnError,this,w,D)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(D.referrerPolicy=this.options.referrerPolicy),D.alt="",D.src=this.getTileUrl(p),D},getTileUrl:function(p){var w={r:se.retina?"@2x":"",s:this._getSubdomain(p),x:p.x,y:p.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var D=this._globalTileRange.max.y-p.y;this.options.tms&&(w.y=D),w["-y"]=D}return Y(this._url,r(w,this.options))},_tileOnLoad:function(p,w){se.ielt9?setTimeout(c(p,this,null,w),0):p(null,w)},_tileOnError:function(p,w,D){var q=this.options.errorTileUrl;q&&w.getAttribute("src")!==q&&(w.src=q),p(D,w)},_onTileRemove:function(p){p.tile.onload=null},_getZoomForUrl:function(){var p=this._tileZoom,w=this.options.maxZoom,D=this.options.zoomReverse,q=this.options.zoomOffset;return D&&(p=w-p),p+q},_getSubdomain:function(p){var w=Math.abs(p.x+p.y)%this.options.subdomains.length;return this.options.subdomains[w]},_abortLoading:function(){var p,w;for(p in this._tiles)if(this._tiles[p].coords.z!==this._tileZoom&&(w=this._tiles[p].el,w.onload=E,w.onerror=E,!w.complete)){w.src=J;var D=this._tiles[p].coords;An(w),delete this._tiles[p],this.fire("tileabort",{tile:w,coords:D})}},_removeTile:function(p){var w=this._tiles[p];if(w)return w.el.setAttribute("src",J),Ol.prototype._removeTile.call(this,p)},_tileReady:function(p,w,D){if(!(!this._map||D&&D.getAttribute("src")===J))return Ol.prototype._tileReady.call(this,p,w,D)}});function xa(p,w){return new ro(p,w)}var Cs=ro.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(p,w){this._url=p;var D=r({},this.defaultWmsParams);for(var q in w)q in this.options||(D[q]=w[q]);w=V(this,w);var nt=w.detectRetina&&se.retina?2:1,mt=this.getTileSize();D.width=mt.x*nt,D.height=mt.y*nt,this.wmsParams=D},onAdd:function(p){this._crs=this.options.crs||p.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var w=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[w]=this._crs.code,ro.prototype.onAdd.call(this,p)},getTileUrl:function(p){var w=this._tileCoordsToNwSe(p),D=this._crs,q=Mt(D.project(w[0]),D.project(w[1])),nt=q.min,mt=q.max,Ft=(this._wmsVersion>=1.3&&this._crs===nc?[nt.y,nt.x,mt.y,mt.x]:[nt.x,nt.y,mt.x,mt.y]).join(","),ue=ro.prototype.getTileUrl.call(this,p);return ue+$(this.wmsParams,ue,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ft},setParams:function(p,w){return r(this.wmsParams,p),w||this.redraw(),this}});function Qe(p,w){return new Cs(p,w)}ro.WMS=Cs,xa.wms=Qe;var ba=Ms.extend({options:{padding:.1},initialize:function(p){V(this,p),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Pn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var p={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(p.zoomanim=this._onAnimZoom),p},_onAnimZoom:function(p){this._updateTransform(p.center,p.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(p,w){var D=this._map.getZoomScale(w,this._zoom),q=this._map.getSize().multiplyBy(.5+this.options.padding),nt=this._map.project(this._center,w),mt=q.multiplyBy(-D).add(nt).subtract(this._map._getNewPixelOrigin(p,w));se.any3d?Ss(this._container,mt,D):Di(this._container,mt)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var p in this._layers)this._layers[p]._reset()},_onZoomEnd:function(){for(var p in this._layers)this._layers[p]._project()},_updatePaths:function(){for(var p in this._layers)this._layers[p]._update()},_update:function(){var p=this.options.padding,w=this._map.getSize(),D=this._map.containerPointToLayerPoint(w.multiplyBy(-p)).round();this._bounds=new ft(D,D.add(w.multiplyBy(1+p*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ao=ba.extend({options:{tolerance:0},getEvents:function(){var p=ba.prototype.getEvents.call(this);return p.viewprereset=this._onViewPreReset,p},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ba.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var p=this._container=document.createElement("canvas");Nn(p,"mousemove",this._onMouseMove,this),Nn(p,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Nn(p,"mouseout",this._handleMouseOut,this),p._leaflet_disable_events=!0,this._ctx=p.getContext("2d")},_destroyContainer:function(){St(this._redrawRequest),delete this._ctx,An(this._container),Ii(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var p;this._redrawBounds=null;for(var w in this._layers)p=this._layers[w],p._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ba.prototype._update.call(this);var p=this._bounds,w=this._container,D=p.getSize(),q=se.retina?2:1;Di(w,p.min),w.width=q*D.x,w.height=q*D.y,w.style.width=D.x+"px",w.style.height=D.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-p.min.x,-p.min.y),this.fire("update")}},_reset:function(){ba.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(p){this._updateDashArray(p),this._layers[g(p)]=p;var w=p._order={layer:p,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=w),this._drawLast=w,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(p){this._requestRedraw(p)},_removePath:function(p){var w=p._order,D=w.next,q=w.prev;D?D.prev=q:this._drawLast=q,q?q.next=D:this._drawFirst=D,delete p._order,delete this._layers[g(p)],this._requestRedraw(p)},_updatePath:function(p){this._extendRedrawBounds(p),p._project(),p._update(),this._requestRedraw(p)},_updateStyle:function(p){this._updateDashArray(p),this._requestRedraw(p)},_updateDashArray:function(p){if(typeof p.options.dashArray=="string"){var w=p.options.dashArray.split(/[, ]+/),D=[],q,nt;for(nt=0;nt<w.length;nt++){if(q=Number(w[nt]),isNaN(q))return;D.push(q)}p.options._dashArray=D}else p.options._dashArray=p.options.dashArray},_requestRedraw:function(p){this._map&&(this._extendRedrawBounds(p),this._redrawRequest=this._redrawRequest||wt(this._redraw,this))},_extendRedrawBounds:function(p){if(p._pxBounds){var w=(p.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ft,this._redrawBounds.extend(p._pxBounds.min.subtract([w,w])),this._redrawBounds.extend(p._pxBounds.max.add([w,w]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var p=this._redrawBounds;if(p){var w=p.getSize();this._ctx.clearRect(p.min.x,p.min.y,w.x,w.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var p,w=this._redrawBounds;if(this._ctx.save(),w){var D=w.getSize();this._ctx.beginPath(),this._ctx.rect(w.min.x,w.min.y,D.x,D.y),this._ctx.clip()}this._drawing=!0;for(var q=this._drawFirst;q;q=q.next)p=q.layer,(!w||p._pxBounds&&p._pxBounds.intersects(w))&&p._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(p,w){if(this._drawing){var D,q,nt,mt,Ft=p._parts,ue=Ft.length,ve=this._ctx;if(ue){for(ve.beginPath(),D=0;D<ue;D++){for(q=0,nt=Ft[D].length;q<nt;q++)mt=Ft[D][q],ve[q?"lineTo":"moveTo"](mt.x,mt.y);w&&ve.closePath()}this._fillStroke(ve,p)}}},_updateCircle:function(p){if(!(!this._drawing||p._empty())){var w=p._point,D=this._ctx,q=Math.max(Math.round(p._radius),1),nt=(Math.max(Math.round(p._radiusY),1)||q)/q;nt!==1&&(D.save(),D.scale(1,nt)),D.beginPath(),D.arc(w.x,w.y/nt,q,0,Math.PI*2,!1),nt!==1&&D.restore(),this._fillStroke(D,p)}},_fillStroke:function(p,w){var D=w.options;D.fill&&(p.globalAlpha=D.fillOpacity,p.fillStyle=D.fillColor||D.color,p.fill(D.fillRule||"evenodd")),D.stroke&&D.weight!==0&&(p.setLineDash&&p.setLineDash(w.options&&w.options._dashArray||[]),p.globalAlpha=D.opacity,p.lineWidth=D.weight,p.strokeStyle=D.color,p.lineCap=D.lineCap,p.lineJoin=D.lineJoin,p.stroke())},_onClick:function(p){for(var w=this._map.mouseEventToLayerPoint(p),D,q,nt=this._drawFirst;nt;nt=nt.next)D=nt.layer,D.options.interactive&&D._containsPoint(w)&&(!(p.type==="click"||p.type==="preclick")||!this._map._draggableMoved(D))&&(q=D);this._fireEvent(q?[q]:!1,p)},_onMouseMove:function(p){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var w=this._map.mouseEventToLayerPoint(p);this._handleMouseHover(p,w)}},_handleMouseOut:function(p){var w=this._hoveredLayer;w&&(zn(this._container,"leaflet-interactive"),this._fireEvent([w],p,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(p,w){if(!this._mouseHoverThrottled){for(var D,q,nt=this._drawFirst;nt;nt=nt.next)D=nt.layer,D.options.interactive&&D._containsPoint(w)&&(q=D);q!==this._hoveredLayer&&(this._handleMouseOut(p),q&&(Pn(this._container,"leaflet-interactive"),this._fireEvent([q],p,"mouseover"),this._hoveredLayer=q)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,p),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(p,w,D){this._map._fireDOMEvent(w,D||w.type,p)},_bringToFront:function(p){var w=p._order;if(w){var D=w.next,q=w.prev;if(D)D.prev=q;else return;q?q.next=D:D&&(this._drawFirst=D),w.prev=this._drawLast,this._drawLast.next=w,w.next=null,this._drawLast=w,this._requestRedraw(p)}},_bringToBack:function(p){var w=p._order;if(w){var D=w.next,q=w.prev;if(q)q.next=D;else return;D?D.prev=q:q&&(this._drawLast=q),w.prev=null,w.next=this._drawFirst,this._drawFirst.prev=w,this._drawFirst=w,this._requestRedraw(p)}}});function ko(p){return se.canvas?new ao(p):null}var ol=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(p){return document.createElement("<lvml:"+p+' class="lvml">')}}catch{}return function(p){return document.createElement("<"+p+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),en={_initContainer:function(){this._container=On("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ba.prototype._update.call(this),this.fire("update"))},_initPath:function(p){var w=p._container=ol("shape");Pn(w,"leaflet-vml-shape "+(this.options.className||"")),w.coordsize="1 1",p._path=ol("path"),w.appendChild(p._path),this._updateStyle(p),this._layers[g(p)]=p},_addPath:function(p){var w=p._container;this._container.appendChild(w),p.options.interactive&&p.addInteractiveTarget(w)},_removePath:function(p){var w=p._container;An(w),p.removeInteractiveTarget(w),delete this._layers[g(p)]},_updateStyle:function(p){var w=p._stroke,D=p._fill,q=p.options,nt=p._container;nt.stroked=!!q.stroke,nt.filled=!!q.fill,q.stroke?(w||(w=p._stroke=ol("stroke")),nt.appendChild(w),w.weight=q.weight+"px",w.color=q.color,w.opacity=q.opacity,q.dashArray?w.dashStyle=W(q.dashArray)?q.dashArray.join(" "):q.dashArray.replace(/( *, *)/g," "):w.dashStyle="",w.endcap=q.lineCap.replace("butt","flat"),w.joinstyle=q.lineJoin):w&&(nt.removeChild(w),p._stroke=null),q.fill?(D||(D=p._fill=ol("fill")),nt.appendChild(D),D.color=q.fillColor||q.color,D.opacity=q.fillOpacity):D&&(nt.removeChild(D),p._fill=null)},_updateCircle:function(p){var w=p._point.round(),D=Math.round(p._radius),q=Math.round(p._radiusY||D);this._setPath(p,p._empty()?"M0 0":"AL "+w.x+","+w.y+" "+D+","+q+" 0,"+65535*360)},_setPath:function(p,w){p._path.v=w},_bringToFront:function(p){tr(p._container)},_bringToBack:function(p){_i(p._container)}},$s=se.vml?ol:ln,Dl=ba.extend({_initContainer:function(){this._container=$s("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=$s("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){An(this._container),Ii(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ba.prototype._update.call(this);var p=this._bounds,w=p.getSize(),D=this._container;(!this._svgSize||!this._svgSize.equals(w))&&(this._svgSize=w,D.setAttribute("width",w.x),D.setAttribute("height",w.y)),Di(D,p.min),D.setAttribute("viewBox",[p.min.x,p.min.y,w.x,w.y].join(" ")),this.fire("update")}},_initPath:function(p){var w=p._path=$s("path");p.options.className&&Pn(w,p.options.className),p.options.interactive&&Pn(w,"leaflet-interactive"),this._updateStyle(p),this._layers[g(p)]=p},_addPath:function(p){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(p._path),p.addInteractiveTarget(p._path)},_removePath:function(p){An(p._path),p.removeInteractiveTarget(p._path),delete this._layers[g(p)]},_updatePath:function(p){p._project(),p._update()},_updateStyle:function(p){var w=p._path,D=p.options;w&&(D.stroke?(w.setAttribute("stroke",D.color),w.setAttribute("stroke-opacity",D.opacity),w.setAttribute("stroke-width",D.weight),w.setAttribute("stroke-linecap",D.lineCap),w.setAttribute("stroke-linejoin",D.lineJoin),D.dashArray?w.setAttribute("stroke-dasharray",D.dashArray):w.removeAttribute("stroke-dasharray"),D.dashOffset?w.setAttribute("stroke-dashoffset",D.dashOffset):w.removeAttribute("stroke-dashoffset")):w.setAttribute("stroke","none"),D.fill?(w.setAttribute("fill",D.fillColor||D.color),w.setAttribute("fill-opacity",D.fillOpacity),w.setAttribute("fill-rule",D.fillRule||"evenodd")):w.setAttribute("fill","none"))},_updatePoly:function(p,w){this._setPath(p,Xe(p._parts,w))},_updateCircle:function(p){var w=p._point,D=Math.max(Math.round(p._radius),1),q=Math.max(Math.round(p._radiusY),1)||D,nt="a"+D+","+q+" 0 1,0 ",mt=p._empty()?"M0 0":"M"+(w.x-D)+","+w.y+nt+D*2+",0 "+nt+-D*2+",0 ";this._setPath(p,mt)},_setPath:function(p,w){p._path.setAttribute("d",w)},_bringToFront:function(p){tr(p._path)},_bringToBack:function(p){_i(p._path)}});se.vml&&Dl.include(en);function uc(p){return se.svg||se.vml?new Dl(p):null}hi.include({getRenderer:function(p){var w=p.options.renderer||this._getPaneRenderer(p.options.pane)||this.options.renderer||this._renderer;return w||(w=this._renderer=this._createRenderer()),this.hasLayer(w)||this.addLayer(w),w},_getPaneRenderer:function(p){if(p==="overlayPane"||p===void 0)return!1;var w=this._paneRenderers[p];return w===void 0&&(w=this._createRenderer({pane:p}),this._paneRenderers[p]=w),w},_createRenderer:function(p){return this.options.preferCanvas&&ko(p)||uc(p)}});var ll=Wr.extend({initialize:function(p,w){Wr.prototype.initialize.call(this,this._boundsToLatLngs(p),w)},setBounds:function(p){return this.setLatLngs(this._boundsToLatLngs(p))},_boundsToLatLngs:function(p){return p=Xt(p),[p.getSouthWest(),p.getNorthWest(),p.getNorthEast(),p.getSouthEast()]}});function gf(p,w){return new ll(p,w)}Dl.create=$s,Dl.pointsToPath=Xe,Es.geometryToLayer=Xr,Es.coordsToLatLng=Pl,Es.coordsToLatLngs=Ao,Es.latLngToCoords=sc,Es.latLngsToCoords=Su,Es.getFeature=el,Es.asFeature=oc,hi.mergeOptions({boxZoom:!0});var Wa=So.extend({initialize:function(p){this._map=p,this._container=p._container,this._pane=p._panes.overlayPane,this._resetStateTimeout=0,p.on("unload",this._destroy,this)},addHooks:function(){Nn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ii(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){An(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(p){if(!p.shiftKey||p.which!==1&&p.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),At(),cn(),this._startPoint=this._map.mouseEventToContainerPoint(p),Nn(document,{contextmenu:Ya,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(p){this._moved||(this._moved=!0,this._box=On("div","leaflet-zoom-box",this._container),Pn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(p);var w=new ft(this._point,this._startPoint),D=w.getSize();Di(this._box,w.min),this._box.style.width=D.x+"px",this._box.style.height=D.y+"px"},_finish:function(){this._moved&&(An(this._box),zn(this._container,"leaflet-crosshair")),Zt(),Vn(),Ii(document,{contextmenu:Ya,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(p){if(!(p.which!==1&&p.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var w=new Lt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(w).fire("boxzoomend",{boxZoomBounds:w})}},_onKeyDown:function(p){p.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});hi.addInitHook("addHandler","boxZoom",Wa),hi.mergeOptions({doubleClickZoom:!0});var cc=So.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(p){var w=this._map,D=w.getZoom(),q=w.options.zoomDelta,nt=p.originalEvent.shiftKey?D-q:D+q;w.options.doubleClickZoom==="center"?w.setZoom(nt):w.setZoomAround(p.containerPoint,nt)}});hi.addInitHook("addHandler","doubleClickZoom",cc),hi.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Oo=So.extend({addHooks:function(){if(!this._draggable){var p=this._map;this._draggable=new no(p._mapPane,p._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),p.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),p.on("zoomend",this._onZoomEnd,this),p.whenReady(this._onZoomEnd,this))}Pn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zn(this._map._container,"leaflet-grab"),zn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var p=this._map;if(p._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var w=Xt(this._map.options.maxBounds);this._offsetLimit=Mt(this._map.latLngToContainerPoint(w.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(w.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;p.fire("movestart").fire("dragstart"),p.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(p){if(this._map.options.inertia){var w=this._lastTime=+new Date,D=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(D),this._times.push(w),this._prunePositions(w)}this._map.fire("move",p).fire("drag",p)},_prunePositions:function(p){for(;this._positions.length>1&&p-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var p=this._map.getSize().divideBy(2),w=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=w.subtract(p).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(p,w){return p-(p-w)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var p=this._draggable._newPos.subtract(this._draggable._startPos),w=this._offsetLimit;p.x<w.min.x&&(p.x=this._viscousLimit(p.x,w.min.x)),p.y<w.min.y&&(p.y=this._viscousLimit(p.y,w.min.y)),p.x>w.max.x&&(p.x=this._viscousLimit(p.x,w.max.x)),p.y>w.max.y&&(p.y=this._viscousLimit(p.y,w.max.y)),this._draggable._newPos=this._draggable._startPos.add(p)}},_onPreDragWrap:function(){var p=this._worldWidth,w=Math.round(p/2),D=this._initialWorldOffset,q=this._draggable._newPos.x,nt=(q-w+D)%p+w-D,mt=(q+w+D)%p-w-D,Ft=Math.abs(nt+D)<Math.abs(mt+D)?nt:mt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ft},_onDragEnd:function(p){var w=this._map,D=w.options,q=!D.inertia||p.noInertia||this._times.length<2;if(w.fire("dragend",p),q)w.fire("moveend");else{this._prunePositions(+new Date);var nt=this._lastPos.subtract(this._positions[0]),mt=(this._lastTime-this._times[0])/1e3,Ft=D.easeLinearity,ue=nt.multiplyBy(Ft/mt),ve=ue.distanceTo([0,0]),Le=Math.min(D.inertiaMaxSpeed,ve),rn=ue.multiplyBy(Le/ve),Mn=Le/(D.inertiaDeceleration*Ft),ri=rn.multiplyBy(-Mn/2).round();!ri.x&&!ri.y?w.fire("moveend"):(ri=w._limitOffset(ri,w.options.maxBounds),wt(function(){w.panBy(ri,{duration:Mn,easeLinearity:Ft,noMoveStart:!0,animate:!0})}))}}});hi.addInitHook("addHandler","dragging",Oo),hi.mergeOptions({keyboard:!0,keyboardPanDelta:80});var hc=So.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(p){this._map=p,this._setPanDelta(p.options.keyboardPanDelta),this._setZoomDelta(p.options.zoomDelta)},addHooks:function(){var p=this._map._container;p.tabIndex<=0&&(p.tabIndex="0"),Nn(p,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ii(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var p=document.body,w=document.documentElement,D=p.scrollTop||w.scrollTop,q=p.scrollLeft||w.scrollLeft;this._map._container.focus(),window.scrollTo(q,D)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(p){var w=this._panKeys={},D=this.keyCodes,q,nt;for(q=0,nt=D.left.length;q<nt;q++)w[D.left[q]]=[-1*p,0];for(q=0,nt=D.right.length;q<nt;q++)w[D.right[q]]=[p,0];for(q=0,nt=D.down.length;q<nt;q++)w[D.down[q]]=[0,p];for(q=0,nt=D.up.length;q<nt;q++)w[D.up[q]]=[0,-1*p]},_setZoomDelta:function(p){var w=this._zoomKeys={},D=this.keyCodes,q,nt;for(q=0,nt=D.zoomIn.length;q<nt;q++)w[D.zoomIn[q]]=p;for(q=0,nt=D.zoomOut.length;q<nt;q++)w[D.zoomOut[q]]=-p},_addHooks:function(){Nn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ii(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(p){if(!(p.altKey||p.ctrlKey||p.metaKey)){var w=p.keyCode,D=this._map,q;if(w in this._panKeys){if(!D._panAnim||!D._panAnim._inProgress)if(q=this._panKeys[w],p.shiftKey&&(q=$t(q).multiplyBy(3)),D.options.maxBounds&&(q=D._limitOffset($t(q),D.options.maxBounds)),D.options.worldCopyJump){var nt=D.wrapLatLng(D.unproject(D.project(D.getCenter()).add(q)));D.panTo(nt)}else D.panBy(q)}else if(w in this._zoomKeys)D.setZoom(D.getZoom()+(p.shiftKey?3:1)*this._zoomKeys[w]);else if(w===27&&D._popup&&D._popup.options.closeOnEscapeKey)D.closePopup();else return;Ya(p)}}});hi.addInitHook("addHandler","keyboard",hc),hi.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var eu=So.extend({addHooks:function(){Nn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ii(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(p){var w=Wi(p),D=this._map.options.wheelDebounceTime;this._delta+=w,this._lastMousePos=this._map.mouseEventToContainerPoint(p),this._startTime||(this._startTime=+new Date);var q=Math.max(D-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),q),Ya(p)},_performZoom:function(){var p=this._map,w=p.getZoom(),D=this._map.options.zoomSnap||0;p._stop();var q=this._delta/(this._map.options.wheelPxPerZoomLevel*4),nt=4*Math.log(2/(1+Math.exp(-Math.abs(q))))/Math.LN2,mt=D?Math.ceil(nt/D)*D:nt,Ft=p._limitZoom(w+(this._delta>0?mt:-mt))-w;this._delta=0,this._startTime=null,Ft&&(p.options.scrollWheelZoom==="center"?p.setZoom(w+Ft):p.setZoomAround(this._lastMousePos,w+Ft))}});hi.addInitHook("addHandler","scrollWheelZoom",eu);var ul=600;hi.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var Mu=So.extend({addHooks:function(){Nn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ii(this._map._container,"touchstart",this._onDown,this)},_onDown:function(p){if(clearTimeout(this._holdTimeout),p.touches.length===1){var w=p.touches[0];this._startPos=this._newPos=new Tt(w.clientX,w.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Nn(document,"touchend",or),Nn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",w))},this),ul),Nn(document,"touchend touchcancel contextmenu",this._cancel,this),Nn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function p(){Ii(document,"touchend",or),Ii(document,"touchend touchcancel",p)},_cancel:function(){clearTimeout(this._holdTimeout),Ii(document,"touchend touchcancel contextmenu",this._cancel,this),Ii(document,"touchmove",this._onMove,this)},_onMove:function(p){var w=p.touches[0];this._newPos=new Tt(w.clientX,w.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(p,w){var D=new MouseEvent(p,{bubbles:!0,cancelable:!0,view:window,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY});D._simulated=!0,w.target.dispatchEvent(D)}});hi.addInitHook("addHandler","tapHold",Mu),hi.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var La=So.extend({addHooks:function(){Pn(this._map._container,"leaflet-touch-zoom"),Nn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zn(this._map._container,"leaflet-touch-zoom"),Ii(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(p){var w=this._map;if(!(!p.touches||p.touches.length!==2||w._animatingZoom||this._zooming)){var D=w.mouseEventToContainerPoint(p.touches[0]),q=w.mouseEventToContainerPoint(p.touches[1]);this._centerPoint=w.getSize()._divideBy(2),this._startLatLng=w.containerPointToLatLng(this._centerPoint),w.options.touchZoom!=="center"&&(this._pinchStartLatLng=w.containerPointToLatLng(D.add(q)._divideBy(2))),this._startDist=D.distanceTo(q),this._startZoom=w.getZoom(),this._moved=!1,this._zooming=!0,w._stop(),Nn(document,"touchmove",this._onTouchMove,this),Nn(document,"touchend touchcancel",this._onTouchEnd,this),or(p)}},_onTouchMove:function(p){if(!(!p.touches||p.touches.length!==2||!this._zooming)){var w=this._map,D=w.mouseEventToContainerPoint(p.touches[0]),q=w.mouseEventToContainerPoint(p.touches[1]),nt=D.distanceTo(q)/this._startDist;if(this._zoom=w.getScaleZoom(nt,this._startZoom),!w.options.bounceAtZoomLimits&&(this._zoom<w.getMinZoom()&&nt<1||this._zoom>w.getMaxZoom()&&nt>1)&&(this._zoom=w._limitZoom(this._zoom)),w.options.touchZoom==="center"){if(this._center=this._startLatLng,nt===1)return}else{var mt=D._add(q)._divideBy(2)._subtract(this._centerPoint);if(nt===1&&mt.x===0&&mt.y===0)return;this._center=w.unproject(w.project(this._pinchStartLatLng,this._zoom).subtract(mt),this._zoom)}this._moved||(w._moveStart(!0,!1),this._moved=!0),St(this._animRequest);var Ft=c(w._move,w,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=wt(Ft,this,!0),or(p)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,St(this._animRequest),Ii(document,"touchmove",this._onTouchMove,this),Ii(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});hi.addInitHook("addHandler","touchZoom",La),hi.BoxZoom=Wa,hi.DoubleClickZoom=cc,hi.Drag=Oo,hi.Keyboard=hc,hi.ScrollWheelZoom=eu,hi.TapHold=Mu,hi.TouchZoom=La,n.Bounds=ft,n.Browser=se,n.CRS=Me,n.Canvas=ao,n.Circle=Ql,n.CircleMarker=Eo,n.Class=pe,n.Control=Ia,n.DivIcon=Po,n.DivOverlay=va,n.DomEvent=Gl,n.DomUtil=Zl,n.Draggable=no,n.Evented=Ct,n.FeatureGroup=cs,n.GeoJSON=Es,n.GridLayer=Ol,n.Handler=So,n.Icon=Us,n.ImageOverlay=ca,n.LatLng=re,n.LatLngBounds=Lt,n.Layer=Ms,n.LayerGroup=Mo,n.LineUtil=Qu,n.Map=hi,n.Marker=Kl,n.Mixin=fd,n.Path=io,n.Point=Tt,n.PolyUtil=Ic,n.Polygon=Wr,n.Polyline=Ti,n.Popup=za,n.PosAnimation=Jo,n.Projection=tc,n.Rectangle=ll,n.Renderer=ba,n.SVG=Dl,n.SVGOverlay=lc,n.TileLayer=ro,n.Tooltip=kl,n.Transformation=Ee,n.Util=le,n.VideoOverlay=rl,n.bind=c,n.bounds=Mt,n.canvas=ko,n.circle=yh,n.circleMarker=ac,n.control=eo,n.divIcon=pd,n.extend=r,n.featureGroup=mf,n.geoJSON=As,n.geoJson=il,n.gridLayer=_h,n.icon=rc,n.imageOverlay=Tu,n.latLng=ce,n.latLngBounds=Xt,n.layerGroup=ic,n.map=Wu,n.marker=gh,n.point=$t,n.polygon=wu,n.polyline=Jl,n.popup=Co,n.rectangle=gf,n.setOptions=V,n.stamp=g,n.svg=uc,n.svgOverlay=al,n.tileLayer=xa,n.tooltip=sl,n.transformation=de,n.version=i,n.videoOverlay=tu;var Do=window.L;n.noConflict=function(){return window.L=Do,this},window.L=n}))})(ky,ky.exports)),ky.exports}var g_=l4();const XM=yu(g_);function u4(t){return t.split(" ").filter(Boolean)}function c4(t,e){for(const n of u4(e))g_.DomUtil.addClass(t,n)}function wD(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function SD(t,e){return e==null?function(i,r){const s=Z.useRef(void 0);return s.current||(s.current=t(i,r)),s}:function(i,r){const s=Z.useRef(void 0);s.current||(s.current=t(i,r));const c=Z.useRef(i),{instance:a}=s.current;return Z.useEffect(function(){c.current!==i&&(e(a,i,c.current),c.current=i)},[a,i,e]),s}}function TD(t,e){Z.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function h4(t){return function(n){const i=Lx(),r=t(x2(n,i),i);return e4(i.map,n.attribution),bD(r.current,n.eventHandlers),TD(r.current,i),r}}function f4(t,e){const n=Z.useRef(void 0);Z.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function d4(t){return function(n){const i=Lx(),r=t(x2(n,i),i);return bD(r.current,n.eventHandlers),TD(r.current,i),f4(r.current,n),r}}function p4(t,e){const n=SD(t,e),i=d4(n);return a4(i)}function m4(t,e){const n=SD(t,e),i=h4(n);return s4(i)}function g4(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function b2(){return Lx().map}function Kb(t,e){const n=b2();return Z.useEffect(function(){return n.on(t,e),function(){n.off(t,e)}},[n,t,e]),n}const Qb=p4(function({data:e,...n},i){const r=new g_.GeoJSON(e,n);return wD(r,r4(i,{overlayContainer:r}))},function(e,n,i){n.style!==i.style&&(n.style==null?e.resetStyle():e.setStyle(n.style))});function y4({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:s,placeholder:c,style:a,whenReady:g,zoom:y,...x},E){const[O]=Z.useState({className:r,id:s,style:a}),[I,F]=Z.useState(null),V=Z.useRef(void 0);Z.useImperativeHandle(E,()=>I?.map??null,[I]);const $=Z.useCallback(Y=>{if(Y!==null&&!V.current){const W=new g_.Map(Y,x);V.current=W,n!=null&&y!=null?W.setView(n,y):t!=null&&W.fitBounds(t,e),g!=null&&W.whenReady(g),F(i4(W))}},[]);Z.useEffect(()=>()=>{I?.map.remove()},[I]);const K=I?Hy.createElement(zx,{value:I},i):c??null;return Hy.createElement("div",{...O,ref:$},K)}const _4=Z.forwardRef(y4),v4=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"];function KM(t,e){const{[e]:n,...i}=t;return i}function x4(t,e,n){if(v4.indexOf(t)!==-1)throw new Error(`You must use a unique name for a pane that is not a default Leaflet pane: ${t}`);if(n.map.getPane(t)!=null)throw new Error(`A pane with this name already exists: ${t}`);const i=e.pane??n.pane,r=i?n.map.getPane(i):void 0,s=n.map.createPane(t,r);if(e.className!=null&&c4(s,e.className),e.style!=null)for(const c of Object.keys(e.style))s.style[c]=e.style[c];return s}function b4(t,e){const[n]=Z.useState(t.name),[i,r]=Z.useState(null);Z.useImperativeHandle(e,()=>i,[i]);const s=Lx(),c=Z.useMemo(()=>({...s,pane:n}),[s]);return Z.useEffect(()=>(r(x4(n,t,s)),function(){s.map.getPane(n)?.remove?.(),s.map._panes!=null&&(s.map._panes=KM(s.map._panes,n),s.map._paneRenderers=KM(s.map._paneRenderers,n))}),[]),t.children!=null&&i!=null?m_.createPortal(Hy.createElement(zx,{value:c},t.children),i):null}const Jb=Z.forwardRef(b4),w4=m4(function({url:e,...n},i){const r=new g_.TileLayer(e,x2(n,i));return wD(r,i)},function(e,n,i){g4(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});function MD(t,e,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function nS(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!QM(t[0])||!QM(t[1]))throw new Error("coordinates must contain numbers");return MD({type:"Point",coordinates:t},e,n)}function S4(t,e,n={}){for(const r of t){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<r[r.length-1].length;s++)if(r[r.length-1][s]!==r[0][s])throw new Error("First and last Position are not equivalent.")}return MD({type:"Polygon",coordinates:t},e,n)}function QM(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function Rx(t,e,n){if(t!==null)for(var i,r,s,c,a,g,y,x=0,E=0,O,I=t.type,F=I==="FeatureCollection",V=I==="Feature",$=F?t.features.length:1,K=0;K<$;K++){y=F?t.features[K].geometry:V?t.geometry:t,O=y?y.type==="GeometryCollection":!1,a=O?y.geometries.length:1;for(var Y=0;Y<a;Y++){var W=0,X=0;if(c=O?y.geometries[Y]:y,c!==null){g=c.coordinates;var J=c.type;switch(x=n&&(J==="Polygon"||J==="MultiPolygon")?1:0,J){case null:break;case"Point":if(e(g,E,K,W,X)===!1)return!1;E++,W++;break;case"LineString":case"MultiPoint":for(i=0;i<g.length;i++){if(e(g[i],E,K,W,X)===!1)return!1;E++,J==="MultiPoint"&&W++}J==="LineString"&&W++;break;case"Polygon":case"MultiLineString":for(i=0;i<g.length;i++){for(r=0;r<g[i].length-x;r++){if(e(g[i][r],E,K,W,X)===!1)return!1;E++}J==="MultiLineString"&&W++,J==="Polygon"&&X++}J==="Polygon"&&W++;break;case"MultiPolygon":for(i=0;i<g.length;i++){for(X=0,r=0;r<g[i].length;r++){for(s=0;s<g[i][r].length-x;s++){if(e(g[i][r][s],E,K,W,X)===!1)return!1;E++}X++}W++}break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(Rx(c.geometries[i],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var qv={exports:{}},E0={exports:{}},T4=E0.exports,JM;function M4(){return JM||(JM=1,(function(t,e){(function(n,i){t.exports=i()})(T4,function(){function n(Y,W,X,J,st){(function ct(it,ut,xt,wt,St){for(;wt>xt;){if(wt-xt>600){var le=wt-xt+1,pe=ut-xt+1,Te=Math.log(le),Nt=.5*Math.exp(2*Te/3),Ct=.5*Math.sqrt(Te*Nt*(le-Nt)/le)*(pe-le/2<0?-1:1),Tt=Math.max(xt,Math.floor(ut-pe*Nt/le+Ct)),Bt=Math.min(wt,Math.floor(ut+(le-pe)*Nt/le+Ct));ct(it,ut,Tt,Bt,St)}var $t=it[ut],ft=xt,Mt=wt;for(i(it,xt,ut),St(it[wt],$t)>0&&i(it,xt,wt);ft<Mt;){for(i(it,ft,Mt),ft++,Mt--;St(it[ft],$t)<0;)ft++;for(;St(it[Mt],$t)>0;)Mt--}St(it[xt],$t)===0?i(it,xt,Mt):i(it,++Mt,wt),Mt<=ut&&(xt=Mt+1),ut<=Mt&&(wt=Mt-1)}})(Y,W,X||0,J||Y.length-1,st||r)}function i(Y,W,X){var J=Y[W];Y[W]=Y[X],Y[X]=J}function r(Y,W){return Y<W?-1:Y>W?1:0}var s=function(Y){Y===void 0&&(Y=9),this._maxEntries=Math.max(4,Y),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function c(Y,W,X){if(!X)return W.indexOf(Y);for(var J=0;J<W.length;J++)if(X(Y,W[J]))return J;return-1}function a(Y,W){g(Y,0,Y.children.length,W,Y)}function g(Y,W,X,J,st){st||(st=$(null)),st.minX=1/0,st.minY=1/0,st.maxX=-1/0,st.maxY=-1/0;for(var ct=W;ct<X;ct++){var it=Y.children[ct];y(st,Y.leaf?J(it):it)}return st}function y(Y,W){return Y.minX=Math.min(Y.minX,W.minX),Y.minY=Math.min(Y.minY,W.minY),Y.maxX=Math.max(Y.maxX,W.maxX),Y.maxY=Math.max(Y.maxY,W.maxY),Y}function x(Y,W){return Y.minX-W.minX}function E(Y,W){return Y.minY-W.minY}function O(Y){return(Y.maxX-Y.minX)*(Y.maxY-Y.minY)}function I(Y){return Y.maxX-Y.minX+(Y.maxY-Y.minY)}function F(Y,W){return Y.minX<=W.minX&&Y.minY<=W.minY&&W.maxX<=Y.maxX&&W.maxY<=Y.maxY}function V(Y,W){return W.minX<=Y.maxX&&W.minY<=Y.maxY&&W.maxX>=Y.minX&&W.maxY>=Y.minY}function $(Y){return{children:Y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function K(Y,W,X,J,st){for(var ct=[W,X];ct.length;)if(!((X=ct.pop())-(W=ct.pop())<=J)){var it=W+Math.ceil((X-W)/J/2)*J;n(Y,it,W,X,st),ct.push(W,it,it,X)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(Y){var W=this.data,X=[];if(!V(Y,W))return X;for(var J=this.toBBox,st=[];W;){for(var ct=0;ct<W.children.length;ct++){var it=W.children[ct],ut=W.leaf?J(it):it;V(Y,ut)&&(W.leaf?X.push(it):F(Y,ut)?this._all(it,X):st.push(it))}W=st.pop()}return X},s.prototype.collides=function(Y){var W=this.data;if(!V(Y,W))return!1;for(var X=[];W;){for(var J=0;J<W.children.length;J++){var st=W.children[J],ct=W.leaf?this.toBBox(st):st;if(V(Y,ct)){if(W.leaf||F(Y,ct))return!0;X.push(st)}}W=X.pop()}return!1},s.prototype.load=function(Y){if(!Y||!Y.length)return this;if(Y.length<this._minEntries){for(var W=0;W<Y.length;W++)this.insert(Y[W]);return this}var X=this._build(Y.slice(),0,Y.length-1,0);if(this.data.children.length)if(this.data.height===X.height)this._splitRoot(this.data,X);else{if(this.data.height<X.height){var J=this.data;this.data=X,X=J}this._insert(X,this.data.height-X.height-1,!0)}else this.data=X;return this},s.prototype.insert=function(Y){return Y&&this._insert(Y,this.data.height-1),this},s.prototype.clear=function(){return this.data=$([]),this},s.prototype.remove=function(Y,W){if(!Y)return this;for(var X,J,st,ct=this.data,it=this.toBBox(Y),ut=[],xt=[];ct||ut.length;){if(ct||(ct=ut.pop(),J=ut[ut.length-1],X=xt.pop(),st=!0),ct.leaf){var wt=c(Y,ct.children,W);if(wt!==-1)return ct.children.splice(wt,1),ut.push(ct),this._condense(ut),this}st||ct.leaf||!F(ct,it)?J?(X++,ct=J.children[X],st=!1):ct=null:(ut.push(ct),xt.push(X),X=0,J=ct,ct=ct.children[0])}return this},s.prototype.toBBox=function(Y){return Y},s.prototype.compareMinX=function(Y,W){return Y.minX-W.minX},s.prototype.compareMinY=function(Y,W){return Y.minY-W.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(Y){return this.data=Y,this},s.prototype._all=function(Y,W){for(var X=[];Y;)Y.leaf?W.push.apply(W,Y.children):X.push.apply(X,Y.children),Y=X.pop();return W},s.prototype._build=function(Y,W,X,J){var st,ct=X-W+1,it=this._maxEntries;if(ct<=it)return a(st=$(Y.slice(W,X+1)),this.toBBox),st;J||(J=Math.ceil(Math.log(ct)/Math.log(it)),it=Math.ceil(ct/Math.pow(it,J-1))),(st=$([])).leaf=!1,st.height=J;var ut=Math.ceil(ct/it),xt=ut*Math.ceil(Math.sqrt(it));K(Y,W,X,xt,this.compareMinX);for(var wt=W;wt<=X;wt+=xt){var St=Math.min(wt+xt-1,X);K(Y,wt,St,ut,this.compareMinY);for(var le=wt;le<=St;le+=ut){var pe=Math.min(le+ut-1,St);st.children.push(this._build(Y,le,pe,J-1))}}return a(st,this.toBBox),st},s.prototype._chooseSubtree=function(Y,W,X,J){for(;J.push(W),!W.leaf&&J.length-1!==X;){for(var st=1/0,ct=1/0,it=void 0,ut=0;ut<W.children.length;ut++){var xt=W.children[ut],wt=O(xt),St=(le=Y,pe=xt,(Math.max(pe.maxX,le.maxX)-Math.min(pe.minX,le.minX))*(Math.max(pe.maxY,le.maxY)-Math.min(pe.minY,le.minY))-wt);St<ct?(ct=St,st=wt<st?wt:st,it=xt):St===ct&&wt<st&&(st=wt,it=xt)}W=it||W.children[0]}var le,pe;return W},s.prototype._insert=function(Y,W,X){var J=X?Y:this.toBBox(Y),st=[],ct=this._chooseSubtree(J,this.data,W,st);for(ct.children.push(Y),y(ct,J);W>=0&&st[W].children.length>this._maxEntries;)this._split(st,W),W--;this._adjustParentBBoxes(J,st,W)},s.prototype._split=function(Y,W){var X=Y[W],J=X.children.length,st=this._minEntries;this._chooseSplitAxis(X,st,J);var ct=this._chooseSplitIndex(X,st,J),it=$(X.children.splice(ct,X.children.length-ct));it.height=X.height,it.leaf=X.leaf,a(X,this.toBBox),a(it,this.toBBox),W?Y[W-1].children.push(it):this._splitRoot(X,it)},s.prototype._splitRoot=function(Y,W){this.data=$([Y,W]),this.data.height=Y.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(Y,W,X){for(var J,st,ct,it,ut,xt,wt,St=1/0,le=1/0,pe=W;pe<=X-W;pe++){var Te=g(Y,0,pe,this.toBBox),Nt=g(Y,pe,X,this.toBBox),Ct=(st=Te,ct=Nt,it=void 0,ut=void 0,xt=void 0,wt=void 0,it=Math.max(st.minX,ct.minX),ut=Math.max(st.minY,ct.minY),xt=Math.min(st.maxX,ct.maxX),wt=Math.min(st.maxY,ct.maxY),Math.max(0,xt-it)*Math.max(0,wt-ut)),Tt=O(Te)+O(Nt);Ct<St?(St=Ct,J=pe,le=Tt<le?Tt:le):Ct===St&&Tt<le&&(le=Tt,J=pe)}return J||X-W},s.prototype._chooseSplitAxis=function(Y,W,X){var J=Y.leaf?this.compareMinX:x,st=Y.leaf?this.compareMinY:E;this._allDistMargin(Y,W,X,J)<this._allDistMargin(Y,W,X,st)&&Y.children.sort(J)},s.prototype._allDistMargin=function(Y,W,X,J){Y.children.sort(J);for(var st=this.toBBox,ct=g(Y,0,W,st),it=g(Y,X-W,X,st),ut=I(ct)+I(it),xt=W;xt<X-W;xt++){var wt=Y.children[xt];y(ct,Y.leaf?st(wt):wt),ut+=I(ct)}for(var St=X-W-1;St>=W;St--){var le=Y.children[St];y(it,Y.leaf?st(le):le),ut+=I(it)}return ut},s.prototype._adjustParentBBoxes=function(Y,W,X){for(var J=X;J>=0;J--)y(W[J],Y)},s.prototype._condense=function(Y){for(var W=Y.length-1,X=void 0;W>=0;W--)Y[W].children.length===0?W>0?(X=Y[W-1].children).splice(X.indexOf(Y[W]),1):this.clear():a(Y[W],this.toBBox)},s})})(E0)),E0.exports}class E4{constructor(e=[],n=A4){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:i}=this,r=n[e];for(;e>0;){const s=e-1>>1,c=n[s];if(i(r,c)>=0)break;n[e]=c,e=s}n[e]=r}_down(e){const{data:n,compare:i}=this,r=this.length>>1,s=n[e];for(;e<r;){let c=(e<<1)+1,a=n[c];const g=c+1;if(g<this.length&&i(n[g],a)<0&&(c=g,a=n[g]),i(a,s)>=0)break;n[e]=a,e=c}n[e]=s}}function A4(t,e){return t<e?-1:t>e?1:0}const C4=Object.freeze(Object.defineProperty({__proto__:null,default:E4},Symbol.toStringTag,{value:"Module"})),P4=_B(C4);var hy={exports:{}},t1,tE;function k4(){return tE||(tE=1,t1=function(e,n,i,r){var s=e[0],c=e[1],a=!1;i===void 0&&(i=0),r===void 0&&(r=n.length);for(var g=(r-i)/2,y=0,x=g-1;y<g;x=y++){var E=n[i+y*2+0],O=n[i+y*2+1],I=n[i+x*2+0],F=n[i+x*2+1],V=O>c!=F>c&&s<(I-E)*(c-O)/(F-O)+E;V&&(a=!a)}return a}),t1}var e1,eE;function O4(){return eE||(eE=1,e1=function(e,n,i,r){var s=e[0],c=e[1],a=!1;i===void 0&&(i=0),r===void 0&&(r=n.length);for(var g=r-i,y=0,x=g-1;y<g;x=y++){var E=n[y+i][0],O=n[y+i][1],I=n[x+i][0],F=n[x+i][1],V=O>c!=F>c&&s<(I-E)*(c-O)/(F-O)+E;V&&(a=!a)}return a}),e1}var nE;function D4(){if(nE)return hy.exports;nE=1;var t=k4(),e=O4();return hy.exports=function(i,r,s,c){return r.length>0&&Array.isArray(r[0])?e(i,r,s,c):t(i,r,s,c)},hy.exports.nested=e,hy.exports.flat=t,hy.exports}var Oy={exports:{}},I4=Oy.exports,iE;function z4(){return iE||(iE=1,(function(t,e){(function(n,i){i(e)})(I4,function(n){const r=33306690738754706e-32;function s(V,$,K,Y,W){let X,J,st,ct,it=$[0],ut=Y[0],xt=0,wt=0;ut>it==ut>-it?(X=it,it=$[++xt]):(X=ut,ut=Y[++wt]);let St=0;if(xt<V&&wt<K)for(ut>it==ut>-it?(st=X-((J=it+X)-it),it=$[++xt]):(st=X-((J=ut+X)-ut),ut=Y[++wt]),X=J,st!==0&&(W[St++]=st);xt<V&&wt<K;)ut>it==ut>-it?(st=X-((J=X+it)-(ct=J-X))+(it-ct),it=$[++xt]):(st=X-((J=X+ut)-(ct=J-X))+(ut-ct),ut=Y[++wt]),X=J,st!==0&&(W[St++]=st);for(;xt<V;)st=X-((J=X+it)-(ct=J-X))+(it-ct),it=$[++xt],X=J,st!==0&&(W[St++]=st);for(;wt<K;)st=X-((J=X+ut)-(ct=J-X))+(ut-ct),ut=Y[++wt],X=J,st!==0&&(W[St++]=st);return X===0&&St!==0||(W[St++]=X),St}function c(V){return new Float64Array(V)}const a=33306690738754716e-32,g=22204460492503146e-32,y=11093356479670487e-47,x=c(4),E=c(8),O=c(12),I=c(16),F=c(4);n.orient2d=function(V,$,K,Y,W,X){const J=($-X)*(K-W),st=(V-W)*(Y-X),ct=J-st;if(J===0||st===0||J>0!=st>0)return ct;const it=Math.abs(J+st);return Math.abs(ct)>=a*it?ct:-(function(ut,xt,wt,St,le,pe,Te){let Nt,Ct,Tt,Bt,$t,ft,Mt,Lt,Xt,re,ce,Me,Ne,Gt,Ce,Ee,de,on;const Be=ut-le,ln=wt-le,Xe=xt-pe,Sn=St-pe;$t=(Ce=(Lt=Be-(Mt=(ft=134217729*Be)-(ft-Be)))*(re=Sn-(Xt=(ft=134217729*Sn)-(ft-Sn)))-((Gt=Be*Sn)-Mt*Xt-Lt*Xt-Mt*re))-(ce=Ce-(de=(Lt=Xe-(Mt=(ft=134217729*Xe)-(ft-Xe)))*(re=ln-(Xt=(ft=134217729*ln)-(ft-ln)))-((Ee=Xe*ln)-Mt*Xt-Lt*Xt-Mt*re))),x[0]=Ce-(ce+$t)+($t-de),$t=(Ne=Gt-((Me=Gt+ce)-($t=Me-Gt))+(ce-$t))-(ce=Ne-Ee),x[1]=Ne-(ce+$t)+($t-Ee),$t=(on=Me+ce)-Me,x[2]=Me-(on-$t)+(ce-$t),x[3]=on;let hn=(function(ni,fn){let Qi=fn[0];for(let mi=1;mi<ni;mi++)Qi+=fn[mi];return Qi})(4,x),Rn=g*Te;if(hn>=Rn||-hn>=Rn||(Nt=ut-(Be+($t=ut-Be))+($t-le),Tt=wt-(ln+($t=wt-ln))+($t-le),Ct=xt-(Xe+($t=xt-Xe))+($t-pe),Bt=St-(Sn+($t=St-Sn))+($t-pe),Nt===0&&Ct===0&&Tt===0&&Bt===0)||(Rn=y*Te+r*Math.abs(hn),(hn+=Be*Bt+Sn*Nt-(Xe*Tt+ln*Ct))>=Rn||-hn>=Rn))return hn;$t=(Ce=(Lt=Nt-(Mt=(ft=134217729*Nt)-(ft-Nt)))*(re=Sn-(Xt=(ft=134217729*Sn)-(ft-Sn)))-((Gt=Nt*Sn)-Mt*Xt-Lt*Xt-Mt*re))-(ce=Ce-(de=(Lt=Ct-(Mt=(ft=134217729*Ct)-(ft-Ct)))*(re=ln-(Xt=(ft=134217729*ln)-(ft-ln)))-((Ee=Ct*ln)-Mt*Xt-Lt*Xt-Mt*re))),F[0]=Ce-(ce+$t)+($t-de),$t=(Ne=Gt-((Me=Gt+ce)-($t=Me-Gt))+(ce-$t))-(ce=Ne-Ee),F[1]=Ne-(ce+$t)+($t-Ee),$t=(on=Me+ce)-Me,F[2]=Me-(on-$t)+(ce-$t),F[3]=on;const ge=s(4,x,4,F,E);$t=(Ce=(Lt=Be-(Mt=(ft=134217729*Be)-(ft-Be)))*(re=Bt-(Xt=(ft=134217729*Bt)-(ft-Bt)))-((Gt=Be*Bt)-Mt*Xt-Lt*Xt-Mt*re))-(ce=Ce-(de=(Lt=Xe-(Mt=(ft=134217729*Xe)-(ft-Xe)))*(re=Tt-(Xt=(ft=134217729*Tt)-(ft-Tt)))-((Ee=Xe*Tt)-Mt*Xt-Lt*Xt-Mt*re))),F[0]=Ce-(ce+$t)+($t-de),$t=(Ne=Gt-((Me=Gt+ce)-($t=Me-Gt))+(ce-$t))-(ce=Ne-Ee),F[1]=Ne-(ce+$t)+($t-Ee),$t=(on=Me+ce)-Me,F[2]=Me-(on-$t)+(ce-$t),F[3]=on;const Gn=s(ge,E,4,F,O);$t=(Ce=(Lt=Nt-(Mt=(ft=134217729*Nt)-(ft-Nt)))*(re=Bt-(Xt=(ft=134217729*Bt)-(ft-Bt)))-((Gt=Nt*Bt)-Mt*Xt-Lt*Xt-Mt*re))-(ce=Ce-(de=(Lt=Ct-(Mt=(ft=134217729*Ct)-(ft-Ct)))*(re=Tt-(Xt=(ft=134217729*Tt)-(ft-Tt)))-((Ee=Ct*Tt)-Mt*Xt-Lt*Xt-Mt*re))),F[0]=Ce-(ce+$t)+($t-de),$t=(Ne=Gt-((Me=Gt+ce)-($t=Me-Gt))+(ce-$t))-(ce=Ne-Ee),F[1]=Ne-(ce+$t)+($t-Ee),$t=(on=Me+ce)-Me,F[2]=Me-(on-$t)+(ce-$t),F[3]=on;const $i=s(Gn,O,4,F,I);return I[$i-1]})(V,$,K,Y,W,X,it)},n.orient2dfast=function(V,$,K,Y,W,X){return($-X)*(K-W)-(V-W)*(Y-X)},Object.defineProperty(n,"__esModule",{value:!0})})})(Oy,Oy.exports)),Oy.exports}var rE;function L4(){if(rE)return qv.exports;rE=1;var t=M4(),e=P4,n=D4(),i=z4().orient2d;e.default&&(e=e.default),qv.exports=r,qv.exports.default=r;function r(X,J,st){J=Math.max(0,J===void 0?2:J),st=st||0;var ct=I(X),it=new t(16);it.toBBox=function(Mt){return{minX:Mt[0],minY:Mt[1],maxX:Mt[0],maxY:Mt[1]}},it.compareMinX=function(Mt,Lt){return Mt[0]-Lt[0]},it.compareMinY=function(Mt,Lt){return Mt[1]-Lt[1]},it.load(X);for(var ut=[],xt=0,wt;xt<ct.length;xt++){var St=ct[xt];it.remove(St),wt=F(St,wt),ut.push(wt)}var le=new t(16);for(xt=0;xt<ut.length;xt++)le.insert(O(ut[xt]));for(var pe=J*J,Te=st*st;ut.length;){var Nt=ut.shift(),Ct=Nt.p,Tt=Nt.next.p,Bt=V(Ct,Tt);if(!(Bt<Te)){var $t=Bt/pe;St=s(it,Nt.prev.p,Ct,Tt,Nt.next.next.p,$t,le),St&&Math.min(V(St,Ct),V(St,Tt))<=$t&&(ut.push(Nt),ut.push(F(St,Nt)),it.remove(St),le.remove(Nt),le.insert(O(Nt)),le.insert(O(Nt.next)))}}Nt=wt;var ft=[];do ft.push(Nt.p),Nt=Nt.next;while(Nt!==wt);return ft.push(Nt.p),ft}function s(X,J,st,ct,it,ut,xt){for(var wt=new e([],c),St=X.data;St;){for(var le=0;le<St.children.length;le++){var pe=St.children[le],Te=St.leaf?$(pe,st,ct):a(st,ct,pe);Te>ut||wt.push({node:pe,dist:Te})}for(;wt.length&&!wt.peek().node.children;){var Nt=wt.pop(),Ct=Nt.node,Tt=$(Ct,J,st),Bt=$(Ct,ct,it);if(Nt.dist<Tt&&Nt.dist<Bt&&y(st,Ct,xt)&&y(ct,Ct,xt))return Ct}St=wt.pop(),St&&(St=St.node)}return null}function c(X,J){return X.dist-J.dist}function a(X,J,st){if(g(X,st)||g(J,st))return 0;var ct=K(X[0],X[1],J[0],J[1],st.minX,st.minY,st.maxX,st.minY);if(ct===0)return 0;var it=K(X[0],X[1],J[0],J[1],st.minX,st.minY,st.minX,st.maxY);if(it===0)return 0;var ut=K(X[0],X[1],J[0],J[1],st.maxX,st.minY,st.maxX,st.maxY);if(ut===0)return 0;var xt=K(X[0],X[1],J[0],J[1],st.minX,st.maxY,st.maxX,st.maxY);return xt===0?0:Math.min(ct,it,ut,xt)}function g(X,J){return X[0]>=J.minX&&X[0]<=J.maxX&&X[1]>=J.minY&&X[1]<=J.maxY}function y(X,J,st){for(var ct=Math.min(X[0],J[0]),it=Math.min(X[1],J[1]),ut=Math.max(X[0],J[0]),xt=Math.max(X[1],J[1]),wt=st.search({minX:ct,minY:it,maxX:ut,maxY:xt}),St=0;St<wt.length;St++)if(E(wt[St].p,wt[St].next.p,X,J))return!1;return!0}function x(X,J,st){return i(X[0],X[1],J[0],J[1],st[0],st[1])}function E(X,J,st,ct){return X!==ct&&J!==st&&x(X,J,st)>0!=x(X,J,ct)>0&&x(st,ct,X)>0!=x(st,ct,J)>0}function O(X){var J=X.p,st=X.next.p;return X.minX=Math.min(J[0],st[0]),X.minY=Math.min(J[1],st[1]),X.maxX=Math.max(J[0],st[0]),X.maxY=Math.max(J[1],st[1]),X}function I(X){for(var J=X[0],st=X[0],ct=X[0],it=X[0],ut=0;ut<X.length;ut++){var xt=X[ut];xt[0]<J[0]&&(J=xt),xt[0]>ct[0]&&(ct=xt),xt[1]<st[1]&&(st=xt),xt[1]>it[1]&&(it=xt)}var wt=[J,st,ct,it],St=wt.slice();for(ut=0;ut<X.length;ut++)n(X[ut],wt)||St.push(X[ut]);return W(St)}function F(X,J){var st={p:X,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return J?(st.next=J.next,st.prev=J,J.next.prev=st,J.next=st):(st.prev=st,st.next=st),st}function V(X,J){var st=X[0]-J[0],ct=X[1]-J[1];return st*st+ct*ct}function $(X,J,st){var ct=J[0],it=J[1],ut=st[0]-ct,xt=st[1]-it;if(ut!==0||xt!==0){var wt=((X[0]-ct)*ut+(X[1]-it)*xt)/(ut*ut+xt*xt);wt>1?(ct=st[0],it=st[1]):wt>0&&(ct+=ut*wt,it+=xt*wt)}return ut=X[0]-ct,xt=X[1]-it,ut*ut+xt*xt}function K(X,J,st,ct,it,ut,xt,wt){var St=st-X,le=ct-J,pe=xt-it,Te=wt-ut,Nt=X-it,Ct=J-ut,Tt=St*St+le*le,Bt=St*pe+le*Te,$t=pe*pe+Te*Te,ft=St*Nt+le*Ct,Mt=pe*Nt+Te*Ct,Lt=Tt*$t-Bt*Bt,Xt,re,ce,Me,Ne=Lt,Gt=Lt;Lt===0?(re=0,Ne=1,Me=Mt,Gt=$t):(re=Bt*Mt-$t*ft,Me=Tt*Mt-Bt*ft,re<0?(re=0,Me=Mt,Gt=$t):re>Ne&&(re=Ne,Me=Mt+Bt,Gt=$t)),Me<0?(Me=0,-ft<0?re=0:-ft>Tt?re=Ne:(re=-ft,Ne=Tt)):Me>Gt&&(Me=Gt,-ft+Bt<0?re=0:-ft+Bt>Tt?re=Ne:(re=-ft+Bt,Ne=Tt)),Xt=re===0?0:re/Ne,ce=Me===0?0:Me/Gt;var Ce=(1-Xt)*X+Xt*st,Ee=(1-Xt)*J+Xt*ct,de=(1-ce)*it+ce*xt,on=(1-ce)*ut+ce*wt,Be=de-Ce,ln=on-Ee;return Be*Be+ln*ln}function Y(X,J){return X[0]===J[0]?X[1]-J[1]:X[0]-J[0]}function W(X){X.sort(Y);for(var J=[],st=0;st<X.length;st++){for(;J.length>=2&&x(J[J.length-2],J[J.length-1],X[st])<=0;)J.pop();J.push(X[st])}for(var ct=[],it=X.length-1;it>=0;it--){for(;ct.length>=2&&x(ct[ct.length-2],ct[ct.length-1],X[it])<=0;)ct.pop();ct.push(X[it])}return ct.pop(),J.pop(),J.concat(ct)}return qv.exports}var R4=L4();const N4=yu(R4);function B4(t,e={}){e.concavity=e.concavity||1/0;const n=[];if(Rx(t,r=>{n.push([r[0],r[1]])}),!n.length)return null;const i=N4(n,e.concavity);return i.length>3?S4([i]):null}function aE(t,e={}){let n=0,i=0,r=0;return Rx(t,function(s){n+=s[0],i+=s[1],r++},!0),nS([n/r,i/r],e.properties)}function j4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function F4(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function ED(t,e={}){switch(F4(t)){case"Point":return nS(j4(t),e.properties);case"Polygon":var n=[];Rx(t,function(X){n.push(X)});var i=aE(t,{properties:e.properties}),r=i.geometry.coordinates,s=0,c=0,a=0,g,y,x,E,O,I,F,V,$=n.map(function(X){return[X[0]-r[0],X[1]-r[1]]});for(g=0;g<n.length-1;g++)y=$[g],E=y[0],I=y[1],x=$[g+1],O=x[0],F=x[1],V=E*F-O*I,a+=V,s+=(E+O)*V,c+=(I+F)*V;if(a===0)return i;var K=a*.5,Y=1/(6*K);return nS([r[0]+Y*s,r[1]+Y*c],e.properties);default:var W=B4(t);return W?ED(W,{properties:e.properties}):aE(t,{properties:e.properties})}}var AD=ED;const Fm=["CTPRVN_CD","CTPRV_CD","CTP_CD","SIDO_CD","SIG_CD"],U4=["CTP_KOR_NM","SIDO_NM","CTP_ENG_NM","CTP_NM"],n1=["SIG_CD","SGG_CD","ADM_DR_CD"],sE=["SIG_KOR_NM","SGG_NM","ADM_DR_NM","SIG_NM"],V4=["CTPRVN_CD","UPPER_CD","SIDO_CD"],cu=(t,e)=>{for(const n of e)if(t&&t[n]!=null)return t[n]},$4=t=>t==null?null:String(t).padStart(5,"0").slice(0,5),Gf=[[32.5,124],[39.6,132.5]];function q4(){const t=b2();Z.useEffect(()=>{t.options.inertia=!1},[t]);const e=()=>{t.getBounds().intersects(Gf)||t.panInsideBounds(Gf,{animate:!1})};return Kb("move",e),Kb("zoom",e),Kb("moveend",e),null}function H4(t,e=[]){const n=b2();Z.useEffect(()=>{const i=t.current;if(i)try{const r=i.getBounds();if(r&&r.isValid()){const s=Math.max(r.getSouth(),Gf[0][0]),c=Math.max(r.getWest(),Gf[0][1]),a=Math.min(r.getNorth(),Gf[1][0]),g=Math.min(r.getEast(),Gf[1][1]);n.fitBounds([[s,c],[a,g]],{padding:[24,24],paddingBottomRight:[24,80]})}}catch{}},e)}function Z4({targetRef:t,deps:e}){return H4(t,e),null}const CD=[[-180,-90],[-180,90],[180,90],[180,-90],[-180,-90]],PD=t=>t?t.type==="Polygon"?t.coordinates:t.type==="MultiPolygon"?t.coordinates.flat():[]:[],G4=t=>{if(!t?.features)return null;const e=[];for(const n of t.features)e.push(...PD(n.geometry));return{type:"Feature",properties:{kind:"mask-korea"},geometry:{type:"Polygon",coordinates:[CD,...e]}}},Y4=t=>{if(!t?.geometry)return null;const e=PD(t.geometry);return{type:"Feature",properties:{kind:"mask-sido"},geometry:{type:"Polygon",coordinates:[CD,...e]}}},W4={11:"",26:"",27:"",28:"",29:"",30:"",31:"",36:"",41:"",42:"",43:"",44:"",45:"",46:"",47:"",48:"",50:"",51:"",52:""},X4=t=>{const e=t?.properties||{},n=String(cu(e,Fm)||"");return W4[n]||cu(e,U4)||" /"},iS={11:[37.5665,126.978],26:[35.1796,129.0756],27:[35.8714,128.6014],28:[37.4563,126.7052],29:[35.1595,126.8526],30:[36.3504,127.3845],31:[35.5384,129.3114],36:[36.48,127.289],41:[37.4138,127.5183],42:[37.8228,128.1555],43:[36.6357,127.4917],44:[36.5184,126.8],45:[35.817,127.111],46:[35.12,126.9],47:[36.4919,128.8889],48:[35.23,128.25],50:[33.4996,126.5312],51:[37.8228,128.1555],52:[35.817,127.111]},kD={11:[.08,-.1],28:[.04,-.08],36:[.02,.08],30:[-.02,.02],41:[.02,-.06],43:[0,0],44:[.02,.1],45:[.02,.12],46:[.02,.06],47:[0,0],48:[.05,-.1],26:[0,-.04],27:[.02,-.02],31:[0,.06],42:[0,0],50:[0,0],51:[0,0],52:[0,0]},Hv=Object.entries(kD).sort(([t],[e])=>t.localeCompare(e)).map(([t,e])=>`${t}:${e[0].toFixed(3)},${e[1].toFixed(3)}`).join("|"),Zv=Object.entries(iS).sort(([t],[e])=>t.localeCompare(e)).map(([t,e])=>`${t}:${e[0].toFixed(4)},${e[1].toFixed(4)}`).join("|");function K4(t){const e=String(cu(t.properties,Fm)||"");if(iS[e]){const[n,i]=iS[e];return[n,i]}try{const n=AD(t),[i,r]=n.geometry.coordinates;return[r,i]}catch{return null}}const i1="#e0e0e0",Q4=["#f3f8ff","#d9e7ff","#bed4ff","#9cbcff","#7699ff"],J4=["#fff7ec","#ffe3c4","#ffcd9b","#ffb373","#ff9243"],Gv=(t,e)=>{if(!t.length)return 0;const n=(t.length-1)*e,i=Math.floor(n),r=n-i;return t[i+1]!==void 0?t[i]+(t[i+1]-t[i])*r:t[i]},oE=(t,e,n)=>{if(t==null||isNaN(t)||t<=0||!e||!e.length)return i1;const i=n==="gas"?J4:Q4,r=[...e].filter(y=>y>0).sort((y,x)=>y-x);if(!r.length)return i1;const s=Gv(r,.2),c=Gv(r,.4),a=Gv(r,.6),g=Gv(r,.8);return t<=s?i[0]:t<=c?i[1]:t<=a?i[2]:t<=g?i[3]:i[4]},fy=t=>{const e=String(t||"");return e.length!==6?e||"":`${e.slice(0,4)} ${e.slice(4)}`};function tj({onRegionSelect:t,allEnergyData:e,yearMonth:n="202506",energyType:i="electric",onEnergyTypeChange:r}){const[s,c]=Z.useState("sido"),[a,g]=Z.useState(null),[y,x]=Z.useState(""),[E,O]=Z.useState(null),[I,F]=Z.useState(null),[V,$]=Z.useState(null),[K,Y]=Z.useState(null),[W,X]=Z.useState(null),J=Z.useRef(null);Z.useEffect(()=>{(async()=>{try{const Tt=await(await fetch("/korea/SIDO_MAP_2022.json")).json();O(Tt),Y(G4(Tt))}catch{x(" /korea/SIDO_MAP_2022.json   .")}try{const Tt=await(await fetch("/korea/sgg.json")).json();F(Tt)}catch{x(Ct=>(Ct?Ct+" / ":"")+"/korea/sgg.json   .")}})()},[]),Z.useEffect(()=>{if(s!=="sgg")return;const Ct=a?.code;if(!Ct){$(null),X(null);return}const Tt=E?.features?.find(Bt=>String(cu(Bt.properties,Fm))===String(Ct))||null;if(X(Tt?Y4(Tt):null),I?.features){const Bt=I.features.filter($t=>{const ft=$t.properties||{};let Mt=cu(ft,V4);if(Mt==null){const Lt=cu(ft,n1);Lt&&(Mt=String(Lt).slice(0,2))}return String(Mt)===String(Ct)});$(Bt.length?{type:"FeatureCollection",features:Bt}:null)}else $(null)},[s,a,I,E]);const st=Z.useMemo(()=>s==="sido"?E:V,[s,E,V]),ct=Z.useMemo(()=>{if(!E?.features)return{};const Ct={};for(const Tt of E.features){const Bt=String(cu(Tt.properties,Fm)||"");let $t=K4(Tt)||[0,0];const ft=kD[Bt];ft&&($t=[$t[0]+ft[0],$t[1]+ft[1]]),Ct[Bt]=$t}return Ct},[E,Zv,Hv]),it=Array.isArray(e)?e:e?.items||[],ut=Z.useMemo(()=>it.filter(Ct=>String(Ct?.yearMonth)===String(n)),[it,n]),xt=Z.useMemo(()=>{const Ct={};for(const Tt of ut){const Bt=$4(Tt?.countyId);if(!Bt)continue;const $t=Number(i==="gas"?Tt.useGas:Tt.useElect);!isNaN($t)&&$t>0&&(Ct[Bt]=(Ct[Bt]??0)+$t)}return Ct},[ut,i]),wt=Z.useMemo(()=>{const Ct={};return Object.entries(xt).forEach(([Tt,Bt])=>{if(!Bt||Bt<=0)return;const $t=String(Tt).slice(0,2);Ct[$t]=(Ct[$t]??0)+Bt}),Ct},[xt]),St=Z.useMemo(()=>Object.values(s==="sido"?wt:xt).filter(Tt=>Tt>0),[s,wt,xt]);Z.useEffect(()=>{console.log("===== [MapKorea] DEBUG ====="),console.log("yearMonth:",n,"energyType:",i,"level:",s),console.log("rawData length:",it.length),console.log("filtered length:",ut.length),console.log("sidoValue keys:",Object.keys(wt)),console.log("sggValue keys length:",Object.keys(xt).length)},[it,ut,wt,xt,i,s,n]);const le=Ct=>{if(s==="sido"){const $t=String(cu(Ct.properties,Fm)||""),ft=wt[$t];return{weight:1,color:"#ffffff",fillOpacity:.92,fillColor:oE(ft,St,i)}}const Tt=String(cu(Ct.properties,n1)||""),Bt=xt[Tt];return{weight:1,color:"#ffffff",fillOpacity:.92,fillColor:oE(Bt,St,i)}},pe=Ct=>{const Tt=cu(Ct?.properties||{},sE)||" ";return`${a?.name||" /"} ${String(Tt).replace(/<br\/>/g," ")}`},Te=(Ct,Tt)=>{if(s==="sido"){const Bt=String(cu(Ct.properties,Fm)||""),$t=X4(Ct),ft=ct[Bt];if(ft){const Mt=XM.tooltip({permanent:!0,direction:"center",className:"area-label"}).setContent($t).setLatLng(ft);Tt.bindTooltip(Mt),Tt.on("add",()=>{try{Tt.openTooltip()}catch{}})}Tt.on("mouseover",Mt=>{Tt.setStyle({weight:2,color:"#ffffff"}),Tt.bindPopup(`${$t}<br/>${fy(n)}`).openPopup(Mt.latlng)}),Tt.on("mouseout",()=>{Tt.setStyle({weight:1,color:"#ffffff"}),Tt.closePopup()}),Tt.on("click",Mt=>{g({code:Bt,name:$t}),c("sgg"),Tt.bindPopup(`${$t}<br/>${fy(n)}`).openPopup(Mt.latlng),t?.({cityId:Number(Bt),cityName:$t})}),Tt.on("add",()=>{try{Tt.getElement()?.classList?.add("cursor-pointer")}catch{}})}else{const Bt=pe(Ct);try{const $t=AD(Ct),[ft,Mt]=$t.geometry.coordinates,Lt=XM.tooltip({permanent:!0,direction:"center",className:"area-label sgg"}).setContent(Bt.replace((a?.name||"")+" ","")).setLatLng([Mt,ft]);Tt.bindTooltip(Lt),Tt.on("add",()=>{try{Tt.openTooltip()}catch{}})}catch{}Tt.on("mouseover",$t=>{Tt.setStyle({weight:2,color:"#ffffff"}),Tt.bindPopup(`${Bt}<br/>${fy(n)}`).openPopup($t.latlng)}),Tt.on("mouseout",()=>{Tt.setStyle({weight:1,color:"#ffffff"}),Tt.closePopup()}),Tt.on("click",$t=>{Tt.bindPopup(`${Bt}<br/>${fy(n)}`).openPopup($t.latlng);const ft=String(cu(Ct.properties,n1)||""),Mt=cu(Ct.properties,sE);t?.({cityId:Number(a?.code),countyId:Number(ft),cityName:a?.name,countyName:Mt})})}},Nt=()=>{c("sido"),g(null),$(null),X(null),t?.(null)};return vt.jsxs("div",{className:"map-host",children:[vt.jsxs("div",{className:"map-toolbar",children:[vt.jsxs("div",{className:"month-label",children:[" ",fy(n)," "]}),vt.jsxs("div",{className:"map-energy-buttons",children:[vt.jsx("button",{className:i==="electric"?"active-electric":"",onClick:()=>r?.("electric"),title:"  ",children:" "}),vt.jsx("button",{className:i==="gas"?"active-gas":"",onClick:()=>r?.("gas"),title:"  ",children:" "})]})]}),y&&vt.jsx("div",{className:"warn-box",children:y}),s==="sgg"&&vt.jsx("button",{className:"btn-back",onClick:Nt,children:" / "}),vt.jsxs(_4,{bounds:Gf,minZoom:6,maxZoom:13,maxBounds:Gf,maxBoundsViscosity:1,inertia:!1,worldCopyJump:!1,zoomControl:!1,attributionControl:!1,zoomSnap:.25,zoomDelta:.25,wheelPxPerZoomLevel:220,wheelDebounceTime:40,style:{height:"100%",width:"100%"},children:[vt.jsx(Jb,{name:"mask",style:{zIndex:400}}),vt.jsx(Jb,{name:"gaps",style:{zIndex:405}}),vt.jsx(Jb,{name:"polygons",style:{zIndex:410}}),vt.jsx(w4,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",noWrap:!0}),(s==="sgg"?W:K)&&vt.jsx(Qb,{pane:"mask",data:s==="sgg"?W:K,style:{fillColor:"#ffffffff",fillOpacity:.6,color:"#0b1020",weight:0},interactive:!1}),st&&vt.jsx(Qb,{pane:"gaps",data:st,style:{fillOpacity:0,color:"#ebdfd8ff",weight:s==="sido"?6:3,lineJoin:"round",lineCap:"round"},interactive:!1}),st&&vt.jsx(Qb,{pane:"polygons",ref:J,data:st,style:le,onEachFeature:Te},s==="sido"?`polygons-sido-${Zv}-${Hv}`:`polygons-sgg-${a?.code||""}`),vt.jsx(Z4,{targetRef:J,deps:[s,a?.code,st?.features?.length,Zv,Hv,i,n]}),vt.jsx(q4,{})]},s==="sido"?`map-sido-${Zv}-${Hv}`:`map-sgg-${a?.code||""}`)]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function y_(t){return t+.5|0}const Yf=(t,e,n)=>Math.max(Math.min(t,n),e);function Dy(t){return Yf(y_(t*2.55),0,255)}function Qf(t){return Yf(y_(t*255),0,255)}function Fh(t){return Yf(y_(t/2.55)/100,0,1)}function lE(t){return Yf(y_(t*100),0,100)}const ju={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},rS=[..."0123456789ABCDEF"],ej=t=>rS[t&15],nj=t=>rS[(t&240)>>4]+rS[t&15],Yv=t=>(t&240)>>4===(t&15),ij=t=>Yv(t.r)&&Yv(t.g)&&Yv(t.b)&&Yv(t.a);function rj(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ju[t[1]]*17,g:255&ju[t[2]]*17,b:255&ju[t[3]]*17,a:e===5?ju[t[4]]*17:255}:(e===7||e===9)&&(n={r:ju[t[1]]<<4|ju[t[2]],g:ju[t[3]]<<4|ju[t[4]],b:ju[t[5]]<<4|ju[t[6]],a:e===9?ju[t[7]]<<4|ju[t[8]]:255})),n}const aj=(t,e)=>t<255?e(t):"";function sj(t){var e=ij(t)?ej:nj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+aj(t.a,e):void 0}const oj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function OD(t,e,n){const i=e*Math.min(n,1-n),r=(s,c=(s+t/30)%12)=>n-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function lj(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function uj(t,e,n){const i=OD(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function cj(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function w2(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),c=Math.min(n,i,r),a=(s+c)/2;let g,y,x;return s!==c&&(x=s-c,y=a>.5?x/(2-s-c):x/(s+c),g=cj(n,i,r,x,s),g=g*60+.5),[g|0,y||0,a]}function S2(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Qf)}function T2(t,e,n){return S2(OD,t,e,n)}function hj(t,e,n){return S2(uj,t,e,n)}function fj(t,e,n){return S2(lj,t,e,n)}function DD(t){return(t%360+360)%360}function dj(t){const e=oj.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Dy(+e[5]):Qf(+e[5]));const r=DD(+e[2]),s=+e[3]/100,c=+e[4]/100;return e[1]==="hwb"?i=hj(r,s,c):e[1]==="hsv"?i=fj(r,s,c):i=T2(r,s,c),{r:i[0],g:i[1],b:i[2],a:n}}function pj(t,e){var n=w2(t);n[0]=DD(n[0]+e),n=T2(n),t.r=n[0],t.g=n[1],t.b=n[2]}function mj(t){if(!t)return;const e=w2(t),n=e[0],i=lE(e[1]),r=lE(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Fh(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const uE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function gj(){const t={},e=Object.keys(cE),n=Object.keys(uE);let i,r,s,c,a;for(i=0;i<e.length;i++){for(c=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,uE[s]);s=parseInt(cE[c],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Wv;function yj(t){Wv||(Wv=gj(),Wv.transparent=[0,0,0,0]);const e=Wv[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const _j=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function vj(t){const e=_j.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const c=+e[7];n=e[8]?Dy(c):Yf(c*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Dy(i):Yf(i,0,255)),r=255&(e[4]?Dy(r):Yf(r,0,255)),s=255&(e[6]?Dy(s):Yf(s,0,255)),{r:i,g:r,b:s,a:n}}}function xj(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Fh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const r1=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Im=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function bj(t,e,n){const i=Im(Fh(t.r)),r=Im(Fh(t.g)),s=Im(Fh(t.b));return{r:Qf(r1(i+n*(Im(Fh(e.r))-i))),g:Qf(r1(r+n*(Im(Fh(e.g))-r))),b:Qf(r1(s+n*(Im(Fh(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Xv(t,e,n){if(t){let i=w2(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=T2(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function ID(t,e){return t&&Object.assign(e||{},t)}function hE(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Qf(t[3]))):(e=ID(t,{r:0,g:0,b:0,a:1}),e.a=Qf(e.a)),e}function wj(t){return t.charAt(0)==="r"?vj(t):dj(t)}let zD=class aS{constructor(e){if(e instanceof aS)return e;const n=typeof e;let i;n==="object"?i=hE(e):n==="string"&&(i=rj(e)||yj(e)||wj(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=ID(this._rgb);return e&&(e.a=Fh(e.a)),e}set rgb(e){this._rgb=hE(e)}rgbString(){return this._valid?xj(this._rgb):void 0}hexString(){return this._valid?sj(this._rgb):void 0}hslString(){return this._valid?mj(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const c=n===s?.5:n,a=2*c-1,g=i.a-r.a,y=((a*g===-1?a:(a+g)/(1+a*g))+1)/2;s=1-y,i.r=255&y*i.r+s*r.r+.5,i.g=255&y*i.g+s*r.g+.5,i.b=255&y*i.b+s*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=bj(this._rgb,e._rgb,n)),this}clone(){return new aS(this.rgb)}alpha(e){return this._rgb.a=Qf(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=y_(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Xv(this._rgb,2,e),this}darken(e){return Xv(this._rgb,2,-e),this}saturate(e){return Xv(this._rgb,1,e),this}desaturate(e){return Xv(this._rgb,1,-e),this}rotate(e){return pj(this._rgb,e),this}};/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Nh(){}const Sj=(()=>{let t=0;return()=>t++})();function ki(t){return t==null}function da(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Fi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function qa(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function hu(t,e){return qa(t)?t:e}function ti(t,e){return typeof t>"u"?e:t}const Tj=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,LD=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Jn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Pi(t,e,n,i){let r,s,c;if(da(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(Fi(t))for(c=Object.keys(t),s=c.length,r=0;r<s;r++)e.call(n,t[c[r]],c[r])}function R0(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function N0(t){if(da(t))return t.map(N0);if(Fi(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=N0(t[n[r]]);return e}return t}function RD(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Mj(t,e,n,i){if(!RD(t))return;const r=e[t],s=n[t];Fi(r)&&Fi(s)?Gy(r,s,i):e[t]=N0(s)}function Gy(t,e,n){const i=da(e)?e:[e],r=i.length;if(!Fi(t))return t;n=n||{};const s=n.merger||Mj;let c;for(let a=0;a<r;++a){if(c=i[a],!Fi(c))continue;const g=Object.keys(c);for(let y=0,x=g.length;y<x;++y)s(g[y],t,c,n)}return t}function By(t,e){return Gy(t,e,{merger:Ej})}function Ej(t,e,n){if(!RD(t))return;const i=e[t],r=n[t];Fi(i)&&Fi(r)?By(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=N0(r))}const fE={"":t=>t,x:t=>t.x,y:t=>t.y};function Aj(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Cj(t){const e=Aj(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function td(t,e){return(fE[e]||(fE[e]=Cj(e)))(t)}function M2(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Yy=t=>typeof t<"u",ed=t=>typeof t=="function",dE=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Pj(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const rr=Math.PI,aa=2*rr,kj=aa+rr,B0=Number.POSITIVE_INFINITY,Oj=rr/180,ns=rr/2,Wd=rr/4,pE=rr*2/3,Wf=Math.log10,$u=Math.sign;function lp(t,e,n){return Math.abs(t-e)<n}function mE(t){const e=Math.round(t);t=lp(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Wf(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Dj(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function Ij(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Gm(t){return!Ij(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function zj(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function ND(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ac(t){return t*(rr/180)}function E2(t){return t*(180/rr)}function gE(t){if(!qa(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function BD(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*rr&&(s+=aa),{angle:s,distance:r}}function sS(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Lj(t,e){return(t-e+kj)%aa-rr}function Go(t){return(t%aa+aa)%aa}function Wy(t,e,n,i){const r=Go(t),s=Go(e),c=Go(n),a=Go(s-r),g=Go(c-r),y=Go(r-s),x=Go(r-c);return r===s||r===c||i&&s===c||a>g&&y<x}function Xs(t,e,n){return Math.max(e,Math.min(n,t))}function Rj(t){return Xs(t,-32768,32767)}function $h(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function A2(t,e,n){n=n||(c=>t[c]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const qh=(t,e,n,i)=>A2(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),Nj=(t,e,n)=>A2(t,n,i=>t[i][e]>=n);function Bj(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const jD=["push","pop","shift","splice","unshift"];function jj(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),jD.forEach(n=>{const i="_onData"+M2(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const c=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),c}})})}function yE(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(jD.forEach(s=>{delete t[s]}),delete t._chartjs)}function FD(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const UD=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function VD(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,UD.call(window,()=>{i=!1,t.apply(e,n)}))}}function Fj(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const C2=t=>t==="start"?"left":t==="end"?"right":"center",Ho=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Uj=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function $D(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:c,vScale:a,_parsed:g}=t,y=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,x=c.axis,{min:E,max:O,minDefined:I,maxDefined:F}=c.getUserBounds();if(I){if(r=Math.min(qh(g,x,E).lo,n?i:qh(e,x,c.getPixelForValue(E)).lo),y){const V=g.slice(0,r+1).reverse().findIndex($=>!ki($[a.axis]));r-=Math.max(0,V)}r=Xs(r,0,i-1)}if(F){let V=Math.max(qh(g,c.axis,O,!0).hi+1,n?0:qh(e,x,c.getPixelForValue(O),!0).hi+1);if(y){const $=g.slice(V-1).findIndex(K=>!ki(K[a.axis]));V+=Math.max(0,$)}s=Xs(V,r,i)-r}else s=i-r}return{start:r,count:s}}function qD(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Kv=t=>t===0||t===1,_E=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*aa/n)),vE=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*aa/n)+1,jy={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ns)+1,easeOutSine:t=>Math.sin(t*ns),easeInOutSine:t=>-.5*(Math.cos(rr*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Kv(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Kv(t)?t:_E(t,.075,.3),easeOutElastic:t=>Kv(t)?t:vE(t,.075,.3),easeInOutElastic(t){return Kv(t)?t:t<.5?.5*_E(t*2,.1125,.45):.5+.5*vE(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-jy.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?jy.easeInBounce(t*2)*.5:jy.easeOutBounce(t*2-1)*.5+.5};function P2(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function xE(t){return P2(t)?t:new zD(t)}function a1(t){return P2(t)?t:new zD(t).saturate(.5).darken(.1).hexString()}const Vj=["x","y","borderWidth","radius","tension"],$j=["color","borderColor","backgroundColor"];function qj(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:$j},numbers:{type:"number",properties:Vj}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Hj(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const bE=new Map;function Zj(t,e){e=e||{};const n=t+JSON.stringify(e);let i=bE.get(n);return i||(i=new Intl.NumberFormat(t,e),bE.set(n,i)),i}function __(t,e,n){return Zj(e,n).format(t)}const HD={values(t){return da(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const y=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(y<1e-4||y>1e15)&&(r="scientific"),s=Gj(t,n)}const c=Wf(Math.abs(s)),a=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),g={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(g,this.options.ticks.format),__(t,i,g)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Wf(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?HD.numeric.call(this,t,e,n):""}};function Gj(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Nx={formatters:HD};function Yj(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Nx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const gp=Object.create(null),oS=Object.create(null);function Fy(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function s1(t,e,n){return typeof e=="string"?Gy(Fy(t,e),n):Gy(Fy(t,""),e)}class Wj{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>a1(r.backgroundColor),this.hoverBorderColor=(i,r)=>a1(r.borderColor),this.hoverColor=(i,r)=>a1(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return s1(this,e,n)}get(e){return Fy(this,e)}describe(e,n){return s1(oS,e,n)}override(e,n){return s1(gp,e,n)}route(e,n,i,r){const s=Fy(this,e),c=Fy(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const g=this[a],y=c[r];return Fi(g)?Object.assign({},y,g):ti(g,y)},set(g){this[a]=g}}})}apply(e){e.forEach(n=>n(this))}}var pa=new Wj({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[qj,Hj,Yj]);function Xj(t){return!t||ki(t.size)||ki(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function j0(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Kj(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let c=0;const a=n.length;let g,y,x,E,O;for(g=0;g<a;g++)if(E=n[g],E!=null&&!da(E))c=j0(t,r,s,c,E);else if(da(E))for(y=0,x=E.length;y<x;y++)O=E[y],O!=null&&!da(O)&&(c=j0(t,r,s,c,O));t.restore();const I=s.length/2;if(I>n.length){for(g=0;g<I;g++)delete r[s[g]];s.splice(0,I)}return c}function Xd(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function wE(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function lS(t,e,n,i){ZD(t,e,n,i,null)}function ZD(t,e,n,i,r){let s,c,a,g,y,x,E,O;const I=e.pointStyle,F=e.rotation,V=e.radius;let $=(F||0)*Oj;if(I&&typeof I=="object"&&(s=I.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate($),t.drawImage(I,-I.width/2,-I.height/2,I.width,I.height),t.restore();return}if(!(isNaN(V)||V<=0)){switch(t.beginPath(),I){default:r?t.ellipse(n,i,r/2,V,0,0,aa):t.arc(n,i,V,0,aa),t.closePath();break;case"triangle":x=r?r/2:V,t.moveTo(n+Math.sin($)*x,i-Math.cos($)*V),$+=pE,t.lineTo(n+Math.sin($)*x,i-Math.cos($)*V),$+=pE,t.lineTo(n+Math.sin($)*x,i-Math.cos($)*V),t.closePath();break;case"rectRounded":y=V*.516,g=V-y,c=Math.cos($+Wd)*g,E=Math.cos($+Wd)*(r?r/2-y:g),a=Math.sin($+Wd)*g,O=Math.sin($+Wd)*(r?r/2-y:g),t.arc(n-E,i-a,y,$-rr,$-ns),t.arc(n+O,i-c,y,$-ns,$),t.arc(n+E,i+a,y,$,$+ns),t.arc(n-O,i+c,y,$+ns,$+rr),t.closePath();break;case"rect":if(!F){g=Math.SQRT1_2*V,x=r?r/2:g,t.rect(n-x,i-g,2*x,2*g);break}$+=Wd;case"rectRot":E=Math.cos($)*(r?r/2:V),c=Math.cos($)*V,a=Math.sin($)*V,O=Math.sin($)*(r?r/2:V),t.moveTo(n-E,i-a),t.lineTo(n+O,i-c),t.lineTo(n+E,i+a),t.lineTo(n-O,i+c),t.closePath();break;case"crossRot":$+=Wd;case"cross":E=Math.cos($)*(r?r/2:V),c=Math.cos($)*V,a=Math.sin($)*V,O=Math.sin($)*(r?r/2:V),t.moveTo(n-E,i-a),t.lineTo(n+E,i+a),t.moveTo(n+O,i-c),t.lineTo(n-O,i+c);break;case"star":E=Math.cos($)*(r?r/2:V),c=Math.cos($)*V,a=Math.sin($)*V,O=Math.sin($)*(r?r/2:V),t.moveTo(n-E,i-a),t.lineTo(n+E,i+a),t.moveTo(n+O,i-c),t.lineTo(n-O,i+c),$+=Wd,E=Math.cos($)*(r?r/2:V),c=Math.cos($)*V,a=Math.sin($)*V,O=Math.sin($)*(r?r/2:V),t.moveTo(n-E,i-a),t.lineTo(n+E,i+a),t.moveTo(n+O,i-c),t.lineTo(n-O,i+c);break;case"line":c=r?r/2:Math.cos($)*V,a=Math.sin($)*V,t.moveTo(n-c,i-a),t.lineTo(n+c,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos($)*(r?r/2:V),i+Math.sin($)*V);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function eh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Bx(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function jx(t){t.restore()}function Qj(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Jj(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function tF(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ki(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function eF(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),c=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,g=n-s.actualBoundingBoxAscent,y=n+s.actualBoundingBoxDescent,x=r.strikethrough?(g+y)/2:y;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(c,x),t.lineTo(a,x),t.stroke()}}function nF(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function yp(t,e,n,i,r,s={}){const c=da(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let g,y;for(t.save(),t.font=r.string,tF(t,s),g=0;g<c.length;++g)y=c[g],s.backdrop&&nF(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),ki(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(y,n,i,s.maxWidth)),t.fillText(y,n,i,s.maxWidth),eF(t,n,i,y,s),i+=Number(r.lineHeight);t.restore()}function Xy(t,e){const{x:n,y:i,w:r,h:s,radius:c}=e;t.arc(n+c.topLeft,i+c.topLeft,c.topLeft,1.5*rr,rr,!0),t.lineTo(n,i+s-c.bottomLeft),t.arc(n+c.bottomLeft,i+s-c.bottomLeft,c.bottomLeft,rr,ns,!0),t.lineTo(n+r-c.bottomRight,i+s),t.arc(n+r-c.bottomRight,i+s-c.bottomRight,c.bottomRight,ns,0,!0),t.lineTo(n+r,i+c.topRight),t.arc(n+r-c.topRight,i+c.topRight,c.topRight,0,-ns,!0),t.lineTo(n+c.topLeft,i)}const iF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,rF=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function aF(t,e){const n=(""+t).match(iF);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const sF=t=>+t||0;function k2(t,e){const n={},i=Fi(e),r=i?Object.keys(e):e,s=Fi(t)?i?c=>ti(t[c],t[e[c]]):c=>t[c]:()=>t;for(const c of r)n[c]=sF(s(c));return n}function GD(t){return k2(t,{top:"y",right:"x",bottom:"y",left:"x"})}function up(t){return k2(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Xo(t){const e=GD(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ls(t,e){t=t||{},e=e||pa.font;let n=ti(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ti(t.style,e.style);i&&!(""+i).match(rF)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ti(t.family,e.family),lineHeight:aF(ti(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ti(t.weight,e.weight),string:""};return r.string=Xj(r),r}function Iy(t,e,n,i){let r,s,c;for(r=0,s=t.length;r<s;++r)if(c=t[r],c!==void 0&&c!==void 0)return c}function oF(t,e,n){const{min:i,max:r}=t,s=LD(e,(r-i)/2),c=(a,g)=>n&&a===0?0:a+g;return{min:c(i,-Math.abs(s)),max:c(r,s)}}function rd(t,e){return Object.assign(Object.create(t),e)}function O2(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=KD("_fallback",t));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>O2([a,...t],e,s,i)};return new Proxy(c,{deleteProperty(a,g){return delete a[g],delete a._keys,delete t[0][g],!0},get(a,g){return WD(a,g,()=>mF(g,e,t,a))},getOwnPropertyDescriptor(a,g){return Reflect.getOwnPropertyDescriptor(a._scopes[0],g)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,g){return TE(a).includes(g)},ownKeys(a){return TE(a)},set(a,g,y){const x=a._storage||(a._storage=r());return a[g]=x[g]=y,delete a._keys,!0}})}function Ym(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:YD(t,i),setContext:s=>Ym(t,s,n,i),override:s=>Ym(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,c){return delete s[c],delete t[c],!0},get(s,c,a){return WD(s,c,()=>uF(s,c,a))},getOwnPropertyDescriptor(s,c){return s._descriptors.allKeys?Reflect.has(t,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,c)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,c){return Reflect.has(t,c)},ownKeys(){return Reflect.ownKeys(t)},set(s,c,a){return t[c]=a,delete s[c],!0}})}function YD(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:ed(n)?n:()=>n,isIndexable:ed(i)?i:()=>i}}const lF=(t,e)=>t?t+M2(e):e,D2=(t,e)=>Fi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function WD(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function uF(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:c}=t;let a=i[e];return ed(a)&&c.isScriptable(e)&&(a=cF(e,a,t,n)),da(a)&&a.length&&(a=hF(e,a,t,c.isIndexable)),D2(e,a)&&(a=Ym(a,r,s&&s[e],c)),a}function cF(t,e,n,i){const{_proxy:r,_context:s,_subProxy:c,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let g=e(s,c||i);return a.delete(t),D2(t,g)&&(g=I2(r._scopes,r,t,g)),g}function hF(t,e,n,i){const{_proxy:r,_context:s,_subProxy:c,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(Fi(e[0])){const g=e,y=r._scopes.filter(x=>x!==g);e=[];for(const x of g){const E=I2(y,r,t,x);e.push(Ym(E,s,c&&c[t],a))}}return e}function XD(t,e,n){return ed(t)?t(e,n):t}const fF=(t,e)=>t===!0?e:typeof t=="string"?td(e,t):void 0;function dF(t,e,n,i,r){for(const s of e){const c=fF(n,s);if(c){t.add(c);const a=XD(c._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(c===!1&&typeof i<"u"&&n!==i)return null}return!1}function I2(t,e,n,i){const r=e._rootScopes,s=XD(e._fallback,n,i),c=[...t,...r],a=new Set;a.add(i);let g=SE(a,c,n,s||n,i);return g===null||typeof s<"u"&&s!==n&&(g=SE(a,c,s,g,i),g===null)?!1:O2(Array.from(a),[""],r,s,()=>pF(e,n,i))}function SE(t,e,n,i,r){for(;n;)n=dF(t,e,n,i,r);return n}function pF(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return da(r)&&Fi(n)?n:r||{}}function mF(t,e,n,i){let r;for(const s of e)if(r=KD(lF(s,t),n),typeof r<"u")return D2(t,r)?I2(n,i,t,r):r}function KD(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function TE(t){let e=t._keys;return e||(e=t._keys=gF(t._scopes)),e}function gF(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function QD(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,c=new Array(i);let a,g,y,x;for(a=0,g=i;a<g;++a)y=a+n,x=e[y],c[a]={r:r.parse(td(x,s),y)};return c}const yF=Number.EPSILON||1e-14,Wm=(t,e)=>e<t.length&&!t[e].skip&&t[e],JD=t=>t==="x"?"y":"x";function _F(t,e,n,i){const r=t.skip?e:t,s=e,c=n.skip?e:n,a=sS(s,r),g=sS(c,s);let y=a/(a+g),x=g/(a+g);y=isNaN(y)?0:y,x=isNaN(x)?0:x;const E=i*y,O=i*x;return{previous:{x:s.x-E*(c.x-r.x),y:s.y-E*(c.y-r.y)},next:{x:s.x+O*(c.x-r.x),y:s.y+O*(c.y-r.y)}}}function vF(t,e,n){const i=t.length;let r,s,c,a,g,y=Wm(t,0);for(let x=0;x<i-1;++x)if(g=y,y=Wm(t,x+1),!(!g||!y)){if(lp(e[x],0,yF)){n[x]=n[x+1]=0;continue}r=n[x]/e[x],s=n[x+1]/e[x],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(c=3/Math.sqrt(a),n[x]=r*c*e[x],n[x+1]=s*c*e[x])}}function xF(t,e,n="x"){const i=JD(n),r=t.length;let s,c,a,g=Wm(t,0);for(let y=0;y<r;++y){if(c=a,a=g,g=Wm(t,y+1),!a)continue;const x=a[n],E=a[i];c&&(s=(x-c[n])/3,a[`cp1${n}`]=x-s,a[`cp1${i}`]=E-s*e[y]),g&&(s=(g[n]-x)/3,a[`cp2${n}`]=x+s,a[`cp2${i}`]=E+s*e[y])}}function bF(t,e="x"){const n=JD(e),i=t.length,r=Array(i).fill(0),s=Array(i);let c,a,g,y=Wm(t,0);for(c=0;c<i;++c)if(a=g,g=y,y=Wm(t,c+1),!!g){if(y){const x=y[e]-g[e];r[c]=x!==0?(y[n]-g[n])/x:0}s[c]=a?y?$u(r[c-1])!==$u(r[c])?0:(r[c-1]+r[c])/2:r[c-1]:r[c]}vF(t,r,s),xF(t,s,e)}function Qv(t,e,n){return Math.max(Math.min(t,n),e)}function wF(t,e){let n,i,r,s,c,a=eh(t[0],e);for(n=0,i=t.length;n<i;++n)c=s,s=a,a=n<i-1&&eh(t[n+1],e),s&&(r=t[n],c&&(r.cp1x=Qv(r.cp1x,e.left,e.right),r.cp1y=Qv(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Qv(r.cp2x,e.left,e.right),r.cp2y=Qv(r.cp2y,e.top,e.bottom)))}function SF(t,e,n,i,r){let s,c,a,g;if(e.spanGaps&&(t=t.filter(y=>!y.skip)),e.cubicInterpolationMode==="monotone")bF(t,r);else{let y=i?t[t.length-1]:t[0];for(s=0,c=t.length;s<c;++s)a=t[s],g=_F(y,a,t[Math.min(s+1,c-(i?0:1))%c],e.tension),a.cp1x=g.previous.x,a.cp1y=g.previous.y,a.cp2x=g.next.x,a.cp2y=g.next.y,y=a}e.capBezierPoints&&wF(t,n)}function z2(){return typeof window<"u"&&typeof document<"u"}function L2(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function F0(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Fx=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function TF(t,e){return Fx(t).getPropertyValue(e)}const MF=["top","right","bottom","left"];function cp(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=MF[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const EF=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function AF(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let c=!1,a,g;if(EF(r,s,t.target))a=r,g=s;else{const y=e.getBoundingClientRect();a=i.clientX-y.left,g=i.clientY-y.top,c=!0}return{x:a,y:g,box:c}}function Kc(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Fx(n),s=r.boxSizing==="border-box",c=cp(r,"padding"),a=cp(r,"border","width"),{x:g,y,box:x}=AF(t,n),E=c.left+(x&&a.left),O=c.top+(x&&a.top);let{width:I,height:F}=e;return s&&(I-=c.width+a.width,F-=c.height+a.height),{x:Math.round((g-E)/I*n.width/i),y:Math.round((y-O)/F*n.height/i)}}function CF(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&L2(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const c=s.getBoundingClientRect(),a=Fx(s),g=cp(a,"border","width"),y=cp(a,"padding");e=c.width-y.width-g.width,n=c.height-y.height-g.height,i=F0(a.maxWidth,s,"clientWidth"),r=F0(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||B0,maxHeight:r||B0}}const Xf=t=>Math.round(t*10)/10;function PF(t,e,n,i){const r=Fx(t),s=cp(r,"margin"),c=F0(r.maxWidth,t,"clientWidth")||B0,a=F0(r.maxHeight,t,"clientHeight")||B0,g=CF(t,e,n);let{width:y,height:x}=g;if(r.boxSizing==="content-box"){const O=cp(r,"border","width"),I=cp(r,"padding");y-=I.width+O.width,x-=I.height+O.height}return y=Math.max(0,y-s.width),x=Math.max(0,i?y/i:x-s.height),y=Xf(Math.min(y,c,g.maxWidth)),x=Xf(Math.min(x,a,g.maxHeight)),y&&!x&&(x=Xf(y/2)),(e!==void 0||n!==void 0)&&i&&g.height&&x>g.height&&(x=g.height,y=Xf(Math.floor(x*i))),{width:y,height:x}}function ME(t,e,n){const i=e||1,r=Xf(t.height*i),s=Xf(t.width*i);t.height=Xf(t.height),t.width=Xf(t.width);const c=t.canvas;return c.style&&(n||!c.style.height&&!c.style.width)&&(c.style.height=`${t.height}px`,c.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||c.height!==r||c.width!==s?(t.currentDevicePixelRatio=i,c.height=r,c.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const kF=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};z2()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function EE(t,e){const n=TF(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function tp(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function OF(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function DF(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},c=tp(t,r,n),a=tp(r,s,n),g=tp(s,e,n),y=tp(c,a,n),x=tp(a,g,n);return tp(y,x,n)}const IF=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},zF=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function qm(t,e,n){return t?IF(e,n):zF()}function tI(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function eI(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function nI(t){return t==="angle"?{between:Wy,compare:Lj,normalize:Go}:{between:$h,compare:(e,n)=>e-n,normalize:e=>e}}function AE({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function LF(t,e,n){const{property:i,start:r,end:s}=n,{between:c,normalize:a}=nI(i),g=e.length;let{start:y,end:x,loop:E}=t,O,I;if(E){for(y+=g,x+=g,O=0,I=g;O<I&&c(a(e[y%g][i]),r,s);++O)y--,x--;y%=g,x%=g}return x<y&&(x+=g),{start:y,end:x,loop:E,style:t.style}}function iI(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,c=e.length,{compare:a,between:g,normalize:y}=nI(i),{start:x,end:E,loop:O,style:I}=LF(t,e,n),F=[];let V=!1,$=null,K,Y,W;const X=()=>g(r,W,K)&&a(r,W)!==0,J=()=>a(s,K)===0||g(s,W,K),st=()=>V||X(),ct=()=>!V||J();for(let it=x,ut=x;it<=E;++it)Y=e[it%c],!Y.skip&&(K=y(Y[i]),K!==W&&(V=g(K,r,s),$===null&&st()&&($=a(K,r)===0?it:ut),$!==null&&ct()&&(F.push(AE({start:$,end:it,loop:O,count:c,style:I})),$=null),ut=it,W=K));return $!==null&&F.push(AE({start:$,end:E,loop:O,count:c,style:I})),F}function rI(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=iI(i[r],t.points,e);s.length&&n.push(...s)}return n}function RF(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function NF(t,e,n,i){const r=t.length,s=[];let c=e,a=t[e],g;for(g=e+1;g<=n;++g){const y=t[g%r];y.skip||y.stop?a.skip||(i=!1,s.push({start:e%r,end:(g-1)%r,loop:i}),e=c=y.stop?g:null):(c=g,a.skip&&(e=g)),a=y}return c!==null&&s.push({start:e%r,end:c%r,loop:i}),s}function BF(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:c,end:a}=RF(n,r,s,i);if(i===!0)return CE(t,[{start:c,end:a,loop:s}],n,e);const g=a<c?a+r:a,y=!!t._fullLoop&&c===0&&a===r-1;return CE(t,NF(n,c,g,y),n,e)}function CE(t,e,n,i){return!i||!i.setContext||!n?e:jF(t,e,n,i)}function jF(t,e,n,i){const r=t._chart.getContext(),s=PE(t.options),{_datasetIndex:c,options:{spanGaps:a}}=t,g=n.length,y=[];let x=s,E=e[0].start,O=E;function I(F,V,$,K){const Y=a?-1:1;if(F!==V){for(F+=g;n[F%g].skip;)F-=Y;for(;n[V%g].skip;)V+=Y;F%g!==V%g&&(y.push({start:F%g,end:V%g,loop:$,style:K}),x=K,E=V%g)}}for(const F of e){E=a?E:F.start;let V=n[E%g],$;for(O=E+1;O<=F.end;O++){const K=n[O%g];$=PE(i.setContext(rd(r,{type:"segment",p0:V,p1:K,p0DataIndex:(O-1)%g,p1DataIndex:O%g,datasetIndex:c}))),FF($,x)&&I(E,O-1,F.loop,x),V=K,x=$}E<O-1&&I(E,O-1,F.loop,x)}return y}function PE(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function FF(t,e){if(!e)return!1;const n=[],i=function(r,s){return P2(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Jv(t,e,n){return t.options.clip?t[n]:e[n]}function UF(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Jv(n,e,"left"),right:Jv(n,e,"right"),top:Jv(i,e,"top"),bottom:Jv(i,e,"bottom")}:e}function aI(t,e){const n=e._clip;if(n.disabled)return!1;const i=UF(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class VF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],c=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:c,currentStep:Math.min(i-n.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=UD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let c=s.length-1,a=!1,g;for(;c>=0;--c)g=s[c],g._active?(g._total>i.duration&&(i.duration=g._total),g.tick(e),a=!0):(s[c]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Bh=new VF;const kE="transparent",$F={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=xE(t||kE),r=i.valid&&xE(e||kE);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class qF{constructor(e,n,i,r){const s=n[i];r=Iy([e.to,r,s,e.from]);const c=Iy([e.from,s,r]);this._active=!0,this._fn=e.fn||$F[e.type||typeof c],this._easing=jy[e.easing]||jy.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,c=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(c,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Iy([e.to,n,r,e.from]),this._from=Iy([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,c=this._loop,a=this._to;let g;if(this._active=s!==a&&(c||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}g=n/i%2,g=c&&g>1?2-g:g,g=this._easing(Math.min(1,Math.max(0,g))),this._target[r]=this._fn(s,a,g)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class sI{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Fi(e))return;const n=Object.keys(pa.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!Fi(s))return;const c={};for(const a of n)c[a]=s[a];(da(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,c)})})}_animateOptions(e,n){const i=n.options,r=ZF(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&HF(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),c=Object.keys(n),a=Date.now();let g;for(g=c.length-1;g>=0;--g){const y=c[g];if(y.charAt(0)==="$")continue;if(y==="options"){r.push(...this._animateOptions(e,n));continue}const x=n[y];let E=s[y];const O=i.get(y);if(E)if(O&&E.active()){E.update(O,x,a);continue}else E.cancel();if(!O||!O.duration){e[y]=x;continue}s[y]=E=new qF(O,e,y,x),r.push(E)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Bh.add(this._chart,i),!0}}function HF(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function ZF(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function OE(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function GF(t,e,n){if(n===!1)return!1;const i=OE(t,n),r=OE(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function YF(t){let e,n,i,r;return Fi(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function oI(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function DE(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let c,a,g,y;if(e===null)return;let x=!1;for(c=0,a=r.length;c<a;++c){if(g=+r[c],g===n){if(x=!0,i.all)continue;break}y=t.values[g],qa(y)&&(s||e===0||$u(e)===$u(y))&&(e+=y)}return!x&&!i.all?0:e}function WF(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",c=Object.keys(t),a=new Array(c.length);let g,y,x;for(g=0,y=c.length;g<y;++g)x=c[g],a[g]={[r]:x,[s]:t[x]};return a}function o1(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function XF(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function KF(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function QF(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function IE(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function zE(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:c,index:a}=i,g=s.axis,y=c.axis,x=XF(s,c,i),E=e.length;let O;for(let I=0;I<E;++I){const F=e[I],{[g]:V,[y]:$}=F,K=F._stacks||(F._stacks={});O=K[y]=QF(r,x,V),O[a]=$,O._top=IE(O,c,!0,i.type),O._bottom=IE(O,c,!1,i.type);const Y=O._visualValues||(O._visualValues={});Y[a]=$}}function l1(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function JF(t,e){return rd(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function t6(t,e,n){return rd(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function dy(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const u1=t=>t==="reset"||t==="none",LE=(t,e)=>e?t:Object.assign({},t),e6=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:oI(n,!0),values:null};class ad{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=o1(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&dy(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(E,O,I,F)=>E==="x"?O:E==="r"?F:I,s=n.xAxisID=ti(i.xAxisID,l1(e,"x")),c=n.yAxisID=ti(i.yAxisID,l1(e,"y")),a=n.rAxisID=ti(i.rAxisID,l1(e,"r")),g=n.indexAxis,y=n.iAxisID=r(g,s,c,a),x=n.vAxisID=r(g,c,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(c),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(y),n.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&yE(this._data,this),e._stacked&&dy(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Fi(n)){const r=this._cachedMeta;this._data=WF(n,r)}else if(i!==n){if(i){yE(i,this);const r=this._cachedMeta;dy(r),r._parsed=[]}n&&Object.isExtensible(n)&&jj(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=o1(n.vScale,n),n.stack!==i.stack&&(r=!0,dy(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(zE(this,n._parsed),n._stacked=o1(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:c}=i,a=s.axis;let g=e===0&&n===r.length?!0:i._sorted,y=e>0&&i._parsed[e-1],x,E,O;if(this._parsing===!1)i._parsed=r,i._sorted=!0,O=r;else{da(r[e])?O=this.parseArrayData(i,r,e,n):Fi(r[e])?O=this.parseObjectData(i,r,e,n):O=this.parsePrimitiveData(i,r,e,n);const I=()=>E[a]===null||y&&E[a]<y[a];for(x=0;x<n;++x)i._parsed[x+e]=E=O[x],g&&(I()&&(g=!1),y=E);i._sorted=g}c&&zE(this,O)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:c}=e,a=s.axis,g=c.axis,y=s.getLabels(),x=s===c,E=new Array(r);let O,I,F;for(O=0,I=r;O<I;++O)F=O+i,E[O]={[a]:x||s.parse(y[F],F),[g]:c.parse(n[F],F)};return E}parseArrayData(e,n,i,r){const{xScale:s,yScale:c}=e,a=new Array(r);let g,y,x,E;for(g=0,y=r;g<y;++g)x=g+i,E=n[x],a[g]={x:s.parse(E[0],x),y:c.parse(E[1],x)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:c}=e,{xAxisKey:a="x",yAxisKey:g="y"}=this._parsing,y=new Array(r);let x,E,O,I;for(x=0,E=r;x<E;++x)O=x+i,I=n[O],y[x]={x:s.parse(td(I,a),O),y:c.parse(td(I,g),O)};return y}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,c=n[e.axis],a={keys:oI(r,!0),values:n._stacks[e.axis]._visualValues};return DE(a,c,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let c=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,c=DE(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,c=r.length,a=this._getOtherScale(e),g=e6(n,i,this.chart),y={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:E}=KF(a);let O,I;function F(){I=r[O];const V=I[a.axis];return!qa(I[e.axis])||x>V||E<V}for(O=0;O<c&&!(!F()&&(this.updateRangeFromParsed(y,e,I,g),s));++O);if(s){for(O=c-1;O>=0;--O)if(!F()){this.updateRangeFromParsed(y,e,I,g);break}}return y}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,c;for(r=0,s=n.length;r<s;++r)c=n[r][e.axis],qa(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=YF(ti(this.options.clip,GF(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,c=[],a=this._drawStart||0,g=this._drawCount||r.length-a,y=this.options.drawActiveElementsOnTop;let x;for(i.dataset&&i.dataset.draw(e,s,a,g),x=a;x<a+g;++x){const E=r[x];E.hidden||(E.active&&y?c.push(E):E.draw(e,s))}for(x=0;x<c.length;++x)c[x].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];s=c.$context||(c.$context=t6(this.getContext(),e,c)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=JF(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,c=e+"-"+n,a=s[c],g=this.enableOptionSharing&&Yy(i);if(a)return LE(a,g);const y=this.chart.config,x=y.datasetElementScopeKeys(this._type,e),E=r?[`${e}Hover`,"hover",e,""]:[e,""],O=y.getOptionScopes(this.getDataset(),x),I=Object.keys(pa.elements[e]),F=()=>this.getContext(i,r,n),V=y.resolveNamedOptions(O,I,F,E);return V.$shared&&(V.$shared=g,s[c]=Object.freeze(LE(V,g))),V}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,c=`animation-${n}`,a=s[c];if(a)return a;let g;if(r.options.animation!==!1){const x=this.chart.config,E=x.datasetAnimationScopeKeys(this._type,n),O=x.getOptionScopes(this.getDataset(),E);g=x.createResolver(O,this.getContext(e,i,n))}const y=new sI(r,g&&g.animations);return g&&g._cacheable&&(s[c]=Object.freeze(y)),y}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||u1(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),c=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:c}}updateElement(e,n,i,r){u1(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!u1(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,g,y]of this._syncList)this[a](g,y);this._syncList=[];const r=i.length,s=n.length,c=Math.min(s,r);c&&this.parse(0,c),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,c=e+n;let a;const g=y=>{for(y.length+=n,a=y.length-1;a>=c;a--)y[a]=y[a-n]};for(g(s),a=e;a<c;++a)s[a]=new this.dataElementType;this._parsing&&g(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&dy(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function n6(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=FD(i.sort((r,s)=>r-s))}return t._cache.$bar}function i6(t){const e=t.iScale,n=n6(e,t.type);let i=e._length,r,s,c,a;const g=()=>{c===32767||c===-32768||(Yy(a)&&(i=Math.min(i,Math.abs(c-a)||i)),a=c)};for(r=0,s=n.length;r<s;++r)c=e.getPixelForValue(n[r]),g();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)c=e.getPixelForTick(r),g();return i}function r6(t,e,n,i){const r=n.barThickness;let s,c;return ki(r)?(s=e.min*n.categoryPercentage,c=n.barPercentage):(s=r*i,c=1),{chunk:s/i,ratio:c,start:e.pixels[t]-s/2}}function a6(t,e,n,i){const r=e.pixels,s=r[t];let c=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const g=n.categoryPercentage;c===null&&(c=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-c);const y=s-(s-Math.min(c,a))/2*g;return{chunk:Math.abs(a-c)/2*g/i,ratio:n.barPercentage,start:y}}function s6(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),c=Math.min(r,s),a=Math.max(r,s);let g=c,y=a;Math.abs(c)>Math.abs(a)&&(g=a,y=c),e[n.axis]=y,e._custom={barStart:g,barEnd:y,start:r,end:s,min:c,max:a}}function lI(t,e,n,i){return da(t)?s6(t,e,n,i):e[n.axis]=n.parse(t,i),e}function RE(t,e,n,i){const r=t.iScale,s=t.vScale,c=r.getLabels(),a=r===s,g=[];let y,x,E,O;for(y=n,x=n+i;y<x;++y)O=e[y],E={},E[r.axis]=a||r.parse(c[y],y),g.push(lI(O,E,s,y));return g}function c1(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function o6(t,e,n){return t!==0?$u(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function l6(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function u6(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:a,reverse:g,top:y,bottom:x}=l6(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=y:(n._bottom||0)===i?r=x:(s[NE(x,c,a,g)]=!0,r=y)),s[NE(r,c,a,g)]=!0,t.borderSkipped=s}function NE(t,e,n,i){return i?(t=c6(t,e,n),t=BE(t,n,e)):t=BE(t,e,n),t}function c6(t,e,n){return t===e?n:t===n?e:t}function BE(t,e,n){return t==="start"?e:t==="end"?n:t}function h6(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class f6 extends ad{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,i,r){return RE(e,n,i,r)}parseArrayData(e,n,i,r){return RE(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:c}=e,{xAxisKey:a="x",yAxisKey:g="y"}=this._parsing,y=s.axis==="x"?a:g,x=c.axis==="x"?a:g,E=[];let O,I,F,V;for(O=i,I=i+r;O<I;++O)V=n[O],F={},F[s.axis]=s.parse(td(V,y),O),E.push(lI(td(V,x),F,c,O));return E}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),c=s._custom,a=c1(c)?"["+c.start+", "+c.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:c,_cachedMeta:{vScale:a}}=this,g=a.getBasePixel(),y=a.isHorizontal(),x=this._getRuler(),{sharedOptions:E,includeOptions:O}=this._getSharedOptions(n,r);for(let I=n;I<n+i;I++){const F=this.getParsed(I),V=s||ki(F[a.axis])?{base:g,head:g}:this._calculateBarValuePixels(I),$=this._calculateBarIndexPixels(I,x),K=(F._stacks||{})[a.axis],Y={horizontal:y,base:V.base,enableBorderRadius:!K||c1(F._custom)||c===K._top||c===K._bottom,x:y?V.head:$.center,y:y?$.center:V.head,height:y?$.size:Math.abs(V.size),width:y?Math.abs(V.size):$.size};O&&(Y.options=E||this.resolveDataElementOptions(I,e[I].active?"active":r));const W=Y.options||e[I].options;u6(Y,W,K,c),h6(Y,W,x.ratio),this.updateElement(e[I],I,Y,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(x=>x.controller.options.grouped),s=i.options.stacked,c=[],a=this._cachedMeta.controller.getParsed(n),g=a&&a[i.axis],y=x=>{const E=x._parsed.find(I=>I[i.axis]===g),O=E&&E[x.vScale.axis];if(ki(O)||isNaN(O))return!0};for(const x of r)if(!(n!==void 0&&y(x))&&((s===!1||c.indexOf(x.stack)===-1||s===void 0&&x.stack===void 0)&&c.push(x.stack),x.index===e))break;return c.length||c.push(void 0),c}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[ti(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,c;for(s=0,c=n.data.length;s<c;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||i6(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:c}}=this,a=s||0,g=this.getParsed(e),y=g._custom,x=c1(y);let E=g[n.axis],O=0,I=i?this.applyStack(n,g,i):E,F,V;I!==E&&(O=I-E,I=E),x&&(E=y.barStart,I=y.barEnd-y.barStart,E!==0&&$u(E)!==$u(y.barEnd)&&(O=0),O+=E);const $=!ki(s)&&!x?s:O;let K=n.getPixelForValue($);if(this.chart.getDataVisibility(e)?F=n.getPixelForValue(O+I):F=K,V=F-K,Math.abs(V)<c){V=o6(V,n,a)*c,E===a&&(K-=V/2);const Y=n.getPixelForDecimal(0),W=n.getPixelForDecimal(1),X=Math.min(Y,W),J=Math.max(Y,W);K=Math.max(Math.min(K,J),X),F=K+V,i&&!x&&(g._stacks[n.axis]._visualValues[r]=n.getValueForPixel(F)-n.getValueForPixel(K))}if(K===n.getPixelForValue(a)){const Y=$u(V)*n.getLineWidthForValue(a)/2;K+=Y,V-=Y}return{size:V,base:K,head:F,center:F+V/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,c=ti(r.maxBarThickness,1/0);let a,g;const y=this._getAxisCount();if(n.grouped){const x=s?this._getStackCount(e):n.stackCount,E=r.barThickness==="flex"?a6(e,n,r,x*y):r6(e,n,r,x*y),O=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,I=this._getAxis().indexOf(ti(O,this.getFirstScaleIdForIndexAxis())),F=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+I;a=E.start+E.chunk*F+E.chunk/2,g=Math.min(c,E.chunk*E.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),g=Math.min(c,n.min*n.ratio);return{base:a-g/2,head:a+g/2,center:a,size:g}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}class d6 extends ad{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,r){const s=super.parsePrimitiveData(e,n,i,r);for(let c=0;c<s.length;c++)s[c]._custom=this.resolveDataElementOptions(c+i).radius;return s}parseArrayData(e,n,i,r){const s=super.parseArrayData(e,n,i,r);for(let c=0;c<s.length;c++){const a=n[i+c];s[c]._custom=ti(a[2],this.resolveDataElementOptions(c+i).radius)}return s}parseObjectData(e,n,i,r){const s=super.parseObjectData(e,n,i,r);for(let c=0;c<s.length;c++){const a=n[i+c];s[c]._custom=ti(a&&a.r&&+a.r,this.resolveDataElementOptions(c+i).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,c=this.getParsed(e),a=r.getLabelForValue(c.x),g=s.getLabelForValue(c.y),y=c._custom;return{label:i[e]||"",value:"("+a+", "+g+(y?", "+y:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:c,vScale:a}=this._cachedMeta,{sharedOptions:g,includeOptions:y}=this._getSharedOptions(n,r),x=c.axis,E=a.axis;for(let O=n;O<n+i;O++){const I=e[O],F=!s&&this.getParsed(O),V={},$=V[x]=s?c.getPixelForDecimal(.5):c.getPixelForValue(F[x]),K=V[E]=s?a.getBasePixel():a.getPixelForValue(F[E]);V.skip=isNaN($)||isNaN(K),y&&(V.options=g||this.resolveDataElementOptions(O,I.active?"active":r),s&&(V.options.radius=0)),this.updateElement(I,O,V,r)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return n!=="active"&&(r.radius=0),r.radius+=ti(i&&i._custom,s),r}}function p6(t,e,n){let i=1,r=1,s=0,c=0;if(e<aa){const a=t,g=a+e,y=Math.cos(a),x=Math.sin(a),E=Math.cos(g),O=Math.sin(g),I=(W,X,J)=>Wy(W,a,g,!0)?1:Math.max(X,X*n,J,J*n),F=(W,X,J)=>Wy(W,a,g,!0)?-1:Math.min(X,X*n,J,J*n),V=I(0,y,E),$=I(ns,x,O),K=F(rr,y,E),Y=F(rr+ns,x,O);i=(V-K)/2,r=($-Y)/2,s=-(V+K)/2,c=-($+Y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:c}}class R2 extends ad{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:i,textAlign:r,color:s,useBorderRadius:c,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((g,y)=>{const E=e.getDatasetMeta(0).controller.getStyle(y);return{text:g,fillStyle:E.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(y),lineDash:E.borderDash,lineDashOffset:E.borderDashOffset,lineJoin:E.borderJoinStyle,lineWidth:E.borderWidth,strokeStyle:E.borderColor,textAlign:r,pointStyle:i,borderRadius:c&&(a||E.borderRadius),index:y}}):[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=g=>+i[g];if(Fi(i[e])){const{key:g="value"}=this._parsing;s=y=>+td(i[y],g)}let c,a;for(c=e,a=e+n;c<a;++c)r._parsed[c]=s(c)}}_getRotation(){return Ac(this.options.rotation-90)}_getCircumference(){return Ac(this.options.circumference)}_getRotationExtents(){let e=aa,n=-aa;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),c=r._getCircumference();e=Math.min(e,s),n=Math.max(n,s+c)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,s=r.data,c=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-c)/2,0),g=Math.min(Tj(this.options.cutout,a),1),y=this._getRingWeight(this.index),{circumference:x,rotation:E}=this._getRotationExtents(),{ratioX:O,ratioY:I,offsetX:F,offsetY:V}=p6(E,x,g),$=(i.width-c)/O,K=(i.height-c)/I,Y=Math.max(Math.min($,K)/2,0),W=LD(this.options.radius,Y),X=Math.max(W*g,0),J=(W-X)/this._getVisibleDatasetWeightTotal();this.offsetX=F*W,this.offsetY=V*W,r.total=this.calculateTotal(),this.outerRadius=W-J*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-J*y,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/aa)}updateElements(e,n,i,r){const s=r==="reset",c=this.chart,a=c.chartArea,y=c.options.animation,x=(a.left+a.right)/2,E=(a.top+a.bottom)/2,O=s&&y.animateScale,I=O?0:this.innerRadius,F=O?0:this.outerRadius,{sharedOptions:V,includeOptions:$}=this._getSharedOptions(n,r);let K=this._getRotation(),Y;for(Y=0;Y<n;++Y)K+=this._circumference(Y,s);for(Y=n;Y<n+i;++Y){const W=this._circumference(Y,s),X=e[Y],J={x:x+this.offsetX,y:E+this.offsetY,startAngle:K,endAngle:K+W,circumference:W,outerRadius:F,innerRadius:I};$&&(J.options=V||this.resolveDataElementOptions(Y,X.active?"active":r)),K+=W,this.updateElement(X,Y,J,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,r;for(r=0;r<n.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?aa*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=__(n._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const i=this.chart;let r,s,c,a,g;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){c=i.getDatasetMeta(r),e=c.data,a=c.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)g=a.resolveDataElementOptions(r),g.borderAlign!=="inner"&&(n=Math.max(n,g.borderWidth||0,g.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(ti(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class uI extends ad{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,c=this.chart._animationsDisabled;let{start:a,count:g}=$D(n,r,c);this._drawStart=a,this._drawCount=g,qD(n)&&(a=0,g=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const y=this.resolveDatasetElementOptions(e);this.options.showLine||(y.borderWidth=0),y.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:y},e),this.updateElements(r,a,g,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:c,vScale:a,_stacked:g,_dataset:y}=this._cachedMeta,{sharedOptions:x,includeOptions:E}=this._getSharedOptions(n,r),O=c.axis,I=a.axis,{spanGaps:F,segment:V}=this.options,$=Gm(F)?F:Number.POSITIVE_INFINITY,K=this.chart._animationsDisabled||s||r==="none",Y=n+i,W=e.length;let X=n>0&&this.getParsed(n-1);for(let J=0;J<W;++J){const st=e[J],ct=K?st:{};if(J<n||J>=Y){ct.skip=!0;continue}const it=this.getParsed(J),ut=ki(it[I]),xt=ct[O]=c.getPixelForValue(it[O],J),wt=ct[I]=s||ut?a.getBasePixel():a.getPixelForValue(g?this.applyStack(a,it,g):it[I],J);ct.skip=isNaN(xt)||isNaN(wt)||ut,ct.stop=J>0&&Math.abs(it[O]-X[O])>$,V&&(ct.parsed=it,ct.raw=y.data[J]),E&&(ct.options=x||this.resolveDataElementOptions(J,st.active?"active":r)),K||this.updateElement(st,J,ct,r),X=it}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),c=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class cI extends ad{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((s,c)=>{const g=e.getDatasetMeta(0).controller.getStyle(c);return{text:s,fillStyle:g.backgroundColor,strokeStyle:g.borderColor,fontColor:r,lineWidth:g.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(c),index:c}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=__(n._parsed[e].r,i.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,n,i,r){return QD.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,r=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(r/2,0),c=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-c)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,r){const s=r==="reset",c=this.chart,g=c.options.animation,y=this._cachedMeta.rScale,x=y.xCenter,E=y.yCenter,O=y.getIndexAngle(0)-.5*rr;let I=O,F;const V=360/this.countVisibleElements();for(F=0;F<n;++F)I+=this._computeAngle(F,r,V);for(F=n;F<n+i;F++){const $=e[F];let K=I,Y=I+this._computeAngle(F,r,V),W=c.getDataVisibility(F)?y.getDistanceFromCenterForValue(this.getParsed(F).r):0;I=Y,s&&(g.animateScale&&(W=0),g.animateRotate&&(K=Y=O));const X={x,y:E,innerRadius:0,outerRadius:W,startAngle:K,endAngle:Y,options:this.resolveDataElementOptions(F,$.active?"active":r)};this.updateElement($,F,X,r)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?Ac(this.resolveDataElementOptions(e,n).angle||i):0}}class m6 extends R2{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class g6 extends ad{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,r){return QD.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta,i=n.dataset,r=n.data||[],s=n.iScale.getLabels();if(i.points=r,e!=="resize"){const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:c};this.updateElement(i,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,n,i,r){const s=this._cachedMeta.rScale,c=r==="reset";for(let a=n;a<n+i;a++){const g=e[a],y=this.resolveDataElementOptions(a,g.active?"active":r),x=s.getPointPositionForValue(a,this.getParsed(a).r),E=c?s.xCenter:x.x,O=c?s.yCenter:x.y,I={x:E,y:O,angle:x.angle,skip:isNaN(E)||isNaN(O),options:y};this.updateElement(g,a,I,r)}}}class y6 extends ad{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,c=this.getParsed(e),a=r.getLabelForValue(c.x),g=s.getLabelForValue(c.y);return{label:i[e]||"",value:"("+a+", "+g+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:s,count:c}=$D(n,i,r);if(this._drawStart=s,this._drawCount=c,qD(n)&&(s=0,c=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:g}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!g._decimated,a.points=i;const y=this.resolveDatasetElementOptions(e);y.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:y},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,s,c,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,r){const s=r==="reset",{iScale:c,vScale:a,_stacked:g,_dataset:y}=this._cachedMeta,x=this.resolveDataElementOptions(n,r),E=this.getSharedOptions(x),O=this.includeOptions(r,E),I=c.axis,F=a.axis,{spanGaps:V,segment:$}=this.options,K=Gm(V)?V:Number.POSITIVE_INFINITY,Y=this.chart._animationsDisabled||s||r==="none";let W=n>0&&this.getParsed(n-1);for(let X=n;X<n+i;++X){const J=e[X],st=this.getParsed(X),ct=Y?J:{},it=ki(st[F]),ut=ct[I]=c.getPixelForValue(st[I],X),xt=ct[F]=s||it?a.getBasePixel():a.getPixelForValue(g?this.applyStack(a,st,g):st[F],X);ct.skip=isNaN(ut)||isNaN(xt)||it,ct.stop=X>0&&Math.abs(st[I]-W[I])>K,$&&(ct.parsed=st,ct.raw=y.data[X]),O&&(ct.options=E||this.resolveDataElementOptions(X,J.active?"active":r)),Y||this.updateElement(J,X,ct,r),W=st}this.updateSharedOptions(E,r,x)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let g=n.length-1;g>=0;--g)a=Math.max(a,n[g].size(this.resolveDataElementOptions(g))/2);return a>0&&a}const i=e.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const s=n[0].size(this.resolveDataElementOptions(0)),c=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,s,c)/2}}var _6=Object.freeze({__proto__:null,BarController:f6,BubbleController:d6,DoughnutController:R2,LineController:uI,PieController:m6,PolarAreaController:cI,RadarController:g6,ScatterController:y6});function Kd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class N2{static override(e){Object.assign(N2.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Kd()}parse(){return Kd()}format(){return Kd()}add(){return Kd()}diff(){return Kd()}startOf(){return Kd()}endOf(){return Kd()}}var hI={_date:N2};function v6(t,e,n,i){const{controller:r,data:s,_sorted:c}=t,a=r._cachedMeta.iScale,g=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&c&&s.length){const y=a._reversePixels?Nj:qh;if(i){if(r._sharedOptions){const x=s[0],E=typeof x.getRange=="function"&&x.getRange(e);if(E){const O=y(s,e,n-E),I=y(s,e,n+E);return{lo:O.lo,hi:I.hi}}}}else{const x=y(s,e,n);if(g){const{vScale:E}=r._cachedMeta,{_parsed:O}=t,I=O.slice(0,x.lo+1).reverse().findIndex(V=>!ki(V[E.axis]));x.lo-=Math.max(0,I);const F=O.slice(x.hi).findIndex(V=>!ki(V[E.axis]));x.hi+=Math.max(0,F)}return x}}return{lo:0,hi:s.length-1}}function Ux(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),c=n[e];for(let a=0,g=s.length;a<g;++a){const{index:y,data:x}=s[a],{lo:E,hi:O}=v6(s[a],e,c,r);for(let I=E;I<=O;++I){const F=x[I];F.skip||i(F,y,I)}}}function x6(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,c=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(c,2))}}function h1(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Ux(t,n,e,function(a,g,y){!r&&!eh(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:g,index:y})},!0),s}function b6(t,e,n,i){let r=[];function s(c,a,g){const{startAngle:y,endAngle:x}=c.getProps(["startAngle","endAngle"],i),{angle:E}=BD(c,{x:e.x,y:e.y});Wy(E,y,x)&&r.push({element:c,datasetIndex:a,index:g})}return Ux(t,n,e,s),r}function w6(t,e,n,i,r,s){let c=[];const a=x6(n);let g=Number.POSITIVE_INFINITY;function y(x,E,O){const I=x.inRange(e.x,e.y,r);if(i&&!I)return;const F=x.getCenterPoint(r);if(!(!!s||t.isPointInArea(F))&&!I)return;const $=a(e,F);$<g?(c=[{element:x,datasetIndex:E,index:O}],g=$):$===g&&c.push({element:x,datasetIndex:E,index:O})}return Ux(t,n,e,y),c}function f1(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?b6(t,e,n,r):w6(t,e,n,i,r,s)}function jE(t,e,n,i,r){const s=[],c=n==="x"?"inXRange":"inYRange";let a=!1;return Ux(t,n,e,(g,y,x)=>{g[c]&&g[c](e[n],r)&&(s.push({element:g,datasetIndex:y,index:x}),a=a||g.inRange(e.x,e.y,r))}),i&&!a?[]:s}var S6={modes:{index(t,e,n,i){const r=Kc(e,t),s=n.axis||"x",c=n.includeInvisible||!1,a=n.intersect?h1(t,r,s,i,c):f1(t,r,s,!1,i,c),g=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(y=>{const x=a[0].index,E=y.data[x];E&&!E.skip&&g.push({element:E,datasetIndex:y.index,index:x})}),g):[]},dataset(t,e,n,i){const r=Kc(e,t),s=n.axis||"xy",c=n.includeInvisible||!1;let a=n.intersect?h1(t,r,s,i,c):f1(t,r,s,!1,i,c);if(a.length>0){const g=a[0].datasetIndex,y=t.getDatasetMeta(g).data;a=[];for(let x=0;x<y.length;++x)a.push({element:y[x],datasetIndex:g,index:x})}return a},point(t,e,n,i){const r=Kc(e,t),s=n.axis||"xy",c=n.includeInvisible||!1;return h1(t,r,s,i,c)},nearest(t,e,n,i){const r=Kc(e,t),s=n.axis||"xy",c=n.includeInvisible||!1;return f1(t,r,s,n.intersect,i,c)},x(t,e,n,i){const r=Kc(e,t);return jE(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Kc(e,t);return jE(t,r,"y",n.intersect,i)}}};const fI=["left","top","right","bottom"];function py(t,e){return t.filter(n=>n.pos===e)}function FE(t,e){return t.filter(n=>fI.indexOf(n.pos)===-1&&n.box.axis===e)}function my(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function T6(t){const e=[];let n,i,r,s,c,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:c,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&s+c,stackWeight:a});return e}function M6(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!fI.includes(r))continue;const c=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=s}return e}function E6(t,e){const n=M6(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,c,a;for(s=0,c=t.length;s<c;++s){a=t[s];const{fullSize:g}=a.box,y=n[a.stack],x=y&&a.stackWeight/y.weight;a.horizontal?(a.width=x?x*i:g&&e.availableWidth,a.height=r):(a.width=i,a.height=x?x*r:g&&e.availableHeight)}return n}function A6(t){const e=T6(t),n=my(e.filter(y=>y.box.fullSize),!0),i=my(py(e,"left"),!0),r=my(py(e,"right")),s=my(py(e,"top"),!0),c=my(py(e,"bottom")),a=FE(e,"x"),g=FE(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(g).concat(c).concat(a),chartArea:py(e,"chartArea"),vertical:i.concat(r).concat(g),horizontal:s.concat(c).concat(a)}}function UE(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function dI(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function C6(t,e,n,i){const{pos:r,box:s}=n,c=t.maxPadding;if(!Fi(r)){n.size&&(t[r]-=n.size);const E=i[n.stack]||{size:0,count:1};E.size=Math.max(E.size,n.horizontal?s.height:s.width),n.size=E.size/E.count,t[r]+=n.size}s.getPadding&&dI(c,s.getPadding());const a=Math.max(0,e.outerWidth-UE(c,t,"left","right")),g=Math.max(0,e.outerHeight-UE(c,t,"top","bottom")),y=a!==t.w,x=g!==t.h;return t.w=a,t.h=g,n.horizontal?{same:y,other:x}:{same:x,other:y}}function P6(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function k6(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{s[c]=Math.max(e[c],n[c])}),s}return i(t?["left","right"]:["top","bottom"])}function zy(t,e,n,i){const r=[];let s,c,a,g,y,x;for(s=0,c=t.length,y=0;s<c;++s){a=t[s],g=a.box,g.update(a.width||e.w,a.height||e.h,k6(a.horizontal,e));const{same:E,other:O}=C6(e,n,a,i);y|=E&&r.length,x=x||O,g.fullSize||r.push(a)}return y&&zy(r,e,n,i)||x}function t0(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function VE(t,e,n,i){const r=n.padding;let{x:s,y:c}=e;for(const a of t){const g=a.box,y=i[a.stack]||{placed:0,weight:1},x=a.stackWeight/y.weight||1;if(a.horizontal){const E=e.w*x,O=y.size||g.height;Yy(y.start)&&(c=y.start),g.fullSize?t0(g,r.left,c,n.outerWidth-r.right-r.left,O):t0(g,e.left+y.placed,c,E,O),y.start=c,y.placed+=E,c=g.bottom}else{const E=e.h*x,O=y.size||g.width;Yy(y.start)&&(s=y.start),g.fullSize?t0(g,s,r.top,O,n.outerHeight-r.bottom-r.top):t0(g,s,e.top+y.placed,O,E),y.start=s,y.placed+=E,s=g.right}}e.x=s,e.y=c}var Wo={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Xo(t.options.layout.padding),s=Math.max(e-r.width,0),c=Math.max(n-r.height,0),a=A6(t.boxes),g=a.vertical,y=a.horizontal;Pi(t.boxes,V=>{typeof V.beforeLayout=="function"&&V.beforeLayout()});const x=g.reduce((V,$)=>$.box.options&&$.box.options.display===!1?V:V+1,0)||1,E=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:c,vBoxMaxWidth:s/2/x,hBoxMaxHeight:c/2}),O=Object.assign({},r);dI(O,Xo(i));const I=Object.assign({maxPadding:O,w:s,h:c,x:r.left,y:r.top},r),F=E6(g.concat(y),E);zy(a.fullSize,I,E,F),zy(g,I,E,F),zy(y,I,E,F)&&zy(g,I,E,F),P6(I),VE(a.leftAndTop,I,E,F),I.x+=I.w,I.y+=I.h,VE(a.rightAndBottom,I,E,F),t.chartArea={left:I.left,top:I.top,right:I.left+I.w,bottom:I.top+I.h,height:I.h,width:I.w},Pi(a.chartArea,V=>{const $=V.box;Object.assign($,t.chartArea),$.update(I.w,I.h,{left:0,top:0,right:0,bottom:0})})}};class pI{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class O6 extends pI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const A0="$chartjs",D6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$E=t=>t===null||t==="";function I6(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[A0]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",$E(r)){const s=EE(t,"width");s!==void 0&&(t.width=s)}if($E(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=EE(t,"height");s!==void 0&&(t.height=s)}return t}const mI=kF?{passive:!0}:!1;function z6(t,e,n){t&&t.addEventListener(e,n,mI)}function L6(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,mI)}function R6(t,e){const n=D6[t.type]||t.type,{x:i,y:r}=Kc(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function U0(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function N6(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let c=!1;for(const a of s)c=c||U0(a.addedNodes,i),c=c&&!U0(a.removedNodes,i);c&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function B6(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let c=!1;for(const a of s)c=c||U0(a.removedNodes,i),c=c&&!U0(a.addedNodes,i);c&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Ky=new Map;let qE=0;function gI(){const t=window.devicePixelRatio;t!==qE&&(qE=t,Ky.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function j6(t,e){Ky.size||window.addEventListener("resize",gI),Ky.set(t,e)}function F6(t){Ky.delete(t),Ky.size||window.removeEventListener("resize",gI)}function U6(t,e,n){const i=t.canvas,r=i&&L2(i);if(!r)return;const s=VD((a,g)=>{const y=r.clientWidth;n(a,g),y<r.clientWidth&&n()},window),c=new ResizeObserver(a=>{const g=a[0],y=g.contentRect.width,x=g.contentRect.height;y===0&&x===0||s(y,x)});return c.observe(r),j6(t,s),c}function d1(t,e,n){n&&n.disconnect(),e==="resize"&&F6(t)}function V6(t,e,n){const i=t.canvas,r=VD(s=>{t.ctx!==null&&n(R6(s,t))},t);return z6(i,e,r),r}class $6 extends pI{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(I6(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[A0])return!1;const i=n[A0].initial;["height","width"].forEach(s=>{const c=i[s];ki(c)?n.removeAttribute(s):n.setAttribute(s,c)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[A0],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),c={attach:N6,detach:B6,resize:U6}[n]||V6;r[n]=c(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:d1,detach:d1,resize:d1}[n]||L6)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return PF(e,n,i,r)}isAttached(e){const n=e&&L2(e);return!!(n&&n.isConnected)}}function q6(t){return!z2()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?O6:$6}let af=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Gm(this.x)&&Gm(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function H6(t,e){const n=t.options.ticks,i=Z6(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?Y6(e):[],c=s.length,a=s[0],g=s[c-1],y=[];if(c>r)return W6(e,y,s,c/r),y;const x=G6(s,e,r);if(c>0){let E,O;const I=c>1?Math.round((g-a)/(c-1)):null;for(e0(e,y,x,ki(I)?0:a-I,a),E=0,O=c-1;E<O;E++)e0(e,y,x,s[E],s[E+1]);return e0(e,y,x,g,ki(I)?e.length:g+I),y}return e0(e,y,x),y}function Z6(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function G6(t,e,n){const i=X6(t),r=e.length/n;if(!i)return Math.max(r,1);const s=Dj(i);for(let c=0,a=s.length-1;c<a;c++){const g=s[c];if(g>r)return g}return Math.max(r,1)}function Y6(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function W6(t,e,n,i){let r=0,s=n[0],c;for(i=Math.ceil(i),c=0;c<t.length;c++)c===s&&(e.push(t[c]),r++,s=n[r*i])}function e0(t,e,n,i,r){const s=ti(i,0),c=Math.min(ti(r,t.length),t.length);let a=0,g,y,x;for(n=Math.ceil(n),r&&(g=r-i,n=g/Math.floor(g/n)),x=s;x<0;)a++,x=Math.round(s+a*n);for(y=Math.max(s,0);y<c;y++)y===x&&(e.push(t[y]),a++,x=Math.round(s+a*n))}function X6(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const K6=t=>t==="left"?"right":t==="right"?"left":t,HE=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,ZE=(t,e)=>Math.min(e||t,t);function GE(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function Q6(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,c=t._endPixel,a=1e-6;let g=t.getPixelForTick(r),y;if(!(n&&(i===1?y=Math.max(g-s,c-g):e===0?y=(t.getPixelForTick(1)-g)/2:y=(g-t.getPixelForTick(r-1))/2,g+=r<e?y:-y,g<s-a||g>c+a)))return g}function J6(t,e){Pi(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function gy(t){return t.drawTicks?t.tickLength:0}function YE(t,e){if(!t.display)return 0;const n=Ls(t.font,e),i=Xo(t.padding);return(da(t.text)?t.text.length:1)*n.lineHeight+i.height}function t8(t,e){return rd(t,{scale:e,type:"scale"})}function e8(t,e,n){return rd(t,{tick:n,index:e,type:"tick"})}function n8(t,e,n){let i=C2(t);return(n&&e!=="right"||!n&&e==="right")&&(i=K6(i)),i}function i8(t,e,n,i){const{top:r,left:s,bottom:c,right:a,chart:g}=t,{chartArea:y,scales:x}=g;let E=0,O,I,F;const V=c-r,$=a-s;if(t.isHorizontal()){if(I=Ho(i,s,a),Fi(n)){const K=Object.keys(n)[0],Y=n[K];F=x[K].getPixelForValue(Y)+V-e}else n==="center"?F=(y.bottom+y.top)/2+V-e:F=HE(t,n,e);O=a-s}else{if(Fi(n)){const K=Object.keys(n)[0],Y=n[K];I=x[K].getPixelForValue(Y)-$+e}else n==="center"?I=(y.left+y.right)/2-$+e:I=HE(t,n,e);F=Ho(i,c,r),E=n==="left"?-ns:ns}return{titleX:I,titleY:F,maxWidth:O,rotation:E}}class Mp extends af{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=hu(e,Number.POSITIVE_INFINITY),n=hu(n,Number.NEGATIVE_INFINITY),i=hu(i,Number.POSITIVE_INFINITY),r=hu(r,Number.NEGATIVE_INFINITY),{min:hu(e,i),max:hu(n,r),minDefined:qa(e),maxDefined:qa(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),c;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let g=0,y=a.length;g<y;++g)c=a[g].controller.getMinMax(this,e),r||(n=Math.min(n,c.min)),s||(i=Math.max(i,c.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:hu(n,hu(i,n)),max:hu(i,hu(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Jn(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:c}=this.options,a=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=oF(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const g=a<this.ticks.length;this._convertTicksToLabels(g?GE(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=H6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),g&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Jn(this.options.afterUpdate,[this])}beforeSetDimensions(){Jn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Jn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Jn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Jn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Jn(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Jn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Jn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=ZE(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let c=r,a,g,y;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const x=this._getLabelSizes(),E=x.widest.width,O=x.highest.height,I=Xs(this.chart.width-E,0,this.maxWidth);a=e.offset?this.maxWidth/i:I/(i-1),E+6>a&&(a=I/(i-(e.offset?.5:1)),g=this.maxHeight-gy(e.grid)-n.padding-YE(e.title,this.chart.options.font),y=Math.sqrt(E*E+O*O),c=E2(Math.min(Math.asin(Xs((x.highest.height+6)/a,-1,1)),Math.asin(Xs(g/y,-1,1))-Math.asin(Xs(O/y,-1,1)))),c=Math.max(r,Math.min(s,c))),this.labelRotation=c}afterCalculateLabelRotation(){Jn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Jn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,c=this._isVisible(),a=this.isHorizontal();if(c){const g=YE(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=gy(s)+g):(e.height=this.maxHeight,e.width=gy(s)+g),i.display&&this.ticks.length){const{first:y,last:x,widest:E,highest:O}=this._getLabelSizes(),I=i.padding*2,F=Ac(this.labelRotation),V=Math.cos(F),$=Math.sin(F);if(a){const K=i.mirror?0:$*E.width+V*O.height;e.height=Math.min(this.maxHeight,e.height+K+I)}else{const K=i.mirror?0:V*E.width+$*O.height;e.width=Math.min(this.maxWidth,e.width+K+I)}this._calculatePadding(y,x,$,V)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:c},position:a}=this.options,g=this.labelRotation!==0,y=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const x=this.getPixelForTick(0)-this.left,E=this.right-this.getPixelForTick(this.ticks.length-1);let O=0,I=0;g?y?(O=r*e.width,I=i*n.height):(O=i*e.height,I=r*n.width):s==="start"?I=n.width:s==="end"?O=e.width:s!=="inner"&&(O=e.width/2,I=n.width/2),this.paddingLeft=Math.max((O-x+c)*this.width/(this.width-x),0),this.paddingRight=Math.max((I-E+c)*this.width/(this.width-E),0)}else{let x=n.height/2,E=e.height/2;s==="start"?(x=0,E=e.height):s==="end"&&(x=n.height,E=0),this.paddingTop=x+c,this.paddingBottom=E+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Jn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)ki(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=GE(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,c=[],a=[],g=Math.floor(n/ZE(n,i));let y=0,x=0,E,O,I,F,V,$,K,Y,W,X,J;for(E=0;E<n;E+=g){if(F=e[E].label,V=this._resolveTickFontOptions(E),r.font=$=V.string,K=s[$]=s[$]||{data:{},gc:[]},Y=V.lineHeight,W=X=0,!ki(F)&&!da(F))W=j0(r,K.data,K.gc,W,F),X=Y;else if(da(F))for(O=0,I=F.length;O<I;++O)J=F[O],!ki(J)&&!da(J)&&(W=j0(r,K.data,K.gc,W,J),X+=Y);c.push(W),a.push(X),y=Math.max(W,y),x=Math.max(X,x)}J6(s,n);const st=c.indexOf(y),ct=a.indexOf(x),it=ut=>({width:c[ut]||0,height:a[ut]||0});return{first:it(0),last:it(n-1),widest:it(st),highest:it(ct),widths:c,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Rj(this._alignToPixels?Xd(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=e8(this.getContext(),e,i))}return this.$context||(this.$context=t8(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ac(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),c=e.autoSkipPadding||0,a=s?s.widest.width+c:0,g=s?s.highest.height+c:0;return this.isHorizontal()?g*i>a*r?a/i:g/r:g*r<a*i?g/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:c,border:a}=r,g=s.offset,y=this.isHorizontal(),E=this.ticks.length+(g?1:0),O=gy(s),I=[],F=a.setContext(this.getContext()),V=F.display?F.width:0,$=V/2,K=function(Nt){return Xd(i,Nt,V)};let Y,W,X,J,st,ct,it,ut,xt,wt,St,le;if(c==="top")Y=K(this.bottom),ct=this.bottom-O,ut=Y-$,wt=K(e.top)+$,le=e.bottom;else if(c==="bottom")Y=K(this.top),wt=e.top,le=K(e.bottom)-$,ct=Y+$,ut=this.top+O;else if(c==="left")Y=K(this.right),st=this.right-O,it=Y-$,xt=K(e.left)+$,St=e.right;else if(c==="right")Y=K(this.left),xt=e.left,St=K(e.right)-$,st=Y+$,it=this.left+O;else if(n==="x"){if(c==="center")Y=K((e.top+e.bottom)/2+.5);else if(Fi(c)){const Nt=Object.keys(c)[0],Ct=c[Nt];Y=K(this.chart.scales[Nt].getPixelForValue(Ct))}wt=e.top,le=e.bottom,ct=Y+$,ut=ct+O}else if(n==="y"){if(c==="center")Y=K((e.left+e.right)/2);else if(Fi(c)){const Nt=Object.keys(c)[0],Ct=c[Nt];Y=K(this.chart.scales[Nt].getPixelForValue(Ct))}st=Y-$,it=st-O,xt=e.left,St=e.right}const pe=ti(r.ticks.maxTicksLimit,E),Te=Math.max(1,Math.ceil(E/pe));for(W=0;W<E;W+=Te){const Nt=this.getContext(W),Ct=s.setContext(Nt),Tt=a.setContext(Nt),Bt=Ct.lineWidth,$t=Ct.color,ft=Tt.dash||[],Mt=Tt.dashOffset,Lt=Ct.tickWidth,Xt=Ct.tickColor,re=Ct.tickBorderDash||[],ce=Ct.tickBorderDashOffset;X=Q6(this,W,g),X!==void 0&&(J=Xd(i,X,Bt),y?st=it=xt=St=J:ct=ut=wt=le=J,I.push({tx1:st,ty1:ct,tx2:it,ty2:ut,x1:xt,y1:wt,x2:St,y2:le,width:Bt,color:$t,borderDash:ft,borderDashOffset:Mt,tickWidth:Lt,tickColor:Xt,tickBorderDash:re,tickBorderDashOffset:ce}))}return this._ticksLength=E,this._borderValue=Y,I}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,c=this.isHorizontal(),a=this.ticks,{align:g,crossAlign:y,padding:x,mirror:E}=s,O=gy(i.grid),I=O+x,F=E?-x:I,V=-Ac(this.labelRotation),$=[];let K,Y,W,X,J,st,ct,it,ut,xt,wt,St,le="middle";if(r==="top")st=this.bottom-F,ct=this._getXAxisLabelAlignment();else if(r==="bottom")st=this.top+F,ct=this._getXAxisLabelAlignment();else if(r==="left"){const Te=this._getYAxisLabelAlignment(O);ct=Te.textAlign,J=Te.x}else if(r==="right"){const Te=this._getYAxisLabelAlignment(O);ct=Te.textAlign,J=Te.x}else if(n==="x"){if(r==="center")st=(e.top+e.bottom)/2+I;else if(Fi(r)){const Te=Object.keys(r)[0],Nt=r[Te];st=this.chart.scales[Te].getPixelForValue(Nt)+I}ct=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")J=(e.left+e.right)/2-I;else if(Fi(r)){const Te=Object.keys(r)[0],Nt=r[Te];J=this.chart.scales[Te].getPixelForValue(Nt)}ct=this._getYAxisLabelAlignment(O).textAlign}n==="y"&&(g==="start"?le="top":g==="end"&&(le="bottom"));const pe=this._getLabelSizes();for(K=0,Y=a.length;K<Y;++K){W=a[K],X=W.label;const Te=s.setContext(this.getContext(K));it=this.getPixelForTick(K)+s.labelOffset,ut=this._resolveTickFontOptions(K),xt=ut.lineHeight,wt=da(X)?X.length:1;const Nt=wt/2,Ct=Te.color,Tt=Te.textStrokeColor,Bt=Te.textStrokeWidth;let $t=ct;c?(J=it,ct==="inner"&&(K===Y-1?$t=this.options.reverse?"left":"right":K===0?$t=this.options.reverse?"right":"left":$t="center"),r==="top"?y==="near"||V!==0?St=-wt*xt+xt/2:y==="center"?St=-pe.highest.height/2-Nt*xt+xt:St=-pe.highest.height+xt/2:y==="near"||V!==0?St=xt/2:y==="center"?St=pe.highest.height/2-Nt*xt:St=pe.highest.height-wt*xt,E&&(St*=-1),V!==0&&!Te.showLabelBackdrop&&(J+=xt/2*Math.sin(V))):(st=it,St=(1-wt)*xt/2);let ft;if(Te.showLabelBackdrop){const Mt=Xo(Te.backdropPadding),Lt=pe.heights[K],Xt=pe.widths[K];let re=St-Mt.top,ce=0-Mt.left;switch(le){case"middle":re-=Lt/2;break;case"bottom":re-=Lt;break}switch(ct){case"center":ce-=Xt/2;break;case"right":ce-=Xt;break;case"inner":K===Y-1?ce-=Xt:K>0&&(ce-=Xt/2);break}ft={left:ce,top:re,width:Xt+Mt.width,height:Lt+Mt.height,color:Te.backdropColor}}$.push({label:X,font:ut,textOffset:St,options:{rotation:V,color:Ct,strokeColor:Tt,strokeWidth:Bt,textAlign:$t,textBaseline:le,translation:[J,st],backdrop:ft}})}return $}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ac(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,c=this._getLabelSizes(),a=e+s,g=c.widest.width;let y,x;return n==="left"?r?(x=this.right+s,i==="near"?y="left":i==="center"?(y="center",x+=g/2):(y="right",x+=g)):(x=this.right-a,i==="near"?y="right":i==="center"?(y="center",x-=g/2):(y="left",x=this.left)):n==="right"?r?(x=this.left+s,i==="near"?y="right":i==="center"?(y="center",x-=g/2):(y="left",x-=g)):(x=this.left+a,i==="near"?y="left":i==="center"?(y="center",x+=g/2):(y="right",x=this.right)):y="right",{textAlign:y,x}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:c}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,c),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,c;const a=(g,y,x)=>{!x.width||!x.color||(i.save(),i.lineWidth=x.width,i.strokeStyle=x.color,i.setLineDash(x.borderDash||[]),i.lineDashOffset=x.borderDashOffset,i.beginPath(),i.moveTo(g.x,g.y),i.lineTo(y.x,y.y),i.stroke(),i.restore())};if(n.display)for(s=0,c=r.length;s<c;++s){const g=r[s];n.drawOnChartArea&&a({x:g.x1,y:g.y1},{x:g.x2,y:g.y2},g),n.drawTicks&&a({x:g.tx1,y:g.ty1},{x:g.tx2,y:g.ty2},{color:g.tickColor,width:g.tickWidth,borderDash:g.tickBorderDash,borderDashOffset:g.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),c=i.display?s.width:0;if(!c)return;const a=r.setContext(this.getContext(0)).lineWidth,g=this._borderValue;let y,x,E,O;this.isHorizontal()?(y=Xd(e,this.left,c)-c/2,x=Xd(e,this.right,a)+a/2,E=O=g):(E=Xd(e,this.top,c)-c/2,O=Xd(e,this.bottom,a)+a/2,y=x=g),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(y,E),n.lineTo(x,O),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Bx(i,r);const s=this.getLabelItems(e);for(const c of s){const a=c.options,g=c.font,y=c.label,x=c.textOffset;yp(i,y,0,x,g,a)}r&&jx(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Ls(i.font),c=Xo(i.padding),a=i.align;let g=s.lineHeight/2;n==="bottom"||n==="center"||Fi(n)?(g+=c.bottom,da(i.text)&&(g+=s.lineHeight*(i.text.length-1))):g+=c.top;const{titleX:y,titleY:x,maxWidth:E,rotation:O}=i8(this,g,n,a);yp(e,i.text,0,0,s,{color:i.color,maxWidth:E,rotation:O,textAlign:n8(a,n,r),textBaseline:"middle",translation:[y,x]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=ti(e.grid&&e.grid.z,-1),r=ti(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Mp.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,c;for(s=0,c=n.length;s<c;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ls(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class n0{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;s8(n)&&(i=this.register(n));const r=this.items,s=e.id,c=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,r8(e,c,i),this.override&&pa.override(e.id,e.overrides)),c}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in pa[r]&&(delete pa[r][i],this.override&&delete gp[i])}}function r8(t,e,n){const i=Gy(Object.create(null),[n?pa.get(n):{},pa.get(e),t.defaults]);pa.set(e,i),t.defaultRoutes&&a8(e,t.defaultRoutes),t.descriptors&&pa.describe(e,t.descriptors)}function a8(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),c=e[n].split("."),a=c.pop(),g=c.join(".");pa.route(s,r,g,a)})}function s8(t){return"id"in t&&"defaults"in t}class o8{constructor(){this.controllers=new n0(ad,"datasets",!0),this.elements=new n0(af,"elements"),this.plugins=new n0(Object,"plugins"),this.scales=new n0(Mp,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Pi(r,c=>{const a=i||this._getRegistryForType(c);this._exec(e,a,c)})})}_exec(e,n,i){const r=M2(e);Jn(i["before"+r],[],i),n[e](i),Jn(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Xc=new o8;class l8{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),c=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),c}_notify(e,n,i,r){r=r||{};for(const s of e){const c=s.plugin,a=c[i],g=[n,r,s.options];if(Jn(a,g,c)===!1&&r.cancelable)return!1}return!0}invalidate(){ki(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=ti(i.options&&i.options.plugins,{}),s=u8(i);return r===!1&&!n?[]:h8(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,c)=>s.filter(a=>!c.some(g=>a.plugin.id===g.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function u8(t){const e={},n=[],i=Object.keys(Xc.plugins.items);for(let s=0;s<i.length;s++)n.push(Xc.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const c=r[s];n.indexOf(c)===-1&&(n.push(c),e[c.id]=!0)}return{plugins:n,localIds:e}}function c8(t,e){return!e&&t===!1?null:t===!0?{}:t}function h8(t,{plugins:e,localIds:n},i,r){const s=[],c=t.getContext();for(const a of e){const g=a.id,y=c8(i[g],r);y!==null&&s.push({plugin:a,options:f8(t.config,{plugin:a,local:n[g]},y,c)})}return s}function f8(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),c=t.getOptionScopes(i,s);return n&&e.defaults&&c.push(e.defaults),t.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function uS(t,e){const n=pa.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function d8(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function p8(t,e){return t===e?"_index_":"_value_"}function WE(t){if(t==="x"||t==="y"||t==="r")return t}function m8(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function cS(t,...e){if(WE(t))return t;for(const n of e){const i=n.axis||m8(n.position)||t.length>1&&WE(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function XE(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function g8(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return XE(t,"x",n[0])||XE(t,"y",n[0])}return{}}function y8(t,e){const n=gp[t.type]||{scales:{}},i=e.scales||{},r=uS(t.type,e),s=Object.create(null);return Object.keys(i).forEach(c=>{const a=i[c];if(!Fi(a))return console.error(`Invalid scale configuration for scale: ${c}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const g=cS(c,a,g8(c,t),pa.scales[a.type]),y=p8(g,r),x=n.scales||{};s[c]=By(Object.create(null),[{axis:g},a,x[g],x[y]])}),t.data.datasets.forEach(c=>{const a=c.type||t.type,g=c.indexAxis||uS(a,e),x=(gp[a]||{}).scales||{};Object.keys(x).forEach(E=>{const O=d8(E,g),I=c[O+"AxisID"]||O;s[I]=s[I]||Object.create(null),By(s[I],[{axis:O},i[I],x[E]])})}),Object.keys(s).forEach(c=>{const a=s[c];By(a,[pa.scales[a.type],pa.scale])}),s}function yI(t){const e=t.options||(t.options={});e.plugins=ti(e.plugins,{}),e.scales=y8(t,e)}function _I(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function _8(t){return t=t||{},t.data=_I(t.data),yI(t),t}const KE=new Map,vI=new Set;function i0(t,e){let n=KE.get(t);return n||(n=e(),KE.set(t,n),vI.add(n)),n}const yy=(t,e,n)=>{const i=td(e,n);i!==void 0&&t.add(i)};class v8{constructor(e){this._config=_8(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=_I(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),yI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return i0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return i0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return i0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return i0(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,c=this._cachedScopes(e,i),a=c.get(n);if(a)return a;const g=new Set;n.forEach(x=>{e&&(g.add(e),x.forEach(E=>yy(g,e,E))),x.forEach(E=>yy(g,r,E)),x.forEach(E=>yy(g,gp[s]||{},E)),x.forEach(E=>yy(g,pa,E)),x.forEach(E=>yy(g,oS,E))});const y=Array.from(g);return y.length===0&&y.push(Object.create(null)),vI.has(n)&&c.set(n,y),y}chartOptionScopes(){const{options:e,type:n}=this;return[e,gp[n]||{},pa.datasets[n]||{},{type:n},pa,oS]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:c,subPrefixes:a}=QE(this._resolverCache,e,r);let g=c;if(b8(c,n)){s.$shared=!1,i=ed(i)?i():i;const y=this.createResolver(e,i,a);g=Ym(c,i,y)}for(const y of n)s[y]=g[y];return s}createResolver(e,n,i=[""],r){const{resolver:s}=QE(this._resolverCache,e,i);return Fi(n)?Ym(s,n,void 0,r):s}}function QE(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:O2(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const x8=t=>Fi(t)&&Object.getOwnPropertyNames(t).some(e=>ed(t[e]));function b8(t,e){const{isScriptable:n,isIndexable:i}=YD(t);for(const r of e){const s=n(r),c=i(r),a=(c||s)&&t[r];if(s&&(ed(a)||x8(a))||c&&da(a))return!0}return!1}var w8="4.5.1";const S8=["top","bottom","left","right","chartArea"];function JE(t,e){return t==="top"||t==="bottom"||S8.indexOf(t)===-1&&e==="x"}function tA(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function eA(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Jn(n&&n.onComplete,[t],e)}function T8(t){const e=t.chart,n=e.options.animation;Jn(n&&n.onProgress,[t],e)}function xI(t){return z2()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const C0={},nA=t=>{const e=xI(t);return Object.values(C0).filter(n=>n.canvas===e).pop()};function M8(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const c=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=c)}}}function E8(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}let sd=class{static defaults=pa;static instances=C0;static overrides=gp;static registry=Xc;static version=w8;static getChart=nA;static register(...e){Xc.add(...e),iA()}static unregister(...e){Xc.remove(...e),iA()}constructor(e,n){const i=this.config=new v8(n),r=xI(e),s=nA(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||q6(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,c.aspectRatio),g=a&&a.canvas,y=g&&g.height,x=g&&g.width;if(this.id=Sj(),this.ctx=a,this.canvas=g,this.width=x,this.height=y,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new l8,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Fj(E=>this.update(E),c.resizeDelay||0),this._dataChanges=[],C0[this.id]=this,!a||!g){console.error("Failed to create chart: can't acquire context from the given item");return}Bh.listen(this,"complete",eA),Bh.listen(this,"progress",T8),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return ki(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Xc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ME(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return wE(this.canvas,this.ctx),this}stop(){return Bh.stop(this),this}resize(e,n){Bh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),g=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,ME(this,a,!0)&&(this.notifyPlugins("resize",{size:c}),Jn(i.onResize,[this,c],this),this.attached&&this._doResize(g)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Pi(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((c,a)=>(c[a]=!1,c),{});let s=[];n&&(s=s.concat(Object.keys(n).map(c=>{const a=n[c],g=cS(c,a),y=g==="r",x=g==="x";return{options:a,dposition:y?"chartArea":x?"bottom":"left",dtype:y?"radialLinear":x?"category":"linear"}}))),Pi(s,c=>{const a=c.options,g=a.id,y=cS(g,a),x=ti(a.type,c.dtype);(a.position===void 0||JE(a.position,y)!==JE(c.dposition))&&(a.position=c.dposition),r[g]=!0;let E=null;if(g in i&&i[g].type===x)E=i[g];else{const O=Xc.getScale(x);E=new O({id:g,type:x,ctx:this.ctx,chart:this}),i[E.id]=E}E.init(a,e)}),Pi(r,(c,a)=>{c||delete i[a]}),Pi(i,c=>{Wo.configure(this,c,c.options),Wo.addBox(this,c)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(tA("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let c=this.getDatasetMeta(i);const a=s.type||this.config.type;if(c.type&&c.type!==a&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=a,c.indexAxis=s.indexAxis||uS(a,this.options),c.order=s.order||0,c.index=i,c.label=""+s.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const g=Xc.getController(a),{datasetElementType:y,dataElementType:x}=pa.datasets[a];Object.assign(g,{dataElementType:Xc.getElement(x),datasetElementType:y&&Xc.getElement(y)}),c.controller=new g(this,i),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){Pi(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let y=0,x=this.data.datasets.length;y<x;y++){const{controller:E}=this.getDatasetMeta(y),O=!r&&s.indexOf(E)===-1;E.buildOrUpdateElements(O),c=Math.max(+E.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||Pi(s,y=>{y.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(tA("z","_idx"));const{_active:a,_lastEvent:g}=this;g?this._eventHandler(g,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Pi(this.scales,e=>{Wo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!dE(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const c=i==="_removeElements"?-s:s;M8(e,r,c)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(c=>c[0]===s).map((c,a)=>a+","+c.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!dE(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Wo.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Pi(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ed(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Bh.has(this)?this.attached&&!Bh.running(this)&&Bh.start(this):(this.draw(),eA({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const c=n[r];(!e||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=aI(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Bx(n,r),e.controller.draw(),r&&jx(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return eh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=S6.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=rd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),c=s.controller._resolveAnimations(void 0,r);Yy(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),c.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Bh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),wE(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete C0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,c)=>{n.addEventListener(this,s,c),e[s]=c},r=(s,c,a)=>{s.offsetX=c,s.offsetY=a,this._eventHandler(s)};Pi(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(g,y)=>{n.addEventListener(this,g,y),e[g]=y},r=(g,y)=>{e[g]&&(n.removeEventListener(this,g,y),delete e[g])},s=(g,y)=>{this.canvas&&this.resize(g,y)};let c;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",c)};c=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():c()}unbindEvents(){Pi(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Pi(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,c,a,g;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,g=e.length;a<g;++a){c=e[a];const y=c&&this.getDatasetMeta(c.datasetIndex).controller;y&&y[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:c})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[c],index:c}});!R0(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(g,y)=>g.filter(x=>!y.some(E=>x.datasetIndex===E.datasetIndex&&x.index===E.index)),c=s(n,e),a=i?e:s(e,n);c.length&&this.updateHoverStyle(c,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=c=>(c.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,c=n,a=this._getActiveElements(e,r,i,c),g=Pj(e),y=E8(e,this._lastEvent,i,g);i&&(this._lastEvent=null,Jn(s.onHover,[e,a,this],this),g&&Jn(s.onClick,[e,a,this],this));const x=!R0(a,r);return(x||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=y,x}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}};function iA(){return Pi(sd.instances,t=>t._plugins.invalidate())}function A8(t,e,n){const{startAngle:i,x:r,y:s,outerRadius:c,innerRadius:a,options:g}=e,{borderWidth:y,borderJoinStyle:x}=g,E=Math.min(y/c,Go(i-n));if(t.beginPath(),t.arc(r,s,c-y/2,i+E/2,n-E/2),a>0){const O=Math.min(y/a,Go(i-n));t.arc(r,s,a+y/2,n-O/2,i+O/2,!0)}else{const O=Math.min(y/2,c*Go(i-n));if(x==="round")t.arc(r,s,O,n-rr/2,i+rr/2,!0);else if(x==="bevel"){const I=2*O*O,F=-I*Math.cos(n+rr/2)+r,V=-I*Math.sin(n+rr/2)+s,$=I*Math.cos(i+rr/2)+r,K=I*Math.sin(i+rr/2)+s;t.lineTo(F,V),t.lineTo($,K)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function C8(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:c,outerRadius:a,innerRadius:g}=e;let y=r/a;t.beginPath(),t.arc(s,c,a,i-y,n+y),g>r?(y=r/g,t.arc(s,c,g,n+y,i-y,!0)):t.arc(s,c,r,n+ns,i-ns),t.closePath(),t.clip()}function P8(t){return k2(t,["outerStart","outerEnd","innerStart","innerEnd"])}function k8(t,e,n,i){const r=P8(t.options.borderRadius),s=(n-e)/2,c=Math.min(s,i*e/2),a=g=>{const y=(n-Math.min(s,g))*i/2;return Xs(g,0,Math.min(s,y))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Xs(r.innerStart,0,c),innerEnd:Xs(r.innerEnd,0,c)}}function zm(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function V0(t,e,n,i,r,s){const{x:c,y:a,startAngle:g,pixelMargin:y,innerRadius:x}=e,E=Math.max(e.outerRadius+i+n-y,0),O=x>0?x+i+n+y:0;let I=0;const F=r-g;if(i){const Te=x>0?x-i:0,Nt=E>0?E-i:0,Ct=(Te+Nt)/2,Tt=Ct!==0?F*Ct/(Ct+i):F;I=(F-Tt)/2}const V=Math.max(.001,F*E-n/rr)/E,$=(F-V)/2,K=g+$+I,Y=r-$-I,{outerStart:W,outerEnd:X,innerStart:J,innerEnd:st}=k8(e,O,E,Y-K),ct=E-W,it=E-X,ut=K+W/ct,xt=Y-X/it,wt=O+J,St=O+st,le=K+J/wt,pe=Y-st/St;if(t.beginPath(),s){const Te=(ut+xt)/2;if(t.arc(c,a,E,ut,Te),t.arc(c,a,E,Te,xt),X>0){const Bt=zm(it,xt,c,a);t.arc(Bt.x,Bt.y,X,xt,Y+ns)}const Nt=zm(St,Y,c,a);if(t.lineTo(Nt.x,Nt.y),st>0){const Bt=zm(St,pe,c,a);t.arc(Bt.x,Bt.y,st,Y+ns,pe+Math.PI)}const Ct=(Y-st/O+(K+J/O))/2;if(t.arc(c,a,O,Y-st/O,Ct,!0),t.arc(c,a,O,Ct,K+J/O,!0),J>0){const Bt=zm(wt,le,c,a);t.arc(Bt.x,Bt.y,J,le+Math.PI,K-ns)}const Tt=zm(ct,K,c,a);if(t.lineTo(Tt.x,Tt.y),W>0){const Bt=zm(ct,ut,c,a);t.arc(Bt.x,Bt.y,W,K-ns,ut)}}else{t.moveTo(c,a);const Te=Math.cos(ut)*E+c,Nt=Math.sin(ut)*E+a;t.lineTo(Te,Nt);const Ct=Math.cos(xt)*E+c,Tt=Math.sin(xt)*E+a;t.lineTo(Ct,Tt)}t.closePath()}function O8(t,e,n,i,r){const{fullCircles:s,startAngle:c,circumference:a}=e;let g=e.endAngle;if(s){V0(t,e,n,i,g,r);for(let y=0;y<s;++y)t.fill();isNaN(a)||(g=c+(a%aa||aa))}return V0(t,e,n,i,g,r),t.fill(),g}function D8(t,e,n,i,r){const{fullCircles:s,startAngle:c,circumference:a,options:g}=e,{borderWidth:y,borderJoinStyle:x,borderDash:E,borderDashOffset:O,borderRadius:I}=g,F=g.borderAlign==="inner";if(!y)return;t.setLineDash(E||[]),t.lineDashOffset=O,F?(t.lineWidth=y*2,t.lineJoin=x||"round"):(t.lineWidth=y,t.lineJoin=x||"bevel");let V=e.endAngle;if(s){V0(t,e,n,i,V,r);for(let $=0;$<s;++$)t.stroke();isNaN(a)||(V=c+(a%aa||aa))}F&&C8(t,e,V),g.selfJoin&&V-c>=rr&&I===0&&x!=="miter"&&A8(t,e,V),s||(V0(t,e,n,i,V,r),t.stroke())}class I8 extends af{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.getProps(["x","y"],i),{angle:s,distance:c}=BD(r,{x:e,y:n}),{startAngle:a,endAngle:g,innerRadius:y,outerRadius:x,circumference:E}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),O=(this.options.spacing+this.options.borderWidth)/2,I=ti(E,g-a),F=Wy(s,a,g)&&a!==g,V=I>=aa||F,$=$h(c,y+O,x+O);return V&&$}getCenterPoint(e){const{x:n,y:i,startAngle:r,endAngle:s,innerRadius:c,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:g,spacing:y}=this.options,x=(r+s)/2,E=(c+a+y+g)/2;return{x:n+Math.cos(x)*E,y:i+Math.sin(x)*E}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,r=(n.offset||0)/4,s=(n.spacing||0)/2,c=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>aa?Math.floor(i/aa):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const g=1-Math.sin(Math.min(rr,i||0)),y=r*g;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,O8(e,this,y,s,c),D8(e,this,y,s,c),e.restore()}}function bI(t,e,n=e){t.lineCap=ti(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ti(n.borderDash,e.borderDash)),t.lineDashOffset=ti(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ti(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ti(n.borderWidth,e.borderWidth),t.strokeStyle=ti(n.borderColor,e.borderColor)}function z8(t,e,n){t.lineTo(n.x,n.y)}function L8(t){return t.stepped?Qj:t.tension||t.cubicInterpolationMode==="monotone"?Jj:z8}function wI(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:c,end:a}=e,g=Math.max(r,c),y=Math.min(s,a),x=r<c&&s<c||r>a&&s>a;return{count:i,start:g,loop:e.loop,ilen:y<g&&!x?i+y-g:y-g}}function R8(t,e,n,i){const{points:r,options:s}=e,{count:c,start:a,loop:g,ilen:y}=wI(r,n,i),x=L8(s);let{move:E=!0,reverse:O}=i||{},I,F,V;for(I=0;I<=y;++I)F=r[(a+(O?y-I:I))%c],!F.skip&&(E?(t.moveTo(F.x,F.y),E=!1):x(t,V,F,O,s.stepped),V=F);return g&&(F=r[(a+(O?y:0))%c],x(t,V,F,O,s.stepped)),!!g}function N8(t,e,n,i){const r=e.points,{count:s,start:c,ilen:a}=wI(r,n,i),{move:g=!0,reverse:y}=i||{};let x=0,E=0,O,I,F,V,$,K;const Y=X=>(c+(y?a-X:X))%s,W=()=>{V!==$&&(t.lineTo(x,$),t.lineTo(x,V),t.lineTo(x,K))};for(g&&(I=r[Y(0)],t.moveTo(I.x,I.y)),O=0;O<=a;++O){if(I=r[Y(O)],I.skip)continue;const X=I.x,J=I.y,st=X|0;st===F?(J<V?V=J:J>$&&($=J),x=(E*x+X)/++E):(W(),t.lineTo(X,J),F=st,E=0,V=$=J),K=J}W()}function hS(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?N8:R8}function B8(t){return t.stepped?OF:t.tension||t.cubicInterpolationMode==="monotone"?DF:tp}function j8(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),bI(t,e.options),t.stroke(r)}function F8(t,e,n,i){const{segments:r,options:s}=e,c=hS(e);for(const a of r)bI(t,s,a.style),t.beginPath(),c(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const U8=typeof Path2D=="function";function V8(t,e,n,i){U8&&!e.options.segment?j8(t,e,n,i):F8(t,e,n,i)}class v_ extends af{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;SF(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=BF(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,c=rI(this,{property:n,start:r,end:r});if(!c.length)return;const a=[],g=B8(i);let y,x;for(y=0,x=c.length;y<x;++y){const{start:E,end:O}=c[y],I=s[E],F=s[O];if(I===F){a.push(I);continue}const V=Math.abs((r-I[n])/(F[n]-I[n])),$=g(I,F,V,i.stepped);$[n]=e[n],a.push($)}return a.length===1?a[0]:a}pathSegment(e,n,i){return hS(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=hS(this);let c=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)c&=s(e,this,a,{start:n,end:n+i-1});return!!c}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),V8(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function rA(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class SI extends af{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.options,{x:s,y:c}=this.getProps(["x","y"],i);return Math.pow(e-s,2)+Math.pow(n-c,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,n){return rA(this,e,"x",n)}inYRange(e,n){return rA(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!eh(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,lS(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function TI(t,e){const{x:n,y:i,base:r,width:s,height:c}=t.getProps(["x","y","base","width","height"],e);let a,g,y,x,E;return t.horizontal?(E=c/2,a=Math.min(n,r),g=Math.max(n,r),y=i-E,x=i+E):(E=s/2,a=n-E,g=n+E,y=Math.min(i,r),x=Math.max(i,r)),{left:a,top:y,right:g,bottom:x}}function Kf(t,e,n,i){return t?0:Xs(e,n,i)}function $8(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=GD(i);return{t:Kf(r.top,s.top,0,n),r:Kf(r.right,s.right,0,e),b:Kf(r.bottom,s.bottom,0,n),l:Kf(r.left,s.left,0,e)}}function q8(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=up(r),c=Math.min(e,n),a=t.borderSkipped,g=i||Fi(r);return{topLeft:Kf(!g||a.top||a.left,s.topLeft,0,c),topRight:Kf(!g||a.top||a.right,s.topRight,0,c),bottomLeft:Kf(!g||a.bottom||a.left,s.bottomLeft,0,c),bottomRight:Kf(!g||a.bottom||a.right,s.bottomRight,0,c)}}function H8(t){const e=TI(t),n=e.right-e.left,i=e.bottom-e.top,r=$8(t,n/2,i/2),s=q8(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function p1(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&TI(t,i);return a&&(r||$h(e,a.left,a.right))&&(s||$h(n,a.top,a.bottom))}function Z8(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function G8(t,e){t.rect(e.x,e.y,e.w,e.h)}function m1(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,c=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+c,radius:t.radius}}class Y8 extends af{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:c}=H8(this),a=Z8(c.radius)?Xy:G8;e.save(),(c.w!==s.w||c.h!==s.h)&&(e.beginPath(),a(e,m1(c,n,s)),e.clip(),a(e,m1(s,-n,c)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,m1(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return p1(this,e,n,i)}inXRange(e,n){return p1(this,e,null,n)}inYRange(e,n){return p1(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var W8=Object.freeze({__proto__:null,ArcElement:I8,BarElement:Y8,LineElement:v_,PointElement:SI});const fS=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],aA=fS.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function MI(t){return fS[t%fS.length]}function EI(t){return aA[t%aA.length]}function X8(t,e){return t.borderColor=MI(e),t.backgroundColor=EI(e),++e}function K8(t,e){return t.backgroundColor=t.data.map(()=>MI(e++)),e}function Q8(t,e){return t.backgroundColor=t.data.map(()=>EI(e++)),e}function J8(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof R2?e=K8(n,e):r instanceof cI?e=Q8(n,e):r&&(e=X8(n,e))}}function sA(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function tU(t){return t&&(t.borderColor||t.backgroundColor)}function eU(){return pa.borderColor!=="rgba(0,0,0,0.1)"||pa.backgroundColor!=="rgba(0,0,0,0.1)"}var nU={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:s}=r,c=sA(i)||tU(r)||s&&sA(s)||eU();if(!n.forceOverride&&c)return;const a=J8(t);i.forEach(a)}};function iU(t,e,n,i,r){const s=r.samples||i;if(s>=n)return t.slice(e,e+n);const c=[],a=(n-2)/(s-2);let g=0;const y=e+n-1;let x=e,E,O,I,F,V;for(c[g++]=t[x],E=0;E<s-2;E++){let $=0,K=0,Y;const W=Math.floor((E+1)*a)+1+e,X=Math.min(Math.floor((E+2)*a)+1,n)+e,J=X-W;for(Y=W;Y<X;Y++)$+=t[Y].x,K+=t[Y].y;$/=J,K/=J;const st=Math.floor(E*a)+1+e,ct=Math.min(Math.floor((E+1)*a)+1,n)+e,{x:it,y:ut}=t[x];for(I=F=-1,Y=st;Y<ct;Y++)F=.5*Math.abs((it-$)*(t[Y].y-ut)-(it-t[Y].x)*(K-ut)),F>I&&(I=F,O=t[Y],V=Y);c[g++]=O,x=V}return c[g++]=t[y],c}function rU(t,e,n,i){let r=0,s=0,c,a,g,y,x,E,O,I,F,V;const $=[],K=e+n-1,Y=t[e].x,X=t[K].x-Y;for(c=e;c<e+n;++c){a=t[c],g=(a.x-Y)/X*i,y=a.y;const J=g|0;if(J===x)y<F?(F=y,E=c):y>V&&(V=y,O=c),r=(s*r+a.x)/++s;else{const st=c-1;if(!ki(E)&&!ki(O)){const ct=Math.min(E,O),it=Math.max(E,O);ct!==I&&ct!==st&&$.push({...t[ct],x:r}),it!==I&&it!==st&&$.push({...t[it],x:r})}c>0&&st!==I&&$.push(t[st]),$.push(a),x=J,s=0,F=V=y,E=O=I=c}}return $}function AI(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function oA(t){t.data.datasets.forEach(e=>{AI(e)})}function aU(t,e){const n=e.length;let i=0,r;const{iScale:s}=t,{min:c,max:a,minDefined:g,maxDefined:y}=s.getUserBounds();return g&&(i=Xs(qh(e,s.axis,c).lo,0,n-1)),y?r=Xs(qh(e,s.axis,a).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var sU={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){oA(t);return}const i=t.width;t.data.datasets.forEach((r,s)=>{const{_data:c,indexAxis:a}=r,g=t.getDatasetMeta(s),y=c||r.data;if(Iy([a,t.options.indexAxis])==="y"||!g.controller.supportsDecimation)return;const x=t.scales[g.xAxisID];if(x.type!=="linear"&&x.type!=="time"||t.options.parsing)return;let{start:E,count:O}=aU(g,y);const I=n.threshold||4*i;if(O<=I){AI(r);return}ki(c)&&(r._data=y,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(V){this._data=V}}));let F;switch(n.algorithm){case"lttb":F=iU(y,E,O,i,n);break;case"min-max":F=rU(y,E,O,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=F})},destroy(t){oA(t)}};function oU(t,e,n){const i=t.segments,r=t.points,s=e.points,c=[];for(const a of i){let{start:g,end:y}=a;y=Vx(g,y,r);const x=dS(n,r[g],r[y],a.loop);if(!e.segments){c.push({source:a,target:x,start:r[g],end:r[y]});continue}const E=rI(e,x);for(const O of E){const I=dS(n,s[O.start],s[O.end],O.loop),F=iI(a,r,I);for(const V of F)c.push({source:V,target:O,start:{[n]:lA(x,I,"start",Math.max)},end:{[n]:lA(x,I,"end",Math.min)}})}}return c}function dS(t,e,n,i){if(i)return;let r=e[t],s=n[t];return t==="angle"&&(r=Go(r),s=Go(s)),{property:t,start:r,end:s}}function lU(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach(({start:c,end:a})=>{a=Vx(c,a,r);const g=r[c],y=r[a];i!==null?(s.push({x:g.x,y:i}),s.push({x:y.x,y:i})):n!==null&&(s.push({x:n,y:g.y}),s.push({x:n,y:y.y}))}),s}function Vx(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function lA(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function CI(t,e){let n=[],i=!1;return da(t)?(i=!0,n=t):n=lU(t,e),n.length?new v_({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function uA(t){return t&&t.fill!==!1}function uU(t,e,n){let r=t[e].fill;const s=[e];let c;if(!n)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!qa(r))return r;if(c=t[r],!c)return!1;if(c.visible)return r;s.push(r),r=c.fill}return!1}function cU(t,e,n){const i=pU(t);if(Fi(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return qa(r)&&Math.floor(r)===r?hU(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function hU(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function fU(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Fi(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function dU(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:Fi(t)?i=t.value:i=e.getBaseValue(),i}function pU(t){const e=t.options,n=e.fill;let i=ti(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function mU(t){const{scale:e,index:n,line:i}=t,r=[],s=i.segments,c=i.points,a=gU(e,n);a.push(CI({x:null,y:e.bottom},i));for(let g=0;g<s.length;g++){const y=s[g];for(let x=y.start;x<=y.end;x++)yU(r,c[x],a)}return new v_({points:r,options:{}})}function gU(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function yU(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:c,last:a,point:g}=_U(s,e,"x");if(!(!g||c&&a)){if(c)i.unshift(g);else if(t.push(g),!a)break}}t.push(...i)}function _U(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,c=t.points;let a=!1,g=!1;for(let y=0;y<s.length;y++){const x=s[y],E=c[x.start][n],O=c[x.end][n];if($h(r,E,O)){a=r===E,g=r===O;break}}return{first:a,last:g,point:i}}class PI{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:r,y:s,radius:c}=this;return n=n||{start:0,end:aa},e.arc(r,s,c,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:r}=this,s=e.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function vU(t){const{chart:e,fill:n,line:i}=t;if(qa(n))return xU(e,n);if(n==="stack")return mU(t);if(n==="shape")return!0;const r=bU(t);return r instanceof PI?r:CI(r,i)}function xU(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function bU(t){return(t.scale||{}).getPointPositionForValue?SU(t):wU(t)}function wU(t){const{scale:e={},fill:n}=t,i=fU(n,e);if(qa(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function SU(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,c=dU(n,e,s),a=[];if(i.grid.circular){const g=e.getPointPositionForValue(0,s);return new PI({x:g.x,y:g.y,radius:e.getDistanceFromCenterForValue(c)})}for(let g=0;g<r;++g)a.push(e.getPointPositionForValue(g,c));return a}function g1(t,e,n){const i=vU(e),{chart:r,index:s,line:c,scale:a,axis:g}=e,y=c.options,x=y.fill,E=y.backgroundColor,{above:O=E,below:I=E}=x||{},F=r.getDatasetMeta(s),V=aI(r,F);i&&c.points.length&&(Bx(t,n),TU(t,{line:c,target:i,above:O,below:I,area:n,scale:a,axis:g,clip:V}),jx(t))}function TU(t,e){const{line:n,target:i,above:r,below:s,area:c,scale:a,clip:g}=e,y=n._loop?"angle":e.axis;t.save();let x=s;s!==r&&(y==="x"?(cA(t,i,c.top),y1(t,{line:n,target:i,color:r,scale:a,property:y,clip:g}),t.restore(),t.save(),cA(t,i,c.bottom)):y==="y"&&(hA(t,i,c.left),y1(t,{line:n,target:i,color:s,scale:a,property:y,clip:g}),t.restore(),t.save(),hA(t,i,c.right),x=r)),y1(t,{line:n,target:i,color:x,scale:a,property:y,clip:g}),t.restore()}function cA(t,e,n){const{segments:i,points:r}=e;let s=!0,c=!1;t.beginPath();for(const a of i){const{start:g,end:y}=a,x=r[g],E=r[Vx(g,y,r)];s?(t.moveTo(x.x,x.y),s=!1):(t.lineTo(x.x,n),t.lineTo(x.x,x.y)),c=!!e.pathSegment(t,a,{move:c}),c?t.closePath():t.lineTo(E.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function hA(t,e,n){const{segments:i,points:r}=e;let s=!0,c=!1;t.beginPath();for(const a of i){const{start:g,end:y}=a,x=r[g],E=r[Vx(g,y,r)];s?(t.moveTo(x.x,x.y),s=!1):(t.lineTo(n,x.y),t.lineTo(x.x,x.y)),c=!!e.pathSegment(t,a,{move:c}),c?t.closePath():t.lineTo(n,E.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function y1(t,e){const{line:n,target:i,property:r,color:s,scale:c,clip:a}=e,g=oU(n,i,r);for(const{source:y,target:x,start:E,end:O}of g){const{style:{backgroundColor:I=s}={}}=y,F=i!==!0;t.save(),t.fillStyle=I,MU(t,c,a,F&&dS(r,E,O)),t.beginPath();const V=!!n.pathSegment(t,y);let $;if(F){V?t.closePath():fA(t,i,O,r);const K=!!i.pathSegment(t,x,{move:V,reverse:!0});$=V&&K,$||fA(t,i,E,r)}t.closePath(),t.fill($?"evenodd":"nonzero"),t.restore()}}function MU(t,e,n,i){const r=e.chart.chartArea,{property:s,start:c,end:a}=i||{};if(s==="x"||s==="y"){let g,y,x,E;s==="x"?(g=c,y=r.top,x=a,E=r.bottom):(g=r.left,y=c,x=r.right,E=a),t.beginPath(),n&&(g=Math.max(g,n.left),x=Math.min(x,n.right),y=Math.max(y,n.top),E=Math.min(E,n.bottom)),t.rect(g,y,x-g,E-y),t.clip()}}function fA(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var EU={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,c,a,g;for(c=0;c<i;++c)s=t.getDatasetMeta(c),a=s.dataset,g=null,a&&a.options&&a instanceof v_&&(g={visible:t.isDatasetVisible(c),index:c,fill:cU(a,c,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=g,r.push(g);for(c=0;c<i;++c)g=r[c],!(!g||g.fill===!1)&&(g.fill=uU(r,c,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let c=r.length-1;c>=0;--c){const a=r[c].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&g1(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;uA(s)&&g1(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!uA(i)||n.drawTime!=="beforeDatasetDraw"||g1(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const dA=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},AU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class pA extends af{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Jn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Ls(i.font),s=r.size,c=this._computeTitleHeight(),{boxWidth:a,itemHeight:g}=dA(i,s);let y,x;n.font=r.string,this.isHorizontal()?(y=this.maxWidth,x=this._fitRows(c,s,a,g)+10):(x=this.maxHeight,y=this._fitCols(c,r,a,g)+10),this.width=Math.min(y,e.maxWidth||this.maxWidth),this.height=Math.min(x,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:c,options:{labels:{padding:a}}}=this,g=this.legendHitBoxes=[],y=this.lineWidths=[0],x=r+a;let E=e;s.textAlign="left",s.textBaseline="middle";let O=-1,I=-x;return this.legendItems.forEach((F,V)=>{const $=i+n/2+s.measureText(F.text).width;(V===0||y[y.length-1]+$+2*a>c)&&(E+=x,y[y.length-(V>0?0:1)]=0,I+=x,O++),g[V]={left:0,top:I,row:O,width:$,height:r},y[y.length-1]+=$+a}),E}_fitCols(e,n,i,r){const{ctx:s,maxHeight:c,options:{labels:{padding:a}}}=this,g=this.legendHitBoxes=[],y=this.columnSizes=[],x=c-e;let E=a,O=0,I=0,F=0,V=0;return this.legendItems.forEach(($,K)=>{const{itemWidth:Y,itemHeight:W}=CU(i,n,s,$,r);K>0&&I+W+2*a>x&&(E+=O+a,y.push({width:O,height:I}),F+=O+a,V++,O=I=0),g[K]={left:F,top:I,col:V,width:Y,height:W},O=Math.max(O,Y),I+=W+a}),E+=O,y.push({width:O,height:I}),E}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,c=qm(s,this.left,this.width);if(this.isHorizontal()){let a=0,g=Ho(i,this.left+r,this.right-this.lineWidths[a]);for(const y of n)a!==y.row&&(a=y.row,g=Ho(i,this.left+r,this.right-this.lineWidths[a])),y.top+=this.top+e+r,y.left=c.leftForLtr(c.x(g),y.width),g+=y.width+r}else{let a=0,g=Ho(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const y of n)y.col!==a&&(a=y.col,g=Ho(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),y.top=g,y.left+=this.left+r,y.left=c.leftForLtr(c.x(y.left),y.width),g+=y.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Bx(e,this),this._draw(),jx(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:c}=e,a=pa.color,g=qm(e.rtl,this.left,this.width),y=Ls(c.font),{padding:x}=c,E=y.size,O=E/2;let I;this.drawTitle(),r.textAlign=g.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=y.string;const{boxWidth:F,boxHeight:V,itemHeight:$}=dA(c,E),K=function(st,ct,it){if(isNaN(F)||F<=0||isNaN(V)||V<0)return;r.save();const ut=ti(it.lineWidth,1);if(r.fillStyle=ti(it.fillStyle,a),r.lineCap=ti(it.lineCap,"butt"),r.lineDashOffset=ti(it.lineDashOffset,0),r.lineJoin=ti(it.lineJoin,"miter"),r.lineWidth=ut,r.strokeStyle=ti(it.strokeStyle,a),r.setLineDash(ti(it.lineDash,[])),c.usePointStyle){const xt={radius:V*Math.SQRT2/2,pointStyle:it.pointStyle,rotation:it.rotation,borderWidth:ut},wt=g.xPlus(st,F/2),St=ct+O;ZD(r,xt,wt,St,c.pointStyleWidth&&F)}else{const xt=ct+Math.max((E-V)/2,0),wt=g.leftForLtr(st,F),St=up(it.borderRadius);r.beginPath(),Object.values(St).some(le=>le!==0)?Xy(r,{x:wt,y:xt,w:F,h:V,radius:St}):r.rect(wt,xt,F,V),r.fill(),ut!==0&&r.stroke()}r.restore()},Y=function(st,ct,it){yp(r,it.text,st,ct+$/2,y,{strikethrough:it.hidden,textAlign:g.textAlign(it.textAlign)})},W=this.isHorizontal(),X=this._computeTitleHeight();W?I={x:Ho(s,this.left+x,this.right-i[0]),y:this.top+x+X,line:0}:I={x:this.left+x,y:Ho(s,this.top+X+x,this.bottom-n[0].height),line:0},tI(this.ctx,e.textDirection);const J=$+x;this.legendItems.forEach((st,ct)=>{r.strokeStyle=st.fontColor,r.fillStyle=st.fontColor;const it=r.measureText(st.text).width,ut=g.textAlign(st.textAlign||(st.textAlign=c.textAlign)),xt=F+O+it;let wt=I.x,St=I.y;g.setWidth(this.width),W?ct>0&&wt+xt+x>this.right&&(St=I.y+=J,I.line++,wt=I.x=Ho(s,this.left+x,this.right-i[I.line])):ct>0&&St+J>this.bottom&&(wt=I.x=wt+n[I.line].width+x,I.line++,St=I.y=Ho(s,this.top+X+x,this.bottom-n[I.line].height));const le=g.x(wt);if(K(le,St,st),wt=Uj(ut,wt+F+O,W?wt+xt:this.right,e.rtl),Y(g.x(wt),St,st),W)I.x+=xt+x;else if(typeof st.text!="string"){const pe=y.lineHeight;I.y+=kI(st,pe)+x}else I.y+=J}),eI(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Ls(n.font),r=Xo(n.padding);if(!n.display)return;const s=qm(e.rtl,this.left,this.width),c=this.ctx,a=n.position,g=i.size/2,y=r.top+g;let x,E=this.left,O=this.width;if(this.isHorizontal())O=Math.max(...this.lineWidths),x=this.top+y,E=Ho(e.align,E,this.right-O);else{const F=this.columnSizes.reduce((V,$)=>Math.max(V,$.height),0);x=y+Ho(e.align,this.top,this.bottom-F-e.labels.padding-this._computeTitleHeight())}const I=Ho(a,E,E+O);c.textAlign=s.textAlign(C2(a)),c.textBaseline="middle",c.strokeStyle=n.color,c.fillStyle=n.color,c.font=i.string,yp(c,n.text,I,x,i)}_computeTitleHeight(){const e=this.options.title,n=Ls(e.font),i=Xo(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if($h(e,this.left,this.right)&&$h(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],$h(e,r.left,r.left+r.width)&&$h(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!OU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=AU(r,i);r&&!s&&Jn(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Jn(n.onHover,[e,i,this],this)}else i&&Jn(n.onClick,[e,i,this],this)}}function CU(t,e,n,i,r){const s=PU(i,t,e,n),c=kU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:c}}function PU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,c)=>s.length>c.length?s:c)),e+n.size/2+i.measureText(r).width}function kU(t,e,n){let i=t;return typeof e.text!="string"&&(i=kI(e,n)),i}function kI(t,e){const n=t.text?t.text.length:0;return e*n}function OU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var OI={id:"legend",_element:pA,start(t,e,n){const i=t.legend=new pA({ctx:t.ctx,options:n,chart:t});Wo.configure(t,i,n),Wo.addBox(t,i)},stop(t){Wo.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Wo.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:c,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(g=>{const y=g.controller.getStyle(n?0:void 0),x=Xo(y.borderWidth);return{text:e[g.index].label,fillStyle:y.backgroundColor,fontColor:s,hidden:!g.visible,lineCap:y.borderCapStyle,lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:y.borderColor,pointStyle:i||y.pointStyle,rotation:y.rotation,textAlign:r||y.textAlign,borderRadius:c&&(a||y.borderRadius),datasetIndex:g.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class B2 extends af{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=da(i.text)?i.text.length:1;this._padding=Xo(i.padding);const s=r*Ls(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:c}=this,a=c.align;let g=0,y,x,E;return this.isHorizontal()?(x=Ho(a,i,s),E=n+e,y=s-i):(c.position==="left"?(x=i+e,E=Ho(a,r,n),g=rr*-.5):(x=s-e,E=Ho(a,n,r),g=rr*.5),y=r-n),{titleX:x,titleY:E,maxWidth:y,rotation:g}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=Ls(n.font),s=i.lineHeight/2+this._padding.top,{titleX:c,titleY:a,maxWidth:g,rotation:y}=this._drawArgs(s);yp(e,n.text,0,0,i,{color:n.color,maxWidth:g,rotation:y,textAlign:C2(n.align),textBaseline:"middle",translation:[c,a]})}}function DU(t,e){const n=new B2({ctx:t.ctx,options:e,chart:t});Wo.configure(t,n,e),Wo.addBox(t,n),t.titleBlock=n}var DI={id:"title",_element:B2,start(t,e,n){DU(t,n)},stop(t){const e=t.titleBlock;Wo.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Wo.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const r0=new WeakMap;var IU={id:"subtitle",start(t,e,n){const i=new B2({ctx:t.ctx,options:n,chart:t});Wo.configure(t,i,n),Wo.addBox(t,i),r0.set(t,i)},stop(t){Wo.removeBox(t,r0.get(t)),r0.delete(t)},beforeUpdate(t,e,n){const i=r0.get(t);Wo.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ly={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const g=a.tooltipPosition();i.add(g.x),r+=g.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,g)=>a+g)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,c,a;for(s=0,c=t.length;s<c;++s){const g=t[s].element;if(g&&g.hasValue()){const y=g.getCenterPoint(),x=sS(e,y);x<r&&(r=x,a=g)}}if(a){const g=a.tooltipPosition();n=g.x,i=g.y}return{x:n,y:i}}};function Wc(t,e){return e&&(da(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function jh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function zU(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:c,value:a}=s.getLabelAndValue(r);return{chart:t,label:c,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function mA(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:c,boxHeight:a}=e,g=Ls(e.bodyFont),y=Ls(e.titleFont),x=Ls(e.footerFont),E=s.length,O=r.length,I=i.length,F=Xo(e.padding);let V=F.height,$=0,K=i.reduce((X,J)=>X+J.before.length+J.lines.length+J.after.length,0);if(K+=t.beforeBody.length+t.afterBody.length,E&&(V+=E*y.lineHeight+(E-1)*e.titleSpacing+e.titleMarginBottom),K){const X=e.displayColors?Math.max(a,g.lineHeight):g.lineHeight;V+=I*X+(K-I)*g.lineHeight+(K-1)*e.bodySpacing}O&&(V+=e.footerMarginTop+O*x.lineHeight+(O-1)*e.footerSpacing);let Y=0;const W=function(X){$=Math.max($,n.measureText(X).width+Y)};return n.save(),n.font=y.string,Pi(t.title,W),n.font=g.string,Pi(t.beforeBody.concat(t.afterBody),W),Y=e.displayColors?c+2+e.boxPadding:0,Pi(i,X=>{Pi(X.before,W),Pi(X.lines,W),Pi(X.after,W)}),Y=0,n.font=x.string,Pi(t.footer,W),n.restore(),$+=F.width,{width:$,height:V}}function LU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function RU(t,e,n,i){const{x:r,width:s}=i,c=n.caretSize+n.caretPadding;if(t==="left"&&r+s+c>e.width||t==="right"&&r-s-c<0)return!0}function NU(t,e,n,i){const{x:r,width:s}=n,{width:c,chartArea:{left:a,right:g}}=t;let y="center";return i==="center"?y=r<=(a+g)/2?"left":"right":r<=s/2?y="left":r>=c-s/2&&(y="right"),RU(y,t,e,n)&&(y="center"),y}function gA(t,e,n){const i=n.yAlign||e.yAlign||LU(t,n);return{xAlign:n.xAlign||e.xAlign||NU(t,e,n,i),yAlign:i}}function BU(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function jU(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function yA(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:c}=t,{xAlign:a,yAlign:g}=n,y=r+s,{topLeft:x,topRight:E,bottomLeft:O,bottomRight:I}=up(c);let F=BU(e,a);const V=jU(e,g,y);return g==="center"?a==="left"?F+=y:a==="right"&&(F-=y):a==="left"?F-=Math.max(x,O)+r:a==="right"&&(F+=Math.max(E,I)+r),{x:Xs(F,0,i.width-e.width),y:Xs(V,0,i.height-e.height)}}function a0(t,e,n){const i=Xo(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function _A(t){return Wc([],jh(t))}function FU(t,e,n){return rd(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function vA(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const II={beforeTitle:Nh,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Nh,beforeBody:Nh,beforeLabel:Nh,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ki(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Nh,afterBody:Nh,beforeFooter:Nh,footer:Nh,afterFooter:Nh};function jl(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?II[e].call(n,i):r}let xA=class extends af{static positioners=Ly;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new sI(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=FU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=jl(i,"beforeTitle",this,e),s=jl(i,"title",this,e),c=jl(i,"afterTitle",this,e);let a=[];return a=Wc(a,jh(r)),a=Wc(a,jh(s)),a=Wc(a,jh(c)),a}getBeforeBody(e,n){return _A(jl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Pi(e,s=>{const c={before:[],lines:[],after:[]},a=vA(i,s);Wc(c.before,jh(jl(a,"beforeLabel",this,s))),Wc(c.lines,jl(a,"label",this,s)),Wc(c.after,jh(jl(a,"afterLabel",this,s))),r.push(c)}),r}getAfterBody(e,n){return _A(jl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=jl(i,"beforeFooter",this,e),s=jl(i,"footer",this,e),c=jl(i,"afterFooter",this,e);let a=[];return a=Wc(a,jh(r)),a=Wc(a,jh(s)),a=Wc(a,jh(c)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],c=[];let a=[],g,y;for(g=0,y=n.length;g<y;++g)a.push(zU(this.chart,n[g]));return e.filter&&(a=a.filter((x,E,O)=>e.filter(x,E,O,i))),e.itemSort&&(a=a.sort((x,E)=>e.itemSort(x,E,i))),Pi(a,x=>{const E=vA(e.callbacks,x);r.push(jl(E,"labelColor",this,x)),s.push(jl(E,"labelPointStyle",this,x)),c.push(jl(E,"labelTextColor",this,x))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=c,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,c=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Ly[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const g=this._size=mA(this,i),y=Object.assign({},a,g),x=gA(this.chart,i,y),E=yA(i,y,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,s={opacity:1,x:E.x,y:E.y,width:g.width,height:g.height,caretX:a.x,caretY:a.y}}this._tooltipItems=c,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:c,cornerRadius:a}=i,{topLeft:g,topRight:y,bottomLeft:x,bottomRight:E}=up(a),{x:O,y:I}=e,{width:F,height:V}=n;let $,K,Y,W,X,J;return s==="center"?(X=I+V/2,r==="left"?($=O,K=$-c,W=X+c,J=X-c):($=O+F,K=$+c,W=X-c,J=X+c),Y=$):(r==="left"?K=O+Math.max(g,x)+c:r==="right"?K=O+F-Math.max(y,E)-c:K=this.caretX,s==="top"?(W=I,X=W-c,$=K-c,Y=K+c):(W=I+V,X=W+c,$=K+c,Y=K-c),J=W),{x1:$,x2:K,x3:Y,y1:W,y2:X,y3:J}}drawTitle(e,n,i){const r=this.title,s=r.length;let c,a,g;if(s){const y=qm(i.rtl,this.x,this.width);for(e.x=a0(this,i.titleAlign,i),n.textAlign=y.textAlign(i.titleAlign),n.textBaseline="middle",c=Ls(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=c.string,g=0;g<s;++g)n.fillText(r[g],y.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+a,g+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const c=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:g,boxWidth:y}=s,x=Ls(s.bodyFont),E=a0(this,"left",s),O=r.x(E),I=g<x.lineHeight?(x.lineHeight-g)/2:0,F=n.y+I;if(s.usePointStyle){const V={radius:Math.min(y,g)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},$=r.leftForLtr(O,y)+y/2,K=F+g/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,lS(e,V,$,K),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,lS(e,V,$,K)}else{e.lineWidth=Fi(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const V=r.leftForLtr(O,y),$=r.leftForLtr(r.xPlus(O,1),y-2),K=up(c.borderRadius);Object.values(K).some(Y=>Y!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Xy(e,{x:V,y:F,w:y,h:g,radius:K}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),Xy(e,{x:$,y:F+1,w:y-2,h:g-2,radius:K}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(V,F,y,g),e.strokeRect(V,F,y,g),e.fillStyle=c.backgroundColor,e.fillRect($,F+1,y-2,g-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:c,displayColors:a,boxHeight:g,boxWidth:y,boxPadding:x}=i,E=Ls(i.bodyFont);let O=E.lineHeight,I=0;const F=qm(i.rtl,this.x,this.width),V=function(it){n.fillText(it,F.x(e.x+I),e.y+O/2),e.y+=O+s},$=F.textAlign(c);let K,Y,W,X,J,st,ct;for(n.textAlign=c,n.textBaseline="middle",n.font=E.string,e.x=a0(this,$,i),n.fillStyle=i.bodyColor,Pi(this.beforeBody,V),I=a&&$!=="right"?c==="center"?y/2+x:y+2+x:0,X=0,st=r.length;X<st;++X){for(K=r[X],Y=this.labelTextColors[X],n.fillStyle=Y,Pi(K.before,V),W=K.lines,a&&W.length&&(this._drawColorBox(n,e,X,F,i),O=Math.max(E.lineHeight,g)),J=0,ct=W.length;J<ct;++J)V(W[J]),O=E.lineHeight;Pi(K.after,V)}I=0,O=E.lineHeight,Pi(this.afterBody,V),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let c,a;if(s){const g=qm(i.rtl,this.x,this.width);for(e.x=a0(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=g.textAlign(i.footerAlign),n.textBaseline="middle",c=Ls(i.footerFont),n.fillStyle=i.footerColor,n.font=c.string,a=0;a<s;++a)n.fillText(r[a],g.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:c}=this,{x:a,y:g}=e,{width:y,height:x}=i,{topLeft:E,topRight:O,bottomLeft:I,bottomRight:F}=up(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+E,g),c==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+y-O,g),n.quadraticCurveTo(a+y,g,a+y,g+O),c==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+y,g+x-F),n.quadraticCurveTo(a+y,g+x,a+y-F,g+x),c==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+I,g+x),n.quadraticCurveTo(a,g+x,a,g+x-I),c==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,g+E),n.quadraticCurveTo(a,g,a+E,g),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const c=Ly[e.position].call(this,this._active,this._eventPosition);if(!c)return;const a=this._size=mA(this,e),g=Object.assign({},c,this._size),y=gA(n,e,g),x=yA(e,g,y,n);(r._to!==x.x||s._to!==x.y)&&(this.xAlign=y.xAlign,this.yAlign=y.yAlign,this.width=a.width,this.height=a.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=Xo(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),tI(e,n.textDirection),s.y+=c.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),eI(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:g})=>{const y=this.chart.getDatasetMeta(a);if(!y)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:y.data[g],index:g}}),s=!R0(i,r),c=this._positionChanged(r,n);(s||c)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],c=this._getActiveElements(e,s,n,i),a=this._positionChanged(c,e),g=n||!R0(c,s)||a;return g&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),g}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const c=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&c.reverse(),c}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,c=Ly[s.position].call(this,e,n);return c!==!1&&(i!==c.x||r!==c.y)}};var zI={id:"tooltip",_element:xA,positioners:Ly,afterInit(t,e,n){n&&(t.tooltip=new xA({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:II},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},UU=Object.freeze({__proto__:null,Colors:nU,Decimation:sU,Filler:EU,Legend:OI,SubTitle:IU,Title:DI,Tooltip:zI});const VU=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function $U(t,e,n,i){const r=t.indexOf(e);if(r===-1)return VU(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const qU=(t,e)=>t===null?null:Xs(Math.round(t),0,e);function bA(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class LI extends Mp{static id="category";static defaults={ticks:{callback:bA}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ki(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:$U(i,e,ti(n,e),this._addedLabels),qU(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=e;c<=n;c++)r.push({value:c});return r}getLabelForValue(e){return bA.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function HU(t,e){const n=[],{bounds:r,step:s,min:c,max:a,precision:g,count:y,maxTicks:x,maxDigits:E,includeBounds:O}=t,I=s||1,F=x-1,{min:V,max:$}=e,K=!ki(c),Y=!ki(a),W=!ki(y),X=($-V)/(E+1);let J=mE(($-V)/F/I)*I,st,ct,it,ut;if(J<1e-14&&!K&&!Y)return[{value:V},{value:$}];ut=Math.ceil($/J)-Math.floor(V/J),ut>F&&(J=mE(ut*J/F/I)*I),ki(g)||(st=Math.pow(10,g),J=Math.ceil(J*st)/st),r==="ticks"?(ct=Math.floor(V/J)*J,it=Math.ceil($/J)*J):(ct=V,it=$),K&&Y&&s&&zj((a-c)/s,J/1e3)?(ut=Math.round(Math.min((a-c)/J,x)),J=(a-c)/ut,ct=c,it=a):W?(ct=K?c:ct,it=Y?a:it,ut=y-1,J=(it-ct)/ut):(ut=(it-ct)/J,lp(ut,Math.round(ut),J/1e3)?ut=Math.round(ut):ut=Math.ceil(ut));const xt=Math.max(gE(J),gE(ct));st=Math.pow(10,ki(g)?xt:g),ct=Math.round(ct*st)/st,it=Math.round(it*st)/st;let wt=0;for(K&&(O&&ct!==c?(n.push({value:c}),ct<c&&wt++,lp(Math.round((ct+wt*J)*st)/st,c,wA(c,X,t))&&wt++):ct<c&&wt++);wt<ut;++wt){const St=Math.round((ct+wt*J)*st)/st;if(Y&&St>a)break;n.push({value:St})}return Y&&O&&it!==a?n.length&&lp(n[n.length-1].value,a,wA(a,X,t))?n[n.length-1].value=a:n.push({value:a}):(!Y||it===a)&&n.push({value:it}),n}function wA(t,e,{horizontal:n,minRotation:i}){const r=Ac(i),s=(n?Math.sin(r):Math.cos(r))||.001,c=.75*e*(""+t).length;return Math.min(e/s,c)}class $0 extends Mp{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ki(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const c=g=>r=n?r:g,a=g=>s=i?s:g;if(e){const g=$u(r),y=$u(s);g<0&&y<0?a(0):g>0&&y>0&&c(0)}if(r===s){let g=s===0?1:Math.abs(s*.05);a(s+g),e||c(r-g)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,c=HU(r,s);return e.bounds==="ticks"&&ND(c,this,"value"),e.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return __(e,this.chart.options.locale,this.options.ticks.format)}}class RI extends $0{static id="linear";static defaults={ticks:{callback:Nx.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=qa(e)?e:0,this.max=qa(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Ac(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Qy=t=>Math.floor(Wf(t)),Qd=(t,e)=>Math.pow(10,Qy(t)+e);function SA(t){return t/Math.pow(10,Qy(t))===1}function TA(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function ZU(t,e){const n=e-t;let i=Qy(n);for(;TA(t,e,i)>10;)i++;for(;TA(t,e,i)<10;)i--;return Math.min(i,Qy(t))}function GU(t,{min:e,max:n}){e=hu(t.min,e);const i=[],r=Qy(e);let s=ZU(e,n),c=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),g=r>s?Math.pow(10,r):0,y=Math.round((e-g)*c)/c,x=Math.floor((e-g)/a/10)*a*10;let E=Math.floor((y-x)/Math.pow(10,s)),O=hu(t.min,Math.round((g+x+E*Math.pow(10,s))*c)/c);for(;O<n;)i.push({value:O,major:SA(O),significand:E}),E>=10?E=E<15?15:20:E++,E>=20&&(s++,E=2,c=s>=0?1:c),O=Math.round((g+x+E*Math.pow(10,s))*c)/c;const I=hu(t.max,O);return i.push({value:I,major:SA(I),significand:E}),i}class YU extends Mp{static id="logarithmic";static defaults={ticks:{callback:Nx.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=$0.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return qa(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=qa(e)?Math.max(0,e):null,this.max=qa(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!qa(this._userMin)&&(this.min=e===Qd(this.min,0)?Qd(this.min,-1):Qd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,c=a=>r=n?r:a;i===r&&(i<=0?(s(1),c(10)):(s(Qd(i,-1)),c(Qd(r,1)))),i<=0&&s(Qd(r,-1)),r<=0&&c(Qd(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=GU(n,this);return e.bounds==="ticks"&&ND(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":__(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Wf(e),this._valueRange=Wf(this.max)-Wf(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Wf(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}function pS(t){const e=t.ticks;if(e.display&&t.display){const n=Xo(e.backdropPadding);return ti(e.font&&e.font.size,pa.font.size)+n.height}return 0}function WU(t,e,n){return n=da(n)?n:[n],{w:Kj(t,e.string,n),h:n.length*e.lineHeight}}function MA(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function XU(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,c=t.options.pointLabels,a=c.centerPointLabels?rr/s:0;for(let g=0;g<s;g++){const y=c.setContext(t.getPointLabelContext(g));r[g]=y.padding;const x=t.getPointPosition(g,t.drawingArea+r[g],a),E=Ls(y.font),O=WU(t.ctx,E,t._pointLabels[g]);i[g]=O;const I=Go(t.getIndexAngle(g)+a),F=Math.round(E2(I)),V=MA(F,x.x,O.w,0,180),$=MA(F,x.y,O.h,90,270);KU(n,e,I,V,$)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=tV(t,i,r)}function KU(t,e,n,i,r){const s=Math.abs(Math.sin(n)),c=Math.abs(Math.cos(n));let a=0,g=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(g=(e.t-r.start)/c,t.t=Math.min(t.t,e.t-g)):r.end>e.b&&(g=(r.end-e.b)/c,t.b=Math.max(t.b,e.b+g))}function QU(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:c,size:a}=n,g=t.getPointPosition(e,i+r+c,s),y=Math.round(E2(Go(g.angle+ns))),x=iV(g.y,a.h,y),E=eV(y),O=nV(g.x,a.w,E);return{visible:!0,x:g.x,y:x,textAlign:E,left:O,top:x,right:O+a.w,bottom:x+a.h}}function JU(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(eh({x:n,y:i},e)||eh({x:n,y:s},e)||eh({x:r,y:i},e)||eh({x:r,y:s},e))}function tV(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:c,display:a}=s.pointLabels,g={extra:pS(s)/2,additionalAngle:c?rr/r:0};let y;for(let x=0;x<r;x++){g.padding=n[x],g.size=e[x];const E=QU(t,x,g);i.push(E),a==="auto"&&(E.visible=JU(E,y),E.visible&&(y=E))}return i}function eV(t){return t===0||t===180?"center":t<180?"left":"right"}function nV(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function iV(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function rV(t,e,n){const{left:i,top:r,right:s,bottom:c}=n,{backdropColor:a}=e;if(!ki(a)){const g=up(e.borderRadius),y=Xo(e.backdropPadding);t.fillStyle=a;const x=i-y.left,E=r-y.top,O=s-i+y.width,I=c-r+y.height;Object.values(g).some(F=>F!==0)?(t.beginPath(),Xy(t,{x,y:E,w:O,h:I,radius:g}),t.fill()):t.fillRect(x,E,O,I)}}function aV(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=t._pointLabelItems[r];if(!s.visible)continue;const c=i.setContext(t.getPointLabelContext(r));rV(n,c,s);const a=Ls(c.font),{x:g,y,textAlign:x}=s;yp(n,t._pointLabels[r],g,y+a.lineHeight/2,a,{color:c.color,textAlign:x,textBaseline:"middle"})}}function NI(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,aa);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let c=1;c<i;c++)s=t.getPointPosition(c,e),r.lineTo(s.x,s.y)}}function sV(t,e,n,i,r){const s=t.ctx,c=e.circular,{color:a,lineWidth:g}=e;!c&&!i||!a||!g||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=g,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),NI(t,n,c,i),s.closePath(),s.stroke(),s.restore())}function oV(t,e,n){return rd(t,{label:n,index:e,type:"pointLabel"})}class lV extends $0{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Nx.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Xo(pS(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=qa(e)&&!isNaN(e)?e:0,this.max=qa(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/pS(this.options))}generateTickLabels(e){$0.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=Jn(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?XU(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=aa/(this._pointLabels.length||1),i=this.options.startAngle||0;return Go(e*n+Ac(i))}getDistanceFromCenterForValue(e){if(ki(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(ki(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return oV(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-ns+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),NI(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,c=this._pointLabels.length;let a,g,y;if(n.pointLabels.display&&aV(this,c),r.display&&this.ticks.forEach((x,E)=>{if(E!==0||E===0&&this.min<0){g=this.getDistanceFromCenterForValue(x.value);const O=this.getContext(E),I=r.setContext(O),F=s.setContext(O);sV(this,I,g,c,F)}}),i.display){for(e.save(),a=c-1;a>=0;a--){const x=i.setContext(this.getPointLabelContext(a)),{color:E,lineWidth:O}=x;!O||!E||(e.lineWidth=O,e.strokeStyle=E,e.setLineDash(x.borderDash),e.lineDashOffset=x.borderDashOffset,g=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),y=this.getPointPosition(a,g),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(y.x,y.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,c;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,g)=>{if(g===0&&this.min>=0&&!n.reverse)return;const y=i.setContext(this.getContext(g)),x=Ls(y.font);if(s=this.getDistanceFromCenterForValue(this.ticks[g].value),y.showLabelBackdrop){e.font=x.string,c=e.measureText(a.label).width,e.fillStyle=y.backdropColor;const E=Xo(y.backdropPadding);e.fillRect(-c/2-E.left,-s-x.size/2-E.top,c+E.width,x.size+E.height)}yp(e,a.label,0,-s,x,{color:y.color,strokeColor:y.textStrokeColor,strokeWidth:y.textStrokeWidth})}),e.restore()}drawTitle(){}}const $x={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Vl=Object.keys($x);function EA(t,e){return t-e}function AA(t,e){if(ki(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let c=e;return typeof i=="function"&&(c=i(c)),qa(c)||(c=typeof i=="string"?n.parse(c,i):n.parse(c)),c===null?null:(r&&(c=r==="week"&&(Gm(s)||s===!0)?n.startOf(c,"isoWeek",s):n.startOf(c,r)),+c)}function CA(t,e,n,i){const r=Vl.length;for(let s=Vl.indexOf(t);s<r-1;++s){const c=$x[Vl[s]],a=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((n-e)/(a*c.size))<=i)return Vl[s]}return Vl[r-1]}function uV(t,e,n,i,r){for(let s=Vl.length-1;s>=Vl.indexOf(n);s--){const c=Vl[s];if($x[c].common&&t._adapter.diff(r,i,c)>=e-1)return c}return Vl[n?Vl.indexOf(n):0]}function cV(t){for(let e=Vl.indexOf(t)+1,n=Vl.length;e<n;++e)if($x[Vl[e]].common)return Vl[e]}function PA(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=A2(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function hV(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),c=e[e.length-1].value;let a,g;for(a=s;a<=c;a=+r.add(a,1,i))g=n[a],g>=0&&(e[g].major=!0);return e}function kA(t,e,n){const i=[],r={},s=e.length;let c,a;for(c=0;c<s;++c)a=e[c],r[a]=c,i.push({value:a,major:!1});return s===0||!n?i:hV(t,i,r,n)}class mS extends Mp{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new hI._date(e.adapters.date);r.init(n),By(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:AA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:c,maxDefined:a}=this.getUserBounds();function g(y){!c&&!isNaN(y.min)&&(r=Math.min(r,y.min)),!a&&!isNaN(y.max)&&(s=Math.max(s,y.max))}(!c||!a)&&(g(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&g(this.getMinMax(!1))),r=qa(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=qa(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,c=this.max,a=Bj(r,s,c);return this._unit=n.unit||(i.autoSkip?CA(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):uV(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:cV(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),kA(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;n=Xs(n,0,c),i=Xs(i,0,c),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,c=s.unit||CA(s.minUnit,n,i,this._getLabelCapacity(n)),a=ti(r.ticks.stepSize,1),g=c==="week"?s.isoWeekday:!1,y=Gm(g)||g===!0,x={};let E=n,O,I;if(y&&(E=+e.startOf(E,"isoWeek",g)),E=+e.startOf(E,y?"day":c),e.diff(i,n,c)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+c);const F=r.ticks.source==="data"&&this.getDataTimestamps();for(O=E,I=0;O<i;O=+e.add(O,a,c),I++)PA(x,O,F);return(O===i||r.bounds==="ticks"||I===1)&&PA(x,O,F),Object.keys(x).sort(EA).map(V=>+V)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,c=n||r[s];return this._adapter.format(e,c)}_tickFormatFunction(e,n,i,r){const s=this.options,c=s.ticks.callback;if(c)return Jn(c,[e,n,i],this);const a=s.time.displayFormats,g=this._unit,y=this._majorUnit,x=g&&a[g],E=y&&a[y],O=i[n],I=y&&E&&O&&O.major;return this._adapter.format(e,r||(I?E:x))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Ac(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),c=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*c,h:i*c+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,kA(this,[e],this._majorUnit),r),c=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(AA(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return FD(e.sort(EA))}}function s0(t,e,n){let i=0,r=t.length-1,s,c,a,g;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=qh(t,"pos",e)),{pos:s,time:a}=t[i],{pos:c,time:g}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=qh(t,"time",e)),{time:s,pos:a}=t[i],{time:c,pos:g}=t[r]);const y=c-s;return y?a+(g-a)*(e-s)/y:a}class fV extends mS{static id="timeseries";static defaults=mS.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=s0(n,this.min),this._tableRange=s0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let c,a,g,y,x;for(c=0,a=e.length;c<a;++c)y=e[c],y>=n&&y<=i&&r.push(y);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(c=0,a=r.length;c<a;++c)x=r[c+1],g=r[c-1],y=r[c],Math.round((x+g)/2)!==y&&s.push({time:y,pos:c/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(s0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return s0(this._table,i*this._tableRange+this._minPos,!0)}}var dV=Object.freeze({__proto__:null,CategoryScale:LI,LinearScale:RI,LogarithmicScale:YU,RadialLinearScale:lV,TimeScale:mS,TimeSeriesScale:fV});const pV=[_6,W8,UU,dV];sd.register(...pV);const mV=.4541,gV=.202,yV=t=>t==null||isNaN(t)?"0":Number(t).toLocaleString("ko-KR");function _1(t,e,n="UNKNOWN"){console.log(`
===== [makeMonthlyAverage: ${n}] =====`),console.log(`   : ${t.length}`);const i={};t.forEach((s,c)=>{const a=String(s.yearMonth).trim(),g=e(s);i[a]||(i[a]=[]),i[a].push(g),c<5&&console.log(`  - sample[${c}]: ym=${a}, value=${g}, cityId=${s.cityId}, countyId=${s.countyId}`)}),console.log(`   : ${Object.keys(i).length}`),console.log("  ( 10):",Object.keys(i).slice(0,10));const r={};return Object.keys(i).sort().forEach(s=>{const c=i[s],a=c.reduce((g,y)=>g+y,0)/c.length;r[s]=a,console.log(`    ${n} | ${s} | count=${c.length} | sum=${c.reduce((g,y)=>g+y,0)} | avg=${a}`)}),console.log(`===== [END makeMonthlyAverage: ${n}] =====
`),r}function _V(t,e,n){console.log(`
===== [makeNationalSigunguAverage ] =====`),console.log("   :",e);const i={};return t.forEach(r=>{const s=String(r.yearMonth).trim(),c=n(r);i[s]=c/e,console.log(`     | ${s} | =${c} / ${e} = ${i[s]}`)}),console.log(`===== [END makeNationalSigunguAverage] =====
`),i}function vV({selectedRegion:t,selectedRegionData:e,nationalData:n,sidoData:i,energyType:r,mainTab:s}){const c=Z.useRef(null),a=Z.useRef(null);return Z.useEffect(()=>{if(!e||e.length===0)return;const y=(e.items||e).filter(it=>{const ut=Number(String(it.yearMonth).trim());return ut>=202001&&ut<=202506});if(y.length===0)return;const x=[];for(let it=2020;it<=2025;it++)for(let ut=1;ut<=12;ut++){const xt=`${it}${String(ut).padStart(2,"0")}`;if(x.push(xt),xt==="202506")break}const E=it=>Number(r==="electric"?it.useElect||0:it.useGas||0),I=s==="co2"?it=>E(it)*(r==="electric"?mV:gV):E;let F=[],V=[],$="",K="";if(s==="co2"?($="  (tCO)",K="tCO"):r==="electric"?($="  (MWh)",K="MWh"):($="  ()",K=""),t)if(t.countyId){const it=Number(t.countyId),ut={};y.forEach(wt=>{Number(wt.countyId)===it&&(ut[wt.yearMonth]=I(wt))}),F=x.map(wt=>ut[wt]??0);const xt=_1(i,I,s==="co2"?`${t.cityName} CO2`:`${t.cityName} `);V=x.map(wt=>xt[wt]??0)}else{const it=_1(i,I,s==="co2"?`${t.cityName} CO2`:`${t.cityName} `);F=x.map(wt=>it[wt]??0);const xt=_V(n,253,I);V=x.map(wt=>xt[wt]??0)}else{const it=_1(n,I,s==="co2"?" CO2":" ");F=x.map(ut=>it[ut]??0),V=[]}a.current&&a.current.destroy();const Y=c.current.getContext("2d"),W=t?t.countyId?t.countyName:t.cityName:"",X=$,J=`${W} ${X}`,st=t?t.countyId?`${t.cityName}  ${X}`:`  ${X}`:"",ct=[];V.length>0?(ct.push({label:st,data:V,borderColor:"#60a5fa",backgroundColor:"rgba(148, 163, 184, 0.35)",fill:!0,tension:.35,borderWidth:2,pointRadius:0,pointHoverRadius:3}),ct.push({label:J,data:F,borderColor:"#fb923c",backgroundColor:"rgba(252, 211, 77, 0.25)",fill:!0,tension:.35,borderWidth:2,borderDash:[6,4],pointRadius:2,pointHoverRadius:4})):ct.push({label:J,data:F,borderColor:"#3b82f6",backgroundColor:"rgba(191, 219, 254, 0.4)",fill:!0,tension:.35,borderWidth:2,pointRadius:2,pointHoverRadius:4}),a.current=new sd(Y,{type:"line",data:{labels:x,datasets:ct},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:900,easing:"easeOutCubic"},animations:{y:{duration:900,easing:"easeOutCubic",from:it=>{if(it.type==="data"&&it.mode==="default")return it.chart.scales.y.getPixelForValue(0)}},x:{duration:700,easing:"easeOutQuad"}},interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",align:"center",labels:{boxWidth:24,boxHeight:12,padding:16,color:"#4b5563",font:{size:12,family:"'Noto Sans KR', system-ui, -apple-system, BlinkMacSystemFont"}}},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.92)",borderRadius:8,padding:10,titleColor:"#e5e7eb",bodyColor:"#f9fafb",displayColors:!0,callbacks:{label:it=>{const ut=it.dataset.label||"",xt=it.parsed.y;return`${ut}: ${yV(xt)} ${K}`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:K}}}}})},[t,e,n,i,r,s]),vt.jsx("div",{style:{width:"100%",height:"420px",paddingTop:"8px"},children:vt.jsx("canvas",{ref:c,style:{width:"100%",height:"100%"}})})}const BI="label";function OA(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function xV(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function jI(t,e){t.labels=e}function FI(t,e,n=BI){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(c=>c[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function bV(t,e=BI){const n={labels:[],datasets:[]};return jI(n,t.labels),FI(n,t.datasets,e),n}function wV(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:c,data:a,options:g,plugins:y=[],fallbackContent:x,updateMode:E,...O}=t,I=Z.useRef(null),F=Z.useRef(null),V=()=>{I.current&&(F.current=new sd(I.current,{type:c,data:bV(a,s),options:g&&{...g},plugins:y}),OA(e,F.current))},$=()=>{OA(e,null),F.current&&(F.current.destroy(),F.current=null)};return Z.useEffect(()=>{!r&&F.current&&g&&xV(F.current,g)},[r,g]),Z.useEffect(()=>{!r&&F.current&&jI(F.current.config.data,a.labels)},[r,a.labels]),Z.useEffect(()=>{!r&&F.current&&a.datasets&&FI(F.current.config.data,a.datasets,s)},[r,a.datasets]),Z.useEffect(()=>{F.current&&(r?($(),setTimeout(V)):F.current.update(E))},[r,g,a.labels,a.datasets,E]),Z.useEffect(()=>{F.current&&($(),setTimeout(V))},[c]),Z.useEffect(()=>(V(),()=>$()),[]),vt.jsx("canvas",{ref:I,role:"img",height:n,width:i,...O,children:x})}const SV=Z.forwardRef(wV);function TV(t,e){return sd.register(e),Z.forwardRef((n,i)=>vt.jsx(SV,{...n,ref:i,type:t}))}const j2=TV("line",uI),UI=6048e5,MV=864e5,x_=6e4,b_=36e5,EV=1e3,DA=Symbol.for("constructDateFrom");function Ha(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&DA in t?t[DA](e):t instanceof Date?new t.constructor(e):new Date(e)}function li(t,e){return Ha(e||t,t)}function qx(t,e,n){const i=li(t,n?.in);return isNaN(e)?Ha(n?.in||t,NaN):(e&&i.setDate(i.getDate()+e),i)}function F2(t,e,n){const i=li(t,n?.in);if(isNaN(e))return Ha(t,NaN);if(!e)return i;const r=i.getDate(),s=Ha(t,i.getTime());s.setMonth(i.getMonth()+e+1,0);const c=s.getDate();return r>=c?s:(i.setFullYear(s.getFullYear(),s.getMonth(),r),i)}function U2(t,e,n){return Ha(t,+li(t)+e)}function AV(t,e,n){return U2(t,e*b_)}let CV={};function Ep(){return CV}function ah(t,e){const n=Ep(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=li(t,e?.in),s=r.getDay(),c=(s<i?7:0)+s-i;return r.setDate(r.getDate()-c),r.setHours(0,0,0,0),r}function Xm(t,e){return ah(t,{...e,weekStartsOn:1})}function VI(t,e){const n=li(t,e?.in),i=n.getFullYear(),r=Ha(n,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const s=Xm(r),c=Ha(n,0);c.setFullYear(i,0,4),c.setHours(0,0,0,0);const a=Xm(c);return n.getTime()>=s.getTime()?i+1:n.getTime()>=a.getTime()?i:i-1}function q0(t){const e=li(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Ap(t,...e){const n=Ha.bind(null,e.find(i=>typeof i=="object"));return e.map(n)}function gS(t,e){const n=li(t,e?.in);return n.setHours(0,0,0,0),n}function $I(t,e,n){const[i,r]=Ap(n?.in,t,e),s=gS(i),c=gS(r),a=+s-q0(s),g=+c-q0(c);return Math.round((a-g)/MV)}function PV(t,e){const n=VI(t,e),i=Ha(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Xm(i)}function kV(t,e,n){const i=li(t,n?.in);return i.setTime(i.getTime()+e*x_),i}function OV(t,e,n){return F2(t,e*3,n)}function DV(t,e,n){return U2(t,e*1e3)}function IV(t,e,n){return qx(t,e*7,n)}function zV(t,e,n){return F2(t,e*12,n)}function Uy(t,e){const n=+li(t)-+li(e);return n<0?-1:n>0?1:n}function LV(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function qI(t){return!(!LV(t)&&typeof t!="number"||isNaN(+li(t)))}function RV(t,e,n){const[i,r]=Ap(n?.in,t,e),s=i.getFullYear()-r.getFullYear(),c=i.getMonth()-r.getMonth();return s*12+c}function NV(t,e,n){const[i,r]=Ap(n?.in,t,e);return i.getFullYear()-r.getFullYear()}function HI(t,e,n){const[i,r]=Ap(n?.in,t,e),s=IA(i,r),c=Math.abs($I(i,r));i.setDate(i.getDate()-s*c);const a=+(IA(i,r)===-s),g=s*(c-a);return g===0?0:g}function IA(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function w_(t){return e=>{const i=(t?Math[t]:Math.trunc)(e);return i===0?0:i}}function BV(t,e,n){const[i,r]=Ap(n?.in,t,e),s=(+i-+r)/b_;return w_(n?.roundingMethod)(s)}function V2(t,e){return+li(t)-+li(e)}function jV(t,e,n){const i=V2(t,e)/x_;return w_(n?.roundingMethod)(i)}function ZI(t,e){const n=li(t,e?.in);return n.setHours(23,59,59,999),n}function GI(t,e){const n=li(t,e?.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}function FV(t,e){const n=li(t,e?.in);return+ZI(n,e)==+GI(n,e)}function YI(t,e,n){const[i,r,s]=Ap(n?.in,t,t,e),c=Uy(r,s),a=Math.abs(RV(r,s));if(a<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-c*a);let g=Uy(r,s)===-c;FV(i)&&a===1&&Uy(i,s)===1&&(g=!1);const y=c*(a-+g);return y===0?0:y}function UV(t,e,n){const i=YI(t,e,n)/3;return w_(n?.roundingMethod)(i)}function VV(t,e,n){const i=V2(t,e)/1e3;return w_(n?.roundingMethod)(i)}function $V(t,e,n){const i=HI(t,e,n)/7;return w_(n?.roundingMethod)(i)}function qV(t,e,n){const[i,r]=Ap(n?.in,t,e),s=Uy(i,r),c=Math.abs(NV(i,r));i.setFullYear(1584),r.setFullYear(1584);const a=Uy(i,r)===-s,g=s*(c-+a);return g===0?0:g}function HV(t,e){const n=li(t,e?.in),i=n.getMonth(),r=i-i%3;return n.setMonth(r,1),n.setHours(0,0,0,0),n}function ZV(t,e){const n=li(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function GV(t,e){const n=li(t,e?.in),i=n.getFullYear();return n.setFullYear(i+1,0,0),n.setHours(23,59,59,999),n}function WI(t,e){const n=li(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function YV(t,e){const n=li(t,e?.in);return n.setMinutes(59,59,999),n}function WV(t,e){const n=Ep(),i=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=li(t,e?.in),s=r.getDay(),c=(s<i?-7:0)+6-(s-i);return r.setDate(r.getDate()+c),r.setHours(23,59,59,999),r}function XV(t,e){const n=li(t,e?.in);return n.setSeconds(59,999),n}function KV(t,e){const n=li(t,e?.in),i=n.getMonth(),r=i-i%3+3;return n.setMonth(r,0),n.setHours(23,59,59,999),n}function QV(t,e){const n=li(t,e?.in);return n.setMilliseconds(999),n}const JV={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},t$=(t,e,n)=>{let i;const r=JV[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function v1(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const e$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},n$={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},i$={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},r$={date:v1({formats:e$,defaultWidth:"full"}),time:v1({formats:n$,defaultWidth:"full"}),dateTime:v1({formats:i$,defaultWidth:"full"})},a$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},s$=(t,e,n,i)=>a$[t];function _y(t){return(e,n)=>{const i=n?.context?String(n.context):"standalone";let r;if(i==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):c;r=t.formattingValues[a]||t.formattingValues[c]}else{const c=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;r=t.values[a]||t.values[c]}const s=t.argumentCallback?t.argumentCallback(e):e;return r[s]}}const o$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},l$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},u$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},c$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},h$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},f$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},d$=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},p$={ordinalNumber:d$,era:_y({values:o$,defaultWidth:"wide"}),quarter:_y({values:l$,defaultWidth:"wide",argumentCallback:t=>t-1}),month:_y({values:u$,defaultWidth:"wide"}),day:_y({values:c$,defaultWidth:"wide"}),dayPeriod:_y({values:h$,defaultWidth:"wide",formattingValues:f$,defaultFormattingWidth:"wide"})};function vy(t){return(e,n={})=>{const i=n.width,r=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],s=e.match(r);if(!s)return null;const c=s[0],a=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],g=Array.isArray(a)?g$(a,E=>E.test(c)):m$(a,E=>E.test(c));let y;y=t.valueCallback?t.valueCallback(g):g,y=n.valueCallback?n.valueCallback(y):y;const x=e.slice(c.length);return{value:y,rest:x}}}function m$(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function g$(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function y$(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const r=i[0],s=e.match(t.parsePattern);if(!s)return null;let c=t.valueCallback?t.valueCallback(s[0]):s[0];c=n.valueCallback?n.valueCallback(c):c;const a=e.slice(r.length);return{value:c,rest:a}}}const _$=/^(\d+)(th|st|nd|rd)?/i,v$=/\d+/i,x$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},b$={any:[/^b/i,/^(a|c)/i]},w$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},S$={any:[/1/i,/2/i,/3/i,/4/i]},T$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},M$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},E$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},A$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},C$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},P$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},k$={ordinalNumber:y$({matchPattern:_$,parsePattern:v$,valueCallback:t=>parseInt(t,10)}),era:vy({matchPatterns:x$,defaultMatchWidth:"wide",parsePatterns:b$,defaultParseWidth:"any"}),quarter:vy({matchPatterns:w$,defaultMatchWidth:"wide",parsePatterns:S$,defaultParseWidth:"any",valueCallback:t=>t+1}),month:vy({matchPatterns:T$,defaultMatchWidth:"wide",parsePatterns:M$,defaultParseWidth:"any"}),day:vy({matchPatterns:E$,defaultMatchWidth:"wide",parsePatterns:A$,defaultParseWidth:"any"}),dayPeriod:vy({matchPatterns:C$,defaultMatchWidth:"any",parsePatterns:P$,defaultParseWidth:"any"})},XI={code:"en-US",formatDistance:t$,formatLong:r$,formatRelative:s$,localize:p$,match:k$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function O$(t,e){const n=li(t,e?.in);return $I(n,WI(n))+1}function KI(t,e){const n=li(t,e?.in),i=+Xm(n)-+PV(n);return Math.round(i/UI)+1}function $2(t,e){const n=li(t,e?.in),i=n.getFullYear(),r=Ep(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,c=Ha(e?.in||t,0);c.setFullYear(i+1,0,s),c.setHours(0,0,0,0);const a=ah(c,e),g=Ha(e?.in||t,0);g.setFullYear(i,0,s),g.setHours(0,0,0,0);const y=ah(g,e);return+n>=+a?i+1:+n>=+y?i:i-1}function D$(t,e){const n=Ep(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=$2(t,e),s=Ha(e?.in||t,0);return s.setFullYear(r,0,i),s.setHours(0,0,0,0),ah(s,e)}function QI(t,e){const n=li(t,e?.in),i=+ah(n,e)-+D$(n,e);return Math.round(i/UI)+1}function br(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const Vf={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return br(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):br(n+1,2)},d(t,e){return br(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return br(t.getHours()%12||12,e.length)},H(t,e){return br(t.getHours(),e.length)},m(t,e){return br(t.getMinutes(),e.length)},s(t,e){return br(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),r=Math.trunc(i*Math.pow(10,n-3));return br(r,e.length)}},Lm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zA={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return Vf.y(t,e)},Y:function(t,e,n,i){const r=$2(t,i),s=r>0?r:1-r;if(e==="YY"){const c=s%100;return br(c,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):br(s,e.length)},R:function(t,e){const n=VI(t);return br(n,e.length)},u:function(t,e){const n=t.getFullYear();return br(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return br(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return br(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return Vf.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return br(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const r=QI(t,i);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):br(r,e.length)},I:function(t,e,n){const i=KI(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):br(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Vf.d(t,e)},D:function(t,e,n){const i=O$(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):br(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const r=t.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return br(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const r=t.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return br(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return br(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let r;switch(i===12?r=Lm.noon:i===0?r=Lm.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let r;switch(i>=17?r=Lm.evening:i>=12?r=Lm.afternoon:i>=4?r=Lm.morning:r=Lm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Vf.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Vf.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):br(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):br(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Vf.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Vf.s(t,e)},S:function(t,e){return Vf.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return RA(i);case"XXXX":case"XX":return ep(i);case"XXXXX":case"XXX":default:return ep(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return RA(i);case"xxxx":case"xx":return ep(i);case"xxxxx":case"xxx":default:return ep(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+LA(i,":");case"OOOO":default:return"GMT"+ep(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+LA(i,":");case"zzzz":default:return"GMT"+ep(i,":")}},t:function(t,e,n){const i=Math.trunc(+t/1e3);return br(i,e.length)},T:function(t,e,n){return br(+t,e.length)}};function LA(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Math.trunc(i/60),s=i%60;return s===0?n+String(r):n+String(r)+e+br(s,2)}function RA(t,e){return t%60===0?(t>0?"-":"+")+br(Math.abs(t)/60,2):ep(t,e)}function ep(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=br(Math.trunc(i/60),2),s=br(i%60,2);return n+r+e+s}const NA=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},JI=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},I$=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],r=n[2];if(!r)return NA(t,e);let s;switch(i){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",NA(i,e)).replace("{{time}}",JI(r,e))},yS={p:JI,P:I$},z$=/^D+$/,L$=/^Y+$/,R$=["D","DD","YY","YYYY"];function tz(t){return z$.test(t)}function ez(t){return L$.test(t)}function _S(t,e,n){const i=N$(t,e,n);if(console.warn(i),R$.includes(t))throw new RangeError(i)}function N$(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const B$=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,j$=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,F$=/^'([^]*?)'?$/,U$=/''/g,V$=/[a-zA-Z]/;function $$(t,e,n){const i=Ep(),r=n?.locale??i.locale??XI,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=li(t,n?.in);if(!qI(a))throw new RangeError("Invalid time value");let g=e.match(j$).map(x=>{const E=x[0];if(E==="p"||E==="P"){const O=yS[E];return O(x,r.formatLong)}return x}).join("").match(B$).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const E=x[0];if(E==="'")return{isToken:!1,value:q$(x)};if(zA[E])return{isToken:!0,value:x};if(E.match(V$))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:x}});r.localize.preprocessor&&(g=r.localize.preprocessor(a,g));const y={firstWeekContainsDate:s,weekStartsOn:c,locale:r};return g.map(x=>{if(!x.isToken)return x.value;const E=x.value;(!n?.useAdditionalWeekYearTokens&&ez(E)||!n?.useAdditionalDayOfYearTokens&&tz(E))&&_S(E,e,String(t));const O=zA[E[0]];return O(a,E,r.localize,y)}).join("")}function q$(t){const e=t.match(F$);return e?e[1].replace(U$,"'"):t}function H$(){return Object.assign({},Ep())}function Z$(t,e){const n=li(t,e?.in).getDay();return n===0?7:n}function G$(t,e){const n=Y$(e)?new e(0):Ha(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function Y$(t){return typeof t=="function"&&t.prototype?.constructor===t}const W$=10;class nz{subPriority=0;validate(e,n){return!0}}class X$ extends nz{constructor(e,n,i,r,s){super(),this.value=e,this.validateValue=n,this.setValue=i,this.priority=r,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,i){return this.setValue(e,n,this.value,i)}}class K$ extends nz{priority=W$;subPriority=-1;constructor(e,n){super(),this.context=e||(i=>Ha(n,i))}set(e,n){return n.timestampIsSet?e:Ha(e,G$(e,this.context))}}class cr{run(e,n,i,r){const s=this.parse(e,n,i,r);return s?{setter:new X$(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,i){return!0}}class Q$ extends cr{priority=140;parse(e,n,i){switch(n){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});case"GGGG":default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}}set(e,n,i){return n.era=i,e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const is={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Jc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function rs(t,e){return t&&{value:e(t.value),rest:t.rest}}function Ca(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function th(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const i=n[1]==="+"?1:-1,r=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,c=n[5]?parseInt(n[5],10):0;return{value:i*(r*b_+s*x_+c*EV),rest:e.slice(n[0].length)}}function iz(t){return Ca(is.anyDigitsSigned,t)}function Za(t,e){switch(t){case 1:return Ca(is.singleDigit,e);case 2:return Ca(is.twoDigits,e);case 3:return Ca(is.threeDigits,e);case 4:return Ca(is.fourDigits,e);default:return Ca(new RegExp("^\\d{1,"+t+"}"),e)}}function H0(t,e){switch(t){case 1:return Ca(is.singleDigitSigned,e);case 2:return Ca(is.twoDigitsSigned,e);case 3:return Ca(is.threeDigitsSigned,e);case 4:return Ca(is.fourDigitsSigned,e);default:return Ca(new RegExp("^-?\\d{1,"+t+"}"),e)}}function q2(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function rz(t,e){const n=e>0,i=n?e:1-e;let r;if(i<=50)r=t||100;else{const s=i+50,c=Math.trunc(s/100)*100,a=t>=s%100;r=t+c-(a?100:0)}return n?r:1-r}function az(t){return t%400===0||t%4===0&&t%100!==0}class J$ extends cr{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,i){const r=s=>({year:s,isTwoDigitYear:n==="yy"});switch(n){case"y":return rs(Za(4,e),r);case"yo":return rs(i.ordinalNumber(e,{unit:"year"}),r);default:return rs(Za(n.length,e),r)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,i){const r=e.getFullYear();if(i.isTwoDigitYear){const c=rz(i.year,r);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const s=!("era"in n)||n.era===1?i.year:1-i.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}class tq extends cr{priority=130;parse(e,n,i){const r=s=>({year:s,isTwoDigitYear:n==="YY"});switch(n){case"Y":return rs(Za(4,e),r);case"Yo":return rs(i.ordinalNumber(e,{unit:"year"}),r);default:return rs(Za(n.length,e),r)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,i,r){const s=$2(e,r);if(i.isTwoDigitYear){const a=rz(i.year,s);return e.setFullYear(a,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),ah(e,r)}const c=!("era"in n)||n.era===1?i.year:1-i.year;return e.setFullYear(c,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),ah(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class eq extends cr{priority=130;parse(e,n){return H0(n==="R"?4:n.length,e)}set(e,n,i){const r=Ha(e,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),Xm(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class nq extends cr{priority=130;parse(e,n){return H0(n==="u"?4:n.length,e)}set(e,n,i){return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class iq extends cr{priority=120;parse(e,n,i){switch(n){case"Q":case"QQ":return Za(n.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class rq extends cr{priority=120;parse(e,n,i){switch(n){case"q":case"qq":return Za(n.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class aq extends cr{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,i){const r=s=>s-1;switch(n){case"M":return rs(Ca(is.month,e),r);case"MM":return rs(Za(2,e),r);case"Mo":return rs(i.ordinalNumber(e,{unit:"month"}),r);case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}}class sq extends cr{priority=110;parse(e,n,i){const r=s=>s-1;switch(n){case"L":return rs(Ca(is.month,e),r);case"LL":return rs(Za(2,e),r);case"Lo":return rs(i.ordinalNumber(e,{unit:"month"}),r);case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function oq(t,e,n){const i=li(t,n?.in),r=QI(i,n)-e;return i.setDate(i.getDate()-r*7),li(i,n?.in)}class lq extends cr{priority=100;parse(e,n,i){switch(n){case"w":return Ca(is.week,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return Za(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,i,r){return ah(oq(e,i,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function uq(t,e,n){const i=li(t,n?.in),r=KI(i,n)-e;return i.setDate(i.getDate()-r*7),i}class cq extends cr{priority=100;parse(e,n,i){switch(n){case"I":return Ca(is.week,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return Za(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,i){return Xm(uq(e,i))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const hq=[31,28,31,30,31,30,31,31,30,31,30,31],fq=[31,29,31,30,31,30,31,31,30,31,30,31];class dq extends cr{priority=90;subPriority=1;parse(e,n,i){switch(n){case"d":return Ca(is.date,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return Za(n.length,e)}}validate(e,n){const i=e.getFullYear(),r=az(i),s=e.getMonth();return r?n>=1&&n<=fq[s]:n>=1&&n<=hq[s]}set(e,n,i){return e.setDate(i),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class pq extends cr{priority=90;subpriority=1;parse(e,n,i){switch(n){case"D":case"DD":return Ca(is.dayOfYear,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return Za(n.length,e)}}validate(e,n){const i=e.getFullYear();return az(i)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,i){return e.setMonth(0,i),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function H2(t,e,n){const i=Ep(),r=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,s=li(t,n?.in),c=s.getDay(),g=(e%7+7)%7,y=7-r,x=e<0||e>6?e-(c+y)%7:(g+y)%7-(c+y)%7;return qx(s,x,n)}class mq extends cr{priority=90;parse(e,n,i){switch(n){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,i,r){return e=H2(e,i,r),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class gq extends cr{priority=90;parse(e,n,i,r){const s=c=>{const a=Math.floor((c-1)/7)*7;return(c+r.weekStartsOn+6)%7+a};switch(n){case"e":case"ee":return rs(Za(n.length,e),s);case"eo":return rs(i.ordinalNumber(e,{unit:"day"}),s);case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,i,r){return e=H2(e,i,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class yq extends cr{priority=90;parse(e,n,i,r){const s=c=>{const a=Math.floor((c-1)/7)*7;return(c+r.weekStartsOn+6)%7+a};switch(n){case"c":case"cc":return rs(Za(n.length,e),s);case"co":return rs(i.ordinalNumber(e,{unit:"day"}),s);case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,i,r){return e=H2(e,i,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function _q(t,e,n){const i=li(t,n?.in),r=Z$(i,n),s=e-r;return qx(i,s,n)}class vq extends cr{priority=90;parse(e,n,i){const r=s=>s===0?7:s;switch(n){case"i":case"ii":return Za(n.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return rs(i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return rs(i.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return rs(i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),r);case"iiii":default:return rs(i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,n){return n>=1&&n<=7}set(e,n,i){return e=_q(e,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class xq extends cr{priority=80;parse(e,n,i){switch(n){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,i){return e.setHours(q2(i),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class bq extends cr{priority=80;parse(e,n,i){switch(n){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,i){return e.setHours(q2(i),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class wq extends cr{priority=80;parse(e,n,i){switch(n){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,i){return e.setHours(q2(i),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Sq extends cr{priority=70;parse(e,n,i){switch(n){case"h":return Ca(is.hour12h,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return Za(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,i){const r=e.getHours()>=12;return r&&i<12?e.setHours(i+12,0,0,0):!r&&i===12?e.setHours(0,0,0,0):e.setHours(i,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Tq extends cr{priority=70;parse(e,n,i){switch(n){case"H":return Ca(is.hour23h,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return Za(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,i){return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Mq extends cr{priority=70;parse(e,n,i){switch(n){case"K":return Ca(is.hour11h,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return Za(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,i){return e.getHours()>=12&&i<12?e.setHours(i+12,0,0,0):e.setHours(i,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Eq extends cr{priority=70;parse(e,n,i){switch(n){case"k":return Ca(is.hour24h,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return Za(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,i){const r=i<=24?i%24:i;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Aq extends cr{priority=60;parse(e,n,i){switch(n){case"m":return Ca(is.minute,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return Za(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,i){return e.setMinutes(i,0,0),e}incompatibleTokens=["t","T"]}class Cq extends cr{priority=50;parse(e,n,i){switch(n){case"s":return Ca(is.second,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return Za(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,i){return e.setSeconds(i,0),e}incompatibleTokens=["t","T"]}class Pq extends cr{priority=30;parse(e,n){const i=r=>Math.trunc(r*Math.pow(10,-n.length+3));return rs(Za(n.length,e),i)}set(e,n,i){return e.setMilliseconds(i),e}incompatibleTokens=["t","T"]}class kq extends cr{priority=10;parse(e,n){switch(n){case"X":return th(Jc.basicOptionalMinutes,e);case"XX":return th(Jc.basic,e);case"XXXX":return th(Jc.basicOptionalSeconds,e);case"XXXXX":return th(Jc.extendedOptionalSeconds,e);case"XXX":default:return th(Jc.extended,e)}}set(e,n,i){return n.timestampIsSet?e:Ha(e,e.getTime()-q0(e)-i)}incompatibleTokens=["t","T","x"]}class Oq extends cr{priority=10;parse(e,n){switch(n){case"x":return th(Jc.basicOptionalMinutes,e);case"xx":return th(Jc.basic,e);case"xxxx":return th(Jc.basicOptionalSeconds,e);case"xxxxx":return th(Jc.extendedOptionalSeconds,e);case"xxx":default:return th(Jc.extended,e)}}set(e,n,i){return n.timestampIsSet?e:Ha(e,e.getTime()-q0(e)-i)}incompatibleTokens=["t","T","X"]}class Dq extends cr{priority=40;parse(e){return iz(e)}set(e,n,i){return[Ha(e,i*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Iq extends cr{priority=20;parse(e){return iz(e)}set(e,n,i){return[Ha(e,i),{timestampIsSet:!0}]}incompatibleTokens="*"}const zq={G:new Q$,y:new J$,Y:new tq,R:new eq,u:new nq,Q:new iq,q:new rq,M:new aq,L:new sq,w:new lq,I:new cq,d:new dq,D:new pq,E:new mq,e:new gq,c:new yq,i:new vq,a:new xq,b:new bq,B:new wq,h:new Sq,H:new Tq,K:new Mq,k:new Eq,m:new Aq,s:new Cq,S:new Pq,X:new kq,x:new Oq,t:new Dq,T:new Iq},Lq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Nq=/^'([^]*?)'?$/,Bq=/''/g,jq=/\S/,Fq=/[a-zA-Z]/;function Uq(t,e,n,i){const r=()=>Ha(i?.in||n,NaN),s=H$(),c=i?.locale??s.locale??XI,a=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,g=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0;if(!e)return t?r():li(n,i?.in);const y={firstWeekContainsDate:a,weekStartsOn:g,locale:c},x=[new K$(i?.in,n)],E=e.match(Rq).map($=>{const K=$[0];if(K in yS){const Y=yS[K];return Y($,c.formatLong)}return $}).join("").match(Lq),O=[];for(let $ of E){!i?.useAdditionalWeekYearTokens&&ez($)&&_S($,e,t),!i?.useAdditionalDayOfYearTokens&&tz($)&&_S($,e,t);const K=$[0],Y=zq[K];if(Y){const{incompatibleTokens:W}=Y;if(Array.isArray(W)){const J=O.find(st=>W.includes(st.token)||st.token===K);if(J)throw new RangeError(`The format string mustn't contain \`${J.fullToken}\` and \`${$}\` at the same time`)}else if(Y.incompatibleTokens==="*"&&O.length>0)throw new RangeError(`The format string mustn't contain \`${$}\` and any other token at the same time`);O.push({token:K,fullToken:$});const X=Y.run(t,$,c.match,y);if(!X)return r();x.push(X.setter),t=X.rest}else{if(K.match(Fq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+K+"`");if($==="''"?$="'":K==="'"&&($=Vq($)),t.indexOf($)===0)t=t.slice($.length);else return r()}}if(t.length>0&&jq.test(t))return r();const I=x.map($=>$.priority).sort(($,K)=>K-$).filter(($,K,Y)=>Y.indexOf($)===K).map($=>x.filter(K=>K.priority===$).sort((K,Y)=>Y.subPriority-K.subPriority)).map($=>$[0]);let F=li(n,i?.in);if(isNaN(+F))return r();const V={};for(const $ of I){if(!$.validate(F,y))return r();const K=$.set(F,V,y);Array.isArray(K)?(F=K[0],Object.assign(V,K[1])):F=K}return F}function Vq(t){return t.match(Nq)[1].replace(Bq,"'")}function $q(t,e){const n=li(t,e?.in);return n.setMinutes(0,0,0),n}function qq(t,e){const n=li(t,e?.in);return n.setSeconds(0,0),n}function Hq(t,e){const n=li(t,e?.in);return n.setMilliseconds(0),n}function Zq(t,e){const n=()=>Ha(e?.in,NaN),i=e?.additionalDigits??2,r=Xq(t);let s;if(r.date){const y=Kq(r.date,i);s=Qq(y.restDateString,y.year)}if(!s||isNaN(+s))return n();const c=+s;let a=0,g;if(r.time&&(a=Jq(r.time),isNaN(a)))return n();if(r.timezone){if(g=tH(r.timezone),isNaN(g))return n()}else{const y=new Date(c+a),x=li(0,e?.in);return x.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),x.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),x}return li(c+a+g,e?.in)}const o0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Gq=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Yq=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Wq=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Xq(t){const e={},n=t.split(o0.dateTimeDelimiter);let i;if(n.length>2)return e;if(/:/.test(n[0])?i=n[0]:(e.date=n[0],i=n[1],o0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(o0.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){const r=o0.timezone.exec(i);r?(e.time=i.replace(r[1],""),e.timezone=r[1]):e.time=i}return e}function Kq(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const r=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:s===null?r:s*100,restDateString:t.slice((i[1]||i[2]).length)}}function Qq(t,e){if(e===null)return new Date(NaN);const n=t.match(Gq);if(!n)return new Date(NaN);const i=!!n[4],r=xy(n[1]),s=xy(n[2])-1,c=xy(n[3]),a=xy(n[4]),g=xy(n[5])-1;if(i)return aH(e,a,g)?eH(e,a,g):new Date(NaN);{const y=new Date(0);return!iH(e,s,c)||!rH(e,r)?new Date(NaN):(y.setUTCFullYear(e,s,Math.max(r,c)),y)}}function xy(t){return t?parseInt(t):1}function Jq(t){const e=t.match(Yq);if(!e)return NaN;const n=x1(e[1]),i=x1(e[2]),r=x1(e[3]);return sH(n,i,r)?n*b_+i*x_+r*1e3:NaN}function x1(t){return t&&parseFloat(t.replace(",","."))||0}function tH(t){if(t==="Z")return 0;const e=t.match(Wq);if(!e)return 0;const n=e[1]==="+"?-1:1,i=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return oH(i,r)?n*(i*b_+r*x_):NaN}function eH(t,e,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const r=i.getUTCDay()||7,s=(e-1)*7+n+1-r;return i.setUTCDate(i.getUTCDate()+s),i}const nH=[31,null,31,30,31,30,31,31,30,31,30,31];function sz(t){return t%400===0||t%4===0&&t%100!==0}function iH(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(nH[e]||(sz(t)?29:28))}function rH(t,e){return e>=1&&e<=(sz(t)?366:365)}function aH(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function sH(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function oH(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const lH={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};hI._date.override({_id:"date-fns",formats:function(){return lH},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=li(t):n==="string"&&(typeof e=="string"?t=Uq(t,e,new Date,this.options):t=Zq(t,this.options)),qI(t)?t.getTime():null},format:function(t,e){return $$(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return U2(t,e);case"second":return DV(t,e);case"minute":return kV(t,e);case"hour":return AV(t,e);case"day":return qx(t,e);case"week":return IV(t,e);case"month":return F2(t,e);case"quarter":return OV(t,e);case"year":return zV(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return V2(t,e);case"second":return VV(t,e);case"minute":return jV(t,e);case"hour":return BV(t,e);case"day":return HI(t,e);case"week":return $V(t,e);case"month":return YI(t,e);case"quarter":return UV(t,e);case"year":return qV(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return Hq(t);case"minute":return qq(t);case"hour":return $q(t);case"day":return gS(t);case"week":return ah(t);case"isoWeek":return ah(t,{weekStartsOn:+n});case"month":return ZV(t);case"quarter":return HV(t);case"year":return WI(t);default:return t}},endOf:function(t,e){switch(e){case"second":return QV(t);case"minute":return XV(t);case"hour":return YV(t);case"day":return ZI(t);case"week":return WV(t);case"month":return GI(t);case"quarter":return KV(t);case"year":return GV(t);default:return t}}});var b1={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var BA;function uH(){return BA||(BA=1,(function(t){(function(e,n,i,r){var s=["","webkit","Moz","MS","ms","o"],c=n.createElement("div"),a="function",g=Math.round,y=Math.abs,x=Date.now;function E(yt,At,Zt){return setTimeout(W(yt,Zt),At)}function O(yt,At,Zt){return Array.isArray(yt)?(I(yt,Zt[At],Zt),!0):!1}function I(yt,At,Zt){var ye;if(yt)if(yt.forEach)yt.forEach(At,Zt);else if(yt.length!==r)for(ye=0;ye<yt.length;)At.call(Zt,yt[ye],ye,yt),ye++;else for(ye in yt)yt.hasOwnProperty(ye)&&At.call(Zt,yt[ye],ye,yt)}function F(yt,At,Zt){var ye="DEPRECATED METHOD: "+At+`
`+Zt+` AT 
`;return function(){var Ue=new Error("get-stack-trace"),cn=Ue&&Ue.stack?Ue.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Vn=e.console&&(e.console.warn||e.console.log);return Vn&&Vn.call(e.console,ye,cn),yt.apply(this,arguments)}}var V;typeof Object.assign!="function"?V=function(At){if(At===r||At===null)throw new TypeError("Cannot convert undefined or null to object");for(var Zt=Object(At),ye=1;ye<arguments.length;ye++){var Ue=arguments[ye];if(Ue!==r&&Ue!==null)for(var cn in Ue)Ue.hasOwnProperty(cn)&&(Zt[cn]=Ue[cn])}return Zt}:V=Object.assign;var $=F(function(At,Zt,ye){for(var Ue=Object.keys(Zt),cn=0;cn<Ue.length;)(!ye||ye&&At[Ue[cn]]===r)&&(At[Ue[cn]]=Zt[Ue[cn]]),cn++;return At},"extend","Use `assign`."),K=F(function(At,Zt){return $(At,Zt,!0)},"merge","Use `assign`.");function Y(yt,At,Zt){var ye=At.prototype,Ue;Ue=yt.prototype=Object.create(ye),Ue.constructor=yt,Ue._super=ye,Zt&&V(Ue,Zt)}function W(yt,At){return function(){return yt.apply(At,arguments)}}function X(yt,At){return typeof yt==a?yt.apply(At&&At[0]||r,At):yt}function J(yt,At){return yt===r?At:yt}function st(yt,At,Zt){I(xt(At),function(ye){yt.addEventListener(ye,Zt,!1)})}function ct(yt,At,Zt){I(xt(At),function(ye){yt.removeEventListener(ye,Zt,!1)})}function it(yt,At){for(;yt;){if(yt==At)return!0;yt=yt.parentNode}return!1}function ut(yt,At){return yt.indexOf(At)>-1}function xt(yt){return yt.trim().split(/\s+/g)}function wt(yt,At,Zt){if(yt.indexOf&&!Zt)return yt.indexOf(At);for(var ye=0;ye<yt.length;){if(Zt&&yt[ye][Zt]==At||!Zt&&yt[ye]===At)return ye;ye++}return-1}function St(yt){return Array.prototype.slice.call(yt,0)}function le(yt,At,Zt){for(var ye=[],Ue=[],cn=0;cn<yt.length;){var Vn=yt[cn][At];wt(Ue,Vn)<0&&ye.push(yt[cn]),Ue[cn]=Vn,cn++}return ye=ye.sort(function(Sr,Tr){return Sr[At]>Tr[At]}),ye}function pe(yt,At){for(var Zt,ye,Ue=At[0].toUpperCase()+At.slice(1),cn=0;cn<s.length;){if(Zt=s[cn],ye=Zt?Zt+Ue:At,ye in yt)return ye;cn++}return r}var Te=1;function Nt(){return Te++}function Ct(yt){var At=yt.ownerDocument||yt;return At.defaultView||At.parentWindow||e}var Tt=/mobile|tablet|ip(ad|hone|od)|android/i,Bt="ontouchstart"in e,$t=pe(e,"PointerEvent")!==r,ft=Bt&&Tt.test(navigator.userAgent),Mt="touch",Lt="pen",Xt="mouse",re="kinect",ce=25,Me=1,Ne=2,Gt=4,Ce=8,Ee=1,de=2,on=4,Be=8,ln=16,Xe=de|on,Sn=Be|ln,hn=Xe|Sn,Rn=["x","y"],ge=["clientX","clientY"];function Gn(yt,At){var Zt=this;this.manager=yt,this.callback=At,this.element=yt.element,this.target=yt.options.inputTarget,this.domHandler=function(ye){X(yt.options.enable,[yt])&&Zt.handler(ye)},this.init()}Gn.prototype={handler:function(){},init:function(){this.evEl&&st(this.element,this.evEl,this.domHandler),this.evTarget&&st(this.target,this.evTarget,this.domHandler),this.evWin&&st(Ct(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ct(this.element,this.evEl,this.domHandler),this.evTarget&&ct(this.target,this.evTarget,this.domHandler),this.evWin&&ct(Ct(this.element),this.evWin,this.domHandler)}};function $i(yt){var At,Zt=yt.options.inputClass;return Zt?At=Zt:$t?At=Gr:ft?At=Wt:Bt?At=se:At=In,new At(yt,ni)}function ni(yt,At,Zt){var ye=Zt.pointers.length,Ue=Zt.changedPointers.length,cn=At&Me&&ye-Ue===0,Vn=At&(Gt|Ce)&&ye-Ue===0;Zt.isFirst=!!cn,Zt.isFinal=!!Vn,cn&&(yt.session={}),Zt.eventType=At,fn(yt,Zt),yt.emit("hammer.input",Zt),yt.recognize(Zt),yt.session.prevInput=Zt}function fn(yt,At){var Zt=yt.session,ye=At.pointers,Ue=ye.length;Zt.firstInput||(Zt.firstInput=Ui(At)),Ue>1&&!Zt.firstMultiple?Zt.firstMultiple=Ui(At):Ue===1&&(Zt.firstMultiple=!1);var cn=Zt.firstInput,Vn=Zt.firstMultiple,sr=Vn?Vn.center:cn.center,Sr=At.center=Dr(ye);At.timeStamp=x(),At.deltaTime=At.timeStamp-cn.timeStamp,At.angle=Fe(sr,Sr),At.distance=Vr(sr,Sr),Qi(Zt,At),At.offsetDirection=Oa(At.deltaX,At.deltaY);var Tr=ws(At.deltaTime,At.deltaX,At.deltaY);At.overallVelocityX=Tr.x,At.overallVelocityY=Tr.y,At.overallVelocity=y(Tr.x)>y(Tr.y)?Tr.x:Tr.y,At.scale=Vn?Yn(Vn.pointers,ye):1,At.rotation=Vn?yr(Vn.pointers,ye):0,At.maxPointers=Zt.prevInput?At.pointers.length>Zt.prevInput.maxPointers?At.pointers.length:Zt.prevInput.maxPointers:At.pointers.length,mi(Zt,At);var fr=yt.element;it(At.srcEvent.target,fr)&&(fr=At.srcEvent.target),At.target=fr}function Qi(yt,At){var Zt=At.center,ye=yt.offsetDelta||{},Ue=yt.prevDelta||{},cn=yt.prevInput||{};(At.eventType===Me||cn.eventType===Gt)&&(Ue=yt.prevDelta={x:cn.deltaX||0,y:cn.deltaY||0},ye=yt.offsetDelta={x:Zt.x,y:Zt.y}),At.deltaX=Ue.x+(Zt.x-ye.x),At.deltaY=Ue.y+(Zt.y-ye.y)}function mi(yt,At){var Zt=yt.lastInterval||At,ye=At.timeStamp-Zt.timeStamp,Ue,cn,Vn,sr;if(At.eventType!=Ce&&(ye>ce||Zt.velocity===r)){var Sr=At.deltaX-Zt.deltaX,Tr=At.deltaY-Zt.deltaY,fr=ws(ye,Sr,Tr);cn=fr.x,Vn=fr.y,Ue=y(fr.x)>y(fr.y)?fr.x:fr.y,sr=Oa(Sr,Tr),yt.lastInterval=At}else Ue=Zt.velocity,cn=Zt.velocityX,Vn=Zt.velocityY,sr=Zt.direction;At.velocity=Ue,At.velocityX=cn,At.velocityY=Vn,At.direction=sr}function Ui(yt){for(var At=[],Zt=0;Zt<yt.pointers.length;)At[Zt]={clientX:g(yt.pointers[Zt].clientX),clientY:g(yt.pointers[Zt].clientY)},Zt++;return{timeStamp:x(),pointers:At,center:Dr(At),deltaX:yt.deltaX,deltaY:yt.deltaY}}function Dr(yt){var At=yt.length;if(At===1)return{x:g(yt[0].clientX),y:g(yt[0].clientY)};for(var Zt=0,ye=0,Ue=0;Ue<At;)Zt+=yt[Ue].clientX,ye+=yt[Ue].clientY,Ue++;return{x:g(Zt/At),y:g(ye/At)}}function ws(yt,At,Zt){return{x:At/yt||0,y:Zt/yt||0}}function Oa(yt,At){return yt===At?Ee:y(yt)>=y(At)?yt<0?de:on:At<0?Be:ln}function Vr(yt,At,Zt){Zt||(Zt=Rn);var ye=At[Zt[0]]-yt[Zt[0]],Ue=At[Zt[1]]-yt[Zt[1]];return Math.sqrt(ye*ye+Ue*Ue)}function Fe(yt,At,Zt){Zt||(Zt=Rn);var ye=At[Zt[0]]-yt[Zt[0]],Ue=At[Zt[1]]-yt[Zt[1]];return Math.atan2(Ue,ye)*180/Math.PI}function yr(yt,At){return Fe(At[1],At[0],ge)+Fe(yt[1],yt[0],ge)}function Yn(yt,At){return Vr(At[0],At[1],ge)/Vr(yt[0],yt[1],ge)}var ga={mousedown:Me,mousemove:Ne,mouseup:Gt},_r="mousedown",Ze="mousemove mouseup";function In(){this.evEl=_r,this.evWin=Ze,this.pressed=!1,Gn.apply(this,arguments)}Y(In,Gn,{handler:function(At){var Zt=ga[At.type];Zt&Me&&At.button===0&&(this.pressed=!0),Zt&Ne&&At.which!==1&&(Zt=Gt),this.pressed&&(Zt&Gt&&(this.pressed=!1),this.callback(this.manager,Zt,{pointers:[At],changedPointers:[At],pointerType:Xt,srcEvent:At}))}});var kn={pointerdown:Me,pointermove:Ne,pointerup:Gt,pointercancel:Ce,pointerout:Ce},Ir={2:Mt,3:Lt,4:Xt,5:re},ya="pointerdown",Cn="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(ya="MSPointerDown",Cn="MSPointerMove MSPointerUp MSPointerCancel");function Gr(){this.evEl=ya,this.evWin=Cn,Gn.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Y(Gr,Gn,{handler:function(At){var Zt=this.store,ye=!1,Ue=At.type.toLowerCase().replace("ms",""),cn=kn[Ue],Vn=Ir[At.pointerType]||At.pointerType,sr=Vn==Mt,Sr=wt(Zt,At.pointerId,"pointerId");cn&Me&&(At.button===0||sr)?Sr<0&&(Zt.push(At),Sr=Zt.length-1):cn&(Gt|Ce)&&(ye=!0),!(Sr<0)&&(Zt[Sr]=At,this.callback(this.manager,cn,{pointers:Zt,changedPointers:[At],pointerType:Vn,srcEvent:At}),ye&&Zt.splice(Sr,1))}});var It={touchstart:Me,touchmove:Ne,touchend:Gt,touchcancel:Ce},lt="touchstart",dt="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=lt,this.evWin=dt,this.started=!1,Gn.apply(this,arguments)}Y(Et,Gn,{handler:function(At){var Zt=It[At.type];if(Zt===Me&&(this.started=!0),!!this.started){var ye=zt.call(this,At,Zt);Zt&(Gt|Ce)&&ye[0].length-ye[1].length===0&&(this.started=!1),this.callback(this.manager,Zt,{pointers:ye[0],changedPointers:ye[1],pointerType:Mt,srcEvent:At})}}});function zt(yt,At){var Zt=St(yt.touches),ye=St(yt.changedTouches);return At&(Gt|Ce)&&(Zt=le(Zt.concat(ye),"identifier")),[Zt,ye]}var jt={touchstart:Me,touchmove:Ne,touchend:Gt,touchcancel:Ce},ie="touchstart touchmove touchend touchcancel";function Wt(){this.evTarget=ie,this.targetIds={},Gn.apply(this,arguments)}Y(Wt,Gn,{handler:function(At){var Zt=jt[At.type],ye=qt.call(this,At,Zt);ye&&this.callback(this.manager,Zt,{pointers:ye[0],changedPointers:ye[1],pointerType:Mt,srcEvent:At})}});function qt(yt,At){var Zt=St(yt.touches),ye=this.targetIds;if(At&(Me|Ne)&&Zt.length===1)return ye[Zt[0].identifier]=!0,[Zt,Zt];var Ue,cn,Vn=St(yt.changedTouches),sr=[],Sr=this.target;if(cn=Zt.filter(function(Tr){return it(Tr.target,Sr)}),At===Me)for(Ue=0;Ue<cn.length;)ye[cn[Ue].identifier]=!0,Ue++;for(Ue=0;Ue<Vn.length;)ye[Vn[Ue].identifier]&&sr.push(Vn[Ue]),At&(Gt|Ce)&&delete ye[Vn[Ue].identifier],Ue++;if(sr.length)return[le(cn.concat(sr),"identifier"),sr]}var Jt=2500,Se=25;function se(){Gn.apply(this,arguments);var yt=W(this.handler,this);this.touch=new Wt(this.manager,yt),this.mouse=new In(this.manager,yt),this.primaryTouch=null,this.lastTouches=[]}Y(se,Gn,{handler:function(At,Zt,ye){var Ue=ye.pointerType==Mt,cn=ye.pointerType==Xt;if(!(cn&&ye.sourceCapabilities&&ye.sourceCapabilities.firesTouchEvents)){if(Ue)Oe.call(this,Zt,ye);else if(cn&&_n.call(this,ye))return;this.callback(At,Zt,ye)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Oe(yt,At){yt&Me?(this.primaryTouch=At.changedPointers[0].identifier,yn.call(this,At)):yt&(Gt|Ce)&&yn.call(this,At)}function yn(yt){var At=yt.changedPointers[0];if(At.identifier===this.primaryTouch){var Zt={x:At.clientX,y:At.clientY};this.lastTouches.push(Zt);var ye=this.lastTouches,Ue=function(){var cn=ye.indexOf(Zt);cn>-1&&ye.splice(cn,1)};setTimeout(Ue,Jt)}}function _n(yt){for(var At=yt.srcEvent.clientX,Zt=yt.srcEvent.clientY,ye=0;ye<this.lastTouches.length;ye++){var Ue=this.lastTouches[ye],cn=Math.abs(At-Ue.x),Vn=Math.abs(Zt-Ue.y);if(cn<=Se&&Vn<=Se)return!0}return!1}var Ke=pe(c.style,"touchAction"),an=Ke!==r,Tn="compute",Wn="auto",gi="manipulation",qn="none",Hn="pan-x",Ji="pan-y",yi=zr();function Oi(yt,At){this.manager=yt,this.set(At)}Oi.prototype={set:function(yt){yt==Tn&&(yt=this.compute()),an&&this.manager.element.style&&yi[yt]&&(this.manager.element.style[Ke]=yt),this.actions=yt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var yt=[];return I(this.manager.recognizers,function(At){X(At.options.enable,[At])&&(yt=yt.concat(At.getTouchAction()))}),hr(yt.join(" "))},preventDefaults:function(yt){var At=yt.srcEvent,Zt=yt.offsetDirection;if(this.manager.session.prevented){At.preventDefault();return}var ye=this.actions,Ue=ut(ye,qn)&&!yi[qn],cn=ut(ye,Ji)&&!yi[Ji],Vn=ut(ye,Hn)&&!yi[Hn];if(Ue){var sr=yt.pointers.length===1,Sr=yt.distance<2,Tr=yt.deltaTime<250;if(sr&&Sr&&Tr)return}if(!(Vn&&cn)&&(Ue||cn&&Zt&Xe||Vn&&Zt&Sn))return this.preventSrc(At)},preventSrc:function(yt){this.manager.session.prevented=!0,yt.preventDefault()}};function hr(yt){if(ut(yt,qn))return qn;var At=ut(yt,Hn),Zt=ut(yt,Ji);return At&&Zt?qn:At||Zt?At?Hn:Ji:ut(yt,gi)?gi:Wn}function zr(){if(!an)return!1;var yt={},At=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Zt){yt[Zt]=At?e.CSS.supports("touch-action",Zt):!0}),yt}var Fs=1,ci=2,as=4,Js=8,Un=Js,Da=16,Yr=32;function qi(yt){this.options=V({},this.defaults,yt||{}),this.id=Nt(),this.manager=null,this.options.enable=J(this.options.enable,!0),this.state=Fs,this.simultaneous={},this.requireFail=[]}qi.prototype={defaults:{},set:function(yt){return V(this.options,yt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(yt){if(O(yt,"recognizeWith",this))return this;var At=this.simultaneous;return yt=On(yt,this),At[yt.id]||(At[yt.id]=yt,yt.recognizeWith(this)),this},dropRecognizeWith:function(yt){return O(yt,"dropRecognizeWith",this)?this:(yt=On(yt,this),delete this.simultaneous[yt.id],this)},requireFailure:function(yt){if(O(yt,"requireFailure",this))return this;var At=this.requireFail;return yt=On(yt,this),wt(At,yt)===-1&&(At.push(yt),yt.requireFailure(this)),this},dropRequireFailure:function(yt){if(O(yt,"dropRequireFailure",this))return this;yt=On(yt,this);var At=wt(this.requireFail,yt);return At>-1&&this.requireFail.splice(At,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(yt){return!!this.simultaneous[yt.id]},emit:function(yt){var At=this,Zt=this.state;function ye(Ue){At.manager.emit(Ue,yt)}Zt<Js&&ye(At.options.event+oa(Zt)),ye(At.options.event),yt.additionalEvent&&ye(yt.additionalEvent),Zt>=Js&&ye(At.options.event+oa(Zt))},tryEmit:function(yt){if(this.canEmit())return this.emit(yt);this.state=Yr},canEmit:function(){for(var yt=0;yt<this.requireFail.length;){if(!(this.requireFail[yt].state&(Yr|Fs)))return!1;yt++}return!0},recognize:function(yt){var At=V({},yt);if(!X(this.options.enable,[this,At])){this.reset(),this.state=Yr;return}this.state&(Un|Da|Yr)&&(this.state=Fs),this.state=this.process(At),this.state&(ci|as|Js|Da)&&this.tryEmit(At)},process:function(yt){},getTouchAction:function(){},reset:function(){}};function oa(yt){return yt&Da?"cancel":yt&Js?"end":yt&as?"move":yt&ci?"start":""}function Sl(yt){return yt==ln?"down":yt==Be?"up":yt==de?"left":yt==on?"right":""}function On(yt,At){var Zt=At.manager;return Zt?Zt.get(yt):yt}function An(){qi.apply(this,arguments)}Y(An,qi,{defaults:{pointers:1},attrTest:function(yt){var At=this.options.pointers;return At===0||yt.pointers.length===At},process:function(yt){var At=this.state,Zt=yt.eventType,ye=At&(ci|as),Ue=this.attrTest(yt);return ye&&(Zt&Ce||!Ue)?At|Da:ye||Ue?Zt&Gt?At|Js:At&ci?At|as:ci:Yr}});function $r(){An.apply(this,arguments),this.pX=null,this.pY=null}Y($r,An,{defaults:{event:"pan",threshold:10,pointers:1,direction:hn},getTouchAction:function(){var yt=this.options.direction,At=[];return yt&Xe&&At.push(Ji),yt&Sn&&At.push(Hn),At},directionTest:function(yt){var At=this.options,Zt=!0,ye=yt.distance,Ue=yt.direction,cn=yt.deltaX,Vn=yt.deltaY;return Ue&At.direction||(At.direction&Xe?(Ue=cn===0?Ee:cn<0?de:on,Zt=cn!=this.pX,ye=Math.abs(yt.deltaX)):(Ue=Vn===0?Ee:Vn<0?Be:ln,Zt=Vn!=this.pY,ye=Math.abs(yt.deltaY))),yt.direction=Ue,Zt&&ye>At.threshold&&Ue&At.direction},attrTest:function(yt){return An.prototype.attrTest.call(this,yt)&&(this.state&ci||!(this.state&ci)&&this.directionTest(yt))},emit:function(yt){this.pX=yt.deltaX,this.pY=yt.deltaY;var At=Sl(yt.direction);At&&(yt.additionalEvent=this.options.event+At),this._super.emit.call(this,yt)}});function tr(){An.apply(this,arguments)}Y(tr,An,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[qn]},attrTest:function(yt){return this._super.attrTest.call(this,yt)&&(Math.abs(yt.scale-1)>this.options.threshold||this.state&ci)},emit:function(yt){if(yt.scale!==1){var At=yt.scale<1?"in":"out";yt.additionalEvent=this.options.event+At}this._super.emit.call(this,yt)}});function _i(){qi.apply(this,arguments),this._timer=null,this._input=null}Y(_i,qi,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Wn]},process:function(yt){var At=this.options,Zt=yt.pointers.length===At.pointers,ye=yt.distance<At.threshold,Ue=yt.deltaTime>At.time;if(this._input=yt,!ye||!Zt||yt.eventType&(Gt|Ce)&&!Ue)this.reset();else if(yt.eventType&Me)this.reset(),this._timer=E(function(){this.state=Un,this.tryEmit()},At.time,this);else if(yt.eventType&Gt)return Un;return Yr},reset:function(){clearTimeout(this._timer)},emit:function(yt){this.state===Un&&(yt&&yt.eventType&Gt?this.manager.emit(this.options.event+"up",yt):(this._input.timeStamp=x(),this.manager.emit(this.options.event,this._input)))}});function ii(){An.apply(this,arguments)}Y(ii,An,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[qn]},attrTest:function(yt){return this._super.attrTest.call(this,yt)&&(Math.abs(yt.rotation)>this.options.threshold||this.state&ci)}});function Pn(){An.apply(this,arguments)}Y(Pn,An,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Xe|Sn,pointers:1},getTouchAction:function(){return $r.prototype.getTouchAction.call(this)},attrTest:function(yt){var At=this.options.direction,Zt;return At&(Xe|Sn)?Zt=yt.overallVelocity:At&Xe?Zt=yt.overallVelocityX:At&Sn&&(Zt=yt.overallVelocityY),this._super.attrTest.call(this,yt)&&At&yt.offsetDirection&&yt.distance>this.options.threshold&&yt.maxPointers==this.options.pointers&&y(Zt)>this.options.velocity&&yt.eventType&Gt},emit:function(yt){var At=Sl(yt.offsetDirection);At&&this.manager.emit(this.options.event+At,yt),this.manager.emit(this.options.event,yt)}});function zn(){qi.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Y(zn,qi,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[gi]},process:function(yt){var At=this.options,Zt=yt.pointers.length===At.pointers,ye=yt.distance<At.threshold,Ue=yt.deltaTime<At.time;if(this.reset(),yt.eventType&Me&&this.count===0)return this.failTimeout();if(ye&&Ue&&Zt){if(yt.eventType!=Gt)return this.failTimeout();var cn=this.pTime?yt.timeStamp-this.pTime<At.interval:!0,Vn=!this.pCenter||Vr(this.pCenter,yt.center)<At.posThreshold;this.pTime=yt.timeStamp,this.pCenter=yt.center,!Vn||!cn?this.count=1:this.count+=1,this._input=yt;var sr=this.count%At.taps;if(sr===0)return this.hasRequireFailures()?(this._timer=E(function(){this.state=Un,this.tryEmit()},At.interval,this),ci):Un}return Yr},failTimeout:function(){return this._timer=E(function(){this.state=Yr},this.options.interval,this),Yr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Un&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function la(yt,At){return At=At||{},At.recognizers=J(At.recognizers,la.defaults.preset),new ss(yt,At)}la.VERSION="2.0.7",la.defaults={domEvents:!1,touchAction:Tn,enable:!0,inputTarget:null,inputClass:null,preset:[[ii,{enable:!1}],[tr,{enable:!1},["rotate"]],[Pn,{direction:Xe}],[$r,{direction:Xe},["swipe"]],[zn],[zn,{event:"doubletap",taps:2},["tap"]],[_i]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var _a=1,Hi=2;function ss(yt,At){this.options=V({},la.defaults,At||{}),this.options.inputTarget=this.options.inputTarget||yt,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=yt,this.input=$i(this),this.touchAction=new Oi(this,this.options.touchAction),Ko(this,!0),I(this.options.recognizers,function(Zt){var ye=this.add(new Zt[0](Zt[1]));Zt[2]&&ye.recognizeWith(Zt[2]),Zt[3]&&ye.requireFailure(Zt[3])},this)}ss.prototype={set:function(yt){return V(this.options,yt),yt.touchAction&&this.touchAction.update(),yt.inputTarget&&(this.input.destroy(),this.input.target=yt.inputTarget,this.input.init()),this},stop:function(yt){this.session.stopped=yt?Hi:_a},recognize:function(yt){var At=this.session;if(!At.stopped){this.touchAction.preventDefaults(yt);var Zt,ye=this.recognizers,Ue=At.curRecognizer;(!Ue||Ue&&Ue.state&Un)&&(Ue=At.curRecognizer=null);for(var cn=0;cn<ye.length;)Zt=ye[cn],At.stopped!==Hi&&(!Ue||Zt==Ue||Zt.canRecognizeWith(Ue))?Zt.recognize(yt):Zt.reset(),!Ue&&Zt.state&(ci|as|Js)&&(Ue=At.curRecognizer=Zt),cn++}},get:function(yt){if(yt instanceof qi)return yt;for(var At=this.recognizers,Zt=0;Zt<At.length;Zt++)if(At[Zt].options.event==yt)return At[Zt];return null},add:function(yt){if(O(yt,"add",this))return this;var At=this.get(yt.options.event);return At&&this.remove(At),this.recognizers.push(yt),yt.manager=this,this.touchAction.update(),yt},remove:function(yt){if(O(yt,"remove",this))return this;if(yt=this.get(yt),yt){var At=this.recognizers,Zt=wt(At,yt);Zt!==-1&&(At.splice(Zt,1),this.touchAction.update())}return this},on:function(yt,At){if(yt!==r&&At!==r){var Zt=this.handlers;return I(xt(yt),function(ye){Zt[ye]=Zt[ye]||[],Zt[ye].push(At)}),this}},off:function(yt,At){if(yt!==r){var Zt=this.handlers;return I(xt(yt),function(ye){At?Zt[ye]&&Zt[ye].splice(wt(Zt[ye],At),1):delete Zt[ye]}),this}},emit:function(yt,At){this.options.domEvents&&Ss(yt,At);var Zt=this.handlers[yt]&&this.handlers[yt].slice();if(!(!Zt||!Zt.length)){At.type=yt,At.preventDefault=function(){At.srcEvent.preventDefault()};for(var ye=0;ye<Zt.length;)Zt[ye](At),ye++}},destroy:function(){this.element&&Ko(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Ko(yt,At){var Zt=yt.element;if(Zt.style){var ye;I(yt.options.cssProps,function(Ue,cn){ye=pe(Zt.style,cn),At?(yt.oldCssProps[ye]=Zt.style[ye],Zt.style[ye]=Ue):Zt.style[ye]=yt.oldCssProps[ye]||""}),At||(yt.oldCssProps={})}}function Ss(yt,At){var Zt=n.createEvent("Event");Zt.initEvent(yt,!0,!0),Zt.gesture=At,At.target.dispatchEvent(Zt)}V(la,{INPUT_START:Me,INPUT_MOVE:Ne,INPUT_END:Gt,INPUT_CANCEL:Ce,STATE_POSSIBLE:Fs,STATE_BEGAN:ci,STATE_CHANGED:as,STATE_ENDED:Js,STATE_RECOGNIZED:Un,STATE_CANCELLED:Da,STATE_FAILED:Yr,DIRECTION_NONE:Ee,DIRECTION_LEFT:de,DIRECTION_RIGHT:on,DIRECTION_UP:Be,DIRECTION_DOWN:ln,DIRECTION_HORIZONTAL:Xe,DIRECTION_VERTICAL:Sn,DIRECTION_ALL:hn,Manager:ss,Input:Gn,TouchAction:Oi,TouchInput:Wt,MouseInput:In,PointerEventInput:Gr,TouchMouseInput:se,SingleTouchInput:Et,Recognizer:qi,AttrRecognizer:An,Tap:zn,Pan:$r,Swipe:Pn,Pinch:tr,Rotate:ii,Press:_i,on:st,off:ct,each:I,merge:K,extend:$,assign:V,inherit:Y,bindFn:W,prefixed:pe});var Di=typeof e<"u"?e:typeof self<"u"?self:{};Di.Hammer=la,t.exports?t.exports=la:e[i]=la})(window,document,"Hammer")})(b1)),b1.exports}var cH=uH();const Vy=yu(cH);/*!
* chartjs-plugin-zoom v2.2.0
* https://www.chartjs.org/chartjs-plugin-zoom/2.2.0/
 * (c) 2016-2024 chartjs-plugin-zoom Contributors
 * Released under the MIT License
 */const Jy=t=>t&&t.enabled&&t.modifierKey,oz=(t,e)=>t&&e[t+"Key"],Z2=(t,e)=>t&&!e[t+"Key"];function nd(t,e,n){return t===void 0?!0:typeof t=="string"?t.indexOf(e)!==-1:typeof t=="function"?t({chart:n}).indexOf(e)!==-1:!1}function w1(t,e){return typeof t=="function"&&(t=t({chart:e})),typeof t=="string"?{x:t.indexOf("x")!==-1,y:t.indexOf("y")!==-1}:{x:!1,y:!1}}function hH(t,e){let n;return function(){return clearTimeout(n),n=setTimeout(t,e),e}}function fH({x:t,y:e},n){const i=n.scales,r=Object.keys(i);for(let s=0;s<r.length;s++){const c=i[r[s]];if(e>=c.top&&e<=c.bottom&&t>=c.left&&t<=c.right)return c}return null}function lz(t,e,n){const{mode:i="xy",scaleMode:r,overScaleMode:s}=t||{},c=fH(e,n),a=w1(i,n),g=w1(r,n);if(s){const x=w1(s,n);for(const E of["x","y"])x[E]&&(g[E]=a[E],a[E]=!1)}if(c&&g[c.axis])return[c];const y=[];return Pi(n.scales,function(x){a[x.axis]&&y.push(x)}),y}const vS=new WeakMap;function ka(t){let e=vS.get(t);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},vS.set(t,e)),e}function dH(t){vS.delete(t)}function uz(t,e,n,i){const r=Math.max(0,Math.min(1,(t-e)/n||0)),s=1-r;return{min:i*r,max:i*s}}function cz(t,e){const n=t.isHorizontal()?e.x:e.y;return t.getValueForPixel(n)}function hz(t,e,n){const i=t.max-t.min,r=i*(e-1),s=cz(t,n);return uz(s,t.min,i,r)}function pH(t,e,n){const i=cz(t,n);if(i===void 0)return{min:t.min,max:t.max};const r=Math.log10(t.min),s=Math.log10(t.max),c=Math.log10(i),a=s-r,g=a*(e-1),y=uz(c,r,a,g);return{min:Math.pow(10,r+y.min),max:Math.pow(10,s-y.max)}}function mH(t,e){return e&&(e[t.id]||e[t.axis])||{}}function jA(t,e,n,i,r){let s=n[i];if(s==="original"){const c=t.originalScaleLimits[e.id][i];s=ti(c.options,c.scale)}return ti(s,r)}function gH(t,e,n){const i=t.getValueForPixel(e),r=t.getValueForPixel(n);return{min:Math.min(i,r),max:Math.max(i,r)}}function yH(t,{min:e,max:n,minLimit:i,maxLimit:r},s){const c=(t-n+e)/2;e-=c,n+=c;const a=s.min.options??s.min.scale,g=s.max.options??s.max.scale,y=t/1e6;return lp(e,a,y)&&(e=a),lp(n,g,y)&&(n=g),e<i?(e=i,n=Math.min(i+t,r)):n>r&&(n=r,e=Math.max(r-t,i)),{min:e,max:n}}function Cp(t,{min:e,max:n},i,r=!1){const s=ka(t.chart),{options:c}=t,a=mH(t,i),{minRange:g=0}=a,y=jA(s,t,a,"min",-1/0),x=jA(s,t,a,"max",1/0);if(r==="pan"&&(e<y||n>x))return!0;const E=t.max-t.min,O=r?Math.max(n-e,g):E;if(r&&O===g&&E<=g)return!0;const I=yH(O,{min:e,max:n,minLimit:y,maxLimit:x},s.originalScaleLimits[t.id]);return c.min=I.min,c.max=I.max,s.updatedScaleLimits[t.id]=I,t.parse(I.min)!==t.min||t.parse(I.max)!==t.max}function _H(t,e,n,i){const r=hz(t,e,n),s={min:t.min+r.min,max:t.max-r.max};return Cp(t,s,i,!0)}function vH(t,e,n,i){const r=pH(t,e,n);return Cp(t,r,i,!0)}function xH(t,e,n,i){Cp(t,gH(t,e,n),i,!0)}const FA=t=>t===0||isNaN(t)?0:t<0?Math.min(Math.round(t),-1):Math.max(Math.round(t),1);function bH(t){const n=t.getLabels().length-1;t.min>0&&(t.min-=1),t.max<n&&(t.max+=1)}function wH(t,e,n,i){const r=hz(t,e,n);t.min===t.max&&e<1&&bH(t);const s={min:t.min+FA(r.min),max:t.max-FA(r.max)};return Cp(t,s,i,!0)}function SH(t){return t.isHorizontal()?t.width:t.height}function TH(t,e,n){const r=t.getLabels().length-1;let{min:s,max:c}=t;const a=Math.max(c-s,1),g=Math.round(SH(t)/Math.max(a,10)),y=Math.round(Math.abs(e/g));let x;return e<-g?(c=Math.min(c+y,r),s=a===1?c:c-a,x=c===r):e>g&&(s=Math.max(0,s-y),c=a===1?s:s+a,x=s===0),Cp(t,{min:s,max:c},n)||x}const MH={second:500,minute:30*1e3,hour:1800*1e3,day:720*60*1e3,week:3.5*24*60*60*1e3,month:360*60*60*1e3,quarter:1440*60*60*1e3,year:4368*60*60*1e3};function fz(t,e,n,i=!1){const{min:r,max:s,options:c}=t,a=c.time&&c.time.round,g=MH[a]||0,y=t.getValueForPixel(t.getPixelForValue(r+g)-e),x=t.getValueForPixel(t.getPixelForValue(s+g)-e);return isNaN(y)||isNaN(x)?!0:Cp(t,{min:y,max:x},n,i?"pan":!1)}function UA(t,e,n){return fz(t,e,n,!0)}const xS={category:wH,default:_H,logarithmic:vH},bS={default:xH},wS={category:TH,default:fz,logarithmic:UA,timeseries:UA};function EH(t,e,n){const{id:i,options:{min:r,max:s}}=t;if(!e[i]||!n[i])return!0;const c=n[i];return c.min!==r||c.max!==s}function VA(t,e){Pi(t,(n,i)=>{e[i]||delete t[i]})}function sg(t,e){const{scales:n}=t,{originalScaleLimits:i,updatedScaleLimits:r}=e;return Pi(n,function(s){EH(s,i,r)&&(i[s.id]={min:{scale:s.min,options:s.options.min},max:{scale:s.max,options:s.options.max}})}),VA(i,n),VA(r,n),i}function $A(t,e,n,i){const r=xS[t.type]||xS.default;Jn(r,[t,e,n,i])}function qA(t,e,n,i){const r=bS[t.type]||bS.default;Jn(r,[t,e,n,i])}function AH(t){const e=t.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function G2(t,e,n="none",i="api"){const{x:r=1,y:s=1,focalPoint:c=AH(t)}=typeof e=="number"?{x:e,y:e}:e,a=ka(t),{options:{limits:g,zoom:y}}=a;sg(t,a);const x=r!==1,E=s!==1,O=lz(y,c,t);Pi(O||t.scales,function(I){I.isHorizontal()&&x?$A(I,r,c,g):!I.isHorizontal()&&E&&$A(I,s,c,g)}),t.update(n),Jn(y.onZoom,[{chart:t,trigger:i}])}function dz(t,e,n,i="none",r="api"){const s=ka(t),{options:{limits:c,zoom:a}}=s,{mode:g="xy"}=a;sg(t,s);const y=nd(g,"x",t),x=nd(g,"y",t);Pi(t.scales,function(E){E.isHorizontal()&&y?qA(E,e.x,n.x,c):!E.isHorizontal()&&x&&qA(E,e.y,n.y,c)}),t.update(i),Jn(a.onZoom,[{chart:t,trigger:r}])}function CH(t,e,n,i="none",r="api"){const s=ka(t);sg(t,s);const c=t.scales[e];Cp(c,n,void 0,!0),t.update(i),Jn(s.options.zoom?.onZoom,[{chart:t,trigger:r}])}function PH(t,e="default"){const n=ka(t),i=sg(t,n);Pi(t.scales,function(r){const s=r.options;i[r.id]?(s.min=i[r.id].min.options,s.max=i[r.id].max.options):(delete s.min,delete s.max),delete n.updatedScaleLimits[r.id]}),t.update(e),Jn(n.options.zoom.onZoomComplete,[{chart:t}])}function kH(t,e){const n=t.originalScaleLimits[e];if(!n)return;const{min:i,max:r}=n;return ti(r.options,r.scale)-ti(i.options,i.scale)}function OH(t){const e=ka(t);let n=1,i=1;return Pi(t.scales,function(r){const s=kH(e,r.id);if(s){const c=Math.round(s/(r.max-r.min)*100)/100;n=Math.min(n,c),i=Math.max(i,c)}}),n<1?n:i}function HA(t,e,n,i){const{panDelta:r}=i,s=r[t.id]||0;$u(s)===$u(e)&&(e+=s);const c=wS[t.type]||wS.default;Jn(c,[t,e,n])?r[t.id]=0:r[t.id]=e}function pz(t,e,n,i="none"){const{x:r=0,y:s=0}=typeof e=="number"?{x:e,y:e}:e,c=ka(t),{options:{pan:a,limits:g}}=c,{onPan:y}=a||{};sg(t,c);const x=r!==0,E=s!==0;Pi(n||t.scales,function(O){O.isHorizontal()&&x?HA(O,r,g,c):!O.isHorizontal()&&E&&HA(O,s,g,c)}),t.update(i),Jn(y,[{chart:t}])}function mz(t){const e=ka(t);sg(t,e);const n={};for(const i of Object.keys(t.scales)){const{min:r,max:s}=e.originalScaleLimits[i]||{min:{},max:{}};n[i]={min:r.scale,max:s.scale}}return n}function DH(t){const e=ka(t),n={};for(const i of Object.keys(t.scales))n[i]=e.updatedScaleLimits[i];return n}function IH(t){const e=mz(t);for(const n of Object.keys(t.scales)){const{min:i,max:r}=e[n];if(i!==void 0&&t.scales[n].min!==i||r!==void 0&&t.scales[n].max!==r)return!0}return!1}function ZA(t){const e=ka(t);return e.panning||e.dragging}const GA=(t,e,n)=>Math.min(n,Math.max(e,t));function Ul(t,e){const{handlers:n}=ka(t),i=n[e];i&&i.target&&(i.target.removeEventListener(e,i),delete n[e])}function $y(t,e,n,i){const{handlers:r,options:s}=ka(t),c=r[n];if(c&&c.target===e)return;Ul(t,n),r[n]=g=>i(t,g,s),r[n].target=e;const a=n==="wheel"?!1:void 0;e.addEventListener(n,r[n],{passive:a})}function zH(t,e){const n=ka(t);n.dragStart&&(n.dragging=!0,n.dragEnd=e,t.update("none"))}function LH(t,e){const n=ka(t);!n.dragStart||e.key!=="Escape"||(Ul(t,"keydown"),n.dragging=!1,n.dragStart=n.dragEnd=null,t.update("none"))}function SS(t,e){if(t.target!==e.canvas){const n=e.canvas.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}return Kc(t,e)}function gz(t,e,n){const{onZoomStart:i,onZoomRejected:r}=n;if(i){const s=SS(e,t);if(Jn(i,[{chart:t,event:e,point:s}])===!1)return Jn(r,[{chart:t,event:e}]),!1}}function RH(t,e){if(t.legend){const s=Kc(e,t);if(eh(s,t.legend))return}const n=ka(t),{pan:i,zoom:r={}}=n.options;if(e.button!==0||oz(Jy(i),e)||Z2(Jy(r.drag),e))return Jn(r.onZoomRejected,[{chart:t,event:e}]);gz(t,e,r)!==!1&&(n.dragStart=e,$y(t,t.canvas.ownerDocument,"mousemove",zH),$y(t,window.document,"keydown",LH))}function NH({begin:t,end:e},n){let i=e.x-t.x,r=e.y-t.y;const s=Math.abs(i/r);s>n?i=Math.sign(i)*Math.abs(r*n):s<n&&(r=Math.sign(r)*Math.abs(i/n)),e.x=t.x+i,e.y=t.y+r}function YA(t,e,n,{min:i,max:r,prop:s}){t[i]=GA(Math.min(n.begin[s],n.end[s]),e[i],e[r]),t[r]=GA(Math.max(n.begin[s],n.end[s]),e[i],e[r])}function BH(t,e,n){const i={begin:SS(e.dragStart,t),end:SS(e.dragEnd,t)};if(n){const r=t.chartArea.width/t.chartArea.height;NH(i,r)}return i}function yz(t,e,n,i){const r=nd(e,"x",t),s=nd(e,"y",t),{top:c,left:a,right:g,bottom:y,width:x,height:E}=t.chartArea,O={top:c,left:a,right:g,bottom:y},I=BH(t,n,i&&r&&s);r&&YA(O,t.chartArea,I,{min:"left",max:"right",prop:"x"}),s&&YA(O,t.chartArea,I,{min:"top",max:"bottom",prop:"y"});const F=O.right-O.left,V=O.bottom-O.top;return{...O,width:F,height:V,zoomX:r&&F?1+(x-F)/x:1,zoomY:s&&V?1+(E-V)/E:1}}function jH(t,e){const n=ka(t);if(!n.dragStart)return;Ul(t,"mousemove");const{mode:i,onZoomComplete:r,drag:{threshold:s=0,maintainAspectRatio:c}}=n.options.zoom,a=yz(t,i,{dragStart:n.dragStart,dragEnd:e},c),g=nd(i,"x",t)?a.width:0,y=nd(i,"y",t)?a.height:0,x=Math.sqrt(g*g+y*y);if(n.dragStart=n.dragEnd=null,x<=s){n.dragging=!1,t.update("none");return}dz(t,{x:a.left,y:a.top},{x:a.right,y:a.bottom},"zoom","drag"),n.dragging=!1,n.filterNextClick=!0,Jn(r,[{chart:t}])}function FH(t,e,n){if(Z2(Jy(n.wheel),e)){Jn(n.onZoomRejected,[{chart:t,event:e}]);return}if(gz(t,e,n)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function UH(t,e){const{handlers:{onZoomComplete:n},options:{zoom:i}}=ka(t);if(!FH(t,e,i))return;const r=e.target.getBoundingClientRect(),s=i.wheel.speed,c=e.deltaY>=0?2-1/(1-s):1+s,a={x:c,y:c,focalPoint:{x:e.clientX-r.left,y:e.clientY-r.top}};G2(t,a,"zoom","wheel"),Jn(n,[{chart:t}])}function VH(t,e,n,i){n&&(ka(t).handlers[e]=hH(()=>Jn(n,[{chart:t}]),i))}function $H(t,e){const n=t.canvas,{wheel:i,drag:r,onZoomComplete:s}=e.zoom;i.enabled?($y(t,n,"wheel",UH),VH(t,"onZoomComplete",s,250)):Ul(t,"wheel"),r.enabled?($y(t,n,"mousedown",RH),$y(t,n.ownerDocument,"mouseup",jH)):(Ul(t,"mousedown"),Ul(t,"mousemove"),Ul(t,"mouseup"),Ul(t,"keydown"))}function qH(t){Ul(t,"mousedown"),Ul(t,"mousemove"),Ul(t,"mouseup"),Ul(t,"wheel"),Ul(t,"click"),Ul(t,"keydown")}function HH(t,e){return function(n,i){const{pan:r,zoom:s={}}=e.options;if(!r||!r.enabled)return!1;const c=i&&i.srcEvent;return c&&!e.panning&&i.pointerType==="mouse"&&(Z2(Jy(r),c)||oz(Jy(s.drag),c))?(Jn(r.onPanRejected,[{chart:t,event:i}]),!1):!0}}function ZH(t,e){const n=Math.abs(t.clientX-e.clientX),i=Math.abs(t.clientY-e.clientY),r=n/i;let s,c;return r>.3&&r<1.7?s=c=!0:n>i?s=!0:c=!0,{x:s,y:c}}function _z(t,e,n){if(e.scale){const{center:i,pointers:r}=n,s=1/e.scale*n.scale,c=n.target.getBoundingClientRect(),a=ZH(r[0],r[1]),g=e.options.zoom.mode,y={x:a.x&&nd(g,"x",t)?s:1,y:a.y&&nd(g,"y",t)?s:1,focalPoint:{x:i.x-c.left,y:i.y-c.top}};G2(t,y,"zoom","pinch"),e.scale=n.scale}}function GH(t,e,n){if(e.options.zoom.pinch.enabled){const i=Kc(n,t);Jn(e.options.zoom.onZoomStart,[{chart:t,event:n,point:i}])===!1?(e.scale=null,Jn(e.options.zoom.onZoomRejected,[{chart:t,event:n}])):e.scale=1}}function YH(t,e,n){e.scale&&(_z(t,e,n),e.scale=null,Jn(e.options.zoom.onZoomComplete,[{chart:t}]))}function vz(t,e,n){const i=e.delta;i&&(e.panning=!0,pz(t,{x:n.deltaX-i.x,y:n.deltaY-i.y},e.panScales),e.delta={x:n.deltaX,y:n.deltaY})}function WH(t,e,n){const{enabled:i,onPanStart:r,onPanRejected:s}=e.options.pan;if(!i)return;const c=n.target.getBoundingClientRect(),a={x:n.center.x-c.left,y:n.center.y-c.top};if(Jn(r,[{chart:t,event:n,point:a}])===!1)return Jn(s,[{chart:t,event:n}]);e.panScales=lz(e.options.pan,a,t),e.delta={x:0,y:0},vz(t,e,n)}function XH(t,e){e.delta=null,e.panning&&(e.panning=!1,e.filterNextClick=!0,Jn(e.options.pan.onPanComplete,[{chart:t}]))}const TS=new WeakMap;function WA(t,e){const n=ka(t),i=t.canvas,{pan:r,zoom:s}=e,c=new Vy.Manager(i);s&&s.pinch.enabled&&(c.add(new Vy.Pinch),c.on("pinchstart",a=>GH(t,n,a)),c.on("pinch",a=>_z(t,n,a)),c.on("pinchend",a=>YH(t,n,a))),r&&r.enabled&&(c.add(new Vy.Pan({threshold:r.threshold,enable:HH(t,n)})),c.on("panstart",a=>WH(t,n,a)),c.on("panmove",a=>vz(t,n,a)),c.on("panend",()=>XH(t,n))),TS.set(t,c)}function XA(t){const e=TS.get(t);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),TS.delete(t))}function KH(t,e){const{pan:n,zoom:i}=t,{pan:r,zoom:s}=e;return i?.zoom?.pinch?.enabled!==s?.zoom?.pinch?.enabled||n?.enabled!==r?.enabled||n?.threshold!==r?.threshold}var QH="2.2.0";function l0(t,e,n){const i=n.zoom.drag,{dragStart:r,dragEnd:s}=ka(t);if(i.drawTime!==e||!s)return;const{left:c,top:a,width:g,height:y}=yz(t,n.zoom.mode,{dragStart:r,dragEnd:s},i.maintainAspectRatio),x=t.ctx;x.save(),x.beginPath(),x.fillStyle=i.backgroundColor||"rgba(225,225,225,0.3)",x.fillRect(c,a,g,y),i.borderWidth>0&&(x.lineWidth=i.borderWidth,x.strokeStyle=i.borderColor||"rgba(225,225,225)",x.strokeRect(c,a,g,y)),x.restore()}var xz={id:"zoom",version:QH,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(t,e,n){const i=ka(t);i.options=n,Object.prototype.hasOwnProperty.call(n.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(n.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(n.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),Vy&&WA(t,n),t.pan=(r,s,c)=>pz(t,r,s,c),t.zoom=(r,s)=>G2(t,r,s),t.zoomRect=(r,s,c)=>dz(t,r,s,c),t.zoomScale=(r,s,c)=>CH(t,r,s,c),t.resetZoom=r=>PH(t,r),t.getZoomLevel=()=>OH(t),t.getInitialScaleBounds=()=>mz(t),t.getZoomedScaleBounds=()=>DH(t),t.isZoomedOrPanned=()=>IH(t),t.isZoomingOrPanning=()=>ZA(t)},beforeEvent(t,{event:e}){if(ZA(t))return!1;if(e.type==="click"||e.type==="mouseup"){const n=ka(t);if(n.filterNextClick)return n.filterNextClick=!1,!1}},beforeUpdate:function(t,e,n){const i=ka(t),r=i.options;i.options=n,KH(r,n)&&(XA(t),WA(t,n)),$H(t,n)},beforeDatasetsDraw(t,e,n){l0(t,"beforeDatasetsDraw",n)},afterDatasetsDraw(t,e,n){l0(t,"afterDatasetsDraw",n)},beforeDraw(t,e,n){l0(t,"beforeDraw",n)},afterDraw(t,e,n){l0(t,"afterDraw",n)},stop:function(t){qH(t),Vy&&XA(t),dH(t)},panFunctions:wS,zoomFunctions:xS,zoomRectFunctions:bS};const KA="http://192.168.0.47:5000",JH={},t9=[11,26,27,28,29,30,31,36,41,42,43,44,45,46,47,48,49],e9="2020-01-01",n9="2030-12-01";function i9({selectedRegion:t}){const[e,n]=Z.useState([]),[i,r]=Z.useState([]),[s,c]=Z.useState(!1),[a,g]=Z.useState(null),[y,x]=Z.useState(!0),[E,O]=Z.useState(0),I=Z.useRef(null),F=Z.useRef(null),V={animation:"blink 1s infinite",fontSize:"14px",color:"#555"},$=`
@keyframes blink {
  0% { opacity: 1; }
  50% { opacity: 0.2; }
  100% { opacity: 1; }
}
`;window.__chartZoomRegistered||(window.__chartZoomRegistered=!0,sd.register(xz));const K=Z.useMemo(()=>{if(!t)return null;const St=Number(t.cityId||0);return{code:Number(JH[St]??St),name:t.cityName||""}},[t]);if(Z.useEffect(()=>{t?.cityId?x(!1):(x(!0),O(St=>St+1))},[t]),Z.useEffect(()=>{I.current&&I.current.abort();const St=new AbortController;I.current=St;const le=async()=>{const Te=t9.map(async Mt=>{const Lt=await fetch(`${KA}/predict?code=${Mt}`,{signal:St.signal});return Lt.ok?await Lt.json():null}),Nt=(await Promise.all(Te)).filter(Boolean),Ct=new Map,Tt=new Map;Nt.forEach(Mt=>{const Lt=Mt?.actual||[],Xt=Mt?.forecast||[];Lt.forEach(({date:re,y:ce})=>{Ct.has(re)||Ct.set(re,[]),Ct.get(re).push(ce)}),Xt.forEach(({date:re,y:ce})=>{Tt.has(re)||Tt.set(re,[]),Tt.get(re).push(ce)})});const Bt=Mt=>{const Lt=Mt.filter(Xt=>Xt!=null);return Lt.length?Lt.reduce((Xt,re)=>Xt+re,0)/Lt.length:null},$t=Array.from(Ct.entries()).map(([Mt,Lt])=>({date:Mt,y:Bt(Lt)})).sort((Mt,Lt)=>Mt.date<Lt.date?-1:1),ft=Array.from(Tt.entries()).map(([Mt,Lt])=>({date:Mt,y:Bt(Lt)})).sort((Mt,Lt)=>Mt.date<Lt.date?-1:1);return{avgActual:$t,avgForecast:ft}},pe=async Te=>{const Nt=await fetch(`${KA}/predict?code=${Te}`,{signal:St.signal});if(!Nt.ok)throw new Error(`HTTP ${Nt.status}`);return await Nt.json()};return(async()=>{try{if(c(!0),g(null),y){const{avgActual:Lt,avgForecast:Xt}=await le();n(Lt),r(Xt);return}const Te=await pe(K.code),Nt=Te?.last_anchor||null,Ct=Array.isArray(Te?.actual)?Te.actual:[],Tt=Array.isArray(Te?.forecast)?Te.forecast:[],Bt=Array.isArray(Te?.combined)?Te.combined:[],$t=Bt.length?Bt:[...Ct,...Tt].sort((Lt,Xt)=>Lt.date<Xt.date?-1:1);let ft=Ct,Mt=Tt;!ft.length&&$t.length&&Nt&&(ft=$t.filter(Lt=>Lt.date<Nt),Mt=$t.filter(Lt=>Lt.date>=Nt)),n(ft),r(Mt)}catch(Te){Te.name!=="AbortError"&&g(Te.message||"  ")}finally{St.signal.aborted||c(!1)}})(),()=>St.abort()},[y,K,E]),s)return vt.jsxs("div",{style:{height:420,display:"flex",alignItems:"center",justifyContent:"center"},children:[vt.jsx("style",{children:$}),vt.jsx("span",{style:V,children:"    ..."})]});if(a)return vt.jsxs("p",{children:[" ",a]});if(!e.length&&!i.length)return vt.jsx("p",{children:" ."});const Y=[...new Set([...e.map(St=>St.date),...i.map(St=>St.date)])].sort(),W=new Date(Y[0]).getTime(),X=new Date(Y[Y.length-1]).getTime(),J=Math.max(new Date(e9).getTime(),W),st=Math.min(new Date(n9).getTime(),X),ct=new Map(e.map(St=>[St.date,St.y])),it=new Map(i.map(St=>[St.date,St.y])),ut={labels:Y,datasets:[{label:y?"   (C)":"  (C)",data:Y.map(St=>ct.get(St)??null),borderColor:"#36A2EB",backgroundColor:"rgba(54,162,235,0.15)",pointRadius:2,fill:!0,tension:.3},{label:y?"   (C)":"  (C)",data:Y.map(St=>it.get(St)??null),borderColor:"#FF6384",backgroundColor:"rgba(255,99,132,0.2)",pointRadius:2,fill:!0,tension:.3}]},xt={responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"month",displayFormats:{month:"yyyy-MM"}},min:J,max:st,title:{display:!0,text:""}},y:{title:{display:!0,text:" (C)"}}},plugins:{legend:{position:"top"},zoom:{limits:{x:{min:W,max:X}},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"x"},pan:{enabled:!0,mode:"x"}}}},wt=()=>{const St=F.current?.chart||F.current;St&&(St.resetZoom(),St.options.scales.x.min=J,St.options.scales.x.max=st,St.update("none"))};return vt.jsxs("div",{style:{height:420},children:[vt.jsx(j2,{ref:F,data:ut,options:xt}),vt.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:6},children:[vt.jsxs("span",{style:{fontSize:12,color:"#777"},children:[y?"   ()":"    ","  :"," ",Y[0]?.slice(0,7)," ~ ",Y[Y.length-1]?.slice(0,7)]}),vt.jsx("button",{onClick:wt,style:{fontSize:12,padding:"4px 8px",border:"1px solid #ddd",borderRadius:6,background:"#fff"},children:" (2020~2030)"})]})]})}sd.register(xz);const r9="2025-07-01",a9="2030-12-01",s9=202507;function o9(t){if(!t)return null;const e=String(t);return e.length!==6?null:`${e.substring(0,4)}-${e.substring(4,6)}`}const l9=t=>{const n=new Date(r9).valueOf(),i=new Date(a9).valueOf();return{responsive:!0,maintainAspectRatio:!1,devicePixelRatio:window.devicePixelRatio>1?window.devicePixelRatio:2,scales:{x:{type:"time",min:n,max:i,time:{unit:"month",stepSize:4,tooltipFormat:"yyyy-MM",displayFormats:{month:"yyyy-MM"}},ticks:{},title:{display:!0,text:""}},y:{title:{display:!0,text:" (MWh)"},ticks:{callback:r=>r.toLocaleString()}}},plugins:{legend:{position:"top"},tooltip:{callbacks:{label:r=>{const s=r.dataset.label||"",c=r.parsed.y;return`${s}: ${c.toLocaleString()} MWh`}}}}}};function u9({selectedRegion:t}){const[e,n]=Z.useState([]),[i,r]=Z.useState(!1),[s,c]=Z.useState(null),[a,g]=Z.useState(!0),[y,x]=Z.useState("electric");Z.useEffect(()=>{(async()=>{r(!0),c(null),n([]);let F=0,V=0;t?(F=t.cityId||0,V=t.countyId||0,g(!1)):g(!0);try{const $=await fetch(`/api/predict-energy?cityId=${F}&countyId=${V}`);if(!$.ok)throw new Error("    ");const K=await $.json();n(K.items||[])}catch($){console.error("   :",$),c($.message)}finally{r(!1)}})()},[t]);const E=Z.useMemo(()=>{const I=new Map;e.forEach(X=>{I.set(X.yearMonth,{x:o9(X.yearMonth),predictElect:X.preElect,predictGas:X.preGas,yearMonth:X.yearMonth})});const F=Array.from(I.values()).filter(X=>X.x&&X.yearMonth).sort((X,J)=>new Date(X.x)-new Date(J.x)),V=y==="electric"?"predictElect":"predictGas",$=y==="electric"?"":"",K=F.filter(X=>X[V]!=null&&X.yearMonth>=s9).map(X=>({x:X.x,y:X[V]})),Y=y==="electric"?"#FF6384":"#FF9F40",W=y==="electric"?"rgba(255, 99, 132, 0.2)":"rgba(255, 159, 64, 0.2)";return{datasets:[{label:`${$}  (MWh)`,data:K,borderColor:Y,backgroundColor:W,borderWidth:2,pointRadius:2,pointHoverRadius:4,fill:!0,tension:.3}]}},[e,y]),O=Z.useMemo(()=>l9(),[y]);return vt.jsxs(vt.Fragment,{children:[vt.jsxs("h3",{children:[a?" ":`${t?.cityName||""} ${t?.countyName||""}`.trim(),"~2030  "]}),vt.jsxs("div",{className:"sub-tabs",children:[vt.jsx("button",{className:y==="electric"?"active":"",onClick:()=>x("electric"),children:"  "}),vt.jsx("button",{className:y==="gas"?"active":"",onClick:()=>x("gas"),children:"  "})]}),vt.jsxs("div",{className:"chart-container",style:{height:300},children:[i&&vt.jsx("div",{className:"chart-placeholder",children:"  ..."}),s&&vt.jsxs("div",{className:"chart-placeholder",children:[": ",s]}),!i&&!s&&E.datasets[0].data.length===0&&vt.jsx("div",{className:"chart-placeholder",children:" ."}),!i&&!s&&E.datasets[0].data.length>0&&vt.jsx(j2,{data:E,options:O})]}),vt.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginTop:6,padding:"0 10px"}})]})}function c9(){const[t,e]=Z.useState(null),[n,i]=Z.useState([]),[r,s]=Z.useState([]),[c,a]=Z.useState("electric"),[g,y]=Z.useState("energy"),[x,E]=Z.useState([]),[O,I]=Z.useState([]),[F,V]=Z.useState(!0),$=["11","26","27","28","29","30","31","36","41","51","43","44","52","46","47","48","50"];return Z.useEffect(()=>{(async()=>{try{V(!0),E([]);const Y=await(await fetch("/api/energy?cityId=0&countyId=0")).json(),W=Array.isArray(Y?.items)?Y.items:Array.isArray(Y)?Y:[];console.log("[Dashboard] nationwide sample:",W.slice(0,10)),E(W),i(W)}catch(K){console.error("    :",K)}finally{V(!1)}})()},[]),Z.useEffect(()=>{(async()=>{try{const K=$.map(X=>fetch(`/api/energy?cityId=${X}`).then(J=>J.json())),Y=await Promise.all(K),W=[];Y.forEach((X,J)=>{const st=Array.isArray(X?.items)?X.items:Array.isArray(X)?X:[];console.log(`[Dashboard] mapEnergyData =${$[J]} =`,st.length),W.push(...st)}),console.log("[Dashboard] mapEnergyData  :",W.length),I(W)}catch(K){console.error("    :",K)}})()},[]),Z.useEffect(()=>{if(!t){i(x),s([]);return}let K="/api/energy";const Y=Number(t.cityId),W=Number(t.countyId);Y&&W?K+=`?cityId=${Y}&countyId=${W}`:Y&&(K+=`?cityId=${Y}`),(async()=>{try{const J=await(await fetch(K)).json(),st=Array.isArray(J?.items)?J.items:Array.isArray(J)?J:[];if(i(st),Y){const it=await(await fetch(`/api/energy?cityId=${Y}&countyId=0`)).json(),ut=Array.isArray(it?.items)?it.items:Array.isArray(it)?it:[];s(ut)}else s([])}catch(X){console.error("    :",X)}})()},[t,x]),F?vt.jsxs("div",{className:"dashboard",children:[vt.jsx("h1",{children:"  "}),vt.jsx("p",{children:"   ..."})]}):vt.jsxs("div",{className:"dashboard",children:[vt.jsx("h1",{children:"  "}),vt.jsx("p",{children:"  ,  ,         ."}),vt.jsxs("div",{className:"dashboard-grid",children:[vt.jsxs("div",{className:"card map",children:[vt.jsx("h3",{children:"   (2025 6 )"}),vt.jsx("div",{className:"panel-body",style:{height:500},children:vt.jsx(tj,{onRegionSelect:e,allEnergyData:O,yearMonth:"202506",energyType:c,onEnergyTypeChange:a})})]}),vt.jsxs("div",{className:"card chart",children:[vt.jsx("h3",{children:t?`${t.cityName||""} ${t.countyName||""}`.trim():"  /  "}),vt.jsxs("div",{className:"main-tabs",children:[vt.jsx("button",{className:g==="energy"?"active":"",onClick:()=>y("energy"),children:" "}),vt.jsx("button",{className:g==="co2"?"active":"",onClick:()=>y("co2"),children:" "})]}),vt.jsxs("div",{className:"sub-tabs",children:[vt.jsx("button",{className:`electric ${c==="electric"?"active":""}`,onClick:()=>a("electric"),children:"  (MWh)"}),vt.jsx("button",{className:`gas ${c==="gas"?"active":""}`,onClick:()=>a("gas"),children:"  ()"})]}),vt.jsx(vV,{selectedRegion:t,selectedRegionData:n,nationalData:x,sidoData:r,energyType:c,mainTab:g})]}),vt.jsx("div",{className:"card chart",children:vt.jsx(u9,{selectedRegion:t})}),vt.jsxs("div",{className:"card chart",children:[vt.jsx("h3",{children:"~2030   "}),vt.jsx(i9,{selectedRegion:t})]})]})]})}const h9="_wrap_1mvqb_3",f9="_container_1mvqb_5",d9="_header_1mvqb_11",p9="_layout_1mvqb_19",m9="_side_1mvqb_37",g9="_filterCard_1mvqb_41",y9="_cardTitle_1mvqb_55",_9="_formRow_1mvqb_59",v9="_label_1mvqb_65",x9="_selectBig_1mvqb_71",b9="_select_1mvqb_71",w9="_sep_1mvqb_111",S9="_card_1mvqb_55",T9="_cardHead_1mvqb_139",M9="_cardSub_1mvqb_143",E9="_panel_1mvqb_149",Si={wrap:h9,container:f9,header:d9,layout:p9,side:m9,filterCard:g9,cardTitle:y9,formRow:_9,label:v9,selectBig:x9,select:b9,sep:w9,card:S9,cardHead:T9,cardSub:M9,panel:E9},A9="modulepreload",C9=function(t,e){return new URL(t,e).href},QA={},P9=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let y=function(x){return Promise.all(x.map(E=>Promise.resolve(E).then(O=>({status:"fulfilled",value:O}),O=>({status:"rejected",reason:O}))))};const c=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),g=a?.nonce||a?.getAttribute("nonce");r=y(n.map(x=>{if(x=C9(x,i),x in QA)return;QA[x]=!0;const E=x.endsWith(".css"),O=E?'[rel="stylesheet"]':"";if(i)for(let F=c.length-1;F>=0;F--){const V=c[F];if(V.href===x&&(!E||V.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${O}`))return;const I=document.createElement("link");if(I.rel=E?"stylesheet":A9,E||(I.as="script"),I.crossOrigin="",I.href=x,g&&I.setAttribute("nonce",g),document.head.appendChild(I),E)return new Promise((F,V)=>{I.addEventListener("load",F),I.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${x}`)))})}))}function s(c){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=c,window.dispatchEvent(a),!a.defaultPrevented)throw c}return r.then(c=>{for(const a of c||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},k9=Z.createContext(null);function O9(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,i=Array.isArray(t)?t[1]:t?t.y:0,r=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===r&&i===s}function du(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!du(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(const r of n)if(!e.hasOwnProperty(r)||!du(t[r],e[r]))return!1;return!0}return!1}function D9(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function JA(t,e){if(!t.getProjection)return;const n=t.getProjection(),i=e.getProjection();du(n,i)||e.setProjection(n)}function tC(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function eC(t,e){const n=e.viewState||e;let i=!1;if("zoom"in n){const r=t.zoom;t.zoom=n.zoom,i=i||r!==t.zoom}if("bearing"in n){const r=t.bearing;t.bearing=n.bearing,i=i||r!==t.bearing}if("pitch"in n){const r=t.pitch;t.pitch=n.pitch,i=i||r!==t.pitch}if(n.padding&&!t.isPaddingEqual(n.padding)&&(i=!0,t.padding=n.padding),"longitude"in n&&"latitude"in n){const r=t.center;t.center=new r.constructor(n.longitude,n.latitude),i=i||r!==t.center}return i}const I9=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function nC(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const i of t.layers)e[i.id]=i;const n=t.layers.map(i=>{let r=null;"interactive"in i&&(r=Object.assign({},i),delete r.interactive);const s=e[i.ref];if(s){r=r||Object.assign({},i),delete r.ref;for(const c of I9)c in s&&(r[c]=s[c])}return r||i});return{...t,layers:n}}var iC={};const rC={version:8,sources:{},layers:[]},aC={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},S1={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},sC={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},z9=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],L9=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Km{constructor(e,n,i){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=r=>{const s=this.props[sC[r.type]];s?s(r):r.type==="error"&&console.error(r.error)},this._onPointerEvent=r=>{(r.type==="mousemove"||r.type==="mouseout")&&this._updateHover(r);const s=this.props[aC[r.type]];s&&(this.props.interactiveLayerIds&&r.type!=="mouseover"&&r.type!=="mouseout"&&(r.features=this._hoveredFeatures||this._queryRenderedFeatures(r.point)),s(r),delete r.features)},this._onCameraEvent=r=>{if(!this._internalUpdate){const s=this.props[S1[r.type]];s&&s(r)}r.type in this._deferredEvents&&(this._deferredEvents[r.type]=!1)},this._MapClass=e,this.props=n,this._initialize(i)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const i=this._updateSettings(e,n);i&&this._createShadowTransform(this._map);const r=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(i||r||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const i=Km.savedMaps.pop();if(!i)return null;const r=i.map,s=r.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);r._container=n;const c=r._resizeObserver;c&&(c.disconnect(),c.observe(n)),i.setProps({...e,styleDiffing:!1}),r.resize();const{initialViewState:a}=e;return a&&(a.bounds?r.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):i._updateViewState(a,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",()=>r.fire("load")),r._update(),i}_initialize(e){const{props:n}=this,{mapStyle:i=rC}=n,r={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||R9()||null,container:e,style:nC(i)},s=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){const x=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=x,n.gl)}const c=new this._MapClass(r);s.padding&&c.setPadding(s.padding),n.cursor&&(c.getCanvas().style.cursor=n.cursor),this._createShadowTransform(c);const a=c._render;c._render=x=>{this._inRender=!0,a.call(c,x),this._inRender=!1};const g=c._renderTaskQueue.run;c._renderTaskQueue.run=x=>{g.call(c._renderTaskQueue,x),this._onBeforeRepaint()},c.on("render",()=>this._onAfterRepaint());const y=c.fire;c.fire=this._fireEvent.bind(this,y),c.on("resize",()=>{this._renderTransform.resize(c.transform.width,c.transform.height)}),c.on("styledata",()=>{this._updateStyleComponents(this.props,{}),JA(c.transform,this._renderTransform)}),c.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const x in aC)c.on(x,this._onPointerEvent);for(const x in S1)c.on(x,this._onCameraEvent);for(const x in sC)c.on(x,this._onEvent);this._map=c}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n?.remove(),Km.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=D9(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const i=this._map;if(n.width!==i.transform.width||n.height!==i.transform.height)return i.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const i=this._map,r=this._renderTransform,{zoom:s,pitch:c,bearing:a}=r,g=i.isMoving();g&&(r.cameraElevationReference="sea");const y=eC(r,{...tC(i.transform),...e});if(g&&(r.cameraElevationReference="ground"),y&&n){const x=this._deferredEvents;x.move=!0,x.zoom||(x.zoom=s!==r.zoom),x.rotate||(x.rotate=a!==r.bearing),x.pitch||(x.pitch=c!==r.pitch)}return g||eC(i.transform,e),y}_updateSettings(e,n){const i=this._map;let r=!1;for(const s of z9)if(s in e&&!du(e[s],n[s])){r=!0;const c=i[`set${s[0].toUpperCase()}${s.slice(1)}`];c?.call(i,e[s])}return r}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:i=rC,styleDiffing:r=!0}=e,s={diff:r};return"localIdeographFontFamily"in e&&(s.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(nC(i),s),!0}return!1}_updateStyleComponents(e,n){const i=this._map;let r=!1;return i.isStyleLoaded()&&("light"in e&&i.setLight&&!du(e.light,n.light)&&(r=!0,i.setLight(e.light)),"fog"in e&&i.setFog&&!du(e.fog,n.fog)&&(r=!0,i.setFog(e.fog)),"terrain"in e&&i.setTerrain&&!du(e.terrain,n.terrain)&&(!e.terrain||i.getSource(e.terrain.source))&&(r=!0,i.setTerrain(e.terrain))),r}_updateHandlers(e,n){var i,r;const s=this._map;let c=!1;for(const a of L9){const g=(i=e[a])!==null&&i!==void 0?i:!0,y=(r=n[a])!==null&&r!==void 0?r:!0;du(g,y)||(c=!0,g?s[a].enable(g):s[a].disable())}return c}_queryRenderedFeatures(e){const n=this._map,i=n.transform,{interactiveLayerIds:r=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:r.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=i}}_updateHover(e){var n;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const s=e.type,c=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(e.point),g=a.length>0;!g&&c&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,g&&!c&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,i){const r=this._map,s=r.transform,c=typeof n=="string"?n:n.type;return c==="move"&&this._updateViewState(this.props,!1),c in S1&&(typeof n=="object"&&(n.viewState=tC(s)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,n,i),r.transform=s,r):(e.call(r,n,i),r)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const i in this._deferredEvents)this._deferredEvents[i]&&e.fire(i);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{JA(this._renderTransform,n),e.transform=n}}}Km.savedMaps=[];function R9(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||iC.MapboxAccessToken}catch{}try{t=t||iC.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const N9=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function B9(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:i=>{const r=e.transform;e.transform=t.transform;const s=e.project(i);return e.transform=r,s},unproject:i=>{const r=e.transform;e.transform=t.transform;const s=e.unproject(i);return e.transform=r,s},queryTerrainElevation:(i,r)=>{const s=e.transform;e.transform=t.transform;const c=e.queryTerrainElevation(i,r);return e.transform=s,c},queryRenderedFeatures:(i,r)=>{const s=e.transform;e.transform=t.transform;const c=e.queryRenderedFeatures(i,r);return e.transform=s,c}};for(const i of j9(e))!(i in n)&&!N9.includes(i)&&(n[i]=e[i].bind(e));return n}function j9(t){const e=new Set;let n=t;for(;n;){for(const i of Object.getOwnPropertyNames(n))i[0]!=="_"&&typeof t[i]=="function"&&i!=="fire"&&i!=="setEventedParent"&&e.add(i);n=Object.getPrototypeOf(n)}return Array.from(e)}const F9=typeof document<"u"?Z.useLayoutEffect:Z.useEffect,U9=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function V9(t,e){for(const i of U9)i in e&&(t[i]=e[i]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,i=>{i&&console.error(i)},!0)}const og=Z.createContext(null);function $9(t,e,n){const i=Z.useContext(k9),[r,s]=Z.useState(null),c=Z.useRef(),{current:a}=Z.useRef({mapLib:null,map:null});Z.useEffect(()=>{const x=t.mapLib;let E=!0,O;return Promise.resolve(x||n).then(I=>{if(!E)return;if(!I)throw new Error("Invalid mapLib");const F="Map"in I?I:I.default;if(!F.Map)throw new Error("Invalid mapLib");if(V9(F,t),!F.supported||F.supported(t))t.reuseMaps&&(O=Km.reuse(t,c.current)),O||(O=new Km(F.Map,t,c.current)),a.map=B9(O),a.mapLib=F,s(O),i?.onMapMount(a.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(I=>{const{onError:F}=t;F?F({type:"error",target:null,originalEvent:null,error:I}):console.error(I)}),()=>{E=!1,O&&(i?.onMapUnmount(t.id),t.reuseMaps?O.recycle():O.destroy())}},[]),F9(()=>{r&&r.setProps(t)}),Z.useImperativeHandle(e,()=>a.map,[r]);const g=Z.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),y={height:"100%"};return Z.createElement("div",{id:t.id,ref:c,style:g},r&&Z.createElement(og.Provider,{value:a},Z.createElement("div",{"mapboxgl-children":"",style:y},t.children)))}const q9=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Pp(t,e){if(!t||!e)return;const n=t.style;for(const i in e){const r=e[i];Number.isFinite(r)&&!q9.test(i)?n[i]=`${r}px`:n[i]=r}}function H9(t,e){const{map:n,mapLib:i}=Z.useContext(og),r=Z.useRef({props:t});r.current.props=t;const s=Z.useMemo(()=>{let V=!1;Z.Children.forEach(t.children,Y=>{Y&&(V=!0)});const $={...t,element:V?document.createElement("div"):null},K=new i.Marker($);return K.setLngLat([t.longitude,t.latitude]),K.getElement().addEventListener("click",Y=>{var W,X;(X=(W=r.current.props).onClick)===null||X===void 0||X.call(W,{type:"click",target:K,originalEvent:Y})}),K.on("dragstart",Y=>{var W,X;const J=Y;J.lngLat=s.getLngLat(),(X=(W=r.current.props).onDragStart)===null||X===void 0||X.call(W,J)}),K.on("drag",Y=>{var W,X;const J=Y;J.lngLat=s.getLngLat(),(X=(W=r.current.props).onDrag)===null||X===void 0||X.call(W,J)}),K.on("dragend",Y=>{var W,X;const J=Y;J.lngLat=s.getLngLat(),(X=(W=r.current.props).onDragEnd)===null||X===void 0||X.call(W,J)}),K},[]);Z.useEffect(()=>(s.addTo(n.getMap()),()=>{s.remove()}),[]);const{longitude:c,latitude:a,offset:g,style:y,draggable:x=!1,popup:E=null,rotation:O=0,rotationAlignment:I="auto",pitchAlignment:F="auto"}=t;return Z.useEffect(()=>{Pp(s.getElement(),y)},[y]),Z.useImperativeHandle(e,()=>s,[]),(s.getLngLat().lng!==c||s.getLngLat().lat!==a)&&s.setLngLat([c,a]),g&&!O9(s.getOffset(),g)&&s.setOffset(g),s.isDraggable()!==x&&s.setDraggable(x),s.getRotation()!==O&&s.setRotation(O),s.getRotationAlignment()!==I&&s.setRotationAlignment(I),s.getPitchAlignment()!==F&&s.setPitchAlignment(F),s.getPopup()!==E&&s.setPopup(E),m_.createPortal(t.children,s.getElement())}Z.memo(Z.forwardRef(H9));function oC(t){return new Set(t?t.trim().split(/\s+/):[])}function Z9(t,e){const{map:n,mapLib:i}=Z.useContext(og),r=Z.useMemo(()=>document.createElement("div"),[]),s=Z.useRef({props:t});s.current.props=t;const c=Z.useMemo(()=>{const a={...t},g=new i.Popup(a);return g.setLngLat([t.longitude,t.latitude]),g.once("open",y=>{var x,E;(E=(x=s.current.props).onOpen)===null||E===void 0||E.call(x,y)}),g},[]);if(Z.useEffect(()=>{const a=g=>{var y,x;(x=(y=s.current.props).onClose)===null||x===void 0||x.call(y,g)};return c.on("close",a),c.setDOMContent(r).addTo(n.getMap()),()=>{c.off("close",a),c.isOpen()&&c.remove()}},[]),Z.useEffect(()=>{Pp(c.getElement(),t.style)},[t.style]),Z.useImperativeHandle(e,()=>c,[]),c.isOpen()&&((c.getLngLat().lng!==t.longitude||c.getLngLat().lat!==t.latitude)&&c.setLngLat([t.longitude,t.latitude]),t.offset&&!du(c.options.offset,t.offset)&&c.setOffset(t.offset),(c.options.anchor!==t.anchor||c.options.maxWidth!==t.maxWidth)&&(c.options.anchor=t.anchor,c.setMaxWidth(t.maxWidth)),c.options.className!==t.className)){const a=oC(c.options.className),g=oC(t.className);for(const y of a)g.has(y)||c.removeClassName(y);for(const y of g)a.has(y)||c.addClassName(y);c.options.className=t.className}return m_.createPortal(t.children,r)}Z.memo(Z.forwardRef(Z9));function S_(t,e,n,i){const r=Z.useContext(og),s=Z.useMemo(()=>t(r),[]);return Z.useEffect(()=>{const c=e,a=null,g=typeof e=="function"?e:null,{map:y}=r;return y.hasControl(s)||(y.addControl(s,c?.position),a&&a(r)),()=>{g&&g(r),y.hasControl(s)&&y.removeControl(s)}},[]),s}function G9(t){const e=S_(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return Z.useEffect(()=>{Pp(e._container,t.style)},[t.style]),null}Z.memo(G9);function Y9(t){const e=S_(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return Z.useEffect(()=>{Pp(e._controlContainer,t.style)},[t.style]),null}Z.memo(Y9);function W9(t,e){const n=Z.useRef({props:t}),i=S_(({mapLib:r})=>{const s=new r.GeolocateControl(t),c=s._setupUI;return s._setupUI=a=>{s._container.hasChildNodes()||c(a)},s.on("geolocate",a=>{var g,y;(y=(g=n.current.props).onGeolocate)===null||y===void 0||y.call(g,a)}),s.on("error",a=>{var g,y;(y=(g=n.current.props).onError)===null||y===void 0||y.call(g,a)}),s.on("outofmaxbounds",a=>{var g,y;(y=(g=n.current.props).onOutOfMaxBounds)===null||y===void 0||y.call(g,a)}),s.on("trackuserlocationstart",a=>{var g,y;(y=(g=n.current.props).onTrackUserLocationStart)===null||y===void 0||y.call(g,a)}),s.on("trackuserlocationend",a=>{var g,y;(y=(g=n.current.props).onTrackUserLocationEnd)===null||y===void 0||y.call(g,a)}),s},{position:t.position});return n.current.props=t,Z.useImperativeHandle(e,()=>i,[]),Z.useEffect(()=>{Pp(i._container,t.style)},[t.style]),null}Z.memo(Z.forwardRef(W9));function X9(t){const e=S_(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return Z.useEffect(()=>{Pp(e._container,t.style)},[t.style]),null}const K9=Z.memo(X9);function Q9(t){const e=S_(({mapLib:s})=>new s.ScaleControl(t),{position:t.position}),n=Z.useRef(t),i=n.current;n.current=t;const{style:r}=t;return t.maxWidth!==void 0&&t.maxWidth!==i.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==i.unit&&e.setUnit(t.unit),Z.useEffect(()=>{Pp(e._container,r)},[r]),null}Z.memo(Q9);function Z0(t,e){if(!t)throw new Error(e)}function J9(t,e,n,i){if(Z0(n.id===i.id,"layer id changed"),Z0(n.type===i.type,"layer type changed"),n.type==="custom"||i.type==="custom")return;const{layout:r={},paint:s={},filter:c,minzoom:a,maxzoom:g,beforeId:y}=n;if(y!==i.beforeId&&t.moveLayer(e,y),r!==i.layout){const x=i.layout||{};for(const E in r)du(r[E],x[E])||t.setLayoutProperty(e,E,r[E]);for(const E in x)r.hasOwnProperty(E)||t.setLayoutProperty(e,E,void 0)}if(s!==i.paint){const x=i.paint||{};for(const E in s)du(s[E],x[E])||t.setPaintProperty(e,E,s[E]);for(const E in x)s.hasOwnProperty(E)||t.setPaintProperty(e,E,void 0)}du(c,i.filter)||t.setFilter(e,c),(a!==i.minzoom||g!==i.maxzoom)&&t.setLayerZoomRange(e,a,g)}function t7(t,e,n){if(t.style&&t.style._loaded&&(!("source"in n)||t.getSource(n.source))){const i={...n,id:e};delete i.beforeId,t.addLayer(i,n.beforeId)}}let e7=0;function n7(t){const e=Z.useContext(og).map.getMap(),n=Z.useRef(t),[,i]=Z.useState(0),r=Z.useMemo(()=>t.id||`jsx-layer-${e7++}`,[]);if(Z.useEffect(()=>{if(e){const c=()=>i(a=>a+1);return e.on("styledata",c),c(),()=>{e.off("styledata",c),e.style&&e.style._loaded&&e.getLayer(r)&&e.removeLayer(r)}}},[e]),e&&e.style&&e.getLayer(r))try{J9(e,r,t,n.current)}catch(c){console.warn(c)}else t7(e,r,t);return n.current=t,null}let i7=0;function r7(t,e,n){if(t.style&&t.style._loaded){const i={...n};return delete i.id,delete i.children,t.addSource(e,i),t.getSource(e)}return null}function a7(t,e,n){Z0(e.id===n.id,"source id changed"),Z0(e.type===n.type,"source type changed");let i="",r=0;for(const c in e)c!=="children"&&c!=="id"&&!du(n[c],e[c])&&(i=c,r++);if(!r)return;const s=e.type;s==="geojson"?t.setData(e.data):s==="image"?t.updateImage({url:e.url,coordinates:e.coordinates}):"setCoordinates"in t&&r===1&&i==="coordinates"?t.setCoordinates(e.coordinates):"setUrl"in t&&i==="url"?t.setUrl(e.url):"setTiles"in t&&i==="tiles"?t.setTiles(e.tiles):console.warn(`Unable to update <Source> prop: ${i}`)}function s7(t){const e=Z.useContext(og).map.getMap(),n=Z.useRef(t),[,i]=Z.useState(0),r=Z.useMemo(()=>t.id||`jsx-source-${i7++}`,[]);Z.useEffect(()=>{if(e){const c=()=>setTimeout(()=>i(a=>a+1),0);return e.on("styledata",c),c(),()=>{var a;if(e.off("styledata",c),e.style&&e.style._loaded&&e.getSource(r)){const g=(a=e.getStyle())===null||a===void 0?void 0:a.layers;if(g)for(const y of g)y.source===r&&e.removeLayer(y.id);e.removeSource(r)}}}},[e]);let s=e&&e.style&&e.getSource(r);return s?a7(s,t,n.current):s=r7(e,r,t),n.current=t,s&&Z.Children.map(t.children,c=>c&&Z.cloneElement(c,{source:r}))||null}const o7=P9(()=>Promise.resolve().then(()=>p7),[],import.meta.url),l7=Z.forwardRef(function(e,n){return $9(e,n,o7)}),u7=K9,c7=n7,h7=s7;var P0={exports:{}},f7=P0.exports,lC;function d7(){return lC||(lC=1,(function(t,e){(function(n,i){t.exports=i()})(f7,(function(){var n,i,r;function s(a,g){if(!n)n=g;else if(!i)i=g;else{var y="var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk);",x={};n(x),r=g(x),typeof window<"u"&&(r.workerUrl=window.URL.createObjectURL(new Blob([y],{type:"text/javascript"})))}}s(["exports"],(function(a){function g(h,o,d,v){return new(d||(d=Promise))((function(T,P){function k(G){try{U(v.next(G))}catch(tt){P(tt)}}function R(G){try{U(v.throw(G))}catch(tt){P(tt)}}function U(G){var tt;G.done?T(G.value):(tt=G.value,tt instanceof d?tt:new d((function(ot){ot(tt)}))).then(k,R)}U((v=v.apply(h,o||[])).next())}))}function y(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}typeof SuppressedError=="function"&&SuppressedError;var x=E;function E(h,o){this.x=h,this.y=o}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(h){return this.clone()._add(h)},sub:function(h){return this.clone()._sub(h)},multByPoint:function(h){return this.clone()._multByPoint(h)},divByPoint:function(h){return this.clone()._divByPoint(h)},mult:function(h){return this.clone()._mult(h)},div:function(h){return this.clone()._div(h)},rotate:function(h){return this.clone()._rotate(h)},rotateAround:function(h,o){return this.clone()._rotateAround(h,o)},matMult:function(h){return this.clone()._matMult(h)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(h){return this.x===h.x&&this.y===h.y},dist:function(h){return Math.sqrt(this.distSqr(h))},distSqr:function(h){var o=h.x-this.x,d=h.y-this.y;return o*o+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith:function(h){return this.angleWithSep(h.x,h.y)},angleWithSep:function(h,o){return Math.atan2(this.x*o-this.y*h,this.x*h+this.y*o)},_matMult:function(h){var o=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=o,this},_add:function(h){return this.x+=h.x,this.y+=h.y,this},_sub:function(h){return this.x-=h.x,this.y-=h.y,this},_mult:function(h){return this.x*=h,this.y*=h,this},_div:function(h){return this.x/=h,this.y/=h,this},_multByPoint:function(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint:function(h){return this.x/=h.x,this.y/=h.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var h=this.y;return this.y=this.x,this.x=-h,this},_rotate:function(h){var o=Math.cos(h),d=Math.sin(h),v=d*this.x+o*this.y;return this.x=o*this.x-d*this.y,this.y=v,this},_rotateAround:function(h,o){var d=Math.cos(h),v=Math.sin(h),T=o.y+v*(this.x-o.x)+d*(this.y-o.y);return this.x=o.x+d*(this.x-o.x)-v*(this.y-o.y),this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(h){return h instanceof E?h:Array.isArray(h)?new E(h[0],h[1]):h};var O=y(x),I=F;function F(h,o,d,v){this.cx=3*h,this.bx=3*(d-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(v-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=o,this.p2x=d,this.p2y=v}F.prototype={sampleCurveX:function(h){return((this.ax*h+this.bx)*h+this.cx)*h},sampleCurveY:function(h){return((this.ay*h+this.by)*h+this.cy)*h},sampleCurveDerivativeX:function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},solveCurveX:function(h,o){if(o===void 0&&(o=1e-6),h<0)return 0;if(h>1)return 1;for(var d=h,v=0;v<8;v++){var T=this.sampleCurveX(d)-h;if(Math.abs(T)<o)return d;var P=this.sampleCurveDerivativeX(d);if(Math.abs(P)<1e-6)break;d-=T/P}var k=0,R=1;for(d=h,v=0;v<20&&(T=this.sampleCurveX(d),!(Math.abs(T-h)<o));v++)h>T?k=d:R=d,d=.5*(R-k)+k;return d},solve:function(h,o){return this.sampleCurveY(this.solveCurveX(h,o))}};var V=y(I);let $,K;function Y(){return $==null&&($=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$}function W(){if(K==null&&(K=!1,Y())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let v=0;v<25;v++){const T=4*v;o.fillStyle=`rgb(${T},${T+1},${T+2})`,o.fillRect(v%5,Math.floor(v/5),1,1)}const d=o.getImageData(0,0,5,5).data;for(let v=0;v<100;v++)if(v%4!=3&&d[v]!==v){K=!0;break}}}return K||!1}function X(h,o,d,v){const T=new V(h,o,d,v);return function(P){return T.solve(P)}}const J=X(.25,.1,.25,1);function st(h,o,d){return Math.min(d,Math.max(o,h))}function ct(h,o,d){const v=d-o,T=((h-o)%v+v)%v+o;return T===o?d:T}function it(h,...o){for(const d of o)for(const v in d)h[v]=d[v];return h}let ut=1;function xt(h,o,d){const v={};for(const T in h)v[T]=o.call(d||this,h[T],T,h);return v}function wt(h,o,d){const v={};for(const T in h)o.call(d||this,h[T],T,h)&&(v[T]=h[T]);return v}function St(h){return Array.isArray(h)?h.map(St):typeof h=="object"&&h?xt(h,St):h}const le={};function pe(h){le[h]||(typeof console<"u"&&console.warn(h),le[h]=!0)}function Te(h,o,d){return(d.y-h.y)*(o.x-h.x)>(o.y-h.y)*(d.x-h.x)}function Nt(h){let o=0;for(let d,v,T=0,P=h.length,k=P-1;T<P;k=T++)d=h[T],v=h[k],o+=(v.x-d.x)*(d.y+v.y);return o}function Ct(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Tt=null;function Bt(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const $t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ft(h,o,d,v,T){return g(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const P=new VideoFrame(h,{timestamp:0});try{const k=P?.format;if(!k||!k.startsWith("BGR")&&!k.startsWith("RGB"))throw new Error(`Unrecognized format ${k}`);const R=k.startsWith("BGR"),U=new Uint8ClampedArray(v*T*4);if(yield P.copyTo(U,(function(G,tt,ot,ht,gt){const _t=4*Math.max(-tt,0),Dt=(Math.max(0,ot)-ot)*ht*4+_t,Ut=4*ht,Ht=Math.max(0,tt),ne=Math.max(0,ot);return{rect:{x:Ht,y:ne,width:Math.min(G.width,tt+ht)-Ht,height:Math.min(G.height,ot+gt)-ne},layout:[{offset:Dt,stride:Ut}]}})(h,o,d,v,T)),R)for(let G=0;G<U.length;G+=4){const tt=U[G];U[G]=U[G+2],U[G+2]=tt}return U}finally{P.close()}}))}let Mt,Lt,Xt,re;const ce={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(h){const o=requestAnimationFrame(h);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(h,o=0){return this.getImageCanvasContext(h).getImageData(-o,-o,h.width+2*o,h.height+2*o)},getImageCanvasContext(h){const o=window.document.createElement("canvas"),d=o.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return o.width=h.width,o.height=h.height,d.drawImage(h,0,0,h.width,h.height),d},resolveURL:h=>(Xt||(Xt=document.createElement("a")),Xt.href=h,Xt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(re==null&&(re=matchMedia("(prefers-reduced-motion: reduce)")),re.matches)}},Me={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ne extends Error{constructor(o,d,v,T){super(`AJAXError: ${d} (${o}): ${v}`),this.status=o,this.statusText=d,this.url=v,this.body=T}}const Gt=Ct()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Ce=h=>Me.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))];function Ee(h,o){const d=new AbortController,v=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:Gt(),signal:d.signal});let T=!1,P=!1;return h.type==="json"&&v.headers.set("Accept","application/json"),P||fetch(v).then((k=>k.ok?(R=>{(h.type==="arrayBuffer"||h.type==="image"?R.arrayBuffer():h.type==="json"?R.json():R.text()).then((U=>{P||(T=!0,o(null,U,R.headers.get("Cache-Control"),R.headers.get("Expires")))})).catch((U=>{P||o(new Error(U.message))}))})(k):k.blob().then((R=>o(new Ne(k.status,k.statusText,h.url,R)))))).catch((k=>{k.code!==20&&o(new Error(k.message))})),{cancel:()=>{P=!0,T||d.abort()}}}const de=function(h,o){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){if(Ct()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,o);if(!Ct())return(Ce(h.url)||Ee)(h,o)}if(!(/^file:/.test(d=h.url)||/^file:/.test(Gt())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Ee(h,o);if(Ct()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,o,void 0,!0)}var d;return(function(v,T){const P=new XMLHttpRequest;P.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(P.responseType="arraybuffer");for(const k in v.headers)P.setRequestHeader(k,v.headers[k]);return v.type==="json"&&(P.responseType="text",P.setRequestHeader("Accept","application/json")),P.withCredentials=v.credentials==="include",P.onerror=()=>{T(new Error(P.statusText))},P.onload=()=>{if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let k=P.response;if(v.type==="json")try{k=JSON.parse(P.response)}catch(R){return T(R)}T(null,k,P.getResponseHeader("Cache-Control"),P.getResponseHeader("Expires"))}else{const k=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});T(new Ne(P.status,P.statusText,v.url,k))}},P.send(v.body),{cancel:()=>P.abort()}})(h,o)},on=function(h,o){return de(it(h,{type:"arrayBuffer"}),o)};function Be(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const o=new URL(h),d=window.location;return o.protocol===d.protocol&&o.host===d.host}function ln(h,o,d){d[h]&&d[h].indexOf(o)!==-1||(d[h]=d[h]||[],d[h].push(o))}function Xe(h,o,d){if(d&&d[h]){const v=d[h].indexOf(o);v!==-1&&d[h].splice(v,1)}}class Sn{constructor(o,d={}){it(this,d),this.type=o}}class hn extends Sn{constructor(o,d={}){super("error",it({error:o},d))}}class Rn{on(o,d){return this._listeners=this._listeners||{},ln(o,d,this._listeners),this}off(o,d){return Xe(o,d,this._listeners),Xe(o,d,this._oneTimeListeners),this}once(o,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},ln(o,d,this._oneTimeListeners),this):new Promise((v=>this.once(o,v)))}fire(o,d){typeof o=="string"&&(o=new Sn(o,d||{}));const v=o.type;if(this.listens(v)){o.target=this;const T=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const R of T)R.call(this,o);const P=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const R of P)Xe(v,R,this._oneTimeListeners),R.call(this,o);const k=this._eventedParent;k&&(it(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(o))}else o instanceof hn&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,d){return this._eventedParent=o,this._eventedParentData=d,this}}var ge={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Gn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function $i(h,o){const d={};for(const v in h)v!=="ref"&&(d[v]=h[v]);return Gn.forEach((v=>{v in o&&(d[v]=o[v])})),d}function ni(h,o){if(Array.isArray(h)){if(!Array.isArray(o)||h.length!==o.length)return!1;for(let d=0;d<h.length;d++)if(!ni(h[d],o[d]))return!1;return!0}if(typeof h=="object"&&h!==null&&o!==null){if(typeof o!="object"||Object.keys(h).length!==Object.keys(o).length)return!1;for(const d in h)if(!ni(h[d],o[d]))return!1;return!0}return h===o}const fn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Qi(h,o,d){d.push({command:fn.addSource,args:[h,o[h]]})}function mi(h,o,d){o.push({command:fn.removeSource,args:[h]}),d[h]=!0}function Ui(h,o,d,v){mi(h,d,v),Qi(h,o,d)}function Dr(h,o,d){let v;for(v in h[d])if(Object.prototype.hasOwnProperty.call(h[d],v)&&v!=="data"&&!ni(h[d][v],o[d][v]))return!1;for(v in o[d])if(Object.prototype.hasOwnProperty.call(o[d],v)&&v!=="data"&&!ni(h[d][v],o[d][v]))return!1;return!0}function ws(h,o,d,v,T,P){let k;for(k in o=o||{},h=h||{})Object.prototype.hasOwnProperty.call(h,k)&&(ni(h[k],o[k])||d.push({command:P,args:[v,k,o[k],T]}));for(k in o)Object.prototype.hasOwnProperty.call(o,k)&&!Object.prototype.hasOwnProperty.call(h,k)&&(ni(h[k],o[k])||d.push({command:P,args:[v,k,o[k],T]}))}function Oa(h){return h.id}function Vr(h,o){return h[o.id]=o,h}class Fe{constructor(o,d,v,T){this.message=(o?`${o}: `:"")+v,T&&(this.identifier=T),d!=null&&d.__line__&&(this.line=d.__line__)}}function yr(h,...o){for(const d of o)for(const v in d)h[v]=d[v];return h}class Yn extends Error{constructor(o,d){super(d),this.message=d,this.key=o}}class ga{constructor(o,d=[]){this.parent=o,this.bindings={};for(const[v,T]of d)this.bindings[v]=T}concat(o){return new ga(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const _r={kind:"null"},Ze={kind:"number"},In={kind:"string"},kn={kind:"boolean"},Ir={kind:"color"},ya={kind:"object"},Cn={kind:"value"},Gr={kind:"collator"},It={kind:"formatted"},lt={kind:"padding"},dt={kind:"resolvedImage"},Et={kind:"variableAnchorOffsetCollection"};function zt(h,o){return{kind:"array",itemType:h,N:o}}function jt(h){if(h.kind==="array"){const o=jt(h.itemType);return typeof h.N=="number"?`array<${o}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${o}>`}return h.kind}const ie=[_r,Ze,In,kn,Ir,It,ya,zt(Cn),lt,dt,Et];function Wt(h,o){if(o.kind==="error")return null;if(h.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!Wt(h.itemType,o.itemType))&&(typeof h.N!="number"||h.N===o.N))return null}else{if(h.kind===o.kind)return null;if(h.kind==="value"){for(const d of ie)if(!Wt(d,o))return null}}return`Expected ${jt(h)} but found ${jt(o)} instead.`}function qt(h,o){return o.some((d=>d.kind===h.kind))}function Jt(h,o){return o.some((d=>d==="null"?h===null:d==="array"?Array.isArray(h):d==="object"?h&&!Array.isArray(h)&&typeof h=="object":d===typeof h))}function Se(h,o){return h.kind==="array"&&o.kind==="array"?h.itemType.kind===o.itemType.kind&&typeof h.N=="number":h.kind===o.kind}const se=.96422,Oe=.82521,yn=4/29,_n=6/29,Ke=3*_n*_n,an=_n*_n*_n,Tn=Math.PI/180,Wn=180/Math.PI;function gi(h){return(h%=360)<0&&(h+=360),h}function qn([h,o,d,v]){let T,P;const k=Ji((.2225045*(h=Hn(h))+.7168786*(o=Hn(o))+.0606169*(d=Hn(d)))/1);h===o&&o===d?T=P=k:(T=Ji((.4360747*h+.3850649*o+.1430804*d)/se),P=Ji((.0139322*h+.0971045*o+.7141733*d)/Oe));const R=116*k-16;return[R<0?0:R,500*(T-k),200*(k-P),v]}function Hn(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Ji(h){return h>an?Math.pow(h,1/3):h/Ke+yn}function yi([h,o,d,v]){let T=(h+16)/116,P=isNaN(o)?T:T+o/500,k=isNaN(d)?T:T-d/200;return T=1*hr(T),P=se*hr(P),k=Oe*hr(k),[Oi(3.1338561*P-1.6168667*T-.4906146*k),Oi(-.9787684*P+1.9161415*T+.033454*k),Oi(.0719453*P-.2289914*T+1.4052427*k),v]}function Oi(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function hr(h){return h>_n?h*h*h:Ke*(h-yn)}function zr(h){return parseInt(h.padEnd(2,h),16)/255}function Fs(h,o){return ci(o?h/100:h,0,1)}function ci(h,o,d){return Math.min(Math.max(o,h),d)}function as(h){return!h.some(Number.isNaN)}const Js={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Un{constructor(o,d,v,T=1,P=!0){this.r=o,this.g=d,this.b=v,this.a=T,P||(this.r*=T,this.g*=T,this.b*=T,T||this.overwriteGetter("rgb",[o,d,v,T]))}static parse(o){if(o instanceof Un)return o;if(typeof o!="string")return;const d=(function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const T=Js[v];if(T){const[k,R,U]=T;return[k/255,R/255,U/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const k=v.length<6?1:2;let R=1;return[zr(v.slice(R,R+=k)),zr(v.slice(R,R+=k)),zr(v.slice(R,R+=k)),zr(v.slice(R,R+k)||"ff")]}if(v.startsWith("rgb")){const k=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[R,U,G,tt,ot,ht,gt,_t,Dt,Ut,Ht,ne]=k,Kt=[tt||" ",gt||" ",Ut].join("");if(Kt==="  "||Kt==="  /"||Kt===",,"||Kt===",,,"){const ae=[G,ht,Dt].join(""),oe=ae==="%%%"?100:ae===""?255:0;if(oe){const De=[ci(+U/oe,0,1),ci(+ot/oe,0,1),ci(+_t/oe,0,1),Ht?Fs(+Ht,ne):1];if(as(De))return De}}return}}const P=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[k,R,U,G,tt,ot,ht,gt,_t]=P,Dt=[U||" ",tt||" ",ht].join("");if(Dt==="  "||Dt==="  /"||Dt===",,"||Dt===",,,"){const Ut=[+R,ci(+G,0,100),ci(+ot,0,100),gt?Fs(+gt,_t):1];if(as(Ut))return(function([Ht,ne,Kt,ae]){function oe(De){const He=(De+Ht/30)%12,mn=ne*Math.min(Kt,1-Kt);return Kt-mn*Math.max(-1,Math.min(He-3,9-He,1))}return Ht=gi(Ht),ne/=100,Kt/=100,[oe(0),oe(8),oe(4),ae]})(Ut)}}})(o);return d?new Un(...d,!1):void 0}get rgb(){const{r:o,g:d,b:v,a:T}=this,P=T||1/0;return this.overwriteGetter("rgb",[o/P,d/P,v/P,T])}get hcl(){return this.overwriteGetter("hcl",(function(o){const[d,v,T,P]=qn(o),k=Math.sqrt(v*v+T*T);return[Math.round(1e4*k)?gi(Math.atan2(T,v)*Wn):NaN,k,d,P]})(this.rgb))}get lab(){return this.overwriteGetter("lab",qn(this.rgb))}overwriteGetter(o,d){return Object.defineProperty(this,o,{value:d}),d}toString(){const[o,d,v,T]=this.rgb;return`rgba(${[o,d,v].map((P=>Math.round(255*P))).join(",")},${T})`}}Un.black=new Un(0,0,0,1),Un.white=new Un(1,1,1,1),Un.transparent=new Un(0,0,0,0),Un.red=new Un(1,0,0,1);class Da{constructor(o,d,v){this.sensitivity=o?d?"variant":"case":d?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,d){return this.collator.compare(o,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Yr{constructor(o,d,v,T,P){this.text=o,this.image=d,this.scale=v,this.fontStack=T,this.textColor=P}}class qi{constructor(o){this.sections=o}static fromString(o){return new qi([new Yr(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((o=>o.text.length!==0||o.image&&o.image.name.length!==0))}static factory(o){return o instanceof qi?o:qi.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map((o=>o.text)).join("")}}class oa{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof oa)return o;if(typeof o=="number")return new oa([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const d of o)if(typeof d!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new oa(o)}}toString(){return JSON.stringify(this.values)}}const Sl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class On{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof On)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let d=0;d<o.length;d+=2){const v=o[d],T=o[d+1];if(typeof v!="string"||!Sl.has(v)||!Array.isArray(T)||T.length!==2||typeof T[0]!="number"||typeof T[1]!="number")return}return new On(o)}}toString(){return JSON.stringify(this.values)}}class An{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new An({name:o,available:!1}):null}}function $r(h,o,d,v){return typeof h=="number"&&h>=0&&h<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof d=="number"&&d>=0&&d<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[h,o,d,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[h,o,d,v]:[h,o,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function tr(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof Un||h instanceof Da||h instanceof qi||h instanceof oa||h instanceof On||h instanceof An)return!0;if(Array.isArray(h)){for(const o of h)if(!tr(o))return!1;return!0}if(typeof h=="object"){for(const o in h)if(!tr(h[o]))return!1;return!0}return!1}function _i(h){if(h===null)return _r;if(typeof h=="string")return In;if(typeof h=="boolean")return kn;if(typeof h=="number")return Ze;if(h instanceof Un)return Ir;if(h instanceof Da)return Gr;if(h instanceof qi)return It;if(h instanceof oa)return lt;if(h instanceof On)return Et;if(h instanceof An)return dt;if(Array.isArray(h)){const o=h.length;let d;for(const v of h){const T=_i(v);if(d){if(d===T)continue;d=Cn;break}d=T}return zt(d||Cn,o)}return ya}function ii(h){const o=typeof h;return h===null?"":o==="string"||o==="number"||o==="boolean"?String(h):h instanceof Un||h instanceof qi||h instanceof oa||h instanceof On||h instanceof An?h.toString():JSON.stringify(h)}class Pn{constructor(o,d){this.type=o,this.value=d}static parse(o,d){if(o.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!tr(o[1]))return d.error("invalid value");const v=o[1];let T=_i(v);const P=d.expectedType;return T.kind!=="array"||T.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(T=P),new Pn(T,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class zn{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const la={string:In,number:Ze,boolean:kn,object:ya};class _a{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");let v,T=1;const P=o[0];if(P==="array"){let R,U;if(o.length>2){const G=o[1];if(typeof G!="string"||!(G in la)||G==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);R=la[G],T++}else R=Cn;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return d.error('The length argument to "array" must be a positive integer literal',2);U=o[2],T++}v=zt(R,U)}else{if(!la[P])throw new Error(`Types doesn't contain name = ${P}`);v=la[P]}const k=[];for(;T<o.length;T++){const R=d.parse(o[T],T,Cn);if(!R)return null;k.push(R)}return new _a(v,k)}evaluate(o){for(let d=0;d<this.args.length;d++){const v=this.args[d].evaluate(o);if(!Wt(this.type,_i(v)))return v;if(d===this.args.length-1)throw new zn(`Expected value to be of type ${jt(this.type)}, but found ${jt(_i(v))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}}const Hi={"to-boolean":kn,"to-color":Ir,"to-number":Ze,"to-string":In};class ss{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const v=o[0];if(!Hi[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&o.length!==2)return d.error("Expected one argument.");const T=Hi[v],P=[];for(let k=1;k<o.length;k++){const R=d.parse(o[k],k,Cn);if(!R)return null;P.push(R)}return new ss(T,P)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let d,v;for(const T of this.args){if(d=T.evaluate(o),v=null,d instanceof Un)return d;if(typeof d=="string"){const P=o.parseColor(d);if(P)return P}else if(Array.isArray(d)&&(v=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:$r(d[0],d[1],d[2],d[3]),!v))return new Un(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new zn(v||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const v of this.args){d=v.evaluate(o);const T=oa.parse(d);if(T)return T}throw new zn(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const v of this.args){d=v.evaluate(o);const T=On.parse(d);if(T)return T}throw new zn(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const v of this.args){if(d=v.evaluate(o),d===null)return 0;const T=Number(d);if(!isNaN(T))return T}throw new zn(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return qi.fromString(ii(this.args[0].evaluate(o)));case"resolvedImage":return An.fromString(ii(this.args[0].evaluate(o)));default:return ii(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}}const Ko=["Unknown","Point","LineString","Polygon"];class Ss{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ko[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let d=this._parseColorCache[o];return d||(d=this._parseColorCache[o]=Un.parse(o)),d}}class Di{constructor(o,d,v=[],T,P=new ga,k=[]){this.registry=o,this.path=v,this.key=v.map((R=>`[${R}]`)).join(""),this.scope=P,this.errors=k,this.expectedType=T,this._isConstant=d}parse(o,d,v,T,P={}){return d?this.concat(d,v,T)._parse(o,P):this._parse(o,P)}_parse(o,d){function v(T,P,k){return k==="assert"?new _a(P,[T]):k==="coerce"?new ss(P,[T]):T}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const T=o[0];if(typeof T!="string")return this.error(`Expression name must be a string, but found ${typeof T} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const P=this.registry[T];if(P){let k=P.parse(o,this);if(!k)return null;if(this.expectedType){const R=this.expectedType,U=k.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||U.kind!=="value")if(R.kind!=="color"&&R.kind!=="formatted"&&R.kind!=="resolvedImage"||U.kind!=="value"&&U.kind!=="string")if(R.kind!=="padding"||U.kind!=="value"&&U.kind!=="number"&&U.kind!=="array")if(R.kind!=="variableAnchorOffsetCollection"||U.kind!=="value"&&U.kind!=="array"){if(this.checkSubtype(R,U))return null}else k=v(k,R,d.typeAnnotation||"coerce");else k=v(k,R,d.typeAnnotation||"coerce");else k=v(k,R,d.typeAnnotation||"coerce");else k=v(k,R,d.typeAnnotation||"assert")}if(!(k instanceof Pn)&&k.type.kind!=="resolvedImage"&&this._isConstant(k)){const R=new Ss;try{k=new Pn(k.type,k.evaluate(R))}catch(U){return this.error(U.message),null}}return k}return this.error(`Unknown expression "${T}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,d,v){const T=typeof o=="number"?this.path.concat(o):this.path,P=v?this.scope.concat(v):this.scope;return new Di(this.registry,this._isConstant,T,d||null,P,this.errors)}error(o,...d){const v=`${this.key}${d.map((T=>`[${T}]`)).join("")}`;this.errors.push(new Yn(v,o))}checkSubtype(o,d){const v=Wt(o,d);return v&&this.error(v),v}}class yt{constructor(o,d,v){this.type=Gr,this.locale=v,this.caseSensitive=o,this.diacriticSensitive=d}static parse(o,d){if(o.length!==2)return d.error("Expected one argument.");const v=o[1];if(typeof v!="object"||Array.isArray(v))return d.error("Collator options argument must be an object.");const T=d.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,kn);if(!T)return null;const P=d.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,kn);if(!P)return null;let k=null;return v.locale&&(k=d.parse(v.locale,1,In),!k)?null:new yt(T,P,k)}evaluate(o){return new Da(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}const At=8192;function Zt(h,o){h[0]=Math.min(h[0],o[0]),h[1]=Math.min(h[1],o[1]),h[2]=Math.max(h[2],o[0]),h[3]=Math.max(h[3],o[1])}function ye(h,o){return!(h[0]<=o[0]||h[2]>=o[2]||h[1]<=o[1]||h[3]>=o[3])}function Ue(h,o){const d=(180+h[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,T=Math.pow(2,o.z);return[Math.round(d*T*At),Math.round(v*T*At)]}function cn(h,o,d){const v=h[0]-o[0],T=h[1]-o[1],P=h[0]-d[0],k=h[1]-d[1];return v*k-P*T==0&&v*P<=0&&T*k<=0}function Vn(h,o){let d=!1;for(let k=0,R=o.length;k<R;k++){const U=o[k];for(let G=0,tt=U.length;G<tt-1;G++){if(cn(h,U[G],U[G+1]))return!1;(T=U[G])[1]>(v=h)[1]!=(P=U[G+1])[1]>v[1]&&v[0]<(P[0]-T[0])*(v[1]-T[1])/(P[1]-T[1])+T[0]&&(d=!d)}}var v,T,P;return d}function sr(h,o){for(let d=0;d<o.length;d++)if(Vn(h,o[d]))return!0;return!1}function Sr(h,o,d,v){const T=v[0]-d[0],P=v[1]-d[1],k=(h[0]-d[0])*P-T*(h[1]-d[1]),R=(o[0]-d[0])*P-T*(o[1]-d[1]);return k>0&&R<0||k<0&&R>0}function Tr(h,o,d){for(const G of d)for(let tt=0;tt<G.length-1;++tt)if((R=[(k=G[tt+1])[0]-(P=G[tt])[0],k[1]-P[1]])[0]*(U=[(T=o)[0]-(v=h)[0],T[1]-v[1]])[1]-R[1]*U[0]!=0&&Sr(v,T,P,k)&&Sr(P,k,v,T))return!0;var v,T,P,k,R,U;return!1}function fr(h,o){for(let d=0;d<h.length;++d)if(!Vn(h[d],o))return!1;for(let d=0;d<h.length-1;++d)if(Tr(h[d],h[d+1],o))return!1;return!0}function Yu(h,o){for(let d=0;d<o.length;d++)if(fr(h,o[d]))return!0;return!1}function Tl(h,o,d){const v=[];for(let T=0;T<h.length;T++){const P=[];for(let k=0;k<h[T].length;k++){const R=Ue(h[T][k],d);Zt(o,R),P.push(R)}v.push(P)}return v}function Zl(h,o,d){const v=[];for(let T=0;T<h.length;T++){const P=Tl(h[T],o,d);v.push(P)}return v}function Nn(h,o,d,v){if(h[0]<d[0]||h[0]>d[2]){const T=.5*v;let P=h[0]-d[0]>T?-v:d[0]-h[0]>T?v:0;P===0&&(P=h[0]-d[2]>T?-v:d[2]-h[0]>T?v:0),h[0]+=P}Zt(o,h)}function Ts(h,o,d,v){const T=Math.pow(2,v.z)*At,P=[v.x*At,v.y*At],k=[];for(const R of h)for(const U of R){const G=[U.x+P[0],U.y+P[1]];Nn(G,o,d,T),k.push(G)}return k}function Ii(h,o,d,v){const T=Math.pow(2,v.z)*At,P=[v.x*At,v.y*At],k=[];for(const U of h){const G=[];for(const tt of U){const ot=[tt.x+P[0],tt.y+P[1]];Zt(o,ot),G.push(ot)}k.push(G)}if(o[2]-o[0]<=T/2){(R=o)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const U of k)for(const G of U)Nn(G,o,d,T)}var R;return k}class Qo{constructor(o,d){this.type=kn,this.geojson=o,this.geometries=d}static parse(o,d){if(o.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(tr(o[1])){const v=o[1];if(v.type==="FeatureCollection")for(let T=0;T<v.features.length;++T){const P=v.features[T].geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new Qo(v,v.features[T].geometry)}else if(v.type==="Feature"){const T=v.geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new Qo(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new Qo(v,v)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(d,v){const T=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],k=d.canonicalID();if(v.type==="Polygon"){const R=Tl(v.coordinates,P,k),U=Ts(d.geometry(),T,P,k);if(!ye(T,P))return!1;for(const G of U)if(!Vn(G,R))return!1}if(v.type==="MultiPolygon"){const R=Zl(v.coordinates,P,k),U=Ts(d.geometry(),T,P,k);if(!ye(T,P))return!1;for(const G of U)if(!sr(G,R))return!1}return!0})(o,this.geometries);if(o.geometryType()==="LineString")return(function(d,v){const T=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],k=d.canonicalID();if(v.type==="Polygon"){const R=Tl(v.coordinates,P,k),U=Ii(d.geometry(),T,P,k);if(!ye(T,P))return!1;for(const G of U)if(!fr(G,R))return!1}if(v.type==="MultiPolygon"){const R=Zl(v.coordinates,P,k),U=Ii(d.geometry(),T,P,k);if(!ye(T,P))return!1;for(const G of U)if(!Yu(G,R))return!1}return!0})(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class bo{constructor(o,d){this.type=d.type,this.name=o,this.boundExpression=d}static parse(o,d){if(o.length!==2||typeof o[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const v=o[1];return d.scope.has(v)?new bo(v,d.scope.get(v)):d.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class Mr{constructor(o,d,v,T){this.name=o,this.type=d,this._evaluate=v,this.args=T}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,d){const v=o[0],T=Mr.definitions[v];if(!T)return d.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const P=Array.isArray(T)?T[0]:T.type,k=Array.isArray(T)?[[T[1],T[2]]]:T.overloads,R=k.filter((([G])=>!Array.isArray(G)||G.length===o.length-1));let U=null;for(const[G,tt]of R){U=new Di(d.registry,Ml,d.path,null,d.scope);const ot=[];let ht=!1;for(let gt=1;gt<o.length;gt++){const _t=o[gt],Dt=Array.isArray(G)?G[gt-1]:G.type,Ut=U.parse(_t,1+ot.length,Dt);if(!Ut){ht=!0;break}ot.push(Ut)}if(!ht)if(Array.isArray(G)&&G.length!==ot.length)U.error(`Expected ${G.length} arguments, but found ${ot.length} instead.`);else{for(let gt=0;gt<ot.length;gt++){const _t=Array.isArray(G)?G[gt]:G.type,Dt=ot[gt];U.concat(gt+1).checkSubtype(_t,Dt.type)}if(U.errors.length===0)return new Mr(v,P,tt,ot)}}if(R.length===1)d.errors.push(...U.errors);else{const G=(R.length?R:k).map((([ot])=>{return ht=ot,Array.isArray(ht)?`(${ht.map(jt).join(", ")})`:`(${jt(ht.type)}...)`;var ht})).join(" | "),tt=[];for(let ot=1;ot<o.length;ot++){const ht=d.parse(o[ot],1+tt.length);if(!ht)return null;tt.push(jt(ht.type))}d.error(`Expected arguments of type ${G}, but found (${tt.join(", ")}) instead.`)}return null}static register(o,d){Mr.definitions=d;for(const v in d)o[v]=Mr}}function Ml(h){if(h instanceof bo)return Ml(h.boundExpression);if(h instanceof Mr&&h.name==="error"||h instanceof yt||h instanceof Qo)return!1;const o=h instanceof ss||h instanceof _a;let d=!0;return h.eachChild((v=>{d=o?d&&Ml(v):d&&v instanceof Pn})),!!d&&os(h)&&wo(h,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function os(h){if(h instanceof Mr&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Qo)return!1;let o=!0;return h.eachChild((d=>{o&&!os(d)&&(o=!1)})),o}function ls(h){if(h instanceof Mr&&h.name==="feature-state")return!1;let o=!0;return h.eachChild((d=>{o&&!ls(d)&&(o=!1)})),o}function wo(h,o){if(h instanceof Mr&&o.indexOf(h.name)>=0)return!1;let d=!0;return h.eachChild((v=>{d&&!wo(v,o)&&(d=!1)})),d}function or(h,o){const d=h.length-1;let v,T,P=0,k=d,R=0;for(;P<=k;)if(R=Math.floor((P+k)/2),v=h[R],T=h[R+1],v<=o){if(R===d||o<T)return R;P=R+1}else{if(!(v>o))throw new zn("Input is not a number.");k=R-1}return 0}class Ya{constructor(o,d,v){this.type=o,this.input=d,this.labels=[],this.outputs=[];for(const[T,P]of v)this.labels.push(T),this.outputs.push(P)}static parse(o,d){if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");const v=d.parse(o[1],1,Ze);if(!v)return null;const T=[];let P=null;d.expectedType&&d.expectedType.kind!=="value"&&(P=d.expectedType);for(let k=1;k<o.length;k+=2){const R=k===1?-1/0:o[k],U=o[k+1],G=k,tt=k+1;if(typeof R!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(T.length&&T[T.length-1][0]>=R)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',G);const ot=d.parse(U,tt,P);if(!ot)return null;P=P||ot.type,T.push([R,ot])}return new Ya(P,v,T)}evaluate(o){const d=this.labels,v=this.outputs;if(d.length===1)return v[0].evaluate(o);const T=this.input.evaluate(o);if(T<=d[0])return v[0].evaluate(o);const P=d.length;return T>=d[P-1]?v[P-1].evaluate(o):v[or(d,T)].evaluate(o)}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}}function Xn(h,o,d){return h+d*(o-h)}function El(h,o,d){return h.map(((v,T)=>Xn(v,o[T],d)))}const us={number:Xn,color:function(h,o,d,v="rgb"){switch(v){case"rgb":{const[T,P,k,R]=El(h.rgb,o.rgb,d);return new Un(T,P,k,R,!1)}case"hcl":{const[T,P,k,R]=h.hcl,[U,G,tt,ot]=o.hcl;let ht,gt;if(isNaN(T)||isNaN(U))isNaN(T)?isNaN(U)?ht=NaN:(ht=U,k!==1&&k!==0||(gt=G)):(ht=T,tt!==1&&tt!==0||(gt=P));else{let ne=U-T;U>T&&ne>180?ne-=360:U<T&&T-U>180&&(ne+=360),ht=T+d*ne}const[_t,Dt,Ut,Ht]=(function([ne,Kt,ae,oe]){return ne=isNaN(ne)?0:ne*Tn,yi([ae,Math.cos(ne)*Kt,Math.sin(ne)*Kt,oe])})([ht,gt??Xn(P,G,d),Xn(k,tt,d),Xn(R,ot,d)]);return new Un(_t,Dt,Ut,Ht,!1)}case"lab":{const[T,P,k,R]=yi(El(h.lab,o.lab,d));return new Un(T,P,k,R,!1)}}},array:El,padding:function(h,o,d){return new oa(El(h.values,o.values,d))},variableAnchorOffsetCollection:function(h,o,d){const v=h.values,T=o.values;if(v.length!==T.length)throw new zn(`Cannot interpolate values of different length. from: ${h.toString()}, to: ${o.toString()}`);const P=[];for(let k=0;k<v.length;k+=2){if(v[k]!==T[k])throw new zn(`Cannot interpolate values containing mismatched anchors. from[${k}]: ${v[k]}, to[${k}]: ${T[k]}`);P.push(v[k]);const[R,U]=v[k+1],[G,tt]=T[k+1];P.push([Xn(R,G,d),Xn(U,tt,d)])}return new On(P)}};class Wi{constructor(o,d,v,T,P){this.type=o,this.operator=d,this.interpolation=v,this.input=T,this.labels=[],this.outputs=[];for(const[k,R]of P)this.labels.push(k),this.outputs.push(R)}static interpolationFactor(o,d,v,T){let P=0;if(o.name==="exponential")P=to(d,o.base,v,T);else if(o.name==="linear")P=to(d,1,v,T);else if(o.name==="cubic-bezier"){const k=o.controlPoints;P=new V(k[0],k[1],k[2],k[3]).solve(to(d,1,v,T))}return P}static parse(o,d){let[v,T,P,...k]=o;if(!Array.isArray(T)||T.length===0)return d.error("Expected an interpolation type expression.",1);if(T[0]==="linear")T={name:"linear"};else if(T[0]==="exponential"){const G=T[1];if(typeof G!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);T={name:"exponential",base:G}}else{if(T[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(T[0])}`,1,0);{const G=T.slice(1);if(G.length!==4||G.some((tt=>typeof tt!="number"||tt<0||tt>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);T={name:"cubic-bezier",controlPoints:G}}}if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(P=d.parse(P,2,Ze),!P)return null;const R=[];let U=null;v==="interpolate-hcl"||v==="interpolate-lab"?U=Ir:d.expectedType&&d.expectedType.kind!=="value"&&(U=d.expectedType);for(let G=0;G<k.length;G+=2){const tt=k[G],ot=k[G+1],ht=G+3,gt=G+4;if(typeof tt!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ht);if(R.length&&R[R.length-1][0]>=tt)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ht);const _t=d.parse(ot,gt,U);if(!_t)return null;U=U||_t.type,R.push([tt,_t])}return Se(U,Ze)||Se(U,Ir)||Se(U,lt)||Se(U,Et)||Se(U,zt(Ze))?new Wi(U,v,T,P,R):d.error(`Type ${jt(U)} is not interpolatable.`)}evaluate(o){const d=this.labels,v=this.outputs;if(d.length===1)return v[0].evaluate(o);const T=this.input.evaluate(o);if(T<=d[0])return v[0].evaluate(o);const P=d.length;if(T>=d[P-1])return v[P-1].evaluate(o);const k=or(d,T),R=Wi.interpolationFactor(this.interpolation,T,d[k],d[k+1]),U=v[k].evaluate(o),G=v[k+1].evaluate(o);switch(this.operator){case"interpolate":return us[this.type.kind](U,G,R);case"interpolate-hcl":return us.color(U,G,R,"hcl");case"interpolate-lab":return us.color(U,G,R,"lab")}}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}}function to(h,o,d,v){const T=v-d,P=h-d;return T===0?0:o===1?P/T:(Math.pow(o,P)-1)/(Math.pow(o,T)-1)}class Gl{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expectected at least one argument.");let v=null;const T=d.expectedType;T&&T.kind!=="value"&&(v=T);const P=[];for(const R of o.slice(1)){const U=d.parse(R,1+P.length,v,void 0,{typeAnnotation:"omit"});if(!U)return null;v=v||U.type,P.push(U)}if(!v)throw new Error("No output type");const k=T&&P.some((R=>Wt(T,R.type)));return new Gl(k?Cn:v,P)}evaluate(o){let d,v=null,T=0;for(const P of this.args)if(T++,v=P.evaluate(o),v&&v instanceof An&&!v.available&&(d||(d=v.name),v=null,T===this.args.length&&(v=d)),v!==null)break;return v}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}}class Jo{constructor(o,d){this.type=d.type,this.bindings=[].concat(o),this.result=d}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const d of this.bindings)o(d[1]);o(this.result)}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const v=[];for(let P=1;P<o.length-1;P+=2){const k=o[P];if(typeof k!="string")return d.error(`Expected string, but found ${typeof k} instead.`,P);if(/[^a-zA-Z0-9_]/.test(k))return d.error("Variable names must contain only alphanumeric characters or '_'.",P);const R=d.parse(o[P+1],P+1);if(!R)return null;v.push([k,R])}const T=d.parse(o[o.length-1],o.length-1,d.expectedType,v);return T?new Jo(v,T):null}outputDefined(){return this.result.outputDefined()}}class hi{constructor(o,d,v){this.type=o,this.index=d,this.input=v}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const v=d.parse(o[1],1,Ze),T=d.parse(o[2],2,zt(d.expectedType||Cn));return v&&T?new hi(T.type.itemType,v,T):null}evaluate(o){const d=this.index.evaluate(o),v=this.input.evaluate(o);if(d<0)throw new zn(`Array index out of bounds: ${d} < 0.`);if(d>=v.length)throw new zn(`Array index out of bounds: ${d} > ${v.length-1}.`);if(d!==Math.floor(d))throw new zn(`Array index must be an integer, but found ${d} instead.`);return v[d]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class Wu{constructor(o,d){this.type=kn,this.needle=o,this.haystack=d}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const v=d.parse(o[1],1,Cn),T=d.parse(o[2],2,Cn);return v&&T?qt(v.type,[kn,In,Ze,_r,Cn])?new Wu(v,T):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${jt(v.type)} instead`):null}evaluate(o){const d=this.needle.evaluate(o),v=this.haystack.evaluate(o);if(!v)return!1;if(!Jt(d,["boolean","string","number","null"]))throw new zn(`Expected first argument to be of type boolean, string, number or null, but found ${jt(_i(d))} instead.`);if(!Jt(v,["string","array"]))throw new zn(`Expected second argument to be of type array or string, but found ${jt(_i(v))} instead.`);return v.indexOf(d)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class Ia{constructor(o,d,v){this.type=Ze,this.needle=o,this.haystack=d,this.fromIndex=v}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const v=d.parse(o[1],1,Cn),T=d.parse(o[2],2,Cn);if(!v||!T)return null;if(!qt(v.type,[kn,In,Ze,_r,Cn]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${jt(v.type)} instead`);if(o.length===4){const P=d.parse(o[3],3,Ze);return P?new Ia(v,T,P):null}return new Ia(v,T)}evaluate(o){const d=this.needle.evaluate(o),v=this.haystack.evaluate(o);if(!Jt(d,["boolean","string","number","null"]))throw new zn(`Expected first argument to be of type boolean, string, number or null, but found ${jt(_i(d))} instead.`);if(!Jt(v,["string","array"]))throw new zn(`Expected second argument to be of type array or string, but found ${jt(_i(v))} instead.`);if(this.fromIndex){const T=this.fromIndex.evaluate(o);return v.indexOf(d,T)}return v.indexOf(d)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class eo{constructor(o,d,v,T,P,k){this.inputType=o,this.type=d,this.input=v,this.cases=T,this.outputs=P,this.otherwise=k}static parse(o,d){if(o.length<5)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return d.error("Expected an even number of arguments.");let v,T;d.expectedType&&d.expectedType.kind!=="value"&&(T=d.expectedType);const P={},k=[];for(let G=2;G<o.length-1;G+=2){let tt=o[G];const ot=o[G+1];Array.isArray(tt)||(tt=[tt]);const ht=d.concat(G);if(tt.length===0)return ht.error("Expected at least one branch label.");for(const _t of tt){if(typeof _t!="number"&&typeof _t!="string")return ht.error("Branch labels must be numbers or strings.");if(typeof _t=="number"&&Math.abs(_t)>Number.MAX_SAFE_INTEGER)return ht.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof _t=="number"&&Math.floor(_t)!==_t)return ht.error("Numeric branch labels must be integer values.");if(v){if(ht.checkSubtype(v,_i(_t)))return null}else v=_i(_t);if(P[String(_t)]!==void 0)return ht.error("Branch labels must be unique.");P[String(_t)]=k.length}const gt=d.parse(ot,G,T);if(!gt)return null;T=T||gt.type,k.push(gt)}const R=d.parse(o[1],1,Cn);if(!R)return null;const U=d.parse(o[o.length-1],o.length-1,T);return U?R.type.kind!=="value"&&d.concat(1).checkSubtype(v,R.type)?null:new eo(v,T,R,P,k,U):null}evaluate(o){const d=this.input.evaluate(o);return(_i(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))&&this.otherwise.outputDefined()}}class Yl{constructor(o,d,v){this.type=o,this.branches=d,this.otherwise=v}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return d.error("Expected an odd number of arguments.");let v;d.expectedType&&d.expectedType.kind!=="value"&&(v=d.expectedType);const T=[];for(let k=1;k<o.length-1;k+=2){const R=d.parse(o[k],k,kn);if(!R)return null;const U=d.parse(o[k+1],k+1,v);if(!U)return null;T.push([R,U]),v=v||U.type}const P=d.parse(o[o.length-1],o.length-1,v);if(!P)return null;if(!v)throw new Error("Can't infer output type");return new Yl(v,T,P)}evaluate(o){for(const[d,v]of this.branches)if(d.evaluate(o))return v.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[d,v]of this.branches)o(d),o(v);o(this.otherwise)}outputDefined(){return this.branches.every((([o,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}}class Xu{constructor(o,d,v,T){this.type=o,this.input=d,this.beginIndex=v,this.endIndex=T}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const v=d.parse(o[1],1,Cn),T=d.parse(o[2],2,Ze);if(!v||!T)return null;if(!qt(v.type,[zt(Cn),In,Cn]))return d.error(`Expected first argument to be of type array or string, but found ${jt(v.type)} instead`);if(o.length===4){const P=d.parse(o[3],3,Ze);return P?new Xu(v.type,v,T,P):null}return new Xu(v.type,v,T)}evaluate(o){const d=this.input.evaluate(o),v=this.beginIndex.evaluate(o);if(!Jt(d,["string","array"]))throw new zn(`Expected first argument to be of type array or string, but found ${jt(_i(d))} instead.`);if(this.endIndex){const T=this.endIndex.evaluate(o);return d.slice(v,T)}return d.slice(v)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function kc(h,o){return h==="=="||h==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function pf(h,o,d,v){return v.compare(o,d)===0}function Wl(h,o,d){const v=h!=="=="&&h!=="!=";return class bz{constructor(P,k,R){this.type=kn,this.lhs=P,this.rhs=k,this.collator=R,this.hasUntypedArgument=P.type.kind==="value"||k.type.kind==="value"}static parse(P,k){if(P.length!==3&&P.length!==4)return k.error("Expected two or three arguments.");const R=P[0];let U=k.parse(P[1],1,Cn);if(!U)return null;if(!kc(R,U.type))return k.concat(1).error(`"${R}" comparisons are not supported for type '${jt(U.type)}'.`);let G=k.parse(P[2],2,Cn);if(!G)return null;if(!kc(R,G.type))return k.concat(2).error(`"${R}" comparisons are not supported for type '${jt(G.type)}'.`);if(U.type.kind!==G.type.kind&&U.type.kind!=="value"&&G.type.kind!=="value")return k.error(`Cannot compare types '${jt(U.type)}' and '${jt(G.type)}'.`);v&&(U.type.kind==="value"&&G.type.kind!=="value"?U=new _a(G.type,[U]):U.type.kind!=="value"&&G.type.kind==="value"&&(G=new _a(U.type,[G])));let tt=null;if(P.length===4){if(U.type.kind!=="string"&&G.type.kind!=="string"&&U.type.kind!=="value"&&G.type.kind!=="value")return k.error("Cannot use collator to compare non-string types.");if(tt=k.parse(P[3],3,Gr),!tt)return null}return new bz(U,G,tt)}evaluate(P){const k=this.lhs.evaluate(P),R=this.rhs.evaluate(P);if(v&&this.hasUntypedArgument){const U=_i(k),G=_i(R);if(U.kind!==G.kind||U.kind!=="string"&&U.kind!=="number")throw new zn(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${U.kind}, ${G.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const U=_i(k),G=_i(R);if(U.kind!=="string"||G.kind!=="string")return o(P,k,R)}return this.collator?d(P,k,R,this.collator.evaluate(P)):o(P,k,R)}eachChild(P){P(this.lhs),P(this.rhs),this.collator&&P(this.collator)}outputDefined(){return!0}}}const hh=Wl("==",(function(h,o,d){return o===d}),pf),cd=Wl("!=",(function(h,o,d){return o!==d}),(function(h,o,d,v){return!pf(0,o,d,v)})),fh=Wl("<",(function(h,o,d){return o<d}),(function(h,o,d,v){return v.compare(o,d)<0})),hd=Wl(">",(function(h,o,d){return o>d}),(function(h,o,d,v){return v.compare(o,d)>0})),So=Wl("<=",(function(h,o,d){return o<=d}),(function(h,o,d,v){return v.compare(o,d)<=0})),fd=Wl(">=",(function(h,o,d){return o>=d}),(function(h,o,d,v){return v.compare(o,d)>=0}));class Ku{constructor(o,d,v,T,P){this.type=In,this.number=o,this.locale=d,this.currency=v,this.minFractionDigits=T,this.maxFractionDigits=P}static parse(o,d){if(o.length!==3)return d.error("Expected two arguments.");const v=d.parse(o[1],1,Ze);if(!v)return null;const T=o[2];if(typeof T!="object"||Array.isArray(T))return d.error("NumberFormat options argument must be an object.");let P=null;if(T.locale&&(P=d.parse(T.locale,1,In),!P))return null;let k=null;if(T.currency&&(k=d.parse(T.currency,1,In),!k))return null;let R=null;if(T["min-fraction-digits"]&&(R=d.parse(T["min-fraction-digits"],1,Ze),!R))return null;let U=null;return T["max-fraction-digits"]&&(U=d.parse(T["max-fraction-digits"],1,Ze),!U)?null:new Ku(v,P,k,R,U)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class no{constructor(o){this.type=It,this.sections=o}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const v=o[1];if(!Array.isArray(v)&&typeof v=="object")return d.error("First argument must be an image or text section.");const T=[];let P=!1;for(let k=1;k<=o.length-1;++k){const R=o[k];if(P&&typeof R=="object"&&!Array.isArray(R)){P=!1;let U=null;if(R["font-scale"]&&(U=d.parse(R["font-scale"],1,Ze),!U))return null;let G=null;if(R["text-font"]&&(G=d.parse(R["text-font"],1,zt(In)),!G))return null;let tt=null;if(R["text-color"]&&(tt=d.parse(R["text-color"],1,Ir),!tt))return null;const ot=T[T.length-1];ot.scale=U,ot.font=G,ot.textColor=tt}else{const U=d.parse(o[k],1,Cn);if(!U)return null;const G=U.type.kind;if(G!=="string"&&G!=="value"&&G!=="null"&&G!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,T.push({content:U,scale:null,font:null,textColor:null})}}return new no(T)}evaluate(o){return new qi(this.sections.map((d=>{const v=d.content.evaluate(o);return _i(v)===dt?new Yr("",v,null,null,null):new Yr(ii(v),null,d.scale?d.scale.evaluate(o):null,d.font?d.font.evaluate(o).join(","):null,d.textColor?d.textColor.evaluate(o):null)})))}eachChild(o){for(const d of this.sections)o(d.content),d.scale&&o(d.scale),d.font&&o(d.font),d.textColor&&o(d.textColor)}outputDefined(){return!1}}class Oc{constructor(o){this.type=dt,this.input=o}static parse(o,d){if(o.length!==2)return d.error("Expected two arguments.");const v=d.parse(o[1],1,In);return v?new Oc(v):d.error("No image name provided.")}evaluate(o){const d=this.input.evaluate(o),v=An.fromString(d);return v&&o.availableImages&&(v.available=o.availableImages.indexOf(d)>-1),v}eachChild(o){o(this.input)}outputDefined(){return!1}}class Dc{constructor(o){this.type=Ze,this.input=o}static parse(o,d){if(o.length!==2)return d.error(`Expected 1 argument, but found ${o.length-1} instead.`);const v=d.parse(o[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${jt(v.type)} instead.`):new Dc(v):null}evaluate(o){const d=this.input.evaluate(o);if(typeof d=="string"||Array.isArray(d))return d.length;throw new zn(`Expected value to be of type string or array, but found ${jt(_i(d))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const Al={"==":hh,"!=":cd,">":hd,"<":fh,">=":fd,"<=":So,array:_a,at:hi,boolean:_a,case:Yl,coalesce:Gl,collator:yt,format:no,image:Oc,in:Wu,"index-of":Ia,interpolate:Wi,"interpolate-hcl":Wi,"interpolate-lab":Wi,length:Dc,let:Jo,literal:Pn,match:eo,number:_a,"number-format":Ku,object:_a,slice:Xu,step:Ya,string:_a,"to-boolean":ss,"to-color":ss,"to-number":ss,"to-string":ss,var:bo,within:Qo};function Ic(h,[o,d,v,T]){o=o.evaluate(h),d=d.evaluate(h),v=v.evaluate(h);const P=T?T.evaluate(h):1,k=$r(o,d,v,P);if(k)throw new zn(k);return new Un(o/255,d/255,v/255,P,!1)}function dh(h,o){return h in o}function zc(h,o){const d=o[h];return d===void 0?null:d}function Xl(h){return{type:h}}function ph(h){return{result:"success",value:h}}function To(h){return{result:"error",value:h}}function vu(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function mh(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function Lc(h){return!!h.expression&&h.expression.interpolated}function fi(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function zi(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function dd(h){return h}function Kn(h,o){const d=o.type==="color",v=h.stops&&typeof h.stops[0][0]=="object",T=v||!(v||h.property!==void 0),P=h.type||(Lc(o)?"exponential":"interval");if(d||o.type==="padding"){const tt=d?Un.parse:oa.parse;(h=yr({},h)).stops&&(h.stops=h.stops.map((ot=>[ot[0],tt(ot[1])]))),h.default=tt(h.default?h.default:o.default)}if(h.colorSpace&&(k=h.colorSpace)!=="rgb"&&k!=="hcl"&&k!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var k;let R,U,G;if(P==="exponential")R=Qu;else if(P==="interval")R=Li;else if(P==="categorical"){R=Xi,U=Object.create(null);for(const tt of h.stops)U[tt[0]]=tt[1];G=typeof h.stops[0][0]}else{if(P!=="identity")throw new Error(`Unknown function type "${P}"`);R=Ju}if(v){const tt={},ot=[];for(let _t=0;_t<h.stops.length;_t++){const Dt=h.stops[_t],Ut=Dt[0].zoom;tt[Ut]===void 0&&(tt[Ut]={zoom:Ut,type:h.type,property:h.property,default:h.default,stops:[]},ot.push(Ut)),tt[Ut].stops.push([Dt[0].value,Dt[1]])}const ht=[];for(const _t of ot)ht.push([tt[_t].zoom,Kn(tt[_t],o)]);const gt={name:"linear"};return{kind:"composite",interpolationType:gt,interpolationFactor:Wi.interpolationFactor.bind(void 0,gt),zoomStops:ht.map((_t=>_t[0])),evaluate:({zoom:_t},Dt)=>Qu({stops:ht,base:h.base},o,_t).evaluate(_t,Dt)}}if(T){const tt=P==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:tt,interpolationFactor:Wi.interpolationFactor.bind(void 0,tt),zoomStops:h.stops.map((ot=>ot[0])),evaluate:({zoom:ot})=>R(h,o,ot,U,G)}}return{kind:"source",evaluate(tt,ot){const ht=ot&&ot.properties?ot.properties[h.property]:void 0;return ht===void 0?ua(h.default,o.default):R(h,o,ht,U,G)}}}function ua(h,o,d){return h!==void 0?h:o!==void 0?o:d!==void 0?d:void 0}function Xi(h,o,d,v,T){return ua(typeof d===T?v[d]:void 0,h.default,o.default)}function Li(h,o,d){if(fi(d)!=="number")return ua(h.default,o.default);const v=h.stops.length;if(v===1||d<=h.stops[0][0])return h.stops[0][1];if(d>=h.stops[v-1][0])return h.stops[v-1][1];const T=or(h.stops.map((P=>P[0])),d);return h.stops[T][1]}function Qu(h,o,d){const v=h.base!==void 0?h.base:1;if(fi(d)!=="number")return ua(h.default,o.default);const T=h.stops.length;if(T===1||d<=h.stops[0][0])return h.stops[0][1];if(d>=h.stops[T-1][0])return h.stops[T-1][1];const P=or(h.stops.map((tt=>tt[0])),d),k=(function(tt,ot,ht,gt){const _t=gt-ht,Dt=tt-ht;return _t===0?0:ot===1?Dt/_t:(Math.pow(ot,Dt)-1)/(Math.pow(ot,_t)-1)})(d,v,h.stops[P][0],h.stops[P+1][0]),R=h.stops[P][1],U=h.stops[P+1][1],G=us[o.type]||dd;return typeof R.evaluate=="function"?{evaluate(...tt){const ot=R.evaluate.apply(void 0,tt),ht=U.evaluate.apply(void 0,tt);if(ot!==void 0&&ht!==void 0)return G(ot,ht,k,h.colorSpace)}}:G(R,U,k,h.colorSpace)}function Ju(h,o,d){switch(o.type){case"color":d=Un.parse(d);break;case"formatted":d=qi.fromString(d.toString());break;case"resolvedImage":d=An.fromString(d.toString());break;case"padding":d=oa.parse(d);break;default:fi(d)===o.type||o.type==="enum"&&o.values[d]||(d=void 0)}return ua(d,h.default,o.default)}Mr.register(Al,{error:[{kind:"error"},[In],(h,[o])=>{throw new zn(o.evaluate(h))}],typeof:[In,[Cn],(h,[o])=>jt(_i(o.evaluate(h)))],"to-rgba":[zt(Ze,4),[Ir],(h,[o])=>{const[d,v,T,P]=o.evaluate(h).rgb;return[255*d,255*v,255*T,P]}],rgb:[Ir,[Ze,Ze,Ze],Ic],rgba:[Ir,[Ze,Ze,Ze,Ze],Ic],has:{type:kn,overloads:[[[In],(h,[o])=>dh(o.evaluate(h),h.properties())],[[In,ya],(h,[o,d])=>dh(o.evaluate(h),d.evaluate(h))]]},get:{type:Cn,overloads:[[[In],(h,[o])=>zc(o.evaluate(h),h.properties())],[[In,ya],(h,[o,d])=>zc(o.evaluate(h),d.evaluate(h))]]},"feature-state":[Cn,[In],(h,[o])=>zc(o.evaluate(h),h.featureState||{})],properties:[ya,[],h=>h.properties()],"geometry-type":[In,[],h=>h.geometryType()],id:[Cn,[],h=>h.id()],zoom:[Ze,[],h=>h.globals.zoom],"heatmap-density":[Ze,[],h=>h.globals.heatmapDensity||0],"line-progress":[Ze,[],h=>h.globals.lineProgress||0],accumulated:[Cn,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[Ze,Xl(Ze),(h,o)=>{let d=0;for(const v of o)d+=v.evaluate(h);return d}],"*":[Ze,Xl(Ze),(h,o)=>{let d=1;for(const v of o)d*=v.evaluate(h);return d}],"-":{type:Ze,overloads:[[[Ze,Ze],(h,[o,d])=>o.evaluate(h)-d.evaluate(h)],[[Ze],(h,[o])=>-o.evaluate(h)]]},"/":[Ze,[Ze,Ze],(h,[o,d])=>o.evaluate(h)/d.evaluate(h)],"%":[Ze,[Ze,Ze],(h,[o,d])=>o.evaluate(h)%d.evaluate(h)],ln2:[Ze,[],()=>Math.LN2],pi:[Ze,[],()=>Math.PI],e:[Ze,[],()=>Math.E],"^":[Ze,[Ze,Ze],(h,[o,d])=>Math.pow(o.evaluate(h),d.evaluate(h))],sqrt:[Ze,[Ze],(h,[o])=>Math.sqrt(o.evaluate(h))],log10:[Ze,[Ze],(h,[o])=>Math.log(o.evaluate(h))/Math.LN10],ln:[Ze,[Ze],(h,[o])=>Math.log(o.evaluate(h))],log2:[Ze,[Ze],(h,[o])=>Math.log(o.evaluate(h))/Math.LN2],sin:[Ze,[Ze],(h,[o])=>Math.sin(o.evaluate(h))],cos:[Ze,[Ze],(h,[o])=>Math.cos(o.evaluate(h))],tan:[Ze,[Ze],(h,[o])=>Math.tan(o.evaluate(h))],asin:[Ze,[Ze],(h,[o])=>Math.asin(o.evaluate(h))],acos:[Ze,[Ze],(h,[o])=>Math.acos(o.evaluate(h))],atan:[Ze,[Ze],(h,[o])=>Math.atan(o.evaluate(h))],min:[Ze,Xl(Ze),(h,o)=>Math.min(...o.map((d=>d.evaluate(h))))],max:[Ze,Xl(Ze),(h,o)=>Math.max(...o.map((d=>d.evaluate(h))))],abs:[Ze,[Ze],(h,[o])=>Math.abs(o.evaluate(h))],round:[Ze,[Ze],(h,[o])=>{const d=o.evaluate(h);return d<0?-Math.round(-d):Math.round(d)}],floor:[Ze,[Ze],(h,[o])=>Math.floor(o.evaluate(h))],ceil:[Ze,[Ze],(h,[o])=>Math.ceil(o.evaluate(h))],"filter-==":[kn,[In,Cn],(h,[o,d])=>h.properties()[o.value]===d.value],"filter-id-==":[kn,[Cn],(h,[o])=>h.id()===o.value],"filter-type-==":[kn,[In],(h,[o])=>h.geometryType()===o.value],"filter-<":[kn,[In,Cn],(h,[o,d])=>{const v=h.properties()[o.value],T=d.value;return typeof v==typeof T&&v<T}],"filter-id-<":[kn,[Cn],(h,[o])=>{const d=h.id(),v=o.value;return typeof d==typeof v&&d<v}],"filter->":[kn,[In,Cn],(h,[o,d])=>{const v=h.properties()[o.value],T=d.value;return typeof v==typeof T&&v>T}],"filter-id->":[kn,[Cn],(h,[o])=>{const d=h.id(),v=o.value;return typeof d==typeof v&&d>v}],"filter-<=":[kn,[In,Cn],(h,[o,d])=>{const v=h.properties()[o.value],T=d.value;return typeof v==typeof T&&v<=T}],"filter-id-<=":[kn,[Cn],(h,[o])=>{const d=h.id(),v=o.value;return typeof d==typeof v&&d<=v}],"filter->=":[kn,[In,Cn],(h,[o,d])=>{const v=h.properties()[o.value],T=d.value;return typeof v==typeof T&&v>=T}],"filter-id->=":[kn,[Cn],(h,[o])=>{const d=h.id(),v=o.value;return typeof d==typeof v&&d>=v}],"filter-has":[kn,[Cn],(h,[o])=>o.value in h.properties()],"filter-has-id":[kn,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[kn,[zt(In)],(h,[o])=>o.value.indexOf(h.geometryType())>=0],"filter-id-in":[kn,[zt(Cn)],(h,[o])=>o.value.indexOf(h.id())>=0],"filter-in-small":[kn,[In,zt(Cn)],(h,[o,d])=>d.value.indexOf(h.properties()[o.value])>=0],"filter-in-large":[kn,[In,zt(Cn)],(h,[o,d])=>(function(v,T,P,k){for(;P<=k;){const R=P+k>>1;if(T[R]===v)return!0;T[R]>v?k=R-1:P=R+1}return!1})(h.properties()[o.value],d.value,0,d.value.length-1)],all:{type:kn,overloads:[[[kn,kn],(h,[o,d])=>o.evaluate(h)&&d.evaluate(h)],[Xl(kn),(h,o)=>{for(const d of o)if(!d.evaluate(h))return!1;return!0}]]},any:{type:kn,overloads:[[[kn,kn],(h,[o,d])=>o.evaluate(h)||d.evaluate(h)],[Xl(kn),(h,o)=>{for(const d of o)if(d.evaluate(h))return!0;return!1}]]},"!":[kn,[kn],(h,[o])=>!o.evaluate(h)],"is-supported-script":[kn,[In],(h,[o])=>{const d=h.globals&&h.globals.isSupportedScript;return!d||d(o.evaluate(h))}],upcase:[In,[In],(h,[o])=>o.evaluate(h).toUpperCase()],downcase:[In,[In],(h,[o])=>o.evaluate(h).toLowerCase()],concat:[In,Xl(Cn),(h,o)=>o.map((d=>ii(d.evaluate(h)))).join("")],"resolved-locale":[In,[Gr],(h,[o])=>o.evaluate(h).resolvedLocale()]});class xu{constructor(o,d){var v;this.expression=o,this._warningHistory={},this._evaluator=new Ss,this._defaultValue=d?(v=d).type==="color"&&zi(v.default)?new Un(0,0,0,0):v.type==="color"?Un.parse(v.default)||null:v.type==="padding"?oa.parse(v.default)||null:v.type==="variableAnchorOffsetCollection"?On.parse(v.default)||null:v.default===void 0?null:v.default:null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(o,d,v,T,P,k){return this._evaluator.globals=o,this._evaluator.feature=d,this._evaluator.featureState=v,this._evaluator.canonical=T,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)}evaluate(o,d,v,T,P,k){this._evaluator.globals=o,this._evaluator.feature=d||null,this._evaluator.featureState=v||null,this._evaluator.canonical=T,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=k||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new zn(`Expected value to be one of ${Object.keys(this._enumValues).map((U=>JSON.stringify(U))).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(R.message)),this._defaultValue}}}function tc(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Al}function ec(h,o){const d=new Di(Al,Ml,[],o?(function(T){const P={color:Ir,string:In,number:Ze,enum:In,boolean:kn,formatted:It,padding:lt,resolvedImage:dt,variableAnchorOffsetCollection:Et};return T.type==="array"?zt(P[T.value]||Cn,T.length):P[T.type]})(o):void 0),v=d.parse(h,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?ph(new xu(v,o)):To(d.errors)}class nc{constructor(o,d){this.kind=o,this._styleExpression=d,this.isStateDependent=o!=="constant"&&!ls(d.expression)}evaluateWithoutErrorHandling(o,d,v,T,P,k){return this._styleExpression.evaluateWithoutErrorHandling(o,d,v,T,P,k)}evaluate(o,d,v,T,P,k){return this._styleExpression.evaluate(o,d,v,T,P,k)}}class tl{constructor(o,d,v,T){this.kind=o,this.zoomStops=v,this._styleExpression=d,this.isStateDependent=o!=="camera"&&!ls(d.expression),this.interpolationType=T}evaluateWithoutErrorHandling(o,d,v,T,P,k){return this._styleExpression.evaluateWithoutErrorHandling(o,d,v,T,P,k)}evaluate(o,d,v,T,P,k){return this._styleExpression.evaluate(o,d,v,T,P,k)}interpolationFactor(o,d,v){return this.interpolationType?Wi.interpolationFactor(this.interpolationType,o,d,v):0}}function Ms(h,o){const d=ec(h,o);if(d.result==="error")return d;const v=d.value.expression,T=os(v);if(!T&&!vu(o))return To([new Yn("","data expressions not supported")]);const P=wo(v,["zoom"]);if(!P&&!mh(o))return To([new Yn("","zoom expressions not supported")]);const k=ic(v);return k||P?k instanceof Yn?To([k]):k instanceof Wi&&!Lc(o)?To([new Yn("",'"interpolate" expressions cannot be used with this property')]):ph(k?new tl(T?"camera":"composite",d.value,k.labels,k instanceof Wi?k.interpolation:void 0):new nc(T?"constant":"source",d.value)):To([new Yn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Mo{constructor(o,d){this._parameters=o,this._specification=d,yr(this,Kn(this._parameters,this._specification))}static deserialize(o){return new Mo(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function ic(h){let o=null;if(h instanceof Jo)o=ic(h.result);else if(h instanceof Gl){for(const d of h.args)if(o=ic(d),o)break}else(h instanceof Ya||h instanceof Wi)&&h.input instanceof Mr&&h.input.name==="zoom"&&(o=h);return o instanceof Yn||h.eachChild((d=>{const v=ic(d);v instanceof Yn?o=v:!o&&v?o=new Yn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&v&&o!==v&&(o=new Yn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),o}function cs(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const o of h.slice(1))if(!cs(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const mf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Us(h){if(h==null)return{filter:()=>!0,needGeometry:!1};cs(h)||(h=Cl(h));const o=ec(h,mf);if(o.result==="error")throw new Error(o.value.map((d=>`${d.key}: ${d.message}`)).join(", "));return{filter:(d,v,T)=>o.value.evaluate(d,v,{},T),needGeometry:bu(h)}}function rc(h,o){return h<o?-1:h>o?1:0}function bu(h){if(!Array.isArray(h))return!1;if(h[0]==="within")return!0;for(let o=1;o<h.length;o++)if(bu(h[o]))return!0;return!1}function Cl(h){if(!h)return!0;const o=h[0];return h.length<=1?o!=="any":o==="=="?Kl(h[1],h[2],"=="):o==="!="?Eo(Kl(h[1],h[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Kl(h[1],h[2],o):o==="any"?(d=h.slice(1),["any"].concat(d.map(Cl))):o==="all"?["all"].concat(h.slice(1).map(Cl)):o==="none"?["all"].concat(h.slice(1).map(Cl).map(Eo)):o==="in"?gh(h[1],h.slice(2)):o==="!in"?Eo(gh(h[1],h.slice(2))):o==="has"?io(h[1]):o==="!has"?Eo(io(h[1])):o!=="within"||h;var d}function Kl(h,o,d){switch(h){case"$type":return[`filter-type-${d}`,o];case"$id":return[`filter-id-${d}`,o];default:return[`filter-${d}`,h,o]}}function gh(h,o){if(o.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some((d=>typeof d!=typeof o[0]))?["filter-in-large",h,["literal",o.sort(rc)]]:["filter-in-small",h,["literal",o]]}}function io(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function Eo(h){return["!",h]}function ac(h){const o=typeof h;if(o==="number"||o==="boolean"||o==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let T="[";for(const P of h)T+=`${ac(P)},`;return`${T}]`}const d=Object.keys(h).sort();let v="{";for(let T=0;T<d.length;T++)v+=`${JSON.stringify(d[T])}:${ac(h[d[T]])},`;return`${v}}`}function Ql(h){let o="";for(const d of Gn)o+=`/${ac(h[d])}`;return o}function yh(h){const o=h.value;return o?[new Fe(h.key,o,"constants have been deprecated as of v8")]:[]}function Ti(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Jl(h){if(Array.isArray(h))return h.map(Jl);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const o={};for(const d in h)o[d]=Jl(h[d]);return o}return Ti(h)}function Wr(h){const o=h.key,d=h.value,v=h.valueSpec||{},T=h.objectElementValidators||{},P=h.style,k=h.styleSpec,R=h.validateSpec;let U=[];const G=fi(d);if(G!=="object")return[new Fe(o,d,`object expected, ${G} found`)];for(const tt in d){const ot=tt.split(".")[0],ht=v[ot]||v["*"];let gt;if(T[ot])gt=T[ot];else if(v[ot])gt=R;else if(T["*"])gt=T["*"];else{if(!v["*"]){U.push(new Fe(o,d[tt],`unknown property "${tt}"`));continue}gt=R}U=U.concat(gt({key:(o&&`${o}.`)+tt,value:d[tt],valueSpec:ht,style:P,styleSpec:k,object:d,objectKey:tt,validateSpec:R},d))}for(const tt in v)T[tt]||v[tt].required&&v[tt].default===void 0&&d[tt]===void 0&&U.push(new Fe(o,d,`missing required property "${tt}"`));return U}function wu(h){const o=h.value,d=h.valueSpec,v=h.style,T=h.styleSpec,P=h.key,k=h.arrayElementValidator||h.validateSpec;if(fi(o)!=="array")return[new Fe(P,o,`array expected, ${fi(o)} found`)];if(d.length&&o.length!==d.length)return[new Fe(P,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new Fe(P,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let R={type:d.value,values:d.values};T.$version<7&&(R.function=d.function),fi(d.value)==="object"&&(R=d.value);let U=[];for(let G=0;G<o.length;G++)U=U.concat(k({array:o,arrayIndex:G,value:o[G],valueSpec:R,validateSpec:h.validateSpec,style:v,styleSpec:T,key:`${P}[${G}]`}));return U}function Es(h){const o=h.key,d=h.value,v=h.valueSpec;let T=fi(d);return T==="number"&&d!=d&&(T="NaN"),T!=="number"?[new Fe(o,d,`number expected, ${T} found`)]:"minimum"in v&&d<v.minimum?[new Fe(o,d,`${d} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&d>v.maximum?[new Fe(o,d,`${d} is greater than the maximum value ${v.maximum}`)]:[]}function Xr(h){const o=h.valueSpec,d=Ti(h.value.type);let v,T,P,k={};const R=d!=="categorical"&&h.value.property===void 0,U=!R,G=fi(h.value.stops)==="array"&&fi(h.value.stops[0])==="array"&&fi(h.value.stops[0][0])==="object",tt=Wr({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(gt){if(d==="identity")return[new Fe(gt.key,gt.value,'identity function may not have a "stops" property')];let _t=[];const Dt=gt.value;return _t=_t.concat(wu({key:gt.key,value:Dt,valueSpec:gt.valueSpec,validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec,arrayElementValidator:ot})),fi(Dt)==="array"&&Dt.length===0&&_t.push(new Fe(gt.key,Dt,"array must have at least one stop")),_t},default:function(gt){return gt.validateSpec({key:gt.key,value:gt.value,valueSpec:o,validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec})}}});return d==="identity"&&R&&tt.push(new Fe(h.key,h.value,'missing required property "property"')),d==="identity"||h.value.stops||tt.push(new Fe(h.key,h.value,'missing required property "stops"')),d==="exponential"&&h.valueSpec.expression&&!Lc(h.valueSpec)&&tt.push(new Fe(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(U&&!vu(h.valueSpec)?tt.push(new Fe(h.key,h.value,"property functions not supported")):R&&!mh(h.valueSpec)&&tt.push(new Fe(h.key,h.value,"zoom functions not supported"))),d!=="categorical"&&!G||h.value.property!==void 0||tt.push(new Fe(h.key,h.value,'"property" property is required')),tt;function ot(gt){let _t=[];const Dt=gt.value,Ut=gt.key;if(fi(Dt)!=="array")return[new Fe(Ut,Dt,`array expected, ${fi(Dt)} found`)];if(Dt.length!==2)return[new Fe(Ut,Dt,`array length 2 expected, length ${Dt.length} found`)];if(G){if(fi(Dt[0])!=="object")return[new Fe(Ut,Dt,`object expected, ${fi(Dt[0])} found`)];if(Dt[0].zoom===void 0)return[new Fe(Ut,Dt,"object stop key must have zoom")];if(Dt[0].value===void 0)return[new Fe(Ut,Dt,"object stop key must have value")];if(P&&P>Ti(Dt[0].zoom))return[new Fe(Ut,Dt[0].zoom,"stop zoom values must appear in ascending order")];Ti(Dt[0].zoom)!==P&&(P=Ti(Dt[0].zoom),T=void 0,k={}),_t=_t.concat(Wr({key:`${Ut}[0]`,value:Dt[0],valueSpec:{zoom:{}},validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec,objectElementValidators:{zoom:Es,value:ht}}))}else _t=_t.concat(ht({key:`${Ut}[0]`,value:Dt[0],validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec},Dt));return tc(Jl(Dt[1]))?_t.concat([new Fe(`${Ut}[1]`,Dt[1],"expressions are not allowed in function stops.")]):_t.concat(gt.validateSpec({key:`${Ut}[1]`,value:Dt[1],valueSpec:o,validateSpec:gt.validateSpec,style:gt.style,styleSpec:gt.styleSpec}))}function ht(gt,_t){const Dt=fi(gt.value),Ut=Ti(gt.value),Ht=gt.value!==null?gt.value:_t;if(v){if(Dt!==v)return[new Fe(gt.key,Ht,`${Dt} stop domain type must match previous stop domain type ${v}`)]}else v=Dt;if(Dt!=="number"&&Dt!=="string"&&Dt!=="boolean")return[new Fe(gt.key,Ht,"stop domain value must be a number, string, or boolean")];if(Dt!=="number"&&d!=="categorical"){let ne=`number expected, ${Dt} found`;return vu(o)&&d===void 0&&(ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fe(gt.key,Ht,ne)]}return d!=="categorical"||Dt!=="number"||isFinite(Ut)&&Math.floor(Ut)===Ut?d!=="categorical"&&Dt==="number"&&T!==void 0&&Ut<T?[new Fe(gt.key,Ht,"stop domain values must appear in ascending order")]:(T=Ut,d==="categorical"&&Ut in k?[new Fe(gt.key,Ht,"stop domain values must be unique")]:(k[Ut]=!0,[])):[new Fe(gt.key,Ht,`integer expected, found ${Ut}`)]}}function Vs(h){const o=(h.expressionContext==="property"?Ms:ec)(Jl(h.value),h.valueSpec);if(o.result==="error")return o.value.map((v=>new Fe(`${h.key}${v.key}`,h.value,v.message)));const d=o.value.expression||o.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!d.outputDefined())return[new Fe(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!ls(d))return[new Fe(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!ls(d))return[new Fe(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!wo(d,["zoom","feature-state"]))return[new Fe(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!os(d))return[new Fe(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Pl(h){const o=h.key,d=h.value,v=h.valueSpec,T=[];return Array.isArray(v.values)?v.values.indexOf(Ti(d))===-1&&T.push(new Fe(o,d,`expected one of [${v.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(v.values).indexOf(Ti(d))===-1&&T.push(new Fe(o,d,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(d)} found`)),T}function Ao(h){return cs(Jl(h.value))?Vs(yr({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):sc(h)}function sc(h){const o=h.value,d=h.key;if(fi(o)!=="array")return[new Fe(d,o,`array expected, ${fi(o)} found`)];const v=h.styleSpec;let T,P=[];if(o.length<1)return[new Fe(d,o,"filter array must have at least 1 element")];switch(P=P.concat(Pl({key:`${d}[0]`,value:o[0],valueSpec:v.filter_operator,style:h.style,styleSpec:h.styleSpec})),Ti(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&Ti(o[1])==="$type"&&P.push(new Fe(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&P.push(new Fe(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(T=fi(o[1]),T!=="string"&&P.push(new Fe(`${d}[1]`,o[1],`string expected, ${T} found`)));for(let k=2;k<o.length;k++)T=fi(o[k]),Ti(o[1])==="$type"?P=P.concat(Pl({key:`${d}[${k}]`,value:o[k],valueSpec:v.geometry_type,style:h.style,styleSpec:h.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&P.push(new Fe(`${d}[${k}]`,o[k],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let k=1;k<o.length;k++)P=P.concat(sc({key:`${d}[${k}]`,value:o[k],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":T=fi(o[1]),o.length!==2?P.push(new Fe(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):T!=="string"&&P.push(new Fe(`${d}[1]`,o[1],`string expected, ${T} found`));break;case"within":T=fi(o[1]),o.length!==2?P.push(new Fe(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):T!=="object"&&P.push(new Fe(`${d}[1]`,o[1],`object expected, ${T} found`))}return P}function Su(h,o){const d=h.key,v=h.validateSpec,T=h.style,P=h.styleSpec,k=h.value,R=h.objectKey,U=P[`${o}_${h.layerType}`];if(!U)return[];const G=R.match(/^(.*)-transition$/);if(o==="paint"&&G&&U[G[1]]&&U[G[1]].transition)return v({key:d,value:k,valueSpec:P.transition,style:T,styleSpec:P});const tt=h.valueSpec||U[R];if(!tt)return[new Fe(d,k,`unknown property "${R}"`)];let ot;if(fi(k)==="string"&&vu(tt)&&!tt.tokens&&(ot=/^{([^}]+)}$/.exec(k)))return[new Fe(d,k,`"${R}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ot[1])} }\`.`)];const ht=[];return h.layerType==="symbol"&&(R==="text-field"&&T&&!T.glyphs&&ht.push(new Fe(d,k,'use of "text-field" requires a style "glyphs" property')),R==="text-font"&&zi(Jl(k))&&Ti(k.type)==="identity"&&ht.push(new Fe(d,k,'"text-font" does not support identity functions'))),ht.concat(v({key:h.key,value:k,valueSpec:tt,style:T,styleSpec:P,expressionContext:"property",propertyType:o,propertyKey:R}))}function el(h){return Su(h,"paint")}function oc(h){return Su(h,"layout")}function nl(h){let o=[];const d=h.value,v=h.key,T=h.style,P=h.styleSpec;d.type||d.ref||o.push(new Fe(v,d,'either "type" or "ref" is required'));let k=Ti(d.type);const R=Ti(d.ref);if(d.id){const U=Ti(d.id);for(let G=0;G<h.arrayIndex;G++){const tt=T.layers[G];Ti(tt.id)===U&&o.push(new Fe(v,d.id,`duplicate layer id "${d.id}", previously used at line ${tt.id.__line__}`))}}if("ref"in d){let U;["type","source","source-layer","filter","layout"].forEach((G=>{G in d&&o.push(new Fe(v,d[G],`"${G}" is prohibited for ref layers`))})),T.layers.forEach((G=>{Ti(G.id)===R&&(U=G)})),U?U.ref?o.push(new Fe(v,d.ref,"ref cannot reference another ref layer")):k=Ti(U.type):o.push(new Fe(v,d.ref,`ref layer "${R}" not found`))}else if(k!=="background")if(d.source){const U=T.sources&&T.sources[d.source],G=U&&Ti(U.type);U?G==="vector"&&k==="raster"?o.push(new Fe(v,d.source,`layer "${d.id}" requires a raster source`)):G!=="raster-dem"&&k==="hillshade"?o.push(new Fe(v,d.source,`layer "${d.id}" requires a raster-dem source`)):G==="raster"&&k!=="raster"?o.push(new Fe(v,d.source,`layer "${d.id}" requires a vector source`)):G!=="vector"||d["source-layer"]?G==="raster-dem"&&k!=="hillshade"?o.push(new Fe(v,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):k!=="line"||!d.paint||!d.paint["line-gradient"]||G==="geojson"&&U.lineMetrics||o.push(new Fe(v,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Fe(v,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new Fe(v,d.source,`source "${d.source}" not found`))}else o.push(new Fe(v,d,'missing required property "source"'));return o=o.concat(Wr({key:v,value:d,valueSpec:P.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${v}.type`,value:d.type,valueSpec:P.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:d,objectKey:"type"}),filter:Ao,layout:U=>Wr({layer:d,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":G=>oc(yr({layerType:k},G))}}),paint:U=>Wr({layer:d,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":G=>el(yr({layerType:k},G))}})}})),o}function As(h){const o=h.value,d=h.key,v=fi(o);return v!=="string"?[new Fe(d,o,`string expected, ${v} found`)]:[]}const il={promoteId:function({key:h,value:o}){if(fi(o)==="string")return As({key:h,value:o});{const d=[];for(const v in o)d.push(...As({key:`${h}.${v}`,value:o[v]}));return d}}};function ca(h){const o=h.value,d=h.key,v=h.styleSpec,T=h.style,P=h.validateSpec;if(!o.type)return[new Fe(d,o,'"type" is required')];const k=Ti(o.type);let R;switch(k){case"vector":case"raster":return R=Wr({key:d,value:o,valueSpec:v[`source_${k.replace("-","_")}`],style:h.style,styleSpec:v,objectElementValidators:il,validateSpec:P}),R;case"raster-dem":return R=(function(U){var G;const tt=(G=U.sourceName)!==null&&G!==void 0?G:"",ot=U.value,ht=U.styleSpec,gt=ht.source_raster_dem,_t=U.style;let Dt=[];const Ut=fi(ot);if(ot===void 0)return Dt;if(Ut!=="object")return Dt.push(new Fe("source_raster_dem",ot,`object expected, ${Ut} found`)),Dt;const Ht=Ti(ot.encoding)==="custom",ne=["redFactor","greenFactor","blueFactor","baseShift"],Kt=U.value.encoding?`"${U.value.encoding}"`:"Default";for(const ae in ot)!Ht&&ne.includes(ae)?Dt.push(new Fe(ae,ot[ae],`In "${tt}": "${ae}" is only valid when "encoding" is set to "custom". ${Kt} encoding found`)):gt[ae]?Dt=Dt.concat(U.validateSpec({key:ae,value:ot[ae],valueSpec:gt[ae],validateSpec:U.validateSpec,style:_t,styleSpec:ht})):Dt.push(new Fe(ae,ot[ae],`unknown property "${ae}"`));return Dt})({sourceName:d,value:o,style:h.style,styleSpec:v,validateSpec:P}),R;case"geojson":if(R=Wr({key:d,value:o,valueSpec:v.source_geojson,style:T,styleSpec:v,validateSpec:P,objectElementValidators:il}),o.cluster)for(const U in o.clusterProperties){const[G,tt]=o.clusterProperties[U],ot=typeof G=="string"?[G,["accumulated"],["get",U]]:G;R.push(...Vs({key:`${d}.${U}.map`,value:tt,expressionContext:"cluster-map"})),R.push(...Vs({key:`${d}.${U}.reduce`,value:ot,expressionContext:"cluster-reduce"}))}return R;case"video":return Wr({key:d,value:o,valueSpec:v.source_video,style:T,validateSpec:P,styleSpec:v});case"image":return Wr({key:d,value:o,valueSpec:v.source_image,style:T,validateSpec:P,styleSpec:v});case"canvas":return[new Fe(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pl({key:`${d}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Tu(h){const o=h.value,d=h.styleSpec,v=d.light,T=h.style;let P=[];const k=fi(o);if(o===void 0)return P;if(k!=="object")return P=P.concat([new Fe("light",o,`object expected, ${k} found`)]),P;for(const R in o){const U=R.match(/^(.*)-transition$/);P=P.concat(U&&v[U[1]]&&v[U[1]].transition?h.validateSpec({key:R,value:o[R],valueSpec:d.transition,validateSpec:h.validateSpec,style:T,styleSpec:d}):v[R]?h.validateSpec({key:R,value:o[R],valueSpec:v[R],validateSpec:h.validateSpec,style:T,styleSpec:d}):[new Fe(R,o[R],`unknown property "${R}"`)])}return P}function rl(h){const o=h.value,d=h.styleSpec,v=d.terrain,T=h.style;let P=[];const k=fi(o);if(o===void 0)return P;if(k!=="object")return P=P.concat([new Fe("terrain",o,`object expected, ${k} found`)]),P;for(const R in o)P=P.concat(v[R]?h.validateSpec({key:R,value:o[R],valueSpec:v[R],validateSpec:h.validateSpec,style:T,styleSpec:d}):[new Fe(R,o[R],`unknown property "${R}"`)]);return P}function tu(h){let o=[];const d=h.value,v=h.key;if(Array.isArray(d)){const T=[],P=[];for(const k in d)d[k].id&&T.includes(d[k].id)&&o.push(new Fe(v,d,`all the sprites' ids must be unique, but ${d[k].id} is duplicated`)),T.push(d[k].id),d[k].url&&P.includes(d[k].url)&&o.push(new Fe(v,d,`all the sprites' URLs must be unique, but ${d[k].url} is duplicated`)),P.push(d[k].url),o=o.concat(Wr({key:`${v}[${k}]`,value:d[k],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return o}return As({key:v,value:d})}const lc={"*":()=>[],array:wu,boolean:function(h){const o=h.value,d=h.key,v=fi(o);return v!=="boolean"?[new Fe(d,o,`boolean expected, ${v} found`)]:[]},number:Es,color:function(h){const o=h.key,d=h.value,v=fi(d);return v!=="string"?[new Fe(o,d,`color expected, ${v} found`)]:Un.parse(String(d))?[]:[new Fe(o,d,`color expected, "${d}" found`)]},constants:yh,enum:Pl,filter:Ao,function:Xr,layer:nl,object:Wr,source:ca,light:Tu,terrain:rl,string:As,formatted:function(h){return As(h).length===0?[]:Vs(h)},resolvedImage:function(h){return As(h).length===0?[]:Vs(h)},padding:function(h){const o=h.key,d=h.value;if(fi(d)==="array"){if(d.length<1||d.length>4)return[new Fe(o,d,`padding requires 1 to 4 values; ${d.length} values found`)];const v={type:"number"};let T=[];for(let P=0;P<d.length;P++)T=T.concat(h.validateSpec({key:`${o}[${P}]`,value:d[P],validateSpec:h.validateSpec,valueSpec:v}));return T}return Es({key:o,value:d,valueSpec:{}})},variableAnchorOffsetCollection:function(h){const o=h.key,d=h.value,v=fi(d),T=h.styleSpec;if(v!=="array"||d.length<1||d.length%2!=0)return[new Fe(o,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let P=[];for(let k=0;k<d.length;k+=2)P=P.concat(Pl({key:`${o}[${k}]`,value:d[k],valueSpec:T.layout_symbol["text-anchor"]})),P=P.concat(wu({key:`${o}[${k+1}]`,value:d[k+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:T}));return P},sprite:tu};function al(h){const o=h.value,d=h.valueSpec,v=h.styleSpec;return h.validateSpec=al,d.expression&&zi(Ti(o))?Xr(h):d.expression&&tc(Jl(o))?Vs(h):d.type&&lc[d.type]?lc[d.type](h):Wr(yr({},h,{valueSpec:d.type?v[d.type]:d}))}function va(h){const o=h.value,d=h.key,v=As(h);return v.length||(o.indexOf("{fontstack}")===-1&&v.push(new Fe(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&v.push(new Fe(d,o,'"glyphs" url must include a "{range}" token'))),v}function za(h,o=ge){let d=[];return d=d.concat(al({key:"",value:h,valueSpec:o.$root,styleSpec:o,style:h,validateSpec:al,objectElementValidators:{glyphs:va,"*":()=>[]}})),h.constants&&(d=d.concat(yh({key:"constants",value:h.constants}))),kl(d)}function Co(h){return function(o){return h({...o,validateSpec:al})}}function kl(h){return[].concat(h).sort(((o,d)=>o.line-d.line))}function sl(h){return function(...o){return kl(h.apply(this,o))}}za.source=sl(Co(ca)),za.sprite=sl(Co(tu)),za.glyphs=sl(Co(va)),za.light=sl(Co(Tu)),za.terrain=sl(Co(rl)),za.layer=sl(Co(nl)),za.filter=sl(Co(Ao)),za.paintProperty=sl(Co(el)),za.layoutProperty=sl(Co(oc));const Po=za,pd=Po.light,Ol=Po.paintProperty,_h=Po.layoutProperty;function ro(h,o){let d=!1;if(o&&o.length)for(const v of o)h.fire(new hn(new Error(v.message))),d=!0;return d}class xa{constructor(o,d,v){const T=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const k=new Int32Array(this.arrayBuffer);o=k[0],this.d=(d=k[1])+2*(v=k[2]);for(let U=0;U<this.d*this.d;U++){const G=k[3+U],tt=k[3+U+1];T.push(G===tt?null:k.subarray(G,tt))}const R=k[3+T.length+1];this.keys=k.subarray(k[3+T.length],R),this.bboxes=k.subarray(R),this.insert=this._insertReadonly}else{this.d=d+2*v;for(let k=0;k<this.d*this.d;k++)T.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=o,this.padding=v,this.scale=d/o,this.uid=0;const P=v/d*o;this.min=-P,this.max=o+P}insert(o,d,v,T,P){this._forEachCell(d,v,T,P,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(T),this.bboxes.push(P)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,d,v,T,P,k){this.cells[P].push(k)}query(o,d,v,T,P){const k=this.min,R=this.max;if(o<=k&&d<=k&&R<=v&&R<=T&&!P)return Array.prototype.slice.call(this.keys);{const U=[];return this._forEachCell(o,d,v,T,this._queryCell,U,{},P),U}}_queryCell(o,d,v,T,P,k,R,U){const G=this.cells[P];if(G!==null){const tt=this.keys,ot=this.bboxes;for(let ht=0;ht<G.length;ht++){const gt=G[ht];if(R[gt]===void 0){const _t=4*gt;(U?U(ot[_t+0],ot[_t+1],ot[_t+2],ot[_t+3]):o<=ot[_t+2]&&d<=ot[_t+3]&&v>=ot[_t+0]&&T>=ot[_t+1])?(R[gt]=!0,k.push(tt[gt])):R[gt]=!1}}}}_forEachCell(o,d,v,T,P,k,R,U){const G=this._convertToCellCoord(o),tt=this._convertToCellCoord(d),ot=this._convertToCellCoord(v),ht=this._convertToCellCoord(T);for(let gt=G;gt<=ot;gt++)for(let _t=tt;_t<=ht;_t++){const Dt=this.d*_t+gt;if((!U||U(this._convertFromCellCoord(gt),this._convertFromCellCoord(_t),this._convertFromCellCoord(gt+1),this._convertFromCellCoord(_t+1)))&&P.call(this,o,d,v,T,Dt,k,R,U))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,d=3+this.cells.length+1+1;let v=0;for(let k=0;k<this.cells.length;k++)v+=this.cells[k].length;const T=new Int32Array(d+v+this.keys.length+this.bboxes.length);T[0]=this.extent,T[1]=this.n,T[2]=this.padding;let P=d;for(let k=0;k<o.length;k++){const R=o[k];T[3+k]=P,T.set(R,P),P+=R.length}return T[3+o.length]=P,T.set(this.keys,P),P+=this.keys.length,T[3+o.length+1]=P,T.set(this.bboxes,P),P+=this.bboxes.length,T.buffer}static serialize(o,d){const v=o.toArrayBuffer();return d&&d.push(v),{buffer:v}}static deserialize(o){return new xa(o.buffer)}}const Cs={};function Qe(h,o,d={}){if(Cs[h])throw new Error(`${h} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:h,writeable:!1}),Cs[h]={klass:o,omit:d.omit||[],shallow:d.shallow||[]}}Qe("Object",Object),Qe("TransferableGridIndex",xa),Qe("Color",Un),Qe("Error",Error),Qe("AJAXError",Ne),Qe("ResolvedImage",An),Qe("StylePropertyFunction",Mo),Qe("StyleExpression",xu,{omit:["_evaluator"]}),Qe("ZoomDependentExpression",tl),Qe("ZoomConstantExpression",nc),Qe("CompoundExpression",Mr,{omit:["_evaluate"]});for(const h in Al)Al[h]._classRegistryKey||Qe(`Expression_${h}`,Al[h]);function ba(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function ao(h,o){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob)return h;if(ba(h)||Bt(h))return o&&o.push(h),h;if(ArrayBuffer.isView(h)){const d=h;return o&&o.push(d.buffer),d}if(h instanceof ImageData)return o&&o.push(h.data.buffer),h;if(Array.isArray(h)){const d=[];for(const v of h)d.push(ao(v,o));return d}if(typeof h=="object"){const d=h.constructor,v=d._classRegistryKey;if(!v)throw new Error("can't serialize object of unregistered class");if(!Cs[v])throw new Error(`${v} is not registered.`);const T=d.serialize?d.serialize(h,o):{};if(d.serialize){if(o&&T===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const P in h){if(!h.hasOwnProperty(P)||Cs[v].omit.indexOf(P)>=0)continue;const k=h[P];T[P]=Cs[v].shallow.indexOf(P)>=0?k:ao(k,o)}h instanceof Error&&(T.message=h.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return v!=="Object"&&(T.$name=v),T}throw new Error("can't serialize object of type "+typeof h)}function ko(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||ba(h)||Bt(h)||ArrayBuffer.isView(h)||h instanceof ImageData)return h;if(Array.isArray(h))return h.map(ko);if(typeof h=="object"){const o=h.$name||"Object";if(!Cs[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:d}=Cs[o];if(!d)throw new Error(`can't deserialize unregistered class ${o}`);if(d.deserialize)return d.deserialize(h);const v=Object.create(d.prototype);for(const T of Object.keys(h)){if(T==="$name")continue;const P=h[T];v[T]=Cs[o].shallow.indexOf(T)>=0?P:ko(P)}return v}throw new Error("can't deserialize object of type "+typeof h)}class ol{constructor(){this.first=!0}update(o,d){const v=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=d),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=v,!0))}}const en={"Latin-1 Supplement":h=>h>=128&&h<=255,Arabic:h=>h>=1536&&h<=1791,"Arabic Supplement":h=>h>=1872&&h<=1919,"Arabic Extended-A":h=>h>=2208&&h<=2303,"Hangul Jamo":h=>h>=4352&&h<=4607,"Unified Canadian Aboriginal Syllabics":h=>h>=5120&&h<=5759,Khmer:h=>h>=6016&&h<=6143,"Unified Canadian Aboriginal Syllabics Extended":h=>h>=6320&&h<=6399,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"CJK Radicals Supplement":h=>h>=11904&&h<=12031,"Kangxi Radicals":h=>h>=12032&&h<=12255,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Bopomofo:h=>h>=12544&&h<=12591,"Hangul Compatibility Jamo":h=>h>=12592&&h<=12687,Kanbun:h=>h>=12688&&h<=12703,"Bopomofo Extended":h=>h>=12704&&h<=12735,"CJK Strokes":h=>h>=12736&&h<=12783,"Katakana Phonetic Extensions":h=>h>=12784&&h<=12799,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"CJK Unified Ideographs Extension A":h=>h>=13312&&h<=19903,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Yi Syllables":h=>h>=40960&&h<=42127,"Yi Radicals":h=>h>=42128&&h<=42191,"Hangul Jamo Extended-A":h=>h>=43360&&h<=43391,"Hangul Syllables":h=>h>=44032&&h<=55215,"Hangul Jamo Extended-B":h=>h>=55216&&h<=55295,"Private Use Area":h=>h>=57344&&h<=63743,"CJK Compatibility Ideographs":h=>h>=63744&&h<=64255,"Arabic Presentation Forms-A":h=>h>=64336&&h<=65023,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Arabic Presentation Forms-B":h=>h>=65136&&h<=65279,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function $s(h){for(const o of h)if(ll(o.charCodeAt(0)))return!0;return!1}function Dl(h){for(const o of h)if(!uc(o.charCodeAt(0)))return!1;return!0}function uc(h){return!(en.Arabic(h)||en["Arabic Supplement"](h)||en["Arabic Extended-A"](h)||en["Arabic Presentation Forms-A"](h)||en["Arabic Presentation Forms-B"](h))}function ll(h){return!(h!==746&&h!==747&&(h<4352||!(en["Bopomofo Extended"](h)||en.Bopomofo(h)||en["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||en["CJK Compatibility Ideographs"](h)||en["CJK Compatibility"](h)||en["CJK Radicals Supplement"](h)||en["CJK Strokes"](h)||!(!en["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||en["CJK Unified Ideographs Extension A"](h)||en["CJK Unified Ideographs"](h)||en["Enclosed CJK Letters and Months"](h)||en["Hangul Compatibility Jamo"](h)||en["Hangul Jamo Extended-A"](h)||en["Hangul Jamo Extended-B"](h)||en["Hangul Jamo"](h)||en["Hangul Syllables"](h)||en.Hiragana(h)||en["Ideographic Description Characters"](h)||en.Kanbun(h)||en["Kangxi Radicals"](h)||en["Katakana Phonetic Extensions"](h)||en.Katakana(h)&&h!==12540||!(!en["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!en["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||en["Unified Canadian Aboriginal Syllabics"](h)||en["Unified Canadian Aboriginal Syllabics Extended"](h)||en["Vertical Forms"](h)||en["Yijing Hexagram Symbols"](h)||en["Yi Syllables"](h)||en["Yi Radicals"](h))))}function gf(h){return!(ll(h)||(function(o){return!!(en["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||en["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||en["Letterlike Symbols"](o)||en["Number Forms"](o)||en["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||en["Control Pictures"](o)&&o!==9251||en["Optical Character Recognition"](o)||en["Enclosed Alphanumerics"](o)||en["Geometric Shapes"](o)||en["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||en["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||en["CJK Symbols and Punctuation"](o)||en.Katakana(o)||en["Private Use Area"](o)||en["CJK Compatibility Forms"](o)||en["Small Form Variants"](o)||en["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)})(h))}function Wa(h){return h>=1424&&h<=2303||en["Arabic Presentation Forms-A"](h)||en["Arabic Presentation Forms-B"](h)}function cc(h,o){return!(!o&&Wa(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||en.Khmer(h))}function Oo(h){for(const o of h)if(Wa(o.charCodeAt(0)))return!0;return!1}const hc="deferred",eu="loading",ul="loaded";let Mu=null,La="unavailable",Do=null;const p=function(h){h&&typeof h=="string"&&h.indexOf("NetworkError")>-1&&(La="error"),Mu&&Mu(h)};function w(){D.fire(new Sn("pluginStateChange",{pluginStatus:La,pluginURL:Do}))}const D=new Rn,q=function(){return La},nt=function(){if(La!==hc||!Do)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");La=eu,w(),Do&&on({url:Do},(h=>{h?p(h):(La=ul,w())}))},mt={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>La===ul||mt.applyArabicShaping!=null,isLoading:()=>La===eu,setState(h){if(!Ct())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");La=h.pluginStatus,Do=h.pluginURL},isParsed(){if(!Ct())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return mt.applyArabicShaping!=null&&mt.processBidirectionalText!=null&&mt.processStyledBidirectionalText!=null},getPluginURL(){if(!Ct())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Do}};class Ft{constructor(o,d){this.zoom=o,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ol,this.transition={})}isSupportedScript(o){return(function(d,v){for(const T of d)if(!cc(T.charCodeAt(0),v))return!1;return!0})(o,mt.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,d=o-Math.floor(o),v=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*d}}}class ue{constructor(o,d){this.property=o,this.value=d,this.expression=(function(v,T){if(zi(v))return new Mo(v,T);if(tc(v)){const P=Ms(v,T);if(P.result==="error")throw new Error(P.value.map((k=>`${k.key}: ${k.message}`)).join(", "));return P.value}{let P=v;return T.type==="color"&&typeof v=="string"?P=Un.parse(v):T.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?T.type==="variableAnchorOffsetCollection"&&Array.isArray(v)&&(P=On.parse(v)):P=oa.parse(v),{kind:"constant",evaluate:()=>P}}})(d===void 0?o.specification.default:d,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,d,v){return this.property.possiblyEvaluate(this,o,d,v)}}class ve{constructor(o){this.property=o,this.value=new ue(o,void 0)}transitioned(o,d){return new rn(this.property,this.value,d,it({},o.transition,this.transition),o.now)}untransitioned(){return new rn(this.property,this.value,null,{},0)}}class Le{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return St(this._values[o].value.value)}setValue(o,d){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new ve(this._values[o].property)),this._values[o].value=new ue(this._values[o].property,d===null?void 0:St(d))}getTransition(o){return St(this._values[o].transition)}setTransition(o,d){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new ve(this._values[o].property)),this._values[o].transition=St(d)||void 0}serialize(){const o={};for(const d of Object.keys(this._values)){const v=this.getValue(d);v!==void 0&&(o[d]=v);const T=this.getTransition(d);T!==void 0&&(o[`${d}-transition`]=T)}return o}transitioned(o,d){const v=new Mn(this._properties);for(const T of Object.keys(this._values))v._values[T]=this._values[T].transitioned(o,d._values[T]);return v}untransitioned(){const o=new Mn(this._properties);for(const d of Object.keys(this._values))o._values[d]=this._values[d].untransitioned();return o}}class rn{constructor(o,d,v,T,P){this.property=o,this.value=d,this.begin=P+T.delay||0,this.end=this.begin+T.duration||0,o.specification.transition&&(T.delay||T.duration)&&(this.prior=v)}possiblyEvaluate(o,d,v){const T=o.now||0,P=this.value.possiblyEvaluate(o,d,v),k=this.prior;if(k){if(T>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(T<this.begin)return k.possiblyEvaluate(o,d,v);{const R=(T-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(o,d,v),P,(function(U){if(U<=0)return 0;if(U>=1)return 1;const G=U*U,tt=G*U;return 4*(U<.5?tt:3*(U-G)+tt-.75)})(R))}}return P}}class Mn{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,d,v){const T=new vr(this._properties);for(const P of Object.keys(this._values))T._values[P]=this._values[P].possiblyEvaluate(o,d,v);return T}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class ri{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return St(this._values[o].value)}setValue(o,d){this._values[o]=new ue(this._values[o].property,d===null?void 0:St(d))}serialize(){const o={};for(const d of Object.keys(this._values)){const v=this.getValue(d);v!==void 0&&(o[d]=v)}return o}possiblyEvaluate(o,d,v){const T=new vr(this._properties);for(const P of Object.keys(this._values))T._values[P]=this._values[P].possiblyEvaluate(o,d,v);return T}}class Mi{constructor(o,d,v){this.property=o,this.value=d,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,d,v,T){return this.property.evaluate(this.value,this.parameters,o,d,v,T)}}class vr{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class sn{constructor(o){this.specification=o}possiblyEvaluate(o,d){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(d)}interpolate(o,d,v){const T=us[this.specification.type];return T?T(o,d,v):o}}class Je{constructor(o,d){this.specification=o,this.overrides=d}possiblyEvaluate(o,d,v,T){return new Mi(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(d,null,{},v,T)}:o.expression,d)}interpolate(o,d,v){if(o.value.kind!=="constant"||d.value.kind!=="constant")return o;if(o.value.value===void 0||d.value.value===void 0)return new Mi(this,{kind:"constant",value:void 0},o.parameters);const T=us[this.specification.type];if(T){const P=T(o.value.value,d.value.value,v);return new Mi(this,{kind:"constant",value:P},o.parameters)}return o}evaluate(o,d,v,T,P,k){return o.kind==="constant"?o.value:o.evaluate(d,v,T,P,k)}}class vi extends Je{possiblyEvaluate(o,d,v,T){if(o.value===void 0)return new Mi(this,{kind:"constant",value:void 0},d);if(o.expression.kind==="constant"){const P=o.expression.evaluate(d,null,{},v,T),k=o.property.specification.type==="resolvedImage"&&typeof P!="string"?P.name:P,R=this._calculate(k,k,k,d);return new Mi(this,{kind:"constant",value:R},d)}if(o.expression.kind==="camera"){const P=this._calculate(o.expression.evaluate({zoom:d.zoom-1}),o.expression.evaluate({zoom:d.zoom}),o.expression.evaluate({zoom:d.zoom+1}),d);return new Mi(this,{kind:"constant",value:P},d)}return new Mi(this,o.expression,d)}evaluate(o,d,v,T,P,k){if(o.kind==="source"){const R=o.evaluate(d,v,T,P,k);return this._calculate(R,R,R,d)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(d.zoom)-1},v,T),o.evaluate({zoom:Math.floor(d.zoom)},v,T),o.evaluate({zoom:Math.floor(d.zoom)+1},v,T),d):o.value}_calculate(o,d,v,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:o,to:d}:{from:v,to:d}}interpolate(o){return o}}class ui{constructor(o){this.specification=o}possiblyEvaluate(o,d,v,T){if(o.value!==void 0){if(o.expression.kind==="constant"){const P=o.expression.evaluate(d,null,{},v,T);return this._calculate(P,P,P,d)}return this._calculate(o.expression.evaluate(new Ft(Math.floor(d.zoom-1),d)),o.expression.evaluate(new Ft(Math.floor(d.zoom),d)),o.expression.evaluate(new Ft(Math.floor(d.zoom+1),d)),d)}}_calculate(o,d,v,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:o,to:d}:{from:v,to:d}}interpolate(o){return o}}class Io{constructor(o){this.specification=o}possiblyEvaluate(o,d,v,T){return!!o.expression.evaluate(d,null,{},v,T)}interpolate(){return!1}}class bi{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in o){const v=o[d];v.specification.overridable&&this.overridableProperties.push(d);const T=this.defaultPropertyValues[d]=new ue(v,void 0),P=this.defaultTransitionablePropertyValues[d]=new ve(v);this.defaultTransitioningPropertyValues[d]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=T.possiblyEvaluate({})}}}Qe("DataDrivenProperty",Je),Qe("DataConstantProperty",sn),Qe("CrossFadedDataDrivenProperty",vi),Qe("CrossFadedProperty",ui),Qe("ColorRampProperty",Io);const Eu="-transition";class Kr extends Rn{constructor(o,d){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),d.layout&&(this._unevaluatedLayout=new ri(d.layout)),d.paint)){this._transitionablePaint=new Le(d.paint);for(const v in o.paint)this.setPaintProperty(v,o.paint[v],{validate:!1});for(const v in o.layout)this.setLayoutProperty(v,o.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vr(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,d,v={}){d!=null&&this._validate(_h,`layers.${this.id}.layout.${o}`,o,d,v)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,d):this.visibility=d)}getPaintProperty(o){return o.endsWith(Eu)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,d,v={}){if(d!=null&&this._validate(Ol,`layers.${this.id}.paint.${o}`,o,d,v))return!1;if(o.endsWith(Eu))return this._transitionablePaint.setTransition(o.slice(0,-11),d||void 0),!1;{const T=this._transitionablePaint._values[o],P=T.property.specification["property-type"]==="cross-faded-data-driven",k=T.value.isDataDriven(),R=T.value;this._transitionablePaint.setValue(o,d),this._handleSpecialPaintPropertyUpdate(o);const U=this._transitionablePaint._values[o].value;return U.isDataDriven()||k||P||this._handleOverridablePaintPropertyUpdate(o,R,U)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,d,v){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,d){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,d)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),wt(o,((d,v)=>!(d===void 0||v==="layout"&&!Object.keys(d).length||v==="paint"&&!Object.keys(d).length)))}_validate(o,d,v,T,P={}){return(!P||P.validate!==!1)&&ro(this,o.call(Po,{key:d,layerType:this.type,objectKey:v,value:T,styleSpec:ge,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const d=this.paint.get(o);if(d instanceof Mi&&vu(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const Rc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ki{constructor(o,d){this._structArray=o,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ei{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,d){return o._trim(),d&&(o.isTransferred=!0,d.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const d=Object.create(this.prototype);return d.arrayBuffer=o.arrayBuffer,d.length=o.length,d.capacity=o.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ri(h,o=1){let d=0,v=0;return{members:h.map((T=>{const P=Rc[T.type].BYTES_PER_ELEMENT,k=d=Il(d,Math.max(o,P)),R=T.components||1;return v=Math.max(v,P),d+=P*R,{name:T.name,type:T.type,components:R,offset:k}})),size:Il(d,Math.max(v,o)),alignment:o}}function Il(h,o){return Math.ceil(h/o)*o}class cl extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d){const v=this.length;return this.resize(v+1),this.emplace(v,o,d)}emplace(o,d,v){const T=2*o;return this.int16[T+0]=d,this.int16[T+1]=v,o}}cl.prototype.bytesPerElement=4,Qe("StructArrayLayout2i4",cl);class hl extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,o,d,v)}emplace(o,d,v,T){const P=3*o;return this.int16[P+0]=d,this.int16[P+1]=v,this.int16[P+2]=T,o}}hl.prototype.bytesPerElement=6,Qe("StructArrayLayout3i6",hl);class hs extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,v,T){const P=this.length;return this.resize(P+1),this.emplace(P,o,d,v,T)}emplace(o,d,v,T,P){const k=4*o;return this.int16[k+0]=d,this.int16[k+1]=v,this.int16[k+2]=T,this.int16[k+3]=P,o}}hs.prototype.bytesPerElement=8,Qe("StructArrayLayout4i8",hs);class so extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,v,T,P,k){const R=this.length;return this.resize(R+1),this.emplace(R,o,d,v,T,P,k)}emplace(o,d,v,T,P,k,R){const U=6*o;return this.int16[U+0]=d,this.int16[U+1]=v,this.int16[U+2]=T,this.int16[U+3]=P,this.int16[U+4]=k,this.int16[U+5]=R,o}}so.prototype.bytesPerElement=12,Qe("StructArrayLayout2i4i12",so);class zl extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,v,T,P,k){const R=this.length;return this.resize(R+1),this.emplace(R,o,d,v,T,P,k)}emplace(o,d,v,T,P,k,R){const U=4*o,G=8*o;return this.int16[U+0]=d,this.int16[U+1]=v,this.uint8[G+4]=T,this.uint8[G+5]=P,this.uint8[G+6]=k,this.uint8[G+7]=R,o}}zl.prototype.bytesPerElement=8,Qe("StructArrayLayout2i4ub8",zl);class qs extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d){const v=this.length;return this.resize(v+1),this.emplace(v,o,d)}emplace(o,d,v){const T=2*o;return this.float32[T+0]=d,this.float32[T+1]=v,o}}qs.prototype.bytesPerElement=8,Qe("StructArrayLayout2f8",qs);class vh extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,v,T,P,k,R,U,G,tt){const ot=this.length;return this.resize(ot+1),this.emplace(ot,o,d,v,T,P,k,R,U,G,tt)}emplace(o,d,v,T,P,k,R,U,G,tt,ot){const ht=10*o;return this.uint16[ht+0]=d,this.uint16[ht+1]=v,this.uint16[ht+2]=T,this.uint16[ht+3]=P,this.uint16[ht+4]=k,this.uint16[ht+5]=R,this.uint16[ht+6]=U,this.uint16[ht+7]=G,this.uint16[ht+8]=tt,this.uint16[ht+9]=ot,o}}vh.prototype.bytesPerElement=20,Qe("StructArrayLayout10ui20",vh);class xh extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,v,T,P,k,R,U,G,tt,ot,ht){const gt=this.length;return this.resize(gt+1),this.emplace(gt,o,d,v,T,P,k,R,U,G,tt,ot,ht)}emplace(o,d,v,T,P,k,R,U,G,tt,ot,ht,gt){const _t=12*o;return this.int16[_t+0]=d,this.int16[_t+1]=v,this.int16[_t+2]=T,this.int16[_t+3]=P,this.uint16[_t+4]=k,this.uint16[_t+5]=R,this.uint16[_t+6]=U,this.uint16[_t+7]=G,this.int16[_t+8]=tt,this.int16[_t+9]=ot,this.int16[_t+10]=ht,this.int16[_t+11]=gt,o}}xh.prototype.bytesPerElement=24,Qe("StructArrayLayout4i4ui4i24",xh);class di extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,o,d,v)}emplace(o,d,v,T){const P=3*o;return this.float32[P+0]=d,this.float32[P+1]=v,this.float32[P+2]=T,o}}di.prototype.bytesPerElement=12,Qe("StructArrayLayout3f12",di);class A extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint32[1*o+0]=d,o}}A.prototype.bytesPerElement=4,Qe("StructArrayLayout1ul4",A);class u extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,v,T,P,k,R,U,G){const tt=this.length;return this.resize(tt+1),this.emplace(tt,o,d,v,T,P,k,R,U,G)}emplace(o,d,v,T,P,k,R,U,G,tt){const ot=10*o,ht=5*o;return this.int16[ot+0]=d,this.int16[ot+1]=v,this.int16[ot+2]=T,this.int16[ot+3]=P,this.int16[ot+4]=k,this.int16[ot+5]=R,this.uint32[ht+3]=U,this.uint16[ot+8]=G,this.uint16[ot+9]=tt,o}}u.prototype.bytesPerElement=20,Qe("StructArrayLayout6i1ul2ui20",u);class m extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,v,T,P,k){const R=this.length;return this.resize(R+1),this.emplace(R,o,d,v,T,P,k)}emplace(o,d,v,T,P,k,R){const U=6*o;return this.int16[U+0]=d,this.int16[U+1]=v,this.int16[U+2]=T,this.int16[U+3]=P,this.int16[U+4]=k,this.int16[U+5]=R,o}}m.prototype.bytesPerElement=12,Qe("StructArrayLayout2i2i2i12",m);class b extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,v,T,P){const k=this.length;return this.resize(k+1),this.emplace(k,o,d,v,T,P)}emplace(o,d,v,T,P,k){const R=4*o,U=8*o;return this.float32[R+0]=d,this.float32[R+1]=v,this.float32[R+2]=T,this.int16[U+6]=P,this.int16[U+7]=k,o}}b.prototype.bytesPerElement=16,Qe("StructArrayLayout2f1f2i16",b);class M extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,v,T){const P=this.length;return this.resize(P+1),this.emplace(P,o,d,v,T)}emplace(o,d,v,T,P){const k=12*o,R=3*o;return this.uint8[k+0]=d,this.uint8[k+1]=v,this.float32[R+1]=T,this.float32[R+2]=P,o}}M.prototype.bytesPerElement=12,Qe("StructArrayLayout2ub2f12",M);class C extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,o,d,v)}emplace(o,d,v,T){const P=3*o;return this.uint16[P+0]=d,this.uint16[P+1]=v,this.uint16[P+2]=T,o}}C.prototype.bytesPerElement=6,Qe("StructArrayLayout3ui6",C);class N extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,v,T,P,k,R,U,G,tt,ot,ht,gt,_t,Dt,Ut,Ht){const ne=this.length;return this.resize(ne+1),this.emplace(ne,o,d,v,T,P,k,R,U,G,tt,ot,ht,gt,_t,Dt,Ut,Ht)}emplace(o,d,v,T,P,k,R,U,G,tt,ot,ht,gt,_t,Dt,Ut,Ht,ne){const Kt=24*o,ae=12*o,oe=48*o;return this.int16[Kt+0]=d,this.int16[Kt+1]=v,this.uint16[Kt+2]=T,this.uint16[Kt+3]=P,this.uint32[ae+2]=k,this.uint32[ae+3]=R,this.uint32[ae+4]=U,this.uint16[Kt+10]=G,this.uint16[Kt+11]=tt,this.uint16[Kt+12]=ot,this.float32[ae+7]=ht,this.float32[ae+8]=gt,this.uint8[oe+36]=_t,this.uint8[oe+37]=Dt,this.uint8[oe+38]=Ut,this.uint32[ae+10]=Ht,this.int16[Kt+22]=ne,o}}N.prototype.bytesPerElement=48,Qe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",N);class j extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,v,T,P,k,R,U,G,tt,ot,ht,gt,_t,Dt,Ut,Ht,ne,Kt,ae,oe,De,He,mn,nn,tn,Ge,un){const We=this.length;return this.resize(We+1),this.emplace(We,o,d,v,T,P,k,R,U,G,tt,ot,ht,gt,_t,Dt,Ut,Ht,ne,Kt,ae,oe,De,He,mn,nn,tn,Ge,un)}emplace(o,d,v,T,P,k,R,U,G,tt,ot,ht,gt,_t,Dt,Ut,Ht,ne,Kt,ae,oe,De,He,mn,nn,tn,Ge,un,We){const $e=32*o,xn=16*o;return this.int16[$e+0]=d,this.int16[$e+1]=v,this.int16[$e+2]=T,this.int16[$e+3]=P,this.int16[$e+4]=k,this.int16[$e+5]=R,this.int16[$e+6]=U,this.int16[$e+7]=G,this.uint16[$e+8]=tt,this.uint16[$e+9]=ot,this.uint16[$e+10]=ht,this.uint16[$e+11]=gt,this.uint16[$e+12]=_t,this.uint16[$e+13]=Dt,this.uint16[$e+14]=Ut,this.uint16[$e+15]=Ht,this.uint16[$e+16]=ne,this.uint16[$e+17]=Kt,this.uint16[$e+18]=ae,this.uint16[$e+19]=oe,this.uint16[$e+20]=De,this.uint16[$e+21]=He,this.uint16[$e+22]=mn,this.uint32[xn+12]=nn,this.float32[xn+13]=tn,this.float32[xn+14]=Ge,this.uint16[$e+30]=un,this.uint16[$e+31]=We,o}}j.prototype.bytesPerElement=64,Qe("StructArrayLayout8i15ui1ul2f2ui64",j);class H extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.float32[1*o+0]=d,o}}H.prototype.bytesPerElement=4,Qe("StructArrayLayout1f4",H);class Q extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,o,d,v)}emplace(o,d,v,T){const P=3*o;return this.uint16[6*o+0]=d,this.float32[P+1]=v,this.float32[P+2]=T,o}}Q.prototype.bytesPerElement=12,Qe("StructArrayLayout1ui2f12",Q);class et extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,v){const T=this.length;return this.resize(T+1),this.emplace(T,o,d,v)}emplace(o,d,v,T){const P=4*o;return this.uint32[2*o+0]=d,this.uint16[P+2]=v,this.uint16[P+3]=T,o}}et.prototype.bytesPerElement=8,Qe("StructArrayLayout1ul2ui8",et);class rt extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d){const v=this.length;return this.resize(v+1),this.emplace(v,o,d)}emplace(o,d,v){const T=2*o;return this.uint16[T+0]=d,this.uint16[T+1]=v,o}}rt.prototype.bytesPerElement=4,Qe("StructArrayLayout2ui4",rt);class pt extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint16[1*o+0]=d,o}}pt.prototype.bytesPerElement=2,Qe("StructArrayLayout1ui2",pt);class Ot extends Ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,v,T){const P=this.length;return this.resize(P+1),this.emplace(P,o,d,v,T)}emplace(o,d,v,T,P){const k=4*o;return this.float32[k+0]=d,this.float32[k+1]=v,this.float32[k+2]=T,this.float32[k+3]=P,o}}Ot.prototype.bytesPerElement=16,Qe("StructArrayLayout4f16",Ot);class kt extends Ki{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new O(this.anchorPointX,this.anchorPointY)}}kt.prototype.size=20;class Rt extends u{get(o){return new kt(this,o)}}Qe("CollisionBoxArray",Rt);class Pt extends Ki{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Pt.prototype.size=48;class Qt extends N{get(o){return new Pt(this,o)}}Qe("PlacedSymbolArray",Qt);class fe extends Ki{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}fe.prototype.size=64;class Vt extends j{get(o){return new fe(this,o)}}Qe("SymbolInstanceArray",Vt);class te extends H{getoffsetX(o){return this.float32[1*o+0]}}Qe("GlyphOffsetArray",te);class me extends hl{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}Qe("SymbolLineVertexArray",me);class xe extends Ki{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}xe.prototype.size=12;class Pe extends Q{get(o){return new xe(this,o)}}Qe("TextAnchorOffsetArray",Pe);class Ve extends Ki{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ve.prototype.size=8;class ze extends et{get(o){return new Ve(this,o)}}Qe("FeatureIndexArray",ze);class qe extends cl{}class dn extends cl{}class ai extends cl{}class Ye extends so{}class vn extends zl{}class pn extends qs{}class Vi extends vh{}class Zn extends xh{}class Fn extends di{}class ei extends A{}class dr extends m{}class Zi extends M{}class Ra extends C{}class xr extends rt{}const qr=Ri([{name:"a_pos",components:2,type:"Int16"}],4),{members:ha}=qr;class er{constructor(o=[]){this.segments=o}prepareSegment(o,d,v,T){let P=this.segments[this.segments.length-1];return o>er.MAX_VERTEX_ARRAY_LENGTH&&pe(`Max vertices per segment is ${er.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!P||P.vertexLength+o>er.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==T)&&(P={vertexOffset:d.length,primitiveOffset:v.length,vertexLength:0,primitiveLength:0},T!==void 0&&(P.sortKey=T),this.segments.push(P)),P}get(){return this.segments}destroy(){for(const o of this.segments)for(const d in o.vaos)o.vaos[d].destroy()}static simpleSegment(o,d,v,T){return new er([{vertexOffset:o,primitiveOffset:d,vertexLength:v,primitiveLength:T,vaos:{},sortKey:0}])}}function zo(h,o){return 256*(h=st(Math.floor(h),0,255))+st(Math.floor(o),0,255)}er.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qe("SegmentVector",er);const Xa=Ri([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ps={exports:{}},fl={exports:{}};fl.exports=function(h,o){var d,v,T,P,k,R,U,G;for(v=h.length-(d=3&h.length),T=o,k=3432918353,R=461845907,G=0;G<v;)U=255&h.charCodeAt(G)|(255&h.charCodeAt(++G))<<8|(255&h.charCodeAt(++G))<<16|(255&h.charCodeAt(++G))<<24,++G,T=27492+(65535&(P=5*(65535&(T=(T^=U=(65535&(U=(U=(65535&U)*k+(((U>>>16)*k&65535)<<16)&4294967295)<<15|U>>>17))*R+(((U>>>16)*R&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(P>>>16)&65535)<<16);switch(U=0,d){case 3:U^=(255&h.charCodeAt(G+2))<<16;case 2:U^=(255&h.charCodeAt(G+1))<<8;case 1:T^=U=(65535&(U=(U=(65535&(U^=255&h.charCodeAt(G)))*k+(((U>>>16)*k&65535)<<16)&4294967295)<<15|U>>>17))*R+(((U>>>16)*R&65535)<<16)&4294967295}return T^=h.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0};var Au=fl.exports,Na={exports:{}};Na.exports=function(h,o){for(var d,v=h.length,T=o^v,P=0;v>=4;)d=1540483477*(65535&(d=255&h.charCodeAt(P)|(255&h.charCodeAt(++P))<<8|(255&h.charCodeAt(++P))<<16|(255&h.charCodeAt(++P))<<24))+((1540483477*(d>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),v-=4,++P;switch(v){case 3:T^=(255&h.charCodeAt(P+2))<<16;case 2:T^=(255&h.charCodeAt(P+1))<<8;case 1:T=1540483477*(65535&(T^=255&h.charCodeAt(P)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0};var Qr=Au,wa=Na.exports;Ps.exports=Qr,Ps.exports.murmur3=Qr,Ps.exports.murmur2=wa;var Cu=y(Ps.exports);class Lr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,d,v,T){this.ids.push(Er(o)),this.positions.push(d,v,T)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=Er(o);let v=0,T=this.ids.length-1;for(;v<T;){const k=v+T>>1;this.ids[k]>=d?T=k:v=k+1}const P=[];for(;this.ids[v]===d;)P.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return P}static serialize(o,d){const v=new Float64Array(o.ids),T=new Uint32Array(o.positions);return Ka(v,T,0,v.length-1),d&&d.push(v.buffer,T.buffer),{ids:v,positions:T}}static deserialize(o){const d=new Lr;return d.ids=o.ids,d.positions=o.positions,d.indexed=!0,d}}function Er(h){const o=+h;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:Cu(String(h))}function Ka(h,o,d,v){for(;d<v;){const T=h[d+v>>1];let P=d-1,k=v+1;for(;;){do P++;while(h[P]<T);do k--;while(h[k]>T);if(P>=k)break;Rr(h,P,k),Rr(o,3*P,3*k),Rr(o,3*P+1,3*k+1),Rr(o,3*P+2,3*k+2)}k-d<v-k?(Ka(h,o,d,k),d=k+1):(Ka(h,o,k+1,v),v=k)}}function Rr(h,o,d){const v=h[o];h[o]=h[d],h[d]=v}Qe("FeaturePositionMap",Lr);class nu{constructor(o,d){this.gl=o.gl,this.location=d}}class Nc extends nu{constructor(o,d){super(o,d),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class Hs extends nu{constructor(o,d){super(o,d),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class oo extends nu{constructor(o,d){super(o,d),this.current=Un.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const Pu=new Float32Array(16);function bh(h){return[zo(255*h.r,255*h.g),zo(255*h.b,255*h.a)]}class dl{constructor(o,d,v){this.value=o,this.uniformNames=d.map((T=>`u_${T}`)),this.type=v}setUniform(o,d,v){o.set(v.constantOr(this.value))}getBinding(o,d,v){return this.type==="color"?new oo(o,d):new Nc(o,d)}}class Zs{constructor(o,d){this.uniformNames=d.map((v=>`u_${v}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=o.tlbr}setUniform(o,d,v,T){const P=T==="u_pattern_to"?this.patternTo:T==="u_pattern_from"?this.patternFrom:T==="u_pixel_ratio_to"?this.pixelRatioTo:T==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&o.set(P)}getBinding(o,d,v){return v.substr(0,9)==="u_pattern"?new Hs(o,d):new Nc(o,d)}}class Hr{constructor(o,d,v,T){this.expression=o,this.type=v,this.maxValue=0,this.paintVertexAttributes=d.map((P=>({name:`a_${P}`,type:"Float32",components:v==="color"?2:1,offset:0}))),this.paintVertexArray=new T}populatePaintArray(o,d,v,T,P){const k=this.paintVertexArray.length,R=this.expression.evaluate(new Ft(0),d,{},T,[],P);this.paintVertexArray.resize(o),this._setPaintValue(k,o,R)}updatePaintArray(o,d,v,T){const P=this.expression.evaluate({zoom:0},v,T);this._setPaintValue(o,d,P)}_setPaintValue(o,d,v){if(this.type==="color"){const T=bh(v);for(let P=o;P<d;P++)this.paintVertexArray.emplace(P,T[0],T[1])}else{for(let T=o;T<d;T++)this.paintVertexArray.emplace(T,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ni{constructor(o,d,v,T,P,k){this.expression=o,this.uniformNames=d.map((R=>`u_${R}_t`)),this.type=v,this.useIntegerZoom=T,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=d.map((R=>({name:`a_${R}`,type:"Float32",components:v==="color"?4:2,offset:0}))),this.paintVertexArray=new k}populatePaintArray(o,d,v,T,P){const k=this.expression.evaluate(new Ft(this.zoom),d,{},T,[],P),R=this.expression.evaluate(new Ft(this.zoom+1),d,{},T,[],P),U=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(U,o,k,R)}updatePaintArray(o,d,v,T){const P=this.expression.evaluate({zoom:this.zoom},v,T),k=this.expression.evaluate({zoom:this.zoom+1},v,T);this._setPaintValue(o,d,P,k)}_setPaintValue(o,d,v,T){if(this.type==="color"){const P=bh(v),k=bh(T);for(let R=o;R<d;R++)this.paintVertexArray.emplace(R,P[0],P[1],k[0],k[1])}else{for(let P=o;P<d;P++)this.paintVertexArray.emplace(P,v,T);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(T))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,d){const v=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,T=st(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);o.set(T)}getBinding(o,d,v){return new Nc(o,d)}}class lo{constructor(o,d,v,T,P,k){this.expression=o,this.type=d,this.useIntegerZoom=v,this.zoom=T,this.layerId=k,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P}populatePaintArray(o,d,v){const T=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(T,o,d.patterns&&d.patterns[this.layerId],v)}updatePaintArray(o,d,v,T,P){this._setPaintValues(o,d,v.patterns&&v.patterns[this.layerId],P)}_setPaintValues(o,d,v,T){if(!T||!v)return;const{min:P,mid:k,max:R}=v,U=T[P],G=T[k],tt=T[R];if(U&&G&&tt)for(let ot=o;ot<d;ot++)this.zoomInPaintVertexArray.emplace(ot,G.tl[0],G.tl[1],G.br[0],G.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],G.pixelRatio,U.pixelRatio),this.zoomOutPaintVertexArray.emplace(ot,G.tl[0],G.tl[1],G.br[0],G.br[1],tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],G.pixelRatio,tt.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Xa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Xa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class pl{constructor(o,d,v){this.binders={},this._buffers=[];const T=[];for(const P in o.paint._values){if(!v(P))continue;const k=o.paint.get(P);if(!(k instanceof Mi&&vu(k.property.specification)))continue;const R=pr(P,o.type),U=k.value,G=k.property.specification.type,tt=k.property.useIntegerZoom,ot=k.property.specification["property-type"],ht=ot==="cross-faded"||ot==="cross-faded-data-driven";if(U.kind==="constant")this.binders[P]=ht?new Zs(U.value,R):new dl(U.value,R,G),T.push(`/u_${P}`);else if(U.kind==="source"||ht){const gt=Sa(P,G,"source");this.binders[P]=ht?new lo(U,G,tt,d,gt,o.id):new Hr(U,R,G,gt),T.push(`/a_${P}`)}else{const gt=Sa(P,G,"composite");this.binders[P]=new Ni(U,R,G,tt,d,gt),T.push(`/z_${P}`)}}this.cacheKey=T.sort().join("")}getMaxValue(o){const d=this.binders[o];return d instanceof Hr||d instanceof Ni?d.maxValue:0}populatePaintArrays(o,d,v,T,P){for(const k in this.binders){const R=this.binders[k];(R instanceof Hr||R instanceof Ni||R instanceof lo)&&R.populatePaintArray(o,d,v,T,P)}}setConstantPatternPositions(o,d){for(const v in this.binders){const T=this.binders[v];T instanceof Zs&&T.setConstantPatternPositions(o,d)}}updatePaintArrays(o,d,v,T,P){let k=!1;for(const R in o){const U=d.getPositions(R);for(const G of U){const tt=v.feature(G.index);for(const ot in this.binders){const ht=this.binders[ot];if((ht instanceof Hr||ht instanceof Ni||ht instanceof lo)&&ht.expression.isStateDependent===!0){const gt=T.paint.get(ot);ht.expression=gt.value,ht.updatePaintArray(G.start,G.end,tt,o[R],P),k=!0}}}}return k}defines(){const o=[];for(const d in this.binders){const v=this.binders[d];(v instanceof dl||v instanceof Zs)&&o.push(...v.uniformNames.map((T=>`#define HAS_UNIFORM_${T}`)))}return o}getBinderAttributes(){const o=[];for(const d in this.binders){const v=this.binders[d];if(v instanceof Hr||v instanceof Ni)for(let T=0;T<v.paintVertexAttributes.length;T++)o.push(v.paintVertexAttributes[T].name);else if(v instanceof lo)for(let T=0;T<Xa.members.length;T++)o.push(Xa.members[T].name)}return o}getBinderUniforms(){const o=[];for(const d in this.binders){const v=this.binders[d];if(v instanceof dl||v instanceof Zs||v instanceof Ni)for(const T of v.uniformNames)o.push(T)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,d){const v=[];for(const T in this.binders){const P=this.binders[T];if(P instanceof dl||P instanceof Zs||P instanceof Ni){for(const k of P.uniformNames)if(d[k]){const R=P.getBinding(o,d[k],k);v.push({name:k,property:T,binding:R})}}}return v}setUniforms(o,d,v,T){for(const{name:P,property:k,binding:R}of d)this.binders[k].setUniform(R,T,v.get(k),P)}updatePaintBuffers(o){this._buffers=[];for(const d in this.binders){const v=this.binders[d];if(o&&v instanceof lo){const T=o.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;T&&this._buffers.push(T)}else(v instanceof Hr||v instanceof Ni)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(o){for(const d in this.binders){const v=this.binders[d];(v instanceof Hr||v instanceof Ni||v instanceof lo)&&v.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const d=this.binders[o];(d instanceof Hr||d instanceof Ni||d instanceof lo)&&d.destroy()}}}class Bn{constructor(o,d,v=(()=>!0)){this.programConfigurations={};for(const T of o)this.programConfigurations[T.id]=new pl(T,d,v);this.needsUpload=!1,this._featureMap=new Lr,this._bufferOffset=0}populatePaintArrays(o,d,v,T,P,k){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(o,d,T,P,k);d.id!==void 0&&this._featureMap.add(d.id,v,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,d,v,T){for(const P of v)this.needsUpload=this.programConfigurations[P.id].updatePaintArrays(o,this._featureMap,d,P,T)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function pr(h,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${o}-`,"").replace(/-/g,"_")]}function Sa(h,o,d){const v={color:{source:qs,composite:Ot},number:{source:H,composite:qs}},T=(function(P){return{"line-pattern":{source:Vi,composite:Vi},"fill-pattern":{source:Vi,composite:Vi},"fill-extrusion-pattern":{source:Vi,composite:Vi}}[P]})(h);return T&&T[d]||v[o][d]}Qe("ConstantBinder",dl),Qe("CrossFadedConstantBinder",Zs),Qe("SourceExpressionBinder",Hr),Qe("CrossFadedCompositeBinder",lo),Qe("CompositeExpressionBinder",Ni),Qe("ProgramConfiguration",pl,{omit:["_buffers"]}),Qe("ProgramConfigurationSet",Bn);const Nr=8192,Bc=Math.pow(2,14)-1,jc=-Bc-1;function ku(h){const o=Nr/h.extent,d=h.loadGeometry();for(let v=0;v<d.length;v++){const T=d[v];for(let P=0;P<T.length;P++){const k=T[P],R=Math.round(k.x*o),U=Math.round(k.y*o);k.x=st(R,jc,Bc),k.y=st(U,jc,Bc),(R<k.x||R>k.x+1||U<k.y||U>k.y+1)&&pe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function iu(h,o){return{type:h.type,id:h.id,properties:h.properties,geometry:o?ku(h):[]}}function fc(h,o,d,v,T){h.emplaceBack(2*o+(v+1)/2,2*d+(T+1)/2)}class _g{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new dn,this.indexArray=new Ra,this.segments=new er,this.programConfigurations=new Bn(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,v){const T=this.layers[0],P=[];let k=null,R=!1;T.type==="circle"&&(k=T.layout.get("circle-sort-key"),R=!k.isConstant());for(const{feature:U,id:G,index:tt,sourceLayerIndex:ot}of o){const ht=this.layers[0]._featureFilter.needGeometry,gt=iu(U,ht);if(!this.layers[0]._featureFilter.filter(new Ft(this.zoom),gt,v))continue;const _t=R?k.evaluate(gt,{},v):void 0,Dt={id:G,properties:U.properties,type:U.type,sourceLayerIndex:ot,index:tt,geometry:ht?gt.geometry:ku(U),patterns:{},sortKey:_t};P.push(Dt)}R&&P.sort(((U,G)=>U.sortKey-G.sortKey));for(const U of P){const{geometry:G,index:tt,sourceLayerIndex:ot}=U,ht=o[tt].feature;this.addFeature(U,G,tt,v),d.featureIndex.insert(ht,G,tt,ot,this.index)}}update(o,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,ha),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,d,v,T){for(const P of d)for(const k of P){const R=k.x,U=k.y;if(R<0||R>=Nr||U<0||U>=Nr)continue;const G=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),tt=G.vertexLength;fc(this.layoutVertexArray,R,U,-1,-1),fc(this.layoutVertexArray,R,U,1,-1),fc(this.layoutVertexArray,R,U,1,1),fc(this.layoutVertexArray,R,U,-1,1),this.indexArray.emplaceBack(tt,tt+1,tt+2),this.indexArray.emplaceBack(tt,tt+3,tt+2),G.vertexLength+=4,G.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,v,{},T)}}function Jr(h,o){for(let d=0;d<h.length;d++)if(Ba(o,h[d]))return!0;for(let d=0;d<o.length;d++)if(Ba(h,o[d]))return!0;return!!Ip(h,o)}function vg(h,o,d){return!!Ba(h,o)||!!md(o,h,d)}function Dp(h,o){if(h.length===1)return Lp(o,h[0]);for(let d=0;d<o.length;d++){const v=o[d];for(let T=0;T<v.length;T++)if(Ba(h,v[T]))return!0}for(let d=0;d<h.length;d++)if(Lp(o,h[d]))return!0;for(let d=0;d<o.length;d++)if(Ip(h,o[d]))return!0;return!1}function N_(h,o,d){if(h.length>1){if(Ip(h,o))return!0;for(let v=0;v<o.length;v++)if(md(o[v],h,d))return!0}for(let v=0;v<h.length;v++)if(md(h[v],o,d))return!0;return!1}function Ip(h,o){if(h.length===0||o.length===0)return!1;for(let d=0;d<h.length-1;d++){const v=h[d],T=h[d+1];for(let P=0;P<o.length-1;P++)if(Mb(v,T,o[P],o[P+1]))return!0}return!1}function Mb(h,o,d,v){return Te(h,d,v)!==Te(o,d,v)&&Te(h,o,d)!==Te(h,o,v)}function md(h,o,d){const v=d*d;if(o.length===1)return h.distSqr(o[0])<v;for(let T=1;T<o.length;T++)if(zp(h,o[T-1],o[T])<v)return!0;return!1}function zp(h,o,d){const v=o.distSqr(d);if(v===0)return h.distSqr(o);const T=((h.x-o.x)*(d.x-o.x)+(h.y-o.y)*(d.y-o.y))/v;return h.distSqr(T<0?o:T>1?d:d.sub(o)._mult(T)._add(o))}function Lp(h,o){let d,v,T,P=!1;for(let k=0;k<h.length;k++){d=h[k];for(let R=0,U=d.length-1;R<d.length;U=R++)v=d[R],T=d[U],v.y>o.y!=T.y>o.y&&o.x<(T.x-v.x)*(o.y-v.y)/(T.y-v.y)+v.x&&(P=!P)}return P}function Ba(h,o){let d=!1;for(let v=0,T=h.length-1;v<h.length;T=v++){const P=h[v],k=h[T];P.y>o.y!=k.y>o.y&&o.x<(k.x-P.x)*(o.y-P.y)/(k.y-P.y)+P.x&&(d=!d)}return d}function Ta(h,o,d){const v=d[0],T=d[2];if(h.x<v.x&&o.x<v.x||h.x>T.x&&o.x>T.x||h.y<v.y&&o.y<v.y||h.y>T.y&&o.y>T.y)return!1;const P=Te(h,o,d[0]);return P!==Te(h,o,d[1])||P!==Te(h,o,d[2])||P!==Te(h,o,d[3])}function Fc(h,o,d){const v=o.paint.get(h).value;return v.kind==="constant"?v.value:d.programConfigurations.get(o.id).getMaxValue(h)}function Uc(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function wh(h,o,d,v,T){if(!o[0]&&!o[1])return h;const P=O.convert(o)._mult(T);d==="viewport"&&P._rotate(-v);const k=[];for(let R=0;R<h.length;R++)k.push(h[R].sub(P));return k}let Rp,Ou;Qe("CircleBucket",_g,{omit:["layers"]});var Np={get paint(){return Ou=Ou||new bi({"circle-radius":new Je(ge.paint_circle["circle-radius"]),"circle-color":new Je(ge.paint_circle["circle-color"]),"circle-blur":new Je(ge.paint_circle["circle-blur"]),"circle-opacity":new Je(ge.paint_circle["circle-opacity"]),"circle-translate":new sn(ge.paint_circle["circle-translate"]),"circle-translate-anchor":new sn(ge.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new sn(ge.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new sn(ge.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Je(ge.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Je(ge.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Je(ge.paint_circle["circle-stroke-opacity"])})},get layout(){return Rp=Rp||new bi({"circle-sort-key":new Je(ge.layout_circle["circle-sort-key"])})}},fs=1e-6,Vc=typeof Float32Array<"u"?Float32Array:Array;function Bp(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function xg(h,o,d){var v=o[0],T=o[1],P=o[2],k=o[3],R=o[4],U=o[5],G=o[6],tt=o[7],ot=o[8],ht=o[9],gt=o[10],_t=o[11],Dt=o[12],Ut=o[13],Ht=o[14],ne=o[15],Kt=d[0],ae=d[1],oe=d[2],De=d[3];return h[0]=Kt*v+ae*R+oe*ot+De*Dt,h[1]=Kt*T+ae*U+oe*ht+De*Ut,h[2]=Kt*P+ae*G+oe*gt+De*Ht,h[3]=Kt*k+ae*tt+oe*_t+De*ne,h[4]=(Kt=d[4])*v+(ae=d[5])*R+(oe=d[6])*ot+(De=d[7])*Dt,h[5]=Kt*T+ae*U+oe*ht+De*Ut,h[6]=Kt*P+ae*G+oe*gt+De*Ht,h[7]=Kt*k+ae*tt+oe*_t+De*ne,h[8]=(Kt=d[8])*v+(ae=d[9])*R+(oe=d[10])*ot+(De=d[11])*Dt,h[9]=Kt*T+ae*U+oe*ht+De*Ut,h[10]=Kt*P+ae*G+oe*gt+De*Ht,h[11]=Kt*k+ae*tt+oe*_t+De*ne,h[12]=(Kt=d[12])*v+(ae=d[13])*R+(oe=d[14])*ot+(De=d[15])*Dt,h[13]=Kt*T+ae*U+oe*ht+De*Ut,h[14]=Kt*P+ae*G+oe*gt+De*Ht,h[15]=Kt*k+ae*tt+oe*_t+De*ne,h}Math.hypot||(Math.hypot=function(){for(var h=0,o=arguments.length;o--;)h+=arguments[o]*arguments[o];return Math.sqrt(h)});var yf,B_=xg;function gd(h,o,d){var v=o[0],T=o[1],P=o[2],k=o[3];return h[0]=d[0]*v+d[4]*T+d[8]*P+d[12]*k,h[1]=d[1]*v+d[5]*T+d[9]*P+d[13]*k,h[2]=d[2]*v+d[6]*T+d[10]*P+d[14]*k,h[3]=d[3]*v+d[7]*T+d[11]*P+d[15]*k,h}yf=new Vc(4),Vc!=Float32Array&&(yf[0]=0,yf[1]=0,yf[2]=0,yf[3]=0);class j_ extends Kr{constructor(o){super(o,Np)}createBucket(o){return new _g(o)}queryRadius(o){const d=o;return Fc("circle-radius",this,d)+Fc("circle-stroke-width",this,d)+Uc(this.paint.get("circle-translate"))}queryIntersectsFeature(o,d,v,T,P,k,R,U){const G=wh(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),k.angle,R),tt=this.paint.get("circle-radius").evaluate(d,v)+this.paint.get("circle-stroke-width").evaluate(d,v),ot=this.paint.get("circle-pitch-alignment")==="map",ht=ot?G:(function(_t,Dt){return _t.map((Ut=>jp(Ut,Dt)))})(G,U),gt=ot?tt*R:tt;for(const _t of T)for(const Dt of _t){const Ut=ot?Dt:jp(Dt,U);let Ht=gt;const ne=gd([],[Dt.x,Dt.y,0,1],U);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ht*=ne[3]/k.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ht*=k.cameraToCenterDistance/ne[3]),vg(ht,Ut,Ht))return!0}return!1}}function jp(h,o){const d=gd([],[h.x,h.y,0,1],o);return new O(d[0]/d[3],d[1]/d[3])}class bg extends _g{}let F_;Qe("HeatmapBucket",bg,{omit:["layers"]});var U_={get paint(){return F_=F_||new bi({"heatmap-radius":new Je(ge.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Je(ge.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new sn(ge.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Io(ge.paint_heatmap["heatmap-color"]),"heatmap-opacity":new sn(ge.paint_heatmap["heatmap-opacity"])})}};function Fp(h,{width:o,height:d},v,T){if(T){if(T instanceof Uint8ClampedArray)T=new Uint8Array(T.buffer);else if(T.length!==o*d*v)throw new RangeError(`mismatched image size. expected: ${T.length} but got: ${o*d*v}`)}else T=new Uint8Array(o*d*v);return h.width=o,h.height=d,h.data=T,h}function wg(h,{width:o,height:d},v){if(o===h.width&&d===h.height)return;const T=Fp({},{width:o,height:d},v);yd(h,T,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,o),height:Math.min(h.height,d)},v),h.width=o,h.height=d,h.data=T.data}function yd(h,o,d,v,T,P){if(T.width===0||T.height===0)return o;if(T.width>h.width||T.height>h.height||d.x>h.width-T.width||d.y>h.height-T.height)throw new RangeError("out of range source coordinates for image copy");if(T.width>o.width||T.height>o.height||v.x>o.width-T.width||v.y>o.height-T.height)throw new RangeError("out of range destination coordinates for image copy");const k=h.data,R=o.data;if(k===R)throw new Error("srcData equals dstData, so image is already copied");for(let U=0;U<T.height;U++){const G=((d.y+U)*h.width+d.x)*P,tt=((v.y+U)*o.width+v.x)*P;for(let ot=0;ot<T.width*P;ot++)R[tt+ot]=k[G+ot]}return o}class _f{constructor(o,d){Fp(this,o,1,d)}resize(o){wg(this,o,1)}clone(){return new _f({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,v,T,P){yd(o,d,v,T,P,1)}}class Lo{constructor(o,d){Fp(this,o,4,d)}resize(o){wg(this,o,4)}replace(o,d){d?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,v,T,P){yd(o,d,v,T,P,4)}}function Sg(h){const o={},d=h.resolution||256,v=h.clips?h.clips.length:1,T=h.image||new Lo({width:d,height:v});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const P=(k,R,U)=>{o[h.evaluationKey]=U;const G=h.expression.evaluate(o);T.data[k+R+0]=Math.floor(255*G.r/G.a),T.data[k+R+1]=Math.floor(255*G.g/G.a),T.data[k+R+2]=Math.floor(255*G.b/G.a),T.data[k+R+3]=Math.floor(255*G.a)};if(h.clips)for(let k=0,R=0;k<v;++k,R+=4*d)for(let U=0,G=0;U<d;U++,G+=4){const tt=U/(d-1),{start:ot,end:ht}=h.clips[k];P(R,G,ot*(1-tt)+ht*tt)}else for(let k=0,R=0;k<d;k++,R+=4)P(0,R,k/(d-1));return T}Qe("AlphaImage",_f),Qe("RGBAImage",Lo);class V_ extends Kr{createBucket(o){return new bg(o)}constructor(o){super(o,U_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Sg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Tg;var Eb={get paint(){return Tg=Tg||new bi({"hillshade-illumination-direction":new sn(ge.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new sn(ge.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new sn(ge.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new sn(ge.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new sn(ge.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new sn(ge.paint_hillshade["hillshade-accent-color"])})}};class $_ extends Kr{constructor(o){super(o,Eb)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const vf=Ri([{name:"a_pos",components:2,type:"Int16"}],4),{members:q_}=vf;var xf={exports:{}};function Sh(h,o,d){d=d||2;var v,T,P,k,R,U,G,tt=o&&o.length,ot=tt?o[0]*d:h.length,ht=Mg(h,0,ot,d,!0),gt=[];if(!ht||ht.next===ht.prev)return gt;if(tt&&(ht=(function(Dt,Ut,Ht,ne){var Kt,ae,oe,De=[];for(Kt=0,ae=Ut.length;Kt<ae;Kt++)(oe=Mg(Dt,Ut[Kt]*ne,Kt<ae-1?Ut[Kt+1]*ne:Dt.length,ne,!1))===oe.next&&(oe.steiner=!0),De.push(Ag(oe));for(De.sort(W_),Kt=0;Kt<De.length;Kt++)Ht=Eg(De[Kt],Ht);return Ht})(h,o,ht,d)),h.length>80*d){v=P=h[0],T=k=h[1];for(var _t=d;_t<ot;_t+=d)(R=h[_t])<v&&(v=R),(U=h[_t+1])<T&&(T=U),R>P&&(P=R),U>k&&(k=U);G=(G=Math.max(P-v,k-T))!==0?32767/G:0}return _d(ht,gt,d,v,T,G,0),gt}function Mg(h,o,d,v,T){var P,k;if(T===Mh(h,o,d,v)>0)for(P=o;P<d;P+=v)k=Q_(P,h[P],h[P+1],k);else for(P=d-v;P>=o;P-=v)k=Q_(P,h[P],h[P+1],k);return k&&bf(k,k.next)&&(xd(k),k=k.next),k}function dc(h,o){if(!h)return h;o||(o=h);var d,v=h;do if(d=!1,v.steiner||!bf(v,v.next)&&ta(v.prev,v,v.next)!==0)v=v.next;else{if(xd(v),(v=o=v.prev)===v.next)break;d=!0}while(d||v!==o);return o}function _d(h,o,d,v,T,P,k){if(h){!k&&P&&(function(tt,ot,ht,gt){var _t=tt;do _t.z===0&&(_t.z=Up(_t.x,_t.y,ot,ht,gt)),_t.prevZ=_t.prev,_t.nextZ=_t.next,_t=_t.next;while(_t!==tt);_t.prevZ.nextZ=null,_t.prevZ=null,(function(Dt){var Ut,Ht,ne,Kt,ae,oe,De,He,mn=1;do{for(Ht=Dt,Dt=null,ae=null,oe=0;Ht;){for(oe++,ne=Ht,De=0,Ut=0;Ut<mn&&(De++,ne=ne.nextZ);Ut++);for(He=mn;De>0||He>0&&ne;)De!==0&&(He===0||!ne||Ht.z<=ne.z)?(Kt=Ht,Ht=Ht.nextZ,De--):(Kt=ne,ne=ne.nextZ,He--),ae?ae.nextZ=Kt:Dt=Kt,Kt.prevZ=ae,ae=Kt;Ht=ne}ae.nextZ=null,mn*=2}while(oe>1)})(_t)})(h,v,T,P);for(var R,U,G=h;h.prev!==h.next;)if(R=h.prev,U=h.next,P?Z_(h,v,T,P):H_(h))o.push(R.i/d|0),o.push(h.i/d|0),o.push(U.i/d|0),xd(h),h=U.next,G=U.next;else if((h=U)===G){k?k===1?_d(h=G_(dc(h),o,d),o,d,v,T,P,2):k===2&&Y_(h,o,d,v,T,P):_d(dc(h),o,d,v,T,P,1);break}}}function H_(h){var o=h.prev,d=h,v=h.next;if(ta(o,d,v)>=0)return!1;for(var T=o.x,P=d.x,k=v.x,R=o.y,U=d.y,G=v.y,tt=T<P?T<k?T:k:P<k?P:k,ot=R<U?R<G?R:G:U<G?U:G,ht=T>P?T>k?T:k:P>k?P:k,gt=R>U?R>G?R:G:U>G?U:G,_t=v.next;_t!==o;){if(_t.x>=tt&&_t.x<=ht&&_t.y>=ot&&_t.y<=gt&&Th(T,R,P,U,k,G,_t.x,_t.y)&&ta(_t.prev,_t,_t.next)>=0)return!1;_t=_t.next}return!0}function Z_(h,o,d,v){var T=h.prev,P=h,k=h.next;if(ta(T,P,k)>=0)return!1;for(var R=T.x,U=P.x,G=k.x,tt=T.y,ot=P.y,ht=k.y,gt=R<U?R<G?R:G:U<G?U:G,_t=tt<ot?tt<ht?tt:ht:ot<ht?ot:ht,Dt=R>U?R>G?R:G:U>G?U:G,Ut=tt>ot?tt>ht?tt:ht:ot>ht?ot:ht,Ht=Up(gt,_t,o,d,v),ne=Up(Dt,Ut,o,d,v),Kt=h.prevZ,ae=h.nextZ;Kt&&Kt.z>=Ht&&ae&&ae.z<=ne;){if(Kt.x>=gt&&Kt.x<=Dt&&Kt.y>=_t&&Kt.y<=Ut&&Kt!==T&&Kt!==k&&Th(R,tt,U,ot,G,ht,Kt.x,Kt.y)&&ta(Kt.prev,Kt,Kt.next)>=0||(Kt=Kt.prevZ,ae.x>=gt&&ae.x<=Dt&&ae.y>=_t&&ae.y<=Ut&&ae!==T&&ae!==k&&Th(R,tt,U,ot,G,ht,ae.x,ae.y)&&ta(ae.prev,ae,ae.next)>=0))return!1;ae=ae.nextZ}for(;Kt&&Kt.z>=Ht;){if(Kt.x>=gt&&Kt.x<=Dt&&Kt.y>=_t&&Kt.y<=Ut&&Kt!==T&&Kt!==k&&Th(R,tt,U,ot,G,ht,Kt.x,Kt.y)&&ta(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.prevZ}for(;ae&&ae.z<=ne;){if(ae.x>=gt&&ae.x<=Dt&&ae.y>=_t&&ae.y<=Ut&&ae!==T&&ae!==k&&Th(R,tt,U,ot,G,ht,ae.x,ae.y)&&ta(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}return!0}function G_(h,o,d){var v=h;do{var T=v.prev,P=v.next.next;!bf(T,P)&&Cg(T,v,v.next,P)&&Sf(T,P)&&Sf(P,T)&&(o.push(T.i/d|0),o.push(v.i/d|0),o.push(P.i/d|0),xd(v),xd(v.next),v=h=P),v=v.next}while(v!==h);return dc(v)}function Y_(h,o,d,v,T,P){var k=h;do{for(var R=k.next.next;R!==k.prev;){if(k.i!==R.i&&K_(k,R)){var U=Pg(k,R);return k=dc(k,k.next),U=dc(U,U.next),_d(k,o,d,v,T,P,0),void _d(U,o,d,v,T,P,0)}R=R.next}k=k.next}while(k!==h)}function W_(h,o){return h.x-o.x}function Eg(h,o){var d=(function(T,P){var k,R=P,U=T.x,G=T.y,tt=-1/0;do{if(G<=R.y&&G>=R.next.y&&R.next.y!==R.y){var ot=R.x+(G-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(ot<=U&&ot>tt&&(tt=ot,k=R.x<R.next.x?R:R.next,ot===U))return k}R=R.next}while(R!==P);if(!k)return null;var ht,gt=k,_t=k.x,Dt=k.y,Ut=1/0;R=k;do U>=R.x&&R.x>=_t&&U!==R.x&&Th(G<Dt?U:tt,G,_t,Dt,G<Dt?tt:U,G,R.x,R.y)&&(ht=Math.abs(G-R.y)/(U-R.x),Sf(R,T)&&(ht<Ut||ht===Ut&&(R.x>k.x||R.x===k.x&&X_(k,R)))&&(k=R,Ut=ht)),R=R.next;while(R!==gt);return k})(h,o);if(!d)return o;var v=Pg(d,h);return dc(v,v.next),dc(d,d.next)}function X_(h,o){return ta(h.prev,h,o.prev)<0&&ta(o.next,h,h.next)<0}function Up(h,o,d,v,T){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-d)*T|0)|h<<8))|h<<4))|h<<2))|h<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-v)*T|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function Ag(h){var o=h,d=h;do(o.x<d.x||o.x===d.x&&o.y<d.y)&&(d=o),o=o.next;while(o!==h);return d}function Th(h,o,d,v,T,P,k,R){return(T-k)*(o-R)>=(h-k)*(P-R)&&(h-k)*(v-R)>=(d-k)*(o-R)&&(d-k)*(P-R)>=(T-k)*(v-R)}function K_(h,o){return h.next.i!==o.i&&h.prev.i!==o.i&&!(function(d,v){var T=d;do{if(T.i!==d.i&&T.next.i!==d.i&&T.i!==v.i&&T.next.i!==v.i&&Cg(T,T.next,d,v))return!0;T=T.next}while(T!==d);return!1})(h,o)&&(Sf(h,o)&&Sf(o,h)&&(function(d,v){var T=d,P=!1,k=(d.x+v.x)/2,R=(d.y+v.y)/2;do T.y>R!=T.next.y>R&&T.next.y!==T.y&&k<(T.next.x-T.x)*(R-T.y)/(T.next.y-T.y)+T.x&&(P=!P),T=T.next;while(T!==d);return P})(h,o)&&(ta(h.prev,h,o.prev)||ta(h,o.prev,o))||bf(h,o)&&ta(h.prev,h,h.next)>0&&ta(o.prev,o,o.next)>0)}function ta(h,o,d){return(o.y-h.y)*(d.x-o.x)-(o.x-h.x)*(d.y-o.y)}function bf(h,o){return h.x===o.x&&h.y===o.y}function Cg(h,o,d,v){var T=wf(ta(h,o,d)),P=wf(ta(h,o,v)),k=wf(ta(d,v,h)),R=wf(ta(d,v,o));return T!==P&&k!==R||!(T!==0||!vd(h,d,o))||!(P!==0||!vd(h,v,o))||!(k!==0||!vd(d,h,v))||!(R!==0||!vd(d,o,v))}function vd(h,o,d){return o.x<=Math.max(h.x,d.x)&&o.x>=Math.min(h.x,d.x)&&o.y<=Math.max(h.y,d.y)&&o.y>=Math.min(h.y,d.y)}function wf(h){return h>0?1:h<0?-1:0}function Sf(h,o){return ta(h.prev,h,h.next)<0?ta(h,o,h.next)>=0&&ta(h,h.prev,o)>=0:ta(h,o,h.prev)<0||ta(h,h.next,o)<0}function Pg(h,o){var d=new Vp(h.i,h.x,h.y),v=new Vp(o.i,o.x,o.y),T=h.next,P=o.prev;return h.next=o,o.prev=h,d.next=T,T.prev=d,v.next=d,d.prev=v,P.next=v,v.prev=P,v}function Q_(h,o,d,v){var T=new Vp(h,o,d);return v?(T.next=v.next,T.prev=v,v.next.prev=T,v.next=T):(T.prev=T,T.next=T),T}function xd(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function Vp(h,o,d){this.i=h,this.x=o,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Mh(h,o,d,v){for(var T=0,P=o,k=d-v;P<d;P+=v)T+=(h[k]-h[P])*(h[P+1]+h[k+1]),k=P;return T}xf.exports=Sh,xf.exports.default=Sh,Sh.deviation=function(h,o,d,v){var T=o&&o.length,P=Math.abs(Mh(h,0,T?o[0]*d:h.length,d));if(T)for(var k=0,R=o.length;k<R;k++)P-=Math.abs(Mh(h,o[k]*d,k<R-1?o[k+1]*d:h.length,d));var U=0;for(k=0;k<v.length;k+=3){var G=v[k]*d,tt=v[k+1]*d,ot=v[k+2]*d;U+=Math.abs((h[G]-h[ot])*(h[tt+1]-h[G+1])-(h[G]-h[tt])*(h[ot+1]-h[G+1]))}return P===0&&U===0?0:Math.abs((U-P)/P)},Sh.flatten=function(h){for(var o=h[0][0].length,d={vertices:[],holes:[],dimensions:o},v=0,T=0;T<h.length;T++){for(var P=0;P<h[T].length;P++)for(var k=0;k<o;k++)d.vertices.push(h[T][P][k]);T>0&&d.holes.push(v+=h[T-1].length)}return d};var $p=y(xf.exports);function qp(h,o,d,v,T){kg(h,o,d,v||h.length-1,T||bd)}function kg(h,o,d,v,T){for(;v>d;){if(v-d>600){var P=v-d+1,k=o-d+1,R=Math.log(P),U=.5*Math.exp(2*R/3),G=.5*Math.sqrt(R*U*(P-U)/P)*(k-P/2<0?-1:1);kg(h,o,Math.max(d,Math.floor(o-k*U/P+G)),Math.min(v,Math.floor(o+(P-k)*U/P+G)),T)}var tt=h[o],ot=d,ht=v;for(Tf(h,d,o),T(h[v],tt)>0&&Tf(h,d,v);ot<ht;){for(Tf(h,ot,ht),ot++,ht--;T(h[ot],tt)<0;)ot++;for(;T(h[ht],tt)>0;)ht--}T(h[d],tt)===0?Tf(h,d,ht):Tf(h,++ht,v),ht<=o&&(d=ht+1),o<=ht&&(v=ht-1)}}function Tf(h,o,d){var v=h[o];h[o]=h[d],h[d]=v}function bd(h,o){return h<o?-1:h>o?1:0}function Hp(h,o){const d=h.length;if(d<=1)return[h];const v=[];let T,P;for(let k=0;k<d;k++){const R=Nt(h[k]);R!==0&&(h[k].area=Math.abs(R),P===void 0&&(P=R<0),P===R<0?(T&&v.push(T),T=[h[k]]):T.push(h[k]))}if(T&&v.push(T),o>1)for(let k=0;k<v.length;k++)v[k].length<=o||(qp(v[k],o,1,v[k].length-1,Og),v[k]=v[k].slice(0,o));return v}function Og(h,o){return o.area-h.area}function Zp(h,o,d){const v=d.patternDependencies;let T=!1;for(const P of o){const k=P.paint.get(`${h}-pattern`);k.isConstant()||(T=!0);const R=k.constantOr(null);R&&(T=!0,v[R.to]=!0,v[R.from]=!0)}return T}function wd(h,o,d,v,T){const P=T.patternDependencies;for(const k of o){const R=k.paint.get(`${h}-pattern`).value;if(R.kind!=="constant"){let U=R.evaluate({zoom:v-1},d,{},T.availableImages),G=R.evaluate({zoom:v},d,{},T.availableImages),tt=R.evaluate({zoom:v+1},d,{},T.availableImages);U=U&&U.name?U.name:U,G=G&&G.name?G.name:G,tt=tt&&tt.name?tt.name:tt,P[U]=!0,P[G]=!0,P[tt]=!0,d.patterns[k.id]={min:U,mid:G,max:tt}}}return d}class Sd{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ai,this.indexArray=new Ra,this.indexArray2=new xr,this.programConfigurations=new Bn(o.layers,o.zoom),this.segments=new er,this.segments2=new er,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,v){this.hasPattern=Zp("fill",this.layers,d);const T=this.layers[0].layout.get("fill-sort-key"),P=!T.isConstant(),k=[];for(const{feature:R,id:U,index:G,sourceLayerIndex:tt}of o){const ot=this.layers[0]._featureFilter.needGeometry,ht=iu(R,ot);if(!this.layers[0]._featureFilter.filter(new Ft(this.zoom),ht,v))continue;const gt=P?T.evaluate(ht,{},v,d.availableImages):void 0,_t={id:U,properties:R.properties,type:R.type,sourceLayerIndex:tt,index:G,geometry:ot?ht.geometry:ku(R),patterns:{},sortKey:gt};k.push(_t)}P&&k.sort(((R,U)=>R.sortKey-U.sortKey));for(const R of k){const{geometry:U,index:G,sourceLayerIndex:tt}=R;if(this.hasPattern){const ot=wd("fill",this.layers,R,this.zoom,d);this.patternFeatures.push(ot)}else this.addFeature(R,U,G,v,{});d.featureIndex.insert(o[G].feature,U,G,tt,this.index)}}update(o,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,v)}addFeatures(o,d,v){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,d,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,q_),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,d,v,T,P){for(const k of Hp(d,500)){let R=0;for(const gt of k)R+=gt.length;const U=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray),G=U.vertexLength,tt=[],ot=[];for(const gt of k){if(gt.length===0)continue;gt!==k[0]&&ot.push(tt.length/2);const _t=this.segments2.prepareSegment(gt.length,this.layoutVertexArray,this.indexArray2),Dt=_t.vertexLength;this.layoutVertexArray.emplaceBack(gt[0].x,gt[0].y),this.indexArray2.emplaceBack(Dt+gt.length-1,Dt),tt.push(gt[0].x),tt.push(gt[0].y);for(let Ut=1;Ut<gt.length;Ut++)this.layoutVertexArray.emplaceBack(gt[Ut].x,gt[Ut].y),this.indexArray2.emplaceBack(Dt+Ut-1,Dt+Ut),tt.push(gt[Ut].x),tt.push(gt[Ut].y);_t.vertexLength+=gt.length,_t.primitiveLength+=gt.length}const ht=$p(tt,ot);for(let gt=0;gt<ht.length;gt+=3)this.indexArray.emplaceBack(G+ht[gt],G+ht[gt+1],G+ht[gt+2]);U.vertexLength+=R,U.primitiveLength+=ht.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,v,P,T)}}let Dg,Ig;Qe("FillBucket",Sd,{omit:["layers","patternFeatures"]});var Eh={get paint(){return Ig=Ig||new bi({"fill-antialias":new sn(ge.paint_fill["fill-antialias"]),"fill-opacity":new Je(ge.paint_fill["fill-opacity"]),"fill-color":new Je(ge.paint_fill["fill-color"]),"fill-outline-color":new Je(ge.paint_fill["fill-outline-color"]),"fill-translate":new sn(ge.paint_fill["fill-translate"]),"fill-translate-anchor":new sn(ge.paint_fill["fill-translate-anchor"]),"fill-pattern":new vi(ge.paint_fill["fill-pattern"])})},get layout(){return Dg=Dg||new bi({"fill-sort-key":new Je(ge.layout_fill["fill-sort-key"])})}};class J_ extends Kr{constructor(o){super(o,Eh)}recalculate(o,d){super.recalculate(o,d);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Sd(o)}queryRadius(){return Uc(this.paint.get("fill-translate"))}queryIntersectsFeature(o,d,v,T,P,k,R){return Dp(wh(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),k.angle,R),T)}isTileClipped(){return!0}}const tv=Ri([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ev=Ri([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Gp}=tv;var pc={},zg=x,Lg=Ah;function Ah(h,o,d,v,T){this.properties={},this.extent=d,this.type=0,this._pbf=h,this._geometry=-1,this._keys=v,this._values=T,h.readFields(Ab,this,o)}function Ab(h,o,d){h==1?o.id=d.readVarint():h==2?(function(v,T){for(var P=v.readVarint()+v.pos;v.pos<P;){var k=T._keys[v.readVarint()],R=T._values[v.readVarint()];T.properties[k]=R}})(d,o):h==3?o.type=d.readVarint():h==4&&(o._geometry=d.pos)}function Rg(h){for(var o,d,v=0,T=0,P=h.length,k=P-1;T<P;k=T++)v+=((d=h[k]).x-(o=h[T]).x)*(o.y+d.y);return v}Ah.types=["Unknown","Point","LineString","Polygon"],Ah.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var o,d=h.readVarint()+h.pos,v=1,T=0,P=0,k=0,R=[];h.pos<d;){if(T<=0){var U=h.readVarint();v=7&U,T=U>>3}if(T--,v===1||v===2)P+=h.readSVarint(),k+=h.readSVarint(),v===1&&(o&&R.push(o),o=[]),o.push(new zg(P,k));else{if(v!==7)throw new Error("unknown command "+v);o&&o.push(o[0].clone())}}return o&&R.push(o),R},Ah.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var o=h.readVarint()+h.pos,d=1,v=0,T=0,P=0,k=1/0,R=-1/0,U=1/0,G=-1/0;h.pos<o;){if(v<=0){var tt=h.readVarint();d=7&tt,v=tt>>3}if(v--,d===1||d===2)(T+=h.readSVarint())<k&&(k=T),T>R&&(R=T),(P+=h.readSVarint())<U&&(U=P),P>G&&(G=P);else if(d!==7)throw new Error("unknown command "+d)}return[k,U,R,G]},Ah.prototype.toGeoJSON=function(h,o,d){var v,T,P=this.extent*Math.pow(2,d),k=this.extent*h,R=this.extent*o,U=this.loadGeometry(),G=Ah.types[this.type];function tt(gt){for(var _t=0;_t<gt.length;_t++){var Dt=gt[_t];gt[_t]=[360*(Dt.x+k)/P-180,360/Math.PI*Math.atan(Math.exp((180-360*(Dt.y+R)/P)*Math.PI/180))-90]}}switch(this.type){case 1:var ot=[];for(v=0;v<U.length;v++)ot[v]=U[v][0];tt(U=ot);break;case 2:for(v=0;v<U.length;v++)tt(U[v]);break;case 3:for(U=(function(gt){var _t=gt.length;if(_t<=1)return[gt];for(var Dt,Ut,Ht=[],ne=0;ne<_t;ne++){var Kt=Rg(gt[ne]);Kt!==0&&(Ut===void 0&&(Ut=Kt<0),Ut===Kt<0?(Dt&&Ht.push(Dt),Dt=[gt[ne]]):Dt.push(gt[ne]))}return Dt&&Ht.push(Dt),Ht})(U),v=0;v<U.length;v++)for(T=0;T<U[v].length;T++)tt(U[v][T])}U.length===1?U=U[0]:G="Multi"+G;var ht={type:"Feature",geometry:{type:G,coordinates:U},properties:this.properties};return"id"in this&&(ht.id=this.id),ht};var ja=Lg,ds=Ng;function Ng(h,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(nv,this,o),this.length=this._features.length}function nv(h,o,d){h===15?o.version=d.readVarint():h===1?o.name=d.readString():h===5?o.extent=d.readVarint():h===2?o._features.push(d.pos):h===3?o._keys.push(d.readString()):h===4&&o._values.push((function(v){for(var T=null,P=v.readVarint()+v.pos;v.pos<P;){var k=v.readVarint()>>3;T=k===1?v.readString():k===2?v.readFloat():k===3?v.readDouble():k===4?v.readVarint64():k===5?v.readVarint():k===6?v.readSVarint():k===7?v.readBoolean():null}return T})(d))}Ng.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var o=this._pbf.readVarint()+this._pbf.pos;return new ja(this._pbf,o,this.extent,this._keys,this._values)};var iv=ds;function rv(h,o,d){if(h===3){var v=new iv(d,d.readVarint()+d.pos);v.length&&(o[v.name]=v)}}pc.VectorTile=function(h,o){this.layers=h.readFields(rv,{},o)},pc.VectorTileFeature=Lg,pc.VectorTileLayer=ds;const Td=pc.VectorTileFeature.types,Yp=Math.pow(2,13);function $c(h,o,d,v,T,P,k,R){h.emplaceBack(o,d,2*Math.floor(v*Yp)+k,T*Yp*2,P*Yp*2,Math.round(R))}class Wp{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Ye,this.centroidVertexArray=new qe,this.indexArray=new Ra,this.programConfigurations=new Bn(o.layers,o.zoom),this.segments=new er,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,v){this.features=[],this.hasPattern=Zp("fill-extrusion",this.layers,d);for(const{feature:T,id:P,index:k,sourceLayerIndex:R}of o){const U=this.layers[0]._featureFilter.needGeometry,G=iu(T,U);if(!this.layers[0]._featureFilter.filter(new Ft(this.zoom),G,v))continue;const tt={id:P,sourceLayerIndex:R,index:k,geometry:U?G.geometry:ku(T),properties:T.properties,type:T.type,patterns:{}};this.hasPattern?this.features.push(wd("fill-extrusion",this.layers,tt,this.zoom,d)):this.addFeature(tt,tt.geometry,k,v,{}),d.featureIndex.insert(T,tt.geometry,k,R,this.index,!0)}}addFeatures(o,d,v){for(const T of this.features){const{geometry:P}=T;this.addFeature(T,P,T.index,d,v)}}update(o,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Gp),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,ev.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,d,v,T,P){const k={x:0,y:0,vertexCount:0};for(const R of Hp(d,500)){let U=0;for(const _t of R)U+=_t.length;let G=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const _t of R){if(_t.length===0||Xp(_t))continue;let Dt=0;for(let Ut=0;Ut<_t.length;Ut++){const Ht=_t[Ut];if(Ut>=1){const ne=_t[Ut-1];if(!Cb(Ht,ne)){G.vertexLength+4>er.MAX_VERTEX_ARRAY_LENGTH&&(G=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Kt=Ht.sub(ne)._perp()._unit(),ae=ne.dist(Ht);Dt+ae>32768&&(Dt=0),$c(this.layoutVertexArray,Ht.x,Ht.y,Kt.x,Kt.y,0,0,Dt),$c(this.layoutVertexArray,Ht.x,Ht.y,Kt.x,Kt.y,0,1,Dt),k.x+=2*Ht.x,k.y+=2*Ht.y,k.vertexCount+=2,Dt+=ae,$c(this.layoutVertexArray,ne.x,ne.y,Kt.x,Kt.y,0,0,Dt),$c(this.layoutVertexArray,ne.x,ne.y,Kt.x,Kt.y,0,1,Dt),k.x+=2*ne.x,k.y+=2*ne.y,k.vertexCount+=2;const oe=G.vertexLength;this.indexArray.emplaceBack(oe,oe+2,oe+1),this.indexArray.emplaceBack(oe+1,oe+2,oe+3),G.vertexLength+=4,G.primitiveLength+=2}}}}if(G.vertexLength+U>er.MAX_VERTEX_ARRAY_LENGTH&&(G=this.segments.prepareSegment(U,this.layoutVertexArray,this.indexArray)),Td[o.type]!=="Polygon")continue;const tt=[],ot=[],ht=G.vertexLength;for(const _t of R)if(_t.length!==0){_t!==R[0]&&ot.push(tt.length/2);for(let Dt=0;Dt<_t.length;Dt++){const Ut=_t[Dt];$c(this.layoutVertexArray,Ut.x,Ut.y,0,0,1,1,0),k.x+=Ut.x,k.y+=Ut.y,k.vertexCount+=1,tt.push(Ut.x),tt.push(Ut.y)}}const gt=$p(tt,ot);for(let _t=0;_t<gt.length;_t+=3)this.indexArray.emplaceBack(ht+gt[_t],ht+gt[_t+2],ht+gt[_t+1]);G.primitiveLength+=gt.length/3,G.vertexLength+=U}for(let R=0;R<k.vertexCount;R++)this.centroidVertexArray.emplaceBack(Math.floor(k.x/k.vertexCount),Math.floor(k.y/k.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,v,P,T)}}function Cb(h,o){return h.x===o.x&&(h.x<0||h.x>Nr)||h.y===o.y&&(h.y<0||h.y>Nr)}function Xp(h){return h.every((o=>o.x<0))||h.every((o=>o.x>Nr))||h.every((o=>o.y<0))||h.every((o=>o.y>Nr))}let Kp;Qe("FillExtrusionBucket",Wp,{omit:["layers","features"]});var av={get paint(){return Kp=Kp||new bi({"fill-extrusion-opacity":new sn(ge["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Je(ge["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new sn(ge["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new sn(ge["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new vi(ge["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Je(ge["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Je(ge["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new sn(ge["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class sv extends Kr{constructor(o){super(o,av)}createBucket(o){return new Wp(o)}queryRadius(){return Uc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,d,v,T,P,k,R,U){const G=wh(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),k.angle,R),tt=this.paint.get("fill-extrusion-height").evaluate(d,v),ot=this.paint.get("fill-extrusion-base").evaluate(d,v),ht=(function(_t,Dt,Ut,Ht){const ne=[];for(const Kt of _t){const ae=[Kt.x,Kt.y,0,1];gd(ae,ae,Dt),ne.push(new O(ae[0]/ae[3],ae[1]/ae[3]))}return ne})(G,U),gt=(function(_t,Dt,Ut,Ht){const ne=[],Kt=[],ae=Ht[8]*Dt,oe=Ht[9]*Dt,De=Ht[10]*Dt,He=Ht[11]*Dt,mn=Ht[8]*Ut,nn=Ht[9]*Ut,tn=Ht[10]*Ut,Ge=Ht[11]*Ut;for(const un of _t){const We=[],$e=[];for(const xn of un){const gn=xn.x,Qn=xn.y,mr=Ht[0]*gn+Ht[4]*Qn+Ht[12],gr=Ht[1]*gn+Ht[5]*Qn+Ht[13],Ma=Ht[2]*gn+Ht[6]*Qn+Ht[14],mo=Ht[3]*gn+Ht[7]*Qn+Ht[15],Ys=Ma+De,fa=mo+He,Pr=mr+mn,Qa=gr+nn,ks=Ma+tn,ms=mo+Ge,Ea=new O((mr+ae)/fa,(gr+oe)/fa);Ea.z=Ys/fa,We.push(Ea);const Aa=new O(Pr/ms,Qa/ms);Aa.z=ks/ms,$e.push(Aa)}ne.push(We),Kt.push($e)}return[ne,Kt]})(T,ot,tt,U);return(function(_t,Dt,Ut){let Ht=1/0;Dp(Ut,Dt)&&(Ht=Qp(Ut,Dt[0]));for(let ne=0;ne<Dt.length;ne++){const Kt=Dt[ne],ae=_t[ne];for(let oe=0;oe<Kt.length-1;oe++){const De=Kt[oe],He=[De,Kt[oe+1],ae[oe+1],ae[oe],De];Jr(Ut,He)&&(Ht=Math.min(Ht,Qp(Ut,He)))}}return Ht!==1/0&&Ht})(gt[0],gt[1],ht)}}function Mf(h,o){return h.x*o.x+h.y*o.y}function Qp(h,o){if(h.length===1){let d=0;const v=o[d++];let T;for(;!T||v.equals(T);)if(T=o[d++],!T)return 1/0;for(;d<o.length;d++){const P=o[d],k=h[0],R=T.sub(v),U=P.sub(v),G=k.sub(v),tt=Mf(R,R),ot=Mf(R,U),ht=Mf(U,U),gt=Mf(G,R),_t=Mf(G,U),Dt=tt*ht-ot*ot,Ut=(ht*gt-ot*_t)/Dt,Ht=(tt*_t-ot*gt)/Dt,ne=v.z*(1-Ut-Ht)+T.z*Ut+P.z*Ht;if(isFinite(ne))return ne}return 1/0}{let d=1/0;for(const v of o)d=Math.min(d,v.z);return d}}const Bg=Ri([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:jg}=Bg,ov=Ri([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Fg}=ov,Jp=pc.VectorTileFeature.types,Ug=Math.cos(Math.PI/180*37.5),Vg=Math.pow(2,14)/.5;class Md{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new vn,this.layoutVertexArray2=new pn,this.indexArray=new Ra,this.programConfigurations=new Bn(o.layers,o.zoom),this.segments=new er,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,v){this.hasPattern=Zp("line",this.layers,d);const T=this.layers[0].layout.get("line-sort-key"),P=!T.isConstant(),k=[];for(const{feature:R,id:U,index:G,sourceLayerIndex:tt}of o){const ot=this.layers[0]._featureFilter.needGeometry,ht=iu(R,ot);if(!this.layers[0]._featureFilter.filter(new Ft(this.zoom),ht,v))continue;const gt=P?T.evaluate(ht,{},v):void 0,_t={id:U,properties:R.properties,type:R.type,sourceLayerIndex:tt,index:G,geometry:ot?ht.geometry:ku(R),patterns:{},sortKey:gt};k.push(_t)}P&&k.sort(((R,U)=>R.sortKey-U.sortKey));for(const R of k){const{geometry:U,index:G,sourceLayerIndex:tt}=R;if(this.hasPattern){const ot=wd("line",this.layers,R,this.zoom,d);this.patternFeatures.push(ot)}else this.addFeature(R,U,G,v,{});d.featureIndex.insert(o[G].feature,U,G,tt,this.index)}}update(o,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,v)}addFeatures(o,d,v){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,d,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,Fg)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,jg),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,d,v,T,P){const k=this.layers[0].layout,R=k.get("line-join").evaluate(o,{}),U=k.get("line-cap"),G=k.get("line-miter-limit"),tt=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const ot of d)this.addLine(ot,o,R,U,G,tt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,v,P,T)}addLine(o,d,v,T,P,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ht=0;Ht<o.length-1;Ht++)this.totalDistance+=o[Ht].dist(o[Ht+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=Jp[d.type]==="Polygon";let U=o.length;for(;U>=2&&o[U-1].equals(o[U-2]);)U--;let G=0;for(;G<U-1&&o[G].equals(o[G+1]);)G++;if(U<(R?3:2))return;v==="bevel"&&(P=1.05);const tt=this.overscaling<=16?15*Nr/(512*this.overscaling):0,ot=this.segments.prepareSegment(10*U,this.layoutVertexArray,this.indexArray);let ht,gt,_t,Dt,Ut;this.e1=this.e2=-1,R&&(ht=o[U-2],Ut=o[G].sub(ht)._unit()._perp());for(let Ht=G;Ht<U;Ht++){if(_t=Ht===U-1?R?o[G+1]:void 0:o[Ht+1],_t&&o[Ht].equals(_t))continue;Ut&&(Dt=Ut),ht&&(gt=ht),ht=o[Ht],Ut=_t?_t.sub(ht)._unit()._perp():Dt,Dt=Dt||Ut;let ne=Dt.add(Ut);ne.x===0&&ne.y===0||ne._unit();const Kt=Dt.x*Ut.x+Dt.y*Ut.y,ae=ne.x*Ut.x+ne.y*Ut.y,oe=ae!==0?1/ae:1/0,De=2*Math.sqrt(2-2*ae),He=ae<Ug&&gt&&_t,mn=Dt.x*Ut.y-Dt.y*Ut.x>0;if(He&&Ht>G){const Ge=ht.dist(gt);if(Ge>2*tt){const un=ht.sub(ht.sub(gt)._mult(tt/Ge)._round());this.updateDistance(gt,un),this.addCurrentVertex(un,Dt,0,0,ot),gt=un}}const nn=gt&&_t;let tn=nn?v:R?"butt":T;if(nn&&tn==="round"&&(oe<k?tn="miter":oe<=2&&(tn="fakeround")),tn==="miter"&&oe>P&&(tn="bevel"),tn==="bevel"&&(oe>2&&(tn="flipbevel"),oe<P&&(tn="miter")),gt&&this.updateDistance(gt,ht),tn==="miter")ne._mult(oe),this.addCurrentVertex(ht,ne,0,0,ot);else if(tn==="flipbevel"){if(oe>100)ne=Ut.mult(-1);else{const Ge=oe*Dt.add(Ut).mag()/Dt.sub(Ut).mag();ne._perp()._mult(Ge*(mn?-1:1))}this.addCurrentVertex(ht,ne,0,0,ot),this.addCurrentVertex(ht,ne.mult(-1),0,0,ot)}else if(tn==="bevel"||tn==="fakeround"){const Ge=-Math.sqrt(oe*oe-1),un=mn?Ge:0,We=mn?0:Ge;if(gt&&this.addCurrentVertex(ht,Dt,un,We,ot),tn==="fakeround"){const $e=Math.round(180*De/Math.PI/20);for(let xn=1;xn<$e;xn++){let gn=xn/$e;if(gn!==.5){const mr=gn-.5;gn+=gn*mr*(gn-1)*((1.0904+Kt*(Kt*(3.55645-1.43519*Kt)-3.2452))*mr*mr+(.848013+Kt*(.215638*Kt-1.06021)))}const Qn=Ut.sub(Dt)._mult(gn)._add(Dt)._unit()._mult(mn?-1:1);this.addHalfVertex(ht,Qn.x,Qn.y,!1,mn,0,ot)}}_t&&this.addCurrentVertex(ht,Ut,-un,-We,ot)}else if(tn==="butt")this.addCurrentVertex(ht,ne,0,0,ot);else if(tn==="square"){const Ge=gt?1:-1;this.addCurrentVertex(ht,ne,Ge,Ge,ot)}else tn==="round"&&(gt&&(this.addCurrentVertex(ht,Dt,0,0,ot),this.addCurrentVertex(ht,Dt,1,1,ot,!0)),_t&&(this.addCurrentVertex(ht,Ut,-1,-1,ot,!0),this.addCurrentVertex(ht,Ut,0,0,ot)));if(He&&Ht<U-1){const Ge=ht.dist(_t);if(Ge>2*tt){const un=ht.add(_t.sub(ht)._mult(tt/Ge)._round());this.updateDistance(ht,un),this.addCurrentVertex(un,Ut,0,0,ot),ht=un}}}}addCurrentVertex(o,d,v,T,P,k=!1){const R=d.y*T-d.x,U=-d.y-d.x*T;this.addHalfVertex(o,d.x+d.y*v,d.y-d.x*v,k,!1,v,P),this.addHalfVertex(o,R,U,k,!0,-T,P),this.distance>Vg/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,d,v,T,P,k))}addHalfVertex({x:o,y:d},v,T,P,k,R,U){const G=.5*(this.lineClips?this.scaledDistance*(Vg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(P?1:0),(d<<1)+(k?1:0),Math.round(63*v)+128,Math.round(63*T)+128,1+(R===0?0:R<0?-1:1)|(63&G)<<2,G>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const tt=U.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,tt),U.primitiveLength++),k?this.e2=tt:this.e1=tt}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,d){this.distance+=o.dist(d),this.updateScaledDistance()}}let $g,Du;Qe("LineBucket",Md,{omit:["layers","patternFeatures"]});var tm={get paint(){return Du=Du||new bi({"line-opacity":new Je(ge.paint_line["line-opacity"]),"line-color":new Je(ge.paint_line["line-color"]),"line-translate":new sn(ge.paint_line["line-translate"]),"line-translate-anchor":new sn(ge.paint_line["line-translate-anchor"]),"line-width":new Je(ge.paint_line["line-width"]),"line-gap-width":new Je(ge.paint_line["line-gap-width"]),"line-offset":new Je(ge.paint_line["line-offset"]),"line-blur":new Je(ge.paint_line["line-blur"]),"line-dasharray":new ui(ge.paint_line["line-dasharray"]),"line-pattern":new vi(ge.paint_line["line-pattern"]),"line-gradient":new Io(ge.paint_line["line-gradient"])})},get layout(){return $g=$g||new bi({"line-cap":new sn(ge.layout_line["line-cap"]),"line-join":new Je(ge.layout_line["line-join"]),"line-miter-limit":new sn(ge.layout_line["line-miter-limit"]),"line-round-limit":new sn(ge.layout_line["line-round-limit"]),"line-sort-key":new Je(ge.layout_line["line-sort-key"])})}};class Pb extends Je{possiblyEvaluate(o,d){return d=new Ft(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(o,d)}evaluate(o,d,v,T){return d=it({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(o,d,v,T)}}let Ed;class mc extends Kr{constructor(o){super(o,tm),this.gradientVersion=0,Ed||(Ed=new Pb(tm.paint.properties["line-width"].specification),Ed.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!(function(v){return v._styleExpression!==void 0})(d)&&d._styleExpression.expression instanceof Ya,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,d){super.recalculate(o,d),this.paint._values["line-floorwidth"]=Ed.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Md(o)}queryRadius(o){const d=o,v=em(Fc("line-width",this,d),Fc("line-gap-width",this,d)),T=Fc("line-offset",this,d);return v/2+Math.abs(T)+Uc(this.paint.get("line-translate"))}queryIntersectsFeature(o,d,v,T,P,k,R){const U=wh(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),k.angle,R),G=R/2*em(this.paint.get("line-width").evaluate(d,v),this.paint.get("line-gap-width").evaluate(d,v)),tt=this.paint.get("line-offset").evaluate(d,v);return tt&&(T=(function(ot,ht){const gt=[];for(let _t=0;_t<ot.length;_t++){const Dt=ot[_t],Ut=[];for(let Ht=0;Ht<Dt.length;Ht++){const ne=Dt[Ht-1],Kt=Dt[Ht],ae=Dt[Ht+1],oe=Ht===0?new O(0,0):Kt.sub(ne)._unit()._perp(),De=Ht===Dt.length-1?new O(0,0):ae.sub(Kt)._unit()._perp(),He=oe._add(De)._unit(),mn=He.x*De.x+He.y*De.y;mn!==0&&He._mult(1/mn),Ut.push(He._mult(ht)._add(Kt))}gt.push(Ut)}return gt})(T,tt*R)),(function(ot,ht,gt){for(let _t=0;_t<ht.length;_t++){const Dt=ht[_t];if(ot.length>=3){for(let Ut=0;Ut<Dt.length;Ut++)if(Ba(ot,Dt[Ut]))return!0}if(N_(ot,Dt,gt))return!0}return!1})(U,T,G)}isTileClipped(){return!0}}function em(h,o){return o>0?o+2*h:h}const lv=Ri([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),nm=Ri([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ri([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ad=Ri([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ri([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ar=Ri([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),kb=Ri([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ob(h,o,d){return h.sections.forEach((v=>{v.text=(function(T,P,k){const R=P.layout.get("text-transform").evaluate(k,{});return R==="uppercase"?T=T.toLocaleUpperCase():R==="lowercase"&&(T=T.toLocaleLowerCase()),mt.applyArabicShaping&&(T=mt.applyArabicShaping(T)),T})(v.text,o,d)})),h}Ri([{name:"triangle",components:3,type:"Uint16"}]),Ri([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ri([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ri([{type:"Float32",name:"offsetX"}]),Ri([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ri([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ef={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Br=24,gc=Ai,qg=function(h,o,d,v,T){var P,k,R=8*T-v-1,U=(1<<R)-1,G=U>>1,tt=-7,ot=T-1,ht=-1,gt=h[o+ot];for(ot+=ht,P=gt&(1<<-tt)-1,gt>>=-tt,tt+=R;tt>0;P=256*P+h[o+ot],ot+=ht,tt-=8);for(k=P&(1<<-tt)-1,P>>=-tt,tt+=v;tt>0;k=256*k+h[o+ot],ot+=ht,tt-=8);if(P===0)P=1-G;else{if(P===U)return k?NaN:1/0*(gt?-1:1);k+=Math.pow(2,v),P-=G}return(gt?-1:1)*k*Math.pow(2,P-v)},Hg=function(h,o,d,v,T,P){var k,R,U,G=8*P-T-1,tt=(1<<G)-1,ot=tt>>1,ht=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,gt=0,_t=1,Dt=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(R=isNaN(o)?1:0,k=tt):(k=Math.floor(Math.log(o)/Math.LN2),o*(U=Math.pow(2,-k))<1&&(k--,U*=2),(o+=k+ot>=1?ht/U:ht*Math.pow(2,1-ot))*U>=2&&(k++,U/=2),k+ot>=tt?(R=0,k=tt):k+ot>=1?(R=(o*U-1)*Math.pow(2,T),k+=ot):(R=o*Math.pow(2,ot-1)*Math.pow(2,T),k=0));T>=8;h[d+gt]=255&R,gt+=_t,R/=256,T-=8);for(k=k<<T|R,G+=T;G>0;h[d+gt]=255&k,gt+=_t,k/=256,G-=8);h[d+gt-_t]|=128*Dt};function Ai(h){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(h)?h:new Uint8Array(h||0),this.pos=0,this.type=0,this.length=this.buf.length}Ai.Varint=0,Ai.Fixed64=1,Ai.Bytes=2,Ai.Fixed32=5;var Ll=4294967296,Zg=1/Ll,im=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Iu(h){return h.type===Ai.Bytes?h.readVarint()+h.pos:h.pos+1}function qc(h,o,d){return d?4294967296*o+(h>>>0):4294967296*(o>>>0)+(h>>>0)}function rm(h,o,d){var v=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));d.realloc(v);for(var T=d.pos-1;T>=h;T--)d.buf[T+v]=d.buf[T]}function am(h,o){for(var d=0;d<h.length;d++)o.writeVarint(h[d])}function uv(h,o){for(var d=0;d<h.length;d++)o.writeSVarint(h[d])}function yc(h,o){for(var d=0;d<h.length;d++)o.writeFloat(h[d])}function Fa(h,o){for(var d=0;d<h.length;d++)o.writeDouble(h[d])}function Gg(h,o){for(var d=0;d<h.length;d++)o.writeBoolean(h[d])}function cv(h,o){for(var d=0;d<h.length;d++)o.writeFixed32(h[d])}function ps(h,o){for(var d=0;d<h.length;d++)o.writeSFixed32(h[d])}function Db(h,o){for(var d=0;d<h.length;d++)o.writeFixed64(h[d])}function hv(h,o){for(var d=0;d<h.length;d++)o.writeSFixed64(h[d])}function Cd(h,o){return(h[o]|h[o+1]<<8|h[o+2]<<16)+16777216*h[o+3]}function lr(h,o,d){h[d]=o,h[d+1]=o>>>8,h[d+2]=o>>>16,h[d+3]=o>>>24}function uo(h,o){return(h[o]|h[o+1]<<8|h[o+2]<<16)+(h[o+3]<<24)}Ai.prototype={destroy:function(){this.buf=null},readFields:function(h,o,d){for(d=d||this.length;this.pos<d;){var v=this.readVarint(),T=v>>3,P=this.pos;this.type=7&v,h(T,o,this),this.pos===P&&this.skip(v)}return o},readMessage:function(h,o){return this.readFields(h,o,this.readVarint()+this.pos)},readFixed32:function(){var h=Cd(this.buf,this.pos);return this.pos+=4,h},readSFixed32:function(){var h=uo(this.buf,this.pos);return this.pos+=4,h},readFixed64:function(){var h=Cd(this.buf,this.pos)+Cd(this.buf,this.pos+4)*Ll;return this.pos+=8,h},readSFixed64:function(){var h=Cd(this.buf,this.pos)+uo(this.buf,this.pos+4)*Ll;return this.pos+=8,h},readFloat:function(){var h=qg(this.buf,this.pos,!0,23,4);return this.pos+=4,h},readDouble:function(){var h=qg(this.buf,this.pos,!0,52,8);return this.pos+=8,h},readVarint:function(h){var o,d,v=this.buf;return o=127&(d=v[this.pos++]),d<128?o:(o|=(127&(d=v[this.pos++]))<<7,d<128?o:(o|=(127&(d=v[this.pos++]))<<14,d<128?o:(o|=(127&(d=v[this.pos++]))<<21,d<128?o:(function(T,P,k){var R,U,G=k.buf;if(R=(112&(U=G[k.pos++]))>>4,U<128||(R|=(127&(U=G[k.pos++]))<<3,U<128)||(R|=(127&(U=G[k.pos++]))<<10,U<128)||(R|=(127&(U=G[k.pos++]))<<17,U<128)||(R|=(127&(U=G[k.pos++]))<<24,U<128)||(R|=(1&(U=G[k.pos++]))<<31,U<128))return qc(T,R,P);throw new Error("Expected varint not more than 10 bytes")})(o|=(15&(d=v[this.pos]))<<28,h,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var h=this.readVarint();return h%2==1?(h+1)/-2:h/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var h=this.readVarint()+this.pos,o=this.pos;return this.pos=h,h-o>=12&&im?(function(d,v,T){return im.decode(d.subarray(v,T))})(this.buf,o,h):(function(d,v,T){for(var P="",k=v;k<T;){var R,U,G,tt=d[k],ot=null,ht=tt>239?4:tt>223?3:tt>191?2:1;if(k+ht>T)break;ht===1?tt<128&&(ot=tt):ht===2?(192&(R=d[k+1]))==128&&(ot=(31&tt)<<6|63&R)<=127&&(ot=null):ht===3?(U=d[k+2],(192&(R=d[k+1]))==128&&(192&U)==128&&((ot=(15&tt)<<12|(63&R)<<6|63&U)<=2047||ot>=55296&&ot<=57343)&&(ot=null)):ht===4&&(U=d[k+2],G=d[k+3],(192&(R=d[k+1]))==128&&(192&U)==128&&(192&G)==128&&((ot=(15&tt)<<18|(63&R)<<12|(63&U)<<6|63&G)<=65535||ot>=1114112)&&(ot=null)),ot===null?(ot=65533,ht=1):ot>65535&&(ot-=65536,P+=String.fromCharCode(ot>>>10&1023|55296),ot=56320|1023&ot),P+=String.fromCharCode(ot),k+=ht}return P})(this.buf,o,h)},readBytes:function(){var h=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,h);return this.pos=h,o},readPackedVarint:function(h,o){if(this.type!==Ai.Bytes)return h.push(this.readVarint(o));var d=Iu(this);for(h=h||[];this.pos<d;)h.push(this.readVarint(o));return h},readPackedSVarint:function(h){if(this.type!==Ai.Bytes)return h.push(this.readSVarint());var o=Iu(this);for(h=h||[];this.pos<o;)h.push(this.readSVarint());return h},readPackedBoolean:function(h){if(this.type!==Ai.Bytes)return h.push(this.readBoolean());var o=Iu(this);for(h=h||[];this.pos<o;)h.push(this.readBoolean());return h},readPackedFloat:function(h){if(this.type!==Ai.Bytes)return h.push(this.readFloat());var o=Iu(this);for(h=h||[];this.pos<o;)h.push(this.readFloat());return h},readPackedDouble:function(h){if(this.type!==Ai.Bytes)return h.push(this.readDouble());var o=Iu(this);for(h=h||[];this.pos<o;)h.push(this.readDouble());return h},readPackedFixed32:function(h){if(this.type!==Ai.Bytes)return h.push(this.readFixed32());var o=Iu(this);for(h=h||[];this.pos<o;)h.push(this.readFixed32());return h},readPackedSFixed32:function(h){if(this.type!==Ai.Bytes)return h.push(this.readSFixed32());var o=Iu(this);for(h=h||[];this.pos<o;)h.push(this.readSFixed32());return h},readPackedFixed64:function(h){if(this.type!==Ai.Bytes)return h.push(this.readFixed64());var o=Iu(this);for(h=h||[];this.pos<o;)h.push(this.readFixed64());return h},readPackedSFixed64:function(h){if(this.type!==Ai.Bytes)return h.push(this.readSFixed64());var o=Iu(this);for(h=h||[];this.pos<o;)h.push(this.readSFixed64());return h},skip:function(h){var o=7&h;if(o===Ai.Varint)for(;this.buf[this.pos++]>127;);else if(o===Ai.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Ai.Fixed32)this.pos+=4;else{if(o!==Ai.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(h,o){this.writeVarint(h<<3|o)},realloc:function(h){for(var o=this.length||16;o<this.pos+h;)o*=2;if(o!==this.length){var d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(h){this.realloc(4),lr(this.buf,h,this.pos),this.pos+=4},writeSFixed32:function(h){this.realloc(4),lr(this.buf,h,this.pos),this.pos+=4},writeFixed64:function(h){this.realloc(8),lr(this.buf,-1&h,this.pos),lr(this.buf,Math.floor(h*Zg),this.pos+4),this.pos+=8},writeSFixed64:function(h){this.realloc(8),lr(this.buf,-1&h,this.pos),lr(this.buf,Math.floor(h*Zg),this.pos+4),this.pos+=8},writeVarint:function(h){(h=+h||0)>268435455||h<0?(function(o,d){var v,T;if(o>=0?(v=o%4294967296|0,T=o/4294967296|0):(T=~(-o/4294967296),4294967295^(v=~(-o%4294967296))?v=v+1|0:(v=0,T=T+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),(function(P,k,R){R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,R.buf[R.pos]=127&(P>>>=7)})(v,0,d),(function(P,k){var R=(7&P)<<4;k.buf[k.pos++]|=R|((P>>>=3)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P|((P>>>=7)?128:0),P&&(k.buf[k.pos++]=127&P)))))})(T,d)})(h,this):(this.realloc(4),this.buf[this.pos++]=127&h|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=h>>>7&127))))},writeSVarint:function(h){this.writeVarint(h<0?2*-h-1:2*h)},writeBoolean:function(h){this.writeVarint(!!h)},writeString:function(h){h=String(h),this.realloc(4*h.length),this.pos++;var o=this.pos;this.pos=(function(v,T,P){for(var k,R,U=0;U<T.length;U++){if((k=T.charCodeAt(U))>55295&&k<57344){if(!R){k>56319||U+1===T.length?(v[P++]=239,v[P++]=191,v[P++]=189):R=k;continue}if(k<56320){v[P++]=239,v[P++]=191,v[P++]=189,R=k;continue}k=R-55296<<10|k-56320|65536,R=null}else R&&(v[P++]=239,v[P++]=191,v[P++]=189,R=null);k<128?v[P++]=k:(k<2048?v[P++]=k>>6|192:(k<65536?v[P++]=k>>12|224:(v[P++]=k>>18|240,v[P++]=k>>12&63|128),v[P++]=k>>6&63|128),v[P++]=63&k|128)}return P})(this.buf,h,this.pos);var d=this.pos-o;d>=128&&rm(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d},writeFloat:function(h){this.realloc(4),Hg(this.buf,h,this.pos,!0,23,4),this.pos+=4},writeDouble:function(h){this.realloc(8),Hg(this.buf,h,this.pos,!0,52,8),this.pos+=8},writeBytes:function(h){var o=h.length;this.writeVarint(o),this.realloc(o);for(var d=0;d<o;d++)this.buf[this.pos++]=h[d]},writeRawMessage:function(h,o){this.pos++;var d=this.pos;h(o,this);var v=this.pos-d;v>=128&&rm(d,v,this),this.pos=d-1,this.writeVarint(v),this.pos+=v},writeMessage:function(h,o,d){this.writeTag(h,Ai.Bytes),this.writeRawMessage(o,d)},writePackedVarint:function(h,o){o.length&&this.writeMessage(h,am,o)},writePackedSVarint:function(h,o){o.length&&this.writeMessage(h,uv,o)},writePackedBoolean:function(h,o){o.length&&this.writeMessage(h,Gg,o)},writePackedFloat:function(h,o){o.length&&this.writeMessage(h,yc,o)},writePackedDouble:function(h,o){o.length&&this.writeMessage(h,Fa,o)},writePackedFixed32:function(h,o){o.length&&this.writeMessage(h,cv,o)},writePackedSFixed32:function(h,o){o.length&&this.writeMessage(h,ps,o)},writePackedFixed64:function(h,o){o.length&&this.writeMessage(h,Db,o)},writePackedSFixed64:function(h,o){o.length&&this.writeMessage(h,hv,o)},writeBytesField:function(h,o){this.writeTag(h,Ai.Bytes),this.writeBytes(o)},writeFixed32Field:function(h,o){this.writeTag(h,Ai.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(h,o){this.writeTag(h,Ai.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(h,o){this.writeTag(h,Ai.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(h,o){this.writeTag(h,Ai.Fixed64),this.writeSFixed64(o)},writeVarintField:function(h,o){this.writeTag(h,Ai.Varint),this.writeVarint(o)},writeSVarintField:function(h,o){this.writeTag(h,Ai.Varint),this.writeSVarint(o)},writeStringField:function(h,o){this.writeTag(h,Ai.Bytes),this.writeString(o)},writeFloatField:function(h,o){this.writeTag(h,Ai.Fixed32),this.writeFloat(o)},writeDoubleField:function(h,o){this.writeTag(h,Ai.Fixed64),this.writeDouble(o)},writeBooleanField:function(h,o){this.writeVarintField(h,!!o)}};var ru=y(gc);const sm=3;function fv(h,o,d){h===1&&d.readMessage(dv,o)}function dv(h,o,d){if(h===3){const{id:v,bitmap:T,width:P,height:k,left:R,top:U,advance:G}=d.readMessage(Ib,{});o.push({id:v,bitmap:new _f({width:P+2*sm,height:k+2*sm},T),metrics:{width:P,height:k,left:R,top:U,advance:G}})}}function Ib(h,o,d){h===1?o.id=d.readVarint():h===2?o.bitmap=d.readBytes():h===3?o.width=d.readVarint():h===4?o.height=d.readVarint():h===5?o.left=d.readSVarint():h===6?o.top=d.readSVarint():h===7&&(o.advance=d.readVarint())}const Pd=sm;function co(h){let o=0,d=0;for(const k of h)o+=k.w*k.h,d=Math.max(d,k.w);h.sort(((k,R)=>R.h-k.h));const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),d),h:1/0}];let T=0,P=0;for(const k of h)for(let R=v.length-1;R>=0;R--){const U=v[R];if(!(k.w>U.w||k.h>U.h)){if(k.x=U.x,k.y=U.y,P=Math.max(P,k.y+k.h),T=Math.max(T,k.x+k.w),k.w===U.w&&k.h===U.h){const G=v.pop();R<v.length&&(v[R]=G)}else k.h===U.h?(U.x+=k.w,U.w-=k.w):k.w===U.w?(U.y+=k.h,U.h-=k.h):(v.push({x:U.x+k.w,y:U.y,w:U.w-k.w,h:k.h}),U.y+=k.h,U.h-=k.h);break}}return{w:T,h:P,fill:o/(T*P)||0}}const jr=1;class om{constructor(o,{pixelRatio:d,version:v,stretchX:T,stretchY:P,content:k}){this.paddedRect=o,this.pixelRatio=d,this.stretchX=T,this.stretchY=P,this.content=k,this.version=v}get tl(){return[this.paddedRect.x+jr,this.paddedRect.y+jr]}get br(){return[this.paddedRect.x+this.paddedRect.w-jr,this.paddedRect.y+this.paddedRect.h-jr]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*jr)/this.pixelRatio,(this.paddedRect.h-2*jr)/this.pixelRatio]}}class ho{constructor(o,d){const v={},T={};this.haveRenderCallbacks=[];const P=[];this.addImages(o,v,P),this.addImages(d,T,P);const{w:k,h:R}=co(P),U=new Lo({width:k||1,height:R||1});for(const G in o){const tt=o[G],ot=v[G].paddedRect;Lo.copy(tt.data,U,{x:0,y:0},{x:ot.x+jr,y:ot.y+jr},tt.data)}for(const G in d){const tt=d[G],ot=T[G].paddedRect,ht=ot.x+jr,gt=ot.y+jr,_t=tt.data.width,Dt=tt.data.height;Lo.copy(tt.data,U,{x:0,y:0},{x:ht,y:gt},tt.data),Lo.copy(tt.data,U,{x:0,y:Dt-1},{x:ht,y:gt-1},{width:_t,height:1}),Lo.copy(tt.data,U,{x:0,y:0},{x:ht,y:gt+Dt},{width:_t,height:1}),Lo.copy(tt.data,U,{x:_t-1,y:0},{x:ht-1,y:gt},{width:1,height:Dt}),Lo.copy(tt.data,U,{x:0,y:0},{x:ht+_t,y:gt},{width:1,height:Dt})}this.image=U,this.iconPositions=v,this.patternPositions=T}addImages(o,d,v){for(const T in o){const P=o[T],k={x:0,y:0,w:P.data.width+2*jr,h:P.data.height+2*jr};v.push(k),d[T]=new om(k,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(T)}}patchUpdatedImages(o,d){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in o.updatedImages)this.patchUpdatedImage(this.iconPositions[v],o.getImage(v),d),this.patchUpdatedImage(this.patternPositions[v],o.getImage(v),d)}patchUpdatedImage(o,d,v){if(!o||!d||o.version===d.version)return;o.version=d.version;const[T,P]=o.tl;v.update(d.data,void 0,{x:T,y:P})}}var _c;Qe("ImagePosition",om),Qe("ImageAtlas",ho),a.ai=void 0,(_c=a.ai||(a.ai={}))[_c.none=0]="none",_c[_c.horizontal=1]="horizontal",_c[_c.vertical=2]="vertical",_c[_c.horizontalOnly=3]="horizontalOnly";const ml=-17;class au{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,d){const v=new au;return v.scale=o||1,v.fontStack=d,v}static forImage(o){const d=new au;return d.imageName=o,d}}class Ro{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,d){const v=new Ro;for(let T=0;T<o.sections.length;T++){const P=o.sections[T];P.image?v.addImageSection(P):v.addTextSection(P,d)}return v}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=(function(o){let d="";for(let v=0;v<o.length;v++){const T=o.charCodeAt(v+1)||null,P=o.charCodeAt(v-1)||null;d+=T&&gf(T)&&!Ef[o[v+1]]||P&&gf(P)&&!Ef[o[v-1]]||!Ef[o[v]]?o[v]:Ef[o[v]]}return d})(this.text)}trim(){let o=0;for(let v=0;v<this.text.length&&Cf[this.text.charCodeAt(v)];v++)o++;let d=this.text.length;for(let v=this.text.length-1;v>=0&&v>=o&&Cf[this.text.charCodeAt(v)];v--)d--;this.text=this.text.substring(o,d),this.sectionIndex=this.sectionIndex.slice(o,d)}substring(o,d){const v=new Ro;return v.text=this.text.substring(o,d),v.sectionIndex=this.sectionIndex.slice(o,d),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((o,d)=>Math.max(o,this.sections[d].scale)),0)}addTextSection(o,d){this.text+=o.text,this.sections.push(au.forText(o.scale,o.fontStack||d));const v=this.sections.length-1;for(let T=0;T<o.text.length;++T)this.sectionIndex.push(v)}addImageSection(o){const d=o.image?o.image.name:"";if(d.length===0)return void pe("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(au.forImage(d)),this.sectionIndex.push(this.sections.length-1)):pe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Af(h,o,d,v,T,P,k,R,U,G,tt,ot,ht,gt,_t,Dt){const Ut=Ro.fromFeature(h,T);let Ht;ot===a.ai.vertical&&Ut.verticalizePunctuation();const{processBidirectionalText:ne,processStyledBidirectionalText:Kt}=mt;if(ne&&Ut.sections.length===1){Ht=[];const De=ne(Ut.toString(),lm(Ut,G,P,o,v,gt,_t));for(const He of De){const mn=new Ro;mn.text=He,mn.sections=Ut.sections;for(let nn=0;nn<He.length;nn++)mn.sectionIndex.push(0);Ht.push(mn)}}else if(Kt){Ht=[];const De=Kt(Ut.text,Ut.sectionIndex,lm(Ut,G,P,o,v,gt,_t));for(const He of De){const mn=new Ro;mn.text=He[0],mn.sectionIndex=He[1],mn.sections=Ut.sections,Ht.push(mn)}}else Ht=(function(De,He){const mn=[],nn=De.text;let tn=0;for(const Ge of He)mn.push(De.substring(tn,Ge)),tn=Ge;return tn<nn.length&&mn.push(De.substring(tn,nn.length)),mn})(Ut,lm(Ut,G,P,o,v,gt,_t));const ae=[],oe={positionedLines:ae,text:Ut.toString(),top:tt[1],bottom:tt[1],left:tt[0],right:tt[0],writingMode:ot,iconsInText:!1,verticalizable:!1};return(function(De,He,mn,nn,tn,Ge,un,We,$e,xn,gn,Qn){let mr=0,gr=ml,Ma=0,mo=0;const Ys=We==="right"?1:We==="left"?0:.5;let fa=0;for(const Ea of tn){Ea.trim();const Aa=Ea.getMaxScale(),gs=(Aa-1)*Br,ys={positionedGlyphs:[],lineOffset:0};De.positionedLines[fa]=ys;const Ja=ys.positionedGlyphs;let go=0;if(!Ea.length()){gr+=Ge,++fa;continue}for(let na=0;na<Ea.length();na++){const si=Ea.getSection(na),_s=Ea.getSectionIndex(na),ts=Ea.getCharCode(na);let Fr=0,ia=null,Nl=null,Uo=null,Os=Br;const Bl=!($e===a.ai.horizontal||!gn&&!ll(ts)||gn&&(Cf[ts]||(Pr=ts,en.Arabic(Pr)||en["Arabic Supplement"](Pr)||en["Arabic Extended-A"](Pr)||en["Arabic Presentation Forms-A"](Pr)||en["Arabic Presentation Forms-B"](Pr))));if(si.imageName){const gl=nn[si.imageName];if(!gl)continue;Uo=si.imageName,De.iconsInText=De.iconsInText||!0,Nl=gl.paddedRect;const Va=gl.displaySize;si.scale=si.scale*Br/Qn,ia={width:Va[0],height:Va[1],left:jr,top:-Pd,advance:Bl?Va[1]:Va[0]},Fr=gs+(Br-Va[1]*si.scale),Os=ia.advance;const Bu=Bl?Va[0]*si.scale-Br*Aa:Va[1]*si.scale-Br*Aa;Bu>0&&Bu>go&&(go=Bu)}else{const gl=mn[si.fontStack],Va=gl&&gl[ts];if(Va&&Va.rect)Nl=Va.rect,ia=Va.metrics;else{const Bu=He[si.fontStack],Zd=Bu&&Bu[ts];if(!Zd)continue;ia=Zd.metrics}Fr=(Aa-si.scale)*Br}Bl?(De.verticalizable=!0,Ja.push({glyph:ts,imageName:Uo,x:mr,y:gr+Fr,vertical:Bl,scale:si.scale,fontStack:si.fontStack,sectionIndex:_s,metrics:ia,rect:Nl}),mr+=Os*si.scale+xn):(Ja.push({glyph:ts,imageName:Uo,x:mr,y:gr+Fr,vertical:Bl,scale:si.scale,fontStack:si.fontStack,sectionIndex:_s,metrics:ia,rect:Nl}),mr+=ia.advance*si.scale+xn)}Ja.length!==0&&(Ma=Math.max(mr-xn,Ma),Od(Ja,0,Ja.length-1,Ys,go)),mr=0;const kr=Ge*Aa+go;ys.lineOffset=Math.max(go,gs),gr+=kr,mo=Math.max(kr,mo),++fa}var Pr;const Qa=gr-ml,{horizontalAlign:ks,verticalAlign:ms}=um(un);(function(Ea,Aa,gs,ys,Ja,go,kr,na,si){const _s=(Aa-gs)*Ja;let ts=0;ts=go!==kr?-na*ys-ml:(-ys*si+.5)*kr;for(const Fr of Ea)for(const ia of Fr.positionedGlyphs)ia.x+=_s,ia.y+=ts})(De.positionedLines,Ys,ks,ms,Ma,mo,Ge,Qa,tn.length),De.top+=-ms*Qa,De.bottom=De.top+Qa,De.left+=-ks*Ma,De.right=De.left+Ma})(oe,o,d,v,Ht,k,R,U,ot,G,ht,Dt),!(function(De){for(const He of De)if(He.positionedGlyphs.length!==0)return!1;return!0})(ae)&&oe}const Cf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},su={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Yg(h,o,d,v,T,P){if(o.imageName){const k=v[o.imageName];return k?k.displaySize[0]*o.scale*Br/P+T:0}{const k=d[o.fontStack],R=k&&k[h];return R?R.metrics.advance*o.scale+T:0}}function Ch(h,o,d,v){const T=Math.pow(h-o,2);return v?h<o?T/2:2*T:T+Math.abs(d)*d}function kd(h,o,d){let v=0;return h===10&&(v-=1e4),d&&(v+=150),h!==40&&h!==65288||(v+=50),o!==41&&o!==65289||(v+=50),v}function Pf(h,o,d,v,T,P){let k=null,R=Ch(o,d,T,P);for(const U of v){const G=Ch(o-U.x,d,T,P)+U.badness;G<=R&&(k=U,R=G)}return{index:h,x:o,priorBreak:k,badness:R}}function Ph(h){return h?Ph(h.priorBreak).concat(h.index):[]}function lm(h,o,d,v,T,P,k){if(P!=="point")return[];if(!h)return[];const R=[],U=(function(ht,gt,_t,Dt,Ut,Ht){let ne=0;for(let Kt=0;Kt<ht.length();Kt++){const ae=ht.getSection(Kt);ne+=Yg(ht.getCharCode(Kt),ae,Dt,Ut,gt,Ht)}return ne/Math.max(1,Math.ceil(ne/_t))})(h,o,d,v,T,k),G=h.text.indexOf("")>=0;let tt=0;for(let ht=0;ht<h.length();ht++){const gt=h.getSection(ht),_t=h.getCharCode(ht);if(Cf[_t]||(tt+=Yg(_t,gt,v,T,o,k)),ht<h.length()-1){const Dt=!((ot=_t)<11904||!(en["Bopomofo Extended"](ot)||en.Bopomofo(ot)||en["CJK Compatibility Forms"](ot)||en["CJK Compatibility Ideographs"](ot)||en["CJK Compatibility"](ot)||en["CJK Radicals Supplement"](ot)||en["CJK Strokes"](ot)||en["CJK Symbols and Punctuation"](ot)||en["CJK Unified Ideographs Extension A"](ot)||en["CJK Unified Ideographs"](ot)||en["Enclosed CJK Letters and Months"](ot)||en["Halfwidth and Fullwidth Forms"](ot)||en.Hiragana(ot)||en["Ideographic Description Characters"](ot)||en["Kangxi Radicals"](ot)||en["Katakana Phonetic Extensions"](ot)||en.Katakana(ot)||en["Vertical Forms"](ot)||en["Yi Radicals"](ot)||en["Yi Syllables"](ot)));(su[_t]||Dt||gt.imageName)&&R.push(Pf(ht+1,tt,U,R,kd(_t,h.getCharCode(ht+1),Dt&&G),!1))}}var ot;return Ph(Pf(h.length(),tt,U,R,0,!0))}function um(h){let o=.5,d=.5;switch(h){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:o,verticalAlign:d}}function Od(h,o,d,v,T){if(!v&&!T)return;const P=h[d],k=(h[d].x+P.metrics.advance*P.scale)*v;for(let R=o;R<=d;R++)h[R].x-=k,h[R].y+=T}function pv(h,o,d){const{horizontalAlign:v,verticalAlign:T}=um(d),P=o[0]-h.displaySize[0]*v,k=o[1]-h.displaySize[1]*T;return{image:h,top:k,bottom:k+h.displaySize[1],left:P,right:P+h.displaySize[0]}}function Dd(h,o,d,v,T,P){const k=h.image;let R;if(k.content){const Ut=k.content,Ht=k.pixelRatio||1;R=[Ut[0]/Ht,Ut[1]/Ht,k.displaySize[0]-Ut[2]/Ht,k.displaySize[1]-Ut[3]/Ht]}const U=o.left*P,G=o.right*P;let tt,ot,ht,gt;d==="width"||d==="both"?(gt=T[0]+U-v[3],ot=T[0]+G+v[1]):(gt=T[0]+(U+G-k.displaySize[0])/2,ot=gt+k.displaySize[0]);const _t=o.top*P,Dt=o.bottom*P;return d==="height"||d==="both"?(tt=T[1]+_t-v[0],ht=T[1]+Dt+v[2]):(tt=T[1]+(_t+Dt-k.displaySize[1])/2,ht=tt+k.displaySize[1]),{image:k,top:tt,right:ot,bottom:ht,left:gt,collisionPadding:R}}const kf=255,zu=128,Hc=kf*zu;function Gi(h,o){const{expression:d}=o;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Ft(h+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:T}=d;let P=0;for(;P<v.length&&v[P]<=h;)P++;P=Math.max(0,P-1);let k=P;for(;k<v.length&&v[k]<h+1;)k++;k=Math.min(v.length-1,k);const R=v[P],U=v[k];return d.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:U,interpolationType:T}:{kind:"camera",minZoom:R,maxZoom:U,minSize:d.evaluate(new Ft(R)),maxSize:d.evaluate(new Ft(U)),interpolationType:T}}}function ur(h,o,d){let v="never";const T=h.get(o);return T?v=T:h.get(d)&&(v="always"),v}const xi=pc.VectorTileFeature.types,wi=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Yi(h,o,d,v,T,P,k,R,U,G,tt,ot,ht){const gt=R?Math.min(Hc,Math.round(R[0])):0,_t=R?Math.min(Hc,Math.round(R[1])):0;h.emplaceBack(o,d,Math.round(32*v),Math.round(32*T),P,k,(gt<<1)+(U?1:0),_t,16*G,16*tt,256*ot,256*ht)}function fo(h,o,d){h.emplaceBack(o.x,o.y,d),h.emplaceBack(o.x,o.y,d),h.emplaceBack(o.x,o.y,d),h.emplaceBack(o.x,o.y,d)}function Zc(h){for(const o of h.sections)if(Oo(o.text))return!0;return!1}class Gc{constructor(o){this.layoutVertexArray=new Zn,this.indexArray=new Ra,this.programConfigurations=o,this.segments=new er,this.dynamicLayoutVertexArray=new Fn,this.opacityVertexArray=new ei,this.hasVisibleVertices=!1,this.placedSymbolArray=new Qt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,d,v,T){this.isEmpty()||(v&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,lv.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,nm.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,wi,!0),this.opacityVertexBuffer.itemSize=1),(v||T)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Qe("SymbolBuffers",Gc);class Id{constructor(o,d,v){this.layoutVertexArray=new o,this.layoutAttributes=d,this.indexArray=new v,this.segments=new er,this.collisionVertexArray=new Zi}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,Ad.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Qe("CollisionBuffers",Id);class No{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((k=>k.id)),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Bp([]),this.placementViewportMatrix=Bp([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gi(this.zoom,d["text-size"]),this.iconSizeData=Gi(this.zoom,d["icon-size"]);const v=this.layers[0].layout,T=v.get("symbol-sort-key"),P=v.get("symbol-z-order");this.canOverlap=ur(v,"text-overlap","text-allow-overlap")!=="never"||ur(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&!T.isConstant(),this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map((k=>a.ai[k]))),this.stateDependentLayerIds=this.layers.filter((k=>k.isStateDependent())).map((k=>k.id)),this.sourceID=o.sourceID}createArrays(){this.text=new Gc(new Bn(this.layers,this.zoom,(o=>/^text/.test(o)))),this.icon=new Gc(new Bn(this.layers,this.zoom,(o=>/^icon/.test(o)))),this.glyphOffsetArray=new te,this.lineVertexArray=new me,this.symbolInstances=new Vt,this.textAnchorOffsets=new Pe}calculateGlyphDependencies(o,d,v,T,P){for(let k=0;k<o.length;k++)if(d[o.charCodeAt(k)]=!0,(v||T)&&P){const R=Ef[o.charAt(k)];R&&(d[R.charCodeAt(0)]=!0)}}populate(o,d,v){const T=this.layers[0],P=T.layout,k=P.get("text-font"),R=P.get("text-field"),U=P.get("icon-image"),G=(R.value.kind!=="constant"||R.value.value instanceof qi&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),tt=U.value.kind!=="constant"||!!U.value.value||Object.keys(U.parameters).length>0,ot=P.get("symbol-sort-key");if(this.features=[],!G&&!tt)return;const ht=d.iconDependencies,gt=d.glyphDependencies,_t=d.availableImages,Dt=new Ft(this.zoom);for(const{feature:Ut,id:Ht,index:ne,sourceLayerIndex:Kt}of o){const ae=T._featureFilter.needGeometry,oe=iu(Ut,ae);if(!T._featureFilter.filter(Dt,oe,v))continue;let De,He;if(ae||(oe.geometry=ku(Ut)),G){const nn=T.getValueAndResolveTokens("text-field",oe,v,_t),tn=qi.factory(nn);Zc(tn)&&(this.hasRTLText=!0),(!this.hasRTLText||q()==="unavailable"||this.hasRTLText&&mt.isParsed())&&(De=Ob(tn,T,oe))}if(tt){const nn=T.getValueAndResolveTokens("icon-image",oe,v,_t);He=nn instanceof An?nn:An.fromString(nn)}if(!De&&!He)continue;const mn=this.sortFeaturesByKey?ot.evaluate(oe,{},v):void 0;if(this.features.push({id:Ht,text:De,icon:He,index:ne,sourceLayerIndex:Kt,geometry:oe.geometry,properties:Ut.properties,type:xi[Ut.type],sortKey:mn}),He&&(ht[He.name]=!0),De){const nn=k.evaluate(oe,{},v).join(","),tn=P.get("text-rotation-alignment")!=="viewport"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const Ge of De.sections)if(Ge.image)ht[Ge.image.name]=!0;else{const un=$s(De.toString()),We=Ge.fontStack||nn,$e=gt[We]=gt[We]||{};this.calculateGlyphDependencies(Ge.text,$e,tn,this.allowVerticalPlacement,un)}}}P.get("symbol-placement")==="line"&&(this.features=(function(Ut){const Ht={},ne={},Kt=[];let ae=0;function oe(nn){Kt.push(Ut[nn]),ae++}function De(nn,tn,Ge){const un=ne[nn];return delete ne[nn],ne[tn]=un,Kt[un].geometry[0].pop(),Kt[un].geometry[0]=Kt[un].geometry[0].concat(Ge[0]),un}function He(nn,tn,Ge){const un=Ht[tn];return delete Ht[tn],Ht[nn]=un,Kt[un].geometry[0].shift(),Kt[un].geometry[0]=Ge[0].concat(Kt[un].geometry[0]),un}function mn(nn,tn,Ge){const un=Ge?tn[0][tn[0].length-1]:tn[0][0];return`${nn}:${un.x}:${un.y}`}for(let nn=0;nn<Ut.length;nn++){const tn=Ut[nn],Ge=tn.geometry,un=tn.text?tn.text.toString():null;if(!un){oe(nn);continue}const We=mn(un,Ge),$e=mn(un,Ge,!0);if(We in ne&&$e in Ht&&ne[We]!==Ht[$e]){const xn=He(We,$e,Ge),gn=De(We,$e,Kt[xn].geometry);delete Ht[We],delete ne[$e],ne[mn(un,Kt[gn].geometry,!0)]=gn,Kt[xn].geometry=null}else We in ne?De(We,$e,Ge):$e in Ht?He(We,$e,Ge):(oe(nn),Ht[We]=ae-1,ne[$e]=ae-1)}return Kt.filter((nn=>nn.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Ut,Ht)=>Ut.sortKey-Ht.sortKey))}update(o,d,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,d,this.layers,v),this.icon.programConfigurations.updatePaintArrays(o,d,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,d){const v=this.lineVertexArray.length;if(o.segment!==void 0){let T=o.dist(d[o.segment+1]),P=o.dist(d[o.segment]);const k={};for(let R=o.segment+1;R<d.length;R++)k[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:T},R<d.length-1&&(T+=d[R+1].dist(d[R]));for(let R=o.segment||0;R>=0;R--)k[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:P},R>0&&(P+=d[R-1].dist(d[R]));for(let R=0;R<d.length;R++){const U=k[R];this.lineVertexArray.emplaceBack(U.x,U.y,U.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(o,d,v,T,P,k,R,U,G,tt,ot,ht){const gt=o.indexArray,_t=o.layoutVertexArray,Dt=o.segments.prepareSegment(4*d.length,_t,gt,this.canOverlap?k.sortKey:void 0),Ut=this.glyphOffsetArray.length,Ht=Dt.vertexLength,ne=this.allowVerticalPlacement&&R===a.ai.vertical?Math.PI/2:0,Kt=k.text&&k.text.sections;for(let ae=0;ae<d.length;ae++){const{tl:oe,tr:De,bl:He,br:mn,tex:nn,pixelOffsetTL:tn,pixelOffsetBR:Ge,minFontScaleX:un,minFontScaleY:We,glyphOffset:$e,isSDF:xn,sectionIndex:gn}=d[ae],Qn=Dt.vertexLength,mr=$e[1];Yi(_t,U.x,U.y,oe.x,mr+oe.y,nn.x,nn.y,v,xn,tn.x,tn.y,un,We),Yi(_t,U.x,U.y,De.x,mr+De.y,nn.x+nn.w,nn.y,v,xn,Ge.x,tn.y,un,We),Yi(_t,U.x,U.y,He.x,mr+He.y,nn.x,nn.y+nn.h,v,xn,tn.x,Ge.y,un,We),Yi(_t,U.x,U.y,mn.x,mr+mn.y,nn.x+nn.w,nn.y+nn.h,v,xn,Ge.x,Ge.y,un,We),fo(o.dynamicLayoutVertexArray,U,ne),gt.emplaceBack(Qn,Qn+1,Qn+2),gt.emplaceBack(Qn+1,Qn+2,Qn+3),Dt.vertexLength+=4,Dt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($e[0]),ae!==d.length-1&&gn===d[ae+1].sectionIndex||o.programConfigurations.populatePaintArrays(_t.length,k,k.index,{},ht,Kt&&Kt[gn])}o.placedSymbolArray.emplaceBack(U.x,U.y,Ut,this.glyphOffsetArray.length-Ut,Ht,G,tt,U.segment,v?v[0]:0,v?v[1]:0,T[0],T[1],R,0,!1,0,ot)}_addCollisionDebugVertex(o,d,v,T,P,k){return d.emplaceBack(0,0),o.emplaceBack(v.x,v.y,T,P,Math.round(k.x),Math.round(k.y))}addCollisionDebugVertices(o,d,v,T,P,k,R){const U=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),G=U.vertexLength,tt=P.layoutVertexArray,ot=P.collisionVertexArray,ht=R.anchorX,gt=R.anchorY;this._addCollisionDebugVertex(tt,ot,k,ht,gt,new O(o,d)),this._addCollisionDebugVertex(tt,ot,k,ht,gt,new O(v,d)),this._addCollisionDebugVertex(tt,ot,k,ht,gt,new O(v,T)),this._addCollisionDebugVertex(tt,ot,k,ht,gt,new O(o,T)),U.vertexLength+=4;const _t=P.indexArray;_t.emplaceBack(G,G+1),_t.emplaceBack(G+1,G+2),_t.emplaceBack(G+2,G+3),_t.emplaceBack(G+3,G),U.primitiveLength+=4}addDebugCollisionBoxes(o,d,v,T){for(let P=o;P<d;P++){const k=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,T?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Id(dr,Ar.members,xr),this.iconCollisionBox=new Id(dr,Ar.members,xr);for(let o=0;o<this.symbolInstances.length;o++){const d=this.symbolInstances.get(o);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(o,d,v,T,P,k,R,U,G){const tt={};for(let ot=d;ot<v;ot++){const ht=o.get(ot);tt.textBox={x1:ht.x1,y1:ht.y1,x2:ht.x2,y2:ht.y2,anchorPointX:ht.anchorPointX,anchorPointY:ht.anchorPointY},tt.textFeatureIndex=ht.featureIndex;break}for(let ot=T;ot<P;ot++){const ht=o.get(ot);tt.verticalTextBox={x1:ht.x1,y1:ht.y1,x2:ht.x2,y2:ht.y2,anchorPointX:ht.anchorPointX,anchorPointY:ht.anchorPointY},tt.verticalTextFeatureIndex=ht.featureIndex;break}for(let ot=k;ot<R;ot++){const ht=o.get(ot);tt.iconBox={x1:ht.x1,y1:ht.y1,x2:ht.x2,y2:ht.y2,anchorPointX:ht.anchorPointX,anchorPointY:ht.anchorPointY},tt.iconFeatureIndex=ht.featureIndex;break}for(let ot=U;ot<G;ot++){const ht=o.get(ot);tt.verticalIconBox={x1:ht.x1,y1:ht.y1,x2:ht.x2,y2:ht.y2,anchorPointX:ht.anchorPointX,anchorPointY:ht.anchorPointY},tt.verticalIconFeatureIndex=ht.featureIndex;break}return tt}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const v=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,d){const v=o.placedSymbolArray.get(d),T=v.vertexStartIndex+4*v.numGlyphs;for(let P=v.vertexStartIndex;P<T;P+=4)o.indexArray.emplaceBack(P,P+1,P+2),o.indexArray.emplaceBack(P+1,P+2,P+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(o),v=Math.cos(o),T=[],P=[],k=[];for(let R=0;R<this.symbolInstances.length;++R){k.push(R);const U=this.symbolInstances.get(R);T.push(0|Math.round(d*U.anchorX+v*U.anchorY)),P.push(U.featureIndex)}return k.sort(((R,U)=>T[R]-T[U]||P[U]-P[R])),k}addToSortKeyRanges(o,d){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===d?v.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const v=this.symbolInstances.get(d);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach(((T,P,k)=>{T>=0&&k.indexOf(T)===P&&this.addIndicesForPlacedSymbol(this.text,T)})),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ea,vc;Qe("SymbolBucket",No,{omit:["layers","collisionBoxArray","features","compareText"]}),No.MAX_GLYPHS=65535,No.addDynamicAttributes=fo;var xc={get paint(){return vc=vc||new bi({"icon-opacity":new Je(ge.paint_symbol["icon-opacity"]),"icon-color":new Je(ge.paint_symbol["icon-color"]),"icon-halo-color":new Je(ge.paint_symbol["icon-halo-color"]),"icon-halo-width":new Je(ge.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Je(ge.paint_symbol["icon-halo-blur"]),"icon-translate":new sn(ge.paint_symbol["icon-translate"]),"icon-translate-anchor":new sn(ge.paint_symbol["icon-translate-anchor"]),"text-opacity":new Je(ge.paint_symbol["text-opacity"]),"text-color":new Je(ge.paint_symbol["text-color"],{runtimeType:Ir,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Je(ge.paint_symbol["text-halo-color"]),"text-halo-width":new Je(ge.paint_symbol["text-halo-width"]),"text-halo-blur":new Je(ge.paint_symbol["text-halo-blur"]),"text-translate":new sn(ge.paint_symbol["text-translate"]),"text-translate-anchor":new sn(ge.paint_symbol["text-translate-anchor"])})},get layout(){return ea=ea||new bi({"symbol-placement":new sn(ge.layout_symbol["symbol-placement"]),"symbol-spacing":new sn(ge.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new sn(ge.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Je(ge.layout_symbol["symbol-sort-key"]),"symbol-z-order":new sn(ge.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new sn(ge.layout_symbol["icon-allow-overlap"]),"icon-overlap":new sn(ge.layout_symbol["icon-overlap"]),"icon-ignore-placement":new sn(ge.layout_symbol["icon-ignore-placement"]),"icon-optional":new sn(ge.layout_symbol["icon-optional"]),"icon-rotation-alignment":new sn(ge.layout_symbol["icon-rotation-alignment"]),"icon-size":new Je(ge.layout_symbol["icon-size"]),"icon-text-fit":new sn(ge.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new sn(ge.layout_symbol["icon-text-fit-padding"]),"icon-image":new Je(ge.layout_symbol["icon-image"]),"icon-rotate":new Je(ge.layout_symbol["icon-rotate"]),"icon-padding":new Je(ge.layout_symbol["icon-padding"]),"icon-keep-upright":new sn(ge.layout_symbol["icon-keep-upright"]),"icon-offset":new Je(ge.layout_symbol["icon-offset"]),"icon-anchor":new Je(ge.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new sn(ge.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new sn(ge.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new sn(ge.layout_symbol["text-rotation-alignment"]),"text-field":new Je(ge.layout_symbol["text-field"]),"text-font":new Je(ge.layout_symbol["text-font"]),"text-size":new Je(ge.layout_symbol["text-size"]),"text-max-width":new Je(ge.layout_symbol["text-max-width"]),"text-line-height":new sn(ge.layout_symbol["text-line-height"]),"text-letter-spacing":new Je(ge.layout_symbol["text-letter-spacing"]),"text-justify":new Je(ge.layout_symbol["text-justify"]),"text-radial-offset":new Je(ge.layout_symbol["text-radial-offset"]),"text-variable-anchor":new sn(ge.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Je(ge.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Je(ge.layout_symbol["text-anchor"]),"text-max-angle":new sn(ge.layout_symbol["text-max-angle"]),"text-writing-mode":new sn(ge.layout_symbol["text-writing-mode"]),"text-rotate":new Je(ge.layout_symbol["text-rotate"]),"text-padding":new sn(ge.layout_symbol["text-padding"]),"text-keep-upright":new sn(ge.layout_symbol["text-keep-upright"]),"text-transform":new Je(ge.layout_symbol["text-transform"]),"text-offset":new Je(ge.layout_symbol["text-offset"]),"text-allow-overlap":new sn(ge.layout_symbol["text-allow-overlap"]),"text-overlap":new sn(ge.layout_symbol["text-overlap"]),"text-ignore-placement":new sn(ge.layout_symbol["text-ignore-placement"]),"text-optional":new sn(ge.layout_symbol["text-optional"])})}};class cm{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:_r,this.defaultValue=o}evaluate(o){if(o.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(o.formattedSection))return d.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Qe("FormatSectionOverride",cm,{omit:["defaultValue"]});class Gs extends Kr{constructor(o){super(o,xc)}recalculate(o,d){if(super.recalculate(o,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const T=[];for(const P of v)T.indexOf(P)<0&&T.push(P);this.layout._values["text-writing-mode"]=T}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,d,v,T){const P=this.layout.get(o).evaluate(d,{},v,T),k=this._unevaluatedLayout._values[o];return k.isDataDriven()||tc(k.value)||!P?P:(function(R,U){return U.replace(/{([^{}]+)}/g,((G,tt)=>R&&tt in R?String(R[tt]):""))})(d.properties,P)}createBucket(o){return new No(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of xc.paint.overridableProperties){if(!Gs.hasPaintOverride(this.layout,o))continue;const d=this.paint.get(o),v=new cm(d),T=new xu(v,d.property.specification);let P=null;P=d.value.kind==="constant"||d.value.kind==="source"?new nc("source",T):new tl("composite",T,d.value.zoomStops),this.paint._values[o]=new Mi(d.property,P,d.parameters)}}_handleOverridablePaintPropertyUpdate(o,d,v){return!(!this.layout||d.isDataDriven()||v.isDataDriven())&&Gs.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,d){const v=o.get("text-field"),T=xc.paint.properties[d];let P=!1;const k=R=>{for(const U of R)if(T.overrides&&T.overrides.hasOverride(U))return void(P=!0)};if(v.value.kind==="constant"&&v.value.value instanceof qi)k(v.value.value.sections);else if(v.value.kind==="source"){const R=G=>{P||(G instanceof Pn&&_i(G.value)===It?k(G.value.sections):G instanceof no?k(G.sections):G.eachChild(R))},U=v.value;U._styleExpression&&R(U._styleExpression.expression)}return P}}let kh;var zd={get paint(){return kh=kh||new bi({"background-color":new sn(ge.paint_background["background-color"]),"background-pattern":new ui(ge.paint_background["background-pattern"]),"background-opacity":new sn(ge.paint_background["background-opacity"])})}};class Bo extends Kr{constructor(o){super(o,zd)}}let hm;var fm={get paint(){return hm=hm||new bi({"raster-opacity":new sn(ge.paint_raster["raster-opacity"]),"raster-hue-rotate":new sn(ge.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new sn(ge.paint_raster["raster-brightness-min"]),"raster-brightness-max":new sn(ge.paint_raster["raster-brightness-max"]),"raster-saturation":new sn(ge.paint_raster["raster-saturation"]),"raster-contrast":new sn(ge.paint_raster["raster-contrast"]),"raster-resampling":new sn(ge.paint_raster["raster-resampling"]),"raster-fade-duration":new sn(ge.paint_raster["raster-fade-duration"])})}};class mv extends Kr{constructor(o){super(o,fm)}}class dm extends Kr{constructor(o){super(o,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class pm{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Lu=63710088e-1;class Cr{constructor(o,d){if(isNaN(o)||isNaN(d))throw new Error(`Invalid LngLat object: (${o}, ${d})`);if(this.lng=+o,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Cr(ct(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const d=Math.PI/180,v=this.lat*d,T=o.lat*d,P=Math.sin(v)*Math.sin(T)+Math.cos(v)*Math.cos(T)*Math.cos((o.lng-this.lng)*d);return Lu*Math.acos(Math.min(P,1))}static convert(o){if(o instanceof Cr)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Cr(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Cr(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const bc=2*Math.PI*Lu;function Oh(h){return bc*Math.cos(h*Math.PI/180)}function Ru(h){return(180+h)/360}function mm(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function gm(h,o){return h/Oh(o)}function Wg(h){return 360*h-180}function Dh(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}class Of{constructor(o,d,v=0){this.x=+o,this.y=+d,this.z=+v}static fromLngLat(o,d=0){const v=Cr.convert(o);return new Of(Ru(v.lng),mm(v.lat),gm(d,v.lat))}toLngLat(){return new Cr(Wg(this.x),Dh(this.y))}toAltitude(){return this.z*Oh(Dh(this.y))}meterInMercatorCoordinateUnits(){return 1/bc*(o=Dh(this.y),1/Math.cos(o*Math.PI/180));var o}}function jo(h,o,d){var v=2*Math.PI*6378137/256/Math.pow(2,d);return[h*v-2*Math.PI*6378137/2,o*v-2*Math.PI*6378137/2]}class ym{constructor(o,d,v){if(o<0||o>25||v<0||v>=Math.pow(2,o)||d<0||d>=Math.pow(2,o))throw new Error(`x=${d}, y=${v}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=d,this.y=v,this.key=Df(0,o,o,d,v)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,d,v){const T=(k=this.y,R=this.z,U=jo(256*(P=this.x),256*(k=Math.pow(2,R)-k-1),R),G=jo(256*(P+1),256*(k+1),R),U[0]+","+U[1]+","+G[0]+","+G[1]);var P,k,R,U,G;const tt=(function(ot,ht,gt){let _t,Dt="";for(let Ut=ot;Ut>0;Ut--)_t=1<<Ut-1,Dt+=(ht&_t?1:0)+(gt&_t?2:0);return Dt})(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,tt).replace(/{bbox-epsg-3857}/g,T)}isChildOf(o){const d=this.z-o.z;return d>0&&o.x===this.x>>d&&o.y===this.y>>d}getTilePoint(o){const d=Math.pow(2,this.z);return new O((o.x*d-this.x)*Nr,(o.y*d-this.y)*Nr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class po{constructor(o,d){this.wrap=o,this.canonical=d,this.key=Df(o,d.z,d.z,d.x,d.y)}}class Fo{constructor(o,d,v,T,P){if(o<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${v}`);this.overscaledZ=o,this.wrap=d,this.canonical=new ym(v,+T,+P),this.key=Df(d,o,v,T,P)}clone(){return new Fo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-o;return o>this.canonical.z?new Fo(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fo(o,this.wrap,o,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(o,d){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-o;return o>this.canonical.z?Df(this.wrap*+d,o,this.canonical.z,this.canonical.x,this.canonical.y):Df(this.wrap*+d,o,o,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const d=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>d&&o.canonical.y===this.canonical.y>>d}children(o){if(this.overscaledZ>=o)return[new Fo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,v=2*this.canonical.x,T=2*this.canonical.y;return[new Fo(d,this.wrap,d,v,T),new Fo(d,this.wrap,d,v+1,T),new Fo(d,this.wrap,d,v,T+1),new Fo(d,this.wrap,d,v+1,T+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Fo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Fo(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new po(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new Of(o.x-this.wrap,o.y))}}function Df(h,o,d,v,T){(h*=2)<0&&(h=-1*h-1);const P=1<<d;return(P*P*h+P*T+v).toString(36)+d.toString(36)+o.toString(36)}Qe("CanonicalTileID",ym),Qe("OverscaledTileID",Fo,{omit:["posMatrix"]});class gv{constructor(o,d,v,T=1,P=1,k=1,R=0){if(this.uid=o,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void pe(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const U=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=T,this.greenFactor=P,this.blueFactor=k,this.baseShift=R;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let G=0;G<U;G++)this.data[this._idx(-1,G)]=this.data[this._idx(0,G)],this.data[this._idx(U,G)]=this.data[this._idx(U-1,G)],this.data[this._idx(G,-1)]=this.data[this._idx(G,0)],this.data[this._idx(G,U)]=this.data[this._idx(G,U-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(U,-1)]=this.data[this._idx(U-1,0)],this.data[this._idx(-1,U)]=this.data[this._idx(0,U-1)],this.data[this._idx(U,U)]=this.data[this._idx(U-1,U-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let G=0;G<U;G++)for(let tt=0;tt<U;tt++){const ot=this.get(G,tt);ot>this.max&&(this.max=ot),ot<this.min&&(this.min=ot)}}get(o,d){const v=new Uint8Array(this.data.buffer),T=4*this._idx(o,d);return this.unpack(v[T],v[T+1],v[T+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,d){if(o<-1||o>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(o+1)}unpack(o,d,v){return o*this.redFactor+d*this.greenFactor+v*this.blueFactor-this.baseShift}getPixels(){return new Lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,d,v){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let T=d*this.dim,P=d*this.dim+this.dim,k=v*this.dim,R=v*this.dim+this.dim;switch(d){case-1:T=P-1;break;case 1:P=T+1}switch(v){case-1:k=R-1;break;case 1:R=k+1}const U=-d*this.dim,G=-v*this.dim;for(let tt=k;tt<R;tt++)for(let ot=T;ot<P;ot++)this.data[this._idx(ot,tt)]=o.data[this._idx(ot+U,tt+G)]}}Qe("DEMData",gv);class wc{constructor(o){this._stringToNumber={},this._numberToString=[];for(let d=0;d<o.length;d++){const v=o[d];this._stringToNumber[v]=d,this._numberToString[d]=v}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class Ld{constructor(o,d,v,T,P){this.type="Feature",this._vectorTileFeature=o,o._z=d,o._x=v,o._y=T,this.properties=o.properties,this.id=P}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(o[d]=this[d]);return o}}class _m{constructor(o,d){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new xa(Nr,16,0),this.grid3D=new xa(Nr,16,0),this.featureIndexArray=new ze,this.promoteId=d}insert(o,d,v,T,P,k){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,T,P);const U=k?this.grid3D:this.grid;for(let G=0;G<d.length;G++){const tt=d[G],ot=[1/0,1/0,-1/0,-1/0];for(let ht=0;ht<tt.length;ht++){const gt=tt[ht];ot[0]=Math.min(ot[0],gt.x),ot[1]=Math.min(ot[1],gt.y),ot[2]=Math.max(ot[2],gt.x),ot[3]=Math.max(ot[3],gt.y)}ot[0]<Nr&&ot[1]<Nr&&ot[2]>=0&&ot[3]>=0&&U.insert(R,ot[0],ot[1],ot[2],ot[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new pc.VectorTile(new ru(this.rawTileData)).layers,this.sourceLayerCoder=new wc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,d,v,T){this.loadVTLayers();const P=o.params||{},k=Nr/o.tileSize/o.scale,R=Us(P.filter),U=o.queryGeometry,G=o.queryPadding*k,tt=Xg(U),ot=this.grid.query(tt.minX-G,tt.minY-G,tt.maxX+G,tt.maxY+G),ht=Xg(o.cameraQueryGeometry),gt=this.grid3D.query(ht.minX-G,ht.minY-G,ht.maxX+G,ht.maxY+G,((Ut,Ht,ne,Kt)=>(function(ae,oe,De,He,mn){for(const tn of ae)if(oe<=tn.x&&De<=tn.y&&He>=tn.x&&mn>=tn.y)return!0;const nn=[new O(oe,De),new O(oe,mn),new O(He,mn),new O(He,De)];if(ae.length>2){for(const tn of nn)if(Ba(ae,tn))return!0}for(let tn=0;tn<ae.length-1;tn++)if(Ta(ae[tn],ae[tn+1],nn))return!0;return!1})(o.cameraQueryGeometry,Ut-G,Ht-G,ne+G,Kt+G)));for(const Ut of gt)ot.push(Ut);ot.sort(yv);const _t={};let Dt;for(let Ut=0;Ut<ot.length;Ut++){const Ht=ot[Ut];if(Ht===Dt)continue;Dt=Ht;const ne=this.featureIndexArray.get(Ht);let Kt=null;this.loadMatchingFeature(_t,ne.bucketIndex,ne.sourceLayerIndex,ne.featureIndex,R,P.layers,P.availableImages,d,v,T,((ae,oe,De)=>(Kt||(Kt=ku(ae)),oe.queryIntersectsFeature(U,ae,De,Kt,this.z,o.transform,k,o.pixelPosMatrix))))}return _t}loadMatchingFeature(o,d,v,T,P,k,R,U,G,tt,ot){const ht=this.bucketLayerIDs[d];if(k&&!(function(Ut,Ht){for(let ne=0;ne<Ut.length;ne++)if(Ht.indexOf(Ut[ne])>=0)return!0;return!1})(k,ht))return;const gt=this.sourceLayerCoder.decode(v),_t=this.vtLayers[gt].feature(T);if(P.needGeometry){const Ut=iu(_t,!0);if(!P.filter(new Ft(this.tileID.overscaledZ),Ut,this.tileID.canonical))return}else if(!P.filter(new Ft(this.tileID.overscaledZ),_t))return;const Dt=this.getId(_t,gt);for(let Ut=0;Ut<ht.length;Ut++){const Ht=ht[Ut];if(k&&k.indexOf(Ht)<0)continue;const ne=U[Ht];if(!ne)continue;let Kt={};Dt&&tt&&(Kt=tt.getState(ne.sourceLayer||"_geojsonTileLayer",Dt));const ae=it({},G[Ht]);ae.paint=Ih(ae.paint,ne.paint,_t,Kt,R),ae.layout=Ih(ae.layout,ne.layout,_t,Kt,R);const oe=!ot||ot(_t,ne,Kt);if(!oe)continue;const De=new Ld(_t,this.z,this.x,this.y,Dt);De.layer=ae;let He=o[Ht];He===void 0&&(He=o[Ht]=[]),He.push({featureIndex:T,feature:De,intersectionZ:oe})}}lookupSymbolFeatures(o,d,v,T,P,k,R,U){const G={};this.loadVTLayers();const tt=Us(P);for(const ot of o)this.loadMatchingFeature(G,v,T,ot,tt,k,R,U,d);return G}hasLayer(o){for(const d of this.bucketLayerIDs)for(const v of d)if(o===v)return!0;return!1}getId(o,d){let v=o.id;return this.promoteId&&(v=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof v=="boolean"&&(v=Number(v))),v}}function Ih(h,o,d,v,T){return xt(h,((P,k)=>{const R=o instanceof vr?o.get(k):null;return R&&R.evaluate?R.evaluate(d,v,T):R}))}function Xg(h){let o=1/0,d=1/0,v=-1/0,T=-1/0;for(const P of h)o=Math.min(o,P.x),d=Math.min(d,P.y),v=Math.max(v,P.x),T=Math.max(T,P.y);return{minX:o,minY:d,maxX:v,maxY:T}}function yv(h,o){return o-h}function Kg(h,o,d,v,T){const P=[];for(let k=0;k<h.length;k++){const R=h[k];let U;for(let G=0;G<R.length-1;G++){let tt=R[G],ot=R[G+1];tt.x<o&&ot.x<o||(tt.x<o?tt=new O(o,tt.y+(o-tt.x)/(ot.x-tt.x)*(ot.y-tt.y))._round():ot.x<o&&(ot=new O(o,tt.y+(o-tt.x)/(ot.x-tt.x)*(ot.y-tt.y))._round()),tt.y<d&&ot.y<d||(tt.y<d?tt=new O(tt.x+(d-tt.y)/(ot.y-tt.y)*(ot.x-tt.x),d)._round():ot.y<d&&(ot=new O(tt.x+(d-tt.y)/(ot.y-tt.y)*(ot.x-tt.x),d)._round()),tt.x>=v&&ot.x>=v||(tt.x>=v?tt=new O(v,tt.y+(v-tt.x)/(ot.x-tt.x)*(ot.y-tt.y))._round():ot.x>=v&&(ot=new O(v,tt.y+(v-tt.x)/(ot.x-tt.x)*(ot.y-tt.y))._round()),tt.y>=T&&ot.y>=T||(tt.y>=T?tt=new O(tt.x+(T-tt.y)/(ot.y-tt.y)*(ot.x-tt.x),T)._round():ot.y>=T&&(ot=new O(tt.x+(T-tt.y)/(ot.y-tt.y)*(ot.x-tt.x),T)._round()),U&&tt.equals(U[U.length-1])||(U=[tt],P.push(U)),U.push(ot)))))}}return P}Qe("FeatureIndex",_m,{omit:["rawTileData","sourceLayerCoder"]});class Sc extends O{constructor(o,d,v,T){super(o,d),this.angle=v,T!==void 0&&(this.segment=T)}clone(){return new Sc(this.x,this.y,this.angle,this.segment)}}function Rd(h,o,d,v,T){if(o.segment===void 0||d===0)return!0;let P=o,k=o.segment+1,R=0;for(;R>-d/2;){if(k--,k<0)return!1;R-=h[k].dist(P),P=h[k]}R+=h[k].dist(h[k+1]),k++;const U=[];let G=0;for(;R<d/2;){const tt=h[k],ot=h[k+1];if(!ot)return!1;let ht=h[k-1].angleTo(tt)-tt.angleTo(ot);for(ht=Math.abs((ht+3*Math.PI)%(2*Math.PI)-Math.PI),U.push({distance:R,angleDelta:ht}),G+=ht;R-U[0].distance>v;)G-=U.shift().angleDelta;if(G>T)return!1;k++,R+=tt.dist(ot)}return!0}function vm(h){let o=0;for(let d=0;d<h.length-1;d++)o+=h[d].dist(h[d+1]);return o}function _v(h,o,d){return h?.6*o*d:0}function vv(h,o){return Math.max(h?h.right-h.left:0,o?o.right-o.left:0)}function zb(h,o,d,v,T,P){const k=_v(d,T,P),R=vv(d,v)*P;let U=0;const G=vm(h)/2;for(let tt=0;tt<h.length-1;tt++){const ot=h[tt],ht=h[tt+1],gt=ot.dist(ht);if(U+gt>G){const _t=(G-U)/gt,Dt=us.number(ot.x,ht.x,_t),Ut=us.number(ot.y,ht.y,_t),Ht=new Sc(Dt,Ut,ht.angleTo(ot),tt);return Ht._round(),!k||Rd(h,Ht,R,k,o)?Ht:void 0}U+=gt}}function xv(h,o,d,v,T,P,k,R,U){const G=_v(v,P,k),tt=vv(v,T),ot=tt*k,ht=h[0].x===0||h[0].x===U||h[0].y===0||h[0].y===U;return o-ot<o/4&&(o=ot+o/4),Qg(h,ht?o/2*R%o:(tt/2+2*P)*k*R%o,o,G,d,ot,ht,!1,U)}function Qg(h,o,d,v,T,P,k,R,U){const G=P/2,tt=vm(h);let ot=0,ht=o-d,gt=[];for(let _t=0;_t<h.length-1;_t++){const Dt=h[_t],Ut=h[_t+1],Ht=Dt.dist(Ut),ne=Ut.angleTo(Dt);for(;ht+d<ot+Ht;){ht+=d;const Kt=(ht-ot)/Ht,ae=us.number(Dt.x,Ut.x,Kt),oe=us.number(Dt.y,Ut.y,Kt);if(ae>=0&&ae<U&&oe>=0&&oe<U&&ht-G>=0&&ht+G<=tt){const De=new Sc(ae,oe,ne,_t);De._round(),v&&!Rd(h,De,P,v,T)||gt.push(De)}}ot+=Ht}return R||gt.length||k||(gt=Qg(h,ot/2,d,v,T,P,k,!0,U)),gt}Qe("Anchor",Sc);const ou=jr;function Nd(h,o,d,v){const T=[],P=h.image,k=P.pixelRatio,R=P.paddedRect.w-2*ou,U=P.paddedRect.h-2*ou,G=h.right-h.left,tt=h.bottom-h.top,ot=P.stretchX||[[0,R]],ht=P.stretchY||[[0,U]],gt=(Ge,un)=>Ge+un[1]-un[0],_t=ot.reduce(gt,0),Dt=ht.reduce(gt,0),Ut=R-_t,Ht=U-Dt;let ne=0,Kt=_t,ae=0,oe=Dt,De=0,He=Ut,mn=0,nn=Ht;if(P.content&&v){const Ge=P.content;ne=Bd(ot,0,Ge[0]),ae=Bd(ht,0,Ge[1]),Kt=Bd(ot,Ge[0],Ge[2]),oe=Bd(ht,Ge[1],Ge[3]),De=Ge[0]-ne,mn=Ge[1]-ae,He=Ge[2]-Ge[0]-Kt,nn=Ge[3]-Ge[1]-oe}const tn=(Ge,un,We,$e)=>{const xn=jd(Ge.stretch-ne,Kt,G,h.left),gn=Fd(Ge.fixed-De,He,Ge.stretch,_t),Qn=jd(un.stretch-ae,oe,tt,h.top),mr=Fd(un.fixed-mn,nn,un.stretch,Dt),gr=jd(We.stretch-ne,Kt,G,h.left),Ma=Fd(We.fixed-De,He,We.stretch,_t),mo=jd($e.stretch-ae,oe,tt,h.top),Ys=Fd($e.fixed-mn,nn,$e.stretch,Dt),fa=new O(xn,Qn),Pr=new O(gr,Qn),Qa=new O(gr,mo),ks=new O(xn,mo),ms=new O(gn/k,mr/k),Ea=new O(Ma/k,Ys/k),Aa=o*Math.PI/180;if(Aa){const Ja=Math.sin(Aa),go=Math.cos(Aa),kr=[go,-Ja,Ja,go];fa._matMult(kr),Pr._matMult(kr),ks._matMult(kr),Qa._matMult(kr)}const gs=Ge.stretch+Ge.fixed,ys=un.stretch+un.fixed;return{tl:fa,tr:Pr,bl:ks,br:Qa,tex:{x:P.paddedRect.x+ou+gs,y:P.paddedRect.y+ou+ys,w:We.stretch+We.fixed-gs,h:$e.stretch+$e.fixed-ys},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ms,pixelOffsetBR:Ea,minFontScaleX:He/k/G,minFontScaleY:nn/k/tt,isSDF:d}};if(v&&(P.stretchX||P.stretchY)){const Ge=Jg(ot,Ut,_t),un=Jg(ht,Ht,Dt);for(let We=0;We<Ge.length-1;We++){const $e=Ge[We],xn=Ge[We+1];for(let gn=0;gn<un.length-1;gn++)T.push(tn($e,un[gn],xn,un[gn+1]))}}else T.push(tn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:U+1}));return T}function Bd(h,o,d){let v=0;for(const T of h)v+=Math.max(o,Math.min(d,T[1]))-Math.max(o,Math.min(d,T[0]));return v}function Jg(h,o,d){const v=[{fixed:-ou,stretch:0}];for(const[T,P]of h){const k=v[v.length-1];v.push({fixed:T-k.stretch,stretch:k.stretch}),v.push({fixed:T-k.stretch,stretch:k.stretch+(P-T)})}return v.push({fixed:o+ou,stretch:d}),v}function jd(h,o,d,v){return h/o*d+v}function Fd(h,o,d,v){return h-o*d/v}class Ud{constructor(o,d,v,T,P,k,R,U,G,tt){if(this.boxStartIndex=o.length,G){let ot=k.top,ht=k.bottom;const gt=k.collisionPadding;gt&&(ot-=gt[1],ht+=gt[3]);let _t=ht-ot;_t>0&&(_t=Math.max(10,_t),this.circleDiameter=_t)}else{let ot=k.top*R-U[0],ht=k.bottom*R+U[2],gt=k.left*R-U[3],_t=k.right*R+U[1];const Dt=k.collisionPadding;if(Dt&&(gt-=Dt[0]*R,ot-=Dt[1]*R,_t+=Dt[2]*R,ht+=Dt[3]*R),tt){const Ut=new O(gt,ot),Ht=new O(_t,ot),ne=new O(gt,ht),Kt=new O(_t,ht),ae=tt*Math.PI/180;Ut._rotate(ae),Ht._rotate(ae),ne._rotate(ae),Kt._rotate(ae),gt=Math.min(Ut.x,Ht.x,ne.x,Kt.x),_t=Math.max(Ut.x,Ht.x,ne.x,Kt.x),ot=Math.min(Ut.y,Ht.y,ne.y,Kt.y),ht=Math.max(Ut.y,Ht.y,ne.y,Kt.y)}o.emplaceBack(d.x,d.y,gt,ot,_t,ht,v,T,P)}this.boxEndIndex=o.length}}class bv{constructor(o=[],d=xm){if(this.data=o,this.length=this.data.length,this.compare=d,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:d,compare:v}=this,T=d[o];for(;o>0;){const P=o-1>>1,k=d[P];if(v(T,k)>=0)break;d[o]=k,o=P}d[o]=T}_down(o){const{data:d,compare:v}=this,T=this.length>>1,P=d[o];for(;o<T;){let k=1+(o<<1),R=d[k];const U=k+1;if(U<this.length&&v(d[U],R)<0&&(k=U,R=d[U]),v(R,P)>=0)break;d[o]=R,o=k}d[o]=P}}function xm(h,o){return h<o?-1:h>o?1:0}function wv(h,o=1,d=!1){let v=1/0,T=1/0,P=-1/0,k=-1/0;const R=h[0];for(let gt=0;gt<R.length;gt++){const _t=R[gt];(!gt||_t.x<v)&&(v=_t.x),(!gt||_t.y<T)&&(T=_t.y),(!gt||_t.x>P)&&(P=_t.x),(!gt||_t.y>k)&&(k=_t.y)}const U=Math.min(P-v,k-T);let G=U/2;const tt=new bv([],Sv);if(U===0)return new O(v,T);for(let gt=v;gt<P;gt+=U)for(let _t=T;_t<k;_t+=U)tt.push(new Bi(gt+G,_t+G,G,h));let ot=(function(gt){let _t=0,Dt=0,Ut=0;const Ht=gt[0];for(let ne=0,Kt=Ht.length,ae=Kt-1;ne<Kt;ae=ne++){const oe=Ht[ne],De=Ht[ae],He=oe.x*De.y-De.x*oe.y;Dt+=(oe.x+De.x)*He,Ut+=(oe.y+De.y)*He,_t+=3*He}return new Bi(Dt/_t,Ut/_t,0,gt)})(h),ht=tt.length;for(;tt.length;){const gt=tt.pop();(gt.d>ot.d||!ot.d)&&(ot=gt,d&&console.log("found best %d after %d probes",Math.round(1e4*gt.d)/1e4,ht)),gt.max-ot.d<=o||(G=gt.h/2,tt.push(new Bi(gt.p.x-G,gt.p.y-G,G,h)),tt.push(new Bi(gt.p.x+G,gt.p.y-G,G,h)),tt.push(new Bi(gt.p.x-G,gt.p.y+G,G,h)),tt.push(new Bi(gt.p.x+G,gt.p.y+G,G,h)),ht+=4)}return d&&(console.log(`num probes: ${ht}`),console.log(`best distance: ${ot.d}`)),ot.p}function Sv(h,o){return o.max-h.max}function Bi(h,o,d,v){this.p=new O(h,o),this.h=d,this.d=(function(T,P){let k=!1,R=1/0;for(let U=0;U<P.length;U++){const G=P[U];for(let tt=0,ot=G.length,ht=ot-1;tt<ot;ht=tt++){const gt=G[tt],_t=G[ht];gt.y>T.y!=_t.y>T.y&&T.x<(_t.x-gt.x)*(T.y-gt.y)/(_t.y-gt.y)+gt.x&&(k=!k),R=Math.min(R,zp(T,gt,_t))}}return(k?1:-1)*Math.sqrt(R)})(this.p,v),this.max=this.d+this.h*Math.SQRT2}var Ua;a.aq=void 0,(Ua=a.aq||(a.aq={}))[Ua.center=1]="center",Ua[Ua.left=2]="left",Ua[Ua.right=3]="right",Ua[Ua.top=4]="top",Ua[Ua.bottom=5]="bottom",Ua[Ua["top-left"]=6]="top-left",Ua[Ua["top-right"]=7]="top-right",Ua[Ua["bottom-left"]=8]="bottom-left",Ua[Ua["bottom-right"]=9]="bottom-right";const Yc=7,bm=Number.POSITIVE_INFINITY;function Tv(h,o){return o[1]!==bm?(function(d,v,T){let P=0,k=0;switch(v=Math.abs(v),T=Math.abs(T),d){case"top-right":case"top-left":case"top":k=T-Yc;break;case"bottom-right":case"bottom-left":case"bottom":k=-T+Yc}switch(d){case"top-right":case"bottom-right":case"right":P=-v;break;case"top-left":case"bottom-left":case"left":P=v}return[P,k]})(h,o[0],o[1]):(function(d,v){let T=0,P=0;v<0&&(v=0);const k=v/Math.SQRT2;switch(d){case"top-right":case"top-left":P=k-Yc;break;case"bottom-right":case"bottom-left":P=-k+Yc;break;case"bottom":P=-v+Yc;break;case"top":P=v-Yc}switch(d){case"top-right":case"bottom-right":T=-k;break;case"top-left":case"bottom-left":T=k;break;case"left":T=v;break;case"right":T=-v}return[T,P]})(h,o[0])}function Mv(h,o,d){var v;const T=h.layout,P=(v=T.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(o,{},d);if(P){const R=P.values,U=[];for(let G=0;G<R.length;G+=2){const tt=U[G]=R[G],ot=R[G+1].map((ht=>ht*Br));tt.startsWith("top")?ot[1]-=Yc:tt.startsWith("bottom")&&(ot[1]+=Yc),U[G+1]=ot}return new On(U)}const k=T.get("text-variable-anchor");if(k){let R;R=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[T.get("text-radial-offset").evaluate(o,{},d)*Br,bm]:T.get("text-offset").evaluate(o,{},d).map((G=>G*Br));const U=[];for(const G of k)U.push(G,Tv(G,R));return new On(U)}return null}function ty(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wm(h,o,d,v,T,P,k,R,U,G,tt){let ot=P.textMaxSize.evaluate(o,{});ot===void 0&&(ot=k);const ht=h.layers[0].layout,gt=ht.get("icon-offset").evaluate(o,{},tt),_t=Sm(d.horizontal),Dt=k/24,Ut=h.tilePixelRatio*Dt,Ht=h.tilePixelRatio*ot/24,ne=h.tilePixelRatio*R,Kt=h.tilePixelRatio*ht.get("symbol-spacing"),ae=ht.get("text-padding")*h.tilePixelRatio,oe=(function($e,xn,gn,Qn=1){const mr=$e.get("icon-padding").evaluate(xn,{},gn),gr=mr&&mr.values;return[gr[0]*Qn,gr[1]*Qn,gr[2]*Qn,gr[3]*Qn]})(ht,o,tt,h.tilePixelRatio),De=ht.get("text-max-angle")/180*Math.PI,He=ht.get("text-rotation-alignment")!=="viewport"&&ht.get("symbol-placement")!=="point",mn=ht.get("icon-rotation-alignment")==="map"&&ht.get("symbol-placement")!=="point",nn=ht.get("symbol-placement"),tn=Kt/2,Ge=ht.get("icon-text-fit");let un;v&&Ge!=="none"&&(h.allowVerticalPlacement&&d.vertical&&(un=Dd(v,d.vertical,Ge,ht.get("icon-text-fit-padding"),gt,Dt)),_t&&(v=Dd(v,_t,Ge,ht.get("icon-text-fit-padding"),gt,Dt)));const We=($e,xn)=>{xn.x<0||xn.x>=Nr||xn.y<0||xn.y>=Nr||(function(gn,Qn,mr,gr,Ma,mo,Ys,fa,Pr,Qa,ks,ms,Ea,Aa,gs,ys,Ja,go,kr,na,si,_s,ts,Fr,ia){const Nl=gn.addToLineVertexArray(Qn,mr);let Uo,Os,Bl,gl,Va=0,Bu=0,Zd=0,Ev=0,ny=-1,iy=-1;const Tc={};let Av=Cu("");if(gn.allowVerticalPlacement&&gr.vertical){const Ds=fa.layout.get("text-rotate").evaluate(si,{},Fr)+90;Bl=new Ud(Pr,Qn,Qa,ks,ms,gr.vertical,Ea,Aa,gs,Ds),Ys&&(gl=new Ud(Pr,Qn,Qa,ks,ms,Ys,Ja,go,gs,Ds))}if(Ma){const Ds=fa.layout.get("icon-rotate").evaluate(si,{}),$o=fa.layout.get("icon-text-fit")!=="none",Lh=Nd(Ma,Ds,ts,$o),yl=Ys?Nd(Ys,Ds,ts,$o):void 0;Os=new Ud(Pr,Qn,Qa,ks,ms,Ma,Ja,go,!1,Ds),Va=4*Lh.length;const Rh=gn.iconSizeData;let _l=null;Rh.kind==="source"?(_l=[zu*fa.layout.get("icon-size").evaluate(si,{})],_l[0]>Hc&&pe(`${gn.layerIds[0]}: Value for "icon-size" is >= ${kf}. Reduce your "icon-size".`)):Rh.kind==="composite"&&(_l=[zu*_s.compositeIconSizes[0].evaluate(si,{},Fr),zu*_s.compositeIconSizes[1].evaluate(si,{},Fr)],(_l[0]>Hc||_l[1]>Hc)&&pe(`${gn.layerIds[0]}: Value for "icon-size" is >= ${kf}. Reduce your "icon-size".`)),gn.addSymbols(gn.icon,Lh,_l,na,kr,si,a.ai.none,Qn,Nl.lineStartIndex,Nl.lineLength,-1,Fr),ny=gn.icon.placedSymbolArray.length-1,yl&&(Bu=4*yl.length,gn.addSymbols(gn.icon,yl,_l,na,kr,si,a.ai.vertical,Qn,Nl.lineStartIndex,Nl.lineLength,-1,Fr),iy=gn.icon.placedSymbolArray.length-1)}const Cv=Object.keys(gr.horizontal);for(const Ds of Cv){const $o=gr.horizontal[Ds];if(!Uo){Av=Cu($o.text);const yl=fa.layout.get("text-rotate").evaluate(si,{},Fr);Uo=new Ud(Pr,Qn,Qa,ks,ms,$o,Ea,Aa,gs,yl)}const Lh=$o.positionedLines.length===1;if(Zd+=zh(gn,Qn,$o,mo,fa,gs,si,ys,Nl,gr.vertical?a.ai.horizontal:a.ai.horizontalOnly,Lh?Cv:[Ds],Tc,ny,_s,Fr),Lh)break}gr.vertical&&(Ev+=zh(gn,Qn,gr.vertical,mo,fa,gs,si,ys,Nl,a.ai.vertical,["vertical"],Tc,iy,_s,Fr));const Pv=Uo?Uo.boxStartIndex:gn.collisionBoxArray.length,zf=Uo?Uo.boxEndIndex:gn.collisionBoxArray.length,Gd=Bl?Bl.boxStartIndex:gn.collisionBoxArray.length,kv=Bl?Bl.boxEndIndex:gn.collisionBoxArray.length,Rb=Os?Os.boxStartIndex:gn.collisionBoxArray.length,Lf=Os?Os.boxEndIndex:gn.collisionBoxArray.length,Yd=gl?gl.boxStartIndex:gn.collisionBoxArray.length,Ov=gl?gl.boxEndIndex:gn.collisionBoxArray.length;let Vo=-1;const Rf=(Ds,$o)=>Ds&&Ds.circleDiameter?Math.max(Ds.circleDiameter,$o):$o;Vo=Rf(Uo,Vo),Vo=Rf(Bl,Vo),Vo=Rf(Os,Vo),Vo=Rf(gl,Vo);const km=Vo>-1?1:0;km&&(Vo*=ia/Br),gn.glyphOffsetArray.length>=No.MAX_GLYPHS&&pe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),si.sortKey!==void 0&&gn.addToSortKeyRanges(gn.symbolInstances.length,si.sortKey);const Om=Mv(fa,si,Fr),[Dv,Iv]=(function(Ds,$o){const Lh=Ds.length,yl=$o?.values;if(yl?.length>0)for(let Rh=0;Rh<yl.length;Rh+=2){const _l=yl[Rh+1];Ds.emplaceBack(a.aq[yl[Rh]],_l[0],_l[1])}return[Lh,Ds.length]})(gn.textAnchorOffsets,Om);gn.symbolInstances.emplaceBack(Qn.x,Qn.y,Tc.right>=0?Tc.right:-1,Tc.center>=0?Tc.center:-1,Tc.left>=0?Tc.left:-1,Tc.vertical||-1,ny,iy,Av,Pv,zf,Gd,kv,Rb,Lf,Yd,Ov,Qa,Zd,Ev,Va,Bu,km,0,Ea,Vo,Dv,Iv)})(h,xn,$e,d,v,T,un,h.layers[0],h.collisionBoxArray,o.index,o.sourceLayerIndex,h.index,Ut,[ae,ae,ae,ae],He,U,ne,oe,mn,gt,o,P,G,tt,k)};if(nn==="line")for(const $e of Kg(o.geometry,0,0,Nr,Nr)){const xn=xv($e,Kt,De,d.vertical||_t,v,24,Ht,h.overscaling,Nr);for(const gn of xn)_t&&Tm(h,_t.text,tn,gn)||We($e,gn)}else if(nn==="line-center"){for(const $e of o.geometry)if($e.length>1){const xn=zb($e,De,d.vertical||_t,v,24,Ht);xn&&We($e,xn)}}else if(o.type==="Polygon")for(const $e of Hp(o.geometry,0)){const xn=wv($e,16);We($e[0],new Sc(xn.x,xn.y,0))}else if(o.type==="LineString")for(const $e of o.geometry)We($e,new Sc($e[0].x,$e[0].y,0));else if(o.type==="Point")for(const $e of o.geometry)for(const xn of $e)We([xn],new Sc(xn.x,xn.y,0))}function zh(h,o,d,v,T,P,k,R,U,G,tt,ot,ht,gt,_t){const Dt=(function(ne,Kt,ae,oe,De,He,mn,nn){const tn=oe.layout.get("text-rotate").evaluate(He,{})*Math.PI/180,Ge=[];for(const un of Kt.positionedLines)for(const We of un.positionedGlyphs){if(!We.rect)continue;const $e=We.rect||{};let xn=Pd+1,gn=!0,Qn=1,mr=0;const gr=(De||nn)&&We.vertical,Ma=We.metrics.advance*We.scale/2;if(nn&&Kt.verticalizable&&(mr=un.lineOffset/2-(We.imageName?-(Br-We.metrics.width*We.scale)/2:(We.scale-1)*Br)),We.imageName){const na=mn[We.imageName];gn=na.sdf,Qn=na.pixelRatio,xn=jr/Qn}const mo=De?[We.x+Ma,We.y]:[0,0];let Ys=De?[0,0]:[We.x+Ma+ae[0],We.y+ae[1]-mr],fa=[0,0];gr&&(fa=Ys,Ys=[0,0]);const Pr=We.metrics.isDoubleResolution?2:1,Qa=(We.metrics.left-xn)*We.scale-Ma+Ys[0],ks=(-We.metrics.top-xn)*We.scale+Ys[1],ms=Qa+$e.w/Pr*We.scale/Qn,Ea=ks+$e.h/Pr*We.scale/Qn,Aa=new O(Qa,ks),gs=new O(ms,ks),ys=new O(Qa,Ea),Ja=new O(ms,Ea);if(gr){const na=new O(-Ma,Ma-ml),si=-Math.PI/2,_s=Br/2-Ma,ts=new O(5-ml-_s,-(We.imageName?_s:0)),Fr=new O(...fa);Aa._rotateAround(si,na)._add(ts)._add(Fr),gs._rotateAround(si,na)._add(ts)._add(Fr),ys._rotateAround(si,na)._add(ts)._add(Fr),Ja._rotateAround(si,na)._add(ts)._add(Fr)}if(tn){const na=Math.sin(tn),si=Math.cos(tn),_s=[si,-na,na,si];Aa._matMult(_s),gs._matMult(_s),ys._matMult(_s),Ja._matMult(_s)}const go=new O(0,0),kr=new O(0,0);Ge.push({tl:Aa,tr:gs,bl:ys,br:Ja,tex:$e,writingMode:Kt.writingMode,glyphOffset:mo,sectionIndex:We.sectionIndex,isSDF:gn,pixelOffsetTL:go,pixelOffsetBR:kr,minFontScaleX:0,minFontScaleY:0})}return Ge})(0,d,R,T,P,k,v,h.allowVerticalPlacement),Ut=h.textSizeData;let Ht=null;Ut.kind==="source"?(Ht=[zu*T.layout.get("text-size").evaluate(k,{})],Ht[0]>Hc&&pe(`${h.layerIds[0]}: Value for "text-size" is >= ${kf}. Reduce your "text-size".`)):Ut.kind==="composite"&&(Ht=[zu*gt.compositeTextSizes[0].evaluate(k,{},_t),zu*gt.compositeTextSizes[1].evaluate(k,{},_t)],(Ht[0]>Hc||Ht[1]>Hc)&&pe(`${h.layerIds[0]}: Value for "text-size" is >= ${kf}. Reduce your "text-size".`)),h.addSymbols(h.text,Dt,Ht,R,P,k,G,o,U.lineStartIndex,U.lineLength,ht,_t);for(const ne of tt)ot[ne]=h.text.placedSymbolArray.length-1;return 4*Dt.length}function Sm(h){for(const o in h)return h[o];return null}function Tm(h,o,d,v){const T=h.compareText;if(o in T){const P=T[o];for(let k=P.length-1;k>=0;k--)if(v.dist(P[k])<d)return!0}else T[o]=[];return T[o].push(v),!1}const Mm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Nu{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,v]=new Uint8Array(o,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const T=v>>4;if(T!==1)throw new Error(`Got v${T} data when expected v1.`);const P=Mm[15&v];if(!P)throw new Error("Unrecognized array type.");const[k]=new Uint16Array(o,2,1),[R]=new Uint32Array(o,4,1);return new Nu(R,k,P,o)}constructor(o,d=64,v=Float64Array,T){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=v,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const P=Mm.indexOf(this.ArrayType),k=2*o*this.ArrayType.BYTES_PER_ELEMENT,R=o*this.IndexArrayType.BYTES_PER_ELEMENT,U=(8-R%8)%8;if(P<0)throw new Error(`Unexpected typed array class: ${v}.`);T&&T instanceof ArrayBuffer?(this.data=T,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+R+U,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+k+R+U),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+R+U,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+P]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=o)}add(o,d){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=o,this.coords[this._pos++]=d,v}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return Rl(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,d,v,T){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:P,coords:k,nodeSize:R}=this,U=[0,P.length-1,0],G=[];for(;U.length;){const tt=U.pop()||0,ot=U.pop()||0,ht=U.pop()||0;if(ot-ht<=R){for(let Ut=ht;Ut<=ot;Ut++){const Ht=k[2*Ut],ne=k[2*Ut+1];Ht>=o&&Ht<=v&&ne>=d&&ne<=T&&G.push(P[Ut])}continue}const gt=ht+ot>>1,_t=k[2*gt],Dt=k[2*gt+1];_t>=o&&_t<=v&&Dt>=d&&Dt<=T&&G.push(P[gt]),(tt===0?o<=_t:d<=Dt)&&(U.push(ht),U.push(gt-1),U.push(1-tt)),(tt===0?v>=_t:T>=Dt)&&(U.push(gt+1),U.push(ot),U.push(1-tt))}return G}within(o,d,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:P,nodeSize:k}=this,R=[0,T.length-1,0],U=[],G=v*v;for(;R.length;){const tt=R.pop()||0,ot=R.pop()||0,ht=R.pop()||0;if(ot-ht<=k){for(let Ut=ht;Ut<=ot;Ut++)ey(P[2*Ut],P[2*Ut+1],o,d)<=G&&U.push(T[Ut]);continue}const gt=ht+ot>>1,_t=P[2*gt],Dt=P[2*gt+1];ey(_t,Dt,o,d)<=G&&U.push(T[gt]),(tt===0?o-v<=_t:d-v<=Dt)&&(R.push(ht),R.push(gt-1),R.push(1-tt)),(tt===0?o+v>=_t:d+v>=Dt)&&(R.push(gt+1),R.push(ot),R.push(1-tt))}return U}}function Rl(h,o,d,v,T,P){if(T-v<=d)return;const k=v+T>>1;If(h,o,k,v,T,P),Rl(h,o,d,v,k-1,1-P),Rl(h,o,d,k+1,T,1-P)}function If(h,o,d,v,T,P){for(;T>v;){if(T-v>600){const G=T-v+1,tt=d-v+1,ot=Math.log(G),ht=.5*Math.exp(2*ot/3),gt=.5*Math.sqrt(ot*ht*(G-ht)/G)*(tt-G/2<0?-1:1);If(h,o,d,Math.max(v,Math.floor(d-tt*ht/G+gt)),Math.min(T,Math.floor(d+(G-tt)*ht/G+gt)),P)}const k=o[2*d+P];let R=v,U=T;for(Vd(h,o,v,d),o[2*T+P]>k&&Vd(h,o,v,T);R<U;){for(Vd(h,o,R,U),R++,U--;o[2*R+P]<k;)R++;for(;o[2*U+P]>k;)U--}o[2*v+P]===k?Vd(h,o,v,U):(U++,Vd(h,o,U,T)),U<=d&&(v=U+1),d<=U&&(T=U-1)}}function Vd(h,o,d,v){Em(h,d,v),Em(o,2*d,2*v),Em(o,2*d+1,2*v+1)}function Em(h,o,d){const v=h[o];h[o]=h[d],h[d]=v}function ey(h,o,d,v){const T=h-d,P=o-v;return T*T+P*P}var Am;a.bh=void 0,(Am=a.bh||(a.bh={})).create="create",Am.load="load",Am.fullLoad="fullLoad";let $d=null,qd=[];const Hd=1e3/60,Cm="loadTime",Pm="fullLoadTime",Lb={mark(h){performance.mark(h)},frame(h){const o=h;$d!=null&&qd.push(o-$d),$d=o},clearMetrics(){$d=null,qd=[],performance.clearMeasures(Cm),performance.clearMeasures(Pm);for(const h in a.bh)performance.clearMarks(a.bh[h])},getPerformanceMetrics(){performance.measure(Cm,a.bh.create,a.bh.load),performance.measure(Pm,a.bh.create,a.bh.fullLoad);const h=performance.getEntriesByName(Cm)[0].duration,o=performance.getEntriesByName(Pm)[0].duration,d=qd.length,v=1/(qd.reduce(((P,k)=>P+k),0)/d/1e3),T=qd.filter((P=>P>Hd)).reduce(((P,k)=>P+(k-Hd)/Hd),0);return{loadTime:h,fullLoadTime:o,fps:v,percentDroppedFrames:T/(d+T)*100,totalFrames:d}}};a.$=function(h,o,d){var v,T,P,k,R,U,G,tt,ot,ht,gt,_t,Dt=d[0],Ut=d[1],Ht=d[2];return o===h?(h[12]=o[0]*Dt+o[4]*Ut+o[8]*Ht+o[12],h[13]=o[1]*Dt+o[5]*Ut+o[9]*Ht+o[13],h[14]=o[2]*Dt+o[6]*Ut+o[10]*Ht+o[14],h[15]=o[3]*Dt+o[7]*Ut+o[11]*Ht+o[15]):(T=o[1],P=o[2],k=o[3],R=o[4],U=o[5],G=o[6],tt=o[7],ot=o[8],ht=o[9],gt=o[10],_t=o[11],h[0]=v=o[0],h[1]=T,h[2]=P,h[3]=k,h[4]=R,h[5]=U,h[6]=G,h[7]=tt,h[8]=ot,h[9]=ht,h[10]=gt,h[11]=_t,h[12]=v*Dt+R*Ut+ot*Ht+o[12],h[13]=T*Dt+U*Ut+ht*Ht+o[13],h[14]=P*Dt+G*Ut+gt*Ht+o[14],h[15]=k*Dt+tt*Ut+_t*Ht+o[15]),h},a.A=Vc,a.B=us,a.C=class{constructor(h,o,d){this.receive=v=>{const T=v.data,P=T.id;if(P&&(!T.targetMapId||this.mapId===T.targetMapId))if(T.type==="<cancel>"){delete this.tasks[P];const k=this.cancelCallbacks[P];delete this.cancelCallbacks[P],k&&k()}else Ct()||T.mustQueue?(this.tasks[P]=T,this.taskQueue.push(P),this.invoker.trigger()):this.processTask(P,T)},this.process=()=>{if(!this.taskQueue.length)return;const v=this.taskQueue.shift(),T=this.tasks[v];delete this.tasks[v],this.taskQueue.length&&this.invoker.trigger(),T&&this.processTask(v,T)},this.target=h,this.parent=o,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new pm(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ct()?h:window}send(h,o,d,v,T=!1){const P=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[P]=d);const k=[],R={id:P,type:h,hasCallback:!!d,targetMapId:v,mustQueue:T,sourceMapId:this.mapId,data:ao(o,k)};return this.target.postMessage(R,{transfer:k}),{cancel:()=>{d&&delete this.callbacks[P],this.target.postMessage({id:P,type:"<cancel>",targetMapId:v,sourceMapId:this.mapId})}}}processTask(h,o){if(o.type==="<response>"){const d=this.callbacks[h];delete this.callbacks[h],d&&(o.error?d(ko(o.error)):d(null,ko(o.data)))}else{let d=!1;const v=[],T=o.hasCallback?(R,U)=>{d=!0,delete this.cancelCallbacks[h];const G={id:h,type:"<response>",sourceMapId:this.mapId,error:R?ao(R):null,data:ao(U,v)};this.target.postMessage(G,{transfer:v})}:R=>{d=!0};let P=null;const k=ko(o.data);if(this.parent[o.type])P=this.parent[o.type](o.sourceMapId,k,T);else if("getWorkerSource"in this.parent){const R=o.type.split(".");P=this.parent.getWorkerSource(o.sourceMapId,R[0],k.source)[R[1]](k,T)}else T(new Error(`Could not find function ${o.type}`));!d&&P&&P.cancel&&(this.cancelCallbacks[h]=P.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.D=sn,a.E=Rn,a.F=function(h,o){const d={};for(let v=0;v<o.length;v++){const T=o[v];T in h&&(d[T]=h[T])}return d},a.G=Ru,a.H=mm,a.I=om,a.J=Y,a.K=W,a.L=Cr,a.M=ft,a.N=Nr,a.O=Fo,a.P=O,a.Q=Ri,a.R=Lo,a.S=er,a.T=Le,a.U=Of,a.V=class extends hs{},a.W=ym,a.X=function(h,o){const d=window.document.createElement("video");d.muted=!0,d.onloadstart=function(){o(null,d)};for(let v=0;v<h.length;v++){const T=window.document.createElement("source");Be(h[v])||(d.crossOrigin="Anonymous"),T.src=h[v],d.appendChild(T)}return{cancel:()=>{}}},a.Y=Fe,a.Z=function(){var h=new Vc(16);return Vc!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},a._=g,a.a=Bt,a.a$=class extends pt{},a.a0=function(h,o,d){var v=d[0],T=d[1],P=d[2];return h[0]=o[0]*v,h[1]=o[1]*v,h[2]=o[2]*v,h[3]=o[3]*v,h[4]=o[4]*T,h[5]=o[5]*T,h[6]=o[6]*T,h[7]=o[7]*T,h[8]=o[8]*P,h[9]=o[9]*P,h[10]=o[10]*P,h[11]=o[11]*P,h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15],h},a.a1=xg,a.a2=function(){return ut++},a.a3=Rt,a.a4=No,a.a5=function(){mt.isLoading()||mt.isLoaded()||q()!=="deferred"||nt()},a.a6=Us,a.a7=iu,a.a8=Ft,a.a9=Ld,a.aA=p,a.aB=function(h){h=h.slice();const o=Object.create(null);for(let d=0;d<h.length;d++)o[h[d].id]=h[d];for(let d=0;d<h.length;d++)"ref"in h[d]&&(h[d]=$i(h[d],o[h[d].ref]));return h},a.aC=function(h){if(h.type==="custom")return new dm(h);switch(h.type){case"background":return new Bo(h);case"circle":return new j_(h);case"fill":return new J_(h);case"fill-extrusion":return new sv(h);case"heatmap":return new V_(h);case"hillshade":return new $_(h);case"line":return new mc(h);case"raster":return new mv(h);case"symbol":return new Gs(h)}},a.aD=St,a.aE=function(h,o){if(!h)return[{command:fn.setStyle,args:[o]}];let d=[];try{if(!ni(h.version,o.version))return[{command:fn.setStyle,args:[o]}];ni(h.center,o.center)||d.push({command:fn.setCenter,args:[o.center]}),ni(h.zoom,o.zoom)||d.push({command:fn.setZoom,args:[o.zoom]}),ni(h.bearing,o.bearing)||d.push({command:fn.setBearing,args:[o.bearing]}),ni(h.pitch,o.pitch)||d.push({command:fn.setPitch,args:[o.pitch]}),ni(h.sprite,o.sprite)||d.push({command:fn.setSprite,args:[o.sprite]}),ni(h.glyphs,o.glyphs)||d.push({command:fn.setGlyphs,args:[o.glyphs]}),ni(h.transition,o.transition)||d.push({command:fn.setTransition,args:[o.transition]}),ni(h.light,o.light)||d.push({command:fn.setLight,args:[o.light]});const v={},T=[];(function(k,R,U,G){let tt;for(tt in R=R||{},k=k||{})Object.prototype.hasOwnProperty.call(k,tt)&&(Object.prototype.hasOwnProperty.call(R,tt)||mi(tt,U,G));for(tt in R)Object.prototype.hasOwnProperty.call(R,tt)&&(Object.prototype.hasOwnProperty.call(k,tt)?ni(k[tt],R[tt])||(k[tt].type==="geojson"&&R[tt].type==="geojson"&&Dr(k,R,tt)?U.push({command:fn.setGeoJSONSourceData,args:[tt,R[tt].data]}):Ui(tt,R,U,G)):Qi(tt,R,U))})(h.sources,o.sources,T,v);const P=[];h.layers&&h.layers.forEach((k=>{v[k.source]?d.push({command:fn.removeLayer,args:[k.id]}):P.push(k)})),d=d.concat(T),(function(k,R,U){R=R||[];const G=(k=k||[]).map(Oa),tt=R.map(Oa),ot=k.reduce(Vr,{}),ht=R.reduce(Vr,{}),gt=G.slice(),_t=Object.create(null);let Dt,Ut,Ht,ne,Kt,ae,oe;for(Dt=0,Ut=0;Dt<G.length;Dt++)Ht=G[Dt],Object.prototype.hasOwnProperty.call(ht,Ht)?Ut++:(U.push({command:fn.removeLayer,args:[Ht]}),gt.splice(gt.indexOf(Ht,Ut),1));for(Dt=0,Ut=0;Dt<tt.length;Dt++)Ht=tt[tt.length-1-Dt],gt[gt.length-1-Dt]!==Ht&&(Object.prototype.hasOwnProperty.call(ot,Ht)?(U.push({command:fn.removeLayer,args:[Ht]}),gt.splice(gt.lastIndexOf(Ht,gt.length-Ut),1)):Ut++,ae=gt[gt.length-Dt],U.push({command:fn.addLayer,args:[ht[Ht],ae]}),gt.splice(gt.length-Dt,0,Ht),_t[Ht]=!0);for(Dt=0;Dt<tt.length;Dt++)if(Ht=tt[Dt],ne=ot[Ht],Kt=ht[Ht],!_t[Ht]&&!ni(ne,Kt))if(ni(ne.source,Kt.source)&&ni(ne["source-layer"],Kt["source-layer"])&&ni(ne.type,Kt.type)){for(oe in ws(ne.layout,Kt.layout,U,Ht,null,fn.setLayoutProperty),ws(ne.paint,Kt.paint,U,Ht,null,fn.setPaintProperty),ni(ne.filter,Kt.filter)||U.push({command:fn.setFilter,args:[Ht,Kt.filter]}),ni(ne.minzoom,Kt.minzoom)&&ni(ne.maxzoom,Kt.maxzoom)||U.push({command:fn.setLayerZoomRange,args:[Ht,Kt.minzoom,Kt.maxzoom]}),ne)Object.prototype.hasOwnProperty.call(ne,oe)&&oe!=="layout"&&oe!=="paint"&&oe!=="filter"&&oe!=="metadata"&&oe!=="minzoom"&&oe!=="maxzoom"&&(oe.indexOf("paint.")===0?ws(ne[oe],Kt[oe],U,Ht,oe.slice(6),fn.setPaintProperty):ni(ne[oe],Kt[oe])||U.push({command:fn.setLayerProperty,args:[Ht,oe,Kt[oe]]}));for(oe in Kt)Object.prototype.hasOwnProperty.call(Kt,oe)&&!Object.prototype.hasOwnProperty.call(ne,oe)&&oe!=="layout"&&oe!=="paint"&&oe!=="filter"&&oe!=="metadata"&&oe!=="minzoom"&&oe!=="maxzoom"&&(oe.indexOf("paint.")===0?ws(ne[oe],Kt[oe],U,Ht,oe.slice(6),fn.setPaintProperty):ni(ne[oe],Kt[oe])||U.push({command:fn.setLayerProperty,args:[Ht,oe,Kt[oe]]}))}else U.push({command:fn.removeLayer,args:[Ht]}),ae=gt[gt.lastIndexOf(Ht)+1],U.push({command:fn.addLayer,args:[Kt,ae]})})(P,o.layers,d)}catch(v){console.warn("Unable to compute style diff:",v),d=[{command:fn.setStyle,args:[o]}]}return d},a.aF=function(h){const o=[],d=h.id;return d===void 0&&o.push({message:`layers.${d}: missing required property "id"`}),h.render===void 0&&o.push({message:`layers.${d}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&o.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),o},a.aG=function h(o,d){if(Array.isArray(o)){if(!Array.isArray(d)||o.length!==d.length)return!1;for(let v=0;v<o.length;v++)if(!h(o[v],d[v]))return!1;return!0}if(typeof o=="object"&&o!==null&&d!==null){if(typeof d!="object"||Object.keys(o).length!==Object.keys(d).length)return!1;for(const v in o)if(!h(o[v],d[v]))return!1;return!0}return o===d},a.aH=xt,a.aI=wt,a.aJ=D,a.aK=function(h){return h({pluginStatus:La,pluginURL:Do}),D.on("pluginStateChange",h),h},a.aL=class extends nu{constructor(h,o){super(h,o),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},a.aM=Nc,a.aN=class extends nu{constructor(h,o){super(h,o),this.current=Pu}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let o=1;o<16;o++)if(h[o]!==this.current[o]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},a.aO=Hs,a.aP=class extends nu{constructor(h,o){super(h,o),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},a.aQ=class extends nu{constructor(h,o){super(h,o),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},a.aR=oo,a.aS=function(h,o,d,v,T,P,k){var R=1/(o-d),U=1/(v-T),G=1/(P-k);return h[0]=-2*R,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*U,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*G,h[11]=0,h[12]=(o+d)*R,h[13]=(T+v)*U,h[14]=(k+P)*G,h[15]=1,h},a.aT=Un,a.aU=B_,a.aV=class extends b{},a.aW=kb,a.aX=class extends C{},a.aY=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},a.aZ=Sg,a.a_=qe,a.aa=function(h){const o={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,v,T,P)=>{const k=T||P;return o[v]=!k||k.toLowerCase(),""})),o["max-age"]){const d=parseInt(o["max-age"],10);isNaN(d)?delete o["max-age"]:o["max-age"]=d}return o},a.ab=function(h,o){const d=[];for(const v in h)v in o||d.push(v);return d},a.ac=function(h){if(Tt==null){const o=h.navigator?h.navigator.userAgent:null;Tt=!!h.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Tt},a.ad=st,a.ae=function(h,o,d){var v=Math.sin(d),T=Math.cos(d),P=o[0],k=o[1],R=o[2],U=o[3],G=o[4],tt=o[5],ot=o[6],ht=o[7];return o!==h&&(h[8]=o[8],h[9]=o[9],h[10]=o[10],h[11]=o[11],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15]),h[0]=P*T+G*v,h[1]=k*T+tt*v,h[2]=R*T+ot*v,h[3]=U*T+ht*v,h[4]=G*T-P*v,h[5]=tt*T-k*v,h[6]=ot*T-R*v,h[7]=ht*T-U*v,h},a.af=function(h){var o=new Vc(16);return o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[3],o[4]=h[4],o[5]=h[5],o[6]=h[6],o[7]=h[7],o[8]=h[8],o[9]=h[9],o[10]=h[10],o[11]=h[11],o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15],o},a.ag=gd,a.ah=function(h,o){let d=0,v=0;if(h.kind==="constant")v=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:T,minZoom:P,maxZoom:k}=h,R=T?st(Wi.interpolationFactor(T,o,P,k),0,1):0;h.kind==="camera"?v=us.number(h.minSize,h.maxSize,R):d=R}return{uSizeT:d,uSize:v}},a.aj=function(h,{uSize:o,uSizeT:d},{lowerSize:v,upperSize:T}){return h.kind==="source"?v/zu:h.kind==="composite"?us.number(v/zu,T/zu,d):o},a.ak=fo,a.al=function(h,o,d,v){const T=o.y-h.y,P=o.x-h.x,k=v.y-d.y,R=v.x-d.x,U=k*P-R*T;if(U===0)return null;const G=(R*(h.y-d.y)-k*(h.x-d.x))/U;return new O(h.x+G*P,h.y+G*T)},a.am=Kg,a.an=Jr,a.ao=Bp,a.ap=Br,a.ar=ur,a.as=function(h,o){var d=o[0],v=o[1],T=o[2],P=o[3],k=o[4],R=o[5],U=o[6],G=o[7],tt=o[8],ot=o[9],ht=o[10],gt=o[11],_t=o[12],Dt=o[13],Ut=o[14],Ht=o[15],ne=d*R-v*k,Kt=d*U-T*k,ae=d*G-P*k,oe=v*U-T*R,De=v*G-P*R,He=T*G-P*U,mn=tt*Dt-ot*_t,nn=tt*Ut-ht*_t,tn=tt*Ht-gt*_t,Ge=ot*Ut-ht*Dt,un=ot*Ht-gt*Dt,We=ht*Ht-gt*Ut,$e=ne*We-Kt*un+ae*Ge+oe*tn-De*nn+He*mn;return $e?(h[0]=(R*We-U*un+G*Ge)*($e=1/$e),h[1]=(T*un-v*We-P*Ge)*$e,h[2]=(Dt*He-Ut*De+Ht*oe)*$e,h[3]=(ht*De-ot*He-gt*oe)*$e,h[4]=(U*tn-k*We-G*nn)*$e,h[5]=(d*We-T*tn+P*nn)*$e,h[6]=(Ut*ae-_t*He-Ht*Kt)*$e,h[7]=(tt*He-ht*ae+gt*Kt)*$e,h[8]=(k*un-R*tn+G*mn)*$e,h[9]=(v*tn-d*un-P*mn)*$e,h[10]=(_t*De-Dt*ae+Ht*ne)*$e,h[11]=(ot*ae-tt*De-gt*ne)*$e,h[12]=(R*nn-k*Ge-U*mn)*$e,h[13]=(d*Ge-v*nn+T*mn)*$e,h[14]=(Dt*Kt-_t*oe-Ut*ne)*$e,h[15]=(tt*oe-ot*Kt+ht*ne)*$e,h):null},a.at=ty,a.au=um,a.av=Nu,a.aw=function(){const h={},o=ge.$version;for(const d in ge.$root){const v=ge.$root[d];if(v.required){let T=null;T=d==="version"?o:v.type==="array"?[]:{},T!=null&&(h[d]=T)}}return h},a.ax=fn,a.ay=ol,a.az=Gt,a.b=function(h,o){const d=new Blob([new Uint8Array(h)],{type:"image/png"});createImageBitmap(d).then((v=>{o(null,v)})).catch((v=>{o(new Error(`Could not load image because of ${v.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))},a.b0=Ra,a.b1=function(h,o){var d=h[0],v=h[1],T=h[2],P=h[3],k=h[4],R=h[5],U=h[6],G=h[7],tt=h[8],ot=h[9],ht=h[10],gt=h[11],_t=h[12],Dt=h[13],Ut=h[14],Ht=h[15],ne=o[0],Kt=o[1],ae=o[2],oe=o[3],De=o[4],He=o[5],mn=o[6],nn=o[7],tn=o[8],Ge=o[9],un=o[10],We=o[11],$e=o[12],xn=o[13],gn=o[14],Qn=o[15];return Math.abs(d-ne)<=fs*Math.max(1,Math.abs(d),Math.abs(ne))&&Math.abs(v-Kt)<=fs*Math.max(1,Math.abs(v),Math.abs(Kt))&&Math.abs(T-ae)<=fs*Math.max(1,Math.abs(T),Math.abs(ae))&&Math.abs(P-oe)<=fs*Math.max(1,Math.abs(P),Math.abs(oe))&&Math.abs(k-De)<=fs*Math.max(1,Math.abs(k),Math.abs(De))&&Math.abs(R-He)<=fs*Math.max(1,Math.abs(R),Math.abs(He))&&Math.abs(U-mn)<=fs*Math.max(1,Math.abs(U),Math.abs(mn))&&Math.abs(G-nn)<=fs*Math.max(1,Math.abs(G),Math.abs(nn))&&Math.abs(tt-tn)<=fs*Math.max(1,Math.abs(tt),Math.abs(tn))&&Math.abs(ot-Ge)<=fs*Math.max(1,Math.abs(ot),Math.abs(Ge))&&Math.abs(ht-un)<=fs*Math.max(1,Math.abs(ht),Math.abs(un))&&Math.abs(gt-We)<=fs*Math.max(1,Math.abs(gt),Math.abs(We))&&Math.abs(_t-$e)<=fs*Math.max(1,Math.abs(_t),Math.abs($e))&&Math.abs(Dt-xn)<=fs*Math.max(1,Math.abs(Dt),Math.abs(xn))&&Math.abs(Ut-gn)<=fs*Math.max(1,Math.abs(Ut),Math.abs(gn))&&Math.abs(Ht-Qn)<=fs*Math.max(1,Math.abs(Ht),Math.abs(Qn))},a.b2=function(h,o){return h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[8]=o[8],h[9]=o[9],h[10]=o[10],h[11]=o[11],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15],h},a.b3=function(h,o,d){return h[0]=o[0]*d[0],h[1]=o[1]*d[1],h[2]=o[2]*d[2],h[3]=o[3]*d[3],h},a.b4=function(h,o){return h[0]*o[0]+h[1]*o[1]+h[2]*o[2]+h[3]*o[3]},a.b5=ct,a.b6=po,a.b7=gm,a.b8=function(h,o,d,v,T){var P,k=1/Math.tan(o/2);return h[0]=k/d,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=k,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,T!=null&&T!==1/0?(h[10]=(T+v)*(P=1/(v-T)),h[14]=2*T*v*P):(h[10]=-1,h[14]=-2*v),h},a.b9=function(h,o,d){var v=Math.sin(d),T=Math.cos(d),P=o[4],k=o[5],R=o[6],U=o[7],G=o[8],tt=o[9],ot=o[10],ht=o[11];return o!==h&&(h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15]),h[4]=P*T+G*v,h[5]=k*T+tt*v,h[6]=R*T+ot*v,h[7]=U*T+ht*v,h[8]=G*T-P*v,h[9]=tt*T-k*v,h[10]=ot*T-R*v,h[11]=ht*T-U*v,h},a.bA=x,a.bB=gc,a.bC=ec,a.bD=mt,a.ba=X,a.bb=J,a.bc=function(h,o){return h[0]=o[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=o[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=o[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},a.bd=class extends hl{},a.be=Lu,a.bf=Wg,a.bg=Lb,a.bi=Ne,a.bj=function(h,o,d=!1){if(La===hc||La===eu||La===ul)throw new Error("setRTLTextPlugin cannot be called multiple times.");Do=ce.resolveURL(h),La=hc,Mu=o,w(),d||nt()},a.bk=q,a.bl=function(h,o){const d={};for(let T=0;T<h.length;T++){const P=o&&o[h[T].id]||Ql(h[T]);o&&(o[h[T].id]=P);let k=d[P];k||(k=d[P]=[]),k.push(h[T])}const v=[];for(const T in d)v.push(d[T]);return v},a.bm=Qe,a.bn=wc,a.bo=_m,a.bp=ho,a.bq=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=Nr/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const o=h.bucket.layers[0],d=o.layout,v=o._unevaluatedLayout._values,T={layoutIconSize:v["icon-size"].possiblyEvaluate(new Ft(h.bucket.zoom+1),h.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Ft(h.bucket.zoom+1),h.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Ft(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:G,maxZoom:tt}=h.bucket.textSizeData;T.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Ft(G),h.canonical),v["text-size"].possiblyEvaluate(new Ft(tt),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:G,maxZoom:tt}=h.bucket.iconSizeData;T.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Ft(G),h.canonical),v["icon-size"].possiblyEvaluate(new Ft(tt),h.canonical)]}const P=d.get("text-line-height")*Br,k=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",R=d.get("text-keep-upright"),U=d.get("text-size");for(const G of h.bucket.features){const tt=d.get("text-font").evaluate(G,{},h.canonical).join(","),ot=U.evaluate(G,{},h.canonical),ht=T.layoutTextSize.evaluate(G,{},h.canonical),gt=T.layoutIconSize.evaluate(G,{},h.canonical),_t={horizontal:{},vertical:void 0},Dt=G.text;let Ut,Ht=[0,0];if(Dt){const ae=Dt.toString(),oe=d.get("text-letter-spacing").evaluate(G,{},h.canonical)*Br,De=Dl(ae)?oe:0,He=d.get("text-anchor").evaluate(G,{},h.canonical),mn=Mv(o,G,h.canonical);if(!mn){const We=d.get("text-radial-offset").evaluate(G,{},h.canonical);Ht=We?Tv(He,[We*Br,bm]):d.get("text-offset").evaluate(G,{},h.canonical).map(($e=>$e*Br))}let nn=k?"center":d.get("text-justify").evaluate(G,{},h.canonical);const tn=d.get("symbol-placement"),Ge=tn==="point"?d.get("text-max-width").evaluate(G,{},h.canonical)*Br:0,un=()=>{h.bucket.allowVerticalPlacement&&$s(ae)&&(_t.vertical=Af(Dt,h.glyphMap,h.glyphPositions,h.imagePositions,tt,Ge,P,He,"left",De,Ht,a.ai.vertical,!0,tn,ht,ot))};if(!k&&mn){const We=new Set;if(nn==="auto")for(let xn=0;xn<mn.values.length;xn+=2)We.add(ty(mn.values[xn]));else We.add(nn);let $e=!1;for(const xn of We)if(!_t.horizontal[xn])if($e)_t.horizontal[xn]=_t.horizontal[0];else{const gn=Af(Dt,h.glyphMap,h.glyphPositions,h.imagePositions,tt,Ge,P,"center",xn,De,Ht,a.ai.horizontal,!1,tn,ht,ot);gn&&(_t.horizontal[xn]=gn,$e=gn.positionedLines.length===1)}un()}else{nn==="auto"&&(nn=ty(He));const We=Af(Dt,h.glyphMap,h.glyphPositions,h.imagePositions,tt,Ge,P,He,nn,De,Ht,a.ai.horizontal,!1,tn,ht,ot);We&&(_t.horizontal[nn]=We),un(),$s(ae)&&k&&R&&(_t.vertical=Af(Dt,h.glyphMap,h.glyphPositions,h.imagePositions,tt,Ge,P,He,nn,De,Ht,a.ai.vertical,!1,tn,ht,ot))}}let ne=!1;if(G.icon&&G.icon.name){const ae=h.imageMap[G.icon.name];ae&&(Ut=pv(h.imagePositions[G.icon.name],d.get("icon-offset").evaluate(G,{},h.canonical),d.get("icon-anchor").evaluate(G,{},h.canonical)),ne=!!ae.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=ne:h.bucket.sdfIcons!==ne&&pe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ae.pixelRatio!==h.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Kt=Sm(_t.horizontal)||_t.vertical;h.bucket.iconsInText=!!Kt&&Kt.iconsInText,(Kt||Ut)&&wm(h.bucket,G,_t,Ut,h.imageMap,T,ht,gt,Ht,ne,h.canonical)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},a.br=Md,a.bs=Sd,a.bt=Wp,a.bu=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},a.bv=ru,a.bw=pc,a.bx=function(h,o,d,v,T){return g(this,void 0,void 0,(function*(){if(W())try{return yield ft(h,o,d,v,T)}catch{}return(function(P,k,R,U,G){const tt=P.width,ot=P.height;Mt&&Lt||(Mt=new OffscreenCanvas(tt,ot),Lt=Mt.getContext("2d",{willReadFrequently:!0})),Mt.width=tt,Mt.height=ot,Lt.drawImage(P,0,0,tt,ot);const ht=Lt.getImageData(k,R,U,G);return Lt.clearRect(0,0,tt,ot),ht.data})(h,o,d,v,T)}))},a.by=gv,a.bz=y,a.c=Me,a.d=function(h,o){const d=new Image;d.onload=()=>{o(null,d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame((()=>{d.src=$t}))},d.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(h)],{type:"image/png"});d.src=h.byteLength?URL.createObjectURL(v):$t},a.e=it,a.f=function(h,o){return de(it(h,{type:"json"}),o)},a.g=Ce,a.h=ce,a.i=Ct,a.j=hn,a.k=Sn,a.l=on,a.m=de,a.n=function(h){return new ru(h).readFields(fv,[])},a.o=function(h,o,d){if(!h.length)return d(null,[]);let v=h.length;const T=new Array(h.length);let P=null;h.forEach(((k,R)=>{o(k,((U,G)=>{U&&(P=U),T[R]=G,--v==0&&d(P,T)}))}))},a.p=co,a.q=_f,a.r=bi,a.s=Be,a.t=pd,a.u=en,a.v=ge,a.w=pe,a.x=ro,a.y=Po,a.z=function([h,o,d]){return o+=90,o*=Math.PI/180,d*=Math.PI/180,{x:h*Math.cos(o)*Math.sin(d),y:h*Math.sin(o)*Math.sin(d),z:h*Math.cos(d)}}})),s(["./shared"],(function(a){class g{constructor(lt){this.keyCache={},lt&&this.replace(lt)}replace(lt){this._layerConfigs={},this._layers={},this.update(lt,[])}update(lt,dt){for(const zt of lt){this._layerConfigs[zt.id]=zt;const jt=this._layers[zt.id]=a.aC(zt);jt._featureFilter=a.a6(jt.filter),this.keyCache[zt.id]&&delete this.keyCache[zt.id]}for(const zt of dt)delete this.keyCache[zt],delete this._layerConfigs[zt],delete this._layers[zt];this.familiesBySource={};const Et=a.bl(Object.values(this._layerConfigs),this.keyCache);for(const zt of Et){const jt=zt.map((se=>this._layers[se.id])),ie=jt[0];if(ie.visibility==="none")continue;const Wt=ie.source||"";let qt=this.familiesBySource[Wt];qt||(qt=this.familiesBySource[Wt]={});const Jt=ie.sourceLayer||"_geojsonTileLayer";let Se=qt[Jt];Se||(Se=qt[Jt]=[]),Se.push(jt)}}}class y{constructor(lt){const dt={},Et=[];for(const Wt in lt){const qt=lt[Wt],Jt=dt[Wt]={};for(const Se in qt){const se=qt[+Se];if(!se||se.bitmap.width===0||se.bitmap.height===0)continue;const Oe={x:0,y:0,w:se.bitmap.width+2,h:se.bitmap.height+2};Et.push(Oe),Jt[Se]={rect:Oe,metrics:se.metrics}}}const{w:zt,h:jt}=a.p(Et),ie=new a.q({width:zt||1,height:jt||1});for(const Wt in lt){const qt=lt[Wt];for(const Jt in qt){const Se=qt[+Jt];if(!Se||Se.bitmap.width===0||Se.bitmap.height===0)continue;const se=dt[Wt][Jt].rect;a.q.copy(Se.bitmap,ie,{x:0,y:0},{x:se.x+1,y:se.y+1},Se.bitmap)}}this.image=ie,this.positions=dt}}a.bm("GlyphAtlas",y);class x{constructor(lt){this.tileID=new a.O(lt.tileID.overscaledZ,lt.tileID.wrap,lt.tileID.canonical.z,lt.tileID.canonical.x,lt.tileID.canonical.y),this.uid=lt.uid,this.zoom=lt.zoom,this.pixelRatio=lt.pixelRatio,this.tileSize=lt.tileSize,this.source=lt.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=lt.showCollisionBoxes,this.collectResourceTiming=!!lt.collectResourceTiming,this.returnDependencies=!!lt.returnDependencies,this.promoteId=lt.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(lt,dt,Et,zt,jt){this.status="parsing",this.data=lt,this.collisionBoxArray=new a.a3;const ie=new a.bn(Object.keys(lt.layers).sort()),Wt=new a.bo(this.tileID,this.promoteId);Wt.bucketLayerIDs=[];const qt={},Jt={featureIndex:Wt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Et},Se=dt.familiesBySource[this.source];for(const qn in Se){const Hn=lt.layers[qn];if(!Hn)continue;Hn.version===1&&a.w(`Vector tile source "${this.source}" layer "${qn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ji=ie.encode(qn),yi=[];for(let Oi=0;Oi<Hn.length;Oi++){const hr=Hn.feature(Oi),zr=Wt.getId(hr,qn);yi.push({feature:hr,id:zr,index:Oi,sourceLayerIndex:Ji})}for(const Oi of Se[qn]){const hr=Oi[0];hr.source!==this.source&&a.w(`layer.source = ${hr.source} does not equal this.source = ${this.source}`),hr.minzoom&&this.zoom<Math.floor(hr.minzoom)||hr.maxzoom&&this.zoom>=hr.maxzoom||hr.visibility!=="none"&&(E(Oi,this.zoom,Et),(qt[hr.id]=hr.createBucket({index:Wt.bucketLayerIDs.length,layers:Oi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ji,sourceID:this.source})).populate(yi,Jt,this.tileID.canonical),Wt.bucketLayerIDs.push(Oi.map((zr=>zr.id))))}}let se,Oe,yn,_n;const Ke=a.aH(Jt.glyphDependencies,(qn=>Object.keys(qn).map(Number)));this.inFlightDependencies.forEach((qn=>qn?.cancel())),this.inFlightDependencies=[];const an=++this.dependencySentinel;Object.keys(Ke).length?this.inFlightDependencies.push(zt.send("getGlyphs",{uid:this.uid,stacks:Ke,source:this.source,tileID:this.tileID,type:"glyphs"},((qn,Hn)=>{an===this.dependencySentinel&&(se||(se=qn,Oe=Hn,gi.call(this)))}))):Oe={};const Tn=Object.keys(Jt.iconDependencies);Tn.length?this.inFlightDependencies.push(zt.send("getImages",{icons:Tn,source:this.source,tileID:this.tileID,type:"icons"},((qn,Hn)=>{an===this.dependencySentinel&&(se||(se=qn,yn=Hn,gi.call(this)))}))):yn={};const Wn=Object.keys(Jt.patternDependencies);function gi(){if(se)return jt(se);if(Oe&&yn&&_n){const qn=new y(Oe),Hn=new a.bp(yn,_n);for(const Ji in qt){const yi=qt[Ji];yi instanceof a.a4?(E(yi.layers,this.zoom,Et),a.bq({bucket:yi,glyphMap:Oe,glyphPositions:qn.positions,imageMap:yn,imagePositions:Hn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):yi.hasPattern&&(yi instanceof a.br||yi instanceof a.bs||yi instanceof a.bt)&&(E(yi.layers,this.zoom,Et),yi.addFeatures(Jt,this.tileID.canonical,Hn.patternPositions))}this.status="done",jt(null,{buckets:Object.values(qt).filter((Ji=>!Ji.isEmpty())),featureIndex:Wt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qn.image,imageAtlas:Hn,glyphMap:this.returnDependencies?Oe:null,iconMap:this.returnDependencies?yn:null,glyphPositions:this.returnDependencies?qn.positions:null})}}Wn.length?this.inFlightDependencies.push(zt.send("getImages",{icons:Wn,source:this.source,tileID:this.tileID,type:"patterns"},((qn,Hn)=>{an===this.dependencySentinel&&(se||(se=qn,_n=Hn,gi.call(this)))}))):_n={},gi.call(this)}}function E(It,lt,dt){const Et=new a.a8(lt);for(const zt of It)zt.recalculate(Et,dt)}function O(It,lt){const dt=a.l(It.request,((Et,zt,jt,ie)=>{if(Et)lt(Et);else if(zt)try{const Wt=new a.bw.VectorTile(new a.bv(zt));lt(null,{vectorTile:Wt,rawData:zt,cacheControl:jt,expires:ie})}catch(Wt){const qt=new Uint8Array(zt);let Jt=`Unable to parse the tile at ${It.request.url}, `;Jt+=qt[0]===31&&qt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Wt.messge}`,lt(new Error(Jt))}}));return()=>{dt.cancel(),lt()}}class I{constructor(lt,dt,Et,zt){this.actor=lt,this.layerIndex=dt,this.availableImages=Et,this.loadVectorData=zt||O,this.fetching={},this.loading={},this.loaded={}}loadTile(lt,dt){const Et=lt.uid;this.loading||(this.loading={});const zt=!!(lt&&lt.request&&lt.request.collectResourceTiming)&&new a.bu(lt.request),jt=this.loading[Et]=new x(lt);jt.abort=this.loadVectorData(lt,((ie,Wt)=>{if(delete this.loading[Et],ie||!Wt)return jt.status="done",this.loaded[Et]=jt,dt(ie);const qt=Wt.rawData,Jt={};Wt.expires&&(Jt.expires=Wt.expires),Wt.cacheControl&&(Jt.cacheControl=Wt.cacheControl);const Se={};if(zt){const se=zt.finish();se&&(Se.resourceTiming=JSON.parse(JSON.stringify(se)))}jt.vectorTile=Wt.vectorTile,jt.parse(Wt.vectorTile,this.layerIndex,this.availableImages,this.actor,((se,Oe)=>{if(delete this.fetching[Et],se||!Oe)return dt(se);dt(null,a.e({rawTileData:qt.slice(0)},Oe,Jt,Se))})),this.loaded=this.loaded||{},this.loaded[Et]=jt,this.fetching[Et]={rawTileData:qt,cacheControl:Jt,resourceTiming:Se}}))}reloadTile(lt,dt){const Et=this.loaded,zt=lt.uid;if(Et&&Et[zt]){const jt=Et[zt];jt.showCollisionBoxes=lt.showCollisionBoxes,jt.status==="parsing"?jt.parse(jt.vectorTile,this.layerIndex,this.availableImages,this.actor,((ie,Wt)=>{if(ie||!Wt)return dt(ie,Wt);let qt;if(this.fetching[zt]){const{rawTileData:Jt,cacheControl:Se,resourceTiming:se}=this.fetching[zt];delete this.fetching[zt],qt=a.e({rawTileData:Jt.slice(0)},Wt,Se,se)}else qt=Wt;dt(null,qt)})):jt.status==="done"&&(jt.vectorTile?jt.parse(jt.vectorTile,this.layerIndex,this.availableImages,this.actor,dt):dt())}}abortTile(lt,dt){const Et=this.loading,zt=lt.uid;Et&&Et[zt]&&Et[zt].abort&&(Et[zt].abort(),delete Et[zt]),dt()}removeTile(lt,dt){const Et=this.loaded,zt=lt.uid;Et&&Et[zt]&&delete Et[zt],dt()}}class F{constructor(){this.loaded={}}loadTile(lt,dt){return a._(this,void 0,void 0,(function*(){const{uid:Et,encoding:zt,rawImageData:jt,redFactor:ie,greenFactor:Wt,blueFactor:qt,baseShift:Jt}=lt,Se=jt.width+2,se=jt.height+2,Oe=a.a(jt)?new a.R({width:Se,height:se},yield a.bx(jt,-1,-1,Se,se)):jt,yn=new a.by(Et,Oe,zt,ie,Wt,qt,Jt);this.loaded=this.loaded||{},this.loaded[Et]=yn,dt(null,yn)}))}removeTile(lt){const dt=this.loaded,Et=lt.uid;dt&&dt[Et]&&delete dt[Et]}}function V(It,lt){if(It.length!==0){$(It[0],lt);for(var dt=1;dt<It.length;dt++)$(It[dt],!lt)}}function $(It,lt){for(var dt=0,Et=0,zt=0,jt=It.length,ie=jt-1;zt<jt;ie=zt++){var Wt=(It[zt][0]-It[ie][0])*(It[ie][1]+It[zt][1]),qt=dt+Wt;Et+=Math.abs(dt)>=Math.abs(Wt)?dt-qt+Wt:Wt-qt+dt,dt=qt}dt+Et>=0!=!!lt&&It.reverse()}var K=a.bz((function It(lt,dt){var Et,zt=lt&&lt.type;if(zt==="FeatureCollection")for(Et=0;Et<lt.features.length;Et++)It(lt.features[Et],dt);else if(zt==="GeometryCollection")for(Et=0;Et<lt.geometries.length;Et++)It(lt.geometries[Et],dt);else if(zt==="Feature")It(lt.geometry,dt);else if(zt==="Polygon")V(lt.coordinates,dt);else if(zt==="MultiPolygon")for(Et=0;Et<lt.coordinates.length;Et++)V(lt.coordinates[Et],dt);return lt}));const Y=a.bw.VectorTileFeature.prototype.toGeoJSON;var W={exports:{}},X=a.bA,J=a.bw.VectorTileFeature,st=ct;function ct(It,lt){this.options=lt||{},this.features=It,this.length=It.length}function it(It,lt){this.id=typeof It.id=="number"?It.id:void 0,this.type=It.type,this.rawGeometry=It.type===1?[It.geometry]:It.geometry,this.properties=It.tags,this.extent=lt||4096}ct.prototype.feature=function(It){return new it(this.features[It],this.options.extent)},it.prototype.loadGeometry=function(){var It=this.rawGeometry;this.geometry=[];for(var lt=0;lt<It.length;lt++){for(var dt=It[lt],Et=[],zt=0;zt<dt.length;zt++)Et.push(new X(dt[zt][0],dt[zt][1]));this.geometry.push(Et)}return this.geometry},it.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var It=this.geometry,lt=1/0,dt=-1/0,Et=1/0,zt=-1/0,jt=0;jt<It.length;jt++)for(var ie=It[jt],Wt=0;Wt<ie.length;Wt++){var qt=ie[Wt];lt=Math.min(lt,qt.x),dt=Math.max(dt,qt.x),Et=Math.min(Et,qt.y),zt=Math.max(zt,qt.y)}return[lt,Et,dt,zt]},it.prototype.toGeoJSON=J.prototype.toGeoJSON;var ut=a.bB,xt=st;function wt(It){var lt=new ut;return(function(dt,Et){for(var zt in dt.layers)Et.writeMessage(3,St,dt.layers[zt])})(It,lt),lt.finish()}function St(It,lt){var dt;lt.writeVarintField(15,It.version||1),lt.writeStringField(1,It.name||""),lt.writeVarintField(5,It.extent||4096);var Et={keys:[],values:[],keycache:{},valuecache:{}};for(dt=0;dt<It.length;dt++)Et.feature=It.feature(dt),lt.writeMessage(2,le,Et);var zt=Et.keys;for(dt=0;dt<zt.length;dt++)lt.writeStringField(3,zt[dt]);var jt=Et.values;for(dt=0;dt<jt.length;dt++)lt.writeMessage(4,Tt,jt[dt])}function le(It,lt){var dt=It.feature;dt.id!==void 0&&lt.writeVarintField(1,dt.id),lt.writeMessage(2,pe,It),lt.writeVarintField(3,dt.type),lt.writeMessage(4,Ct,dt)}function pe(It,lt){var dt=It.feature,Et=It.keys,zt=It.values,jt=It.keycache,ie=It.valuecache;for(var Wt in dt.properties){var qt=dt.properties[Wt],Jt=jt[Wt];if(qt!==null){Jt===void 0&&(Et.push(Wt),jt[Wt]=Jt=Et.length-1),lt.writeVarint(Jt);var Se=typeof qt;Se!=="string"&&Se!=="boolean"&&Se!=="number"&&(qt=JSON.stringify(qt));var se=Se+":"+qt,Oe=ie[se];Oe===void 0&&(zt.push(qt),ie[se]=Oe=zt.length-1),lt.writeVarint(Oe)}}}function Te(It,lt){return(lt<<3)+(7&It)}function Nt(It){return It<<1^It>>31}function Ct(It,lt){for(var dt=It.loadGeometry(),Et=It.type,zt=0,jt=0,ie=dt.length,Wt=0;Wt<ie;Wt++){var qt=dt[Wt],Jt=1;Et===1&&(Jt=qt.length),lt.writeVarint(Te(1,Jt));for(var Se=Et===3?qt.length-1:qt.length,se=0;se<Se;se++){se===1&&Et!==1&&lt.writeVarint(Te(2,Se-1));var Oe=qt[se].x-zt,yn=qt[se].y-jt;lt.writeVarint(Nt(Oe)),lt.writeVarint(Nt(yn)),zt+=Oe,jt+=yn}Et===3&&lt.writeVarint(Te(7,1))}}function Tt(It,lt){var dt=typeof It;dt==="string"?lt.writeStringField(1,It):dt==="boolean"?lt.writeBooleanField(7,It):dt==="number"&&(It%1!=0?lt.writeDoubleField(3,It):It<0?lt.writeSVarintField(6,It):lt.writeVarintField(5,It))}W.exports=wt,W.exports.fromVectorTileJs=wt,W.exports.fromGeojsonVt=function(It,lt){lt=lt||{};var dt={};for(var Et in It)dt[Et]=new xt(It[Et].features,lt),dt[Et].name=Et,dt[Et].version=lt.version,dt[Et].extent=lt.extent;return wt({layers:dt})},W.exports.GeoJSONWrapper=xt;var Bt=a.bz(W.exports);const $t={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:It=>It},ft=Math.fround||(Mt=new Float32Array(1),It=>(Mt[0]=+It,Mt[0]));var Mt;const Lt=3,Xt=5,re=6;class ce{constructor(lt){this.options=Object.assign(Object.create($t),lt),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(lt){const{log:dt,minZoom:Et,maxZoom:zt}=this.options;dt&&console.time("total time");const jt=`prepare ${lt.length} points`;dt&&console.time(jt),this.points=lt;const ie=[];for(let qt=0;qt<lt.length;qt++){const Jt=lt[qt];if(!Jt.geometry)continue;const[Se,se]=Jt.geometry.coordinates,Oe=ft(Gt(Se)),yn=ft(Ce(se));ie.push(Oe,yn,1/0,qt,-1,1),this.options.reduce&&ie.push(0)}let Wt=this.trees[zt+1]=this._createTree(ie);dt&&console.timeEnd(jt);for(let qt=zt;qt>=Et;qt--){const Jt=+Date.now();Wt=this.trees[qt]=this._createTree(this._cluster(Wt,qt)),dt&&console.log("z%d: %d clusters in %dms",qt,Wt.numItems,+Date.now()-Jt)}return dt&&console.timeEnd("total time"),this}getClusters(lt,dt){let Et=((lt[0]+180)%360+360)%360-180;const zt=Math.max(-90,Math.min(90,lt[1]));let jt=lt[2]===180?180:((lt[2]+180)%360+360)%360-180;const ie=Math.max(-90,Math.min(90,lt[3]));if(lt[2]-lt[0]>=360)Et=-180,jt=180;else if(Et>jt){const se=this.getClusters([Et,zt,180,ie],dt),Oe=this.getClusters([-180,zt,jt,ie],dt);return se.concat(Oe)}const Wt=this.trees[this._limitZoom(dt)],qt=Wt.range(Gt(Et),Ce(ie),Gt(jt),Ce(zt)),Jt=Wt.data,Se=[];for(const se of qt){const Oe=this.stride*se;Se.push(Jt[Oe+Xt]>1?Me(Jt,Oe,this.clusterProps):this.points[Jt[Oe+Lt]])}return Se}getChildren(lt){const dt=this._getOriginId(lt),Et=this._getOriginZoom(lt),zt="No cluster with the specified id.",jt=this.trees[Et];if(!jt)throw new Error(zt);const ie=jt.data;if(dt*this.stride>=ie.length)throw new Error(zt);const Wt=this.options.radius/(this.options.extent*Math.pow(2,Et-1)),qt=jt.within(ie[dt*this.stride],ie[dt*this.stride+1],Wt),Jt=[];for(const Se of qt){const se=Se*this.stride;ie[se+4]===lt&&Jt.push(ie[se+Xt]>1?Me(ie,se,this.clusterProps):this.points[ie[se+Lt]])}if(Jt.length===0)throw new Error(zt);return Jt}getLeaves(lt,dt,Et){const zt=[];return this._appendLeaves(zt,lt,dt=dt||10,Et=Et||0,0),zt}getTile(lt,dt,Et){const zt=this.trees[this._limitZoom(lt)],jt=Math.pow(2,lt),{extent:ie,radius:Wt}=this.options,qt=Wt/ie,Jt=(Et-qt)/jt,Se=(Et+1+qt)/jt,se={features:[]};return this._addTileFeatures(zt.range((dt-qt)/jt,Jt,(dt+1+qt)/jt,Se),zt.data,dt,Et,jt,se),dt===0&&this._addTileFeatures(zt.range(1-qt/jt,Jt,1,Se),zt.data,jt,Et,jt,se),dt===jt-1&&this._addTileFeatures(zt.range(0,Jt,qt/jt,Se),zt.data,-1,Et,jt,se),se.features.length?se:null}getClusterExpansionZoom(lt){let dt=this._getOriginZoom(lt)-1;for(;dt<=this.options.maxZoom;){const Et=this.getChildren(lt);if(dt++,Et.length!==1)break;lt=Et[0].properties.cluster_id}return dt}_appendLeaves(lt,dt,Et,zt,jt){const ie=this.getChildren(dt);for(const Wt of ie){const qt=Wt.properties;if(qt&&qt.cluster?jt+qt.point_count<=zt?jt+=qt.point_count:jt=this._appendLeaves(lt,qt.cluster_id,Et,zt,jt):jt<zt?jt++:lt.push(Wt),lt.length===Et)break}return jt}_createTree(lt){const dt=new a.av(lt.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Et=0;Et<lt.length;Et+=this.stride)dt.add(lt[Et],lt[Et+1]);return dt.finish(),dt.data=lt,dt}_addTileFeatures(lt,dt,Et,zt,jt,ie){for(const Wt of lt){const qt=Wt*this.stride,Jt=dt[qt+Xt]>1;let Se,se,Oe;if(Jt)Se=Ne(dt,qt,this.clusterProps),se=dt[qt],Oe=dt[qt+1];else{const Ke=this.points[dt[qt+Lt]];Se=Ke.properties;const[an,Tn]=Ke.geometry.coordinates;se=Gt(an),Oe=Ce(Tn)}const yn={type:1,geometry:[[Math.round(this.options.extent*(se*jt-Et)),Math.round(this.options.extent*(Oe*jt-zt))]],tags:Se};let _n;_n=Jt||this.options.generateId?dt[qt+Lt]:this.points[dt[qt+Lt]].id,_n!==void 0&&(yn.id=_n),ie.features.push(yn)}}_limitZoom(lt){return Math.max(this.options.minZoom,Math.min(Math.floor(+lt),this.options.maxZoom+1))}_cluster(lt,dt){const{radius:Et,extent:zt,reduce:jt,minPoints:ie}=this.options,Wt=Et/(zt*Math.pow(2,dt)),qt=lt.data,Jt=[],Se=this.stride;for(let se=0;se<qt.length;se+=Se){if(qt[se+2]<=dt)continue;qt[se+2]=dt;const Oe=qt[se],yn=qt[se+1],_n=lt.within(qt[se],qt[se+1],Wt),Ke=qt[se+Xt];let an=Ke;for(const Tn of _n){const Wn=Tn*Se;qt[Wn+2]>dt&&(an+=qt[Wn+Xt])}if(an>Ke&&an>=ie){let Tn,Wn=Oe*Ke,gi=yn*Ke,qn=-1;const Hn=((se/Se|0)<<5)+(dt+1)+this.points.length;for(const Ji of _n){const yi=Ji*Se;if(qt[yi+2]<=dt)continue;qt[yi+2]=dt;const Oi=qt[yi+Xt];Wn+=qt[yi]*Oi,gi+=qt[yi+1]*Oi,qt[yi+4]=Hn,jt&&(Tn||(Tn=this._map(qt,se,!0),qn=this.clusterProps.length,this.clusterProps.push(Tn)),jt(Tn,this._map(qt,yi)))}qt[se+4]=Hn,Jt.push(Wn/an,gi/an,1/0,Hn,-1,an),jt&&Jt.push(qn)}else{for(let Tn=0;Tn<Se;Tn++)Jt.push(qt[se+Tn]);if(an>1)for(const Tn of _n){const Wn=Tn*Se;if(!(qt[Wn+2]<=dt)){qt[Wn+2]=dt;for(let gi=0;gi<Se;gi++)Jt.push(qt[Wn+gi])}}}}return Jt}_getOriginId(lt){return lt-this.points.length>>5}_getOriginZoom(lt){return(lt-this.points.length)%32}_map(lt,dt,Et){if(lt[dt+Xt]>1){const ie=this.clusterProps[lt[dt+re]];return Et?Object.assign({},ie):ie}const zt=this.points[lt[dt+Lt]].properties,jt=this.options.map(zt);return Et&&jt===zt?Object.assign({},jt):jt}}function Me(It,lt,dt){return{type:"Feature",id:It[lt+Lt],properties:Ne(It,lt,dt),geometry:{type:"Point",coordinates:[(Et=It[lt],360*(Et-.5)),Ee(It[lt+1])]}};var Et}function Ne(It,lt,dt){const Et=It[lt+Xt],zt=Et>=1e4?`${Math.round(Et/1e3)}k`:Et>=1e3?Math.round(Et/100)/10+"k":Et,jt=It[lt+re],ie=jt===-1?{}:Object.assign({},dt[jt]);return Object.assign(ie,{cluster:!0,cluster_id:It[lt+Lt],point_count:Et,point_count_abbreviated:zt})}function Gt(It){return It/360+.5}function Ce(It){const lt=Math.sin(It*Math.PI/180),dt=.5-.25*Math.log((1+lt)/(1-lt))/Math.PI;return dt<0?0:dt>1?1:dt}function Ee(It){const lt=(180-360*It)*Math.PI/180;return 360*Math.atan(Math.exp(lt))/Math.PI-90}function de(It,lt,dt,Et){for(var zt,jt=Et,ie=dt-lt>>1,Wt=dt-lt,qt=It[lt],Jt=It[lt+1],Se=It[dt],se=It[dt+1],Oe=lt+3;Oe<dt;Oe+=3){var yn=on(It[Oe],It[Oe+1],qt,Jt,Se,se);if(yn>jt)zt=Oe,jt=yn;else if(yn===jt){var _n=Math.abs(Oe-ie);_n<Wt&&(zt=Oe,Wt=_n)}}jt>Et&&(zt-lt>3&&de(It,lt,zt,Et),It[zt+2]=jt,dt-zt>3&&de(It,zt,dt,Et))}function on(It,lt,dt,Et,zt,jt){var ie=zt-dt,Wt=jt-Et;if(ie!==0||Wt!==0){var qt=((It-dt)*ie+(lt-Et)*Wt)/(ie*ie+Wt*Wt);qt>1?(dt=zt,Et=jt):qt>0&&(dt+=ie*qt,Et+=Wt*qt)}return(ie=It-dt)*ie+(Wt=lt-Et)*Wt}function Be(It,lt,dt,Et){var zt={id:It===void 0?null:It,type:lt,geometry:dt,tags:Et,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(jt){var ie=jt.geometry,Wt=jt.type;if(Wt==="Point"||Wt==="MultiPoint"||Wt==="LineString")ln(jt,ie);else if(Wt==="Polygon"||Wt==="MultiLineString")for(var qt=0;qt<ie.length;qt++)ln(jt,ie[qt]);else if(Wt==="MultiPolygon")for(qt=0;qt<ie.length;qt++)for(var Jt=0;Jt<ie[qt].length;Jt++)ln(jt,ie[qt][Jt])})(zt),zt}function ln(It,lt){for(var dt=0;dt<lt.length;dt+=3)It.minX=Math.min(It.minX,lt[dt]),It.minY=Math.min(It.minY,lt[dt+1]),It.maxX=Math.max(It.maxX,lt[dt]),It.maxY=Math.max(It.maxY,lt[dt+1])}function Xe(It,lt,dt,Et){if(lt.geometry){var zt=lt.geometry.coordinates,jt=lt.geometry.type,ie=Math.pow(dt.tolerance/((1<<dt.maxZoom)*dt.extent),2),Wt=[],qt=lt.id;if(dt.promoteId?qt=lt.properties[dt.promoteId]:dt.generateId&&(qt=Et||0),jt==="Point")Sn(zt,Wt);else if(jt==="MultiPoint")for(var Jt=0;Jt<zt.length;Jt++)Sn(zt[Jt],Wt);else if(jt==="LineString")hn(zt,Wt,ie,!1);else if(jt==="MultiLineString"){if(dt.lineMetrics){for(Jt=0;Jt<zt.length;Jt++)hn(zt[Jt],Wt=[],ie,!1),It.push(Be(qt,"LineString",Wt,lt.properties));return}Rn(zt,Wt,ie,!1)}else if(jt==="Polygon")Rn(zt,Wt,ie,!0);else{if(jt!=="MultiPolygon"){if(jt==="GeometryCollection"){for(Jt=0;Jt<lt.geometry.geometries.length;Jt++)Xe(It,{id:qt,geometry:lt.geometry.geometries[Jt],properties:lt.properties},dt,Et);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Jt=0;Jt<zt.length;Jt++){var Se=[];Rn(zt[Jt],Se,ie,!0),Wt.push(Se)}}It.push(Be(qt,jt,Wt,lt.properties))}}function Sn(It,lt){lt.push(ge(It[0])),lt.push(Gn(It[1])),lt.push(0)}function hn(It,lt,dt,Et){for(var zt,jt,ie=0,Wt=0;Wt<It.length;Wt++){var qt=ge(It[Wt][0]),Jt=Gn(It[Wt][1]);lt.push(qt),lt.push(Jt),lt.push(0),Wt>0&&(ie+=Et?(zt*Jt-qt*jt)/2:Math.sqrt(Math.pow(qt-zt,2)+Math.pow(Jt-jt,2))),zt=qt,jt=Jt}var Se=lt.length-3;lt[2]=1,de(lt,0,Se,dt),lt[Se+2]=1,lt.size=Math.abs(ie),lt.start=0,lt.end=lt.size}function Rn(It,lt,dt,Et){for(var zt=0;zt<It.length;zt++){var jt=[];hn(It[zt],jt,dt,Et),lt.push(jt)}}function ge(It){return It/360+.5}function Gn(It){var lt=Math.sin(It*Math.PI/180),dt=.5-.25*Math.log((1+lt)/(1-lt))/Math.PI;return dt<0?0:dt>1?1:dt}function $i(It,lt,dt,Et,zt,jt,ie,Wt){if(Et/=lt,jt>=(dt/=lt)&&ie<Et)return It;if(ie<dt||jt>=Et)return null;for(var qt=[],Jt=0;Jt<It.length;Jt++){var Se=It[Jt],se=Se.geometry,Oe=Se.type,yn=zt===0?Se.minX:Se.minY,_n=zt===0?Se.maxX:Se.maxY;if(yn>=dt&&_n<Et)qt.push(Se);else if(!(_n<dt||yn>=Et)){var Ke=[];if(Oe==="Point"||Oe==="MultiPoint")ni(se,Ke,dt,Et,zt);else if(Oe==="LineString")fn(se,Ke,dt,Et,zt,!1,Wt.lineMetrics);else if(Oe==="MultiLineString")mi(se,Ke,dt,Et,zt,!1);else if(Oe==="Polygon")mi(se,Ke,dt,Et,zt,!0);else if(Oe==="MultiPolygon")for(var an=0;an<se.length;an++){var Tn=[];mi(se[an],Tn,dt,Et,zt,!0),Tn.length&&Ke.push(Tn)}if(Ke.length){if(Wt.lineMetrics&&Oe==="LineString"){for(an=0;an<Ke.length;an++)qt.push(Be(Se.id,Oe,Ke[an],Se.tags));continue}Oe!=="LineString"&&Oe!=="MultiLineString"||(Ke.length===1?(Oe="LineString",Ke=Ke[0]):Oe="MultiLineString"),Oe!=="Point"&&Oe!=="MultiPoint"||(Oe=Ke.length===3?"Point":"MultiPoint"),qt.push(Be(Se.id,Oe,Ke,Se.tags))}}}return qt.length?qt:null}function ni(It,lt,dt,Et,zt){for(var jt=0;jt<It.length;jt+=3){var ie=It[jt+zt];ie>=dt&&ie<=Et&&(lt.push(It[jt]),lt.push(It[jt+1]),lt.push(It[jt+2]))}}function fn(It,lt,dt,Et,zt,jt,ie){for(var Wt,qt,Jt=Qi(It),Se=zt===0?Dr:ws,se=It.start,Oe=0;Oe<It.length-3;Oe+=3){var yn=It[Oe],_n=It[Oe+1],Ke=It[Oe+2],an=It[Oe+3],Tn=It[Oe+4],Wn=zt===0?yn:_n,gi=zt===0?an:Tn,qn=!1;ie&&(Wt=Math.sqrt(Math.pow(yn-an,2)+Math.pow(_n-Tn,2))),Wn<dt?gi>dt&&(qt=Se(Jt,yn,_n,an,Tn,dt),ie&&(Jt.start=se+Wt*qt)):Wn>Et?gi<Et&&(qt=Se(Jt,yn,_n,an,Tn,Et),ie&&(Jt.start=se+Wt*qt)):Ui(Jt,yn,_n,Ke),gi<dt&&Wn>=dt&&(qt=Se(Jt,yn,_n,an,Tn,dt),qn=!0),gi>Et&&Wn<=Et&&(qt=Se(Jt,yn,_n,an,Tn,Et),qn=!0),!jt&&qn&&(ie&&(Jt.end=se+Wt*qt),lt.push(Jt),Jt=Qi(It)),ie&&(se+=Wt)}var Hn=It.length-3;yn=It[Hn],_n=It[Hn+1],Ke=It[Hn+2],(Wn=zt===0?yn:_n)>=dt&&Wn<=Et&&Ui(Jt,yn,_n,Ke),Hn=Jt.length-3,jt&&Hn>=3&&(Jt[Hn]!==Jt[0]||Jt[Hn+1]!==Jt[1])&&Ui(Jt,Jt[0],Jt[1],Jt[2]),Jt.length&&lt.push(Jt)}function Qi(It){var lt=[];return lt.size=It.size,lt.start=It.start,lt.end=It.end,lt}function mi(It,lt,dt,Et,zt,jt){for(var ie=0;ie<It.length;ie++)fn(It[ie],lt,dt,Et,zt,jt,!1)}function Ui(It,lt,dt,Et){It.push(lt),It.push(dt),It.push(Et)}function Dr(It,lt,dt,Et,zt,jt){var ie=(jt-lt)/(Et-lt);return It.push(jt),It.push(dt+(zt-dt)*ie),It.push(1),ie}function ws(It,lt,dt,Et,zt,jt){var ie=(jt-dt)/(zt-dt);return It.push(lt+(Et-lt)*ie),It.push(jt),It.push(1),ie}function Oa(It,lt){for(var dt=[],Et=0;Et<It.length;Et++){var zt,jt=It[Et],ie=jt.type;if(ie==="Point"||ie==="MultiPoint"||ie==="LineString")zt=Vr(jt.geometry,lt);else if(ie==="MultiLineString"||ie==="Polygon"){zt=[];for(var Wt=0;Wt<jt.geometry.length;Wt++)zt.push(Vr(jt.geometry[Wt],lt))}else if(ie==="MultiPolygon")for(zt=[],Wt=0;Wt<jt.geometry.length;Wt++){for(var qt=[],Jt=0;Jt<jt.geometry[Wt].length;Jt++)qt.push(Vr(jt.geometry[Wt][Jt],lt));zt.push(qt)}dt.push(Be(jt.id,ie,zt,jt.tags))}return dt}function Vr(It,lt){var dt=[];dt.size=It.size,It.start!==void 0&&(dt.start=It.start,dt.end=It.end);for(var Et=0;Et<It.length;Et+=3)dt.push(It[Et]+lt,It[Et+1],It[Et+2]);return dt}function Fe(It,lt){if(It.transformed)return It;var dt,Et,zt,jt=1<<It.z,ie=It.x,Wt=It.y;for(dt=0;dt<It.features.length;dt++){var qt=It.features[dt],Jt=qt.geometry,Se=qt.type;if(qt.geometry=[],Se===1)for(Et=0;Et<Jt.length;Et+=2)qt.geometry.push(yr(Jt[Et],Jt[Et+1],lt,jt,ie,Wt));else for(Et=0;Et<Jt.length;Et++){var se=[];for(zt=0;zt<Jt[Et].length;zt+=2)se.push(yr(Jt[Et][zt],Jt[Et][zt+1],lt,jt,ie,Wt));qt.geometry.push(se)}}return It.transformed=!0,It}function yr(It,lt,dt,Et,zt,jt){return[Math.round(dt*(It*Et-zt)),Math.round(dt*(lt*Et-jt))]}function Yn(It,lt,dt,Et,zt){for(var jt=lt===zt.maxZoom?0:zt.tolerance/((1<<lt)*zt.extent),ie={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:dt,y:Et,z:lt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Wt=0;Wt<It.length;Wt++){ie.numFeatures++,ga(ie,It[Wt],jt,zt);var qt=It[Wt].minX,Jt=It[Wt].minY,Se=It[Wt].maxX,se=It[Wt].maxY;qt<ie.minX&&(ie.minX=qt),Jt<ie.minY&&(ie.minY=Jt),Se>ie.maxX&&(ie.maxX=Se),se>ie.maxY&&(ie.maxY=se)}return ie}function ga(It,lt,dt,Et){var zt=lt.geometry,jt=lt.type,ie=[];if(jt==="Point"||jt==="MultiPoint")for(var Wt=0;Wt<zt.length;Wt+=3)ie.push(zt[Wt]),ie.push(zt[Wt+1]),It.numPoints++,It.numSimplified++;else if(jt==="LineString")_r(ie,zt,It,dt,!1,!1);else if(jt==="MultiLineString"||jt==="Polygon")for(Wt=0;Wt<zt.length;Wt++)_r(ie,zt[Wt],It,dt,jt==="Polygon",Wt===0);else if(jt==="MultiPolygon")for(var qt=0;qt<zt.length;qt++){var Jt=zt[qt];for(Wt=0;Wt<Jt.length;Wt++)_r(ie,Jt[Wt],It,dt,!0,Wt===0)}if(ie.length){var Se=lt.tags||null;if(jt==="LineString"&&Et.lineMetrics){for(var se in Se={},lt.tags)Se[se]=lt.tags[se];Se.mapbox_clip_start=zt.start/zt.size,Se.mapbox_clip_end=zt.end/zt.size}var Oe={geometry:ie,type:jt==="Polygon"||jt==="MultiPolygon"?3:jt==="LineString"||jt==="MultiLineString"?2:1,tags:Se};lt.id!==null&&(Oe.id=lt.id),It.features.push(Oe)}}function _r(It,lt,dt,Et,zt,jt){var ie=Et*Et;if(Et>0&&lt.size<(zt?ie:Et))dt.numPoints+=lt.length/3;else{for(var Wt=[],qt=0;qt<lt.length;qt+=3)(Et===0||lt[qt+2]>ie)&&(dt.numSimplified++,Wt.push(lt[qt]),Wt.push(lt[qt+1])),dt.numPoints++;zt&&(function(Jt,Se){for(var se=0,Oe=0,yn=Jt.length,_n=yn-2;Oe<yn;_n=Oe,Oe+=2)se+=(Jt[Oe]-Jt[_n])*(Jt[Oe+1]+Jt[_n+1]);if(se>0===Se)for(Oe=0,yn=Jt.length;Oe<yn/2;Oe+=2){var Ke=Jt[Oe],an=Jt[Oe+1];Jt[Oe]=Jt[yn-2-Oe],Jt[Oe+1]=Jt[yn-1-Oe],Jt[yn-2-Oe]=Ke,Jt[yn-1-Oe]=an}})(Wt,jt),It.push(Wt)}}function Ze(It,lt){var dt=(lt=this.options=(function(zt,jt){for(var ie in jt)zt[ie]=jt[ie];return zt})(Object.create(this.options),lt)).debug;if(dt&&console.time("preprocess data"),lt.maxZoom<0||lt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(lt.promoteId&&lt.generateId)throw new Error("promoteId and generateId cannot be used together.");var Et=(function(zt,jt){var ie=[];if(zt.type==="FeatureCollection")for(var Wt=0;Wt<zt.features.length;Wt++)Xe(ie,zt.features[Wt],jt,Wt);else Xe(ie,zt.type==="Feature"?zt:{geometry:zt},jt);return ie})(It,lt);this.tiles={},this.tileCoords=[],dt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",lt.indexMaxZoom,lt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Et=(function(zt,jt){var ie=jt.buffer/jt.extent,Wt=zt,qt=$i(zt,1,-1-ie,ie,0,-1,2,jt),Jt=$i(zt,1,1-ie,2+ie,0,-1,2,jt);return(qt||Jt)&&(Wt=$i(zt,1,-ie,1+ie,0,-1,2,jt)||[],qt&&(Wt=Oa(qt,1).concat(Wt)),Jt&&(Wt=Wt.concat(Oa(Jt,-1)))),Wt})(Et,lt),Et.length&&this.splitTile(Et,0,0,0),dt&&(Et.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function In(It,lt,dt){return 32*((1<<It)*dt+lt)+It}function kn(It,lt){return lt?It.properties[lt]:It.id}function Ir(It,lt){if(It==null)return!0;if(It.type==="Feature")return kn(It,lt)!=null;if(It.type==="FeatureCollection"){const dt=new Set;for(const Et of It.features){const zt=kn(Et,lt);if(zt==null||dt.has(zt))return!1;dt.add(zt)}return!0}return!1}function ya(It,lt){const dt=new Map;if(It!=null)if(It.type==="Feature")dt.set(kn(It,lt),It);else for(const Et of It.features)dt.set(kn(Et,lt),Et);return dt}Ze.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ze.prototype.splitTile=function(It,lt,dt,Et,zt,jt,ie){for(var Wt=[It,lt,dt,Et],qt=this.options,Jt=qt.debug;Wt.length;){Et=Wt.pop(),dt=Wt.pop(),lt=Wt.pop(),It=Wt.pop();var Se=1<<lt,se=In(lt,dt,Et),Oe=this.tiles[se];if(!Oe&&(Jt>1&&console.time("creation"),Oe=this.tiles[se]=Yn(It,lt,dt,Et,qt),this.tileCoords.push({z:lt,x:dt,y:Et}),Jt)){Jt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",lt,dt,Et,Oe.numFeatures,Oe.numPoints,Oe.numSimplified),console.timeEnd("creation"));var yn="z"+lt;this.stats[yn]=(this.stats[yn]||0)+1,this.total++}if(Oe.source=It,zt){if(lt===qt.maxZoom||lt===zt)continue;var _n=1<<zt-lt;if(dt!==Math.floor(jt/_n)||Et!==Math.floor(ie/_n))continue}else if(lt===qt.indexMaxZoom||Oe.numPoints<=qt.indexMaxPoints)continue;if(Oe.source=null,It.length!==0){Jt>1&&console.time("clipping");var Ke,an,Tn,Wn,gi,qn,Hn=.5*qt.buffer/qt.extent,Ji=.5-Hn,yi=.5+Hn,Oi=1+Hn;Ke=an=Tn=Wn=null,gi=$i(It,Se,dt-Hn,dt+yi,0,Oe.minX,Oe.maxX,qt),qn=$i(It,Se,dt+Ji,dt+Oi,0,Oe.minX,Oe.maxX,qt),It=null,gi&&(Ke=$i(gi,Se,Et-Hn,Et+yi,1,Oe.minY,Oe.maxY,qt),an=$i(gi,Se,Et+Ji,Et+Oi,1,Oe.minY,Oe.maxY,qt),gi=null),qn&&(Tn=$i(qn,Se,Et-Hn,Et+yi,1,Oe.minY,Oe.maxY,qt),Wn=$i(qn,Se,Et+Ji,Et+Oi,1,Oe.minY,Oe.maxY,qt),qn=null),Jt>1&&console.timeEnd("clipping"),Wt.push(Ke||[],lt+1,2*dt,2*Et),Wt.push(an||[],lt+1,2*dt,2*Et+1),Wt.push(Tn||[],lt+1,2*dt+1,2*Et),Wt.push(Wn||[],lt+1,2*dt+1,2*Et+1)}}},Ze.prototype.getTile=function(It,lt,dt){var Et=this.options,zt=Et.extent,jt=Et.debug;if(It<0||It>24)return null;var ie=1<<It,Wt=In(It,lt=(lt%ie+ie)%ie,dt);if(this.tiles[Wt])return Fe(this.tiles[Wt],zt);jt>1&&console.log("drilling down to z%d-%d-%d",It,lt,dt);for(var qt,Jt=It,Se=lt,se=dt;!qt&&Jt>0;)Jt--,Se=Math.floor(Se/2),se=Math.floor(se/2),qt=this.tiles[In(Jt,Se,se)];return qt&&qt.source?(jt>1&&console.log("found parent tile z%d-%d-%d",Jt,Se,se),jt>1&&console.time("drilling down"),this.splitTile(qt.source,Jt,Se,se,It,lt,dt),jt>1&&console.timeEnd("drilling down"),this.tiles[Wt]?Fe(this.tiles[Wt],zt):null):null};class Cn extends I{constructor(lt,dt,Et,zt){super(lt,dt,Et),this._dataUpdateable=new Map,this.loadGeoJSON=(jt,ie)=>{const{promoteId:Wt}=jt;if(jt.request)return a.f(jt.request,((qt,Jt,Se,se)=>{this._dataUpdateable=Ir(Jt,Wt)?ya(Jt,Wt):void 0,ie(qt,Jt,Se,se)}));if(typeof jt.data=="string")try{const qt=JSON.parse(jt.data);this._dataUpdateable=Ir(qt,Wt)?ya(qt,Wt):void 0,ie(null,qt)}catch{ie(new Error(`Input data given to '${jt.source}' is not a valid GeoJSON object.`))}else jt.dataDiff?this._dataUpdateable?((function(qt,Jt,Se){var se,Oe,yn,_n;if(Jt.removeAll&&qt.clear(),Jt.remove)for(const Ke of Jt.remove)qt.delete(Ke);if(Jt.add)for(const Ke of Jt.add){const an=kn(Ke,Se);an!=null&&qt.set(an,Ke)}if(Jt.update)for(const Ke of Jt.update){let an=qt.get(Ke.id);if(an==null)continue;const Tn=!Ke.removeAllProperties&&(((se=Ke.removeProperties)===null||se===void 0?void 0:se.length)>0||((Oe=Ke.addOrUpdateProperties)===null||Oe===void 0?void 0:Oe.length)>0);if((Ke.newGeometry||Ke.removeAllProperties||Tn)&&(an=Object.assign({},an),qt.set(Ke.id,an),Tn&&(an.properties=Object.assign({},an.properties))),Ke.newGeometry&&(an.geometry=Ke.newGeometry),Ke.removeAllProperties)an.properties={};else if(((yn=Ke.removeProperties)===null||yn===void 0?void 0:yn.length)>0)for(const Wn of Ke.removeProperties)Object.prototype.hasOwnProperty.call(an.properties,Wn)&&delete an.properties[Wn];if(((_n=Ke.addOrUpdateProperties)===null||_n===void 0?void 0:_n.length)>0)for(const{key:Wn,value:gi}of Ke.addOrUpdateProperties)an.properties[Wn]=gi}})(this._dataUpdateable,jt.dataDiff,Wt),ie(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):ie(new Error(`Cannot update existing geojson data in ${jt.source}`)):ie(new Error(`Input data given to '${jt.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,zt&&(this.loadGeoJSON=zt)}loadGeoJSONTile(lt,dt){const Et=lt.tileID.canonical;if(!this._geoJSONIndex)return dt(null,null);const zt=this._geoJSONIndex.getTile(Et.z,Et.x,Et.y);if(!zt)return dt(null,null);const jt=new class{constructor(Wt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.N,this.length=Wt.length,this._features=Wt}feature(Wt){return new class{constructor(qt){this._feature=qt,this.extent=a.N,this.type=qt.type,this.properties=qt.tags,"id"in qt&&!isNaN(qt.id)&&(this.id=parseInt(qt.id,10))}loadGeometry(){if(this._feature.type===1){const qt=[];for(const Jt of this._feature.geometry)qt.push([new a.P(Jt[0],Jt[1])]);return qt}{const qt=[];for(const Jt of this._feature.geometry){const Se=[];for(const se of Jt)Se.push(new a.P(se[0],se[1]));qt.push(Se)}return qt}}toGeoJSON(qt,Jt,Se){return Y.call(this,qt,Jt,Se)}}(this._features[Wt])}}(zt.features);let ie=Bt(jt);ie.byteOffset===0&&ie.byteLength===ie.buffer.byteLength||(ie=new Uint8Array(ie)),dt(null,{vectorTile:jt,rawData:ie.buffer})}loadData(lt,dt){var Et;(Et=this._pendingRequest)===null||Et===void 0||Et.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const zt=!!(lt&&lt.request&&lt.request.collectResourceTiming)&&new a.bu(lt.request);this._pendingCallback=dt,this._pendingRequest=this.loadGeoJSON(lt,((jt,ie)=>{if(delete this._pendingCallback,delete this._pendingRequest,jt||!ie)return dt(jt);if(typeof ie!="object")return dt(new Error(`Input data given to '${lt.source}' is not a valid GeoJSON object.`));{K(ie,!0);try{if(lt.filter){const qt=a.bC(lt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(qt.result==="error")throw new Error(qt.value.map((Se=>`${Se.key}: ${Se.message}`)).join(", "));ie={type:"FeatureCollection",features:ie.features.filter((Se=>qt.value.evaluate({zoom:0},Se)))}}this._geoJSONIndex=lt.cluster?new ce((function({superclusterOptions:qt,clusterProperties:Jt}){if(!Jt||!qt)return qt;const Se={},se={},Oe={accumulated:null,zoom:0},yn={properties:null},_n=Object.keys(Jt);for(const Ke of _n){const[an,Tn]=Jt[Ke],Wn=a.bC(Tn),gi=a.bC(typeof an=="string"?[an,["accumulated"],["get",Ke]]:an);Se[Ke]=Wn.value,se[Ke]=gi.value}return qt.map=Ke=>{yn.properties=Ke;const an={};for(const Tn of _n)an[Tn]=Se[Tn].evaluate(Oe,yn);return an},qt.reduce=(Ke,an)=>{yn.properties=an;for(const Tn of _n)Oe.accumulated=Ke[Tn],Ke[Tn]=se[Tn].evaluate(Oe,yn)},qt})(lt)).load(ie.features):(function(qt,Jt){return new Ze(qt,Jt)})(ie,lt.geojsonVtOptions)}catch(qt){return dt(qt)}this.loaded={};const Wt={};if(zt){const qt=zt.finish();qt&&(Wt.resourceTiming={},Wt.resourceTiming[lt.source]=JSON.parse(JSON.stringify(qt)))}dt(null,Wt)}}))}reloadTile(lt,dt){const Et=this.loaded;return Et&&Et[lt.uid]?super.reloadTile(lt,dt):this.loadTile(lt,dt)}removeSource(lt,dt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),dt()}getClusterExpansionZoom(lt,dt){try{dt(null,this._geoJSONIndex.getClusterExpansionZoom(lt.clusterId))}catch(Et){dt(Et)}}getClusterChildren(lt,dt){try{dt(null,this._geoJSONIndex.getChildren(lt.clusterId))}catch(Et){dt(Et)}}getClusterLeaves(lt,dt){try{dt(null,this._geoJSONIndex.getLeaves(lt.clusterId,lt.limit,lt.offset))}catch(Et){dt(Et)}}}class Gr{constructor(lt){this.self=lt,this.actor=new a.C(lt,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:I,geojson:Cn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(dt,Et)=>{if(this.workerSourceTypes[dt])throw new Error(`Worker source with name "${dt}" already registered.`);this.workerSourceTypes[dt]=Et},this.self.registerRTLTextPlugin=dt=>{if(a.bD.isParsed())throw new Error("RTL text plugin already registered.");a.bD.applyArabicShaping=dt.applyArabicShaping,a.bD.processBidirectionalText=dt.processBidirectionalText,a.bD.processStyledBidirectionalText=dt.processStyledBidirectionalText}}setReferrer(lt,dt){this.referrer=dt}setImages(lt,dt,Et){this.availableImages[lt]=dt;for(const zt in this.workerSources[lt]){const jt=this.workerSources[lt][zt];for(const ie in jt)jt[ie].availableImages=dt}Et()}setLayers(lt,dt,Et){this.getLayerIndex(lt).replace(dt),Et()}updateLayers(lt,dt,Et){this.getLayerIndex(lt).update(dt.layers,dt.removedIds),Et()}loadTile(lt,dt,Et){this.getWorkerSource(lt,dt.type,dt.source).loadTile(dt,Et)}loadDEMTile(lt,dt,Et){this.getDEMWorkerSource(lt,dt.source).loadTile(dt,Et)}reloadTile(lt,dt,Et){this.getWorkerSource(lt,dt.type,dt.source).reloadTile(dt,Et)}abortTile(lt,dt,Et){this.getWorkerSource(lt,dt.type,dt.source).abortTile(dt,Et)}removeTile(lt,dt,Et){this.getWorkerSource(lt,dt.type,dt.source).removeTile(dt,Et)}removeDEMTile(lt,dt){this.getDEMWorkerSource(lt,dt.source).removeTile(dt)}removeSource(lt,dt,Et){if(!this.workerSources[lt]||!this.workerSources[lt][dt.type]||!this.workerSources[lt][dt.type][dt.source])return;const zt=this.workerSources[lt][dt.type][dt.source];delete this.workerSources[lt][dt.type][dt.source],zt.removeSource!==void 0?zt.removeSource(dt,Et):Et()}loadWorkerSource(lt,dt,Et){try{this.self.importScripts(dt.url),Et()}catch(zt){Et(zt.toString())}}syncRTLPluginState(lt,dt,Et){try{a.bD.setState(dt);const zt=a.bD.getPluginURL();if(a.bD.isLoaded()&&!a.bD.isParsed()&&zt!=null){this.self.importScripts(zt);const jt=a.bD.isParsed();Et(jt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${zt}`),jt)}}catch(zt){Et(zt.toString())}}getAvailableImages(lt){let dt=this.availableImages[lt];return dt||(dt=[]),dt}getLayerIndex(lt){let dt=this.layerIndexes[lt];return dt||(dt=this.layerIndexes[lt]=new g),dt}getWorkerSource(lt,dt,Et){return this.workerSources[lt]||(this.workerSources[lt]={}),this.workerSources[lt][dt]||(this.workerSources[lt][dt]={}),this.workerSources[lt][dt][Et]||(this.workerSources[lt][dt][Et]=new this.workerSourceTypes[dt]({send:(zt,jt,ie)=>{this.actor.send(zt,jt,ie,lt)}},this.getLayerIndex(lt),this.getAvailableImages(lt))),this.workerSources[lt][dt][Et]}getDEMWorkerSource(lt,dt){return this.demWorkerSources[lt]||(this.demWorkerSources[lt]={}),this.demWorkerSources[lt][dt]||(this.demWorkerSources[lt][dt]=new F),this.demWorkerSources[lt][dt]}}return a.i()&&(self.worker=new Gr(self)),Gr})),s(["./shared"],(function(a){var g="3.6.2";class y{static testProp(u){if(!y.docStyle)return u[0];for(let m=0;m<u.length;m++)if(u[m]in y.docStyle)return u[m];return u[0]}static create(u,m,b){const M=window.document.createElement(u);return m!==void 0&&(M.className=m),b&&b.appendChild(M),M}static createNS(u,m){return window.document.createElementNS(u,m)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(u,m){u.style[y.transformProp]=m}static addEventListener(u,m,b,M={}){u.addEventListener(m,b,"passive"in M?M:M.capture)}static removeEventListener(u,m,b,M={}){u.removeEventListener(m,b,"passive"in M?M:M.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",y.suppressClickInternal,!0)}),0)}static mousePos(u,m){const b=u.getBoundingClientRect();return new a.P(m.clientX-b.left-u.clientLeft,m.clientY-b.top-u.clientTop)}static touchPos(u,m){const b=u.getBoundingClientRect(),M=[];for(let C=0;C<m.length;C++)M.push(new a.P(m[C].clientX-b.left-u.clientLeft,m[C].clientY-b.top-u.clientTop));return M}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);const x={supported:!1,testSupport:function(A){!I&&O&&(F?V(A):E=A)}};let E,O,I=!1,F=!1;function V(A){const u=A.createTexture();A.bindTexture(A.TEXTURE_2D,u);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,O),A.isContextLost())return;x.supported=!0}catch{}A.deleteTexture(u),I=!0}var $,K;typeof document<"u"&&(O=document.createElement("img"),O.onload=function(){E&&V(E),E=null,F=!0},O.onerror=function(){I=!0,E=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(A){let u,m,b,M;A.resetRequestQueue=()=>{u=[],m=0,b=0,M={}},A.addThrottleControl=Q=>{const et=b++;return M[et]=Q,et},A.removeThrottleControl=Q=>{delete M[Q],j()},A.getImage=(Q,et,rt=!0)=>{x.supported&&(Q.headers||(Q.headers={}),Q.headers.accept="image/webp,*/*");const pt={requestParameters:Q,supportImageRefresh:rt,callback:et,cancelled:!1,completed:!1,cancel:()=>{pt.completed||pt.cancelled||(pt.cancelled=!0,pt.innerRequest&&(pt.innerRequest.cancel(),m--),j())}};return u.push(pt),j(),pt};const C=Q=>{const{requestParameters:et,supportImageRefresh:rt,callback:pt}=Q;return a.e(et,{type:"image"}),(rt!==!1||a.i()||a.g(et.url)||et.headers&&!Object.keys(et.headers).reduce(((Ot,kt)=>Ot&&kt==="accept"),!0)?a.m:H)(et,((Ot,kt,Rt,Pt)=>{N(Q,pt,Ot,kt,Rt,Pt)}))},N=(Q,et,rt,pt,Ot,kt)=>{rt?et(rt):pt instanceof HTMLImageElement||a.a(pt)?et(null,pt):pt&&((Rt,Pt)=>{typeof createImageBitmap=="function"?a.b(Rt,Pt):a.d(Rt,Pt)})(pt,((Rt,Pt)=>{Rt!=null?et(Rt):Pt!=null&&et(null,Pt,{cacheControl:Ot,expires:kt})})),Q.cancelled||(Q.completed=!0,m--,j())},j=()=>{const Q=(()=>{const et=Object.keys(M);let rt=!1;if(et.length>0){for(const pt of et)if(rt=M[pt](),rt)break}return rt})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let et=m;et<Q&&u.length>0;et++){const rt=u.shift();if(rt.cancelled){et--;continue}const pt=C(rt);m++,rt.innerRequest=pt}},H=(Q,et)=>{const rt=new Image,pt=Q.url;let Ot=!1;const kt=Q.credentials;return kt&&kt==="include"?rt.crossOrigin="use-credentials":(kt&&kt==="same-origin"||!a.s(pt))&&(rt.crossOrigin="anonymous"),rt.fetchPriority="high",rt.onload=()=>{et(null,rt),rt.onerror=rt.onload=null},rt.onerror=()=>{Ot||et(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),rt.onerror=rt.onload=null},rt.src=pt,{cancel:()=>{Ot=!0,rt.src=""}}}})($||($={})),$.resetRequestQueue(),(function(A){A.Glyphs="Glyphs",A.Image="Image",A.Source="Source",A.SpriteImage="SpriteImage",A.SpriteJSON="SpriteJSON",A.Style="Style",A.Tile="Tile",A.Unknown="Unknown"})(K||(K={}));class Y{constructor(u){this._transformRequestFn=u}transformRequest(u,m){return this._transformRequestFn&&this._transformRequestFn(u,m)||{url:u}}normalizeSpriteURL(u,m,b){const M=(function(C){const N=C.match(W);if(!N)throw new Error(`Unable to parse URL "${C}"`);return{protocol:N[1],authority:N[2],path:N[3]||"/",params:N[4]?N[4].split("&"):[]}})(u);return M.path+=`${m}${b}`,(function(C){const N=C.params.length?`?${C.params.join("&")}`:"";return`${C.protocol}://${C.authority}${C.path}${N}`})(M)}setTransformRequest(u){this._transformRequestFn=u}}const W=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function X(A){var u=new a.A(3);return u[0]=A[0],u[1]=A[1],u[2]=A[2],u}var J,st=function(A,u,m){return A[0]=u[0]-m[0],A[1]=u[1]-m[1],A[2]=u[2]-m[2],A};J=new a.A(3),a.A!=Float32Array&&(J[0]=0,J[1]=0,J[2]=0);var ct=function(A){var u=A[0],m=A[1];return u*u+m*m};function it(A){const u=[];if(typeof A=="string")u.push({id:"default",url:A});else if(A&&A.length>0){const m=[];for(const{id:b,url:M}of A){const C=`${b}${M}`;m.indexOf(C)===-1&&(m.push(C),u.push({id:b,url:M}))}}return u}function ut(A,u,m,b,M){if(b)return void A(b);if(M!==Object.values(u).length||M!==Object.values(m).length)return;const C={};for(const N in u){C[N]={};const j=a.h.getImageCanvasContext(m[N]),H=u[N];for(const Q in H){const{width:et,height:rt,x:pt,y:Ot,sdf:kt,pixelRatio:Rt,stretchX:Pt,stretchY:Qt,content:fe}=H[Q];C[N][Q]={data:null,pixelRatio:Rt,sdf:kt,stretchX:Pt,stretchY:Qt,content:fe,spriteData:{width:et,height:rt,x:pt,y:Ot,context:j}}}}A(null,C)}(function(){var A=new a.A(2);a.A!=Float32Array&&(A[0]=0,A[1]=0)})();class xt{constructor(u,m,b,M){this.context=u,this.format=b,this.texture=u.gl.createTexture(),this.update(m,M)}update(u,m,b){const{width:M,height:C}=u,N=!(this.size&&this.size[0]===M&&this.size[1]===C||b),{context:j}=this,{gl:H}=j;if(this.useMipmap=!!(m&&m.useMipmap),H.bindTexture(H.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===H.RGBA&&(!m||m.premultiply!==!1)),N)this.size=[M,C],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.a(u)?H.texImage2D(H.TEXTURE_2D,0,this.format,this.format,H.UNSIGNED_BYTE,u):H.texImage2D(H.TEXTURE_2D,0,this.format,M,C,0,this.format,H.UNSIGNED_BYTE,u.data);else{const{x:Q,y:et}=b||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.a(u)?H.texSubImage2D(H.TEXTURE_2D,0,Q,et,H.RGBA,H.UNSIGNED_BYTE,u):H.texSubImage2D(H.TEXTURE_2D,0,Q,et,M,C,H.RGBA,H.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&H.generateMipmap(H.TEXTURE_2D)}bind(u,m,b){const{context:M}=this,{gl:C}=M;C.bindTexture(C.TEXTURE_2D,this.texture),b!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=C.LINEAR),u!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,u),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,b||u),this.filter=u),m!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,m),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,m),this.wrap=m)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function wt(A){const{userImage:u}=A;return!!(u&&u.render&&u.render())&&(A.data.replace(new Uint8Array(u.data.buffer)),!0)}class St extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:m,callback:b}of this.requestors)this._notify(m,b);this.requestors=[]}}getImage(u){const m=this.images[u];if(m&&!m.data&&m.spriteData){const b=m.spriteData;m.data=new a.R({width:b.width,height:b.height},b.context.getImageData(b.x,b.y,b.width,b.height).data),m.spriteData=null}return m}addImage(u,m){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,m)&&(this.images[u]=m)}_validate(u,m){let b=!0;const M=m.data||m.spriteData;return this._validateStretch(m.stretchX,M&&M.width)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchX" value`))),b=!1),this._validateStretch(m.stretchY,M&&M.height)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchY" value`))),b=!1),this._validateContent(m.content,m)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "content" value`))),b=!1),b}_validateStretch(u,m){if(!u)return!0;let b=0;for(const M of u){if(M[0]<b||M[1]<M[0]||m<M[1])return!1;b=M[1]}return!0}_validateContent(u,m){if(!u)return!0;if(u.length!==4)return!1;const b=m.spriteData,M=b&&b.width||m.data.width,C=b&&b.height||m.data.height;return!(u[0]<0||M<u[0]||u[1]<0||C<u[1]||u[2]<0||M<u[2]||u[3]<0||C<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,m,b=!0){const M=this.getImage(u);if(b&&(M.data.width!==m.data.width||M.data.height!==m.data.height))throw new Error(`size mismatch between old image (${M.data.width}x${M.data.height}) and new image (${m.data.width}x${m.data.height}).`);m.version=M.version+1,this.images[u]=m,this.updatedImages[u]=!0}removeImage(u){const m=this.images[u];delete this.images[u],delete this.patterns[u],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,m){let b=!0;if(!this.isLoaded())for(const M of u)this.images[M]||(b=!1);this.isLoaded()||b?this._notify(u,m):this.requestors.push({ids:u,callback:m})}_notify(u,m){const b={};for(const M of u){let C=this.getImage(M);C||(this.fire(new a.k("styleimagemissing",{id:M})),C=this.getImage(M)),C?b[M]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:a.w(`Image "${M}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,b)}getPixelSize(){const{width:u,height:m}=this.atlasImage;return{width:u,height:m}}getPattern(u){const m=this.patterns[u],b=this.getImage(u);if(!b)return null;if(m&&m.position.version===b.version)return m.position;if(m)m.position.version=b.version;else{const M={w:b.data.width+2,h:b.data.height+2,x:0,y:0},C=new a.I(M,b);this.patterns[u]={bin:M,position:C}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const m=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new xt(u,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const C in this.patterns)u.push(this.patterns[C].bin);const{w:m,h:b}=a.p(u),M=this.atlasImage;M.resize({width:m||1,height:b||1});for(const C in this.patterns){const{bin:N}=this.patterns[C],j=N.x+1,H=N.y+1,Q=this.getImage(C).data,et=Q.width,rt=Q.height;a.R.copy(Q,M,{x:0,y:0},{x:j,y:H},{width:et,height:rt}),a.R.copy(Q,M,{x:0,y:rt-1},{x:j,y:H-1},{width:et,height:1}),a.R.copy(Q,M,{x:0,y:0},{x:j,y:H+rt},{width:et,height:1}),a.R.copy(Q,M,{x:et-1,y:0},{x:j-1,y:H},{width:1,height:rt}),a.R.copy(Q,M,{x:0,y:0},{x:j+et,y:H},{width:1,height:rt})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const m of u){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const b=this.getImage(m);b||a.w(`Image with ID: "${m}" was not found`),wt(b)&&this.updateImage(m,b)}}}const le=1e20;function pe(A,u,m,b,M,C,N,j,H){for(let Q=u;Q<u+b;Q++)Te(A,m*C+Q,C,M,N,j,H);for(let Q=m;Q<m+M;Q++)Te(A,Q*C+u,1,b,N,j,H)}function Te(A,u,m,b,M,C,N){C[0]=0,N[0]=-le,N[1]=le,M[0]=A[u];for(let j=1,H=0,Q=0;j<b;j++){M[j]=A[u+j*m];const et=j*j;do{const rt=C[H];Q=(M[j]-M[rt]+et-rt*rt)/(j-rt)/2}while(Q<=N[H]&&--H>-1);H++,C[H]=j,N[H]=Q,N[H+1]=le}for(let j=0,H=0;j<b;j++){for(;N[H+1]<j;)H++;const Q=C[H],et=j-Q;A[u+j*m]=M[Q]+et*et}}class Nt{constructor(u,m){this.requestManager=u,this.localIdeographFontFamily=m,this.entries={}}setURL(u){this.url=u}getGlyphs(u,m){const b=[];for(const M in u)for(const C of u[M])b.push({stack:M,id:C});a.o(b,(({stack:M,id:C},N)=>{let j=this.entries[M];j||(j=this.entries[M]={glyphs:{},requests:{},ranges:{}});let H=j.glyphs[C];if(H!==void 0)return void N(null,{stack:M,id:C,glyph:H});if(H=this._tinySDF(j,M,C),H)return j.glyphs[C]=H,void N(null,{stack:M,id:C,glyph:H});const Q=Math.floor(C/256);if(256*Q>65535)return void N(new Error("glyphs > 65535 not supported"));if(j.ranges[Q])return void N(null,{stack:M,id:C,glyph:H});if(!this.url)return void N(new Error("glyphsUrl is not set"));let et=j.requests[Q];et||(et=j.requests[Q]=[],Nt.loadGlyphRange(M,Q,this.url,this.requestManager,((rt,pt)=>{if(pt){for(const Ot in pt)this._doesCharSupportLocalGlyph(+Ot)||(j.glyphs[+Ot]=pt[+Ot]);j.ranges[Q]=!0}for(const Ot of et)Ot(rt,pt);delete j.requests[Q]}))),et.push(((rt,pt)=>{rt?N(rt):pt&&N(null,{stack:M,id:C,glyph:pt[C]||null})}))}),((M,C)=>{if(M)m(M);else if(C){const N={};for(const{stack:j,id:H,glyph:Q}of C)(N[j]||(N[j]={}))[H]=Q&&{id:Q.id,bitmap:Q.bitmap.clone(),metrics:Q.metrics};m(null,N)}}))}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(a.u["CJK Unified Ideographs"](u)||a.u["Hangul Syllables"](u)||a.u.Hiragana(u)||a.u.Katakana(u))}_tinySDF(u,m,b){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(b))return;let C=u.tinySDF;if(!C){let j="400";/bold/i.test(m)?j="900":/medium/i.test(m)?j="500":/light/i.test(m)&&(j="200"),C=u.tinySDF=new Nt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:j})}const N=C.draw(String.fromCharCode(b));return{id:b,bitmap:new a.q({width:N.width||60,height:N.height||60},N.data),metrics:{width:N.glyphWidth/2||24,height:N.glyphHeight/2||24,left:N.glyphLeft/2+.5||0,top:N.glyphTop/2-27.5||-8,advance:N.glyphAdvance/2||24,isDoubleResolution:!0}}}}Nt.loadGlyphRange=function(A,u,m,b,M){const C=256*u,N=C+255,j=b.transformRequest(m.replace("{fontstack}",A).replace("{range}",`${C}-${N}`),K.Glyphs);a.l(j,((H,Q)=>{if(H)M(H);else if(Q){const et={};for(const rt of a.n(Q))et[rt.id]=rt;M(null,et)}}))},Nt.TinySDF=class{constructor({fontSize:A=24,buffer:u=3,radius:m=8,cutoff:b=.25,fontFamily:M="sans-serif",fontWeight:C="normal",fontStyle:N="normal"}={}){this.buffer=u,this.cutoff=b,this.radius=m;const j=this.size=A+4*u,H=this._createCanvas(j),Q=this.ctx=H.getContext("2d",{willReadFrequently:!0});Q.font=`${N} ${C} ${A}px ${M}`,Q.textBaseline="alphabetic",Q.textAlign="left",Q.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(A){const u=document.createElement("canvas");return u.width=u.height=A,u}draw(A){const{width:u,actualBoundingBoxAscent:m,actualBoundingBoxDescent:b,actualBoundingBoxLeft:M,actualBoundingBoxRight:C}=this.ctx.measureText(A),N=Math.ceil(m),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(C-M))),H=Math.min(this.size-this.buffer,N+Math.ceil(b)),Q=j+2*this.buffer,et=H+2*this.buffer,rt=Math.max(Q*et,0),pt=new Uint8ClampedArray(rt),Ot={data:pt,width:Q,height:et,glyphWidth:j,glyphHeight:H,glyphTop:N,glyphLeft:0,glyphAdvance:u};if(j===0||H===0)return Ot;const{ctx:kt,buffer:Rt,gridInner:Pt,gridOuter:Qt}=this;kt.clearRect(Rt,Rt,j,H),kt.fillText(A,Rt,Rt+N);const fe=kt.getImageData(Rt,Rt,j,H);Qt.fill(le,0,rt),Pt.fill(0,0,rt);for(let Vt=0;Vt<H;Vt++)for(let te=0;te<j;te++){const me=fe.data[4*(Vt*j+te)+3]/255;if(me===0)continue;const xe=(Vt+Rt)*Q+te+Rt;if(me===1)Qt[xe]=0,Pt[xe]=le;else{const Pe=.5-me;Qt[xe]=Pe>0?Pe*Pe:0,Pt[xe]=Pe<0?Pe*Pe:0}}pe(Qt,0,0,Q,et,Q,this.f,this.v,this.z),pe(Pt,Rt,Rt,j,H,Q,this.f,this.v,this.z);for(let Vt=0;Vt<rt;Vt++){const te=Math.sqrt(Qt[Vt])-Math.sqrt(Pt[Vt]);pt[Vt]=Math.round(255-255*(te/this.radius+this.cutoff))}return Ot}};class Ct{constructor(){this.specification=a.v.light.position}possiblyEvaluate(u,m){return a.z(u.expression.evaluate(m))}interpolate(u,m,b){return{x:a.B.number(u.x,m.x,b),y:a.B.number(u.y,m.y,b),z:a.B.number(u.z,m.z,b)}}}let Tt;class Bt extends a.E{constructor(u){super(),Tt=Tt||new a.r({anchor:new a.D(a.v.light.anchor),position:new Ct,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(Tt),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,m={}){if(!this._validate(a.t,u,m))for(const b in u){const M=u[b];b.endsWith("-transition")?this._transitionable.setTransition(b.slice(0,-11),M):this._transitionable.setValue(b,M)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,b){return(!b||b.validate!==!1)&&a.x(this,u.call(a.y,a.e({value:m,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}}class $t{constructor(u,m){this.width=u,this.height=m,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,m){const b=u.join(",")+String(m);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(u,m)),this.dashEntry[b]}getDashRanges(u,m,b){const M=[];let C=u.length%2==1?-u[u.length-1]*b:0,N=u[0]*b,j=!0;M.push({left:C,right:N,isDash:j,zeroLength:u[0]===0});let H=u[0];for(let Q=1;Q<u.length;Q++){j=!j;const et=u[Q];C=H*b,H+=et,N=H*b,M.push({left:C,right:N,isDash:j,zeroLength:et===0})}return M}addRoundDash(u,m,b){const M=m/2;for(let C=-b;C<=b;C++){const N=this.width*(this.nextRow+b+C);let j=0,H=u[j];for(let Q=0;Q<this.width;Q++){Q/H.right>1&&(H=u[++j]);const et=Math.abs(Q-H.left),rt=Math.abs(Q-H.right),pt=Math.min(et,rt);let Ot;const kt=C/b*(M+1);if(H.isDash){const Rt=M-Math.abs(kt);Ot=Math.sqrt(pt*pt+Rt*Rt)}else Ot=M-Math.sqrt(pt*pt+kt*kt);this.data[N+Q]=Math.max(0,Math.min(255,Ot+128))}}}addRegularDash(u){for(let j=u.length-1;j>=0;--j){const H=u[j],Q=u[j+1];H.zeroLength?u.splice(j,1):Q&&Q.isDash===H.isDash&&(Q.left=H.left,u.splice(j,1))}const m=u[0],b=u[u.length-1];m.isDash===b.isDash&&(m.left=b.left-this.width,b.right=m.right+this.width);const M=this.width*this.nextRow;let C=0,N=u[C];for(let j=0;j<this.width;j++){j/N.right>1&&(N=u[++C]);const H=Math.abs(j-N.left),Q=Math.abs(j-N.right),et=Math.min(H,Q);this.data[M+j]=Math.max(0,Math.min(255,(N.isDash?et:-et)+128))}}addDash(u,m){const b=m?7:0,M=2*b+1;if(this.nextRow+M>this.height)return a.w("LineAtlas out of space"),null;let C=0;for(let j=0;j<u.length;j++)C+=u[j];if(C!==0){const j=this.width/C,H=this.getDashRanges(u,this.width,j);m?this.addRoundDash(H,j,b):this.addRegularDash(H)}const N={y:(this.nextRow+b+.5)/this.height,height:2*b/this.height,width:C};return this.nextRow+=M,this.dirty=!0,N}bind(u){const m=u.gl;this.texture?(m.bindTexture(m.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,m.texSubImage2D(m.TEXTURE_2D,0,0,0,this.width,this.height,m.ALPHA,m.UNSIGNED_BYTE,this.data))):(this.texture=m.createTexture(),m.bindTexture(m.TEXTURE_2D,this.texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texImage2D(m.TEXTURE_2D,0,m.ALPHA,this.width,this.height,0,m.ALPHA,m.UNSIGNED_BYTE,this.data))}}class ft{constructor(u,m,b){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=b;const M=this.workerPool.acquire(b);for(let C=0;C<M.length;C++){const N=new a.C(M[C],m,b);N.name=`Worker ${C}`,this.actors.push(N)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,m,b){a.o(this.actors,((M,C)=>{M.send(u,m,C)}),b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach((m=>{m.remove()})),this.actors=[],u&&this.workerPool.release(this.id)}}function Mt(A,u,m){const b=function(M,C){if(M)return m(M);if(C){const N=a.F(a.e(C,A),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);C.vector_layers&&(N.vectorLayers=C.vector_layers,N.vectorLayerIds=N.vectorLayers.map((j=>j.id))),m(null,N)}};return A.url?a.f(u.transformRequest(A.url,K.Source),b):a.h.frame((()=>b(null,A)))}class Lt{constructor(u,m){u&&(m?this.setSouthWest(u).setNorthEast(m):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof a.L?new a.L(u.lng,u.lat):a.L.convert(u),this}setSouthWest(u){return this._sw=u instanceof a.L?new a.L(u.lng,u.lat):a.L.convert(u),this}extend(u){const m=this._sw,b=this._ne;let M,C;if(u instanceof a.L)M=u,C=u;else{if(!(u instanceof Lt))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(Lt.convert(u)):this.extend(a.L.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(a.L.convert(u)):this;if(M=u._sw,C=u._ne,!M||!C)return this}return m||b?(m.lng=Math.min(M.lng,m.lng),m.lat=Math.min(M.lat,m.lat),b.lng=Math.max(C.lng,b.lng),b.lat=Math.max(C.lat,b.lat)):(this._sw=new a.L(M.lng,M.lat),this._ne=new a.L(C.lng,C.lat)),this}getCenter(){return new a.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.L(this.getWest(),this.getNorth())}getSouthEast(){return new a.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:m,lat:b}=a.L.convert(u);let M=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=m&&m>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&M}static convert(u){return u instanceof Lt?u:u&&new Lt(u)}static fromLngLat(u,m=0){const b=360*m/40075017,M=b/Math.cos(Math.PI/180*u.lat);return new Lt(new a.L(u.lng-M,u.lat-b),new a.L(u.lng+M,u.lat+b))}}class Xt{constructor(u,m,b){this.bounds=Lt.convert(this.validateBounds(u)),this.minzoom=m||0,this.maxzoom=b||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const m=Math.pow(2,u.z),b=Math.floor(a.G(this.bounds.getWest())*m),M=Math.floor(a.H(this.bounds.getNorth())*m),C=Math.ceil(a.G(this.bounds.getEast())*m),N=Math.ceil(a.H(this.bounds.getSouth())*m);return u.x>=b&&u.x<C&&u.y>=M&&u.y<N}}class re extends a.E{constructor(u,m,b,M){if(super(),this.load=()=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Mt(this._options,this.map._requestManager,((C,N)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),C?this.fire(new a.j(C)):N&&(a.e(this,N),N.bounds&&(this.tileBounds=new Xt(N.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}))},this.serialize=()=>a.e({},this._options),this.id=u,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.F(m,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.load()}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}setUrl(u){return this.setSourceProperty((()=>{this.url=u,this._options.url=u})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(u,m){const b=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),M={request:this.map._requestManager.transformRequest(b,K.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function C(N,j){return delete u.request,u.aborted?m(null):N&&N.status!==404?m(N):(j&&j.resourceTiming&&(u.resourceTiming=j.resourceTiming),this.map._refreshExpiredTiles&&j&&u.setExpiryData(j),u.loadVectorData(j,this.map.painter),m(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}M.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=m:u.request=u.actor.send("reloadTile",M,C.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",M,C.bind(this)))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ce extends a.E{constructor(u,m,b,M){super(),this.id=u,this.dispatcher=b,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},m),a.e(this,a.F(m,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Mt(this._options,this.map._requestManager,((u,m)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new a.j(u)):m&&(a.e(this,m),m.bounds&&(this.tileBounds=new Xt(m.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.load()}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}serialize(){return a.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,m){const b=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.request=$.getImage(this.map._requestManager.transformRequest(b,K.Tile),((M,C,N)=>{if(delete u.request,u.aborted)u.state="unloaded",m(null);else if(M)u.state="errored",m(M);else if(C){this.map._refreshExpiredTiles&&N&&u.setExpiryData(N);const j=this.map.painter.context,H=j.gl;u.texture=this.map.painter.getTileTexture(C.width),u.texture?u.texture.update(C,{useMipmap:!0}):(u.texture=new xt(j,C,H.RGBA,{useMipmap:!0}),u.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),j.extTextureFilterAnisotropic&&H.texParameterf(H.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax)),u.state="loaded",m(null)}}),this.map._refreshExpiredTiles)}abortTile(u,m){u.request&&(u.request.cancel(),delete u.request),m()}unloadTile(u,m){u.texture&&this.map.painter.saveTileTexture(u.texture),m()}hasTransition(){return!1}}class Me extends ce{constructor(u,m,b,M){super(u,m,b,M),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox",this.redFactor=m.redFactor,this.greenFactor=m.greenFactor,this.blueFactor=m.blueFactor,this.baseShift=m.baseShift}loadTile(u,m){const b=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),M=this.map._requestManager.transformRequest(b,K.Tile);function C(N,j){N&&(u.state="errored",m(N)),j&&(u.dem=j,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded",m(null))}u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.request=$.getImage(M,((N,j,H)=>a._(this,void 0,void 0,(function*(){if(delete u.request,u.aborted)u.state="unloaded",m(null);else if(N)u.state="errored",m(N);else if(j){this.map._refreshExpiredTiles&&u.setExpiryData(H);const Q=a.a(j)&&a.J()?j:yield(function(rt){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.K()){const pt=rt.width+2,Ot=rt.height+2;try{return new a.R({width:pt,height:Ot},yield a.M(rt,-1,-1,pt,Ot))}catch{}}return a.h.getImageData(rt,1)}))})(j),et={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:Q,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",et,C))}}))),this.map._refreshExpiredTiles)}_getNeighboringTiles(u){const m=u.canonical,b=Math.pow(2,m.z),M=(m.x-1+b)%b,C=m.x===0?u.wrap-1:u.wrap,N=(m.x+1+b)%b,j=m.x+1===b?u.wrap+1:u.wrap,H={};return H[new a.O(u.overscaledZ,C,m.z,M,m.y).key]={backfilled:!1},H[new a.O(u.overscaledZ,j,m.z,N,m.y).key]={backfilled:!1},m.y>0&&(H[new a.O(u.overscaledZ,C,m.z,M,m.y-1).key]={backfilled:!1},H[new a.O(u.overscaledZ,u.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},H[new a.O(u.overscaledZ,j,m.z,N,m.y-1).key]={backfilled:!1}),m.y+1<b&&(H[new a.O(u.overscaledZ,C,m.z,M,m.y+1).key]={backfilled:!1},H[new a.O(u.overscaledZ,u.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},H[new a.O(u.overscaledZ,j,m.z,N,m.y+1).key]={backfilled:!1}),H}unloadTile(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})}}class Ne extends a.E{constructor(u,m,b,M){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>a.e({},this._options,{type:this.type,data:this._data}),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=b.getActor(),this.setEventedParent(M),this._data=m.data,this._options=a.e({},m),this._collectResourceTiming=m.collectResourceTiming,m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId;const C=a.N/this.tileSize;this.workerOptions=a.e({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:(m.buffer!==void 0?m.buffer:128)*C,tolerance:(m.tolerance!==void 0?m.tolerance:.375)*C,extent:a.N,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:m.clusterMaxZoom!==void 0?m.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,m.clusterMinPoints||2),extent:a.N,radius:(m.clusterRadius||50)*C,log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){return this._updateWorkerData(u),this}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u&&(u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=u.clusterRadius),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=u.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(u,m){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},m),this}getClusterChildren(u,m){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},m),this}getClusterLeaves(u,m,b,M){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:m,offset:b},M),this}_updateWorkerData(u){const m=a.e({},this.workerOptions);u?m.dataDiff=u:typeof this._data=="string"?(m.request=this.map._requestManager.transformRequest(a.h.resolveURL(this._data),K.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,m,((b,M)=>{if(this._pendingLoads--,this._removed||M&&M.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let C=null;if(M&&M.resourceTiming&&M.resourceTiming[this.id]&&(C=M.resourceTiming[this.id].slice(0)),b)return void this.fire(new a.j(b));const N={dataType:"source"};this._collectResourceTiming&&C&&C.length>0&&a.e(N,{resourceTiming:C}),this.fire(new a.k("data",Object.assign(Object.assign({},N),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},N),{sourceDataType:"content"})))}))}loaded(){return this._pendingLoads===0}loadTile(u,m){const b=u.actor?"reloadTile":"loadTile";u.actor=this.actor;const M={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.request=this.actor.send(b,M,((C,N)=>(delete u.request,u.unloadVectorData(),u.aborted?m(null):C?m(C):(u.loadVectorData(N,this.map.painter,b==="reloadTile"),m(null)))))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0}unloadTile(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Gt=a.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ce extends a.E{constructor(u,m,b,M){super(),this.load=(C,N)=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=$.getImage(this.map._requestManager.transformRequest(this.url,K.Image),((j,H)=>{this._request=null,this._loaded=!0,j?this.fire(new a.j(j)):H&&(this.image=H,C&&(this.coordinates=C),N&&N(),this._finishLoading())}))},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const C=this.map.painter.context,N=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Gt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new xt(C,this.image,N.RGBA),this.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE));let j=!1;for(const H in this.tiles){const Q=this.tiles[H];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture,j=!0)}j&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=u,this.dispatcher=b,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=m}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=u.url,this.load(u.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(u){this.coordinates=u;const m=u.map(a.U.fromLngLat);this.tileID=(function(M){let C=1/0,N=1/0,j=-1/0,H=-1/0;for(const pt of M)C=Math.min(C,pt.x),N=Math.min(N,pt.y),j=Math.max(j,pt.x),H=Math.max(H,pt.y);const Q=Math.max(j-C,H-N),et=Math.max(0,Math.floor(-Math.log(Q)/Math.LN2)),rt=Math.pow(2,et);return new a.W(et,Math.floor((C+j)/2*rt),Math.floor((N+H)/2*rt))})(m),this.minzoom=this.maxzoom=this.tileID.z;const b=m.map((M=>this.tileID.getTilePoint(M)._round()));return this._boundsArray=new a.V,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,a.N,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,a.N),this._boundsArray.emplaceBack(b[2].x,b[2].y,a.N,a.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(u,m){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},m(null)):(u.state="errored",m(null))}hasTransition(){return!1}}class Ee extends Ce{constructor(u,m,b,M){super(u,m,b,M),this.load=()=>{this._loaded=!1;const C=this.options;this.urls=[];for(const N of C.urls)this.urls.push(this.map._requestManager.transformRequest(N,K.Source).url);a.X(this.urls,((N,j)=>{this._loaded=!0,N?this.fire(new a.j(N)):j&&(this.video=j,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const C=this.map.painter.context,N=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Gt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE),N.texSubImage2D(N.TEXTURE_2D,0,0,0,N.RGBA,N.UNSIGNED_BYTE,this.video)):(this.texture=new xt(C,this.video,N.RGBA),this.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE));let j=!1;for(const H in this.tiles){const Q=this.tiles[H];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture,j=!0)}j&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=m}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const m=this.video.seekable;u<m.start(0)||u>m.end(0)?this.fire(new a.j(new a.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${m.start(0)} and ${m.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class de extends Ce{constructor(u,m,b,M){super(u,m,b,M),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let C=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,C=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,C=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const N=this.map.painter.context,j=N.gl;this.boundsBuffer||(this.boundsBuffer=N.createVertexBuffer(this._boundsArray,Gt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?(C||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new xt(N,this.canvas,j.RGBA,{premultiply:!0});let H=!1;for(const Q in this.tiles){const et=this.tiles[Q];et.state!=="loaded"&&(et.state="loaded",et.texture=this.texture,H=!0)}H&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some((C=>!Array.isArray(C)||C.length!==2||C.some((N=>typeof N!="number"))))||this.fire(new a.j(new a.Y(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.Y(`sources.${u}`,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new a.j(new a.Y(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.Y(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.Y(`sources.${u}`,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const on={},Be=A=>{switch(A){case"geojson":return Ne;case"image":return Ce;case"raster":return ce;case"raster-dem":return Me;case"vector":return re;case"video":return Ee;case"canvas":return de}return on[A]};function ln(A,u){const m=a.Z();return a.$(m,m,[1,1,0]),a.a0(m,m,[.5*A.width,.5*A.height,1]),a.a1(m,m,A.calculatePosMatrix(u.toUnwrapped()))}function Xe(A,u,m,b,M,C){const N=(function(rt,pt,Ot){if(rt)for(const kt of rt){const Rt=pt[kt];if(Rt&&Rt.source===Ot&&Rt.type==="fill-extrusion")return!0}else for(const kt in pt){const Rt=pt[kt];if(Rt.source===Ot&&Rt.type==="fill-extrusion")return!0}return!1})(M&&M.layers,u,A.id),j=C.maxPitchScaleFactor(),H=A.tilesIn(b,j,N);H.sort(Sn);const Q=[];for(const rt of H)Q.push({wrappedTileID:rt.tileID.wrapped().key,queryResults:rt.tile.queryRenderedFeatures(u,m,A._state,rt.queryGeometry,rt.cameraQueryGeometry,rt.scale,M,C,j,ln(A.transform,rt.tileID))});const et=(function(rt){const pt={},Ot={};for(const kt of rt){const Rt=kt.queryResults,Pt=kt.wrappedTileID,Qt=Ot[Pt]=Ot[Pt]||{};for(const fe in Rt){const Vt=Rt[fe],te=Qt[fe]=Qt[fe]||{},me=pt[fe]=pt[fe]||[];for(const xe of Vt)te[xe.featureIndex]||(te[xe.featureIndex]=!0,me.push(xe))}}return pt})(Q);for(const rt in et)et[rt].forEach((pt=>{const Ot=pt.feature,kt=A.getFeatureState(Ot.layer["source-layer"],Ot.id);Ot.source=Ot.layer.source,Ot.layer["source-layer"]&&(Ot.sourceLayer=Ot.layer["source-layer"]),Ot.state=kt}));return et}function Sn(A,u){const m=A.tileID,b=u.tileID;return m.overscaledZ-b.overscaledZ||m.canonical.y-b.canonical.y||m.wrap-b.wrap||m.canonical.x-b.canonical.x}class hn{constructor(u,m){this.timeAdded=0,this.fadeEndTime=0,this.tileID=u,this.uid=a.a2(),this.uses=0,this.tileSize=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const m=u+this.timeAdded;m<this.fadeEndTime||(this.fadeEndTime=m)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,m,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=(function(M,C){const N={};if(!C)return N;for(const j of M){const H=j.layerIds.map((Q=>C.getLayer(Q))).filter(Boolean);if(H.length!==0){j.layers=H,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map((Q=>H.filter((et=>et.id===Q))[0])));for(const Q of H)N[Q.id]=j}}return N})(u.buckets,m.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const C=this.buckets[M];if(C instanceof a.a4){if(this.hasSymbolBuckets=!0,!b)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const C=this.buckets[M];if(C instanceof a.a4&&C.hasRTLText){this.hasRTLText=!0,a.a5();break}}this.queryPadding=0;for(const M in this.buckets){const C=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,m.style.getLayer(M).queryRadius(C))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new a.a3}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const b in this.buckets){const M=this.buckets[b];M.uploadPending()&&M.upload(u)}const m=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new xt(u,this.imageAtlas.image,m.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new xt(u,this.glyphAtlasImage,m.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,m,b,M,C,N,j,H,Q,et){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:C,scale:N,tileSize:this.tileSize,pixelPosMatrix:et,transform:H,params:j,queryPadding:this.queryPadding*Q},u,m,b):{}}querySourceFeatures(u,m){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const M=b.loadVTLayers(),C=m&&m.sourceLayer?m.sourceLayer:"",N=M._geojsonTileLayer||M[C];if(!N)return;const j=a.a6(m&&m.filter),{z:H,x:Q,y:et}=this.tileID.canonical,rt={z:H,x:Q,y:et};for(let pt=0;pt<N.length;pt++){const Ot=N.feature(pt);if(j.needGeometry){const Pt=a.a7(Ot,!0);if(!j.filter(new a.a8(this.tileID.overscaledZ),Pt,this.tileID.canonical))continue}else if(!j.filter(new a.a8(this.tileID.overscaledZ),Ot))continue;const kt=b.getId(Ot,C),Rt=new a.a9(Ot,H,Q,et,kt);Rt.tile=rt,u.push(Rt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const m=this.expirationTime;if(u.cacheControl){const b=a.aa(u.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const b=Date.now();let M=!1;if(this.expirationTime>b)M=!1;else if(m)if(this.expirationTime<m)M=!0;else{const C=this.expirationTime-m;C?this.expirationTime=b+Math.max(C,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,m){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!m.style.hasLayer(M))continue;const C=this.buckets[M],N=C.layers[0].sourceLayer||"_geojsonTileLayer",j=b[N],H=u[N];if(!j||!H||Object.keys(H).length===0)continue;C.update(H,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Q=m&&m.style&&m.style.getLayer(M);Q&&(this.queryPadding=Math.max(this.queryPadding,Q.queryRadius(C)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=a.h.now()+u}setDependencies(u,m){const b={};for(const M of m)b[M]=!0;this.dependencies[u]=b}hasDependency(u,m){for(const b of u){const M=this.dependencies[b];if(M){for(const C of m)if(M[C])return!0}}return!1}}class Rn{constructor(u,m){this.max=u,this.onRemove=m,this.reset()}reset(){for(const u in this.data)for(const m of this.data[u])m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value);return this.data={},this.order=[],this}add(u,m,b){const M=u.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const C={value:m,timeout:void 0};if(b!==void 0&&(C.timeout=setTimeout((()=>{this.remove(u,C)}),b)),this.data[M].push(C),this.order.push(M),this.order.length>this.max){const N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const m=this.data[u].shift();return m.timeout&&clearTimeout(m.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),m.value}getByKey(u){const m=this.data[u];return m?m[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,m){if(!this.has(u))return this;const b=u.wrapped().key,M=m===void 0?0:this.data[b].indexOf(m),C=this.data[b][M];return this.data[b].splice(M,1),C.timeout&&clearTimeout(C.timeout),this.data[b].length===0&&delete this.data[b],this.onRemove(C.value),this.order.splice(this.order.indexOf(b),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}filter(u){const m=[];for(const b in this.data)for(const M of this.data[b])u(M.value)||m.push(M);for(const b of m)this.remove(b.value.tileID,b)}}class ge{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,m,b){const M=String(m);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][M]=this.stateChanges[u][M]||{},a.e(this.stateChanges[u][M],b),this.deletedStates[u]===null){this.deletedStates[u]={};for(const C in this.state[u])C!==M&&(this.deletedStates[u][C]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][M]===null){this.deletedStates[u][M]={};for(const C in this.state[u][M])b[C]||(this.deletedStates[u][M][C]=null)}else for(const C in b)this.deletedStates[u]&&this.deletedStates[u][M]&&this.deletedStates[u][M][C]===null&&delete this.deletedStates[u][M][C]}removeFeatureState(u,m,b){if(this.deletedStates[u]===null)return;const M=String(m);if(this.deletedStates[u]=this.deletedStates[u]||{},b&&m!==void 0)this.deletedStates[u][M]!==null&&(this.deletedStates[u][M]=this.deletedStates[u][M]||{},this.deletedStates[u][M][b]=null);else if(m!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][M])for(b in this.deletedStates[u][M]={},this.stateChanges[u][M])this.deletedStates[u][M][b]=null;else this.deletedStates[u][M]=null;else this.deletedStates[u]=null}getState(u,m){const b=String(m),M=a.e({},(this.state[u]||{})[b],(this.stateChanges[u]||{})[b]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const C=this.deletedStates[u][m];if(C===null)return{};for(const N in C)delete M[N]}return M}initializeTileState(u,m){u.setFeatureState(this.state,m)}coalesceChanges(u,m){const b={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const C={};for(const N in this.stateChanges[M])this.state[M][N]||(this.state[M][N]={}),a.e(this.state[M][N],this.stateChanges[M][N]),C[N]=this.state[M][N];b[M]=C}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const C={};if(this.deletedStates[M]===null)for(const N in this.state[M])C[N]={},this.state[M][N]={};else for(const N in this.deletedStates[M]){if(this.deletedStates[M][N]===null)this.state[M][N]={};else for(const j of Object.keys(this.deletedStates[M][N]))delete this.state[M][N][j];C[N]=this.state[M][N]}b[M]=b[M]||{},a.e(b[M],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(const M in u)u[M].setFeatureState(b,m)}}class Gn extends a.E{constructor(u,m,b){super(),this.id=u,this.dispatcher=b,this.on("data",(M=>{M.dataType==="source"&&M.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&M.dataType==="source"&&M.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((M,C,N,j)=>{const H=new(Be(C.type))(M,C,N,j);if(H.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${H.id}`);return H})(u,m,b,this),this._tiles={},this._cache=new Rn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ge,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u in this._tiles){const m=this._tiles[u];if(m.state!=="loaded"&&m.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,m){return this._source.loadTile(u,m)}_unloadTile(u){if(this._source.unloadTile)return this._source.unloadTile(u,(()=>{}))}_abortTile(u){this._source.abortTile&&this._source.abortTile(u,(()=>{})),this._source.fire(new a.k("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const m in this._tiles){const b=this._tiles[m];b.upload(u),b.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((u=>u.tileID)).sort($i).map((u=>u.key))}getRenderableIds(u){const m=[];for(const b in this._tiles)this._isIdRenderable(b,u)&&m.push(this._tiles[b]);return u?m.sort(((b,M)=>{const C=b.tileID,N=M.tileID,j=new a.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),H=new a.P(N.canonical.x,N.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-N.overscaledZ||H.y-j.y||H.x-j.x})).map((b=>b.tileID.key)):m.map((b=>b.tileID)).sort($i).map((b=>b.key))}hasRenderableParent(u){const m=this.findLoadedParent(u,0);return!!m&&this._isIdRenderable(m.tileID.key)}_isIdRenderable(u,m){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(m||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,m){const b=this._tiles[u];b&&(b.state!=="loading"&&(b.state=m),this._loadTile(b,this._tileLoaded.bind(this,b,u,m)))}_tileLoaded(u,m,b,M){if(M)return u.state="errored",void(M.status!==404?this._source.fire(new a.j(M,{tile:u})):this.update(this.transform,this.terrain));u.timeAdded=a.h.now(),b==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(m,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const m=this.getRenderableIds();for(let M=0;M<m.length;M++){const C=m[M];if(u.neighboringTiles&&u.neighboringTiles[C]){const N=this.getTileByID(C);b(u,N),b(N,u)}}function b(M,C){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let N=C.tileID.canonical.x-M.tileID.canonical.x;const j=C.tileID.canonical.y-M.tileID.canonical.y,H=Math.pow(2,M.tileID.canonical.z),Q=C.tileID.key;N===0&&j===0||Math.abs(j)>1||(Math.abs(N)>1&&(Math.abs(N+H)===1?N+=H:Math.abs(N-H)===1&&(N-=H)),C.dem&&M.dem&&(M.dem.backfillBorder(C.dem,N,j),M.neighboringTiles&&M.neighboringTiles[Q]&&(M.neighboringTiles[Q].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,m,b,M){for(const C in this._tiles){let N=this._tiles[C];if(M[C]||!N.hasData()||N.tileID.overscaledZ<=m||N.tileID.overscaledZ>b)continue;let j=N.tileID;for(;N&&N.tileID.overscaledZ>m+1;){const Q=N.tileID.scaledTo(N.tileID.overscaledZ-1);N=this._tiles[Q.key],N&&N.hasData()&&(j=Q)}let H=j;for(;H.overscaledZ>m;)if(H=H.scaledTo(H.overscaledZ-1),u[H.key]){M[j.key]=j;break}}}findLoadedParent(u,m){if(u.key in this._loadedParentTiles){const b=this._loadedParentTiles[u.key];return b&&b.tileID.overscaledZ>=m?b:null}for(let b=u.overscaledZ-1;b>=m;b--){const M=u.scaledTo(b),C=this._getLoadedTile(M);if(C)return C}}_getLoadedTile(u){const m=this._tiles[u.key];return m&&m.hasData()?m:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const m=Math.ceil(u.width/this._source.tileSize)+1,b=Math.ceil(u.height/this._source.tileSize)+1,M=Math.floor(m*b*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(C)}handleWrapJump(u){const m=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,m){const b={};for(const M in this._tiles){const C=this._tiles[M];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+m),b[C.tileID.key]=C}this._tiles=b;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}update(u,m){if(this.transform=u,this.terrain=m,!this._sourceLoaded||this._paused)return;let b;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?b=u.getVisibleUnwrappedCoordinates(this._source.tileID).map((et=>new a.O(et.canonical.z,et.wrap,et.canonical.z,et.canonical.x,et.canonical.y))):(b=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:m}),this._source.hasTile&&(b=b.filter((et=>this._source.hasTile(et))))):b=[];const M=u.coveringZoomLevel(this._source),C=Math.max(M-Gn.maxOverzooming,this._source.minzoom),N=Math.max(M+Gn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const et={};for(const rt of b)if(rt.canonical.z>this._source.minzoom){const pt=rt.scaledTo(rt.canonical.z-1);et[pt.key]=pt;const Ot=rt.scaledTo(Math.max(this._source.minzoom,Math.min(rt.canonical.z,5)));et[Ot.key]=Ot}b=b.concat(Object.values(et))}const j=b.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,j&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const H=this._updateRetainedTiles(b,M);if(ni(this._source.type)){const et={},rt={},pt=Object.keys(H),Ot=a.h.now();for(const kt of pt){const Rt=H[kt],Pt=this._tiles[kt];if(!Pt||Pt.fadeEndTime!==0&&Pt.fadeEndTime<=Ot)continue;const Qt=this.findLoadedParent(Rt,C);Qt&&(this._addTile(Qt.tileID),et[Qt.tileID.key]=Qt.tileID),rt[kt]=Rt}this._retainLoadedChildren(rt,M,N,H);for(const kt in et)H[kt]||(this._coveredTiles[kt]=!0,H[kt]=et[kt]);if(m){const kt={},Rt={};for(const Pt of b)this._tiles[Pt.key].hasData()?kt[Pt.key]=Pt:Rt[Pt.key]=Pt;for(const Pt in Rt){const Qt=Rt[Pt].children(this._source.maxzoom);this._tiles[Qt[0].key]&&this._tiles[Qt[1].key]&&this._tiles[Qt[2].key]&&this._tiles[Qt[3].key]&&(kt[Qt[0].key]=H[Qt[0].key]=Qt[0],kt[Qt[1].key]=H[Qt[1].key]=Qt[1],kt[Qt[2].key]=H[Qt[2].key]=Qt[2],kt[Qt[3].key]=H[Qt[3].key]=Qt[3],delete Rt[Pt])}for(const Pt in Rt){const Qt=this.findLoadedParent(Rt[Pt],this._source.minzoom);if(Qt){kt[Qt.tileID.key]=H[Qt.tileID.key]=Qt.tileID;for(const fe in kt)kt[fe].isChildOf(Qt.tileID)&&delete kt[fe]}}for(const Pt in this._tiles)kt[Pt]||(this._coveredTiles[Pt]=!0)}}for(const et in H)this._tiles[et].clearFadeHold();const Q=a.ab(this._tiles,H);for(const et of Q){const rt=this._tiles[et];rt.hasSymbolBuckets&&!rt.holdingForFade()?rt.setHoldDuration(this.map._fadeDuration):rt.hasSymbolBuckets&&!rt.symbolFadeFinished()||this._removeTile(et)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,m){const b={},M={},C=Math.max(m-Gn.maxOverzooming,this._source.minzoom),N=Math.max(m+Gn.maxUnderzooming,this._source.minzoom),j={};for(const H of u){const Q=this._addTile(H);b[H.key]=H,Q.hasData()||m<this._source.maxzoom&&(j[H.key]=H)}this._retainLoadedChildren(j,m,N,b);for(const H of u){let Q=this._tiles[H.key];if(Q.hasData())continue;if(m+1>this._source.maxzoom){const rt=H.children(this._source.maxzoom)[0],pt=this.getTile(rt);if(pt&&pt.hasData()){b[rt.key]=rt;continue}}else{const rt=H.children(this._source.maxzoom);if(b[rt[0].key]&&b[rt[1].key]&&b[rt[2].key]&&b[rt[3].key])continue}let et=Q.wasRequested();for(let rt=H.overscaledZ-1;rt>=C;--rt){const pt=H.scaledTo(rt);if(M[pt.key])break;if(M[pt.key]=!0,Q=this.getTile(pt),!Q&&et&&(Q=this._addTile(pt)),Q){const Ot=Q.hasData();if((et||Ot)&&(b[pt.key]=pt),et=Q.wasRequested(),Ot)break}}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const m=[];let b,M=this._tiles[u].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){b=this._loadedParentTiles[M.key];break}m.push(M.key);const C=M.scaledTo(M.overscaledZ-1);if(b=this._getLoadedTile(C),b)break;M=C}for(const C of m)this._loadedParentTiles[C]=b}}_addTile(u){let m=this._tiles[u.key];if(m)return m;m=this._cache.getAndRemove(u),m&&(this._setTileReloadTimer(u.key,m),m.tileID=u,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,m)));const b=m;return m||(m=new hn(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(m,this._tileLoaded.bind(this,m,u.key,m.state))),m.uses++,this._tiles[u.key]=m,b||this._source.fire(new a.k("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m}_setTileReloadTimer(u,m){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const b=m.getExpiryTimeout();b&&(this._timers[u]=setTimeout((()=>{this._reloadTile(u,"expired"),delete this._timers[u]}),b))}_removeTile(u){const m=this._tiles[u];m&&(m.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,m,b){const M=[],C=this.transform;if(!C)return M;const N=b?C.getCameraQueryGeometry(u):u,j=u.map((kt=>C.pointCoordinate(kt,this.terrain))),H=N.map((kt=>C.pointCoordinate(kt,this.terrain))),Q=this.getIds();let et=1/0,rt=1/0,pt=-1/0,Ot=-1/0;for(const kt of H)et=Math.min(et,kt.x),rt=Math.min(rt,kt.y),pt=Math.max(pt,kt.x),Ot=Math.max(Ot,kt.y);for(let kt=0;kt<Q.length;kt++){const Rt=this._tiles[Q[kt]];if(Rt.holdingForFade())continue;const Pt=Rt.tileID,Qt=Math.pow(2,C.zoom-Rt.tileID.overscaledZ),fe=m*Rt.queryPadding*a.N/Rt.tileSize/Qt,Vt=[Pt.getTilePoint(new a.U(et,rt)),Pt.getTilePoint(new a.U(pt,Ot))];if(Vt[0].x-fe<a.N&&Vt[0].y-fe<a.N&&Vt[1].x+fe>=0&&Vt[1].y+fe>=0){const te=j.map((xe=>Pt.getTilePoint(xe))),me=H.map((xe=>Pt.getTilePoint(xe)));M.push({tile:Rt,tileID:Pt,queryGeometry:te,cameraQueryGeometry:me,scale:Qt})}}return M}getVisibleCoordinates(u){const m=this.getRenderableIds(u).map((b=>this._tiles[b].tileID));for(const b of m)b.posMatrix=this.transform.calculatePosMatrix(b.toUnwrapped());return m}hasTransition(){if(this._source.hasTransition())return!0;if(ni(this._source.type)){const u=a.h.now();for(const m in this._tiles)if(this._tiles[m].fadeEndTime>=u)return!0}return!1}setFeatureState(u,m,b){this._state.updateState(u=u||"_geojsonTileLayer",m,b)}removeFeatureState(u,m,b){this._state.removeFeatureState(u=u||"_geojsonTileLayer",m,b)}getFeatureState(u,m){return this._state.getState(u=u||"_geojsonTileLayer",m)}setDependencies(u,m,b){const M=this._tiles[u];M&&M.setDependencies(m,b)}reloadTilesForDependencies(u,m){for(const b in this._tiles)this._tiles[b].hasDependency(u,m)&&this._reloadTile(b,"reloading");this._cache.filter((b=>!b.hasDependency(u,m)))}}function $i(A,u){const m=Math.abs(2*A.wrap)-+(A.wrap<0),b=Math.abs(2*u.wrap)-+(u.wrap<0);return A.overscaledZ-u.overscaledZ||b-m||u.canonical.y-A.canonical.y||u.canonical.x-A.canonical.x}function ni(A){return A==="raster"||A==="image"||A==="video"}Gn.maxOverzooming=10,Gn.maxUnderzooming=3;const fn="mapboxgl_preloaded_worker_pool";class Qi{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<Qi.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach((m=>{m.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[fn]}numActive(){return Object.keys(this.active).length}}const mi=Math.floor(a.h.hardwareConcurrency/2);let Ui;function Dr(){return Ui||(Ui=new Qi),Ui}Qi.workerCount=a.ac(globalThis)?Math.max(Math.min(mi,3),1):1;class ws{constructor(u,m){this.reset(u,m)}reset(u,m){this.points=u||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=a.ad(u,0,1);let m=1,b=this._distances[m];const M=u*this.paddedLength+this.padding;for(;b<M&&m<this._distances.length;)b=this._distances[++m];const C=m-1,N=this._distances[C],j=b-N,H=j>0?(M-N)/j:0;return this.points[C].mult(1-H).add(this.points[m].mult(H))}}function Oa(A,u){let m=!0;return A==="always"||A!=="never"&&u!=="never"||(m=!1),m}class Vr{constructor(u,m,b){const M=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(u/b),this.yCellCount=Math.ceil(m/b);for(let N=0;N<this.xCellCount*this.yCellCount;N++)M.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=m,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,m,b,M,C){this._forEachCell(m,b,M,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(M),this.bboxes.push(C)}insertCircle(u,m,b,M){this._forEachCell(m-M,b-M,m+M,b+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(m),this.circles.push(b),this.circles.push(M)}_insertBoxCell(u,m,b,M,C,N){this.boxCells[C].push(N)}_insertCircleCell(u,m,b,M,C,N){this.circleCells[C].push(N)}_query(u,m,b,M,C,N,j){if(b<0||u>this.width||M<0||m>this.height)return[];const H=[];if(u<=0&&m<=0&&this.width<=b&&this.height<=M){if(C)return[{key:null,x1:u,y1:m,x2:b,y2:M}];for(let Q=0;Q<this.boxKeys.length;Q++)H.push({key:this.boxKeys[Q],x1:this.bboxes[4*Q],y1:this.bboxes[4*Q+1],x2:this.bboxes[4*Q+2],y2:this.bboxes[4*Q+3]});for(let Q=0;Q<this.circleKeys.length;Q++){const et=this.circles[3*Q],rt=this.circles[3*Q+1],pt=this.circles[3*Q+2];H.push({key:this.circleKeys[Q],x1:et-pt,y1:rt-pt,x2:et+pt,y2:rt+pt})}}else this._forEachCell(u,m,b,M,this._queryCell,H,{hitTest:C,overlapMode:N,seenUids:{box:{},circle:{}}},j);return H}query(u,m,b,M){return this._query(u,m,b,M,!1,null)}hitTest(u,m,b,M,C,N){return this._query(u,m,b,M,!0,C,N).length>0}hitTestCircle(u,m,b,M,C){const N=u-b,j=u+b,H=m-b,Q=m+b;if(j<0||N>this.width||Q<0||H>this.height)return!1;const et=[];return this._forEachCell(N,H,j,Q,this._queryCellCircle,et,{hitTest:!0,overlapMode:M,circle:{x:u,y:m,radius:b},seenUids:{box:{},circle:{}}},C),et.length>0}_queryCell(u,m,b,M,C,N,j,H){const{seenUids:Q,hitTest:et,overlapMode:rt}=j,pt=this.boxCells[C];if(pt!==null){const kt=this.bboxes;for(const Rt of pt)if(!Q.box[Rt]){Q.box[Rt]=!0;const Pt=4*Rt,Qt=this.boxKeys[Rt];if(u<=kt[Pt+2]&&m<=kt[Pt+3]&&b>=kt[Pt+0]&&M>=kt[Pt+1]&&(!H||H(Qt))&&(!et||!Oa(rt,Qt.overlapMode))&&(N.push({key:Qt,x1:kt[Pt],y1:kt[Pt+1],x2:kt[Pt+2],y2:kt[Pt+3]}),et))return!0}}const Ot=this.circleCells[C];if(Ot!==null){const kt=this.circles;for(const Rt of Ot)if(!Q.circle[Rt]){Q.circle[Rt]=!0;const Pt=3*Rt,Qt=this.circleKeys[Rt];if(this._circleAndRectCollide(kt[Pt],kt[Pt+1],kt[Pt+2],u,m,b,M)&&(!H||H(Qt))&&(!et||!Oa(rt,Qt.overlapMode))){const fe=kt[Pt],Vt=kt[Pt+1],te=kt[Pt+2];if(N.push({key:Qt,x1:fe-te,y1:Vt-te,x2:fe+te,y2:Vt+te}),et)return!0}}}return!1}_queryCellCircle(u,m,b,M,C,N,j,H){const{circle:Q,seenUids:et,overlapMode:rt}=j,pt=this.boxCells[C];if(pt!==null){const kt=this.bboxes;for(const Rt of pt)if(!et.box[Rt]){et.box[Rt]=!0;const Pt=4*Rt,Qt=this.boxKeys[Rt];if(this._circleAndRectCollide(Q.x,Q.y,Q.radius,kt[Pt+0],kt[Pt+1],kt[Pt+2],kt[Pt+3])&&(!H||H(Qt))&&!Oa(rt,Qt.overlapMode))return N.push(!0),!0}}const Ot=this.circleCells[C];if(Ot!==null){const kt=this.circles;for(const Rt of Ot)if(!et.circle[Rt]){et.circle[Rt]=!0;const Pt=3*Rt,Qt=this.circleKeys[Rt];if(this._circlesCollide(kt[Pt],kt[Pt+1],kt[Pt+2],Q.x,Q.y,Q.radius)&&(!H||H(Qt))&&!Oa(rt,Qt.overlapMode))return N.push(!0),!0}}}_forEachCell(u,m,b,M,C,N,j,H){const Q=this._convertToXCellCoord(u),et=this._convertToYCellCoord(m),rt=this._convertToXCellCoord(b),pt=this._convertToYCellCoord(M);for(let Ot=Q;Ot<=rt;Ot++)for(let kt=et;kt<=pt;kt++)if(C.call(this,u,m,b,M,this.xCellCount*kt+Ot,N,j,H))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,m,b,M,C,N){const j=M-u,H=C-m,Q=b+N;return Q*Q>j*j+H*H}_circleAndRectCollide(u,m,b,M,C,N,j){const H=(N-M)/2,Q=Math.abs(u-(M+H));if(Q>H+b)return!1;const et=(j-C)/2,rt=Math.abs(m-(C+et));if(rt>et+b)return!1;if(Q<=H||rt<=et)return!0;const pt=Q-H,Ot=rt-et;return pt*pt+Ot*Ot<=b*b}}function Fe(A,u,m,b,M){const C=a.Z();return u?(a.a0(C,C,[1/M,1/M,1]),m||a.ae(C,C,b.angle)):a.a1(C,b.labelPlaneMatrix,A),C}function yr(A,u,m,b,M){if(u){const C=a.af(A);return a.a0(C,C,[M,M,1]),m||a.ae(C,C,-b.angle),C}return b.glCoordMatrix}function Yn(A,u,m){let b;m?(b=[A.x,A.y,m(A.x,A.y),1],a.ag(b,b,u)):(b=[A.x,A.y,0,1],zt(b,b,u));const M=b[3];return{point:new a.P(b[0]/M,b[1]/M),signedDistanceFromCamera:M}}function ga(A,u){return .5+A/u*.5}function _r(A,u){const m=A[0]/A[3],b=A[1]/A[3];return m>=-u[0]&&m<=u[0]&&b>=-u[1]&&b<=u[1]}function Ze(A,u,m,b,M,C,N,j,H,Q){const et=b?A.textSizeData:A.iconSizeData,rt=a.ah(et,m.transform.zoom),pt=[256/m.width*2+1,256/m.height*2+1],Ot=b?A.text.dynamicLayoutVertexArray:A.icon.dynamicLayoutVertexArray;Ot.clear();const kt=A.lineVertexArray,Rt=b?A.text.placedSymbolArray:A.icon.placedSymbolArray,Pt=m.transform.width/m.transform.height;let Qt=!1;for(let fe=0;fe<Rt.length;fe++){const Vt=Rt.get(fe);if(Vt.hidden||Vt.writingMode===a.ai.vertical&&!Qt){Et(Vt.numGlyphs,Ot);continue}let te;if(Qt=!1,Q?(te=[Vt.anchorX,Vt.anchorY,Q(Vt.anchorX,Vt.anchorY),1],a.ag(te,te,u)):(te=[Vt.anchorX,Vt.anchorY,0,1],zt(te,te,u)),!_r(te,pt)){Et(Vt.numGlyphs,Ot);continue}const me=ga(m.transform.cameraToCenterDistance,te[3]),xe=a.aj(et,rt,Vt),Pe=N?xe/me:xe*me,Ve=new a.P(Vt.anchorX,Vt.anchorY),ze=Yn(Ve,M,Q).point,qe={projections:{},offsets:{}},dn=Ir(Vt,Pe,!1,j,u,M,C,A.glyphOffsetArray,kt,Ot,ze,Ve,qe,Pt,H,Q);Qt=dn.useVertical,(dn.notEnoughRoom||Qt||dn.needsFlipping&&Ir(Vt,Pe,!0,j,u,M,C,A.glyphOffsetArray,kt,Ot,ze,Ve,qe,Pt,H,Q).notEnoughRoom)&&Et(Vt.numGlyphs,Ot)}b?A.text.dynamicLayoutVertexBuffer.updateData(Ot):A.icon.dynamicLayoutVertexBuffer.updateData(Ot)}function In(A,u,m,b,M,C,N,j,H,Q,et,rt,pt){const Ot=j.glyphStartIndex+j.numGlyphs,kt=j.lineStartIndex,Rt=j.lineStartIndex+j.lineLength,Pt=u.getoffsetX(j.glyphStartIndex),Qt=u.getoffsetX(Ot-1),fe=lt(A*Pt,m,b,M,C,N,j.segment,kt,Rt,H,Q,et,rt,pt);if(!fe)return null;const Vt=lt(A*Qt,m,b,M,C,N,j.segment,kt,Rt,H,Q,et,rt,pt);return Vt?{first:fe,last:Vt}:null}function kn(A,u,m,b){return A===a.ai.horizontal&&Math.abs(m.y-u.y)>Math.abs(m.x-u.x)*b?{useVertical:!0}:(A===a.ai.vertical?u.y<m.y:u.x>m.x)?{needsFlipping:!0}:null}function Ir(A,u,m,b,M,C,N,j,H,Q,et,rt,pt,Ot,kt,Rt){const Pt=u/24,Qt=A.lineOffsetX*Pt,fe=A.lineOffsetY*Pt;let Vt;if(A.numGlyphs>1){const te=A.glyphStartIndex+A.numGlyphs,me=A.lineStartIndex,xe=A.lineStartIndex+A.lineLength,Pe=In(Pt,j,Qt,fe,m,et,rt,A,H,C,pt,kt,Rt);if(!Pe)return{notEnoughRoom:!0};const Ve=Yn(Pe.first.point,N,Rt).point,ze=Yn(Pe.last.point,N,Rt).point;if(b&&!m){const qe=kn(A.writingMode,Ve,ze,Ot);if(qe)return qe}Vt=[Pe.first];for(let qe=A.glyphStartIndex+1;qe<te-1;qe++)Vt.push(lt(Pt*j.getoffsetX(qe),Qt,fe,m,et,rt,A.segment,me,xe,H,C,pt,kt,Rt));Vt.push(Pe.last)}else{if(b&&!m){const me=Yn(rt,M,Rt).point,xe=A.lineStartIndex+A.segment+1,Pe=new a.P(H.getx(xe),H.gety(xe)),Ve=Yn(Pe,M,Rt),ze=Ve.signedDistanceFromCamera>0?Ve.point:ya(rt,Pe,me,1,M,Rt),qe=kn(A.writingMode,me,ze,Ot);if(qe)return qe}const te=lt(Pt*j.getoffsetX(A.glyphStartIndex),Qt,fe,m,et,rt,A.segment,A.lineStartIndex,A.lineStartIndex+A.lineLength,H,C,pt,kt,Rt);if(!te)return{notEnoughRoom:!0};Vt=[te]}for(const te of Vt)a.ak(Q,te.point,te.angle);return{}}function ya(A,u,m,b,M,C){const N=Yn(A.add(A.sub(u)._unit()),M,C).point,j=m.sub(N);return m.add(j._mult(b/j.mag()))}function Cn(A,u){const{projectionCache:m,lineVertexArray:b,labelPlaneMatrix:M,tileAnchorPoint:C,distanceFromAnchor:N,getElevation:j,previousVertex:H,direction:Q,absOffsetX:et}=u;if(m.projections[A])return m.projections[A];const rt=new a.P(b.getx(A),b.gety(A)),pt=Yn(rt,M,j);if(pt.signedDistanceFromCamera>0)return m.projections[A]=pt.point,pt.point;const Ot=A-Q;return ya(N===0?C:new a.P(b.getx(Ot),b.gety(Ot)),rt,H,et-N+1,M,j)}function Gr(A,u,m){return A._unit()._perp()._mult(u*m)}function It(A,u,m,b,M,C,N,j){const{projectionCache:H,direction:Q}=j;if(H.offsets[A])return H.offsets[A];const et=m.add(u);if(A+Q<b||A+Q>=M)return H.offsets[A]=et,et;const rt=Cn(A+Q,j),pt=Gr(rt.sub(m),N,Q),Ot=m.add(pt),kt=rt.add(pt);return H.offsets[A]=a.al(C,et,Ot,kt)||et,H.offsets[A]}function lt(A,u,m,b,M,C,N,j,H,Q,et,rt,pt,Ot){const kt=b?A-u:A+u;let Rt=kt>0?1:-1,Pt=0;b&&(Rt*=-1,Pt=Math.PI),Rt<0&&(Pt+=Math.PI);let Qt,fe,Vt=Rt>0?j+N:j+N+1,te=M,me=M,xe=0,Pe=0;const Ve=Math.abs(kt),ze=[];let qe;for(;xe+Pe<=Ve;){if(Vt+=Rt,Vt<j||Vt>=H)return null;xe+=Pe,me=te,fe=Qt;const Ye={projectionCache:rt,lineVertexArray:Q,labelPlaneMatrix:et,tileAnchorPoint:C,distanceFromAnchor:xe,getElevation:Ot,previousVertex:me,direction:Rt,absOffsetX:Ve};if(te=Cn(Vt,Ye),m===0)ze.push(me),qe=te.sub(me);else{let vn;const pn=te.sub(me);vn=pn.mag()===0?Gr(Cn(Vt+Rt,Ye).sub(te),m,Rt):Gr(pn,m,Rt),fe||(fe=me.add(vn)),Qt=It(Vt,vn,te,j,H,fe,m,Ye),ze.push(fe),qe=Qt.sub(fe)}Pe=qe.mag()}const dn=qe._mult((Ve-xe)/Pe)._add(fe||me),ai=Pt+Math.atan2(te.y-me.y,te.x-me.x);return ze.push(dn),{point:dn,angle:pt?ai:0,path:ze}}const dt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Et(A,u){for(let m=0;m<A;m++){const b=u.length;u.resize(b+4),u.float32.set(dt,3*b)}}function zt(A,u,m){const b=u[0],M=u[1];return A[0]=m[0]*b+m[4]*M+m[12],A[1]=m[1]*b+m[5]*M+m[13],A[3]=m[3]*b+m[7]*M+m[15],A}const jt=100;class ie{constructor(u,m=new Vr(u.width+200,u.height+200,25),b=new Vr(u.width+200,u.height+200,25)){this.transform=u,this.grid=m,this.ignoredGrid=b,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+jt,this.screenBottomBoundary=u.height+jt,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,m,b,M,C,N){const j=this.projectAndGetPerspectiveRatio(M,u.anchorPointX,u.anchorPointY,N),H=b*j.perspectiveRatio,Q=u.x1*H+j.point.x,et=u.y1*H+j.point.y,rt=u.x2*H+j.point.x,pt=u.y2*H+j.point.y;return!this.isInsideGrid(Q,et,rt,pt)||m!=="always"&&this.grid.hitTest(Q,et,rt,pt,m,C)||j.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Q,et,rt,pt],offscreen:this.isOffscreen(Q,et,rt,pt)}}placeCollisionCircles(u,m,b,M,C,N,j,H,Q,et,rt,pt,Ot,kt){const Rt=[],Pt=new a.P(m.anchorX,m.anchorY),Qt=Yn(Pt,N,kt),fe=ga(this.transform.cameraToCenterDistance,Qt.signedDistanceFromCamera),Vt=(et?C/fe:C*fe)/a.ap,te=Yn(Pt,j,kt).point,me=In(Vt,M,m.lineOffsetX*Vt,m.lineOffsetY*Vt,!1,te,Pt,m,b,j,{projections:{},offsets:{}},!1,kt);let xe=!1,Pe=!1,Ve=!0;if(me){const ze=.5*pt*fe+Ot,qe=new a.P(-100,-100),dn=new a.P(this.screenRightBoundary,this.screenBottomBoundary),ai=new ws,Ye=me.first,vn=me.last;let pn=[];for(let Fn=Ye.path.length-1;Fn>=1;Fn--)pn.push(Ye.path[Fn]);for(let Fn=1;Fn<vn.path.length;Fn++)pn.push(vn.path[Fn]);const Vi=2.5*ze;if(H){const Fn=pn.map((ei=>Yn(ei,H,kt)));pn=Fn.some((ei=>ei.signedDistanceFromCamera<=0))?[]:Fn.map((ei=>ei.point))}let Zn=[];if(pn.length>0){const Fn=pn[0].clone(),ei=pn[0].clone();for(let dr=1;dr<pn.length;dr++)Fn.x=Math.min(Fn.x,pn[dr].x),Fn.y=Math.min(Fn.y,pn[dr].y),ei.x=Math.max(ei.x,pn[dr].x),ei.y=Math.max(ei.y,pn[dr].y);Zn=Fn.x>=qe.x&&ei.x<=dn.x&&Fn.y>=qe.y&&ei.y<=dn.y?[pn]:ei.x<qe.x||Fn.x>dn.x||ei.y<qe.y||Fn.y>dn.y?[]:a.am([pn],qe.x,qe.y,dn.x,dn.y)}for(const Fn of Zn){ai.reset(Fn,.25*ze);let ei=0;ei=ai.length<=.5*ze?1:Math.ceil(ai.paddedLength/Vi)+1;for(let dr=0;dr<ei;dr++){const Zi=dr/Math.max(ei-1,1),Ra=ai.lerp(Zi),xr=Ra.x+jt,qr=Ra.y+jt;Rt.push(xr,qr,ze,0);const ha=xr-ze,er=qr-ze,zo=xr+ze,Xa=qr+ze;if(Ve=Ve&&this.isOffscreen(ha,er,zo,Xa),Pe=Pe||this.isInsideGrid(ha,er,zo,Xa),u!=="always"&&this.grid.hitTestCircle(xr,qr,ze,u,rt)&&(xe=!0,!Q))return{circles:[],offscreen:!1,collisionDetected:xe}}}}return{circles:!Q&&xe||!Pe||fe<this.perspectiveRatioCutoff?[]:Rt,offscreen:Ve,collisionDetected:xe}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let b=1/0,M=1/0,C=-1/0,N=-1/0;for(const et of u){const rt=new a.P(et.x+jt,et.y+jt);b=Math.min(b,rt.x),M=Math.min(M,rt.y),C=Math.max(C,rt.x),N=Math.max(N,rt.y),m.push(rt)}const j=this.grid.query(b,M,C,N).concat(this.ignoredGrid.query(b,M,C,N)),H={},Q={};for(const et of j){const rt=et.key;if(H[rt.bucketInstanceId]===void 0&&(H[rt.bucketInstanceId]={}),H[rt.bucketInstanceId][rt.featureIndex])continue;const pt=[new a.P(et.x1,et.y1),new a.P(et.x2,et.y1),new a.P(et.x2,et.y2),new a.P(et.x1,et.y2)];a.an(m,pt)&&(H[rt.bucketInstanceId][rt.featureIndex]=!0,Q[rt.bucketInstanceId]===void 0&&(Q[rt.bucketInstanceId]=[]),Q[rt.bucketInstanceId].push(rt.featureIndex))}return Q}insertCollisionBox(u,m,b,M,C,N){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:C,collisionGroupID:N,overlapMode:m},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,m,b,M,C,N){const j=b?this.ignoredGrid:this.grid,H={bucketInstanceId:M,featureIndex:C,collisionGroupID:N,overlapMode:m};for(let Q=0;Q<u.length;Q+=4)j.insertCircle(H,u[Q],u[Q+1],u[Q+2])}projectAndGetPerspectiveRatio(u,m,b,M){let C;return M?(C=[m,b,M(m,b),1],a.ag(C,C,u)):(C=[m,b,0,1],zt(C,C,u)),{point:new a.P((C[0]/C[3]+1)/2*this.transform.width+jt,(-C[1]/C[3]+1)/2*this.transform.height+jt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}}isOffscreen(u,m,b,M){return b<jt||u>=this.screenRightBoundary||M<jt||m>this.screenBottomBoundary}isInsideGrid(u,m,b,M){return b>=0&&u<this.gridRightBoundary&&M>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const u=a.ao([]);return a.$(u,u,[-100,-100,0]),u}}function Wt(A,u,m){return u*(a.N/(A.tileSize*Math.pow(2,m-A.tileID.overscaledZ)))}class qt{constructor(u,m,b,M){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?m:-m))):M&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class Jt{constructor(u,m,b,M,C){this.text=new qt(u?u.text:null,m,b,C),this.icon=new qt(u?u.icon:null,m,M,C)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Se{constructor(u,m,b){this.text=u,this.icon=m,this.skipFade=b}}class se{constructor(){this.invProjMatrix=a.Z(),this.viewportMatrix=a.Z(),this.circles=[]}}class Oe{constructor(u,m,b,M,C){this.bucketInstanceId=u,this.featureIndex=m,this.sourceLayerIndex=b,this.bucketIndex=M,this.tileID=C}}class yn{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const m=++this.maxGroupID;this.collisionGroups[u]={ID:m,predicate:b=>b.collisionGroupID===m}}return this.collisionGroups[u]}}function _n(A,u,m,b,M){const{horizontalAlign:C,verticalAlign:N}=a.au(A);return new a.P(-(C-.5)*u+b[0]*M,-(N-.5)*m+b[1]*M)}function Ke(A,u,m,b,M,C){const{x1:N,x2:j,y1:H,y2:Q,anchorPointX:et,anchorPointY:rt}=A,pt=new a.P(u,m);return b&&pt._rotate(M?C:-C),{x1:N+pt.x,y1:H+pt.y,x2:j+pt.x,y2:Q+pt.y,anchorPointX:et,anchorPointY:rt}}class an{constructor(u,m,b,M,C){this.transform=u.clone(),this.terrain=m,this.collisionIndex=new ie(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new yn(M),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,m,b,M){const C=b.getBucket(m),N=b.latestFeatureIndex;if(!C||!N||m.id!==C.layerIds[0])return;const j=b.collisionBoxArray,H=C.layers[0].layout,Q=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),et=b.tileSize/a.N,rt=this.transform.calculatePosMatrix(b.tileID.toUnwrapped()),pt=H.get("text-pitch-alignment")==="map",Ot=H.get("text-rotation-alignment")==="map",kt=Wt(b,1,this.transform.zoom),Rt=Fe(rt,pt,Ot,this.transform,kt);let Pt=null;if(pt){const fe=yr(rt,pt,Ot,this.transform,kt);Pt=a.a1([],this.transform.labelPlaneMatrix,fe)}this.retainedQueryData[C.bucketInstanceId]=new Oe(C.bucketInstanceId,N,C.sourceLayerIndex,C.index,b.tileID);const Qt={bucket:C,layout:H,posMatrix:rt,textLabelPlaneMatrix:Rt,labelToScreenMatrix:Pt,scale:Q,textPixelRatio:et,holdingForFade:b.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:a.ah(C.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(M)for(const fe of C.sortKeyRanges){const{sortKey:Vt,symbolInstanceStart:te,symbolInstanceEnd:me}=fe;u.push({sortKey:Vt,symbolInstanceStart:te,symbolInstanceEnd:me,parameters:Qt})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Qt})}attemptAnchorPlacement(u,m,b,M,C,N,j,H,Q,et,rt,pt,Ot,kt,Rt,Pt){const Qt=a.aq[u.textAnchor],fe=[u.textOffset0,u.textOffset1],Vt=_n(Qt,b,M,fe,C),te=this.collisionIndex.placeCollisionBox(Ke(m,Vt.x,Vt.y,N,j,this.transform.angle),rt,H,Q,et.predicate,Pt);if((!Rt||this.collisionIndex.placeCollisionBox(Ke(Rt,Vt.x,Vt.y,N,j,this.transform.angle),rt,H,Q,et.predicate,Pt).box.length!==0)&&te.box.length>0){let me;if(this.prevPlacement&&this.prevPlacement.variableOffsets[pt.crossTileID]&&this.prevPlacement.placements[pt.crossTileID]&&this.prevPlacement.placements[pt.crossTileID].text&&(me=this.prevPlacement.variableOffsets[pt.crossTileID].anchor),pt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[pt.crossTileID]={textOffset:fe,width:b,height:M,anchor:Qt,textBoxScale:C,prevAnchor:me},this.markUsedJustification(Ot,Qt,pt,kt),Ot.allowVerticalPlacement&&(this.markUsedOrientation(Ot,kt,pt),this.placedOrientations[pt.crossTileID]=kt),{shift:Vt,placedGlyphBoxes:te}}}placeLayerBucketPart(u,m,b){const{bucket:M,layout:C,posMatrix:N,textLabelPlaneMatrix:j,labelToScreenMatrix:H,textPixelRatio:Q,holdingForFade:et,collisionBoxArray:rt,partiallyEvaluatedTextSize:pt,collisionGroup:Ot}=u.parameters,kt=C.get("text-optional"),Rt=C.get("icon-optional"),Pt=a.ar(C,"text-overlap","text-allow-overlap"),Qt=Pt==="always",fe=a.ar(C,"icon-overlap","icon-allow-overlap"),Vt=fe==="always",te=C.get("text-rotation-alignment")==="map",me=C.get("text-pitch-alignment")==="map",xe=C.get("icon-text-fit")!=="none",Pe=C.get("symbol-z-order")==="viewport-y",Ve=Qt&&(Vt||!M.hasIconData()||Rt),ze=Vt&&(Qt||!M.hasTextData()||kt);!M.collisionArrays&&rt&&M.deserializeCollisionBoxes(rt);const qe=this.retainedQueryData[M.bucketInstanceId].tileID,dn=this.terrain?(Ye,vn)=>this.terrain.getElevation(qe,Ye,vn):null,ai=(Ye,vn)=>{var pn,Vi;if(m[Ye.crossTileID])return;if(et)return void(this.placements[Ye.crossTileID]=new Se(!1,!1,!1));let Zn=!1,Fn=!1,ei=!0,dr=null,Zi={box:null,offscreen:null},Ra={box:null},xr=null,qr=null,ha=null,er=0,zo=0,Xa=0;vn.textFeatureIndex?er=vn.textFeatureIndex:Ye.useRuntimeCollisionCircles&&(er=Ye.featureIndex),vn.verticalTextFeatureIndex&&(zo=vn.verticalTextFeatureIndex);const Ps=vn.textBox;if(Ps){const Na=Lr=>{let Er=a.ai.horizontal;if(M.allowVerticalPlacement&&!Lr&&this.prevPlacement){const Ka=this.prevPlacement.placedOrientations[Ye.crossTileID];Ka&&(this.placedOrientations[Ye.crossTileID]=Ka,Er=Ka,this.markUsedOrientation(M,Er,Ye))}return Er},Qr=(Lr,Er)=>{if(M.allowVerticalPlacement&&Ye.numVerticalGlyphVertices>0&&vn.verticalTextBox){for(const Ka of M.writingModes)if(Ka===a.ai.vertical?(Zi=Er(),Ra=Zi):Zi=Lr(),Zi&&Zi.box&&Zi.box.length)break}else Zi=Lr()},wa=Ye.textAnchorOffsetStartIndex,Cu=Ye.textAnchorOffsetEndIndex;if(Cu===wa){const Lr=(Er,Ka)=>{const Rr=this.collisionIndex.placeCollisionBox(Er,Pt,Q,N,Ot.predicate,dn);return Rr&&Rr.box&&Rr.box.length&&(this.markUsedOrientation(M,Ka,Ye),this.placedOrientations[Ye.crossTileID]=Ka),Rr};Qr((()=>Lr(Ps,a.ai.horizontal)),(()=>{const Er=vn.verticalTextBox;return M.allowVerticalPlacement&&Ye.numVerticalGlyphVertices>0&&Er?Lr(Er,a.ai.vertical):{box:null,offscreen:null}})),Na(Zi&&Zi.box&&Zi.box.length)}else{let Lr=a.aq[(Vi=(pn=this.prevPlacement)===null||pn===void 0?void 0:pn.variableOffsets[Ye.crossTileID])===null||Vi===void 0?void 0:Vi.anchor];const Er=(Rr,nu,Nc)=>{const Hs=Rr.x2-Rr.x1,oo=Rr.y2-Rr.y1,Pu=Ye.textBoxScale,bh=xe&&fe==="never"?nu:null;let dl={box:[],offscreen:!1},Zs=Pt==="never"?1:2,Hr="never";Lr&&Zs++;for(let Ni=0;Ni<Zs;Ni++){for(let lo=wa;lo<Cu;lo++){const pl=M.textAnchorOffsets.get(lo);if(Lr&&pl.textAnchor!==Lr)continue;const Bn=this.attemptAnchorPlacement(pl,Rr,Hs,oo,Pu,te,me,Q,N,Ot,Hr,Ye,M,Nc,bh,dn);if(Bn&&(dl=Bn.placedGlyphBoxes,dl&&dl.box&&dl.box.length))return Zn=!0,dr=Bn.shift,dl}Lr?Lr=null:Hr=Pt}return dl};Qr((()=>Er(Ps,vn.iconBox,a.ai.horizontal)),(()=>{const Rr=vn.verticalTextBox;return M.allowVerticalPlacement&&!(Zi&&Zi.box&&Zi.box.length)&&Ye.numVerticalGlyphVertices>0&&Rr?Er(Rr,vn.verticalIconBox,a.ai.vertical):{box:null,offscreen:null}})),Zi&&(Zn=Zi.box,ei=Zi.offscreen);const Ka=Na(Zi&&Zi.box);if(!Zn&&this.prevPlacement){const Rr=this.prevPlacement.variableOffsets[Ye.crossTileID];Rr&&(this.variableOffsets[Ye.crossTileID]=Rr,this.markUsedJustification(M,Rr.anchor,Ye,Ka))}}}if(xr=Zi,Zn=xr&&xr.box&&xr.box.length>0,ei=xr&&xr.offscreen,Ye.useRuntimeCollisionCircles){const Na=M.text.placedSymbolArray.get(Ye.centerJustifiedTextSymbolIndex),Qr=a.aj(M.textSizeData,pt,Na),wa=C.get("text-padding");qr=this.collisionIndex.placeCollisionCircles(Pt,Na,M.lineVertexArray,M.glyphOffsetArray,Qr,N,j,H,b,me,Ot.predicate,Ye.collisionCircleDiameter,wa,dn),qr.circles.length&&qr.collisionDetected&&!b&&a.w("Collisions detected, but collision boxes are not shown"),Zn=Qt||qr.circles.length>0&&!qr.collisionDetected,ei=ei&&qr.offscreen}if(vn.iconFeatureIndex&&(Xa=vn.iconFeatureIndex),vn.iconBox){const Na=Qr=>{const wa=xe&&dr?Ke(Qr,dr.x,dr.y,te,me,this.transform.angle):Qr;return this.collisionIndex.placeCollisionBox(wa,fe,Q,N,Ot.predicate,dn)};Ra&&Ra.box&&Ra.box.length&&vn.verticalIconBox?(ha=Na(vn.verticalIconBox),Fn=ha.box.length>0):(ha=Na(vn.iconBox),Fn=ha.box.length>0),ei=ei&&ha.offscreen}const fl=kt||Ye.numHorizontalGlyphVertices===0&&Ye.numVerticalGlyphVertices===0,Au=Rt||Ye.numIconVertices===0;if(fl||Au?Au?fl||(Fn=Fn&&Zn):Zn=Fn&&Zn:Fn=Zn=Fn&&Zn,Zn&&xr&&xr.box&&this.collisionIndex.insertCollisionBox(xr.box,Pt,C.get("text-ignore-placement"),M.bucketInstanceId,Ra&&Ra.box&&zo?zo:er,Ot.ID),Fn&&ha&&this.collisionIndex.insertCollisionBox(ha.box,fe,C.get("icon-ignore-placement"),M.bucketInstanceId,Xa,Ot.ID),qr&&(Zn&&this.collisionIndex.insertCollisionCircles(qr.circles,Pt,C.get("text-ignore-placement"),M.bucketInstanceId,er,Ot.ID),b)){const Na=M.bucketInstanceId;let Qr=this.collisionCircleArrays[Na];Qr===void 0&&(Qr=this.collisionCircleArrays[Na]=new se);for(let wa=0;wa<qr.circles.length;wa+=4)Qr.circles.push(qr.circles[wa+0]),Qr.circles.push(qr.circles[wa+1]),Qr.circles.push(qr.circles[wa+2]),Qr.circles.push(qr.collisionDetected?1:0)}if(Ye.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ye.crossTileID]=new Se(Zn||Ve,Fn||ze,ei||M.justReloaded),m[Ye.crossTileID]=!0};if(Pe){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ye=M.getSortedSymbolIndexes(this.transform.angle);for(let vn=Ye.length-1;vn>=0;--vn){const pn=Ye[vn];ai(M.symbolInstances.get(pn),M.collisionArrays[pn])}}else for(let Ye=u.symbolInstanceStart;Ye<u.symbolInstanceEnd;Ye++)ai(M.symbolInstances.get(Ye),M.collisionArrays[Ye]);if(b&&M.bucketInstanceId in this.collisionCircleArrays){const Ye=this.collisionCircleArrays[M.bucketInstanceId];a.as(Ye.invProjMatrix,N),Ye.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(u,m,b,M){let C;C=M===a.ai.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[a.at(m)];const N=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const j of N)j>=0&&(u.text.placedSymbolArray.get(j).crossTileID=C>=0&&j!==C?0:b.crossTileID)}markUsedOrientation(u,m,b){const M=m===a.ai.horizontal||m===a.ai.horizontalOnly?m:0,C=m===a.ai.vertical?m:0,N=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const j of N)u.text.placedSymbolArray.get(j).placedOrientation=M;b.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=C)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let b=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const M=m?m.symbolFadeChange(u):1,C=m?m.opacities:{},N=m?m.variableOffsets:{},j=m?m.placedOrientations:{};for(const H in this.placements){const Q=this.placements[H],et=C[H];et?(this.opacities[H]=new Jt(et,M,Q.text,Q.icon),b=b||Q.text!==et.text.placed||Q.icon!==et.icon.placed):(this.opacities[H]=new Jt(null,M,Q.text,Q.icon,Q.skipFade),b=b||Q.text||Q.icon)}for(const H in C){const Q=C[H];if(!this.opacities[H]){const et=new Jt(Q,M,!1,!1);et.isHidden()||(this.opacities[H]=et,b=b||Q.text.placed||Q.icon.placed)}}for(const H in N)this.variableOffsets[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.variableOffsets[H]=N[H]);for(const H in j)this.placedOrientations[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.placedOrientations[H]=j[H]);if(m&&m.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:u)}updateLayerOpacities(u,m){const b={};for(const M of m){const C=M.getBucket(u);C&&M.latestFeatureIndex&&u.id===C.layerIds[0]&&this.updateBucketOpacities(C,b,M.collisionBoxArray)}}updateBucketOpacities(u,m,b){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const M=u.layers[0],C=M.layout,N=new Jt(null,0,!1,!1,!0),j=C.get("text-allow-overlap"),H=C.get("icon-allow-overlap"),Q=M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"),et=C.get("text-rotation-alignment")==="map",rt=C.get("text-pitch-alignment")==="map",pt=C.get("icon-text-fit")!=="none",Ot=new Jt(null,0,j&&(H||!u.hasIconData()||C.get("icon-optional")),H&&(j||!u.hasTextData()||C.get("text-optional")),!0);!u.collisionArrays&&b&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(b);const kt=(Rt,Pt,Qt)=>{for(let fe=0;fe<Pt/4;fe++)Rt.opacityVertexArray.emplaceBack(Qt);Rt.hasVisibleVertices=Rt.hasVisibleVertices||Qt!==zr};for(let Rt=0;Rt<u.symbolInstances.length;Rt++){const Pt=u.symbolInstances.get(Rt),{numHorizontalGlyphVertices:Qt,numVerticalGlyphVertices:fe,crossTileID:Vt}=Pt;let te=this.opacities[Vt];m[Vt]?te=N:te||(te=Ot,this.opacities[Vt]=te),m[Vt]=!0;const me=Pt.numIconVertices>0,xe=this.placedOrientations[Pt.crossTileID],Pe=xe===a.ai.vertical,Ve=xe===a.ai.horizontal||xe===a.ai.horizontalOnly;if(Qt>0||fe>0){const ze=hr(te.text);kt(u.text,Qt,Pe?zr:ze),kt(u.text,fe,Ve?zr:ze);const qe=te.text.isHidden();[Pt.rightJustifiedTextSymbolIndex,Pt.centerJustifiedTextSymbolIndex,Pt.leftJustifiedTextSymbolIndex].forEach((Ye=>{Ye>=0&&(u.text.placedSymbolArray.get(Ye).hidden=qe||Pe?1:0)})),Pt.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(Pt.verticalPlacedTextSymbolIndex).hidden=qe||Ve?1:0);const dn=this.variableOffsets[Pt.crossTileID];dn&&this.markUsedJustification(u,dn.anchor,Pt,xe);const ai=this.placedOrientations[Pt.crossTileID];ai&&(this.markUsedJustification(u,"left",Pt,ai),this.markUsedOrientation(u,ai,Pt))}if(me){const ze=hr(te.icon),qe=!(pt&&Pt.verticalPlacedIconSymbolIndex&&Pe);Pt.placedIconSymbolIndex>=0&&(kt(u.icon,Pt.numIconVertices,qe?ze:zr),u.icon.placedSymbolArray.get(Pt.placedIconSymbolIndex).hidden=te.icon.isHidden()),Pt.verticalPlacedIconSymbolIndex>=0&&(kt(u.icon,Pt.numVerticalIconVertices,qe?zr:ze),u.icon.placedSymbolArray.get(Pt.verticalPlacedIconSymbolIndex).hidden=te.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const ze=u.collisionArrays[Rt];if(ze){let qe=new a.P(0,0);if(ze.textBox||ze.verticalTextBox){let ai=!0;if(Q){const Ye=this.variableOffsets[Vt];Ye?(qe=_n(Ye.anchor,Ye.width,Ye.height,Ye.textOffset,Ye.textBoxScale),et&&qe._rotate(rt?this.transform.angle:-this.transform.angle)):ai=!1}ze.textBox&&Tn(u.textCollisionBox.collisionVertexArray,te.text.placed,!ai||Pe,qe.x,qe.y),ze.verticalTextBox&&Tn(u.textCollisionBox.collisionVertexArray,te.text.placed,!ai||Ve,qe.x,qe.y)}const dn=!!(!Ve&&ze.verticalIconBox);ze.iconBox&&Tn(u.iconCollisionBox.collisionVertexArray,te.icon.placed,dn,pt?qe.x:0,pt?qe.y:0),ze.verticalIconBox&&Tn(u.iconCollisionBox.collisionVertexArray,te.icon.placed,!dn,pt?qe.x:0,pt?qe.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const Rt=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=Rt.invProjMatrix,u.placementViewportMatrix=Rt.viewportMatrix,u.collisionCircleArray=Rt.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,m){const b=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*b>u}setStale(){this.stale=!0}}function Tn(A,u,m,b,M){A.emplaceBack(u?1:0,m?1:0,b||0,M||0),A.emplaceBack(u?1:0,m?1:0,b||0,M||0),A.emplaceBack(u?1:0,m?1:0,b||0,M||0),A.emplaceBack(u?1:0,m?1:0,b||0,M||0)}const Wn=Math.pow(2,25),gi=Math.pow(2,24),qn=Math.pow(2,17),Hn=Math.pow(2,16),Ji=Math.pow(2,9),yi=Math.pow(2,8),Oi=Math.pow(2,1);function hr(A){if(A.opacity===0&&!A.placed)return 0;if(A.opacity===1&&A.placed)return 4294967295;const u=A.placed?1:0,m=Math.floor(127*A.opacity);return m*Wn+u*gi+m*qn+u*Hn+m*Ji+u*yi+m*Oi+u}const zr=0;class Fs{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,m,b,M,C){const N=this._bucketParts;for(;this._currentTileIndex<u.length;)if(m.getBucketParts(N,M,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort(((j,H)=>j.sortKey-H.sortKey)));this._currentPartIndex<N.length;)if(m.placeLayerBucketPart(N[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,C())return!0;return!1}}class ci{constructor(u,m,b,M,C,N,j,H){this.placement=new an(u,m,N,j,H),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(u,m,b){const M=a.h.now(),C=()=>!this._forceFullPlacement&&a.h.now()-M>2;for(;this._currentPlacementIndex>=0;){const N=m[u[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=j)&&(!N.maxzoom||N.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new Fs(N)),this._inProgressLayer.continuePlacement(b[N.source],this.placement,this._showCollisionBoxes,N,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const as=512/a.N/2;class Js{constructor(u,m,b){this.tileID=u,this.bucketInstanceId=b,this._symbolsByKey={};const M=new Map;for(let C=0;C<m.length;C++){const N=m.get(C),j=N.key,H=M.get(j);H?H.push(N):M.set(j,[N])}for(const[C,N]of M){const j={positions:N.map((H=>({x:Math.floor(H.anchorX*as),y:Math.floor(H.anchorY*as)}))),crossTileIDs:N.map((H=>H.crossTileID))};if(j.positions.length>128){const H=new a.av(j.positions.length,16,Uint16Array);for(const{x:Q,y:et}of j.positions)H.add(Q,et);H.finish(),delete j.positions,j.index=H}this._symbolsByKey[C]=j}}getScaledCoordinates(u,m){const{x:b,y:M,z:C}=this.tileID.canonical,{x:N,y:j,z:H}=m.canonical,Q=as/Math.pow(2,H-C),et=(j*a.N+u.anchorY)*Q,rt=M*a.N*as;return{x:Math.floor((N*a.N+u.anchorX)*Q-b*a.N*as),y:Math.floor(et-rt)}}findMatches(u,m,b){const M=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z);for(let C=0;C<u.length;C++){const N=u.get(C);if(N.crossTileID)continue;const j=this._symbolsByKey[N.key];if(!j)continue;const H=this.getScaledCoordinates(N,m);if(j.index){const Q=j.index.range(H.x-M,H.y-M,H.x+M,H.y+M).sort();for(const et of Q){const rt=j.crossTileIDs[et];if(!b[rt]){b[rt]=!0,N.crossTileID=rt;break}}}else if(j.positions)for(let Q=0;Q<j.positions.length;Q++){const et=j.positions[Q],rt=j.crossTileIDs[Q];if(Math.abs(et.x-H.x)<=M&&Math.abs(et.y-H.y)<=M&&!b[rt]){b[rt]=!0,N.crossTileID=rt;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:u})=>u))}}class Un{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Da{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const m=Math.round((u-this.lng)/360);if(m!==0)for(const b in this.indexes){const M=this.indexes[b],C={};for(const N in M){const j=M[N];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+m),C[j.tileID.key]=j}this.indexes[b]=C}this.lng=u}addBucket(u,m,b){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let C=0;C<m.symbolInstances.length;C++)m.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const M=this.usedCrossTileIDs[u.overscaledZ];for(const C in this.indexes){const N=this.indexes[C];if(Number(C)>u.overscaledZ)for(const j in N){const H=N[j];H.tileID.isChildOf(u)&&H.findMatches(m.symbolInstances,u,M)}else{const j=N[u.scaledTo(Number(C)).key];j&&j.findMatches(m.symbolInstances,u,M)}}for(let C=0;C<m.symbolInstances.length;C++){const N=m.symbolInstances.get(C);N.crossTileID||(N.crossTileID=b.generate(),M[N.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Js(u,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(u,m){for(const b of m.getCrossTileIDsLists())for(const M of b)delete this.usedCrossTileIDs[u][M]}removeStaleBuckets(u){let m=!1;for(const b in this.indexes){const M=this.indexes[b];for(const C in M)u[M[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,M[C]),delete M[C],m=!0)}return m}}class Yr{constructor(){this.layerIndexes={},this.crossTileIDs=new Un,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,m,b){let M=this.layerIndexes[u.id];M===void 0&&(M=this.layerIndexes[u.id]=new Da);let C=!1;const N={};M.handleWrapJump(b);for(const j of m){const H=j.getBucket(u);H&&u.id===H.layerIds[0]&&(H.bucketInstanceId||(H.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(j.tileID,H,this.crossTileIDs)&&(C=!0),N[H.bucketInstanceId]=!0)}return M.removeStaleBuckets(N)&&(C=!0),C}pruneUnusedLayers(u){const m={};u.forEach((b=>{m[b]=!0}));for(const b in this.layerIndexes)m[b]||delete this.layerIndexes[b]}}const qi=(A,u)=>a.x(A,u&&u.filter((m=>m.identifier!=="source.canvas"))),oa=a.F(a.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Sl=a.F(a.ax,["setCenter","setZoom","setBearing","setPitch"]),On=a.aw();class An extends a.E{constructor(u,m={}){super(),this.map=u,this.dispatcher=new ft(Dr(),this,u._getMapId()),this.imageManager=new St,this.imageManager.setEventedParent(this),this.glyphManager=new Nt(u._requestManager,m.localIdeographFontFamily),this.lineAtlas=new $t(256,512),this.crossTileSymbolIndex=new Yr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.az());const b=this;this._rtlTextPluginCallback=An.registerForPluginStateChange((M=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:M.pluginStatus,pluginURL:M.pluginURL},((C,N)=>{if(a.aA(C),N&&N.every((j=>j)))for(const j in b.sourceCaches){const H=b.sourceCaches[j].getSource().type;H!=="vector"&&H!=="geojson"||b.sourceCaches[j].reload()}}))})),this.on("data",(M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const C=this.sourceCaches[M.sourceId];if(!C)return;const N=C.getSource();if(N&&N.vectorLayerIds)for(const j in this._layers){const H=this._layers[j];H.source===N.id&&this._validateLayer(H)}}))}loadURL(u,m={},b){this.fire(new a.k("dataloading",{dataType:"style"})),m.validate=typeof m.validate!="boolean"||m.validate;const M=this.map._requestManager.transformRequest(u,K.Style);this._request=a.f(M,((C,N)=>{this._request=null,C?this.fire(new a.j(C)):N&&this._load(N,m,b)}))}loadJSON(u,m={},b){this.fire(new a.k("dataloading",{dataType:"style"})),this._request=a.h.frame((()=>{this._request=null,m.validate=m.validate!==!1,this._load(u,m,b)}))}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(On,{validate:!1})}_load(u,m,b){var M;const C=m.transformStyle?m.transformStyle(b,u):u;if(!m.validate||!qi(this,a.y(C))){this._loaded=!0,this.stylesheet=C;for(const N in C.sources)this.addSource(N,C.sources[N],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs),this._createLayers(),this.light=new Bt(this.stylesheet.light),this.map.setTerrain((M=this.stylesheet.terrain)!==null&&M!==void 0?M:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const u=a.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",u),this._order=u.map((m=>m.id)),this._layers={},this._serializedLayers=null;for(const m of u){const b=a.aC(m);b.setEventedParent(this,{layer:{id:m.id}}),this._layers[m.id]=b}}_loadSprite(u,m=!1,b=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=(function(M,C,N,j){const H=it(M),Q=H.length,et=N>1?"@2x":"",rt={},pt={},Ot={};for(const{id:kt,url:Rt}of H){const Pt=C.transformRequest(C.normalizeSpriteURL(Rt,et,".json"),K.SpriteJSON),Qt=`${kt}_${Pt.url}`;rt[Qt]=a.f(Pt,((te,me)=>{delete rt[Qt],pt[kt]=me,ut(j,pt,Ot,te,Q)}));const fe=C.transformRequest(C.normalizeSpriteURL(Rt,et,".png"),K.SpriteImage),Vt=`${kt}_${fe.url}`;rt[Vt]=$.getImage(fe,((te,me)=>{delete rt[Vt],Ot[kt]=me,ut(j,pt,Ot,te,Q)}))}return{cancel(){for(const kt of Object.values(rt))kt.cancel()}}})(u,this.map._requestManager,this.map.getPixelRatio(),((M,C)=>{if(this._spriteRequest=null,M)this.fire(new a.j(M));else if(C)for(const N in C){this._spritesImagesIds[N]=[];const j=this._spritesImagesIds[N]?this._spritesImagesIds[N].filter((H=>!(H in C))):[];for(const H of j)this.imageManager.removeImage(H),this._changedImages[H]=!0;for(const H in C[N]){const Q=N==="default"?H:`${N}:${H}`;this._spritesImagesIds[N].push(Q),Q in this.imageManager.images?this.imageManager.updateImage(Q,C[N][H],!1):this.imageManager.addImage(Q,C[N][H]),m&&(this._changedImages[Q]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),m&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),b&&b(M)}))}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(u){const m=this.sourceCaches[u.source];if(!m)return;const b=u.sourceLayer;if(!b)return;const M=m.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(b)===-1)&&this.fire(new a.j(new Error(`Source layer "${b}" does not exist on source "${M.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u){const m=this._serializedAllLayers();if(!u||u.length===0)return Object.values(m);const b=[];for(const M of u)m[M]&&b.push(m[M]);return b}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const m=Object.keys(this._layers);for(const b of m){const M=this._layers[b];M.type!=="custom"&&(u[b]=M.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const m=this._changed;if(this._changed){const M=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(M.length||C.length)&&this._updateWorkerLayers(M,C);for(const N in this._updatedSources){const j=this._updatedSources[N];if(j==="reload")this._reloadSource(N);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(N)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const N in this._updatedPaintProps)this._layers[N].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const b={};for(const M in this.sourceCaches){const C=this.sourceCaches[M];b[M]=C.used,C.used=!1}for(const M of this._order){const C=this._layers[M];C.recalculate(u,this._availableImages),!C.isHidden(u.zoom)&&C.source&&(this.sourceCaches[C.source].used=!0)}for(const M in b){const C=this.sourceCaches[M];b[M]!==C.used&&C.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(u),this.z=u.zoom,m&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const m in this.sourceCaches)this.sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(u),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,m={}){this._checkLoaded();const b=this.serialize();if(u=m.transformStyle?m.transformStyle(b,u):u,qi(this,a.y(u)))return!1;(u=a.aD(u)).layers=a.aB(u.layers);const M=a.aE(b,u).filter((N=>!(N.command in Sl)));if(M.length===0)return!1;const C=M.filter((N=>!(N.command in oa)));if(C.length>0)throw new Error(`Unimplemented: ${C.map((N=>N.command)).join(", ")}.`);for(const N of M)N.command!=="setTransition"&&this[N.command].apply(this,N.args);return this.stylesheet=u,this._serializedLayers=null,!0}addImage(u,m){if(this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,m),this._afterImageUpdated(u)}updateImage(u,m){this.imageManager.updateImage(u,m)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,m,b={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(a.y.source,`sources.${u}`,m,null,b))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const M=this.sourceCaches[u]=new Gn(u,m,this.dispatcher);M.style=this,M.setEventedParent(this,(()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:u}))),M.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===u)return this.fire(new a.j(new Error(`Source "${u}" cannot be removed while layer "${b}" is using it.`)));const m=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],m.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),m.setEventedParent(null),m.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,m){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const b=this.sourceCaches[u].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(m),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,m,b={}){this._checkLoaded();const M=u.id;if(this.getLayer(M))return void this.fire(new a.j(new Error(`Layer "${M}" already exists on this map.`)));let C;if(u.type==="custom"){if(qi(this,a.aF(u)))return;C=a.aC(u)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(M,u.source),u=a.aD(u),u=a.e(u,{source:M})),this._validate(a.y.layer,`layers.${M}`,u,{arrayIndex:-1},b))return;C=a.aC(u),this._validateLayer(C),C.setEventedParent(this,{layer:{id:M}})}const N=m?this._order.indexOf(m):this._order.length;if(m&&N===-1)this.fire(new a.j(new Error(`Cannot add layer "${M}" before non-existing layer "${m}".`)));else{if(this._order.splice(N,0,M),this._layerOrderChanged=!0,this._layers[M]=C,this._removedLayers[M]&&C.source&&C.type!=="custom"){const j=this._removedLayers[M];delete this._removedLayers[M],j.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map)}}moveLayer(u,m){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new a.j(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===m)return;const b=this._order.indexOf(u);this._order.splice(b,1);const M=m?this._order.indexOf(m):this._order.length;m&&M===-1?this.fire(new a.j(new Error(`Cannot move layer "${u}" before non-existing layer "${m}".`))):(this._order.splice(M,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const m=this._layers[u];if(!m)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${u}".`)));m.setEventedParent(null);const b=this._order.indexOf(u);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=m,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],m.onRemove&&m.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,m,b){this._checkLoaded();const M=this.getLayer(u);M?M.minzoom===m&&M.maxzoom===b||(m!=null&&(M.minzoom=m),b!=null&&(M.maxzoom=b),this._updateLayer(M)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,m,b={}){this._checkLoaded();const M=this.getLayer(u);if(M){if(!a.aG(M.filter,m))return m==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(a.y.filter,`layers.${M.id}.filter`,m,null,b)||(M.filter=a.aD(m),this._updateLayer(M)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return a.aD(this.getLayer(u).filter)}setLayoutProperty(u,m,b,M={}){this._checkLoaded();const C=this.getLayer(u);C?a.aG(C.getLayoutProperty(m),b)||(C.setLayoutProperty(m,b,M),this._updateLayer(C)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,m){const b=this.getLayer(u);if(b)return b.getLayoutProperty(m);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,m,b,M={}){this._checkLoaded();const C=this.getLayer(u);C?a.aG(C.getPaintProperty(m),b)||(C.setPaintProperty(m,b,M)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,m){return this.getLayer(u).getPaintProperty(m)}setFeatureState(u,m){this._checkLoaded();const b=u.source,M=u.sourceLayer,C=this.sourceCaches[b];if(C===void 0)return void this.fire(new a.j(new Error(`The source '${b}' does not exist in the map's style.`)));const N=C.getSource().type;N==="geojson"&&M?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):N!=="vector"||M?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),C.setFeatureState(M,u.id,m)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,m){this._checkLoaded();const b=u.source,M=this.sourceCaches[b];if(M===void 0)return void this.fire(new a.j(new Error(`The source '${b}' does not exist in the map's style.`)));const C=M.getSource().type,N=C==="vector"?u.sourceLayer:void 0;C!=="vector"||N?m&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(N,u.id,m):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const m=u.source,b=u.sourceLayer,M=this.sourceCaches[m];if(M!==void 0)return M.getSource().type!=="vector"||b?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),M.getFeatureState(b,u.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=a.aH(this.sourceCaches,(C=>C.serialize())),m=this._serializeByIds(this._order),b=this.map.getTerrain()||void 0,M=this.stylesheet;return a.aI({version:M.version,name:M.name,metadata:M.metadata,light:M.light,center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,sprite:M.sprite,glyphs:M.glyphs,transition:M.transition,sources:u,layers:m,terrain:b},(C=>C!==void 0))}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const m=N=>this._layers[N].type==="fill-extrusion",b={},M=[];for(let N=this._order.length-1;N>=0;N--){const j=this._order[N];if(m(j)){b[j]=N;for(const H of u){const Q=H[j];if(Q)for(const et of Q)M.push(et)}}}M.sort(((N,j)=>j.intersectionZ-N.intersectionZ));const C=[];for(let N=this._order.length-1;N>=0;N--){const j=this._order[N];if(m(j))for(let H=M.length-1;H>=0;H--){const Q=M[H].feature;if(b[Q.layer.id]<N)break;C.push(Q),M.pop()}else for(const H of u){const Q=H[j];if(Q)for(const et of Q)C.push(et.feature)}}return C}queryRenderedFeatures(u,m,b){m&&m.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",m.filter,null,m);const M={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const j of m.layers){const H=this._layers[j];if(!H)return this.fire(new a.j(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];M[H.source]=!0}}const C=[];m.availableImages=this._availableImages;const N=this._serializedAllLayers();for(const j in this.sourceCaches)m.layers&&!M[j]||C.push(Xe(this.sourceCaches[j],this._layers,N,u,m,b));return this.placement&&C.push((function(j,H,Q,et,rt,pt,Ot){const kt={},Rt=pt.queryRenderedSymbols(et),Pt=[];for(const Qt of Object.keys(Rt).map(Number))Pt.push(Ot[Qt]);Pt.sort(Sn);for(const Qt of Pt){const fe=Qt.featureIndex.lookupSymbolFeatures(Rt[Qt.bucketInstanceId],H,Qt.bucketIndex,Qt.sourceLayerIndex,rt.filter,rt.layers,rt.availableImages,j);for(const Vt in fe){const te=kt[Vt]=kt[Vt]||[],me=fe[Vt];me.sort(((xe,Pe)=>{const Ve=Qt.featureSortOrder;if(Ve){const ze=Ve.indexOf(xe.featureIndex);return Ve.indexOf(Pe.featureIndex)-ze}return Pe.featureIndex-xe.featureIndex}));for(const xe of me)te.push(xe)}}for(const Qt in kt)kt[Qt].forEach((fe=>{const Vt=fe.feature,te=Q[j[Qt].source].getFeatureState(Vt.layer["source-layer"],Vt.id);Vt.source=Vt.layer.source,Vt.layer["source-layer"]&&(Vt.sourceLayer=Vt.layer["source-layer"]),Vt.state=te}));return kt})(this._layers,N,this.sourceCaches,u,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(u,m){m&&m.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",m.filter,null,m);const b=this.sourceCaches[u];return b?(function(M,C){const N=M.getRenderableIds().map((Q=>M.getTileByID(Q))),j=[],H={};for(let Q=0;Q<N.length;Q++){const et=N[Q],rt=et.tileID.canonical.key;H[rt]||(H[rt]=!0,et.querySourceFeatures(j,C))}return j})(b,m):[]}addSourceType(u,m,b){return Be(u)?b(new Error(`A source type called "${u}" already exists.`)):(((M,C)=>{on[M]=C})(u,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:m.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(u,m={}){this._checkLoaded();const b=this.light.getLight();let M=!1;for(const N in u)if(!a.aG(u[N],b[N])){M=!0;break}if(!M)return;const C={now:a.h.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,m),this.light.updateTransitions(C)}_validate(u,m,b,M,C={}){return(!C||C.validate!==!1)&&qi(this,u.call(a.y,a.e({key:m,style:this.serialize(),value:b,styleSpec:a.v},M)))}_remove(u=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const m in this._layers)this._layers[m].setEventedParent(null);for(const m in this.sourceCaches){const b=this.sourceCaches[m];b.setEventedParent(null),b.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(u)}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const m in this.sourceCaches)this.sourceCaches[m].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,m,b,M,C=!1){let N=!1,j=!1;const H={};for(const Q of this._order){const et=this._layers[Q];if(et.type!=="symbol")continue;if(!H[et.source]){const pt=this.sourceCaches[et.source];H[et.source]=pt.getRenderableIds(!0).map((Ot=>pt.getTileByID(Ot))).sort(((Ot,kt)=>kt.tileID.overscaledZ-Ot.tileID.overscaledZ||(Ot.tileID.isLessThan(kt.tileID)?-1:1)))}const rt=this.crossTileSymbolIndex.addLayer(et,H[et.source],u.center.lng);N=N||rt}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((C=C||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.h.now(),u.zoom))&&(this.pauseablePlacement=new ci(u,this.map.terrain,this._order,C,m,b,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,H),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.h.now()),j=!0),N&&this.pauseablePlacement.placement.setStale()),j||N)for(const Q of this._order){const et=this._layers[Q];et.type==="symbol"&&this.placement.updateLayerOpacities(et,H[et.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.h.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,m,b){this.imageManager.getImages(m.icons,b),this._updateTilesForChangedImages();const M=this.sourceCaches[m.source];M&&M.setDependencies(m.tileID.key,m.type,m.icons)}getGlyphs(u,m,b){this.glyphManager.getGlyphs(m.stacks,b);const M=this.sourceCaches[m.source];M&&M.setDependencies(m.tileID.key,m.type,[""])}getResource(u,m,b){return a.m(m,b)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,m={}){this._checkLoaded(),u&&this._validate(a.y.glyphs,"glyphs",u,null,m)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}addSprite(u,m,b={},M){this._checkLoaded();const C=[{id:u,url:m}],N=[...it(this.stylesheet.sprite),...C];this._validate(a.y.sprite,"sprite",N,null,b)||(this.stylesheet.sprite=N,this._loadSprite(C,!0,M))}removeSprite(u){this._checkLoaded();const m=it(this.stylesheet.sprite);if(m.find((b=>b.id===u))){if(this._spritesImagesIds[u])for(const b of this._spritesImagesIds[u])this.imageManager.removeImage(b),this._changedImages[b]=!0;m.splice(m.findIndex((b=>b.id===u)),1),this.stylesheet.sprite=m.length>0?m:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return it(this.stylesheet.sprite)}setSprite(u,m={},b){this._checkLoaded(),u&&this._validate(a.y.sprite,"sprite",u,null,m)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,b):(this._unloadSprite(),b&&b(null)))}}An.registerForPluginStateChange=a.aK;var $r=a.Q([{name:"a_pos",type:"Int16",components:2}]),tr="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const _i={prelude:ii(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:ii(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ii(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ii(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ii("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ii(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:ii(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ii("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ii("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ii("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ii(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:ii(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:ii(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:ii(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ii(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ii(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ii(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ii(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ii(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ii(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ii(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ii(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ii(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ii(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ii(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ii(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ii("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",tr),terrainDepth:ii("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",tr),terrainCoords:ii("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",tr)};function ii(A,u){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=u.match(/attribute ([\w]+) ([\w]+)/g),M=A.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),N=C?C.concat(M):M,j={};return{fragmentSource:A=A.replace(m,((H,Q,et,rt,pt)=>(j[pt]=!0,Q==="define"?`
#ifndef HAS_UNIFORM_u_${pt}
varying ${et} ${rt} ${pt};
#else
uniform ${et} ${rt} u_${pt};
#endif
`:`
#ifdef HAS_UNIFORM_u_${pt}
    ${et} ${rt} ${pt} = u_${pt};
#endif
`))),vertexSource:u=u.replace(m,((H,Q,et,rt,pt)=>{const Ot=rt==="float"?"vec2":"vec4",kt=pt.match(/color/)?"color":Ot;return j[pt]?Q==="define"?`
#ifndef HAS_UNIFORM_u_${pt}
uniform lowp float u_${pt}_t;
attribute ${et} ${Ot} a_${pt};
varying ${et} ${rt} ${pt};
#else
uniform ${et} ${rt} u_${pt};
#endif
`:kt==="vec4"?`
#ifndef HAS_UNIFORM_u_${pt}
    ${pt} = a_${pt};
#else
    ${et} ${rt} ${pt} = u_${pt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pt}
    ${pt} = unpack_mix_${kt}(a_${pt}, u_${pt}_t);
#else
    ${et} ${rt} ${pt} = u_${pt};
#endif
`:Q==="define"?`
#ifndef HAS_UNIFORM_u_${pt}
uniform lowp float u_${pt}_t;
attribute ${et} ${Ot} a_${pt};
#else
uniform ${et} ${rt} u_${pt};
#endif
`:kt==="vec4"?`
#ifndef HAS_UNIFORM_u_${pt}
    ${et} ${rt} ${pt} = a_${pt};
#else
    ${et} ${rt} ${pt} = u_${pt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pt}
    ${et} ${rt} ${pt} = unpack_mix_${kt}(a_${pt}, u_${pt}_t);
#else
    ${et} ${rt} ${pt} = u_${pt};
#endif
`})),staticAttributes:b,staticUniforms:N}}class Pn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,m,b,M,C,N,j,H,Q){this.context=u;let et=this.boundPaintVertexBuffers.length!==M.length;for(let rt=0;!et&&rt<M.length;rt++)this.boundPaintVertexBuffers[rt]!==M[rt]&&(et=!0);!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==b||et||this.boundIndexBuffer!==C||this.boundVertexOffset!==N||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==H||this.boundDynamicVertexBuffer3!==Q?this.freshBind(m,b,M,C,N,j,H,Q):(u.bindVertexArray.set(this.vao),j&&j.bind(),C&&C.dynamicDraw&&C.bind(),H&&H.bind(),Q&&Q.bind())}freshBind(u,m,b,M,C,N,j,H){const Q=u.numAttributes,et=this.context,rt=et.gl;this.vao&&this.destroy(),this.vao=et.createVertexArray(),et.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=M,this.boundVertexOffset=C,this.boundDynamicVertexBuffer=N,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=H,m.enableAttributes(rt,u);for(const pt of b)pt.enableAttributes(rt,u);N&&N.enableAttributes(rt,u),j&&j.enableAttributes(rt,u),H&&H.enableAttributes(rt,u),m.bind(),m.setVertexAttribPointers(rt,u,C);for(const pt of b)pt.bind(),pt.setVertexAttribPointers(rt,u,C);N&&(N.bind(),N.setVertexAttribPointers(rt,u,C)),M&&M.bind(),j&&(j.bind(),j.setVertexAttribPointers(rt,u,C)),H&&(H.bind(),H.setVertexAttribPointers(rt,u,C)),et.currentNumAttributes=Q}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function zn(A){const u=[];for(let m=0;m<A.length;m++){if(A[m]===null)continue;const b=A[m].split(" ");u.push(b.pop())}return u}class la{constructor(u,m,b,M,C,N){const j=u.gl;this.program=j.createProgram();const H=zn(m.staticAttributes),Q=b?b.getBinderAttributes():[],et=H.concat(Q),rt=_i.prelude.staticUniforms?zn(_i.prelude.staticUniforms):[],pt=m.staticUniforms?zn(m.staticUniforms):[],Ot=b?b.getBinderUniforms():[],kt=rt.concat(pt).concat(Ot),Rt=[];for(const xe of kt)Rt.indexOf(xe)<0&&Rt.push(xe);const Pt=b?b.defines():[];C&&Pt.push("#define OVERDRAW_INSPECTOR;"),N&&Pt.push("#define TERRAIN3D;");const Qt=Pt.concat(_i.prelude.fragmentSource,m.fragmentSource).join(`
`),fe=Pt.concat(_i.prelude.vertexSource,m.vertexSource).join(`
`),Vt=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(Vt,Qt),j.compileShader(Vt),!j.getShaderParameter(Vt,j.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${j.getShaderInfoLog(Vt)}`);j.attachShader(this.program,Vt);const te=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(te,fe),j.compileShader(te),!j.getShaderParameter(te,j.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${j.getShaderInfoLog(te)}`);j.attachShader(this.program,te),this.attributes={};const me={};this.numAttributes=et.length;for(let xe=0;xe<this.numAttributes;xe++)et[xe]&&(j.bindAttribLocation(this.program,xe,et[xe]),this.attributes[et[xe]]=xe);if(j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw new Error(`Program failed to link: ${j.getProgramInfoLog(this.program)}`);j.deleteShader(te),j.deleteShader(Vt);for(let xe=0;xe<Rt.length;xe++){const Pe=Rt[xe];if(Pe&&!me[Pe]){const Ve=j.getUniformLocation(this.program,Pe);Ve&&(me[Pe]=Ve)}}this.fixedUniforms=M(u,me),this.terrainUniforms=((xe,Pe)=>({u_depth:new a.aL(xe,Pe.u_depth),u_terrain:new a.aL(xe,Pe.u_terrain),u_terrain_dim:new a.aM(xe,Pe.u_terrain_dim),u_terrain_matrix:new a.aN(xe,Pe.u_terrain_matrix),u_terrain_unpack:new a.aO(xe,Pe.u_terrain_unpack),u_terrain_exaggeration:new a.aM(xe,Pe.u_terrain_exaggeration)}))(u,me),this.binderUniforms=b?b.getUniforms(u,me):[]}draw(u,m,b,M,C,N,j,H,Q,et,rt,pt,Ot,kt,Rt,Pt,Qt,fe){const Vt=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(b),u.setStencilMode(M),u.setColorMode(C),u.setCullFace(N),H){u.activeTexture.set(Vt.TEXTURE2),Vt.bindTexture(Vt.TEXTURE_2D,H.depthTexture),u.activeTexture.set(Vt.TEXTURE3),Vt.bindTexture(Vt.TEXTURE_2D,H.texture);for(const me in this.terrainUniforms)this.terrainUniforms[me].set(H[me])}for(const me in this.fixedUniforms)this.fixedUniforms[me].set(j[me]);Rt&&Rt.setUniforms(u,this.binderUniforms,Ot,{zoom:kt});let te=0;switch(m){case Vt.LINES:te=2;break;case Vt.TRIANGLES:te=3;break;case Vt.LINE_STRIP:te=1}for(const me of pt.get()){const xe=me.vaos||(me.vaos={});(xe[Q]||(xe[Q]=new Pn)).bind(u,this,et,Rt?Rt.getPaintVertexBuffers():[],rt,me.vertexOffset,Pt,Qt,fe),Vt.drawElements(m,me.primitiveLength*te,Vt.UNSIGNED_SHORT,me.primitiveOffset*te*2)}}}function _a(A,u,m){const b=1/Wt(m,1,u.transform.tileZoom),M=Math.pow(2,m.tileID.overscaledZ),C=m.tileSize*Math.pow(2,u.transform.tileZoom)/M,N=C*(m.tileID.canonical.x+m.tileID.wrap*M),j=C*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[b,A.fromScale,A.toScale],u_fade:A.t,u_pixel_coord_upper:[N>>16,j>>16],u_pixel_coord_lower:[65535&N,65535&j]}}const Hi=(A,u,m,b)=>{const M=u.style.light,C=M.properties.get("position"),N=[C.x,C.y,C.z],j=(function(){var Q=new a.A(9);return a.A!=Float32Array&&(Q[1]=0,Q[2]=0,Q[3]=0,Q[5]=0,Q[6]=0,Q[7]=0),Q[0]=1,Q[4]=1,Q[8]=1,Q})();M.properties.get("anchor")==="viewport"&&(function(Q,et){var rt=Math.sin(et),pt=Math.cos(et);Q[0]=pt,Q[1]=rt,Q[2]=0,Q[3]=-rt,Q[4]=pt,Q[5]=0,Q[6]=0,Q[7]=0,Q[8]=1})(j,-u.transform.angle),(function(Q,et,rt){var pt=et[0],Ot=et[1],kt=et[2];Q[0]=pt*rt[0]+Ot*rt[3]+kt*rt[6],Q[1]=pt*rt[1]+Ot*rt[4]+kt*rt[7],Q[2]=pt*rt[2]+Ot*rt[5]+kt*rt[8]})(N,N,j);const H=M.properties.get("color");return{u_matrix:A,u_lightpos:N,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[H.r,H.g,H.b],u_vertical_gradient:+m,u_opacity:b}},ss=(A,u,m,b,M,C,N)=>a.e(Hi(A,u,m,b),_a(C,u,N),{u_height_factor:-Math.pow(2,M.overscaledZ)/N.tileSize/8}),Ko=A=>({u_matrix:A}),Ss=(A,u,m,b)=>a.e(Ko(A),_a(m,u,b)),Di=(A,u)=>({u_matrix:A,u_world:u}),yt=(A,u,m,b,M)=>a.e(Ss(A,u,m,b),{u_world:M}),At=(A,u,m,b)=>{const M=A.transform;let C,N;if(b.paint.get("circle-pitch-alignment")==="map"){const j=Wt(m,1,M.zoom);C=!0,N=[j,j]}else C=!1,N=M.pixelsToGLUnits;return{u_camera_to_center_distance:M.cameraToCenterDistance,u_scale_with_map:+(b.paint.get("circle-pitch-scale")==="map"),u_matrix:A.translatePosMatrix(u.posMatrix,m,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:A.pixelRatio,u_extrude_scale:N}},Zt=(A,u,m)=>{const b=Wt(m,1,u.zoom),M=Math.pow(2,u.zoom-m.tileID.overscaledZ),C=m.tileID.overscaleFactor();return{u_matrix:A,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[u.pixelsToGLUnits[0]/(b*M),u.pixelsToGLUnits[1]/(b*M)],u_overscale_factor:C}},ye=(A,u,m=1)=>({u_matrix:A,u_color:u,u_overlay:0,u_overlay_scale:m}),Ue=A=>({u_matrix:A}),cn=(A,u,m,b)=>({u_matrix:A,u_extrude_scale:Wt(u,1,m),u_intensity:b});function Vn(A,u){const m=Math.pow(2,u.canonical.z),b=u.canonical.y;return[new a.U(0,b/m).toLngLat().lat,new a.U(0,(b+1)/m).toLngLat().lat]}const sr=(A,u,m,b)=>{const M=A.transform;return{u_matrix:Tl(A,u,m,b),u_ratio:1/Wt(u,1,M.zoom),u_device_pixel_ratio:A.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},Sr=(A,u,m,b,M)=>a.e(sr(A,u,m,M),{u_image:0,u_image_height:b}),Tr=(A,u,m,b,M)=>{const C=A.transform,N=Yu(u,C);return{u_matrix:Tl(A,u,m,M),u_texsize:u.imageAtlasTexture.size,u_ratio:1/Wt(u,1,C.zoom),u_device_pixel_ratio:A.pixelRatio,u_image:0,u_scale:[N,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},fr=(A,u,m,b,M,C)=>{const N=A.lineAtlas,j=Yu(u,A.transform),H=m.layout.get("line-cap")==="round",Q=N.getDash(b.from,H),et=N.getDash(b.to,H),rt=Q.width*M.fromScale,pt=et.width*M.toScale;return a.e(sr(A,u,m,C),{u_patternscale_a:[j/rt,-Q.height/2],u_patternscale_b:[j/pt,-et.height/2],u_sdfgamma:N.width/(256*Math.min(rt,pt)*A.pixelRatio)/2,u_image:0,u_tex_y_a:Q.y,u_tex_y_b:et.y,u_mix:M.t})};function Yu(A,u){return 1/Wt(A,1,u.tileZoom)}function Tl(A,u,m,b){return A.translatePosMatrix(b?b.posMatrix:u.tileID.posMatrix,u,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}const Zl=(A,u,m,b,M)=>{return{u_matrix:A,u_tl_parent:u,u_scale_parent:m,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*M.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:M.paint.get("raster-brightness-min"),u_brightness_high:M.paint.get("raster-brightness-max"),u_saturation_factor:(N=M.paint.get("raster-saturation"),N>0?1-1/(1.001-N):-N),u_contrast_factor:(C=M.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:Nn(M.paint.get("raster-hue-rotate"))};var C,N};function Nn(A){A*=Math.PI/180;const u=Math.sin(A),m=Math.cos(A);return[(2*m+1)/3,(-Math.sqrt(3)*u-m+1)/3,(Math.sqrt(3)*u-m+1)/3]}const Ts=(A,u,m,b,M,C,N,j,H,Q)=>{const et=M.transform;return{u_is_size_zoom_constant:+(A==="constant"||A==="source"),u_is_size_feature_constant:+(A==="constant"||A==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:et.cameraToCenterDistance,u_pitch:et.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:et.width/et.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:N,u_coord_matrix:j,u_is_text:+H,u_pitch_with_map:+b,u_texsize:Q,u_texture:0}},Ii=(A,u,m,b,M,C,N,j,H,Q,et)=>{const rt=M.transform;return a.e(Ts(A,u,m,b,M,C,N,j,H,Q),{u_gamma_scale:b?Math.cos(rt._pitch)*rt.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},Qo=(A,u,m,b,M,C,N,j,H,Q)=>a.e(Ii(A,u,m,b,M,C,N,j,!0,H),{u_texsize_icon:Q,u_texture_icon:1}),bo=(A,u,m)=>({u_matrix:A,u_opacity:u,u_color:m}),Mr=(A,u,m,b,M,C)=>a.e((function(N,j,H,Q){const et=H.imageManager.getPattern(N.from.toString()),rt=H.imageManager.getPattern(N.to.toString()),{width:pt,height:Ot}=H.imageManager.getPixelSize(),kt=Math.pow(2,Q.tileID.overscaledZ),Rt=Q.tileSize*Math.pow(2,H.transform.tileZoom)/kt,Pt=Rt*(Q.tileID.canonical.x+Q.tileID.wrap*kt),Qt=Rt*Q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:et.tl,u_pattern_br_a:et.br,u_pattern_tl_b:rt.tl,u_pattern_br_b:rt.br,u_texsize:[pt,Ot],u_mix:j.t,u_pattern_size_a:et.displaySize,u_pattern_size_b:rt.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/Wt(Q,1,H.transform.tileZoom),u_pixel_coord_upper:[Pt>>16,Qt>>16],u_pixel_coord_lower:[65535&Pt,65535&Qt]}})(b,C,m,M),{u_matrix:A,u_opacity:u}),Ml={fillExtrusion:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_lightpos:new a.aP(A,u.u_lightpos),u_lightintensity:new a.aM(A,u.u_lightintensity),u_lightcolor:new a.aP(A,u.u_lightcolor),u_vertical_gradient:new a.aM(A,u.u_vertical_gradient),u_opacity:new a.aM(A,u.u_opacity)}),fillExtrusionPattern:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_lightpos:new a.aP(A,u.u_lightpos),u_lightintensity:new a.aM(A,u.u_lightintensity),u_lightcolor:new a.aP(A,u.u_lightcolor),u_vertical_gradient:new a.aM(A,u.u_vertical_gradient),u_height_factor:new a.aM(A,u.u_height_factor),u_image:new a.aL(A,u.u_image),u_texsize:new a.aQ(A,u.u_texsize),u_pixel_coord_upper:new a.aQ(A,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(A,u.u_pixel_coord_lower),u_scale:new a.aP(A,u.u_scale),u_fade:new a.aM(A,u.u_fade),u_opacity:new a.aM(A,u.u_opacity)}),fill:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix)}),fillPattern:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_image:new a.aL(A,u.u_image),u_texsize:new a.aQ(A,u.u_texsize),u_pixel_coord_upper:new a.aQ(A,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(A,u.u_pixel_coord_lower),u_scale:new a.aP(A,u.u_scale),u_fade:new a.aM(A,u.u_fade)}),fillOutline:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_world:new a.aQ(A,u.u_world)}),fillOutlinePattern:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_world:new a.aQ(A,u.u_world),u_image:new a.aL(A,u.u_image),u_texsize:new a.aQ(A,u.u_texsize),u_pixel_coord_upper:new a.aQ(A,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(A,u.u_pixel_coord_lower),u_scale:new a.aP(A,u.u_scale),u_fade:new a.aM(A,u.u_fade)}),circle:(A,u)=>({u_camera_to_center_distance:new a.aM(A,u.u_camera_to_center_distance),u_scale_with_map:new a.aL(A,u.u_scale_with_map),u_pitch_with_map:new a.aL(A,u.u_pitch_with_map),u_extrude_scale:new a.aQ(A,u.u_extrude_scale),u_device_pixel_ratio:new a.aM(A,u.u_device_pixel_ratio),u_matrix:new a.aN(A,u.u_matrix)}),collisionBox:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_camera_to_center_distance:new a.aM(A,u.u_camera_to_center_distance),u_pixels_to_tile_units:new a.aM(A,u.u_pixels_to_tile_units),u_extrude_scale:new a.aQ(A,u.u_extrude_scale),u_overscale_factor:new a.aM(A,u.u_overscale_factor)}),collisionCircle:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_inv_matrix:new a.aN(A,u.u_inv_matrix),u_camera_to_center_distance:new a.aM(A,u.u_camera_to_center_distance),u_viewport_size:new a.aQ(A,u.u_viewport_size)}),debug:(A,u)=>({u_color:new a.aR(A,u.u_color),u_matrix:new a.aN(A,u.u_matrix),u_overlay:new a.aL(A,u.u_overlay),u_overlay_scale:new a.aM(A,u.u_overlay_scale)}),clippingMask:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix)}),heatmap:(A,u)=>({u_extrude_scale:new a.aM(A,u.u_extrude_scale),u_intensity:new a.aM(A,u.u_intensity),u_matrix:new a.aN(A,u.u_matrix)}),heatmapTexture:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_world:new a.aQ(A,u.u_world),u_image:new a.aL(A,u.u_image),u_color_ramp:new a.aL(A,u.u_color_ramp),u_opacity:new a.aM(A,u.u_opacity)}),hillshade:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_image:new a.aL(A,u.u_image),u_latrange:new a.aQ(A,u.u_latrange),u_light:new a.aQ(A,u.u_light),u_shadow:new a.aR(A,u.u_shadow),u_highlight:new a.aR(A,u.u_highlight),u_accent:new a.aR(A,u.u_accent)}),hillshadePrepare:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_image:new a.aL(A,u.u_image),u_dimension:new a.aQ(A,u.u_dimension),u_zoom:new a.aM(A,u.u_zoom),u_unpack:new a.aO(A,u.u_unpack)}),line:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_ratio:new a.aM(A,u.u_ratio),u_device_pixel_ratio:new a.aM(A,u.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(A,u.u_units_to_pixels)}),lineGradient:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_ratio:new a.aM(A,u.u_ratio),u_device_pixel_ratio:new a.aM(A,u.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(A,u.u_units_to_pixels),u_image:new a.aL(A,u.u_image),u_image_height:new a.aM(A,u.u_image_height)}),linePattern:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_texsize:new a.aQ(A,u.u_texsize),u_ratio:new a.aM(A,u.u_ratio),u_device_pixel_ratio:new a.aM(A,u.u_device_pixel_ratio),u_image:new a.aL(A,u.u_image),u_units_to_pixels:new a.aQ(A,u.u_units_to_pixels),u_scale:new a.aP(A,u.u_scale),u_fade:new a.aM(A,u.u_fade)}),lineSDF:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_ratio:new a.aM(A,u.u_ratio),u_device_pixel_ratio:new a.aM(A,u.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(A,u.u_units_to_pixels),u_patternscale_a:new a.aQ(A,u.u_patternscale_a),u_patternscale_b:new a.aQ(A,u.u_patternscale_b),u_sdfgamma:new a.aM(A,u.u_sdfgamma),u_image:new a.aL(A,u.u_image),u_tex_y_a:new a.aM(A,u.u_tex_y_a),u_tex_y_b:new a.aM(A,u.u_tex_y_b),u_mix:new a.aM(A,u.u_mix)}),raster:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_tl_parent:new a.aQ(A,u.u_tl_parent),u_scale_parent:new a.aM(A,u.u_scale_parent),u_buffer_scale:new a.aM(A,u.u_buffer_scale),u_fade_t:new a.aM(A,u.u_fade_t),u_opacity:new a.aM(A,u.u_opacity),u_image0:new a.aL(A,u.u_image0),u_image1:new a.aL(A,u.u_image1),u_brightness_low:new a.aM(A,u.u_brightness_low),u_brightness_high:new a.aM(A,u.u_brightness_high),u_saturation_factor:new a.aM(A,u.u_saturation_factor),u_contrast_factor:new a.aM(A,u.u_contrast_factor),u_spin_weights:new a.aP(A,u.u_spin_weights)}),symbolIcon:(A,u)=>({u_is_size_zoom_constant:new a.aL(A,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(A,u.u_is_size_feature_constant),u_size_t:new a.aM(A,u.u_size_t),u_size:new a.aM(A,u.u_size),u_camera_to_center_distance:new a.aM(A,u.u_camera_to_center_distance),u_pitch:new a.aM(A,u.u_pitch),u_rotate_symbol:new a.aL(A,u.u_rotate_symbol),u_aspect_ratio:new a.aM(A,u.u_aspect_ratio),u_fade_change:new a.aM(A,u.u_fade_change),u_matrix:new a.aN(A,u.u_matrix),u_label_plane_matrix:new a.aN(A,u.u_label_plane_matrix),u_coord_matrix:new a.aN(A,u.u_coord_matrix),u_is_text:new a.aL(A,u.u_is_text),u_pitch_with_map:new a.aL(A,u.u_pitch_with_map),u_texsize:new a.aQ(A,u.u_texsize),u_texture:new a.aL(A,u.u_texture)}),symbolSDF:(A,u)=>({u_is_size_zoom_constant:new a.aL(A,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(A,u.u_is_size_feature_constant),u_size_t:new a.aM(A,u.u_size_t),u_size:new a.aM(A,u.u_size),u_camera_to_center_distance:new a.aM(A,u.u_camera_to_center_distance),u_pitch:new a.aM(A,u.u_pitch),u_rotate_symbol:new a.aL(A,u.u_rotate_symbol),u_aspect_ratio:new a.aM(A,u.u_aspect_ratio),u_fade_change:new a.aM(A,u.u_fade_change),u_matrix:new a.aN(A,u.u_matrix),u_label_plane_matrix:new a.aN(A,u.u_label_plane_matrix),u_coord_matrix:new a.aN(A,u.u_coord_matrix),u_is_text:new a.aL(A,u.u_is_text),u_pitch_with_map:new a.aL(A,u.u_pitch_with_map),u_texsize:new a.aQ(A,u.u_texsize),u_texture:new a.aL(A,u.u_texture),u_gamma_scale:new a.aM(A,u.u_gamma_scale),u_device_pixel_ratio:new a.aM(A,u.u_device_pixel_ratio),u_is_halo:new a.aL(A,u.u_is_halo)}),symbolTextAndIcon:(A,u)=>({u_is_size_zoom_constant:new a.aL(A,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(A,u.u_is_size_feature_constant),u_size_t:new a.aM(A,u.u_size_t),u_size:new a.aM(A,u.u_size),u_camera_to_center_distance:new a.aM(A,u.u_camera_to_center_distance),u_pitch:new a.aM(A,u.u_pitch),u_rotate_symbol:new a.aL(A,u.u_rotate_symbol),u_aspect_ratio:new a.aM(A,u.u_aspect_ratio),u_fade_change:new a.aM(A,u.u_fade_change),u_matrix:new a.aN(A,u.u_matrix),u_label_plane_matrix:new a.aN(A,u.u_label_plane_matrix),u_coord_matrix:new a.aN(A,u.u_coord_matrix),u_is_text:new a.aL(A,u.u_is_text),u_pitch_with_map:new a.aL(A,u.u_pitch_with_map),u_texsize:new a.aQ(A,u.u_texsize),u_texsize_icon:new a.aQ(A,u.u_texsize_icon),u_texture:new a.aL(A,u.u_texture),u_texture_icon:new a.aL(A,u.u_texture_icon),u_gamma_scale:new a.aM(A,u.u_gamma_scale),u_device_pixel_ratio:new a.aM(A,u.u_device_pixel_ratio),u_is_halo:new a.aL(A,u.u_is_halo)}),background:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_opacity:new a.aM(A,u.u_opacity),u_color:new a.aR(A,u.u_color)}),backgroundPattern:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_opacity:new a.aM(A,u.u_opacity),u_image:new a.aL(A,u.u_image),u_pattern_tl_a:new a.aQ(A,u.u_pattern_tl_a),u_pattern_br_a:new a.aQ(A,u.u_pattern_br_a),u_pattern_tl_b:new a.aQ(A,u.u_pattern_tl_b),u_pattern_br_b:new a.aQ(A,u.u_pattern_br_b),u_texsize:new a.aQ(A,u.u_texsize),u_mix:new a.aM(A,u.u_mix),u_pattern_size_a:new a.aQ(A,u.u_pattern_size_a),u_pattern_size_b:new a.aQ(A,u.u_pattern_size_b),u_scale_a:new a.aM(A,u.u_scale_a),u_scale_b:new a.aM(A,u.u_scale_b),u_pixel_coord_upper:new a.aQ(A,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(A,u.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aM(A,u.u_tile_units_to_pixels)}),terrain:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_texture:new a.aL(A,u.u_texture),u_ele_delta:new a.aM(A,u.u_ele_delta)}),terrainDepth:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_ele_delta:new a.aM(A,u.u_ele_delta)}),terrainCoords:(A,u)=>({u_matrix:new a.aN(A,u.u_matrix),u_texture:new a.aL(A,u.u_texture),u_terrain_coords_id:new a.aM(A,u.u_terrain_coords_id),u_ele_delta:new a.aM(A,u.u_ele_delta)})};class os{constructor(u,m,b){this.context=u;const M=u.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ls={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wo{constructor(u,m,b,M){this.length=m.length,this.attributes=b,this.itemSize=m.bytesPerElement,this.dynamicDraw=M,this.context=u;const C=u.gl;this.buffer=C.createBuffer(),u.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,m){for(let b=0;b<this.attributes.length;b++){const M=m.attributes[this.attributes[b].name];M!==void 0&&u.enableVertexAttribArray(M)}}setVertexAttribPointers(u,m,b){for(let M=0;M<this.attributes.length;M++){const C=this.attributes[M],N=m.attributes[C.name];N!==void 0&&u.vertexAttribPointer(N,C.components,u[ls[C.type]],!1,this.itemSize,C.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const or=new WeakMap;function Ya(A){var u;if(or.has(A))return or.get(A);{const m=(u=A.getParameter(A.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return or.set(A,m),m}}class Xn{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class El extends Xn{getDefault(){return a.aT.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class us extends Xn{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Wi extends Xn{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class to extends Xn{getDefault(){return[!0,!0,!0,!0]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Gl extends Xn{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Jo extends Xn{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class hi extends Xn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const m=this.current;(u.func!==m.func||u.ref!==m.ref||u.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Wu extends Xn{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Ia extends Xn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=u,this.dirty=!1}}class eo extends Xn{getDefault(){return[0,1]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Yl extends Xn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=u,this.dirty=!1}}class Xu extends Xn{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class kc extends Xn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.BLEND):m.disable(m.BLEND),this.current=u,this.dirty=!1}}class pf extends Xn{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class Wl extends Xn{getDefault(){return a.aT.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class hh extends Xn{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class cd extends Xn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=u,this.dirty=!1}}class fh extends Xn{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class hd extends Xn{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class So extends Xn{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class fd extends Xn{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Ku extends Xn{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class no extends Xn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class Oc extends Xn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Dc extends Xn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Al extends Xn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Ic extends Xn{getDefault(){return null}set(u){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class dh extends Xn{getDefault(){return null}set(u){var m;if(u===this.current&&!this.dirty)return;const b=this.gl;Ya(b)?b.bindVertexArray(u):(m=b.getExtension("OES_vertex_array_object"))===null||m===void 0||m.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class zc extends Xn{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Xl extends Xn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class ph extends Xn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class To extends Xn{constructor(u,m){super(u),this.context=u,this.parent=m}getDefault(){return null}}class vu extends To{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class mh extends To{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Lc extends To{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class fi{constructor(u,m,b,M,C){this.context=u,this.width=m,this.height=b;const N=u.gl,j=this.framebuffer=N.createFramebuffer();if(this.colorAttachment=new vu(u,j),M)this.depthAttachment=C?new Lc(u,j):new mh(u,j);else if(C)throw new Error("Stencil cannot be setted without depth");if(N.checkFramebufferStatus(N.FRAMEBUFFER)!==N.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,m=this.colorAttachment.get();if(m&&u.deleteTexture(m),this.depthAttachment){const b=this.depthAttachment.get();b&&u.deleteRenderbuffer(b)}u.deleteFramebuffer(this.framebuffer)}}class zi{constructor(u,m,b){this.blendFunction=u,this.blendColor=m,this.mask=b}}zi.Replace=[1,0],zi.disabled=new zi(zi.Replace,a.aT.transparent,[!1,!1,!1,!1]),zi.unblended=new zi(zi.Replace,a.aT.transparent,[!0,!0,!0,!0]),zi.alphaBlended=new zi([1,771],a.aT.transparent,[!0,!0,!0,!0]);class dd{constructor(u){var m,b;if(this.gl=u,this.clearColor=new El(this),this.clearDepth=new us(this),this.clearStencil=new Wi(this),this.colorMask=new to(this),this.depthMask=new Gl(this),this.stencilMask=new Jo(this),this.stencilFunc=new hi(this),this.stencilOp=new Wu(this),this.stencilTest=new Ia(this),this.depthRange=new eo(this),this.depthTest=new Yl(this),this.depthFunc=new Xu(this),this.blend=new kc(this),this.blendFunc=new pf(this),this.blendColor=new Wl(this),this.blendEquation=new hh(this),this.cullFace=new cd(this),this.cullFaceSide=new fh(this),this.frontFace=new hd(this),this.program=new So(this),this.activeTexture=new fd(this),this.viewport=new Ku(this),this.bindFramebuffer=new no(this),this.bindRenderbuffer=new Oc(this),this.bindTexture=new Dc(this),this.bindVertexBuffer=new Al(this),this.bindElementBuffer=new Ic(this),this.bindVertexArray=new dh(this),this.pixelStoreUnpack=new zc(this),this.pixelStoreUnpackPremultiplyAlpha=new Xl(this),this.pixelStoreUnpackFlipY=new ph(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),Ya(u)){this.HALF_FLOAT=u.HALF_FLOAT;const M=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(m=u.RGBA16F)!==null&&m!==void 0?m:M?.RGBA16F_EXT,this.RGB16F=(b=u.RGB16F)!==null&&b!==void 0?b:M?.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const M=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=M?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,m){return new os(this,u,m)}createVertexBuffer(u,m,b){return new wo(this,u,m,b)}createRenderbuffer(u,m,b){const M=this.gl,C=M.createRenderbuffer();return this.bindRenderbuffer.set(C),M.renderbufferStorage(M.RENDERBUFFER,u,m,b),this.bindRenderbuffer.set(null),C}createFramebuffer(u,m,b,M){return new fi(this,u,m,b,M)}clear({color:u,depth:m,stencil:b}){const M=this.gl;let C=0;u&&(C|=M.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(C|=M.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),b!==void 0&&(C|=M.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),M.clear(C)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){a.aG(u.blendFunction,zi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return Ya(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var m;return Ya(this.gl)?this.gl.deleteVertexArray(u):(m=this.gl.getExtension("OES_vertex_array_object"))===null||m===void 0?void 0:m.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}class Kn{constructor(u,m,b){this.func=u,this.mask=m,this.range=b}}Kn.ReadOnly=!1,Kn.ReadWrite=!0,Kn.disabled=new Kn(519,Kn.ReadOnly,[0,1]);const ua=7680;class Xi{constructor(u,m,b,M,C,N){this.test=u,this.ref=m,this.mask=b,this.fail=M,this.depthFail=C,this.pass=N}}Xi.disabled=new Xi({func:519,mask:0},0,0,ua,ua,ua);class Li{constructor(u,m,b){this.enable=u,this.mode=m,this.frontFace=b}}let Qu;function Ju(A,u,m,b,M,C,N){const j=A.context,H=j.gl,Q=A.useProgram("collisionBox"),et=[];let rt=0,pt=0;for(let Vt=0;Vt<b.length;Vt++){const te=b[Vt],me=u.getTile(te),xe=me.getBucket(m);if(!xe)continue;let Pe=te.posMatrix;M[0]===0&&M[1]===0||(Pe=A.translatePosMatrix(te.posMatrix,me,M,C));const Ve=N?xe.textCollisionBox:xe.iconCollisionBox,ze=xe.collisionCircleArray;if(ze.length>0){const qe=a.Z(),dn=Pe;a.aU(qe,xe.placementInvProjMatrix,A.transform.glCoordMatrix),a.aU(qe,qe,xe.placementViewportMatrix),et.push({circleArray:ze,circleOffset:pt,transform:dn,invTransform:qe,coord:te}),rt+=ze.length/4,pt=rt}Ve&&Q.draw(j,H.LINES,Kn.disabled,Xi.disabled,A.colorModeForRenderPass(),Li.disabled,Zt(Pe,A.transform,me),A.style.map.terrain&&A.style.map.terrain.getTerrainData(te),m.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,null,A.transform.zoom,null,null,Ve.collisionVertexBuffer)}if(!N||!et.length)return;const Ot=A.useProgram("collisionCircle"),kt=new a.aV;kt.resize(4*rt),kt._trim();let Rt=0;for(const Vt of et)for(let te=0;te<Vt.circleArray.length/4;te++){const me=4*te,xe=Vt.circleArray[me+0],Pe=Vt.circleArray[me+1],Ve=Vt.circleArray[me+2],ze=Vt.circleArray[me+3];kt.emplace(Rt++,xe,Pe,Ve,ze,0),kt.emplace(Rt++,xe,Pe,Ve,ze,1),kt.emplace(Rt++,xe,Pe,Ve,ze,2),kt.emplace(Rt++,xe,Pe,Ve,ze,3)}(!Qu||Qu.length<2*rt)&&(Qu=(function(Vt){const te=2*Vt,me=new a.aX;me.resize(te),me._trim();for(let xe=0;xe<te;xe++){const Pe=6*xe;me.uint16[Pe+0]=4*xe+0,me.uint16[Pe+1]=4*xe+1,me.uint16[Pe+2]=4*xe+2,me.uint16[Pe+3]=4*xe+2,me.uint16[Pe+4]=4*xe+3,me.uint16[Pe+5]=4*xe+0}return me})(rt));const Pt=j.createIndexBuffer(Qu,!0),Qt=j.createVertexBuffer(kt,a.aW.members,!0);for(const Vt of et){const te={u_matrix:Vt.transform,u_inv_matrix:Vt.invTransform,u_camera_to_center_distance:(fe=A.transform).cameraToCenterDistance,u_viewport_size:[fe.width,fe.height]};Ot.draw(j,H.TRIANGLES,Kn.disabled,Xi.disabled,A.colorModeForRenderPass(),Li.disabled,te,A.style.map.terrain&&A.style.map.terrain.getTerrainData(Vt.coord),m.id,Qt,Pt,a.S.simpleSegment(0,2*Vt.circleOffset,Vt.circleArray.length,Vt.circleArray.length/2),null,A.transform.zoom,null,null,null)}var fe;Qt.destroy(),Pt.destroy()}Li.disabled=new Li(!1,1029,2305),Li.backCCW=new Li(!0,1029,2305);const xu=a.ao(new Float32Array(16));function tc(A,u,m,b,M,C){const{horizontalAlign:N,verticalAlign:j}=a.au(A);return new a.P((-(N-.5)*u/M+b[0])*C,(-(j-.5)*m/M+b[1])*C)}function ec(A,u,m,b,M,C,N,j,H,Q,et){const rt=A.text.placedSymbolArray,pt=A.text.dynamicLayoutVertexArray,Ot=A.icon.dynamicLayoutVertexArray,kt={};pt.clear();for(let Rt=0;Rt<rt.length;Rt++){const Pt=rt.get(Rt),Qt=Pt.hidden||!Pt.crossTileID||A.allowVerticalPlacement&&!Pt.placedOrientation?null:b[Pt.crossTileID];if(Qt){const fe=new a.P(Pt.anchorX,Pt.anchorY),Vt=Yn(fe,m?N:C,et),te=ga(M.cameraToCenterDistance,Vt.signedDistanceFromCamera);let me=a.aj(A.textSizeData,H,Pt)*te/a.ap;m&&(me*=A.tilePixelRatio/j);const{width:xe,height:Pe,anchor:Ve,textOffset:ze,textBoxScale:qe}=Qt,dn=tc(Ve,xe,Pe,ze,qe,me),ai=m?Yn(fe.add(dn),C,et).point:Vt.point.add(u?dn.rotate(-M.angle):dn),Ye=A.allowVerticalPlacement&&Pt.placedOrientation===a.ai.vertical?Math.PI/2:0;for(let vn=0;vn<Pt.numGlyphs;vn++)a.ak(pt,ai,Ye);Q&&Pt.associatedIconIndex>=0&&(kt[Pt.associatedIconIndex]={shiftedAnchor:ai,angle:Ye})}else Et(Pt.numGlyphs,pt)}if(Q){Ot.clear();const Rt=A.icon.placedSymbolArray;for(let Pt=0;Pt<Rt.length;Pt++){const Qt=Rt.get(Pt);if(Qt.hidden)Et(Qt.numGlyphs,Ot);else{const fe=kt[Pt];if(fe)for(let Vt=0;Vt<Qt.numGlyphs;Vt++)a.ak(Ot,fe.shiftedAnchor,fe.angle);else Et(Qt.numGlyphs,Ot)}}A.icon.dynamicLayoutVertexBuffer.updateData(Ot)}A.text.dynamicLayoutVertexBuffer.updateData(pt)}function nc(A,u,m){return m.iconsInText&&u?"symbolTextAndIcon":A?"symbolSDF":"symbolIcon"}function tl(A,u,m,b,M,C,N,j,H,Q,et,rt){const pt=A.context,Ot=pt.gl,kt=A.transform,Rt=j==="map",Pt=H==="map",Qt=j!=="viewport"&&m.layout.get("symbol-placement")!=="point",fe=Rt&&!Pt&&!Qt,Vt=!m.layout.get("symbol-sort-key").isConstant();let te=!1;const me=A.depthModeForSublayer(0,Kn.ReadOnly),xe=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Pe=[];for(const Ve of b){const ze=u.getTile(Ve),qe=ze.getBucket(m);if(!qe)continue;const dn=M?qe.text:qe.icon;if(!dn||!dn.segments.get().length||!dn.hasVisibleVertices)continue;const ai=dn.programConfigurations.get(m.id),Ye=M||qe.sdfIcons,vn=M?qe.textSizeData:qe.iconSizeData,pn=Pt||kt.pitch!==0,Vi=A.useProgram(nc(Ye,M,qe),ai),Zn=a.ah(vn,kt.zoom),Fn=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ve);let ei,dr,Zi,Ra,xr=[0,0],qr=null;if(M)dr=ze.glyphAtlasTexture,Zi=Ot.LINEAR,ei=ze.glyphAtlasTexture.size,qe.iconsInText&&(xr=ze.imageAtlasTexture.size,qr=ze.imageAtlasTexture,Ra=pn||A.options.rotating||A.options.zooming||vn.kind==="composite"||vn.kind==="camera"?Ot.LINEAR:Ot.NEAREST);else{const Lr=m.layout.get("icon-size").constantOr(0)!==1||qe.iconsNeedLinear;dr=ze.imageAtlasTexture,Zi=Ye||A.options.rotating||A.options.zooming||Lr||pn?Ot.LINEAR:Ot.NEAREST,ei=ze.imageAtlasTexture.size}const ha=Wt(ze,1,A.transform.zoom),er=Fe(Ve.posMatrix,Pt,Rt,A.transform,ha),zo=yr(Ve.posMatrix,Pt,Rt,A.transform,ha),Xa=xe&&qe.hasTextData(),Ps=m.layout.get("icon-text-fit")!=="none"&&Xa&&qe.hasIconData();if(Qt){const Lr=A.style.map.terrain?(Ka,Rr)=>A.style.map.terrain.getElevation(Ve,Ka,Rr):null,Er=m.layout.get("text-rotation-alignment")==="map";Ze(qe,Ve.posMatrix,A,M,er,zo,Pt,Q,Er,Lr)}const fl=A.translatePosMatrix(Ve.posMatrix,ze,C,N),Au=Qt||M&&xe||Ps?xu:er,Na=A.translatePosMatrix(zo,ze,C,N,!0),Qr=Ye&&m.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let wa;wa=Ye?qe.iconsInText?Qo(vn.kind,Zn,fe,Pt,A,fl,Au,Na,ei,xr):Ii(vn.kind,Zn,fe,Pt,A,fl,Au,Na,M,ei):Ts(vn.kind,Zn,fe,Pt,A,fl,Au,Na,M,ei);const Cu={program:Vi,buffers:dn,uniformValues:wa,atlasTexture:dr,atlasTextureIcon:qr,atlasInterpolation:Zi,atlasInterpolationIcon:Ra,isSDF:Ye,hasHalo:Qr};if(Vt&&qe.canOverlap){te=!0;const Lr=dn.segments.get();for(const Er of Lr)Pe.push({segments:new a.S([Er]),sortKey:Er.sortKey,state:Cu,terrainData:Fn})}else Pe.push({segments:dn.segments,sortKey:0,state:Cu,terrainData:Fn})}te&&Pe.sort(((Ve,ze)=>Ve.sortKey-ze.sortKey));for(const Ve of Pe){const ze=Ve.state;if(pt.activeTexture.set(Ot.TEXTURE0),ze.atlasTexture.bind(ze.atlasInterpolation,Ot.CLAMP_TO_EDGE),ze.atlasTextureIcon&&(pt.activeTexture.set(Ot.TEXTURE1),ze.atlasTextureIcon&&ze.atlasTextureIcon.bind(ze.atlasInterpolationIcon,Ot.CLAMP_TO_EDGE)),ze.isSDF){const qe=ze.uniformValues;ze.hasHalo&&(qe.u_is_halo=1,Ms(ze.buffers,Ve.segments,m,A,ze.program,me,et,rt,qe,Ve.terrainData)),qe.u_is_halo=0}Ms(ze.buffers,Ve.segments,m,A,ze.program,me,et,rt,ze.uniformValues,Ve.terrainData)}}function Ms(A,u,m,b,M,C,N,j,H,Q){const et=b.context;M.draw(et,et.gl.TRIANGLES,C,N,j,Li.disabled,H,Q,m.id,A.layoutVertexBuffer,A.indexBuffer,u,m.paint,b.transform.zoom,A.programConfigurations.get(m.id),A.dynamicLayoutVertexBuffer,A.opacityVertexBuffer)}function Mo(A,u,m,b,M){if(!m||!b||!b.imageAtlas)return;const C=b.imageAtlas.patternPositions;let N=C[m.to.toString()],j=C[m.from.toString()];if(!N&&j&&(N=j),!j&&N&&(j=N),!N||!j){const H=M.getPaintProperty(u);N=C[H],j=C[H]}N&&j&&A.setConstantPatternPositions(N,j)}function ic(A,u,m,b,M,C,N){const j=A.context.gl,H="fill-pattern",Q=m.paint.get(H),et=Q&&Q.constantOr(1),rt=m.getCrossfadeParameters();let pt,Ot,kt,Rt,Pt;N?(Ot=et&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pt=j.LINES):(Ot=et?"fillPattern":"fill",pt=j.TRIANGLES);const Qt=Q.constantOr(null);for(const fe of b){const Vt=u.getTile(fe);if(et&&!Vt.patternsLoaded())continue;const te=Vt.getBucket(m);if(!te)continue;const me=te.programConfigurations.get(m.id),xe=A.useProgram(Ot,me),Pe=A.style.map.terrain&&A.style.map.terrain.getTerrainData(fe);et&&(A.context.activeTexture.set(j.TEXTURE0),Vt.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),me.updatePaintBuffers(rt)),Mo(me,H,Qt,Vt,m);const Ve=Pe?fe:null,ze=A.translatePosMatrix(Ve?Ve.posMatrix:fe.posMatrix,Vt,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(N){Rt=te.indexBuffer2,Pt=te.segments2;const qe=[j.drawingBufferWidth,j.drawingBufferHeight];kt=Ot==="fillOutlinePattern"&&et?yt(ze,A,rt,Vt,qe):Di(ze,qe)}else Rt=te.indexBuffer,Pt=te.segments,kt=et?Ss(ze,A,rt,Vt):Ko(ze);xe.draw(A.context,pt,M,A.stencilModeForClipping(fe),C,Li.disabled,kt,Pe,m.id,te.layoutVertexBuffer,Rt,Pt,m.paint,A.transform.zoom,me)}}function cs(A,u,m,b,M,C,N){const j=A.context,H=j.gl,Q="fill-extrusion-pattern",et=m.paint.get(Q),rt=et.constantOr(1),pt=m.getCrossfadeParameters(),Ot=m.paint.get("fill-extrusion-opacity"),kt=et.constantOr(null);for(const Rt of b){const Pt=u.getTile(Rt),Qt=Pt.getBucket(m);if(!Qt)continue;const fe=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Rt),Vt=Qt.programConfigurations.get(m.id),te=A.useProgram(rt?"fillExtrusionPattern":"fillExtrusion",Vt);rt&&(A.context.activeTexture.set(H.TEXTURE0),Pt.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),Vt.updatePaintBuffers(pt)),Mo(Vt,Q,kt,Pt,m);const me=A.translatePosMatrix(Rt.posMatrix,Pt,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),xe=m.paint.get("fill-extrusion-vertical-gradient"),Pe=rt?ss(me,A,xe,Ot,Rt,pt,Pt):Hi(me,A,xe,Ot);te.draw(j,j.gl.TRIANGLES,M,C,N,Li.backCCW,Pe,fe,m.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,m.paint,A.transform.zoom,Vt,A.style.map.terrain&&Qt.centroidVertexBuffer)}}function mf(A,u,m,b,M,C,N){const j=A.context,H=j.gl,Q=m.fbo;if(!Q)return;const et=A.useProgram("hillshade"),rt=A.style.map.terrain&&A.style.map.terrain.getTerrainData(u);j.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,Q.colorAttachment.get()),et.draw(j,H.TRIANGLES,M,C,N,Li.disabled,((pt,Ot,kt,Rt)=>{const Pt=kt.paint.get("hillshade-shadow-color"),Qt=kt.paint.get("hillshade-highlight-color"),fe=kt.paint.get("hillshade-accent-color");let Vt=kt.paint.get("hillshade-illumination-direction")*(Math.PI/180);kt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Vt-=pt.transform.angle);const te=!pt.options.moving;return{u_matrix:Rt?Rt.posMatrix:pt.transform.calculatePosMatrix(Ot.tileID.toUnwrapped(),te),u_image:0,u_latrange:Vn(0,Ot.tileID),u_light:[kt.paint.get("hillshade-exaggeration"),Vt],u_shadow:Pt,u_highlight:Qt,u_accent:fe}})(A,m,b,rt?u:null),rt,b.id,A.rasterBoundsBuffer,A.quadTriangleIndexBuffer,A.rasterBoundsSegments)}function Us(A,u,m,b,M,C){const N=A.context,j=N.gl,H=u.dem;if(H&&H.data){const Q=H.dim,et=H.stride,rt=H.getPixels();if(N.activeTexture.set(j.TEXTURE1),N.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||A.getTileTexture(et),u.demTexture){const Ot=u.demTexture;Ot.update(rt,{premultiply:!1}),Ot.bind(j.NEAREST,j.CLAMP_TO_EDGE)}else u.demTexture=new xt(N,rt,j.RGBA,{premultiply:!1}),u.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);N.activeTexture.set(j.TEXTURE0);let pt=u.fbo;if(!pt){const Ot=new xt(N,{width:Q,height:Q,data:null},j.RGBA);Ot.bind(j.LINEAR,j.CLAMP_TO_EDGE),pt=u.fbo=N.createFramebuffer(Q,Q,!0,!1),pt.colorAttachment.set(Ot.texture)}N.bindFramebuffer.set(pt.framebuffer),N.viewport.set([0,0,Q,Q]),A.useProgram("hillshadePrepare").draw(N,j.TRIANGLES,b,M,C,Li.disabled,((Ot,kt)=>{const Rt=kt.stride,Pt=a.Z();return a.aS(Pt,0,a.N,-a.N,0,0,1),a.$(Pt,Pt,[0,-a.N,0]),{u_matrix:Pt,u_image:1,u_dimension:[Rt,Rt],u_zoom:Ot.overscaledZ,u_unpack:kt.getUnpackVector()}})(u.tileID,H),null,m.id,A.rasterBoundsBuffer,A.quadTriangleIndexBuffer,A.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function rc(A,u,m,b,M,C){const N=b.paint.get("raster-fade-duration");if(!C&&N>0){const j=a.h.now(),H=(j-A.timeAdded)/N,Q=u?(j-u.timeAdded)/N:-1,et=m.getSource(),rt=M.coveringZoomLevel({tileSize:et.tileSize,roundZoom:et.roundZoom}),pt=!u||Math.abs(u.tileID.overscaledZ-rt)>Math.abs(A.tileID.overscaledZ-rt),Ot=pt&&A.refreshedUponExpiration?1:a.ad(pt?H:1-Q,0,1);return A.refreshedUponExpiration&&H>=1&&(A.refreshedUponExpiration=!1),u?{opacity:1,mix:1-Ot}:{opacity:Ot,mix:0}}return{opacity:1,mix:0}}const bu=new a.aT(1,0,0,1),Cl=new a.aT(0,1,0,1),Kl=new a.aT(0,0,1,1),gh=new a.aT(1,0,1,1),io=new a.aT(0,1,1,1);function Eo(A,u,m,b){Ql(A,0,u+m/2,A.transform.width,m,b)}function ac(A,u,m,b){Ql(A,u-m/2,0,m,A.transform.height,b)}function Ql(A,u,m,b,M,C){const N=A.context,j=N.gl;j.enable(j.SCISSOR_TEST),j.scissor(u*A.pixelRatio,m*A.pixelRatio,b*A.pixelRatio,M*A.pixelRatio),N.clear({color:C}),j.disable(j.SCISSOR_TEST)}function yh(A,u,m){const b=A.context,M=b.gl,C=m.posMatrix,N=A.useProgram("debug"),j=Kn.disabled,H=Xi.disabled,Q=A.colorModeForRenderPass(),et="$debug",rt=A.style.map.terrain&&A.style.map.terrain.getTerrainData(m);b.activeTexture.set(M.TEXTURE0);const pt=u.getTileByID(m.key).latestRawTileData,Ot=Math.floor((pt&&pt.byteLength||0)/1024),kt=u.getTile(m).tileSize,Rt=512/Math.min(kt,512)*(m.overscaledZ/A.transform.zoom)*.5;let Pt=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(Pt+=` => ${m.overscaledZ}`),(function(Qt,fe){Qt.initDebugOverlayCanvas();const Vt=Qt.debugOverlayCanvas,te=Qt.context.gl,me=Qt.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,Vt.width,Vt.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(fe,5,5),me.strokeText(fe,5,5),Qt.debugOverlayTexture.update(Vt),Qt.debugOverlayTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE)})(A,`${Pt} ${Ot}kB`),N.draw(b,M.TRIANGLES,j,H,zi.alphaBlended,Li.disabled,ye(C,a.aT.transparent,Rt),null,et,A.debugBuffer,A.quadTriangleIndexBuffer,A.debugSegments),N.draw(b,M.LINE_STRIP,j,H,Q,Li.disabled,ye(C,a.aT.red),rt,et,A.debugBuffer,A.tileBorderIndexBuffer,A.debugSegments)}function Ti(A,u,m){const b=A.context,M=b.gl,C=A.colorModeForRenderPass(),N=new Kn(M.LEQUAL,Kn.ReadWrite,A.depthRangeFor3D),j=A.useProgram("terrain"),H=u.getTerrainMesh();b.bindFramebuffer.set(null),b.viewport.set([0,0,A.width,A.height]);for(const Q of m){const et=A.renderToTexture.getTexture(Q),rt=u.getTerrainData(Q.tileID);b.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,et.texture);const pt={u_matrix:A.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),u_texture:0,u_ele_delta:u.getMeshFrameDelta(A.transform.zoom)};j.draw(b,M.TRIANGLES,N,Xi.disabled,C,Li.backCCW,pt,rt,"terrain",H.vertexBuffer,H.indexBuffer,H.segments)}}class Jl{constructor(u,m){this.context=new dd(u),this.transform=m,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.Z(),renderTime:0},this.setup(),this.numSublayers=Gn.maxUnderzooming+Gn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Yr}resize(u,m,b){if(this.width=Math.floor(u*b),this.height=Math.floor(m*b),this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const u=this.context,m=new a.a_;m.emplaceBack(0,0),m.emplaceBack(a.N,0),m.emplaceBack(0,a.N),m.emplaceBack(a.N,a.N),this.tileExtentBuffer=u.createVertexBuffer(m,$r.members),this.tileExtentSegments=a.S.simpleSegment(0,0,4,2);const b=new a.a_;b.emplaceBack(0,0),b.emplaceBack(a.N,0),b.emplaceBack(0,a.N),b.emplaceBack(a.N,a.N),this.debugBuffer=u.createVertexBuffer(b,$r.members),this.debugSegments=a.S.simpleSegment(0,0,4,5);const M=new a.V;M.emplaceBack(0,0,0,0),M.emplaceBack(a.N,0,a.N,0),M.emplaceBack(0,a.N,0,a.N),M.emplaceBack(a.N,a.N,a.N,a.N),this.rasterBoundsBuffer=u.createVertexBuffer(M,Gt.members),this.rasterBoundsSegments=a.S.simpleSegment(0,0,4,2);const C=new a.a_;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(C,$r.members),this.viewportSegments=a.S.simpleSegment(0,0,4,2);const N=new a.a$;N.emplaceBack(0),N.emplaceBack(1),N.emplaceBack(3),N.emplaceBack(2),N.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(N);const j=new a.b0;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(j);const H=this.context.gl;this.stencilClearMode=new Xi({func:H.ALWAYS,mask:0},0,255,H.ZERO,H.ZERO,H.ZERO)}clearStencil(){const u=this.context,m=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=a.Z();a.aS(b,0,this.width,this.height,0,0,1),a.a0(b,b,[m.drawingBufferWidth,m.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,m.TRIANGLES,Kn.disabled,this.stencilClearMode,zi.disabled,Li.disabled,Ue(b),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,m){if(this.currentStencilSource===u.source||!u.isTileClipped()||!m||!m.length)return;this.currentStencilSource=u.source;const b=this.context,M=b.gl;this.nextStencilID+m.length>256&&this.clearStencil(),b.setColorMode(zi.disabled),b.setDepthMode(Kn.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const N of m){const j=this._tileClippingMaskIDs[N.key]=this.nextStencilID++,H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N);C.draw(b,M.TRIANGLES,Kn.disabled,new Xi({func:M.ALWAYS,mask:0},j,255,M.KEEP,M.KEEP,M.REPLACE),zi.disabled,Li.disabled,Ue(N.posMatrix),H,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,m=this.context.gl;return new Xi({func:m.NOTEQUAL,mask:255},u,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(u){const m=this.context.gl;return new Xi({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(u){const m=this.context.gl,b=u.sort(((N,j)=>j.overscaledZ-N.overscaledZ)),M=b[b.length-1].overscaledZ,C=b[0].overscaledZ-M+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const N={};for(let j=0;j<C;j++)N[j+M]=new Xi({func:m.GEQUAL,mask:255},j+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=C,[N,b]}return[{[M]:Xi.disabled},b]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new zi([u.CONSTANT_COLOR,u.ONE],new a.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?zi.unblended:zi.alphaBlended}depthModeForSublayer(u,m,b){if(!this.opaquePassEnabledForLayer())return Kn.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Kn(b||this.context.gl.LEQUAL,m,[M,M])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,m){this.style=u,this.options=m,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(a.h.now()),this.imageManager.beginFrame();const b=this.style._order,M=this.style.sourceCaches,C={},N={},j={};for(const H in M){const Q=M[H];Q.used&&Q.prepare(this.context),C[H]=Q.getVisibleCoordinates(),N[H]=C[H].slice().reverse(),j[H]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let H=0;H<b.length;H++)if(this.style._layers[b[H]].is3D()){this.opaquePassCutoff=H;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const H=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||H.length)&&(a.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(Q,et){const rt=Q.context,pt=rt.gl,Ot=zi.unblended,kt=new Kn(pt.LEQUAL,Kn.ReadWrite,[0,1]),Rt=et.getTerrainMesh(),Pt=et.sourceCache.getRenderableTiles(),Qt=Q.useProgram("terrainDepth");rt.bindFramebuffer.set(et.getFramebuffer("depth").framebuffer),rt.viewport.set([0,0,Q.width/devicePixelRatio,Q.height/devicePixelRatio]),rt.clear({color:a.aT.transparent,depth:1});for(const fe of Pt){const Vt=et.getTerrainData(fe.tileID),te={u_matrix:Q.transform.calculatePosMatrix(fe.tileID.toUnwrapped()),u_ele_delta:et.getMeshFrameDelta(Q.transform.zoom)};Qt.draw(rt,pt.TRIANGLES,kt,Xi.disabled,Ot,Li.backCCW,te,Vt,"terrain",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}rt.bindFramebuffer.set(null),rt.viewport.set([0,0,Q.width,Q.height])})(this,this.style.map.terrain),(function(Q,et){const rt=Q.context,pt=rt.gl,Ot=zi.unblended,kt=new Kn(pt.LEQUAL,Kn.ReadWrite,[0,1]),Rt=et.getTerrainMesh(),Pt=et.getCoordsTexture(),Qt=et.sourceCache.getRenderableTiles(),fe=Q.useProgram("terrainCoords");rt.bindFramebuffer.set(et.getFramebuffer("coords").framebuffer),rt.viewport.set([0,0,Q.width/devicePixelRatio,Q.height/devicePixelRatio]),rt.clear({color:a.aT.transparent,depth:1}),et.coordsIndex=[];for(const Vt of Qt){const te=et.getTerrainData(Vt.tileID);rt.activeTexture.set(pt.TEXTURE0),pt.bindTexture(pt.TEXTURE_2D,Pt.texture);const me={u_matrix:Q.transform.calculatePosMatrix(Vt.tileID.toUnwrapped()),u_terrain_coords_id:(255-et.coordsIndex.length)/255,u_texture:0,u_ele_delta:et.getMeshFrameDelta(Q.transform.zoom)};fe.draw(rt,pt.TRIANGLES,kt,Xi.disabled,Ot,Li.backCCW,me,te,"terrain",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments),et.coordsIndex.push(Vt.tileID.key)}rt.bindFramebuffer.set(null),rt.viewport.set([0,0,Q.width,Q.height])})(this,this.style.map.terrain))}this.renderPass="offscreen";for(const H of b){const Q=this.style._layers[H];if(!Q.hasOffscreenPass()||Q.isHidden(this.transform.zoom))continue;const et=N[Q.source];(Q.type==="custom"||et.length)&&this.renderLayer(this,M[Q.source],Q,et)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:m.showOverdrawInspector?a.aT.black:a.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const H=this.style._layers[b[this.currentLayer]],Q=M[H.source],et=C[H.source];this._renderTileClippingMasks(H,et),this.renderLayer(this,Q,H,et)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const H=this.style._layers[b[this.currentLayer]],Q=M[H.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(H))continue;const et=(H.type==="symbol"?j:N)[H.source];this._renderTileClippingMasks(H,C[H.source]),this.renderLayer(this,Q,H,et)}if(this.options.showTileBoundaries){const H=(function(Q,et){let rt=null;const pt=Object.values(Q._layers).flatMap((Pt=>Pt.source&&!Pt.isHidden(et)?[Q.sourceCaches[Pt.source]]:[])),Ot=pt.filter((Pt=>Pt.getSource().type==="vector")),kt=pt.filter((Pt=>Pt.getSource().type!=="vector")),Rt=Pt=>{(!rt||rt.getSource().maxzoom<Pt.getSource().maxzoom)&&(rt=Pt)};return Ot.forEach((Pt=>Rt(Pt))),rt||kt.forEach((Pt=>Rt(Pt))),rt})(this.style,this.transform.zoom);H&&(function(Q,et,rt){for(let pt=0;pt<rt.length;pt++)yh(Q,et,rt[pt])})(this,H,H.getVisibleCoordinates())}this.options.showPadding&&(function(H){const Q=H.transform.padding;Eo(H,H.transform.height-(Q.top||0),3,bu),Eo(H,Q.bottom||0,3,Cl),ac(H,Q.left||0,3,Kl),ac(H,H.transform.width-(Q.right||0),3,gh);const et=H.transform.centerPoint;(function(rt,pt,Ot,kt){Ql(rt,pt-1,Ot-10,2,20,kt),Ql(rt,pt-10,Ot-1,20,2,kt)})(H,et.x,H.transform.height-et.y,io)})(this),this.context.setDefault()}renderLayer(u,m,b,M){if(!b.isHidden(this.transform.zoom)&&(b.type==="background"||b.type==="custom"||(M||[]).length))switch(this.id=b.id,b.type){case"symbol":(function(C,N,j,H,Q){if(C.renderPass!=="translucent")return;const et=Xi.disabled,rt=C.colorModeForRenderPass();(j._unevaluatedLayout.hasValue("text-variable-anchor")||j._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(pt,Ot,kt,Rt,Pt,Qt,fe){const Vt=Ot.transform,te=Pt==="map",me=Qt==="map";for(const xe of pt){const Pe=Rt.getTile(xe),Ve=Pe.getBucket(kt);if(!Ve||!Ve.text||!Ve.text.segments.get().length)continue;const ze=a.ah(Ve.textSizeData,Vt.zoom),qe=Wt(Pe,1,Ot.transform.zoom),dn=Fe(xe.posMatrix,me,te,Ot.transform,qe),ai=kt.layout.get("icon-text-fit")!=="none"&&Ve.hasIconData();if(ze){const Ye=Math.pow(2,Vt.zoom-Pe.tileID.overscaledZ);ec(Ve,te,me,fe,Vt,dn,xe.posMatrix,Ye,ze,ai,Ot.style.map.terrain?(vn,pn)=>Ot.style.map.terrain.getElevation(xe,vn,pn):null)}}})(H,C,j,N,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),Q),j.paint.get("icon-opacity").constantOr(1)!==0&&tl(C,N,j,H,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),et,rt),j.paint.get("text-opacity").constantOr(1)!==0&&tl(C,N,j,H,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),et,rt),N.map.showCollisionBoxes&&(Ju(C,N,j,H,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),Ju(C,N,j,H,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))})(u,m,b,M,this.style.placement.variableOffsets);break;case"circle":(function(C,N,j,H){if(C.renderPass!=="translucent")return;const Q=j.paint.get("circle-opacity"),et=j.paint.get("circle-stroke-width"),rt=j.paint.get("circle-stroke-opacity"),pt=!j.layout.get("circle-sort-key").isConstant();if(Q.constantOr(1)===0&&(et.constantOr(1)===0||rt.constantOr(1)===0))return;const Ot=C.context,kt=Ot.gl,Rt=C.depthModeForSublayer(0,Kn.ReadOnly),Pt=Xi.disabled,Qt=C.colorModeForRenderPass(),fe=[];for(let Vt=0;Vt<H.length;Vt++){const te=H[Vt],me=N.getTile(te),xe=me.getBucket(j);if(!xe)continue;const Pe=xe.programConfigurations.get(j.id),Ve=C.useProgram("circle",Pe),ze=xe.layoutVertexBuffer,qe=xe.indexBuffer,dn=C.style.map.terrain&&C.style.map.terrain.getTerrainData(te),ai={programConfiguration:Pe,program:Ve,layoutVertexBuffer:ze,indexBuffer:qe,uniformValues:At(C,te,me,j),terrainData:dn};if(pt){const Ye=xe.segments.get();for(const vn of Ye)fe.push({segments:new a.S([vn]),sortKey:vn.sortKey,state:ai})}else fe.push({segments:xe.segments,sortKey:0,state:ai})}pt&&fe.sort(((Vt,te)=>Vt.sortKey-te.sortKey));for(const Vt of fe){const{programConfiguration:te,program:me,layoutVertexBuffer:xe,indexBuffer:Pe,uniformValues:Ve,terrainData:ze}=Vt.state;me.draw(Ot,kt.TRIANGLES,Rt,Pt,Qt,Li.disabled,Ve,ze,j.id,xe,Pe,Vt.segments,j.paint,C.transform.zoom,te)}})(u,m,b,M);break;case"heatmap":(function(C,N,j,H){if(j.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){const Q=C.context,et=Q.gl,rt=Xi.disabled,pt=new zi([et.ONE,et.ONE],a.aT.transparent,[!0,!0,!0,!0]);(function(Ot,kt,Rt){const Pt=Ot.gl;Ot.activeTexture.set(Pt.TEXTURE1),Ot.viewport.set([0,0,kt.width/4,kt.height/4]);let Qt=Rt.heatmapFbo;if(Qt)Pt.bindTexture(Pt.TEXTURE_2D,Qt.colorAttachment.get()),Ot.bindFramebuffer.set(Qt.framebuffer);else{const fe=Pt.createTexture();Pt.bindTexture(Pt.TEXTURE_2D,fe),Pt.texParameteri(Pt.TEXTURE_2D,Pt.TEXTURE_WRAP_S,Pt.CLAMP_TO_EDGE),Pt.texParameteri(Pt.TEXTURE_2D,Pt.TEXTURE_WRAP_T,Pt.CLAMP_TO_EDGE),Pt.texParameteri(Pt.TEXTURE_2D,Pt.TEXTURE_MIN_FILTER,Pt.LINEAR),Pt.texParameteri(Pt.TEXTURE_2D,Pt.TEXTURE_MAG_FILTER,Pt.LINEAR),Qt=Rt.heatmapFbo=Ot.createFramebuffer(kt.width/4,kt.height/4,!1,!1),(function(Vt,te,me,xe){var Pe,Ve;const ze=Vt.gl,qe=(Pe=Vt.HALF_FLOAT)!==null&&Pe!==void 0?Pe:ze.UNSIGNED_BYTE,dn=(Ve=Vt.RGBA16F)!==null&&Ve!==void 0?Ve:ze.RGBA;ze.texImage2D(ze.TEXTURE_2D,0,dn,te.width/4,te.height/4,0,ze.RGBA,qe,null),xe.colorAttachment.set(me)})(Ot,kt,fe,Qt)}})(Q,C,j),Q.clear({color:a.aT.transparent});for(let Ot=0;Ot<H.length;Ot++){const kt=H[Ot];if(N.hasRenderableParent(kt))continue;const Rt=N.getTile(kt),Pt=Rt.getBucket(j);if(!Pt)continue;const Qt=Pt.programConfigurations.get(j.id),fe=C.useProgram("heatmap",Qt),{zoom:Vt}=C.transform;fe.draw(Q,et.TRIANGLES,Kn.disabled,rt,pt,Li.disabled,cn(kt.posMatrix,Rt,Vt,j.paint.get("heatmap-intensity")),null,j.id,Pt.layoutVertexBuffer,Pt.indexBuffer,Pt.segments,j.paint,C.transform.zoom,Qt)}Q.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),(function(Q,et){const rt=Q.context,pt=rt.gl,Ot=et.heatmapFbo;if(!Ot)return;rt.activeTexture.set(pt.TEXTURE0),pt.bindTexture(pt.TEXTURE_2D,Ot.colorAttachment.get()),rt.activeTexture.set(pt.TEXTURE1);let kt=et.colorRampTexture;kt||(kt=et.colorRampTexture=new xt(rt,et.colorRamp,pt.RGBA)),kt.bind(pt.LINEAR,pt.CLAMP_TO_EDGE),Q.useProgram("heatmapTexture").draw(rt,pt.TRIANGLES,Kn.disabled,Xi.disabled,Q.colorModeForRenderPass(),Li.disabled,((Rt,Pt,Qt,fe)=>{const Vt=a.Z();a.aS(Vt,0,Rt.width,Rt.height,0,0,1);const te=Rt.context.gl;return{u_matrix:Vt,u_world:[te.drawingBufferWidth,te.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Pt.paint.get("heatmap-opacity")}})(Q,et),null,et.id,Q.viewportBuffer,Q.quadTriangleIndexBuffer,Q.viewportSegments,et.paint,Q.transform.zoom)})(C,j))})(u,m,b,M);break;case"line":(function(C,N,j,H){if(C.renderPass!=="translucent")return;const Q=j.paint.get("line-opacity"),et=j.paint.get("line-width");if(Q.constantOr(1)===0||et.constantOr(1)===0)return;const rt=C.depthModeForSublayer(0,Kn.ReadOnly),pt=C.colorModeForRenderPass(),Ot=j.paint.get("line-dasharray"),kt=j.paint.get("line-pattern"),Rt=kt.constantOr(1),Pt=j.paint.get("line-gradient"),Qt=j.getCrossfadeParameters(),fe=Rt?"linePattern":Ot?"lineSDF":Pt?"lineGradient":"line",Vt=C.context,te=Vt.gl;let me=!0;for(const xe of H){const Pe=N.getTile(xe);if(Rt&&!Pe.patternsLoaded())continue;const Ve=Pe.getBucket(j);if(!Ve)continue;const ze=Ve.programConfigurations.get(j.id),qe=C.context.program.get(),dn=C.useProgram(fe,ze),ai=me||dn.program!==qe,Ye=C.style.map.terrain&&C.style.map.terrain.getTerrainData(xe),vn=kt.constantOr(null);if(vn&&Pe.imageAtlas){const Zn=Pe.imageAtlas,Fn=Zn.patternPositions[vn.to.toString()],ei=Zn.patternPositions[vn.from.toString()];Fn&&ei&&ze.setConstantPatternPositions(Fn,ei)}const pn=Ye?xe:null,Vi=Rt?Tr(C,Pe,j,Qt,pn):Ot?fr(C,Pe,j,Ot,Qt,pn):Pt?Sr(C,Pe,j,Ve.lineClipsArray.length,pn):sr(C,Pe,j,pn);if(Rt)Vt.activeTexture.set(te.TEXTURE0),Pe.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),ze.updatePaintBuffers(Qt);else if(Ot&&(ai||C.lineAtlas.dirty))Vt.activeTexture.set(te.TEXTURE0),C.lineAtlas.bind(Vt);else if(Pt){const Zn=Ve.gradients[j.id];let Fn=Zn.texture;if(j.gradientVersion!==Zn.version){let ei=256;if(j.stepInterpolant){const dr=N.getSource().maxzoom,Zi=xe.canonical.z===dr?Math.ceil(1<<C.transform.maxZoom-xe.canonical.z):1;ei=a.ad(a.aY(Ve.maxLineLength/a.N*1024*Zi),256,Vt.maxTextureSize)}Zn.gradient=a.aZ({expression:j.gradientExpression(),evaluationKey:"lineProgress",resolution:ei,image:Zn.gradient||void 0,clips:Ve.lineClipsArray}),Zn.texture?Zn.texture.update(Zn.gradient):Zn.texture=new xt(Vt,Zn.gradient,te.RGBA),Zn.version=j.gradientVersion,Fn=Zn.texture}Vt.activeTexture.set(te.TEXTURE0),Fn.bind(j.stepInterpolant?te.NEAREST:te.LINEAR,te.CLAMP_TO_EDGE)}dn.draw(Vt,te.TRIANGLES,rt,C.stencilModeForClipping(xe),pt,Li.disabled,Vi,Ye,j.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,j.paint,C.transform.zoom,ze,Ve.layoutVertexBuffer2),me=!1}})(u,m,b,M);break;case"fill":(function(C,N,j,H){const Q=j.paint.get("fill-color"),et=j.paint.get("fill-opacity");if(et.constantOr(1)===0)return;const rt=C.colorModeForRenderPass(),pt=j.paint.get("fill-pattern"),Ot=C.opaquePassEnabledForLayer()&&!pt.constantOr(1)&&Q.constantOr(a.aT.transparent).a===1&&et.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===Ot){const kt=C.depthModeForSublayer(1,C.renderPass==="opaque"?Kn.ReadWrite:Kn.ReadOnly);ic(C,N,j,H,kt,rt,!1)}if(C.renderPass==="translucent"&&j.paint.get("fill-antialias")){const kt=C.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,Kn.ReadOnly);ic(C,N,j,H,kt,rt,!0)}})(u,m,b,M);break;case"fill-extrusion":(function(C,N,j,H){const Q=j.paint.get("fill-extrusion-opacity");if(Q!==0&&C.renderPass==="translucent"){const et=new Kn(C.context.gl.LEQUAL,Kn.ReadWrite,C.depthRangeFor3D);if(Q!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))cs(C,N,j,H,et,Xi.disabled,zi.disabled),cs(C,N,j,H,et,C.stencilModeFor3D(),C.colorModeForRenderPass());else{const rt=C.colorModeForRenderPass();cs(C,N,j,H,et,Xi.disabled,rt)}}})(u,m,b,M);break;case"hillshade":(function(C,N,j,H){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const Q=C.context,et=C.depthModeForSublayer(0,Kn.ReadOnly),rt=C.colorModeForRenderPass(),[pt,Ot]=C.renderPass==="translucent"?C.stencilConfigForOverlap(H):[{},H];for(const kt of Ot){const Rt=N.getTile(kt);Rt.needsHillshadePrepare!==void 0&&Rt.needsHillshadePrepare&&C.renderPass==="offscreen"?Us(C,Rt,j,et,Xi.disabled,rt):C.renderPass==="translucent"&&mf(C,kt,Rt,j,et,pt[kt.overscaledZ],rt)}Q.viewport.set([0,0,C.width,C.height])})(u,m,b,M);break;case"raster":(function(C,N,j,H){if(C.renderPass!=="translucent"||j.paint.get("raster-opacity")===0||!H.length)return;const Q=C.context,et=Q.gl,rt=N.getSource(),pt=C.useProgram("raster"),Ot=C.colorModeForRenderPass(),[kt,Rt]=rt instanceof Ce?[{},H]:C.stencilConfigForOverlap(H),Pt=Rt[Rt.length-1].overscaledZ,Qt=!C.options.moving;for(const fe of Rt){const Vt=C.depthModeForSublayer(fe.overscaledZ-Pt,j.paint.get("raster-opacity")===1?Kn.ReadWrite:Kn.ReadOnly,et.LESS),te=N.getTile(fe);te.registerFadeDuration(j.paint.get("raster-fade-duration"));const me=N.findLoadedParent(fe,0),xe=rc(te,me,N,j,C.transform,C.style.map.terrain);let Pe,Ve;const ze=j.paint.get("raster-resampling")==="nearest"?et.NEAREST:et.LINEAR;Q.activeTexture.set(et.TEXTURE0),te.texture.bind(ze,et.CLAMP_TO_EDGE,et.LINEAR_MIPMAP_NEAREST),Q.activeTexture.set(et.TEXTURE1),me?(me.texture.bind(ze,et.CLAMP_TO_EDGE,et.LINEAR_MIPMAP_NEAREST),Pe=Math.pow(2,me.tileID.overscaledZ-te.tileID.overscaledZ),Ve=[te.tileID.canonical.x*Pe%1,te.tileID.canonical.y*Pe%1]):te.texture.bind(ze,et.CLAMP_TO_EDGE,et.LINEAR_MIPMAP_NEAREST);const qe=C.style.map.terrain&&C.style.map.terrain.getTerrainData(fe),dn=qe?fe:null,ai=dn?dn.posMatrix:C.transform.calculatePosMatrix(fe.toUnwrapped(),Qt),Ye=Zl(ai,Ve||[0,0],Pe||1,xe,j);rt instanceof Ce?pt.draw(Q,et.TRIANGLES,Vt,Xi.disabled,Ot,Li.disabled,Ye,qe,j.id,rt.boundsBuffer,C.quadTriangleIndexBuffer,rt.boundsSegments):pt.draw(Q,et.TRIANGLES,Vt,kt[fe.overscaledZ],Ot,Li.disabled,Ye,qe,j.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}})(u,m,b,M);break;case"background":(function(C,N,j,H){const Q=j.paint.get("background-color"),et=j.paint.get("background-opacity");if(et===0)return;const rt=C.context,pt=rt.gl,Ot=C.transform,kt=Ot.tileSize,Rt=j.paint.get("background-pattern");if(C.isPatternMissing(Rt))return;const Pt=!Rt&&Q.a===1&&et===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==Pt)return;const Qt=Xi.disabled,fe=C.depthModeForSublayer(0,Pt==="opaque"?Kn.ReadWrite:Kn.ReadOnly),Vt=C.colorModeForRenderPass(),te=C.useProgram(Rt?"backgroundPattern":"background"),me=H||Ot.coveringTiles({tileSize:kt,terrain:C.style.map.terrain});Rt&&(rt.activeTexture.set(pt.TEXTURE0),C.imageManager.bind(C.context));const xe=j.getCrossfadeParameters();for(const Pe of me){const Ve=H?Pe.posMatrix:C.transform.calculatePosMatrix(Pe.toUnwrapped()),ze=Rt?Mr(Ve,et,C,Rt,{tileID:Pe,tileSize:kt},xe):bo(Ve,et,Q),qe=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Pe);te.draw(rt,pt.TRIANGLES,fe,Qt,Vt,Li.disabled,ze,qe,j.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}})(u,0,b,M);break;case"custom":(function(C,N,j){const H=C.context,Q=j.implementation;if(C.renderPass==="offscreen"){const et=Q.prerender;et&&(C.setCustomLayerDefaults(),H.setColorMode(C.colorModeForRenderPass()),et.call(Q,H.gl,C.transform.customLayerMatrix()),H.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),H.setColorMode(C.colorModeForRenderPass()),H.setStencilMode(Xi.disabled);const et=Q.renderingMode==="3d"?new Kn(C.context.gl.LEQUAL,Kn.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,Kn.ReadOnly);H.setDepthMode(et),Q.render(H.gl,C.transform.customLayerMatrix()),H.setDirty(),C.setBaseState(),H.bindFramebuffer.set(null)}})(u,0,b)}}translatePosMatrix(u,m,b,M,C){if(!b[0]&&!b[1])return u;const N=C?M==="map"?this.transform.angle:0:M==="viewport"?-this.transform.angle:0;if(N){const Q=Math.sin(N),et=Math.cos(N);b=[b[0]*et-b[1]*Q,b[0]*Q+b[1]*et]}const j=[C?b[0]:Wt(m,b[0],this.transform.zoom),C?b[1]:Wt(m,b[1],this.transform.zoom),0],H=new Float32Array(16);return a.$(H,u,j),H}saveTileTexture(u){const m=this._tileTextures[u.size[0]];m?m.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const m=this._tileTextures[u];return m&&m.length>0?m.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const m=this.imageManager.getPattern(u.from.toString()),b=this.imageManager.getPattern(u.to.toString());return!m||!b}useProgram(u,m){this.cache=this.cache||{};const b=u+(m?m.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[b]||(this.cache[b]=new la(this.context,_i[u],m,Ml[u],this._showOverdrawInspector,this.style.map.terrain)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new xt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:m}=this.context.gl;return this.width!==u||this.height!==m}}class Wr{constructor(u,m){this.points=u,this.planes=m}static fromInvProjectionMatrix(u,m,b){const M=Math.pow(2,b),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((j=>{const H=1/(j=a.ag([],j,u))[3]/m*M;return a.b3(j,j,[H,H,1/j[3],H])})),N=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((j=>{const H=(function(pt,Ot){var kt=Ot[0],Rt=Ot[1],Pt=Ot[2],Qt=kt*kt+Rt*Rt+Pt*Pt;return Qt>0&&(Qt=1/Math.sqrt(Qt)),pt[0]=Ot[0]*Qt,pt[1]=Ot[1]*Qt,pt[2]=Ot[2]*Qt,pt})([],(function(pt,Ot,kt){var Rt=Ot[0],Pt=Ot[1],Qt=Ot[2],fe=kt[0],Vt=kt[1],te=kt[2];return pt[0]=Pt*te-Qt*Vt,pt[1]=Qt*fe-Rt*te,pt[2]=Rt*Vt-Pt*fe,pt})([],st([],C[j[0]],C[j[1]]),st([],C[j[2]],C[j[1]]))),Q=-((et=H)[0]*(rt=C[j[1]])[0]+et[1]*rt[1]+et[2]*rt[2]);var et,rt;return H.concat(Q)}));return new Wr(C,N)}}class wu{constructor(u,m){this.min=u,this.max=m,this.center=(function(b,M,C){return b[0]=.5*M[0],b[1]=.5*M[1],b[2]=.5*M[2],b})([],(function(b,M,C){return b[0]=M[0]+C[0],b[1]=M[1]+C[1],b[2]=M[2]+C[2],b})([],this.min,this.max))}quadrant(u){const m=[u%2==0,u<2],b=X(this.min),M=X(this.max);for(let C=0;C<m.length;C++)b[C]=m[C]?this.min[C]:this.center[C],M[C]=m[C]?this.center[C]:this.max[C];return M[2]=this.max[2],new wu(b,M)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const m=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let b=!0;for(let M=0;M<u.planes.length;M++){const C=u.planes[M];let N=0;for(let j=0;j<m.length;j++)a.b4(C,m[j])>=0&&N++;if(N===0)return 0;N!==m.length&&(b=!1)}if(b)return 2;for(let M=0;M<3;M++){let C=Number.MAX_VALUE,N=-Number.MAX_VALUE;for(let j=0;j<u.points.length;j++){const H=u.points[j][M]-this.min[M];C=Math.min(C,H),N=Math.max(N,H)}if(N<0||C>this.max[M]-this.min[M])return 0}return 1}}class Es{constructor(u=0,m=0,b=0,M=0){if(isNaN(u)||u<0||isNaN(m)||m<0||isNaN(b)||b<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=m,this.left=b,this.right=M}interpolate(u,m,b){return m.top!=null&&u.top!=null&&(this.top=a.B.number(u.top,m.top,b)),m.bottom!=null&&u.bottom!=null&&(this.bottom=a.B.number(u.bottom,m.bottom,b)),m.left!=null&&u.left!=null&&(this.left=a.B.number(u.left,m.left,b)),m.right!=null&&u.right!=null&&(this.right=a.B.number(u.right,m.right,b)),this}getCenter(u,m){const b=a.ad((this.left+u-this.right)/2,0,u),M=a.ad((this.top+m-this.bottom)/2,0,m);return new a.P(b,M)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new Es(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Xr{constructor(u,m,b,M,C){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=C===void 0||!!C,this._minZoom=u||0,this._maxZoom=m||22,this._minPitch=b??0,this._maxPitch=M??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Es,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const u=new Xr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.apply(this),u}apply(u){this.tileSize=u.tileSize,this.latRange=u.latRange,this.width=u.width,this.height=u.height,this._center=u._center,this._elevation=u._elevation,this._minEleveationForCurrentTile=u._minEleveationForCurrentTile,this.zoom=u.zoom,this.angle=u.angle,this._fov=u._fov,this._pitch=u._pitch,this._unmodified=u._unmodified,this._edgeInsets=u._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const m=-a.b5(u,-180,180)*Math.PI/180;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=(function(){var b=new a.A(4);return a.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b})(),(function(b,M,C){var N=M[0],j=M[1],H=M[2],Q=M[3],et=Math.sin(C),rt=Math.cos(C);b[0]=N*rt+H*et,b[1]=j*rt+Q*et,b[2]=N*-et+H*rt,b[3]=j*-et+Q*rt})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const m=a.ad(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const m=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._zoom=m,this.tileZoom=Math.max(0,Math.floor(m)),this.scale=this.zoomScale(m),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,m,b){this._unmodified=!1,this._edgeInsets.interpolate(u,m,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const m=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(u){const m=[new a.b6(0,u)];if(this._renderWorldCopies){const b=this.pointCoordinate(new a.P(0,0)),M=this.pointCoordinate(new a.P(this.width,0)),C=this.pointCoordinate(new a.P(this.width,this.height)),N=this.pointCoordinate(new a.P(0,this.height)),j=Math.floor(Math.min(b.x,M.x,C.x,N.x)),H=Math.floor(Math.max(b.x,M.x,C.x,N.x)),Q=1;for(let et=j-Q;et<=H+Q;et++)et!==0&&m.push(new a.b6(et,u))}return m}coveringTiles(u){var m,b;let M=this.coveringZoomLevel(u);const C=M;if(u.minzoom!==void 0&&M<u.minzoom)return[];u.maxzoom!==void 0&&M>u.maxzoom&&(M=u.maxzoom);const N=this.pointCoordinate(this.getCameraPoint()),j=a.U.fromLngLat(this.center),H=Math.pow(2,M),Q=[H*N.x,H*N.y,0],et=[H*j.x,H*j.y,0],rt=Wr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,M);let pt=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(pt=M);const Ot=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,kt=Vt=>({aabb:new wu([Vt*H,0,0],[(Vt+1)*H,H,0]),zoom:0,x:0,y:0,wrap:Vt,fullyVisible:!1}),Rt=[],Pt=[],Qt=M,fe=u.reparseOverscaled?C:M;if(this._renderWorldCopies)for(let Vt=1;Vt<=3;Vt++)Rt.push(kt(-Vt)),Rt.push(kt(Vt));for(Rt.push(kt(0));Rt.length>0;){const Vt=Rt.pop(),te=Vt.x,me=Vt.y;let xe=Vt.fullyVisible;if(!xe){const dn=Vt.aabb.intersects(rt);if(dn===0)continue;xe=dn===2}const Pe=u.terrain?Q:et,Ve=Vt.aabb.distanceX(Pe),ze=Vt.aabb.distanceY(Pe),qe=Math.max(Math.abs(Ve),Math.abs(ze));if(Vt.zoom===Qt||qe>Ot+(1<<Qt-Vt.zoom)-2&&Vt.zoom>=pt){const dn=Qt-Vt.zoom,ai=Q[0]-.5-(te<<dn),Ye=Q[1]-.5-(me<<dn);Pt.push({tileID:new a.O(Vt.zoom===Qt?fe:Vt.zoom,Vt.wrap,Vt.zoom,te,me),distanceSq:ct([et[0]-.5-te,et[1]-.5-me]),tileDistanceToCamera:Math.sqrt(ai*ai+Ye*Ye)})}else for(let dn=0;dn<4;dn++){const ai=(te<<1)+dn%2,Ye=(me<<1)+(dn>>1),vn=Vt.zoom+1;let pn=Vt.aabb.quadrant(dn);if(u.terrain){const Vi=new a.O(vn,Vt.wrap,vn,ai,Ye),Zn=u.terrain.getMinMaxElevation(Vi),Fn=(m=Zn.minElevation)!==null&&m!==void 0?m:this.elevation,ei=(b=Zn.maxElevation)!==null&&b!==void 0?b:this.elevation;pn=new wu([pn.min[0],pn.min[1],Fn],[pn.max[0],pn.max[1],ei])}Rt.push({aabb:pn,zoom:vn,x:ai,y:Ye,wrap:Vt.wrap,fullyVisible:xe})}}return Pt.sort(((Vt,te)=>Vt.distanceSq-te.distanceSq)).map((Vt=>Vt.tileID))}resize(u,m){this.width=u,this.height=m,this.pixelsToGLUnits=[2/u,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const m=a.ad(u.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.P(a.G(u.lng)*this.worldSize,a.H(m)*this.worldSize)}unproject(u){return new a.U(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const m=this.pointLocation(this.centerPoint,u),b=u.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-b))return;const M=this.getCameraPosition(),C=a.U.fromLngLat(M.lngLat,M.altitude),N=a.U.fromLngLat(m,b),j=C.x-N.x,H=C.y-N.y,Q=C.z-N.z,et=Math.sqrt(j*j+H*H+Q*Q),rt=this.scaleZoom(this.cameraToCenterDistance/et/this.tileSize);this._elevation=b,this._center=m,this.zoom=rt}setLocationAtPoint(u,m){const b=this.pointCoordinate(m),M=this.pointCoordinate(this.centerPoint),C=this.locationCoordinate(u),N=new a.U(C.x-(b.x-M.x),C.y-(b.y-M.y));this.center=this.coordinateLocation(N),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,m){return m?this.coordinatePoint(this.locationCoordinate(u),m.getElevationForLngLatZoom(u,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,m){return this.coordinateLocation(this.pointCoordinate(u,m))}locationCoordinate(u){return a.U.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,m){if(m){const pt=m.pointCoordinate(u);if(pt!=null)return pt}const b=[u.x,u.y,0,1],M=[u.x,u.y,1,1];a.ag(b,b,this.pixelMatrixInverse),a.ag(M,M,this.pixelMatrixInverse);const C=b[3],N=M[3],j=b[1]/C,H=M[1]/N,Q=b[2]/C,et=M[2]/N,rt=Q===et?0:(0-Q)/(et-Q);return new a.U(a.B.number(b[0]/C,M[0]/N,rt)/this.worldSize,a.B.number(j,H,rt)/this.worldSize)}coordinatePoint(u,m=0,b=this.pixelMatrix){const M=[u.x*this.worldSize,u.y*this.worldSize,m,1];return a.ag(M,M,b),new a.P(M[0]/M[3],M[1]/M[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new Lt().extend(this.pointLocation(new a.P(0,u))).extend(this.pointLocation(new a.P(this.width,u))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Lt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(u,m=!1){const b=u.key,M=m?this._alignedPosMatrixCache:this._posMatrixCache;if(M[b])return M[b];const C=u.canonical,N=this.worldSize/this.zoomScale(C.z),j=C.x+Math.pow(2,C.z)*u.wrap,H=a.ao(new Float64Array(16));return a.$(H,H,[j*N,C.y*N,0]),a.a0(H,H,[N/a.N,N/a.N,1]),a.a1(H,m?this.alignedProjMatrix:this.projMatrix,H),M[b]=new Float32Array(H),M[b]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let u,m,b,M,C=-90,N=90,j=-180,H=180;const Q=this.size,et=this._unmodified;if(this.latRange){const Ot=this.latRange;C=a.H(Ot[1])*this.worldSize,N=a.H(Ot[0])*this.worldSize,u=N-C<Q.y?Q.y/(N-C):0}if(this.lngRange){const Ot=this.lngRange;j=a.b5(a.G(Ot[0])*this.worldSize,0,this.worldSize),H=a.b5(a.G(Ot[1])*this.worldSize,0,this.worldSize),H<j&&(H+=this.worldSize),m=H-j<Q.x?Q.x/(H-j):0}const rt=this.point,pt=Math.max(m||0,u||0);if(pt)return this.center=this.unproject(new a.P(m?(H+j)/2:rt.x,u?(N+C)/2:rt.y)),this.zoom+=this.scaleZoom(pt),this._unmodified=et,void(this._constraining=!1);if(this.latRange){const Ot=rt.y,kt=Q.y/2;Ot-kt<C&&(M=C+kt),Ot+kt>N&&(M=N-kt)}if(this.lngRange){const Ot=(j+H)/2,kt=a.b5(rt.x,Ot-this.worldSize/2,Ot+this.worldSize/2),Rt=Q.x/2;kt-Rt<j&&(b=j+Rt),kt+Rt>H&&(b=H-Rt)}b===void 0&&M===void 0||(this.center=this.unproject(new a.P(b!==void 0?b:rt.x,M!==void 0?M:rt.y)).wrap()),this._unmodified=et,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,m=this.point.x,b=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b7(1,this.center.lat)*this.worldSize;let M=a.ao(new Float64Array(16));a.a0(M,M,[this.width/2,-this.height/2,1]),a.$(M,M,[1,-1,0]),this.labelPlaneMatrix=M,M=a.ao(new Float64Array(16)),a.a0(M,M,[1,-1,1]),a.$(M,M,[-1,-1,0]),a.a0(M,M,[2/this.width,2/this.height,1]),this.glCoordMatrix=M;const C=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),N=Math.min(this.elevation,this._minEleveationForCurrentTile),j=C-N*this._pixelPerMeter/Math.cos(this._pitch),H=N<0?j:C,Q=Math.PI/2+this._pitch,et=this._fov*(.5+u.y/this.height),rt=Math.sin(et)*H/Math.sin(a.ad(Math.PI-Q-et,.01,Math.PI-.01)),pt=this.getHorizon(),Ot=2*Math.atan(pt/this.cameraToCenterDistance)*(.5+u.y/(2*pt)),kt=Math.sin(Ot)*H/Math.sin(a.ad(Math.PI-Q-Ot,.01,Math.PI-.01)),Rt=Math.min(rt,kt),Pt=1.01*(Math.cos(Math.PI/2-this._pitch)*Rt+H),Qt=this.height/50;M=new Float64Array(16),a.b8(M,this._fov,this.width/this.height,Qt,Pt),M[8]=2*-u.x/this.width,M[9]=2*u.y/this.height,a.a0(M,M,[1,-1,1]),a.$(M,M,[0,0,-this.cameraToCenterDistance]),a.b9(M,M,this._pitch),a.ae(M,M,this.angle),a.$(M,M,[-m,-b,0]),this.mercatorMatrix=a.a0([],M,[this.worldSize,this.worldSize,this.worldSize]),a.a0(M,M,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.a1(new Float64Array(16),this.labelPlaneMatrix,M),a.$(M,M,[0,0,-this.elevation]),this.projMatrix=M,this.invProjMatrix=a.as([],M),this.pixelMatrix3D=a.a1(new Float64Array(16),this.labelPlaneMatrix,M);const fe=this.width%2/2,Vt=this.height%2/2,te=Math.cos(this.angle),me=Math.sin(this.angle),xe=m-Math.round(m)+te*fe+me*Vt,Pe=b-Math.round(b)+te*Vt+me*fe,Ve=new Float64Array(M);if(a.$(Ve,Ve,[xe>.5?xe-1:xe,Pe>.5?Pe-1:Pe,0]),this.alignedProjMatrix=Ve,M=a.as(new Float64Array(16),this.pixelMatrix),!M)throw new Error("failed to invert matrix");this.pixelMatrixInverse=M,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new a.P(0,0)),m=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.ag(m,m,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,u))}getCameraQueryGeometry(u){const m=this.getCameraPoint();if(u.length===1)return[u[0],m];{let b=m.x,M=m.y,C=m.x,N=m.y;for(const j of u)b=Math.min(b,j.x),M=Math.min(M,j.y),C=Math.max(C,j.x),N=Math.max(N,j.y);return[new a.P(b,M),new a.P(C,M),new a.P(C,N),new a.P(b,N),new a.P(b,M)]}}}function Vs(A,u){let m,b=!1,M=null,C=null;const N=()=>{M=null,b&&(A.apply(C,m),M=setTimeout(N,u),b=!1)};return(...j)=>(b=!0,C=this,m=j,M||N(),M)}class Pl{constructor(u){this._getCurrentHash=()=>{const m=window.location.hash.replace("#","");if(this._hashName){let b;return m.split("&").map((M=>M.split("="))).forEach((M=>{M[0]===this._hashName&&(b=M)})),(b&&b[1]||"").split("/")}return m.split("/")},this._onHashChange=()=>{const m=this._getCurrentHash();if(m.length>=3&&!m.some((b=>isNaN(b)))){const b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:b,pitch:+(m[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const m=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,m)}catch{}},this._updateHash=Vs(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const m=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,M=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,M),N=Math.round(m.lng*C)/C,j=Math.round(m.lat*C)/C,H=this._map.getBearing(),Q=this._map.getPitch();let et="";if(et+=u?`/${N}/${j}/${b}`:`${b}/${j}/${N}`,(H||Q)&&(et+="/"+Math.round(10*H)/10),Q&&(et+=`/${Math.round(Q)}`),this._hashName){const rt=this._hashName;let pt=!1;const Ot=window.location.hash.slice(1).split("&").map((kt=>{const Rt=kt.split("=")[0];return Rt===rt?(pt=!0,`${Rt}=${et}`):kt})).filter((kt=>kt));return pt||Ot.push(`${rt}=${et}`),`#${Ot.join("&")}`}return`#${et}`}}const Ao={linearity:.3,easing:a.ba(0,0,.3,1)},sc=a.e({deceleration:2500,maxSpeed:1400},Ao),Su=a.e({deceleration:20,maxSpeed:1400},Ao),el=a.e({deceleration:1e3,maxSpeed:360},Ao),oc=a.e({deceleration:1e3,maxSpeed:90},Ao);class nl{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.h.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,m=a.h.now();for(;u.length>0&&m-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const m={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)m.zoom+=C.zoomDelta||0,m.bearing+=C.bearingDelta||0,m.pitch+=C.pitchDelta||0,C.panDelta&&m.pan._add(C.panDelta),C.around&&(m.around=C.around),C.pinchAround&&(m.pinchAround=C.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(m.pan.mag()){const C=il(m.pan.mag(),b,a.e({},sc,u||{}));M.offset=m.pan.mult(C.amount/m.pan.mag()),M.center=this._map.transform.center,As(M,C)}if(m.zoom){const C=il(m.zoom,b,Su);M.zoom=this._map.transform.zoom+C.amount,As(M,C)}if(m.bearing){const C=il(m.bearing,b,el);M.bearing=this._map.transform.bearing+a.ad(C.amount,-179,179),As(M,C)}if(m.pitch){const C=il(m.pitch,b,oc);M.pitch=this._map.transform.pitch+C.amount,As(M,C)}if(M.zoom||M.bearing){const C=m.pinchAround===void 0?m.around:m.pinchAround;M.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),a.e(M,{noMoveStart:!0})}}function As(A,u){(!A.duration||A.duration<u.duration)&&(A.duration=u.duration,A.easing=u.easing)}function il(A,u,m){const{maxSpeed:b,linearity:M,deceleration:C}=m,N=a.ad(A*M/(u/1e3),-b,b),j=Math.abs(N)/(C*M);return{easing:m.easing,duration:1e3*j,amount:N*(j/2)}}class ca extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b,M={}){const C=y.mousePos(m.getCanvasContainer(),b),N=m.unproject(C);super(u,a.e({point:C,lngLat:N,originalEvent:b},M)),this._defaultPrevented=!1,this.target=m}}class Tu extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b){const M=u==="touchend"?b.changedTouches:b.touches,C=y.touchPos(m.getCanvasContainer(),M),N=C.map((H=>m.unproject(H))),j=C.reduce(((H,Q,et,rt)=>H.add(Q.div(rt.length))),new a.P(0,0));super(u,{points:C,point:j,lngLats:N,lngLat:m.unproject(j),originalEvent:b}),this._defaultPrevented=!1}}class rl extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,b){super(u,{originalEvent:b}),this._defaultPrevented=!1}}class tu{constructor(u,m){this._map=u,this._clickTolerance=m.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new rl(u.type,this._map,u))}mousedown(u,m){return this._mousedownPos=m,this._firePreventable(new ca(u.type,this._map,u))}mouseup(u){this._map.fire(new ca(u.type,this._map,u))}click(u,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new ca(u.type,this._map,u))}dblclick(u){return this._firePreventable(new ca(u.type,this._map,u))}mouseover(u){this._map.fire(new ca(u.type,this._map,u))}mouseout(u){this._map.fire(new ca(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Tu(u.type,this._map,u))}touchmove(u){this._map.fire(new Tu(u.type,this._map,u))}touchend(u){this._map.fire(new Tu(u.type,this._map,u))}touchcancel(u){this._map.fire(new Tu(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class lc{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new ca(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ca("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new ca(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class al{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.pointLocation(a.P.convert(u),this._map.terrain)}}class va{constructor(u,m){this._map=u,this._tr=new al(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,m){this.isEnabled()&&u.shiftKey&&u.button===0&&(y.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(u,m){if(!this._active)return;const b=m;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=b,this._box||(this._box=y.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const C=Math.min(M.x,b.x),N=Math.max(M.x,b.x),j=Math.min(M.y,b.y),H=Math.max(M.y,b.y);y.setTransform(this._box,`translate(${C}px,${j}px)`),this._box.style.width=N-C+"px",this._box.style.height=H-j+"px"}mouseupWindow(u,m){if(!this._active||u.button!==0)return;const b=this._startPos,M=m;if(this.reset(),y.suppressClick(),b.x!==M.x||b.y!==M.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:u})),{cameraAnimation:C=>C.fitScreenCoordinates(b,M,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,m){return this._map.fire(new a.k(u,{originalEvent:m}))}}function za(A,u){if(A.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${A.length}, points ${u.length}`);const m={};for(let b=0;b<A.length;b++)m[A[b].identifier]=u[b];return m}class Co{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,m,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),b.length===this.numTouches&&(this.centroid=(function(M){const C=new a.P(0,0);for(const N of M)C._add(N);return C.div(M.length)})(m),this.touches=za(b,m)))}touchmove(u,m,b){if(this.aborted||!this.centroid)return;const M=za(b,m);for(const C in this.touches){const N=M[C];(!N||N.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(u,m,b){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class kl{constructor(u){this.singleTap=new Co(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,m,b){this.singleTap.touchstart(u,m,b)}touchmove(u,m,b){this.singleTap.touchmove(u,m,b)}touchend(u,m,b){const M=this.singleTap.touchend(u,m,b);if(M){const C=u.timeStamp-this.lastTime<500,N=!this.lastTap||this.lastTap.dist(M)<30;if(C&&N||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class sl{constructor(u){this._tr=new al(u),this._zoomIn=new kl({numTouches:1,numTaps:2}),this._zoomOut=new kl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,m,b){this._zoomIn.touchstart(u,m,b),this._zoomOut.touchstart(u,m,b)}touchmove(u,m,b){this._zoomIn.touchmove(u,m,b),this._zoomOut.touchmove(u,m,b)}touchend(u,m,b){const M=this._zoomIn.touchend(u,m,b),C=this._zoomOut.touchend(u,m,b),N=this._tr;return M?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:N.zoom+1,around:N.unproject(M)},{originalEvent:u})}):C?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:N.zoom-1,around:N.unproject(C)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Po{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const m=this._moveFunction(...u);if(m.bearingDelta||m.pitchDelta||m.around||m.panDelta)return this._active=!0,m}dragStart(u,m){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=m.length?m[0]:m,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,m){if(!this.isEnabled())return;const b=this._lastPoint;if(!b)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const M=m.length?m[0]:m;return!this._moved&&M.dist(b)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=M,this._move(b,M))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&y.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const pd={0:1,2:2};class Ol{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const m=y.mouseButton(u);this._eventButton=m}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!(function(m,b){const M=pd[b];return m.buttons===void 0||(m.buttons&M)!==M})(u,this._eventButton)}isValidEndEvent(u){return y.mouseButton(u)===this._eventButton}}class _h{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}const ro=A=>{A.mousedown=A.dragStart,A.mousemoveWindow=A.dragMove,A.mouseup=A.dragEnd,A.contextmenu=function(u){u.preventDefault()}},xa=({enable:A,clickTolerance:u,bearingDegreesPerPixelMoved:m=.8})=>{const b=new Ol({checkCorrectEvent:M=>y.mouseButton(M)===0&&M.ctrlKey||y.mouseButton(M)===2});return new Po({clickTolerance:u,move:(M,C)=>({bearingDelta:(C.x-M.x)*m}),moveStateManager:b,enable:A,assignEvents:ro})},Cs=({enable:A,clickTolerance:u,pitchDegreesPerPixelMoved:m=-.5})=>{const b=new Ol({checkCorrectEvent:M=>y.mouseButton(M)===0&&M.ctrlKey||y.mouseButton(M)===2});return new Po({clickTolerance:u,move:(M,C)=>({pitchDelta:(C.y-M.y)*m}),moveStateManager:b,enable:A,assignEvents:ro})};class Qe{constructor(u,m){this._minTouches=u.cooperativeGestures?2:1,this._clickTolerance=u.clickTolerance||1,this._map=m,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0),setTimeout((()=>{this._cancelCooperativeMessage=!1}),200)}touchstart(u,m,b){return this._calculateTransform(u,m,b)}touchmove(u,m,b){if(this._map._cooperativeGestures&&(this._minTouches===2&&b.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(u,!1,b.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(b.length<this._minTouches))return u.preventDefault(),this._calculateTransform(u,m,b)}touchend(u,m,b){this._calculateTransform(u,m,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,m,b){b.length>0&&(this._active=!0);const M=za(b,m),C=new a.P(0,0),N=new a.P(0,0);let j=0;for(const Q in M){const et=M[Q],rt=this._touches[Q];rt&&(C._add(et),N._add(et.sub(rt)),j++,M[Q]=et)}if(this._touches=M,j<this._minTouches||!N.mag())return;const H=N.div(j);return this._sum._add(H),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(j),panDelta:H}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ba{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,m,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([m[0],m[1]]))}touchmove(u,m,b){if(!this._firstTwoTouches)return;u.preventDefault();const[M,C]=this._firstTwoTouches,N=ao(b,m,M),j=ao(b,m,C);if(!N||!j)return;const H=this._aroundCenter?null:N.add(j).div(2);return this._move([N,j],H,u)}touchend(u,m,b){if(!this._firstTwoTouches)return;const[M,C]=this._firstTwoTouches,N=ao(b,m,M),j=ao(b,m,C);N&&j||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ao(A,u,m){for(let b=0;b<A.length;b++)if(A[b].identifier===m)return u[b]}function ko(A,u){return Math.log(A/u)/Math.LN2}class ol extends ba{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,m){const b=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(ko(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ko(this._distance,b),pinchAround:m}}}function en(A,u){return 180*A.angleWith(u)/Math.PI}class $s extends ba{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,m){const b=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:en(this._vector,b),pinchAround:m}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const m=25/(Math.PI*this._minDiameter)*360,b=en(u,this._startVector);return Math.abs(b)<m}}function Dl(A){return Math.abs(A.y)>Math.abs(A.x)}class uc extends ba{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,m,b){super.touchstart(u,m,b),this._currentTouchCount=b.length}_start(u){this._lastPoints=u,Dl(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,m,b){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const M=u[0].sub(this._lastPoints[0]),C=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,C,b.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(M.y+C.y)/2*-.5}):void 0}gestureBeginsVertically(u,m,b){if(this._valid!==void 0)return this._valid;const M=u.mag()>=2,C=m.mag()>=2;if(!M&&!C)return;if(!M||!C)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const N=u.y>0==m.y>0;return Dl(u)&&Dl(m)&&N}}const ll={panStep:100,bearingStep:15,pitchStep:10};class gf{constructor(u){this._tr=new al(u);const m=ll;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let m=0,b=0,M=0,C=0,N=0;switch(u.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:u.shiftKey?b=-1:(u.preventDefault(),C=-1);break;case 39:u.shiftKey?b=1:(u.preventDefault(),C=1);break;case 38:u.shiftKey?M=1:(u.preventDefault(),N=-1);break;case 40:u.shiftKey?M=-1:(u.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(b=0,M=0),{cameraAnimation:j=>{const H=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:Wa,zoom:m?Math.round(H.zoom)+m*(u.shiftKey?2:1):H.zoom,bearing:H.bearing+b*this._bearingStep,pitch:H.pitch+M*this._pitchStep,offset:[-C*this._panStep,-N*this._panStep],center:H.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Wa(A){return A*(2-A)}const cc=4.000244140625;class Oo{constructor(u,m){this._onTimeout=b=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},this._map=u,this._tr=new al(u),this._el=u.getCanvasContainer(),this._triggerRenderFrame=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!u[this._map._metaKey])return;u.preventDefault()}let m=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const b=a.h.now(),M=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,m!==0&&m%cc==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(M*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),u.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=u,this._delta-=m,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=y.mousePos(this._el,u),b=this._tr;this._around=a.L.convert(this._aroundCenter?b.center:b.unproject(m)),this._aroundPoint=b.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>cc?this._wheelZoomRate:this._defaultZoomRate;let H=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&H!==0&&(H=1/H);const Q=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(Q*H))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,b=this._startZoom,M=this._easing;let C,N=!1;if(this._type==="wheel"&&b&&M){const j=Math.min((a.h.now()-this._lastWheelEventTime)/200,1),H=M(j);C=a.B.number(b,m,H),j<1?this._frameId||(this._frameId=!0):N=!0}else C=m,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!N,zoomDelta:C-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let m=a.bb;if(this._prevEase){const b=this._prevEase,M=(a.h.now()-b.start)/b.duration,C=b.easing(M+.01)-b.easing(M),N=.27/Math.sqrt(C*C+1e-4)*.01,j=Math.sqrt(.0729-N*N);m=a.ba(N,j,.25,1)}return this._prevEase={start:a.h.now(),duration:u,easing:m},m}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class hc{constructor(u,m){this._clickZoom=u,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class eu{constructor(u){this._tr=new al(u),this.reset()}reset(){this._active=!1}dblclick(u,m){return u.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(m)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ul{constructor(){this._tap=new kl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,m,b){if(!this._swipePoint)if(this._tapTime){const M=m[0],C=u.timeStamp-this._tapTime<500,N=this._tapPoint.dist(M)<30;C&&N?b.length>0&&(this._swipePoint=M,this._swipeTouch=b[0].identifier):this.reset()}else this._tap.touchstart(u,m,b)}touchmove(u,m,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const M=m[0],C=M.y-this._swipePoint.y;return this._swipePoint=M,u.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(u,m,b)}touchend(u,m,b){if(this._tapTime)this._swipePoint&&b.length===0&&this.reset();else{const M=this._tap.touchend(u,m,b);M&&(this._tapTime=u.timeStamp,this._tapPoint=M)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mu{constructor(u,m,b){this._el=u,this._mousePan=m,this._touchPan=b}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class La{constructor(u,m,b){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=m,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Do{constructor(u,m,b,M){this._el=u,this._touchZoom=m,this._touchRotate=b,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const p=A=>A.zoom||A.drag||A.pitch||A.rotate;class w extends a.k{}function D(A){return A.panDelta&&A.panDelta.mag()||A.zoomDelta||A.bearingDelta||A.pitchDelta}class q{constructor(u,m){this.handleWindowEvent=M=>{this.handleEvent(M,`${M.type}Window`)},this.handleEvent=(M,C)=>{if(M.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const N=M.type==="renderFrame"?void 0:M,j={needsRenderFrame:!1},H={},Q={},et=M.touches,rt=et?this._getMapTouches(et):void 0,pt=rt?y.touchPos(this._el,rt):y.mousePos(this._el,M);for(const{handlerName:Rt,handler:Pt,allowed:Qt}of this._handlers){if(!Pt.isEnabled())continue;let fe;this._blockedByActive(Q,Qt,Rt)?Pt.reset():Pt[C||M.type]&&(fe=Pt[C||M.type](M,pt,rt),this.mergeHandlerResult(j,H,fe,Rt,N),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()),(fe||Pt.isActive())&&(Q[Rt]=Pt)}const Ot={};for(const Rt in this._previousActiveHandlers)Q[Rt]||(Ot[Rt]=N);this._previousActiveHandlers=Q,(Object.keys(Ot).length||D(j))&&(this._changes.push([j,H,Ot]),this._triggerRenderFrame()),(Object.keys(Q).length||D(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:kt}=j;kt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],kt(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new nl(u),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(m);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,C,N]of this._listeners)y.addEventListener(M,C,M===document?this.handleWindowEvent:this.handleEvent,N)}destroy(){for(const[u,m,b]of this._listeners)y.removeEventListener(u,m,u===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(u){const m=this._map,b=m.getCanvasContainer();this._add("mapEvent",new tu(m,u));const M=m.boxZoom=new va(m,u);this._add("boxZoom",M),u.interactive&&u.boxZoom&&M.enable();const C=new sl(m),N=new eu(m);m.doubleClickZoom=new hc(N,C),this._add("tapZoom",C),this._add("clickZoom",N),u.interactive&&u.doubleClickZoom&&m.doubleClickZoom.enable();const j=new ul;this._add("tapDragZoom",j);const H=m.touchPitch=new uc(m);this._add("touchPitch",H),u.interactive&&u.touchPitch&&m.touchPitch.enable(u.touchPitch);const Q=xa(u),et=Cs(u);m.dragRotate=new La(u,Q,et),this._add("mouseRotate",Q,["mousePitch"]),this._add("mousePitch",et,["mouseRotate"]),u.interactive&&u.dragRotate&&m.dragRotate.enable();const rt=(({enable:Qt,clickTolerance:fe})=>{const Vt=new Ol({checkCorrectEvent:te=>y.mouseButton(te)===0&&!te.ctrlKey});return new Po({clickTolerance:fe,move:(te,me)=>({around:me,panDelta:me.sub(te)}),activateOnStart:!0,moveStateManager:Vt,enable:Qt,assignEvents:ro})})(u),pt=new Qe(u,m);m.dragPan=new Mu(b,rt,pt),this._add("mousePan",rt),this._add("touchPan",pt,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&m.dragPan.enable(u.dragPan);const Ot=new $s,kt=new ol;m.touchZoomRotate=new Do(b,kt,Ot,j),this._add("touchRotate",Ot,["touchPan","touchZoom"]),this._add("touchZoom",kt,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&m.touchZoomRotate.enable(u.touchZoomRotate);const Rt=m.scrollZoom=new Oo(m,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Rt,["mousePan"]),u.interactive&&u.scrollZoom&&m.scrollZoom.enable(u.scrollZoom);const Pt=m.keyboard=new gf(m);this._add("keyboard",Pt),u.interactive&&u.keyboard&&m.keyboard.enable(),this._add("blockableMapEvent",new lc(m))}_add(u,m,b){this._handlers.push({handlerName:u,handler:m,allowed:b}),this._handlersById[u]=m}stop(u){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!p(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,m,b){for(const M in u)if(M!==b&&(!m||m.indexOf(M)<0))return!0;return!1}_getMapTouches(u){const m=[];for(const b of u)this._el.contains(b.target)&&m.push(b);return m}mergeHandlerResult(u,m,b,M,C){if(!b)return;a.e(u,b);const N={handlerName:M,originalEvent:b.originalEvent||C};b.zoomDelta!==void 0&&(m.zoom=N),b.panDelta!==void 0&&(m.drag=N),b.pitchDelta!==void 0&&(m.pitch=N),b.bearingDelta!==void 0&&(m.rotate=N)}_applyChanges(){const u={},m={},b={};for(const[M,C,N]of this._changes)M.panDelta&&(u.panDelta=(u.panDelta||new a.P(0,0))._add(M.panDelta)),M.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+M.pitchDelta),M.around!==void 0&&(u.around=M.around),M.pinchAround!==void 0&&(u.pinchAround=M.pinchAround),M.noInertia&&(u.noInertia=M.noInertia),a.e(m,C),a.e(b,N);this._updateMapTransform(u,m,b),this._changes=[]}_updateMapTransform(u,m,b){const M=this._map,C=M._getTransformForUpdate(),N=M.terrain;if(!(D(u)||N&&this._terrainMovement))return this._fireEvents(m,b,!0);let{panDelta:j,zoomDelta:H,bearingDelta:Q,pitchDelta:et,around:rt,pinchAround:pt}=u;pt!==void 0&&(rt=pt),M._stop(!0),rt=rt||M.transform.centerPoint;const Ot=C.pointLocation(j?rt.sub(j):rt);Q&&(C.bearing+=Q),et&&(C.pitch+=et),H&&(C.zoom+=H),N?this._terrainMovement||!m.drag&&!m.zoom?m.drag&&this._terrainMovement?C.center=C.pointLocation(C.centerPoint.sub(j)):C.setLocationAtPoint(Ot,rt):(this._terrainMovement=!0,this._map._elevationFreeze=!0,C.setLocationAtPoint(Ot,rt),this._map.once("moveend",(()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,C.recalculateZoom(M.terrain)}))):C.setLocationAtPoint(Ot,rt),M._applyUpdatedTransform(C),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(m,b,!0)}_fireEvents(u,m,b){const M=p(this._eventsInProgress),C=p(u),N={};for(const et in u){const{originalEvent:rt}=u[et];this._eventsInProgress[et]||(N[`${et}start`]=rt),this._eventsInProgress[et]=u[et]}!M&&C&&this._fireEvent("movestart",C.originalEvent);for(const et in N)this._fireEvent(et,N[et]);C&&this._fireEvent("move",C.originalEvent);for(const et in u){const{originalEvent:rt}=u[et];this._fireEvent(et,rt)}const j={};let H;for(const et in this._eventsInProgress){const{handlerName:rt,originalEvent:pt}=this._eventsInProgress[et];this._handlersById[rt].isActive()||(delete this._eventsInProgress[et],H=m[rt]||pt,j[`${et}end`]=H)}for(const et in j)this._fireEvent(et,j[et]);const Q=p(this._eventsInProgress);if(b&&(M||C)&&!Q){this._updatingCamera=!0;const et=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),rt=pt=>pt!==0&&-this._bearingSnap<pt&&pt<this._bearingSnap;!et||!et.essential&&a.h.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:H})),rt(this._map.getBearing())&&this._map.resetNorth()):(rt(et.bearing||this._map.getBearing())&&(et.bearing=0),et.freezeElevation=!0,this._map.easeTo(et,{originalEvent:H})),this._updatingCamera=!1}}_fireEvent(u,m){this._map.fire(new a.k(u,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((u=>{delete this._frameId,this.handleEvent(new w("renderFrame",{timeStamp:u})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class nt extends a.E{constructor(u,m){super(),this._renderFrameCallback=()=>{const b=Math.min((a.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=m.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new a.L(this.transform.center.lng,this.transform.center.lat)}setCenter(u,m){return this.jumpTo({center:u},m)}panBy(u,m,b){return u=a.P.convert(u).mult(-1),this.panTo(this.transform.center,a.e({offset:u},m),b)}panTo(u,m,b){return this.easeTo(a.e({center:u},m),b)}getZoom(){return this.transform.zoom}setZoom(u,m){return this.jumpTo({zoom:u},m),this}zoomTo(u,m,b){return this.easeTo(a.e({zoom:u},m),b)}zoomIn(u,m){return this.zoomTo(this.getZoom()+1,u,m),this}zoomOut(u,m){return this.zoomTo(this.getZoom()-1,u,m),this}getBearing(){return this.transform.bearing}setBearing(u,m){return this.jumpTo({bearing:u},m),this}getPadding(){return this.transform.padding}setPadding(u,m){return this.jumpTo({padding:u},m),this}rotateTo(u,m,b){return this.easeTo(a.e({bearing:u},m),b)}resetNorth(u,m){return this.rotateTo(0,a.e({duration:1e3},u),m),this}resetNorthPitch(u,m){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},u),m),this}snapToNorth(u,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,m):this}getPitch(){return this.transform.pitch}setPitch(u,m){return this.jumpTo({pitch:u},m),this}cameraForBounds(u,m){u=Lt.convert(u);const b=m&&m.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),b,m)}_cameraForBoxAndBearing(u,m,b,M){const C={top:0,bottom:0,right:0,left:0};if(typeof(M=a.e({padding:C,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const me=M.padding;M.padding={top:me,bottom:me,right:me,left:me}}M.padding=a.e(C,M.padding);const N=this.transform,j=N.padding,H=N.project(a.L.convert(u)),Q=N.project(a.L.convert(m)),et=H.rotate(-b*Math.PI/180),rt=Q.rotate(-b*Math.PI/180),pt=new a.P(Math.max(et.x,rt.x),Math.max(et.y,rt.y)),Ot=new a.P(Math.min(et.x,rt.x),Math.min(et.y,rt.y)),kt=pt.sub(Ot),Rt=(N.width-(j.left+j.right+M.padding.left+M.padding.right))/kt.x,Pt=(N.height-(j.top+j.bottom+M.padding.top+M.padding.bottom))/kt.y;if(Pt<0||Rt<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Qt=Math.min(N.scaleZoom(N.scale*Math.min(Rt,Pt)),M.maxZoom),fe=a.P.convert(M.offset),Vt=new a.P((M.padding.left-M.padding.right)/2,(M.padding.top-M.padding.bottom)/2).rotate(b*Math.PI/180),te=fe.add(Vt).mult(N.scale/N.zoomScale(Qt));return{center:N.unproject(H.add(Q).div(2).sub(te)),zoom:Qt,bearing:b}}fitBounds(u,m,b){return this._fitInternal(this.cameraForBounds(u,m),m,b)}fitScreenCoordinates(u,m,b,M,C){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(u)),this.transform.pointLocation(a.P.convert(m)),b,M),M,C)}_fitInternal(u,m,b){return u?(delete(m=a.e(u,m)).padding,m.linear?this.easeTo(m,b):this.flyTo(m,b)):this}jumpTo(u,m){this.stop();const b=this._getTransformForUpdate();let M=!1,C=!1,N=!1;return"zoom"in u&&b.zoom!==+u.zoom&&(M=!0,b.zoom=+u.zoom),u.center!==void 0&&(b.center=a.L.convert(u.center)),"bearing"in u&&b.bearing!==+u.bearing&&(C=!0,b.bearing=+u.bearing),"pitch"in u&&b.pitch!==+u.pitch&&(N=!0,b.pitch=+u.pitch),u.padding==null||b.isPaddingEqual(u.padding)||(b.padding=u.padding),this._applyUpdatedTransform(b),this.fire(new a.k("movestart",m)).fire(new a.k("move",m)),M&&this.fire(new a.k("zoomstart",m)).fire(new a.k("zoom",m)).fire(new a.k("zoomend",m)),C&&this.fire(new a.k("rotatestart",m)).fire(new a.k("rotate",m)).fire(new a.k("rotateend",m)),N&&this.fire(new a.k("pitchstart",m)).fire(new a.k("pitch",m)).fire(new a.k("pitchend",m)),this.fire(new a.k("moveend",m))}calculateCameraOptionsFromTo(u,m,b,M=0){const C=a.U.fromLngLat(u,m),N=a.U.fromLngLat(b,M),j=N.x-C.x,H=N.y-C.y,Q=N.z-C.z,et=Math.hypot(j,H,Q);if(et===0)throw new Error("Can't calculate camera options with same From and To");const rt=Math.hypot(j,H),pt=this.transform.scaleZoom(this.transform.cameraToCenterDistance/et/this.transform.tileSize),Ot=180*Math.atan2(j,-H)/Math.PI;let kt=180*Math.acos(rt/et)/Math.PI;return kt=Q<0?90-kt:90+kt,{center:N.toLngLat(),zoom:pt,pitch:kt,bearing:Ot}}easeTo(u,m){this._stop(!1,u.easeId),((u=a.e({offset:[0,0],duration:500,easing:a.bb},u)).animate===!1||!u.essential&&a.h.prefersReducedMotion)&&(u.duration=0);const b=this._getTransformForUpdate(),M=this.getZoom(),C=this.getBearing(),N=this.getPitch(),j=this.getPadding(),H="zoom"in u?+u.zoom:M,Q="bearing"in u?this._normalizeBearing(u.bearing,C):C,et="pitch"in u?+u.pitch:N,rt="padding"in u?u.padding:b.padding,pt=a.P.convert(u.offset);let Ot=b.centerPoint.add(pt);const kt=b.pointLocation(Ot),Rt=a.L.convert(u.center||kt);this._normalizeCenter(Rt);const Pt=b.project(kt),Qt=b.project(Rt).sub(Pt),fe=b.zoomScale(H-M);let Vt,te;u.around&&(Vt=a.L.convert(u.around),te=b.locationPoint(Vt));const me={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||H!==M,this._rotating=this._rotating||C!==Q,this._pitching=this._pitching||et!==N,this._padding=!b.isPaddingEqual(rt),this._easeId=u.easeId,this._prepareEase(m,u.noMoveStart,me),this.terrain&&this._prepareElevation(Rt),this._ease((xe=>{if(this._zooming&&(b.zoom=a.B.number(M,H,xe)),this._rotating&&(b.bearing=a.B.number(C,Q,xe)),this._pitching&&(b.pitch=a.B.number(N,et,xe)),this._padding&&(b.interpolatePadding(j,rt,xe),Ot=b.centerPoint.add(pt)),this.terrain&&!u.freezeElevation&&this._updateElevation(xe),Vt)b.setLocationAtPoint(Vt,te);else{const Pe=b.zoomScale(b.zoom-M),Ve=H>M?Math.min(2,fe):Math.max(.5,fe),ze=Math.pow(Ve,1-xe),qe=b.unproject(Pt.add(Qt.mult(xe*ze)).mult(Pe));b.setLocationAtPoint(b.renderWorldCopies?qe.wrap():qe,Ot)}this._applyUpdatedTransform(b),this._fireMoveEvents(m)}),(xe=>{this.terrain&&this._finalizeElevation(),this._afterEase(m,xe)}),u),this}_prepareEase(u,m,b={}){this._moving=!0,m||b.moving||this.fire(new a.k("movestart",u)),this._zooming&&!b.zooming&&this.fire(new a.k("zoomstart",u)),this._rotating&&!b.rotating&&this.fire(new a.k("rotatestart",u)),this._pitching&&!b.pitching&&this.fire(new a.k("pitchstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const m=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&m!==this._elevationTarget){const b=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(b-(m-(b*u+this._elevationStart))/(1-u)),this._elevationTarget=m}this.transform.elevation=a.B.number(this._elevationStart,this._elevationTarget,u)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(u){if(!this.transformCameraUpdate)return;const m=u.clone(),{center:b,zoom:M,pitch:C,bearing:N,elevation:j}=this.transformCameraUpdate(m);b&&(m.center=b),M!==void 0&&(m.zoom=M),C!==void 0&&(m.pitch=C),N!==void 0&&(m.bearing=N),j!==void 0&&(m.elevation=j),this.transform.apply(m)}_fireMoveEvents(u){this.fire(new a.k("move",u)),this._zooming&&this.fire(new a.k("zoom",u)),this._rotating&&this.fire(new a.k("rotate",u)),this._pitching&&this.fire(new a.k("pitch",u))}_afterEase(u,m){if(this._easeId&&m&&this._easeId===m)return;delete this._easeId;const b=this._zooming,M=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new a.k("zoomend",u)),M&&this.fire(new a.k("rotateend",u)),C&&this.fire(new a.k("pitchend",u)),this.fire(new a.k("moveend",u))}flyTo(u,m){if(!u.essential&&a.h.prefersReducedMotion){const pn=a.F(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(pn,m)}this.stop(),u=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.bb},u);const b=this._getTransformForUpdate(),M=this.getZoom(),C=this.getBearing(),N=this.getPitch(),j=this.getPadding(),H="zoom"in u?a.ad(+u.zoom,b.minZoom,b.maxZoom):M,Q="bearing"in u?this._normalizeBearing(u.bearing,C):C,et="pitch"in u?+u.pitch:N,rt="padding"in u?u.padding:b.padding,pt=b.zoomScale(H-M),Ot=a.P.convert(u.offset);let kt=b.centerPoint.add(Ot);const Rt=b.pointLocation(kt),Pt=a.L.convert(u.center||Rt);this._normalizeCenter(Pt);const Qt=b.project(Rt),fe=b.project(Pt).sub(Qt);let Vt=u.curve;const te=Math.max(b.width,b.height),me=te/pt,xe=fe.mag();if("minZoom"in u){const pn=a.ad(Math.min(u.minZoom,M,H),b.minZoom,b.maxZoom),Vi=te/b.zoomScale(pn-M);Vt=Math.sqrt(Vi/xe*2)}const Pe=Vt*Vt;function Ve(pn){const Vi=(me*me-te*te+(pn?-1:1)*Pe*Pe*xe*xe)/(2*(pn?me:te)*Pe*xe);return Math.log(Math.sqrt(Vi*Vi+1)-Vi)}function ze(pn){return(Math.exp(pn)-Math.exp(-pn))/2}function qe(pn){return(Math.exp(pn)+Math.exp(-pn))/2}const dn=Ve(!1);let ai=function(pn){return qe(dn)/qe(dn+Vt*pn)},Ye=function(pn){return te*((qe(dn)*(ze(Vi=dn+Vt*pn)/qe(Vi))-ze(dn))/Pe)/xe;var Vi},vn=(Ve(!0)-dn)/Vt;if(Math.abs(xe)<1e-6||!isFinite(vn)){if(Math.abs(te-me)<1e-6)return this.easeTo(u,m);const pn=me<te?-1:1;vn=Math.abs(Math.log(me/te))/Vt,Ye=function(){return 0},ai=function(Vi){return Math.exp(pn*Vt*Vi)}}return u.duration="duration"in u?+u.duration:1e3*vn/("screenSpeed"in u?+u.screenSpeed/Vt:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=C!==Q,this._pitching=et!==N,this._padding=!b.isPaddingEqual(rt),this._prepareEase(m,!1),this.terrain&&this._prepareElevation(Pt),this._ease((pn=>{const Vi=pn*vn,Zn=1/ai(Vi);b.zoom=pn===1?H:M+b.scaleZoom(Zn),this._rotating&&(b.bearing=a.B.number(C,Q,pn)),this._pitching&&(b.pitch=a.B.number(N,et,pn)),this._padding&&(b.interpolatePadding(j,rt,pn),kt=b.centerPoint.add(Ot)),this.terrain&&!u.freezeElevation&&this._updateElevation(pn);const Fn=pn===1?Pt:b.unproject(Qt.add(fe.mult(Ye(Vi))).mult(Zn));b.setLocationAtPoint(b.renderWorldCopies?Fn.wrap():Fn,kt),this._applyUpdatedTransform(b),this._fireMoveEvents(m)}),(()=>{this.terrain&&this._finalizeElevation(),this._afterEase(m)}),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,m)}if(!u){const b=this.handlers;b&&b.stop(!1)}return this}_ease(u,m,b){b.animate===!1||b.duration===0?(u(1),m()):(this._easeStart=a.h.now(),this._easeOptions=b,this._onEaseFrame=u,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,m){u=a.b5(u,-180,180);const b=Math.abs(u-m);return Math.abs(u-360-m)<b&&(u-=360),Math.abs(u+360-m)<b&&(u+=360),u}_normalizeCenter(u){const m=this.transform;if(!m.renderWorldCopies||m.lngRange)return;const b=u.lng-m.center.lng;u.lng+=b>180?-360:b<-180?360:0}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(a.L.convert(u),this.transform.tileZoom)-this.transform.elevation:null}}class mt{constructor(u={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=m=>{!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"&&m.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options&&this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,m){const b=this._map._getUIString(`AttributionControl.${m}`);u.title=b,u.setAttribute("aria-label",b)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map((M=>typeof M!="string"?"":M))):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const m=this._map.style.sourceCaches;for(const M in m){const C=m[M];if(C.used||C.usedForTerrain){const N=C.getSource();N.attribution&&u.indexOf(N.attribution)<0&&u.push(N.attribution)}}u=u.filter((M=>String(M).trim())),u.sort(((M,C)=>M.length-C.length)),u=u.filter(((M,C)=>{for(let N=C+1;N<u.length;N++)if(u[N].indexOf(M)>=0)return!1;return!0}));const b=u.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,u.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ft{constructor(u={}){this._updateCompact=()=>{const m=this._container.children;if(m.length){const b=m[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&b.classList.add("maplibregl-compact"):b.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl");const m=y.create("a","maplibregl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://maplibre.org/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ue{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const m=++this._id;return this._queue.push({callback:u,id:m,cancelled:!1}),m}remove(u){const m=this._currentlyRunning,b=m?this._queue.concat(m):this._queue;for(const M of b)if(M.id===u)return void(M.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const m=this._currentlyRunning=this._queue;this._queue=[];for(const b of m)if(!b.cancelled&&(b.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ve={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Le=a.Q([{name:"a_pos3d",type:"Int16",components:3}]);class rn extends a.E{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(u,m){this.sourceCache.update(u,m),this._renderableTilesKeys=[];const b={};for(const M of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:m}))b[M.key]=!0,this._renderableTilesKeys.push(M.key),this._tiles[M.key]||(M.posMatrix=new Float64Array(16),a.aS(M.posMatrix,0,a.N,0,a.N,0,1),this._tiles[M.key]=new hn(M,this.tileSize));for(const M in this._tiles)b[M]||delete this._tiles[M]}freeRtt(u){for(const m in this._tiles){const b=this._tiles[m];(!u||b.tileID.equals(u)||b.tileID.isChildOf(u)||u.isChildOf(b.tileID))&&(b.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((u=>this.getTileByID(u)))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const m={};for(const b of this._renderableTilesKeys){const M=this._tiles[b].tileID;if(M.canonical.equals(u.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16),a.aS(C.posMatrix,0,a.N,0,a.N,0,1),m[b]=C}else if(M.canonical.isChildOf(u.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16);const N=M.canonical.z-u.canonical.z,j=M.canonical.x-(M.canonical.x>>N<<N),H=M.canonical.y-(M.canonical.y>>N<<N),Q=a.N>>N;a.aS(C.posMatrix,0,Q,0,Q,0,1),a.$(C.posMatrix,C.posMatrix,[-j*Q,-H*Q,0]),m[b]=C}else if(u.canonical.isChildOf(M.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16);const N=u.canonical.z-M.canonical.z,j=u.canonical.x-(u.canonical.x>>N<<N),H=u.canonical.y-(u.canonical.y>>N<<N),Q=a.N>>N;a.aS(C.posMatrix,0,a.N,0,a.N,0,1),a.$(C.posMatrix,C.posMatrix,[j*Q,H*Q,0]),a.a0(C.posMatrix,C.posMatrix,[1/2**N,1/2**N,0]),m[b]=C}}return m}getSourceTile(u,m){const b=this.sourceCache._source;let M=u.overscaledZ-this.deltaZoom;if(M>b.maxzoom&&(M=b.maxzoom),M<b.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(M).key);let C=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!C||!C.dem)&&m)for(;M>=b.minzoom&&(!C||!C.dem);)C=this.sourceCache.getTileByID(u.scaledTo(M--).key);return C}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter((m=>m.timeAdded>=u))}}class Mn{constructor(u,m,b){this.painter=u,this.sourceCache=new rn(m),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,m,b,M=a.N){var C;if(!(m>=0&&m<M&&b>=0&&b<M))return 0;const N=this.getTerrainData(u),j=(C=N.tile)===null||C===void 0?void 0:C.dem;if(!j)return 0;const H=(function(kt,Rt,Pt){var Qt=Rt[0],fe=Rt[1];return kt[0]=Pt[0]*Qt+Pt[4]*fe+Pt[12],kt[1]=Pt[1]*Qt+Pt[5]*fe+Pt[13],kt})([],[m/M*a.N,b/M*a.N],N.u_terrain_matrix),Q=[H[0]*j.dim,H[1]*j.dim],et=Math.floor(Q[0]),rt=Math.floor(Q[1]),pt=Q[0]-et,Ot=Q[1]-rt;return j.get(et,rt)*(1-pt)*(1-Ot)+j.get(et+1,rt)*pt*(1-Ot)+j.get(et,rt+1)*(1-pt)*Ot+j.get(et+1,rt+1)*pt*Ot}getElevationForLngLatZoom(u,m){const{tileID:b,mercatorX:M,mercatorY:C}=this._getOverscaledTileIDFromLngLatZoom(u,m);return this.getElevation(b,M%a.N,C%a.N,a.N)}getElevation(u,m,b,M=a.N){return this.getDEMElevation(u,m,b,M)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const M=this.painter.context,C=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new xt(M,C,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new xt(M,new a.R({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ao([])}const m=this.sourceCache.getSourceTile(u,!0);if(m&&m.dem&&(!m.demTexture||m.needsTerrainPrepare)){const M=this.painter.context;m.demTexture=this.painter.getTileTexture(m.dem.stride),m.demTexture?m.demTexture.update(m.dem.getPixels(),{premultiply:!1}):m.demTexture=new xt(M,m.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),m.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),m.needsTerrainPrepare=!1}const b=m&&m+m.tileID.key+u.key;if(b&&!this._demMatrixCache[b]){const M=this.sourceCache.sourceCache._source.maxzoom;let C=u.canonical.z-m.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=M?C=u.canonical.z-M:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const N=u.canonical.x-(u.canonical.x>>C<<C),j=u.canonical.y-(u.canonical.y>>C<<C),H=a.bc(new Float64Array(16),[1/(a.N<<C),1/(a.N<<C),0]);a.$(H,H,[N*a.N,j*a.N,0]),this._demMatrixCache[u.key]={matrix:H,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:m&&m.dem&&m.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:m&&m.dem&&m.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(m&&m.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:m}}getFramebuffer(u){const m=this.painter,b=m.width/devicePixelRatio,M=m.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new xt(m.context,{width:b,height:M,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new xt(m.context,{width:b,height:M,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=m.context.createFramebuffer(b,M,!0,!1),this._fbo.depthAttachment.set(m.context.createRenderbuffer(m.context.gl.DEPTH_COMPONENT16,b,M))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const m=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let C=0,N=0;C<this._coordsTextureSize;C++)for(let j=0;j<this._coordsTextureSize;j++,N+=4)m[N+0]=255&j,m[N+1]=255&C,m[N+2]=j>>8<<4|C>>8,m[N+3]=0;const b=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(m.buffer)),M=new xt(u,b,u.gl.RGBA,{premultiply:!1});return M.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(u){const m=new Uint8Array(4),b=this.painter.context,M=b.gl;b.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,m),b.bindFramebuffer.set(null);const C=m[0]+(m[2]>>4<<8),N=m[1]+((15&m[2])<<8),j=this.coordsIndex[255-m[3]],H=j&&this.sourceCache.getTileByID(j);if(!H)return null;const Q=this._coordsTextureSize,et=(1<<H.tileID.canonical.z)*Q;return new a.U(this._allowMercatorOverflow(u,(H.tileID.canonical.x*Q+C)/et),(H.tileID.canonical.y*Q+N)/et,this.getElevation(H.tileID,C,N,Q))}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.painter.context,m=new a.bd,b=new a.b0,M=this.meshSize,C=a.N/M,N=M*M;for(let rt=0;rt<=M;rt++)for(let pt=0;pt<=M;pt++)m.emplaceBack(pt*C,rt*C,0);for(let rt=0;rt<N;rt+=M+1)for(let pt=0;pt<M;pt++)b.emplaceBack(pt+rt,M+pt+rt+1,M+pt+rt+2),b.emplaceBack(pt+rt,M+pt+rt+2,pt+rt+1);const j=m.length,H=j+2*(M+1);for(const rt of[0,1])for(let pt=0;pt<=M;pt++)for(const Ot of[0,1])m.emplaceBack(pt*C,rt*a.N,Ot);for(let rt=0;rt<2*M;rt+=2)b.emplaceBack(H+rt,H+rt+1,H+rt+3),b.emplaceBack(H+rt,H+rt+3,H+rt+2),b.emplaceBack(j+rt,j+rt+3,j+rt+1),b.emplaceBack(j+rt,j+rt+2,j+rt+3);const Q=m.length,et=Q+2*(M+1);for(const rt of[0,1])for(let pt=0;pt<=M;pt++)for(const Ot of[0,1])m.emplaceBack(rt*a.N,pt*C,Ot);for(let rt=0;rt<2*M;rt+=2)b.emplaceBack(Q+rt,Q+rt+1,Q+rt+3),b.emplaceBack(Q+rt,Q+rt+3,Q+rt+2),b.emplaceBack(et+rt,et+rt+3,et+rt+1),b.emplaceBack(et+rt,et+rt+2,et+rt+3);return this._mesh={indexBuffer:u.createIndexBuffer(b),vertexBuffer:u.createVertexBuffer(m,Le.members),segments:a.S.simpleSegment(0,0,m.length,b.length)},this._mesh}getMeshFrameDelta(u){return 2*Math.PI*a.be/Math.pow(2,u)/5}getMinTileElevationForLngLatZoom(u,m){var b;const{tileID:M}=this._getOverscaledTileIDFromLngLatZoom(u,m);return(b=this.getMinMaxElevation(M).minElevation)!==null&&b!==void 0?b:0}getMinMaxElevation(u){const m=this.getTerrainData(u).tile,b={minElevation:null,maxElevation:null};return m&&m.dem&&(b.minElevation=m.dem.min*this.exaggeration,b.maxElevation=m.dem.max*this.exaggeration),b}_getOverscaledTileIDFromLngLatZoom(u,m){const b=a.U.fromLngLat(u.wrap()),M=(1<<m)*a.N,C=b.x*M,N=b.y*M,j=Math.floor(C/a.N),H=Math.floor(N/a.N);return{tileID:new a.O(m,0,m,j,H),mercatorX:C,mercatorY:N}}_allowMercatorOverflow(u,m){const b=u.x<this.painter.width/2;let M=a.bf(m);const C=this.painter.transform.center.lng;return b&&Math.sign(M)>0&&Math.sign(C)<0||!b&&Math.sign(M)<0&&Math.sign(C)>0?(M=360*Math.sign(C)+M,a.G(M)):m}}class ri{constructor(u,m,b){this._context=u,this._size=m,this._tileSize=b,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const m=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),b=new xt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return b.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),m.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),m.colorAttachment.set(b.texture),{id:u,fbo:m,texture:b,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((m=>u.id!==m)),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const m of this._recentlyUsed)if(!this._objects[m].inUse)return this._objects[m];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((u=>!u.inUse))===!1}}const Mi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class vr{constructor(u,m){this.painter=u,this.terrain=m,this.pool=new ri(u.context,30,m.sourceCache.tileSize*m.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,m){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=u._order.filter((b=>!u._layers[b].isHidden(m))),this._coordsDescendingInv={};for(const b in u.sourceCaches){this._coordsDescendingInv[b]={};const M=u.sourceCaches[b].getVisibleCoordinates();for(const C of M){const N=this.terrain.sourceCache.getTerrainCoords(C);for(const j in N)this._coordsDescendingInv[b][j]||(this._coordsDescendingInv[b][j]=[]),this._coordsDescendingInv[b][j].push(N[j])}}this._coordsDescendingInvStr={};for(const b of u._order){const M=u._layers[b],C=M.source;if(Mi[M.type]&&!this._coordsDescendingInvStr[C]){this._coordsDescendingInvStr[C]={};for(const N in this._coordsDescendingInv[C])this._coordsDescendingInvStr[C][N]=this._coordsDescendingInv[C][N].map((j=>j.key)).sort().join()}}for(const b of this._renderableTiles)for(const M in this._coordsDescendingInvStr){const C=this._coordsDescendingInvStr[M][b.tileID.key];C&&C!==b.rttCoords[M]&&(b.rtt=[])}}renderLayer(u){if(u.isHidden(this.painter.transform.zoom))return!1;const m=u.type,b=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(Mi[m]&&(this._prevType&&Mi[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(u.id),!M))return!0;if(Mi[this._prevType]||Mi[m]&&M){this._prevType=m;const C=this._stacks.length-1,N=this._stacks[C]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(Ti(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[C]){const Q=this.pool.getObjectForId(j.rtt[C].id);if(Q.stamp===j.rtt[C].stamp){this.pool.useObject(Q);continue}}const H=this.pool.getOrCreateFreeObject();this.pool.useObject(H),this.pool.stampObject(H),j.rtt[C]={id:H.id,stamp:H.stamp},b.context.bindFramebuffer.set(H.fbo.framebuffer),b.context.clear({color:a.aT.transparent,stencil:0}),b.currentStencilSource=void 0;for(let Q=0;Q<N.length;Q++){const et=b.style._layers[N[Q]],rt=et.source?this._coordsDescendingInv[et.source][j.tileID.key]:[j.tileID];b.context.viewport.set([0,0,H.fbo.width,H.fbo.height]),b._renderTileClippingMasks(et,rt),b.renderLayer(b,b.style.sourceCaches[et.source],et,rt),et.source&&(j.rttCoords[et.source]=this._coordsDescendingInvStr[et.source][j.tileID.key])}}return Ti(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Mi[m]}return!1}}const sn=g,Je={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},vi=A=>{A.touchstart=A.dragStart,A.touchmoveWindow=A.dragMove,A.touchend=A.dragEnd},ui={showCompass:!0,showZoom:!0,visualizePitch:!1};class Io{constructor(u,m,b=!1){this.mousedown=N=>{this.startMouse(a.e({},N,{ctrlKey:!0,preventDefault:()=>N.preventDefault()}),y.mousePos(this.element,N)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=N=>{this.moveMouse(N,y.mousePos(this.element,N))},this.mouseup=N=>{this.mouseRotate.dragEnd(N),this.mousePitch&&this.mousePitch.dragEnd(N),this.offTemp()},this.touchstart=N=>{N.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,N.targetTouches)[0],this.startTouch(N,this._startPos),y.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.addEventListener(window,"touchend",this.touchend))},this.touchmove=N=>{N.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,N.targetTouches)[0],this.moveTouch(N,this._lastPos))},this.touchend=N=>{N.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const M=u.dragRotate._mouseRotate.getClickTolerance(),C=u.dragRotate._mousePitch.getClickTolerance();this.element=m,this.mouseRotate=xa({clickTolerance:M,enable:!0}),this.touchRotate=(({enable:N,clickTolerance:j,bearingDegreesPerPixelMoved:H=.8})=>{const Q=new _h;return new Po({clickTolerance:j,move:(et,rt)=>({bearingDelta:(rt.x-et.x)*H}),moveStateManager:Q,enable:N,assignEvents:vi})})({clickTolerance:M,enable:!0}),this.map=u,b&&(this.mousePitch=Cs({clickTolerance:C,enable:!0}),this.touchPitch=(({enable:N,clickTolerance:j,pitchDegreesPerPixelMoved:H=-.5})=>{const Q=new _h;return new Po({clickTolerance:j,move:(et,rt)=>({pitchDelta:(rt.y-et.y)*H}),moveStateManager:Q,enable:N,assignEvents:vi})})({clickTolerance:C,enable:!0})),y.addEventListener(m,"mousedown",this.mousedown),y.addEventListener(m,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(m,"touchcancel",this.reset)}startMouse(u,m){this.mouseRotate.dragStart(u,m),this.mousePitch&&this.mousePitch.dragStart(u,m),y.disableDrag()}startTouch(u,m){this.touchRotate.dragStart(u,m),this.touchPitch&&this.touchPitch.dragStart(u,m),y.disableDrag()}moveMouse(u,m){const b=this.map,{bearingDelta:M}=this.mouseRotate.dragMove(u,m)||{};if(M&&b.setBearing(b.getBearing()+M),this.mousePitch){const{pitchDelta:C}=this.mousePitch.dragMove(u,m)||{};C&&b.setPitch(b.getPitch()+C)}}moveTouch(u,m){const b=this.map,{bearingDelta:M}=this.touchRotate.dragMove(u,m)||{};if(M&&b.setBearing(b.getBearing()+M),this.touchPitch){const{pitchDelta:C}=this.touchPitch.dragMove(u,m)||{};C&&b.setPitch(b.getPitch()+C)}}off(){const u=this.element;y.removeEventListener(u,"mousedown",this.mousedown),y.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.removeEventListener(window,"touchend",this.touchend),y.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup),y.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.removeEventListener(window,"touchend",this.touchend)}}let bi;function Eu(A,u,m){if(A=new a.L(A.lng,A.lat),u){const b=new a.L(A.lng-360,A.lat),M=new a.L(A.lng+360,A.lat),C=m.locationPoint(A).distSqr(u);m.locationPoint(b).distSqr(u)<C?A=b:m.locationPoint(M).distSqr(u)<C&&(A=M)}for(;Math.abs(A.lng-m.center.lng)>180;){const b=m.locationPoint(A);if(b.x>=0&&b.y>=0&&b.x<=m.width&&b.y<=m.height)break;A.lng>m.center.lng?A.lng-=360:A.lng+=360}return A}const Kr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Rc(A,u,m){const b=A.classList;for(const M in Kr)b.remove(`maplibregl-${m}-anchor-${M}`);b.add(`maplibregl-${m}-anchor-${u}`)}class Ki extends a.E{constructor(u){if(super(),this._onKeyPress=m=>{const b=m.code,M=m.charCode||m.keyCode;b!=="Space"&&b!=="Enter"&&M!==32&&M!==13||this.togglePopup()},this._onMapClick=m=>{const b=m.originalEvent.target,M=this._element;this._popup&&(b===M||M.contains(b))&&this.togglePopup()},this._update=m=>{if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();(m?.type==="terrain"||m?.type==="render"&&!b)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Eu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let M="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?M=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(M=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),m&&m.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${Kr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${M}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout((()=>{const N=this._map.unproject(this._pos),j=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=N.distanceTo(this._lngLat)>20*j?"0.2":"1.0",this._opacityTimeout=null}),100))},this._onMove=m=>{if(!this._isDragging){const b=this._clickTolerance||this._map._clickTolerance;this._isDragging=m.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=m=>{this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._pointerdownPos=m.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=a.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const m=y.createNS("http://www.w3.org/2000/svg","svg"),b=41,M=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${b}px`),m.setAttributeNS(null,"width",`${M}px`),m.setAttributeNS(null,"viewBox",`0 0 ${M} ${b}`);const C=y.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"stroke","none"),C.setAttributeNS(null,"stroke-width","1"),C.setAttributeNS(null,"fill","none"),C.setAttributeNS(null,"fill-rule","evenodd");const N=y.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill-rule","nonzero");const j=y.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const H=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Qt of H){const fe=y.createNS("http://www.w3.org/2000/svg","ellipse");fe.setAttributeNS(null,"opacity","0.04"),fe.setAttributeNS(null,"cx","10.5"),fe.setAttributeNS(null,"cy","5.80029008"),fe.setAttributeNS(null,"rx",Qt.rx),fe.setAttributeNS(null,"ry",Qt.ry),j.appendChild(fe)}const Q=y.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill",this._color);const et=y.createNS("http://www.w3.org/2000/svg","path");et.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Q.appendChild(et);const rt=y.createNS("http://www.w3.org/2000/svg","g");rt.setAttributeNS(null,"opacity","0.25"),rt.setAttributeNS(null,"fill","#000000");const pt=y.createNS("http://www.w3.org/2000/svg","path");pt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),rt.appendChild(pt);const Ot=y.createNS("http://www.w3.org/2000/svg","g");Ot.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ot.setAttributeNS(null,"fill","#FFFFFF");const kt=y.createNS("http://www.w3.org/2000/svg","g");kt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Rt=y.createNS("http://www.w3.org/2000/svg","circle");Rt.setAttributeNS(null,"fill","#000000"),Rt.setAttributeNS(null,"opacity","0.25"),Rt.setAttributeNS(null,"cx","5.5"),Rt.setAttributeNS(null,"cy","5.5"),Rt.setAttributeNS(null,"r","5.4999962");const Pt=y.createNS("http://www.w3.org/2000/svg","circle");Pt.setAttributeNS(null,"fill","#FFFFFF"),Pt.setAttributeNS(null,"cx","5.5"),Pt.setAttributeNS(null,"cy","5.5"),Pt.setAttributeNS(null,"r","5.4999962"),kt.appendChild(Rt),kt.appendChild(Pt),N.appendChild(j),N.appendChild(Q),N.appendChild(rt),N.appendChild(Ot),N.appendChild(kt),m.appendChild(N),m.setAttributeNS(null,"height",b*this._scale+"px"),m.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(m),this._offset=a.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(m=>{m.preventDefault()})),this._element.addEventListener("mousedown",(m=>{m.preventDefault()})),Rc(this._element,this._anchor,"marker"),u&&u.className)for(const m of u.className.split(" "))this._element.classList.add(m);this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=a.L.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const M=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(u){return this._offset=a.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ei={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ri=0,Il=!1;const cl={maxWidth:100,unit:"metric"};function hl(A,u,m){const b=m&&m.maxWidth||100,M=A._container.clientHeight/2,C=A.unproject([0,M]),N=A.unproject([b,M]),j=C.distanceTo(N);if(m&&m.unit==="imperial"){const H=3.2808*j;H>5280?hs(u,b,H/5280,A._getUIString("ScaleControl.Miles")):hs(u,b,H,A._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?hs(u,b,j/1852,A._getUIString("ScaleControl.NauticalMiles")):j>=1e3?hs(u,b,j/1e3,A._getUIString("ScaleControl.Kilometers")):hs(u,b,j,A._getUIString("ScaleControl.Meters"))}function hs(A,u,m,b){const M=(function(C){const N=Math.pow(10,`${Math.floor(C)}`.length-1);let j=C/N;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:(function(H){const Q=Math.pow(10,Math.ceil(-Math.log(H)/Math.LN10));return Math.round(H*Q)/Q})(j),N*j})(m);A.style.width=u*(M/m)+"px",A.innerHTML=`${M}&nbsp;${b}`}const so={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},zl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function qs(A){if(A){if(typeof A=="number"){const u=Math.round(Math.abs(A)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,A),"top-left":new a.P(u,u),"top-right":new a.P(-u,u),bottom:new a.P(0,-A),"bottom-left":new a.P(u,-u),"bottom-right":new a.P(-u,-u),left:new a.P(A,0),right:new a.P(-A,0)}}if(A instanceof a.P||Array.isArray(A)){const u=a.P.convert(A);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:a.P.convert(A.center||[0,0]),top:a.P.convert(A.top||[0,0]),"top-left":a.P.convert(A["top-left"]||[0,0]),"top-right":a.P.convert(A["top-right"]||[0,0]),bottom:a.P.convert(A.bottom||[0,0]),"bottom-left":a.P.convert(A["bottom-left"]||[0,0]),"bottom-right":a.P.convert(A["bottom-right"]||[0,0]),left:a.P.convert(A.left||[0,0]),right:a.P.convert(A.right||[0,0])}}return qs(new a.P(0,0))}const vh={extend:(A,...u)=>a.e(A,...u),run(A){A()},logToElement(A,u=!1,m="log"){const b=window.document.getElementById(m);b&&(u&&(b.innerHTML=""),b.innerHTML+=`<br>${A}`)}},xh=g;class di{static get version(){return xh}static get workerCount(){return Qi.workerCount}static set workerCount(u){Qi.workerCount=u}static get maxParallelImageRequests(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(u){a.c.MAX_PARALLEL_IMAGE_REQUESTS=u}static get workerUrl(){return a.c.WORKER_URL}static set workerUrl(u){a.c.WORKER_URL=u}static addProtocol(u,m){a.c.REGISTERED_PROTOCOLS[u]=m}static removeProtocol(u){delete a.c.REGISTERED_PROTOCOLS[u]}}return di.Map=class extends nt{constructor(A){if(a.bg.mark(a.bh.create),(A=a.e({},Je,A)).minZoom!=null&&A.maxZoom!=null&&A.minZoom>A.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(A.minPitch!=null&&A.maxPitch!=null&&A.minPitch>A.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(A.minPitch!=null&&A.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(A.maxPitch!=null&&A.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Xr(A.minZoom,A.maxZoom,A.minPitch,A.maxPitch,A.renderWorldCopies),{bearingSnap:A.bearingSnap}),this._cooperativeGesturesOnWheel=u=>{this._onCooperativeGesture(u,u[this._metaKey],1)},this._contextLost=u=>{u.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=A.interactive,this._cooperativeGestures=A.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=A.maxTileCacheSize,this._maxTileCacheZoomLevels=A.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=A.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=A.preserveDrawingBuffer,this._antialias=A.antialias,this._trackResize=A.trackResize,this._bearingSnap=A.bearingSnap,this._refreshExpiredTiles=A.refreshExpiredTiles,this._fadeDuration=A.fadeDuration,this._crossSourceCollisions=A.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=A.collectResourceTiming,this._renderTaskQueue=new ue,this._controls=[],this._mapId=a.a2(),this._locale=a.e({},ve,A.locale),this._clickTolerance=A.clickTolerance,this._overridePixelRatio=A.pixelRatio,this._maxCanvasSize=A.maxCanvasSize,this.transformCameraUpdate=A.transformCameraUpdate,this._imageQueueHandle=$.addThrottleControl((()=>this.isMoving())),this._requestManager=new Y(A.transformRequest),typeof A.container=="string"){if(this._container=document.getElementById(A.container),!this._container)throw new Error(`Container '${A.container}' not found.`)}else{if(!(A.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=A.container}if(A.maxBounds&&this.setMaxBounds(A.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const m=Vs((b=>{this._trackResize&&!this._removed&&this.resize(b)._update()}),50);this._resizeObserver=new ResizeObserver((b=>{u?m(b):u=!0})),this._resizeObserver.observe(this._container)}this.handlers=new q(this,A),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=A.hash&&new Pl(typeof A.hash=="string"&&A.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:A.center,zoom:A.zoom,bearing:A.bearing,pitch:A.pitch}),A.bounds&&(this.resize(),this.fitBounds(A.bounds,a.e({},A.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=A.localIdeographFontFamily,this._validateStyle=A.validateStyle,A.style&&this.setStyle(A.style,{localIdeographFontFamily:A.localIdeographFontFamily}),A.attributionControl&&this.addControl(new mt({customAttribution:A.customAttribution})),A.maplibreLogo&&this.addControl(new Ft,A.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(u=>{this._update(u.dataType==="style"),this.fire(new a.k(`${u.dataType}data`,u))})),this.on("dataloading",(u=>{this.fire(new a.k(`${u.dataType}dataloading`,u))})),this.on("dataabort",(u=>{this.fire(new a.k("sourcedataabort",u))}))}_getMapId(){return this._mapId}addControl(A,u){if(u===void 0&&(u=A.getDefaultPosition?A.getDefaultPosition():"top-right"),!A||!A.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=A.onAdd(this);this._controls.push(A);const b=this._controlPositions[u];return u.indexOf("bottom")!==-1?b.insertBefore(m,b.firstChild):b.appendChild(m),this}removeControl(A){if(!A||!A.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(A);return u>-1&&this._controls.splice(u,1),A.onRemove(this),this}hasControl(A){return this._controls.indexOf(A)>-1}calculateCameraOptionsFromTo(A,u,m,b){return b==null&&this.terrain&&(b=this.terrain.getElevationForLngLatZoom(m,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(A,u,m,b)}resize(A){var u;const m=this._containerDimensions(),b=m[0],M=m[1],C=this._getClampedPixelRatio(b,M);if(this._resizeCanvas(b,M,C),this.painter.resize(b,M,C),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const H=this._getClampedPixelRatio(b,M);this._resizeCanvas(b,M,H),this.painter.resize(b,M,H)}this.transform.resize(b,M),(u=this._requestedCameraState)===null||u===void 0||u.resize(b,M);const N=!this._moving;return N&&(this.stop(),this.fire(new a.k("movestart",A)).fire(new a.k("move",A))),this.fire(new a.k("resize",A)),N&&this.fire(new a.k("moveend",A)),this}_getClampedPixelRatio(A,u){const{0:m,1:b}=this._maxCanvasSize,M=this.getPixelRatio(),C=A*M,N=u*M;return Math.min(C>m?m/C:1,N>b?b/N:1)*M}getPixelRatio(){var A;return(A=this._overridePixelRatio)!==null&&A!==void 0?A:devicePixelRatio}setPixelRatio(A){this._overridePixelRatio=A,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(A){return this.transform.setMaxBounds(Lt.convert(A)),this._update()}setMinZoom(A){if((A=A??-2)>=-2&&A<=this.transform.maxZoom)return this.transform.minZoom=A,this._update(),this.getZoom()<A&&this.setZoom(A),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(A){if((A=A??22)>=this.transform.minZoom)return this.transform.maxZoom=A,this._update(),this.getZoom()>A&&this.setZoom(A),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(A){if((A=A??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(A>=0&&A<=this.transform.maxPitch)return this.transform.minPitch=A,this._update(),this.getPitch()<A&&this.setPitch(A),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(A){if((A=A??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(A>=this.transform.minPitch)return this.transform.maxPitch=A,this._update(),this.getPitch()>A&&this.setPitch(A),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(A){return this.transform.renderWorldCopies=A,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(A){return this._cooperativeGestures=A,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(A){return this.transform.locationPoint(a.L.convert(A),this.style&&this.terrain)}unproject(A){return this.transform.pointLocation(a.P.convert(A),this.terrain)}isMoving(){var A;return this._moving||((A=this.handlers)===null||A===void 0?void 0:A.isMoving())}isZooming(){var A;return this._zooming||((A=this.handlers)===null||A===void 0?void 0:A.isZooming())}isRotating(){var A;return this._rotating||((A=this.handlers)===null||A===void 0?void 0:A.isRotating())}_createDelegatedListener(A,u,m){if(A==="mouseenter"||A==="mouseover"){let b=!1;return{layer:u,listener:m,delegates:{mousemove:C=>{const N=this.getLayer(u)?this.queryRenderedFeatures(C.point,{layers:[u]}):[];N.length?b||(b=!0,m.call(this,new ca(A,this,C.originalEvent,{features:N}))):b=!1},mouseout:()=>{b=!1}}}}if(A==="mouseleave"||A==="mouseout"){let b=!1;return{layer:u,listener:m,delegates:{mousemove:N=>{(this.getLayer(u)?this.queryRenderedFeatures(N.point,{layers:[u]}):[]).length?b=!0:b&&(b=!1,m.call(this,new ca(A,this,N.originalEvent)))},mouseout:N=>{b&&(b=!1,m.call(this,new ca(A,this,N.originalEvent)))}}}}{const b=M=>{const C=this.getLayer(u)?this.queryRenderedFeatures(M.point,{layers:[u]}):[];C.length&&(M.features=C,m.call(this,M),delete M.features)};return{layer:u,listener:m,delegates:{[A]:b}}}}on(A,u,m){if(m===void 0)return super.on(A,u);const b=this._createDelegatedListener(A,u,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[A]=this._delegatedListeners[A]||[],this._delegatedListeners[A].push(b);for(const M in b.delegates)this.on(M,b.delegates[M]);return this}once(A,u,m){if(m===void 0)return super.once(A,u);const b=this._createDelegatedListener(A,u,m);for(const M in b.delegates)this.once(M,b.delegates[M]);return this}off(A,u,m){return m===void 0?super.off(A,u):(this._delegatedListeners&&this._delegatedListeners[A]&&(b=>{const M=this._delegatedListeners[A];for(let C=0;C<M.length;C++){const N=M[C];if(N.layer===u&&N.listener===m){for(const j in N.delegates)this.off(j,N.delegates[j]);return M.splice(C,1),this}}})(),this)}queryRenderedFeatures(A,u){if(!this.style)return[];let m;const b=A instanceof a.P||Array.isArray(A),M=b?A:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(b?{}:A)||{},M instanceof a.P||typeof M[0]=="number")m=[a.P.convert(M)];else{const C=a.P.convert(M[0]),N=a.P.convert(M[1]);m=[C,new a.P(N.x,C.y),N,new a.P(C.x,N.y),C]}return this.style.queryRenderedFeatures(m,u,this.transform)}querySourceFeatures(A,u){return this.style.querySourceFeatures(A,u)}setStyle(A,u){return(u=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&A?(this._diffStyle(A,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(A,u))}setTransformRequest(A){return this._requestManager.setTransformRequest(A),this}_getUIString(A){const u=this._locale[A];if(u==null)throw new Error(`Missing UI string '${A}'`);return u}_updateStyle(A,u){if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(A,u)));const m=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!A)),A?(this.style=new An(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof A=="string"?this.style.loadURL(A,u,m):this.style.loadJSON(A,u,m),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new An(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(A,u){if(typeof A=="string"){const m=this._requestManager.transformRequest(A,K.Style);a.f(m,((b,M)=>{b?this.fire(new a.j(b)):M&&this._updateDiff(M,u)}))}else typeof A=="object"&&this._updateDiff(A,u)}_updateDiff(A,u){try{this.style.setState(A,u)&&this._update(!0)}catch(m){a.w(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(A,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(A,u){return this._lazyInitEmptyStyle(),this.style.addSource(A,u),this._update(!0)}isSourceLoaded(A){const u=this.style&&this.style.sourceCaches[A];if(u!==void 0)return u.loaded();this.fire(new a.j(new Error(`There is no source with ID '${A}'`)))}setTerrain(A){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),A){const u=this.style.sourceCaches[A.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${A.source}`);for(const m in this.style._layers){const b=this.style._layers[m];b.type==="hillshade"&&b.source===A.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Mn(this.painter,u,A),this.painter.renderToTexture=new vr(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=m=>{m.dataType==="style"?this.terrain.sourceCache.freeRtt():m.dataType==="source"&&m.tile&&(m.sourceId!==A.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(m.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:A})),this}getTerrain(){var A,u;return(u=(A=this.terrain)===null||A===void 0?void 0:A.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const A=this.style&&this.style.sourceCaches;for(const u in A){const m=A[u]._tiles;for(const b in m){const M=m[b];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}addSourceType(A,u,m){return this._lazyInitEmptyStyle(),this.style.addSourceType(A,u,m)}removeSource(A){return this.style.removeSource(A),this._update(!0)}getSource(A){return this.style.getSource(A)}addImage(A,u,m={}){const{pixelRatio:b=1,sdf:M=!1,stretchX:C,stretchY:N,content:j}=m;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||a.a(u))){if(u.width===void 0||u.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:H,height:Q,data:et}=u,rt=u;return this.style.addImage(A,{data:new a.R({width:H,height:Q},new Uint8Array(et)),pixelRatio:b,stretchX:C,stretchY:N,content:j,sdf:M,version:0,userImage:rt}),rt.onAdd&&rt.onAdd(this,A),this}}{const{width:H,height:Q,data:et}=a.h.getImageData(u);this.style.addImage(A,{data:new a.R({width:H,height:Q},et),pixelRatio:b,stretchX:C,stretchY:N,content:j,sdf:M,version:0})}}updateImage(A,u){const m=this.style.getImage(A);if(!m)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=u instanceof HTMLImageElement||a.a(u)?a.h.getImageData(u):u,{width:M,height:C,data:N}=b;if(M===void 0||C===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==m.data.width||C!==m.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(u instanceof HTMLImageElement||a.a(u));return m.data.replace(N,j),this.style.updateImage(A,m),this}getImage(A){return this.style.getImage(A)}hasImage(A){return A?!!this.style.getImage(A):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(A){this.style.removeImage(A)}loadImage(A,u){$.getImage(this._requestManager.transformRequest(A,K.Image),u)}listImages(){return this.style.listImages()}addLayer(A,u){return this._lazyInitEmptyStyle(),this.style.addLayer(A,u),this._update(!0)}moveLayer(A,u){return this.style.moveLayer(A,u),this._update(!0)}removeLayer(A){return this.style.removeLayer(A),this._update(!0)}getLayer(A){return this.style.getLayer(A)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(A,u,m){return this.style.setLayerZoomRange(A,u,m),this._update(!0)}setFilter(A,u,m={}){return this.style.setFilter(A,u,m),this._update(!0)}getFilter(A){return this.style.getFilter(A)}setPaintProperty(A,u,m,b={}){return this.style.setPaintProperty(A,u,m,b),this._update(!0)}getPaintProperty(A,u){return this.style.getPaintProperty(A,u)}setLayoutProperty(A,u,m,b={}){return this.style.setLayoutProperty(A,u,m,b),this._update(!0)}getLayoutProperty(A,u){return this.style.getLayoutProperty(A,u)}setGlyphs(A,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(A,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(A,u,m={}){return this._lazyInitEmptyStyle(),this.style.addSprite(A,u,m,(b=>{b||this._update(!0)})),this}removeSprite(A){return this._lazyInitEmptyStyle(),this.style.removeSprite(A),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(A,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(A,u,(m=>{m||this._update(!0)})),this}setLight(A,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(A,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(A,u){return this.style.setFeatureState(A,u),this._update()}removeFeatureState(A,u){return this.style.removeFeatureState(A,u),this._update()}getFeatureState(A){return this.style.getFeatureState(A)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let A=0,u=0;return this._container&&(A=this._container.clientWidth||400,u=this._container.clientHeight||300),[A,u]}_setupContainer(){const A=this._container;A.classList.add("maplibregl-map");const u=this._canvasContainer=y.create("div","maplibregl-canvas-container",A);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const m=this._containerDimensions(),b=this._getClampedPixelRatio(m[0],m[1]);this._resizeCanvas(m[0],m[1],b);const M=this._controlContainer=y.create("div","maplibregl-control-container",A),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((N=>{C[N]=y.create("div",`maplibregl-ctrl-${N} `,M)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=y.create("div","maplibregl-cooperative-gesture-screen",this._container);let A=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(A=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${A}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){y.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(A,u,m){this._canvas.width=Math.floor(m*A),this._canvas.height=Math.floor(m*u),this._canvas.style.width=`${A}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const A={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let u=null;this._canvas.addEventListener("webglcontextcreationerror",(b=>{u={requestedAttributes:A},b&&(u.statusMessage=b.statusMessage,u.type=b.type)}),{once:!0});const m=this._canvas.getContext("webgl2",A)||this._canvas.getContext("webgl",A);if(!m){const b="Failed to initialize WebGL";throw u?(u.message=b,new Error(JSON.stringify(u))):new Error(b)}this.painter=new Jl(m,this.transform),x.testSupport(m)}_onCooperativeGesture(A,u,m){return!u&&m<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(A){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||A,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(A){return this._update(),this._renderTaskQueue.add(A)}_cancelRenderFrame(A){this._renderTaskQueue.remove(A)}_render(A){const u=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(A),this._removed)return;let m=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const M=this.transform.zoom,C=a.h.now();this.style.zoomHistory.update(M,C);const N=new a.a8(M,{now:C,fadeDuration:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),j=N.crossFadingFactor();j===1&&j===this._crossFadingFactor||(m=!0,this._crossFadingFactor=j),this.style.update(N)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,u,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:u,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bg.mark(a.bh.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||m)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,a.bg.mark(a.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var A;this._hash&&this._hash.remove();for(const m of this._controls)m.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(A=this._resizeObserver)===null||A===void 0||A.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),a.bg.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.h.frame((A=>{a.bg.frame(A),this._frame=null,this._render(A)})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(A){this._showTileBoundaries!==A&&(this._showTileBoundaries=A,this._update())}get showPadding(){return!!this._showPadding}set showPadding(A){this._showPadding!==A&&(this._showPadding=A,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(A){this._showCollisionBoxes!==A&&(this._showCollisionBoxes=A,A?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(A){this._showOverdrawInspector!==A&&(this._showOverdrawInspector=A,this._update())}get repaint(){return!!this._repaint}set repaint(A){this._repaint!==A&&(this._repaint=A,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(A){this._vertices=A,this._update()}get version(){return sn}getCameraTargetElevation(){return this.transform.elevation}},di.NavigationControl=class{constructor(A){this._updateZoomButtons=()=>{const u=this._map.getZoom(),m=u===this._map.getMaxZoom(),b=u===this._map.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())},this._rotateCompassArrow=()=>{const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=u},this._setButtonTitle=(u,m)=>{const b=this._map._getUIString(`NavigationControl.${m}`);u.title=b,u.setAttribute("aria-label",b)},this.options=a.e({},ui,A),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(u=>this._map.zoomIn({},{originalEvent:u}))),y.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(u=>this._map.zoomOut({},{originalEvent:u}))),y.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})})),this._compassIcon=y.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(A){return this._map=A,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Io(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(A,u){const m=y.create("button",A,this._container);return m.type="button",m.addEventListener("click",u),m}},di.GeolocateControl=class extends a.E{constructor(A){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",u)),this._finish()}},this._updateCamera=u=>{const m=new a.L(u.coords.longitude,u.coords.latitude),b=u.coords.accuracy,M=this._map.getBearing(),C=a.e({bearing:M},this.options.fitBoundsOptions),N=Lt.fromLngLat(m,b);this._map.fitBounds(N,C,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const m=new a.L(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=u=>{if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&Il)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=u=>{if(this._map){if(this._container.addEventListener("contextmenu",(m=>m.preventDefault())),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",u===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{const m=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ki({element:this._dotElement}),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ki({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(m=>{m.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m.originalEvent&&m.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")))}))}},this.options=a.e({},Ei,A)}onAdd(A){return this._map=A,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),(function(u,m=!1){bi===void 0||m?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then((b=>{bi=b.state!=="denied",u(bi)})).catch((()=>{bi=!!window.navigator.geolocation,u(bi)})):(bi=!!window.navigator.geolocation,u(bi)):u(bi)})(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ri=0,Il=!1}_isOutOfMapMaxBounds(A){const u=this._map.getMaxBounds(),m=A.coords;return u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const A=this._map.getBounds(),u=A.getSouthEast(),m=A.getNorthEast(),b=u.distanceTo(m),M=Math.ceil(this._accuracy/(b/this._map._container.clientHeight)*2);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ri--,Il=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let A;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ri++,Ri>1?(A={maximumAge:6e5,timeout:0},Il=!0):(A=this.options.positionOptions,Il=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,A)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},di.AttributionControl=mt,di.LogoControl=Ft,di.ScaleControl=class{constructor(A){this._onMove=()=>{hl(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,hl(this._map,this._container,this.options)},this.options=a.e({},cl,A)}getDefaultPosition(){return"bottom-left"}onAdd(A){return this._map=A,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale",A.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},di.FullscreenControl=class extends a.E{constructor(A={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,A&&A.container&&(A.container instanceof HTMLElement?this._container=A.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(A){return this._map=A,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const A=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon",A).setAttribute("aria-hidden","true"),A.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const A=this._getTitle();this._fullscreenButton.setAttribute("aria-label",A),this._fullscreenButton.title=A}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},di.TerrainControl=class{constructor(A){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=A}onAdd(A){return this._map=A,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},di.Popup=class extends a.E{constructor(A){super(),this.remove=()=>(this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.k("close")),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=y.create("div","maplibregl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const N of this.options.className.split(" "))this._container.classList.add(N);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Eu(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!u)return;const m=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);let b=this.options.anchor;const M=qs(this.options.offset);if(!b){const N=this._container.offsetWidth,j=this._container.offsetHeight;let H;H=m.y+M.bottom.y<j?["top"]:m.y>this._map.transform.height-j?["bottom"]:[],m.x<N/2?H.push("left"):m.x>this._map.transform.width-N/2&&H.push("right"),b=H.length===0?"bottom":H.join("-")}const C=m.add(M[b]).round();y.setTransform(this._container,`${Kr[b]} translate(${C.x}px,${C.y}px)`),Rc(this._container,b,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(so),A)}addTo(A){return this._map&&this.remove(),this._map=A,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(A){return this._lngLat=a.L.convert(A),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(A){return this.setDOMContent(document.createTextNode(A))}setHTML(A){const u=document.createDocumentFragment(),m=document.createElement("body");let b;for(m.innerHTML=A;b=m.firstChild,b;)u.appendChild(b);return this.setDOMContent(u)}getMaxWidth(){var A;return(A=this._container)===null||A===void 0?void 0:A.style.maxWidth}setMaxWidth(A){return this.options.maxWidth=A,this._update(),this}setDOMContent(A){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(A),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(A){this._container&&this._container.classList.add(A)}removeClassName(A){this._container&&this._container.classList.remove(A)}setOffset(A){return this.options.offset=A,this._update(),this}toggleClassName(A){if(this._container)return this._container.classList.toggle(A)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const A=this._container.querySelector(zl);A&&A.focus()}},di.Marker=Ki,di.Style=An,di.LngLat=a.L,di.LngLatBounds=Lt,di.Point=a.P,di.MercatorCoordinate=a.U,di.Evented=a.E,di.AJAXError=a.bi,di.config=a.c,di.CanvasSource=de,di.GeoJSONSource=Ne,di.ImageSource=Ce,di.RasterDEMTileSource=Me,di.RasterTileSource=ce,di.VectorTileSource=re,di.VideoSource=Ee,di.setRTLTextPlugin=a.bj,di.getRTLTextPluginStatus=a.bk,di.prewarm=function(){Dr().acquire(fn)},di.clearPrewarmedResources=function(){const A=Ui;A&&(A.isPreloaded()&&A.numActive()===1?(A.release(fn),Ui=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},vh.extend(di,{isSafari:a.ac,getPerformanceMetrics:a.bg.getPerformanceMetrics}),di}));var c=r;return c}))})(P0)),P0.exports}var wz=d7();const Sz=yu(wz),p7=iD({__proto__:null,default:Sz},[wz]);var k0={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var m7=k0.exports,uC;function g7(){return uC||(uC=1,(function(t,e){((n,i)=>{t.exports=i()})(m7,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r,s=!i.document&&!!i.postMessage,c=i.IS_PAPA_WORKER||!1,a={},g=0,y={};function x(it){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(ut){var xt=J(ut);xt.chunkSize=parseInt(xt.chunkSize),ut.step||ut.chunk||(xt.chunkSize=null),this._handle=new V(xt),(this._handle.streamer=this)._config=xt}).call(this,it),this.parseChunk=function(ut,xt){var wt=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<wt){let le=this._config.newline;le||(St=this._config.quoteChar||'"',le=this._handle.guessLineEndings(ut,St)),ut=[...ut.split(le).slice(wt)].join(le)}this.isFirstChunk&&ct(this._config.beforeFirstChunk)&&(St=this._config.beforeFirstChunk(ut))!==void 0&&(ut=St),this.isFirstChunk=!1,this._halted=!1;var wt=this._partialLine+ut,St=(this._partialLine="",this._handle.parse(wt,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(ut=St.meta.cursor,wt=(this._finished||(this._partialLine=wt.substring(ut-this._baseIndex),this._baseIndex=ut),St&&St.data&&(this._rowCount+=St.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),c)i.postMessage({results:St,workerId:y.WORKER_ID,finished:wt});else if(ct(this._config.chunk)&&!xt){if(this._config.chunk(St,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=St=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(St.data),this._completeResults.errors=this._completeResults.errors.concat(St.errors),this._completeResults.meta=St.meta),this._completed||!wt||!ct(this._config.complete)||St&&St.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),wt||St&&St.meta.paused||this._nextChunk(),St}this._halted=!0},this._sendError=function(ut){ct(this._config.error)?this._config.error(ut):c&&this._config.error&&i.postMessage({workerId:y.WORKER_ID,error:ut,finished:!1})}}function E(it){var ut;(it=it||{}).chunkSize||(it.chunkSize=y.RemoteChunkSize),x.call(this,it),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(xt){this._input=xt,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(ut=new XMLHttpRequest,this._config.withCredentials&&(ut.withCredentials=this._config.withCredentials),s||(ut.onload=st(this._chunkLoaded,this),ut.onerror=st(this._chunkError,this)),ut.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var xt,wt=this._config.downloadRequestHeaders;for(xt in wt)ut.setRequestHeader(xt,wt[xt])}var St;this._config.chunkSize&&(St=this._start+this._config.chunkSize-1,ut.setRequestHeader("Range","bytes="+this._start+"-"+St));try{ut.send(this._config.downloadRequestBody)}catch(le){this._chunkError(le.message)}s&&ut.status===0&&this._chunkError()}},this._chunkLoaded=function(){ut.readyState===4&&(ut.status<200||400<=ut.status?this._chunkError():(this._start+=this._config.chunkSize||ut.responseText.length,this._finished=!this._config.chunkSize||this._start>=(xt=>(xt=xt.getResponseHeader("Content-Range"))!==null?parseInt(xt.substring(xt.lastIndexOf("/")+1)):-1)(ut),this.parseChunk(ut.responseText)))},this._chunkError=function(xt){xt=ut.statusText||xt,this._sendError(new Error(xt))}}function O(it){(it=it||{}).chunkSize||(it.chunkSize=y.LocalChunkSize),x.call(this,it);var ut,xt,wt=typeof FileReader<"u";this.stream=function(St){this._input=St,xt=St.slice||St.webkitSlice||St.mozSlice,wt?((ut=new FileReader).onload=st(this._chunkLoaded,this),ut.onerror=st(this._chunkError,this)):ut=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var St=this._input,le=(this._config.chunkSize&&(le=Math.min(this._start+this._config.chunkSize,this._input.size),St=xt.call(St,this._start,le)),ut.readAsText(St,this._config.encoding));wt||this._chunkLoaded({target:{result:le}})},this._chunkLoaded=function(St){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(St.target.result)},this._chunkError=function(){this._sendError(ut.error)}}function I(it){var ut;x.call(this,it=it||{}),this.stream=function(xt){return ut=xt,this._nextChunk()},this._nextChunk=function(){var xt,wt;if(!this._finished)return xt=this._config.chunkSize,ut=xt?(wt=ut.substring(0,xt),ut.substring(xt)):(wt=ut,""),this._finished=!ut,this.parseChunk(wt)}}function F(it){x.call(this,it=it||{});var ut=[],xt=!0,wt=!1;this.pause=function(){x.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){x.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(St){this._input=St,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){wt&&ut.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),ut.length?this.parseChunk(ut.shift()):xt=!0},this._streamData=st(function(St){try{ut.push(typeof St=="string"?St:St.toString(this._config.encoding)),xt&&(xt=!1,this._checkIsFinished(),this.parseChunk(ut.shift()))}catch(le){this._streamError(le)}},this),this._streamError=st(function(St){this._streamCleanUp(),this._sendError(St)},this),this._streamEnd=st(function(){this._streamCleanUp(),wt=!0,this._streamData("")},this),this._streamCleanUp=st(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function V(it){var ut,xt,wt,St,le=Math.pow(2,53),pe=-le,Te=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Nt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Ct=this,Tt=0,Bt=0,$t=!1,ft=!1,Mt=[],Lt={data:[],errors:[],meta:{}};function Xt(Ne){return it.skipEmptyLines==="greedy"?Ne.join("").trim()==="":Ne.length===1&&Ne[0].length===0}function re(){if(Lt&&wt&&(Me("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+y.DefaultDelimiter+"'"),wt=!1),it.skipEmptyLines&&(Lt.data=Lt.data.filter(function(Ee){return!Xt(Ee)})),ce()){let Ee=function(de,on){ct(it.transformHeader)&&(de=it.transformHeader(de,on)),Mt.push(de)};if(Lt)if(Array.isArray(Lt.data[0])){for(var Ne=0;ce()&&Ne<Lt.data.length;Ne++)Lt.data[Ne].forEach(Ee);Lt.data.splice(0,1)}else Lt.data.forEach(Ee)}function Gt(Ee,de){for(var on=it.header?{}:[],Be=0;Be<Ee.length;Be++){var ln=Be,Xe=Ee[Be],Xe=((Sn,hn)=>(Rn=>(it.dynamicTypingFunction&&it.dynamicTyping[Rn]===void 0&&(it.dynamicTyping[Rn]=it.dynamicTypingFunction(Rn)),(it.dynamicTyping[Rn]||it.dynamicTyping)===!0))(Sn)?hn==="true"||hn==="TRUE"||hn!=="false"&&hn!=="FALSE"&&((Rn=>{if(Te.test(Rn)&&(Rn=parseFloat(Rn),pe<Rn&&Rn<le))return 1})(hn)?parseFloat(hn):Nt.test(hn)?new Date(hn):hn===""?null:hn):hn)(ln=it.header?Be>=Mt.length?"__parsed_extra":Mt[Be]:ln,Xe=it.transform?it.transform(Xe,ln):Xe);ln==="__parsed_extra"?(on[ln]=on[ln]||[],on[ln].push(Xe)):on[ln]=Xe}return it.header&&(Be>Mt.length?Me("FieldMismatch","TooManyFields","Too many fields: expected "+Mt.length+" fields but parsed "+Be,Bt+de):Be<Mt.length&&Me("FieldMismatch","TooFewFields","Too few fields: expected "+Mt.length+" fields but parsed "+Be,Bt+de)),on}var Ce;Lt&&(it.header||it.dynamicTyping||it.transform)&&(Ce=1,!Lt.data.length||Array.isArray(Lt.data[0])?(Lt.data=Lt.data.map(Gt),Ce=Lt.data.length):Lt.data=Gt(Lt.data,0),it.header&&Lt.meta&&(Lt.meta.fields=Mt),Bt+=Ce)}function ce(){return it.header&&Mt.length===0}function Me(Ne,Gt,Ce,Ee){Ne={type:Ne,code:Gt,message:Ce},Ee!==void 0&&(Ne.row=Ee),Lt.errors.push(Ne)}ct(it.step)&&(St=it.step,it.step=function(Ne){Lt=Ne,ce()?re():(re(),Lt.data.length!==0&&(Tt+=Ne.data.length,it.preview&&Tt>it.preview?xt.abort():(Lt.data=Lt.data[0],St(Lt,Ct))))}),this.parse=function(Ne,Gt,Ce){var Ee=it.quoteChar||'"',Ee=(it.newline||(it.newline=this.guessLineEndings(Ne,Ee)),wt=!1,it.delimiter?ct(it.delimiter)&&(it.delimiter=it.delimiter(Ne),Lt.meta.delimiter=it.delimiter):((Ee=((de,on,Be,ln,Xe)=>{var Sn,hn,Rn,ge;Xe=Xe||[",","	","|",";",y.RECORD_SEP,y.UNIT_SEP];for(var Gn=0;Gn<Xe.length;Gn++){for(var $i,ni=Xe[Gn],fn=0,Qi=0,mi=0,Ui=(Rn=void 0,new K({comments:ln,delimiter:ni,newline:on,preview:10}).parse(de)),Dr=0;Dr<Ui.data.length;Dr++)Be&&Xt(Ui.data[Dr])?mi++:($i=Ui.data[Dr].length,Qi+=$i,Rn===void 0?Rn=$i:0<$i&&(fn+=Math.abs($i-Rn),Rn=$i));0<Ui.data.length&&(Qi/=Ui.data.length-mi),(hn===void 0||fn<=hn)&&(ge===void 0||ge<Qi)&&1.99<Qi&&(hn=fn,Sn=ni,ge=Qi)}return{successful:!!(it.delimiter=Sn),bestDelimiter:Sn}})(Ne,it.newline,it.skipEmptyLines,it.comments,it.delimitersToGuess)).successful?it.delimiter=Ee.bestDelimiter:(wt=!0,it.delimiter=y.DefaultDelimiter),Lt.meta.delimiter=it.delimiter),J(it));return it.preview&&it.header&&Ee.preview++,ut=Ne,xt=new K(Ee),Lt=xt.parse(ut,Gt,Ce),re(),$t?{meta:{paused:!0}}:Lt||{meta:{paused:!1}}},this.paused=function(){return $t},this.pause=function(){$t=!0,xt.abort(),ut=ct(it.chunk)?"":ut.substring(xt.getCharIndex())},this.resume=function(){Ct.streamer._halted?($t=!1,Ct.streamer.parseChunk(ut,!0)):setTimeout(Ct.resume,3)},this.aborted=function(){return ft},this.abort=function(){ft=!0,xt.abort(),Lt.meta.aborted=!0,ct(it.complete)&&it.complete(Lt),ut=""},this.guessLineEndings=function(de,Ee){de=de.substring(0,1048576);var Ee=new RegExp($(Ee)+"([^]*?)"+$(Ee),"gm"),Ce=(de=de.replace(Ee,"")).split("\r"),Ee=de.split(`
`),de=1<Ee.length&&Ee[0].length<Ce[0].length;if(Ce.length===1||de)return`
`;for(var on=0,Be=0;Be<Ce.length;Be++)Ce[Be][0]===`
`&&on++;return on>=Ce.length/2?`\r
`:"\r"}}function $(it){return it.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function K(it){var ut=(it=it||{}).delimiter,xt=it.newline,wt=it.comments,St=it.step,le=it.preview,pe=it.fastMode,Te=null,Nt=!1,Ct=it.quoteChar==null?'"':it.quoteChar,Tt=Ct;if(it.escapeChar!==void 0&&(Tt=it.escapeChar),(typeof ut!="string"||-1<y.BAD_DELIMITERS.indexOf(ut))&&(ut=","),wt===ut)throw new Error("Comment character same as delimiter");wt===!0?wt="#":(typeof wt!="string"||-1<y.BAD_DELIMITERS.indexOf(wt))&&(wt=!1),xt!==`
`&&xt!=="\r"&&xt!==`\r
`&&(xt=`
`);var Bt=0,$t=!1;this.parse=function(ft,Mt,Lt){if(typeof ft!="string")throw new Error("Input must be a string");var Xt=ft.length,re=ut.length,ce=xt.length,Me=wt.length,Ne=ct(St),Gt=[],Ce=[],Ee=[],de=Bt=0;if(!ft)return fn();if(pe||pe!==!1&&ft.indexOf(Ct)===-1){for(var on=ft.split(xt),Be=0;Be<on.length;Be++){if(Ee=on[Be],Bt+=Ee.length,Be!==on.length-1)Bt+=xt.length;else if(Lt)return fn();if(!wt||Ee.substring(0,Me)!==wt){if(Ne){if(Gt=[],ge(Ee.split(ut)),Qi(),$t)return fn()}else ge(Ee.split(ut));if(le&&le<=Be)return Gt=Gt.slice(0,le),fn(!0)}}return fn()}for(var ln=ft.indexOf(ut,Bt),Xe=ft.indexOf(xt,Bt),Sn=new RegExp($(Tt)+$(Ct),"g"),hn=ft.indexOf(Ct,Bt);;)if(ft[Bt]===Ct)for(hn=Bt,Bt++;;){if((hn=ft.indexOf(Ct,hn+1))===-1)return Lt||Ce.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Gt.length,index:Bt}),$i();if(hn===Xt-1)return $i(ft.substring(Bt,hn).replace(Sn,Ct));if(Ct===Tt&&ft[hn+1]===Tt)hn++;else if(Ct===Tt||hn===0||ft[hn-1]!==Tt){ln!==-1&&ln<hn+1&&(ln=ft.indexOf(ut,hn+1));var Rn=Gn((Xe=Xe!==-1&&Xe<hn+1?ft.indexOf(xt,hn+1):Xe)===-1?ln:Math.min(ln,Xe));if(ft.substr(hn+1+Rn,re)===ut){Ee.push(ft.substring(Bt,hn).replace(Sn,Ct)),ft[Bt=hn+1+Rn+re]!==Ct&&(hn=ft.indexOf(Ct,Bt)),ln=ft.indexOf(ut,Bt),Xe=ft.indexOf(xt,Bt);break}if(Rn=Gn(Xe),ft.substring(hn+1+Rn,hn+1+Rn+ce)===xt){if(Ee.push(ft.substring(Bt,hn).replace(Sn,Ct)),ni(hn+1+Rn+ce),ln=ft.indexOf(ut,Bt),hn=ft.indexOf(Ct,Bt),Ne&&(Qi(),$t))return fn();if(le&&Gt.length>=le)return fn(!0);break}Ce.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Gt.length,index:Bt}),hn++}}else if(wt&&Ee.length===0&&ft.substring(Bt,Bt+Me)===wt){if(Xe===-1)return fn();Bt=Xe+ce,Xe=ft.indexOf(xt,Bt),ln=ft.indexOf(ut,Bt)}else if(ln!==-1&&(ln<Xe||Xe===-1))Ee.push(ft.substring(Bt,ln)),Bt=ln+re,ln=ft.indexOf(ut,Bt);else{if(Xe===-1)break;if(Ee.push(ft.substring(Bt,Xe)),ni(Xe+ce),Ne&&(Qi(),$t))return fn();if(le&&Gt.length>=le)return fn(!0)}return $i();function ge(mi){Gt.push(mi),de=Bt}function Gn(mi){var Ui=0;return Ui=mi!==-1&&(mi=ft.substring(hn+1,mi))&&mi.trim()===""?mi.length:Ui}function $i(mi){return Lt||(mi===void 0&&(mi=ft.substring(Bt)),Ee.push(mi),Bt=Xt,ge(Ee),Ne&&Qi()),fn()}function ni(mi){Bt=mi,ge(Ee),Ee=[],Xe=ft.indexOf(xt,Bt)}function fn(mi){if(it.header&&!Mt&&Gt.length&&!Nt){var Ui=Gt[0],Dr=Object.create(null),ws=new Set(Ui);let Oa=!1;for(let Vr=0;Vr<Ui.length;Vr++){let Fe=Ui[Vr];if(Dr[Fe=ct(it.transformHeader)?it.transformHeader(Fe,Vr):Fe]){let yr,Yn=Dr[Fe];for(;yr=Fe+"_"+Yn,Yn++,ws.has(yr););ws.add(yr),Ui[Vr]=yr,Dr[Fe]++,Oa=!0,(Te=Te===null?{}:Te)[yr]=Fe}else Dr[Fe]=1,Ui[Vr]=Fe;ws.add(Fe)}Oa&&console.warn("Duplicate headers found and renamed."),Nt=!0}return{data:Gt,errors:Ce,meta:{delimiter:ut,linebreak:xt,aborted:$t,truncated:!!mi,cursor:de+(Mt||0),renamedHeaders:Te}}}function Qi(){St(fn()),Gt=[],Ce=[]}},this.abort=function(){$t=!0},this.getCharIndex=function(){return Bt}}function Y(it){var ut=it.data,xt=a[ut.workerId],wt=!1;if(ut.error)xt.userError(ut.error,ut.file);else if(ut.results&&ut.results.data){var St={abort:function(){wt=!0,W(ut.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:X,resume:X};if(ct(xt.userStep)){for(var le=0;le<ut.results.data.length&&(xt.userStep({data:ut.results.data[le],errors:ut.results.errors,meta:ut.results.meta},St),!wt);le++);delete ut.results}else ct(xt.userChunk)&&(xt.userChunk(ut.results,St,ut.file),delete ut.results)}ut.finished&&!wt&&W(ut.workerId,ut.results)}function W(it,ut){var xt=a[it];ct(xt.userComplete)&&xt.userComplete(ut),xt.terminate(),delete a[it]}function X(){throw new Error("Not implemented.")}function J(it){if(typeof it!="object"||it===null)return it;var ut,xt=Array.isArray(it)?[]:{};for(ut in it)xt[ut]=J(it[ut]);return xt}function st(it,ut){return function(){it.apply(ut,arguments)}}function ct(it){return typeof it=="function"}return y.parse=function(it,ut){var xt=(ut=ut||{}).dynamicTyping||!1;if(ct(xt)&&(ut.dynamicTypingFunction=xt,xt={}),ut.dynamicTyping=xt,ut.transform=!!ct(ut.transform)&&ut.transform,!ut.worker||!y.WORKERS_SUPPORTED)return xt=null,y.NODE_STREAM_INPUT,typeof it=="string"?(it=(wt=>wt.charCodeAt(0)!==65279?wt:wt.slice(1))(it),xt=new(ut.download?E:I)(ut)):it.readable===!0&&ct(it.read)&&ct(it.on)?xt=new F(ut):(i.File&&it instanceof File||it instanceof Object)&&(xt=new O(ut)),xt.stream(it);(xt=(()=>{var wt;return!!y.WORKERS_SUPPORTED&&(wt=(()=>{var St=i.URL||i.webkitURL||null,le=n.toString();return y.BLOB_URL||(y.BLOB_URL=St.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",le,")();"],{type:"text/javascript"})))})(),(wt=new i.Worker(wt)).onmessage=Y,wt.id=g++,a[wt.id]=wt)})()).userStep=ut.step,xt.userChunk=ut.chunk,xt.userComplete=ut.complete,xt.userError=ut.error,ut.step=ct(ut.step),ut.chunk=ct(ut.chunk),ut.complete=ct(ut.complete),ut.error=ct(ut.error),delete ut.worker,xt.postMessage({input:it,config:ut,workerId:xt.id})},y.unparse=function(it,ut){var xt=!1,wt=!0,St=",",le=`\r
`,pe='"',Te=pe+pe,Nt=!1,Ct=null,Tt=!1,Bt=((()=>{if(typeof ut=="object"){if(typeof ut.delimiter!="string"||y.BAD_DELIMITERS.filter(function(Mt){return ut.delimiter.indexOf(Mt)!==-1}).length||(St=ut.delimiter),typeof ut.quotes!="boolean"&&typeof ut.quotes!="function"&&!Array.isArray(ut.quotes)||(xt=ut.quotes),typeof ut.skipEmptyLines!="boolean"&&typeof ut.skipEmptyLines!="string"||(Nt=ut.skipEmptyLines),typeof ut.newline=="string"&&(le=ut.newline),typeof ut.quoteChar=="string"&&(pe=ut.quoteChar),typeof ut.header=="boolean"&&(wt=ut.header),Array.isArray(ut.columns)){if(ut.columns.length===0)throw new Error("Option columns is empty");Ct=ut.columns}ut.escapeChar!==void 0&&(Te=ut.escapeChar+pe),ut.escapeFormulae instanceof RegExp?Tt=ut.escapeFormulae:typeof ut.escapeFormulae=="boolean"&&ut.escapeFormulae&&(Tt=/^[=+\-@\t\r].*$/)}})(),new RegExp($(pe),"g"));if(typeof it=="string"&&(it=JSON.parse(it)),Array.isArray(it)){if(!it.length||Array.isArray(it[0]))return $t(null,it,Nt);if(typeof it[0]=="object")return $t(Ct||Object.keys(it[0]),it,Nt)}else if(typeof it=="object")return typeof it.data=="string"&&(it.data=JSON.parse(it.data)),Array.isArray(it.data)&&(it.fields||(it.fields=it.meta&&it.meta.fields||Ct),it.fields||(it.fields=Array.isArray(it.data[0])?it.fields:typeof it.data[0]=="object"?Object.keys(it.data[0]):[]),Array.isArray(it.data[0])||typeof it.data[0]=="object"||(it.data=[it.data])),$t(it.fields||[],it.data||[],Nt);throw new Error("Unable to serialize unrecognized input");function $t(Mt,Lt,Xt){var re="",ce=(typeof Mt=="string"&&(Mt=JSON.parse(Mt)),typeof Lt=="string"&&(Lt=JSON.parse(Lt)),Array.isArray(Mt)&&0<Mt.length),Me=!Array.isArray(Lt[0]);if(ce&&wt){for(var Ne=0;Ne<Mt.length;Ne++)0<Ne&&(re+=St),re+=ft(Mt[Ne],Ne);0<Lt.length&&(re+=le)}for(var Gt=0;Gt<Lt.length;Gt++){var Ce=(ce?Mt:Lt[Gt]).length,Ee=!1,de=ce?Object.keys(Lt[Gt]).length===0:Lt[Gt].length===0;if(Xt&&!ce&&(Ee=Xt==="greedy"?Lt[Gt].join("").trim()==="":Lt[Gt].length===1&&Lt[Gt][0].length===0),Xt==="greedy"&&ce){for(var on=[],Be=0;Be<Ce;Be++){var ln=Me?Mt[Be]:Be;on.push(Lt[Gt][ln])}Ee=on.join("").trim()===""}if(!Ee){for(var Xe=0;Xe<Ce;Xe++){0<Xe&&!de&&(re+=St);var Sn=ce&&Me?Mt[Xe]:Xe;re+=ft(Lt[Gt][Sn],Xe)}Gt<Lt.length-1&&(!Xt||0<Ce&&!de)&&(re+=le)}}return re}function ft(Mt,Lt){var Xt,re;return Mt==null?"":Mt.constructor===Date?JSON.stringify(Mt).slice(1,25):(re=!1,Tt&&typeof Mt=="string"&&Tt.test(Mt)&&(Mt="'"+Mt,re=!0),Xt=Mt.toString().replace(Bt,Te),(re=re||xt===!0||typeof xt=="function"&&xt(Mt,Lt)||Array.isArray(xt)&&xt[Lt]||((ce,Me)=>{for(var Ne=0;Ne<Me.length;Ne++)if(-1<ce.indexOf(Me[Ne]))return!0;return!1})(Xt,y.BAD_DELIMITERS)||-1<Xt.indexOf(St)||Xt.charAt(0)===" "||Xt.charAt(Xt.length-1)===" ")?pe+Xt+pe:Xt)}},y.RECORD_SEP="",y.UNIT_SEP="",y.BYTE_ORDER_MARK="\uFEFF",y.BAD_DELIMITERS=["\r",`
`,'"',y.BYTE_ORDER_MARK],y.WORKERS_SUPPORTED=!s&&!!i.Worker,y.NODE_STREAM_INPUT=1,y.LocalChunkSize=10485760,y.RemoteChunkSize=5242880,y.DefaultDelimiter=",",y.Parser=K,y.ParserHandle=V,y.NetworkStreamer=E,y.FileStreamer=O,y.StringStreamer=I,y.ReadableStreamStreamer=F,i.jQuery&&((r=i.jQuery).fn.parse=function(it){var ut=it.config||{},xt=[];return this.each(function(le){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var pe=0;pe<this.files.length;pe++)xt.push({file:this.files[pe],inputElem:this,instanceConfig:r.extend({},ut)})}),wt(),this;function wt(){if(xt.length===0)ct(it.complete)&&it.complete();else{var le,pe,Te,Nt,Ct=xt[0];if(ct(it.before)){var Tt=it.before(Ct.file,Ct.inputElem);if(typeof Tt=="object"){if(Tt.action==="abort")return le="AbortError",pe=Ct.file,Te=Ct.inputElem,Nt=Tt.reason,void(ct(it.error)&&it.error({name:le},pe,Te,Nt));if(Tt.action==="skip")return void St();typeof Tt.config=="object"&&(Ct.instanceConfig=r.extend(Ct.instanceConfig,Tt.config))}else if(Tt==="skip")return void St()}var Bt=Ct.instanceConfig.complete;Ct.instanceConfig.complete=function($t){ct(Bt)&&Bt($t,Ct.file,Ct.inputElem),St()},y.parse(Ct.file,Ct.instanceConfig)}}function St(){xt.splice(0,1),wt()}}),c&&(i.onmessage=function(it){it=it.data,y.WORKER_ID===void 0&&it&&(y.WORKER_ID=it.workerId),typeof it.input=="string"?i.postMessage({workerId:y.WORKER_ID,results:y.parse(it.input,it.config),finished:!0}):(i.File&&it.input instanceof File||it.input instanceof Object)&&(it=y.parse(it.input,it.config))&&i.postMessage({workerId:y.WORKER_ID,results:it,finished:!0})}),(E.prototype=Object.create(x.prototype)).constructor=E,(O.prototype=Object.create(x.prototype)).constructor=O,(I.prototype=Object.create(I.prototype)).constructor=I,(F.prototype=Object.create(x.prototype)).constructor=F,y})})(k0)),k0.exports}var y7=g7();const _7=yu(y7),v7=`
.heatbox { display:flex; flex-direction:column; gap:10px; height:100%; }
.hb-legend { display:flex; gap:8px; align-items:center; font-size:12px; color:#666; }
.hb-legend i { display:inline-block; width:160px; height:10px; border-radius:999px; }
.hb-monthbar { display:flex; gap:4px; align-items:center; padding:8px 0; }
.hb-m { min-width:36px; height:28px; border:1px solid #e5e7eb; background:#fff; border-radius:6px; font-size:13px; cursor:pointer; }
.hb-m[disabled] { opacity:.35; cursor:not-allowed; }
.hb-m.active { background:#ffedd5; border-color:#fdba74; font-weight:700; }
.hb-btn { height:28px; padding:0 10px; border:1px solid #ddd; border-radius:8px; background:#fff; cursor:pointer; font-size:12px; }
.hb-warn { margin-top:6px; padding:10px 12px; border:1px solid #ffe58f; background:#fffbe6; border-radius:8px; color:#8b5e00; font-size:13px; }
`,u0=t=>t<10?`0${t}`:String(t),cC=t=>String(t??"").replace(/\D+/g,""),x7=t=>`${t.slice(0,4)}-${t.slice(4,6)}`,T1=t=>String(t??"").toLowerCase().replace(/\([^)]*\)/g,"").replace(/[^\w-]+/g," ").replace(/\s+/g,"").trim(),by={ym:["","","","yyyymm","ym","month","","","(yyyymm)"],sgg5:["","sigcd","sggcd","adm_drcd","adm_cd5","sig_cd5","code"],law10:["","10","adm_cd","","","hid_cd"],elec:["","","","","electricity","mwh","elec"],gas:["","","gas","gj","citygas",""]},wy=(t,e)=>{const n=t.map(i=>[i,T1(i)]);for(const i of e){const r=n.find(([,s])=>s===T1(i));if(r)return r[0]}for(const i of e){const r=n.find(([,s])=>s.includes(T1(i)));if(r)return r[0]}return null};function b7(t){const e=(i,r)=>{for(const s of i)if(typeof s[0]=="number"){const[c,a]=s;r.minX=Math.min(r.minX,c),r.maxX=Math.max(r.maxX,c),r.minY=Math.min(r.minY,a),r.maxY=Math.max(r.maxY,a)}else e(s,r)};if(!t)return null;const n={minX:999,maxX:-999,minY:999,maxY:-999};if(t.type==="Polygon")e(t.coordinates,n);else if(t.type==="MultiPolygon")e(t.coordinates,n);else return null;return[(n.minX+n.maxX)/2,(n.minY+n.maxY)/2]}function Tz({csvUrl:t="/__2020-2025__v2.csv",sggGeoUrl:e="/korea/sgg.json",forceYmKey:n,forceSggKey:i,forceElecKey:r,forceGasKey:s,year:c,metric:a="elec",autoPlay:g=!1,intervalMs:y=900}){const[x,E]=Z.useState(""),[O]=Z.useState(!0),[I,F]=Z.useState([]),[V,$]=Z.useState(0),[K,Y]=Z.useState(g),[W]=Z.useState(1),[X,J]=Z.useState(!1),st=String(c??""),ct=I[V]||"-",it=Z.useRef(new Map),ut=Z.useRef({elec:new Map,gas:new Map}),[xt,wt]=Z.useState(!1);Z.useEffect(()=>{(async()=>{try{const Ct=await fetch(e);if(!Ct.ok)throw new Error(`HTTP ${Ct.status}`);const Tt=await Ct.json(),Bt=new Map;for(const $t of Tt.features||[]){const ft=$t.properties||{},Mt=ft.SIG_CD??ft.SGG_CD??ft.ADM_DR_CD??ft.code??ft.sig_cd??ft.sgg_cd;if(!Mt)continue;const Lt=String(Mt).padStart(5,"0").slice(0,5),Xt=b7($t.geometry);Xt&&Bt.set(Lt,Xt)}it.current=Bt,wt(!0),Bt.size||E(" sgg.json   .")}catch(Ct){console.error(Ct),E(" /korea/sgg.json  ")}})()},[e]),Z.useEffect(()=>{if(!xt){console.log(" centers    CSV ");return}(async()=>{try{const Ct=await fetch(t,{cache:"no-cache"});if(!Ct.ok)throw new Error(`HTTP ${Ct.status}`);let Tt=await Ct.text();if(/<!doctype|<html/i.test(Tt.slice(0,200)))throw new Error("CSV_URL_RETURNED_HTML");Tt=Tt.replace(/^\uFEFF/,"");const Bt=_7.parse(Tt,{header:!0,skipEmptyLines:"greedy",dynamicTyping:!0,transformHeader:Be=>String(Be).replace(/\([^)]*\)/g,"").replace(/\t/g," ").replace(/\s+/g," ").trim()}),$t=Array.isArray(Bt.data)?Bt.data:[];if(!$t.length){E(" CSV .");return}const ft=Bt.meta.fields||Object.keys($t[0]),Mt={ymKey:wy(ft,by.ym),sgg5Key:wy(ft,by.sgg5),law10Key:wy(ft,by.law10),elecKey:wy(ft,by.elec),gasKey:wy(ft,by.gas)},Lt=n||Mt.ymKey,Xt=i||Mt.sgg5Key||Mt.law10Key,re=r||Mt.elecKey,ce=s||Mt.gasKey;if(!Lt||!Xt||!re&&!ce){E(" CSV   (//). props  .");return}const Me=Be=>Be==null||Be===""?null:typeof Be=="number"?Be:Number(String(Be).replace(/,/g,"")),Ne=it.current,Gt=new Map,Ce=new Map,Ee=new Set;for(const Be of $t){const ln=Be[Lt],Xe=cC(String(ln??""));if(Xe.length<6)continue;const Sn=x7(Xe.slice(0,6));Ee.add(Sn);const hn=cC(String(Be[Xt]??"")).slice(0,5).padStart(5,"0"),Rn=Ne.get(hn);if(!Rn)continue;const ge=Me(Be[re]),Gn=Me(Be[ce]);Number.isFinite(ge)&&(Gt.has(Sn)||Gt.set(Sn,[]),Gt.get(Sn).push({lng:Rn[0],lat:Rn[1],value:ge})),Number.isFinite(Gn)&&(Ce.has(Sn)||Ce.set(Sn,[]),Ce.get(Sn).push({lng:Rn[0],lat:Rn[1],value:Gn}))}ut.current={elec:Gt,gas:Ce};const de=Array.from(Ee).sort();F(de);const on=st||de[0]?.slice(0,4);if(on){const Be=de.find(Xe=>Xe.startsWith(String(on)))||de[0],ln=de.findIndex(Xe=>Xe===Be);ln>=0&&$(ln)}E(de.length?"":" CSV     ."),J(!1)}catch(Ct){console.error(Ct),E(" CSV / ")}})()},[t,n,i,r,s,xt,st]);const St=Z.useMemo(()=>{if(!st)return[];const Ct=ut.current[a];return Ct?Array.from(Ct.keys()).filter(Tt=>Tt.startsWith(st)).sort():[]},[a,st,I]);Z.useEffect(()=>{if(!g||X||I.length===0||St.length===0)return;const Ct=St[0];if(Ct){const Tt=I.findIndex(Bt=>Bt===Ct);Tt>=0&&$(Tt)}Y(!0),J(!0)},[g,X,I,St]),Z.useEffect(()=>{J(!1)},[st,a]),Z.useEffect(()=>{if(!(!st||I.length===0)&&St.length!==0&&!St.includes(ct)){const Ct=St[0],Tt=I.findIndex(Bt=>Bt===Ct);Tt>=0&&$(Tt)}},[st,a,I,St,ct]),Z.useEffect(()=>{if(!K||St.length===0)return;const Ct=St,Tt=ct;let Bt=Ct.indexOf(Tt);Bt<0&&(Bt=0);const $t=Math.max(150,y/(W||1)),ft=setInterval(()=>{const Mt=Bt+1;if(Mt>=Ct.length){Y(!1);return}const Lt=Ct[Mt],Xt=I.findIndex(re=>re===Lt);Xt>=0&&$(Xt)},$t);return()=>clearInterval(ft)},[K,St,ct,I,y,W]);const le=Z.useMemo(()=>{const Tt=ut.current[a]?.get(ct)||[];let Bt=1;return O&&Tt.length&&(Bt=Tt.reduce(($t,ft)=>ft.value>$t?ft.value:$t,0)||1),{type:"FeatureCollection",features:Tt.map($t=>({type:"Feature",geometry:{type:"Point",coordinates:[$t.lng,$t.lat]},properties:{w:O?Math.max(.05,$t.value/Bt):$t.value}}))}},[a,O,ct]),pe=Z.useMemo(()=>({"heatmap-radius":["interpolate",["linear"],["zoom"],5,18,7,28,10,40],"heatmap-intensity":1,"heatmap-opacity":.9,"heatmap-weight":["coalesce",["get","w"],0],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(47,128,237,0)",.2,"rgb(86,204,242)",.4,"rgb(255,209,102)",.6,"rgb(252,163,17)",1,"rgb(230,57,70)"]}),[]),Te=Ct=>{if(!st)return;const Tt=`${st}-${u0(Ct)}`,Bt=I.findIndex($t=>$t===Tt);Bt>=0&&$(Bt)},Nt=Z.useMemo(()=>{const Ct=new Set(St),Tt={};for(let Bt=1;Bt<=12;Bt++)Tt[Bt]=Ct.has(`${st}-${u0(Bt)}`);return Tt},[st,St]);return vt.jsxs("div",{className:"heatbox",style:{height:"100%"},children:[vt.jsx("style",{children:v7}),vt.jsxs("div",{className:"hb-legend",children:[vt.jsx("button",{className:"hb-btn",onClick:()=>Y(Ct=>!Ct),title:" ",children:K?" ":" "}),vt.jsx("span",{style:{marginLeft:6}}),vt.jsx("span",{style:{marginLeft:"auto"},children:""}),vt.jsx("i",{style:{background:"linear-gradient(90deg,#2f80ed,#56ccf2,#ffd166,#fca311,#e63946)"}}),vt.jsx("span",{children:""})]}),vt.jsx("div",{style:{flex:1,minHeight:360},children:vt.jsxs(l7,{mapLib:Sz,initialViewState:{longitude:127.8,latitude:36.3,zoom:6.2,minZoom:5.8,maxZoom:13},mapStyle:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",reuseMaps:!0,style:{height:"100%",width:"100%"},children:[vt.jsx(u7,{position:"bottom-right"}),vt.jsx(h7,{id:"heat-src",type:"geojson",data:le}),vt.jsx(c7,{id:"heat-lyr",type:"heatmap",source:"heat-src",paint:pe})]})}),vt.jsx("div",{className:"hb-monthbar",children:Array.from({length:12},(Ct,Tt)=>Tt+1).map(Ct=>{const Tt=Nt[Ct],Bt=Tt&&ct!=="-"&&ct===`${st}-${u0(Ct)}`;return vt.jsxs("button",{className:`hb-m ${Bt?"active":""}`,disabled:!Tt,onClick:()=>Tt&&Te(Ct),title:Tt?`${st}-${u0(Ct)}`:" ",children:[Ct,""]},Ct)})}),x&&vt.jsx("div",{className:"hb-warn",children:x})]})}const w7=.4541,S7=.202;function T7(t){const e=t.replace(/\/$/,"");return e.endsWith("/api")?e:`${e}/api`}function M7(t){const e=String(t??"").match(/(\d{4})\D*?(\d{1,2})/);return e?`${e[1]}${e[2].padStart(2,"0")}`:null}function Mz(t,e="",n={}){for(const[i,r]of Object.entries(t||{})){const s=e?`${e}.${i}`:i;r&&typeof r=="object"&&!Array.isArray(r)?Mz(r,s,n):n[s]=r}return n}function M1(t,e){for(const n of e)if(n in t)return t[n]}const hC=t=>{const e=Number(t);return Number.isFinite(e)?e:0};async function E7({apiBase:t,year:e}){const n=T7(t),i=[`${n}/energy/country?year=${e}`,`${n}/energy/country`,`${n}/energy?cityId=0&countyId=0`];let r=null;for(const a of i)try{const g=await fetch(a);if(!g.ok)continue;const y=await g.json();if(r=Array.isArray(y?.items)?y.items:Array.isArray(y)?y:null,r&&r.length)break}catch{}if(!r)return{elec:Array(12).fill(0),gas:Array(12).fill(0)};const s=Array(12).fill(0),c=Array(12).fill(0);for(const a of r){const g=Mz(a),y=M7(M1(g,["YEAR_MONTH","yearMonth","YM","ym"]));if(!y||y.slice(0,4)!==String(e))continue;const x=Number(y.slice(4,6));if(!Number.isFinite(x)||x<1||x>12)continue;const E=hC(M1(g,["USE_ELECT","useElect","ELEC","elec","ELEC_KWH"])),O=hC(M1(g,["USE_GAS","useGas","GAS","gas","GAS_M3"]));s[x-1]+=E,c[x-1]+=O}return{elec:s,gas:c}}function fC({title:t,unit:e,data:n,color:i="#2a84ff",onClick:r,active:s=!1}){const c=(n||[]).map(V=>Number(V)||0),a=Math.max(1,...c),g=V=>V>=1e6?{factor:1e6,suffix:""}:V>=1e4?{factor:1e4,suffix:""}:{factor:1,suffix:""},{factor:y,suffix:x}=g(a),E=c.map(V=>V/y),O=Math.max(1,...E),I=["1","2","3","4","5","6","7","8","9","10","11","12"],F=x?`${x}${e}`:e;return vt.jsxs("div",{onClick:r,style:{border:s?"1px solid #f97316":"1px solid #e6e8ef",boxShadow:s?"0 0 0 1px rgba(249,115,22,0.25)":"none",borderRadius:12,padding:"14px 14px 12px",background:"#fff",marginTop:12,cursor:r?"pointer":"default",transition:"border-color .15s ease, box-shadow .15s ease"},children:[vt.jsxs("div",{style:{fontSize:13,fontWeight:700,marginBottom:8},children:[t," ",vt.jsxs("span",{style:{color:"#889",fontWeight:500},children:["(",F,")"]})]}),vt.jsx("div",{style:{height:190,display:"flex",alignItems:"flex-end",gap:8},children:E.map((V,$)=>{const K=O>0?V/O:0,Y=Math.round(K*130),W=V>0?V.toLocaleString(void 0,{maximumFractionDigits:1}):"";return vt.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,minWidth:12},children:[vt.jsx("div",{style:{fontSize:11,color:"#555",marginBottom:4,minHeight:14,whiteSpace:"nowrap"},children:W}),vt.jsx("div",{title:`${I[$]}: ${W}`,style:{width:16,height:Y,borderRadius:4,background:i,opacity:.9,transition:"height 0.2s ease"}}),vt.jsx("div",{style:{fontSize:10,color:"#777",marginTop:4},children:I[$]})]},$)})})]})}function A7(){const t=Z.useMemo(()=>new Date,[]),[e,n]=Z.useState(t.getFullYear()),[i,r]=Z.useState("elec"),s="/api",c=Z.useMemo(()=>{const I=t.getFullYear(),F=I-5;return Array.from({length:I-F+1},(V,$)=>I-$)},[t]),[a,g]=Z.useState(Array(12).fill(0)),[y,x]=Z.useState(Array(12).fill(0)),[E,O]=Z.useState(!1);return Z.useEffect(()=>{let I=!0;return(async()=>{try{O(!0);const F=await E7({apiBase:s,year:e});if(!I)return;const V=F.elec.map(K=>K*w7/1e3),$=F.gas.map(K=>K*S7/1e3);g(V),x($)}finally{I&&O(!1)}})(),()=>{I=!1}},[s,e]),vt.jsx("div",{className:Si.wrap,children:vt.jsxs("div",{className:Si.container,children:[vt.jsxs("header",{className:Si.header,children:[vt.jsx("h1",{children:"  "}),vt.jsx("p",{children:"            ."})]}),vt.jsxs("div",{className:Si.layout,children:[vt.jsxs("aside",{className:Si.side,children:[vt.jsxs("div",{className:Si.filterCard,children:[vt.jsx("div",{className:Si.cardTitle,children:"  "}),vt.jsxs("div",{className:Si.formRow,children:[vt.jsx("label",{className:Si.label,children:""}),vt.jsx("select",{className:Si.selectBig,value:e,onChange:I=>n(Number(I.target.value)),children:c.map(I=>vt.jsxs("option",{value:I,children:[I,""]},I))})]}),vt.jsx("div",{className:Si.sep}),vt.jsx("div",{className:Si.cardTitle,children:" "}),vt.jsxs("div",{className:Si.formRow,children:[vt.jsx("label",{className:Si.label,children:""}),vt.jsxs("select",{className:Si.select,value:i,onChange:I=>r(I.target.value),children:[vt.jsx("option",{value:"elec",children:"(tCO2eq)"}),vt.jsx("option",{value:"gas",children:"(tCO2eq)"})]})]})]}),vt.jsxs("div",{style:{marginTop:8},children:[vt.jsx(fC,{title:"    ",unit:" tCOeq",data:a,color:"#2a84ff",onClick:()=>r("elec"),active:i==="elec"}),vt.jsx(fC,{title:"    ",unit:" tCOeq",data:y,color:"#ff7a00",onClick:()=>r("gas"),active:i==="gas"}),E&&vt.jsx("div",{style:{fontSize:12,color:"#666",marginTop:6},children:"    "})]})]}),vt.jsxs("section",{className:Si.card,children:[vt.jsxs("div",{className:Si.cardHead,children:[vt.jsx("h3",{children:"   ()"}),vt.jsx("div",{className:Si.cardSub})]}),vt.jsx("div",{className:Si.panel,style:{height:720},children:vt.jsx(Tz,{year:e,metric:i,autoPlay:!0,intervalMs:900})})]})]})]})})}function Ez(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=Ez(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function sa(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=Ez(t))&&(i&&(i+=" "),i+=e);return i}var C7=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Y2(t){if(typeof t!="string")return!1;var e=C7;return e.includes(t)}var P7=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Az(t){if(typeof t!="string")return!1;var e=P7;return e.includes(t)}function Cz(t){return typeof t=="string"&&t.startsWith("data-")}function Cc(t){var e=Object.entries(t).filter(n=>{var[i]=n;return Az(i)||Cz(i)});return Object.fromEntries(e)}function Hx(t){if(t==null)return null;if(Z.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Cc(e)}return typeof t=="object"&&!Array.isArray(t)?Cc(t):null}function qu(t){var e=Object.entries(t).filter(n=>{var[i]=n;return Az(i)||Cz(i)||Y2(i)});return Object.fromEntries(e)}function k7(t){return t==null?null:Z.isValidElement(t)?qu(t.props):typeof t=="object"&&!Array.isArray(t)?qu(t):null}var O7=["children","width","height","viewBox","className","style","title","desc"];function MS(){return MS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},MS.apply(null,arguments)}function D7(t,e){if(t==null)return{};var n,i,r=I7(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function I7(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Pz=Z.forwardRef((t,e)=>{var{children:n,width:i,height:r,viewBox:s,className:c,style:a,title:g,desc:y}=t,x=D7(t,O7),E=s||{width:i,height:r,x:0,y:0},O=sa("recharts-surface",c);return Z.createElement("svg",MS({},qu(x),{className:O,width:i,height:r,style:a,viewBox:"".concat(E.x," ").concat(E.y," ").concat(E.width," ").concat(E.height),ref:e}),Z.createElement("title",null,g),Z.createElement("desc",null,y),n)}),z7=["children","className"];function ES(){return ES=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ES.apply(null,arguments)}function L7(t,e){if(t==null)return{};var n,i,r=R7(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function R7(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var sh=Z.forwardRef((t,e)=>{var{children:n,className:i}=t,r=L7(t,z7),s=sa("recharts-layer",i);return Z.createElement("g",ES({className:s},qu(r),{ref:e}),n)}),N7=Z.createContext(null);function $a(t){return function(){return t}}const AS=Math.PI,CS=2*AS,np=1e-6,B7=CS-np;function kz(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function j7(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return kz;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class F7{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?kz:j7(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,c){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+c}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let c=this._x1,a=this._y1,g=i-e,y=r-n,x=c-e,E=a-n,O=x*x+E*E;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(O>np)if(!(Math.abs(E*g-y*x)>np)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let I=i-c,F=r-a,V=g*g+y*y,$=I*I+F*F,K=Math.sqrt(V),Y=Math.sqrt(O),W=s*Math.tan((AS-Math.acos((V+O-$)/(2*K*Y)))/2),X=W/Y,J=W/K;Math.abs(X-1)>np&&this._append`L${e+X*x},${n+X*E}`,this._append`A${s},${s},0,0,${+(E*I>x*F)},${this._x1=e+J*g},${this._y1=n+J*y}`}}arc(e,n,i,r,s,c){if(e=+e,n=+n,i=+i,c=!!c,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),g=i*Math.sin(r),y=e+a,x=n+g,E=1^c,O=c?r-s:s-r;this._x1===null?this._append`M${y},${x}`:(Math.abs(this._x1-y)>np||Math.abs(this._y1-x)>np)&&this._append`L${y},${x}`,i&&(O<0&&(O=O%CS+CS),O>B7?this._append`A${i},${i},0,1,${E},${e-a},${n-g}A${i},${i},0,1,${E},${this._x1=y},${this._y1=x}`:O>np&&this._append`A${i},${i},0,${+(O>=AS)},${E},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Oz(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new F7(e)}function W2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Dz(t){this._context=t}Dz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Zx(t){return new Dz(t)}function Iz(t){return t[0]}function zz(t){return t[1]}function Lz(t,e){var n=$a(!0),i=null,r=Zx,s=null,c=Oz(a);t=typeof t=="function"?t:t===void 0?Iz:$a(t),e=typeof e=="function"?e:e===void 0?zz:$a(e);function a(g){var y,x=(g=W2(g)).length,E,O=!1,I;for(i==null&&(s=r(I=c())),y=0;y<=x;++y)!(y<x&&n(E=g[y],y,g))===O&&((O=!O)?s.lineStart():s.lineEnd()),O&&s.point(+t(E,y,g),+e(E,y,g));if(I)return s=null,I+""||null}return a.x=function(g){return arguments.length?(t=typeof g=="function"?g:$a(+g),a):t},a.y=function(g){return arguments.length?(e=typeof g=="function"?g:$a(+g),a):e},a.defined=function(g){return arguments.length?(n=typeof g=="function"?g:$a(!!g),a):n},a.curve=function(g){return arguments.length?(r=g,i!=null&&(s=r(i)),a):r},a.context=function(g){return arguments.length?(g==null?i=s=null:s=r(i=g),a):i},a}function c0(t,e,n){var i=null,r=$a(!0),s=null,c=Zx,a=null,g=Oz(y);t=typeof t=="function"?t:t===void 0?Iz:$a(+t),e=typeof e=="function"?e:$a(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?zz:$a(+n);function y(E){var O,I,F,V=(E=W2(E)).length,$,K=!1,Y,W=new Array(V),X=new Array(V);for(s==null&&(a=c(Y=g())),O=0;O<=V;++O){if(!(O<V&&r($=E[O],O,E))===K)if(K=!K)I=O,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),F=O-1;F>=I;--F)a.point(W[F],X[F]);a.lineEnd(),a.areaEnd()}K&&(W[O]=+t($,O,E),X[O]=+e($,O,E),a.point(i?+i($,O,E):W[O],n?+n($,O,E):X[O]))}if(Y)return a=null,Y+""||null}function x(){return Lz().defined(r).curve(c).context(s)}return y.x=function(E){return arguments.length?(t=typeof E=="function"?E:$a(+E),i=null,y):t},y.x0=function(E){return arguments.length?(t=typeof E=="function"?E:$a(+E),y):t},y.x1=function(E){return arguments.length?(i=E==null?null:typeof E=="function"?E:$a(+E),y):i},y.y=function(E){return arguments.length?(e=typeof E=="function"?E:$a(+E),n=null,y):e},y.y0=function(E){return arguments.length?(e=typeof E=="function"?E:$a(+E),y):e},y.y1=function(E){return arguments.length?(n=E==null?null:typeof E=="function"?E:$a(+E),y):n},y.lineX0=y.lineY0=function(){return x().x(t).y(e)},y.lineY1=function(){return x().x(t).y(n)},y.lineX1=function(){return x().x(i).y(e)},y.defined=function(E){return arguments.length?(r=typeof E=="function"?E:$a(!!E),y):r},y.curve=function(E){return arguments.length?(c=E,s!=null&&(a=c(s)),y):c},y.context=function(E){return arguments.length?(E==null?s=a=null:a=c(s=E),y):s},y}class Rz{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function U7(t){return new Rz(t,!0)}function V7(t){return new Rz(t,!1)}function G0(){}function Y0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Nz(t){this._context=t}Nz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Y0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Y0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $7(t){return new Nz(t)}function Bz(t){this._context=t}Bz.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Y0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function q7(t){return new Bz(t)}function jz(t){this._context=t}jz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Y0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function H7(t){return new jz(t)}function Fz(t){this._context=t}Fz.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Z7(t){return new Fz(t)}function dC(t){return t<0?-1:1}function pC(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),c=(n-t._y1)/(r||i<0&&-0),a=(s*r+c*i)/(i+r);return(dC(s)+dC(c))*Math.min(Math.abs(s),Math.abs(c),.5*Math.abs(a))||0}function mC(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function E1(t,e,n){var i=t._x0,r=t._y0,s=t._x1,c=t._y1,a=(s-i)/3;t._context.bezierCurveTo(i+a,r+a*e,s-a,c-a*n,s,c)}function W0(t){this._context=t}W0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:E1(this,this._t0,mC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,E1(this,mC(this,n=pC(this,t,e)),n);break;default:E1(this,this._t0,n=pC(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Uz(t){this._context=new Vz(t)}(Uz.prototype=Object.create(W0.prototype)).point=function(t,e){W0.prototype.point.call(this,e,t)};function Vz(t){this._context=t}Vz.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function G7(t){return new W0(t)}function Y7(t){return new Uz(t)}function $z(t){this._context=t}$z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=gC(t),r=gC(e),s=0,c=1;c<n;++s,++c)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[c],e[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function gC(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),c=new Array(n);for(r[0]=0,s[0]=2,c[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,c[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,c[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,c[e]-=i*c[e-1];for(r[n-1]=c[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(c[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function W7(t){return new $z(t)}function Gx(t,e){this._context=t,this._t=e}Gx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function X7(t){return new Gx(t,.5)}function K7(t){return new Gx(t,0)}function Q7(t){return new Gx(t,1)}function Qm(t,e){if((c=t.length)>1)for(var n=1,i,r,s=t[e[0]],c,a=s.length;n<c;++n)for(r=s,s=t[e[n]],i=0;i<a;++i)s[i][1]+=s[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function PS(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function J7(t,e){return t[e]}function tZ(t){const e=[];return e.key=t,e}function eZ(){var t=$a([]),e=PS,n=Qm,i=J7;function r(s){var c=Array.from(t.apply(this,arguments),tZ),a,g=c.length,y=-1,x;for(const E of s)for(a=0,++y;a<g;++a)(c[a][y]=[0,+i(E,c[a].key,y,s)]).data=E;for(a=0,x=W2(e(c));a<g;++a)c[x[a]].index=a;return n(c,x),c}return r.keys=function(s){return arguments.length?(t=typeof s=="function"?s:$a(Array.from(s)),r):t},r.value=function(s){return arguments.length?(i=typeof s=="function"?s:$a(+s),r):i},r.order=function(s){return arguments.length?(e=s==null?PS:typeof s=="function"?s:$a(Array.from(s)),r):e},r.offset=function(s){return arguments.length?(n=s??Qm,r):n},r}function nZ(t,e){if((i=t.length)>0){for(var n,i,r=0,s=t[0].length,c;r<s;++r){for(c=n=0;n<i;++n)c+=t[n][r][1]||0;if(c)for(n=0;n<i;++n)t[n][r][1]/=c}Qm(t,e)}}function iZ(t,e){if((r=t.length)>0){for(var n=0,i=t[e[0]],r,s=i.length;n<s;++n){for(var c=0,a=0;c<r;++c)a+=t[c][n][1]||0;i[n][1]+=i[n][0]=-a/2}Qm(t,e)}}function rZ(t,e){if(!(!((c=t.length)>0)||!((s=(r=t[e[0]]).length)>0))){for(var n=0,i=1,r,s,c;i<s;++i){for(var a=0,g=0,y=0;a<c;++a){for(var x=t[e[a]],E=x[i][1]||0,O=x[i-1][1]||0,I=(E-O)/2,F=0;F<a;++F){var V=t[e[F]],$=V[i][1]||0,K=V[i-1][1]||0;I+=$-K}g+=E,y+=I*E}r[i-1][1]+=r[i-1][0]=n,g&&(n-=y/g)}r[i-1][1]+=r[i-1][0]=n,Qm(t,e)}}var A1={},C1={},yC;function aZ(){return yC||(yC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(C1)),C1}var P1={},_C;function qz(){return _C||(_C=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(P1)),P1}var k1={},vC;function X2(){return vC||(vC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(k1)),k1}var O1={},D1={},xC;function sZ(){return xC||(xC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}t.toString=e})(D1)),D1}var bC;function K2(){return bC||(bC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sZ(),n=X2();function i(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const s=[],c=r.length;if(c===0)return s;let a=0,g="",y="",x=!1;for(r.charCodeAt(0)===46&&(s.push(""),a++);a<c;){const E=r[a];y?E==="\\"&&a+1<c?(a++,g+=r[a]):E===y?y="":g+=E:x?E==='"'||E==="'"?y=E:E==="]"?(x=!1,s.push(g),g=""):g+=E:E==="["?(x=!0,g&&(s.push(g),g="")):E==="."?g&&(s.push(g),g=""):g+=E,a++}return g&&s.push(g),s}t.toPath=i})(O1)),O1}var wC;function Q2(){return wC||(wC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aZ(),n=qz(),i=X2(),r=K2();function s(a,g,y){if(a==null)return y;switch(typeof g){case"string":{if(e.isUnsafeProperty(g))return y;const x=a[g];return x===void 0?n.isDeepKey(g)?s(a,r.toPath(g),y):y:x}case"number":case"symbol":{typeof g=="number"&&(g=i.toKey(g));const x=a[g];return x===void 0?y:x}default:{if(Array.isArray(g))return c(a,g,y);if(Object.is(g?.valueOf(),-0)?g="-0":g=String(g),e.isUnsafeProperty(g))return y;const x=a[g];return x===void 0?y:x}}}function c(a,g,y){if(g.length===0)return y;let x=a;for(let E=0;E<g.length;E++){if(x==null||e.isUnsafeProperty(g[E]))return y;x=x[g[E]]}return x===void 0?y:x}t.get=s})(A1)),A1}var I1,SC;function oZ(){return SC||(SC=1,I1=Q2().get),I1}var lZ=oZ();const Yx=yu(lZ);var Uu=t=>t===0?0:t>0?1:-1,Pc=t=>typeof t=="number"&&t!=+t,Kh=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Dn=t=>(typeof t=="number"||t instanceof Number)&&!Pc(t),oh=t=>Dn(t)||typeof t=="string",uZ=0,t_=t=>{var e=++uZ;return"".concat(t||"").concat(e)},id=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Dn(e)&&typeof e!="string")return i;var s;if(Kh(e)){if(n==null)return i;var c=e.indexOf("%");s=n*parseFloat(e.slice(0,c))/100}else s=+e;return Pc(s)&&(s=i),r&&n!=null&&s>n&&(s=n),s},Hz=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},i=0;i<e;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1};function Qc(t,e,n){return Dn(t)&&Dn(e)?t+n*(e-t):e}function Zz(t,e,n){if(!(!t||!t.length))return t.find(i=>i&&(typeof e=="function"?e(i):Yx(i,e))===n)}var vo=t=>t===null||typeof t>"u",J2=t=>vo(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function cZ(t){return t!=null}function lg(){}var Gz=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,tT=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(Z.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(r=>{Y2(r)&&(i[r]=(s=>n[r](n,s)))}),i},hZ=(t,e,n)=>i=>(t(e,n,i),null),fZ=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var i=null;return Object.keys(t).forEach(r=>{var s=t[r];Y2(r)&&typeof s=="function"&&(i||(i={}),i[r]=hZ(s,e,n))}),i};function TC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function dZ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TC(Object(n),!0).forEach(function(i){pZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function pZ(t,e,n){return(e=mZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mZ(t){var e=gZ(t,"string");return typeof e=="symbol"?e:e+""}function gZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _u(t,e){var n=dZ({},t),i=e,r=Object.keys(e),s=r.reduce((c,a)=>(c[a]===void 0&&i[a]!==void 0&&(c[a]=i[a]),c),n);return s}var z1={},L1={},MC;function yZ(){return MC||(MC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){const r=new Map;for(let s=0;s<n.length;s++){const c=n[s],a=i(c);r.has(a)||r.set(a,c)}return Array.from(r.values())}t.uniqBy=e})(L1)),L1}var R1={},EC;function Yz(){return EC||(EC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(R1)),R1}var N1={},B1={},j1={},AC;function _Z(){return AC||(AC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(j1)),j1}var CC;function eT(){return CC||(CC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_Z();function n(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}t.isArrayLike=n})(B1)),B1}var F1={},PC;function vZ(){return PC||(PC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(F1)),F1}var kC;function xZ(){return kC||(kC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eT(),n=vZ();function i(r){return n.isObjectLike(r)&&e.isArrayLike(r)}t.isArrayLikeObject=i})(N1)),N1}var U1={},V1={},OC;function bZ(){return OC||(OC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Q2();function n(i){return function(r){return e.get(r,i)}}t.property=n})(V1)),V1}var $1={},q1={},H1={},Z1={},DC;function Wz(){return DC||(DC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Z1)),Z1}var G1={},IC;function Xz(){return IC||(IC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(G1)),G1}var Y1={},zC;function Kz(){return zC||(zC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}t.eq=e})(Y1)),Y1}var LC;function wZ(){return LC||(LC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wz(),n=Xz(),i=Kz();function r(x,E,O){return typeof O!="function"?r(x,E,()=>{}):s(x,E,function I(F,V,$,K,Y,W){const X=O(F,V,$,K,Y,W);return X!==void 0?!!X:s(F,V,I,W)},new Map)}function s(x,E,O,I){if(E===x)return!0;switch(typeof E){case"object":return c(x,E,O,I);case"function":return Object.keys(E).length>0?s(x,{...E},O,I):i.eq(x,E);default:return e.isObject(x)?typeof E=="string"?E==="":!0:i.eq(x,E)}}function c(x,E,O,I){if(E==null)return!0;if(Array.isArray(E))return g(x,E,O,I);if(E instanceof Map)return a(x,E,O,I);if(E instanceof Set)return y(x,E,O,I);const F=Object.keys(E);if(x==null)return F.length===0;if(F.length===0)return!0;if(I?.has(E))return I.get(E)===x;I?.set(E,x);try{for(let V=0;V<F.length;V++){const $=F[V];if(!n.isPrimitive(x)&&!($ in x)||E[$]===void 0&&x[$]!==void 0||E[$]===null&&x[$]!==null||!O(x[$],E[$],$,x,E,I))return!1}return!0}finally{I?.delete(E)}}function a(x,E,O,I){if(E.size===0)return!0;if(!(x instanceof Map))return!1;for(const[F,V]of E.entries()){const $=x.get(F);if(O($,V,F,x,E,I)===!1)return!1}return!0}function g(x,E,O,I){if(E.length===0)return!0;if(!Array.isArray(x))return!1;const F=new Set;for(let V=0;V<E.length;V++){const $=E[V];let K=!1;for(let Y=0;Y<x.length;Y++){if(F.has(Y))continue;const W=x[Y];let X=!1;if(O(W,$,V,x,E,I)&&(X=!0),X){F.add(Y),K=!0;break}}if(!K)return!1}return!0}function y(x,E,O,I){return E.size===0?!0:x instanceof Set?g([...x],[...E],O,I):!1}t.isMatchWith=r,t.isSetMatch=y})(H1)),H1}var RC;function Qz(){return RC||(RC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wZ();function n(i,r){return e.isMatchWith(i,r,()=>{})}t.isMatch=n})(q1)),q1}var W1={},X1={},K1={},NC;function SZ(){return NC||(NC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}t.getSymbols=e})(K1)),K1}var Q1={},BC;function Jz(){return BC||(BC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Q1)),Q1}var J1={},jC;function tL(){return jC||(jC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",i="[object Number]",r="[object Boolean]",s="[object Arguments]",c="[object Symbol]",a="[object Date]",g="[object Map]",y="[object Set]",x="[object Array]",E="[object Function]",O="[object ArrayBuffer]",I="[object Object]",F="[object Error]",V="[object DataView]",$="[object Uint8Array]",K="[object Uint8ClampedArray]",Y="[object Uint16Array]",W="[object Uint32Array]",X="[object BigUint64Array]",J="[object Int8Array]",st="[object Int16Array]",ct="[object Int32Array]",it="[object BigInt64Array]",ut="[object Float32Array]",xt="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=O,t.arrayTag=x,t.bigInt64ArrayTag=it,t.bigUint64ArrayTag=X,t.booleanTag=r,t.dataViewTag=V,t.dateTag=a,t.errorTag=F,t.float32ArrayTag=ut,t.float64ArrayTag=xt,t.functionTag=E,t.int16ArrayTag=st,t.int32ArrayTag=ct,t.int8ArrayTag=J,t.mapTag=g,t.numberTag=i,t.objectTag=I,t.regexpTag=e,t.setTag=y,t.stringTag=n,t.symbolTag=c,t.uint16ArrayTag=Y,t.uint32ArrayTag=W,t.uint8ArrayTag=$,t.uint8ClampedArrayTag=K})(J1)),J1}var tw={},FC;function TZ(){return FC||(FC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(tw)),tw}var UC;function eL(){return UC||(UC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SZ(),n=Jz(),i=tL(),r=Xz(),s=TZ();function c(x,E){return a(x,void 0,x,new Map,E)}function a(x,E,O,I=new Map,F=void 0){const V=F?.(x,E,O,I);if(V!==void 0)return V;if(r.isPrimitive(x))return x;if(I.has(x))return I.get(x);if(Array.isArray(x)){const $=new Array(x.length);I.set(x,$);for(let K=0;K<x.length;K++)$[K]=a(x[K],K,O,I,F);return Object.hasOwn(x,"index")&&($.index=x.index),Object.hasOwn(x,"input")&&($.input=x.input),$}if(x instanceof Date)return new Date(x.getTime());if(x instanceof RegExp){const $=new RegExp(x.source,x.flags);return $.lastIndex=x.lastIndex,$}if(x instanceof Map){const $=new Map;I.set(x,$);for(const[K,Y]of x)$.set(K,a(Y,K,O,I,F));return $}if(x instanceof Set){const $=new Set;I.set(x,$);for(const K of x)$.add(a(K,void 0,O,I,F));return $}if(typeof Buffer<"u"&&Buffer.isBuffer(x))return x.subarray();if(s.isTypedArray(x)){const $=new(Object.getPrototypeOf(x)).constructor(x.length);I.set(x,$);for(let K=0;K<x.length;K++)$[K]=a(x[K],K,O,I,F);return $}if(x instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&x instanceof SharedArrayBuffer)return x.slice(0);if(x instanceof DataView){const $=new DataView(x.buffer.slice(0),x.byteOffset,x.byteLength);return I.set(x,$),g($,x,O,I,F),$}if(typeof File<"u"&&x instanceof File){const $=new File([x],x.name,{type:x.type});return I.set(x,$),g($,x,O,I,F),$}if(typeof Blob<"u"&&x instanceof Blob){const $=new Blob([x],{type:x.type});return I.set(x,$),g($,x,O,I,F),$}if(x instanceof Error){const $=new x.constructor;return I.set(x,$),$.message=x.message,$.name=x.name,$.stack=x.stack,$.cause=x.cause,g($,x,O,I,F),$}if(x instanceof Boolean){const $=new Boolean(x.valueOf());return I.set(x,$),g($,x,O,I,F),$}if(x instanceof Number){const $=new Number(x.valueOf());return I.set(x,$),g($,x,O,I,F),$}if(x instanceof String){const $=new String(x.valueOf());return I.set(x,$),g($,x,O,I,F),$}if(typeof x=="object"&&y(x)){const $=Object.create(Object.getPrototypeOf(x));return I.set(x,$),g($,x,O,I,F),$}return x}function g(x,E,O=x,I,F){const V=[...Object.keys(E),...e.getSymbols(E)];for(let $=0;$<V.length;$++){const K=V[$],Y=Object.getOwnPropertyDescriptor(x,K);(Y==null||Y.writable)&&(x[K]=a(E[K],K,O,I,F))}}function y(x){switch(n.getTag(x)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=c,t.cloneDeepWithImpl=a,t.copyProperties=g})(X1)),X1}var VC;function MZ(){return VC||(VC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eL();function n(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}t.cloneDeep=n})(W1)),W1}var $C;function EZ(){return $C||($C=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qz(),n=MZ();function i(r){return r=n.cloneDeep(r),s=>e.isMatch(s,r)}t.matches=i})($1)),$1}var ew={},nw={},iw={},qC;function AZ(){return qC||(qC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eL(),n=tL();function i(r,s){return e.cloneDeepWith(r,(c,a,g,y)=>{const x=s?.(c,a,g,y);if(x!==void 0)return x;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case n.numberTag:case n.stringTag:case n.booleanTag:{const E=new r.constructor(r?.valueOf());return e.copyProperties(E,r),E}case n.argumentsTag:{const E={};return e.copyProperties(E,r),E.length=r.length,E[Symbol.iterator]=r[Symbol.iterator],E}default:return}})}t.cloneDeepWith=i})(iw)),iw}var HC;function CZ(){return HC||(HC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AZ();function n(i){return e.cloneDeepWith(i)}t.cloneDeep=n})(nw)),nw}var rw={},aw={},ZC;function nL(){return ZC||(ZC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}t.isIndex=n})(aw)),aw}var sw={},GC;function PZ(){return GC||(GC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jz();function n(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}t.isArguments=n})(sw)),sw}var YC;function kZ(){return YC||(YC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qz(),n=nL(),i=PZ(),r=K2();function s(c,a){let g;if(Array.isArray(a)?g=a:typeof a=="string"&&e.isDeepKey(a)&&c?.[a]==null?g=r.toPath(a):g=[a],g.length===0)return!1;let y=c;for(let x=0;x<g.length;x++){const E=g[x];if((y==null||!Object.hasOwn(y,E))&&!((Array.isArray(y)||i.isArguments(y))&&n.isIndex(E)&&E<y.length))return!1;y=y[E]}return!0}t.has=s})(rw)),rw}var WC;function OZ(){return WC||(WC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qz(),n=X2(),i=CZ(),r=Q2(),s=kZ();function c(a,g){switch(typeof a){case"object":{Object.is(a?.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return g=i.cloneDeep(g),function(y){const x=r.get(y,a);return x===void 0?s.has(y,a):g===void 0?x===void 0:e.isMatch(x,g)}}t.matchesProperty=c})(ew)),ew}var XC;function DZ(){return XC||(XC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yz(),n=bZ(),i=EZ(),r=OZ();function s(c){if(c==null)return e.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?r.matchesProperty(c[0],c[1]):i.matches(c);case"string":case"symbol":case"number":return n.property(c)}}t.iteratee=s})(U1)),U1}var KC;function IZ(){return KC||(KC=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yZ(),n=Yz(),i=xZ(),r=DZ();function s(c,a=n.identity){return i.isArrayLikeObject(c)?e.uniqBy(Array.from(c),r.iteratee(a)):[]}t.uniqBy=s})(z1)),z1}var ow,QC;function zZ(){return QC||(QC=1,ow=IZ().uniqBy),ow}var LZ=zZ();const JC=yu(LZ);function RZ(t,e,n){return e===!0?JC(t,n):typeof e=="function"?JC(t,e):t}var lw={exports:{}},uw={},cw={exports:{}},hw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tP;function NZ(){if(tP)return hw;tP=1;var t=ig();function e(E,O){return E===O&&(E!==0||1/E===1/O)||E!==E&&O!==O}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,s=t.useLayoutEffect,c=t.useDebugValue;function a(E,O){var I=O(),F=i({inst:{value:I,getSnapshot:O}}),V=F[0].inst,$=F[1];return s(function(){V.value=I,V.getSnapshot=O,g(V)&&$({inst:V})},[E,I,O]),r(function(){return g(V)&&$({inst:V}),E(function(){g(V)&&$({inst:V})})},[E]),c(I),I}function g(E){var O=E.getSnapshot;E=E.value;try{var I=O();return!n(E,I)}catch{return!0}}function y(E,O){return O()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?y:a;return hw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:x,hw}var eP;function BZ(){return eP||(eP=1,cw.exports=NZ()),cw.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nP;function jZ(){if(nP)return uw;nP=1;var t=ig(),e=BZ();function n(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,s=t.useRef,c=t.useEffect,a=t.useMemo,g=t.useDebugValue;return uw.useSyncExternalStoreWithSelector=function(y,x,E,O,I){var F=s(null);if(F.current===null){var V={hasValue:!1,value:null};F.current=V}else V=F.current;F=a(function(){function K(st){if(!Y){if(Y=!0,W=st,st=O(st),I!==void 0&&V.hasValue){var ct=V.value;if(I(ct,st))return X=ct}return X=st}if(ct=X,i(W,st))return ct;var it=O(st);return I!==void 0&&I(ct,it)?(W=st,ct):(W=st,X=it)}var Y=!1,W,X,J=E===void 0?null:E;return[function(){return K(x())},J===null?void 0:function(){return K(J())}]},[x,E,O,I]);var $=r(y,F[0],F[1]);return c(function(){V.hasValue=!0,V.value=$},[$]),g($),$},uw}var iP;function FZ(){return iP||(iP=1,lw.exports=jZ()),lw.exports}var UZ=FZ(),nT=Z.createContext(null),VZ=t=>t,Ks=()=>{var t=Z.useContext(nT);return t?t.store.dispatch:VZ},O0=()=>{},$Z=()=>O0,qZ=(t,e)=>t===e;function jn(t){var e=Z.useContext(nT);return UZ.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:$Z,e?e.store.getState:O0,e?e.store.getState:O0,e?t:O0,qZ)}function HZ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function ZZ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function GZ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var rP=t=>Array.isArray(t)?t:[t];function YZ(t){const e=Array.isArray(t[0])?t[0]:t;return GZ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function WZ(t,e){const n=[],{length:i}=t;for(let r=0;r<i;r++)n.push(t[r].apply(null,e));return n}var XZ=class{constructor(t){this.value=t}deref(){return this.value}},KZ=typeof WeakRef<"u"?WeakRef:XZ,QZ=0,aP=1;function h0(){return{s:QZ,v:void 0,o:null,p:null}}function iL(t,e={}){let n=h0();const{resultEqualityCheck:i}=e;let r,s=0;function c(){let a=n;const{length:g}=arguments;for(let E=0,O=g;E<O;E++){const I=arguments[E];if(typeof I=="function"||typeof I=="object"&&I!==null){let F=a.o;F===null&&(a.o=F=new WeakMap);const V=F.get(I);V===void 0?(a=h0(),F.set(I,a)):a=V}else{let F=a.p;F===null&&(a.p=F=new Map);const V=F.get(I);V===void 0?(a=h0(),F.set(I,a)):a=V}}const y=a;let x;if(a.s===aP)x=a.v;else if(x=t.apply(null,arguments),s++,i){const E=r?.deref?.()??r;E!=null&&i(E,x)&&(x=E,s!==0&&s--),r=typeof x=="object"&&x!==null||typeof x=="function"?new KZ(x):x}return y.s=aP,y.v=x,x}return c.clearCache=()=>{n=h0(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function JZ(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...r)=>{let s=0,c=0,a,g={},y=r.pop();typeof y=="object"&&(g=y,y=r.pop()),HZ(y,`createSelector expects an output function after the inputs, but received: [${typeof y}]`);const x={...n,...g},{memoize:E,memoizeOptions:O=[],argsMemoize:I=iL,argsMemoizeOptions:F=[]}=x,V=rP(O),$=rP(F),K=YZ(r),Y=E(function(){return s++,y.apply(null,arguments)},...V),W=I(function(){c++;const J=WZ(K,arguments);return a=Y.apply(null,J),a},...$);return Object.assign(W,{resultFunc:y,memoizedResultFunc:Y,dependencies:K,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:E,argsMemoize:I})};return Object.assign(i,{withTypes:()=>i}),i}var ke=JZ(iL),tG=Object.assign((t,e=ke)=>{ZZ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(s=>t[s]);return e(i,(...s)=>s.reduce((c,a,g)=>(c[n[g]]=a,c),{}))},{withTypes:()=>tG}),fw={},dw={},pw={},sP;function eG(){return sP||(sP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,r,s)=>{if(i!==r){const c=e(i),a=e(r);if(c===a&&c===0){if(i<r)return s==="desc"?1:-1;if(i>r)return s==="desc"?-1:1}return s==="desc"?a-c:c-a}return 0};t.compareValues=n})(pw)),pw}var mw={},gw={},oP;function rL(){return oP||(oP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(gw)),gw}var lP;function nG(){return lP||(lP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rL(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(s,c){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(i.test(s)||!n.test(s))||c!=null&&Object.hasOwn(c,s)}t.isKey=r})(mw)),mw}var uP;function iG(){return uP||(uP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eG(),n=nG(),i=K2();function r(s,c,a,g){if(s==null)return[];a=g?void 0:a,Array.isArray(s)||(s=Object.values(s)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(I=>String(I));const y=(I,F)=>{let V=I;for(let $=0;$<F.length&&V!=null;++$)V=V[F[$]];return V},x=(I,F)=>F==null||I==null?F:typeof I=="object"&&"key"in I?Object.hasOwn(F,I.key)?F[I.key]:y(F,I.path):typeof I=="function"?I(F):Array.isArray(I)?y(F,I):typeof F=="object"?F[I]:F,E=c.map(I=>(Array.isArray(I)&&I.length===1&&(I=I[0]),I==null||typeof I=="function"||Array.isArray(I)||n.isKey(I)?I:{key:I,path:i.toPath(I)}));return s.map(I=>({original:I,criteria:E.map(F=>x(F,I))})).slice().sort((I,F)=>{for(let V=0;V<E.length;V++){const $=e.compareValues(I.criteria[V],F.criteria[V],a[V]);if($!==0)return $}return 0}).map(I=>I.original)}t.orderBy=r})(dw)),dw}var yw={},cP;function rG(){return cP||(cP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i=1){const r=[],s=Math.floor(i),c=(a,g)=>{for(let y=0;y<a.length;y++){const x=a[y];Array.isArray(x)&&g<s?c(x,g+1):r.push(x)}};return c(n,0),r}t.flatten=e})(yw)),yw}var _w={},hP;function aL(){return hP||(hP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nL(),n=eT(),i=Wz(),r=Kz();function s(c,a,g){return i.isObject(g)&&(typeof a=="number"&&n.isArrayLike(g)&&e.isIndex(a)&&a<g.length||typeof a=="string"&&a in g)?r.eq(g[a],c):!1}t.isIterateeCall=s})(_w)),_w}var fP;function aG(){return fP||(fP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iG(),n=rG(),i=aL();function r(s,...c){const a=c.length;return a>1&&i.isIterateeCall(s,c[0],c[1])?c=[]:a>2&&i.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),e.orderBy(s,n.flatten(c),["asc"])}t.sortBy=r})(fw)),fw}var vw,dP;function sG(){return dP||(dP=1,vw=aG().sortBy),vw}var oG=sG();const Wx=yu(oG);var sL=t=>t.legend.settings,lG=t=>t.legend.size,uG=t=>t.legend.payload;ke([uG,sL],(t,e)=>{var{itemSorter:n}=e,i=t.flat(1);return n?Wx(i,n):i});var f0=1;function cG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=Z.useState({height:0,left:0,top:0,width:0}),i=Z.useCallback(r=>{if(r!=null){var s=r.getBoundingClientRect(),c={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(c.height-e.height)>f0||Math.abs(c.left-e.left)>f0||Math.abs(c.top-e.top)>f0||Math.abs(c.width-e.width)>f0)&&n({height:c.height,left:c.left,top:c.top,width:c.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,i]}function yo(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var hG=typeof Symbol=="function"&&Symbol.observable||"@@observable",pP=hG,xw=()=>Math.random().toString(36).substring(7).split("").join("."),fG={INIT:`@@redux/INIT${xw()}`,REPLACE:`@@redux/REPLACE${xw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${xw()}`},X0=fG;function iT(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function oL(t,e,n){if(typeof t!="function")throw new Error(yo(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(yo(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(yo(1));return n(oL)(t,e)}let i=t,r=e,s=new Map,c=s,a=0,g=!1;function y(){c===s&&(c=new Map,s.forEach(($,K)=>{c.set(K,$)}))}function x(){if(g)throw new Error(yo(3));return r}function E($){if(typeof $!="function")throw new Error(yo(4));if(g)throw new Error(yo(5));let K=!0;y();const Y=a++;return c.set(Y,$),function(){if(K){if(g)throw new Error(yo(6));K=!1,y(),c.delete(Y),s=null}}}function O($){if(!iT($))throw new Error(yo(7));if(typeof $.type>"u")throw new Error(yo(8));if(typeof $.type!="string")throw new Error(yo(17));if(g)throw new Error(yo(9));try{g=!0,r=i(r,$)}finally{g=!1}return(s=c).forEach(Y=>{Y()}),$}function I($){if(typeof $!="function")throw new Error(yo(10));i=$,O({type:X0.REPLACE})}function F(){const $=E;return{subscribe(K){if(typeof K!="object"||K===null)throw new Error(yo(11));function Y(){const X=K;X.next&&X.next(x())}return Y(),{unsubscribe:$(Y)}},[pP](){return this}}}return O({type:X0.INIT}),{dispatch:O,subscribe:E,getState:x,replaceReducer:I,[pP]:F}}function dG(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:X0.INIT})>"u")throw new Error(yo(12));if(typeof n(void 0,{type:X0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(yo(13))})}function lL(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const c=e[s];typeof t[c]=="function"&&(n[c]=t[c])}const i=Object.keys(n);let r;try{dG(n)}catch(s){r=s}return function(c={},a){if(r)throw r;let g=!1;const y={};for(let x=0;x<i.length;x++){const E=i[x],O=n[E],I=c[E],F=O(I,a);if(typeof F>"u")throw a&&a.type,new Error(yo(14));y[E]=F,g=g||F!==I}return g=g||i.length!==Object.keys(c).length,g?y:c}}function K0(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function pG(...t){return e=>(n,i)=>{const r=e(n,i);let s=()=>{throw new Error(yo(15))};const c={getState:r.getState,dispatch:(g,...y)=>s(g,...y)},a=t.map(g=>g(c));return s=K0(...a)(r.dispatch),{...r,dispatch:s}}}function uL(t){return iT(t)&&"type"in t&&typeof t.type=="string"}var cL=Symbol.for("immer-nothing"),mP=Symbol.for("immer-draftable"),gu=Symbol.for("immer-state");function Mc(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var e_=Object.getPrototypeOf;function _p(t){return!!t&&!!t[gu]}function Qh(t){return t?hL(t)||Array.isArray(t)||!!t[mP]||!!t.constructor?.[mP]||T_(t)||Kx(t):!1}var mG=Object.prototype.constructor.toString(),gP=new WeakMap;function hL(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=gP.get(n);return i===void 0&&(i=Function.toString.call(n),gP.set(n,i)),i===mG}function Q0(t,e,n=!0){Xx(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function Xx(t){const e=t[gu];return e?e.type_:Array.isArray(t)?1:T_(t)?2:Kx(t)?3:0}function kS(t,e){return Xx(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function fL(t,e,n){const i=Xx(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function gG(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function T_(t){return t instanceof Map}function Kx(t){return t instanceof Set}function ip(t){return t.copy_||t.base_}function OS(t,e){if(T_(t))return new Map(t);if(Kx(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=hL(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[gu];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const c=r[s],a=i[c];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(i[c]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[c]})}return Object.create(e_(t),i)}else{const i=e_(t);if(i!==null&&n)return{...t};const r=Object.create(i);return Object.assign(r,t)}}function rT(t,e=!1){return Qx(t)||_p(t)||!Qh(t)||(Xx(t)>1&&Object.defineProperties(t,{set:d0,add:d0,clear:d0,delete:d0}),Object.freeze(t),e&&Object.values(t).forEach(n=>rT(n,!0))),t}function yG(){Mc(2)}var d0={value:yG};function Qx(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var _G={};function vp(t){const e=_G[t];return e||Mc(0,t),e}var n_;function dL(){return n_}function vG(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function yP(t,e){e&&(vp("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function DS(t){IS(t),t.drafts_.forEach(xG),t.drafts_=null}function IS(t){t===n_&&(n_=t.parent_)}function _P(t){return n_=vG(n_,t)}function xG(t){const e=t[gu];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function vP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[gu].modified_&&(DS(e),Mc(4)),Qh(t)&&(t=J0(e,t),e.parent_||tx(e,t)),e.patches_&&vp("Patches").generateReplacementPatches_(n[gu].base_,t,e.patches_,e.inversePatches_)):t=J0(e,n,[]),DS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==cL?t:void 0}function J0(t,e,n){if(Qx(e))return e;const i=t.immer_.shouldUseStrictIteration(),r=e[gu];if(!r)return Q0(e,(s,c)=>xP(t,r,e,s,c,n),i),e;if(r.scope_!==t)return e;if(!r.modified_)return tx(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let c=s,a=!1;r.type_===3&&(c=new Set(s),s.clear(),a=!0),Q0(c,(g,y)=>xP(t,r,s,g,y,n,a),i),tx(t,s,!1),n&&t.patches_&&vp("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function xP(t,e,n,i,r,s,c){if(r==null||typeof r!="object"&&!c)return;const a=Qx(r);if(!(a&&!c)){if(_p(r)){const g=s&&e&&e.type_!==3&&!kS(e.assigned_,i)?s.concat(i):void 0,y=J0(t,r,g);if(fL(n,i,y),_p(y))t.canAutoFreeze_=!1;else return}else c&&n.add(r);if(Qh(r)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&a)return;J0(t,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(T_(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&tx(t,r)}}}function tx(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&rT(e,n)}function bG(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:dL(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=aT;n&&(r=[i],s=i_);const{revoke:c,proxy:a}=Proxy.revocable(r,s);return i.draft_=a,i.revoke_=c,a}var aT={get(t,e){if(e===gu)return t;const n=ip(t);if(!kS(n,e))return wG(t,n,e);const i=n[e];return t.finalized_||!Qh(i)?i:i===bw(t.base_,e)?(ww(t),t.copy_[e]=LS(i,t)):i},has(t,e){return e in ip(t)},ownKeys(t){return Reflect.ownKeys(ip(t))},set(t,e,n){const i=pL(ip(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=bw(ip(t),e),s=r?.[gu];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(gG(n,r)&&(n!==void 0||kS(t.base_,e)))return!0;ww(t),zS(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return bw(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,ww(t),zS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ip(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){Mc(11)},getPrototypeOf(t){return e_(t.base_)},setPrototypeOf(){Mc(12)}},i_={};Q0(aT,(t,e)=>{i_[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});i_.deleteProperty=function(t,e){return i_.set.call(this,t,e,void 0)};i_.set=function(t,e,n){return aT.set.call(this,t[0],e,n,t[0])};function bw(t,e){const n=t[gu];return(n?ip(n):t)[e]}function wG(t,e,n){const i=pL(e,n);return i?"value"in i?i.value:i.get?.call(t.draft_):void 0}function pL(t,e){if(!(e in t))return;let n=e_(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=e_(n)}}function zS(t){t.modified_||(t.modified_=!0,t.parent_&&zS(t.parent_))}function ww(t){t.copy_||(t.copy_=OS(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var SG=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const c=this;return function(g=s,...y){return c.produce(g,x=>n.call(this,x,...y))}}typeof n!="function"&&Mc(6),i!==void 0&&typeof i!="function"&&Mc(7);let r;if(Qh(e)){const s=_P(this),c=LS(e,void 0);let a=!0;try{r=n(c),a=!1}finally{a?DS(s):IS(s)}return yP(s,i),vP(r,s)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===cL&&(r=void 0),this.autoFreeze_&&rT(r,!0),i){const s=[],c=[];vp("Patches").generateReplacementPatches_(e,r,s,c),i(s,c)}return r}else Mc(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(c,...a)=>this.produceWithPatches(c,g=>e(g,...a));let i,r;return[this.produce(e,n,(c,a)=>{i=c,r=a}),i,r]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Qh(t)||Mc(8),_p(t)&&(t=Yh(t));const e=_P(this),n=LS(t,void 0);return n[gu].isManual_=!0,IS(e),n}finishDraft(t,e){const n=t&&t[gu];(!n||!n.isManual_)&&Mc(9);const{scope_:i}=n;return yP(i,e),vP(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const i=vp("Patches").applyPatches_;return _p(t)?i(t,e):this.produce(t,r=>i(r,e))}};function LS(t,e){const n=T_(t)?vp("MapSet").proxyMap_(t,e):Kx(t)?vp("MapSet").proxySet_(t,e):bG(t,e);return(e?e.scope_:dL()).drafts_.push(n),n}function Yh(t){return _p(t)||Mc(10,t),mL(t)}function mL(t){if(!Qh(t)||Qx(t))return t;const e=t[gu];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=OS(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=OS(t,!0);return Q0(n,(r,s)=>{fL(n,r,mL(s))},i),e&&(e.finalized_=!1),n}var RS=new SG,gL=RS.produce,TG=RS.setUseStrictIteration.bind(RS);function yL(t){return({dispatch:n,getState:i})=>r=>s=>typeof s=="function"?s(n,i,t):r(s)}var MG=yL(),EG=yL,AG=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?K0:K0.apply(null,arguments)};function Hu(t,e){function n(...i){if(e){let r=e(...i);if(!r)throw new Error(mu(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>uL(i)&&i.type===t,n}var _L=class Ry extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ry.prototype)}static get[Symbol.species](){return Ry}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ry(...e[0].concat(this)):new Ry(...e.concat(this))}};function bP(t){return Qh(t)?gL(t,()=>{}):t}function p0(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function CG(t){return typeof t=="boolean"}var PG=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=e??{};let c=new _L;return n&&(CG(n)?c.push(MG):c.push(EG(n.extraArgument))),c},vL="RTK_autoBatch",zs=()=>t=>({payload:t,meta:{[vL]:!0}}),wP=t=>e=>{setTimeout(e,t)},xL=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let r=!0,s=!1,c=!1;const a=new Set,g=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:wP(10):t.type==="callback"?t.queueNotification:wP(t.timeout),y=()=>{c=!1,s&&(s=!1,a.forEach(x=>x()))};return Object.assign({},i,{subscribe(x){const E=()=>r&&x(),O=i.subscribe(E);return a.add(x),()=>{O(),a.delete(x)}},dispatch(x){try{return r=!x?.meta?.[vL],s=!r,s&&(c||(c=!0,g(y))),i.dispatch(x)}finally{r=!0}}})},kG=t=>function(n){const{autoBatch:i=!0}=n??{};let r=new _L(t);return i&&r.push(xL(typeof i=="object"?i:void 0)),r};function OG(t){const e=PG(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:s=void 0,enhancers:c=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(iT(n))a=lL(n);else throw new Error(mu(1));let g;typeof i=="function"?g=i(e):g=e();let y=K0;r&&(y=AG({trace:!1,...typeof r=="object"&&r}));const x=pG(...g),E=kG(x);let O=typeof c=="function"?c(E):E();const I=y(...O);return oL(a,s,I)}function bL(t){const e={},n=[];let i;const r={addCase(s,c){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(mu(28));if(a in e)throw new Error(mu(29));return e[a]=c,r},addAsyncThunk(s,c){return c.pending&&(e[s.pending.type]=c.pending),c.rejected&&(e[s.rejected.type]=c.rejected),c.fulfilled&&(e[s.fulfilled.type]=c.fulfilled),c.settled&&n.push({matcher:s.settled,reducer:c.settled}),r},addMatcher(s,c){return n.push({matcher:s,reducer:c}),r},addDefaultCase(s){return i=s,r}};return t(r),[e,n,i]}TG(!1);function DG(t){return typeof t=="function"}function IG(t,e){let[n,i,r]=bL(e),s;if(DG(t))s=()=>bP(t());else{const a=bP(t);s=()=>a}function c(a=s(),g){let y=[n[g.type],...i.filter(({matcher:x})=>x(g)).map(({reducer:x})=>x)];return y.filter(x=>!!x).length===0&&(y=[r]),y.reduce((x,E)=>{if(E)if(_p(x)){const I=E(x,g);return I===void 0?x:I}else{if(Qh(x))return gL(x,O=>E(O,g));{const O=E(x,g);if(O===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return O}}return x},a)}return c.getInitialState=s,c}var zG="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",LG=(t=21)=>{let e="",n=t;for(;n--;)e+=zG[Math.random()*64|0];return e},RG=Symbol.for("rtk-slice-createasyncthunk");function NG(t,e){return`${t}/${e}`}function BG({creators:t}={}){const e=t?.asyncThunk?.[RG];return function(i){const{name:r,reducerPath:s=r}=i;if(!r)throw new Error(mu(11));const c=(typeof i.reducers=="function"?i.reducers(FG()):i.reducers)||{},a=Object.keys(c),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(W,X){const J=typeof W=="string"?W:W.type;if(!J)throw new Error(mu(12));if(J in g.sliceCaseReducersByType)throw new Error(mu(13));return g.sliceCaseReducersByType[J]=X,y},addMatcher(W,X){return g.sliceMatchers.push({matcher:W,reducer:X}),y},exposeAction(W,X){return g.actionCreators[W]=X,y},exposeCaseReducer(W,X){return g.sliceCaseReducersByName[W]=X,y}};a.forEach(W=>{const X=c[W],J={reducerName:W,type:NG(r,W),createNotation:typeof i.reducers=="function"};VG(X)?qG(J,X,y,e):UG(J,X,y)});function x(){const[W={},X=[],J=void 0]=typeof i.extraReducers=="function"?bL(i.extraReducers):[i.extraReducers],st={...W,...g.sliceCaseReducersByType};return IG(i.initialState,ct=>{for(let it in st)ct.addCase(it,st[it]);for(let it of g.sliceMatchers)ct.addMatcher(it.matcher,it.reducer);for(let it of X)ct.addMatcher(it.matcher,it.reducer);J&&ct.addDefaultCase(J)})}const E=W=>W,O=new Map,I=new WeakMap;let F;function V(W,X){return F||(F=x()),F(W,X)}function $(){return F||(F=x()),F.getInitialState()}function K(W,X=!1){function J(ct){let it=ct[W];return typeof it>"u"&&X&&(it=p0(I,J,$)),it}function st(ct=E){const it=p0(O,X,()=>new WeakMap);return p0(it,ct,()=>{const ut={};for(const[xt,wt]of Object.entries(i.selectors??{}))ut[xt]=jG(wt,ct,()=>p0(I,ct,$),X);return ut})}return{reducerPath:W,getSelectors:st,get selectors(){return st(J)},selectSlice:J}}const Y={name:r,reducer:V,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:$,...K(s),injectInto(W,{reducerPath:X,...J}={}){const st=X??s;return W.inject({reducerPath:st,reducer:V},J),{...Y,...K(st,!0)}}};return Y}}function jG(t,e,n,i){function r(s,...c){let a=e(s);return typeof a>"u"&&i&&(a=n()),t(a,...c)}return r.unwrapped=t,r}var ql=BG();function FG(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function UG({type:t,reducerName:e,createNotation:n},i,r){let s,c;if("reducer"in i){if(n&&!$G(i))throw new Error(mu(17));s=i.reducer,c=i.prepare}else s=i;r.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,c?Hu(t,c):Hu(t))}function VG(t){return t._reducerDefinitionType==="asyncThunk"}function $G(t){return t._reducerDefinitionType==="reducerWithPrepare"}function qG({type:t,reducerName:e},n,i,r){if(!r)throw new Error(mu(18));const{payloadCreator:s,fulfilled:c,pending:a,rejected:g,settled:y,options:x}=n,E=r(t,s,x);i.exposeAction(e,E),c&&i.addCase(E.fulfilled,c),a&&i.addCase(E.pending,a),g&&i.addCase(E.rejected,g),y&&i.addMatcher(E.settled,y),i.exposeCaseReducer(e,{fulfilled:c||m0,pending:a||m0,rejected:g||m0,settled:y||m0})}function m0(){}var HG="task",wL="listener",SL="completed",sT="cancelled",ZG=`task-${sT}`,GG=`task-${SL}`,NS=`${wL}-${sT}`,YG=`${wL}-${SL}`,Jx=class{constructor(t){this.code=t,this.message=`${HG} ${sT} (reason: ${t})`}name="TaskAbortError";message},oT=(t,e)=>{if(typeof t!="function")throw new TypeError(mu(32))},ex=()=>{},TL=(t,e=ex)=>(t.catch(e),t),ML=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),hp=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},fp=t=>{if(t.aborted){const{reason:e}=t;throw new Jx(e)}};function EL(t,e){let n=ex;return new Promise((i,r)=>{const s=()=>r(new Jx(t.reason));if(t.aborted){s();return}n=ML(t,s),e.finally(()=>n()).then(i,r)}).finally(()=>{n=ex})}var WG=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Jx?"cancelled":"rejected",error:n}}finally{e?.()}},nx=t=>e=>TL(EL(t,e).then(n=>(fp(t),n))),AL=t=>{const e=nx(t);return n=>e(new Promise(i=>setTimeout(i,n)))},{assign:Hm}=Object,SP={},tb="listenerMiddleware",XG=(t,e)=>{const n=i=>ML(t,()=>hp(i,t.reason));return(i,r)=>{oT(i);const s=new AbortController;n(s);const c=WG(async()=>{fp(t),fp(s.signal);const a=await i({pause:nx(s.signal),delay:AL(s.signal),signal:s.signal});return fp(s.signal),a},()=>hp(s,GG));return r?.autoJoin&&e.push(c.catch(ex)),{result:nx(t)(c),cancel(){hp(s,ZG)}}}},KG=(t,e)=>{const n=async(i,r)=>{fp(e);let s=()=>{};const a=[new Promise((g,y)=>{let x=t({predicate:i,effect:(E,O)=>{O.unsubscribe(),g([E,O.getState(),O.getOriginalState()])}});s=()=>{x(),y()}})];r!=null&&a.push(new Promise(g=>setTimeout(g,r,null)));try{const g=await EL(e,Promise.race(a));return fp(e),g}finally{s()}};return(i,r)=>TL(n(i,r))},CL=t=>{let{type:e,actionCreator:n,matcher:i,predicate:r,effect:s}=t;if(e)r=Hu(e).match;else if(n)e=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(mu(21));return oT(s),{predicate:r,type:e,effect:s}},PL=Hm(t=>{const{type:e,predicate:n,effect:i}=CL(t);return{id:LG(),effect:i,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(mu(22))}}},{withTypes:()=>PL}),TP=(t,e)=>{const{type:n,effect:i,predicate:r}=CL(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===r)&&s.effect===i)},BS=t=>{t.pending.forEach(e=>{hp(e,NS)})},QG=(t,e)=>()=>{for(const n of e.keys())BS(n);t.clear()},MP=(t,e,n)=>{try{t(e,n)}catch(i){setTimeout(()=>{throw i},0)}},kL=Hm(Hu(`${tb}/add`),{withTypes:()=>kL}),JG=Hu(`${tb}/removeAll`),OL=Hm(Hu(`${tb}/remove`),{withTypes:()=>OL}),tY=(...t)=>{console.error(`${tb}/error`,...t)},M_=(t={})=>{const e=new Map,n=new Map,i=I=>{const F=n.get(I)??0;n.set(I,F+1)},r=I=>{const F=n.get(I)??1;F===1?n.delete(I):n.set(I,F-1)},{extra:s,onError:c=tY}=t;oT(c);const a=I=>(I.unsubscribe=()=>e.delete(I.id),e.set(I.id,I),F=>{I.unsubscribe(),F?.cancelActive&&BS(I)}),g=I=>{const F=TP(e,I)??PL(I);return a(F)};Hm(g,{withTypes:()=>g});const y=I=>{const F=TP(e,I);return F&&(F.unsubscribe(),I.cancelActive&&BS(F)),!!F};Hm(y,{withTypes:()=>y});const x=async(I,F,V,$)=>{const K=new AbortController,Y=KG(g,K.signal),W=[];try{I.pending.add(K),i(I),await Promise.resolve(I.effect(F,Hm({},V,{getOriginalState:$,condition:(X,J)=>Y(X,J).then(Boolean),take:Y,delay:AL(K.signal),pause:nx(K.signal),extra:s,signal:K.signal,fork:XG(K.signal,W),unsubscribe:I.unsubscribe,subscribe:()=>{e.set(I.id,I)},cancelActiveListeners:()=>{I.pending.forEach((X,J,st)=>{X!==K&&(hp(X,NS),st.delete(X))})},cancel:()=>{hp(K,NS),I.pending.delete(K)},throwIfCancelled:()=>{fp(K.signal)}})))}catch(X){X instanceof Jx||MP(c,X,{raisedBy:"effect"})}finally{await Promise.all(W),hp(K,YG),r(I),I.pending.delete(K)}},E=QG(e,n);return{middleware:I=>F=>V=>{if(!uL(V))return F(V);if(kL.match(V))return g(V.payload);if(JG.match(V)){E();return}if(OL.match(V))return y(V.payload);let $=I.getState();const K=()=>{if($===SP)throw new Error(mu(23));return $};let Y;try{if(Y=F(V),e.size>0){const W=I.getState(),X=Array.from(e.values());for(const J of X){let st=!1;try{st=J.predicate(V,W,$)}catch(ct){st=!1,MP(c,ct,{raisedBy:"predicate"})}st&&x(J,V,I,K)}}}finally{$=SP}return Y},startListening:g,stopListening:y,clearListeners:E}};function mu(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var eY={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},DL=ql({name:"chartLayout",initialState:eY,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,i,r,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,t.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:nY,setLayout:iY,setChartSize:rY,setScale:aY}=DL.actions,sY=DL.reducer;function IL(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function EP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Um(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EP(Object(n),!0).forEach(function(i){oY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function oY(t,e,n){return(e=lY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lY(t){var e=uY(t,"string");return typeof e=="symbol"?e:e+""}function uY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bl(t,e,n){return vo(t)||vo(e)?n:oh(e)?Yx(t,e,n):typeof e=="function"?e(t):n}var cY=(t,e,n)=>{if(e&&n){var{width:i,height:r}=n,{align:s,verticalAlign:c,layout:a}=e;if((a==="vertical"||a==="horizontal"&&c==="middle")&&s!=="center"&&Dn(t[s]))return Um(Um({},t),{},{[s]:t[s]+(i||0)});if((a==="horizontal"||a==="vertical"&&s==="center")&&c!=="middle"&&Dn(t[c]))return Um(Um({},t),{},{[c]:t[c]+(r||0)})}return t},sf=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",zL=(t,e,n,i)=>{if(i)return t.map(a=>a.coordinate);var r,s,c=t.map(a=>(a.coordinate===e&&(r=!0),a.coordinate===n&&(s=!0),a.coordinate));return r||c.push(e),s||c.push(n),c},LL=(t,e,n)=>{if(!t)return null;var{duplicateDomain:i,type:r,range:s,scale:c,realScaleType:a,isCategorical:g,categoricalDomain:y,tickCount:x,ticks:E,niceTicks:O,axisType:I}=t;if(!c)return null;var F=a==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,V=r==="category"&&c.bandwidth?c.bandwidth()/F:0;if(V=I==="angleAxis"&&s&&s.length>=2?Uu(s[0]-s[1])*2*V:V,E||O){var $=(E||O||[]).map((K,Y)=>{var W=i?i.indexOf(K):K;return{coordinate:c(W)+V,value:K,offset:V,index:Y}});return $.filter(K=>!Pc(K.coordinate))}return g&&y?y.map((K,Y)=>({coordinate:c(K)+V,value:K,index:Y,offset:V})):c.ticks&&x!=null?c.ticks(x).map((K,Y)=>({coordinate:c(K)+V,value:K,offset:V,index:Y})):c.domain().map((K,Y)=>({coordinate:c(K)+V,value:i?i[K]:K,index:Y,offset:V}))},AP=1e-4,hY=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,i=t.range(),r=Math.min(i[0],i[1])-AP,s=Math.max(i[0],i[1])+AP,c=t(e[0]),a=t(e[n-1]);(c<r||c>s||a<r||a>s)&&t.domain([e[0],e[n-1]])}},fY=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var r=0,s=0,c=0;c<e;++c){var a=Pc(t[c][n][1])?t[c][n][0]:t[c][n][1];a>=0?(t[c][n][0]=r,t[c][n][1]=r+a,r=t[c][n][1]):(t[c][n][0]=s,t[c][n][1]=s+a,s=t[c][n][1])}},dY=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var r=0,s=0;s<e;++s){var c=Pc(t[s][n][1])?t[s][n][0]:t[s][n][1];c>=0?(t[s][n][0]=r,t[s][n][1]=r+c,r=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},pY={sign:fY,expand:nZ,none:Qm,silhouette:iZ,wiggle:rZ,positive:dY},mY=(t,e,n)=>{var i=pY[n],r=eZ().keys(e).value((s,c)=>Number(bl(s,c,0))).order(PS).offset(i);return r(t)};function gY(t){return t==null?void 0:String(t)}function CP(t){var{axis:e,ticks:n,bandSize:i,entry:r,index:s,dataKey:c}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!vo(r[e.dataKey])){var a=Zz(n,"value",r[e.dataKey]);if(a)return a.coordinate+i/2}return n[s]?n[s].coordinate+i/2:null}var g=bl(r,vo(c)?e.dataKey:c);return vo(g)?null:e.scale(g)}var yY=t=>{var e=t.flat(2).filter(Dn);return[Math.min(...e),Math.max(...e)]},_Y=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],vY=(t,e,n)=>{if(t!=null)return _Y(Object.keys(t).reduce((i,r)=>{var s=t[r],{stackedData:c}=s,a=c.reduce((g,y)=>{var x=IL(y,e,n),E=yY(x);return[Math.min(g[0],E[0]),Math.max(g[1],E[1])]},[1/0,-1/0]);return[Math.min(a[0],i[0]),Math.max(a[1],i[1])]},[1/0,-1/0]))},PP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ix=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&e&&e.length>=2){for(var r=Wx(e,x=>x.coordinate),s=1/0,c=1,a=r.length;c<a;c++){var g=r[c],y=r[c-1];s=Math.min((g.coordinate||0)-(y.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function OP(t){var{tooltipEntrySettings:e,dataKey:n,payload:i,value:r,name:s}=t;return Um(Um({},e),{},{dataKey:n,payload:i,value:r,name:s})}function RL(t,e){if(t)return String(t);if(typeof e=="string")return e}var xY=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},bY=(t,e)=>e==="centric"?t.angle:t.radius,of=t=>t.layout.width,lf=t=>t.layout.height,wY=t=>t.layout.scale,NL=t=>t.layout.margin,eb=ke(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),nb=ke(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),SY="data-recharts-item-index",TY="data-recharts-item-data-key",E_=60;function DP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function g0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DP(Object(n),!0).forEach(function(i){MY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function MY(t,e,n){return(e=EY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EY(t){var e=AY(t,"string");return typeof e=="symbol"?e:e+""}function AY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CY=t=>t.brush.height;function PY(t){var e=nb(t);return e.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:E_;return n+r}return n},0)}function kY(t){var e=nb(t);return e.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:E_;return n+r}return n},0)}function OY(t){var e=eb(t);return e.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function DY(t){var e=eb(t);return e.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var xo=ke([of,lf,NL,CY,PY,kY,OY,DY,sL,lG],(t,e,n,i,r,s,c,a,g,y)=>{var x={left:(n.left||0)+r,right:(n.right||0)+s},E={top:(n.top||0)+c,bottom:(n.bottom||0)+a},O=g0(g0({},E),x),I=O.bottom;O.bottom+=i,O=cY(O,g,y);var F=t-O.left-O.right,V=e-O.top-O.bottom;return g0(g0({brushBottom:I},O),{},{width:Math.max(F,0),height:Math.max(V,0)})}),IY=ke(xo,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),BL=ke(of,lf,(t,e)=>({x:0,y:0,width:t,height:e})),zY=Z.createContext(null),Hl=()=>Z.useContext(zY)!=null,ib=t=>t.brush,rb=ke([ib,xo,NL],(t,e,n)=>({height:t.height,x:Dn(t.x)?t.x:e.left,y:Dn(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Dn(t.width)?t.width:e.width})),Sw={},Tw={},Mw={},IP;function LY(){return IP||(IP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i,{signal:r,edges:s}={}){let c,a=null;const g=s!=null&&s.includes("leading"),y=s==null||s.includes("trailing"),x=()=>{a!==null&&(n.apply(c,a),c=void 0,a=null)},E=()=>{y&&x(),V()};let O=null;const I=()=>{O!=null&&clearTimeout(O),O=setTimeout(()=>{O=null,E()},i)},F=()=>{O!==null&&(clearTimeout(O),O=null)},V=()=>{F(),c=void 0,a=null},$=()=>{x()},K=function(...Y){if(r?.aborted)return;c=this,a=Y;const W=O==null;I(),g&&W&&x()};return K.schedule=I,K.cancel=V,K.flush=$,r?.addEventListener("abort",V,{once:!0}),K}t.debounce=e})(Mw)),Mw}var zP;function RY(){return zP||(zP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LY();function n(i,r=0,s={}){typeof s!="object"&&(s={});const{leading:c=!1,trailing:a=!0,maxWait:g}=s,y=Array(2);c&&(y[0]="leading"),a&&(y[1]="trailing");let x,E=null;const O=e.debounce(function(...V){x=i.apply(this,V),E=null},r,{edges:y}),I=function(...V){return g!=null&&(E===null&&(E=Date.now()),Date.now()-E>=g)?(x=i.apply(this,V),E=Date.now(),O.cancel(),O.schedule(),x):(O.apply(this,V),x)},F=()=>(O.flush(),x);return I.cancel=O.cancel,I.flush=F,I}t.debounce=n})(Tw)),Tw}var LP;function NY(){return LP||(LP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RY();function n(i,r=0,s={}){const{leading:c=!0,trailing:a=!0}=s;return e.debounce(i,r,{leading:c,maxWait:r,trailing:a})}t.throttle=n})(Sw)),Sw}var Ew,RP;function BY(){return RP||(RP=1,Ew=NY().throttle),Ew}var jY=BY();const FY=yu(jY);var rx=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s]},jL=(t,e,n)=>{var{width:i="100%",height:r="100%",aspect:s,maxHeight:c}=n,a=Kh(i)?t:Number(i),g=Kh(r)?e:Number(r);return s&&s>0&&(a?g=a/s:g&&(a=g*s),c&&g!=null&&g>c&&(g=c)),{calculatedWidth:a,calculatedHeight:g}},UY={width:0,height:0,overflow:"visible"},VY={width:0,overflowX:"visible"},$Y={height:0,overflowY:"visible"},qY={},HY=t=>{var{width:e,height:n}=t,i=Kh(e),r=Kh(n);return i&&r?UY:i?VY:r?$Y:qY};function ZY(t){var{width:e,height:n,aspect:i}=t,r=e,s=n;return r===void 0&&s===void 0?(r="100%",s="100%"):r===void 0?r=i&&i>0?void 0:"100%":s===void 0&&(s=i&&i>0?void 0:"100%"),{width:r,height:s}}function Ga(t){return Number.isFinite(t)}function lh(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function jS(){return jS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jS.apply(null,arguments)}function NP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function BP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NP(Object(n),!0).forEach(function(i){GY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function GY(t,e,n){return(e=YY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YY(t){var e=WY(t,"string");return typeof e=="symbol"?e:e+""}function WY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FL=Z.createContext({width:-1,height:-1});function XY(t){return lh(t.width)&&lh(t.height)}function UL(t){var{children:e,width:n,height:i}=t,r=Z.useMemo(()=>({width:n,height:i}),[n,i]);return XY(r)?Z.createElement(FL.Provider,{value:r},e):null}var lT=()=>Z.useContext(FL),KY=Z.forwardRef((t,e)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:r,height:s,minWidth:c=0,minHeight:a,maxHeight:g,children:y,debounce:x=0,id:E,className:O,onResize:I,style:F={}}=t,V=Z.useRef(null),$=Z.useRef();$.current=I,Z.useImperativeHandle(e,()=>V.current);var[K,Y]=Z.useState({containerWidth:i.width,containerHeight:i.height}),W=Z.useCallback((it,ut)=>{Y(xt=>{var wt=Math.round(it),St=Math.round(ut);return xt.containerWidth===wt&&xt.containerHeight===St?xt:{containerWidth:wt,containerHeight:St}})},[]);Z.useEffect(()=>{if(V.current==null||typeof ResizeObserver>"u")return lg;var it=St=>{var le,{width:pe,height:Te}=St[0].contentRect;W(pe,Te),(le=$.current)===null||le===void 0||le.call($,pe,Te)};x>0&&(it=FY(it,x,{trailing:!0,leading:!1}));var ut=new ResizeObserver(it),{width:xt,height:wt}=V.current.getBoundingClientRect();return W(xt,wt),ut.observe(V.current),()=>{ut.disconnect()}},[W,x]);var{containerWidth:X,containerHeight:J}=K;rx(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:st,calculatedHeight:ct}=jL(X,J,{width:r,height:s,aspect:n,maxHeight:g});return rx(st!=null&&st>0||ct!=null&&ct>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,st,ct,r,s,c,a,n),Z.createElement("div",{id:E?"".concat(E):void 0,className:sa("recharts-responsive-container",O),style:BP(BP({},F),{},{width:r,height:s,minWidth:c,minHeight:a,maxHeight:g}),ref:V},Z.createElement("div",{style:HY({width:r,height:s})},Z.createElement(UL,{width:st,height:ct},y)))}),VL=Z.forwardRef((t,e)=>{var n=lT();if(lh(n.width)&&lh(n.height))return t.children;var{width:i,height:r}=ZY({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:c}=jL(void 0,void 0,{width:i,height:r,aspect:t.aspect,maxHeight:t.maxHeight});return Dn(s)&&Dn(c)?Z.createElement(UL,{width:s,height:c},t.children):Z.createElement(KY,jS({},t,{width:i,height:r,ref:e}))});function $L(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var ab=()=>{var t,e=Hl(),n=jn(IY),i=jn(rb),r=(t=jn(ib))===null||t===void 0?void 0:t.padding;return!e||!i||!r?n:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},QY={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},qL=()=>{var t;return(t=jn(xo))!==null&&t!==void 0?t:QY},HL=()=>jn(of),ZL=()=>jn(lf),Zr=t=>t.layout.layoutType,sb=()=>jn(Zr),JY=()=>{var t=sb();return t!==void 0},ob=t=>{var e=Ks(),n=Hl(),{width:i,height:r}=t,s=lT(),c=i,a=r;return s&&(c=s.width>0?s.width:i,a=s.height>0?s.height:r),Z.useEffect(()=>{!n&&lh(c)&&lh(a)&&e(rY({width:c,height:a}))},[e,n,c,a]),null},tW={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},GL=ql({name:"legend",initialState:tW,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:zs()},removeLegendPayload:{reducer(t,e){var n=Yh(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:zs()}}}),{setLegendSize:Cot,setLegendSettings:Pot,addLegendPayload:eW,removeLegendPayload:nW}=GL.actions,iW=GL.reducer;function FS(){return FS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},FS.apply(null,arguments)}function jP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Aw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jP(Object(n),!0).forEach(function(i){rW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function rW(t,e,n){return(e=aW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aW(t){var e=sW(t,"string");return typeof e=="symbol"?e:e+""}function sW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oW(t){return Array.isArray(t)&&oh(t[0])&&oh(t[1])?t.join(" ~ "):t}var lW=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:i={},labelStyle:r={},payload:s,formatter:c,itemSorter:a,wrapperClassName:g,labelClassName:y,label:x,labelFormatter:E,accessibilityLayer:O=!1}=t,I=()=>{if(s&&s.length){var J={padding:0,margin:0},st=(a?Wx(s,a):s).map((ct,it)=>{if(ct.type==="none")return null;var ut=ct.formatter||c||oW,{value:xt,name:wt}=ct,St=xt,le=wt;if(ut){var pe=ut(xt,wt,ct,it,s);if(Array.isArray(pe))[St,le]=pe;else if(pe!=null)St=pe;else return null}var Te=Aw({display:"block",paddingTop:4,paddingBottom:4,color:ct.color||"#000"},i);return Z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(it),style:Te},oh(le)?Z.createElement("span",{className:"recharts-tooltip-item-name"},le):null,oh(le)?Z.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,Z.createElement("span",{className:"recharts-tooltip-item-value"},St),Z.createElement("span",{className:"recharts-tooltip-item-unit"},ct.unit||""))});return Z.createElement("ul",{className:"recharts-tooltip-item-list",style:J},st)}return null},F=Aw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),V=Aw({margin:0},r),$=!vo(x),K=$?x:"",Y=sa("recharts-default-tooltip",g),W=sa("recharts-tooltip-label",y);$&&E&&s!==void 0&&s!==null&&(K=E(x,s));var X=O?{role:"status","aria-live":"assertive"}:{};return Z.createElement("div",FS({className:Y,style:F},X),Z.createElement("p",{className:W,style:V},Z.isValidElement(K)?K:"".concat(K)),I())},Sy="recharts-tooltip-wrapper",uW={visibility:"hidden"};function cW(t){var{coordinate:e,translateX:n,translateY:i}=t;return sa(Sy,{["".concat(Sy,"-right")]:Dn(n)&&e&&Dn(e.x)&&n>=e.x,["".concat(Sy,"-left")]:Dn(n)&&e&&Dn(e.x)&&n<e.x,["".concat(Sy,"-bottom")]:Dn(i)&&e&&Dn(e.y)&&i>=e.y,["".concat(Sy,"-top")]:Dn(i)&&e&&Dn(e.y)&&i<e.y})}function FP(t){var{allowEscapeViewBox:e,coordinate:n,key:i,offsetTopLeft:r,position:s,reverseDirection:c,tooltipDimension:a,viewBox:g,viewBoxDimension:y}=t;if(s&&Dn(s[i]))return s[i];var x=n[i]-a-(r>0?r:0),E=n[i]+r;if(e[i])return c[i]?x:E;var O=g[i];if(O==null)return 0;if(c[i]){var I=x,F=O;return I<F?Math.max(E,O):Math.max(x,O)}if(y==null)return 0;var V=E+a,$=O+y;return V>$?Math.max(x,O):Math.max(E,O)}function hW(t){var{translateX:e,translateY:n,useTranslate3d:i}=t;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function fW(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:i,position:r,reverseDirection:s,tooltipBox:c,useTranslate3d:a,viewBox:g}=t,y,x,E;return c.height>0&&c.width>0&&n?(x=FP({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:r,reverseDirection:s,tooltipDimension:c.width,viewBox:g,viewBoxDimension:g.width}),E=FP({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:r,reverseDirection:s,tooltipDimension:c.height,viewBox:g,viewBoxDimension:g.height}),y=hW({translateX:x,translateY:E,useTranslate3d:a})):y=uW,{cssProperties:y,cssClasses:cW({translateX:x,translateY:E,coordinate:n})}}function UP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function y0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UP(Object(n),!0).forEach(function(i){US(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function US(t,e,n){return(e=dW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dW(t){var e=pW(t,"string");return typeof e=="symbol"?e:e+""}function pW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class mW extends Z.PureComponent{constructor(){super(...arguments),US(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),US(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,i,r,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(r=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:i,animationEasing:r,children:s,coordinate:c,hasPayload:a,isAnimationActive:g,offset:y,position:x,reverseDirection:E,useTranslate3d:O,viewBox:I,wrapperStyle:F,lastBoundingBox:V,innerRef:$,hasPortalFromProps:K}=this.props,{cssClasses:Y,cssProperties:W}=fW({allowEscapeViewBox:n,coordinate:c,offsetTopLeft:y,position:x,reverseDirection:E,tooltipBox:{height:V.height,width:V.width},useTranslate3d:O,viewBox:I}),X=K?{}:y0(y0({transition:g&&e?"transform ".concat(i,"ms ").concat(r):void 0},W),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),J=y0(y0({},X),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},F);return Z.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:Y,style:J,ref:$},s)}}var gW=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ug={devToolsEnabled:!1,isSsr:gW()},YL=()=>{var t;return(t=jn(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function VS(){return VS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},VS.apply(null,arguments)}function VP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function $P(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VP(Object(n),!0).forEach(function(i){yW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yW(t,e,n){return(e=_W(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _W(t){var e=vW(t,"string");return typeof e=="symbol"?e:e+""}function vW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qP={curveBasisClosed:q7,curveBasisOpen:H7,curveBasis:$7,curveBumpX:U7,curveBumpY:V7,curveLinearClosed:Z7,curveLinear:Zx,curveMonotoneX:G7,curveMonotoneY:Y7,curveNatural:W7,curveStep:X7,curveStepAfter:Q7,curveStepBefore:K7},ax=t=>Ga(t.x)&&Ga(t.y),HP=t=>t.base!=null&&ax(t.base)&&ax(t),Ty=t=>t.x,My=t=>t.y,xW=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(J2(t));return(n==="curveMonotone"||n==="curveBump")&&e?qP["".concat(n).concat(e==="vertical"?"Y":"X")]:qP[n]||Zx},bW=t=>{var{type:e="linear",points:n=[],baseLine:i,layout:r,connectNulls:s=!1}=t,c=xW(e,r),a=s?n.filter(ax):n,g;if(Array.isArray(i)){var y=n.map((I,F)=>$P($P({},I),{},{base:i[F]}));r==="vertical"?g=c0().y(My).x1(Ty).x0(I=>I.base.x):g=c0().x(Ty).y1(My).y0(I=>I.base.y);var x=g.defined(HP).curve(c),E=s?y.filter(HP):y;return x(E)}r==="vertical"&&Dn(i)?g=c0().y(My).x1(Ty).x0(i):Dn(i)?g=c0().x(Ty).y1(My).y0(i):g=Lz().x(Ty).y(My);var O=g.defined(ax).curve(c);return O(a)},D0=t=>{var{className:e,points:n,path:i,pathRef:r}=t;if((!n||!n.length)&&!i)return null;var s=n&&n.length?bW(t):i;return Z.createElement("path",VS({},Cc(t),tT(t),{className:sa("recharts-curve",e),d:s===null?void 0:s,ref:r}))},wW=["x","y","top","left","width","height","className"];function $S(){return $S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$S.apply(null,arguments)}function ZP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function SW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZP(Object(n),!0).forEach(function(i){TW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function TW(t,e,n){return(e=MW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MW(t){var e=EW(t,"string");return typeof e=="symbol"?e:e+""}function EW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AW(t,e){if(t==null)return{};var n,i,r=CW(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function CW(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var PW=(t,e,n,i,r,s)=>"M".concat(t,",").concat(r,"v").concat(i,"M").concat(s,",").concat(e,"h").concat(n),kW=t=>{var{x:e=0,y:n=0,top:i=0,left:r=0,width:s=0,height:c=0,className:a}=t,g=AW(t,wW),y=SW({x:e,y:n,top:i,left:r,width:s,height:c},g);return!Dn(e)||!Dn(n)||!Dn(s)||!Dn(c)||!Dn(i)||!Dn(r)?null:Z.createElement("path",$S({},qu(y),{className:sa("recharts-cross",a),d:PW(e,n,s,c,i,r)}))};function OW(t,e,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-r:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-r,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function GP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function YP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GP(Object(n),!0).forEach(function(i){DW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function DW(t,e,n){return(e=IW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IW(t){var e=zW(t,"string");return typeof e=="symbol"?e:e+""}function zW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LW=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),RW=(t,e,n)=>t.map(i=>"".concat(LW(i)," ").concat(e,"ms ").concat(n)).join(","),NW=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,i)=>n.filter(r=>i.includes(r))),r_=(t,e)=>Object.keys(e).reduce((n,i)=>YP(YP({},n),{},{[i]:t(i,e[i])}),{});function WP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Is(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WP(Object(n),!0).forEach(function(i){BW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function BW(t,e,n){return(e=jW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jW(t){var e=FW(t,"string");return typeof e=="symbol"?e:e+""}function FW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sx=(t,e,n)=>t+(e-t)*n,qS=t=>{var{from:e,to:n}=t;return e!==n},WL=(t,e,n)=>{var i=r_((r,s)=>{if(qS(s)){var[c,a]=t(s.from,s.to,s.velocity);return Is(Is({},s),{},{from:c,velocity:a})}return s},e);return n<1?r_((r,s)=>qS(s)?Is(Is({},s),{},{velocity:sx(s.velocity,i[r].velocity,n),from:sx(s.from,i[r].from,n)}):s,e):WL(t,i,n-1)};function UW(t,e,n,i,r,s){var c,a=i.reduce((O,I)=>Is(Is({},O),{},{[I]:{from:t[I],velocity:0,to:e[I]}}),{}),g=()=>r_((O,I)=>I.from,a),y=()=>!Object.values(a).filter(qS).length,x=null,E=O=>{c||(c=O);var I=O-c,F=I/n.dt;a=WL(n,a,F),r(Is(Is(Is({},t),e),g())),c=O,y()||(x=s.setTimeout(E))};return()=>(x=s.setTimeout(E),()=>{var O;(O=x)===null||O===void 0||O()})}function VW(t,e,n,i,r,s,c){var a=null,g=r.reduce((E,O)=>Is(Is({},E),{},{[O]:[t[O],e[O]]}),{}),y,x=E=>{y||(y=E);var O=(E-y)/i,I=r_((V,$)=>sx(...$,n(O)),g);if(s(Is(Is(Is({},t),e),I)),O<1)a=c.setTimeout(x);else{var F=r_((V,$)=>sx(...$,n(1)),g);s(Is(Is(Is({},t),e),F))}};return()=>(a=c.setTimeout(x),()=>{var E;(E=a)===null||E===void 0||E()})}const $W=(t,e,n,i,r,s)=>{var c=NW(t,e);return n==null?()=>(r(Is(Is({},t),e)),()=>{}):n.isStepper===!0?UW(t,e,n,c,r,s):VW(t,e,n,i,c,r,s)};var ox=1e-4,XL=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],KL=(t,e)=>t.map((n,i)=>n*e**i).reduce((n,i)=>n+i),XP=(t,e)=>n=>{var i=XL(t,e);return KL(i,n)},qW=(t,e)=>n=>{var i=XL(t,e),r=[...i.map((s,c)=>s*c).slice(1),0];return KL(r,n)},HW=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r,s=n[0].split("(");if(s[0]==="cubic-bezier"&&((r=s[1])===null||r===void 0?void 0:r.split(")")[0].split(",").length)===4){var c=s[1].split(")")[0].split(",").map(a=>parseFloat(a));return[c[0],c[1],c[2],c[3]]}}}return n.length===4?n:[0,0,1,1]},ZW=(t,e,n,i)=>{var r=XP(t,n),s=XP(e,i),c=qW(t,n),a=y=>y>1?1:y<0?0:y,g=y=>{for(var x=y>1?1:y,E=x,O=0;O<8;++O){var I=r(E)-x,F=c(E);if(Math.abs(I-x)<ox||F<ox)return s(E);E=a(E-I/F)}return s(E)};return g.isStepper=!1,g},KP=function(){return ZW(...HW(...arguments))},GW=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:r=17}=e,s=(c,a,g)=>{var y=-(c-a)*n,x=g*i,E=g+(y-x)*r/1e3,O=g*r/1e3+c;return Math.abs(O-a)<ox&&Math.abs(E)<ox?[a,0]:[O,E]};return s.isStepper=!0,s.dt=r,s},YW=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return KP(t);case"spring":return GW();default:if(t.split("(")[0]==="cubic-bezier")return KP(t)}return typeof t=="function"?t:null};function WW(t){var e,n=()=>null,i=!1,r=null,s=c=>{if(!i){if(Array.isArray(c)){if(!c.length)return;var a=c,[g,...y]=a;if(typeof g=="number"){r=t.setTimeout(s.bind(null,y),g);return}s(g),r=t.setTimeout(s.bind(null,y));return}typeof c=="string"&&(e=c,n(e)),typeof c=="object"&&(e=c,n(e)),typeof c=="function"&&c()}};return{stop:()=>{i=!0},start:c=>{i=!1,r&&(r(),r=null),s(c)},subscribe:c=>(n=c,()=>{n=()=>null}),getTimeoutController:()=>t}}class XW{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,s=c=>{c-i>=n?e(c):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(s))};return r=requestAnimationFrame(s),()=>{r!=null&&cancelAnimationFrame(r)}}}function KW(){return WW(new XW)}var QW=Z.createContext(KW);function JW(t,e){var n=Z.useContext(QW);return Z.useMemo(()=>e??n(t),[t,e,n])}var tX={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},QP={t:0},Cw={t:1};function QL(t){var e=_u(t,tX),{isActive:n,canBegin:i,duration:r,easing:s,begin:c,onAnimationEnd:a,onAnimationStart:g,children:y}=e,x=JW(e.animationId,e.animationManager),[E,O]=Z.useState(n?QP:Cw),I=Z.useRef(null);return Z.useEffect(()=>{n||O(Cw)},[n]),Z.useEffect(()=>{if(!n||!i)return lg;var F=$W(QP,Cw,YW(s),r,O,x.getTimeoutController()),V=()=>{I.current=F()};return x.start([g,c,V,r,a]),()=>{x.stop(),I.current&&I.current(),a()}},[n,i,r,s,c,g,a,x]),y(E.t)}function JL(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=Z.useRef(t_(e)),i=Z.useRef(t);return i.current!==t&&(n.current=t_(e),i.current=t),n.current}var eX=["radius"],nX=["radius"];function JP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function tk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JP(Object(n),!0).forEach(function(i){iX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function iX(t,e,n){return(e=rX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rX(t){var e=aX(t,"string");return typeof e=="symbol"?e:e+""}function aX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lx(){return lx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lx.apply(null,arguments)}function ek(t,e){if(t==null)return{};var n,i,r=sX(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sX(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var nk=(t,e,n,i,r)=>{var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),c=i>=0?1:-1,a=n>=0?1:-1,g=i>=0&&n>=0||i<0&&n<0?1:0,y;if(s>0&&r instanceof Array){for(var x=[0,0,0,0],E=0,O=4;E<O;E++)x[E]=r[E]>s?s:r[E];y="M".concat(t,",").concat(e+c*x[0]),x[0]>0&&(y+="A ".concat(x[0],",").concat(x[0],",0,0,").concat(g,",").concat(t+a*x[0],",").concat(e)),y+="L ".concat(t+n-a*x[1],",").concat(e),x[1]>0&&(y+="A ".concat(x[1],",").concat(x[1],",0,0,").concat(g,`,
        `).concat(t+n,",").concat(e+c*x[1])),y+="L ".concat(t+n,",").concat(e+i-c*x[2]),x[2]>0&&(y+="A ".concat(x[2],",").concat(x[2],",0,0,").concat(g,`,
        `).concat(t+n-a*x[2],",").concat(e+i)),y+="L ".concat(t+a*x[3],",").concat(e+i),x[3]>0&&(y+="A ".concat(x[3],",").concat(x[3],",0,0,").concat(g,`,
        `).concat(t,",").concat(e+i-c*x[3])),y+="Z"}else if(s>0&&r===+r&&r>0){var I=Math.min(s,r);y="M ".concat(t,",").concat(e+c*I,`
            A `).concat(I,",").concat(I,",0,0,").concat(g,",").concat(t+a*I,",").concat(e,`
            L `).concat(t+n-a*I,",").concat(e,`
            A `).concat(I,",").concat(I,",0,0,").concat(g,",").concat(t+n,",").concat(e+c*I,`
            L `).concat(t+n,",").concat(e+i-c*I,`
            A `).concat(I,",").concat(I,",0,0,").concat(g,",").concat(t+n-a*I,",").concat(e+i,`
            L `).concat(t+a*I,",").concat(e+i,`
            A `).concat(I,",").concat(I,",0,0,").concat(g,",").concat(t,",").concat(e+i-c*I," Z")}else y="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return y},ik={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oX=t=>{var e=_u(t,ik),n=Z.useRef(null),[i,r]=Z.useState(-1);Z.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Ct=n.current.getTotalLength();Ct&&r(Ct)}catch{}},[]);var{x:s,y:c,width:a,height:g,radius:y,className:x}=e,{animationEasing:E,animationDuration:O,animationBegin:I,isAnimationActive:F,isUpdateAnimationActive:V}=e,$=Z.useRef(a),K=Z.useRef(g),Y=Z.useRef(s),W=Z.useRef(c),X=Z.useMemo(()=>({x:s,y:c,width:a,height:g,radius:y}),[s,c,a,g,y]),J=JL(X,"rectangle-");if(s!==+s||c!==+c||a!==+a||g!==+g||a===0||g===0)return null;var st=sa("recharts-rectangle",x);if(!V){var ct=qu(e),{radius:it}=ct,ut=ek(ct,eX);return Z.createElement("path",lx({},ut,{radius:typeof y=="number"?y:void 0,className:st,d:nk(s,c,a,g,y)}))}var xt=$.current,wt=K.current,St=Y.current,le=W.current,pe="0px ".concat(i===-1?1:i,"px"),Te="".concat(i,"px 0px"),Nt=RW(["strokeDasharray"],O,typeof E=="string"?E:ik.animationEasing);return Z.createElement(QL,{animationId:J,key:J,canBegin:i>0,duration:O,easing:E,isActive:V,begin:I},Ct=>{var Tt=Qc(xt,a,Ct),Bt=Qc(wt,g,Ct),$t=Qc(St,s,Ct),ft=Qc(le,c,Ct);n.current&&($.current=Tt,K.current=Bt,Y.current=$t,W.current=ft);var Mt;F?Ct>0?Mt={transition:Nt,strokeDasharray:Te}:Mt={strokeDasharray:pe}:Mt={strokeDasharray:Te};var Lt=qu(e),{radius:Xt}=Lt,re=ek(Lt,nX);return Z.createElement("path",lx({},re,{radius:typeof y=="number"?y:void 0,className:st,d:nk($t,ft,Tt,Bt,y),ref:n,style:tk(tk({},Mt),e.style)}))})};function rk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ak(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rk(Object(n),!0).forEach(function(i){lX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function lX(t,e,n){return(e=uX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uX(t){var e=cX(t,"string");return typeof e=="symbol"?e:e+""}function cX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ux=Math.PI/180,hX=t=>t*180/Math.PI,_o=(t,e,n,i)=>({x:t+Math.cos(-ux*i)*n,y:e+Math.sin(-ux*i)*n}),fX=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},dX=(t,e)=>{var{x:n,y:i}=t,{x:r,y:s}=e;return Math.sqrt((n-r)**2+(i-s)**2)},pX=(t,e)=>{var{x:n,y:i}=t,{cx:r,cy:s}=e,c=dX({x:n,y:i},{x:r,y:s});if(c<=0)return{radius:c,angle:0};var a=(n-r)/c,g=Math.acos(a);return i>s&&(g=2*Math.PI-g),{radius:c,angle:hX(g),angleInRadian:g}},mX=t=>{var{startAngle:e,endAngle:n}=t,i=Math.floor(e/360),r=Math.floor(n/360),s=Math.min(i,r);return{startAngle:e-s*360,endAngle:n-s*360}},gX=(t,e)=>{var{startAngle:n,endAngle:i}=e,r=Math.floor(n/360),s=Math.floor(i/360),c=Math.min(r,s);return t+c*360},yX=(t,e)=>{var{chartX:n,chartY:i}=t,{radius:r,angle:s}=pX({x:n,y:i},e),{innerRadius:c,outerRadius:a}=e;if(r<c||r>a||r===0)return null;var{startAngle:g,endAngle:y}=mX(e),x=s,E;if(g<=y){for(;x>y;)x-=360;for(;x<g;)x+=360;E=x>=g&&x<=y}else{for(;x>g;)x-=360;for(;x<y;)x+=360;E=x>=y&&x<=g}return E?ak(ak({},e),{},{radius:r,angle:gX(x,e)}):null};function tR(t){var{cx:e,cy:n,radius:i,startAngle:r,endAngle:s}=t,c=_o(e,n,i,r),a=_o(e,n,i,s);return{points:[c,a],cx:e,cy:n,radius:i,startAngle:r,endAngle:s}}function HS(){return HS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},HS.apply(null,arguments)}var _X=(t,e)=>{var n=Uu(e-t),i=Math.min(Math.abs(e-t),359.999);return n*i},_0=t=>{var{cx:e,cy:n,radius:i,angle:r,sign:s,isExternal:c,cornerRadius:a,cornerIsExternal:g}=t,y=a*(c?1:-1)+i,x=Math.asin(a/y)/ux,E=g?r:r+s*x,O=_o(e,n,y,E),I=_o(e,n,i,E),F=g?r-s*x:r,V=_o(e,n,y*Math.cos(x*ux),F);return{center:O,circleTangency:I,lineTangency:V,theta:x}},eR=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:s,endAngle:c}=t,a=_X(s,c),g=s+a,y=_o(e,n,r,s),x=_o(e,n,r,g),E="M ".concat(y.x,",").concat(y.y,`
    A `).concat(r,",").concat(r,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(s>g),`,
    `).concat(x.x,",").concat(x.y,`
  `);if(i>0){var O=_o(e,n,i,s),I=_o(e,n,i,g);E+="L ".concat(I.x,",").concat(I.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(s<=g),`,
            `).concat(O.x,",").concat(O.y," Z")}else E+="L ".concat(e,",").concat(n," Z");return E},vX=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,cornerRadius:s,forceCornerRadius:c,cornerIsExternal:a,startAngle:g,endAngle:y}=t,x=Uu(y-g),{circleTangency:E,lineTangency:O,theta:I}=_0({cx:e,cy:n,radius:r,angle:g,sign:x,cornerRadius:s,cornerIsExternal:a}),{circleTangency:F,lineTangency:V,theta:$}=_0({cx:e,cy:n,radius:r,angle:y,sign:-x,cornerRadius:s,cornerIsExternal:a}),K=a?Math.abs(g-y):Math.abs(g-y)-I-$;if(K<0)return c?"M ".concat(O.x,",").concat(O.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):eR({cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:g,endAngle:y});var Y="M ".concat(O.x,",").concat(O.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(x<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(r,",").concat(r,",0,").concat(+(K>180),",").concat(+(x<0),",").concat(F.x,",").concat(F.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(x<0),",").concat(V.x,",").concat(V.y,`
  `);if(i>0){var{circleTangency:W,lineTangency:X,theta:J}=_0({cx:e,cy:n,radius:i,angle:g,sign:x,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),{circleTangency:st,lineTangency:ct,theta:it}=_0({cx:e,cy:n,radius:i,angle:y,sign:-x,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),ut=a?Math.abs(g-y):Math.abs(g-y)-J-it;if(ut<0&&s===0)return"".concat(Y,"L").concat(e,",").concat(n,"Z");Y+="L".concat(ct.x,",").concat(ct.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(x<0),",").concat(st.x,",").concat(st.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ut>180),",").concat(+(x>0),",").concat(W.x,",").concat(W.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(x<0),",").concat(X.x,",").concat(X.y,"Z")}else Y+="L".concat(e,",").concat(n,"Z");return Y},xX={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},bX=t=>{var e=_u(t,xX),{cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:c,forceCornerRadius:a,cornerIsExternal:g,startAngle:y,endAngle:x,className:E}=e;if(s<r||y===x)return null;var O=sa("recharts-sector",E),I=s-r,F=id(c,I,0,!0),V;return F>0&&Math.abs(y-x)<360?V=vX({cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:Math.min(F,I/2),forceCornerRadius:a,cornerIsExternal:g,startAngle:y,endAngle:x}):V=eR({cx:n,cy:i,innerRadius:r,outerRadius:s,startAngle:y,endAngle:x}),Z.createElement("path",HS({},qu(e),{className:O,d:V}))};function wX(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(Gz(e)){if(t==="centric"){var{cx:i,cy:r,innerRadius:s,outerRadius:c,angle:a}=e,g=_o(i,r,s,a),y=_o(i,r,c,a);return[{x:g.x,y:g.y},{x:y.x,y:y.y}]}return tR(e)}}var Pw={},kw={},Ow={},sk;function SX(){return sk||(sk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rL();function n(i){return e.isSymbol(i)?NaN:Number(i)}t.toNumber=n})(Ow)),Ow}var ok;function TX(){return ok||(ok=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SX();function n(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}t.toFinite=n})(kw)),kw}var lk;function MX(){return lk||(lk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aL(),n=TX();function i(r,s,c){c&&typeof c!="number"&&e.isIterateeCall(r,s,c)&&(s=c=void 0),r=n.toFinite(r),s===void 0?(s=r,r=0):s=n.toFinite(s),c=c===void 0?r<s?1:-1:n.toFinite(c);const a=Math.max(Math.ceil((s-r)/(c||1)),0),g=new Array(a);for(let y=0;y<a;y++)g[y]=r,r+=c;return g}t.range=i})(Pw)),Pw}var Dw,uk;function EX(){return uk||(uk=1,Dw=MX().range),Dw}var AX=EX();const nR=yu(AX);function Jf(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function CX(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uT(t){let e,n,i;t.length!==2?(e=Jf,n=(a,g)=>Jf(t(a),g),i=(a,g)=>t(a)-g):(e=t===Jf||t===CX?t:PX,n=t,i=t);function r(a,g,y=0,x=a.length){if(y<x){if(e(g,g)!==0)return x;do{const E=y+x>>>1;n(a[E],g)<0?y=E+1:x=E}while(y<x)}return y}function s(a,g,y=0,x=a.length){if(y<x){if(e(g,g)!==0)return x;do{const E=y+x>>>1;n(a[E],g)<=0?y=E+1:x=E}while(y<x)}return y}function c(a,g,y=0,x=a.length){const E=r(a,g,y,x-1);return E>y&&i(a[E-1],g)>-i(a[E],g)?E-1:E}return{left:r,center:c,right:s}}function PX(){return 0}function iR(t){return t===null?NaN:+t}function*kX(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const OX=uT(Jf),A_=OX.right;uT(iR).center;class ck extends Map{constructor(e,n=zX){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(hk(this,e))}has(e){return super.has(hk(this,e))}set(e,n){return super.set(DX(this,e),n)}delete(e){return super.delete(IX(this,e))}}function hk({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function DX({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function IX({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function zX(t){return t!==null&&typeof t=="object"?t.valueOf():t}function LX(t=Jf){if(t===Jf)return rR;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function rR(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const RX=Math.sqrt(50),NX=Math.sqrt(10),BX=Math.sqrt(2);function cx(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),c=s>=RX?10:s>=NX?5:s>=BX?2:1;let a,g,y;return r<0?(y=Math.pow(10,-r)/c,a=Math.round(t*y),g=Math.round(e*y),a/y<t&&++a,g/y>e&&--g,y=-y):(y=Math.pow(10,r)*c,a=Math.round(t/y),g=Math.round(e/y),a*y<t&&++a,g*y>e&&--g),g<a&&.5<=n&&n<2?cx(t,e,n*2):[a,g,y]}function ZS(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,c]=i?cx(e,t,n):cx(t,e,n);if(!(s>=r))return[];const a=s-r+1,g=new Array(a);if(i)if(c<0)for(let y=0;y<a;++y)g[y]=(s-y)/-c;else for(let y=0;y<a;++y)g[y]=(s-y)*c;else if(c<0)for(let y=0;y<a;++y)g[y]=(r+y)/-c;else for(let y=0;y<a;++y)g[y]=(r+y)*c;return g}function GS(t,e,n){return e=+e,t=+t,n=+n,cx(t,e,n)[2]}function YS(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?GS(e,t,n):GS(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function fk(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function dk(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function aR(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?rR:LX(r);i>n;){if(i-n>600){const g=i-n+1,y=e-n+1,x=Math.log(g),E=.5*Math.exp(2*x/3),O=.5*Math.sqrt(x*E*(g-E)/g)*(y-g/2<0?-1:1),I=Math.max(n,Math.floor(e-y*E/g+O)),F=Math.min(i,Math.floor(e+(g-y)*E/g+O));aR(t,e,I,F,r)}const s=t[e];let c=n,a=i;for(Ey(t,n,e),r(t[i],s)>0&&Ey(t,n,i);c<a;){for(Ey(t,c,a),++c,--a;r(t[c],s)<0;)++c;for(;r(t[a],s)>0;)--a}r(t[n],s)===0?Ey(t,n,a):(++a,Ey(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}return t}function Ey(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function jX(t,e,n){if(t=Float64Array.from(kX(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return dk(t);if(e>=1)return fk(t);var i,r=(i-1)*e,s=Math.floor(r),c=fk(aR(t,s).subarray(0,s+1)),a=dk(t.subarray(s+1));return c+(a-c)*(r-s)}}function FX(t,e,n=iR){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),c=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return c+(a-c)*(r-s)}}function UX(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function Gu(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function uf(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const WS=Symbol("implicit");function cT(){var t=new ck,e=[],n=[],i=WS;function r(s){let c=t.get(s);if(c===void 0){if(i!==WS)return i;t.set(s,c=e.push(s)-1)}return n[c%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new ck;for(const c of s)t.has(c)||t.set(c,e.push(c)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return cT(e,n).unknown(i)},Gu.apply(r,arguments),r}function hT(){var t=cT().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,c,a=!1,g=0,y=0,x=.5;delete t.unknown;function E(){var O=e().length,I=r<i,F=I?r:i,V=I?i:r;s=(V-F)/Math.max(1,O-g+y*2),a&&(s=Math.floor(s)),F+=(V-F-s*(O-g))*x,c=s*(1-g),a&&(F=Math.round(F),c=Math.round(c));var $=UX(O).map(function(K){return F+s*K});return n(I?$.reverse():$)}return t.domain=function(O){return arguments.length?(e(O),E()):e()},t.range=function(O){return arguments.length?([i,r]=O,i=+i,r=+r,E()):[i,r]},t.rangeRound=function(O){return[i,r]=O,i=+i,r=+r,a=!0,E()},t.bandwidth=function(){return c},t.step=function(){return s},t.round=function(O){return arguments.length?(a=!!O,E()):a},t.padding=function(O){return arguments.length?(g=Math.min(1,y=+O),E()):g},t.paddingInner=function(O){return arguments.length?(g=Math.min(1,O),E()):g},t.paddingOuter=function(O){return arguments.length?(y=+O,E()):y},t.align=function(O){return arguments.length?(x=Math.max(0,Math.min(1,O)),E()):x},t.copy=function(){return hT(e(),[i,r]).round(a).paddingInner(g).paddingOuter(y).align(x)},Gu.apply(E(),arguments)}function sR(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return sR(e())},t}function VX(){return sR(hT.apply(null,arguments).paddingInner(1))}function fT(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function oR(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function C_(){}var a_=.7,hx=1/a_,Zm="\\s*([+-]?\\d+)\\s*",s_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ih="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$X=/^#([0-9a-f]{3,8})$/,qX=new RegExp(`^rgb\\(${Zm},${Zm},${Zm}\\)$`),HX=new RegExp(`^rgb\\(${ih},${ih},${ih}\\)$`),ZX=new RegExp(`^rgba\\(${Zm},${Zm},${Zm},${s_}\\)$`),GX=new RegExp(`^rgba\\(${ih},${ih},${ih},${s_}\\)$`),YX=new RegExp(`^hsl\\(${s_},${ih},${ih}\\)$`),WX=new RegExp(`^hsla\\(${s_},${ih},${ih},${s_}\\)$`),pk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fT(C_,o_,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:mk,formatHex:mk,formatHex8:XX,formatHsl:KX,formatRgb:gk,toString:gk});function mk(){return this.rgb().formatHex()}function XX(){return this.rgb().formatHex8()}function KX(){return lR(this).formatHsl()}function gk(){return this.rgb().formatRgb()}function o_(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$X.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?yk(e):n===3?new $l(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?v0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?v0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qX.exec(t))?new $l(e[1],e[2],e[3],1):(e=HX.exec(t))?new $l(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ZX.exec(t))?v0(e[1],e[2],e[3],e[4]):(e=GX.exec(t))?v0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=YX.exec(t))?xk(e[1],e[2]/100,e[3]/100,1):(e=WX.exec(t))?xk(e[1],e[2]/100,e[3]/100,e[4]):pk.hasOwnProperty(t)?yk(pk[t]):t==="transparent"?new $l(NaN,NaN,NaN,0):null}function yk(t){return new $l(t>>16&255,t>>8&255,t&255,1)}function v0(t,e,n,i){return i<=0&&(t=e=n=NaN),new $l(t,e,n,i)}function QX(t){return t instanceof C_||(t=o_(t)),t?(t=t.rgb(),new $l(t.r,t.g,t.b,t.opacity)):new $l}function XS(t,e,n,i){return arguments.length===1?QX(t):new $l(t,e,n,i??1)}function $l(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}fT($l,XS,oR(C_,{brighter(t){return t=t==null?hx:Math.pow(hx,t),new $l(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?a_:Math.pow(a_,t),new $l(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $l(dp(this.r),dp(this.g),dp(this.b),fx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_k,formatHex:_k,formatHex8:JX,formatRgb:vk,toString:vk}));function _k(){return`#${ap(this.r)}${ap(this.g)}${ap(this.b)}`}function JX(){return`#${ap(this.r)}${ap(this.g)}${ap(this.b)}${ap((isNaN(this.opacity)?1:this.opacity)*255)}`}function vk(){const t=fx(this.opacity);return`${t===1?"rgb(":"rgba("}${dp(this.r)}, ${dp(this.g)}, ${dp(this.b)}${t===1?")":`, ${t})`}`}function fx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function dp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ap(t){return t=dp(t),(t<16?"0":"")+t.toString(16)}function xk(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ec(t,e,n,i)}function lR(t){if(t instanceof Ec)return new Ec(t.h,t.s,t.l,t.opacity);if(t instanceof C_||(t=o_(t)),!t)return new Ec;if(t instanceof Ec)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),c=NaN,a=s-r,g=(s+r)/2;return a?(e===s?c=(n-i)/a+(n<i)*6:n===s?c=(i-e)/a+2:c=(e-n)/a+4,a/=g<.5?s+r:2-s-r,c*=60):a=g>0&&g<1?0:c,new Ec(c,a,g,t.opacity)}function tK(t,e,n,i){return arguments.length===1?lR(t):new Ec(t,e,n,i??1)}function Ec(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}fT(Ec,tK,oR(C_,{brighter(t){return t=t==null?hx:Math.pow(hx,t),new Ec(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?a_:Math.pow(a_,t),new Ec(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new $l(Iw(t>=240?t-240:t+120,r,i),Iw(t,r,i),Iw(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Ec(bk(this.h),x0(this.s),x0(this.l),fx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=fx(this.opacity);return`${t===1?"hsl(":"hsla("}${bk(this.h)}, ${x0(this.s)*100}%, ${x0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function bk(t){return t=(t||0)%360,t<0?t+360:t}function x0(t){return Math.max(0,Math.min(1,t||0))}function Iw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const dT=t=>()=>t;function eK(t,e){return function(n){return t+n*e}}function nK(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function iK(t){return(t=+t)==1?uR:function(e,n){return n-e?nK(e,n,t):dT(isNaN(e)?n:e)}}function uR(t,e){var n=e-t;return n?eK(t,n):dT(isNaN(t)?e:t)}const wk=(function t(e){var n=iK(e);function i(r,s){var c=n((r=XS(r)).r,(s=XS(s)).r),a=n(r.g,s.g),g=n(r.b,s.b),y=uR(r.opacity,s.opacity);return function(x){return r.r=c(x),r.g=a(x),r.b=g(x),r.opacity=y(x),r+""}}return i.gamma=t,i})(1);function rK(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function aK(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function sK(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),c;for(c=0;c<i;++c)r[c]=cg(t[c],e[c]);for(;c<n;++c)s[c]=e[c];return function(a){for(c=0;c<i;++c)s[c]=r[c](a);return s}}function oK(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function dx(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function lK(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=cg(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var KS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zw=new RegExp(KS.source,"g");function uK(t){return function(){return t}}function cK(t){return function(e){return t(e)+""}}function hK(t,e){var n=KS.lastIndex=zw.lastIndex=0,i,r,s,c=-1,a=[],g=[];for(t=t+"",e=e+"";(i=KS.exec(t))&&(r=zw.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),a[c]?a[c]+=s:a[++c]=s),(i=i[0])===(r=r[0])?a[c]?a[c]+=r:a[++c]=r:(a[++c]=null,g.push({i:c,x:dx(i,r)})),n=zw.lastIndex;return n<e.length&&(s=e.slice(n),a[c]?a[c]+=s:a[++c]=s),a.length<2?g[0]?cK(g[0].x):uK(e):(e=g.length,function(y){for(var x=0,E;x<e;++x)a[(E=g[x]).i]=E.x(y);return a.join("")})}function cg(t,e){var n=typeof e,i;return e==null||n==="boolean"?dT(e):(n==="number"?dx:n==="string"?(i=o_(e))?(e=i,wk):hK:e instanceof o_?wk:e instanceof Date?oK:aK(e)?rK:Array.isArray(e)?sK:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lK:dx)(t,e)}function pT(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function fK(t,e){e===void 0&&(e=t,t=cg);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(c){var a=Math.max(0,Math.min(i-1,Math.floor(c*=i)));return s[a](c-a)}}function dK(t){return function(){return t}}function px(t){return+t}var Sk=[0,1];function vl(t){return t}function QS(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:dK(isNaN(e)?NaN:.5)}function pK(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function mK(t,e,n){var i=t[0],r=t[1],s=e[0],c=e[1];return r<i?(i=QS(r,i),s=n(c,s)):(i=QS(i,r),s=n(s,c)),function(a){return s(i(a))}}function gK(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),c=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<i;)r[c]=QS(t[c],t[c+1]),s[c]=n(e[c],e[c+1]);return function(a){var g=A_(t,a,1,i)-1;return s[g](r[g](a))}}function P_(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lb(){var t=Sk,e=Sk,n=cg,i,r,s,c=vl,a,g,y;function x(){var O=Math.min(t.length,e.length);return c!==vl&&(c=pK(t[0],t[O-1])),a=O>2?gK:mK,g=y=null,E}function E(O){return O==null||isNaN(O=+O)?s:(g||(g=a(t.map(i),e,n)))(i(c(O)))}return E.invert=function(O){return c(r((y||(y=a(e,t.map(i),dx)))(O)))},E.domain=function(O){return arguments.length?(t=Array.from(O,px),x()):t.slice()},E.range=function(O){return arguments.length?(e=Array.from(O),x()):e.slice()},E.rangeRound=function(O){return e=Array.from(O),n=pT,x()},E.clamp=function(O){return arguments.length?(c=O?!0:vl,x()):c!==vl},E.interpolate=function(O){return arguments.length?(n=O,x()):n},E.unknown=function(O){return arguments.length?(s=O,E):s},function(O,I){return i=O,r=I,x()}}function mT(){return lb()(vl,vl)}function yK(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function mx(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Jm(t){return t=mx(Math.abs(t)),t?t[1]:NaN}function _K(t,e){return function(n,i){for(var r=n.length,s=[],c=0,a=t[0],g=0;r>0&&a>0&&(g+a+1>i&&(a=Math.max(1,i-g)),s.push(n.substring(r-=a,r+a)),!((g+=a+1)>i));)a=t[c=(c+1)%t.length];return s.reverse().join(e)}}function vK(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var xK=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function l_(t){if(!(e=xK.exec(t)))throw new Error("invalid format: "+t);var e;return new gT({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}l_.prototype=gT.prototype;function gT(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}gT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bK(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var cR;function wK(t,e){var n=mx(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(cR=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,c=i.length;return s===c?i:s>c?i+new Array(s-c+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+mx(t,Math.max(0,e+s-1))[0]}function Tk(t,e){var n=mx(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Mk={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:yK,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Tk(t*100,e),r:Tk,s:wK,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ek(t){return t}var Ak=Array.prototype.map,Ck=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function SK(t){var e=t.grouping===void 0||t.thousands===void 0?Ek:_K(Ak.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Ek:vK(Ak.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",g=t.nan===void 0?"NaN":t.nan+"";function y(E){E=l_(E);var O=E.fill,I=E.align,F=E.sign,V=E.symbol,$=E.zero,K=E.width,Y=E.comma,W=E.precision,X=E.trim,J=E.type;J==="n"?(Y=!0,J="g"):Mk[J]||(W===void 0&&(W=12),X=!0,J="g"),($||O==="0"&&I==="=")&&($=!0,O="0",I="=");var st=V==="$"?n:V==="#"&&/[boxX]/.test(J)?"0"+J.toLowerCase():"",ct=V==="$"?i:/[%p]/.test(J)?c:"",it=Mk[J],ut=/[defgprs%]/.test(J);W=W===void 0?6:/[gprs]/.test(J)?Math.max(1,Math.min(21,W)):Math.max(0,Math.min(20,W));function xt(wt){var St=st,le=ct,pe,Te,Nt;if(J==="c")le=it(wt)+le,wt="";else{wt=+wt;var Ct=wt<0||1/wt<0;if(wt=isNaN(wt)?g:it(Math.abs(wt),W),X&&(wt=bK(wt)),Ct&&+wt==0&&F!=="+"&&(Ct=!1),St=(Ct?F==="("?F:a:F==="-"||F==="("?"":F)+St,le=(J==="s"?Ck[8+cR/3]:"")+le+(Ct&&F==="("?")":""),ut){for(pe=-1,Te=wt.length;++pe<Te;)if(Nt=wt.charCodeAt(pe),48>Nt||Nt>57){le=(Nt===46?r+wt.slice(pe+1):wt.slice(pe))+le,wt=wt.slice(0,pe);break}}}Y&&!$&&(wt=e(wt,1/0));var Tt=St.length+wt.length+le.length,Bt=Tt<K?new Array(K-Tt+1).join(O):"";switch(Y&&$&&(wt=e(Bt+wt,Bt.length?K-le.length:1/0),Bt=""),I){case"<":wt=St+wt+le+Bt;break;case"=":wt=St+Bt+wt+le;break;case"^":wt=Bt.slice(0,Tt=Bt.length>>1)+St+wt+le+Bt.slice(Tt);break;default:wt=Bt+St+wt+le;break}return s(wt)}return xt.toString=function(){return E+""},xt}function x(E,O){var I=y((E=l_(E),E.type="f",E)),F=Math.max(-8,Math.min(8,Math.floor(Jm(O)/3)))*3,V=Math.pow(10,-F),$=Ck[8+F/3];return function(K){return I(V*K)+$}}return{format:y,formatPrefix:x}}var b0,yT,hR;TK({thousands:",",grouping:[3],currency:["$",""]});function TK(t){return b0=SK(t),yT=b0.format,hR=b0.formatPrefix,b0}function MK(t){return Math.max(0,-Jm(Math.abs(t)))}function EK(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jm(e)/3)))*3-Jm(Math.abs(t)))}function AK(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Jm(e)-Jm(t))+1}function fR(t,e,n,i){var r=YS(t,e,n),s;switch(i=l_(i??",f"),i.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=EK(r,c))&&(i.precision=s),hR(i,c)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=AK(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=MK(r))&&(i.precision=s-(i.type==="%")*2);break}}return yT(i)}function od(t){var e=t.domain;return t.ticks=function(n){var i=e();return ZS(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return fR(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,c=i[r],a=i[s],g,y,x=10;for(a<c&&(y=c,c=a,a=y,y=r,r=s,s=y);x-- >0;){if(y=GS(c,a,n),y===g)return i[r]=c,i[s]=a,e(i);if(y>0)c=Math.floor(c/y)*y,a=Math.ceil(a/y)*y;else if(y<0)c=Math.ceil(c*y)/y,a=Math.floor(a*y)/y;else break;g=y}return t},t}function dR(){var t=mT();return t.copy=function(){return P_(t,dR())},Gu.apply(t,arguments),od(t)}function pR(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,px),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return pR(t).unknown(e)},t=arguments.length?Array.from(t,px):[0,1],od(n)}function mR(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],c;return s<r&&(c=n,n=i,i=c,c=r,r=s,s=c),t[n]=e.floor(r),t[i]=e.ceil(s),t}function Pk(t){return Math.log(t)}function kk(t){return Math.exp(t)}function CK(t){return-Math.log(-t)}function PK(t){return-Math.exp(-t)}function kK(t){return isFinite(t)?+("1e"+t):t<0?0:t}function OK(t){return t===10?kK:t===Math.E?Math.exp:e=>Math.pow(t,e)}function DK(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Ok(t){return(e,n)=>-t(-e,n)}function _T(t){const e=t(Pk,kk),n=e.domain;let i=10,r,s;function c(){return r=DK(i),s=OK(i),n()[0]<0?(r=Ok(r),s=Ok(s),t(CK,PK)):t(Pk,kk),e}return e.base=function(a){return arguments.length?(i=+a,c()):i},e.domain=function(a){return arguments.length?(n(a),c()):n()},e.ticks=a=>{const g=n();let y=g[0],x=g[g.length-1];const E=x<y;E&&([y,x]=[x,y]);let O=r(y),I=r(x),F,V;const $=a==null?10:+a;let K=[];if(!(i%1)&&I-O<$){if(O=Math.floor(O),I=Math.ceil(I),y>0){for(;O<=I;++O)for(F=1;F<i;++F)if(V=O<0?F/s(-O):F*s(O),!(V<y)){if(V>x)break;K.push(V)}}else for(;O<=I;++O)for(F=i-1;F>=1;--F)if(V=O>0?F/s(-O):F*s(O),!(V<y)){if(V>x)break;K.push(V)}K.length*2<$&&(K=ZS(y,x,$))}else K=ZS(O,I,Math.min(I-O,$)).map(s);return E?K.reverse():K},e.tickFormat=(a,g)=>{if(a==null&&(a=10),g==null&&(g=i===10?"s":","),typeof g!="function"&&(!(i%1)&&(g=l_(g)).precision==null&&(g.trim=!0),g=yT(g)),a===1/0)return g;const y=Math.max(1,i*a/e.ticks().length);return x=>{let E=x/s(Math.round(r(x)));return E*i<i-.5&&(E*=i),E<=y?g(x):""}},e.nice=()=>n(mR(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),e}function gR(){const t=_T(lb()).domain([1,10]);return t.copy=()=>P_(t,gR()).base(t.base()),Gu.apply(t,arguments),t}function Dk(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Ik(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function vT(t){var e=1,n=t(Dk(e),Ik(e));return n.constant=function(i){return arguments.length?t(Dk(e=+i),Ik(e)):e},od(n)}function yR(){var t=vT(lb());return t.copy=function(){return P_(t,yR()).constant(t.constant())},Gu.apply(t,arguments)}function zk(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function IK(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function zK(t){return t<0?-t*t:t*t}function xT(t){var e=t(vl,vl),n=1;function i(){return n===1?t(vl,vl):n===.5?t(IK,zK):t(zk(n),zk(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},od(e)}function bT(){var t=xT(lb());return t.copy=function(){return P_(t,bT()).exponent(t.exponent())},Gu.apply(t,arguments),t}function LK(){return bT.apply(null,arguments).exponent(.5)}function Lk(t){return Math.sign(t)*t*t}function RK(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function _R(){var t=mT(),e=[0,1],n=!1,i;function r(s){var c=RK(t(s));return isNaN(c)?i:n?Math.round(c):c}return r.invert=function(s){return t.invert(Lk(s))},r.domain=function(s){return arguments.length?(t.domain(s),r):t.domain()},r.range=function(s){return arguments.length?(t.range((e=Array.from(s,px)).map(Lk)),r):e.slice()},r.rangeRound=function(s){return r.range(s).round(!0)},r.round=function(s){return arguments.length?(n=!!s,r):n},r.clamp=function(s){return arguments.length?(t.clamp(s),r):t.clamp()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return _R(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},Gu.apply(r,arguments),od(r)}function vR(){var t=[],e=[],n=[],i;function r(){var c=0,a=Math.max(1,e.length);for(n=new Array(a-1);++c<a;)n[c-1]=FX(t,c/a);return s}function s(c){return c==null||isNaN(c=+c)?i:e[A_(n,c)]}return s.invertExtent=function(c){var a=e.indexOf(c);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let a of c)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Jf),r()},s.range=function(c){return arguments.length?(e=Array.from(c),r()):e.slice()},s.unknown=function(c){return arguments.length?(i=c,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return vR().domain(t).range(e).unknown(i)},Gu.apply(s,arguments)}function xR(){var t=0,e=1,n=1,i=[.5],r=[0,1],s;function c(g){return g!=null&&g<=g?r[A_(i,g,0,n)]:s}function a(){var g=-1;for(i=new Array(n);++g<n;)i[g]=((g+1)*e-(g-n)*t)/(n+1);return c}return c.domain=function(g){return arguments.length?([t,e]=g,t=+t,e=+e,a()):[t,e]},c.range=function(g){return arguments.length?(n=(r=Array.from(g)).length-1,a()):r.slice()},c.invertExtent=function(g){var y=r.indexOf(g);return y<0?[NaN,NaN]:y<1?[t,i[0]]:y>=n?[i[n-1],e]:[i[y-1],i[y]]},c.unknown=function(g){return arguments.length&&(s=g),c},c.thresholds=function(){return i.slice()},c.copy=function(){return xR().domain([t,e]).range(r).unknown(s)},Gu.apply(od(c),arguments)}function bR(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[A_(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var c=e.indexOf(s);return[t[c-1],t[c]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return bR().domain(t).range(e).unknown(n)},Gu.apply(r,arguments)}const Lw=new Date,Rw=new Date;function Rs(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const c=r(s),a=r.ceil(s);return s-c<a-s?c:a},r.offset=(s,c)=>(e(s=new Date(+s),c==null?1:Math.floor(c)),s),r.range=(s,c,a)=>{const g=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<c)||!(a>0))return g;let y;do g.push(y=new Date(+s)),e(s,a),t(s);while(y<s&&s<c);return g},r.filter=s=>Rs(c=>{if(c>=c)for(;t(c),!s(c);)c.setTime(c-1)},(c,a)=>{if(c>=c)if(a<0)for(;++a<=0;)for(;e(c,-1),!s(c););else for(;--a>=0;)for(;e(c,1),!s(c););}),n&&(r.count=(s,c)=>(Lw.setTime(+s),Rw.setTime(+c),t(Lw),t(Rw),Math.floor(n(Lw,Rw))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?c=>i(c)%s===0:c=>r.count(0,c)%s===0):r)),r}const gx=Rs(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);gx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Rs(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):gx);gx.range;const Hh=1e3,Vu=Hh*60,Zh=Vu*60,Jh=Zh*24,wT=Jh*7,Rk=Jh*30,Nw=Jh*365,sp=Rs(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Hh)},(t,e)=>(e-t)/Hh,t=>t.getUTCSeconds());sp.range;const ST=Rs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hh)},(t,e)=>{t.setTime(+t+e*Vu)},(t,e)=>(e-t)/Vu,t=>t.getMinutes());ST.range;const TT=Rs(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Vu)},(t,e)=>(e-t)/Vu,t=>t.getUTCMinutes());TT.range;const MT=Rs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hh-t.getMinutes()*Vu)},(t,e)=>{t.setTime(+t+e*Zh)},(t,e)=>(e-t)/Zh,t=>t.getHours());MT.range;const ET=Rs(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Zh)},(t,e)=>(e-t)/Zh,t=>t.getUTCHours());ET.range;const k_=Rs(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Vu)/Jh,t=>t.getDate()-1);k_.range;const ub=Rs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Jh,t=>t.getUTCDate()-1);ub.range;const wR=Rs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Jh,t=>Math.floor(t/Jh));wR.range;function kp(t){return Rs(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Vu)/wT)}const cb=kp(0),yx=kp(1),NK=kp(2),BK=kp(3),tg=kp(4),jK=kp(5),FK=kp(6);cb.range;yx.range;NK.range;BK.range;tg.range;jK.range;FK.range;function Op(t){return Rs(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/wT)}const hb=Op(0),_x=Op(1),UK=Op(2),VK=Op(3),eg=Op(4),$K=Op(5),qK=Op(6);hb.range;_x.range;UK.range;VK.range;eg.range;$K.range;qK.range;const AT=Rs(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());AT.range;const CT=Rs(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());CT.range;const tf=Rs(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());tf.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rs(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});tf.range;const ef=Rs(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ef.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rs(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ef.range;function SR(t,e,n,i,r,s){const c=[[sp,1,Hh],[sp,5,5*Hh],[sp,15,15*Hh],[sp,30,30*Hh],[s,1,Vu],[s,5,5*Vu],[s,15,15*Vu],[s,30,30*Vu],[r,1,Zh],[r,3,3*Zh],[r,6,6*Zh],[r,12,12*Zh],[i,1,Jh],[i,2,2*Jh],[n,1,wT],[e,1,Rk],[e,3,3*Rk],[t,1,Nw]];function a(y,x,E){const O=x<y;O&&([y,x]=[x,y]);const I=E&&typeof E.range=="function"?E:g(y,x,E),F=I?I.range(y,+x+1):[];return O?F.reverse():F}function g(y,x,E){const O=Math.abs(x-y)/E,I=uT(([,,$])=>$).right(c,O);if(I===c.length)return t.every(YS(y/Nw,x/Nw,E));if(I===0)return gx.every(Math.max(YS(y,x,E),1));const[F,V]=c[O/c[I-1][2]<c[I][2]/O?I-1:I];return F.every(V)}return[a,g]}const[HK,ZK]=SR(ef,CT,hb,wR,ET,TT),[GK,YK]=SR(tf,AT,cb,k_,MT,ST);function Bw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ay(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function WK(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,c=t.shortDays,a=t.months,g=t.shortMonths,y=Cy(r),x=Py(r),E=Cy(s),O=Py(s),I=Cy(c),F=Py(c),V=Cy(a),$=Py(a),K=Cy(g),Y=Py(g),W={a:Ct,A:Tt,b:Bt,B:$t,c:null,d:Vk,e:Vk,f:_Q,g:CQ,G:kQ,H:mQ,I:gQ,j:yQ,L:TR,m:vQ,M:xQ,p:ft,q:Mt,Q:Hk,s:Zk,S:bQ,u:wQ,U:SQ,V:TQ,w:MQ,W:EQ,x:null,X:null,y:AQ,Y:PQ,Z:OQ,"%":qk},X={a:Lt,A:Xt,b:re,B:ce,c:null,d:$k,e:$k,f:LQ,g:HQ,G:GQ,H:DQ,I:IQ,j:zQ,L:ER,m:RQ,M:NQ,p:Me,q:Ne,Q:Hk,s:Zk,S:BQ,u:jQ,U:FQ,V:UQ,w:VQ,W:$Q,x:null,X:null,y:qQ,Y:ZQ,Z:YQ,"%":qk},J={a:xt,A:wt,b:St,B:le,c:pe,d:Fk,e:Fk,f:hQ,g:jk,G:Bk,H:Uk,I:Uk,j:oQ,L:cQ,m:sQ,M:lQ,p:ut,q:aQ,Q:dQ,s:pQ,S:uQ,u:tQ,U:eQ,V:nQ,w:JK,W:iQ,x:Te,X:Nt,y:jk,Y:Bk,Z:rQ,"%":fQ};W.x=st(n,W),W.X=st(i,W),W.c=st(e,W),X.x=st(n,X),X.X=st(i,X),X.c=st(e,X);function st(Gt,Ce){return function(Ee){var de=[],on=-1,Be=0,ln=Gt.length,Xe,Sn,hn;for(Ee instanceof Date||(Ee=new Date(+Ee));++on<ln;)Gt.charCodeAt(on)===37&&(de.push(Gt.slice(Be,on)),(Sn=Nk[Xe=Gt.charAt(++on)])!=null?Xe=Gt.charAt(++on):Sn=Xe==="e"?" ":"0",(hn=Ce[Xe])&&(Xe=hn(Ee,Sn)),de.push(Xe),Be=on+1);return de.push(Gt.slice(Be,on)),de.join("")}}function ct(Gt,Ce){return function(Ee){var de=Ay(1900,void 0,1),on=it(de,Gt,Ee+="",0),Be,ln;if(on!=Ee.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(Ce&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Be=jw(Ay(de.y,0,1)),ln=Be.getUTCDay(),Be=ln>4||ln===0?_x.ceil(Be):_x(Be),Be=ub.offset(Be,(de.V-1)*7),de.y=Be.getUTCFullYear(),de.m=Be.getUTCMonth(),de.d=Be.getUTCDate()+(de.w+6)%7):(Be=Bw(Ay(de.y,0,1)),ln=Be.getDay(),Be=ln>4||ln===0?yx.ceil(Be):yx(Be),Be=k_.offset(Be,(de.V-1)*7),de.y=Be.getFullYear(),de.m=Be.getMonth(),de.d=Be.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),ln="Z"in de?jw(Ay(de.y,0,1)).getUTCDay():Bw(Ay(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(ln+5)%7:de.w+de.U*7-(ln+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,jw(de)):Bw(de)}}function it(Gt,Ce,Ee,de){for(var on=0,Be=Ce.length,ln=Ee.length,Xe,Sn;on<Be;){if(de>=ln)return-1;if(Xe=Ce.charCodeAt(on++),Xe===37){if(Xe=Ce.charAt(on++),Sn=J[Xe in Nk?Ce.charAt(on++):Xe],!Sn||(de=Sn(Gt,Ee,de))<0)return-1}else if(Xe!=Ee.charCodeAt(de++))return-1}return de}function ut(Gt,Ce,Ee){var de=y.exec(Ce.slice(Ee));return de?(Gt.p=x.get(de[0].toLowerCase()),Ee+de[0].length):-1}function xt(Gt,Ce,Ee){var de=I.exec(Ce.slice(Ee));return de?(Gt.w=F.get(de[0].toLowerCase()),Ee+de[0].length):-1}function wt(Gt,Ce,Ee){var de=E.exec(Ce.slice(Ee));return de?(Gt.w=O.get(de[0].toLowerCase()),Ee+de[0].length):-1}function St(Gt,Ce,Ee){var de=K.exec(Ce.slice(Ee));return de?(Gt.m=Y.get(de[0].toLowerCase()),Ee+de[0].length):-1}function le(Gt,Ce,Ee){var de=V.exec(Ce.slice(Ee));return de?(Gt.m=$.get(de[0].toLowerCase()),Ee+de[0].length):-1}function pe(Gt,Ce,Ee){return it(Gt,e,Ce,Ee)}function Te(Gt,Ce,Ee){return it(Gt,n,Ce,Ee)}function Nt(Gt,Ce,Ee){return it(Gt,i,Ce,Ee)}function Ct(Gt){return c[Gt.getDay()]}function Tt(Gt){return s[Gt.getDay()]}function Bt(Gt){return g[Gt.getMonth()]}function $t(Gt){return a[Gt.getMonth()]}function ft(Gt){return r[+(Gt.getHours()>=12)]}function Mt(Gt){return 1+~~(Gt.getMonth()/3)}function Lt(Gt){return c[Gt.getUTCDay()]}function Xt(Gt){return s[Gt.getUTCDay()]}function re(Gt){return g[Gt.getUTCMonth()]}function ce(Gt){return a[Gt.getUTCMonth()]}function Me(Gt){return r[+(Gt.getUTCHours()>=12)]}function Ne(Gt){return 1+~~(Gt.getUTCMonth()/3)}return{format:function(Gt){var Ce=st(Gt+="",W);return Ce.toString=function(){return Gt},Ce},parse:function(Gt){var Ce=ct(Gt+="",!1);return Ce.toString=function(){return Gt},Ce},utcFormat:function(Gt){var Ce=st(Gt+="",X);return Ce.toString=function(){return Gt},Ce},utcParse:function(Gt){var Ce=ct(Gt+="",!0);return Ce.toString=function(){return Gt},Ce}}}var Nk={"-":"",_:" ",0:"0"},Qs=/^\s*\d+/,XK=/^%/,KK=/[\\^$*+?|[\]().{}]/g;function ar(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function QK(t){return t.replace(KK,"\\$&")}function Cy(t){return new RegExp("^(?:"+t.map(QK).join("|")+")","i")}function Py(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function JK(t,e,n){var i=Qs.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function tQ(t,e,n){var i=Qs.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function eQ(t,e,n){var i=Qs.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function nQ(t,e,n){var i=Qs.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function iQ(t,e,n){var i=Qs.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Bk(t,e,n){var i=Qs.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function jk(t,e,n){var i=Qs.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function rQ(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function aQ(t,e,n){var i=Qs.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function sQ(t,e,n){var i=Qs.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Fk(t,e,n){var i=Qs.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function oQ(t,e,n){var i=Qs.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Uk(t,e,n){var i=Qs.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function lQ(t,e,n){var i=Qs.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function uQ(t,e,n){var i=Qs.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function cQ(t,e,n){var i=Qs.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function hQ(t,e,n){var i=Qs.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function fQ(t,e,n){var i=XK.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function dQ(t,e,n){var i=Qs.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function pQ(t,e,n){var i=Qs.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Vk(t,e){return ar(t.getDate(),e,2)}function mQ(t,e){return ar(t.getHours(),e,2)}function gQ(t,e){return ar(t.getHours()%12||12,e,2)}function yQ(t,e){return ar(1+k_.count(tf(t),t),e,3)}function TR(t,e){return ar(t.getMilliseconds(),e,3)}function _Q(t,e){return TR(t,e)+"000"}function vQ(t,e){return ar(t.getMonth()+1,e,2)}function xQ(t,e){return ar(t.getMinutes(),e,2)}function bQ(t,e){return ar(t.getSeconds(),e,2)}function wQ(t){var e=t.getDay();return e===0?7:e}function SQ(t,e){return ar(cb.count(tf(t)-1,t),e,2)}function MR(t){var e=t.getDay();return e>=4||e===0?tg(t):tg.ceil(t)}function TQ(t,e){return t=MR(t),ar(tg.count(tf(t),t)+(tf(t).getDay()===4),e,2)}function MQ(t){return t.getDay()}function EQ(t,e){return ar(yx.count(tf(t)-1,t),e,2)}function AQ(t,e){return ar(t.getFullYear()%100,e,2)}function CQ(t,e){return t=MR(t),ar(t.getFullYear()%100,e,2)}function PQ(t,e){return ar(t.getFullYear()%1e4,e,4)}function kQ(t,e){var n=t.getDay();return t=n>=4||n===0?tg(t):tg.ceil(t),ar(t.getFullYear()%1e4,e,4)}function OQ(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ar(e/60|0,"0",2)+ar(e%60,"0",2)}function $k(t,e){return ar(t.getUTCDate(),e,2)}function DQ(t,e){return ar(t.getUTCHours(),e,2)}function IQ(t,e){return ar(t.getUTCHours()%12||12,e,2)}function zQ(t,e){return ar(1+ub.count(ef(t),t),e,3)}function ER(t,e){return ar(t.getUTCMilliseconds(),e,3)}function LQ(t,e){return ER(t,e)+"000"}function RQ(t,e){return ar(t.getUTCMonth()+1,e,2)}function NQ(t,e){return ar(t.getUTCMinutes(),e,2)}function BQ(t,e){return ar(t.getUTCSeconds(),e,2)}function jQ(t){var e=t.getUTCDay();return e===0?7:e}function FQ(t,e){return ar(hb.count(ef(t)-1,t),e,2)}function AR(t){var e=t.getUTCDay();return e>=4||e===0?eg(t):eg.ceil(t)}function UQ(t,e){return t=AR(t),ar(eg.count(ef(t),t)+(ef(t).getUTCDay()===4),e,2)}function VQ(t){return t.getUTCDay()}function $Q(t,e){return ar(_x.count(ef(t)-1,t),e,2)}function qQ(t,e){return ar(t.getUTCFullYear()%100,e,2)}function HQ(t,e){return t=AR(t),ar(t.getUTCFullYear()%100,e,2)}function ZQ(t,e){return ar(t.getUTCFullYear()%1e4,e,4)}function GQ(t,e){var n=t.getUTCDay();return t=n>=4||n===0?eg(t):eg.ceil(t),ar(t.getUTCFullYear()%1e4,e,4)}function YQ(){return"+0000"}function qk(){return"%"}function Hk(t){return+t}function Zk(t){return Math.floor(+t/1e3)}var Rm,CR,PR;WQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function WQ(t){return Rm=WK(t),CR=Rm.format,Rm.parse,PR=Rm.utcFormat,Rm.utcParse,Rm}function XQ(t){return new Date(t)}function KQ(t){return t instanceof Date?+t:+new Date(+t)}function PT(t,e,n,i,r,s,c,a,g,y){var x=mT(),E=x.invert,O=x.domain,I=y(".%L"),F=y(":%S"),V=y("%I:%M"),$=y("%I %p"),K=y("%a %d"),Y=y("%b %d"),W=y("%B"),X=y("%Y");function J(st){return(g(st)<st?I:a(st)<st?F:c(st)<st?V:s(st)<st?$:i(st)<st?r(st)<st?K:Y:n(st)<st?W:X)(st)}return x.invert=function(st){return new Date(E(st))},x.domain=function(st){return arguments.length?O(Array.from(st,KQ)):O().map(XQ)},x.ticks=function(st){var ct=O();return t(ct[0],ct[ct.length-1],st??10)},x.tickFormat=function(st,ct){return ct==null?J:y(ct)},x.nice=function(st){var ct=O();return(!st||typeof st.range!="function")&&(st=e(ct[0],ct[ct.length-1],st??10)),st?O(mR(ct,st)):x},x.copy=function(){return P_(x,PT(t,e,n,i,r,s,c,a,g,y))},x}function QQ(){return Gu.apply(PT(GK,YK,tf,AT,cb,k_,MT,ST,sp,CR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function JQ(){return Gu.apply(PT(HK,ZK,ef,CT,hb,ub,ET,TT,sp,PR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fb(){var t=0,e=1,n,i,r,s,c=vl,a=!1,g;function y(E){return E==null||isNaN(E=+E)?g:c(r===0?.5:(E=(s(E)-n)*r,a?Math.max(0,Math.min(1,E)):E))}y.domain=function(E){return arguments.length?([t,e]=E,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),y):[t,e]},y.clamp=function(E){return arguments.length?(a=!!E,y):a},y.interpolator=function(E){return arguments.length?(c=E,y):c};function x(E){return function(O){var I,F;return arguments.length?([I,F]=O,c=E(I,F),y):[c(0),c(1)]}}return y.range=x(cg),y.rangeRound=x(pT),y.unknown=function(E){return arguments.length?(g=E,y):g},function(E){return s=E,n=E(t),i=E(e),r=n===i?0:1/(i-n),y}}function ld(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function kR(){var t=od(fb()(vl));return t.copy=function(){return ld(t,kR())},uf.apply(t,arguments)}function OR(){var t=_T(fb()).domain([1,10]);return t.copy=function(){return ld(t,OR()).base(t.base())},uf.apply(t,arguments)}function DR(){var t=vT(fb());return t.copy=function(){return ld(t,DR()).constant(t.constant())},uf.apply(t,arguments)}function kT(){var t=xT(fb());return t.copy=function(){return ld(t,kT()).exponent(t.exponent())},uf.apply(t,arguments)}function tJ(){return kT.apply(null,arguments).exponent(.5)}function IR(){var t=[],e=vl;function n(i){if(i!=null&&!isNaN(i=+i))return e((A_(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let r of i)r!=null&&!isNaN(r=+r)&&t.push(r);return t.sort(Jf),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,r)=>e(r/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,s)=>jX(t,s/i))},n.copy=function(){return IR(e).domain(t)},uf.apply(n,arguments)}function db(){var t=0,e=.5,n=1,i=1,r,s,c,a,g,y=vl,x,E=!1,O;function I(V){return isNaN(V=+V)?O:(V=.5+((V=+x(V))-s)*(i*V<i*s?a:g),y(E?Math.max(0,Math.min(1,V)):V))}I.domain=function(V){return arguments.length?([t,e,n]=V,r=x(t=+t),s=x(e=+e),c=x(n=+n),a=r===s?0:.5/(s-r),g=s===c?0:.5/(c-s),i=s<r?-1:1,I):[t,e,n]},I.clamp=function(V){return arguments.length?(E=!!V,I):E},I.interpolator=function(V){return arguments.length?(y=V,I):y};function F(V){return function($){var K,Y,W;return arguments.length?([K,Y,W]=$,y=fK(V,[K,Y,W]),I):[y(0),y(.5),y(1)]}}return I.range=F(cg),I.rangeRound=F(pT),I.unknown=function(V){return arguments.length?(O=V,I):O},function(V){return x=V,r=V(t),s=V(e),c=V(n),a=r===s?0:.5/(s-r),g=s===c?0:.5/(c-s),i=s<r?-1:1,I}}function zR(){var t=od(db()(vl));return t.copy=function(){return ld(t,zR())},uf.apply(t,arguments)}function LR(){var t=_T(db()).domain([.1,1,10]);return t.copy=function(){return ld(t,LR()).base(t.base())},uf.apply(t,arguments)}function RR(){var t=vT(db());return t.copy=function(){return ld(t,RR()).constant(t.constant())},uf.apply(t,arguments)}function OT(){var t=xT(db());return t.copy=function(){return ld(t,OT()).exponent(t.exponent())},uf.apply(t,arguments)}function eJ(){return OT.apply(null,arguments).exponent(.5)}const Ny=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:hT,scaleDiverging:zR,scaleDivergingLog:LR,scaleDivergingPow:OT,scaleDivergingSqrt:eJ,scaleDivergingSymlog:RR,scaleIdentity:pR,scaleImplicit:WS,scaleLinear:dR,scaleLog:gR,scaleOrdinal:cT,scalePoint:VX,scalePow:bT,scaleQuantile:vR,scaleQuantize:xR,scaleRadial:_R,scaleSequential:kR,scaleSequentialLog:OR,scaleSequentialPow:kT,scaleSequentialQuantile:IR,scaleSequentialSqrt:tJ,scaleSequentialSymlog:DR,scaleSqrt:LK,scaleSymlog:yR,scaleThreshold:bR,scaleTime:QQ,scaleUtc:JQ,tickFormat:fR},Symbol.toStringTag,{value:"Module"}));var ud=t=>t.chartData,nJ=ke([ud],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),DT=(t,e,n,i)=>i?nJ(t):ud(t);function xp(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Ga(e)&&Ga(n))return!0}return!1}function Gk(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function NR(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,i]=t,r,s;if(Ga(n))r=n;else if(typeof n=="function")return;if(Ga(i))s=i;else if(typeof i=="function")return;var c=[r,s];if(xp(c))return c}}function iJ(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var i=t(e,n);if(xp(i))return Gk(i,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[r,s]=t,c,a;if(r==="auto")e!=null&&(c=Math.min(...e));else if(Dn(r))c=r;else if(typeof r=="function")try{e!=null&&(c=r(e?.[0]))}catch{}else if(typeof r=="string"&&PP.test(r)){var g=PP.exec(r);if(g==null||e==null)c=void 0;else{var y=+g[1];c=e[0]-y}}else c=e?.[0];if(s==="auto")e!=null&&(a=Math.max(...e));else if(Dn(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e?.[1]))}catch{}else if(typeof s=="string"&&kP.test(s)){var x=kP.exec(s);if(x==null||e==null)a=void 0;else{var E=+x[1];a=e[1]+E}}else a=e?.[1];var O=[c,a];if(xp(O))return e==null?O:Gk(O,e,n)}}}var hg=1e9,rJ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zT,ma=!0,Zu="[DecimalError] ",pp=Zu+"Invalid argument: ",IT=Zu+"Exponent out of range: ",fg=Math.floor,rp=Math.pow,aJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pu,Ws=1e7,ra=7,BR=9007199254740991,vx=fg(BR/ra),bn={};bn.absoluteValue=bn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};bn.comparedTo=bn.cmp=function(t){var e,n,i,r,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(i=s.d.length,r=t.d.length,e=0,n=i<r?i:r;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return i===r?0:i>r^s.s<0?1:-1};bn.decimalPlaces=bn.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*ra;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};bn.dividedBy=bn.div=function(t){return Wh(this,new this.constructor(t))};bn.dividedToIntegerBy=bn.idiv=function(t){var e=this,n=e.constructor;return Ur(Wh(e,new n(t),0,1),n.precision)};bn.equals=bn.eq=function(t){return!this.cmp(t)};bn.exponent=function(){return bs(this)};bn.greaterThan=bn.gt=function(t){return this.cmp(t)>0};bn.greaterThanOrEqualTo=bn.gte=function(t){return this.cmp(t)>=0};bn.isInteger=bn.isint=function(){return this.e>this.d.length-2};bn.isNegative=bn.isneg=function(){return this.s<0};bn.isPositive=bn.ispos=function(){return this.s>0};bn.isZero=function(){return this.s===0};bn.lessThan=bn.lt=function(t){return this.cmp(t)<0};bn.lessThanOrEqualTo=bn.lte=function(t){return this.cmp(t)<1};bn.logarithm=bn.log=function(t){var e,n=this,i=n.constructor,r=i.precision,s=r+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(pu))throw Error(Zu+"NaN");if(n.s<1)throw Error(Zu+(n.s?"NaN":"-Infinity"));return n.eq(pu)?new i(0):(ma=!1,e=Wh(u_(n,s),u_(t,s),s),ma=!0,Ur(e,r))};bn.minus=bn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?UR(e,t):jR(e,(t.s=-t.s,t))};bn.modulo=bn.mod=function(t){var e,n=this,i=n.constructor,r=i.precision;if(t=new i(t),!t.s)throw Error(Zu+"NaN");return n.s?(ma=!1,e=Wh(n,t,0,1).times(t),ma=!0,n.minus(e)):Ur(new i(n),r)};bn.naturalExponential=bn.exp=function(){return FR(this)};bn.naturalLogarithm=bn.ln=function(){return u_(this)};bn.negated=bn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};bn.plus=bn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?jR(e,t):UR(e,(t.s=-t.s,t))};bn.precision=bn.sd=function(t){var e,n,i,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(pp+t);if(e=bs(r)+1,i=r.d.length-1,n=i*ra+1,i=r.d[i],i){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};bn.squareRoot=bn.sqrt=function(){var t,e,n,i,r,s,c,a=this,g=a.constructor;if(a.s<1){if(!a.s)return new g(0);throw Error(Zu+"NaN")}for(t=bs(a),ma=!1,r=Math.sqrt(+a),r==0||r==1/0?(e=nh(a.d),(e.length+t)%2==0&&(e+="0"),r=Math.sqrt(e),t=fg((t+1)/2)-(t<0||t%2),r==1/0?e="5e"+t:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new g(e)):i=new g(r.toString()),n=g.precision,r=c=n+3;;)if(s=i,i=s.plus(Wh(a,s,c+2)).times(.5),nh(s.d).slice(0,c)===(e=nh(i.d)).slice(0,c)){if(e=e.slice(c-3,c+1),r==c&&e=="4999"){if(Ur(s,n+1,0),s.times(s).eq(a)){i=s;break}}else if(e!="9999")break;c+=4}return ma=!0,Ur(i,n)};bn.times=bn.mul=function(t){var e,n,i,r,s,c,a,g,y,x=this,E=x.constructor,O=x.d,I=(t=new E(t)).d;if(!x.s||!t.s)return new E(0);for(t.s*=x.s,n=x.e+t.e,g=O.length,y=I.length,g<y&&(s=O,O=I,I=s,c=g,g=y,y=c),s=[],c=g+y,i=c;i--;)s.push(0);for(i=y;--i>=0;){for(e=0,r=g+i;r>i;)a=s[r]+I[i]*O[r-i-1]+e,s[r--]=a%Ws|0,e=a/Ws|0;s[r]=(s[r]+e)%Ws|0}for(;!s[--c];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,ma?Ur(t,E.precision):t};bn.toDecimalPlaces=bn.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(uh(t,0,hg),e===void 0?e=i.rounding:uh(e,0,8),Ur(n,t+bs(n)+1,e))};bn.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=bp(i,!0):(uh(t,0,hg),e===void 0?e=r.rounding:uh(e,0,8),i=Ur(new r(i),t+1,e),n=bp(i,!0,t+1)),n};bn.toFixed=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?bp(r):(uh(t,0,hg),e===void 0?e=s.rounding:uh(e,0,8),i=Ur(new s(r),t+bs(r)+1,e),n=bp(i.abs(),!1,t+bs(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)};bn.toInteger=bn.toint=function(){var t=this,e=t.constructor;return Ur(new e(t),bs(t)+1,e.rounding)};bn.toNumber=function(){return+this};bn.toPower=bn.pow=function(t){var e,n,i,r,s,c,a=this,g=a.constructor,y=12,x=+(t=new g(t));if(!t.s)return new g(pu);if(a=new g(a),!a.s){if(t.s<1)throw Error(Zu+"Infinity");return a}if(a.eq(pu))return a;if(i=g.precision,t.eq(pu))return Ur(a,i);if(e=t.e,n=t.d.length-1,c=e>=n,s=a.s,c){if((n=x<0?-x:x)<=BR){for(r=new g(pu),e=Math.ceil(i/ra+4),ma=!1;n%2&&(r=r.times(a),Wk(r.d,e)),n=fg(n/2),n!==0;)a=a.times(a),Wk(a.d,e);return ma=!0,t.s<0?new g(pu).div(r):Ur(r,i)}}else if(s<0)throw Error(Zu+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,ma=!1,r=t.times(u_(a,i+y)),ma=!0,r=FR(r),r.s=s,r};bn.toPrecision=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?(n=bs(r),i=bp(r,n<=s.toExpNeg||n>=s.toExpPos)):(uh(t,1,hg),e===void 0?e=s.rounding:uh(e,0,8),r=Ur(new s(r),t,e),n=bs(r),i=bp(r,t<=n||n<=s.toExpNeg,t)),i};bn.toSignificantDigits=bn.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(uh(t,1,hg),e===void 0?e=i.rounding:uh(e,0,8)),Ur(new i(n),t,e)};bn.toString=bn.valueOf=bn.val=bn.toJSON=bn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=bs(t),n=t.constructor;return bp(t,e<=n.toExpNeg||e>=n.toExpPos)};function jR(t,e){var n,i,r,s,c,a,g,y,x=t.constructor,E=x.precision;if(!t.s||!e.s)return e.s||(e=new x(t)),ma?Ur(e,E):e;if(g=t.d,y=e.d,c=t.e,r=e.e,g=g.slice(),s=c-r,s){for(s<0?(i=g,s=-s,a=y.length):(i=y,r=c,a=g.length),c=Math.ceil(E/ra),a=c>a?c+1:a+1,s>a&&(s=a,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(a=g.length,s=y.length,a-s<0&&(s=a,i=y,y=g,g=i),n=0;s;)n=(g[--s]=g[s]+y[s]+n)/Ws|0,g[s]%=Ws;for(n&&(g.unshift(n),++r),a=g.length;g[--a]==0;)g.pop();return e.d=g,e.e=r,ma?Ur(e,E):e}function uh(t,e,n){if(t!==~~t||t<e||t>n)throw Error(pp+t)}function nh(t){var e,n,i,r=t.length-1,s="",c=t[0];if(r>0){for(s+=c,e=1;e<r;e++)i=t[e]+"",n=ra-i.length,n&&(s+=qf(n)),s+=i;c=t[e],i=c+"",n=ra-i.length,n&&(s+=qf(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}var Wh=(function(){function t(i,r){var s,c=0,a=i.length;for(i=i.slice();a--;)s=i[a]*r+c,i[a]=s%Ws|0,c=s/Ws|0;return c&&i.unshift(c),i}function e(i,r,s,c){var a,g;if(s!=c)g=s>c?1:-1;else for(a=g=0;a<s;a++)if(i[a]!=r[a]){g=i[a]>r[a]?1:-1;break}return g}function n(i,r,s){for(var c=0;s--;)i[s]-=c,c=i[s]<r[s]?1:0,i[s]=c*Ws+i[s]-r[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,s,c){var a,g,y,x,E,O,I,F,V,$,K,Y,W,X,J,st,ct,it,ut=i.constructor,xt=i.s==r.s?1:-1,wt=i.d,St=r.d;if(!i.s)return new ut(i);if(!r.s)throw Error(Zu+"Division by zero");for(g=i.e-r.e,ct=St.length,J=wt.length,I=new ut(xt),F=I.d=[],y=0;St[y]==(wt[y]||0);)++y;if(St[y]>(wt[y]||0)&&--g,s==null?Y=s=ut.precision:c?Y=s+(bs(i)-bs(r))+1:Y=s,Y<0)return new ut(0);if(Y=Y/ra+2|0,y=0,ct==1)for(x=0,St=St[0],Y++;(y<J||x)&&Y--;y++)W=x*Ws+(wt[y]||0),F[y]=W/St|0,x=W%St|0;else{for(x=Ws/(St[0]+1)|0,x>1&&(St=t(St,x),wt=t(wt,x),ct=St.length,J=wt.length),X=ct,V=wt.slice(0,ct),$=V.length;$<ct;)V[$++]=0;it=St.slice(),it.unshift(0),st=St[0],St[1]>=Ws/2&&++st;do x=0,a=e(St,V,ct,$),a<0?(K=V[0],ct!=$&&(K=K*Ws+(V[1]||0)),x=K/st|0,x>1?(x>=Ws&&(x=Ws-1),E=t(St,x),O=E.length,$=V.length,a=e(E,V,O,$),a==1&&(x--,n(E,ct<O?it:St,O))):(x==0&&(a=x=1),E=St.slice()),O=E.length,O<$&&E.unshift(0),n(V,E,$),a==-1&&($=V.length,a=e(St,V,ct,$),a<1&&(x++,n(V,ct<$?it:St,$))),$=V.length):a===0&&(x++,V=[0]),F[y++]=x,a&&V[0]?V[$++]=wt[X]||0:(V=[wt[X]],$=1);while((X++<J||V[0]!==void 0)&&Y--)}return F[0]||F.shift(),I.e=g,Ur(I,c?s+bs(I)+1:s)}})();function FR(t,e){var n,i,r,s,c,a,g=0,y=0,x=t.constructor,E=x.precision;if(bs(t)>16)throw Error(IT+bs(t));if(!t.s)return new x(pu);for(ma=!1,a=E,c=new x(.03125);t.abs().gte(.1);)t=t.times(c),y+=5;for(i=Math.log(rp(2,y))/Math.LN10*2+5|0,a+=i,n=r=s=new x(pu),x.precision=a;;){if(r=Ur(r.times(t),a),n=n.times(++g),c=s.plus(Wh(r,n,a)),nh(c.d).slice(0,a)===nh(s.d).slice(0,a)){for(;y--;)s=Ur(s.times(s),a);return x.precision=E,e==null?(ma=!0,Ur(s,E)):s}s=c}}function bs(t){for(var e=t.e*ra,n=t.d[0];n>=10;n/=10)e++;return e}function Fw(t,e,n){if(e>t.LN10.sd())throw ma=!0,n&&(t.precision=n),Error(Zu+"LN10 precision limit exceeded");return Ur(new t(t.LN10),e)}function qf(t){for(var e="";t--;)e+="0";return e}function u_(t,e){var n,i,r,s,c,a,g,y,x,E=1,O=10,I=t,F=I.d,V=I.constructor,$=V.precision;if(I.s<1)throw Error(Zu+(I.s?"NaN":"-Infinity"));if(I.eq(pu))return new V(0);if(e==null?(ma=!1,y=$):y=e,I.eq(10))return e==null&&(ma=!0),Fw(V,y);if(y+=O,V.precision=y,n=nh(F),i=n.charAt(0),s=bs(I),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)I=I.times(t),n=nh(I.d),i=n.charAt(0),E++;s=bs(I),i>1?(I=new V("0."+n),s++):I=new V(i+"."+n.slice(1))}else return g=Fw(V,y+2,$).times(s+""),I=u_(new V(i+"."+n.slice(1)),y-O).plus(g),V.precision=$,e==null?(ma=!0,Ur(I,$)):I;for(a=c=I=Wh(I.minus(pu),I.plus(pu),y),x=Ur(I.times(I),y),r=3;;){if(c=Ur(c.times(x),y),g=a.plus(Wh(c,new V(r),y)),nh(g.d).slice(0,y)===nh(a.d).slice(0,y))return a=a.times(2),s!==0&&(a=a.plus(Fw(V,y+2,$).times(s+""))),a=Wh(a,new V(E),y),V.precision=$,e==null?(ma=!0,Ur(a,$)):a;a=g,r+=2}}function Yk(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,n=n-i-1,t.e=fg(n/ra),t.d=[],i=(n+1)%ra,n<0&&(i+=ra),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=ra;i<r;)t.d.push(+e.slice(i,i+=ra));e=e.slice(i),i=ra-e.length}else i-=r;for(;i--;)e+="0";if(t.d.push(+e),ma&&(t.e>vx||t.e<-vx))throw Error(IT+n)}else t.s=0,t.e=0,t.d=[0];return t}function Ur(t,e,n){var i,r,s,c,a,g,y,x,E=t.d;for(c=1,s=E[0];s>=10;s/=10)c++;if(i=e-c,i<0)i+=ra,r=e,y=E[x=0];else{if(x=Math.ceil((i+1)/ra),s=E.length,x>=s)return t;for(y=s=E[x],c=1;s>=10;s/=10)c++;i%=ra,r=i-ra+c}if(n!==void 0&&(s=rp(10,c-r-1),a=y/s%10|0,g=e<0||E[x+1]!==void 0||y%s,g=n<4?(a||g)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||g||n==6&&(i>0?r>0?y/rp(10,c-r):0:E[x-1])%10&1||n==(t.s<0?8:7))),e<1||!E[0])return g?(s=bs(t),E.length=1,e=e-s-1,E[0]=rp(10,(ra-e%ra)%ra),t.e=fg(-e/ra)||0):(E.length=1,E[0]=t.e=t.s=0),t;if(i==0?(E.length=x,s=1,x--):(E.length=x+1,s=rp(10,ra-i),E[x]=r>0?(y/rp(10,c-r)%rp(10,r)|0)*s:0),g)for(;;)if(x==0){(E[0]+=s)==Ws&&(E[0]=1,++t.e);break}else{if(E[x]+=s,E[x]!=Ws)break;E[x--]=0,s=1}for(i=E.length;E[--i]===0;)E.pop();if(ma&&(t.e>vx||t.e<-vx))throw Error(IT+bs(t));return t}function UR(t,e){var n,i,r,s,c,a,g,y,x,E,O=t.constructor,I=O.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new O(t),ma?Ur(e,I):e;if(g=t.d,E=e.d,i=e.e,y=t.e,g=g.slice(),c=y-i,c){for(x=c<0,x?(n=g,c=-c,a=E.length):(n=E,i=y,a=g.length),r=Math.max(Math.ceil(I/ra),a)+2,c>r&&(c=r,n.length=1),n.reverse(),r=c;r--;)n.push(0);n.reverse()}else{for(r=g.length,a=E.length,x=r<a,x&&(a=r),r=0;r<a;r++)if(g[r]!=E[r]){x=g[r]<E[r];break}c=0}for(x&&(n=g,g=E,E=n,e.s=-e.s),a=g.length,r=E.length-a;r>0;--r)g[a++]=0;for(r=E.length;r>c;){if(g[--r]<E[r]){for(s=r;s&&g[--s]===0;)g[s]=Ws-1;--g[s],g[r]+=Ws}g[r]-=E[r]}for(;g[--a]===0;)g.pop();for(;g[0]===0;g.shift())--i;return g[0]?(e.d=g,e.e=i,ma?Ur(e,I):e):new O(0)}function bp(t,e,n){var i,r=bs(t),s=nh(t.d),c=s.length;return e?(n&&(i=n-c)>0?s=s.charAt(0)+"."+s.slice(1)+qf(i):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r<0?"e":"e+")+r):r<0?(s="0."+qf(-r-1)+s,n&&(i=n-c)>0&&(s+=qf(i))):r>=c?(s+=qf(r+1-c),n&&(i=n-r-1)>0&&(s=s+"."+qf(i))):((i=r+1)<c&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-c)>0&&(r+1===c&&(s+="."),s+=qf(i))),t.s<0?"-"+s:s}function Wk(t,e){if(t.length>e)return t.length=e,!0}function VR(t){var e,n,i;function r(s){var c=this;if(!(c instanceof r))return new r(s);if(c.constructor=r,s instanceof r){c.s=s.s,c.e=s.e,c.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(pp+s);if(s>0)c.s=1;else if(s<0)s=-s,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(s===~~s&&s<1e7){c.e=0,c.d=[s];return}return Yk(c,s.toString())}else if(typeof s!="string")throw Error(pp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),c.s=-1):c.s=1,aJ.test(s))Yk(c,s);else throw Error(pp+s)}if(r.prototype=bn,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=VR,r.config=r.set=sJ,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function sJ(t){if(!t||typeof t!="object")throw Error(Zu+"Object expected");var e,n,i,r=["precision",1,hg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=t[n=r[e]])!==void 0)if(fg(i)===i&&i>=r[e+1]&&i<=r[e+2])this[n]=i;else throw Error(pp+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(pp+n+": "+i);return this}var zT=VR(rJ);pu=new zT(1);const wr=zT;var oJ=t=>t,$R={},qR=t=>t===$R,Xk=t=>function e(){return arguments.length===0||arguments.length===1&&qR(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},HR=(t,e)=>t===1?e:Xk(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var s=i.filter(c=>c!==$R).length;return s>=t?e(...i):HR(t-s,Xk(function(){for(var c=arguments.length,a=new Array(c),g=0;g<c;g++)a[g]=arguments[g];var y=i.map(x=>qR(x)?a.shift():x);return e(...y,...a)}))}),pb=t=>HR(t.length,t),JS=(t,e)=>{for(var n=[],i=t;i<e;++i)n[i-t]=i;return n},lJ=pb((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),uJ=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return oJ;var r=n.reverse(),s=r[0],c=r.slice(1);return function(){return c.reduce((a,g)=>g(a),s(...arguments))}},t2=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),ZR=t=>{var e=null,n=null;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e&&r.every((c,a)=>{var g;return c===((g=e)===null||g===void 0?void 0:g[a])})||(e=r,n=t(...r)),n}};function GR(t){var e;return t===0?e=1:e=Math.floor(new wr(t).abs().log(10).toNumber())+1,e}function YR(t,e,n){for(var i=new wr(t),r=0,s=[];i.lt(e)&&r<1e5;)s.push(i.toNumber()),i=i.add(n),r++;return s}pb((t,e,n)=>{var i=+t,r=+e;return i+n*(r-i)});pb((t,e,n)=>{var i=e-+t;return i=i||1/0,(n-t)/i});pb((t,e,n)=>{var i=e-+t;return i=i||1/0,Math.max(0,Math.min(1,(n-t)/i))});var WR=t=>{var[e,n]=t,[i,r]=[e,n];return e>n&&([i,r]=[n,e]),[i,r]},XR=(t,e,n)=>{if(t.lte(0))return new wr(0);var i=GR(t.toNumber()),r=new wr(10).pow(i),s=t.div(r),c=i!==1?.05:.1,a=new wr(Math.ceil(s.div(c).toNumber())).add(n).mul(c),g=a.mul(r);return e?new wr(g.toNumber()):new wr(Math.ceil(g.toNumber()))},cJ=(t,e,n)=>{var i=new wr(1),r=new wr(t);if(!r.isint()&&n){var s=Math.abs(t);s<1?(i=new wr(10).pow(GR(t)-1),r=new wr(Math.floor(r.div(i).toNumber())).mul(i)):s>1&&(r=new wr(Math.floor(t)))}else t===0?r=new wr(Math.floor((e-1)/2)):n||(r=new wr(Math.floor(t)));var c=Math.floor((e-1)/2),a=uJ(lJ(g=>r.add(new wr(g-c).mul(i)).toNumber()),JS);return a(0,e)},KR=function(e,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(i-1)))return{step:new wr(0),tickMin:new wr(0),tickMax:new wr(0)};var c=XR(new wr(n).sub(e).div(i-1),r,s),a;e<=0&&n>=0?a=new wr(0):(a=new wr(e).add(n).div(2),a=a.sub(new wr(a).mod(c)));var g=Math.ceil(a.sub(e).div(c).toNumber()),y=Math.ceil(new wr(n).sub(a).div(c).toNumber()),x=g+y+1;return x>i?KR(e,n,i,r,s+1):(x<i&&(y=n>0?y+(i-x):y,g=n>0?g:g+(i-x)),{step:c,tickMin:a.sub(new wr(g).mul(c)),tickMax:a.add(new wr(y).mul(c))})};function hJ(t){var[e,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[c,a]=WR([e,n]);if(c===-1/0||a===1/0){var g=a===1/0?[c,...JS(0,i-1).map(()=>1/0)]:[...JS(0,i-1).map(()=>-1/0),a];return e>n?t2(g):g}if(c===a)return cJ(c,i,r);var{step:y,tickMin:x,tickMax:E}=KR(c,a,s,r,0),O=YR(x,E.add(new wr(.1).mul(y)),y);return e>n?t2(O):O}function fJ(t,e){var[n,i]=t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,c]=WR([n,i]);if(s===-1/0||c===1/0)return[n,i];if(s===c)return[s];var a=Math.max(e,2),g=XR(new wr(c).sub(s).div(a-1),r,0),y=[...YR(new wr(s),new wr(c),g),c];return r===!1&&(y=y.map(x=>Math.round(x))),n>i?t2(y):y}var dJ=ZR(hJ),pJ=ZR(fJ),mJ=t=>t.rootProps.barCategoryGap,mb=t=>t.rootProps.stackOffset,LT=t=>t.options.chartName,RT=t=>t.rootProps.syncId,QR=t=>t.rootProps.syncMethod,NT=t=>t.options.eventEmitter,gJ=t=>t.rootProps.baseValue,xl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Uh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},fu={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},gb=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},yJ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Uh.angleAxisId,includeHidden:!1,name:void 0,reversed:Uh.reversed,scale:Uh.scale,tick:Uh.tick,tickCount:void 0,ticks:void 0,type:Uh.type,unit:void 0},_J={allowDataOverflow:fu.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fu.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fu.scale,tick:fu.tick,tickCount:fu.tickCount,ticks:void 0,type:fu.type,unit:void 0},vJ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Uh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Uh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Uh.scale,tick:Uh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},xJ={allowDataOverflow:fu.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fu.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fu.scale,tick:fu.tick,tickCount:fu.tickCount,ticks:void 0,type:"category",unit:void 0},BT=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?vJ:yJ,jT=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?xJ:_J,yb=t=>t.polarOptions,FT=ke([of,lf,xo],fX),JR=ke([yb,FT],(t,e)=>{if(t!=null)return id(t.innerRadius,e,0)}),tN=ke([yb,FT],(t,e)=>{if(t!=null)return id(t.outerRadius,e,e*.8)}),bJ=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},eN=ke([yb],bJ);ke([BT,eN],gb);var nN=ke([FT,JR,tN],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ke([jT,nN],gb);var iN=ke([Zr,yb,JR,tN,of,lf],(t,e,n,i,r,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||i==null)){var{cx:c,cy:a,startAngle:g,endAngle:y}=e;return{cx:id(c,r,r/2),cy:id(a,s,s/2),innerRadius:n,outerRadius:i,startAngle:g,endAngle:y,clockWise:!1}}}),Ns=(t,e)=>e,_b=(t,e,n)=>n;function UT(t){return t?.id}function rN(t,e,n){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:s}=n,c=new Map;return t.forEach(a=>{var g,y=(g=a.data)!==null&&g!==void 0?g:i;if(!(y==null||y.length===0)){var x=UT(a);y.forEach((E,O)=>{var I=s==null||r?O:String(bl(E,s,null)),F=bl(E,a.dataKey,0),V;c.has(I)?V=c.get(I):V={},Object.assign(V,{[x]:F}),c.set(I,V)})}}),Array.from(c.values())}function VT(t){return t.stackId!=null&&t.dataKey!=null}var vb=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function xb(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function wJ(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Bs=t=>{var e=Zr(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},dg=t=>t.tooltip.settings.axisId;function Kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function xx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kk(Object(n),!0).forEach(function(i){SJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function SJ(t,e,n){return(e=TJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TJ(t){var e=MJ(t,"string");return typeof e=="symbol"?e:e+""}function MJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var e2=[0,"auto"],lu={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},aN=(t,e)=>t.cartesianAxis.xAxis[e],cf=(t,e)=>{var n=aN(t,e);return n??lu},uu={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:e2,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:E_},sN=(t,e)=>t.cartesianAxis.yAxis[e],hf=(t,e)=>{var n=sN(t,e);return n??uu},EJ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},$T=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??EJ},wl=(t,e,n)=>{switch(e){case"xAxis":return cf(t,n);case"yAxis":return hf(t,n);case"zAxis":return $T(t,n);case"angleAxis":return BT(t,n);case"radiusAxis":return jT(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},AJ=(t,e,n)=>{switch(e){case"xAxis":return cf(t,n);case"yAxis":return hf(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},O_=(t,e,n)=>{switch(e){case"xAxis":return cf(t,n);case"yAxis":return hf(t,n);case"angleAxis":return BT(t,n);case"radiusAxis":return jT(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},oN=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function lN(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var uN=t=>t.graphicalItems.cartesianItems,CJ=ke([Ns,_b],lN),cN=(t,e,n)=>t.filter(n).filter(i=>e?.includeHidden===!0?!0:!i.hide),D_=ke([uN,wl,CJ],cN,{memoizeOptions:{resultEqualityCheck:xb}}),hN=ke([D_],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(VT)),fN=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),PJ=ke([D_],fN),dN=t=>t.map(e=>e.data).filter(Boolean).flat(1),kJ=ke([D_],dN,{memoizeOptions:{resultEqualityCheck:xb}}),pN=(t,e)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=e;return t.length>0?t:n.slice(i,r+1)},qT=ke([kJ,DT],pN),mN=(t,e,n)=>e?.dataKey!=null?t.map(i=>({value:bl(i,e.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>t.map(r=>({value:bl(r,i)}))):t.map(i=>({value:i})),bb=ke([qT,wl,D_],mN);function gN(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function I0(t){if(oh(t)||t instanceof Date){var e=Number(t);if(Ga(e))return e}}function Qk(t){if(Array.isArray(t)){var e=[I0(t[0]),I0(t[1])];return xp(e)?e:void 0}var n=I0(t);if(n!=null)return[n,n]}function nf(t){return t.map(I0).filter(cZ)}function OJ(t,e,n){return!n||typeof e!="number"||Pc(e)?[]:n.length?nf(n.flatMap(i=>{var r=bl(t,i.dataKey),s,c;if(Array.isArray(r)?[s,c]=r:s=c=r,!(!Ga(s)||!Ga(c)))return[e-s,e+c]})):[]}var js=t=>{var e=Bs(t),n=dg(t);return O_(t,e,n)},yN=ke([js],t=>t?.dataKey),DJ=ke([hN,DT,js],rN),_N=(t,e,n)=>{var i={},r=e.reduce((s,c)=>(c.stackId==null||(s[c.stackId]==null&&(s[c.stackId]=[]),s[c.stackId].push(c)),s),i);return Object.fromEntries(Object.entries(r).map(s=>{var[c,a]=s,g=a.map(UT);return[c,{stackedData:mY(t,g,n),graphicalItems:a}]}))},n2=ke([DJ,hN,mb],_N),vN=(t,e,n,i)=>{var{dataStartIndex:r,dataEndIndex:s}=e;if(i==null&&n!=="zAxis"){var c=vY(t,r,s);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},IJ=ke([wl],t=>t.allowDataOverflow),HT=t=>{var e;if(t==null||!("domain"in t))return e2;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=nf(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:e2},xN=ke([wl],HT),bN=ke([xN,IJ],NR),zJ=ke([n2,ud,Ns,bN],vN,{memoizeOptions:{resultEqualityCheck:vb}}),ZT=t=>t.errorBars,LJ=(t,e,n)=>t.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>gN(n,i)),bx=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.filter(Boolean);if(r.length!==0){var s=r.flat(),c=Math.min(...s),a=Math.max(...s);return[c,a]}},wN=(t,e,n,i,r)=>{var s,c;if(n.length>0&&t.forEach(a=>{n.forEach(g=>{var y,x,E=(y=i[g.id])===null||y===void 0?void 0:y.filter(K=>gN(r,K)),O=bl(a,(x=e.dataKey)!==null&&x!==void 0?x:g.dataKey),I=OJ(a,O,E);if(I.length>=2){var F=Math.min(...I),V=Math.max(...I);(s==null||F<s)&&(s=F),(c==null||V>c)&&(c=V)}var $=Qk(O);$!=null&&(s=s==null?$[0]:Math.min(s,$[0]),c=c==null?$[1]:Math.max(c,$[1]))})}),e?.dataKey!=null&&t.forEach(a=>{var g=Qk(bl(a,e.dataKey));g!=null&&(s=s==null?g[0]:Math.min(s,g[0]),c=c==null?g[1]:Math.max(c,g[1]))}),Ga(s)&&Ga(c))return[s,c]},RJ=ke([qT,wl,PJ,ZT,Ns],wN,{memoizeOptions:{resultEqualityCheck:vb}});function NJ(t){var{value:e}=t;if(oh(e)||e instanceof Date)return e}var BJ=(t,e,n)=>{var i=t.map(NJ).filter(r=>r!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&Hz(i))?nR(0,t.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},SN=t=>t.referenceElements.dots,pg=(t,e,n)=>t.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===n:i.yAxisId===n),jJ=ke([SN,Ns,_b],pg),TN=t=>t.referenceElements.areas,FJ=ke([TN,Ns,_b],pg),MN=t=>t.referenceElements.lines,UJ=ke([MN,Ns,_b],pg),EN=(t,e)=>{var n=nf(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},VJ=ke(jJ,Ns,EN),AN=(t,e)=>{var n=nf(t.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},$J=ke([FJ,Ns],AN);function qJ(t){var e;if(t.x!=null)return nf([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.x);return n==null||n.length===0?[]:nf(n)}function HJ(t){var e;if(t.y!=null)return nf([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.y);return n==null||n.length===0?[]:nf(n)}var CN=(t,e)=>{var n=t.flatMap(i=>e==="xAxis"?qJ(i):HJ(i));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},ZJ=ke([UJ,Ns],CN),GJ=ke(VJ,ZJ,$J,(t,e,n)=>bx(t,n,e)),PN=(t,e,n,i,r,s,c,a)=>{if(n!=null)return n;var g=c==="vertical"&&a==="xAxis"||c==="horizontal"&&a==="yAxis",y=g?bx(i,s,r):bx(s,r);return iJ(e,y,t.allowDataOverflow)},YJ=ke([wl,xN,bN,zJ,RJ,GJ,Zr,Ns],PN,{memoizeOptions:{resultEqualityCheck:vb}}),WJ=[0,1],kN=(t,e,n,i,r,s,c)=>{if(!((t==null||n==null||n.length===0)&&c===void 0)){var{dataKey:a,type:g}=t,y=sf(e,s);if(y&&a==null){var x;return nR(0,(x=n?.length)!==null&&x!==void 0?x:0)}return g==="category"?BJ(i,t,y):r==="expand"?WJ:c}},GT=ke([wl,Zr,qT,bb,mb,Ns,YJ],kN),ON=(t,e,n,i,r)=>{if(t!=null){var{scale:s,type:c}=t;if(s==="auto")return e==="radial"&&r==="radiusAxis"?"band":e==="radial"&&r==="angleAxis"?"linear":c==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":c==="category"?"band":"linear";if(typeof s=="string"){var a="scale".concat(J2(s));return a in Ny?a:"point"}}},I_=ke([wl,Zr,oN,LT,Ns],ON);function XJ(t){if(t!=null){if(t in Ny)return Ny[t]();var e="scale".concat(J2(t));if(e in Ny)return Ny[e]()}}function YT(t,e,n,i){if(!(n==null||i==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(i);var r=XJ(e);if(r!=null){var s=r.domain(n).range(i);return hY(s),s}}}var DN=(t,e,n)=>{var i=HT(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&xp(t))return dJ(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&xp(t))return pJ(t,e.tickCount,e.allowDecimals)}},WT=ke([GT,O_,I_],DN),IN=(t,e,n,i)=>{if(i!=="angleAxis"&&t?.type==="number"&&xp(e)&&Array.isArray(n)&&n.length>0){var r=e[0],s=n[0],c=e[1],a=n[n.length-1];return[Math.min(r,s),Math.max(c,a)]}return e},KJ=ke([wl,GT,WT,Ns],IN),QJ=ke(bb,wl,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,i=Array.from(nf(t.map(a=>a.value))).sort((a,g)=>a-g);if(i.length<2)return 1/0;var r=i[i.length-1]-i[0];if(r===0)return 1/0;for(var s=0;s<i.length-1;s++){var c=i[s+1]-i[s];n=Math.min(n,c)}return n/r}}),zN=ke(QJ,Zr,mJ,xo,(t,e,n,i)=>i,(t,e,n,i,r)=>{if(!Ga(t))return 0;var s=e==="vertical"?i.height:i.width;if(r==="gap")return t*s/2;if(r==="no-gap"){var c=id(n,t*s),a=t*s/2;return a-c-(a-c)/s*c}return 0}),JJ=(t,e)=>{var n=cf(t,e);return n==null||typeof n.padding!="string"?0:zN(t,"xAxis",e,n.padding)},ttt=(t,e)=>{var n=hf(t,e);return n==null||typeof n.padding!="string"?0:zN(t,"yAxis",e,n.padding)},ett=ke(cf,JJ,(t,e)=>{var n,i;if(t==null)return{left:0,right:0};var{padding:r}=t;return typeof r=="string"?{left:e,right:e}:{left:((n=r.left)!==null&&n!==void 0?n:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),ntt=ke(hf,ttt,(t,e)=>{var n,i;if(t==null)return{top:0,bottom:0};var{padding:r}=t;return typeof r=="string"?{top:e,bottom:e}:{top:((n=r.top)!==null&&n!==void 0?n:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),itt=ke([xo,ett,rb,ib,(t,e,n)=>n],(t,e,n,i,r)=>{var{padding:s}=i;return r?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),rtt=ke([xo,Zr,ntt,rb,ib,(t,e,n)=>n],(t,e,n,i,r,s)=>{var{padding:c}=r;return s?[i.height-c.bottom,c.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),z_=(t,e,n,i)=>{var r;switch(e){case"xAxis":return itt(t,n,i);case"yAxis":return rtt(t,n,i);case"zAxis":return(r=$T(t,n))===null||r===void 0?void 0:r.range;case"angleAxis":return eN(t);case"radiusAxis":return nN(t,n);default:return}},LN=ke([wl,z_],gb),mg=ke([wl,I_,KJ,LN],YT);ke([D_,ZT,Ns],LJ);function RN(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var wb=(t,e)=>e,Sb=(t,e,n)=>n,att=ke(eb,wb,Sb,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(RN)),stt=ke(nb,wb,Sb,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(RN)),NN=(t,e)=>({width:t.width,height:e.height}),ott=(t,e)=>{var n=typeof e.width=="number"?e.width:E_;return{width:n,height:t.height}},ltt=ke(xo,cf,NN),utt=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},ctt=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},htt=ke(lf,xo,att,wb,Sb,(t,e,n,i,r)=>{var s={},c;return n.forEach(a=>{var g=NN(e,a);c==null&&(c=utt(e,i,t));var y=i==="top"&&!r||i==="bottom"&&r;s[a.id]=c-Number(y)*g.height,c+=(y?-1:1)*g.height}),s}),ftt=ke(of,xo,stt,wb,Sb,(t,e,n,i,r)=>{var s={},c;return n.forEach(a=>{var g=ott(e,a);c==null&&(c=ctt(e,i,t));var y=i==="left"&&!r||i==="right"&&r;s[a.id]=c-Number(y)*g.width,c+=(y?-1:1)*g.width}),s}),dtt=(t,e)=>{var n=cf(t,e);if(n!=null)return htt(t,n.orientation,n.mirror)},ptt=ke([xo,cf,dtt,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:t.left,y:0}:{x:t.left,y:r}}}),mtt=(t,e)=>{var n=hf(t,e);if(n!=null)return ftt(t,n.orientation,n.mirror)},gtt=ke([xo,hf,mtt,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:0,y:t.top}:{x:r,y:t.top}}}),ytt=ke(xo,hf,(t,e)=>{var n=typeof e.width=="number"?e.width:E_;return{width:n,height:t.height}}),BN=(t,e,n,i)=>{if(n!=null){var{allowDuplicatedCategory:r,type:s,dataKey:c}=n,a=sf(t,i),g=e.map(y=>y.value);if(c&&a&&s==="category"&&r&&Hz(g))return g}},XT=ke([Zr,bb,wl,Ns],BN),jN=(t,e,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:s}=n,c=sf(t,i);if(c&&(r==="number"||s!=="auto"))return e.map(a=>a.value)}},KT=ke([Zr,bb,O_,Ns],jN),Jk=ke([Zr,AJ,I_,mg,XT,KT,z_,WT,Ns],(t,e,n,i,r,s,c,a,g)=>{if(e!=null){var y=sf(t,g);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:g,categoricalDomain:s,duplicateDomain:r,isCategorical:y,niceTicks:a,range:c,realScaleType:n,scale:i}}}),_tt=(t,e,n,i,r,s,c,a,g)=>{if(!(e==null||i==null)){var y=sf(t,g),{type:x,ticks:E,tickCount:O}=e,I=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,F=x==="category"&&i.bandwidth?i.bandwidth()/I:0;F=g==="angleAxis"&&s!=null&&s.length>=2?Uu(s[0]-s[1])*2*F:F;var V=E||r;if(V){var $=V.map((K,Y)=>{var W=c?c.indexOf(K):K;return{index:Y,coordinate:i(W)+F,value:K,offset:F}});return $.filter(K=>Ga(K.coordinate))}return y&&a?a.map((K,Y)=>({coordinate:i(K)+F,value:K,index:Y,offset:F})).filter(K=>Ga(K.coordinate)):i.ticks?i.ticks(O).map(K=>({coordinate:i(K)+F,value:K,offset:F})):i.domain().map((K,Y)=>({coordinate:i(K)+F,value:c?c[K]:K,index:Y,offset:F}))}},FN=ke([Zr,O_,I_,mg,WT,z_,XT,KT,Ns],_tt),vtt=(t,e,n,i,r,s,c)=>{if(!(e==null||n==null||i==null||i[0]===i[1])){var a=sf(t,c),{tickCount:g}=e,y=0;return y=c==="angleAxis"&&i?.length>=2?Uu(i[0]-i[1])*2*y:y,a&&s?s.map((x,E)=>({coordinate:n(x)+y,value:x,index:E,offset:y})):n.ticks?n.ticks(g).map(x=>({coordinate:n(x)+y,value:x,offset:y})):n.domain().map((x,E)=>({coordinate:n(x)+y,value:r?r[x]:x,index:E,offset:y}))}},UN=ke([Zr,O_,mg,z_,XT,KT,Ns],vtt),VN=ke(wl,mg,(t,e)=>{if(!(t==null||e==null))return xx(xx({},t),{},{scale:e})}),xtt=ke([wl,I_,GT,LN],YT);ke((t,e,n)=>$T(t,n),xtt,(t,e)=>{if(!(t==null||e==null))return xx(xx({},t),{},{scale:e})});var btt=ke([Zr,eb,nb],(t,e,n)=>{switch(t){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),$N=t=>t.options.defaultTooltipEventType,qN=t=>t.options.validateTooltipEventTypes;function HN(t,e,n){if(t==null)return e;var i=t?"axis":"item";return n==null?e:n.includes(i)?i:e}function QT(t,e){var n=$N(t),i=qN(t);return HN(e,n,i)}function wtt(t){return jn(e=>QT(e,t))}var ZN=(t,e)=>{var n,i=Number(e);if(!(Pc(i)||e==null))return i>=0?t==null||(n=t[i])===null||n===void 0?void 0:n.value:void 0},Stt=t=>t.tooltip.settings,Zf={active:!1,index:null,dataKey:void 0,coordinate:void 0},Ttt={itemInteraction:{click:Zf,hover:Zf},axisInteraction:{click:Zf,hover:Zf},keyboardInteraction:Zf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},GN=ql({name:"tooltip",initialState:Ttt,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:zs()},removeTooltipEntrySettings:{reducer(t,e){var n=Yh(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:zs()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:Mtt,removeTooltipEntrySettings:Ett,setTooltipSettingsState:Att,setActiveMouseOverItemIndex:Ctt,mouseLeaveItem:kot,mouseLeaveChart:YN,setActiveClickItemIndex:Oot,setMouseOverAxisIndex:WN,setMouseClickAxisIndex:Ptt,setSyncInteraction:i2,setKeyboardInteraction:r2}=GN.actions,ktt=GN.reducer;function tO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function w0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tO(Object(n),!0).forEach(function(i){Ott(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ott(t,e,n){return(e=Dtt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dtt(t){var e=Itt(t,"string");return typeof e=="symbol"?e:e+""}function Itt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ztt(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Ltt(t){return t.index!=null}var XN=(t,e,n,i)=>{if(e==null)return Zf;var r=ztt(t,e,n);if(r==null)return Zf;if(r.active)return r;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(Ltt(r)){if(s)return w0(w0({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i};return w0(w0({},Zf),{},{coordinate:r.coordinate})},JT=(t,e)=>{var n=t?.index;if(n==null)return null;var i=Number(n);if(!Ga(i))return n;var r=0,s=1/0;return e.length>0&&(s=e.length-1),String(Math.max(r,Math.min(i,s)))},KN=(t,e,n,i,r,s,c,a)=>{if(!(s==null||a==null)){var g=c[0],y=g==null?void 0:a(g.positions,s);if(y!=null)return y;var x=r?.[Number(s)];if(x)switch(n){case"horizontal":return{x:x.coordinate,y:(i.top+e)/2};default:return{x:(i.left+t)/2,y:x.coordinate}}}},QN=(t,e,n,i)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var r;return n==="hover"?r=t.itemInteraction.hover.dataKey:r=t.itemInteraction.click.dataKey,r==null&&i!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var c;return((c=s.settings)===null||c===void 0?void 0:c.dataKey)===r})},L_=t=>t.options.tooltipPayloadSearcher,gg=t=>t.tooltip;function eO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function nO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eO(Object(n),!0).forEach(function(i){Rtt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Rtt(t,e,n){return(e=Ntt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ntt(t){var e=Btt(t,"string");return typeof e=="symbol"?e:e+""}function Btt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jtt(t,e){return t??e}var JN=(t,e,n,i,r,s,c)=>{if(!(e==null||s==null)){var{chartData:a,computedData:g,dataStartIndex:y,dataEndIndex:x}=n,E=[];return t.reduce((O,I)=>{var F,{dataDefinedOnItem:V,settings:$}=I,K=jtt(V,a),Y=Array.isArray(K)?IL(K,y,x):K,W=(F=$?.dataKey)!==null&&F!==void 0?F:i,X=$?.nameKey,J;if(i&&Array.isArray(Y)&&!Array.isArray(Y[0])&&c==="axis"?J=Zz(Y,i,r):J=s(Y,e,g,X),Array.isArray(J))J.forEach(ct=>{var it=nO(nO({},$),{},{name:ct.name,unit:ct.unit,color:void 0,fill:void 0});O.push(OP({tooltipEntrySettings:it,dataKey:ct.dataKey,payload:ct.payload,value:bl(ct.payload,ct.dataKey),name:ct.name}))});else{var st;O.push(OP({tooltipEntrySettings:$,dataKey:W,payload:J,value:bl(J,W),name:(st=bl(J,X))!==null&&st!==void 0?st:$?.name}))}return O},E)}},tM=ke([js,Zr,oN,LT,Bs],ON),Ftt=ke([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Utt=ke([Bs,dg],lN),R_=ke([Ftt,js,Utt],cN,{memoizeOptions:{resultEqualityCheck:xb}}),Vtt=ke([R_],t=>t.filter(VT)),$tt=ke([R_],dN,{memoizeOptions:{resultEqualityCheck:xb}}),yg=ke([$tt,ud],pN),qtt=ke([Vtt,ud,js],rN),eM=ke([yg,js,R_],mN),t3=ke([js],HT),Htt=ke([js],t=>t.allowDataOverflow),e3=ke([t3,Htt],NR),Ztt=ke([R_],t=>t.filter(VT)),Gtt=ke([qtt,Ztt,mb],_N),Ytt=ke([Gtt,ud,Bs,e3],vN),Wtt=ke([R_],fN),Xtt=ke([yg,js,Wtt,ZT,Bs],wN,{memoizeOptions:{resultEqualityCheck:vb}}),Ktt=ke([SN,Bs,dg],pg),Qtt=ke([Ktt,Bs],EN),Jtt=ke([TN,Bs,dg],pg),tet=ke([Jtt,Bs],AN),eet=ke([MN,Bs,dg],pg),net=ke([eet,Bs],CN),iet=ke([Qtt,net,tet],bx),ret=ke([js,t3,e3,Ytt,Xtt,iet,Zr,Bs],PN),n3=ke([js,Zr,yg,eM,mb,Bs,ret],kN),aet=ke([n3,js,tM],DN),set=ke([js,n3,aet,Bs],IN),i3=t=>{var e=Bs(t),n=dg(t),i=!1;return z_(t,e,n,i)},r3=ke([js,i3],gb),a3=ke([js,tM,set,r3],YT),oet=ke([Zr,eM,js,Bs],BN),uet=ke([Zr,eM,js,Bs],jN),cet=(t,e,n,i,r,s,c,a)=>{if(e){var{type:g}=e,y=sf(t,a);if(i){var x=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,E=g==="category"&&i.bandwidth?i.bandwidth()/x:0;return E=a==="angleAxis"&&r!=null&&r?.length>=2?Uu(r[0]-r[1])*2*E:E,y&&c?c.map((O,I)=>({coordinate:i(O)+E,value:O,index:I,offset:E})):i.domain().map((O,I)=>({coordinate:i(O)+E,value:s?s[O]:O,index:I,offset:E}))}}},ff=ke([Zr,js,tM,a3,i3,oet,uet,Bs],cet),nM=ke([$N,qN,Stt],(t,e,n)=>HN(n.shared,t,e)),s3=t=>t.tooltip.settings.trigger,iM=t=>t.tooltip.settings.defaultIndex,Tb=ke([gg,nM,s3,iM],XN),c_=ke([Tb,yg],JT),o3=ke([ff,c_],ZN),het=ke([Tb],t=>{if(t)return t.dataKey}),l3=ke([gg,nM,s3,iM],QN),fet=ke([of,lf,Zr,xo,ff,iM,l3,L_],KN),det=ke([Tb,fet],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),pet=ke([Tb],t=>t.active),met=ke([l3,c_,ud,yN,o3,L_,nM],JN),get=ke([met],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function iO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function rO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iO(Object(n),!0).forEach(function(i){yet(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yet(t,e,n){return(e=_et(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _et(t){var e=vet(t,"string");return typeof e=="symbol"?e:e+""}function vet(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xet=()=>jn(js),bet=()=>{var t=xet(),e=jn(ff),n=jn(a3);return ix(!t||!n?void 0:rO(rO({},t),{},{scale:n}),e)};function aO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Nm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aO(Object(n),!0).forEach(function(i){wet(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function wet(t,e,n){return(e=Tet(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tet(t){var e=Met(t,"string");return typeof e=="symbol"?e:e+""}function Met(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Eet=(t,e,n,i)=>{var r=e.find(s=>s&&s.index===n);if(r){if(t==="horizontal")return{x:r.coordinate,y:i.chartY};if(t==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},Aet=(t,e,n,i)=>{var r=e.find(y=>y&&y.index===n);if(r){if(t==="centric"){var s=r.coordinate,{radius:c}=i;return Nm(Nm(Nm({},i),_o(i.cx,i.cy,c,s)),{},{angle:s,radius:c})}var a=r.coordinate,{angle:g}=i;return Nm(Nm(Nm({},i),_o(i.cx,i.cy,a,g)),{},{angle:g,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Cet(t,e){var{chartX:n,chartY:i}=t;return n>=e.left&&n<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var u3=(t,e,n,i,r)=>{var s,c=-1,a=(s=e?.length)!==null&&s!==void 0?s:0;if(a<=1||t==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var g=0;g<a;g++){var y=g>0?n[g-1].coordinate:n[a-1].coordinate,x=n[g].coordinate,E=g>=a-1?n[0].coordinate:n[g+1].coordinate,O=void 0;if(Uu(x-y)!==Uu(E-x)){var I=[];if(Uu(E-x)===Uu(r[1]-r[0])){O=E;var F=x+r[1]-r[0];I[0]=Math.min(F,(F+y)/2),I[1]=Math.max(F,(F+y)/2)}else{O=y;var V=E+r[1]-r[0];I[0]=Math.min(x,(V+x)/2),I[1]=Math.max(x,(V+x)/2)}var $=[Math.min(x,(O+x)/2),Math.max(x,(O+x)/2)];if(t>$[0]&&t<=$[1]||t>=I[0]&&t<=I[1]){({index:c}=n[g]);break}}else{var K=Math.min(y,E),Y=Math.max(y,E);if(t>(K+x)/2&&t<=(Y+x)/2){({index:c}=n[g]);break}}}else if(e){for(var W=0;W<a;W++)if(W===0&&t<=(e[W].coordinate+e[W+1].coordinate)/2||W>0&&W<a-1&&t>(e[W].coordinate+e[W-1].coordinate)/2&&t<=(e[W].coordinate+e[W+1].coordinate)/2||W===a-1&&t>(e[W].coordinate+e[W-1].coordinate)/2){({index:c}=e[W]);break}}return c},c3=()=>jn(LT),rM=(t,e)=>e,h3=(t,e,n)=>n,aM=(t,e,n,i)=>i,Pet=ke(ff,t=>Wx(t,e=>e.coordinate)),sM=ke([gg,rM,h3,aM],XN),f3=ke([sM,yg],JT),ket=(t,e,n)=>{if(e!=null){var i=gg(t);return e==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},d3=ke([gg,rM,h3,aM],QN),wx=ke([of,lf,Zr,xo,ff,aM,d3,L_],KN),Oet=ke([sM,wx],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),p3=ke([ff,f3],ZN),Det=ke([d3,f3,ud,yN,p3,L_,rM],JN),Iet=ke([sM],t=>({isActive:t.active,activeIndex:t.index})),zet=(t,e,n,i,r,s,c)=>{if(!(!t||!n||!i||!r)&&Cet(t,c)){var a=xY(t,e),g=u3(a,s,r,n,i),y=Eet(e,r,g,t);return{activeIndex:String(g),activeCoordinate:y}}},Let=(t,e,n,i,r,s,c)=>{if(!(!t||!i||!r||!s||!n)){var a=yX(t,n);if(a){var g=bY(a,e),y=u3(g,c,s,i,r),x=Aet(e,s,y,a);return{activeIndex:String(y),activeCoordinate:x}}}},Ret=(t,e,n,i,r,s,c,a)=>{if(!(!t||!e||!i||!r||!s))return e==="horizontal"||e==="vertical"?zet(t,e,i,r,s,c,a):Let(t,e,n,i,r,s,c)},Net=ke(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var i=t[e];if(i!=null)return n?i.panoramaElementId:i.elementId}}),Bet=ke(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(i=>parseInt(i,10)).concat(Object.values(xl)),n=Array.from(new Set(e));return n.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:wJ}});function sO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function oO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sO(Object(n),!0).forEach(function(i){jet(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jet(t,e,n){return(e=Fet(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fet(t){var e=Uet(t,"string");return typeof e=="symbol"?e:e+""}function Uet(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vet={},$et={zIndexMap:Object.values(xl).reduce((t,e)=>oO(oO({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),Vet)},qet=new Set(Object.values(xl));function Het(t){return qet.has(t)}var m3=ql({name:"zIndex",initialState:$et,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:zs()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!Het(n)&&delete t.zIndexMap[n])},prepare:zs()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n,elementId:i,isPanorama:r}=e.payload;t.zIndexMap[n]?r?t.zIndexMap[n].panoramaElementId=i:t.zIndexMap[n].elementId=i:t.zIndexMap[n]={consumers:0,elementId:r?void 0:i,panoramaElementId:r?i:void 0}},prepare:zs()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElementId=void 0:t.zIndexMap[n].elementId=void 0)},prepare:zs()}}}),{registerZIndexPortal:Zet,unregisterZIndexPortal:Get,registerZIndexPortalId:Yet,unregisterZIndexPortalId:Wet}=m3.actions,Xet=m3.reducer;function df(t){var{zIndex:e,children:n}=t,i=JY(),r=i&&e!==void 0&&e!==0,s=Hl(),c=Ks();Z.useLayoutEffect(()=>r?(c(Zet({zIndex:e})),()=>{c(Get({zIndex:e}))}):lg,[c,e,r]);var a=jn(y=>Net(y,e,s));if(!r)return n;if(!a)return null;var g=document.getElementById(a);return g?m_.createPortal(n,g):null}function a2(){return a2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a2.apply(null,arguments)}function lO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function S0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lO(Object(n),!0).forEach(function(i){Ket(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ket(t,e,n){return(e=Qet(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qet(t){var e=Jet(t,"string");return typeof e=="symbol"?e:e+""}function Jet(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tnt(t){var{cursor:e,cursorComp:n,cursorProps:i}=t;return Z.isValidElement(e)?Z.cloneElement(e,i):Z.createElement(n,i)}function ent(t){var e,{coordinate:n,payload:i,index:r,offset:s,tooltipAxisBandSize:c,layout:a,cursor:g,tooltipEventType:y,chartName:x}=t,E=n,O=i,I=r;if(!g||!E||x!=="ScatterChart"&&y!=="axis")return null;var F,V,$;if(x==="ScatterChart")F=E,V=kW,$=xl.cursorLine;else if(x==="BarChart")F=OW(a,E,s,c),V=oX,$=xl.cursorRectangle;else if(a==="radial"&&Gz(E)){var{cx:K,cy:Y,radius:W,startAngle:X,endAngle:J}=tR(E);F={cx:K,cy:Y,startAngle:X,endAngle:J,innerRadius:W,outerRadius:W},V=bX,$=xl.cursorLine}else F={points:wX(a,E,s)},V=D0,$=xl.cursorLine;var st=typeof g=="object"&&"className"in g?g.className:void 0,ct=S0(S0(S0(S0({stroke:"#ccc",pointerEvents:"none"},s),F),Hx(g)),{},{payload:O,payloadIndex:I,className:sa("recharts-tooltip-cursor",st)});return Z.createElement(df,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:$},Z.createElement(tnt,{cursor:g,cursorComp:V,cursorProps:ct}))}function nnt(t){var e=bet(),n=qL(),i=sb(),r=c3();return e==null||n==null||i==null||r==null?null:Z.createElement(ent,a2({},t,{offset:n,layout:i,tooltipAxisBandSize:e,chartName:r}))}var g3=Z.createContext(null),int=()=>Z.useContext(g3),Uw={exports:{}},uO;function rnt(){return uO||(uO=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(g,y,x){this.fn=g,this.context=y,this.once=x||!1}function s(g,y,x,E,O){if(typeof x!="function")throw new TypeError("The listener must be a function");var I=new r(x,E||g,O),F=n?n+y:y;return g._events[F]?g._events[F].fn?g._events[F]=[g._events[F],I]:g._events[F].push(I):(g._events[F]=I,g._eventsCount++),g}function c(g,y){--g._eventsCount===0?g._events=new i:delete g._events[y]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var y=[],x,E;if(this._eventsCount===0)return y;for(E in x=this._events)e.call(x,E)&&y.push(n?E.slice(1):E);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(x)):y},a.prototype.listeners=function(y){var x=n?n+y:y,E=this._events[x];if(!E)return[];if(E.fn)return[E.fn];for(var O=0,I=E.length,F=new Array(I);O<I;O++)F[O]=E[O].fn;return F},a.prototype.listenerCount=function(y){var x=n?n+y:y,E=this._events[x];return E?E.fn?1:E.length:0},a.prototype.emit=function(y,x,E,O,I,F){var V=n?n+y:y;if(!this._events[V])return!1;var $=this._events[V],K=arguments.length,Y,W;if($.fn){switch($.once&&this.removeListener(y,$.fn,void 0,!0),K){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,x),!0;case 3:return $.fn.call($.context,x,E),!0;case 4:return $.fn.call($.context,x,E,O),!0;case 5:return $.fn.call($.context,x,E,O,I),!0;case 6:return $.fn.call($.context,x,E,O,I,F),!0}for(W=1,Y=new Array(K-1);W<K;W++)Y[W-1]=arguments[W];$.fn.apply($.context,Y)}else{var X=$.length,J;for(W=0;W<X;W++)switch($[W].once&&this.removeListener(y,$[W].fn,void 0,!0),K){case 1:$[W].fn.call($[W].context);break;case 2:$[W].fn.call($[W].context,x);break;case 3:$[W].fn.call($[W].context,x,E);break;case 4:$[W].fn.call($[W].context,x,E,O);break;default:if(!Y)for(J=1,Y=new Array(K-1);J<K;J++)Y[J-1]=arguments[J];$[W].fn.apply($[W].context,Y)}}return!0},a.prototype.on=function(y,x,E){return s(this,y,x,E,!1)},a.prototype.once=function(y,x,E){return s(this,y,x,E,!0)},a.prototype.removeListener=function(y,x,E,O){var I=n?n+y:y;if(!this._events[I])return this;if(!x)return c(this,I),this;var F=this._events[I];if(F.fn)F.fn===x&&(!O||F.once)&&(!E||F.context===E)&&c(this,I);else{for(var V=0,$=[],K=F.length;V<K;V++)(F[V].fn!==x||O&&!F[V].once||E&&F[V].context!==E)&&$.push(F[V]);$.length?this._events[I]=$.length===1?$[0]:$:c(this,I)}return this},a.prototype.removeAllListeners=function(y){var x;return y?(x=n?n+y:y,this._events[x]&&c(this,x)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Uw)),Uw.exports}var ant=rnt();const snt=yu(ant);var h_=new snt,s2="recharts.syncEvent.tooltip",cO="recharts.syncEvent.brush";function ont(t,e){if(e){var n=Number.parseInt(e,10);if(!Pc(n))return t?.[n]}}var lnt={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},y3=ql({name:"options",initialState:lnt,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),unt=y3.reducer,{createEventEmitter:cnt}=y3.actions;function hnt(t){return t.tooltip.syncInteraction}var fnt={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},_3=ql({name:"chartData",initialState:fnt,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:i}=e.payload;n!=null&&(t.dataStartIndex=n),i!=null&&(t.dataEndIndex=i)}}}),{setChartData:hO,setDataStartEndIndexes:dnt,setComputedData:Dot}=_3.actions,pnt=_3.reducer,mnt=["x","y"];function fO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Bm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fO(Object(n),!0).forEach(function(i){gnt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gnt(t,e,n){return(e=ynt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ynt(t){var e=_nt(t,"string");return typeof e=="symbol"?e:e+""}function _nt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vnt(t,e){if(t==null)return{};var n,i,r=xnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xnt(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function bnt(){var t=jn(RT),e=jn(NT),n=Ks(),i=jn(QR),r=jn(ff),s=sb(),c=ab(),a=jn(g=>g.rootProps.className);Z.useEffect(()=>{if(t==null)return lg;var g=(y,x,E)=>{if(e!==E&&t===y){if(i==="index"){var O;if(c&&x!==null&&x!==void 0&&(O=x.payload)!==null&&O!==void 0&&O.coordinate&&x.payload.sourceViewBox){var I=x.payload.coordinate,{x:F,y:V}=I,$=vnt(I,mnt),{x:K,y:Y,width:W,height:X}=x.payload.sourceViewBox,J=Bm(Bm({},$),{},{x:c.x+(W?(F-K)/W:0)*c.width,y:c.y+(X?(V-Y)/X:0)*c.height});n(Bm(Bm({},x),{},{payload:Bm(Bm({},x.payload),{},{coordinate:J})}))}else n(x);return}if(r!=null){var st;if(typeof i=="function"){var ct={activeTooltipIndex:x.payload.index==null?void 0:Number(x.payload.index),isTooltipActive:x.payload.active,activeIndex:x.payload.index==null?void 0:Number(x.payload.index),activeLabel:x.payload.label,activeDataKey:x.payload.dataKey,activeCoordinate:x.payload.coordinate},it=i(r,ct);st=r[it]}else i==="value"&&(st=r.find(Nt=>String(Nt.value)===x.payload.label));var{coordinate:ut}=x.payload;if(st==null||x.payload.active===!1||ut==null||c==null){n(i2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:xt,y:wt}=ut,St=Math.min(xt,c.x+c.width),le=Math.min(wt,c.y+c.height),pe={x:s==="horizontal"?st.coordinate:St,y:s==="horizontal"?le:st.coordinate},Te=i2({active:x.payload.active,coordinate:pe,dataKey:x.payload.dataKey,index:String(st.index),label:x.payload.label,sourceViewBox:x.payload.sourceViewBox});n(Te)}}};return h_.on(s2,g),()=>{h_.off(s2,g)}},[a,n,e,t,i,r,s,c])}function wnt(){var t=jn(RT),e=jn(NT),n=Ks();Z.useEffect(()=>{if(t==null)return lg;var i=(r,s,c)=>{e!==c&&t===r&&n(dnt(s))};return h_.on(cO,i),()=>{h_.off(cO,i)}},[n,e,t])}function Snt(){var t=Ks();Z.useEffect(()=>{t(cnt())},[t]),bnt(),wnt()}function Tnt(t,e,n,i,r,s){var c=jn(I=>ket(I,t,e)),a=jn(NT),g=jn(RT),y=jn(QR),x=jn(hnt),E=x?.active,O=ab();Z.useEffect(()=>{if(!E&&g!=null&&a!=null){var I=i2({active:s,coordinate:n,dataKey:c,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:O});h_.emit(s2,g,I,a)}},[E,n,c,r,i,a,g,y,s,O])}function dO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function pO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dO(Object(n),!0).forEach(function(i){Mnt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Mnt(t,e,n){return(e=Ent(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ent(t){var e=Ant(t,"string");return typeof e=="symbol"?e:e+""}function Ant(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cnt(t){return t.dataKey}function Pnt(t,e){return Z.isValidElement(t)?Z.cloneElement(t,e):typeof t=="function"?Z.createElement(t,e):Z.createElement(lW,e)}var mO=[],knt={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!ug.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function v3(t){var e,n,i=_u(t,knt),{active:r,allowEscapeViewBox:s,animationDuration:c,animationEasing:a,content:g,filterNull:y,isAnimationActive:x,offset:E,payloadUniqBy:O,position:I,reverseDirection:F,useTranslate3d:V,wrapperStyle:$,cursor:K,shared:Y,trigger:W,defaultIndex:X,portal:J,axisId:st}=i,ct=Ks(),it=typeof X=="number"?String(X):X;Z.useEffect(()=>{ct(Att({shared:Y,trigger:W,axisId:st,active:r,defaultIndex:it}))},[ct,Y,W,st,r,it]);var ut=ab(),xt=YL(),wt=wtt(Y),{activeIndex:St,isActive:le}=(e=jn(Me=>Iet(Me,wt,W,it)))!==null&&e!==void 0?e:{},pe=jn(Me=>Det(Me,wt,W,it)),Te=jn(Me=>p3(Me,wt,W,it)),Nt=jn(Me=>Oet(Me,wt,W,it)),Ct=pe,Tt=int(),Bt=(n=r??le)!==null&&n!==void 0?n:!1,[$t,ft]=cG([Ct,Bt]),Mt=wt==="axis"?Te:void 0;Tnt(wt,W,Nt,Mt,St,Bt);var Lt=J??Tt;if(Lt==null||ut==null||wt==null)return null;var Xt=Ct??mO;Bt||(Xt=mO),y&&Xt.length&&(Xt=RZ(Xt.filter(Me=>Me.value!=null&&(Me.hide!==!0||i.includeHidden)),O,Cnt));var re=Xt.length>0,ce=Z.createElement(mW,{allowEscapeViewBox:s,animationDuration:c,animationEasing:a,isAnimationActive:x,active:Bt,coordinate:Nt,hasPayload:re,offset:E,position:I,reverseDirection:F,useTranslate3d:V,viewBox:ut,wrapperStyle:$,lastBoundingBox:$t,innerRef:ft,hasPortalFromProps:!!J},Pnt(g,pO(pO({},i),{},{payload:Xt,label:Mt,active:Bt,activeIndex:St,coordinate:Nt,accessibilityLayer:xt})));return Z.createElement(Z.Fragment,null,m_.createPortal(ce,Lt),Bt&&Z.createElement(nnt,{cursor:K,tooltipEventType:wt,coordinate:Nt,payload:Xt,index:St}))}function Ont(t,e,n){return(e=Dnt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dnt(t){var e=Int(t,"string");return typeof e=="symbol"?e:e+""}function Int(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class znt{constructor(e){Ont(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function gO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Lnt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gO(Object(n),!0).forEach(function(i){Rnt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Rnt(t,e,n){return(e=Nnt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nnt(t){var e=Bnt(t,"string");return typeof e=="symbol"?e:e+""}function Bnt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jnt={cacheSize:2e3,enableCache:!0},x3=Lnt({},jnt),yO=new znt(x3.cacheSize),Fnt={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_O="recharts_measurement_span";function Unt(t,e){var n=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",s=e.fontStyle||"",c=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(s,"|").concat(c,"|").concat(a)}var vO=(t,e)=>{try{var n=document.getElementById(_O);n||(n=document.createElement("span"),n.setAttribute("id",_O),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Fnt,e),n.textContent="".concat(t);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},qy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ug.isSsr)return{width:0,height:0};if(!x3.enableCache)return vO(e,n);var i=Unt(e,n),r=yO.get(i);if(r)return r;var s=vO(e,n);return yO.set(i,s),s},xO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Vnt=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$nt=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,b3={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},qnt=Object.keys(b3),Vm="NaN";function Hnt(t,e){return t*b3[e]}class Fl{static parse(e){var n,[,i,r]=(n=$nt.exec(e))!==null&&n!==void 0?n:[];return new Fl(parseFloat(i),r??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Pc(e)&&(this.unit=""),n!==""&&!Vnt.test(n)&&(this.num=NaN,this.unit=""),qnt.includes(n)&&(this.num=Hnt(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Fl(NaN,""):new Fl(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Fl(NaN,""):new Fl(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Fl(NaN,""):new Fl(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Fl(NaN,""):new Fl(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Pc(this.num)}}function w3(t){if(t.includes(Vm))return Vm;for(var e=t;e.includes("*")||e.includes("/");){var n,[,i,r,s]=(n=xO.exec(e))!==null&&n!==void 0?n:[],c=Fl.parse(i??""),a=Fl.parse(s??""),g=r==="*"?c.multiply(a):c.divide(a);if(g.isNaN())return Vm;e=e.replace(xO,g.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var y,[,x,E,O]=(y=bO.exec(e))!==null&&y!==void 0?y:[],I=Fl.parse(x??""),F=Fl.parse(O??""),V=E==="+"?I.add(F):I.subtract(F);if(V.isNaN())return Vm;e=e.replace(bO,V.toString())}return e}var wO=/\(([^()]*)\)/;function Znt(t){for(var e=t,n;(n=wO.exec(e))!=null;){var[,i]=n;e=e.replace(wO,w3(i))}return e}function Gnt(t){var e=t.replace(/\s+/g,"");return e=Znt(e),e=w3(e),e}function Ynt(t){try{return Gnt(t)}catch{return Vm}}function Vw(t){var e=Ynt(t.slice(5,-1));return e===Vm?"":e}var Wnt=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Xnt=["dx","dy","angle","className","breakAll"];function o2(){return o2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o2.apply(null,arguments)}function SO(t,e){if(t==null)return{};var n,i,r=Knt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Knt(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var S3=/[ \f\n\r\t\v\u2028\u2029]+/,T3=t=>{var{children:e,breakAll:n,style:i}=t;try{var r=[];vo(e)||(n?r=e.toString().split(""):r=e.toString().split(S3));var s=r.map(a=>({word:a,width:qy(a,i).width})),c=n?0:qy("",i).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}};function Qnt(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var M3=(t,e,n,i)=>t.reduce((r,s)=>{var{word:c,width:a}=s,g=r[r.length-1];if(g&&a!=null&&(e==null||i||g.width+a+n<Number(e)))g.words.push(c),g.width+=a+n;else{var y={words:[c],width:a};r.push(y)}return r},[]),E3=t=>t.reduce((e,n)=>e.width>n.width?e:n),Jnt="",TO=(t,e,n,i,r,s,c,a)=>{var g=t.slice(0,e),y=T3({breakAll:n,style:i,children:g+Jnt});if(!y)return[!1,[]];var x=M3(y.wordsWithComputedWidth,s,c,a),E=x.length>r||E3(x).width>Number(s);return[E,x]},tit=(t,e,n,i,r)=>{var{maxLines:s,children:c,style:a,breakAll:g}=t,y=Dn(s),x=String(c),E=M3(e,i,n,r);if(!y||r)return E;var O=E.length>s||E3(E).width>Number(i);if(!O)return E;for(var I=0,F=x.length-1,V=0,$;I<=F&&V<=x.length-1;){var K=Math.floor((I+F)/2),Y=K-1,[W,X]=TO(x,Y,g,a,s,i,n,r),[J]=TO(x,K,g,a,s,i,n,r);if(!W&&!J&&(I=K+1),W&&J&&(F=K-1),!W&&J){$=X;break}V++}return $||E},MO=t=>{var e=vo(t)?[]:t.toString().split(S3);return[{words:e,width:void 0}]},eit=t=>{var{width:e,scaleToFit:n,children:i,style:r,breakAll:s,maxLines:c}=t;if((e||n)&&!ug.isSsr){var a,g,y=T3({breakAll:s,children:i,style:r});if(y){var{wordsWithComputedWidth:x,spaceWidth:E}=y;a=x,g=E}else return MO(i);return tit({breakAll:s,children:i,maxLines:c,style:r},a,g,e,!!n)}return MO(i)},A3="#808080",nit={breakAll:!1,capHeight:"0.71em",fill:A3,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},oM=Z.forwardRef((t,e)=>{var n=_u(t,nit),{x:i,y:r,lineHeight:s,capHeight:c,fill:a,scaleToFit:g,textAnchor:y,verticalAnchor:x}=n,E=SO(n,Wnt),O=Z.useMemo(()=>eit({breakAll:E.breakAll,children:E.children,maxLines:E.maxLines,scaleToFit:g,style:E.style,width:E.width}),[E.breakAll,E.children,E.maxLines,g,E.style,E.width]),{dx:I,dy:F,angle:V,className:$,breakAll:K}=E,Y=SO(E,Xnt);if(!oh(i)||!oh(r)||O.length===0)return null;var W=Number(i)+(Dn(I)?I:0),X=Number(r)+(Dn(F)?F:0);if(!Ga(W)||!Ga(X))return null;var J;switch(x){case"start":J=Vw("calc(".concat(c,")"));break;case"middle":J=Vw("calc(".concat((O.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:J=Vw("calc(".concat(O.length-1," * -").concat(s,")"));break}var st=[];if(g){var ct=O[0].width,{width:it}=E;st.push("scale(".concat(Dn(it)&&Dn(ct)?it/ct:1,")"))}return V&&st.push("rotate(".concat(V,", ").concat(W,", ").concat(X,")")),st.length&&(Y.transform=st.join(" ")),Z.createElement("text",o2({},qu(Y),{ref:e,x:W,y:X,className:sa("recharts-text",$),textAnchor:y,fill:a.includes("url")?A3:a}),O.map((ut,xt)=>{var wt=ut.words.join(K?"":" ");return Z.createElement("tspan",{x:W,dy:xt===0?J:s,key:"".concat(wt,"-").concat(xt)},wt)}))});oM.displayName="Text";var iit=["labelRef"];function rit(t,e){if(t==null)return{};var n,i,r=ait(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ait(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function EO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EO(Object(n),!0).forEach(function(i){sit(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function sit(t,e,n){return(e=oit(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oit(t){var e=lit(t,"string");return typeof e=="symbol"?e:e+""}function lit(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vh(){return Vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vh.apply(null,arguments)}var C3=Z.createContext(null),uit=t=>{var{x:e,y:n,upperWidth:i,lowerWidth:r,width:s,height:c,children:a}=t,g=Z.useMemo(()=>({x:e,y:n,upperWidth:i,lowerWidth:r,width:s,height:c}),[e,n,i,r,s,c]);return Z.createElement(C3.Provider,{value:g},a)},P3=()=>{var t=Z.useContext(C3),e=ab();return t||$L(e)},cit=Z.createContext(null),hit=()=>{var t=Z.useContext(cit),e=jn(iN);return t||e},fit=t=>{var{value:e,formatter:n}=t,i=vo(t.children)?e:t.children;return typeof n=="function"?n(i):i},lM=t=>t!=null&&typeof t=="function",dit=(t,e)=>{var n=Uu(e-t),i=Math.min(Math.abs(e-t),360);return n*i},pit=(t,e,n,i,r)=>{var{offset:s,className:c}=t,{cx:a,cy:g,innerRadius:y,outerRadius:x,startAngle:E,endAngle:O,clockWise:I}=r,F=(y+x)/2,V=dit(E,O),$=V>=0?1:-1,K,Y;switch(e){case"insideStart":K=E+$*s,Y=I;break;case"insideEnd":K=O-$*s,Y=!I;break;case"end":K=O+$*s,Y=I;break;default:throw new Error("Unsupported position ".concat(e))}Y=V<=0?Y:!Y;var W=_o(a,g,F,K),X=_o(a,g,F,K+(Y?1:-1)*359),J="M".concat(W.x,",").concat(W.y,`
    A`).concat(F,",").concat(F,",0,1,").concat(Y?0:1,`,
    `).concat(X.x,",").concat(X.y),st=vo(t.id)?t_("recharts-radial-line-"):t.id;return Z.createElement("text",Vh({},i,{dominantBaseline:"central",className:sa("recharts-radial-bar-label",c)}),Z.createElement("defs",null,Z.createElement("path",{id:st,d:J})),Z.createElement("textPath",{xlinkHref:"#".concat(st)},n))},mit=(t,e,n)=>{var{cx:i,cy:r,innerRadius:s,outerRadius:c,startAngle:a,endAngle:g}=t,y=(a+g)/2;if(n==="outside"){var{x,y:E}=_o(i,r,c+e,y);return{x,y:E,textAnchor:x>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var O=(s+c)/2,{x:I,y:F}=_o(i,r,O,y);return{x:I,y:F,textAnchor:"middle",verticalAnchor:"middle"}},l2=t=>"cx"in t&&Dn(t.cx),git=(t,e)=>{var{parentViewBox:n,offset:i,position:r}=t,s;n!=null&&!l2(n)&&(s=n);var{x:c,y:a,upperWidth:g,lowerWidth:y,height:x}=e,E=c,O=c+(g-y)/2,I=(E+O)/2,F=(g+y)/2,V=E+g/2,$=x>=0?1:-1,K=$*i,Y=$>0?"end":"start",W=$>0?"start":"end",X=g>=0?1:-1,J=X*i,st=X>0?"end":"start",ct=X>0?"start":"end";if(r==="top"){var it={x:E+g/2,y:a-K,textAnchor:"middle",verticalAnchor:Y};return es(es({},it),s?{height:Math.max(a-s.y,0),width:g}:{})}if(r==="bottom"){var ut={x:O+y/2,y:a+x+K,textAnchor:"middle",verticalAnchor:W};return es(es({},ut),s?{height:Math.max(s.y+s.height-(a+x),0),width:y}:{})}if(r==="left"){var xt={x:I-J,y:a+x/2,textAnchor:st,verticalAnchor:"middle"};return es(es({},xt),s?{width:Math.max(xt.x-s.x,0),height:x}:{})}if(r==="right"){var wt={x:I+F+J,y:a+x/2,textAnchor:ct,verticalAnchor:"middle"};return es(es({},wt),s?{width:Math.max(s.x+s.width-wt.x,0),height:x}:{})}var St=s?{width:F,height:x}:{};return r==="insideLeft"?es({x:I+J,y:a+x/2,textAnchor:ct,verticalAnchor:"middle"},St):r==="insideRight"?es({x:I+F-J,y:a+x/2,textAnchor:st,verticalAnchor:"middle"},St):r==="insideTop"?es({x:E+g/2,y:a+K,textAnchor:"middle",verticalAnchor:W},St):r==="insideBottom"?es({x:O+y/2,y:a+x-K,textAnchor:"middle",verticalAnchor:Y},St):r==="insideTopLeft"?es({x:E+J,y:a+K,textAnchor:ct,verticalAnchor:W},St):r==="insideTopRight"?es({x:E+g-J,y:a+K,textAnchor:st,verticalAnchor:W},St):r==="insideBottomLeft"?es({x:O+J,y:a+x-K,textAnchor:ct,verticalAnchor:Y},St):r==="insideBottomRight"?es({x:O+y-J,y:a+x-K,textAnchor:st,verticalAnchor:Y},St):r&&typeof r=="object"&&(Dn(r.x)||Kh(r.x))&&(Dn(r.y)||Kh(r.y))?es({x:c+id(r.x,F),y:a+id(r.y,x),textAnchor:"end",verticalAnchor:"end"},St):es({x:V,y:a+x/2,textAnchor:"middle",verticalAnchor:"middle"},St)},yit={offset:5,zIndex:xl.label};function Hf(t){var e=_u(t,yit),{viewBox:n,position:i,value:r,children:s,content:c,className:a="",textBreakAll:g,labelRef:y}=e,x=hit(),E=P3(),O=i==="center"?E:x??E,I,F,V;if(n==null?I=O:l2(n)?I=n:I=$L(n),!I||vo(r)&&vo(s)&&!Z.isValidElement(c)&&typeof c!="function")return null;var $=es(es({},e),{},{viewBox:I});if(Z.isValidElement(c)){var{labelRef:K}=$,Y=rit($,iit);return Z.cloneElement(c,Y)}if(typeof c=="function"){if(F=Z.createElement(c,$),Z.isValidElement(F))return F}else F=fit(e);var W=qu(e);if(l2(I)){if(i==="insideStart"||i==="insideEnd"||i==="end")return pit(e,i,F,W,I);V=mit(I,e.offset,e.position)}else V=git(e,I);return Z.createElement(df,{zIndex:e.zIndex},Z.createElement(oM,Vh({ref:y,className:sa("recharts-label",a)},W,V,{textAnchor:Qnt(W.textAnchor)?W.textAnchor:V.textAnchor,breakAll:g}),F))}Hf.displayName="Label";var _it=(t,e,n)=>{if(!t)return null;var i={viewBox:e,labelRef:n};return t===!0?Z.createElement(Hf,Vh({key:"label-implicit"},i)):oh(t)?Z.createElement(Hf,Vh({key:"label-implicit",value:t},i)):Z.isValidElement(t)?t.type===Hf?Z.cloneElement(t,es({key:"label-implicit"},i)):Z.createElement(Hf,Vh({key:"label-implicit",content:t},i)):lM(t)?Z.createElement(Hf,Vh({key:"label-implicit",content:t},i)):t&&typeof t=="object"?Z.createElement(Hf,Vh({},t,{key:"label-implicit"},i)):null};function vit(t){var{label:e,labelRef:n}=t,i=P3();return _it(e,i,n)||null}var $w={},qw={},AO;function xit(){return AO||(AO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(qw)),qw}var Hw={},CO;function bit(){return CO||(CO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(Hw)),Hw}var PO;function wit(){return PO||(PO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xit(),n=bit(),i=eT();function r(s){if(i.isArrayLike(s))return e.last(n.toArray(s))}t.last=r})($w)),$w}var Zw,kO;function Sit(){return kO||(kO=1,Zw=wit().last),Zw}var Tit=Sit();const Mit=yu(Tit);var Eit=["valueAccessor"],Ait=["dataKey","clockWise","id","textBreakAll","zIndex"];function Sx(){return Sx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Sx.apply(null,arguments)}function OO(t,e){if(t==null)return{};var n,i,r=Cit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Cit(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Pit=t=>Array.isArray(t.value)?Mit(t.value):t.value,k3=Z.createContext(void 0),kit=k3.Provider,O3=Z.createContext(void 0);O3.Provider;function Oit(){return Z.useContext(k3)}function Dit(){return Z.useContext(O3)}function z0(t){var{valueAccessor:e=Pit}=t,n=OO(t,Eit),{dataKey:i,clockWise:r,id:s,textBreakAll:c,zIndex:a}=n,g=OO(n,Ait),y=Oit(),x=Dit(),E=y||x;return!E||!E.length?null:Z.createElement(df,{zIndex:a??xl.label},Z.createElement(sh,{className:"recharts-label-list"},E.map((O,I)=>{var F,V=vo(i)?e(O,I):bl(O&&O.payload,i),$=vo(s)?{}:{id:"".concat(s,"-").concat(I)};return Z.createElement(Hf,Sx({key:"label-".concat(I)},qu(O),g,$,{fill:(F=n.fill)!==null&&F!==void 0?F:O.fill,parentViewBox:O.parentViewBox,value:V,textBreakAll:c,viewBox:O.viewBox,index:I,zIndex:0}))})))}z0.displayName="LabelList";function Iit(t){var{label:e}=t;return e?e===!0?Z.createElement(z0,{key:"labelList-implicit"}):Z.isValidElement(e)||lM(e)?Z.createElement(z0,{key:"labelList-implicit",content:e}):typeof e=="object"?Z.createElement(z0,Sx({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function u2(){return u2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u2.apply(null,arguments)}var D3=t=>{var{cx:e,cy:n,r:i,className:r}=t,s=sa("recharts-dot",r);return Dn(e)&&Dn(n)&&Dn(i)?Z.createElement("circle",u2({},Cc(t),tT(t),{className:s,cx:e,cy:n,r:i})):null},zit={radiusAxis:{},angleAxis:{}},I3=ql({name:"polarAxis",initialState:zit,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Iot,removeRadiusAxis:zot,addAngleAxis:Lot,removeAngleAxis:Rot}=I3.actions,Lit=I3.reducer,z3=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0;function Rit(t){var{fn:e,args:n}=t,i=Ks(),r=Hl();return Z.useLayoutEffect(()=>{if(!r){var s=e(n);return i(Mtt(s)),()=>{i(Ett(s))}}},[e,n,i,r]),null}function Nit(t){var{legendPayload:e}=t,n=Ks(),i=Hl();return Z.useLayoutEffect(()=>i?lg:(n(eW(e)),()=>{n(nW(e))}),[n,i,e]),null}var Gw,Bit=()=>{var[t]=Z.useState(()=>t_("uid-"));return t},jit=(Gw=wB.useId)!==null&&Gw!==void 0?Gw:Bit;function L3(t,e){var n=jit();return e||(t?"".concat(t,"-").concat(n):n)}var Fit=Z.createContext(void 0),Uit=t=>{var{id:e,type:n,children:i}=t,r=L3("recharts-".concat(n),e);return Z.createElement(Fit.Provider,{value:r},i(r))},Vit={cartesianItems:[],polarItems:[]},R3=ql({name:"graphicalItems",initialState:Vit,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:zs()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:i}=e.payload,r=Yh(t).cartesianItems.indexOf(n);r>-1&&(t.cartesianItems[r]=i)},prepare:zs()},removeCartesianGraphicalItem:{reducer(t,e){var n=Yh(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:zs()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:zs()},removePolarGraphicalItem:{reducer(t,e){var n=Yh(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:zs()}}}),{addCartesianGraphicalItem:$it,replaceCartesianGraphicalItem:qit,removeCartesianGraphicalItem:Hit,addPolarGraphicalItem:Not,removePolarGraphicalItem:Bot}=R3.actions,Zit=R3.reducer;function Git(t){var e=Ks(),n=Z.useRef(null);return Z.useLayoutEffect(()=>{n.current===null?e($it(t)):n.current!==t&&e(qit({prev:n.current,next:t})),n.current=t},[e,t]),Z.useLayoutEffect(()=>()=>{n.current&&(e(Hit(n.current)),n.current=null)},[e]),null}var Yit=["points"];function DO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Yw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DO(Object(n),!0).forEach(function(i){Wit(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Wit(t,e,n){return(e=Xit(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xit(t){var e=Kit(t,"string");return typeof e=="symbol"?e:e+""}function Kit(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tx(){return Tx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Tx.apply(null,arguments)}function Qit(t,e){if(t==null)return{};var n,i,r=Jit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Jit(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function trt(t){var{option:e,dotProps:n,className:i}=t;if(Z.isValidElement(e))return Z.cloneElement(e,n);if(typeof e=="function")return e(n);var r=sa(i,typeof e!="boolean"?e.className:""),s=n??{},{points:c}=s,a=Qit(s,Yit);return Z.createElement(D3,Tx({},a,{className:r}))}function ert(t,e){return t==null?!1:e?!0:t.length===1}function nrt(t){var{points:e,dot:n,className:i,dotClassName:r,dataKey:s,baseProps:c,needClip:a,clipPathId:g,zIndex:y=xl.scatter}=t;if(!ert(e,n))return null;var x=z3(n),E=k7(n),O=e.map((F,V)=>{var $,K,Y=Yw(Yw(Yw({r:3},c),E),{},{index:V,cx:($=F.x)!==null&&$!==void 0?$:void 0,cy:(K=F.y)!==null&&K!==void 0?K:void 0,dataKey:s,value:F.value,payload:F.payload,points:e});return Z.createElement(trt,{key:"dot-".concat(V),option:n,dotProps:Y,className:r})}),I={};return a&&g!=null&&(I.clipPath="url(#clipPath-".concat(x?"":"dots-").concat(g,")")),Z.createElement(df,{zIndex:y},Z.createElement(sh,Tx({className:i},I),O))}function IO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function zO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IO(Object(n),!0).forEach(function(i){irt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function irt(t,e,n){return(e=rrt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rrt(t){var e=art(t,"string");return typeof e=="symbol"?e:e+""}function art(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var srt={xAxis:{},yAxis:{},zAxis:{}},N3=ql({name:"cartesianAxis",initialState:srt,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:zs()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:zs()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:zs()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:zs()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:zs()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:zs()},updateYAxisWidth(t,e){var{id:n,width:i}=e.payload,r=t.yAxis[n];if(r){var s=r.widthHistory||[];if(s.length===3&&s[0]===s[2]&&i===s[1]&&i!==r.width&&Math.abs(i-s[0])<=1)return;var c=[...s,i].slice(-3);t.yAxis[n]=zO(zO({},t.yAxis[n]),{},{width:i,widthHistory:c})}}}}),{addXAxis:ort,removeXAxis:lrt,addYAxis:urt,removeYAxis:crt,addZAxis:jot,removeZAxis:Fot,updateYAxisWidth:hrt}=N3.actions,frt=N3.reducer,drt=ke([xo],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),prt=ke([drt,of,lf],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),uM=()=>jn(prt),mrt=()=>jn(get);function LO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ww(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LO(Object(n),!0).forEach(function(i){grt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function grt(t,e,n){return(e=yrt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yrt(t){var e=_rt(t,"string");return typeof e=="symbol"?e:e+""}function _rt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vrt=t=>{var{point:e,childIndex:n,mainColor:i,activeDot:r,dataKey:s}=t;if(r===!1||e.x==null||e.y==null)return null;var c={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},a=Ww(Ww(Ww({},c),Hx(r)),tT(r)),g;return Z.isValidElement(r)?g=Z.cloneElement(r,a):typeof r=="function"?g=r(a):g=Z.createElement(D3,a),Z.createElement(sh,{className:"recharts-active-dot"},g)};function RO(t){var{points:e,mainColor:n,activeDot:i,itemDataKey:r,zIndex:s=xl.activeDot}=t,c=jn(c_),a=mrt();if(e==null||a==null)return null;var g=e.find(y=>a.includes(y.payload));return vo(g)?null:Z.createElement(df,{zIndex:s},Z.createElement(vrt,{point:g,childIndex:Number(c),mainColor:n,dataKey:r,activeDot:i}))}var xrt={},B3=ql({name:"errorBars",initialState:xrt,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]||(t[n]=[]),t[n].push(i)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:i,next:r}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===i.dataKey&&s.direction===i.direction?r:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]&&(t[n]=t[n].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:Uot,replaceErrorBar:Vot,removeErrorBar:$ot}=B3.actions,brt=B3.reducer;function j3(t,e){var n,i,r=jn(y=>cf(y,t)),s=jn(y=>hf(y,e)),c=(n=r?.allowDataOverflow)!==null&&n!==void 0?n:lu.allowDataOverflow,a=(i=s?.allowDataOverflow)!==null&&i!==void 0?i:uu.allowDataOverflow,g=c||a;return{needClip:g,needClipX:c,needClipY:a}}function wrt(t){var{xAxisId:e,yAxisId:n,clipPathId:i}=t,r=uM(),{needClipX:s,needClipY:c,needClip:a}=j3(e,n);if(!a||!r)return null;var{x:g,y,width:x,height:E}=r;return Z.createElement("clipPath",{id:"clipPath-".concat(i)},Z.createElement("rect",{x:s?g:g-x/2,y:c?y:y-E/2,width:s?x:x*2,height:c?E:E*2}))}var Srt=t=>{var{chartData:e}=t,n=Ks(),i=Hl();return Z.useEffect(()=>i?()=>{}:(n(hO(e)),()=>{n(hO(void 0))}),[e,n,i]),null},NO={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},F3=ql({name:"brush",initialState:NO,reducers:{setBrushSettings(t,e){return e.payload==null?NO:e.payload}}}),{setBrushSettings:qot}=F3.actions,Trt=F3.reducer;function Mrt(t,e,n){return(e=Ert(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ert(t){var e=Art(t,"string");return typeof e=="symbol"?e:e+""}function Art(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class cM{static create(e){return new cM(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(i)switch(i){case"start":return this.scale(e);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+r}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+c}return this.scale(e)}}isInRange(e){var n=this.range(),i=n[0],r=n[n.length-1];return i<=r?e>=i&&e<=r:e>=r&&e<=i}}Mrt(cM,"EPS",1e-4);function Crt(t){return(t%180+180)%180}var Prt=function(e){var{width:n,height:i}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Crt(r),c=s*Math.PI/180,a=Math.atan(i/n),g=c>a&&c<Math.PI-a?i/Math.sin(c):n/Math.cos(c);return Math.abs(g)},krt={dots:[],areas:[],lines:[]},U3=ql({name:"referenceElements",initialState:krt,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Yh(t).dots.findIndex(i=>i===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Yh(t).areas.findIndex(i=>i===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Yh(t).lines.findIndex(i=>i===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Hot,removeDot:Zot,addArea:Got,removeArea:Yot,addLine:Wot,removeLine:Xot}=U3.actions,Ort=U3.reducer,Drt=Z.createContext(void 0),Irt=t=>{var{children:e}=t,[n]=Z.useState("".concat(t_("recharts"),"-clip")),i=uM();if(i==null)return null;var{x:r,y:s,width:c,height:a}=i;return Z.createElement(Drt.Provider,{value:n},Z.createElement("defs",null,Z.createElement("clipPath",{id:n},Z.createElement("rect",{x:r,y:s,height:a,width:c}))),e)};function ng(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var i in e)if({}.hasOwnProperty.call(e,i)&&!{}.hasOwnProperty.call(t,i))return!1;return!0}function V3(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function zrt(t,e,n){var i={width:t.width+e.width,height:t.height+e.height};return Prt(i,n)}function Lrt(t,e,n){var i=n==="width",{x:r,y:s,width:c,height:a}=t;return e===1?{start:i?r:s,end:i?r+c:s+a}:{start:i?r+c:s+a,end:i?r:s}}function Mx(t,e,n,i,r){if(t*e<t*i||t*e>t*r)return!1;var s=n();return t*(e-t*s/2-i)>=0&&t*(e+t*s/2-r)<=0}function Rrt(t,e){return V3(t,e+1)}function Nrt(t,e,n,i,r){for(var s=(i||[]).slice(),{start:c,end:a}=e,g=0,y=1,x=c,E=function(){var F=i?.[g];if(F===void 0)return{v:V3(i,y)};var V=g,$,K=()=>($===void 0&&($=n(F,V)),$),Y=F.coordinate,W=g===0||Mx(t,Y,K,x,a);W||(g=0,x=c,y+=1),W&&(x=Y+t*(K()/2+r),g+=y)},O;y<=s.length;)if(O=E(),O)return O.v;return[]}function BO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Zo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BO(Object(n),!0).forEach(function(i){Brt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Brt(t,e,n){return(e=jrt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jrt(t){var e=Frt(t,"string");return typeof e=="symbol"?e:e+""}function Frt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Urt(t,e,n,i,r){for(var s=(i||[]).slice(),c=s.length,{start:a}=e,{end:g}=e,y=function(O){var I=s[O],F,V=()=>(F===void 0&&(F=n(I,O)),F);if(O===c-1){var $=t*(I.coordinate+t*V()/2-g);s[O]=I=Zo(Zo({},I),{},{tickCoord:$>0?I.coordinate-$*t:I.coordinate})}else s[O]=I=Zo(Zo({},I),{},{tickCoord:I.coordinate});if(I.tickCoord!=null){var K=Mx(t,I.tickCoord,V,a,g);K&&(g=I.tickCoord-t*(V()/2+r),s[O]=Zo(Zo({},I),{},{isShow:!0}))}},x=c-1;x>=0;x--)y(x);return s}function Vrt(t,e,n,i,r,s){var c=(i||[]).slice(),a=c.length,{start:g,end:y}=e;if(s){var x=i[a-1],E=n(x,a-1),O=t*(x.coordinate+t*E/2-y);if(c[a-1]=x=Zo(Zo({},x),{},{tickCoord:O>0?x.coordinate-O*t:x.coordinate}),x.tickCoord!=null){var I=Mx(t,x.tickCoord,()=>E,g,y);I&&(y=x.tickCoord-t*(E/2+r),c[a-1]=Zo(Zo({},x),{},{isShow:!0}))}}for(var F=s?a-1:a,V=function(Y){var W=c[Y],X,J=()=>(X===void 0&&(X=n(W,Y)),X);if(Y===0){var st=t*(W.coordinate-t*J()/2-g);c[Y]=W=Zo(Zo({},W),{},{tickCoord:st<0?W.coordinate-st*t:W.coordinate})}else c[Y]=W=Zo(Zo({},W),{},{tickCoord:W.coordinate});if(W.tickCoord!=null){var ct=Mx(t,W.tickCoord,J,g,y);ct&&(g=W.tickCoord+t*(J()/2+r),c[Y]=Zo(Zo({},W),{},{isShow:!0}))}},$=0;$<F;$++)V($);return c}function hM(t,e,n){var{tick:i,ticks:r,viewBox:s,minTickGap:c,orientation:a,interval:g,tickFormatter:y,unit:x,angle:E}=t;if(!r||!r.length||!i)return[];if(Dn(g)||ug.isSsr){var O;return(O=Rrt(r,Dn(g)?g:0))!==null&&O!==void 0?O:[]}var I=[],F=a==="top"||a==="bottom"?"width":"height",V=x&&F==="width"?qy(x,{fontSize:e,letterSpacing:n}):{width:0,height:0},$=(W,X)=>{var J=typeof y=="function"?y(W.value,X):W.value;return F==="width"?zrt(qy(J,{fontSize:e,letterSpacing:n}),V,E):qy(J,{fontSize:e,letterSpacing:n})[F]},K=r.length>=2?Uu(r[1].coordinate-r[0].coordinate):1,Y=Lrt(s,K,F);return g==="equidistantPreserveStart"?Nrt(K,Y,$,r,c):(g==="preserveStart"||g==="preserveStartEnd"?I=Vrt(K,Y,$,r,c,g==="preserveStartEnd"):I=Urt(K,Y,$,r,c),I.filter(W=>W.isShow))}var $rt=t=>{var{ticks:e,label:n,labelGapWithTick:i=5,tickSize:r=0,tickMargin:s=0}=t,c=0;if(e){Array.from(e).forEach(x=>{if(x){var E=x.getBoundingClientRect();E.width>c&&(c=E.width)}});var a=n?n.getBoundingClientRect().width:0,g=r+s,y=c+g+a+(n?i:0);return Math.round(y)}return 0},qrt=["axisLine","width","height","className","hide","ticks","axisType"],Hrt=["viewBox"],Zrt=["viewBox"];function c2(t,e){if(t==null)return{};var n,i,r=Grt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Grt(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function wp(){return wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wp.apply(null,arguments)}function jO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function xs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jO(Object(n),!0).forEach(function(i){Yrt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Yrt(t,e,n){return(e=Wrt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wrt(t){var e=Xrt(t,"string");return typeof e=="symbol"?e:e+""}function Xrt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fM={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:xl.axis};function Krt(t){var{x:e,y:n,width:i,height:r,orientation:s,mirror:c,axisLine:a,otherSvgProps:g}=t;if(!a)return null;var y=xs(xs(xs({},g),Cc(a)),{},{fill:"none"});if(s==="top"||s==="bottom"){var x=+(s==="top"&&!c||s==="bottom"&&c);y=xs(xs({},y),{},{x1:e,y1:n+x*r,x2:e+i,y2:n+x*r})}else{var E=+(s==="left"&&!c||s==="right"&&c);y=xs(xs({},y),{},{x1:e+E*i,y1:n,x2:e+E*i,y2:n+r})}return Z.createElement("line",wp({},y,{className:sa("recharts-cartesian-axis-line",Yx(a,"className"))}))}function Qrt(t,e,n,i,r,s,c,a,g){var y,x,E,O,I,F,V=a?-1:1,$=t.tickSize||c,K=Dn(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":y=x=t.coordinate,O=n+ +!a*r,E=O-V*$,F=E-V*g,I=K;break;case"left":E=O=t.coordinate,x=e+ +!a*i,y=x-V*$,I=y-V*g,F=K;break;case"right":E=O=t.coordinate,x=e+ +a*i,y=x+V*$,I=y+V*g,F=K;break;default:y=x=t.coordinate,O=n+ +a*r,E=O+V*$,F=E+V*g,I=K;break}return{line:{x1:y,y1:E,x2:x,y2:O},tick:{x:I,y:F}}}function Jrt(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function tat(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function eat(t){var{option:e,tickProps:n,value:i}=t,r,s=sa(n.className,"recharts-cartesian-axis-tick-value");if(Z.isValidElement(e))r=Z.cloneElement(e,xs(xs({},n),{},{className:s}));else if(typeof e=="function")r=e(xs(xs({},n),{},{className:s}));else{var c="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(c=sa(c,e?.className)),r=Z.createElement(oM,wp({},n,{className:c}),i)}return r}var nat=Z.forwardRef((t,e)=>{var{ticks:n=[],tick:i,tickLine:r,stroke:s,tickFormatter:c,unit:a,padding:g,tickTextProps:y,orientation:x,mirror:E,x:O,y:I,width:F,height:V,tickSize:$,tickMargin:K,fontSize:Y,letterSpacing:W,getTicksConfig:X,events:J,axisType:st}=t,ct=hM(xs(xs({},X),{},{ticks:n}),Y,W),it=Jrt(x,E),ut=tat(x,E),xt=Cc(X),wt=Hx(i),St={};typeof r=="object"&&(St=r);var le=xs(xs({},xt),{},{fill:"none"},St),pe=ct.map(Ct=>xs({entry:Ct},Qrt(Ct,O,I,F,V,x,$,E,K))),Te=pe.map(Ct=>{var{entry:Tt,line:Bt}=Ct;return Z.createElement(sh,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Tt.value,"-").concat(Tt.coordinate,"-").concat(Tt.tickCoord)},r&&Z.createElement("line",wp({},le,Bt,{className:sa("recharts-cartesian-axis-tick-line",Yx(r,"className"))})))}),Nt=pe.map((Ct,Tt)=>{var{entry:Bt,tick:$t}=Ct,ft=xs(xs(xs(xs({textAnchor:it,verticalAnchor:ut},xt),{},{stroke:"none",fill:s},wt),$t),{},{index:Tt,payload:Bt,visibleTicksCount:ct.length,tickFormatter:c,padding:g},y);return Z.createElement(sh,wp({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Bt.value,"-").concat(Bt.coordinate,"-").concat(Bt.tickCoord)},fZ(J,Bt,Tt)),i&&Z.createElement(eat,{option:i,tickProps:ft,value:"".concat(typeof c=="function"?c(Bt.value,Tt):Bt.value).concat(a||"")}))});return Z.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(st,"-ticks")},Nt.length>0&&Z.createElement(df,{zIndex:xl.label},Z.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(st,"-tick-labels"),ref:e},Nt)),Te.length>0&&Z.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(st,"-tick-lines")},Te))}),iat=Z.forwardRef((t,e)=>{var{axisLine:n,width:i,height:r,className:s,hide:c,ticks:a,axisType:g}=t,y=c2(t,qrt),[x,E]=Z.useState(""),[O,I]=Z.useState(""),F=Z.useRef(null);Z.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var $;return $rt({ticks:F.current,label:($=t.labelRef)===null||$===void 0?void 0:$.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var V=Z.useCallback($=>{if($){var K=$.getElementsByClassName("recharts-cartesian-axis-tick-value");F.current=K;var Y=K[0];if(Y){var W=window.getComputedStyle(Y),X=W.fontSize,J=W.letterSpacing;(X!==x||J!==O)&&(E(X),I(J))}}},[x,O]);return c||i!=null&&i<=0||r!=null&&r<=0?null:Z.createElement(df,{zIndex:t.zIndex},Z.createElement(sh,{className:sa("recharts-cartesian-axis",s)},Z.createElement(Krt,{x:t.x,y:t.y,width:i,height:r,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Cc(t)}),Z.createElement(nat,{ref:V,axisType:g,events:y,fontSize:x,getTicksConfig:t,height:t.height,letterSpacing:O,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:a,unit:t.unit,width:t.width,x:t.x,y:t.y}),Z.createElement(uit,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},Z.createElement(vit,{label:t.label,labelRef:t.labelRef}),t.children)))}),rat=Z.memo(iat,(t,e)=>{var{viewBox:n}=t,i=c2(t,Hrt),{viewBox:r}=e,s=c2(e,Zrt);return ng(n,r)&&ng(i,s)}),dM=Z.forwardRef((t,e)=>{var n=_u(t,fM);return Z.createElement(rat,wp({},n,{ref:e}))});dM.displayName="CartesianAxis";var aat=["x1","y1","x2","y2","key"],sat=["offset"],oat=["xAxisId","yAxisId"],lat=["xAxisId","yAxisId"];function FO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Yo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FO(Object(n),!0).forEach(function(i){uat(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function uat(t,e,n){return(e=cat(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cat(t){var e=hat(t,"string");return typeof e=="symbol"?e:e+""}function hat(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function op(){return op=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},op.apply(null,arguments)}function Ex(t,e){if(t==null)return{};var n,i,r=fat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fat(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var dat=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:i,y:r,width:s,height:c,ry:a}=t;return Z.createElement("rect",{x:i,y:r,ry:a,width:s,height:c,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function $3(t){var{option:e,lineItemProps:n}=t,i;if(Z.isValidElement(e))i=Z.cloneElement(e,n);else if(typeof e=="function")i=e(n);else{var r,{x1:s,y1:c,x2:a,y2:g,key:y}=n,x=Ex(n,aat),E=(r=Cc(x))!==null&&r!==void 0?r:{},{offset:O}=E,I=Ex(E,sat);i=Z.createElement("line",op({},I,{x1:s,y1:c,x2:a,y2:g,fill:"none",key:y}))}return i}function pat(t){var{x:e,width:n,horizontal:i=!0,horizontalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:s,yAxisId:c}=t,a=Ex(t,oat),g=r.map((y,x)=>{var E=Yo(Yo({},a),{},{x1:e,y1:y,x2:e+n,y2:y,key:"line-".concat(x),index:x});return Z.createElement($3,{key:"line-".concat(x),option:i,lineItemProps:E})});return Z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},g)}function mat(t){var{y:e,height:n,vertical:i=!0,verticalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:s,yAxisId:c}=t,a=Ex(t,lat),g=r.map((y,x)=>{var E=Yo(Yo({},a),{},{x1:y,y1:e,x2:y,y2:e+n,key:"line-".concat(x),index:x});return Z.createElement($3,{option:i,lineItemProps:E,key:"line-".concat(x)})});return Z.createElement("g",{className:"recharts-cartesian-grid-vertical"},g)}function gat(t){var{horizontalFill:e,fillOpacity:n,x:i,y:r,width:s,height:c,horizontalPoints:a,horizontal:g=!0}=t;if(!g||!e||!e.length||a==null)return null;var y=a.map(E=>Math.round(E+r-r)).sort((E,O)=>E-O);r!==y[0]&&y.unshift(0);var x=y.map((E,O)=>{var I=!y[O+1],F=I?r+c-E:y[O+1]-E;if(F<=0)return null;var V=O%e.length;return Z.createElement("rect",{key:"react-".concat(O),y:E,x:i,height:F,width:s,stroke:"none",fill:e[V],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},x)}function yat(t){var{vertical:e=!0,verticalFill:n,fillOpacity:i,x:r,y:s,width:c,height:a,verticalPoints:g}=t;if(!e||!n||!n.length)return null;var y=g.map(E=>Math.round(E+r-r)).sort((E,O)=>E-O);r!==y[0]&&y.unshift(0);var x=y.map((E,O)=>{var I=!y[O+1],F=I?r+c-E:y[O+1]-E;if(F<=0)return null;var V=O%n.length;return Z.createElement("rect",{key:"react-".concat(O),x:E,y:s,width:F,height:a,stroke:"none",fill:n[V],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},x)}var _at=(t,e)=>{var{xAxis:n,width:i,height:r,offset:s}=t;return zL(hM(Yo(Yo(Yo({},fM),n),{},{ticks:LL(n),viewBox:{x:0,y:0,width:i,height:r}})),s.left,s.left+s.width,e)},vat=(t,e)=>{var{yAxis:n,width:i,height:r,offset:s}=t;return zL(hM(Yo(Yo(Yo({},fM),n),{},{ticks:LL(n),viewBox:{x:0,y:0,width:i,height:r}})),s.top,s.top+s.height,e)},xat={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:xl.grid};function pM(t){var e=HL(),n=ZL(),i=qL(),r=Yo(Yo({},_u(t,xat)),{},{x:Dn(t.x)?t.x:i.left,y:Dn(t.y)?t.y:i.top,width:Dn(t.width)?t.width:i.width,height:Dn(t.height)?t.height:i.height}),{xAxisId:s,yAxisId:c,x:a,y:g,width:y,height:x,syncWithTicks:E,horizontalValues:O,verticalValues:I}=r,F=Hl(),V=jn(ut=>Jk(ut,"xAxis",s,F)),$=jn(ut=>Jk(ut,"yAxis",c,F));if(!lh(y)||!lh(x)||!Dn(a)||!Dn(g))return null;var K=r.verticalCoordinatesGenerator||_at,Y=r.horizontalCoordinatesGenerator||vat,{horizontalPoints:W,verticalPoints:X}=r;if((!W||!W.length)&&typeof Y=="function"){var J=O&&O.length,st=Y({yAxis:$?Yo(Yo({},$),{},{ticks:J?O:$.ticks}):void 0,width:e??y,height:n??x,offset:i},J?!0:E);rx(Array.isArray(st),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof st,"]")),Array.isArray(st)&&(W=st)}if((!X||!X.length)&&typeof K=="function"){var ct=I&&I.length,it=K({xAxis:V?Yo(Yo({},V),{},{ticks:ct?I:V.ticks}):void 0,width:e??y,height:n??x,offset:i},ct?!0:E);rx(Array.isArray(it),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof it,"]")),Array.isArray(it)&&(X=it)}return Z.createElement(df,{zIndex:r.zIndex},Z.createElement("g",{className:"recharts-cartesian-grid"},Z.createElement(dat,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),Z.createElement(gat,op({},r,{horizontalPoints:W})),Z.createElement(yat,op({},r,{verticalPoints:X})),Z.createElement(pat,op({},r,{offset:i,horizontalPoints:W,xAxis:V,yAxis:$})),Z.createElement(mat,op({},r,{offset:i,verticalPoints:X,xAxis:V,yAxis:$}))))}pM.displayName="CartesianGrid";function bat(t){var e=Hx(t),n=3,i=2;if(e!=null){var{r,strokeWidth:s}=e,c=Number(r),a=Number(s);return(Number.isNaN(c)||c<0)&&(c=n),(Number.isNaN(a)||a<0)&&(a=i),{r:c,strokeWidth:a}}return{r:n,strokeWidth:i}}var q3=(t,e,n,i)=>VN(t,"xAxis",e,i),H3=(t,e,n,i)=>UN(t,"xAxis",e,i),Z3=(t,e,n,i)=>VN(t,"yAxis",n,i),G3=(t,e,n,i)=>UN(t,"yAxis",n,i),wat=ke([Zr,q3,Z3,H3,G3],(t,e,n,i,r)=>sf(t,"xAxis")?ix(e,i,!1):ix(n,r,!1)),Sat=(t,e,n,i,r)=>r,Y3=ke([uN,Sat],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),Tat=(t,e,n,i,r)=>{var s,c=Y3(t,e,n,i,r);if(c!=null){var a=Zr(t),g=sf(a,"xAxis"),y;if(g?y=n2(t,"yAxis",n,i):y=n2(t,"xAxis",e,i),y!=null){var{stackId:x}=c,E=UT(c);if(!(x==null||E==null)){var O=(s=y[x])===null||s===void 0?void 0:s.stackedData;return O?.find(I=>I.key===E)}}}},Mat=ke([Zr,q3,Z3,H3,G3,Tat,DT,wat,Y3,gJ],(t,e,n,i,r,s,c,a,g,y)=>{var{chartData:x,dataStartIndex:E,dataEndIndex:O}=c;if(!(g==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||i==null||r==null||i.length===0||r.length===0||a==null)){var{data:I}=g,F;if(I&&I.length>0?F=I:F=x?.slice(E,O+1),F!=null)return qat({layout:t,xAxis:e,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataStartIndex:E,areaSettings:g,stackedData:s,displayedData:F,chartBaseValue:y,bandSize:a})}}),Eat=["id"],Aat=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function mp(){return mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mp.apply(null,arguments)}function W3(t,e){if(t==null)return{};var n,i,r=Cat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Cat(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function UO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function $m(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UO(Object(n),!0).forEach(function(i){Pat(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Pat(t,e,n){return(e=kat(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kat(t){var e=Oat(t,"string");return typeof e=="symbol"?e:e+""}function Oat(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ax(t,e){return t&&t!=="none"?t:e}var Dat=t=>{var{dataKey:e,name:n,stroke:i,fill:r,legendType:s,hide:c}=t;return[{inactive:c,dataKey:e,type:s,color:Ax(i,r),value:RL(n,e),payload:t}]};function Iat(t){var{dataKey:e,data:n,stroke:i,strokeWidth:r,fill:s,name:c,hide:a,unit:g}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:r,fill:s,dataKey:e,nameKey:void 0,name:RL(c,e),hide:a,type:t.tooltipType,color:Ax(i,s),unit:g}}}function zat(t){var{clipPathId:e,points:n,props:i}=t,{needClip:r,dot:s,dataKey:c}=i,a=Cc(i);return Z.createElement(nrt,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:c,baseProps:a,needClip:r,clipPathId:e})}function Lat(t){var{showLabels:e,children:n,points:i}=t,r=i.map(s=>{var c,a,g={x:(c=s.x)!==null&&c!==void 0?c:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return $m($m({},g),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:g,fill:void 0})});return Z.createElement(kit,{value:e?r:void 0},n)}function VO(t){var{points:e,baseLine:n,needClip:i,clipPathId:r,props:s}=t,{layout:c,type:a,stroke:g,connectNulls:y,isRange:x}=s,{id:E}=s,O=W3(s,Eat),I=Cc(O),F=qu(O);return Z.createElement(Z.Fragment,null,e?.length>1&&Z.createElement(sh,{clipPath:i?"url(#clipPath-".concat(r,")"):void 0},Z.createElement(D0,mp({},F,{id:E,points:e,connectNulls:y,type:a,baseLine:n,layout:c,stroke:"none",className:"recharts-area-area"})),g!=="none"&&Z.createElement(D0,mp({},I,{className:"recharts-area-curve",layout:c,type:a,connectNulls:y,fill:"none",points:e})),g!=="none"&&x&&Z.createElement(D0,mp({},I,{className:"recharts-area-curve",layout:c,type:a,connectNulls:y,fill:"none",points:n}))),Z.createElement(zat,{points:e,props:O,clipPathId:r}))}function Rat(t){var{alpha:e,baseLine:n,points:i,strokeWidth:r}=t,s=i[0].y,c=i[i.length-1].y;if(!Ga(s)||!Ga(c))return null;var a=e*Math.abs(s-c),g=Math.max(...i.map(y=>y.x||0));return Dn(n)?g=Math.max(n,g):n&&Array.isArray(n)&&n.length&&(g=Math.max(...n.map(y=>y.x||0),g)),Dn(g)?Z.createElement("rect",{x:0,y:s<c?s:s-a,width:g+(r?parseInt("".concat(r),10):1),height:Math.floor(a)}):null}function Nat(t){var{alpha:e,baseLine:n,points:i,strokeWidth:r}=t,s=i[0].x,c=i[i.length-1].x;if(!Ga(s)||!Ga(c))return null;var a=e*Math.abs(s-c),g=Math.max(...i.map(y=>y.y||0));return Dn(n)?g=Math.max(n,g):n&&Array.isArray(n)&&n.length&&(g=Math.max(...n.map(y=>y.y||0),g)),Dn(g)?Z.createElement("rect",{x:s<c?s:s-a,y:0,width:a,height:Math.floor(g+(r?parseInt("".concat(r),10):1))}):null}function Bat(t){var{alpha:e,layout:n,points:i,baseLine:r,strokeWidth:s}=t;return n==="vertical"?Z.createElement(Rat,{alpha:e,points:i,baseLine:r,strokeWidth:s}):Z.createElement(Nat,{alpha:e,points:i,baseLine:r,strokeWidth:s})}function jat(t){var{needClip:e,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:s}=t,{points:c,baseLine:a,isAnimationActive:g,animationBegin:y,animationDuration:x,animationEasing:E,onAnimationStart:O,onAnimationEnd:I}=i,F=JL(i,"recharts-area-"),[V,$]=Z.useState(!1),K=!V,Y=Z.useCallback(()=>{typeof I=="function"&&I(),$(!1)},[I]),W=Z.useCallback(()=>{typeof O=="function"&&O(),$(!0)},[O]),X=r.current,J=s.current;return Z.createElement(Lat,{showLabels:K,points:c},i.children,Z.createElement(QL,{animationId:F,begin:y,duration:x,isActive:g,easing:E,onAnimationEnd:Y,onAnimationStart:W,key:F},st=>{if(X){var ct=X.length/c.length,it=st===1?c:c.map((xt,wt)=>{var St=Math.floor(wt*ct);if(X[St]){var le=X[St];return $m($m({},xt),{},{x:Qc(le.x,xt.x,st),y:Qc(le.y,xt.y,st)})}return xt}),ut;return Dn(a)?ut=Qc(J,a,st):vo(a)||Pc(a)?ut=Qc(J,0,st):ut=a.map((xt,wt)=>{var St=Math.floor(wt*ct);if(Array.isArray(J)&&J[St]){var le=J[St];return $m($m({},xt),{},{x:Qc(le.x,xt.x,st),y:Qc(le.y,xt.y,st)})}return xt}),st>0&&(r.current=it,s.current=ut),Z.createElement(VO,{points:it,baseLine:ut,needClip:e,clipPathId:n,props:i})}return st>0&&(r.current=c,s.current=a),Z.createElement(sh,null,g&&Z.createElement("defs",null,Z.createElement("clipPath",{id:"animationClipPath-".concat(n)},Z.createElement(Bat,{alpha:st,points:c,baseLine:a,layout:i.layout,strokeWidth:i.strokeWidth}))),Z.createElement(sh,{clipPath:"url(#animationClipPath-".concat(n,")")},Z.createElement(VO,{points:c,baseLine:a,needClip:e,clipPathId:n,props:i})))}),Z.createElement(Iit,{label:i.label}))}function Fat(t){var{needClip:e,clipPathId:n,props:i}=t,r=Z.useRef(null),s=Z.useRef();return Z.createElement(jat,{needClip:e,clipPathId:n,props:i,previousPointsRef:r,previousBaselineRef:s})}class Uat extends Z.PureComponent{render(){var{hide:e,dot:n,points:i,className:r,top:s,left:c,needClip:a,xAxisId:g,yAxisId:y,width:x,height:E,id:O,baseLine:I,zIndex:F}=this.props;if(e)return null;var V=sa("recharts-area",r),$=O,{r:K,strokeWidth:Y}=bat(n),W=z3(n),X=K*2+Y;return Z.createElement(df,{zIndex:F},Z.createElement(sh,{className:V},a&&Z.createElement("defs",null,Z.createElement(wrt,{clipPathId:$,xAxisId:g,yAxisId:y}),!W&&Z.createElement("clipPath",{id:"clipPath-dots-".concat($)},Z.createElement("rect",{x:c-X/2,y:s-X/2,width:x+X,height:E+X}))),Z.createElement(Fat,{needClip:a,clipPathId:$,props:this.props})),Z.createElement(RO,{points:i,mainColor:Ax(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(I)&&Z.createElement(RO,{points:I,mainColor:Ax(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var X3={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!ug.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0,zIndex:xl.area};function Vat(t){var e,n=_u(t,X3),{activeDot:i,animationBegin:r,animationDuration:s,animationEasing:c,connectNulls:a,dot:g,fill:y,fillOpacity:x,hide:E,isAnimationActive:O,legendType:I,stroke:F,xAxisId:V,yAxisId:$}=n,K=W3(n,Aat),Y=sb(),W=c3(),{needClip:X}=j3(V,$),J=Hl(),{points:st,isRange:ct,baseLine:it}=(e=jn(pe=>Mat(pe,V,$,J,t.id)))!==null&&e!==void 0?e:{},ut=uM();if(Y!=="horizontal"&&Y!=="vertical"||ut==null||W!=="AreaChart"&&W!=="ComposedChart")return null;var{height:xt,width:wt,x:St,y:le}=ut;return!st||!st.length?null:Z.createElement(Uat,mp({},K,{activeDot:i,animationBegin:r,animationDuration:s,animationEasing:c,baseLine:it,connectNulls:a,dot:g,fill:y,fillOpacity:x,height:xt,hide:E,layout:Y,isAnimationActive:O,isRange:ct,legendType:I,needClip:X,points:st,stroke:F,width:wt,left:St,top:le,xAxisId:V,yAxisId:$}))}var $at=(t,e,n,i,r)=>{var s=n??e;if(Dn(s))return s;var c=t==="horizontal"?r:i,a=c.scale.domain();if(c.type==="number"){var g=Math.max(a[0],a[1]),y=Math.min(a[0],a[1]);return s==="dataMin"?y:s==="dataMax"||g<0?g:Math.max(Math.min(a[0],a[1]),0)}return s==="dataMin"?a[0]:s==="dataMax"?a[1]:a[0]};function qat(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:i},stackedData:r,layout:s,chartBaseValue:c,xAxis:a,yAxis:g,displayedData:y,dataStartIndex:x,xAxisTicks:E,yAxisTicks:O,bandSize:I}=t,F=r&&r.length,V=$at(s,c,n,a,g),$=s==="horizontal",K=!1,Y=y.map((X,J)=>{var st;F?st=r[x+J]:(st=bl(X,i),Array.isArray(st)?K=!0:st=[V,st]);var ct=st[1]==null||F&&!e&&bl(X,i)==null;return $?{x:CP({axis:a,ticks:E,bandSize:I,entry:X,index:J}),y:ct?null:g.scale(st[1]),value:st,payload:X}:{x:ct?null:a.scale(st[1]),y:CP({axis:g,ticks:O,bandSize:I,entry:X,index:J}),value:st,payload:X}}),W;return F||K?W=Y.map(X=>{var J=Array.isArray(X.value)?X.value[0]:null;return $?{x:X.x,y:J!=null&&X.y!=null?g.scale(J):null,payload:X.payload}:{x:J!=null?a.scale(J):null,y:X.y,payload:X.payload}}):W=$?g.scale(V):a.scale(V),{points:Y,baseLine:W,isRange:K}}function Hat(t){var e=_u(t,X3),n=Hl();return Z.createElement(Uit,{id:e.id,type:"area"},i=>Z.createElement(Z.Fragment,null,Z.createElement(Nit,{legendPayload:Dat(e)}),Z.createElement(Rit,{fn:Iat,args:e}),Z.createElement(Git,{type:"area",id:i,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:gY(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),Z.createElement(Vat,mp({},e,{id:i}))))}var mM=Z.memo(Hat);mM.displayName="Area";var Zat=["dangerouslySetInnerHTML","ticks"],Gat=["id"],Yat=["domain"],Wat=["domain"];function h2(){return h2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},h2.apply(null,arguments)}function Cx(t,e){if(t==null)return{};var n,i,r=Xat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xat(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Kat(t){var e=Ks();return Z.useLayoutEffect(()=>(e(ort(t)),()=>{e(lrt(t))}),[t,e]),null}var Qat=t=>{var{xAxisId:e,className:n}=t,i=jn(BL),r=Hl(),s="xAxis",c=jn($=>mg($,s,e,r)),a=jn($=>FN($,s,e,r)),g=jn($=>ltt($,e)),y=jn($=>ptt($,e)),x=jn($=>aN($,e));if(g==null||y==null||x==null)return null;var{dangerouslySetInnerHTML:E,ticks:O}=t,I=Cx(t,Zat),{id:F}=x,V=Cx(x,Gat);return Z.createElement(dM,h2({},I,V,{scale:c,x:y.x,y:y.y,width:g.width,height:g.height,className:sa("recharts-".concat(s," ").concat(s),n),viewBox:i,ticks:a,axisType:s}))},Jat={allowDataOverflow:lu.allowDataOverflow,allowDecimals:lu.allowDecimals,allowDuplicatedCategory:lu.allowDuplicatedCategory,height:lu.height,hide:!1,mirror:lu.mirror,orientation:lu.orientation,padding:lu.padding,reversed:lu.reversed,scale:lu.scale,tickCount:lu.tickCount,type:lu.type,xAxisId:0},tst=t=>{var e,n,i,r,s,c=_u(t,Jat);return Z.createElement(Z.Fragment,null,Z.createElement(Kat,{interval:(e=c.interval)!==null&&e!==void 0?e:"preserveEnd",id:c.xAxisId,scale:c.scale,type:c.type,padding:c.padding,allowDataOverflow:c.allowDataOverflow,domain:c.domain,dataKey:c.dataKey,allowDuplicatedCategory:c.allowDuplicatedCategory,allowDecimals:c.allowDecimals,tickCount:c.tickCount,includeHidden:(n=c.includeHidden)!==null&&n!==void 0?n:!1,reversed:c.reversed,ticks:c.ticks,height:c.height,orientation:c.orientation,mirror:c.mirror,hide:c.hide,unit:c.unit,name:c.name,angle:(i=c.angle)!==null&&i!==void 0?i:0,minTickGap:(r=c.minTickGap)!==null&&r!==void 0?r:5,tick:(s=c.tick)!==null&&s!==void 0?s:!0,tickFormatter:c.tickFormatter}),Z.createElement(Qat,c))},est=(t,e)=>{var{domain:n}=t,i=Cx(t,Yat),{domain:r}=e,s=Cx(e,Wat);return ng(i,s)?Array.isArray(n)&&n.length===2&&Array.isArray(r)&&r.length===2?n[0]===r[0]&&n[1]===r[1]:ng({domain:n},{domain:r}):!1},gM=Z.memo(tst,est);gM.displayName="XAxis";var nst=["dangerouslySetInnerHTML","ticks"],ist=["id"],rst=["domain"],ast=["domain"];function f2(){return f2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},f2.apply(null,arguments)}function Px(t,e){if(t==null)return{};var n,i,r=sst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sst(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function ost(t){var e=Ks();return Z.useLayoutEffect(()=>(e(urt(t)),()=>{e(crt(t))}),[t,e]),null}var lst=t=>{var{yAxisId:e,className:n,width:i,label:r}=t,s=Z.useRef(null),c=Z.useRef(null),a=jn(BL),g=Hl(),y=Ks(),x="yAxis",E=jn(J=>mg(J,x,e,g)),O=jn(J=>ytt(J,e)),I=jn(J=>gtt(J,e)),F=jn(J=>FN(J,x,e,g)),V=jn(J=>sN(J,e));if(Z.useLayoutEffect(()=>{if(!(i!=="auto"||!O||lM(r)||Z.isValidElement(r)||V==null)){var J=s.current;if(J){var st=J.getCalculatedWidth();Math.round(O.width)!==Math.round(st)&&y(hrt({id:e,width:st}))}}},[F,O,y,r,e,i,V]),O==null||I==null||V==null)return null;var{dangerouslySetInnerHTML:$,ticks:K}=t,Y=Px(t,nst),{id:W}=V,X=Px(V,ist);return Z.createElement(dM,f2({},Y,X,{ref:s,labelRef:c,scale:E,x:I.x,y:I.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:O.width,height:O.height,className:sa("recharts-".concat(x," ").concat(x),n),viewBox:a,ticks:F,axisType:x}))},ust={allowDataOverflow:uu.allowDataOverflow,allowDecimals:uu.allowDecimals,allowDuplicatedCategory:uu.allowDuplicatedCategory,hide:!1,mirror:uu.mirror,orientation:uu.orientation,padding:uu.padding,reversed:uu.reversed,scale:uu.scale,tickCount:uu.tickCount,type:uu.type,width:uu.width,yAxisId:0},cst=t=>{var e,n,i,r,s,c=_u(t,ust);return Z.createElement(Z.Fragment,null,Z.createElement(ost,{interval:(e=c.interval)!==null&&e!==void 0?e:"preserveEnd",id:c.yAxisId,scale:c.scale,type:c.type,domain:c.domain,allowDataOverflow:c.allowDataOverflow,dataKey:c.dataKey,allowDuplicatedCategory:c.allowDuplicatedCategory,allowDecimals:c.allowDecimals,tickCount:c.tickCount,padding:c.padding,includeHidden:(n=c.includeHidden)!==null&&n!==void 0?n:!1,reversed:c.reversed,ticks:c.ticks,width:c.width,orientation:c.orientation,mirror:c.mirror,hide:c.hide,unit:c.unit,name:c.name,angle:(i=c.angle)!==null&&i!==void 0?i:0,minTickGap:(r=c.minTickGap)!==null&&r!==void 0?r:5,tick:(s=c.tick)!==null&&s!==void 0?s:!0,tickFormatter:c.tickFormatter}),Z.createElement(lst,c))},hst=(t,e)=>{var{domain:n}=t,i=Px(t,rst),{domain:r}=e,s=Px(e,ast);return ng(i,s)?Array.isArray(n)&&n.length===2&&Array.isArray(r)&&r.length===2?n[0]===r[0]&&n[1]===r[1]:ng({domain:n},{domain:r}):!1},yM=Z.memo(cst,hst);yM.displayName="YAxis";var Xw={exports:{}},Kw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $O;function fst(){if($O)return Kw;$O=1;var t=ig();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,r=t.useRef,s=t.useEffect,c=t.useMemo,a=t.useDebugValue;return Kw.useSyncExternalStoreWithSelector=function(g,y,x,E,O){var I=r(null);if(I.current===null){var F={hasValue:!1,value:null};I.current=F}else F=I.current;I=c(function(){function $(J){if(!K){if(K=!0,Y=J,J=E(J),O!==void 0&&F.hasValue){var st=F.value;if(O(st,J))return W=st}return W=J}if(st=W,n(Y,J))return st;var ct=E(J);return O!==void 0&&O(st,ct)?(Y=J,st):(Y=J,W=ct)}var K=!1,Y,W,X=x===void 0?null:x;return[function(){return $(y())},X===null?void 0:function(){return $(X())}]},[y,x,E,O]);var V=i(g,I[0],I[1]);return s(function(){F.hasValue=!0,F.value=V},[V]),a(V),V},Kw}var qO;function dst(){return qO||(qO=1,Xw.exports=fst()),Xw.exports}dst();function pst(t){t()}function mst(){let t=null,e=null;return{clear(){t=null,e=null},notify(){pst(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!i||t===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var HO={notify(){},get:()=>[]};function gst(t,e){let n,i=HO,r=0,s=!1;function c(V){x();const $=i.subscribe(V);let K=!1;return()=>{K||(K=!0,$(),E())}}function a(){i.notify()}function g(){F.onStateChange&&F.onStateChange()}function y(){return s}function x(){r++,n||(n=t.subscribe(g),i=mst())}function E(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=HO)}function O(){s||(s=!0,x())}function I(){s&&(s=!1,E())}const F={addNestedSub:c,notifyNestedSubs:a,handleChangeWrapper:g,isSubscribed:y,trySubscribe:O,tryUnsubscribe:I,getListeners:()=>i};return F}var yst=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_st=yst(),vst=()=>typeof navigator<"u"&&navigator.product==="ReactNative",xst=vst(),bst=()=>_st||xst?Z.useLayoutEffect:Z.useEffect,wst=bst(),Sst=Symbol.for("react-redux-context"),Tst=typeof globalThis<"u"?globalThis:{};function Mst(){if(!Z.createContext)return{};const t=Tst[Sst]??=new Map;let e=t.get(Z.createContext);return e||(e=Z.createContext(null),t.set(Z.createContext,e)),e}var Est=Mst();function Ast(t){const{children:e,context:n,serverState:i,store:r}=t,s=Z.useMemo(()=>{const g=gst(r);return{store:r,subscription:g,getServerState:i?()=>i:void 0}},[r,i]),c=Z.useMemo(()=>r.getState(),[r]);wst(()=>{const{subscription:g}=s;return g.onStateChange=g.notifyNestedSubs,g.trySubscribe(),c!==r.getState()&&g.notifyNestedSubs(),()=>{g.tryUnsubscribe(),g.onStateChange=void 0}},[s,c]);const a=n||Est;return Z.createElement(a.Provider,{value:s},e)}var Cst=Ast,Pst=(t,e)=>e,_M=ke([Pst,Zr,iN,Bs,r3,ff,Pet,xo],Ret),vM=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,i=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/i)}},K3=Hu("mouseClick"),Q3=M_();Q3.startListening({actionCreator:K3,effect:(t,e)=>{var n=t.payload,i=_M(e.getState(),vM(n));i?.activeIndex!=null&&e.dispatch(Ptt({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var d2=Hu("mouseMove"),J3=M_();J3.startListening({actionCreator:d2,effect:(t,e)=>{var n=t.payload,i=e.getState(),r=QT(i,i.tooltip.settings.shared),s=_M(i,vM(n));r==="axis"&&(s?.activeIndex!=null?e.dispatch(WN({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(YN()))}});var ZO={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},tB=ql({name:"rootProps",initialState:ZO,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:ZO.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue}}}),kst=tB.reducer,{updateOptions:Ost}=tB.actions,eB=ql({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Kot}=eB.actions,Dst=eB.reducer,nB=Hu("keyDown"),iB=Hu("focus"),xM=M_();xM.startListening({actionCreator:nB,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var c=Number(JT(r,yg(n))),a=ff(n);if(s==="Enter"){var g=wx(n,"axis","hover",String(r.index));e.dispatch(r2({active:!r.active,activeIndex:r.index,activeDataKey:r.dataKey,activeCoordinate:g}));return}var y=btt(n),x=y==="left-to-right"?1:-1,E=s==="ArrowRight"?1:-1,O=c+E*x;if(!(a==null||O>=a.length||O<0)){var I=wx(n,"axis","hover",String(O));e.dispatch(r2({active:!0,activeIndex:O.toString(),activeDataKey:void 0,activeCoordinate:I}))}}}}});xM.startListening({actionCreator:iB,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var s="0",c=wx(n,"axis","hover",String(s));e.dispatch(r2({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:c}))}}}});var Fu=Hu("externalEvent"),rB=M_();rB.startListening({actionCreator:Fu,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),i={activeCoordinate:det(n),activeDataKey:het(n),activeIndex:c_(n),activeLabel:o3(n),activeTooltipIndex:c_(n),isTooltipActive:pet(n)};t.payload.handler(i,t.payload.reactEvent)}}});var Ist=ke([gg],t=>t.tooltipItemPayloads),zst=ke([Ist,L_,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,i)=>{var r=t.find(a=>a.settings.dataKey===i);if(r!=null){var{positions:s}=r;if(s!=null){var c=e(s,n);return c}}}),aB=Hu("touchMove"),sB=M_();sB.startListening({actionCreator:aB,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var i=e.getState(),r=QT(i,i.tooltip.settings.shared);if(r==="axis"){var s=_M(i,vM({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(WN({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(r==="item"){var c,a=n.touches[0];if(document.elementFromPoint==null)return;var g=document.elementFromPoint(a.clientX,a.clientY);if(!g||!g.getAttribute)return;var y=g.getAttribute(SY),x=(c=g.getAttribute(TY))!==null&&c!==void 0?c:void 0,E=zst(e.getState(),y,x);e.dispatch(Ctt({activeDataKey:x,activeIndex:y,activeCoordinate:E}))}}}});var Lst=lL({brush:Trt,cartesianAxis:frt,chartData:pnt,errorBars:brt,graphicalItems:Zit,layout:sY,legend:iW,options:unt,polarAxis:Lit,polarOptions:Dst,referenceElements:Ort,rootProps:kst,tooltip:ktt,zIndex:Xet}),Rst=function(e){return OG({reducer:Lst,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([Q3.middleware,J3.middleware,xM.middleware,rB.middleware,sB.middleware]),enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(xL({type:"raf"}))},devTools:ug.devToolsEnabled})};function Nst(t){var{preloadedState:e,children:n,reduxStoreName:i}=t,r=Hl(),s=Z.useRef(null);if(r)return n;s.current==null&&(s.current=Rst(e));var c=nT;return Z.createElement(Cst,{context:c,store:s.current},n)}function Bst(t){var{layout:e,margin:n}=t,i=Ks(),r=Hl();return Z.useEffect(()=>{r||(i(iY(e)),i(nY(n)))},[i,r,e,n]),null}function jst(t){var e=Ks();return Z.useEffect(()=>{e(Ost(t))},[e,t]),null}function GO(t){var{zIndex:e,isPanorama:n}=t,i=n?"recharts-zindex-panorama-":"recharts-zindex-",r=L3("".concat(i).concat(e)),s=Ks();return Z.useLayoutEffect(()=>(s(Yet({zIndex:e,elementId:r,isPanorama:n})),()=>{s(Wet({zIndex:e,isPanorama:n}))}),[s,e,r,n]),Z.createElement("g",{id:r})}function YO(t){var{children:e,isPanorama:n}=t,i=jn(Bet);if(!i||i.length===0)return e;var r=i.filter(c=>c<0),s=i.filter(c=>c>0);return Z.createElement(Z.Fragment,null,r.map(c=>Z.createElement(GO,{key:c,zIndex:c,isPanorama:n})),e,s.map(c=>Z.createElement(GO,{key:c,zIndex:c,isPanorama:n})))}var Fst=["children"];function Ust(t,e){if(t==null)return{};var n,i,r=Vst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vst(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function kx(){return kx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},kx.apply(null,arguments)}var $st={width:"100%",height:"100%",display:"block"},qst=Z.forwardRef((t,e)=>{var n=HL(),i=ZL(),r=YL();if(!lh(n)||!lh(i))return null;var{children:s,otherAttributes:c,title:a,desc:g}=t,y,x;return c!=null&&(typeof c.tabIndex=="number"?y=c.tabIndex:y=r?0:void 0,typeof c.role=="string"?x=c.role:x=r?"application":void 0),Z.createElement(Pz,kx({},c,{title:a,desc:g,role:x,tabIndex:y,width:n,height:i,style:$st,ref:e}),s)}),Hst=t=>{var{children:e}=t,n=jn(rb);if(!n)return null;var{width:i,height:r,y:s,x:c}=n;return Z.createElement(Pz,{width:i,height:r,x:c,y:s},e)},WO=Z.forwardRef((t,e)=>{var{children:n}=t,i=Ust(t,Fst),r=Hl();return r?Z.createElement(Hst,null,Z.createElement(YO,{isPanorama:!0},n)):Z.createElement(qst,kx({ref:e},i),Z.createElement(YO,{isPanorama:!1},n))});function Zst(){var t=Ks(),[e,n]=Z.useState(null),i=jn(wY);return Z.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),s=r.width/e.offsetWidth;Ga(s)&&s!==i&&t(aY(s))}},[e,t,i]),n}function XO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Gst(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XO(Object(n),!0).forEach(function(i){Yst(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Yst(t,e,n){return(e=Wst(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wst(t){var e=Xst(t,"string");return typeof e=="symbol"?e:e+""}function Xst(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sp(){return Sp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Sp.apply(null,arguments)}var Kst=()=>(Snt(),null);function Ox(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Qst=Z.forwardRef((t,e)=>{var n,i,r=Z.useRef(null),[s,c]=Z.useState({containerWidth:Ox((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:Ox((i=t.style)===null||i===void 0?void 0:i.height)}),a=Z.useCallback((y,x)=>{c(E=>{var O=Math.round(y),I=Math.round(x);return E.containerWidth===O&&E.containerHeight===I?E:{containerWidth:O,containerHeight:I}})},[]),g=Z.useCallback(y=>{if(typeof e=="function"&&e(y),y!=null&&typeof ResizeObserver<"u"){var{width:x,height:E}=y.getBoundingClientRect();a(x,E);var O=F=>{var{width:V,height:$}=F[0].contentRect;a(V,$)},I=new ResizeObserver(O);I.observe(y),r.current=I}},[e,a]);return Z.useEffect(()=>()=>{var y=r.current;y?.disconnect()},[a]),Z.createElement(Z.Fragment,null,Z.createElement(ob,{width:s.containerWidth,height:s.containerHeight}),Z.createElement("div",Sp({ref:g},t)))}),Jst=Z.forwardRef((t,e)=>{var{width:n,height:i}=t,[r,s]=Z.useState({containerWidth:Ox(n),containerHeight:Ox(i)}),c=Z.useCallback((g,y)=>{s(x=>{var E=Math.round(g),O=Math.round(y);return x.containerWidth===E&&x.containerHeight===O?x:{containerWidth:E,containerHeight:O}})},[]),a=Z.useCallback(g=>{if(typeof e=="function"&&e(g),g!=null){var{width:y,height:x}=g.getBoundingClientRect();c(y,x)}},[e,c]);return Z.createElement(Z.Fragment,null,Z.createElement(ob,{width:r.containerWidth,height:r.containerHeight}),Z.createElement("div",Sp({ref:a},t)))}),tot=Z.forwardRef((t,e)=>{var{width:n,height:i}=t;return Z.createElement(Z.Fragment,null,Z.createElement(ob,{width:n,height:i}),Z.createElement("div",Sp({ref:e},t)))}),eot=Z.forwardRef((t,e)=>{var{width:n,height:i}=t;return Kh(n)||Kh(i)?Z.createElement(Jst,Sp({},t,{ref:e})):Z.createElement(tot,Sp({},t,{ref:e}))});function not(t){return t===!0?Qst:eot}var iot=Z.forwardRef((t,e)=>{var{children:n,className:i,height:r,onClick:s,onContextMenu:c,onDoubleClick:a,onMouseDown:g,onMouseEnter:y,onMouseLeave:x,onMouseMove:E,onMouseUp:O,onTouchEnd:I,onTouchMove:F,onTouchStart:V,style:$,width:K,responsive:Y,dispatchTouchEvents:W=!0}=t,X=Z.useRef(null),J=Ks(),[st,ct]=Z.useState(null),[it,ut]=Z.useState(null),xt=Zst(),wt=lT(),St=wt?.width>0?wt.width:K,le=wt?.height>0?wt.height:r,pe=Z.useCallback(Gt=>{xt(Gt),typeof e=="function"&&e(Gt),ct(Gt),ut(Gt),Gt!=null&&(X.current=Gt)},[xt,e,ct,ut]),Te=Z.useCallback(Gt=>{J(K3(Gt)),J(Fu({handler:s,reactEvent:Gt}))},[J,s]),Nt=Z.useCallback(Gt=>{J(d2(Gt)),J(Fu({handler:y,reactEvent:Gt}))},[J,y]),Ct=Z.useCallback(Gt=>{J(YN()),J(Fu({handler:x,reactEvent:Gt}))},[J,x]),Tt=Z.useCallback(Gt=>{J(d2(Gt)),J(Fu({handler:E,reactEvent:Gt}))},[J,E]),Bt=Z.useCallback(()=>{J(iB())},[J]),$t=Z.useCallback(Gt=>{J(nB(Gt.key))},[J]),ft=Z.useCallback(Gt=>{J(Fu({handler:c,reactEvent:Gt}))},[J,c]),Mt=Z.useCallback(Gt=>{J(Fu({handler:a,reactEvent:Gt}))},[J,a]),Lt=Z.useCallback(Gt=>{J(Fu({handler:g,reactEvent:Gt}))},[J,g]),Xt=Z.useCallback(Gt=>{J(Fu({handler:O,reactEvent:Gt}))},[J,O]),re=Z.useCallback(Gt=>{J(Fu({handler:V,reactEvent:Gt}))},[J,V]),ce=Z.useCallback(Gt=>{W&&J(aB(Gt)),J(Fu({handler:F,reactEvent:Gt}))},[J,W,F]),Me=Z.useCallback(Gt=>{J(Fu({handler:I,reactEvent:Gt}))},[J,I]),Ne=not(Y);return Z.createElement(g3.Provider,{value:st},Z.createElement(N7.Provider,{value:it},Z.createElement(Ne,{width:St??$?.width,height:le??$?.height,className:sa("recharts-wrapper",i),style:Gst({position:"relative",cursor:"default",width:St,height:le},$),onClick:Te,onContextMenu:ft,onDoubleClick:Mt,onFocus:Bt,onKeyDown:$t,onMouseDown:Lt,onMouseEnter:Nt,onMouseLeave:Ct,onMouseMove:Tt,onMouseUp:Xt,onTouchEnd:Me,onTouchMove:ce,onTouchStart:re,ref:pe},Z.createElement(Kst,null),n)))}),rot=["width","height","responsive","children","className","style","compact","title","desc"];function aot(t,e){if(t==null)return{};var n,i,r=sot(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sot(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var oot=Z.forwardRef((t,e)=>{var{width:n,height:i,responsive:r,children:s,className:c,style:a,compact:g,title:y,desc:x}=t,E=aot(t,rot),O=Cc(E);return g?Z.createElement(Z.Fragment,null,Z.createElement(ob,{width:n,height:i}),Z.createElement(WO,{otherAttributes:O,title:y,desc:x},s)):Z.createElement(iot,{className:c,style:a,width:n,height:i,responsive:r??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},Z.createElement(WO,{otherAttributes:O,title:y,desc:x,ref:e},Z.createElement(Irt,null,s)))});function p2(){return p2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},p2.apply(null,arguments)}var lot={top:5,right:5,bottom:5,left:5},uot={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:lot,reverseStackOrder:!1,syncMethod:"index",responsive:!1},cot=Z.forwardRef(function(e,n){var i,r=_u(e.categoricalChartProps,uot),{chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:a,tooltipPayloadSearcher:g,categoricalChartProps:y}=e,x={chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:a,tooltipPayloadSearcher:g,eventEmitter:void 0};return Z.createElement(Nst,{preloadedState:{options:x},reduxStoreName:(i=y.id)!==null&&i!==void 0?i:s},Z.createElement(Srt,{chartData:y.data}),Z.createElement(Bst,{layout:r.layout,margin:r.margin}),Z.createElement(jst,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className}),Z.createElement(oot,p2({},r,{ref:n})))}),hot=["axis"],oB=Z.forwardRef((t,e)=>Z.createElement(cot,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:hot,tooltipPayloadSearcher:ont,categoricalChartProps:t,ref:e}));const vs={11:{name:"",districts:{11110:"",11140:"",11170:"",11200:"",11215:"",11230:"",11260:"",11290:"",11305:"",11320:"",11350:"",11380:"",11410:"",11440:"",11470:"",11500:"",11530:"",11545:"",11560:"",11590:"",11620:"",11650:"",11680:"",11710:"",11740:""}},26:{name:"",districts:{26110:"",26140:"",26170:"",26200:"",26230:"",26260:"",26290:"",26320:"",26350:"",26380:"",26410:"",26440:"",26470:"",26500:"",26530:"",26710:""}},27:{name:"",districts:{27110:"",27140:"",27170:"",27200:"",27230:"",27260:"",27290:"",27710:"",27720:""}},28:{name:"",districts:{28110:"",28140:"",28177:"",28185:"",28200:"",28237:"",28245:"",28260:"",28710:"",28720:""}},29:{name:"",districts:{29110:"",29140:"",29155:"",29170:"",29200:""}},30:{name:"",districts:{30110:"",30140:"",30170:"",30200:"",30230:""}},31:{name:"",districts:{31110:"",31140:"",31170:"",31200:"",31710:""}},36:{name:"",districts:{36110:""}},41:{name:"",districts:{41111:" ",41113:" ",41115:" ",41117:" ",41131:" ",41133:" ",41135:" ",41150:"",41171:" ",41173:" ",41192:" ",41194:" ",41196:" ",41210:"",41220:"",41250:"",41271:" ",41273:" ",41281:" ",41285:" ",41287:" ",41290:"",41310:"",41360:"",41370:"",41390:"",41410:"",41430:"",41450:"",41461:" ",41463:" ",41465:" ",41480:"",41500:"",41550:"",41570:"",41590:"",41610:"",41630:"",41650:"",41670:"",41800:"",41820:"",41830:""}},43:{name:"",districts:{43111:" ",43112:" ",43113:" ",43114:" ",43130:"",43150:"",43720:"",43730:"",43740:"",43745:"",43750:"",43760:"",43770:"",43800:""}},44:{name:"",districts:{44131:" ",44133:" ",44150:"",44180:"",44200:"",44210:"",44230:"",44250:"",44270:"",44710:"",44760:"",44770:"",44790:"",44800:"",44810:"",44825:""}},46:{name:"",districts:{46110:"",46130:"",46150:"",46170:"",46230:"",46710:"",46720:"",46730:"",46770:"",46780:"",46790:"",46800:"",46810:"",46820:"",46830:"",46840:"",46860:"",46870:"",46880:"",46890:"",46900:"",46910:""}},47:{name:"",districts:{47111:" ",47113:" ",47130:"",47150:"",47170:"",47190:"",47210:"",47230:"",47250:"",47280:"",47290:"",47730:"",47750:"",47760:"",47770:"",47820:"",47830:"",47840:"",47850:"",47900:"",47920:"",47930:"",47940:""}},48:{name:"",districts:{48121:" ",48123:" ",48125:" ",48127:" ",48129:" ",48170:"",48220:"",48240:"",48250:"",48270:"",48310:"",48330:"",48720:"",48730:"",48740:"",48820:"",48840:"",48850:"",48860:"",48870:"",48880:"",48890:""}},50:{name:"",districts:{50110:"",50130:""}},51:{name:"",districts:{51110:"",51130:"",51150:"",51170:"",51190:"",51210:"",51230:"",51720:"",51730:"",51750:"",51760:"",51770:"",51780:"",51790:"",51800:"",51810:"",51820:"",51830:""}},52:{name:"",districts:{52111:" ",52113:" ",52130:"",52140:"",52180:"",52190:"",52210:"",52710:"",52720:"",52730:"",52740:"",52750:"",52770:"",52790:"",52800:""}}},fot=t=>t===0?"0":`${t/1e6}MWh`,KO=[" ()","1","2","3","4","5","6","7","8","9","10","11","12"];function dot(){const t="2020-01",e=new Date,n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=`${n}-${i}`,[s,c]=Z.useState("11"),[a,g]=Z.useState(r),[y,x]=Z.useState([]),[E,O]=Z.useState([]),[I,F]=Z.useState(0),[V,$]=Z.useState(""),K=async()=>{if(!vs[s]){x([]),O([]),F(0);return}const X=parseInt(a.split("-")[0],10),J=X*100+1,st=X*100+12;try{const ct=await fetch(`/api/energy?cityId=${s}`);if(!ct.ok)throw new Error("API  .");const xt=(await ct.json()).items.filter(Mt=>!Mt.cityId||!Mt.yearMonth?!1:String(Mt.cityId)===String(s)&&Mt.yearMonth>=J&&Mt.yearMonth<=st),wt=new Array(12).fill(0),St=["1","2","3","4","5","6","7","8","9","10","11","12"],le=new Map,pe=new Array(12).fill(0),Te=vs[s].districts;Object.entries(Te).forEach(([Mt,Lt])=>{le.set(Mt,{gu:Lt,"1":"-","2":"-","3":"-","4":"-","5":"-","6":"-","7":"-","8":"-","9":"-","10":"-","11":"-","12":"-"})});const Nt=V!=="";xt.forEach(Mt=>{const Lt=String(Mt.countyId).trim(),Xt=Mt.yearMonth%100,re=Xt-1,ce=`${Xt}`,Me=Mt.useElect||0,Ne=Mt.useGas||0;let Gt;V===""?Gt=Me:V===""?Gt=Ne:Gt=void 0,Nt&&Gt!==void 0&&re>=0&&re<12&&(wt[re]+=Gt);const Ce=V===""?Me:Ne;if(Gt===void 0&&V!=="")return;const Ee=Math.round(Ce/1e3);if(le.has(Lt)){const de=le.get(Lt);if(!isNaN(Ee)&&Ee>0){const on=de[ce]==="-"?0:de[ce];de[ce]=on+Ee,le.set(Lt,de),re>=0&&re<12&&(pe[re]+=Ee)}}});const Ct=Math.max(...wt),Tt=Nt?Math.ceil(Ct*1.1/1e6)*1e6:1e6,Bt=St.map((Mt,Lt)=>({name:Mt,:wt[Lt]}));O(Bt),F(Tt);const ft={gu:`${vs[s]?vs[s].name:""} `};St.forEach((Mt,Lt)=>{const Xt=pe[Lt];ft[Mt]=Xt>0?Xt:"-"}),x([ft,...Array.from(le.values())])}catch(ct){console.error("API   :",ct),x([]),O([]),F(0)}},Y=X=>{c(X.target.value)},W=()=>vt.jsxs("table",{className:"stats-table",children:[vt.jsx("thead",{children:vt.jsx("tr",{children:KO.map(X=>vt.jsx("th",{children:X},X))})}),vt.jsx("tbody",{children:y.map((X,J)=>vt.jsxs("tr",{style:{fontWeight:J===0?"bold":"normal",backgroundColor:J===0?"#f9f9f9":"transparent"},children:[vt.jsx("td",{children:X.gu}),KO.slice(1).map(st=>vt.jsx("td",{children:typeof X[st]=="number"?X[st].toLocaleString():X[st]},st))]},X.gu))})]});return vt.jsxs("div",{className:"stats-sidebar-layout",children:[vt.jsxs("aside",{className:"stats-sidebar",children:[vt.jsxs("div",{className:"sidebar-section",children:[vt.jsx("h4",{children:"  "}),vt.jsx("input",{type:"month",className:"stats-input",min:t,max:r,value:a,onChange:X=>g(X.target.value)})]}),vt.jsxs("div",{className:"sidebar-section",children:[vt.jsx("h4",{children:" "}),vt.jsx("label",{children:""}),vt.jsxs("select",{className:"stats-input",value:V,onChange:X=>$(X.target.value),children:[vt.jsx("option",{children:""}),vt.jsx("option",{value:"",children:"(MWh)"}),vt.jsx("option",{value:"",children:"(MWh)"})]}),vt.jsx("label",{children:""}),vt.jsx("select",{className:"stats-input",value:s,onChange:Y,children:Object.keys(vs).map(X=>vt.jsx("option",{value:X,children:vs[X].name},X))})]}),vt.jsx("div",{className:"sidebar-section",children:vt.jsx("button",{className:"stats-button-primary",onClick:K,children:" "})})]}),vt.jsxs("main",{className:"main-content",children:[vt.jsx("h2",{children:"  "}),vt.jsxs("div",{className:"chart-section",children:[vt.jsx("h3",{children:"   "}),vt.jsxs("p",{children:[vs[s]?vs[s].name:"..."," ",a.split("-")[0]," ",V===" "?"    .":V+"   "]}),vt.jsx("div",{className:"chart-container",children:vt.jsx(VL,{width:"100%",height:300,children:vt.jsxs(oB,{data:E,margin:{top:30,right:30,left:50,bottom:5},children:[vt.jsx(pM,{strokeDasharray:"3 3"}),vt.jsx(gM,{dataKey:"name",scale:"point",axisLine:!1,tickLine:!1,tick:{fontSize:13}}),vt.jsx(yM,{axisLine:!1,tickLine:!1,tickFormatter:fot,domain:[0,I],tickCount:5,tick:{fontSize:13},label:{value:"(MWh)",position:"top",offset:17,fontWeight:"bold",fontSize:14,fill:"#333"}}),vt.jsx(v3,{formatter:X=>[`${(X/1e3).toLocaleString()} kWh`,""]}),vt.jsx(mM,{type:"monotone",dataKey:"",stroke:"#ffbb40",fill:"#ffd54f",strokeWidth:2,activeDot:{r:6},dot:{r:4,fill:"#ffbb40"}})]})})})]}),vt.jsxs("div",{className:"table-section",children:[vt.jsx("h3",{children:vs[s]?`${vs[s].name} ${a.split("-")[0]}   `:"   "}),vt.jsx("p",{children:"      ."}),vt.jsx("div",{className:"stats-table-container",children:W()})]})]})]})}const QO=[" ()","1","2","3","4","5","6","7","8","9","10","11","12"];function pot(){const t="2020-01",e=new Date,n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=`${n}-${i}`,[s,c]=Z.useState("11"),[a,g]=Z.useState(r),[y,x]=Z.useState([]),[E,O]=Z.useState([]),[I,F]=Z.useState(0),[V,$]=Z.useState(""),K=async()=>{if(!vs[s]){x([]),O([]),F(0);return}const X=parseInt(a.split("-")[0],10),J=X*100+1,st=X*100+12,ct=.4541,it=.204;try{const ut=await fetch(`/api/energy?cityId=${s}`);if(!ut.ok)throw new Error("API  .");const St=(await ut.json()).items.filter(Xt=>!Xt.cityId||!Xt.yearMonth?!1:String(Xt.cityId)===String(s)&&Xt.yearMonth>=J&&Xt.yearMonth<=st),le=new Array(12).fill(0),pe=["1","2","3","4","5","6","7","8","9","10","11","12"],Te=new Map,Nt=new Array(12).fill(0),Ct=vs[s].districts;Object.entries(Ct).forEach(([Xt,re])=>{Te.set(Xt,{gu:re,"1":"-","2":"-","3":"-","4":"-","5":"-","6":"-","7":"-","8":"-","9":"-","10":"-","11":"-","12":"-"})}),St.forEach(Xt=>{const re=String(Xt.countyId).trim(),ce=Xt.yearMonth%100,Me=ce-1,Ne=`${ce}`,Gt=Xt.useElect||0,Ce=Xt.useGas||0;let Ee=0;if(V==="")Ee=Gt/1e6*ct;else if(V==="")Ee=Ce/1e6*it;else if(V===""){const on=Gt/1e6*ct,Be=Ce/1e6*it;Ee=on+Be}if(Ee>0&&Me>=0&&Me<12&&(le[Me]+=Ee),Ee===0&&V!=="")return;const de=parseFloat(Ee.toFixed(3));if(Te.has(re)){const on=Te.get(re);if(!isNaN(de)){const Be=on[Ne]==="-"?0:on[Ne];on[Ne]=Be+de,Te.set(re,on),Me>=0&&Me<12&&(Nt[Me]+=de)}}});const Tt=Math.max(...le),Bt=Tt>0?Math.ceil(Tt*1.1*100)/100:1e3,$t=pe.map((Xt,re)=>({name:Xt,:parseFloat(le[re].toFixed(2))}));O($t),F(Bt);const ft=Array.from(Te.values()).map(Xt=>{const re={...Xt};return pe.forEach(ce=>{typeof re[ce]=="number"&&re[ce]>0&&(re[ce]=parseFloat(re[ce].toFixed(3)))}),re}),Lt={gu:`${vs[s]?vs[s].name:""} `};pe.forEach((Xt,re)=>{const ce=Nt[re];Lt[Xt]=ce>0?parseFloat(ce.toFixed(3)):"-"}),x([Lt,...ft])}catch(ut){console.error("API   :",ut),x([]),O([]),F(0)}},Y=X=>{c(X.target.value)},W=()=>vt.jsxs("table",{className:"stats-table",children:[vt.jsx("thead",{children:vt.jsx("tr",{children:QO.map(X=>vt.jsx("th",{children:X},X))})}),vt.jsx("tbody",{children:y.map((X,J)=>vt.jsxs("tr",{style:{fontWeight:J===0?"bold":"normal",backgroundColor:J===0?"#f9f9f9":"transparent"},children:[vt.jsx("td",{children:X.gu}),QO.slice(1).map(st=>vt.jsx("td",{children:typeof X[st]=="number"?X[st].toLocaleString():X[st]},st))]},X.gu))})]});return vt.jsxs("div",{className:"stats-sidebar-layout",children:[vt.jsxs("aside",{className:"stats-sidebar",children:[vt.jsxs("div",{className:"sidebar-section",children:[vt.jsx("h4",{children:"  "}),vt.jsx("input",{type:"month",className:"stats-input",min:t,max:r,value:a,onChange:X=>g(X.target.value)})]}),vt.jsxs("div",{className:"sidebar-section",children:[vt.jsx("h4",{children:" "}),vt.jsx("label",{children:""}),vt.jsxs("select",{className:"stats-input",value:V,onChange:X=>$(X.target.value),children:[vt.jsx("option",{children:""}),vt.jsx("option",{value:"",children:" (tCO2eq)"}),vt.jsx("option",{value:"",children:" (tCO2eq)"})]}),vt.jsx("label",{children:""}),vt.jsx("select",{className:"stats-input",value:s,onChange:Y,children:Object.keys(vs).map(X=>vt.jsx("option",{value:X,children:vs[X].name},X))})]}),vt.jsx("div",{className:"sidebar-section",children:vt.jsx("button",{className:"stats-button-primary",onClick:K,children:" "})})]}),vt.jsxs("main",{className:"main-content",children:[vt.jsx("h2",{children:"  "}),vt.jsxs("div",{className:"chart-section",children:[vt.jsx("h3",{children:"  "}),vt.jsxs("p",{children:[vs[s]?vs[s].name:""," ",a.split("-")[0]," ",V," ",V===""?"":"","     "]}),vt.jsx("div",{className:"chart-container",children:vt.jsx(VL,{width:"100%",height:300,children:vt.jsxs(oB,{data:E,margin:{top:30,right:30,left:50,bottom:5},children:[vt.jsx(pM,{strokeDasharray:"3 3"}),vt.jsx(gM,{dataKey:"name",scale:"point",axisLine:!1,tickLine:!1,tick:{fontSize:13}}),vt.jsx(yM,{axisLine:!1,tickLine:!1,tickFormatter:X=>X.toLocaleString(),domain:[0,I],tickCount:5,tick:{fontSize:13},label:{value:"(tCO2eq)",position:"top",offset:17,fontWeight:"bold",fontSize:14,fill:"#333"}}),vt.jsx(v3,{formatter:X=>[`${X.toLocaleString()} tCO2eq`," "]}),vt.jsx(mM,{type:"monotone",dataKey:"",stroke:"#ffbb40",fill:"#ffd54f",strokeWidth:2,activeDot:{r:6},dot:{r:4,fill:"#ffbb40"}})]})})})]}),vt.jsxs("div",{className:"table-section",children:[vt.jsx("h3",{children:vs[s]?`${vs[s].name} ${a.split("-")[0]}   `:"   "}),vt.jsx("p",{children:"     ."}),vt.jsx("div",{className:"stats-table-container",children:W()})]})]})]})}function mot(t){const e=t.replace(/\/$/,"");return e.endsWith("/api")?e:`${e}/api`}function got(t){const e=String(t??"").match(/(\d{4})\D*?(\d{1,2})/);return e?`${e[1]}${e[2].padStart(2,"0")}`:null}async function yot({apiBase:t,year:e}){const n=mot(t),i=[`${n}/energy/country?year=${e}`,`${n}/energy/country`,`${n}/energy?cityId=0&countyId=0`];let r=null;for(const a of i)try{const g=await fetch(a);if(!g.ok)continue;const y=await g.json();if(r=Array.isArray(y?.items)?y.items:Array.isArray(y)?y:null,r&&r.length)break}catch{}if(!r)return{elec:Array(12).fill(0),gas:Array(12).fill(0)};const s=Array(12).fill(0),c=Array(12).fill(0);for(const a of r){const g=lB(a),y=got(Qw(g,["YEAR_MONTH","yearMonth","YM","ym"]));if(!y||y.slice(0,4)!==String(e))continue;const x=Number(y.slice(4,6));if(!Number.isFinite(x)||x<1||x>12)continue;const E=JO(Qw(g,["USE_ELECT","useElect","ELEC","elec","ELEC_KWH"])),O=JO(Qw(g,["USE_GAS","useGas","GAS","gas","GAS_M3"]));s[x-1]+=E,c[x-1]+=O}return{elec:s,gas:c}}function lB(t,e="",n={}){for(const[i,r]of Object.entries(t||{})){const s=e?`${e}.${i}`:i;r&&typeof r=="object"&&!Array.isArray(r)?lB(r,s,n):n[s]=r}return n}function Qw(t,e){for(const n of e)if(n in t)return t[n]}const JO=t=>{const e=Number(t);return Number.isFinite(e)?e:0};function tD({title:t,unit:e,data:n,color:i="#2a84ff",onClick:r,active:s=!1}){const c=(n||[]).map(V=>Number(V)||0),a=Math.max(1,...c),g=V=>V>=1e12?{factor:1e12,suffix:""}:V>=1e8?{factor:1e8,suffix:""}:V>=1e4?{factor:1e4,suffix:""}:{factor:1,suffix:""},{factor:y,suffix:x}=g(a),E=c.map(V=>V/y),O=Math.max(1,...E),I=["1","2","3","4","5","6","7","8","9","10","11","12"],F=x?`${x}${e}`:e;return vt.jsxs("div",{onClick:r,style:{border:s?"1px solid #f97316":"1px solid #e6e8ef",boxShadow:s?"0 0 0 1px rgba(249, 115, 22, 0.25)":"none",borderRadius:12,padding:"14px 14px 12px",background:"#fff",marginTop:12,cursor:r?"pointer":"default",transition:"border-color 0.15s ease, box-shadow 0.15s ease"},children:[vt.jsxs("div",{style:{fontSize:13,fontWeight:700,marginBottom:8},children:[t," ",vt.jsxs("span",{style:{color:"#889",fontWeight:500},children:["(",F,")"]})]}),vt.jsx("div",{style:{height:190,display:"flex",alignItems:"flex-end",gap:8},children:E.map((V,$)=>{const K=O>0?V/O:0,Y=Math.round(K*130),W=V>0?V.toLocaleString(void 0,{maximumFractionDigits:1}):"";return vt.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,minWidth:12},children:[vt.jsx("div",{style:{fontSize:11,color:"#555",marginBottom:4,minHeight:14,whiteSpace:"nowrap"},children:W}),vt.jsx("div",{title:`${I[$]}: ${W}`,style:{width:16,height:Y,borderRadius:4,background:i,opacity:.9,transition:"height 0.2s ease"}}),vt.jsx("div",{style:{fontSize:10,color:"#777",marginTop:4},children:I[$]})]},$)})})]})}function _ot(){const t=Z.useMemo(()=>new Date,[]),[e,n]=Z.useState(t.getFullYear()),[i,r]=Z.useState("elec"),s="/api",c=Z.useMemo(()=>{const I=t.getFullYear(),F=I-5;return Array.from({length:I-F+1},(V,$)=>I-$)},[t]),[a,g]=Z.useState(Array(12).fill(0)),[y,x]=Z.useState(Array(12).fill(0)),[E,O]=Z.useState(!1);return Z.useEffect(()=>{let I=!0;return(async()=>{try{O(!0);const F=await yot({apiBase:s,year:e});if(!I)return;g(F.elec),x(F.gas)}finally{I&&O(!1)}})(),()=>{I=!1}},[s,e]),vt.jsx("div",{className:Si.wrap,children:vt.jsxs("div",{className:Si.container,children:[vt.jsxs("header",{className:Si.header,children:[vt.jsx("h1",{children:"  "}),vt.jsx("p",{children:"               ."})]}),vt.jsxs("div",{className:Si.layout,children:[vt.jsxs("aside",{className:Si.side,children:[vt.jsxs("div",{className:Si.filterCard,children:[vt.jsx("div",{className:Si.cardTitle,children:"  "}),vt.jsxs("div",{className:Si.formRow,children:[vt.jsx("label",{className:Si.label,children:""}),vt.jsx("select",{className:Si.selectBig,value:e,onChange:I=>n(Number(I.target.value)),children:c.map(I=>vt.jsxs("option",{value:I,children:[I,""]},I))})]}),vt.jsx("div",{className:Si.sep}),vt.jsx("div",{className:Si.cardTitle,children:" "}),vt.jsxs("div",{className:Si.formRow,children:[vt.jsx("label",{className:Si.label,children:""}),vt.jsxs("select",{className:Si.select,value:i,onChange:I=>r(I.target.value),children:[vt.jsx("option",{value:"elec",children:"(kWh)"}),vt.jsx("option",{value:"gas",children:"(m)"})]})]})]}),vt.jsxs("div",{style:{marginTop:8},children:[vt.jsx(tD,{title:"  ",unit:"MWh ( kWh)",data:a,color:"#2a84ff",onClick:()=>r("elec"),active:i==="elec"}),vt.jsx(tD,{title:"  ",unit:"m ( m)",data:y,color:"#ff7a00",onClick:()=>r("gas"),active:i==="gas"}),E&&vt.jsx("div",{style:{fontSize:12,color:"#666",marginTop:6},children:"   "})]})]}),vt.jsxs("section",{className:Si.card,children:[vt.jsxs("div",{className:Si.cardHead,children:[vt.jsx("h3",{children:"  "}),vt.jsx("div",{className:Si.cardSub})]}),vt.jsx("div",{className:Si.panel,style:{height:720},children:vt.jsx(Tz,{apiBase:s,year:e,metric:i,autoPlay:!0,intervalMs:900})})]})]})]})})}const Ci={"scenario-page":"_scenario-page_qvlc3_1","scenario-header":"_scenario-header_qvlc3_19","scenario-controls":"_scenario-controls_qvlc3_55","control-group":"_control-group_qvlc3_75","slider-wrapper":"_slider-wrapper_qvlc3_133","slider-header":"_slider-header_qvlc3_145","slider-value":"_slider-value_qvlc3_171","scenario-main":"_scenario-main_qvlc3_197","chart-card":"_chart-card_qvlc3_207","chart-header":"_chart-header_qvlc3_227","chart-meta":"_chart-meta_qvlc3_259","chart-wrapper":"_chart-wrapper_qvlc3_283","stats-grid":"_stats-grid_qvlc3_295","stat-card":"_stat-card_qvlc3_307","stat-value":"_stat-value_qvlc3_343","stat-diff":"_stat-diff_qvlc3_355","stat-highlight":"_stat-highlight_qvlc3_365","distribution-bar":"_distribution-bar_qvlc3_375","reset-button":"_reset-button_qvlc3_409","helper-text":"_helper-text_qvlc3_453","error-box":"_error-box_qvlc3_463","loading-box":"_loading-box_qvlc3_479"};sd.register(LI,RI,SI,v_,DI,zI,OI);const vot=.4541,xot=.202,bot=.3,jm={min:-50,max:50,step:1},wot=t=>{const e=String(t??"");if(e.length!==6)return{label:e,year:null,month:null};const n=Number(e.slice(0,4)),i=Number(e.slice(4));return{label:`${n}-${String(i).padStart(2,"0")}`,year:n,month:i}},Jw=(t,e)=>{const n=Number(t??0),i=Number(e??0);return n*vot+i*xot},eD=({cityId:t,countyId:e})=>{const n=new URLSearchParams;return e?(n.append("countyId",e),n):(t&&n.append("cityId",t),n)},nD=(t,e,n)=>t.map(i=>{const{label:r,year:s,month:c}=wot(i.yearMonth);return{label:r,year:s,month:c,electricity:Number(i[e]??0),gas:Number(i[n]??0)}}).filter(i=>i.year!=null).sort((i,r)=>i.label>r.label?1:-1);function Sot(){const[t,e]=Z.useState("0"),[n,i]=Z.useState("0"),[r,s]=Z.useState(0),[c,a]=Z.useState(0),[g,y]=Z.useState([]),[x,E]=Z.useState([]),[O,I]=Z.useState(!1),[F,V]=Z.useState(null),$=Z.useRef(null);Z.useEffect(()=>{const Tt=new AbortController;return(async()=>{I(!0),V(null);try{const $t=eD({cityId:t,countyId:n}),ft=eD({cityId:t,countyId:n}),[Mt,Lt]=await Promise.all([fetch(`/api/energy${$t.toString()?`?${$t.toString()}`:""}`,{signal:Tt.signal,headers:{Accept:"application/json"}}),fetch(`/api/predict-energy${ft.toString()?`?${ft.toString()}`:""}`,{signal:Tt.signal,headers:{Accept:"application/json"}})]);if(!Mt.ok)throw new Error("   ");if(!Lt.ok)throw new Error("   ");const Xt=await Mt.json(),re=await Lt.json();y(Array.isArray(Xt.items)?Xt.items:[]),E(Array.isArray(re.items)?re.items:[])}catch($t){$t.name!=="AbortError"&&(console.error($t),V($t.message||"    ."))}finally{I(!1)}})(),()=>Tt.abort()},[t,n]);const K=Z.useMemo(()=>nD(g,"useElect","useGas").filter(Tt=>Tt.year==null?!1:Tt.year<2025?!0:Tt.year===2025?(Tt.month??0)<=6:!1),[g]),Y=Z.useMemo(()=>K.map(Tt=>({...Tt,ghg:Jw(Tt.electricity,Tt.gas)})),[K]),W=Z.useMemo(()=>Y.length>0?Y[Y.length-1]:null,[Y]),X=Z.useMemo(()=>nD(x,"preElect","preGas"),[x]),J=Z.useMemo(()=>{const Tt=X.map(Bt=>({...Bt,ghg:Jw(Bt.electricity,Bt.gas)})).sort((Bt,$t)=>Bt.label>$t.label?1:-1);return W&&(Tt.some($t=>$t.label===W.label)||Tt.unshift({label:W.label,year:W.year,month:W.month,electricity:W.electricity,gas:W.gas,ghg:W.ghg})),Tt},[X,W]),st=Z.useMemo(()=>{const Tt=1+r/100,Bt=1+c/100,$t=X.map(ft=>{const Mt=ft.electricity*Tt,Lt=ft.gas*Bt;return{...ft,adjustedElectricity:Mt,adjustedGas:Lt,ghg:Jw(Mt,Lt)}}).sort((ft,Mt)=>ft.label>Mt.label?1:-1);return W&&($t.some(Mt=>Mt.label===W.label)||$t.unshift({label:W.label,year:W.year,month:W.month,adjustedElectricity:W.electricity,adjustedGas:W.gas,ghg:W.ghg})),$t},[X,r,c,W]),ct=Z.useMemo(()=>{const Tt=new Set([...Y.map(Bt=>Bt.label),...J.map(Bt=>Bt.label),...st.map(Bt=>Bt.label)]);return Array.from(Tt).sort((Bt,$t)=>Bt>$t?1:-1)},[Y,J,st]),it=Z.useMemo(()=>{const Tt=new Map;return ct.forEach(Bt=>{const[$t,ft]=Bt.split("-"),Mt=Number($t),Lt=Number(ft);!Number.isNaN(Mt)&&!Number.isNaN(Lt)&&Tt.set(Bt,Mt*100+Lt)}),Tt},[ct]),ut=Z.useMemo(()=>{const Tt=new Map;return J.forEach(Bt=>Tt.set(Bt.label,Bt)),Tt},[J]),xt=Z.useMemo(()=>{const Tt=new Map;return st.forEach(Bt=>Tt.set(Bt.label,Bt)),Tt},[st]),wt=Z.useMemo(()=>!W||W.year==null||W.month==null?null:W.year*100+W.month,[W]),St=Z.useMemo(()=>{const Tt=[{label:"  (2020~2025)",data:ct.map(Bt=>{const $t=it.get(Bt);if(wt!=null&&$t!=null&&$t>wt)return null;const ft=Y.find(Mt=>Mt.label===Bt);return ft?ft.ghg:null}),borderColor:"#2563eb",backgroundColor:"rgba(37, 99, 235, 0.25)",borderWidth:2,tension:0,spanGaps:!1,pointRadius:3},{label:"  ()",data:ct.map(Bt=>ut.get(Bt)?.ghg??null),borderColor:"#fbbf24",backgroundColor:"rgba(251, 191, 36, 0.15)",borderWidth:2,borderDash:[6,4],pointRadius:3,tension:.3,cubicInterpolationMode:"monotone",spanGaps:!0},{label:"  ( )",data:ct.map(Bt=>xt.get(Bt)?.ghg??null),borderColor:"#f97316",backgroundColor:"rgba(249, 115, 22, 0.15)",borderWidth:2,borderDash:[8,6],pointRadius:3,tension:.3,cubicInterpolationMode:"monotone",spanGaps:!0}];return{labels:ct,datasets:Tt}},[ct,it,wt,Y,ut,xt]),le=Z.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:Tt=>{const Bt=Tt.parsed.y??0;return`${Tt.dataset.label}: ${Bt.toLocaleString("ko-KR",{minimumFractionDigits:2,maximumFractionDigits:2})} tCO`}}}},scales:{y:{title:{display:!0,text:"  (tCO)"},ticks:{callback:Tt=>Number(Tt).toLocaleString("ko-KR",{maximumFractionDigits:0})}},x:{ticks:{maxRotation:45,minRotation:30}}}}),[]),pe=Z.useMemo(()=>{const Tt=st.reduce((Ce,Ee)=>Ce+Ee.ghg,0),Bt=Y.reduce((Ce,Ee)=>Ce+Ee.ghg,0),ft=(Y[Y.length-1]?.ghg??Bt)*(1-bot),Mt=st.filter(Ce=>Ce.year===2030).reduce((Ce,Ee)=>Ce+Ee.ghg,0),Lt=Mt-ft,Xt=ft>0?ft/(Mt||ft)*100:0,re=st.reduce((Ce,Ee)=>Ce+Ee.adjustedElectricity,0),ce=st.reduce((Ce,Ee)=>Ce+Ee.adjustedGas,0),Me=re+ce,Ne=Me?re/Me*100:0,Gt=Me?ce/Me*100:0;return{totalPredictedGhG:Tt,target2030:ft,predicted2030:Mt,delta:Lt,achievement:Xt,electricityPortion:Ne,gasPortion:Gt}},[st,Y]),Te=()=>{s(0),a(0)},Nt=Tt=>{Tt.preventDefault();const Bt=new FormData(Tt.target),$t=Bt.get("cityId")?.trim(),ft=Bt.get("countyId")?.trim();e($t||""),i(ft||"")},Ct=()=>{e("0"),i("0"),$.current&&($.current.cityId.value="0",$.current.countyId.value="0")};return vt.jsxs("section",{className:Ci["scenario-page"],children:[vt.jsxs("header",{className:Ci["scenario-header"],children:[vt.jsx("h1",{children:"  "}),vt.jsx("p",{children:"          . (2020~2025) (2025~2030)      ."})]}),vt.jsxs("form",{ref:$,className:Ci["scenario-controls"],onSubmit:Nt,children:[vt.jsxs("div",{className:Ci["control-group"],children:[vt.jsx("label",{htmlFor:"cityId",children:" "}),vt.jsx("input",{id:"cityId",name:"cityId",type:"number",placeholder:": 11000 ( )",defaultValue:t}),vt.jsx("p",{className:Ci["helper-text"],children:"        .    ."})]}),vt.jsxs("div",{className:Ci["control-group"],children:[vt.jsx("label",{htmlFor:"countyId",children:"/ "}),vt.jsx("input",{id:"countyId",name:"countyId",type:"number",placeholder:": 11140 ( )",defaultValue:n}),vt.jsx("p",{className:Ci["helper-text"],children:"/       .     ."})]}),vt.jsxs("div",{className:Ci["slider-wrapper"],children:[vt.jsxs("div",{className:Ci["slider-header"],children:[vt.jsx("span",{children:"  "}),vt.jsxs("span",{className:Ci["slider-value"],children:[r>0?"+":"",r,"%"]})]}),vt.jsx("input",{type:"range",min:jm.min,max:jm.max,step:jm.step,value:r,onChange:Tt=>s(Number(Tt.target.value))})]}),vt.jsxs("div",{className:Ci["slider-wrapper"],children:[vt.jsxs("div",{className:Ci["slider-header"],children:[vt.jsx("span",{children:"  "}),vt.jsxs("span",{className:Ci["slider-value"],children:[c>0?"+":"",c,"%"]})]}),vt.jsx("input",{type:"range",min:jm.min,max:jm.max,step:jm.step,value:c,onChange:Tt=>a(Number(Tt.target.value))})]}),vt.jsxs("div",{className:Ci["control-group"],children:[vt.jsx("label",{children:""}),vt.jsx("button",{className:Ci["reset-button"],type:"submit",children:"  "}),vt.jsx("button",{className:Ci["reset-button"],type:"button",onClick:Te,style:{backgroundColor:"#d9480f"},children:" "}),vt.jsx("button",{className:Ci["reset-button"],type:"button",onClick:Ct,style:{backgroundColor:"#0f5132"},children:"  "})]})]}),O&&vt.jsx("div",{className:Ci["loading-box"],children:"  ..."}),F&&vt.jsx("div",{className:Ci["error-box"],children:F}),vt.jsxs("div",{className:Ci["scenario-main"],children:[vt.jsxs("div",{className:Ci["chart-card"],children:[vt.jsxs("div",{className:Ci["chart-header"],children:[vt.jsx("h2",{children:"  "}),vt.jsx("p",{children:"          . 2025    /      ."}),vt.jsxs("div",{className:Ci["chart-meta"],children:[vt.jsxs("span",{children:["  : ",vt.jsx("strong",{children:W?.label??" "})]}),vt.jsxs("span",{children:["  : ",Y.length]}),vt.jsxs("span",{children:["  : ",J.length]})]})]}),vt.jsx("div",{className:Ci["chart-wrapper"],style:{height:"420px"},children:vt.jsx(j2,{data:St,options:le})})]}),vt.jsxs("div",{className:Ci["stats-grid"],children:[vt.jsxs("div",{className:Ci["stat-card"],children:[vt.jsx("h3",{children:"   "}),vt.jsxs("div",{className:Ci["stat-value"],children:[pe.totalPredictedGhG.toLocaleString("ko-KR",{minimumFractionDigits:2,maximumFractionDigits:2})," ","tCO"]}),vt.jsx("p",{className:Ci["helper-text"],children:"2025~2030   "})]}),vt.jsxs("div",{className:Ci["stat-card"],children:[vt.jsx("h3",{children:"2030  "}),vt.jsxs("div",{className:Ci["stat-value"],children:[pe.delta>=0?"+":"",pe.delta.toLocaleString("ko-KR",{minimumFractionDigits:2,maximumFractionDigits:2})," ","tCO"]}),vt.jsxs("p",{className:Ci["stat-diff"],children:[" :"," ",vt.jsxs("span",{className:Ci["stat-highlight"],children:[pe.target2030.toLocaleString("ko-KR",{minimumFractionDigits:2,maximumFractionDigits:2})," ","tCO"]})]}),vt.jsxs("p",{className:Ci["helper-text"],children:[": ",pe.achievement.toFixed(1),"%"]})]}),vt.jsxs("div",{className:Ci["stat-card"],children:[vt.jsx("h3",{children:" "}),vt.jsxs("div",{className:Ci["distribution-bar"],children:[vt.jsx("span",{style:{width:`${pe.electricityPortion}%`,background:"#2563eb"}}),vt.jsx("span",{style:{width:`${pe.gasPortion}%`,background:"#f97316"}})]}),vt.jsxs("p",{className:Ci["stat-diff"],children:[" ",pe.electricityPortion.toFixed(1),"%   ",pe.gasPortion.toFixed(1),"%"]}),vt.jsx("p",{className:Ci["helper-text"],children:"      ."})]})]})]})]})}function Tot(){return vt.jsxs(V5,{children:[vt.jsx(J5,{}),vt.jsx("main",{className:"pt-20 min-h-[80vh] bg-[#fffbea]",children:vt.jsxs(v5,{children:[vt.jsx(Jd,{path:"/",element:vt.jsx(c9,{})}),vt.jsx(Jd,{path:"scenario",element:vt.jsx(Sot,{})}),vt.jsx(Jd,{path:"gas-emission",element:vt.jsx(A7,{})}),vt.jsx(Jd,{path:"energy-usage",element:vt.jsx(_ot,{})}),vt.jsx(Jd,{path:"usage-stats",element:vt.jsx(dot,{})}),vt.jsx(Jd,{path:"gas-stats",element:vt.jsx(pot,{})})]})}),vt.jsx(t4,{})]})}CB.createRoot(document.getElementById("root")).render(vt.jsx(Z.StrictMode,{children:vt.jsx(Tot,{})}));
